var __defProp=Object.defineProperty,__defNormalProp=(e,t,a)=>t in e?__defProp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,__publicField=(e,t,a)=>(__defNormalProp(e,"symbol"!=typeof t?t+"":t,a),a);if("undefined"==typeof Promise||Promise.prototype.finally||(Promise.prototype.finally=function(e){const t=this.constructor;return this.then((a=>t.resolve(e()).then((()=>a))),(a=>t.resolve(e()).then((()=>{throw a}))))}),"undefined"!=typeof uni&&uni&&uni.requireGlobal){const e=uni.requireGlobal();ArrayBuffer=e.ArrayBuffer,Int8Array=e.Int8Array,Uint8Array=e.Uint8Array,Uint8ClampedArray=e.Uint8ClampedArray,Int16Array=e.Int16Array,Uint16Array=e.Uint16Array,Int32Array=e.Int32Array,Uint32Array=e.Uint32Array,Float32Array=e.Float32Array,Float64Array=e.Float64Array,BigInt64Array=e.BigInt64Array,BigUint64Array=e.BigUint64Array}uni.restoreGlobal&&uni.restoreGlobal(Vue,weex,plus,setTimeout,clearTimeout,setInterval,clearInterval),function(e){"use strict";var t,a;function n(e){return weex.requireModule(e)}function o(e,t,...a){uni.__log__?uni.__log__(e,t,...a):console[e].apply(console,[...a,t])}function i(e,t){return"string"==typeof e?t:e}const r=(t,a=0)=>(a,n=e.getCurrentInstance())=>{!e.isInSSRComponentSetup&&e.injectHook(t,a,n)},s=r("onShow",3),l=r("onLoad",2),c=r("onReady",2),u=r("onUnload",2),d=r("onPageScroll",2),m=r("onReachBottom",2),p=r("onPullDownRefresh",2);var h="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function v(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var g={exports:{}},f={exports:{}},y=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,62,0,62,0,63,52,53,54,55,56,57,58,59,60,61,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,0,0,0,0,63,0,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51];const _={getRandomValues(e){if(!(e instanceof Int8Array||e instanceof Uint8Array||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8ClampedArray))throw new Error("Expected an integer array");if(e.byteLength>65536)throw new Error("Can only request a maximum of 65536 bytes");return function(e,t){for(var a,n=e.length,o="="===e[n-2]?2:"="===e[n-1]?1:0,i=0,r=n-o&4294967292,s=0;s<r;s+=4)a=y[e.charCodeAt(s)]<<18|y[e.charCodeAt(s+1)]<<12|y[e.charCodeAt(s+2)]<<6|y[e.charCodeAt(s+3)],t[i++]=a>>16&255,t[i++]=a>>8&255,t[i++]=255&a;1===o&&(a=y[e.charCodeAt(s)]<<10|y[e.charCodeAt(s+1)]<<4|y[e.charCodeAt(s+2)]>>2,t[i++]=a>>8&255,t[i++]=255&a),2===o&&(a=y[e.charCodeAt(s)]<<2|y[e.charCodeAt(s+1)]>>4,t[i++]=255&a)}(n("DCloud-Crypto").getRandomValues(e.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e}};var k,E={exports:{}};k=E,function(e){var t,a=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,n=Math.ceil,o=Math.floor,i="[BigNumber Error] ",r=i+"Number primitive has more than 15 significant digits: ",s=1e14,l=14,c=9007199254740991,u=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],d=1e7,m=1e9;function p(e){var t=0|e;return e>0||e===t?t:t-1}function h(e){for(var t,a,n=1,o=e.length,i=e[0]+"";n<o;){for(t=e[n++]+"",a=l-t.length;a--;t="0"+t);i+=t}for(o=i.length;48===i.charCodeAt(--o););return i.slice(0,o+1||1)}function v(e,t){var a,n,o=e.c,i=t.c,r=e.s,s=t.s,l=e.e,c=t.e;if(!r||!s)return null;if(a=o&&!o[0],n=i&&!i[0],a||n)return a?n?0:-s:r;if(r!=s)return r;if(a=r<0,n=l==c,!o||!i)return n?0:!o^a?1:-1;if(!n)return l>c^a?1:-1;for(s=(l=o.length)<(c=i.length)?l:c,r=0;r<s;r++)if(o[r]!=i[r])return o[r]>i[r]^a?1:-1;return l==c?0:l>c^a?1:-1}function g(e,t,a,n){if(e<t||e>a||e!==o(e))throw Error(i+(n||"Argument")+("number"==typeof e?e<t||e>a?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function f(e){var t=e.c.length-1;return p(e.e/l)==t&&e.c[t]%2!=0}function y(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function E(e,t,a){var n,o;if(t<0){for(o=a+".";++t;o+=a);e=o+e}else if(++t>(n=e.length)){for(o=a,t-=n;--t;o+=a);e+=o}else t<n&&(e=e.slice(0,t)+"."+e.slice(t));return e}t=function e(t){var k,x,N,w,C,M=G.prototype={constructor:G,toString:null,valueOf:null},S=new G(1),I=20,T=4,D=-7,b=21,V=-1e7,A=1e7,L=!1,R=1,O=0,B={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},P="0123456789abcdefghijklmnopqrstuvwxyz",U=!0;function G(e,t){var n,i,s,u,d,m,p,h,v=this;if(!(v instanceof G))return new G(e,t);if(null==t){if(e&&!0===e._isBigNumber)return v.s=e.s,void(!e.c||e.e>A?v.c=v.e=null:e.e<V?v.c=[v.e=0]:(v.e=e.e,v.c=e.c.slice()));if((m="number"==typeof e)&&0*e==0){if(v.s=1/e<0?(e=-e,-1):1,e===~~e){for(u=0,d=e;d>=10;d/=10,u++);return void(u>A?v.c=v.e=null:(v.e=u,v.c=[e]))}h=String(e)}else{if(!a.test(h=String(e)))return N(v,h,m);v.s=45==h.charCodeAt(0)?(h=h.slice(1),-1):1}(u=h.indexOf("."))>-1&&(h=h.replace(".","")),(d=h.search(/e/i))>0?(u<0&&(u=d),u+=+h.slice(d+1),h=h.substring(0,d)):u<0&&(u=h.length)}else{if(g(t,2,P.length,"Base"),10==t&&U)return H(v=new G(e),I+v.e+1,T);if(h=String(e),m="number"==typeof e){if(0*e!=0)return N(v,h,m,t);if(v.s=1/e<0?(h=h.slice(1),-1):1,G.DEBUG&&h.replace(/^0\.0*|\./,"").length>15)throw Error(r+e)}else v.s=45===h.charCodeAt(0)?(h=h.slice(1),-1):1;for(n=P.slice(0,t),u=d=0,p=h.length;d<p;d++)if(n.indexOf(i=h.charAt(d))<0){if("."==i){if(d>u){u=p;continue}}else if(!s&&(h==h.toUpperCase()&&(h=h.toLowerCase())||h==h.toLowerCase()&&(h=h.toUpperCase()))){s=!0,d=-1,u=0;continue}return N(v,String(e),m,t)}m=!1,(u=(h=x(h,t,10,v.s)).indexOf("."))>-1?h=h.replace(".",""):u=h.length}for(d=0;48===h.charCodeAt(d);d++);for(p=h.length;48===h.charCodeAt(--p););if(h=h.slice(d,++p)){if(p-=d,m&&G.DEBUG&&p>15&&(e>c||e!==o(e)))throw Error(r+v.s*e);if((u=u-d-1)>A)v.c=v.e=null;else if(u<V)v.c=[v.e=0];else{if(v.e=u,v.c=[],d=(u+1)%l,u<0&&(d+=l),d<p){for(d&&v.c.push(+h.slice(0,d)),p-=l;d<p;)v.c.push(+h.slice(d,d+=l));d=l-(h=h.slice(d)).length}else d-=p;for(;d--;h+="0");v.c.push(+h)}}else v.c=[v.e=0]}function F(e,t,a,n){var o,i,r,s,l;if(null==a?a=T:g(a,0,8),!e.c)return e.toString();if(o=e.c[0],r=e.e,null==t)l=h(e.c),l=1==n||2==n&&(r<=D||r>=b)?y(l,r):E(l,r,"0");else if(i=(e=H(new G(e),t,a)).e,s=(l=h(e.c)).length,1==n||2==n&&(t<=i||i<=D)){for(;s<t;l+="0",s++);l=y(l,i)}else if(t-=r+(2===n&&i>r),l=E(l,i,"0"),i+1>s){if(--t>0)for(l+=".";t--;l+="0");}else if((t+=i-s)>0)for(i+1==s&&(l+=".");t--;l+="0");return e.s<0&&o?"-"+l:l}function q(e,t){for(var a,n,o=1,i=new G(e[0]);o<e.length;o++)(!(n=new G(e[o])).s||(a=v(i,n))===t||0===a&&i.s===t)&&(i=n);return i}function z(e,t,a){for(var n=1,o=t.length;!t[--o];t.pop());for(o=t[0];o>=10;o/=10,n++);return(a=n+a*l-1)>A?e.c=e.e=null:a<V?e.c=[e.e=0]:(e.e=a,e.c=t),e}function H(e,t,a,i){var r,c,d,m,p,h,v,g=e.c,f=u;if(g){e:{for(r=1,m=g[0];m>=10;m/=10,r++);if((c=t-r)<0)c+=l,d=t,p=g[h=0],v=o(p/f[r-d-1]%10);else if((h=n((c+1)/l))>=g.length){if(!i)break e;for(;g.length<=h;g.push(0));p=v=0,r=1,d=(c%=l)-l+1}else{for(p=m=g[h],r=1;m>=10;m/=10,r++);v=(d=(c%=l)-l+r)<0?0:o(p/f[r-d-1]%10)}if(i=i||t<0||null!=g[h+1]||(d<0?p:p%f[r-d-1]),i=a<4?(v||i)&&(0==a||a==(e.s<0?3:2)):v>5||5==v&&(4==a||i||6==a&&(c>0?d>0?p/f[r-d]:0:g[h-1])%10&1||a==(e.s<0?8:7)),t<1||!g[0])return g.length=0,i?(t-=e.e+1,g[0]=f[(l-t%l)%l],e.e=-t||0):g[0]=e.e=0,e;if(0==c?(g.length=h,m=1,h--):(g.length=h+1,m=f[l-c],g[h]=d>0?o(p/f[r-d]%f[d])*m:0),i)for(;;){if(0==h){for(c=1,d=g[0];d>=10;d/=10,c++);for(d=g[0]+=m,m=1;d>=10;d/=10,m++);c!=m&&(e.e++,g[0]==s&&(g[0]=1));break}if(g[h]+=m,g[h]!=s)break;g[h--]=0,m=1}for(c=g.length;0===g[--c];g.pop());}e.e>A?e.c=e.e=null:e.e<V&&(e.c=[e.e=0])}return e}function $(e){var t,a=e.e;return null===a?e.toString():(t=h(e.c),t=a<=D||a>=b?y(t,a):E(t,a,"0"),e.s<0?"-"+t:t)}return G.clone=e,G.ROUND_UP=0,G.ROUND_DOWN=1,G.ROUND_CEIL=2,G.ROUND_FLOOR=3,G.ROUND_HALF_UP=4,G.ROUND_HALF_DOWN=5,G.ROUND_HALF_EVEN=6,G.ROUND_HALF_CEIL=7,G.ROUND_HALF_FLOOR=8,G.EUCLID=9,G.config=G.set=function(e){var t,a;if(null!=e){if("object"!=typeof e)throw Error(i+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(g(a=e[t],0,m,t),I=a),e.hasOwnProperty(t="ROUNDING_MODE")&&(g(a=e[t],0,8,t),T=a),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((a=e[t])&&a.pop?(g(a[0],-m,0,t),g(a[1],0,m,t),D=a[0],b=a[1]):(g(a,-m,m,t),D=-(b=a<0?-a:a))),e.hasOwnProperty(t="RANGE"))if((a=e[t])&&a.pop)g(a[0],-m,-1,t),g(a[1],1,m,t),V=a[0],A=a[1];else{if(g(a,-m,m,t),!a)throw Error(i+t+" cannot be zero: "+a);V=-(A=a<0?-a:a)}if(e.hasOwnProperty(t="CRYPTO")){if((a=e[t])!==!!a)throw Error(i+t+" not true or false: "+a);if(a){if(void 0===_||!_||!_.getRandomValues&&!_.randomBytes)throw L=!a,Error(i+"crypto unavailable");L=a}else L=a}if(e.hasOwnProperty(t="MODULO_MODE")&&(g(a=e[t],0,9,t),R=a),e.hasOwnProperty(t="POW_PRECISION")&&(g(a=e[t],0,m,t),O=a),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(a=e[t]))throw Error(i+t+" not an object: "+a);B=a}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(a=e[t])||/^.?$|[+\-.\s]|(.).*\1/.test(a))throw Error(i+t+" invalid: "+a);U="0123456789"==a.slice(0,10),P=a}}return{DECIMAL_PLACES:I,ROUNDING_MODE:T,EXPONENTIAL_AT:[D,b],RANGE:[V,A],CRYPTO:L,MODULO_MODE:R,POW_PRECISION:O,FORMAT:B,ALPHABET:P}},G.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!G.DEBUG)return!0;var t,a,n=e.c,r=e.e,c=e.s;e:if("[object Array]"=={}.toString.call(n)){if((1===c||-1===c)&&r>=-m&&r<=m&&r===o(r)){if(0===n[0]){if(0===r&&1===n.length)return!0;break e}if((t=(r+1)%l)<1&&(t+=l),String(n[0]).length==t){for(t=0;t<n.length;t++)if((a=n[t])<0||a>=s||a!==o(a))break e;if(0!==a)return!0}}}else if(null===n&&null===r&&(null===c||1===c||-1===c))return!0;throw Error(i+"Invalid BigNumber: "+e)},G.maximum=G.max=function(){return q(arguments,-1)},G.minimum=G.min=function(){return q(arguments,1)},G.random=(w=9007199254740992,C=Math.random()*w&2097151?function(){return o(Math.random()*w)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,a,r,s,c,d=0,p=[],h=new G(S);if(null==e?e=I:g(e,0,m),s=n(e/l),L)if(_.getRandomValues){for(t=_.getRandomValues(new Uint32Array(s*=2));d<s;)(c=131072*t[d]+(t[d+1]>>>11))>=9e15?(a=_.getRandomValues(new Uint32Array(2)),t[d]=a[0],t[d+1]=a[1]):(p.push(c%1e14),d+=2);d=s/2}else{if(!_.randomBytes)throw L=!1,Error(i+"crypto unavailable");for(t=_.randomBytes(s*=7);d<s;)(c=281474976710656*(31&t[d])+1099511627776*t[d+1]+4294967296*t[d+2]+16777216*t[d+3]+(t[d+4]<<16)+(t[d+5]<<8)+t[d+6])>=9e15?_.randomBytes(7).copy(t,d):(p.push(c%1e14),d+=7);d=s/7}if(!L)for(;d<s;)(c=C())<9e15&&(p[d++]=c%1e14);for(s=p[--d],e%=l,s&&e&&(c=u[l-e],p[d]=o(s/c)*c);0===p[d];p.pop(),d--);if(d<0)p=[r=0];else{for(r=-1;0===p[0];p.splice(0,1),r-=l);for(d=1,c=p[0];c>=10;c/=10,d++);d<l&&(r-=l-d)}return h.e=r,h.c=p,h}),G.sum=function(){for(var e=1,t=arguments,a=new G(t[0]);e<t.length;)a=a.plus(t[e++]);return a},x=function(){var e="0123456789";function t(e,t,a,n){for(var o,i,r=[0],s=0,l=e.length;s<l;){for(i=r.length;i--;r[i]*=t);for(r[0]+=n.indexOf(e.charAt(s++)),o=0;o<r.length;o++)r[o]>a-1&&(null==r[o+1]&&(r[o+1]=0),r[o+1]+=r[o]/a|0,r[o]%=a)}return r.reverse()}return function(a,n,o,i,r){var s,l,c,u,d,m,p,v,g=a.indexOf("."),f=I,y=T;for(g>=0&&(u=O,O=0,a=a.replace(".",""),m=(v=new G(n)).pow(a.length-g),O=u,v.c=t(E(h(m.c),m.e,"0"),10,o,e),v.e=v.c.length),c=u=(p=t(a,n,o,r?(s=P,e):(s=e,P))).length;0==p[--u];p.pop());if(!p[0])return s.charAt(0);if(g<0?--c:(m.c=p,m.e=c,m.s=i,p=(m=k(m,v,f,y,o)).c,d=m.r,c=m.e),g=p[l=c+f+1],u=o/2,d=d||l<0||null!=p[l+1],d=y<4?(null!=g||d)&&(0==y||y==(m.s<0?3:2)):g>u||g==u&&(4==y||d||6==y&&1&p[l-1]||y==(m.s<0?8:7)),l<1||!p[0])a=d?E(s.charAt(1),-f,s.charAt(0)):s.charAt(0);else{if(p.length=l,d)for(--o;++p[--l]>o;)p[l]=0,l||(++c,p=[1].concat(p));for(u=p.length;!p[--u];);for(g=0,a="";g<=u;a+=s.charAt(p[g++]));a=E(a,c,s.charAt(0))}return a}}(),k=function(){function e(e,t,a){var n,o,i,r,s=0,l=e.length,c=t%d,u=t/d|0;for(e=e.slice();l--;)s=((o=c*(i=e[l]%d)+(n=u*i+(r=e[l]/d|0)*c)%d*d+s)/a|0)+(n/d|0)+u*r,e[l]=o%a;return s&&(e=[s].concat(e)),e}function t(e,t,a,n){var o,i;if(a!=n)i=a>n?1:-1;else for(o=i=0;o<a;o++)if(e[o]!=t[o]){i=e[o]>t[o]?1:-1;break}return i}function a(e,t,a,n){for(var o=0;a--;)e[a]-=o,o=e[a]<t[a]?1:0,e[a]=o*n+e[a]-t[a];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(n,i,r,c,u){var d,m,h,v,g,f,y,_,k,E,x,N,w,C,M,S,I,T=n.s==i.s?1:-1,D=n.c,b=i.c;if(!(D&&D[0]&&b&&b[0]))return new G(n.s&&i.s&&(D?!b||D[0]!=b[0]:b)?D&&0==D[0]||!b?0*T:T/0:NaN);for(k=(_=new G(T)).c=[],T=r+(m=n.e-i.e)+1,u||(u=s,m=p(n.e/l)-p(i.e/l),T=T/l|0),h=0;b[h]==(D[h]||0);h++);if(b[h]>(D[h]||0)&&m--,T<0)k.push(1),v=!0;else{for(C=D.length,S=b.length,h=0,T+=2,(g=o(u/(b[0]+1)))>1&&(b=e(b,g,u),D=e(D,g,u),S=b.length,C=D.length),w=S,x=(E=D.slice(0,S)).length;x<S;E[x++]=0);I=b.slice(),I=[0].concat(I),M=b[0],b[1]>=u/2&&M++;do{if(g=0,(d=t(b,E,S,x))<0){if(N=E[0],S!=x&&(N=N*u+(E[1]||0)),(g=o(N/M))>1)for(g>=u&&(g=u-1),y=(f=e(b,g,u)).length,x=E.length;1==t(f,E,y,x);)g--,a(f,S<y?I:b,y,u),y=f.length,d=1;else 0==g&&(d=g=1),y=(f=b.slice()).length;if(y<x&&(f=[0].concat(f)),a(E,f,x,u),x=E.length,-1==d)for(;t(b,E,S,x)<1;)g++,a(E,S<x?I:b,x,u),x=E.length}else 0===d&&(g++,E=[0]);k[h++]=g,E[0]?E[x++]=D[w]||0:(E=[D[w]],x=1)}while((w++<C||null!=E[0])&&T--);v=null!=E[0],k[0]||k.splice(0,1)}if(u==s){for(h=1,T=k[0];T>=10;T/=10,h++);H(_,r+(_.e=h+m*l-1)+1,c,v)}else _.e=m,_.r=+v;return _}}(),N=function(){var e=/^(-?)0([xbo])(?=\w[\w.]*$)/i,t=/^([^.]+)\.$/,a=/^\.([^.]+)$/,n=/^-?(Infinity|NaN)$/,o=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(r,s,l,c){var u,d=l?s:s.replace(o,"");if(n.test(d))r.s=isNaN(d)?null:d<0?-1:1;else{if(!l&&(d=d.replace(e,(function(e,t,a){return u="x"==(a=a.toLowerCase())?16:"b"==a?2:8,c&&c!=u?e:t})),c&&(u=c,d=d.replace(t,"$1").replace(a,"0.$1")),s!=d))return new G(d,u);if(G.DEBUG)throw Error(i+"Not a"+(c?" base "+c:"")+" number: "+s);r.s=null}r.c=r.e=null}}(),M.absoluteValue=M.abs=function(){var e=new G(this);return e.s<0&&(e.s=1),e},M.comparedTo=function(e,t){return v(this,new G(e,t))},M.decimalPlaces=M.dp=function(e,t){var a,n,o,i=this;if(null!=e)return g(e,0,m),null==t?t=T:g(t,0,8),H(new G(i),e+i.e+1,t);if(!(a=i.c))return null;if(n=((o=a.length-1)-p(this.e/l))*l,o=a[o])for(;o%10==0;o/=10,n--);return n<0&&(n=0),n},M.dividedBy=M.div=function(e,t){return k(this,new G(e,t),I,T)},M.dividedToIntegerBy=M.idiv=function(e,t){return k(this,new G(e,t),0,1)},M.exponentiatedBy=M.pow=function(e,t){var a,r,s,c,u,d,m,p,h=this;if((e=new G(e)).c&&!e.isInteger())throw Error(i+"Exponent not an integer: "+$(e));if(null!=t&&(t=new G(t)),u=e.e>14,!h.c||!h.c[0]||1==h.c[0]&&!h.e&&1==h.c.length||!e.c||!e.c[0])return p=new G(Math.pow(+$(h),u?e.s*(2-f(e)):+$(e))),t?p.mod(t):p;if(d=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new G(NaN);(r=!d&&h.isInteger()&&t.isInteger())&&(h=h.mod(t))}else{if(e.e>9&&(h.e>0||h.e<-1||(0==h.e?h.c[0]>1||u&&h.c[1]>=24e7:h.c[0]<8e13||u&&h.c[0]<=9999975e7)))return c=h.s<0&&f(e)?-0:0,h.e>-1&&(c=1/c),new G(d?1/c:c);O&&(c=n(O/l+2))}for(u?(a=new G(.5),d&&(e.s=1),m=f(e)):m=(s=Math.abs(+$(e)))%2,p=new G(S);;){if(m){if(!(p=p.times(h)).c)break;c?p.c.length>c&&(p.c.length=c):r&&(p=p.mod(t))}if(s){if(0===(s=o(s/2)))break;m=s%2}else if(H(e=e.times(a),e.e+1,1),e.e>14)m=f(e);else{if(0==(s=+$(e)))break;m=s%2}h=h.times(h),c?h.c&&h.c.length>c&&(h.c.length=c):r&&(h=h.mod(t))}return r?p:(d&&(p=S.div(p)),t?p.mod(t):c?H(p,O,T,void 0):p)},M.integerValue=function(e){var t=new G(this);return null==e?e=T:g(e,0,8),H(t,t.e+1,e)},M.isEqualTo=M.eq=function(e,t){return 0===v(this,new G(e,t))},M.isFinite=function(){return!!this.c},M.isGreaterThan=M.gt=function(e,t){return v(this,new G(e,t))>0},M.isGreaterThanOrEqualTo=M.gte=function(e,t){return 1===(t=v(this,new G(e,t)))||0===t},M.isInteger=function(){return!!this.c&&p(this.e/l)>this.c.length-2},M.isLessThan=M.lt=function(e,t){return v(this,new G(e,t))<0},M.isLessThanOrEqualTo=M.lte=function(e,t){return-1===(t=v(this,new G(e,t)))||0===t},M.isNaN=function(){return!this.s},M.isNegative=function(){return this.s<0},M.isPositive=function(){return this.s>0},M.isZero=function(){return!!this.c&&0==this.c[0]},M.minus=function(e,t){var a,n,o,i,r=this,c=r.s;if(t=(e=new G(e,t)).s,!c||!t)return new G(NaN);if(c!=t)return e.s=-t,r.plus(e);var u=r.e/l,d=e.e/l,m=r.c,h=e.c;if(!u||!d){if(!m||!h)return m?(e.s=-t,e):new G(h?r:NaN);if(!m[0]||!h[0])return h[0]?(e.s=-t,e):new G(m[0]?r:3==T?-0:0)}if(u=p(u),d=p(d),m=m.slice(),c=u-d){for((i=c<0)?(c=-c,o=m):(d=u,o=h),o.reverse(),t=c;t--;o.push(0));o.reverse()}else for(n=(i=(c=m.length)<(t=h.length))?c:t,c=t=0;t<n;t++)if(m[t]!=h[t]){i=m[t]<h[t];break}if(i&&(o=m,m=h,h=o,e.s=-e.s),(t=(n=h.length)-(a=m.length))>0)for(;t--;m[a++]=0);for(t=s-1;n>c;){if(m[--n]<h[n]){for(a=n;a&&!m[--a];m[a]=t);--m[a],m[n]+=s}m[n]-=h[n]}for(;0==m[0];m.splice(0,1),--d);return m[0]?z(e,m,d):(e.s=3==T?-1:1,e.c=[e.e=0],e)},M.modulo=M.mod=function(e,t){var a,n,o=this;return e=new G(e,t),!o.c||!e.s||e.c&&!e.c[0]?new G(NaN):!e.c||o.c&&!o.c[0]?new G(o):(9==R?(n=e.s,e.s=1,a=k(o,e,0,3),e.s=n,a.s*=n):a=k(o,e,0,R),(e=o.minus(a.times(e))).c[0]||1!=R||(e.s=o.s),e)},M.multipliedBy=M.times=function(e,t){var a,n,o,i,r,c,u,m,h,v,g,f,y,_,k,E=this,x=E.c,N=(e=new G(e,t)).c;if(!(x&&N&&x[0]&&N[0]))return!E.s||!e.s||x&&!x[0]&&!N||N&&!N[0]&&!x?e.c=e.e=e.s=null:(e.s*=E.s,x&&N?(e.c=[0],e.e=0):e.c=e.e=null),e;for(n=p(E.e/l)+p(e.e/l),e.s*=E.s,(u=x.length)<(v=N.length)&&(y=x,x=N,N=y,o=u,u=v,v=o),o=u+v,y=[];o--;y.push(0));for(_=s,k=d,o=v;--o>=0;){for(a=0,g=N[o]%k,f=N[o]/k|0,i=o+(r=u);i>o;)a=((m=g*(m=x[--r]%k)+(c=f*m+(h=x[r]/k|0)*g)%k*k+y[i]+a)/_|0)+(c/k|0)+f*h,y[i--]=m%_;y[i]=a}return a?++n:y.splice(0,1),z(e,y,n)},M.negated=function(){var e=new G(this);return e.s=-e.s||null,e},M.plus=function(e,t){var a,n=this,o=n.s;if(t=(e=new G(e,t)).s,!o||!t)return new G(NaN);if(o!=t)return e.s=-t,n.minus(e);var i=n.e/l,r=e.e/l,c=n.c,u=e.c;if(!i||!r){if(!c||!u)return new G(o/0);if(!c[0]||!u[0])return u[0]?e:new G(c[0]?n:0*o)}if(i=p(i),r=p(r),c=c.slice(),o=i-r){for(o>0?(r=i,a=u):(o=-o,a=c),a.reverse();o--;a.push(0));a.reverse()}for((o=c.length)-(t=u.length)<0&&(a=u,u=c,c=a,t=o),o=0;t;)o=(c[--t]=c[t]+u[t]+o)/s|0,c[t]=s===c[t]?0:c[t]%s;return o&&(c=[o].concat(c),++r),z(e,c,r)},M.precision=M.sd=function(e,t){var a,n,o,i=this;if(null!=e&&e!==!!e)return g(e,1,m),null==t?t=T:g(t,0,8),H(new G(i),e,t);if(!(a=i.c))return null;if(n=(o=a.length-1)*l+1,o=a[o]){for(;o%10==0;o/=10,n--);for(o=a[0];o>=10;o/=10,n++);}return e&&i.e+1>n&&(n=i.e+1),n},M.shiftedBy=function(e){return g(e,-9007199254740991,c),this.times("1e"+e)},M.squareRoot=M.sqrt=function(){var e,t,a,n,o,i=this,r=i.c,s=i.s,l=i.e,c=I+4,u=new G("0.5");if(1!==s||!r||!r[0])return new G(!s||s<0&&(!r||r[0])?NaN:r?i:1/0);if(0==(s=Math.sqrt(+$(i)))||s==1/0?(((t=h(r)).length+l)%2==0&&(t+="0"),s=Math.sqrt(+t),l=p((l+1)/2)-(l<0||l%2),a=new G(t=s==1/0?"5e"+l:(t=s.toExponential()).slice(0,t.indexOf("e")+1)+l)):a=new G(s+""),a.c[0])for((s=(l=a.e)+c)<3&&(s=0);;)if(o=a,a=u.times(o.plus(k(i,o,c,1))),h(o.c).slice(0,s)===(t=h(a.c)).slice(0,s)){if(a.e<l&&--s,"9999"!=(t=t.slice(s-3,s+1))&&(n||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(H(a,a.e+I+2,1),e=!a.times(a).eq(i));break}if(!n&&(H(o,o.e+I+2,0),o.times(o).eq(i))){a=o;break}c+=4,s+=4,n=1}return H(a,a.e+I+1,T,e)},M.toExponential=function(e,t){return null!=e&&(g(e,0,m),e++),F(this,e,t,1)},M.toFixed=function(e,t){return null!=e&&(g(e,0,m),e=e+this.e+1),F(this,e,t)},M.toFormat=function(e,t,a){var n,o=this;if(null==a)null!=e&&t&&"object"==typeof t?(a=t,t=null):e&&"object"==typeof e?(a=e,e=t=null):a=B;else if("object"!=typeof a)throw Error(i+"Argument not an object: "+a);if(n=o.toFixed(e,t),o.c){var r,s=n.split("."),l=+a.groupSize,c=+a.secondaryGroupSize,u=a.groupSeparator||"",d=s[0],m=s[1],p=o.s<0,h=p?d.slice(1):d,v=h.length;if(c&&(r=l,l=c,c=r,v-=r),l>0&&v>0){for(r=v%l||l,d=h.substr(0,r);r<v;r+=l)d+=u+h.substr(r,l);c>0&&(d+=u+h.slice(r)),p&&(d="-"+d)}n=m?d+(a.decimalSeparator||"")+((c=+a.fractionGroupSize)?m.replace(new RegExp("\\d{"+c+"}\\B","g"),"$&"+(a.fractionGroupSeparator||"")):m):d}return(a.prefix||"")+n+(a.suffix||"")},M.toFraction=function(e){var t,a,n,o,r,s,c,d,m,p,v,g,f=this,y=f.c;if(null!=e&&(!(c=new G(e)).isInteger()&&(c.c||1!==c.s)||c.lt(S)))throw Error(i+"Argument "+(c.isInteger()?"out of range: ":"not an integer: ")+$(c));if(!y)return new G(f);for(t=new G(S),m=a=new G(S),n=d=new G(S),g=h(y),r=t.e=g.length-f.e-1,t.c[0]=u[(s=r%l)<0?l+s:s],e=!e||c.comparedTo(t)>0?r>0?t:m:c,s=A,A=1/0,c=new G(g),d.c[0]=0;p=k(c,t,0,1),1!=(o=a.plus(p.times(n))).comparedTo(e);)a=n,n=o,m=d.plus(p.times(o=m)),d=o,t=c.minus(p.times(o=t)),c=o;return o=k(e.minus(a),n,0,1),d=d.plus(o.times(m)),a=a.plus(o.times(n)),d.s=m.s=f.s,v=k(m,n,r*=2,T).minus(f).abs().comparedTo(k(d,a,r,T).minus(f).abs())<1?[m,n]:[d,a],A=s,v},M.toNumber=function(){return+$(this)},M.toPrecision=function(e,t){return null!=e&&g(e,1,m),F(this,e,t,2)},M.toString=function(e){var t,a=this,n=a.s,o=a.e;return null===o?n?(t="Infinity",n<0&&(t="-"+t)):t="NaN":(null==e?t=o<=D||o>=b?y(h(a.c),o):E(h(a.c),o,"0"):10===e&&U?t=E(h((a=H(new G(a),I+o+1,T)).c),a.e,"0"):(g(e,2,P.length,"Base"),t=x(E(h(a.c),o,"0"),10,e,n,!0)),n<0&&a.c[0]&&(t="-"+t)),t},M.valueOf=M.toJSON=function(){return $(this)},M._isBigNumber=!0,null!=t&&G.set(t),G}(),t.default=t.BigNumber=t,k.exports?k.exports=t:(e||(e="undefined"!=typeof self&&self?self:window),e.BigNumber=t)}(h);var x=E.exports;!function(e){var t=x,a=e.exports;!function(){var e,n,o,i=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,r={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function s(e){return i.lastIndex=0,i.test(e)?'"'+e.replace(i,(function(e){var t=r[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+e+'"'}function l(a,i){var r,c,u,d,m,p=e,h=i[a],v=null!=h&&(h instanceof t||t.isBigNumber(h));switch(h&&"object"==typeof h&&"function"==typeof h.toJSON&&(h=h.toJSON(a)),"function"==typeof o&&(h=o.call(i,a,h)),typeof h){case"string":return v?h:s(h);case"number":return isFinite(h)?String(h):"null";case"boolean":case"null":case"bigint":return String(h);case"object":if(!h)return"null";if(e+=n,m=[],"[object Array]"===Object.prototype.toString.apply(h)){for(d=h.length,r=0;r<d;r+=1)m[r]=l(r,h)||"null";return u=0===m.length?"[]":e?"[\n"+e+m.join(",\n"+e)+"\n"+p+"]":"["+m.join(",")+"]",e=p,u}if(o&&"object"==typeof o)for(d=o.length,r=0;r<d;r+=1)"string"==typeof o[r]&&(u=l(c=o[r],h))&&m.push(s(c)+(e?": ":":")+u);else Object.keys(h).forEach((function(t){var a=l(t,h);a&&m.push(s(t)+(e?": ":":")+a)}));return u=0===m.length?"{}":e?"{\n"+e+m.join(",\n"+e)+"\n"+p+"}":"{"+m.join(",")+"}",e=p,u}}"function"!=typeof a.stringify&&(a.stringify=function(t,a,i){var r;if(e="",n="","number"==typeof i)for(r=0;r<i;r+=1)n+=" ";else"string"==typeof i&&(n=i);if(o=a,a&&"function"!=typeof a&&("object"!=typeof a||"number"!=typeof a.length))throw new Error("JSON.stringify");return l("",{"":t})})}()}(f);var N=null;const w=/(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])/,C=/(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)/;var M=function(e){var t={strict:!1,storeAsString:!1,alwaysParseAsBig:!1,useNativeBigInt:!1,protoAction:"error",constructorAction:"error"};if(null!=e){if(!0===e.strict&&(t.strict=!0),!0===e.storeAsString&&(t.storeAsString=!0),t.alwaysParseAsBig=!0===e.alwaysParseAsBig&&e.alwaysParseAsBig,t.useNativeBigInt=!0===e.useNativeBigInt&&e.useNativeBigInt,void 0!==e.constructorAction){if("error"!==e.constructorAction&&"ignore"!==e.constructorAction&&"preserve"!==e.constructorAction)throw new Error(`Incorrect value for constructorAction option, must be "error", "ignore" or undefined but passed ${e.constructorAction}`);t.constructorAction=e.constructorAction}if(void 0!==e.protoAction){if("error"!==e.protoAction&&"ignore"!==e.protoAction&&"preserve"!==e.protoAction)throw new Error(`Incorrect value for protoAction option, must be "error", "ignore" or undefined but passed ${e.protoAction}`);t.protoAction=e.protoAction}}var a,n,o,i,r={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},s=function(e){throw{name:"SyntaxError",message:e,at:a,text:o}},l=function(e){return e&&e!==n&&s("Expected '"+e+"' instead of '"+n+"'"),n=o.charAt(a),a+=1,n},c=function(){var e,a="";for("-"===n&&(a="-",l("-"));n>="0"&&n<="9";)a+=n,l();if("."===n)for(a+=".";l()&&n>="0"&&n<="9";)a+=n;if("e"===n||"E"===n)for(a+=n,l(),"-"!==n&&"+"!==n||(a+=n,l());n>="0"&&n<="9";)a+=n,l();if(e=+a,isFinite(e))return null==N&&(N=x),a.length>15?t.storeAsString?a:t.useNativeBigInt?BigInt(a):new N(a):t.alwaysParseAsBig?t.useNativeBigInt?BigInt(e):new N(e):e;s("Bad number")},u=function(){var e,t,i,c="";if('"'===n)for(var u=a;l();){if('"'===n)return a-1>u&&(c+=o.substring(u,a-1)),l(),c;if("\\"===n){if(a-1>u&&(c+=o.substring(u,a-1)),l(),"u"===n){for(i=0,t=0;t<4&&(e=parseInt(l(),16),isFinite(e));t+=1)i=16*i+e;c+=String.fromCharCode(i)}else{if("string"!=typeof r[n])break;c+=r[n]}u=a}}s("Bad string")},d=function(){for(;n&&n<=" ";)l()};return i=function(){switch(d(),n){case"{":return function(){var e,a=Object.create(null);if("{"===n){if(l("{"),d(),"}"===n)return l("}"),a;for(;n;){if(e=u(),d(),l(":"),!0===t.strict&&Object.hasOwnProperty.call(a,e)&&s('Duplicate key "'+e+'"'),!0===w.test(e)?"error"===t.protoAction?s("Object contains forbidden prototype property"):"ignore"===t.protoAction?i():a[e]=i():!0===C.test(e)?"error"===t.constructorAction?s("Object contains forbidden constructor property"):"ignore"===t.constructorAction?i():a[e]=i():a[e]=i(),d(),"}"===n)return l("}"),a;l(","),d()}}s("Bad object")}();case"[":return function(){var e=[];if("["===n){if(l("["),d(),"]"===n)return l("]"),e;for(;n;){if(e.push(i()),d(),"]"===n)return l("]"),e;l(","),d()}}s("Bad array")}();case'"':return u();case"-":return c();default:return n>="0"&&n<="9"?c():function(){switch(n){case"t":return l("t"),l("r"),l("u"),l("e"),!0;case"f":return l("f"),l("a"),l("l"),l("s"),l("e"),!1;case"n":return l("n"),l("u"),l("l"),l("l"),null}s("Unexpected '"+n+"'")}()}},function(e,t){var r;return o=e+"",a=0,n=" ",r=i(),d(),n&&s("Syntax error"),"function"==typeof t?function e(a,n){var o,i=a[n];return i&&"object"==typeof i&&Object.keys(i).forEach((function(t){void 0!==(o=e(i,t))?i[t]=o:delete i[t]})),t.call(a,n,i)}({"":r},""):r}},S=f.exports.stringify,I=M;g.exports=function(e){return{parse:I(e),stringify:S}},g.exports.parse=I(),g.exports.stringify=S;const T=v(g.exports),D="https://ceshi.maimiaoqingsu.com",b={baseURL:D,timeout:3e4,header:{"Content-Type":"application/json"},dataType:"text"},V=e=>{const t={...b,...e};if(t.url&&!t.url.startsWith("http")){const e=t.baseURL.endsWith("/")?t.baseURL:t.baseURL+"/",a=t.url.startsWith("/")?t.url.substring(1):t.url;t.url=e+a}const a=uni.getStorageSync("token");return a&&(t.header={...t.header,token:a}),new Promise(((e,a)=>{uni.request({...t,success:n=>{if(200!==n.statusCode)return uni.showToast({title:"服务器异常，请稍后重试",icon:"none"}),void a(n);let i=n.data;"string"!=typeof i&&(i=JSON.stringify(i));try{i=T.parse(i)}catch(Ft){o("error","at utils/request.js:49","JSON解析失败:",Ft),i=n.data}const r=t.custom||{};if(0!==i.code&&409999!==i.code)return!1!==r.toast&&(uni.showToast({title:i.msg||"请求失败",icon:"error"}),401!==i.code&&10010002!==i.code||(uni.showToast({title:"登录已过期，请重新登录",icon:"none"}),uni.removeStorageSync("logoInfo"),setTimeout((()=>{uni.reLaunch({url:"/pages/login/login"})}),1e3))),void a({statusCode:n.statusCode,data:i,message:i.msg||"请求失败"});e(i)},fail:e=>{uni.showToast({title:"网络错误，请稍后再试",icon:"none"}),a(e)}})}))},A={get:(e,t={},a={})=>V({url:e,method:"GET",data:t,...a}),post:(e,t={},a={})=>V({url:e,method:"POST",data:t,...a}),put:(e,t={},a={})=>V({url:e,method:"PUT",data:t,...a}),delete:(e,t={},a={})=>V({url:e,method:"DELETE",data:t,...a})},L=(e,t={})=>A.post("/api/user/login",e,t),R=(e,t={})=>A.post("/api/user/userInfo",e,t),O=(e,t={})=>A.post("/api/sms/sms/sendSms",e,t),B=(e,t={})=>A.post("/api/user/smsLogin",e,t),P=(e,t={})=>A.get("/api/agreement/page?current=1&size=10",e,t),U=(e,t={})=>A.get("/api/city/list");
/*!
   * pinia v2.1.7
   * (c) 2023 Eduardo San Martin Morote
   * @license MIT
   */
let G;const F=e=>G=e,q=Symbol();function z(e){return e&&"object"==typeof e&&"[object Object]"===Object.prototype.toString.call(e)&&"function"!=typeof e.toJSON}var H,$;($=H||(H={})).direct="direct",$.patchObject="patch object",$.patchFunction="patch function";const j=()=>{};function K(t,a,n,o=j){t.push(a);const i=()=>{const e=t.indexOf(a);e>-1&&(t.splice(e,1),o())};return!n&&e.getCurrentScope()&&e.onScopeDispose(i),i}function Y(e,...t){e.slice().forEach((e=>{e(...t)}))}const W=e=>e();function J(t,a){t instanceof Map&&a instanceof Map&&a.forEach(((e,a)=>t.set(a,e))),t instanceof Set&&a instanceof Set&&a.forEach(t.add,t);for(const n in a){if(!a.hasOwnProperty(n))continue;const o=a[n],i=t[n];z(i)&&z(o)&&t.hasOwnProperty(n)&&!e.isRef(o)&&!e.isReactive(o)?t[n]=J(i,o):t[n]=o}return t}const Z=Symbol();const{assign:X}=Object;function Q(t,a,n={},o,i,r){let s;const l=X({actions:{}},n),c={deep:!0};let u,d,m,p=[],h=[];const v=o.state.value[t];let g;function f(a){let n;u=d=!1,"function"==typeof a?(a(o.state.value[t]),n={type:H.patchFunction,storeId:t,events:m}):(J(o.state.value[t],a),n={type:H.patchObject,payload:a,storeId:t,events:m});const i=g=Symbol();e.nextTick().then((()=>{g===i&&(u=!0)})),d=!0,Y(p,n,o.state.value[t])}r||v||(o.state.value[t]={}),e.ref({});const y=r?function(){const{state:e}=n,t=e?e():{};this.$patch((e=>{X(e,t)}))}:j;function _(e,a){return function(){F(o);const n=Array.from(arguments),i=[],r=[];function s(e){i.push(e)}function l(e){r.push(e)}let c;Y(h,{args:n,name:e,store:E,after:s,onError:l});try{c=a.apply(this&&this.$id===t?this:E,n)}catch(u){throw Y(r,u),u}return c instanceof Promise?c.then((e=>(Y(i,e),e))).catch((e=>(Y(r,e),Promise.reject(e)))):(Y(i,c),c)}}const k={_p:o,$id:t,$onAction:K.bind(null,h),$patch:f,$reset:y,$subscribe(a,n={}){const i=K(p,a,n.detached,(()=>r())),r=s.run((()=>e.watch((()=>o.state.value[t]),(e=>{("sync"===n.flush?d:u)&&a({storeId:t,type:H.direct,events:m},e)}),X({},c,n))));return i},$dispose:function(){s.stop(),p=[],h=[],o._s.delete(t)}},E=e.reactive(k);o._s.set(t,E);const x=(o._a&&o._a.runWithContext||W)((()=>o._e.run((()=>(s=e.effectScope()).run(a)))));for(const C in x){const a=x[C];if(e.isRef(a)&&(w=a,!e.isRef(w)||!w.effect)||e.isReactive(a))r||(!v||z(N=a)&&N.hasOwnProperty(Z)||(e.isRef(a)?a.value=v[C]:J(a,v[C])),o.state.value[t][C]=a);else if("function"==typeof a){const e=_(C,a);x[C]=e,l.actions[C]=a}}var N,w;return X(E,x),X(e.toRaw(E),x),Object.defineProperty(E,"$state",{get:()=>o.state.value[t],set:e=>{f((t=>{X(t,e)}))}}),o._p.forEach((e=>{X(E,s.run((()=>e({store:E,app:o._a,pinia:o,options:l}))))})),v&&r&&n.hydrate&&n.hydrate(E.$state,v),u=!0,d=!0,E}function ee(t,a,n){let o,i;const r="function"==typeof a;function s(t,n){const s=e.hasInjectionContext();(t=t||(s?e.inject(q,null):null))&&F(t),(t=G)._s.has(o)||(r?Q(o,a,i,t):function(t,a,n,o){const{state:i,actions:r,getters:s}=a,l=n.state.value[t];let c;c=Q(t,(function(){l||(n.state.value[t]=i?i():{});const a=e.toRefs(n.state.value[t]);return X(a,r,Object.keys(s||{}).reduce(((a,o)=>(a[o]=e.markRaw(e.computed((()=>{F(n);const e=n._s.get(t);return s[o].call(e,e)}))),a)),{}))}),a,n,0,!0)}(o,i,t));return t._s.get(o)}return"string"==typeof t?(o=t,i=r?n:a):(i=t,o=t.id),s.$id=o,s}const te=uni.getSystemInfoSync(),ae=ee("global",{state:()=>({statusBarHeight:te.statusBarHeight+50||0,token:uni.getStorageSync("token")||"",userInfo:uni.getStorageSync("userInfo")||"",mallSwitch:uni.getStorageSync("mallSwitch")||""}),actions:{setToken(e){this.token=e,uni.setStorageSync("token",e)},setMallSwitch(e){this.mallSwitch=e,uni.setStorageSync("mallSwitch",e)},clearToken(){this.token="",uni.removeStorageSync("token")},setUserInfo(e){this.userInfo=e,uni.setStorageSync("userInfo",e)}},getters:{getToken:e=>e.token,getUserInfo:e=>e.userInfo,getMallSwitch:e=>e.mallSwitch,isLoggedIn:e=>!!e.token}}),ne={__name:"login",setup(t){const a=ae();let n=e.ref(1);const i=e.ref({userName:"",password:"",code:""}),r=e=>{uni.navigateTo({url:`/pages/webview/webview?type=${e}`})},s=e=>{n.value=e},l=async()=>{if(!(1!=n.value||i.value.userName&&i.value.code))return uni.showToast({title:"请输入账号或验证码",icon:"error"});if(!(2!=n.value||i.value.userName&&i.value.password))return uni.showToast({title:"请输入账号或密码",icon:"error"});try{const e=1==n.value?B:L,{data:t}=await e(i.value);uni.setStorageSync("token",t.token),a.setToken(t.token),uni.setStorageSync("currentUser",t),c(),uni.switchTab({url:"/pages/index/index"})}catch(e){o("log","at pages/login/login.vue:137",e)}},c=async()=>{try{const{data:e}=await((e,t={})=>A.get("/api/mall/config/getMallSwitch",e,t))();uni.setStorageSync("mallSwitch",e),a.setMallSwitch(e)}catch(e){o("log","at pages/login/login.vue:147",e)}},u=()=>{uni.navigateTo({url:"/pages/register/register"})},d=e.ref(null),m=async()=>{try{await uni.login({provider:"weixin"});const e=await uni.getUserInfo({provider:"weixin"});d.value={...e.userInfo,openid:e.userInfo.openId,unionid:e.userInfo.unionId};const t=await L({openid:d.value.openid,logintype:"wxApp"});if(t.success){uni.setStorageSync("token",t.data.token),uni.setStorageSync("currentUser",t.data);t.data;c(),uni.switchTab({url:"/pages/index/index"})}else uni.navigateTo({url:`../wx-bind/wx-bind?userInfo=${JSON.stringify(d.value)}`})}catch(e){o("error","at pages/login/login.vue:202","Login failed:",e)}},p=async()=>{if(h.value)return;let e=await O({phone:i.value.userName,type:1});0==e.code&&f(),o("log","at pages/login/login.vue:220",e)},h=e.ref(!1),v=e.ref("获取验证码"),g=e.ref(60),f=()=>{h.value=!0;var e=setInterval((()=>{v.value=g.value+"s 重新获取",g.value--,0==g.value&&(clearInterval(e),g.value=60,v.value="获取验证码",h.value=!1)}),1e3)};return(t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"login-box"},[e.createElementVNode("view",{class:"login-bg"},[e.createElementVNode("view",{class:"bg-top"},[e.createElementVNode("image",{src:"/static/login/bg-top.png",class:"image"})]),e.createElementVNode("view",{class:"bg-top-content"},[e.createElementVNode("image",{src:"/static/login/logo.png",class:"logo"}),e.createElementVNode("view",{class:"welcome"},[e.createElementVNode("text",null,"欢迎来到"),e.createTextVNode(),e.createElementVNode("text",{class:"txt"},"「麦苗倾诉」")]),e.createElementVNode("view",{class:"msg"},"欢迎登录麦苗App")])]),e.createElementVNode("view",{class:"login-area"},[e.createElementVNode("view",{class:"change-login-type"},[e.createElementVNode("view",{class:"phone-type login-type",onClick:a[0]||(a[0]=e=>s(1))},[1==e.unref(n)?(e.openBlock(),e.createElementBlock("image",{key:0,src:"/static/login/code-active.png",class:"image"})):(e.openBlock(),e.createElementBlock("image",{key:1,src:"/static/login/code.png",class:"image"})),e.createElementVNode("text",{class:e.normalizeClass(["login-msg",1==e.unref(n)?"active":""])},"手机快速登录",2)]),e.createElementVNode("view",{class:"code-type login-type",onClick:a[1]||(a[1]=e=>s(2))},[2==e.unref(n)?(e.openBlock(),e.createElementBlock("image",{key:0,src:"/static/login/psd-active.png",class:"image"})):(e.openBlock(),e.createElementBlock("image",{key:1,src:"/static/login/psd.png",class:"image"})),e.createElementVNode("text",{class:e.normalizeClass(["login-msg",2==e.unref(n)?"active":""])},"账号密码登录",2)])]),e.createElementVNode("view",{class:"login-content"},[e.createElementVNode("view",{class:"phone"},[e.withDirectives(e.createElementVNode("input",{class:"uni-input",type:"number","onUpdate:modelValue":a[2]||(a[2]=e=>i.value.userName=e),placeholder:"请输入手机号","placeholder-class":"msg",maxlength:"11"},null,512),[[e.vModelText,i.value.userName]])]),1==e.unref(n)?(e.openBlock(),e.createElementBlock("view",{key:0,class:"code"},[e.withDirectives(e.createElementVNode("input",{class:"code-input","onUpdate:modelValue":a[3]||(a[3]=e=>i.value.code=e),placeholder:"请输入验证码","placeholder-class":"msg"},null,512),[[e.vModelText,i.value.code]]),e.createElementVNode("text",{class:"send-code",disabled:h.value,onClick:p},e.toDisplayString(v.value),9,["disabled"])])):(e.openBlock(),e.createElementBlock("view",{key:1,class:"psd"},[e.withDirectives(e.createElementVNode("input",{class:"uni-input",type:"password","onUpdate:modelValue":a[4]||(a[4]=e=>i.value.password=e),placeholder:"请输入密码","placeholder-class":"msg"},null,512),[[e.vModelText,i.value.password]])])),e.createElementVNode("view",{class:"login-btn",onClick:l},"立即登录"),e.createElementVNode("view",{class:"register"},[e.createElementVNode("text",{class:"register-msg"},"还没有账号？现在去"),e.createElementVNode("text",{onClick:u,style:{color:"#34a755"}},"注册>>")])]),e.createElementVNode("view",{class:"wechat-login"},[e.createElementVNode("text",{class:"wechat-msg"},"第三方登录"),e.createElementVNode("view",{class:"wechat-content",onClick:m},[e.createElementVNode("image",{src:"/static/login/wechat.png",class:"wechat"})])])]),e.createElementVNode("view",{class:"agree"},[e.createTextVNode(" 注册即代表同意 "),e.createElementVNode("text",{class:"txt",onClick:a[5]||(a[5]=e=>r("用户注册协议"))},"《用户注册协议》"),e.createTextVNode("和"),e.createElementVNode("text",{class:"txt",onClick:a[6]||(a[6]=e=>r("隐私协议"))},"《隐私协议》")])]))}},oe=[{font_class:"arrow-down",unicode:""},{font_class:"arrow-left",unicode:""},{font_class:"arrow-right",unicode:""},{font_class:"arrow-up",unicode:""},{font_class:"auth",unicode:""},{font_class:"auth-filled",unicode:""},{font_class:"back",unicode:""},{font_class:"bars",unicode:""},{font_class:"calendar",unicode:""},{font_class:"calendar-filled",unicode:""},{font_class:"camera",unicode:""},{font_class:"camera-filled",unicode:""},{font_class:"cart",unicode:""},{font_class:"cart-filled",unicode:""},{font_class:"chat",unicode:""},{font_class:"chat-filled",unicode:""},{font_class:"chatboxes",unicode:""},{font_class:"chatboxes-filled",unicode:""},{font_class:"chatbubble",unicode:""},{font_class:"chatbubble-filled",unicode:""},{font_class:"checkbox",unicode:""},{font_class:"checkbox-filled",unicode:""},{font_class:"checkmarkempty",unicode:""},{font_class:"circle",unicode:""},{font_class:"circle-filled",unicode:""},{font_class:"clear",unicode:""},{font_class:"close",unicode:""},{font_class:"closeempty",unicode:""},{font_class:"cloud-download",unicode:""},{font_class:"cloud-download-filled",unicode:""},{font_class:"cloud-upload",unicode:""},{font_class:"cloud-upload-filled",unicode:""},{font_class:"color",unicode:""},{font_class:"color-filled",unicode:""},{font_class:"compose",unicode:""},{font_class:"contact",unicode:""},{font_class:"contact-filled",unicode:""},{font_class:"down",unicode:""},{font_class:"bottom",unicode:""},{font_class:"download",unicode:""},{font_class:"download-filled",unicode:""},{font_class:"email",unicode:""},{font_class:"email-filled",unicode:""},{font_class:"eye",unicode:""},{font_class:"eye-filled",unicode:""},{font_class:"eye-slash",unicode:""},{font_class:"eye-slash-filled",unicode:""},{font_class:"fire",unicode:""},{font_class:"fire-filled",unicode:""},{font_class:"flag",unicode:""},{font_class:"flag-filled",unicode:""},{font_class:"folder-add",unicode:""},{font_class:"folder-add-filled",unicode:""},{font_class:"font",unicode:""},{font_class:"forward",unicode:""},{font_class:"gear",unicode:""},{font_class:"gear-filled",unicode:""},{font_class:"gift",unicode:""},{font_class:"gift-filled",unicode:""},{font_class:"hand-down",unicode:""},{font_class:"hand-down-filled",unicode:""},{font_class:"hand-up",unicode:""},{font_class:"hand-up-filled",unicode:""},{font_class:"headphones",unicode:""},{font_class:"heart",unicode:""},{font_class:"heart-filled",unicode:""},{font_class:"help",unicode:""},{font_class:"help-filled",unicode:""},{font_class:"home",unicode:""},{font_class:"home-filled",unicode:""},{font_class:"image",unicode:""},{font_class:"image-filled",unicode:""},{font_class:"images",unicode:""},{font_class:"images-filled",unicode:""},{font_class:"info",unicode:""},{font_class:"info-filled",unicode:""},{font_class:"left",unicode:""},{font_class:"link",unicode:""},{font_class:"list",unicode:""},{font_class:"location",unicode:""},{font_class:"location-filled",unicode:""},{font_class:"locked",unicode:""},{font_class:"locked-filled",unicode:""},{font_class:"loop",unicode:""},{font_class:"mail-open",unicode:""},{font_class:"mail-open-filled",unicode:""},{font_class:"map",unicode:""},{font_class:"map-filled",unicode:""},{font_class:"map-pin",unicode:""},{font_class:"map-pin-ellipse",unicode:""},{font_class:"medal",unicode:""},{font_class:"medal-filled",unicode:""},{font_class:"mic",unicode:""},{font_class:"mic-filled",unicode:""},{font_class:"micoff",unicode:""},{font_class:"micoff-filled",unicode:""},{font_class:"minus",unicode:""},{font_class:"minus-filled",unicode:""},{font_class:"more",unicode:""},{font_class:"more-filled",unicode:""},{font_class:"navigate",unicode:""},{font_class:"navigate-filled",unicode:""},{font_class:"notification",unicode:""},{font_class:"notification-filled",unicode:""},{font_class:"paperclip",unicode:""},{font_class:"paperplane",unicode:""},{font_class:"paperplane-filled",unicode:""},{font_class:"person",unicode:""},{font_class:"person-filled",unicode:""},{font_class:"personadd",unicode:""},{font_class:"personadd-filled",unicode:""},{font_class:"personadd-filled-copy",unicode:""},{font_class:"phone",unicode:""},{font_class:"phone-filled",unicode:""},{font_class:"plus",unicode:""},{font_class:"plus-filled",unicode:""},{font_class:"plusempty",unicode:""},{font_class:"pulldown",unicode:""},{font_class:"pyq",unicode:""},{font_class:"qq",unicode:""},{font_class:"redo",unicode:""},{font_class:"redo-filled",unicode:""},{font_class:"refresh",unicode:""},{font_class:"refresh-filled",unicode:""},{font_class:"refreshempty",unicode:""},{font_class:"reload",unicode:""},{font_class:"right",unicode:""},{font_class:"scan",unicode:""},{font_class:"search",unicode:""},{font_class:"settings",unicode:""},{font_class:"settings-filled",unicode:""},{font_class:"shop",unicode:""},{font_class:"shop-filled",unicode:""},{font_class:"smallcircle",unicode:""},{font_class:"smallcircle-filled",unicode:""},{font_class:"sound",unicode:""},{font_class:"sound-filled",unicode:""},{font_class:"spinner-cycle",unicode:""},{font_class:"staff",unicode:""},{font_class:"staff-filled",unicode:""},{font_class:"star",unicode:""},{font_class:"star-filled",unicode:""},{font_class:"starhalf",unicode:""},{font_class:"trash",unicode:""},{font_class:"trash-filled",unicode:""},{font_class:"tune",unicode:""},{font_class:"tune-filled",unicode:""},{font_class:"undo",unicode:""},{font_class:"undo-filled",unicode:""},{font_class:"up",unicode:""},{font_class:"top",unicode:""},{font_class:"upload",unicode:""},{font_class:"upload-filled",unicode:""},{font_class:"videocam",unicode:""},{font_class:"videocam-filled",unicode:""},{font_class:"vip",unicode:""},{font_class:"vip-filled",unicode:""},{font_class:"wallet",unicode:""},{font_class:"wallet-filled",unicode:""},{font_class:"weibo",unicode:""},{font_class:"weixin",unicode:""}],ie=(e,t)=>{const a=e.__vccOpts||e;for(const[n,o]of t)a[n]=o;return a};const re=ie({name:"UniIcons",emits:["click"],props:{type:{type:String,default:""},color:{type:String,default:"#333333"},size:{type:[Number,String],default:16},customPrefix:{type:String,default:""},fontFamily:{type:String,default:""}},data:()=>({icons:oe}),computed:{unicode(){let e=this.icons.find((e=>e.font_class===this.type));return e?e.unicode:""},iconSize(){return"number"==typeof(e=this.size)||/^[0-9]*$/g.test(e)?e+"px":e;var e},styleObj(){return""!==this.fontFamily?`color: ${this.color}; font-size: ${this.iconSize}; font-family: ${this.fontFamily};`:`color: ${this.color}; font-size: ${this.iconSize};`}},methods:{_onClick(){this.$emit("click")}}},[["render",function(t,a,n,o,i,r){return e.openBlock(),e.createElementBlock("text",{style:e.normalizeStyle(r.styleObj),class:e.normalizeClass(["uni-icons",["uniui-"+n.type,n.customPrefix,n.customPrefix?n.type:""]]),onClick:a[0]||(a[0]=(...e)=>r._onClick&&r._onClick(...e))},[e.renderSlot(t.$slots,"default",{},void 0,!0)],6)}],["__scopeId","data-v-1320ff52"]]),se=["{","}"];const le=/^(?:\d)+/,ce=/^(?:\w)+/;const ue="zh-Hans",de="zh-Hant",me="en",pe=Object.prototype.hasOwnProperty,he=(e,t)=>pe.call(e,t),ve=new class{constructor(){this._caches=Object.create(null)}interpolate(e,t,a=se){if(!t)return[e];let n=this._caches[e];return n||(n=function(e,[t,a]){const n=[];let o=0,i="";for(;o<e.length;){let r=e[o++];if(r===t){i&&n.push({type:"text",value:i}),i="";let t="";for(r=e[o++];void 0!==r&&r!==a;)t+=r,r=e[o++];const s=r===a,l=le.test(t)?"list":s&&ce.test(t)?"named":"unknown";n.push({value:t,type:l})}else i+=r}return i&&n.push({type:"text",value:i}),n}(e,a),this._caches[e]=n),function(e,t){const a=[];let n=0;const o=Array.isArray(t)?"list":(i=t,null!==i&&"object"==typeof i?"named":"unknown");var i;if("unknown"===o)return a;for(;n<e.length;){const i=e[n];switch(i.type){case"text":a.push(i.value);break;case"list":a.push(t[parseInt(i.value,10)]);break;case"named":"named"===o&&a.push(t[i.value])}n++}return a}(n,t)}};function ge(e,t){if(!e)return;if(e=e.trim().replace(/_/g,"-"),t&&t[e])return e;if("chinese"===(e=e.toLowerCase()))return ue;if(0===e.indexOf("zh"))return e.indexOf("-hans")>-1?ue:e.indexOf("-hant")>-1?de:(a=e,["-tw","-hk","-mo","-cht"].find((e=>-1!==a.indexOf(e)))?de:ue);var a;let n=[me,"fr","es"];t&&Object.keys(t).length>0&&(n=Object.keys(t));const o=function(e,t){return t.find((t=>0===e.indexOf(t)))}(e,n);return o||void 0}class fe{constructor({locale:e,fallbackLocale:t,messages:a,watcher:n,formater:o}){this.locale=me,this.fallbackLocale=me,this.message={},this.messages={},this.watchers=[],t&&(this.fallbackLocale=t),this.formater=o||ve,this.messages=a||{},this.setLocale(e||me),n&&this.watchLocale(n)}setLocale(e){const t=this.locale;this.locale=ge(e,this.messages)||this.fallbackLocale,this.messages[this.locale]||(this.messages[this.locale]={}),this.message=this.messages[this.locale],t!==this.locale&&this.watchers.forEach((e=>{e(this.locale,t)}))}getLocale(){return this.locale}watchLocale(e){const t=this.watchers.push(e)-1;return()=>{this.watchers.splice(t,1)}}add(e,t,a=!0){const n=this.messages[e];n?a?Object.assign(n,t):Object.keys(t).forEach((e=>{he(n,e)||(n[e]=t[e])})):this.messages[e]=t}f(e,t,a){return this.formater.interpolate(e,t,a).join("")}t(e,t,a){let n=this.message;return"string"==typeof t?(t=ge(t,this.messages))&&(n=this.messages[t]):a=t,he(n,e)?this.formater.interpolate(n[e],a).join(""):(console.warn(`Cannot translate the value of keypath ${e}. Use the value of keypath as default.`),e)}}function ye(e,t={},a,n){if("string"!=typeof e){const a=[t,e];e=a[0],t=a[1]}"string"!=typeof e&&(e="undefined"!=typeof uni&&uni.getLocale?uni.getLocale():"undefined"!=typeof global&&global.getLocale?global.getLocale():me),"string"!=typeof a&&(a="undefined"!=typeof __uniConfig&&__uniConfig.fallbackLocale||me);const o=new fe({locale:e,fallbackLocale:a,messages:t,watcher:n});let i=(e,t)=>{if("function"!=typeof getApp)i=function(e,t){return o.t(e,t)};else{let e=!1;i=function(t,a){const n=getApp().$vm;return n&&(n.$locale,e||(e=!0,function(e,t){e.$watchLocale?e.$watchLocale((e=>{t.setLocale(e)})):e.$watch((()=>e.$locale),(e=>{t.setLocale(e)}))}(n,o))),o.t(t,a)}}return i(e,t)};return{i18n:o,f:(e,t,a)=>o.f(e,t,a),t:(e,t)=>i(e,t),add:(e,t,a=!0)=>o.add(e,t,a),watch:e=>o.watchLocale(e),getLocale:()=>o.getLocale(),setLocale:e=>o.setLocale(e)}}const _e={en:{"uni-search-bar.cancel":"cancel","uni-search-bar.placeholder":"Search enter content"},"zh-Hans":{"uni-search-bar.cancel":"取消","uni-search-bar.placeholder":"请输入搜索内容"},"zh-Hant":{"uni-search-bar.cancel":"取消","uni-search-bar.placeholder":"請輸入搜索內容"}},{t:ke}=ye(_e),Ee={name:"UniSearchBar",emits:["input","update:modelValue","clear","cancel","confirm","blur","focus"],props:{placeholder:{type:String,default:""},radius:{type:[Number,String],default:5},clearButton:{type:String,default:"auto"},cancelButton:{type:String,default:"auto"},cancelText:{type:String,default:""},bgColor:{type:String,default:"#F8F8F8"},textColor:{type:String,default:"#000000"},maxlength:{type:[Number,String],default:100},value:{type:[Number,String],default:""},modelValue:{type:[Number,String],default:""},focus:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1}},data:()=>({show:!1,showSync:!1,searchVal:""}),computed:{cancelTextI18n(){return this.cancelText||ke("uni-search-bar.cancel")},placeholderText(){return this.placeholder||ke("uni-search-bar.placeholder")}},watch:{modelValue:{immediate:!0,handler(e){this.searchVal=e,e&&(this.show=!0)}},focus:{immediate:!0,handler(e){if(e){if(this.readonly)return;this.show=!0,this.$nextTick((()=>{this.showSync=!0}))}}},searchVal(e,t){this.$emit("input",e),this.$emit("update:modelValue",e)}},methods:{searchClick(){this.readonly||this.show||(this.show=!0,this.$nextTick((()=>{this.showSync=!0})))},clear(){this.searchVal="",this.$nextTick((()=>{this.$emit("clear",{value:""})}))},cancel(){this.readonly||(this.$emit("cancel",{value:this.searchVal}),this.searchVal="",this.show=!1,this.showSync=!1,plus.key.hideSoftKeybord())},confirm(){plus.key.hideSoftKeybord(),this.$emit("confirm",{value:this.searchVal})},blur(){plus.key.hideSoftKeybord(),this.$emit("blur",{value:this.searchVal})},emitFocus(e){this.$emit("focus",e.detail)}}};const xe=ie(Ee,[["render",function(t,a,n,o,r,s){const l=i(e.resolveDynamicComponent("uni-icons"),re);return e.openBlock(),e.createElementBlock("view",{class:"uni-searchbar"},[e.createElementVNode("view",{style:e.normalizeStyle({borderRadius:n.radius+"px",backgroundColor:n.bgColor}),class:"uni-searchbar__box",onClick:a[5]||(a[5]=(...e)=>s.searchClick&&s.searchClick(...e))},[e.createElementVNode("view",{class:"uni-searchbar__box-icon-search"},[e.renderSlot(t.$slots,"searchIcon",{},(()=>[e.createVNode(l,{color:"#c0c4cc",size:"18",type:"search"})]),!0)]),r.show||r.searchVal?e.withDirectives((e.openBlock(),e.createElementBlock("input",{key:0,focus:r.showSync,disabled:n.readonly,placeholder:s.placeholderText,maxlength:n.maxlength,class:"uni-searchbar__box-search-input","confirm-type":"search",type:"text","onUpdate:modelValue":a[0]||(a[0]=e=>r.searchVal=e),style:e.normalizeStyle({color:n.textColor}),onConfirm:a[1]||(a[1]=(...e)=>s.confirm&&s.confirm(...e)),onBlur:a[2]||(a[2]=(...e)=>s.blur&&s.blur(...e)),onFocus:a[3]||(a[3]=(...e)=>s.emitFocus&&s.emitFocus(...e))},null,44,["focus","disabled","placeholder","maxlength"])),[[e.vModelText,r.searchVal]]):(e.openBlock(),e.createElementBlock("text",{key:1,class:"uni-searchbar__text-placeholder"},e.toDisplayString(n.placeholder),1)),r.show&&("always"===n.clearButton||"auto"===n.clearButton&&""!==r.searchVal)&&!n.readonly?(e.openBlock(),e.createElementBlock("view",{key:2,class:"uni-searchbar__box-icon-clear",onClick:a[4]||(a[4]=(...e)=>s.clear&&s.clear(...e))},[e.renderSlot(t.$slots,"clearIcon",{},(()=>[e.createVNode(l,{color:"#c0c4cc",size:"20",type:"clear"})]),!0)])):e.createCommentVNode("",!0)],4),"always"===n.cancelButton||r.show&&"auto"===n.cancelButton?(e.openBlock(),e.createElementBlock("text",{key:0,onClick:a[6]||(a[6]=(...e)=>s.cancel&&s.cancel(...e)),class:"uni-searchbar__cancel"},e.toDisplayString(s.cancelTextI18n),1)):e.createCommentVNode("",!0)])}],["__scopeId","data-v-510eacc3"]]);const Ne=ie({name:"u-sticky",emits:["fixed","unfixed"],props:{offsetTop:{type:[Number,String],default:0},index:{type:[Number,String],default:""},enable:{type:Boolean,default:!0},h5NavHeight:{type:[Number,String],default:44},bgColor:{type:String,default:"#ffffff"},zIndex:{type:[Number,String],default:""}},data(){return{fixed:!1,height:"auto",stickyTop:0,elClass:this.$u.guid(),left:0,width:"auto"}},watch:{offsetTop(e){this.initObserver()},enable(e){0==e?(this.fixed=!1,this.disconnectObserver("contentObserver")):this.initObserver()}},computed:{uZIndex(){return this.zIndex?this.zIndex:this.$u.zIndex.sticky}},mounted(){this.initObserver()},methods:{initObserver(){this.enable&&(this.stickyTop=0!=this.offsetTop?uni.upx2px(this.offsetTop):0,this.disconnectObserver("contentObserver"),this.$uGetRect("."+this.elClass).then((e=>{this.height=e.height,this.left=e.left,this.width=e.width,this.$nextTick((()=>{this.observeContent()}))})))},observeContent(){this.disconnectObserver("contentObserver");const e=uni.createIntersectionObserver(this,{thresholds:[.95,.98,1]});e.relativeToViewport({top:-this.stickyTop}),e.observe("."+this.elClass,(e=>{this.enable&&this.setFixed(e.boundingClientRect.top)})),this.contentObserver=e},setFixed(e){const t=e<this.stickyTop;t?this.$emit("fixed",this.index):this.fixed&&this.$emit("unfixed",this.index),this.fixed=t},disconnectObserver(e){const t=this[e];t&&t.disconnect()}},beforeUnmount(){this.disconnectObserver("contentObserver")}},[["render",function(t,a,n,o,i,r){return e.openBlock(),e.createElementBlock("view",{class:""},[e.createElementVNode("view",{class:e.normalizeClass(["u-sticky-wrap",[i.elClass]]),style:e.normalizeStyle({height:i.fixed?i.height+"px":"auto",backgroundColor:n.bgColor})},[e.createElementVNode("view",{class:"u-sticky",style:e.normalizeStyle({position:i.fixed?"fixed":"static",top:i.stickyTop+"px",left:i.left+"px",width:"auto"==i.width?"auto":i.width+"px",zIndex:r.uZIndex})},[e.renderSlot(t.$slots,"default",{},void 0,!0)],4)],6)])}],["__scopeId","data-v-2c46442c"]]),we="/static/my/contect.png",Ce="/static/consult/filter.png",Me="/static/consult/address.png",Se={pages:[{path:"pages/login/login",style:{navigationBarTitleText:"登录",navigationStyle:"custom"}},{path:"pages/confide/index",style:{navigationBarTitleText:"倾听师首页"}},{path:"pages/confide/detail",style:{navigationBarTitleText:"倾听师详情"}},{path:"pages/consult/index",style:{navigationBarTitleText:"咨询师首页"}},{path:"pages/consult/detail",style:{navigationBarTitleText:"咨询师详情"}},{path:"pages/index/index",style:{navigationBarTitleText:"首页"}},{path:"pages/message/index",style:{navigationBarTitleText:"消息"}},{path:"pages/my/index",style:{navigationStyle:"custom",backgroundColor:"#F4F6F8",navigationBarTitleText:"我的"}},{path:"pages/readArticle/readArticle",style:{navigationBarTitleText:"文章列表"}},{path:"pages/readArticle/articleDetail",style:{navigationBarTitleText:"文章详情"}},{path:"pages/settled/settled",style:{navigationBarTitleText:"入驻"}},{path:"pages/settled/application",style:{navigationStyle:"custom"}},{path:"pages/consult-feel/consult-feel",style:{navigationBarTitleText:"咨询感受"}},{path:"pages/evaluate/evaluate",style:{navigationBarTitleText:"评价列表"}},{path:"pages/forum/index/index",style:{navigationBarTitleText:"论坛首页"}},{path:"pages/forum/write/write",style:{navigationBarTitleText:"写"}},{path:"pages/forum/my/my",style:{navigationBarTitleText:"个人空间"}},{path:"pages/forum/other/other",style:{navigationBarTitleText:"其他人空间"}},{path:"pages/forum/mailbox/mailbox",style:{navigationBarTitleText:"信箱详情"}},{path:"pages/forum/write/ask-question/ask-question",style:{navigationBarTitleText:"提问题"}},{path:"pages/forum/write/send-dynamics/send-dynamics",style:{navigationBarTitleText:"发动态"}},{path:"pages/forum/write/write-mailbox/write-mailbox",style:{navigationBarTitleText:"写信"}},{path:"pages/forum/my/userInfo",style:{navigationBarTitleText:"用户信息"}},{path:"pages/forum/my/info",style:{navigationBarTitleText:"用户信息"}},{path:"pages/forum/write/choose-topic/choose-topic",style:{navigationBarTitleText:"选择话题"}},{path:"pages/forum/index/qaDetail",style:{navigationBarTitleText:"问答详情"}},{path:"pages/psychological-test/index/index",style:{navigationBarTitleText:"心理测试"}},{path:"pages/psychological-test/order/order",style:{navigationBarTitleText:"我的评测"}},{path:"pages/psychological-test/test-type/test-type",style:{navigationBarTitleText:"评测类型"}},{path:"pages/psychological-test/start-test/start-test",style:{navigationBarTitleText:"潜意识投射测试"}},{path:"pages/psychological-test/comment/comment",style:{navigationBarTitleText:"评论"}},{path:"pages/psychological-test/contact-consult/contact-consult",style:{navigationBarTitleText:"联系咨询师"}},{path:"pages/psychological-test/test-result/test-result",style:{navigationBarTitleText:"测试结果"}},{path:"pages/psychological-test/charge-test/charge-test",style:{navigationBarTitleText:"收费测试"}},{path:"pages/psychological-test/free-test/free-test",style:{navigationBarTitleText:"免费测试"}},{path:"pages/message/private-chat",style:{navigationStyle:"custom"}},{path:"pages/supplementInfo/supplementInfo",style:{navigationBarTitleText:"补充资料",navigationStyle:"custom"}},{path:"pages/settings/serviceSettings",style:{navigationStyle:"default",navigationBarTitleText:"服务设置"}},{path:"pages/settings/help-center",style:{navigationStyle:"custom"}},{path:"pages/settings/service-setup",style:{navigationStyle:"custom"}},{path:"pages/settings/service-price",style:{navigationStyle:"custom"}},{path:"pages/settings/feedback",style:{navigationStyle:"custom"}},{path:"pages/settings/complaint",style:{navigationStyle:"custom"}},{path:"pages/payment/order/refund-order",style:{navigationStyle:"custom"}},{path:"pages/settings/record",style:{navigationStyle:"custom"}},{path:"pages/payment/order/consult-order",style:{navigationStyle:"custom"}},{path:"pages/payment/order/exam-order",style:{navigationStyle:"custom"}},{path:"pages/payment/order/listener-order",style:{navigationStyle:"custom"}},{path:"pages/payment/order/bill-order",style:{navigationStyle:"custom"}},{path:"pages/payment/order/evaluation-order",style:{navigationStyle:"custom"}},{path:"pages/settings/services",style:{navigationStyle:"custom",navigationBarTitleText:"服务资料"}},{path:"pages/auth/auth",style:{navigationBarTitleText:"认证",navigationBarBackgroundColor:"#F4F6F8",navigationStyle:"default",navigationBarTextStyle:"black"}},{path:"pages/auth/cityChoose",style:{navigationBarTitleText:"城市选择",navigationBarBackgroundColor:"#F4F6F8",navigationBarTextStyle:"black"}},{path:"pages/payment/payment",style:{navigationBarTitleText:"订单支付",navigationBarBackgroundColor:"#F4F6F8",navigationBarTextStyle:"black"}},{path:"pages/payment/payment-records",style:{navigationBarTitleText:"我的订单",navigationBarBackgroundColor:"#F4F6F8",navigationBarTextStyle:"black"}},{path:"pages/payment/order-details",style:{navigationStyle:"custom"}},{path:"pages/register/register",style:{navigationBarTitleText:"",navigationStyle:"custom"}},{path:"pages/settings/settings",style:{navigationBarTitleText:"设置",navigationStyle:"default"}},{path:"pages/account/security",style:{navigationBarTitleText:"账号安全",navigationStyle:"default"}},{path:"pages/webview/webview",style:{navigationBarTitleText:"",navigationStyle:"default"}},{path:"pages/my/wallet/bill",style:{navigationStyle:"custom"}},{path:"pages/my/wallet/withdrawal",style:{navigationStyle:"custom"}},{path:"pages/my/wallet/bank-card",style:{navigationStyle:"custom"}},{path:"pages/my/wallet/mine",style:{navigationStyle:"custom"}},{path:"pages/shopping-mall/mall-home",style:{navigationStyle:"custom"}},{path:"pages/shopping-mall/product-details",style:{navigationStyle:"custom"}},{path:"pages/shopping-mall/shopping-cart",style:{navigationStyle:"custom"}},{path:"pages/shopping-mall/delivery-address",style:{navigationStyle:"custom"}},{path:"pages/shopping-mall/operation-address",style:{navigationStyle:"custom"}},{path:"pages/shopping-mall/order-details",style:{navigationStyle:"custom"}},{path:"pages/shopping-mall/order-list",style:{navigationStyle:"custom"}},{path:"pages/shopping-mall/order-confirmation",style:{navigationStyle:"custom"}}],tabBar:{color:"#7A7E83",selectedColor:"#3cc51f",borderStyle:"black",backgroundColor:"#ffffff",list:[{pagePath:"pages/index/index",iconPath:"/static/switchIcon/index.png",selectedIconPath:"/static/switchIcon/index-active.png",text:"首页"},{pagePath:"pages/consult/index",iconPath:"/static/switchIcon/consult.png",selectedIconPath:"/static/switchIcon/consult-active.png",text:"咨询"},{pagePath:"pages/confide/index",iconPath:"/static/switchIcon/confide.png",selectedIconPath:"/static/switchIcon/confide-active.png",text:"倾诉"},{pagePath:"pages/message/index",iconPath:"/static/switchIcon/message.png",selectedIconPath:"/static/switchIcon/message-active.png",text:"消息"},{pagePath:"pages/my/index",iconPath:"/static/switchIcon/my.png",selectedIconPath:"/static/switchIcon/my-active.png",text:"我的"}]},globalStyle:{navigationBarTitleText:"",navigationStyle:"custom",navigationBarBackgroundColor:"#ffffff",pageOrientation:"portrait",navigationBarTextStyle:"black",backgroundColor:"#F4F6F8",backgroundColorTop:"#F4F5F6",backgroundColorBottom:"#F4F5F6",h5:{maxWidth:1190,navigationBarTextStyle:"white",navigationBarBackgroundColor:"#007AFF"},bounce:"none"},uniIdRouter:{},condition:{current:0,list:[{name:"",path:"pages/login/login",query:""}]}};function Ie(e,t,a){return e(a={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&a.path)}},a.exports),a.exports}var Te=Ie((function(e,t){var a;e.exports=(a=a||function(e,t){var a=Object.create||function(){function e(){}return function(t){var a;return e.prototype=t,a=new e,e.prototype=null,a}}(),n={},o=n.lib={},i=o.Base={extend:function(e){var t=a(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},r=o.WordArray=i.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||l).stringify(this)},concat:function(e){var t=this.words,a=e.words,n=this.sigBytes,o=e.sigBytes;if(this.clamp(),n%4)for(var i=0;i<o;i++){var r=a[i>>>2]>>>24-i%4*8&255;t[n+i>>>2]|=r<<24-(n+i)%4*8}else for(i=0;i<o;i+=4)t[n+i>>>2]=a[i>>>2];return this.sigBytes+=o,this},clamp:function(){var t=this.words,a=this.sigBytes;t[a>>>2]&=4294967295<<32-a%4*8,t.length=e.ceil(a/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var a,n=[],o=function(t){var a=987654321,n=4294967295;return function(){var o=((a=36969*(65535&a)+(a>>16)&n)<<16)+(t=18e3*(65535&t)+(t>>16)&n)&n;return o/=4294967296,(o+=.5)*(e.random()>.5?1:-1)}},i=0;i<t;i+=4){var s=o(4294967296*(a||e.random()));a=987654071*s(),n.push(4294967296*s()|0)}return new r.init(n,t)}}),s=n.enc={},l=s.Hex={stringify:function(e){for(var t=e.words,a=e.sigBytes,n=[],o=0;o<a;o++){var i=t[o>>>2]>>>24-o%4*8&255;n.push((i>>>4).toString(16)),n.push((15&i).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,a=[],n=0;n<t;n+=2)a[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new r.init(a,t/2)}},c=s.Latin1={stringify:function(e){for(var t=e.words,a=e.sigBytes,n=[],o=0;o<a;o++){var i=t[o>>>2]>>>24-o%4*8&255;n.push(String.fromCharCode(i))}return n.join("")},parse:function(e){for(var t=e.length,a=[],n=0;n<t;n++)a[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new r.init(a,t)}},u=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},d=o.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new r.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=u.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var a=this._data,n=a.words,o=a.sigBytes,i=this.blockSize,s=o/(4*i),l=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*i,c=e.min(4*l,o);if(l){for(var u=0;u<l;u+=i)this._doProcessBlock(n,u);var d=n.splice(0,l);a.sigBytes-=c}return new r.init(d,c)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});o.Hasher=d.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,a){return new e.init(a).finalize(t)}},_createHmacHelper:function(e){return function(t,a){return new m.HMAC.init(e,a).finalize(t)}}});var m=n.algo={};return n}(Math),a)})),De=Te,be=(Ie((function(e,t){var a;e.exports=(a=De,function(e){var t=a,n=t.lib,o=n.WordArray,i=n.Hasher,r=t.algo,s=[];!function(){for(var t=0;t<64;t++)s[t]=4294967296*e.abs(e.sin(t+1))|0}();var l=r.MD5=i.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var a=0;a<16;a++){var n=t+a,o=e[n];e[n]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}var i=this._hash.words,r=e[t+0],l=e[t+1],p=e[t+2],h=e[t+3],v=e[t+4],g=e[t+5],f=e[t+6],y=e[t+7],_=e[t+8],k=e[t+9],E=e[t+10],x=e[t+11],N=e[t+12],w=e[t+13],C=e[t+14],M=e[t+15],S=i[0],I=i[1],T=i[2],D=i[3];S=c(S,I,T,D,r,7,s[0]),D=c(D,S,I,T,l,12,s[1]),T=c(T,D,S,I,p,17,s[2]),I=c(I,T,D,S,h,22,s[3]),S=c(S,I,T,D,v,7,s[4]),D=c(D,S,I,T,g,12,s[5]),T=c(T,D,S,I,f,17,s[6]),I=c(I,T,D,S,y,22,s[7]),S=c(S,I,T,D,_,7,s[8]),D=c(D,S,I,T,k,12,s[9]),T=c(T,D,S,I,E,17,s[10]),I=c(I,T,D,S,x,22,s[11]),S=c(S,I,T,D,N,7,s[12]),D=c(D,S,I,T,w,12,s[13]),T=c(T,D,S,I,C,17,s[14]),S=u(S,I=c(I,T,D,S,M,22,s[15]),T,D,l,5,s[16]),D=u(D,S,I,T,f,9,s[17]),T=u(T,D,S,I,x,14,s[18]),I=u(I,T,D,S,r,20,s[19]),S=u(S,I,T,D,g,5,s[20]),D=u(D,S,I,T,E,9,s[21]),T=u(T,D,S,I,M,14,s[22]),I=u(I,T,D,S,v,20,s[23]),S=u(S,I,T,D,k,5,s[24]),D=u(D,S,I,T,C,9,s[25]),T=u(T,D,S,I,h,14,s[26]),I=u(I,T,D,S,_,20,s[27]),S=u(S,I,T,D,w,5,s[28]),D=u(D,S,I,T,p,9,s[29]),T=u(T,D,S,I,y,14,s[30]),S=d(S,I=u(I,T,D,S,N,20,s[31]),T,D,g,4,s[32]),D=d(D,S,I,T,_,11,s[33]),T=d(T,D,S,I,x,16,s[34]),I=d(I,T,D,S,C,23,s[35]),S=d(S,I,T,D,l,4,s[36]),D=d(D,S,I,T,v,11,s[37]),T=d(T,D,S,I,y,16,s[38]),I=d(I,T,D,S,E,23,s[39]),S=d(S,I,T,D,w,4,s[40]),D=d(D,S,I,T,r,11,s[41]),T=d(T,D,S,I,h,16,s[42]),I=d(I,T,D,S,f,23,s[43]),S=d(S,I,T,D,k,4,s[44]),D=d(D,S,I,T,N,11,s[45]),T=d(T,D,S,I,M,16,s[46]),S=m(S,I=d(I,T,D,S,p,23,s[47]),T,D,r,6,s[48]),D=m(D,S,I,T,y,10,s[49]),T=m(T,D,S,I,C,15,s[50]),I=m(I,T,D,S,g,21,s[51]),S=m(S,I,T,D,N,6,s[52]),D=m(D,S,I,T,h,10,s[53]),T=m(T,D,S,I,E,15,s[54]),I=m(I,T,D,S,l,21,s[55]),S=m(S,I,T,D,_,6,s[56]),D=m(D,S,I,T,M,10,s[57]),T=m(T,D,S,I,f,15,s[58]),I=m(I,T,D,S,w,21,s[59]),S=m(S,I,T,D,v,6,s[60]),D=m(D,S,I,T,x,10,s[61]),T=m(T,D,S,I,p,15,s[62]),I=m(I,T,D,S,k,21,s[63]),i[0]=i[0]+S|0,i[1]=i[1]+I|0,i[2]=i[2]+T|0,i[3]=i[3]+D|0},_doFinalize:function(){var t=this._data,a=t.words,n=8*this._nDataBytes,o=8*t.sigBytes;a[o>>>5]|=128<<24-o%32;var i=e.floor(n/4294967296),r=n;a[15+(o+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),a[14+(o+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),t.sigBytes=4*(a.length+1),this._process();for(var s=this._hash,l=s.words,c=0;c<4;c++){var u=l[c];l[c]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return s},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});function c(e,t,a,n,o,i,r){var s=e+(t&a|~t&n)+o+r;return(s<<i|s>>>32-i)+t}function u(e,t,a,n,o,i,r){var s=e+(t&n|a&~n)+o+r;return(s<<i|s>>>32-i)+t}function d(e,t,a,n,o,i,r){var s=e+(t^a^n)+o+r;return(s<<i|s>>>32-i)+t}function m(e,t,a,n,o,i,r){var s=e+(a^(t|~n))+o+r;return(s<<i|s>>>32-i)+t}t.MD5=i._createHelper(l),t.HmacMD5=i._createHmacHelper(l)}(Math),a.MD5)})),Ie((function(e,t){var a,n,o;e.exports=(n=(a=De).lib.Base,o=a.enc.Utf8,void(a.algo.HMAC=n.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=o.parse(t));var a=e.blockSize,n=4*a;t.sigBytes>n&&(t=e.finalize(t)),t.clamp();for(var i=this._oKey=t.clone(),r=this._iKey=t.clone(),s=i.words,l=r.words,c=0;c<a;c++)s[c]^=1549556828,l[c]^=909522486;i.sigBytes=r.sigBytes=n,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,a=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(a))}})))})),Ie((function(e,t){e.exports=De.HmacMD5}))),Ve=Ie((function(e,t){e.exports=De.enc.Utf8})),Ae=Ie((function(e,t){var a,n,o;e.exports=(o=(n=a=De).lib.WordArray,n.enc.Base64={stringify:function(e){var t=e.words,a=e.sigBytes,n=this._map;e.clamp();for(var o=[],i=0;i<a;i+=3)for(var r=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,s=0;s<4&&i+.75*s<a;s++)o.push(n.charAt(r>>>6*(3-s)&63));var l=n.charAt(64);if(l)for(;o.length%4;)o.push(l);return o.join("")},parse:function(e){var t=e.length,a=this._map,n=this._reverseMap;if(!n){n=this._reverseMap=[];for(var i=0;i<a.length;i++)n[a.charCodeAt(i)]=i}var r=a.charAt(64);if(r){var s=e.indexOf(r);-1!==s&&(t=s)}return function(e,t,a){for(var n=[],i=0,r=0;r<t;r++)if(r%4){var s=a[e.charCodeAt(r-1)]<<r%4*2,l=a[e.charCodeAt(r)]>>>6-r%4*2;n[i>>>2]|=(s|l)<<24-i%4*8,i++}return o.create(n,i)}(e,t,n)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},a.enc.Base64)}));const Le="uni_id_token",Re="uni_id_token_expired",Oe="FUNCTION",Be="OBJECT",Pe="CLIENT_DB",Ue="pending",Ge="rejected";function Fe(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function qe(e){return"object"===Fe(e)}function ze(e){return"function"==typeof e}function He(e){return function(){try{return e.apply(e,arguments)}catch(t){console.error(t)}}}const $e="REJECTED",je="NOT_PENDING";class Ke{constructor({createPromise:e,retryRule:t=$e}={}){this.createPromise=e,this.status=null,this.promise=null,this.retryRule=t}get needRetry(){if(!this.status)return!0;switch(this.retryRule){case $e:return this.status===Ge;case je:return this.status!==Ue}}exec(){return this.needRetry?(this.status=Ue,this.promise=this.createPromise().then((e=>(this.status="fulfilled",Promise.resolve(e))),(e=>(this.status=Ge,Promise.reject(e)))),this.promise):this.promise}}function Ye(e){return e&&"string"==typeof e?JSON.parse(e):e}const We=Ye([]);Ye("");const Je=Ye("[]")||[];let Ze="";try{Ze="__UNI__6548FAC"}catch(Ft){}let Xe,Qe={};function et(e,t={}){var a,n;return a=Qe,n=e,Object.prototype.hasOwnProperty.call(a,n)||(Qe[e]=t),Qe[e]}Qe=uni._globalUniCloudObj?uni._globalUniCloudObj:uni._globalUniCloudObj={};const at=["invoke","success","fail","complete"],nt=et("_globalUniCloudInterceptor");function ot(e,t){nt[e]||(nt[e]={}),qe(t)&&Object.keys(t).forEach((a=>{at.indexOf(a)>-1&&function(e,t,a){let n=nt[e][t];n||(n=nt[e][t]=[]),-1===n.indexOf(a)&&ze(a)&&n.push(a)}(e,a,t[a])}))}function it(e,t){nt[e]||(nt[e]={}),qe(t)?Object.keys(t).forEach((a=>{at.indexOf(a)>-1&&function(e,t,a){const n=nt[e][t];if(!n)return;const o=n.indexOf(a);o>-1&&n.splice(o,1)}(e,a,t[a])})):delete nt[e]}function rt(e,t){return e&&0!==e.length?e.reduce(((e,a)=>e.then((()=>a(t)))),Promise.resolve()):Promise.resolve()}function st(e,t){return nt[e]&&nt[e][t]||[]}function lt(e){ot("callObject",e)}const ct=et("_globalUniCloudListener"),ut="response",dt="needLogin",mt="refreshToken",pt="clientdb",ht="cloudfunction",vt="cloudobject";function gt(e){return ct[e]||(ct[e]=[]),ct[e]}function ft(e,t){const a=gt(e);a.includes(t)||a.push(t)}function yt(e,t){const a=gt(e),n=a.indexOf(t);-1!==n&&a.splice(n,1)}function _t(e,t){const a=gt(e);for(let n=0;n<a.length;n++)(0,a[n])(t)}let kt,Et=!1;function xt(){return kt||(kt=new Promise((e=>{Et&&e(),function t(){if("function"==typeof getCurrentPages){const t=getCurrentPages();t&&t[0]&&(Et=!0,e())}Et||setTimeout((()=>{t()}),30)}()})),kt)}function Nt(e){const t={};for(const a in e){const n=e[a];ze(n)&&(t[a]=He(n))}return t}class wt extends Error{constructor(e){const t=e.message||e.errMsg||"unknown system error";super(t),this.errMsg=t,this.code=this.errCode=e.code||e.errCode||"SYSTEM_ERROR",this.errSubject=this.subject=e.subject||e.errSubject,this.cause=e.cause,this.requestId=e.requestId}toJson(e=0){if(!(e>=10))return e++,{errCode:this.errCode,errMsg:this.errMsg,errSubject:this.errSubject,cause:this.cause&&this.cause.toJson?this.cause.toJson(e):this.cause}}}var Ct={request:e=>uni.request(e),uploadFile:e=>uni.uploadFile(e),setStorageSync:(e,t)=>uni.setStorageSync(e,t),getStorageSync:e=>uni.getStorageSync(e),removeStorageSync:e=>uni.removeStorageSync(e),clearStorageSync:()=>uni.clearStorageSync(),connectSocket:e=>uni.connectSocket(e)};function Mt(e){return e&&Mt(e.__v_raw)||e}function St(){return{token:Ct.getStorageSync(Le)||Ct.getStorageSync("uniIdToken"),tokenExpired:Ct.getStorageSync(Re)}}function It({token:e,tokenExpired:t}={}){e&&Ct.setStorageSync(Le,e),t&&Ct.setStorageSync(Re,t)}let Tt,Dt;function bt(){return Tt||(Tt=uni.getSystemInfoSync()),Tt}function Vt(){let e,t;try{if(uni.getLaunchOptionsSync){if(uni.getLaunchOptionsSync.toString().indexOf("not yet implemented")>-1)return;const{scene:a,channel:n}=uni.getLaunchOptionsSync();e=n,t=a}}catch(a){}return{channel:e,scene:t}}let At={};function Lt(){const e=uni.getLocale&&uni.getLocale()||"en";if(Dt)return{...At,...Dt,locale:e,LOCALE:e};const t=bt(),{deviceId:a,osName:n,uniPlatform:o,appId:i}=t,r=["appId","appLanguage","appName","appVersion","appVersionCode","appWgtVersion","browserName","browserVersion","deviceBrand","deviceId","deviceModel","deviceType","osName","osVersion","romName","romVersion","ua","hostName","hostVersion","uniPlatform","uniRuntimeVersion","uniRuntimeVersionCode","uniCompilerVersion","uniCompilerVersionCode"];for(const s in t)Object.hasOwnProperty.call(t,s)&&-1===r.indexOf(s)&&delete t[s];return Dt={PLATFORM:o,OS:n,APPID:i,DEVICEID:a,...Vt(),...t},{...At,...Dt,locale:e,LOCALE:e}}var Rt=function(e,t){let a="";return Object.keys(e).sort().forEach((function(t){e[t]&&(a=a+"&"+t+"="+e[t])})),a=a.slice(1),be(a,t).toString()},Ot=function(e,t){return new Promise(((a,n)=>{t(Object.assign(e,{complete(e){e||(e={});const t=e.data&&e.data.header&&e.data.header["x-serverless-request-id"]||e.header&&e.header["request-id"];if(!e.statusCode||e.statusCode>=400){const a=e.data&&e.data.error&&e.data.error.code||"SYS_ERR",o=e.data&&e.data.error&&e.data.error.message||e.errMsg||"request:fail";return n(new wt({code:a,message:o,requestId:t}))}const o=e.data;if(o.error)return n(new wt({code:o.error.code,message:o.error.message,requestId:t}));o.result=o.data,o.requestId=t,delete o.data,a(o)}}))}))},Bt=function(e){return Ae.stringify(Ve.parse(e))},Pt={init(e){const t=new class{constructor(e){["spaceId","clientSecret"].forEach((t=>{if(!Object.prototype.hasOwnProperty.call(e,t))throw new Error(`${t} required`)})),this.config=Object.assign({},{endpoint:0===e.spaceId.indexOf("mp-")?"https://api.next.bspapp.com":"https://api.bspapp.com"},e),this.config.provider="aliyun",this.config.requestUrl=this.config.endpoint+"/client",this.config.envType=this.config.envType||"public",this.config.accessTokenKey="access_token_"+this.config.spaceId,this.adapter=Ct,this._getAccessTokenPromiseHub=new Ke({createPromise:()=>this.requestAuth(this.setupRequest({method:"serverless.auth.user.anonymousAuthorize",params:"{}"},"auth")).then((e=>{if(!e.result||!e.result.accessToken)throw new wt({code:"AUTH_FAILED",message:"获取accessToken失败"});this.setAccessToken(e.result.accessToken)})),retryRule:je})}get hasAccessToken(){return!!this.accessToken}setAccessToken(e){this.accessToken=e}requestWrapped(e){return Ot(e,this.adapter.request)}requestAuth(e){return this.requestWrapped(e)}request(e,t){return Promise.resolve().then((()=>this.hasAccessToken?t?this.requestWrapped(e):this.requestWrapped(e).catch((t=>new Promise(((e,a)=>{!t||"GATEWAY_INVALID_TOKEN"!==t.code&&"InvalidParameter.InvalidToken"!==t.code?a(t):e()})).then((()=>this.getAccessToken())).then((()=>{const t=this.rebuildRequest(e);return this.request(t,!0)})))):this.getAccessToken().then((()=>{const t=this.rebuildRequest(e);return this.request(t,!0)}))))}rebuildRequest(e){const t=Object.assign({},e);return t.data.token=this.accessToken,t.header["x-basement-token"]=this.accessToken,t.header["x-serverless-sign"]=Rt(t.data,this.config.clientSecret),t}setupRequest(e,t){const a=Object.assign({},e,{spaceId:this.config.spaceId,timestamp:Date.now()}),n={"Content-Type":"application/json"};return"auth"!==t&&(a.token=this.accessToken,n["x-basement-token"]=this.accessToken),n["x-serverless-sign"]=Rt(a,this.config.clientSecret),{url:this.config.requestUrl,method:"POST",data:a,dataType:"json",header:n}}getAccessToken(){return this._getAccessTokenPromiseHub.exec()}async authorize(){await this.getAccessToken()}callFunction(e){const t={method:"serverless.function.runtime.invoke",params:JSON.stringify({functionTarget:e.name,functionArgs:e.data||{}})};return this.request({...this.setupRequest(t),timeout:e.timeout})}getOSSUploadOptionsFromPath(e){const t={method:"serverless.file.resource.generateProximalSign",params:JSON.stringify(e)};return this.request(this.setupRequest(t))}uploadFileToOSS({url:e,formData:t,name:a,filePath:n,fileType:o,onUploadProgress:i}){return new Promise(((r,s)=>{const l=this.adapter.uploadFile({url:e,formData:t,name:a,filePath:n,fileType:o,header:{"X-OSS-server-side-encrpytion":"AES256"},success(e){e&&e.statusCode<400?r(e):s(new wt({code:"UPLOAD_FAILED",message:"文件上传失败"}))},fail(e){s(new wt({code:e.code||"UPLOAD_FAILED",message:e.message||e.errMsg||"文件上传失败"}))}});"function"==typeof i&&l&&"function"==typeof l.onProgressUpdate&&l.onProgressUpdate((e=>{i({loaded:e.totalBytesSent,total:e.totalBytesExpectedToSend})}))}))}reportOSSUpload(e){const t={method:"serverless.file.resource.report",params:JSON.stringify(e)};return this.request(this.setupRequest(t))}async uploadFile({filePath:e,cloudPath:t,fileType:a="image",cloudPathAsRealPath:n=!1,onUploadProgress:o,config:i}){if("string"!==Fe(t))throw new wt({code:"INVALID_PARAM",message:"cloudPath必须为字符串类型"});if(!(t=t.trim()))throw new wt({code:"INVALID_PARAM",message:"cloudPath不可为空"});if(/:\/\//.test(t))throw new wt({code:"INVALID_PARAM",message:"cloudPath不合法"});const r=i&&i.envType||this.config.envType;if(n&&("/"!==t[0]&&(t="/"+t),t.indexOf("\\")>-1))throw new wt({code:"INVALID_PARAM",message:"使用cloudPath作为路径时，cloudPath不可包含“\\”"});const s=(await this.getOSSUploadOptionsFromPath({env:r,filename:n?t.split("/").pop():t,fileId:n?t:void 0})).result,l="https://"+s.cdnDomain+"/"+s.ossPath,{securityToken:c,accessKeyId:u,signature:d,host:m,ossPath:p,id:h,policy:v,ossCallbackUrl:g}=s,f={"Cache-Control":"max-age=2592000","Content-Disposition":"attachment",OSSAccessKeyId:u,Signature:d,host:m,id:h,key:p,policy:v,success_action_status:200};if(c&&(f["x-oss-security-token"]=c),g){const e=JSON.stringify({callbackUrl:g,callbackBody:JSON.stringify({fileId:h,spaceId:this.config.spaceId}),callbackBodyType:"application/json"});f.callback=Bt(e)}const y={url:"https://"+s.host,formData:f,fileName:"file",name:"file",filePath:e,fileType:a};if(await this.uploadFileToOSS(Object.assign({},y,{onUploadProgress:o})),g)return{success:!0,filePath:e,fileID:l};if((await this.reportOSSUpload({id:h})).success)return{success:!0,filePath:e,fileID:l};throw new wt({code:"UPLOAD_FAILED",message:"文件上传失败"})}getTempFileURL({fileList:e}={}){return new Promise(((t,a)=>{Array.isArray(e)&&0!==e.length||a(new wt({code:"INVALID_PARAM",message:"fileList的元素必须是非空的字符串"})),this.getFileInfo({fileList:e}).then((a=>{t({fileList:e.map(((e,t)=>{const n=a.fileList[t];return{fileID:e,tempFileURL:n&&n.url||e}}))})}))}))}async getFileInfo({fileList:e}={}){if(!Array.isArray(e)||0===e.length)throw new wt({code:"INVALID_PARAM",message:"fileList的元素必须是非空的字符串"});const t={method:"serverless.file.resource.info",params:JSON.stringify({id:e.map((e=>e.split("?")[0])).join(",")})};return{fileList:(await this.request(this.setupRequest(t))).result}}}(e),a={signInAnonymously:function(){return t.authorize()},getLoginState:function(){return Promise.resolve(!1)}};return t.auth=function(){return a},t.customAuth=t.auth,t}};const Ut="undefined"!=typeof location&&"http:"===location.protocol?"http:":"https:";var Gt,Ft;(Ft=Gt||(Gt={})).local="local",Ft.none="none",Ft.session="session";var qt=function(){},zt=Ie((function(e,t){var a;e.exports=(a=De,function(e){var t=a,n=t.lib,o=n.WordArray,i=n.Hasher,r=t.algo,s=[],l=[];!function(){function t(t){for(var a=e.sqrt(t),n=2;n<=a;n++)if(!(t%n))return!1;return!0}function a(e){return 4294967296*(e-(0|e))|0}for(var n=2,o=0;o<64;)t(n)&&(o<8&&(s[o]=a(e.pow(n,.5))),l[o]=a(e.pow(n,1/3)),o++),n++}();var c=[],u=r.SHA256=i.extend({_doReset:function(){this._hash=new o.init(s.slice(0))},_doProcessBlock:function(e,t){for(var a=this._hash.words,n=a[0],o=a[1],i=a[2],r=a[3],s=a[4],u=a[5],d=a[6],m=a[7],p=0;p<64;p++){if(p<16)c[p]=0|e[t+p];else{var h=c[p-15],v=(h<<25|h>>>7)^(h<<14|h>>>18)^h>>>3,g=c[p-2],f=(g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10;c[p]=v+c[p-7]+f+c[p-16]}var y=n&o^n&i^o&i,_=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),k=m+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&u^~s&d)+l[p]+c[p];m=d,d=u,u=s,s=r+k|0,r=i,i=o,o=n,n=k+(_+y)|0}a[0]=a[0]+n|0,a[1]=a[1]+o|0,a[2]=a[2]+i|0,a[3]=a[3]+r|0,a[4]=a[4]+s|0,a[5]=a[5]+u|0,a[6]=a[6]+d|0,a[7]=a[7]+m|0},_doFinalize:function(){var t=this._data,a=t.words,n=8*this._nDataBytes,o=8*t.sigBytes;return a[o>>>5]|=128<<24-o%32,a[14+(o+64>>>9<<4)]=e.floor(n/4294967296),a[15+(o+64>>>9<<4)]=n,t.sigBytes=4*a.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=i._createHelper(u),t.HmacSHA256=i._createHmacHelper(u)}(Math),a.SHA256)})),Ht=zt,$t=Ie((function(e,t){e.exports=De.HmacSHA256}));const jt=()=>{let e;if(!Promise){e=()=>{},e.promise={};const t=()=>{throw new wt({message:'Your Node runtime does support ES6 Promises. Set "global.Promise" to your preferred implementation of promises.'})};return Object.defineProperty(e.promise,"then",{get:t}),Object.defineProperty(e.promise,"catch",{get:t}),e}const t=new Promise(((t,a)=>{e=(e,n)=>e?a(e):t(n)}));return e.promise=t,e};function Kt(e){return void 0===e}function Yt(e){return"[object Null]"===Object.prototype.toString.call(e)}function Wt(e=""){return e.replace(/([\s\S]+)\s+(请前往云开发AI小助手查看问题：.*)/,"$1")}function Jt(e=32){let t="";for(let a=0;a<e;a++)t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));return t}var Zt;!function(e){e.WEB="web",e.WX_MP="wx_mp"}(Zt||(Zt={}));const Xt={adapter:null,runtime:void 0},Qt=["anonymousUuidKey"];class ea extends qt{constructor(){super(),Xt.adapter.root.tcbObject||(Xt.adapter.root.tcbObject={})}setItem(e,t){Xt.adapter.root.tcbObject[e]=t}getItem(e){return Xt.adapter.root.tcbObject[e]}removeItem(e){delete Xt.adapter.root.tcbObject[e]}clear(){delete Xt.adapter.root.tcbObject}}function ta(e,t){switch(e){case"local":return t.localStorage||new ea;case"none":return new ea;default:return t.sessionStorage||new ea}}class aa{constructor(e){if(!this._storage){this._persistence=Xt.adapter.primaryStorage||e.persistence,this._storage=ta(this._persistence,Xt.adapter);const t=`access_token_${e.env}`,a=`access_token_expire_${e.env}`,n=`refresh_token_${e.env}`,o=`anonymous_uuid_${e.env}`,i=`login_type_${e.env}`,r="device_id",s=`token_type_${e.env}`,l=`user_info_${e.env}`;this.keys={accessTokenKey:t,accessTokenExpireKey:a,refreshTokenKey:n,anonymousUuidKey:o,loginTypeKey:i,userInfoKey:l,deviceIdKey:r,tokenTypeKey:s}}}updatePersistence(e){if(e===this._persistence)return;const t="local"===this._persistence;this._persistence=e;const a=ta(e,Xt.adapter);for(const n in this.keys){const e=this.keys[n];if(t&&Qt.includes(n))continue;const o=this._storage.getItem(e);Kt(o)||Yt(o)||(a.setItem(e,o),this._storage.removeItem(e))}this._storage=a}setStore(e,t,a){if(!this._storage)return;const n={version:a||"localCachev1",content:t},o=JSON.stringify(n);try{this._storage.setItem(e,o)}catch(i){throw i}}getStore(e,t){try{if(!this._storage)return}catch(n){return""}t=t||"localCachev1";const a=this._storage.getItem(e);return a&&a.indexOf(t)>=0?JSON.parse(a).content:""}removeStore(e){this._storage.removeItem(e)}}const na={},oa={};function ia(e){return na[e]}class ra{constructor(e,t){this.data=t||null,this.name=e}}class sa extends ra{constructor(e,t){super("error",{error:e,data:t}),this.error=e}}const la=new class{constructor(){this._listeners={}}on(e,t){return a=e,n=t,(o=this._listeners)[a]=o[a]||[],o[a].push(n),this;var a,n,o}off(e,t){return function(e,t,a){if(a&&a[e]){const n=a[e].indexOf(t);-1!==n&&a[e].splice(n,1)}}(e,t,this._listeners),this}fire(e,t){if(e instanceof sa)return console.error(e.error),this;const a="string"==typeof e?new ra(e,t||{}):e,n=a.name;if(this._listens(n)){a.target=this;const e=this._listeners[n]?[...this._listeners[n]]:[];for(const t of e)t.call(this,a)}return this}_listens(e){return this._listeners[e]&&this._listeners[e].length>0}};function ca(e,t){la.on(e,t)}function ua(e,t={}){la.fire(e,t)}function da(e,t){la.off(e,t)}const ma="loginStateChanged",pa="loginStateExpire",ha="loginTypeChanged",va="anonymousConverted",ga="refreshAccessToken";var fa;!function(e){e.ANONYMOUS="ANONYMOUS",e.WECHAT="WECHAT",e.WECHAT_PUBLIC="WECHAT-PUBLIC",e.WECHAT_OPEN="WECHAT-OPEN",e.CUSTOM="CUSTOM",e.EMAIL="EMAIL",e.USERNAME="USERNAME",e.NULL="NULL"}(fa||(fa={}));class ya{constructor(){this._fnPromiseMap=new Map}async run(e,t){let a=this._fnPromiseMap.get(e);return a||(a=new Promise((async(a,n)=>{try{await this._runIdlePromise();const n=t();a(await n)}catch(o){n(o)}finally{this._fnPromiseMap.delete(e)}})),this._fnPromiseMap.set(e,a)),a}_runIdlePromise(){return Promise.resolve()}}class _a{constructor(e){this._singlePromise=new ya,this._cache=ia(e.env),this._baseURL=`https://${e.env}.ap-shanghai.tcb-api.tencentcloudapi.com`,this._reqClass=new Xt.adapter.reqClass({timeout:e.timeout,timeoutMsg:`请求在${e.timeout/1e3}s内未完成，已中断`,restrictedMethods:["post"]})}_getDeviceId(){if(this._deviceID)return this._deviceID;const{deviceIdKey:e}=this._cache.keys;let t=this._cache.getStore(e);return"string"==typeof t&&t.length>=16&&t.length<=48||(t=Jt(),this._cache.setStore(e,t)),this._deviceID=t,t}async _request(e,t,a={}){const n={"x-request-id":Jt(),"x-device-id":this._getDeviceId()};if(a.withAccessToken){const{tokenTypeKey:e}=this._cache.keys,t=await this.getAccessToken(),a=this._cache.getStore(e);n.authorization=`${a} ${t}`}return this._reqClass["get"===a.method?"get":"post"]({url:`${this._baseURL}${e}`,data:t,headers:n})}async _fetchAccessToken(){const{loginTypeKey:e,accessTokenKey:t,accessTokenExpireKey:a,tokenTypeKey:n}=this._cache.keys,o=this._cache.getStore(e);if(o&&o!==fa.ANONYMOUS)throw new wt({code:"INVALID_OPERATION",message:"非匿名登录不支持刷新 access token"});const i=await this._singlePromise.run("fetchAccessToken",(async()=>(await this._request("/auth/v1/signin/anonymously",{},{method:"post"})).data)),{access_token:r,expires_in:s,token_type:l}=i;return this._cache.setStore(n,l),this._cache.setStore(t,r),this._cache.setStore(a,Date.now()+1e3*s),r}isAccessTokenExpired(e,t){let a=!0;return e&&t&&(a=t<Date.now()),a}async getAccessToken(){const{accessTokenKey:e,accessTokenExpireKey:t}=this._cache.keys,a=this._cache.getStore(e),n=this._cache.getStore(t);return this.isAccessTokenExpired(a,n)?this._fetchAccessToken():a}async refreshAccessToken(){const{accessTokenKey:e,accessTokenExpireKey:t,loginTypeKey:a}=this._cache.keys;return this._cache.removeStore(e),this._cache.removeStore(t),this._cache.setStore(a,fa.ANONYMOUS),this.getAccessToken()}async getUserInfo(){return this._singlePromise.run("getUserInfo",(async()=>(await this._request("/auth/v1/user/me",{},{withAccessToken:!0,method:"get"})).data))}}const ka=["auth.getJwt","auth.logout","auth.signInWithTicket","auth.signInAnonymously","auth.signIn","auth.fetchAccessTokenWithRefreshToken","auth.signUpWithEmailAndPassword","auth.activateEndUserMail","auth.sendPasswordResetEmail","auth.resetPasswordWithToken","auth.isUsernameRegistered"],Ea={"X-SDK-Version":"1.3.5"};function xa(e,t,a){const n=e[t];e[t]=function(t){const o={},i={};a.forEach((a=>{const{data:n,headers:r}=a.call(e,t);Object.assign(o,n),Object.assign(i,r)}));const r=t.data;return r&&(()=>{var e;if(e=r,"[object FormData]"!==Object.prototype.toString.call(e))t.data={...r,...o};else for(const t in o)r.append(t,o[t])})(),t.headers={...t.headers||{},...i},n.call(e,t)}}function Na(){const e=Math.random().toString(16).slice(2);return{data:{seqId:e},headers:{...Ea,"x-seqid":e}}}class wa{constructor(e={}){var t;this.config=e,this._reqClass=new Xt.adapter.reqClass({timeout:this.config.timeout,timeoutMsg:`请求在${this.config.timeout/1e3}s内未完成，已中断`,restrictedMethods:["post"]}),this._cache=ia(this.config.env),this._localCache=(t=this.config.env,oa[t]),this.oauth=new _a(this.config),xa(this._reqClass,"post",[Na]),xa(this._reqClass,"upload",[Na]),xa(this._reqClass,"download",[Na])}async post(e){return await this._reqClass.post(e)}async upload(e){return await this._reqClass.upload(e)}async download(e){return await this._reqClass.download(e)}async refreshAccessToken(){let e,t;this._refreshAccessTokenPromise||(this._refreshAccessTokenPromise=this._refreshAccessToken());try{e=await this._refreshAccessTokenPromise}catch(a){t=a}if(this._refreshAccessTokenPromise=null,this._shouldRefreshAccessTokenHook=null,t)throw t;return e}async _refreshAccessToken(){const{accessTokenKey:e,accessTokenExpireKey:t,refreshTokenKey:a,loginTypeKey:n,anonymousUuidKey:o}=this._cache.keys;this._cache.removeStore(e),this._cache.removeStore(t);let i=this._cache.getStore(a);if(!i)throw new wt({message:"未登录CloudBase"});const r={refresh_token:i},s=await this.request("auth.fetchAccessTokenWithRefreshToken",r);if(s.data.code){const{code:e}=s.data;if("SIGN_PARAM_INVALID"===e||"REFRESH_TOKEN_EXPIRED"===e||"INVALID_REFRESH_TOKEN"===e){if(this._cache.getStore(n)===fa.ANONYMOUS&&"INVALID_REFRESH_TOKEN"===e){const e=this._cache.getStore(o),t=this._cache.getStore(a),n=await this.send("auth.signInAnonymously",{anonymous_uuid:e,refresh_token:t});return this.setRefreshToken(n.refresh_token),this._refreshAccessToken()}ua(pa),this._cache.removeStore(a)}throw new wt({code:s.data.code,message:`刷新access token失败：${s.data.code}`})}if(s.data.access_token)return ua(ga),this._cache.setStore(e,s.data.access_token),this._cache.setStore(t,s.data.access_token_expire+Date.now()),{accessToken:s.data.access_token,accessTokenExpire:s.data.access_token_expire};s.data.refresh_token&&(this._cache.removeStore(a),this._cache.setStore(a,s.data.refresh_token),this._refreshAccessToken())}async getAccessToken(){const{accessTokenKey:e,accessTokenExpireKey:t,refreshTokenKey:a}=this._cache.keys;if(!this._cache.getStore(a))throw new wt({message:"refresh token不存在，登录状态异常"});let n=this._cache.getStore(e),o=this._cache.getStore(t),i=!0;return this._shouldRefreshAccessTokenHook&&!(await this._shouldRefreshAccessTokenHook(n,o))&&(i=!1),(!n||!o||o<Date.now())&&i?this.refreshAccessToken():{accessToken:n,accessTokenExpire:o}}async request(e,t,a){const n=`x-tcb-trace_${this.config.env}`;let o="application/x-www-form-urlencoded";const i={action:e,env:this.config.env,dataVersion:"2019-08-16",...t};let r;if(-1===ka.indexOf(e)&&(this._cache.keys,i.access_token=await this.oauth.getAccessToken()),"storage.uploadFile"===e){r=new FormData;for(let e in r)r.hasOwnProperty(e)&&void 0!==r[e]&&r.append(e,i[e]);o="multipart/form-data"}else{o="application/json",r={};for(let e in i)void 0!==i[e]&&(r[e]=i[e])}let s={headers:{"content-type":o}};a&&a.timeout&&(s.timeout=a.timeout),a&&a.onUploadProgress&&(s.onUploadProgress=a.onUploadProgress);const l=this._localCache.getStore(n);l&&(s.headers["X-TCB-Trace"]=l);const{parse:c,inQuery:u,search:d}=t;let m={env:this.config.env};c&&(m.parse=!0),u&&(m={...u,...m});let p=function(e,t,a={}){const n=/\?/.test(t);let o="";for(let i in a)""===o?!n&&(t+="?"):o+="&",o+=`${i}=${encodeURIComponent(a[i])}`;return/^http(s)?\:\/\//.test(t+=o)?t:`${e}${t}`}(Ut,"//tcb-api.tencentcloudapi.com/web",m);d&&(p+=d);const h=await this.post({url:p,data:r,...s}),v=h.header&&h.header["x-tcb-trace"];if(v&&this._localCache.setStore(n,v),200!==Number(h.status)&&200!==Number(h.statusCode)||!h.data)throw new wt({code:"NETWORK_ERROR",message:"network request error"});return h}async send(e,t={},a={}){const n=await this.request(e,t,{...a,onUploadProgress:t.onUploadProgress});if(("ACCESS_TOKEN_DISABLED"===n.data.code||"ACCESS_TOKEN_EXPIRED"===n.data.code)&&-1===ka.indexOf(e)){await this.oauth.refreshAccessToken();const n=await this.request(e,t,{...a,onUploadProgress:t.onUploadProgress});if(n.data.code)throw new wt({code:n.data.code,message:Wt(n.data.message)});return n.data}if(n.data.code)throw new wt({code:n.data.code,message:Wt(n.data.message)});return n.data}setRefreshToken(e){const{accessTokenKey:t,accessTokenExpireKey:a,refreshTokenKey:n}=this._cache.keys;this._cache.removeStore(t),this._cache.removeStore(a),this._cache.setStore(n,e)}}const Ca={};function Ma(e){return Ca[e]}class Sa{constructor(e){this.config=e,this._cache=ia(e.env),this._request=Ma(e.env)}setRefreshToken(e){const{accessTokenKey:t,accessTokenExpireKey:a,refreshTokenKey:n}=this._cache.keys;this._cache.removeStore(t),this._cache.removeStore(a),this._cache.setStore(n,e)}setAccessToken(e,t){const{accessTokenKey:a,accessTokenExpireKey:n}=this._cache.keys;this._cache.setStore(a,e),this._cache.setStore(n,t)}async refreshUserInfo(){const{data:e}=await this._request.send("auth.getUserInfo",{});return this.setLocalUserInfo(e),e}setLocalUserInfo(e){const{userInfoKey:t}=this._cache.keys;this._cache.setStore(t,e)}}class Ia{constructor(e){if(!e)throw new wt({code:"PARAM_ERROR",message:"envId is not defined"});this._envId=e,this._cache=ia(this._envId),this._request=Ma(this._envId),this.setUserInfo()}linkWithTicket(e){if("string"!=typeof e)throw new wt({code:"PARAM_ERROR",message:"ticket must be string"});return this._request.send("auth.linkWithTicket",{ticket:e})}linkWithRedirect(e){e.signInWithRedirect()}updatePassword(e,t){return this._request.send("auth.updatePassword",{oldPassword:t,newPassword:e})}updateEmail(e){return this._request.send("auth.updateEmail",{newEmail:e})}updateUsername(e){if("string"!=typeof e)throw new wt({code:"PARAM_ERROR",message:"username must be a string"});return this._request.send("auth.updateUsername",{username:e})}async getLinkedUidList(){const{data:e}=await this._request.send("auth.getLinkedUidList",{});let t=!1;const{users:a}=e;return a.forEach((e=>{e.wxOpenId&&e.wxPublicId&&(t=!0)})),{users:a,hasPrimaryUid:t}}setPrimaryUid(e){return this._request.send("auth.setPrimaryUid",{uid:e})}unlink(e){return this._request.send("auth.unlink",{platform:e})}async update(e){const{nickName:t,gender:a,avatarUrl:n,province:o,country:i,city:r}=e,{data:s}=await this._request.send("auth.updateUserInfo",{nickName:t,gender:a,avatarUrl:n,province:o,country:i,city:r});this.setLocalUserInfo(s)}async refresh(){const e=await this._request.oauth.getUserInfo();return this.setLocalUserInfo(e),e}setUserInfo(){const{userInfoKey:e}=this._cache.keys,t=this._cache.getStore(e);["uid","loginType","openid","wxOpenId","wxPublicId","unionId","qqMiniOpenId","email","hasPassword","customUserId","nickName","gender","avatarUrl"].forEach((e=>{this[e]=t[e]})),this.location={country:t.country,province:t.province,city:t.city}}setLocalUserInfo(e){const{userInfoKey:t}=this._cache.keys;this._cache.setStore(t,e),this.setUserInfo()}}class Ta{constructor(e){if(!e)throw new wt({code:"PARAM_ERROR",message:"envId is not defined"});this._cache=ia(e);const{refreshTokenKey:t,accessTokenKey:a,accessTokenExpireKey:n}=this._cache.keys,o=this._cache.getStore(t),i=this._cache.getStore(a),r=this._cache.getStore(n);this.credential={refreshToken:o,accessToken:i,accessTokenExpire:r},this.user=new Ia(e)}get isAnonymousAuth(){return this.loginType===fa.ANONYMOUS}get isCustomAuth(){return this.loginType===fa.CUSTOM}get isWeixinAuth(){return this.loginType===fa.WECHAT||this.loginType===fa.WECHAT_OPEN||this.loginType===fa.WECHAT_PUBLIC}get loginType(){return this._cache.getStore(this._cache.keys.loginTypeKey)}}class Da extends Sa{async signIn(){this._cache.updatePersistence("local"),await this._request.oauth.getAccessToken(),ua(ma),ua(ha,{env:this.config.env,loginType:fa.ANONYMOUS,persistence:"local"});const e=new Ta(this.config.env);return await e.user.refresh(),e}async linkAndRetrieveDataWithTicket(e){const{anonymousUuidKey:t,refreshTokenKey:a}=this._cache.keys,n=this._cache.getStore(t),o=this._cache.getStore(a),i=await this._request.send("auth.linkAndRetrieveDataWithTicket",{anonymous_uuid:n,refresh_token:o,ticket:e});if(i.refresh_token)return this._clearAnonymousUUID(),this.setRefreshToken(i.refresh_token),await this._request.refreshAccessToken(),ua(va,{env:this.config.env}),ua(ha,{loginType:fa.CUSTOM,persistence:"local"}),{credential:{refreshToken:i.refresh_token}};throw new wt({message:"匿名转化失败"})}_setAnonymousUUID(e){const{anonymousUuidKey:t,loginTypeKey:a}=this._cache.keys;this._cache.removeStore(t),this._cache.setStore(t,e),this._cache.setStore(a,fa.ANONYMOUS)}_clearAnonymousUUID(){this._cache.removeStore(this._cache.keys.anonymousUuidKey)}}class ba extends Sa{async signIn(e){if("string"!=typeof e)throw new wt({code:"PARAM_ERROR",message:"ticket must be a string"});const{refreshTokenKey:t}=this._cache.keys,a=await this._request.send("auth.signInWithTicket",{ticket:e,refresh_token:this._cache.getStore(t)||""});if(a.refresh_token)return this.setRefreshToken(a.refresh_token),await this._request.refreshAccessToken(),ua(ma),ua(ha,{env:this.config.env,loginType:fa.CUSTOM,persistence:this.config.persistence}),await this.refreshUserInfo(),new Ta(this.config.env);throw new wt({message:"自定义登录失败"})}}class Va extends Sa{async signIn(e,t){if("string"!=typeof e)throw new wt({code:"PARAM_ERROR",message:"email must be a string"});const{refreshTokenKey:a}=this._cache.keys,n=await this._request.send("auth.signIn",{loginType:"EMAIL",email:e,password:t,refresh_token:this._cache.getStore(a)||""}),{refresh_token:o,access_token:i,access_token_expire:r}=n;if(o)return this.setRefreshToken(o),i&&r?this.setAccessToken(i,r):await this._request.refreshAccessToken(),await this.refreshUserInfo(),ua(ma),ua(ha,{env:this.config.env,loginType:fa.EMAIL,persistence:this.config.persistence}),new Ta(this.config.env);throw n.code?new wt({code:n.code,message:`邮箱登录失败: ${n.message}`}):new wt({message:"邮箱登录失败"})}async activate(e){return this._request.send("auth.activateEndUserMail",{token:e})}async resetPasswordWithToken(e,t){return this._request.send("auth.resetPasswordWithToken",{token:e,newPassword:t})}}class Aa extends Sa{async signIn(e,t){if("string"!=typeof e)throw new wt({code:"PARAM_ERROR",message:"username must be a string"});"string"!=typeof t&&(t="",console.warn("password is empty"));const{refreshTokenKey:a}=this._cache.keys,n=await this._request.send("auth.signIn",{loginType:fa.USERNAME,username:e,password:t,refresh_token:this._cache.getStore(a)||""}),{refresh_token:o,access_token_expire:i,access_token:r}=n;if(o)return this.setRefreshToken(o),r&&i?this.setAccessToken(r,i):await this._request.refreshAccessToken(),await this.refreshUserInfo(),ua(ma),ua(ha,{env:this.config.env,loginType:fa.USERNAME,persistence:this.config.persistence}),new Ta(this.config.env);throw n.code?new wt({code:n.code,message:`用户名密码登录失败: ${n.message}`}):new wt({message:"用户名密码登录失败"})}}class La{constructor(e){this.config=e,this._cache=ia(e.env),this._request=Ma(e.env),this._onAnonymousConverted=this._onAnonymousConverted.bind(this),this._onLoginTypeChanged=this._onLoginTypeChanged.bind(this),ca(ha,this._onLoginTypeChanged)}get currentUser(){const e=this.hasLoginState();return e&&e.user||null}get loginType(){return this._cache.getStore(this._cache.keys.loginTypeKey)}anonymousAuthProvider(){return new Da(this.config)}customAuthProvider(){return new ba(this.config)}emailAuthProvider(){return new Va(this.config)}usernameAuthProvider(){return new Aa(this.config)}async signInAnonymously(){return new Da(this.config).signIn()}async signInWithEmailAndPassword(e,t){return new Va(this.config).signIn(e,t)}signInWithUsernameAndPassword(e,t){return new Aa(this.config).signIn(e,t)}async linkAndRetrieveDataWithTicket(e){return this._anonymousAuthProvider||(this._anonymousAuthProvider=new Da(this.config)),ca(va,this._onAnonymousConverted),await this._anonymousAuthProvider.linkAndRetrieveDataWithTicket(e)}async signOut(){if(this.loginType===fa.ANONYMOUS)throw new wt({message:"匿名用户不支持登出操作"});const{refreshTokenKey:e,accessTokenKey:t,accessTokenExpireKey:a}=this._cache.keys,n=this._cache.getStore(e);if(!n)return;const o=await this._request.send("auth.logout",{refresh_token:n});return this._cache.removeStore(e),this._cache.removeStore(t),this._cache.removeStore(a),ua(ma),ua(ha,{env:this.config.env,loginType:fa.NULL,persistence:this.config.persistence}),o}async signUpWithEmailAndPassword(e,t){return this._request.send("auth.signUpWithEmailAndPassword",{email:e,password:t})}async sendPasswordResetEmail(e){return this._request.send("auth.sendPasswordResetEmail",{email:e})}onLoginStateChanged(e){ca(ma,(()=>{const t=this.hasLoginState();e.call(this,t)}));const t=this.hasLoginState();e.call(this,t)}onLoginStateExpired(e){ca(pa,e.bind(this))}onAccessTokenRefreshed(e){ca(ga,e.bind(this))}onAnonymousConverted(e){ca(va,e.bind(this))}onLoginTypeChanged(e){ca(ha,(()=>{const t=this.hasLoginState();e.call(this,t)}))}async getAccessToken(){return{accessToken:(await this._request.getAccessToken()).accessToken,env:this.config.env}}hasLoginState(){const{accessTokenKey:e,accessTokenExpireKey:t}=this._cache.keys,a=this._cache.getStore(e),n=this._cache.getStore(t);return this._request.oauth.isAccessTokenExpired(a,n)?null:new Ta(this.config.env)}async isUsernameRegistered(e){if("string"!=typeof e)throw new wt({code:"PARAM_ERROR",message:"username must be a string"});const{data:t}=await this._request.send("auth.isUsernameRegistered",{username:e});return t&&t.isRegistered}getLoginState(){return Promise.resolve(this.hasLoginState())}async signInWithTicket(e){return new ba(this.config).signIn(e)}shouldRefreshAccessToken(e){this._request._shouldRefreshAccessTokenHook=e.bind(this)}getUserInfo(){return this._request.send("auth.getUserInfo",{}).then((e=>e.code?e:{...e.data,requestId:e.seqId}))}getAuthHeader(){const{refreshTokenKey:e,accessTokenKey:t}=this._cache.keys,a=this._cache.getStore(e);return{"x-cloudbase-credentials":this._cache.getStore(t)+"/@@/"+a}}_onAnonymousConverted(e){const{env:t}=e.data;t===this.config.env&&this._cache.updatePersistence(this.config.persistence)}_onLoginTypeChanged(e){const{loginType:t,persistence:a,env:n}=e.data;n===this.config.env&&(this._cache.updatePersistence(a),this._cache.setStore(this._cache.keys.loginTypeKey,t))}}const Ra=function(e,t){t=t||jt();const a=Ma(this.config.env),{cloudPath:n,filePath:o,onUploadProgress:i,fileType:r="image"}=e;return a.send("storage.getUploadMetadata",{path:n}).then((e=>{const{data:{url:s,authorization:l,token:c,fileId:u,cosFileId:d},requestId:m}=e,p={key:n,signature:l,"x-cos-meta-fileid":d,success_action_status:"201","x-cos-security-token":c};a.upload({url:s,data:p,file:o,name:n,fileType:r,onUploadProgress:i}).then((e=>{201===e.statusCode?t(null,{fileID:u,requestId:m}):t(new wt({code:"STORAGE_REQUEST_FAIL",message:`STORAGE_REQUEST_FAIL: ${e.data}`}))})).catch((e=>{t(e)}))})).catch((e=>{t(e)})),t.promise},Oa=function(e,t){t=t||jt();const a=Ma(this.config.env),{cloudPath:n}=e;return a.send("storage.getUploadMetadata",{path:n}).then((e=>{t(null,e)})).catch((e=>{t(e)})),t.promise},Ba=function({fileList:e},t){if(t=t||jt(),!e||!Array.isArray(e))return{code:"INVALID_PARAM",message:"fileList必须是非空的数组"};for(let n of e)if(!n||"string"!=typeof n)return{code:"INVALID_PARAM",message:"fileList的元素必须是非空的字符串"};const a={fileid_list:e};return Ma(this.config.env).send("storage.batchDeleteFile",a).then((e=>{e.code?t(null,e):t(null,{fileList:e.data.delete_list,requestId:e.requestId})})).catch((e=>{t(e)})),t.promise},Pa=function({fileList:e},t){t=t||jt(),e&&Array.isArray(e)||t(null,{code:"INVALID_PARAM",message:"fileList必须是非空的数组"});let a=[];for(let o of e)"object"==typeof o?(o.hasOwnProperty("fileID")&&o.hasOwnProperty("maxAge")||t(null,{code:"INVALID_PARAM",message:"fileList的元素必须是包含fileID和maxAge的对象"}),a.push({fileid:o.fileID,max_age:o.maxAge})):"string"==typeof o?a.push({fileid:o}):t(null,{code:"INVALID_PARAM",message:"fileList的元素必须是字符串"});const n={file_list:a};return Ma(this.config.env).send("storage.batchGetDownloadUrl",n).then((e=>{e.code?t(null,e):t(null,{fileList:e.data.download_list,requestId:e.requestId})})).catch((e=>{t(e)})),t.promise},Ua=async function({fileID:e},t){const a=(await Pa.call(this,{fileList:[{fileID:e,maxAge:600}]})).fileList[0];if("SUCCESS"!==a.code)return t?t(a):new Promise((e=>{e(a)}));const n=Ma(this.config.env);let o=a.download_url;if(o=encodeURI(o),!t)return n.download({url:o});t(await n.download({url:o}))},Ga=function({name:e,data:t,query:a,parse:n,search:o,timeout:i},r){const s=r||jt();let l;try{l=t?JSON.stringify(t):""}catch(u){return Promise.reject(u)}if(!e)return Promise.reject(new wt({code:"PARAM_ERROR",message:"函数名不能为空"}));const c={inQuery:a,parse:n,search:o,function_name:e,request_data:l};return Ma(this.config.env).send("functions.invokeFunction",c,{timeout:i}).then((e=>{if(e.code)s(null,e);else{let a=e.data.response_data;if(n)s(null,{result:a,requestId:e.requestId});else try{a=JSON.parse(e.data.response_data),s(null,{result:a,requestId:e.requestId})}catch(t){s(new wt({message:"response data must be json"}))}}return s.promise})).catch((e=>{s(e)})),s.promise},Fa={timeout:15e3,persistence:"session"},qa=6e5,za={};class Ha{constructor(e){this.config=e||this.config,this.authObj=void 0}init(e){switch(Xt.adapter||(this.requestClient=new Xt.adapter.reqClass({timeout:e.timeout||5e3,timeoutMsg:`请求在${(e.timeout||5e3)/1e3}s内未完成，已中断`})),this.config={...Fa,...e},!0){case this.config.timeout>qa:console.warn("timeout大于可配置上限[10分钟]，已重置为上限数值"),this.config.timeout=qa;break;case this.config.timeout<100:console.warn("timeout小于可配置下限[100ms]，已重置为下限数值"),this.config.timeout=100}return new Ha(this.config)}auth({persistence:e}={}){if(this.authObj)return this.authObj;const t=e||Xt.adapter.primaryStorage||Fa.persistence;var a;return t!==this.config.persistence&&(this.config.persistence=t),function(e){const{env:t}=e;na[t]=new aa(e),oa[t]=new aa({...e,persistence:"local"})}(this.config),a=this.config,Ca[a.env]=new wa(a),this.authObj=new La(this.config),this.authObj}on(e,t){return ca.apply(this,[e,t])}off(e,t){return da.apply(this,[e,t])}callFunction(e,t){return Ga.apply(this,[e,t])}deleteFile(e,t){return Ba.apply(this,[e,t])}getTempFileURL(e,t){return Pa.apply(this,[e,t])}downloadFile(e,t){return Ua.apply(this,[e,t])}uploadFile(e,t){return Ra.apply(this,[e,t])}getUploadMetadata(e,t){return Oa.apply(this,[e,t])}registerExtension(e){za[e.name]=e}async invokeExtension(e,t){const a=za[e];if(!a)throw new wt({message:`扩展${e} 必须先注册`});return await a.invoke(t,this)}useAdapters(e){const{adapter:t,runtime:a}=function(e){const t=(a=e,"[object Array]"===Object.prototype.toString.call(a)?e:[e]);var a;for(const n of t){const{isMatch:e,genAdapter:t,runtime:a}=n;if(e())return{adapter:t(),runtime:a}}}(e)||{};t&&(Xt.adapter=t),a&&(Xt.runtime=a)}}var $a=new Ha;function ja(e,t,a){void 0===a&&(a={});var n=/\?/.test(t),o="";for(var i in a)""===o?!n&&(t+="?"):o+="&",o+=i+"="+encodeURIComponent(a[i]);return/^http(s)?:\/\//.test(t+=o)?t:""+e+t}class Ka{get(e){const{url:t,data:a,headers:n,timeout:o}=e;return new Promise(((e,i)=>{Ct.request({url:ja("https:",t),data:a,method:"GET",header:n,timeout:o,success(t){e(t)},fail(e){i(e)}})}))}post(e){const{url:t,data:a,headers:n,timeout:o}=e;return new Promise(((e,i)=>{Ct.request({url:ja("https:",t),data:a,method:"POST",header:n,timeout:o,success(t){e(t)},fail(e){i(e)}})}))}upload(e){return new Promise(((t,a)=>{const{url:n,file:o,data:i,headers:r,fileType:s}=e,l=Ct.uploadFile({url:ja("https:",n),name:"file",formData:Object.assign({},i),filePath:o,fileType:s,header:r,success(e){const a={statusCode:e.statusCode,data:e.data||{}};200===e.statusCode&&i.success_action_status&&(a.statusCode=parseInt(i.success_action_status,10)),t(a)},fail(e){a(new Error(e.errMsg||"uploadFile:fail"))}});"function"==typeof e.onUploadProgress&&l&&"function"==typeof l.onProgressUpdate&&l.onProgressUpdate((t=>{e.onUploadProgress({loaded:t.totalBytesSent,total:t.totalBytesExpectedToSend})}))}))}}const Ya={setItem(e,t){Ct.setStorageSync(e,t)},getItem:e=>Ct.getStorageSync(e),removeItem(e){Ct.removeStorageSync(e)},clear(){Ct.clearStorageSync()}};var Wa={genAdapter:function(){return{root:{},reqClass:Ka,localStorage:Ya,primaryStorage:"local"}},isMatch:function(){return!0},runtime:"uni_app"};$a.useAdapters(Wa);const Ja=$a,Za=Ja.init;Ja.init=function(e){e.env=e.spaceId;const t=Za.call(this,e);t.config.provider="tencent",t.config.spaceId=e.spaceId;const a=t.auth;return t.auth=function(e){const t=a.call(this,e);return["linkAndRetrieveDataWithTicket","signInAnonymously","signOut","getAccessToken","getLoginState","signInWithTicket","getUserInfo"].forEach((e=>{var a;t[e]=(a=t[e],function(e){e=e||{};const{success:t,fail:n,complete:o}=Nt(e);if(!(t||n||o))return a.call(this,e);a.call(this,e).then((e=>{t&&t(e),o&&o(e)}),(e=>{n&&n(e),o&&o(e)}))}).bind(t)})),t},t.customAuth=t.auth,t};var Xa=Ja;async function Qa(e,t){const a=`http://${e}:${t}/system/ping`;try{const e=await(n={url:a,timeout:500},new Promise(((e,t)=>{Ct.request({...n,success(t){e(t)},fail(e){t(e)}})})));return!(!e.data||0!==e.data.code)}catch(o){return!1}var n}const en={"serverless.file.resource.generateProximalSign":"storage/generate-proximal-sign","serverless.file.resource.report":"storage/report","serverless.file.resource.delete":"storage/delete","serverless.file.resource.getTempFileURL":"storage/get-temp-file-url"};var tn={init(e){const t=new class{constructor(e){if(["spaceId","clientSecret"].forEach((t=>{if(!Object.prototype.hasOwnProperty.call(e,t))throw new Error(`${t} required`)})),!e.endpoint)throw new Error("集群空间未配置ApiEndpoint，配置后需要重新关联服务空间后生效");this.config=Object.assign({},e),this.config.provider="dcloud",this.config.requestUrl=this.config.endpoint+"/client",this.config.envType=this.config.envType||"public",this.adapter=Ct}async request(e,t=!0){return e=this.setupRequest(e),Promise.resolve().then((()=>Ot(e,this.adapter.request)))}requestLocal(e){return new Promise(((t,a)=>{this.adapter.request(Object.assign(e,{complete(e){if(e||(e={}),!e.statusCode||e.statusCode>=400){const t=e.data&&e.data.code||"SYS_ERR",n=e.data&&e.data.message||"request:fail";return a(new wt({code:t,message:n}))}t({success:!0,result:e.data})}}))}))}setupRequest(e){const t=Object.assign({},e,{spaceId:this.config.spaceId,timestamp:Date.now()}),a={"Content-Type":"application/json"};a["x-serverless-sign"]=Rt(t,this.config.clientSecret);const n=Lt();a["x-client-info"]=encodeURIComponent(JSON.stringify(n));const{token:o}=St();return a["x-client-token"]=o,{url:this.config.requestUrl,method:"POST",data:t,dataType:"json",header:JSON.parse(JSON.stringify(a))}}async setupLocalRequest(e){const t=Lt(),{token:a}=St(),n=Object.assign({},e,{spaceId:this.config.spaceId,timestamp:Date.now(),clientInfo:t,token:a}),{address:o,servePort:i}=this.__dev__&&this.__dev__.debugInfo||{},{address:r}=await async function(e,t){let a;for(let n=0;n<e.length;n++){const o=e[n];if(await Qa(o,t)){a=o;break}}return{address:a,port:t}}(o,i);return{url:`http://${r}:${i}/${en[e.method]}`,method:"POST",data:n,dataType:"json",header:JSON.parse(JSON.stringify({"Content-Type":"application/json"}))}}callFunction(e){const t={method:"serverless.function.runtime.invoke",params:JSON.stringify({functionTarget:e.name,functionArgs:e.data||{}})};return this.request(t,!1)}getUploadFileOptions(e){const t={method:"serverless.file.resource.generateProximalSign",params:JSON.stringify(e)};return this.request(t)}reportUploadFile(e){const t={method:"serverless.file.resource.report",params:JSON.stringify(e)};return this.request(t)}uploadFile({filePath:e,cloudPath:t,fileType:a="image",onUploadProgress:n}){if(!t)throw new wt({code:"CLOUDPATH_REQUIRED",message:"cloudPath不可为空"});let o;return this.getUploadFileOptions({cloudPath:t}).then((t=>{const{url:i,formData:r,name:s}=t.result;return o=t.result.fileUrl,new Promise(((t,o)=>{const l=this.adapter.uploadFile({url:i,formData:r,name:s,filePath:e,fileType:a,success(e){e&&e.statusCode<400?t(e):o(new wt({code:"UPLOAD_FAILED",message:"文件上传失败"}))},fail(e){o(new wt({code:e.code||"UPLOAD_FAILED",message:e.message||e.errMsg||"文件上传失败"}))}});"function"==typeof n&&l&&"function"==typeof l.onProgressUpdate&&l.onProgressUpdate((e=>{n({loaded:e.totalBytesSent,total:e.totalBytesExpectedToSend})}))}))})).then((()=>this.reportUploadFile({cloudPath:t}))).then((t=>new Promise(((a,n)=>{t.success?a({success:!0,filePath:e,fileID:o}):n(new wt({code:"UPLOAD_FAILED",message:"文件上传失败"}))}))))}deleteFile({fileList:e}){const t={method:"serverless.file.resource.delete",params:JSON.stringify({fileList:e})};return this.request(t).then((e=>{if(e.success)return e.result;throw new wt({code:"DELETE_FILE_FAILED",message:"删除文件失败"})}))}getTempFileURL({fileList:e,maxAge:t}={}){if(!Array.isArray(e)||0===e.length)throw new wt({code:"INVALID_PARAM",message:"fileList的元素必须是非空的字符串"});const a={method:"serverless.file.resource.getTempFileURL",params:JSON.stringify({fileList:e,maxAge:t})};return this.request(a).then((e=>{if(e.success)return{fileList:e.result.fileList.map((e=>({fileID:e.fileID,tempFileURL:e.tempFileURL})))};throw new wt({code:"GET_TEMP_FILE_URL_FAILED",message:"获取临时文件链接失败"})}))}}(e),a={signInAnonymously:function(){return Promise.resolve()},getLoginState:function(){return Promise.resolve(!1)}};return t.auth=function(){return a},t.customAuth=t.auth,t}},an=Ie((function(e,t){e.exports=De.enc.Hex}));function nn(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}function on(e="",t={}){const{data:a,functionName:n,method:o,headers:i,signHeaderKeys:r=[],config:s}=t,l=String(Date.now()),c=nn(),u=Object.assign({},i,{"x-from-app-id":s.spaceAppId,"x-from-env-id":s.spaceId,"x-to-env-id":s.spaceId,"x-from-instance-id":l,"x-from-function-name":n,"x-client-timestamp":l,"x-alipay-source":"client","x-request-id":c,"x-alipay-callid":c,"x-trace-id":c}),d=["x-from-app-id","x-from-env-id","x-to-env-id","x-from-instance-id","x-from-function-name","x-client-timestamp"].concat(r),[m="",p=""]=e.split("?")||[],h=function(e){const t="HMAC-SHA256",a=e.signedHeaders.join(";"),n=e.signedHeaders.map((t=>`${t.toLowerCase()}:${e.headers[t]}\n`)).join(""),o=Ht(e.body).toString(an),i=`${e.method.toUpperCase()}\n${e.path}\n${e.query}\n${n}\n${a}\n${o}\n`,r=Ht(i).toString(an),s=`${t}\n${e.timestamp}\n${r}\n`,l=$t(s,e.secretKey).toString(an);return`${t} Credential=${e.secretId}, SignedHeaders=${a}, Signature=${l}`}({path:m,query:p,method:o,headers:u,timestamp:l,body:JSON.stringify(a),secretId:s.accessKey,secretKey:s.secretKey,signedHeaders:d.sort()});return{url:`${s.endpoint}${e}`,headers:Object.assign({},u,{Authorization:h})}}function rn({url:e,data:t,method:a="POST",headers:n={},timeout:o}){return new Promise(((i,r)=>{Ct.request({url:e,method:a,data:"object"==typeof t?JSON.stringify(t):t,header:n,dataType:"json",timeout:o,complete:(e={})=>{const t=n["x-trace-id"]||"";if(!e.statusCode||e.statusCode>=400){const{message:a,errMsg:n,trace_id:o}=e.data||{};return r(new wt({code:"SYS_ERR",message:a||n||"request:fail",requestId:o||t}))}i({status:e.statusCode,data:e.data,headers:e.header,requestId:t})}})}))}function sn(e,t){const{path:a,data:n,method:o="GET"}=e,{url:i,headers:r}=on(a,{functionName:"",data:n,method:o,headers:{"x-alipay-cloud-mode":"oss","x-data-api-type":"oss","x-expire-timestamp":String(Date.now()+6e4)},signHeaderKeys:["x-data-api-type","x-expire-timestamp"],config:t});return rn({url:i,data:n,method:o,headers:r}).then((e=>{const t=e.data||{};if(!t.success)throw new wt({code:e.errCode,message:e.errMsg,requestId:e.requestId});return t.data||{}})).catch((e=>{throw new wt({code:e.errCode,message:e.errMsg,requestId:e.requestId})}))}function ln(e=""){const t=e.trim().replace(/^cloud:\/\//,""),a=t.indexOf("/");if(a<=0)throw new wt({code:"INVALID_PARAM",message:"fileID不合法"});const n=t.substring(0,a),o=t.substring(a+1);return n!==this.config.spaceId&&console.warn("file ".concat(e," does not belong to env ").concat(this.config.spaceId)),o}function cn(e=""){return"cloud://".concat(this.config.spaceId,"/").concat(e.replace(/^\/+/,""))}class un{constructor(e){this.config=e}signedURL(e,t={}){const a=`/ws/function/${e}`,n=this.config.wsEndpoint.replace(/^ws(s)?:\/\//,""),o=Object.assign({},t,{accessKeyId:this.config.accessKey,signatureNonce:nn(),timestamp:""+Date.now()}),i=[a,["accessKeyId","authorization","signatureNonce","timestamp"].sort().map((function(e){return o[e]?"".concat(e,"=").concat(o[e]):null})).filter(Boolean).join("&"),`host:${n}`].join("\n"),r=["HMAC-SHA256",Ht(i).toString(an)].join("\n"),s=$t(r,this.config.secretKey).toString(an),l=Object.keys(o).map((e=>`${e}=${encodeURIComponent(o[e])}`)).join("&");return`${this.config.wsEndpoint}${a}?${l}&signature=${s}`}}var dn={init:e=>{e.provider="alipay";const t=new class{constructor(e){if(["spaceId","spaceAppId","accessKey","secretKey"].forEach((t=>{if(!Object.prototype.hasOwnProperty.call(e,t))throw new Error(`${t} required`)})),e.endpoint){if("string"!=typeof e.endpoint)throw new Error("endpoint must be string");if(!/^https:\/\//.test(e.endpoint))throw new Error("endpoint must start with https://");e.endpoint=e.endpoint.replace(/\/$/,"")}this.config=Object.assign({},e,{endpoint:e.endpoint||`https://${e.spaceId}.api-hz.cloudbasefunction.cn`,wsEndpoint:e.wsEndpoint||`wss://${e.spaceId}.api-hz.cloudbasefunction.cn`}),this._websocket=new un(this.config)}callFunction(e){return function(e,t){const{name:a,data:n,async:o=!1,timeout:i}=e,r="POST",s={"x-to-function-name":a};o&&(s["x-function-invoke-type"]="async");const{url:l,headers:c}=on("/functions/invokeFunction",{functionName:a,data:n,method:r,headers:s,signHeaderKeys:["x-to-function-name"],config:t});return rn({url:l,data:n,method:r,headers:c,timeout:i}).then((e=>{let t=0;if(o){const a=e.data||{};t="200"===a.errCode?0:a.errCode,e.data=a.data||{},e.errMsg=a.errMsg}if(0!==t)throw new wt({code:t,message:e.errMsg,requestId:e.requestId});return{errCode:t,success:0===t,requestId:e.requestId,result:e.data}})).catch((e=>{throw new wt({code:e.errCode,message:e.errMsg,requestId:e.requestId})}))}(e,this.config)}uploadFileToOSS({url:e,filePath:t,fileType:a,formData:n,onUploadProgress:o}){return new Promise(((i,r)=>{const s=Ct.uploadFile({url:e,filePath:t,fileType:a,formData:n,name:"file",success(e){e&&e.statusCode<400?i(e):r(new wt({code:"UPLOAD_FAILED",message:"文件上传失败"}))},fail(e){r(new wt({code:e.code||"UPLOAD_FAILED",message:e.message||e.errMsg||"文件上传失败"}))}});"function"==typeof o&&s&&"function"==typeof s.onProgressUpdate&&s.onProgressUpdate((e=>{o({loaded:e.totalBytesSent,total:e.totalBytesExpectedToSend})}))}))}async uploadFile({filePath:e,cloudPath:t="",fileType:a="image",onUploadProgress:n}){if("string"!==Fe(t))throw new wt({code:"INVALID_PARAM",message:"cloudPath必须为字符串类型"});if(!(t=t.trim()))throw new wt({code:"INVALID_PARAM",message:"cloudPath不可为空"});if(/:\/\//.test(t))throw new wt({code:"INVALID_PARAM",message:"cloudPath不合法"});const o=await sn({path:"/".concat(t.replace(/^\//,""),"?post_url")},this.config),{file_id:i,upload_url:r,form_data:s}=o,l=s&&s.reduce(((e,t)=>(e[t.key]=t.value,e)),{});return this.uploadFileToOSS({url:r,filePath:e,fileType:a,formData:l,onUploadProgress:n}).then((()=>({fileID:i})))}async getTempFileURL({fileList:e}){return new Promise(((t,a)=>{(!e||e.length<0)&&t({code:"INVALID_PARAM",message:"fileList不能为空数组"}),e.length>50&&t({code:"INVALID_PARAM",message:"fileList数组长度不能超过50"});const n=[];for(const i of e){let e;"string"!==Fe(i)&&t({code:"INVALID_PARAM",message:"fileList的元素必须是非空的字符串"});try{e=ln.call(this,i)}catch(o){console.warn(o.errCode,o.errMsg),e=i}n.push({file_id:e,expire:600})}sn({path:"/?download_url",data:{file_list:n},method:"POST"},this.config).then((e=>{const{file_list:a=[]}=e;t({fileList:a.map((e=>({fileID:cn.call(this,e.file_id),tempFileURL:e.download_url})))})})).catch((e=>a(e)))}))}async connectWebSocket(e){const{name:t,query:a}=e;return Ct.connectSocket({url:this._websocket.signedURL(t,a),complete:()=>{}})}}(e);return t.auth=function(){return{signInAnonymously:function(){return Promise.resolve()},getLoginState:function(){return Promise.resolve(!0)}}},t}};function mn({data:e}){let t;t=Lt();const a=JSON.parse(JSON.stringify(e||{}));if(Object.assign(a,{clientInfo:t}),!a.uniIdToken){const{token:e}=St();e&&(a.uniIdToken=e)}return a}const pn=[{rule:/fc_function_not_found|FUNCTION_NOT_FOUND/,content:"，云函数[{functionName}]在云端不存在，请检查此云函数名称是否正确以及该云函数是否已上传到服务空间",mode:"append"}];var hn=/[\\^$.*+?()[\]{}|]/g,vn=RegExp(hn.source);function gn(e,t,a){return e.replace(new RegExp((n=t)&&vn.test(n)?n.replace(hn,"\\$&"):n,"g"),a);var n}const fn="request",yn="response",_n="both",kn="_globalUniCloudStatus",En={code:2e4,message:"System error"},xn={code:20101,message:"Invalid client"};function Nn(e){const{errSubject:t,subject:a,errCode:n,errMsg:o,code:i,message:r,cause:s}=e||{};return new wt({subject:t||a||"uni-secure-network",code:n||i||En.code,message:o||r,cause:s})}let wn;function Cn({secretType:e}={}){return e===fn||e===yn||e===_n}function Mn({name:e,data:t={}}={}){return"DCloud-clientDB"===e&&"encryption"===t.redirectTo&&"getAppClientKey"===t.action}function Sn({functionName:e,result:t,logPvd:a}){}function In(e){const t=e.callFunction,a=function(a){const n=a.name;a.data=mn.call(e,{data:a.data});const o={aliyun:"aliyun",tencent:"tcb",tcb:"tcb",alipay:"alipay",dcloud:"dcloud"}[this.config.provider],i=Cn(a),r=Mn(a),s=i||r;return t.call(this,a).then((e=>(e.errCode=0,!s&&Sn.call(this,{functionName:n,result:e,logPvd:o}),Promise.resolve(e))),(e=>(!s&&Sn.call(this,{functionName:n,result:e,logPvd:o}),e&&e.message&&(e.message=function({message:e="",extraInfo:t={},formatter:a=[]}={}){for(let n=0;n<a.length;n++){const{rule:o,content:i,mode:r}=a[n],s=e.match(o);if(!s)continue;let l=i;for(let e=1;e<s.length;e++)l=gn(l,`{$${e}}`,s[e]);for(const e in t)l=gn(l,`{${e}}`,t[e]);return"replace"===r?l:e+l}return e}({message:`[${a.name}]: ${e.message}`,formatter:pn,extraInfo:{functionName:n}})),Promise.reject(e))))};e.callFunction=function(t){const{provider:n,spaceId:o}=e.config,i=t.name;let r,s;return t.data=t.data||{},r=a,r=r.bind(e),s=Mn(t)?a.call(e,t):Cn(t)?new wn({secretType:t.secretType,uniCloudIns:e}).wrapEncryptDataCallFunction(a.bind(e))(t):function({provider:e,spaceId:t,functionName:a}={}){const{appId:n,uniPlatform:o,osName:i}=bt();let r=o;"app"===o&&(r=i);const s=function({provider:e,spaceId:t}={}){const a=We;if(!a)return{};e=function(e){return"tencent"===e?"tcb":e}(e);const n=a.find((a=>a.provider===e&&a.spaceId===t));return n&&n.config}({provider:e,spaceId:t});if(!s||!s.accessControl||!s.accessControl.enable)return!1;const l=s.accessControl.function||{},c=Object.keys(l);if(0===c.length)return!0;const u=function(e,t){let a,n,o;for(let i=0;i<e.length;i++){const r=e[i];r!==t?"*"!==r?r.split(",").map((e=>e.trim())).indexOf(t)>-1&&(n=r):o=r:a=r}return a||n||o}(c,a);if(!u)return!1;if((l[u]||[]).find(((e={})=>e.appId===n&&(e.platform||"").toLowerCase()===r.toLowerCase())))return!0;throw console.error(`此应用[appId: ${n}, platform: ${r}]不在云端配置的允许访问的应用列表内，参考：https://uniapp.dcloud.net.cn/uniCloud/secure-network.html#verify-client`),Nn(xn)}({provider:n,spaceId:o,functionName:i})?new wn({secretType:t.secretType,uniCloudIns:e}).wrapVerifyClientCallFunction(a.bind(e))(t):r(t),Object.defineProperty(s,"result",{get:()=>(console.warn("当前返回结果为Promise类型，不可直接访问其result属性，详情请参考：https://uniapp.dcloud.net.cn/uniCloud/faq?id=promise"),{})}),s.then((e=>e))}}wn=class{constructor(){throw Nn({message:"Platform app is not enabled, please check whether secure network module is enabled in your manifest.json"})}};const Tn=Symbol("CLIENT_DB_INTERNAL");function Dn(e,t){return e.then="DoNotReturnProxyWithAFunctionNamedThen",e._internalType=Tn,e.inspect=null,e.__v_raw=void 0,new Proxy(e,{get(e,a,n){if("_uniClient"===a)return null;if("symbol"==typeof a)return e[a];if(a in e||"string"!=typeof a){const t=e[a];return"function"==typeof t?t.bind(e):t}return t.get(e,a,n)}})}function bn(e){return{on:(t,a)=>{e[t]=e[t]||[],e[t].indexOf(a)>-1||e[t].push(a)},off:(t,a)=>{e[t]=e[t]||[];const n=e[t].indexOf(a);-1!==n&&e[t].splice(n,1)}}}const Vn=["db.Geo","db.command","command.aggregate"];function An(e,t){return Vn.indexOf(`${e}.${t}`)>-1}function Ln(e){switch(Fe(e=Mt(e))){case"array":return e.map((e=>Ln(e)));case"object":return e._internalType===Tn||Object.keys(e).forEach((t=>{e[t]=Ln(e[t])})),e;case"regexp":return{$regexp:{source:e.source,flags:e.flags}};case"date":return{$date:e.toISOString()};default:return e}}function Rn(e){return e&&e.content&&e.content.$method}class On{constructor(e,t,a){this.content=e,this.prevStage=t||null,this.udb=null,this._database=a}toJSON(){let e=this;const t=[e.content];for(;e.prevStage;)e=e.prevStage,t.push(e.content);return{$db:t.reverse().map((e=>({$method:e.$method,$param:Ln(e.$param)})))}}toString(){return JSON.stringify(this.toJSON())}getAction(){const e=this.toJSON().$db.find((e=>"action"===e.$method));return e&&e.$param&&e.$param[0]}getCommand(){return{$db:this.toJSON().$db.filter((e=>"action"!==e.$method))}}get isAggregate(){let e=this;for(;e;){const t=Rn(e),a=Rn(e.prevStage);if("aggregate"===t&&"collection"===a||"pipeline"===t)return!0;e=e.prevStage}return!1}get isCommand(){let e=this;for(;e;){if("command"===Rn(e))return!0;e=e.prevStage}return!1}get isAggregateCommand(){let e=this;for(;e;){const t=Rn(e),a=Rn(e.prevStage);if("aggregate"===t&&"command"===a)return!0;e=e.prevStage}return!1}getNextStageFn(e){const t=this;return function(){return Bn({$method:e,$param:Ln(Array.from(arguments))},t,t._database)}}get count(){return this.isAggregate?this.getNextStageFn("count"):function(){return this._send("count",Array.from(arguments))}}get remove(){return this.isCommand?this.getNextStageFn("remove"):function(){return this._send("remove",Array.from(arguments))}}get(){return this._send("get",Array.from(arguments))}get add(){return this.isCommand?this.getNextStageFn("add"):function(){return this._send("add",Array.from(arguments))}}update(){return this._send("update",Array.from(arguments))}end(){return this._send("end",Array.from(arguments))}get set(){return this.isCommand?this.getNextStageFn("set"):function(){throw new Error("JQL禁止使用set方法")}}_send(e,t){const a=this.getAction(),n=this.getCommand();return n.$db.push({$method:e,$param:Ln(t)}),this._database._callCloudFunction({action:a,command:n})}}function Bn(e,t,a){return Dn(new On(e,t,a),{get(e,t){let n="db";return e&&e.content&&(n=e.content.$method),An(n,t)?Bn({$method:t},e,a):function(){return Bn({$method:t,$param:Ln(Array.from(arguments))},e,a)}}})}function Pn({path:e,method:t}){return class{constructor(){this.param=Array.from(arguments)}toJSON(){return{$newDb:[...e.map((e=>({$method:e}))),{$method:t,$param:this.param}]}}toString(){return JSON.stringify(this.toJSON())}}}function Un(e,t={}){return Dn(new e(t),{get:(e,t)=>An("db",t)?Bn({$method:t},null,e):function(){return Bn({$method:t,$param:Ln(Array.from(arguments))},null,e)}})}class Gn extends class{constructor({uniClient:e={},isJQL:t=!1}={}){this._uniClient=e,this._authCallBacks={},this._dbCallBacks={},e._isDefault&&(this._dbCallBacks=et("_globalUniCloudDatabaseCallback")),t||(this.auth=bn(this._authCallBacks)),this._isJQL=t,Object.assign(this,bn(this._dbCallBacks)),this.env=Dn({},{get:(e,t)=>({$env:t})}),this.Geo=Dn({},{get:(e,t)=>Pn({path:["Geo"],method:t})}),this.serverDate=Pn({path:[],method:"serverDate"}),this.RegExp=Pn({path:[],method:"RegExp"})}getCloudEnv(e){if("string"!=typeof e||!e.trim())throw new Error("getCloudEnv参数错误");return{$env:e.replace("$cloudEnv_","")}}_callback(e,t){const a=this._dbCallBacks;a[e]&&a[e].forEach((e=>{e(...t)}))}_callbackAuth(e,t){const a=this._authCallBacks;a[e]&&a[e].forEach((e=>{e(...t)}))}multiSend(){const e=Array.from(arguments),t=e.map((e=>{const t=e.getAction(),a=e.getCommand();if("getTemp"!==a.$db[a.$db.length-1].$method)throw new Error("multiSend只支持子命令内使用getTemp");return{action:t,command:a}}));return this._callCloudFunction({multiCommand:t,queryList:e})}}{_parseResult(e){return this._isJQL?e.result:e}_callCloudFunction({action:e,command:t,multiCommand:a,queryList:n}){function o(e,t){if(a&&n)for(let a=0;a<n.length;a++){const o=n[a];o.udb&&"function"==typeof o.udb.setResult&&(t?o.udb.setResult(t):o.udb.setResult(e.result.dataList[a]))}}const i=this,r=this._isJQL?"databaseForJQL":"database";function s(e){return i._callback("error",[e]),rt(st(r,"fail"),e).then((()=>rt(st(r,"complete"),e))).then((()=>(o(null,e),_t(ut,{type:pt,content:e}),Promise.reject(e))))}const l=rt(st(r,"invoke")),c=this._uniClient;return l.then((()=>c.callFunction({name:"DCloud-clientDB",type:Pe,data:{action:e,command:t,multiCommand:a}}))).then((e=>{const{code:t,message:a,token:n,tokenExpired:l,systemInfo:c=[]}=e.result;if(c)for(let o=0;o<c.length;o++){const{level:e,message:t,detail:a}=c[o];let n="[System Info]"+t;a&&(n=`${n}\n详细信息：${a}`),(console["warn"===e?"error":e]||console.log)(n)}if(t)return s(new wt({code:t,message:a,requestId:e.requestId}));e.result.errCode=e.result.errCode||e.result.code,e.result.errMsg=e.result.errMsg||e.result.message,n&&l&&(It({token:n,tokenExpired:l}),this._callbackAuth("refreshToken",[{token:n,tokenExpired:l}]),this._callback("refreshToken",[{token:n,tokenExpired:l}]),_t(mt,{token:n,tokenExpired:l}));const u=[{prop:"affectedDocs",tips:"affectedDocs不再推荐使用，请使用inserted/deleted/updated/data.length替代"},{prop:"code",tips:"code不再推荐使用，请使用errCode替代"},{prop:"message",tips:"message不再推荐使用，请使用errMsg替代"}];for(let o=0;o<u.length;o++){const{prop:t,tips:a}=u[o];if(t in e.result){const n=e.result[t];Object.defineProperty(e.result,t,{get:()=>(console.warn(a),n)})}}return d=e,rt(st(r,"success"),d).then((()=>rt(st(r,"complete"),d))).then((()=>{o(d,null);const e=i._parseResult(d);return _t(ut,{type:pt,content:e}),Promise.resolve(e)}));var d}),(e=>(/fc_function_not_found|FUNCTION_NOT_FOUND/g.test(e.message)&&console.warn("clientDB未初始化，请在web控制台保存一次schema以开启clientDB"),s(new wt({code:e.code||"SYSTEM_ERROR",message:e.message,requestId:e.requestId})))))}}const Fn="token无效，跳转登录页面",qn="token过期，跳转登录页面",zn={TOKEN_INVALID_TOKEN_EXPIRED:qn,TOKEN_INVALID_INVALID_CLIENTID:Fn,TOKEN_INVALID:Fn,TOKEN_INVALID_WRONG_TOKEN:Fn,TOKEN_INVALID_ANONYMOUS_USER:Fn},Hn={"uni-id-token-expired":qn,"uni-id-check-token-failed":Fn,"uni-id-token-not-exist":Fn,"uni-id-check-device-feature-failed":Fn},$n={...zn,...Hn,default:"用户未登录或登录状态过期，自动跳转登录页面"};function jn(e,t){let a="";return a=e?`${e}/${t}`:t,a.replace(/^\//,"")}function Kn(e=[],t=""){const a=[],n=[];return e.forEach((e=>{!0===e.needLogin?a.push(jn(t,e.path)):!1===e.needLogin&&n.push(jn(t,e.path))})),{needLoginPage:a,notNeedLoginPage:n}}function Yn(e){return e.split("?")[0].replace(/^\//,"")}function Wn(){return function(e){let t=e&&e.$page&&e.$page.fullPath;return t?("/"!==t.charAt(0)&&(t="/"+t),t):""}(function(){const e=getCurrentPages();return e[e.length-1]}())}function Jn(){return Yn(Wn())}function Zn(e="",t={}){if(!e)return!1;if(!(t&&t.list&&t.list.length))return!1;const a=t.list,n=Yn(e);return a.some((e=>e.pagePath===n))}const Xn=!!Se.uniIdRouter,{loginPage:Qn,routerNeedLogin:eo,resToLogin:to,needLoginPage:ao,notNeedLoginPage:no,loginPageInTabBar:oo}=function({pages:e=[],subPackages:t=[],uniIdRouter:a={},tabBar:n={}}=Se){const{loginPage:o,needLogin:i=[],resToLogin:r=!0}=a,{needLoginPage:s,notNeedLoginPage:l}=Kn(e),{needLoginPage:c,notNeedLoginPage:u}=function(e=[]){const t=[],a=[];return e.forEach((e=>{const{root:n,pages:o=[]}=e,{needLoginPage:i,notNeedLoginPage:r}=Kn(o,n);t.push(...i),a.push(...r)})),{needLoginPage:t,notNeedLoginPage:a}}(t);return{loginPage:o,routerNeedLogin:i,resToLogin:r,needLoginPage:[...s,...c],notNeedLoginPage:[...l,...u],loginPageInTabBar:Zn(o,n)}}();if(ao.indexOf(Qn)>-1)throw new Error(`Login page [${Qn}] should not be "needLogin", please check your pages.json`);function io(e){const t=Jn();if("/"===e.charAt(0))return e;const[a,n]=e.split("?"),o=a.replace(/^\//,"").split("/"),i=t.split("/");i.pop();for(let r=0;r<o.length;r++){const e=o[r];".."===e?i.pop():"."!==e&&i.push(e)}return""===i[0]&&i.shift(),"/"+i.join("/")+(n?"?"+n:"")}function ro({redirect:e}){const t=Yn(e),a=Yn(Qn);return Jn()!==a&&t!==a}function so({api:e,redirect:t}={}){if(!t||!ro({redirect:t}))return;const a=(o=t,"/"!==(n=Qn).charAt(0)&&(n="/"+n),o?n.indexOf("?")>-1?n+`&uniIdRedirectUrl=${encodeURIComponent(o)}`:n+`?uniIdRedirectUrl=${encodeURIComponent(o)}`:n);var n,o;oo?"navigateTo"!==e&&"redirectTo"!==e||(e="switchTab"):"switchTab"===e&&(e="navigateTo");const i={navigateTo:uni.navigateTo,redirectTo:uni.redirectTo,switchTab:uni.switchTab,reLaunch:uni.reLaunch};setTimeout((()=>{i[e]({url:a})}),0)}function lo({url:e}={}){const t={abortLoginPageJump:!1,autoToLoginPage:!1},a=function(){const{token:e,tokenExpired:t}=St();let a;if(e){if(t<Date.now()){const e="uni-id-token-expired";a={errCode:e,errMsg:$n[e]}}}else{const e="uni-id-check-token-failed";a={errCode:e,errMsg:$n[e]}}return a}();if(function(e){const t=Yn(io(e));return!(no.indexOf(t)>-1)&&(ao.indexOf(t)>-1||eo.some((t=>{return a=e,new RegExp(t).test(a);var a})))}(e)&&a){if(a.uniIdRedirectUrl=e,gt(dt).length>0)return setTimeout((()=>{_t(dt,a)}),0),t.abortLoginPageJump=!0,t;t.autoToLoginPage=!0}return t}function co(){!function(){const e=Wn(),{abortLoginPageJump:t,autoToLoginPage:a}=lo({url:e});t||a&&so({api:"redirectTo",redirect:e})}();const e=["navigateTo","redirectTo","reLaunch","switchTab"];for(let t=0;t<e.length;t++){const a=e[t];uni.addInterceptor(a,{invoke(e){const{abortLoginPageJump:t,autoToLoginPage:n}=lo({url:e.url});return t?e:n?(so({api:a,redirect:io(e.url)}),!1):e}})}}function uo(){this.onResponse((e=>{const{type:t,content:a}=e;let n=!1;switch(t){case"cloudobject":n=function(e){if("object"!=typeof e)return!1;const{errCode:t}=e||{};return t in $n}(a);break;case"clientdb":n=function(e){if("object"!=typeof e)return!1;const{errCode:t}=e||{};return t in zn}(a)}n&&function(e={}){const t=gt(dt);xt().then((()=>{const a=Wn();if(a&&ro({redirect:a}))return t.length>0?_t(dt,Object.assign({uniIdRedirectUrl:a},e)):void(Qn&&so({api:"navigateTo",redirect:a}))}))}(a)}))}function mo(e){var t;(t=e).onResponse=function(e){ft(ut,e)},t.offResponse=function(e){yt(ut,e)},function(e){e.onNeedLogin=function(e){ft(dt,e)},e.offNeedLogin=function(e){yt(dt,e)},Xn&&(et(kn).needLoginInit||(et(kn).needLoginInit=!0,xt().then((()=>{co.call(e)})),to&&uo.call(e)))}(e),function(e){e.onRefreshToken=function(e){ft(mt,e)},e.offRefreshToken=function(e){yt(mt,e)}}(e)}let po;const ho="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",vo=/^(?:[A-Za-z\d+/]{4})*?(?:[A-Za-z\d+/]{2}(?:==)?|[A-Za-z\d+/]{3}=?)?$/;function go(){const e=St().token||"",t=e.split(".");if(!e||3!==t.length)return{uid:null,role:[],permission:[],tokenExpired:0};let a;try{a=JSON.parse((n=t[1],decodeURIComponent(po(n).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""))))}catch(o){throw new Error("获取当前用户信息出错，详细错误信息为："+o.message)}var n;return a.tokenExpired=1e3*a.exp,delete a.exp,delete a.iat,a}po="function"!=typeof atob?function(e){if(e=String(e).replace(/[\t\n\f\r ]+/g,""),!vo.test(e))throw new Error("Failed to execute 'atob' on 'Window': The string to be decoded is not correctly encoded.");var t;e+="==".slice(2-(3&e.length));for(var a,n,o="",i=0;i<e.length;)t=ho.indexOf(e.charAt(i++))<<18|ho.indexOf(e.charAt(i++))<<12|(a=ho.indexOf(e.charAt(i++)))<<6|(n=ho.indexOf(e.charAt(i++))),o+=64===a?String.fromCharCode(t>>16&255):64===n?String.fromCharCode(t>>16&255,t>>8&255):String.fromCharCode(t>>16&255,t>>8&255,255&t);return o}:atob;var fo=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}(Ie((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const a="chooseAndUploadFile:ok",n="chooseAndUploadFile:fail";function o(e,t){return e.tempFiles.forEach(((e,a)=>{e.name||(e.name=e.path.substring(e.path.lastIndexOf("/")+1)),t&&(e.fileType=t),e.cloudPath=Date.now()+"_"+a+e.name.substring(e.name.lastIndexOf("."))})),e.tempFilePaths||(e.tempFilePaths=e.tempFiles.map((e=>e.path))),e}function i(e,t,{onChooseFile:n,onUploadProgress:o}){return t.then((e=>{if(n){const t=n(e);if(void 0!==t)return Promise.resolve(t).then((t=>void 0===t?e:t))}return e})).then((t=>!1===t?{errMsg:a,tempFilePaths:[],tempFiles:[]}:function(e,t,n=5,o){(t=Object.assign({},t)).errMsg=a;const i=t.tempFiles,r=i.length;let s=0;return new Promise((a=>{for(;s<n;)l();function l(){const n=s++;if(n>=r)return void(!i.find((e=>!e.url&&!e.errMsg))&&a(t));const c=i[n];e.uploadFile({provider:c.provider,filePath:c.path,cloudPath:c.cloudPath,fileType:c.fileType,cloudPathAsRealPath:c.cloudPathAsRealPath,onUploadProgress(e){e.index=n,e.tempFile=c,e.tempFilePath=c.path,o&&o(e)}}).then((e=>{c.url=e.fileID,n<r&&l()})).catch((e=>{c.errMsg=e.errMsg||e.message,n<r&&l()}))}}))}(e,t,5,o)))}t.initChooseAndUploadFile=function(e){return function(t={type:"all"}){return"image"===t.type?i(e,function(e){const{count:t,sizeType:a,sourceType:i=["album","camera"],extension:r}=e;return new Promise(((e,s)=>{uni.chooseImage({count:t,sizeType:a,sourceType:i,extension:r,success(t){e(o(t,"image"))},fail(e){s({errMsg:e.errMsg.replace("chooseImage:fail",n)})}})}))}(t),t):"video"===t.type?i(e,function(e){const{camera:t,compressed:a,maxDuration:i,sourceType:r=["album","camera"],extension:s}=e;return new Promise(((e,l)=>{uni.chooseVideo({camera:t,compressed:a,maxDuration:i,sourceType:r,extension:s,success(t){const{tempFilePath:a,duration:n,size:i,height:r,width:s}=t;e(o({errMsg:"chooseVideo:ok",tempFilePaths:[a],tempFiles:[{name:t.tempFile&&t.tempFile.name||"",path:a,size:i,type:t.tempFile&&t.tempFile.type||"",width:s,height:r,duration:n,fileType:"video",cloudPath:""}]},"video"))},fail(e){l({errMsg:e.errMsg.replace("chooseVideo:fail",n)})}})}))}(t),t):i(e,function(e){const{count:t,extension:a}=e;return new Promise(((e,i)=>{let r=uni.chooseFile;if("undefined"!=typeof wx&&"function"==typeof wx.chooseMessageFile&&(r=wx.chooseMessageFile),"function"!=typeof r)return i({errMsg:n+" 请指定 type 类型，该平台仅支持选择 image 或 video。"});r({type:"all",count:t,extension:a,success(t){e(o(t))},fail(e){i({errMsg:e.errMsg.replace("chooseFile:fail",n)})}})}))}(t),t)}}})));const yo="manual";function _o(e){return{props:{localdata:{type:Array,default:()=>[]},options:{type:[Object,Array],default:()=>({})},spaceInfo:{type:Object,default:()=>({})},collection:{type:[String,Array],default:""},action:{type:String,default:""},field:{type:String,default:""},orderby:{type:String,default:""},where:{type:[String,Object],default:""},pageData:{type:String,default:"add"},pageCurrent:{type:Number,default:1},pageSize:{type:Number,default:20},getcount:{type:[Boolean,String],default:!1},gettree:{type:[Boolean,String],default:!1},gettreepath:{type:[Boolean,String],default:!1},startwith:{type:String,default:""},limitlevel:{type:Number,default:10},groupby:{type:String,default:""},groupField:{type:String,default:""},distinct:{type:[Boolean,String],default:!1},foreignKey:{type:String,default:""},loadtime:{type:String,default:"auto"},manual:{type:Boolean,default:!1}},data:()=>({mixinDatacomLoading:!1,mixinDatacomHasMore:!1,mixinDatacomResData:[],mixinDatacomErrorMessage:"",mixinDatacomPage:{},mixinDatacomError:null}),created(){this.mixinDatacomPage={current:this.pageCurrent,size:this.pageSize,count:0},this.$watch((()=>{var e=[];return["pageCurrent","pageSize","localdata","collection","action","field","orderby","where","getont","getcount","gettree","groupby","groupField","distinct"].forEach((t=>{e.push(this[t])})),e}),((e,t)=>{if(this.loadtime===yo)return;let a=!1;const n=[];for(let o=2;o<e.length;o++)e[o]!==t[o]&&(n.push(e[o]),a=!0);e[0]!==t[0]&&(this.mixinDatacomPage.current=this.pageCurrent),this.mixinDatacomPage.size=this.pageSize,this.onMixinDatacomPropsChange(a,n)}))},methods:{onMixinDatacomPropsChange(e,t){},mixinDatacomEasyGet({getone:e=!1,success:t,fail:a}={}){this.mixinDatacomLoading||(this.mixinDatacomLoading=!0,this.mixinDatacomErrorMessage="",this.mixinDatacomError=null,this.mixinDatacomGet().then((a=>{this.mixinDatacomLoading=!1;const{data:n,count:o}=a.result;this.getcount&&(this.mixinDatacomPage.count=o),this.mixinDatacomHasMore=n.length<this.pageSize;const i=e?n.length?n[0]:void 0:n;this.mixinDatacomResData=i,t&&t(i)})).catch((e=>{this.mixinDatacomLoading=!1,this.mixinDatacomErrorMessage=e,this.mixinDatacomError=e,a&&a(e)})))},mixinDatacomGet(t={}){let a;t=t||{},a="undefined"!=typeof __uniX&&__uniX?e.databaseForJQL(this.spaceInfo):e.database(this.spaceInfo);const n=t.action||this.action;n&&(a=a.action(n));const o=t.collection||this.collection;a=Array.isArray(o)?a.collection(...o):a.collection(o);const i=t.where||this.where;i&&Object.keys(i).length&&(a=a.where(i));const r=t.field||this.field;r&&(a=a.field(r));const s=t.foreignKey||this.foreignKey;s&&(a=a.foreignKey(s));const l=t.groupby||this.groupby;l&&(a=a.groupBy(l));const c=t.groupField||this.groupField;c&&(a=a.groupField(c)),!0===(void 0!==t.distinct?t.distinct:this.distinct)&&(a=a.distinct());const u=t.orderby||this.orderby;u&&(a=a.orderBy(u));const d=void 0!==t.pageCurrent?t.pageCurrent:this.mixinDatacomPage.current,m=void 0!==t.pageSize?t.pageSize:this.mixinDatacomPage.size,p=void 0!==t.getcount?t.getcount:this.getcount,h=void 0!==t.gettree?t.gettree:this.gettree,v=void 0!==t.gettreepath?t.gettreepath:this.gettreepath,g={getCount:p},f={limitLevel:void 0!==t.limitlevel?t.limitlevel:this.limitlevel,startWith:void 0!==t.startwith?t.startwith:this.startwith};return h&&(g.getTree=f),v&&(g.getTreePath=f),a=a.skip(m*(d-1)).limit(m).get(g),a}}}}function ko(e){return et("_globalUniCloudSecureNetworkCache__{spaceId}".replace("{spaceId}",e.config.spaceId))}async function Eo({openid:e,callLoginByWeixin:t=!1}={}){throw ko(this),new Error("[SecureNetwork] API `initSecureNetworkByWeixin` is not supported on platform `app`")}async function xo(e){const t=ko(this);return t.initPromise||(t.initPromise=Eo.call(this,e).then((e=>e)).catch((e=>{throw delete t.initPromise,e}))),t.initPromise}function No(e){At=e}function wo(e){const t={getAppBaseInfo:uni.getSystemInfo,getPushClientId:uni.getPushClientId};return function(a){return new Promise(((n,o)=>{t[e]({...a,success(e){n(e)},fail(e){o(e)}})}))}}class Co extends class{constructor(){this._callback={}}addListener(e,t){this._callback[e]||(this._callback[e]=[]),this._callback[e].push(t)}on(e,t){return this.addListener(e,t)}removeListener(e,t){if(!t)throw new Error('The "listener" argument must be of type function. Received undefined');const a=this._callback[e];if(!a)return;const n=function(e,t){for(let a=e.length-1;a>=0;a--)if(e[a]===t)return a;return-1}(a,t);a.splice(n,1)}off(e,t){return this.removeListener(e,t)}removeAllListener(e){delete this._callback[e]}emit(e,...t){const a=this._callback[e];if(a)for(let n=0;n<a.length;n++)a[n](...t)}}{constructor(){super(),this._uniPushMessageCallback=this._receivePushMessage.bind(this),this._currentMessageId=-1,this._payloadQueue=[]}init(){return Promise.all([wo("getAppBaseInfo")(),wo("getPushClientId")()]).then((([{appId:e}={},{cid:t}={}]=[])=>{if(!e)throw new Error("Invalid appId, please check the manifest.json file");if(!t)throw new Error("Invalid push client id");this._appId=e,this._pushClientId=t,this._seqId=Date.now()+"-"+Math.floor(9e5*Math.random()+1e5),this.emit("open"),this._initMessageListener()}),(e=>{throw this.emit("error",e),this.close(),e}))}async open(){return this.init()}_isUniCloudSSE(e){if("receive"!==e.type)return!1;const t=e&&e.data&&e.data.payload;return!(!t||"UNI_CLOUD_SSE"!==t.channel||t.seqId!==this._seqId)}_receivePushMessage(e){if(!this._isUniCloudSSE(e))return;const t=e&&e.data&&e.data.payload,{action:a,messageId:n,message:o}=t;this._payloadQueue.push({action:a,messageId:n,message:o}),this._consumMessage()}_consumMessage(){for(;;){const e=this._payloadQueue.find((e=>e.messageId===this._currentMessageId+1));if(!e)break;this._currentMessageId++,this._parseMessagePayload(e)}}_parseMessagePayload(e){const{action:t,messageId:a,message:n}=e;"end"===t?this._end({messageId:a,message:n}):"message"===t&&this._appendMessage({messageId:a,message:n})}_appendMessage({messageId:e,message:t}={}){this.emit("message",t)}_end({messageId:e,message:t}={}){this.emit("end",t),this.close()}_initMessageListener(){uni.onPushMessage(this._uniPushMessageCallback)}_destroy(){uni.offPushMessage(this._uniPushMessageCallback)}toJSON(){return{appId:this._appId,pushClientId:this._pushClientId,seqId:this._seqId}}close(){this._destroy(),this.emit("close")}}const Mo={tcb:Xa,tencent:Xa,aliyun:Pt,private:tn,dcloud:tn,alipay:dn};let So=new class{init(e){let t={};const a=Mo[e.provider];if(!a)throw new Error("未提供正确的provider参数");var n;return t=a.init(e),function(e){e._initPromiseHub||(e._initPromiseHub=new Ke({createPromise:function(){let t=Promise.resolve();t=new Promise((e=>{setTimeout((()=>{e()}),1)}));const a=e.auth();return t.then((()=>a.getLoginState())).then((e=>e?Promise.resolve():a.signInAnonymously()))}}))}(t),In(t),function(e){const t=e.uploadFile;e.uploadFile=function(e){return t.call(this,e)}}(t),(n=t).database=function(e){if(e&&Object.keys(e).length>0)return n.init(e).database();if(this._database)return this._database;const t=Un(Gn,{uniClient:n});return this._database=t,t},n.databaseForJQL=function(e){if(e&&Object.keys(e).length>0)return n.init(e).databaseForJQL();if(this._databaseForJQL)return this._databaseForJQL;const t=Un(Gn,{uniClient:n,isJQL:!0});return this._databaseForJQL=t,t},function(e){e.getCurrentUserInfo=go,e.chooseAndUploadFile=fo.initChooseAndUploadFile(e),Object.assign(e,{get mixinDatacom(){return _o(e)}}),e.SSEChannel=Co,e.initSecureNetworkByWeixin=function(e){return function({openid:t,callLoginByWeixin:a=!1}={}){return xo.call(e,{openid:t,callLoginByWeixin:a})}}(e),e.setCustomClientInfo=No,e.importObject=function(t){return function(a,n={}){n=function(e,t={}){return e.customUI=t.customUI||e.customUI,e.parseSystemError=t.parseSystemError||e.parseSystemError,Object.assign(e.loadingOptions,t.loadingOptions),Object.assign(e.errorOptions,t.errorOptions),"object"==typeof t.secretMethods&&(e.secretMethods=t.secretMethods),e}({customUI:!1,loadingOptions:{title:"加载中...",mask:!0},errorOptions:{type:"modal",retry:!1}},n);const{customUI:o,loadingOptions:i,errorOptions:r,parseSystemError:s}=n,l=!o;return new Proxy({},{get(o,c){switch(c){case"toString":return"[object UniCloudObject]";case"toJSON":return{}}return function({fn:e,interceptorName:t,getCallbackArgs:a}={}){return async function(...n){const o=a?a({params:n}):{};let i,r;try{return await rt(st(t,"invoke"),{...o}),i=await e(...n),await rt(st(t,"success"),{...o,result:i}),i}catch(s){throw r=s,await rt(st(t,"fail"),{...o,error:r}),r}finally{await rt(st(t,"complete"),r?{...o,error:r}:{...o,result:i})}}}({fn:async function o(...u){let d;l&&uni.showLoading({title:i.title,mask:i.mask});const m={name:a,type:Be,data:{method:c,params:u}};"object"==typeof n.secretMethods&&function(e,t){const a=t.data.method,n=e.secretMethods||{},o=n[a]||n["*"];o&&(t.secretType=o)}(n,m);let p=!1;try{d=await t.callFunction(m)}catch(e){p=!0,d={result:new wt(e)}}const{errSubject:h,errCode:v,errMsg:g,newToken:f}=d.result||{};if(l&&uni.hideLoading(),f&&f.token&&f.tokenExpired&&(It(f),_t(mt,{...f})),v){let e=g;if(p&&s&&(e=(await s({objectName:a,methodName:c,params:u,errSubject:h,errCode:v,errMsg:g})).errMsg||g),l)if("toast"===r.type)uni.showToast({title:e,icon:"none"});else{if("modal"!==r.type)throw new Error(`Invalid errorOptions.type: ${r.type}`);{const{confirm:t}=await async function({title:e,content:t,showCancel:a,cancelText:n,confirmText:o}={}){return new Promise(((i,r)=>{uni.showModal({title:e,content:t,showCancel:a,cancelText:n,confirmText:o,success(e){i(e)},fail(){i({confirm:!1,cancel:!0})}})}))}({title:"提示",content:e,showCancel:r.retry,cancelText:"取消",confirmText:r.retry?"重试":"确定"});if(r.retry&&t)return o(...u)}}const t=new wt({subject:h,code:v,message:g,requestId:d.requestId});throw t.detail=d.result,_t(ut,{type:vt,content:t}),t}return _t(ut,{type:vt,content:d.result}),d.result},interceptorName:"callObject",getCallbackArgs:function({params:e}={}){return{objectName:a,methodName:c,params:e}}})}})}}(e)}(t),["callFunction","uploadFile","deleteFile","getTempFileURL","downloadFile","chooseAndUploadFile"].forEach((e=>{if(!t[e])return;const a=t[e];t[e]=function(){return a.apply(t,Array.from(arguments))},t[e]=function(e,t){return function(a){let n=!1;if("callFunction"===t){const e=a&&a.type||Oe;n=e!==Oe}const o="callFunction"===t&&!n,i=this._initPromiseHub.exec();a=a||{};const{success:r,fail:s,complete:l}=Nt(a),c=i.then((()=>n?Promise.resolve():rt(st(t,"invoke"),a))).then((()=>e.call(this,a))).then((e=>n?Promise.resolve(e):rt(st(t,"success"),e).then((()=>rt(st(t,"complete"),e))).then((()=>(o&&_t(ut,{type:ht,content:e}),Promise.resolve(e))))),(e=>n?Promise.reject(e):rt(st(t,"fail"),e).then((()=>rt(st(t,"complete"),e))).then((()=>(_t(ut,{type:ht,content:e}),Promise.reject(e))))));if(!(r||s||l))return c;c.then((e=>{r&&r(e),l&&l(e),o&&_t(ut,{type:ht,content:e})}),(e=>{s&&s(e),l&&l(e),o&&_t(ut,{type:ht,content:e})}))}}(t[e],e).bind(t)})),t.init=this.init,t}};(()=>{const e=Je;let t={};if(e&&1===e.length)t=e[0],So=So.init(t),So._isDefault=!0;else{const t=["auth","callFunction","uploadFile","deleteFile","getTempFileURL","downloadFile"],a=["database","getCurrentUserInfo","importObject"];let n;n=e&&e.length>0?"应用有多个服务空间，请通过uniCloud.init方法指定要使用的服务空间":"应用未关联服务空间，请在uniCloud目录右键关联服务空间",[...t,...a].forEach((e=>{So[e]=function(){if(console.error(n),-1===a.indexOf(e))return Promise.reject(new wt({code:"SYS_ERR",message:n}));console.error(n)}}))}Object.assign(So,{get mixinDatacom(){return _o(So)}}),mo(So),So.addInterceptor=ot,So.removeInterceptor=it,So.interceptObject=lt,uni.__uniCloud=So;{const e=Xe||(Xe=function(){if("undefined"!=typeof globalThis)return globalThis;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;function e(){return this}return void 0!==e()?e():new Function("return this")()}(),Xe);e.uniCloud=So,e.UniCloudError=wt}})();var Io=So;const To={en:{"uni-load-more.contentdown":"Pull up to show more","uni-load-more.contentrefresh":"loading...","uni-load-more.contentnomore":"No more data"},"zh-Hans":{"uni-load-more.contentdown":"上拉显示更多","uni-load-more.contentrefresh":"正在加载...","uni-load-more.contentnomore":"没有更多数据了"},"zh-Hant":{"uni-load-more.contentdown":"上拉顯示更多","uni-load-more.contentrefresh":"正在加載...","uni-load-more.contentnomore":"沒有更多數據了"}};let Do;setTimeout((()=>{Do=uni.getSystemInfoSync().platform}),16);const{t:bo}=ye(To);const Vo=ie({name:"UniLoadMore",emits:["clickLoadMore"],props:{status:{type:String,default:"more"},showIcon:{type:Boolean,default:!0},iconType:{type:String,default:"auto"},iconSize:{type:Number,default:24},color:{type:String,default:"#777777"},contentText:{type:Object,default:()=>({contentdown:"",contentrefresh:"",contentnomore:""})},showText:{type:Boolean,default:!0}},data:()=>({webviewHide:!1,platform:Do,imgBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QzlBMzU3OTlEOUM0MTFFOUI0NTZDNERBQURBQzI4RkUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QzlBMzU3OUFEOUM0MTFFOUI0NTZDNERBQURBQzI4RkUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpDOUEzNTc5N0Q5QzQxMUU5QjQ1NkM0REFBREFDMjhGRSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpDOUEzNTc5OEQ5QzQxMUU5QjQ1NkM0REFBREFDMjhGRSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pt+ALSwAAA6CSURBVHja1FsLkFZVHb98LM+F5bHL8khA1iSeiyQBCRM+YGqKUnnJTDLGI0BGZlKDIU2MMglUiDApEZvSsZnQtBRJtKwQNKQMFYeRDR10WOLd8ljYXdh+v8v5fR3Od+797t1dnOnO/Ofce77z+J//+b/P+ZqtXbs2sJ9MJhNUV1cHJ06cCJo3bx7EPc2aNcvpy7pWrVoF+/fvDyoqKoI2bdoE9fX1F7TjN8a+EXBn/fkfvw942Tf+wYMHg9mzZwfjxo0LDhw4EPa1x2MbFw/fOGfPng1qa2tzcCkILsLDydq2bRsunpOTMM7TD/W/tZDZhPdeKD+yGxHhdu3aBV27dg3OnDlzMVANMheLAO3btw8KCwuDmpoaX5OxbgUIMEq7K8IcPnw4KCsrC/r37x8cP378/4cAXAB3vqSkJMuiDhTkw+XcuXNhOWbMmKBly5YhUT8xArhyFvP0BfwRsAuwxJZJsm/nzp2DTp06he/OU+cZ64K6o0ePBkOHDg2GDx8e6gEbJ5Q/NHNuAJQ1hgBeHUDlR7nVTkY8rQAvAi4z34vR/mPs1FoRsaCgIJThI0eOBC1atEiFGGV+5MiRoS45efJkqFjJFXV1dQuA012m2WcwTw98fy6CqBdsaiIO4CScrGPHjvk4odhavPquRtFWXEC25VgkREKOCh/qDSq+vn37htzD/mZTOmOc5U7zKzBPEedygWshcDyWvs30igAbU+6oyMgJBCFhwQE0fccxN60Ay9iebbjoDh06hMowjQxT4fXq1SskArmHZpkArvixp/kWzHdMeArExSJEaiXIjjRjRJ4DaAGWpibLzXN3Fm1vA5teBgh3j1Rv3bp1YgKwPdmf2p9zcyNYYgPKMfY0T5f5nNYdw158nJ8QawW4CLKwiOBSEgO/hok2eBydR+3dYH+PLxA5J8Vv0KBBwenTp0P2JWAx6+yFEBfs8lMY+y0SWMBNI9E4ThKi58VKTg3FQZS1RQF1cz27eC0QHMu+3E0SkUowjhVt5VdaWhp07949ZHv2Qd1EjDXM2cla1M0nl3GxAs3J9yREzyTdFVKVFOaE9qRA8GM0WebRuo9JGZKA7Mv2SeS/Z8+eoQ9BArMfFrLGo6jvxbhHbJZnKX2Rzz1O7QhJJ9Cs2ZMaWIyq/zhdeqPNfIoHd58clIQD+JSXl4dKlyIAuBdVXZwFVWKspSSoxE++h8x4k3uCnEhE4I5KwRiFWGOU0QWKiCYLbdoRMRKAu2kQ9vkfLU6dOhX06NEjlH+yMRZSinnuyWnYosVcji8CEA/6Cg2JF+IIUBqnGKUTCNwtwBN4f89RiK1R96DEgO2o0NDmtEdvVFdVVYV+P3UAPUEs6GFwV3PHmXkD4vh74iDFJysVI/MlaQhwKeBNTLYX5VuA8T4/gZxA4MRGFxDB6R7OmYPfyykGRJbyie+XnGYnQIC/coH9+vULiYrxrkL9ZA9+0ykaHIfEpM7ge8TiJ2CsHYwyMfafAF1yCGBHYIbCVDjDjKt7BeB51D+LgQa6OkG7IDYEEtvQ7lnXLKLtLdLuJBpE4gPUXcW2+PkZwOex+4cGDhwYDBkyRL7/HFcEwUGPo/8uWRUpYnfxGHco8HkewLHLyYmAawAPuIFZxhOpDfJQ8gbUv41yORAptMWBNr6oqMhWird5+u+iHmBb2nhjDV7HWBNQTgK8y11l5NetWzc5ULscAtSj7nbNI0skhWeUZCc0W4nyH/jO4Vz0u1IeYhbk4AiwM6tjxIWByHsoZ9qcIBPJd/y+DwPfBESOmCa/QF3WiZHucLlEDpNxcNhmheEOPgdQNx6/VZFQzFZ5TN08AHXQt2Ii3EdyFuUsPtTcGPhW5iMiCNELvz+Gdn9huG4HUJaW/w3g0wxV0XaG7arG2WeKiUWYM4Y7GO5ezshTARbbWGw/DvXkpp/ivVvE0JVoMxN4rpGzJMhE5Pl+xlATsDIqikP9F9D2z3h9nOksEUFhK+qO4rcPkoalMQ/HqJLIyb3F3JdjrCcw1yZ8joyJLR5gCo54etlag7qIoeNh1N1BRYj3DTFJ0elotxPlVzkGuYAmL0VSJVGAJA41c4Z6A3BzTLfn0HYwYKEI6CUAMzZEWvLsIcQOo1AmmyyM72nHJCfYsogflGV6jEk9vyQZXSuq6w4c16NsGcGZbwOPr+H1RkOk2LEzjNepxQkihHSCQ4ynAYNRx2zMKV92CQMWqj8J0BRE8EShxRFN6YrfCRhC0x3r/Zm4IbQCcmJoV0kMamllccR6FjHqUC5F2R/wS2dcymOlfAKOS4KmzQb5cpNC2MC7JhVn5wjXoJ44rYhLh8n0eXOCorJxa7POjbSlCGVczr34/RsAmrcvo9s+wGp3tzVhntxiXiJ4nvEYb4FJkf0O8HocAePmLvCxnL0AORraVekJk6TYjDabRVXfRE2lCN1h6ZQRN1+InUbsCpKwoBZHh0dODN9JBCUffItXxEavTQkUtnfTVAplCWL3JISz29h4NjotnuSsQKJCk8dF+kJR6RARjrqFVmfPnj3ZbK8cIJ0msd6jgHPGtfVTQ8VLmlvh4mct9sobRmPic0DyDQQnx/NlfYUgyz59+oScsH379pAwXABD32nTpoUHIToESeI5mnbE/UqDdyLcafEBf2MCqgC7NwxIbMREJQ0g4D4sfJwnD+AmRrII05cfMWJE+L1169bQr+fip06dGp4oJ83lmYd5wj/EmMa4TaHivo4EeCguYZBnkB5g2aWA69OIEnUHOaGysjIYMGBAMGnSpODYsWPZwCpFmm4lNq+4gSLQA7jcX8DwtjEyRC8wjabnXEx9kfWnTJkSJkAo90xpJVV+FmcVNeYAF5zWngS4C4O91MBxmAv8blLEpbjI5sz9MTdAhcgkCT1RO8mZkAjfiYpTEvStAS53Uw1vAiUGgZ3GpuQEYvoiBqlIan7kSDHnTwJQFNiPu0+5VxCVYhcZIjNrdXUDdp+Eq5AZ3Gkg8QAyVZRZIk4Tl4QAbF9cXJxNYZMAtAokgs4BrNxEpCtteXg7DDTMDKYNSuQdKsnJBek7HxewvxaosWxLYXtw+cJp18217wql4aKCfBNoEu0O5VU+PhctJ0YeXD4C6JQpyrlpSLTojpGGGN5YwNziChdIZLk4lvLcFJ9jMX3QdiImY9bmGQU+TRUL5CHITTRlgF8D9ouD1MfmLoEPl5xokIumZ2cfgMpHt47IW9N64Hsh7wQYYjyIugWuF5fCqYncXRd5vPMWyizzvhi/32+nvG0dZc9vR6fZOu0md5e+uC408FvKSIOZwXlGvxPv95izA2Vtvg1xKFWARI+vMX66HUhpQQb643uW1bSjuTWyw2SBvDrBvjFic1eGGlz5esq3ko9uSIlBRqPuFcCv8F4WIcN12nVaBd0SaYwI6PDDImR11JkqgHcPmQssjxIn6bUshygDFJUTxPMpHk+jfjPgupgdnYV2R/g7xSjtpah8RJBewhwf0gGK6XI92u4wXFEU40afJ4DN4h5LcAd+40HI3JgJecuT0c062W0i2hQJUTcxan3/CMW1PF2K6bbA+Daz4xRs1D3Br1Cm0OihKCqizW78/nXAF/G5TXrEcVzaNMH6CyMswqsAHqDyDLEyou8lwOXnKF8DjI6KjV3KzMBiXkDH8ij/H214J5A596ekrZ3F0zXlWeL7+P5eUrNo3/QwC15uxthuzidy7DzKRwEDaAViiDgKbTbz7CJnzo0bN7pIfIiid8SuPwn25o3QCmpnyjlZkyxPP8EomCJzrGb7GJMx7tNsq4MT2xMUYaiErZOluTzKsnz3gwCeCZyVRZJfYplNEokEjwrPtxlxjeYAk+F1F74VAzPxQRNYYdtpOUvWs8J1sGhBJMNsb7igN8plJs1eSmLIhLKE4rvaCX27gOhLpLOsIzJ7qn/i+wZzcvSOZ23/du8TZjwV8zHIXoP4R3ifBxiFz1dcVpa3aPntPE+c6TmIWE9EtcMmAcPdWAhYhAXxcLOQi9L1WhD1Sc8p1d2oL7XGiRKp8F4A2i8K/nfI+y/gsTDJ/YC/8+AD5Uh04KHiGl+cIFPnBDDrPMjwRGkLXyxO4VGbfQWnDH2v0bVWE3C9QOXlepbgjEfIJQI6XDG3z5ahD9cw2pS78ipB85wyScNTvsVzlzzhL8/jRrnmVjfFJK/m3m4nj9vbgQTguT8XZTjsm672R5uJKEaQmBI/c58gyus8ZDagLpEVSJBIyHp4jn++xqPV71OgQgJYEWOtZ/haxRtKmWOBu8xdBLftWltsY84zE6WIEy/eIOWL+BaayMx+KHtL7EAkqdNDLiEXmEMUHniedtJqg9HmZtfvt26vNi0BdG3Ft3g8ZOf7PAu59TxtzivLNIekyi+wD1i8CuUiD9FXAa8C+/xS3JPmZnomyc7H+fb4/Se0bk41Fel621r4cgVxbq91V4jVqwB7HTe2M7jgB+QWHavZkDRPmZcASoZEmBx6i75bGjPcMdL4/VKGFAGWZkGzPG0XAbdL9A81G5LOmUnC9hHKJeO7dcUMjblSl12867ElFTtaGl20xvvLGPdVz/8TVuU7y0x1PG7vtNg24oz9Uo/Z412++VFWI7Fcog9tu9Lm6gvRmIPv9x1xmQAu6RDkXtbOtlGEmpgD5Nvnyc0dcv0EE6cfdi1HmhMf9wDF3k3gtRvEedhxjpgfqPb9PU9iEJHnyOUA7bQUXh6kq/D7l2iTjWv7XOD530BDr8jIrus+srXjt4MzumJMHuTsBa63YKE1+RR5lBjEikCCnWKWiHdzOgKO+nRIBAF88za/IFmJ3eMZov4CYxGBabcpGL8EYx+SeMXJeRwHNsV/h+vdxeuhEpN3ZyNY78Gm2fknJxVGhyjixPiQvVkNzT1elD9Py/aTAL64Hb9vcYmC9zfdXdT/C1LeGbg4rnBaAihDFJH12W5ulfNCNe/xTsP3bp8ikzJs5BF+5PNfAQYAPaseTdsEcaYAAAAASUVORK5CYII="}),computed:{iconSnowWidth(){return 2*(Math.floor(this.iconSize/24)||1)},contentdownText(){return this.contentText.contentdown||bo("uni-load-more.contentdown")},contentrefreshText(){return this.contentText.contentrefresh||bo("uni-load-more.contentrefresh")},contentnomoreText(){return this.contentText.contentnomore||bo("uni-load-more.contentnomore")}},mounted(){var e=getCurrentPages(),t=e[e.length-1].$getAppWebview();t.addEventListener("hide",(()=>{this.webviewHide=!0})),t.addEventListener("show",(()=>{this.webviewHide=!1}))},methods:{onClick(){this.$emit("clickLoadMore",{detail:{status:this.status}})}}},[["render",function(t,a,n,o,i,r){return e.openBlock(),e.createElementBlock("view",{class:"uni-load-more",onClick:a[0]||(a[0]=(...e)=>r.onClick&&r.onClick(...e))},[!i.webviewHide&&("circle"===n.iconType||"auto"===n.iconType&&"android"===i.platform)&&"loading"===n.status&&n.showIcon?(e.openBlock(),e.createElementBlock("view",{key:0,style:e.normalizeStyle({width:n.iconSize+"px",height:n.iconSize+"px"}),class:"uni-load-more__img uni-load-more__img--android-MP"},[e.createElementVNode("view",{class:"uni-load-more__img-icon",style:e.normalizeStyle({borderTopColor:n.color,borderTopWidth:n.iconSize/12})},null,4),e.createElementVNode("view",{class:"uni-load-more__img-icon",style:e.normalizeStyle({borderTopColor:n.color,borderTopWidth:n.iconSize/12})},null,4),e.createElementVNode("view",{class:"uni-load-more__img-icon",style:e.normalizeStyle({borderTopColor:n.color,borderTopWidth:n.iconSize/12})},null,4)],4)):!i.webviewHide&&"loading"===n.status&&n.showIcon?(e.openBlock(),e.createElementBlock("view",{key:1,style:e.normalizeStyle({width:n.iconSize+"px",height:n.iconSize+"px"}),class:"uni-load-more__img uni-load-more__img--ios-H5"},[e.createElementVNode("image",{src:i.imgBase64,mode:"widthFix"},null,8,["src"])],4)):e.createCommentVNode("",!0),n.showText?(e.openBlock(),e.createElementBlock("text",{key:2,class:"uni-load-more__text",style:e.normalizeStyle({color:n.color})},e.toDisplayString("more"===n.status?r.contentdownText:"loading"===n.status?r.contentrefreshText:r.contentnomoreText),5)):e.createCommentVNode("",!0)])}],["__scopeId","data-v-090e4ba3"]]),Ao={name:"uniDataChecklist",mixins:[Io.mixinDatacom||{}],emits:["input","update:modelValue","change"],props:{mode:{type:String,default:"default"},multiple:{type:Boolean,default:!1},value:{type:[Array,String,Number],default:()=>""},modelValue:{type:[Array,String,Number],default:()=>""},localdata:{type:Array,default:()=>[]},min:{type:[Number,String],default:""},max:{type:[Number,String],default:""},wrap:{type:Boolean,default:!1},icon:{type:String,default:"left"},selectedColor:{type:String,default:""},selectedTextColor:{type:String,default:""},emptyText:{type:String,default:"暂无数据"},disabled:{type:Boolean,default:!1},map:{type:Object,default:()=>({text:"text",value:"value"})}},watch:{localdata:{handler(e){this.range=e,this.dataList=this.getDataList(this.getSelectedValue(e))},deep:!0},mixinDatacomResData(e){this.range=e,this.dataList=this.getDataList(this.getSelectedValue(e))},value(e){this.dataList=this.getDataList(e)},modelValue(e){this.dataList=this.getDataList(e)}},data:()=>({dataList:[],range:[],contentText:{contentdown:"查看更多",contentrefresh:"加载中",contentnomore:"没有更多"},isLocal:!0,styles:{selectedColor:"#2979ff",selectedTextColor:"#666"},isTop:0}),computed:{dataValue(){return""===this.value?this.modelValue:(this.modelValue,this.value)}},created(){this.localdata&&0!==this.localdata.length?(this.isLocal=!0,this.range=this.localdata,this.dataList=this.getDataList(this.getSelectedValue(this.range))):this.collection&&(this.isLocal=!1,this.loadData())},methods:{loadData(){this.mixinDatacomGet().then((e=>{this.mixinDatacomResData=e.result.data,0===this.mixinDatacomResData.length?(this.isLocal=!1,this.mixinDatacomErrorMessage=this.emptyText):this.isLocal=!0})).catch((e=>{this.mixinDatacomErrorMessage=e.message}))},getForm(e="uniForms"){let t=this.$parent,a=t.$options.name;for(;a!==e;){if(t=t.$parent,!t)return!1;a=t.$options.name}return t},change(e){const t=e.detail.value;let a={value:[],data:[]};if(this.multiple)this.range.forEach((e=>{t.includes(e[this.map.value]+"")&&(a.value.push(e[this.map.value]),a.data.push(e))}));else{const e=this.range.find((e=>e[this.map.value]+""===t));e&&(a={value:e[this.map.value],data:e})}this.$emit("input",a.value),this.$emit("update:modelValue",a.value),this.$emit("change",{detail:a}),this.multiple?this.dataList=this.getDataList(a.value,!0):this.dataList=this.getDataList(a.value)},getDataList(e){let t=JSON.parse(JSON.stringify(this.range)),a=[];return this.multiple?Array.isArray(e)||(e=[]):Array.isArray(e)&&e.length&&(e=e[0]),t.forEach(((t,n)=>{if(t.disabled=t.disable||t.disabled||!1,this.multiple)if(e.length>0){let a=e.find((e=>e===t[this.map.value]));t.selected=void 0!==a}else t.selected=!1;else t.selected=e===t[this.map.value];a.push(t)})),this.setRange(a)},setRange(e){let t=e.filter((e=>e.selected)),a=Number(this.min)||0,n=Number(this.max)||"";return e.forEach(((o,i)=>{if(this.multiple){if(t.length<=a){void 0!==t.find((e=>e[this.map.value]===o[this.map.value]))&&(o.disabled=!0)}if(t.length>=n&&""!==n){void 0===t.find((e=>e[this.map.value]===o[this.map.value]))&&(o.disabled=!0)}}this.setStyles(o,i),e[i]=o})),e},setStyles(e,t){e.styleBackgroud=this.setStyleBackgroud(e),e.styleIcon=this.setStyleIcon(e),e.styleIconText=this.setStyleIconText(e),e.styleRightIcon=this.setStyleRightIcon(e)},getSelectedValue(e){if(!this.multiple)return this.dataValue;let t=[];return e.forEach((e=>{e.selected&&t.push(e[this.map.value])})),this.dataValue.length>0?this.dataValue:t},setStyleBackgroud(e){let t={},a=this.selectedColor?this.selectedColor:"#2979ff";this.selectedColor&&("list"!==this.mode&&(t["border-color"]=e.selected?a:"#DCDFE6"),"tag"===this.mode&&(t["background-color"]=e.selected?a:"#f5f5f5"));let n="";for(let o in t)n+=`${o}:${t[o]};`;return n},setStyleIcon(e){let t={},a="";if(this.selectedColor){let a=this.selectedColor?this.selectedColor:"#2979ff";t["background-color"]=e.selected?a:"#fff",t["border-color"]=e.selected?a:"#DCDFE6",!e.selected&&e.disabled&&(t["background-color"]="#F2F6FC",t["border-color"]=e.selected?a:"#DCDFE6")}for(let n in t)a+=`${n}:${t[n]};`;return a},setStyleIconText(e){let t={},a="";if(this.selectedColor){let a=this.selectedColor?this.selectedColor:"#2979ff";"tag"===this.mode?t.color=e.selected?this.selectedTextColor?this.selectedTextColor:"#fff":"#666":t.color=e.selected?this.selectedTextColor?this.selectedTextColor:a:"#666",!e.selected&&e.disabled&&(t.color="#999")}for(let n in t)a+=`${n}:${t[n]};`;return a},setStyleRightIcon(e){let t={},a="";"list"===this.mode&&(t["border-color"]=e.selected?this.styles.selectedColor:"#DCDFE6");for(let n in t)a+=`${n}:${t[n]};`;return a}}};const Lo=ie(Ao,[["render",function(t,a,n,o,r,s){const l=i(e.resolveDynamicComponent("uni-load-more"),Vo);return e.openBlock(),e.createElementBlock("view",{class:"uni-data-checklist",style:e.normalizeStyle({"margin-top":r.isTop+"px"})},[r.isLocal?(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[n.multiple?(e.openBlock(),e.createElementBlock("checkbox-group",{key:0,class:e.normalizeClass(["checklist-group",{"is-list":"list"===n.mode||n.wrap}]),onChange:a[0]||(a[0]=(...e)=>s.change&&s.change(...e))},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.dataList,((t,a)=>(e.openBlock(),e.createElementBlock("label",{class:e.normalizeClass(["checklist-box",["is--"+n.mode,t.selected?"is-checked":"",n.disabled||t.disabled?"is-disable":"",0!==a&&"list"===n.mode?"is-list-border":""]]),style:e.normalizeStyle(t.styleBackgroud),key:a},[e.createElementVNode("checkbox",{class:"hidden",hidden:"",disabled:n.disabled||!!t.disabled,value:t[n.map.value]+"",checked:t.selected},null,8,["disabled","value","checked"]),"tag"!==n.mode&&"list"!==n.mode||"list"===n.mode&&"left"===n.icon?(e.openBlock(),e.createElementBlock("view",{key:0,class:"checkbox__inner",style:e.normalizeStyle(t.styleIcon)},[e.createElementVNode("view",{class:"checkbox__inner-icon"})],4)):e.createCommentVNode("",!0),e.createElementVNode("view",{class:e.normalizeClass(["checklist-content",{"list-content":"list"===n.mode&&"left"===n.icon}])},[e.createElementVNode("text",{class:"checklist-text",style:e.normalizeStyle(t.styleIconText)},e.toDisplayString(t[n.map.text]),5),"list"===n.mode&&"right"===n.icon?(e.openBlock(),e.createElementBlock("view",{key:0,class:"checkobx__list",style:e.normalizeStyle(t.styleBackgroud)},null,4)):e.createCommentVNode("",!0)],2)],6)))),128))],34)):(e.openBlock(),e.createElementBlock("radio-group",{key:1,class:e.normalizeClass(["checklist-group",{"is-list":"list"===n.mode,"is-wrap":n.wrap}]),onChange:a[1]||(a[1]=(...e)=>s.change&&s.change(...e))},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.dataList,((t,a)=>(e.openBlock(),e.createElementBlock("label",{class:e.normalizeClass(["checklist-box",["is--"+n.mode,t.selected?"is-checked":"",n.disabled||t.disabled?"is-disable":"",0!==a&&"list"===n.mode?"is-list-border":""]]),style:e.normalizeStyle(t.styleBackgroud),key:a},[e.createElementVNode("radio",{class:"hidden",hidden:"",disabled:n.disabled||t.disabled,value:t[n.map.value]+"",checked:t.selected},null,8,["disabled","value","checked"]),"tag"!==n.mode&&"list"!==n.mode||"list"===n.mode&&"left"===n.icon?(e.openBlock(),e.createElementBlock("view",{key:0,class:"radio__inner",style:e.normalizeStyle(t.styleBackgroud)},[e.createElementVNode("view",{class:"radio__inner-icon",style:e.normalizeStyle(t.styleIcon)},null,4)],4)):e.createCommentVNode("",!0),e.createElementVNode("view",{class:e.normalizeClass(["checklist-content",{"list-content":"list"===n.mode&&"left"===n.icon}])},[e.createElementVNode("text",{class:"checklist-text",style:e.normalizeStyle(t.styleIconText)},e.toDisplayString(t[n.map.text]),5),"list"===n.mode&&"right"===n.icon?(e.openBlock(),e.createElementBlock("view",{key:0,style:e.normalizeStyle(t.styleRightIcon),class:"checkobx__list"},null,4)):e.createCommentVNode("",!0)],2)],6)))),128))],34))],64)):(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-data-loading"},[t.mixinDatacomErrorMessage?(e.openBlock(),e.createElementBlock("text",{key:1},e.toDisplayString(t.mixinDatacomErrorMessage),1)):(e.openBlock(),e.createBlock(l,{key:0,status:"loading",iconType:"snow",iconSize:18,"content-text":r.contentText},null,8,["content-text"]))]))],4)}],["__scopeId","data-v-8d935d94"]]),Ro="/static/auth/current-address.png",Oo={__name:"SingleLinageSelector",props:{categories:{type:Array,default:()=>[]},colorType:{type:Number,default:1}},emits:["update:selected"],setup(t,{expose:a,emit:n}){e.useCssVars((e=>({"7f9edc2f":v.value})));const r=t;e.getCurrentInstance();const s=n,l=e.ref(0),c=e.ref(0),u=e.ref(0),d=e.ref([]),m=e.ref(""),p=async()=>{try{const{lng:e,lat:t}=await new Promise(((e,t)=>{uni.getLocation({type:"gcj02",success:t=>{e({lng:t.longitude,lat:t.latitude})},fail:e=>{uni.showToast({title:"定位失败",icon:"error"}),t(e)}})})),a=await uni.request({url:"https://restapi.amap.com/v3/geocode/regeo",data:{key:"",location:`${e},${t}`,output:"json",extensions:"base"}});if("1"===a.data.status){const e=a.data.regeocode.addressComponent;return(e.city||e.province).replace("市","")}return uni.showToast({title:"解析城市失败",icon:"error"}),""}catch(e){return o("error","at components/SingleLinageSelector.vue:136","调用高德接口失败：",e),""}},h=async()=>{const e=await p();e&&uni.showToast({title:`当前城市：${e}`,icon:"none"})},v=e.ref("#35c996");e.onMounted((()=>{1==r.colorType?v.value="#35c996":v.value="#ffa767",d.value=r.categories.map((e=>({...e,allSelected:!1,children:(e.children||[]).map((e=>({...e,selected:!1})))}))),d.value.length>0&&g(0)}));const g=e=>{l.value=e,c.value=0,d.value.forEach((e=>{e.allSelected=!1,e.children&&e.children.forEach((e=>e.selected=!1))})),d.value[e].allSelected=!0,k()},f=e=>{c.value=e.detail.scrollTop},y=e=>{u.value=e.detail.scrollTop},_=(e,t)=>{d.value.forEach((e=>{e.allSelected=!1,e.children&&e.children.forEach((e=>e.selected=!1))}));const a=d.value[e];-1===t?a.allSelected=!0:a.children[t].selected=!0,k()},k=()=>{const e=[];d.value.forEach((t=>{t.allSelected?e.push({catId:t.id,childId:"all",name:t.name}):t.children&&t.children.forEach((a=>{a.selected&&e.push({catId:t.id,childId:a.id,name:a.name})}))})),m.value=e[0].name,s("update:selected",e)},E=e.computed((()=>{var e;const t=d.value[l.value];if(!t)return"未选择";if(t.allSelected)return t.name;const a=null==(e=t.children)?void 0:e.find((e=>e.selected));return a?`${t.name} / ${a.name}`:t.name}));return a({reset:()=>{d.value.forEach((e=>{e.allSelected=!1,e.children.forEach((e=>{e.selected=!1}))})),d.value.length>0&&g(0)}}),(t,a)=>{const n=i(e.resolveDynamicComponent("uni-icons"),re);return e.openBlock(),e.createElementBlock("view",{class:"container"},[e.createElementVNode("view",{class:"top-region-bar"},[e.createElementVNode("view",{class:"current-region"},[e.createElementVNode("text",{class:"region-label"},"当前地区："),e.createElementVNode("text",{class:"region-value"},e.toDisplayString(m.value),1)]),e.createElementVNode("view",{class:"locate-btn",onClick:h},[e.createElementVNode("image",{src:Ro,class:"img",style:{width:"30rpx",height:"30rpx"}}),e.createElementVNode("view",null,"自动定位")])]),e.createElementVNode("view",{class:"select-title"},"选择地区"),e.createElementVNode("view",{class:"top-region-bar"},[e.createElementVNode("text",{class:"region-label"},e.toDisplayString(E.value),1)]),e.createElementVNode("view",{class:"selector-wrap"},[e.createElementVNode("scroll-view",{class:"left-scroll","scroll-y":"","scroll-top":u.value,onScroll:y},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(d.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{key:t.id,class:e.normalizeClass(["province-item",{"province-item--active":l.value===a}]),onClick:e=>g(a)},[e.createElementVNode("view",null,e.toDisplayString(t.name),1),e.createVNode(n,{type:"right",size:"16",color:l.value===a?v.value:"#333",class:"arrow-icon"},null,8,["color"])],10,["onClick"])))),128))],40,["scroll-top"]),e.createElementVNode("view",{class:"split-line"}),e.createElementVNode("scroll-view",{class:"right-scroll","scroll-y":"",onScroll:f,"scroll-top":c.value},[d.value[l.value]?(e.openBlock(),e.createElementBlock("view",{key:0,class:"city-block"},[e.createElementVNode("view",{class:e.normalizeClass(["city-item",{"city-item--selected-1":d.value[l.value].allSelected}]),onClick:a[0]||(a[0]=e.withModifiers((e=>_(l.value,-1)),["stop"]))}," 全部 ",2),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(d.value[l.value].children,((t,a)=>(e.openBlock(),e.createElementBlock("view",{key:t.id,class:e.normalizeClass(["city-item",{"city-item--selected":t.selected}]),onClick:e.withModifiers((e=>_(l.value,a)),["stop"])},e.toDisplayString(t.name),11,["onClick"])))),128))])):e.createCommentVNode("",!0)],40,["scroll-top"])])])}}},Bo=ie(Oo,[["__scopeId","data-v-ec7c961c"]]);const Po=ie({name:"u-icon",emits:["click","touchstart"],props:{name:{type:String,default:""},color:{type:[String,null],default:""},size:{type:[Number,String],default:"inherit"},bold:{type:Boolean,default:!1},index:{type:[Number,String],default:""},hoverClass:{type:String,default:""},customPrefix:{type:String,default:"uicon"},label:{type:[String,Number],default:""},labelPos:{type:String,default:"right"},labelSize:{type:[String,Number],default:"28"},labelColor:{type:String,default:"#606266"},marginLeft:{type:[String,Number],default:"6"},marginTop:{type:[String,Number],default:"6"},marginRight:{type:[String,Number],default:"6"},marginBottom:{type:[String,Number],default:"6"},imgMode:{type:String,default:"widthFix"},customStyle:{type:Object,default:()=>({})},width:{type:[String,Number],default:""},height:{type:[String,Number],default:""},top:{type:[String,Number],default:0},showDecimalIcon:{type:Boolean,default:!1},inactiveColor:{type:String,default:"#ececec"},percent:{type:[Number,String],default:"50"}},computed:{customClass(){let e=[],{customPrefix:t,name:a}=this,n=a.indexOf("-icon-");return n>-1?(t=a.substring(0,n+5),e.push(a)):e.push(`${t}-${a}`),"uicon"===t?e.push("u-iconfont"):e.push(t),this.showDecimalIcon&&this.inactiveColor&&this.$u.config.type.includes(this.inactiveColor)?e.push("u-icon__icon--"+this.inactiveColor):this.color&&this.$u.config.type.includes(this.color)&&e.push("u-icon__icon--"+this.color),e},iconStyle(){let e={};return e={fontSize:"inherit"==this.size?"inherit":this.$u.addUnit(this.size),fontWeight:this.bold?"bold":"normal",top:this.$u.addUnit(this.top)},this.showDecimalIcon&&this.inactiveColor&&!this.$u.config.type.includes(this.inactiveColor)?e.color=this.inactiveColor:this.color&&!this.$u.config.type.includes(this.color)&&(e.color=this.color),e},isImg(){return-1!==this.name.indexOf("/")},imgStyle(){let e={};return e.width=this.width?this.$u.addUnit(this.width):this.$u.addUnit(this.size),e.height=this.height?this.$u.addUnit(this.height):this.$u.addUnit(this.size),e},decimalIconStyle(){let e={};return e={fontSize:"inherit"==this.size?"inherit":this.$u.addUnit(this.size),fontWeight:this.bold?"bold":"normal",top:this.$u.addUnit(this.top),width:this.percent+"%"},this.color&&!this.$u.config.type.includes(this.color)&&(e.color=this.color),e},decimalIconClass(){let e=[];return e.push(this.customPrefix+"-"+this.name),"uicon"==this.customPrefix?e.push("u-iconfont"):e.push(this.customPrefix),this.color&&this.$u.config.type.includes(this.color)?e.push("u-icon__icon--"+this.color):e.push("u-icon__icon--primary"),e}},methods:{click(){this.$emit("click",this.index)},touchstart(){this.$emit("touchstart",this.index)}}},[["render",function(t,a,n,o,i,r){return e.openBlock(),e.createElementBlock("view",{style:e.normalizeStyle([n.customStyle]),class:e.normalizeClass(["u-icon",["u-icon--"+n.labelPos]]),onClick:a[1]||(a[1]=(...e)=>r.click&&r.click(...e))},[r.isImg?(e.openBlock(),e.createElementBlock("image",{key:0,class:"u-icon__img",src:n.name,mode:n.imgMode,style:e.normalizeStyle([r.imgStyle])},null,12,["src","mode"])):(e.openBlock(),e.createElementBlock("view",{key:1,class:e.normalizeClass(["u-icon__icon",r.customClass]),style:e.normalizeStyle([r.iconStyle]),"hover-class":n.hoverClass,onTouchstart:a[0]||(a[0]=(...e)=>r.touchstart&&r.touchstart(...e))},[n.showDecimalIcon?(e.openBlock(),e.createElementBlock("text",{key:0,style:e.normalizeStyle([r.decimalIconStyle]),class:e.normalizeClass([r.decimalIconClass,"u-icon__decimal"]),"hover-class":n.hoverClass},null,14,["hover-class"])):e.createCommentVNode("",!0)],46,["hover-class"])),""!==n.label&&null!==n.label?(e.openBlock(),e.createElementBlock("text",{key:2,class:"u-icon__label",style:e.normalizeStyle({color:n.labelColor,fontSize:t.$u.addUnit(n.labelSize),marginLeft:"right"==n.labelPos?t.$u.addUnit(n.marginLeft):0,marginTop:"bottom"==n.labelPos?t.$u.addUnit(n.marginTop):0,marginRight:"left"==n.labelPos?t.$u.addUnit(n.marginRight):0,marginBottom:"top"==n.labelPos?t.$u.addUnit(n.marginBottom):0})},e.toDisplayString(n.label),5)):e.createCommentVNode("",!0)],6)}],["__scopeId","data-v-32e6a46e"]]),Uo=ie({__name:"LinkageSelector",props:{categories:{type:Array,default:()=>[]},maxSelect:{type:Number,default:5}},emits:["update:selected"],setup(t,{emit:a}){const n=a;e.getCurrentInstance();const o=t;e.ref(0),e.ref(""),e.ref("");const r=e.ref([]),s=e.ref(0),l=e.ref("");e.ref(0);const c=e.ref([]),u=()=>{const e=uni.createSelectorQuery().in(this);let t=0;e.selectAll(".right-group").boundingClientRect((e=>{r.value=e.map((e=>{const a=t;return t+=e.height,{top:a,bottom:t}}))})).exec()},d=e=>{uni.createSelectorQuery().selectAll(".category-block").boundingClientRect((e=>{const t=e.findIndex((e=>e.top>=0&&e.top<400));-1!==t&&(s.value=t)})).exec()},m=e=>[{id:"all",name:"全部",selected:e.children.every((e=>e.selected))},...e.spread?[...e.children]:e.children.slice(0,9)],p=e.computed((()=>{let e=0;return c.value.forEach((t=>{t.allSelected?e++:t.children&&t.children.forEach((t=>{t.selected&&e++}))})),e}));return e.onMounted((()=>{c.value=o.categories.map((e=>({...e,spread:!1,children:e.children.map((e=>({...e,selected:!1})))}))),e.nextTick((()=>{setTimeout(u,300)}))})),(t,a)=>{const r=i(e.resolveDynamicComponent("u-icon"),Po);return e.openBlock(),e.createElementBlock("view",{class:"container"},[e.createElementVNode("scroll-view",{class:"left-menu","scroll-y":""},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{key:t.id,class:e.normalizeClass(["left-item",{active:s.value===a}]),onClick:e=>{return t=a,s.value=t,void(l.value="cat-"+t);var t}},e.toDisplayString(t.name),11,["onClick"])))),128))]),e.createElementVNode("scroll-view",{class:"right-content","scroll-y":"","scroll-into-view":l.value,onScroll:d},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{key:t.id,class:"category-block",id:"cat-"+a},[e.createElementVNode("view",{class:"category-header"},[e.createElementVNode("view",{class:"header-title"},e.toDisplayString(t.name),1),t.children.length>9?(e.openBlock(),e.createElementBlock("view",{key:0,class:"toggle-btn",onClick:e.withModifiers((e=>{return t=a,void(c.value[t].spread=!c.value[t].spread);var t}),["stop"])},[e.createTextVNode(e.toDisplayString(t.spread?"收起":"更多")+" ",1),e.createVNode(r,{name:t.spread?"arrow-up":"arrow-down",size:"14",color:"#35C996"},null,8,["name"])],8,["onClick"])):e.createCommentVNode("",!0)]),e.createElementVNode("view",{class:"child-wrap"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(m(t),((i,r)=>(e.openBlock(),e.createElementBlock("view",{key:i.id,class:e.normalizeClass(["child-item",{selected:"all"===i.id?t.allSelected:i.selected}]),onClick:e.withModifiers((e=>((e,t)=>{const a=c.value[e];if(-1===t){if(p.value>=o.maxSelect&&!a.allSelected)return void uni.showToast({title:`最多选择 ${o.maxSelect} 个标签`,icon:"none"});a.allSelected=!a.allSelected,a.children.forEach((e=>e.selected=!1))}else{if(p.value>=o.maxSelect&&!a.children[t].selected)return void uni.showToast({title:`最多选择 ${o.maxSelect} 个标签`,icon:"none"});a.children[t].selected=!a.children[t].selected,a.children[t].selected&&(a.allSelected=!1)}const i=[];c.value.forEach((e=>{e.allSelected?i.push({catId:e.id,childId:"all",name:e.name}):e.children&&e.children.forEach((t=>{t.selected&&i.push({catId:e.id,childId:t.id,name:t.name})}))})),n("update:selected",i)})(a,r-1)),["stop"])},e.toDisplayString(i.name),11,["onClick"])))),128))])],8,["id"])))),128))],40,["scroll-into-view"])])}}},[["__scopeId","data-v-a7fce536"]]),Go={__name:"range-slider",props:{min:{type:Number,default:0},max:{type:Number,default:100},width:{type:Number,default:300},step:{type:Number,default:1},initMin:{type:Number,default:0},initMax:{type:Number,default:50},colorChange:{type:String,default:"#35CA95"}},emits:["change","update:minValue","update:maxValue"],setup(t,{emit:a}){const n=t,o=a,i=e.ref(null),r=e.ref({width:0,left:0}),s=e.ref(0),l=e.ref(0),c=e.ref(n.initMin),u=e.ref(n.initMax),d=e.ref(!1),m=e.ref(""),p=e.computed((()=>l.value-s.value)),h=()=>{s.value=(n.initMin-n.min)/(n.max-n.min)*100,l.value=(n.initMax-n.min)/(n.max-n.min)*100,c.value=n.initMin,u.value=n.initMax};e.onMounted((async()=>{await new Promise((t=>{uni.createSelectorQuery().in(e.getCurrentInstance()).select(".slider-track").boundingClientRect((e=>{r.value={width:e.width,left:e.left},t(r.value)})).exec()})),h()})),e.watch([()=>n.min,()=>n.max,()=>n.initMin,()=>n.initMax],(()=>{h()}));const v=(e,t)=>{d.value=!0,m.value=t,e.preventDefault()},g=(e,t)=>{d.value=!0,m.value=t,e.preventDefault()},f=(e,t)=>{if(!d.value||!r.value.width)return;const a=e.touches[0].clientX;_(a,m.value)},y=(e,t)=>{if(!d.value||!r.value.width)return;const a=e.clientX;_(a,m.value)},_=(e,t)=>{let a=e-r.value.left;a=Math.max(0,Math.min(a,r.value.width));const i=a/r.value.width*100,d=Math.round(((n.max-n.min)*i/100+n.min)/n.step)*n.step;if("left"===t){if(d>=u.value)return;c.value=d,s.value=i}else{if(d<=c.value)return;u.value=d,l.value=i}o("change",{min:c.value,max:u.value}),o("update:minValue",c.value),o("update:maxValue",u.value)},k=()=>{d.value=!1,m.value=""},E=()=>{d.value=!1,m.value=""};return(a,n)=>(e.openBlock(),e.createElementBlock("view",{class:"range-slider-container",style:e.normalizeStyle({width:t.width+"px"})},[e.createElementVNode("view",{class:"slider-track",ref_key:"trackRef",ref:i},[e.createElementVNode("view",{class:"slider-track-active",style:e.normalizeStyle({left:s.value+"%",width:p.value+"%",backgroundColor:t.colorChange})},null,4)],512),e.createElementVNode("view",{class:e.normalizeClass(["slider-handle left-handle","#35CA95"==t.colorChange?"slider-img2":"slider-img"]),style:e.normalizeStyle({left:s.value+"%"}),onTouchstart:n[0]||(n[0]=e=>v(e,"left")),onTouchmove:n[1]||(n[1]=e=>f(e)),onTouchend:k,onMousedown:n[2]||(n[2]=e=>g(e,"left")),onMousemove:n[3]||(n[3]=e=>y(e)),onMouseup:E,onMouseleave:E},null,38),e.createElementVNode("view",{class:"slider-value-text left-value",style:e.normalizeStyle({left:s.value+"%"})},e.toDisplayString(c.value),5),e.createElementVNode("view",{class:e.normalizeClass(["slider-handle right-handle","#35CA95"==t.colorChange?"slider-img2":"slider-img"]),style:e.normalizeStyle({left:l.value+"%"}),onTouchstart:n[4]||(n[4]=e=>v(e,"right")),onTouchmove:n[5]||(n[5]=e=>f(e)),onTouchend:k,onMousedown:n[6]||(n[6]=e=>g(e,"right")),onMousemove:n[7]||(n[7]=e=>y(e)),onMouseup:E,onMouseleave:E},null,38),e.createElementVNode("view",{class:"slider-value-text right-value",style:e.normalizeStyle({left:l.value+"%"})},e.toDisplayString(u.value),5)],4))}},Fo=ie(Go,[["__scopeId","data-v-29c27b32"]]),qo={__name:"List-Filtering",props:{colorType:{type:Number,default:1},layoutType:{type:Number,default:1},serviceTypes:{type:Array,default:()=>[]},confusionList:{type:Array,default:()=>[]}},setup(t,{expose:a}){const n=t,r=e.computed((()=>1==n.colorType?"#35CA95":"#ffa767")),s=e.ref(1),l=e.ref([{value:1,text:"综合排序"},{value:2,text:"价格高优先"},{value:3,text:"价格低优先"},{value:4,text:"好评率高"},{value:5,text:"经验最多"},{value:6,text:"从业年限"}]),c=e.ref([{id:1,title:"咨询师性别",arrSelect:[{value:"",text:"不限"},{value:"男",text:"男性咨询师"},{value:"女",text:"女性咨询师"}]},{id:2,title:"年龄筛选",arrSelect:[{value:"",text:"不限"},{value:"60后",text:"60后"},{value:"70后",text:"70后"},{value:"80后",text:"80后"},{value:"90后",text:"90后"},{value:"00后",text:"00后"}]},{id:3,title:"星座筛选",arrSelect:[{value:"",text:"不限"},{value:"白羊座",text:"白羊座"},{value:"金牛座",text:"金牛座"},{value:"双子座",text:"双子座"},{value:"巨蟹座",text:"巨蟹座"},{value:"狮子座",text:"狮子座"},{value:"处女座",text:"处女座"},{value:"天秤座",text:"天秤座"},{value:"天蝎座",text:"天蝎座"},{value:"射手座",text:"射手座"},{value:"摩羯座",text:"摩羯座"},{value:"水瓶座",text:"水瓶座"},{value:"双鱼座",text:"双鱼座"}]}]),u=e.ref([]),d=e=>{u.value=e.map((e=>e.childId)).join(",")},m=e.ref(null),p=e=>{m.value=e[0].name},h=e.ref({minPrice:10,maxPrice:60}),v=e=>{const{min:t,max:a}=e;h.value={minPrice:t,maxPrice:a}},g={1:"sex",2:"maxAge",3:"constellation"},f={};return a({distressId:u,city:m,currentRange:h,sortType:s,resultObj:f}),(a,n)=>{const u=i(e.resolveDynamicComponent("uni-data-checkbox"),Lo);return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["layout-container",`layout-type-${t.layoutType}`])},[1==t.layoutType?(e.openBlock(),e.createElementBlock("div",{key:0},[e.createVNode(Uo,{"onUpdate:selected":d,categories:t.serviceTypes},null,8,["categories"])])):e.createCommentVNode("",!0),2==t.layoutType?(e.openBlock(),e.createElementBlock("div",{key:1},[e.createVNode(Bo,{"onUpdate:selected":p,categories:t.confusionList,colorType:t.colorType},null,8,["categories","colorType"])])):e.createCommentVNode("",!0),3==t.layoutType?(e.openBlock(),e.createElementBlock("div",{key:2},[e.createVNode(Fo,{minPrice:0,maxPrice:100,width:300,step:1,initMin:10,initMax:60,colorChange:r.value,onChange:v},null,8,["colorChange"]),e.createElementVNode("div",{class:"slider-value"},[e.createElementVNode("div",{class:"text-value"},e.toDisplayString(h.value.minPrice),1),e.createElementVNode("div",{class:"slider-value-line"},"至"),e.createElementVNode("div",{class:"text-value"},e.toDisplayString(h.value.maxPrice),1)])])):e.createCommentVNode("",!0),4==t.layoutType?(e.openBlock(),e.createElementBlock("div",{key:3},[e.createVNode(u,{selectedColor:r.value,modelValue:s.value,"onUpdate:modelValue":n[0]||(n[0]=e=>s.value=e),localdata:l.value},null,8,["selectedColor","modelValue","localdata"])])):e.createCommentVNode("",!0),5==t.layoutType?(e.openBlock(),e.createElementBlock("div",{key:4},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.value,((t,a)=>(e.openBlock(),e.createElementBlock("div",{key:a},[e.createElementVNode("div",null,e.toDisplayString(t.title),1),e.createVNode(u,{mode:"tag",modelValue:t.selected,"onUpdate:modelValue":e=>t.selected=e,localdata:t.arrSelect,selectedColor:r.value,onChange:e=>((e,t)=>{const a=g[e];if(!a)return void o("warn","at components/List-Filtering.vue:177",`未找到itemId=${e}对应的属性名`);const n=t.detail.value;f[a]=n})(t.id,e)},null,8,["modelValue","onUpdate:modelValue","localdata","selectedColor","onChange"])])))),128))])):e.createCommentVNode("",!0)],2)}}},zo=ie(qo,[["__scopeId","data-v-5444f830"]]),Ho=(e,t={})=>A.post("/api/listener/getListenerList",e,t),$o=(e,t={})=>A.post("/api/listener/step1",e,t),jo=(e,t={})=>A.post("/api/listener/getListenerByUserId",e,t),Ko=(e,t={})=>A.get(`/api/listener/serviceExperience?id=${e.id}`,e,t),Yo=e=>{const t=new Date(1e3*e),a=new Date,n=e=>e.toString().padStart(2,"0"),o=t.getFullYear(),i=t.getMonth()+1,r=t.getDate(),s=t.getHours(),l=t.getMinutes(),c=a.getFullYear(),u=a.getMonth()+1,d=a.getDate(),m=`${o}-${n(i)}-${n(r)}`,p=`${c}-${n(u)}-${n(d)}`,h=new Date(a);h.setDate(d-1);const v=h.getFullYear(),g=h.getMonth()+1,f=h.getDate(),y=`${v}-${n(g)}-${n(f)}`;return m===p?`${n(s)}:${n(l)}`:m===y?"昨天":`${n(i)}/${n(r)}`},Wo=e=>{if(!e||"string"!=typeof e)return"未知时间";const t=e.split(" ")[0],[a,n]=t.split("-");return a&&n?`${a}.${n}`:"格式错误"},Jo=(e=[])=>e.map((e=>({title:`${Wo(e.startTime)} - ${Wo(e.endTime)}`,desc:e.career||"无职业信息"}))),Zo=e=>{if(!e||"string"!=typeof e)return"出生年月格式错误";const[t,a]=e.split("-");if(!t||!a||4!==t.length||2!==a.length)return"出生年月格式错误（需为YYYY-MM）";const n=Number(t);return isNaN(n)?"出生年份不是有效数字":n>=1980&&n<=1989?"80后":n>=1990&&n<=1999?"90后":n>=2e3&&n<=2009?"00后":n>=2010&&n<=2019?"10后":n>=2020&&n<=2029?"20后":n>=1970&&n<=1979?"70后":10*Math.floor(n/10)+"后"},Xo=e=>{if("string"!=typeof e||""===e.trim())return o("error","at lib/utils.js:148","输入的时间必须是非空字符串"),null;const t=e.replace(" ","T"),a=new Date(t).getTime();if(isNaN(a))return o("error","at lib/utils.js:156","输入的时间格式无效，请检查时间字符串"),null;return Math.floor(a/1e3)},Qo=e=>{const t=new Date(1e3*e);return`${t.getFullYear()}-${(t.getMonth()+1+"").padStart(2,"0")}-${(t.getDate()+"").padStart(2,"0")} ${(t.getHours()+"").padStart(2,"0")}:${(t.getMinutes()+"").padStart(2,"0")}:${(t.getSeconds()+"").padStart(2,"0")}`},ei=(e,t={})=>A.post("/api/consultant/consultant/getConsultantList",e,t),ti=(e,t={})=>A.get(`/api/consultant/consultant/commentInfo?id=${e.id}`,e,t),ai=(e,t={})=>A.get(`/api/consultant/consultant/serviceExperience?id=${e.id}`,e,t),ni=(e,t={})=>A.post("/api/consultant/consultant/step1",e,t),oi=(e,t={})=>A.post("/api/consultant/consultant/getConsultantByUserId",e,t),ii=(e,t={})=>A.get("api/consultant/consultant/menu"),ri=(e,t={})=>A.post("/api/tencent/sig/trtc",e,t),si=(e,t={})=>A.get("/api/banner/list",e,t),li=(e,t={})=>A.get("/api/appMenu/menus",e,t),ci=(e,t={})=>A.get("/api/admin/consultant/services");class ui{constructor(e,t){this.options=e,this.animation=uni.createAnimation({...e}),this.currentStepAnimates={},this.next=0,this.$=t}_nvuePushAnimates(e,t){let a=this.currentStepAnimates[this.next],n={};if(n=a||{styles:{},config:{}},di.includes(e)){n.styles.transform||(n.styles.transform="");let a="";"rotate"===e&&(a="deg"),n.styles.transform+=`${e}(${t+a}) `}else n.styles[e]=`${t}`;this.currentStepAnimates[this.next]=n}_animateRun(e={},t={}){let a=this.$.$refs.ani.ref;if(a)return new Promise(((n,o)=>{nvueAnimation.transition(a,{styles:e,...t},(e=>{n()}))}))}_nvueNextAnimate(e,t=0,a){let n=e[t];if(n){let{styles:o,config:i}=n;this._animateRun(o,i).then((()=>{t+=1,this._nvueNextAnimate(e,t,a)}))}else this.currentStepAnimates={},"function"==typeof a&&a(),this.isEnd=!0}step(e={}){return this.animation.step(e),this}run(e){this.$.animationData=this.animation.export(),this.$.timer=setTimeout((()=>{"function"==typeof e&&e()}),this.$.durationTime)}}const di=["matrix","matrix3d","rotate","rotate3d","rotateX","rotateY","rotateZ","scale","scale3d","scaleX","scaleY","scaleZ","skew","skewX","skewY","translate","translate3d","translateX","translateY","translateZ"];function mi(e,t){if(t)return clearTimeout(t.timer),new ui(e,t)}di.concat(["opacity","backgroundColor"],["width","height","left","right","top","bottom"]).forEach((e=>{ui.prototype[e]=function(...t){return this.animation[e](...t),this}}));const pi=ie({name:"uniTransition",emits:["click","change"],props:{show:{type:Boolean,default:!1},modeClass:{type:[Array,String],default:()=>"fade"},duration:{type:Number,default:300},styles:{type:Object,default:()=>({})},customClass:{type:String,default:""},onceRender:{type:Boolean,default:!1}},data:()=>({isShow:!1,transform:"",opacity:1,animationData:{},durationTime:300,config:{}}),watch:{show:{handler(e){e?this.open():this.isShow&&this.close()},immediate:!0}},computed:{stylesObject(){let e={...this.styles,"transition-duration":this.duration/1e3+"s"},t="";for(let a in e){t+=this.toLine(a)+":"+e[a]+";"}return t},transformStyles(){return"transform:"+this.transform+";opacity:"+this.opacity+";"+this.stylesObject}},created(){this.config={duration:this.duration,timingFunction:"ease",transformOrigin:"50% 50%",delay:0},this.durationTime=this.duration},methods:{init(e={}){e.duration&&(this.durationTime=e.duration),this.animation=mi(Object.assign(this.config,e),this)},onClick(){this.$emit("click",{detail:this.isShow})},step(e,t={}){if(this.animation){for(let t in e)try{"object"==typeof e[t]?this.animation[t](...e[t]):this.animation[t](e[t])}catch(Ft){o("error","at uni_modules/uni-transition/components/uni-transition/uni-transition.vue:148",`方法 ${t} 不存在`)}return this.animation.step(t),this}},run(e){this.animation&&this.animation.run(e)},open(){clearTimeout(this.timer),this.transform="",this.isShow=!0;let{opacity:e,transform:t}=this.styleInit(!1);void 0!==e&&(this.opacity=e),this.transform=t,this.$nextTick((()=>{this.timer=setTimeout((()=>{this.animation=mi(this.config,this),this.tranfromInit(!1).step(),this.animation.run((()=>{this.transform="",this.opacity=e||1})),this.$emit("change",{detail:this.isShow})}),20)}))},close(e){this.animation&&this.tranfromInit(!0).step().run((()=>{this.isShow=!1,this.animationData=null,this.animation=null;let{opacity:e,transform:t}=this.styleInit(!1);this.opacity=e||1,this.transform=t,this.$emit("change",{detail:this.isShow})}))},styleInit(e){let t={transform:""},a=(e,a)=>{"fade"===a?t.opacity=this.animationType(e)[a]:t.transform+=this.animationType(e)[a]+" "};return"string"==typeof this.modeClass?a(e,this.modeClass):this.modeClass.forEach((t=>{a(e,t)})),t},tranfromInit(e){let t=(e,t)=>{let a=null;"fade"===t?a=e?0:1:(a=e?"-100%":"0","zoom-in"===t&&(a=e?.8:1),"zoom-out"===t&&(a=e?1.2:1),"slide-right"===t&&(a=e?"100%":"0"),"slide-bottom"===t&&(a=e?"100%":"0")),this.animation[this.animationMode()[t]](a)};return"string"==typeof this.modeClass?t(e,this.modeClass):this.modeClass.forEach((a=>{t(e,a)})),this.animation},animationType:e=>({fade:e?0:1,"slide-top":`translateY(${e?"0":"-100%"})`,"slide-right":`translateX(${e?"0":"100%"})`,"slide-bottom":`translateY(${e?"0":"100%"})`,"slide-left":`translateX(${e?"0":"-100%"})`,"zoom-in":`scaleX(${e?1:.8}) scaleY(${e?1:.8})`,"zoom-out":`scaleX(${e?1:1.2}) scaleY(${e?1:1.2})`}),animationMode:()=>({fade:"opacity","slide-top":"translateY","slide-right":"translateX","slide-bottom":"translateY","slide-left":"translateX","zoom-in":"scale","zoom-out":"scale"}),toLine:e=>e.replace(/([A-Z])/g,"-$1").toLowerCase()}},[["render",function(t,a,n,o,i,r){return e.withDirectives((e.openBlock(),e.createElementBlock("view",{ref:"ani",animation:i.animationData,class:e.normalizeClass(n.customClass),style:e.normalizeStyle(r.transformStyles),onClick:a[0]||(a[0]=(...e)=>r.onClick&&r.onClick(...e))},[e.renderSlot(t.$slots,"default")],14,["animation"])),[[e.vShow,i.isShow]])}]]),hi={name:"uniPopup",components:{},emits:["change","maskClick"],props:{animation:{type:Boolean,default:!0},type:{type:String,default:"center"},isMaskClick:{type:Boolean,default:null},maskClick:{type:Boolean,default:null},backgroundColor:{type:String,default:"none"},safeArea:{type:Boolean,default:!0},maskBackgroundColor:{type:String,default:"rgba(0, 0, 0, 0.4)"},borderRadius:{type:String}},watch:{type:{handler:function(e){this.config[e]&&this[this.config[e]](!0)},immediate:!0},isDesktop:{handler:function(e){this.config[e]&&this[this.config[this.type]](!0)},immediate:!0},maskClick:{handler:function(e){this.mkclick=e},immediate:!0},isMaskClick:{handler:function(e){this.mkclick=e},immediate:!0},showPopup(e){}},data(){return{duration:300,ani:[],showPopup:!1,showTrans:!1,popupWidth:0,popupHeight:0,config:{top:"top",bottom:"bottom",center:"center",left:"left",right:"right",message:"top",dialog:"center",share:"bottom"},maskClass:{position:"fixed",bottom:0,top:0,left:0,right:0,backgroundColor:"rgba(0, 0, 0, 0.4)"},transClass:{backgroundColor:"transparent",borderRadius:this.borderRadius||"0",position:"fixed",left:0,right:0},maskShow:!0,mkclick:!0,popupstyle:"top"}},computed:{getStyles(){let e={backgroundColor:this.bg};return this.borderRadius,e=Object.assign(e,{borderRadius:this.borderRadius}),e},isDesktop(){return this.popupWidth>=500&&this.popupHeight>=500},bg(){return""===this.backgroundColor||"none"===this.backgroundColor?"transparent":this.backgroundColor}},mounted(){(()=>{const{windowWidth:e,windowHeight:t,windowTop:a,safeArea:n,screenHeight:o,safeAreaInsets:i}=uni.getSystemInfoSync();this.popupWidth=e,this.popupHeight=t+(a||0),n&&this.safeArea?this.safeAreaInsets=i.bottom:this.safeAreaInsets=0})()},unmounted(){this.setH5Visible()},activated(){this.setH5Visible(!this.showPopup)},deactivated(){this.setH5Visible(!0)},created(){null===this.isMaskClick&&null===this.maskClick?this.mkclick=!0:this.mkclick=null!==this.isMaskClick?this.isMaskClick:this.maskClick,this.animation?this.duration=300:this.duration=0,this.messageChild=null,this.clearPropagation=!1,this.maskClass.backgroundColor=this.maskBackgroundColor},methods:{setH5Visible(e=!0){},closeMask(){this.maskShow=!1},disableMask(){this.mkclick=!1},clear(e){e.stopPropagation(),this.clearPropagation=!0},open(e){if(this.showPopup)return;e&&-1!==["top","center","bottom","left","right","message","dialog","share"].indexOf(e)||(e=this.type),this.config[e]?(this[this.config[e]](),this.$emit("change",{show:!0,type:e})):o("error","at uni_modules/uni-popup/components/uni-popup/uni-popup.vue:310","缺少类型：",e)},close(e){this.showTrans=!1,this.$emit("change",{show:!1,type:this.type}),clearTimeout(this.timer),this.timer=setTimeout((()=>{this.showPopup=!1}),300)},touchstart(){this.clearPropagation=!1},onTap(){this.clearPropagation?this.clearPropagation=!1:(this.$emit("maskClick"),this.mkclick&&this.close())},top(e){this.popupstyle=this.isDesktop?"fixforpc-top":"top",this.ani=["slide-top"],this.transClass={position:"fixed",left:0,right:0,backgroundColor:this.bg,borderRadius:this.borderRadius||"0"},e||(this.showPopup=!0,this.showTrans=!0,this.$nextTick((()=>{this.showPoptrans(),this.messageChild&&"message"===this.type&&this.messageChild.timerClose()})))},bottom(e){this.popupstyle="bottom",this.ani=["slide-bottom"],this.transClass={position:"fixed",left:0,right:0,bottom:0,paddingBottom:this.safeAreaInsets+"px",backgroundColor:this.bg,borderRadius:this.borderRadius||"0"},e||this.showPoptrans()},center(e){this.popupstyle="center",this.ani=["zoom-out","fade"],this.transClass={position:"fixed",display:"flex",flexDirection:"column",bottom:0,left:0,right:0,top:0,justifyContent:"center",alignItems:"center",borderRadius:this.borderRadius||"0"},e||this.showPoptrans()},left(e){this.popupstyle="left",this.ani=["slide-left"],this.transClass={position:"fixed",left:0,bottom:0,top:0,backgroundColor:this.bg,borderRadius:this.borderRadius||"0",display:"flex",flexDirection:"column"},e||this.showPoptrans()},right(e){this.popupstyle="right",this.ani=["slide-right"],this.transClass={position:"fixed",bottom:0,right:0,top:0,backgroundColor:this.bg,borderRadius:this.borderRadius||"0",display:"flex",flexDirection:"column"},e||this.showPoptrans()},showPoptrans(){this.$nextTick((()=>{this.showPopup=!0,this.showTrans=!0}))}}};const vi=ie(hi,[["render",function(t,a,n,o,r,s){const l=i(e.resolveDynamicComponent("uni-transition"),pi);return r.showPopup?(e.openBlock(),e.createElementBlock("view",{key:0,class:e.normalizeClass(["uni-popup",[r.popupstyle,s.isDesktop?"fixforpc-z-index":""]])},[e.createElementVNode("view",{onTouchstart:a[1]||(a[1]=(...e)=>s.touchstart&&s.touchstart(...e))},[r.maskShow?(e.openBlock(),e.createBlock(l,{key:"1",name:"mask","mode-class":"fade",styles:r.maskClass,duration:r.duration,show:r.showTrans,onClick:s.onTap},null,8,["styles","duration","show","onClick"])):e.createCommentVNode("",!0),e.createVNode(l,{key:"2","mode-class":r.ani,name:"content",styles:r.transClass,duration:r.duration,show:r.showTrans,onClick:s.onTap},{default:e.withCtx((()=>[e.createElementVNode("view",{class:e.normalizeClass(["uni-popup__wrapper",[r.popupstyle]]),style:e.normalizeStyle(s.getStyles),onClick:a[0]||(a[0]=(...e)=>s.clear&&s.clear(...e))},[e.renderSlot(t.$slots,"default",{},void 0,!0)],6)])),_:3},8,["mode-class","styles","duration","show","onClick"])],32)],2)):e.createCommentVNode("",!0)}],["__scopeId","data-v-73d3b141"]]),gi=(e,t={})=>A.post("/api/admin/consultant/quote/add",e,t),fi=(e,t={})=>A.post("/api/admin/listener/quote/add",e,t),yi=(e,t={})=>A.get(`/api/admin/consultant/quote/list?userId=${e}`,{},t),_i=(e,t={})=>A.get(`/api/admin/listener/quote/list?userId=${e}`,{},t),ki=(e,t={})=>A.post(`/api/admin/listener/quote/delete?id=${e}`,{},t),Ei=(e,t={})=>A.post(`/api/admin/consultant/quote/delete?id=${e}`,{},t),xi=(e,t={})=>A.get("/api/operation-settings/page?current=1&size=10",e,t),Ni=(e,t={})=>A.post("/api/admin/listener/quote/update",e,t),wi=(e,t={})=>A.post("/api/admin/consultant/quote/update",e,t),Ci=(e,t={})=>A.get("/api/comment/comment/getCommentByTargetUserId",e,t),Mi=ie({__name:"Customer-Service",setup(t,{expose:a}){const n=e.ref();(async()=>{const{data:e}=await xi(),{customerServiceQrcode:t}=e.records[0];n.value=t})();const r=e.ref(null),s=()=>{r.value.close()};a({open:()=>{r.value.open("bottom")}});const l=async()=>{try{const e=await uni.downloadFile({url:n.value});if(200!==e.statusCode)throw new Error("下载失败");await uni.saveImageToPhotosAlbum({filePath:e.tempFilePath}),uni.showToast({title:"保存成功",icon:"success"})}catch(e){o("error","at components/Customer-Service.vue:50","保存失败:",e),uni.showToast({title:"保存失败",icon:"none"})}};return(t,a)=>{const o=i(e.resolveDynamicComponent("uni-icons"),re),c=i(e.resolveDynamicComponent("uni-popup"),vi);return e.openBlock(),e.createBlock(c,{ref_key:"popup",ref:r,type:"message"},{default:e.withCtx((()=>[e.createElementVNode("view",{class:"popup-content"},[e.createVNode(o,{type:"closeempty",size:"20",color:"#A6A6A6",class:"close-icon",onClick:s}),e.createElementVNode("view",{class:"title"},"您的专属客服"),e.createElementVNode("image",{src:n.value,onLongpress:l},null,40,["src"]),e.createElementVNode("view",{class:"save-code"},[e.createVNode(o,{type:"download",size:"25",color:"#35CA95"}),e.createElementVNode("view",null,[e.createElementVNode("text",null,"长按保存"),e.createTextVNode("到相册")])])])])),_:1},512)}}},[["__scopeId","data-v-053fe9b5"]]),Si={__name:"index",setup(t){e.useCssVars((e=>({"2c863fcb":s.value})));const a=ae(),n=e.ref(0),o=e.ref(0),r=e.ref(!1),s=e.ref(a.statusBarHeight+"rpx"),l=e.ref([]),c=e.ref([{id:1,name:"困扰",open:!1},{id:2,name:"城市",open:!1},{id:3,name:"价格",open:!1},{id:4,name:"排序",open:!1},{id:5,name:"筛选",open:!1}]),u=e.ref(null),d=()=>{u.value.open()},p=e.ref(!1),h=e=>{const{masterGallery:t}=e;return t?JSON.parse(t)[0].url:"/static/consult/user.png"},v=e.reactive({listParams:{current:1,size:10},list:[]}),g=e.ref({serviceTypes:[],city:""}),f=()=>{r.value=!1},y=()=>{p.value=!0},_=()=>{p.value=!1,n.value=0},k=e.getCurrentInstance(),E=null==k?void 0:k.proxy,x=e.ref(0),N=e.ref(null);e.ref("");const w=e.ref(""),C=e=>{w.value=e,r.value=!0},M=e=>{x.value=e.detail.scrollTop};e.watch(r,(()=>{r.value||(w.value="")}));const S=e.ref({current:1,size:10,consultantName:""});m((()=>{v.listParams.current+=1,I()}));const I=async()=>{let e={...v.listParams,...g.value,params:S.value};const t=await Ho(e);v.list=[...v.list,...t.data.records]},T=e.ref(null),D=e.ref([]),b=e.ref([]);return e.onMounted((()=>{o.value=a.statusBarHeight+88,I(),(async()=>{const e=((await ii()).data||[]).map((e=>({id:e.id,name:e.name,children:JSON.parse(e.children),spread:!1})));D.value=e})(),(async()=>{const e=((await U()).data||[]).map(((e,t)=>({id:t+1,name:e.name,children:JSON.parse(e.cities)})));b.value=e})(),(async()=>{let e=await si();l.value=e.data})()})),(t,a)=>{const s=i(e.resolveDynamicComponent("uni-search-bar"),xe),m=i(e.resolveDynamicComponent("uni-icons"),re),g=i(e.resolveDynamicComponent("u-sticky"),Ne);return e.openBlock(),e.createElementBlock("view",{class:"consult-box"},[e.createElementVNode("scroll-view",{class:"scroll-content","scroll-y":"","scroll-top":n.value,"show-scrollbar":!1,onScroll:M},[e.createElementVNode("view",{class:e.normalizeClass(["search-content",x.value>15?"activeClass":""])},[e.createElementVNode("view",{class:"search"},[e.createVNode(s,{modelValue:S.value.consultantName,"onUpdate:modelValue":a[0]||(a[0]=e=>S.value.consultantName=e),radius:"100",placeholder:"请输入咨询师姓名",clearButton:"auto",cancelButton:"none",onBlur:a[1]||(a[1]=e=>{I()})},null,8,["modelValue"])]),e.createElementVNode("view",{class:"contact",onClick:d},[e.createElementVNode("image",{src:we}),e.createElementVNode("text",null,"客服")])],2),e.createElementVNode("view",{class:"operate-box"},[e.createElementVNode("view",{class:"uni-margin-wrap"},[e.createElementVNode("swiper",{class:"swiper",circular:"","indicator-dots":!0,autoplay:!0,interval:5e3,duration:500},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.value,((t,a)=>(e.openBlock(),e.createElementBlock("swiper-item",{key:a,class:"swiper-item"},[e.createElementVNode("view",{class:"swiper-item uni-bg-red"},[e.createElementVNode("image",{src:t.image,mode:"aspectFill",class:"img"},null,8,["src"])])])))),128))])])]),e.createVNode(g,{"offset-top":o.value,onFixed:y,onUnfixed:_},{default:e.withCtx((()=>[e.createElementVNode("view",{id:"stickyBox"},[e.createElementVNode("view",{class:"filter-box"},[e.createElementVNode("view",{class:"filter-box-1"},[e.createElementVNode("view",{class:"filter-box-1-1"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"filter-box-1-item",key:a,style:e.normalizeStyle({color:w.value==t.id?"#ffa867":"black"}),onClick:a=>(async t=>{if(N.value=t,p.value)C(t);else{await e.nextTick();const a=uni.createSelectorQuery().in(E);a.select("#stickyBox").boundingClientRect(),a.selectViewport().scrollOffset(),a.exec((e=>{if(!e||!e[0])return;const a=e[0].top,o=x.value;n.value=o+a-90,setTimeout((()=>{C(t)}),300)}))}})(t.id)},[e.createTextVNode(e.toDisplayString(t.name)+" ",1),5!=t.id?(e.openBlock(),e.createBlock(m,{key:0,type:w.value==t.id?"up":"down",color:w.value==t.id?"#ffa867":"",size:"12",class:"icon"},null,8,["type","color"])):e.createCommentVNode("",!0),5==t.id?(e.openBlock(),e.createElementBlock("image",{key:1,src:Ce,style:{width:"25rpx",height:"25rpx"},class:"filter icon"})):e.createCommentVNode("",!0)],12,["onClick"])))),128))])])])])])),_:1},8,["offset-top"]),e.createElementVNode("view",{class:"doctor-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(v.list,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"doctor-item",key:a,onClick:e=>(e=>{const{id:t,userId:a}=e;uni.navigateTo({url:`/pages/confide/detail?id=${t}&userId=${a}`})})(t)},[e.createElementVNode("view",{class:"doctor-auture"},[e.createElementVNode("image",{src:h(t)},null,8,["src"])]),e.createElementVNode("view",{class:"doctor-info"},[e.createElementVNode("view",{class:"doctor-info-1"},[e.createElementVNode("view",{class:"name"},e.toDisplayString(t.name),1)]),e.createElementVNode("view",{class:"doctor-info-1"},[e.createElementVNode("view",{class:"info"},[e.createElementVNode("text",{class:"age item"},e.toDisplayString(e.unref(Zo)(t.birthdate)),1),e.createElementVNode("text",{class:"line"}),e.createElementVNode("text",{class:"edu item"},e.toDisplayString(t.education)+"硕士",1),e.createElementVNode("text",{class:"line"}),e.createElementVNode("text",{class:"star item"},e.toDisplayString(t.constellation||"水瓶座"),1)])]),e.createElementVNode("view",{class:"doctor-info-1"},[e.createElementVNode("view",{class:"exprise"},[e.createElementVNode("text",null,e.toDisplayString(t.commentCount),1),e.createTextVNode(" 服务人次 "),e.createElementVNode("text",null,e.toDisplayString(t.platformHours)+"+",1),e.createTextVNode(" 小时经验 "),e.createElementVNode("text",null,e.toDisplayString(t.rating),1),e.createTextVNode(" 评分 ")])]),e.createElementVNode("view",{class:"doctor-info-1"},[e.createElementVNode("view",{class:"point-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.serviceTypes,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"point-item",key:a},e.toDisplayString(t),1)))),128))])]),e.createElementVNode("view",{class:"doctor-info-1"},[t.price?(e.openBlock(),e.createElementBlock("view",{key:0,class:"price"},[t.price?(e.openBlock(),e.createElementBlock("text",{key:0,class:"unit"},"¥")):e.createCommentVNode("",!0),e.createTextVNode(e.toDisplayString(t.price),1)])):e.createCommentVNode("",!0),t.quoteList[0]?(e.openBlock(),e.createElementBlock("view",{key:1,class:"price"},[e.createElementVNode("text",null,e.toDisplayString(t.quoteList[0].quoteAmount||0),1),e.createElementVNode("text",{class:"unit",style:{color:"rgba(0, 0, 0, 0.5)"}}," /分钟起")])):e.createCommentVNode("",!0),e.createElementVNode("view",{class:"address"},[e.createElementVNode("image",{src:Me}),e.createElementVNode("text",null,e.toDisplayString(t.address),1)])])]),e.createElementVNode("view",{class:"server-box"},[e.createElementVNode("view",{class:"server-status"},"服务中")])],8,["onClick"])))),128))])],40,["scroll-top"]),r.value?(e.openBlock(),e.createElementBlock("view",{key:0,class:"mask",onClick:f},[e.createElementVNode("view",{class:"filter-popup",onClick:a[4]||(a[4]=e.withModifiers((()=>{}),["stop"]))},[e.createElementVNode("view",{class:"popup-body"},[e.createVNode(zo,{ref_key:"listFiltering",ref:T,colorType:2,serviceTypes:D.value,confusionList:b.value,layoutType:N.value},null,8,["serviceTypes","confusionList","layoutType"])]),e.createElementVNode("view",{class:"popup-footer"},[e.createElementVNode("button",{class:"btn btn-reset",size:"mini",onClick:a[2]||(a[2]=e=>(S.value={current:1,size:10,consultantName:""},v.list=[],r.value=!1,void I()))}," 重置 "),e.createElementVNode("button",{class:"btn btn-confirm",size:"mini",onClick:a[3]||(a[3]=e=>(()=>{v.list=[];const{distressId:e,city:t,currentRange:a,sortType:n,resultObj:o}=T.value;1===N.value&&(S.value.distressId=e),2===N.value&&(S.value.city=t),3===N.value&&(S.value={...a}),4===N.value&&(S.value.sortType=n),5===N.value&&(S.value={...o}),r.value=!1,I()})())}," 完成 ")])])])):e.createCommentVNode("",!0),e.createVNode(Mi,{ref_key:"serviceRef",ref:u},null,512)])}}},Ii=ie(Si,[["__scopeId","data-v-537c7015"]]);const Ti=e=>"number"==typeof e?e+"px":e;const Di=ie({name:"UniNavBar",components:{statusBar:ie({name:"UniStatusBar",data:()=>({statusBarHeight:uni.getSystemInfoSync().statusBarHeight+"px"})},[["render",function(t,a,n,o,i,r){return e.openBlock(),e.createElementBlock("view",{style:e.normalizeStyle({height:i.statusBarHeight}),class:"uni-status-bar"},[e.renderSlot(t.$slots,"default",{},void 0,!0)],4)}],["__scopeId","data-v-0ec02cab"]])},emits:["clickLeft","clickRight","clickTitle"],props:{dark:{type:Boolean,default:!1},title:{type:String,default:""},leftText:{type:String,default:""},rightText:{type:String,default:""},leftIcon:{type:String,default:""},rightIcon:{type:String,default:""},fixed:{type:[Boolean,String],default:!1},color:{type:String,default:""},backgroundColor:{type:String,default:""},statusBar:{type:[Boolean,String],default:!1},shadow:{type:[Boolean,String],default:!1},border:{type:[Boolean,String],default:!0},height:{type:[Number,String],default:44},leftWidth:{type:[Number,String],default:60},rightWidth:{type:[Number,String],default:60},stat:{type:[Boolean,String],default:""}},computed:{themeBgColor(){return this.dark?this.backgroundColor?this.backgroundColor:this.dark?"#333":"#FFF":this.backgroundColor||"#FFF"},themeColor(){return this.dark?this.color?this.color:this.dark?"#fff":"#333":this.color||"#333"},navbarHeight(){return Ti(this.height)},leftIconWidth(){return Ti(this.leftWidth)},rightIconWidth(){return Ti(this.rightWidth)}},mounted(){uni.report&&this.stat&&""!==this.title&&uni.report("title",this.title)},methods:{onClickLeft(){this.$emit("clickLeft")},onClickRight(){this.$emit("clickRight")},onClickTitle(){this.$emit("clickTitle")}}},[["render",function(t,a,n,o,r,s){const l=e.resolveComponent("status-bar"),c=i(e.resolveDynamicComponent("uni-icons"),re);return e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["uni-navbar",{"uni-dark":n.dark,"uni-nvue-fixed":n.fixed}])},[e.createElementVNode("view",{class:e.normalizeClass(["uni-navbar__content",{"uni-navbar--fixed":n.fixed,"uni-navbar--shadow":n.shadow,"uni-navbar--border":n.border}]),style:e.normalizeStyle({"background-color":s.themeBgColor,"border-bottom-color":s.themeColor})},[n.statusBar?(e.openBlock(),e.createBlock(l,{key:0})):e.createCommentVNode("",!0),e.createElementVNode("view",{style:e.normalizeStyle({color:s.themeColor,backgroundColor:s.themeBgColor,height:s.navbarHeight}),class:"uni-navbar__header"},[e.createElementVNode("view",{onClick:a[0]||(a[0]=(...e)=>s.onClickLeft&&s.onClickLeft(...e)),class:"uni-navbar__header-btns uni-navbar__header-btns-left",style:e.normalizeStyle({width:s.leftIconWidth})},[e.renderSlot(t.$slots,"left",{},(()=>[n.leftIcon.length>0?(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-navbar__content_view"},[e.createVNode(c,{color:s.themeColor,type:n.leftIcon,size:"20"},null,8,["color","type"])])):e.createCommentVNode("",!0),n.leftText.length?(e.openBlock(),e.createElementBlock("view",{key:1,class:e.normalizeClass([{"uni-navbar-btn-icon-left":!n.leftIcon.length>0},"uni-navbar-btn-text"])},[e.createElementVNode("text",{style:e.normalizeStyle({color:s.themeColor,fontSize:"12px"})},e.toDisplayString(n.leftText),5)],2)):e.createCommentVNode("",!0)]),!0)],4),e.createElementVNode("view",{class:"uni-navbar__header-container",onClick:a[1]||(a[1]=(...e)=>s.onClickTitle&&s.onClickTitle(...e))},[e.renderSlot(t.$slots,"default",{},(()=>[n.title.length>0?(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-navbar__header-container-inner"},[e.createElementVNode("text",{class:"uni-nav-bar-text uni-ellipsis-1",style:e.normalizeStyle({color:s.themeColor})},e.toDisplayString(n.title),5)])):e.createCommentVNode("",!0)]),!0)]),e.createElementVNode("view",{onClick:a[2]||(a[2]=(...e)=>s.onClickRight&&s.onClickRight(...e)),class:"uni-navbar__header-btns uni-navbar__header-btns-right",style:e.normalizeStyle({width:s.rightIconWidth})},[e.renderSlot(t.$slots,"right",{},(()=>[n.rightIcon.length?(e.openBlock(),e.createElementBlock("view",{key:0},[e.createVNode(c,{color:s.themeColor,type:n.rightIcon,size:"22"},null,8,["color","type"])])):e.createCommentVNode("",!0),n.rightText.length&&!n.rightIcon.length?(e.openBlock(),e.createElementBlock("view",{key:1,class:"uni-navbar-btn-text"},[e.createElementVNode("text",{class:"uni-nav-bar-right-text",style:e.normalizeStyle({color:s.themeColor})},e.toDisplayString(n.rightText),5)])):e.createCommentVNode("",!0)]),!0)],4)],4)],6),n.fixed?(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-navbar__placeholder"},[n.statusBar?(e.openBlock(),e.createBlock(l,{key:0})):e.createCommentVNode("",!0),e.createElementVNode("view",{class:"uni-navbar__placeholder-view",style:e.normalizeStyle({height:s.navbarHeight})},null,4)])):e.createCommentVNode("",!0)],2)}],["__scopeId","data-v-f8fab7a8"]]);const bi=ie({name:"UniSteps",props:{direction:{type:String,default:"row"},activeColor:{type:String,default:"#2979FF"},deactiveColor:{type:String,default:"#B7BDC6"},active:{type:Number,default:0},activeIcon:{type:String,default:"checkbox-filled"},options:{type:Array,default:()=>[]}},data:()=>({heightArr:[]}),mounted(){if("column"===this.direction){let e=this;uni.createSelectorQuery().in(this).selectAll(".uni-steps__column-text").boundingClientRect((t=>{e.heightArr=t.map((e=>e.height+1))})).exec()}}},[["render",function(t,a,n,o,r,s){const l=i(e.resolveDynamicComponent("uni-icons"),re);return e.openBlock(),e.createElementBlock("view",{class:"uni-steps"},[e.createElementVNode("view",{class:e.normalizeClass(["column"===n.direction?"uni-steps__column":"uni-steps__row"])},[e.createElementVNode("view",{class:e.normalizeClass(["column"===n.direction?"uni-steps__column-text-container":"uni-steps__row-text-container"])},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.options,((t,a)=>(e.openBlock(),e.createElementBlock("view",{key:a,class:e.normalizeClass(["column"===n.direction?"uni-steps__column-text":"uni-steps__row-text"])},[e.createElementVNode("text",{style:e.normalizeStyle({color:a===n.active?n.activeColor:n.deactiveColor}),class:e.normalizeClass(["column"===n.direction?"uni-steps__column-title":"uni-steps__row-title"])},e.toDisplayString(t.title),7),e.createElementVNode("text",{style:e.normalizeStyle({color:n.deactiveColor}),class:e.normalizeClass(["column"===n.direction?"uni-steps__column-desc":"uni-steps__row-desc"])},e.toDisplayString(t.desc),7)],2)))),128))],2),e.createElementVNode("view",{class:e.normalizeClass(["column"===n.direction?"uni-steps__column-container":"uni-steps__row-container"])},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.options,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["column"===n.direction?"uni-steps__column-line-item":"uni-steps__row-line-item"]),key:a,style:e.normalizeStyle({height:"column"===n.direction?r.heightArr[a]+"px":"14px"})},[e.createElementVNode("view",{class:e.normalizeClass(["column"===n.direction?"uni-steps__column-line":"uni-steps__row-line","column"===n.direction?"uni-steps__column-line--before":"uni-steps__row-line--before"]),style:e.normalizeStyle({backgroundColor:a<=n.active&&0!==a?n.activeColor:0===a?"transparent":n.deactiveColor})},null,6),a===n.active?(e.openBlock(),e.createElementBlock("view",{key:0,class:e.normalizeClass(["column"===n.direction?"uni-steps__column-check":"uni-steps__row-check"])},[e.createVNode(l,{color:n.activeColor,type:n.activeIcon,size:"14"},null,8,["color","type"])],2)):(e.openBlock(),e.createElementBlock("view",{key:1,class:e.normalizeClass(["column"===n.direction?"uni-steps__column-circle":"uni-steps__row-circle"]),style:e.normalizeStyle({backgroundColor:a<n.active?n.activeColor:n.deactiveColor})},null,6)),e.createElementVNode("view",{class:e.normalizeClass(["column"===n.direction?"uni-steps__column-line":"uni-steps__row-line","column"===n.direction?"uni-steps__column-line--after":"uni-steps__row-line--after"]),style:e.normalizeStyle({backgroundColor:a<n.active&&a!==n.options.length-1?n.activeColor:a===n.options.length-1?"transparent":n.deactiveColor})},null,6)],6)))),128))],2)],2)])}],["__scopeId","data-v-a02cde39"]]),Vi={name:"UniRate",props:{isFill:{type:[Boolean,String],default:!0},color:{type:String,default:"#ececec"},activeColor:{type:String,default:"#ffca3e"},disabledColor:{type:String,default:"#c0c0c0"},size:{type:[Number,String],default:24},value:{type:[Number,String],default:0},modelValue:{type:[Number,String],default:0},max:{type:[Number,String],default:5},margin:{type:[Number,String],default:0},disabled:{type:[Boolean,String],default:!1},readonly:{type:[Boolean,String],default:!1},allowHalf:{type:[Boolean,String],default:!1},touchable:{type:[Boolean,String],default:!0}},data:()=>({valueSync:"",userMouseFristMove:!0,userRated:!1,userLastRate:1}),watch:{value(e){this.valueSync=Number(e)},modelValue(e){this.valueSync=Number(e)}},computed:{stars(){const e=this.valueSync?this.valueSync:0,t=[],a=Math.floor(e),n=Math.ceil(e);for(let o=0;o<this.max;o++)a>o?t.push({activeWitch:"100%"}):n-1===o?t.push({activeWitch:100*(e-a)+"%"}):t.push({activeWitch:"0"});return t},marginNumber(){return Number(this.margin)}},created(){this.valueSync=Number(this.value||this.modelValue),this._rateBoxLeft=0,this._oldValue=null},mounted(){setTimeout((()=>{this._getSize()}),100)},methods:{touchstart(e){if(this.readonly||this.disabled)return;const{clientX:t,screenX:a}=e.changedTouches[0];this._getRateCount(t||a)},touchmove(e){if(this.readonly||this.disabled||!this.touchable)return;const{clientX:t,screenX:a}=e.changedTouches[0];this._getRateCount(t||a)},mousedown(e){},mousemove(e){},mouseleave(e){},_getRateCount(e){this._getSize();const t=Number(this.size);if(isNaN(t))return new Error("size 属性只能设置为数字");const a=e-this._rateBoxLeft;let n=parseInt(a/(t+this.marginNumber));n=n<0?0:n,n=n>this.max?this.max:n;const o=parseInt(a-(t+this.marginNumber)*n);let i=0;(this._oldValue!==n||this.PC)&&(this._oldValue=n,i=this.allowHalf?o>t/2?n+1:n+.5:n+1,i=Math.max(.5,Math.min(i,this.max)),this.valueSync=i,this._onChange())},_onChange(){this.$emit("input",this.valueSync),this.$emit("update:modelValue",this.valueSync),this.$emit("change",{value:this.valueSync})},_getSize(){uni.createSelectorQuery().in(this).select(".uni-rate").boundingClientRect().exec((e=>{e&&(this._rateBoxLeft=e[0].left)}))}}};const Ai=ie(Vi,[["render",function(t,a,n,o,r,s){const l=i(e.resolveDynamicComponent("uni-icons"),re);return e.openBlock(),e.createElementBlock("view",null,[e.createElementVNode("view",{ref:"uni-rate",class:"uni-rate"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.stars,((t,o)=>(e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["uni-rate__icon",{"uni-cursor-not-allowed":n.disabled}]),style:e.normalizeStyle({"margin-right":s.marginNumber+"px"}),key:o,onTouchstart:a[0]||(a[0]=e.withModifiers(((...e)=>s.touchstart&&s.touchstart(...e)),["stop"])),onTouchmove:a[1]||(a[1]=e.withModifiers(((...e)=>s.touchmove&&s.touchmove(...e)),["stop"])),onMousedown:a[2]||(a[2]=e.withModifiers(((...e)=>s.mousedown&&s.mousedown(...e)),["stop"])),onMousemove:a[3]||(a[3]=e.withModifiers(((...e)=>s.mousemove&&s.mousemove(...e)),["stop"])),onMouseleave:a[4]||(a[4]=(...e)=>s.mouseleave&&s.mouseleave(...e))},[e.createVNode(l,{color:n.color,size:n.size,type:n.isFill?"star-filled":"star"},null,8,["color","size","type"]),e.createElementVNode("view",{style:e.normalizeStyle({width:t.activeWitch}),class:"uni-rate__icon-on"},[e.createVNode(l,{color:n.disabled?n.disabledColor:n.activeColor,size:n.size,type:"star-filled"},null,8,["color","size"])],4)],38)))),128))],512)])}],["__scopeId","data-v-1fbe22c2"]]),Li="/static/common/back_circle.png",Ri="/static/confide/share.png",Oi="/static/common/share_circle.png",Bi="/static/my/profile.png";const Pi=ie({data:()=>({isHide:!0,textHeight:0,lineHeight:1,placeholder:""}),props:{line:{type:[Number,String],default:1},dt:{type:[String],default:""},enableButton:{type:Boolean,default:!0},expandText:{type:String,default:"展开"},foldHint:{type:String,default:"收起"}},watch:{dt(){let e=this;setTimeout((()=>{uni.createSelectorQuery().in(e).select(".content").boundingClientRect((t=>{e.textHeight=t.height})).exec()}),100)}},mounted(){if(this.enableButton){let e=uni.createSelectorQuery().in(this);e.select(".content").boundingClientRect((e=>{this.textHeight=e.height})).exec(),e.select(".placeholder").boundingClientRect((e=>{this.lineHeight=e.height})).exec()}this.placeholder=""},computed:{lines(){return this.enableButton?Math.floor(this.textHeight>0&&this.lineHeight>0?this.textHeight/this.lineHeight:0):this.line}}},[["render",function(t,a,n,o,i,r){return e.openBlock(),e.createElementBlock("view",null,[i.isHide?(e.openBlock(),e.createElementBlock("view",{key:0,style:{position:"relative"}},[e.createElementVNode("view",{class:"dt-content",style:e.normalizeStyle("-webkit-line-clamp:"+n.line)},[e.createElementVNode("text",{class:"content"},[e.renderSlot(t.$slots,"default",{},(()=>[e.createTextVNode(e.toDisplayString(n.dt?n.dt:""),1)]),!0)])],4),n.enableButton&&r.lines>n.line?(e.openBlock(),e.createElementBlock("view",{key:0,class:"button-show",onClick:a[0]||(a[0]=e=>i.isHide=!1)},[e.createElementVNode("text",{style:{color:"#35CA95"}},e.toDisplayString(n.expandText),1)])):e.createCommentVNode("",!0)])):(e.openBlock(),e.createElementBlock("view",{key:1},[e.createElementVNode("view",null,[e.createElementVNode("text",{class:"content"},[e.renderSlot(t.$slots,"default",{},(()=>[e.createTextVNode(e.toDisplayString(n.dt?n.dt:""),1)]),!0)])]),n.foldHint?(e.openBlock(),e.createElementBlock("view",{key:0,class:"fold-hint"},[e.createElementVNode("view",{onClick:a[1]||(a[1]=e=>i.isHide=!0)},e.toDisplayString(n.foldHint),1)])):e.createCommentVNode("",!0)])),e.createElementVNode("view",null,[e.createElementVNode("text",{class:"placeholder"},e.toDisplayString(i.placeholder),1)])])}],["__scopeId","data-v-c6b8a1f8"]]),Ui=ie({__name:"detail",setup(t){e.useCssVars((e=>({"0c505c04":n.value})));const a=ae(),n=e.ref(a.statusBarHeight+"px"),r=e.ref(0),s=e.ref(0),c=e.ref(!1),u=e.ref(),d=e.ref("832rpx"),m=e.getCurrentInstance(),p=e.ref(0),h=e.ref("");l((e=>{h.value=e.userId,M(e.id),N(e.userId),k(e.userId)}));const v=()=>{d.value="none"},g=()=>{uni.navigateBack({delta:1})},f=e.ref([{label:"服务",id:"tab-1",class:"tab6"},{label:"介绍",id:"tab-2",class:"tab7"},{label:"经历",id:"tab-3",class:"tab8"},{label:"擅长",id:"tab-4",class:"tab9"},{label:"评价(0)",id:"tab-5",class:"tab10"}]),y=e.ref([]),_=e.ref([]),k=async e=>{let{data:t}=await Ci({targetUserId:e,page:1,pageSize:10});_.value=t,f.value[4].label=`评价(${t.total})`},E=e.ref(y.value.length),x=()=>{uni.navigateTo({url:`/pages/evaluate/evaluate?userId=${h.value}`})},N=async e=>{let t=await((e,t={})=>A.post("/api/listener/getListenerByUserId",e,t))({userId:e});u.value=t.data,o("log","at pages/confide/detail.vue:467",t.data),y.value=Jo(t.data.careerList)},w=e.ref({}),C=e.ref({}),M=async e=>{try{const t=await((e,t={})=>A.get(`/api/listener/commentInfo?id=${e.id}`,e,t))({id:e}),a=await((e,t={})=>A.get("/api/listener/commentList",e,t))({id:e,page:1,count:10}),n=await Ko({id:e});w.value=t.data,C.value=n.data,o("log","at pages/confide/detail.vue:481",t,a,n,"info")}catch(Ft){}},S=()=>{const{userId:e,name:t,avatar:a}=u.value;uni.navigateTo({url:`/pages/payment/payment-records?id=${u.value.id}&userId=${e}&name=${t}&avatar=${a}`})},I=()=>{const{userId:e,name:t,avatar:a}=u.value;uni.navigateTo({url:`/pages/message/private-chat?to=${e}&name=${t}&avatar=${a}`})};return(t,a)=>{const n=i(e.resolveDynamicComponent("uni-icons"),re),o=i(e.resolveDynamicComponent("uni-nav-bar"),Di),l=i(e.resolveDynamicComponent("uni-steps"),bi),h=i(e.resolveDynamicComponent("uni-rate"),Ai);return e.openBlock(),e.createElementBlock("view",{class:"consult-detail-box"},[e.createElementVNode("scroll-view",{"scroll-y":"",class:"scroll-content","scroll-top":p.value,"show-scrollbar":!1,"scroll-with-animation":"",id:"scrollView"},[e.createVNode(o,{backgroundColor:r.value>15?"#fff":"transparent",border:!1,title:r.value>15?u.value.name:"",class:"header-bar",statusBar:!0,fixed:""},{left:e.withCtx((()=>[e.createElementVNode("view",{class:"right"},[r.value>15?(e.openBlock(),e.createBlock(n,{key:0,type:"left",size:"24",onClick:g})):(e.openBlock(),e.createElementBlock("image",{key:1,onClick:g,src:Li,style:{width:"56rpx",height:"56rpx"}}))])])),right:e.withCtx((()=>[e.createElementVNode("view",{class:"right"},[r.value>15?(e.openBlock(),e.createElementBlock("image",{key:0,src:Ri,style:{width:"40rpx",height:"40rpx"}})):(e.openBlock(),e.createElementBlock("image",{key:1,src:Oi,style:{width:"56rpx",height:"56rpx"}}))])])),_:1},8,["backgroundColor","title"]),e.createElementVNode("view",{class:"consult-detail-content"},[e.createElementVNode("view",{class:"swiper-content"},[e.createElementVNode("view",{class:"uni-margin-wrap"},[e.createElementVNode("swiper",{class:"swiper",circular:"","indicator-dots":!0,autoplay:!0,interval:5e3,duration:500},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(JSON.parse(u.value.masterGallery),((t,a)=>(e.openBlock(),e.createElementBlock("swiper-item",{key:a,class:"swiper-item"},[e.createElementVNode("image",{src:t.url,mode:"aspectFill",style:{width:"100%",height:"100%"}},null,8,["src"])])))),128))])])]),e.createElementVNode("view",{class:"consult-detail-info"},[e.createElementVNode("view",{class:"detail-item-line-1"},[e.createElementVNode("view",{class:"name"},[e.createElementVNode("text",{class:"name-a"},e.toDisplayString(u.value.name),1),e.createElementVNode("text",{class:"name-b"},e.toDisplayString(u.value.major),1)]),e.createElementVNode("view",{class:"money"},[e.createElementVNode("image",{src:"/static/common/yellow-follow.png",class:"img"}),e.createElementVNode("text",{class:"txt"},"关注")])]),e.createElementVNode("view",{class:"detail-item-line-2"},[e.createElementVNode("text",null,e.toDisplayString(u.value.address)+" | "+e.toDisplayString(e.unref(Zo)(u.value.birthdate))+" | "+e.toDisplayString(u.value.constellation),1)]),e.createElementVNode("view",{class:"detail-item-line-3"},e.toDisplayString(u.value.signature),1),e.createElementVNode("view",{class:"detail-item-line-4"},[e.createElementVNode("view",{class:"content"},[e.createElementVNode("view",{class:"list"},[e.createElementVNode("view",{class:"item"},[e.createElementVNode("view",null,[e.createElementVNode("text",{class:"num"},e.toDisplayString(C.value.retainedCustomers),1),e.createElementVNode("text",{class:"unit"},"次")]),e.createElementVNode("view",{class:"txt"},"服务人次")]),e.createElementVNode("view",{class:"item"},[e.createElementVNode("view",null,[e.createElementVNode("text",{class:"num"},e.toDisplayString(C.value.listenHours),1),e.createElementVNode("text",{class:"unit"},"小时")]),e.createElementVNode("view",{class:"txt"},"倾听时长")]),e.createElementVNode("view",{class:"item"},[e.createElementVNode("view",null,[e.createElementVNode("text",{class:"num"},e.toDisplayString(C.value.retainedCustomers),1),e.createElementVNode("text",{class:"unit"},"次")]),e.createElementVNode("view",{class:"txt"},"回头客")]),e.createElementVNode("view",{class:"item"},[e.createElementVNode("view",null,[e.createElementVNode("text",{class:"num"},e.toDisplayString(C.value.rating),1),e.createElementVNode("text",{class:"unit"},"分")]),e.createElementVNode("view",{class:"txt"},"综合评分")])]),e.createElementVNode("view",{class:"tips"},[e.createElementVNode("image",{src:"/static/common/follwer-yellow.png"}),e.createElementVNode("text",{class:"txt"},"服务经验")])])]),e.createElementVNode("view",{class:e.normalizeClass(["detail-item-line-5",c.value?"tabsFixed":""]),id:"tabs"},[e.createElementVNode("view",{class:"tabs"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(f.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["tab-item",s.value==a?"active":""]),key:a,onClick:t=>(async t=>{await e.nextTick(),uni.createSelectorQuery().in(m).select(`#${t}`).boundingClientRect().select("#scrollView").boundingClientRect().exec((e=>{const t=e[0],a=e[1];t&&a&&(p.value=t.top-a.top)}))})(`tab-${a+1}`)},e.toDisplayString(t.label),11,["onClick"])))),128))])],2),e.createElementVNode("view",{class:"detail-item-line-6 tab5",id:"tab-1"},[e.createElementVNode("view",{class:"tab5-content"},[e.createElementVNode("view",{class:"info"},[e.createElementVNode("view",{class:"voice-box"},[e.createElementVNode("view",{class:"voice-info"},[e.createElementVNode("view",{class:"title"},[e.createTextVNode("语音咨询"),e.createElementVNode("text",{class:"money"},"250"),e.createElementVNode("text",{class:"unit"},"元/50分钟")]),e.createElementVNode("view",{class:"txt"},"仅提供语音消息，咨询效果有一定影响")]),e.createElementVNode("view",{class:"voice-img"},[e.createElementVNode("image",{src:"/static/common/voice.png",class:"img"})])]),e.createElementVNode("view",{class:"voice-box text-box"},[e.createElementVNode("view",{class:"voice-info"},[e.createElementVNode("view",{class:"title"},[e.createTextVNode("文字咨询"),e.createElementVNode("text",{class:"money"},"250"),e.createElementVNode("text",{class:"unit"},"元/50分钟")]),e.createElementVNode("view",{class:"txt"},"擅长个人成长、情绪管理")]),e.createElementVNode("view",{class:"voice-img"},[e.createElementVNode("image",{src:"/static/common/message.png",class:"img"})])])])])]),e.createElementVNode("view",{class:"detail-item-line-6",id:"tab-2"},[e.createElementVNode("view",{class:"content"},[e.createElementVNode("view",{class:"title"},"个人介绍"),e.createElementVNode("view",{class:"info"},e.toDisplayString(u.value.profile),1)])]),e.createElementVNode("view",{class:"detail-item-line-6 detail-item-line-8",id:"tab-3"},[e.createElementVNode("view",{class:"content"},[e.createElementVNode("view",{class:"info",style:e.normalizeStyle({"max-height":d.value,overflow:"hidden"})},[u.value.certificateList?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(u.value.certificateList,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"certificate-detail",key:a},[e.createElementVNode("view",{class:"tag"},"资质"),e.createElementVNode("view",{class:"tag-info"},[e.createElementVNode("view",{class:"tag-title"},e.toDisplayString(t.name),1),e.createElementVNode("view",{class:"certificate-info"},[e.createElementVNode("view",null,"发证时间："+e.toDisplayString(t.date),1),e.createElementVNode("view",null,"证书编号："+e.toDisplayString(t.number),1)])])])))),128)):e.createCommentVNode("",!0),u.value.educationList?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:1},e.renderList(u.value.educationList,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"eduication-detail",key:a},[e.createElementVNode("view",{class:"tag"},"学历"),e.createElementVNode("view",{class:"tag-info"},[e.createElementVNode("view",{class:"tag-title"},e.toDisplayString(t.schoolName),1),e.createElementVNode("view",{class:"eduication-info"},[e.createElementVNode("view"),e.createElementVNode("view",null,"发证时间："+e.toDisplayString(t.startTime),1),e.createElementVNode("view",null,"证书编号："+e.toDisplayString(t.code),1)])])])))),128)):e.createCommentVNode("",!0),e.createElementVNode("view",{class:"step-detail"},[e.createElementVNode("view",{class:"training"},[e.createElementVNode("view",{class:"training-title"},"伦理培训"),e.createElementVNode("view",{class:"training-timer"},e.toDisplayString(y.value.length)+"项培训，累计40小时",1)]),e.createElementVNode("view",{class:"step-box"},[e.createVNode(l,{options:y.value,"active-color":"#EB9516",active:E.value,direction:"column"},null,8,["options","active"])])])],4),e.createElementVNode("view",{class:"more",onClick:v,style:{"background-color":"#fff !important"}},"查看更多")])]),e.createElementVNode("view",{class:"detail-item-line-6 detail-item-line-7",id:"tab-4"},[e.createElementVNode("view",{class:"content"},[e.createElementVNode("view",{class:"title"},"擅长领域"),e.createElementVNode("view",{class:"info"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(u.value.serviceTypes,((t,a)=>(e.openBlock(),e.createElementBlock("view",{style:{display:"flex","flex-direction":"row"},key:a},[e.createTextVNode(e.toDisplayString(t)+" ",1),e.createElementVNode("view",{class:"detail-title"}),e.createElementVNode("view",{class:"detail-content"},"沟通不畅、社交恐惧、社交技巧、人际冲突、不合群、人际边界、社会适应难、信任危机、设有关系")])))),128)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(u.value.serviceTypes,((t,a)=>(e.openBlock(),e.createElementBlock("text",{style:{padding:"5rpx 15rpx","background-color":"bisque","border-radius":"8rpx","margin-right":"10rpx","margin-bottom":"10rpx"}},e.toDisplayString(t),1)))),256))]),e.createElementVNode("view",null,[e.createElementVNode("view",{class:"title"},"擅长疗法"),e.createElementVNode("view",{class:"tags"},[e.createElementVNode("text",{class:"tag-item"},"沙盘疗法"),e.createElementVNode("text",{class:"tag-item"},"心理动力取向")])])])]),e.createElementVNode("view",{class:"detail-item-line-6 detail-item-line-9",id:"tab-5"},[e.createElementVNode("view",{class:"content"},[e.createElementVNode("view",{class:"title"},[e.createElementVNode("view",{class:"txt"},[e.createTextVNode("评价"),e.createElementVNode("text",null,"("+e.toDisplayString(_.value.total)+")",1)]),e.createElementVNode("view",{class:"more",onClick:x},[e.createTextVNode("查看更多真实评价"),e.createVNode(n,{type:"right",size:"12",color:"rgba(0, 0, 0, 0.5)"})])]),e.createElementVNode("view",{class:"info"},[e.createElementVNode("view",{class:"feel-type-box"},[e.createElementVNode("view",{class:"first"},[e.createElementVNode("view",{class:"percent"},[e.createTextVNode("99"),e.createElementVNode("text",{class:"txt"},"%好评率")])]),e.createElementVNode("view",{class:"second"},[e.createElementVNode("view",{class:"second-item"},[e.createElementVNode("text",{class:"txt-1"},"真实评价"),e.createElementVNode("text",{class:"txt-2"},e.toDisplayString(_.value.total)+"条",1)]),e.createElementVNode("view",{class:"second-item"},[e.createElementVNode("text",{class:"txt-1"},"用户推荐"),e.createElementVNode("text",{class:"txt-2"},"100%")])])]),e.createElementVNode("view",{class:"comment-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(_.value.records,((t,a)=>{return e.openBlock(),e.createElementBlock("view",{class:"comment-item",key:t.id},[e.createElementVNode("view",{class:"user-box"},[e.createElementVNode("view",{class:"user-info"},[e.createElementVNode("image",{src:Bi,class:"img"}),e.createElementVNode("text",{class:"txt"},e.toDisplayString(t.nickname),1)]),e.createElementVNode("view",{class:"star"},[e.createVNode(h,{disabled:!0,disabledColor:"#FFC300",value:t.star,size:"12"},null,8,["value"])])]),e.createElementVNode("view",{class:"comment-content"},[e.createVNode(e.unref(Pi),{line:3,expandText:"展开",foldHint:"收起"},{default:e.withCtx((()=>[e.createTextVNode(e.toDisplayString(t.content),1)])),_:2},1024)]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList((n=t.tags,(n??"").trim().split(",").filter((e=>e.trim()))),((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"tags",key:a},[e.createElementVNode("text",{class:"tag-item"},e.toDisplayString(t),1)])))),128)),e.createElementVNode("view",{class:"theme-date"},[e.createElementVNode("view",{class:"theme"},[e.createTextVNode(" 咨询主题："),e.createElementVNode("text",{class:"txt"},"心理压抑")]),e.createElementVNode("view",{class:"date"},e.toDisplayString(t.createTime),1)])]);var n})),128))])])])])])])],8,["scroll-top"]),e.createElementVNode("view",{class:"footer"},[e.createElementVNode("view",{class:"message",onClick:I}," 私信ta "),e.createElementVNode("view",{class:"reservation",onClick:S}," 立即咨询 ")])])}}},[["__scopeId","data-v-0a7f0fca"]]),Gi={__name:"index",setup(t){e.useCssVars((e=>({"3b8f2d12":l.value})));const a=ae(),n=e.ref(0),r=e.ref(0),s=e.ref(!1),l=e.ref(a.statusBarHeight+"rpx"),c=e.ref([]),u=e.ref([{id:1,name:"困扰",open:!1},{id:2,name:"城市",open:!1},{id:3,name:"价格",open:!1},{id:4,name:"排序",open:!1},{id:5,name:"筛选",open:!1}]),d=e.ref(null),p=()=>{d.value.open()},h=e.ref(!1),v=e.reactive({listParams:{current:1,size:10},list:[]}),g=e=>{const{masterGallery:t}=e;return t?JSON.parse(t)[0]:"/static/consult/user.png"},f=e.ref({serviceTypes:[],city:""}),y=()=>{s.value=!1},_=()=>{h.value=!0},k=()=>{h.value=!1,n.value=0},E=e.getCurrentInstance(),x=null==E?void 0:E.proxy,N=e.ref(0),w=e.ref(null);e.ref("");const C=e.ref(""),M=e=>{C.value=e,s.value=!0},S=e=>{N.value=e.detail.scrollTop};e.watch(s,(()=>{s.value||(C.value="")}));const I=e.ref({current:1,size:10,consultantName:""});m((()=>{v.listParams.current+=1,I.value.current=v.listParams.current,T()}));const T=async()=>{let e={...v.listParams,...f.value,params:I.value};o("log","at pages/consult/index.vue:314",e,"params");const t=await ei(e);v.list=[...v.list,...t.data.records]},D=e.ref(null),b=e.ref([]),V=e.ref([]);return e.onMounted((()=>{r.value=a.statusBarHeight+88,T(),(async()=>{const e=((await ii()).data||[]).map((e=>({id:e.id,name:e.name,children:JSON.parse(e.children),spread:!1})));b.value=e})(),(async()=>{const e=((await U()).data||[]).map(((e,t)=>({id:t+1,name:e.name,children:JSON.parse(e.cities)})));V.value=e})(),(async()=>{let e=await si();c.value=e.data})()})),(t,a)=>{const o=i(e.resolveDynamicComponent("uni-search-bar"),xe),l=i(e.resolveDynamicComponent("uni-icons"),re),m=i(e.resolveDynamicComponent("u-sticky"),Ne);return e.openBlock(),e.createElementBlock("view",{class:"consult-box"},[e.createElementVNode("scroll-view",{class:"scroll-content","scroll-y":"","scroll-top":n.value,"show-scrollbar":!1,onScroll:S},[e.createElementVNode("view",{class:e.normalizeClass(["search-content",N.value>15?"activeClass":""])},[e.createElementVNode("view",{class:"search"},[e.createVNode(o,{modelValue:I.value.consultantName,"onUpdate:modelValue":a[0]||(a[0]=e=>I.value.consultantName=e),radius:"100",placeholder:"请输入咨询师姓名",clearButton:"auto",cancelButton:"none",onBlur:a[1]||(a[1]=e=>{T()})},null,8,["modelValue"])]),e.createElementVNode("view",{class:"contact",onClick:p},[e.createElementVNode("image",{src:we}),e.createElementVNode("text",null,"客服")])],2),e.createElementVNode("view",{class:"operate-box"},[e.createElementVNode("view",{class:"uni-margin-wrap"},[e.createElementVNode("swiper",{class:"swiper",circular:"","indicator-dots":!0,autoplay:!0,interval:5e3,duration:500},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.value,((t,a)=>(e.openBlock(),e.createElementBlock("swiper-item",{key:a,class:"swiper-item"},[e.createElementVNode("view",{class:"swiper-item uni-bg-red"},[e.createElementVNode("image",{src:t.image,mode:"aspectFill",class:"img"},null,8,["src"])])])))),128))])])]),e.createVNode(m,{"offset-top":r.value,onFixed:_,onUnfixed:k},{default:e.withCtx((()=>[e.createElementVNode("view",{id:"stickyBox"},[e.createElementVNode("view",{class:"filter-box"},[e.createElementVNode("view",{class:"filter-box-1"},[e.createElementVNode("view",{class:"filter-box-1-1"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(u.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"filter-box-1-item",key:a,style:e.normalizeStyle({color:C.value==t.id?"#35C996":"black"}),onClick:a=>(async t=>{if(w.value=t,h.value)M(t);else{await e.nextTick();const a=uni.createSelectorQuery().in(x);a.select("#stickyBox").boundingClientRect(),a.selectViewport().scrollOffset(),a.exec((e=>{if(!e||!e[0])return;const a=e[0].top,o=N.value;n.value=o+a-65,setTimeout((()=>{M(t)}),300)}))}})(t.id)},[e.createTextVNode(e.toDisplayString(t.name)+" ",1),5!=t.id?(e.openBlock(),e.createBlock(l,{key:0,type:C.value==t.id?"up":"down",color:C.value==t.id?"#35C996":"",size:"12",class:"icon"},null,8,["type","color"])):e.createCommentVNode("",!0),5==t.id?(e.openBlock(),e.createElementBlock("image",{key:1,src:Ce,style:{width:"25rpx",height:"25rpx"},class:"filter icon"})):e.createCommentVNode("",!0)],12,["onClick"])))),128))])])])])])),_:1},8,["offset-top"]),e.createElementVNode("view",{class:"doctor-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(v.list,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"doctor-item",key:a,onClick:e=>(e=>{var t,a;const{id:n,userId:o,quoteList:i}=e,r={quoteAmount:null==(t=i[0])?void 0:t.quoteAmount,serviceDuration:null==(a=i[0])?void 0:a.serviceDuration},s=`id=${n}&userId=${o}&quoteList=${JSON.stringify(r)}`;uni.navigateTo({url:`/pages/consult/detail?${s}`})})(t)},[e.createElementVNode("view",{class:"doctor-auture"},[e.createElementVNode("image",{src:g(t),style:{"border-radius":"20rpx"}},null,8,["src"])]),e.createElementVNode("view",{class:"doctor-info"},[e.createElementVNode("view",{class:"doctor-info-1"},[e.createElementVNode("view",{class:"name"},e.toDisplayString(t.name),1),e.createElementVNode("view",{class:"date"},"今天可约")]),e.createElementVNode("view",{class:"doctor-info-1"},[e.createElementVNode("view",{class:"job"},e.toDisplayString(t.occupationName),1),e.createElementVNode("view",{class:"address"},[e.createElementVNode("image",{src:Me}),e.createElementVNode("text",null,e.toDisplayString(t.address),1)])]),e.createElementVNode("view",{class:"doctor-info-1"},[e.createElementVNode("view",{class:"exprise"},[e.createElementVNode("text",null,e.toDisplayString(t.platformHours)+"+",1),e.createTextVNode(" 小时经验 "),e.createElementVNode("text",null,e.toDisplayString(t.years)+"年",1),e.createTextVNode(" 从业 "),e.createElementVNode("text",null,e.toDisplayString(t.commentCount)+"+ ",1),e.createTextVNode("评价 ")])]),e.createElementVNode("view",{class:"doctor-info-1"},[t.serviceType?(e.openBlock(),e.createElementBlock("view",{key:0,class:"point-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.serviceTypes,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"point-item",key:a},e.toDisplayString(t),1)))),128))])):e.createCommentVNode("",!0)]),e.createElementVNode("view",{class:"doctor-info-1"},[e.createElementVNode("view",{class:"discount"}),t.quoteList[0]?(e.openBlock(),e.createElementBlock("view",{key:0,class:"price"},[e.createElementVNode("text",{class:"unit"},"¥"),e.createTextVNode(" "+e.toDisplayString(t.quoteList[0].quoteAmount||0),1)])):e.createCommentVNode("",!0)])])],8,["onClick"])))),128))])],40,["scroll-top"]),s.value?(e.openBlock(),e.createElementBlock("view",{key:0,class:"mask",onClick:y},[e.createElementVNode("view",{class:"filter-popup",onClick:a[4]||(a[4]=e.withModifiers((()=>{}),["stop"]))},[e.createElementVNode("view",{class:"popup-body"},[e.createVNode(zo,{ref_key:"listFiltering",ref:D,colorType:1,serviceTypes:b.value,confusionList:V.value,layoutType:w.value},null,8,["serviceTypes","confusionList","layoutType"])]),e.createElementVNode("view",{class:"popup-footer"},[e.createElementVNode("button",{class:"btn btn-reset",size:"mini",onClick:a[2]||(a[2]=e=>(I.value={current:1,size:10,consultantName:""},s.value=!1,void T()))}," 重置 "),e.createElementVNode("button",{class:"btn btn-confirm",size:"mini",onClick:a[3]||(a[3]=e=>(()=>{const{distressId:e,city:t,currentRange:a,sortType:n,resultObj:o}=D.value;1===w.value&&(I.value.distressId=e),2===w.value&&(I.value.city=t),3===w.value&&(I.value={...a}),4===w.value&&(I.value.sortType=n),5===w.value&&(I.value={...o}),s.value=!1,T()})())}," 完成 ")])])])):e.createCommentVNode("",!0),e.createVNode(Mi,{ref_key:"serviceRef",ref:d},null,512)])}}},Fi=ie(Gi,[["__scopeId","data-v-0b88a450"]]),qi="/static/common/follow.png",zi="/static/common/contect.png",Hi=ie({__name:"detail",setup(t){e.useCssVars((e=>({"0235b384":n.value})));const a=ae(),n=e.ref(a.statusBarHeight+"px"),r=e.ref(0),s=e.ref(0),c=e.getCurrentInstance(),u=e.ref(0),d=e.ref(!1),m=e.ref(null),p=e.ref("832rpx"),h=e.ref([]),v=e.ref({consultantName:"",gallery:""}),g=e.ref(""),f=e.ref({});l((e=>{g.value=e.userId,f.value=JSON.parse(e.quoteList),B(e.id),b(e.id),y(e.id),M(e.userId)}));const y=async e=>{let t=await((e,t={})=>A.get("/api/consultant/schedule/available?consultantId=",e,t))({consultantId:e});h.value=t.data;const a={};t.data.forEach((e=>{a[e.date]||(a[e.date]={date:e.date,day:e.date.split("-")[2],week:["周一","周二","周三","周四","周五","周六","周日"][e.dayOfWeek-1],status:e.status})})),w.value=Object.values(a).sort(((e,t)=>new Date(e.date)-new Date(t.date)))},_=()=>{uni.navigateBack({delta:1})},k=e.ref(null),E=()=>{k.value.open()},x=e.ref([{label:"个人简介",id:"tab-1",class:"tab6"},{label:"擅长领域",id:"tab-2",class:"tab7"},{label:"受训经历",id:"tab-3",class:"tab8"},{label:"咨询感受",id:"tab-4",class:"tab9"},{label:"预约时间",id:"tab-5",class:"tab10"}]),N=e.ref([]),w=e.ref([]),C=e.ref([]),M=async e=>{let{data:t}=await Ci({targetUserId:e,page:1,pageSize:10});C.value=t.records},S=e.ref(N.value.length),I=()=>{m.value.open()},T=()=>{uni.navigateTo({url:`/pages/consult-feel/consult-feel?userId=${g.value}&userInfo=${JSON.stringify(v.value)}`})},D=()=>{p.value="none"},b=async e=>{let t=await((e,t={})=>A.post("/api/consultant/consultant/getConsultantById",e,t))({id:e});v.value=t.data,o("log","at pages/consult/detail.vue:617",t.data),N.value=Jo(t.data.careerList)},V=()=>{const{userId:e,name:t,avatar:a}=v.value;uni.navigateTo({url:`/pages/message/private-chat?to=${e}&name=${t}&avatar=${a}`})},L=()=>{if(null===q.value)return void uni.showToast({title:"请选择预约时间",icon:"none"});const{id:e,userId:t,name:a,avatar:n}=v.value;uni.navigateTo({url:`/pages/payment/payment?id=${e}&to=${t}&name=${a}&avatar=${n}&time=${JSON.stringify(q.value)}`})},R=e.ref({}),O=e.ref({}),B=async e=>{try{const t=await ti({id:e}),a=(await((e,t={})=>A.get("/api/consultant/consultant/commentList",e,t))({id:e,page:1,count:10}),await ai({id:e}));R.value=t.data,O.value=a.data}catch(Ft){}},P=e.computed((()=>h.value.reduce(((e,t)=>{const{date:a,dayOfWeek:n}=t;e[a]||(e[a]={date:a,dayOfWeek:n,times:[],status:1}),e[a].times.push(t);const o=e[a];return o.times.every((e=>2===e.status))?(o.status=2,o.times=[]):o.status=1,e}),{}))),U=e.computed((()=>Object.values(P.value))),G=e.ref(null),F=e.ref(null),q=e.ref(null),z=e=>{G.value&&1===e.status&&(F.value=e,q.value=e,o("log","at pages/consult/detail.vue:703","最终选中对象：",q.value))},H=e=>{const t=(new Date).getDay();return e==(0===t?7:t)?"今天":["","周一","周二","周三","周四","周五","周六","周日"][e]||"未知"},$=e=>G.value?G.value.times.filter((t=>{const a=Number(t.startTime.split(":")[0]);return"morning"===e?a<12:a>=12})):[],j=e=>({0:"不可约",1:"可约",2:"已满"}[e]||"未知"),K=e=>({0:"status-disabled",1:"status-available",2:"status-full"}[e]||""),Y=e=>e.times.some((e=>1===e.status));return e.onMounted((()=>{U.value.length>0&&(G.value=U.value[0])})),(t,a)=>{const n=i(e.resolveDynamicComponent("uni-icons"),re),o=i(e.resolveDynamicComponent("uni-nav-bar"),Di),l=i(e.resolveDynamicComponent("uni-steps"),bi),h=i(e.resolveDynamicComponent("uni-popup"),vi);return e.openBlock(),e.createElementBlock("view",{class:"consult-detail-box"},[e.createElementVNode("scroll-view",{"scroll-y":"",class:"scroll-content","scroll-top":u.value,"show-scrollbar":!1,"scroll-with-animation":"",id:"scrollView"},[e.createVNode(o,{backgroundColor:r.value>15?"#fff":"transparent",border:!1,title:r.value>15?v.value.consultantName:"",class:"header-bar",statusBar:!0,fixed:""},{left:e.withCtx((()=>[e.createElementVNode("view",{class:"right"},[r.value>15?(e.openBlock(),e.createBlock(n,{key:0,type:"left",size:"24",onClick:_})):(e.openBlock(),e.createElementBlock("image",{key:1,src:Li,style:{width:"56rpx",height:"56rpx"},onClick:_}))])])),right:e.withCtx((()=>[e.createElementVNode("view",{class:"right"},[r.value>15?(e.openBlock(),e.createElementBlock("image",{key:0,src:Ri,style:{width:"40rpx",height:"40rpx"}})):(e.openBlock(),e.createElementBlock("image",{key:1,src:Oi,style:{width:"56rpx",height:"56rpx"}}))])])),_:1},8,["backgroundColor","title"]),e.createElementVNode("view",{class:"consult-detail-content"},[e.createElementVNode("view",{class:"swiper-content"},[e.createElementVNode("view",{class:"uni-margin-wrap"},[e.createElementVNode("swiper",{class:"swiper",circular:"","indicator-dots":!0,autoplay:!0,interval:5e3,duration:500},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(JSON.parse(v.value.masterGallery),((t,a)=>(e.openBlock(),e.createElementBlock("swiper-item",{key:a,class:"swiper-item"},[e.createElementVNode("image",{src:t,style:{height:"590rpx"},mode:"heightFix"},null,8,["src"])])))),128))])])]),e.createElementVNode("view",{class:"consult-detail-info"},[e.createElementVNode("view",{class:"detail-item-line-1"},[e.createElementVNode("view",{class:"name"},[e.createElementVNode("text",{class:"name-a"},e.toDisplayString(v.value.name),1),e.createElementVNode("text",{class:"name-b"},e.toDisplayString(v.value.occupationName),1),e.createElementVNode("text",{class:"name-c"},e.toDisplayString(e.unref(Zo)(v.value.birthdate)),1)]),"{}"!==JSON.stringify(f.value)?(e.openBlock(),e.createElementBlock("view",{key:0,class:"money"},[e.createElementVNode("text",{class:"num"},e.toDisplayString(f.value.quoteAmount),1),e.createElementVNode("text",null,"元/"+e.toDisplayString(f.value.serviceDuration)+"分钟",1)])):e.createCommentVNode("",!0)]),e.createElementVNode("view",{class:"detail-item-line-2"},[e.createElementVNode("text",null,e.toDisplayString(v.value.certificateList[0].name)+" | "+e.toDisplayString(v.value.educationList[0].schoolName)+" | "+e.toDisplayString(v.value.constellation),1)]),e.createElementVNode("view",{class:"detail-item-line-3"},[e.createElementVNode("view",{class:"address"},[e.createElementVNode("image",{src:"/static/common/address.png"}),e.createElementVNode("text",null,e.toDisplayString(v.value.address),1)]),e.createElementVNode("view",{class:"txt"},[e.createElementVNode("view",null,[e.createElementVNode("text",{class:"voice"},"语音咨询"),e.createTextVNode(" | "),e.createElementVNode("text",{class:"quick"},"最快可约最近3天"),e.createVNode(n,{type:"right",size:"14",color:"#35CA95"})])])]),e.createElementVNode("view",{class:"detail-item-line-4"},[e.createElementVNode("view",{class:"content"},[e.createElementVNode("view",{class:"list"},[e.createElementVNode("view",{class:"item"},[e.createElementVNode("view",null,[e.createElementVNode("text",{class:"num"},e.toDisplayString(v.value.workTime),1),e.createElementVNode("text",{class:"unit"},"年")]),e.createElementVNode("view",{class:"txt"},"从业年限")]),e.createElementVNode("view",{class:"item"},[e.createElementVNode("view",null,[e.createElementVNode("text",{class:"num"},e.toDisplayString(O.value.platformHours),1),e.createElementVNode("text",{class:"unit"},"小时")]),e.createElementVNode("view",{class:"txt"},"平台时长")]),e.createElementVNode("view",{class:"item"},[e.createElementVNode("view",null,[e.createElementVNode("text",{class:"num"},e.toDisplayString(O.value.consultUserCount),1),e.createElementVNode("text",{class:"unit"},"人")]),e.createElementVNode("view",{class:"txt"},"咨询人数")]),e.createElementVNode("view",{class:"item"},[e.createElementVNode("view",null,[e.createElementVNode("text",{class:"num"},e.toDisplayString(O.value.commentCount),1)]),e.createElementVNode("view",{class:"txt"},"咨询感受")])]),e.createElementVNode("view",{class:"tips"},[e.createElementVNode("image",{src:"/static/common/follwer.png"}),e.createElementVNode("text",{class:"txt"},"服务经验")])])]),e.createElementVNode("view",{class:e.normalizeClass(["detail-item-line-5",d.value?"tabsFixed":""]),id:"tabs"},[e.createElementVNode("view",{class:"tabs"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(x.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["tab-item",s.value==a?"active":""]),key:a,onClick:t=>(async t=>{await e.nextTick(),uni.createSelectorQuery().in(c).select(`#${t}`).boundingClientRect().select("#scrollView").boundingClientRect().exec((e=>{const t=e[0],a=e[1];t&&a&&(u.value=t.top-a.top)}))})(`tab-${a+1}`)},e.toDisplayString(t.label),11,["onClick"])))),128))])],2),e.createElementVNode("view",{class:"detail-item-line-6 tab6",id:"tab-1"},[e.createElementVNode("view",{class:"content"},[e.createElementVNode("view",{class:"title"},"个人简介"),e.createElementVNode("view",{class:"info"},e.toDisplayString(v.value.profile),1)])]),e.createElementVNode("view",{class:"detail-item-line-6 detail-item-line-7",id:"tab-2"},[e.createElementVNode("view",{class:"content"},[e.createElementVNode("view",{class:"title"},"擅长方向"),e.createElementVNode("view",{class:"info"},[e.createElementVNode("view",{class:"detail-item"},[e.createElementVNode("view",{class:"detail-content"},e.toDisplayString(v.value.serviceTypes.join("、")),1)])]),e.createElementVNode("view",{class:"title"},"擅长疗法"),e.createElementVNode("view",{class:"tags"},[e.createElementVNode("text",{class:"tag-item"},"沙盘疗法"),e.createElementVNode("text",{class:"tag-item"},"心理动力取向"),e.createElementVNode("text",{class:"tag-item"},"心理动力取向")])])]),e.createElementVNode("view",{class:"detail-item-line-6 detail-item-line-8",id:"tab-3"},[e.createElementVNode("view",{class:"content",style:e.normalizeStyle({"max-height":p.value,overflow:"hidden"})},[e.createElementVNode("view",{class:"info"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(v.value.certificateList,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"certificate-detail",key:a},[e.createElementVNode("view",{class:"tag"},"资质"),e.createElementVNode("view",{class:"tag-info"},[e.createElementVNode("view",{class:"tag-title"},e.toDisplayString(t.name),1),e.createElementVNode("view",{class:"certificate-info"},[e.createElementVNode("view",null,"发证时间："+e.toDisplayString(t.date),1),e.createElementVNode("view",null,"证书编号："+e.toDisplayString(t.number),1)])])])))),128)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(v.value.educationList,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"eduication-detail",key:a},[e.createElementVNode("view",{class:"tag"},"学历"),e.createElementVNode("view",{class:"tag-info"},[e.createElementVNode("view",{class:"tag-title"},e.toDisplayString(t.schoolName),1),e.createElementVNode("view",{class:"eduication-info"},[e.createElementVNode("view",null,"发证时间："+e.toDisplayString(t.endTime),1),e.createElementVNode("view",null,"证书编号："+e.toDisplayString(t.code),1)])])])))),128)),e.createElementVNode("view",{class:"step-detail"},[e.createElementVNode("view",{class:"training"},[e.createElementVNode("view",{class:"training-title"},"伦理培训"),e.createElementVNode("view",{class:"training-timer"},e.toDisplayString(N.value.length)+"项培训，累计40小时",1)]),e.createElementVNode("view",{class:"step-box"},[e.createVNode(l,{options:N.value,"active-color":"#35CA95",active:S.value,direction:"column"},null,8,["options","active"])])])])],4),e.createElementVNode("view",{class:"more",onClick:D,style:{"background-color":"#fff !important"}},"查看更多")]),e.createElementVNode("view",{class:"detail-item-line-6 detail-item-line-9",id:"tab-4"},[e.createElementVNode("view",{class:"content",onClick:T},[e.createElementVNode("view",{class:"title"},"咨询感受"),e.createElementVNode("view",{class:"info"},[e.createElementVNode("view",{class:"comment-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(C.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"comment-item",key:a},[e.createElementVNode("view",{class:"comment-item-header"},[e.createElementVNode("view",{class:"user"},[e.createElementVNode("image",{src:t.avatar,style:{"border-radius":"50%"}},null,8,["src"]),e.createElementVNode("text",null,e.toDisplayString(t.nickname),1)]),e.createElementVNode("view",{class:"date"},e.toDisplayString(t.createTime),1)]),e.createElementVNode("view",{class:"comment-item-content"},[e.createVNode(e.unref(Pi),{line:3,expandText:"展开",foldHint:"收起"},{default:e.withCtx((()=>[e.createTextVNode(e.toDisplayString(t.content),1)])),_:2},1024)])])))),128))])])])]),e.createElementVNode("view",{class:"detail-item-line-6 detail-item-line-10",id:"tab-5",onClick:I},[e.createElementVNode("view",{class:"content"},[e.createElementVNode("view",{class:"title"},[e.createTextVNode("可约时间"),e.createElementVNode("text",{class:"remark"},"（北京时间）")]),e.createElementVNode("view",{class:"info"},[e.createElementVNode("view",{class:"txt"},"如果暂时无法确定具体的咨询时间，可以在预约成功后，再与咨询师协商具体时间。"),e.createElementVNode("view",{class:"order-timer-box"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(w.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["order-timer-item",1==t.status?"active":""])},[e.createElementVNode("view",{class:"month"},e.toDisplayString(t.month)+"月",1),e.createElementVNode("view",{class:"day"},e.toDisplayString(t.day),1),e.createElementVNode("view",{class:"week"},e.toDisplayString(t.week),1),e.createElementVNode("view",{class:"isOrder"},e.toDisplayString(1==t.status?"可约":"已满"),1)],2)))),256))])])])]),e.createElementVNode("view",{class:"detail-item-line-6 detail-item-line-11"},[e.createElementVNode("view",{class:"content"},[e.createElementVNode("view",{class:"title"},[e.createTextVNode("预约须知"),e.createElementVNode("view",null,[e.createElementVNode("view",{class:"info"},[e.createElementVNode("view",null,"1、咨询为预约服务，您可选择咨询师可约时段下单，每次咨询50分钟或60分钟。"),e.createElementVNode("view",null,"2、订单支付成功后，您的预约需咨询师确认是否接受，确认后将短信通知您。"),e.createElementVNode("view",null,"3、咨询方式有面对面、视频、电话、文字四种，具体以咨询师展示的可选方式为准。"),e.createElementVNode("view",null,"4、因不可抗力因素变更时间或取消咨询预约，请提前24小时告知咨询师。")])])])])])])])],8,["scroll-top"]),e.createElementVNode("view",{class:"footer"},[e.createElementVNode("view",{class:"follow"},[e.createElementVNode("image",{src:qi}),e.createElementVNode("text",null,"关注")]),e.createElementVNode("view",{class:"contact",onClick:E},[e.createElementVNode("image",{src:zi}),e.createElementVNode("text",null,"客服")]),e.createElementVNode("view",{class:"message",onClick:V},[e.createElementVNode("text",{class:"txt"},"私信ta")]),e.createElementVNode("view",{class:"reservation",onClick:I},[e.createElementVNode("text",null,"预约咨询"),e.createElementVNode("text",{class:"remark"},"（语音/视频）")])]),e.createVNode(h,{ref_key:"popup",ref:m,type:"bottom","border-radius":"20rpx 20rpx 0 0"},{default:e.withCtx((()=>[e.createElementVNode("view",{class:"popup-box"},[e.createElementVNode("view",{class:"popup-header"},[e.createElementVNode("view",{class:"title"},[e.createTextVNode("选择咨询时段"),e.createElementVNode("text",{class:"remark"},"（北京时间）")]),e.createElementVNode("view",{class:"msg"},"暂不选择咨询时间，可在下单后与咨询师协商时间")]),e.createElementVNode("view",{class:"time-selector"},[e.createElementVNode("scroll-view",{class:"date-scroll","scroll-x":"true","show-scrollbar":"true"},[e.createElementVNode("view",{class:"date-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(U.value,((t,a)=>{var n,o;return e.openBlock(),e.createElementBlock("view",{key:`date-${a}-${t.date}`,class:e.normalizeClass(["date-card",{active:(null==(n=G.value)?void 0:n.date)===t.date,"no-available":!Y(t),"status-disable":2===t.status}]),onClick:e=>2!==t.status&&(e=>{G.value=e,F.value=null,q.value=null})(t)},[e.createElementVNode("text",{class:e.normalizeClass(["week",{"week-active":(null==(o=G.value)?void 0:o.date)===t.date,available:2===t.status}])},e.toDisplayString(H(t.dayOfWeek)),3),e.createElementVNode("text",{class:"date"},e.toDisplayString(t.date.slice(5)),1),e.createElementVNode("text",{class:e.normalizeClass(["status",2==t.status?"available":""])},e.toDisplayString(Y(t)?"可约":"已满"),3)],10,["onClick"])})),128))])]),G.value?(e.openBlock(),e.createElementBlock("view",{key:0,class:"time-list"},[e.createElementVNode("view",{class:"time-section"},[$("morning").length?(e.openBlock(),e.createElementBlock("text",{key:0,class:"section-title"},"上午")):e.createCommentVNode("",!0),e.createElementVNode("view",{class:"time-items"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList($("morning"),((t,a)=>{var n,o;return e.openBlock(),e.createElementBlock("view",{key:`time-morning-${a}-${t.date}-${t.text}`,class:e.normalizeClass(["time-item",[{active:(null==(n=F.value)?void 0:n.text)===t.text&&(null==(o=F.value)?void 0:o.date)===t.date},K(t.status)]]),onClick:e=>z(t)},[e.createElementVNode("text",{class:"time-text"},e.toDisplayString(t.text),1),1!==t.status?(e.openBlock(),e.createElementBlock("text",{key:0,class:"status-tag"},e.toDisplayString(j(t.status)),1)):e.createCommentVNode("",!0)],10,["onClick"])})),128))])]),e.createElementVNode("view",{class:"time-section"},[$("afternoon").length?(e.openBlock(),e.createElementBlock("text",{key:0,class:"section-title"},"下午")):e.createCommentVNode("",!0),e.createElementVNode("view",{class:"time-items"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList($("afternoon"),((t,a)=>{var n,o;return e.openBlock(),e.createElementBlock("view",{key:`time-afternoon-${a}-${t.date}-${t.text}`,class:e.normalizeClass(["time-item",[{active:(null==(n=F.value)?void 0:n.text)===t.text&&(null==(o=F.value)?void 0:o.date)===t.date},K(t.status)]]),onClick:e=>z(t)},[e.createElementVNode("text",{class:"time-text"},e.toDisplayString(t.text),1),1!==t.status?(e.openBlock(),e.createElementBlock("text",{key:0,class:"status-tag"},e.toDisplayString(j(t.status)),1)):e.createCommentVNode("",!0)],10,["onClick"])})),128))])])])):e.createCommentVNode("",!0)]),e.createElementVNode("view",{class:"popup-footer"},[e.createElementVNode("view",{class:"msg"},[q.value?(e.openBlock(),e.createElementBlock("view",{key:0,class:"date"},e.toDisplayString(q.value.date)+"("+e.toDisplayString(H(q.value.dayOfWeek))+") | "+e.toDisplayString(q.value.text),1)):e.createCommentVNode("",!0),e.createElementVNode("view",{class:"name"},"咨询师："+e.toDisplayString(v.value.name),1)]),e.createElementVNode("view",{class:"confirm",onClick:L},"确认预约")])]),e.createVNode(Mi,{ref_key:"serviceRef",ref:k},null,512)])),_:1},512)])}}},[["__scopeId","data-v-db92f16b"]]),$i="/static/index/subscript.png",ji="/static/settled/selectimg.png",Ki=(e,t={})=>A.post("/api/article/article/getArticleList",e,t),Yi=(e,t={})=>A.post("/api/answer/answer/getAnswerList",e,t),Wi=ie({__name:"Confide-Teacher-List-Item",props:{info:{type:Object}},setup:t=>(a,n)=>{const o=i(e.resolveDynamicComponent("uni-icons"),re);return e.openBlock(),e.createElementBlock("view",{class:"teacher-listener"},[e.createElementVNode("view",{class:"card-listener"},[e.createElementVNode("view",{class:"avatar-wrap-listener"},[e.createElementVNode("image",{class:"avatar-listener",src:"https://s.maimiaoqingsu.com/a624ea3f-e71f-4d00-b94d-1cc157055449.JPG",mode:"aspectFill"},null,8,["src"])]),e.createElementVNode("view",{class:"info-wrap"},[e.createElementVNode("view",{class:"job-title"},[e.createElementVNode("view",{class:"name-title"},e.toDisplayString(t.info.name),1),e.createElementVNode("view",null,e.toDisplayString(e.unref(Zo)(t.info.birthdate))+" | "+e.toDisplayString(t.info.constellation),1)]),e.createElementVNode("view",{class:"tags"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.info.serviceTypes.slice(0,2),((t,a)=>(e.openBlock(),e.createElementBlock("text",{class:"tag"},e.toDisplayString(t),1)))),256))]),e.createElementVNode("view",{class:"stats"},[e.createElementVNode("view",null,[e.createElementVNode("view",{class:"stats-item"},[e.createElementVNode("view",{class:"num"},e.toDisplayString(t.info.years)+"年",1),e.createElementVNode("view",null,"从业时间")]),e.createElementVNode("view",{class:"stats-item"},[e.createElementVNode("view",{class:"num"},e.toDisplayString(t.info.platformHours)+"+",1),e.createElementVNode("view",null,"平台时长")])]),e.createElementVNode("view",null,[e.createElementVNode("view",{class:"stats-item"},[e.createElementVNode("view",{class:"num"},e.toDisplayString(t.info.commentCount)+"+",1),e.createElementVNode("view",null,"评价")]),e.createElementVNode("view",{class:"stats-item"},[e.createElementVNode("view",{class:"num"},e.toDisplayString(t.info.commentCount)+"+",1),e.createElementVNode("view",null,"回头客")])])]),e.createElementVNode("view",{class:"price-button"},[e.createElementVNode("view",{class:"contact"},[e.createVNode(o,{type:"location",size:"20",color:"#9da6a4"}),e.createElementVNode("view",null,e.toDisplayString(t.info.address),1)]),t.info.quoteList[0]?(e.openBlock(),e.createElementBlock("view",{key:0,style:{"font-size":"38rpx",color:"red"}},"¥"+e.toDisplayString(t.info.quoteList[0].quoteAmount),1)):e.createCommentVNode("",!0)])])])])}},[["__scopeId","data-v-c324a909"]]),Ji=ie({__name:"Consult-Teacher-List-Item",props:{info:{type:Object}},setup(t){const a=e=>{const{masterGallery:t}=e;return t?JSON.parse(t)[0]:"/static/consult/user.png"};return(n,o)=>{const r=i(e.resolveDynamicComponent("uni-icons"),re);return e.openBlock(),e.createElementBlock("view",{class:"teacher-container"},[e.createElementVNode("view",{class:"card"},[e.createElementVNode("view",{class:"avatar-wrap"},[e.createElementVNode("image",{class:"avatar",src:a(t.info),mode:"aspectFill"},null,8,["src"]),e.createElementVNode("view",{class:"name-title"},e.toDisplayString(t.info.name),1)]),e.createElementVNode("view",{class:"info-wrap"},[e.createElementVNode("view",{class:"job-title"},e.toDisplayString(t.info.occupationName),1),e.createElementVNode("view",{class:"tags"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.info.serviceTypes.slice(0,2),((t,a)=>(e.openBlock(),e.createElementBlock("text",{class:"tag"},e.toDisplayString(t),1)))),256))]),e.createElementVNode("view",{class:"stats"},[e.createElementVNode("view",{class:"stats-item"},[e.createElementVNode("view",{class:"num"},e.toDisplayString(t.info.platformHours)+"+",1),e.createElementVNode("view",null,"平台时长")]),e.createElementVNode("view",{class:"stats-item"},[e.createElementVNode("view",{class:"num"},e.toDisplayString(t.info.years)+"年",1),e.createElementVNode("view",null,"从业时间")]),e.createElementVNode("view",{class:"stats-item"},[e.createElementVNode("view",{class:"num"},e.toDisplayString(t.info.commentCount)+"+",1),e.createElementVNode("view",null,"咨询人数")]),e.createElementVNode("view",{class:"stats-item"},[e.createElementVNode("view",{class:"num"},e.toDisplayString(t.info.commentCount)+"+",1),e.createElementVNode("view",null,"咨询感受")])]),e.createElementVNode("view",{class:"price-button"},[e.createElementVNode("view",{class:"contact"},[e.createVNode(r,{type:"location",size:"20",color:"#9da6a4"}),e.createElementVNode("view",null,e.toDisplayString(t.info.address),1)]),t.info.quoteList[0]?(e.openBlock(),e.createElementBlock("view",{key:0,style:{"font-size":"38rpx",color:"red"}},"¥"+e.toDisplayString(t.info.quoteList[0].quoteAmount),1)):e.createCommentVNode("",!0)])])])])}}},[["__scopeId","data-v-42cb4b59"]]),Zi=ie({__name:"Recommend-Article-Item",props:{info:{type:Object}},setup:t=>(a,n)=>(e.openBlock(),e.createElementBlock("view",{class:"recommend-article-Item"},[e.createElementVNode("view",{class:"recommend-article-content"},[t.info?(e.openBlock(),e.createElementBlock("view",{key:0,class:"content"},e.toDisplayString(t.info.title),1)):e.createCommentVNode("",!0),t.info?(e.openBlock(),e.createElementBlock("view",{key:1,class:"content"},e.toDisplayString(t.info.content),1)):e.createCommentVNode("",!0),e.createElementVNode("view",{class:"info"},[e.createElementVNode("view",{class:"user"},[e.createElementVNode("image",{src:Bi,class:"picture"}),e.createElementVNode("text",{class:"name"},e.toDisplayString(t.info.realName),1)]),e.createElementVNode("view",{class:"view"}," 浏览7876 "),e.createElementVNode("view",{class:"date"},e.toDisplayString(t.info.createTime.substring(0,10)),1)])]),e.createElementVNode("view",{class:"recommend-article-image"},[e.createElementVNode("image",{src:t.info.imageUrl},null,8,["src"])])]))},[["__scopeId","data-v-aa19d1cf"]]),Xi="/static/consult/user.png",Qi=ie({__name:"Forum-Item",props:{info:{type:Object}},setup:t=>(a,n)=>(e.openBlock(),e.createElementBlock("view",{class:"forum-Item"},[e.createElementVNode("view",{class:"forum-content"},[e.createElementVNode("view",{class:"content"},e.toDisplayString(t.info.content),1),e.createElementVNode("view",{class:"forum-image"},[e.createElementVNode("scroll-view",{class:"scroll-view_H","scroll-x":"true"},[e.createElementVNode("view",{class:"forum-image-list"},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(10,(t=>e.createElementVNode("image",{src:Xi,class:"img"}))),64))])])]),e.createElementVNode("view",{class:"info"},[e.createElementVNode("text",{class:"date"}," 2025/01/02 "),e.createElementVNode("text",{class:"date"},"·"),e.createElementVNode("text",{class:"view"}," 浏览7876 ")])])]))},[["__scopeId","data-v-da77f9e4"]]);var er={exports:{}};!function(e,t){e.exports=function(){function e(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function t(t){for(var a=1;a<arguments.length;a++){var n=null!=arguments[a]?arguments[a]:{};a%2?e(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,t,a){return t&&i(e.prototype,t),a&&i(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(ve){return!1}}function m(e,t,a){return(m=d()?Reflect.construct:function(e,t,a){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return a&&u(o,a.prototype),o}).apply(null,arguments)}function p(e){var t="function"==typeof Map?new Map:void 0;return(p=function(e){if(null===e||(a=e,-1===Function.toString.call(a).indexOf("[native code]")))return e;var a;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return m(e,arguments,c(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),u(n,e)})(e)}function v(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return g(e)}function y(e){var t=d();return function(){var a,n=c(e);if(t){var o=c(this).constructor;a=Reflect.construct(n,arguments,o)}else a=n.apply(this,arguments);return f(this,a)}}function _(e,t){return E(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,o,i=[],r=!0,s=!1;try{for(a=a.call(e);!(r=(n=a.next()).done)&&(i.push(n.value),!t||i.length!==t);r=!0);}catch(l){s=!0,o=l}finally{try{r||null==a.return||a.return()}finally{if(s)throw o}}return i}}(e,t)||N(e,t)||C()}function k(e){return function(e){if(Array.isArray(e))return w(e)}(e)||x(e)||N(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e){if(Array.isArray(e))return e}function x(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function N(e,t){if(e){if("string"==typeof e)return w(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?w(e,t):void 0}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function C(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function M(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=N(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,r=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return r=e.done,e},e:function(e){s=!0,i=e},f:function(){try{r||null==a.return||a.return()}finally{if(s)throw i}}}}var S={SDK_READY:"sdkStateReady",SDK_NOT_READY:"sdkStateNotReady",SDK_DESTROY:"sdkDestroy",MESSAGE_RECEIVED:"onMessageReceived",MESSAGE_MODIFIED:"onMessageModified",MESSAGE_REVOKED:"onMessageRevoked",MESSAGE_READ_BY_PEER:"onMessageReadByPeer",MESSAGE_READ_RECEIPT_RECEIVED:"onMessageReadReceiptReceived",MESSAGE_EXTENSIONS_UPDATED:"onMessageExtensionsUpdated",MESSAGE_EXTENSIONS_DELETED:"onMessageExtensionsDeleted",CONVERSATION_LIST_UPDATED:"onConversationListUpdated",TOTAL_UNREAD_MESSAGE_COUNT_UPDATED:"onTotalUnreadMessageCountUpdated",CONVERSATION_GROUP_LIST_UPDATED:"onConversationGroupListUpdated",CONVERSATION_IN_GROUP_UPDATED:"onConversationInGroupUpdated",GROUP_LIST_UPDATED:"onGroupListUpdated",GROUP_SYSTEM_NOTICE_RECEIVED:"receiveGroupSystemNotice",GROUP_ATTRIBUTES_UPDATED:"groupAttributesUpdated",GROUP_COUNTER_UPDATED:"onGroupCounterUpdated",TOPIC_CREATED:"onTopicCreated",TOPIC_DELETED:"onTopicDeleted",TOPIC_UPDATED:"onTopicUpdated",PROFILE_UPDATED:"onProfileUpdated",USER_STATUS_UPDATED:"onUserStatusUpdated",BLACKLIST_UPDATED:"blacklistUpdated",FRIEND_LIST_UPDATED:"onFriendListUpdated",FRIEND_GROUP_LIST_UPDATED:"onFriendGroupListUpdated",FRIEND_APPLICATION_LIST_UPDATED:"onFriendApplicationListUpdated",KICKED_OUT:"kickedOut",ERROR:"error",NET_STATE_CHANGE:"netStateChange",SDK_RELOAD:"sdkReload"},I={MSG_TEXT:"TIMTextElem",MSG_IMAGE:"TIMImageElem",MSG_SOUND:"TIMSoundElem",MSG_AUDIO:"TIMSoundElem",MSG_FILE:"TIMFileElem",MSG_FACE:"TIMFaceElem",MSG_VIDEO:"TIMVideoFileElem",MSG_GEO:"TIMLocationElem",MSG_LOCATION:"TIMLocationElem",MSG_GRP_TIP:"TIMGroupTipElem",MSG_GRP_SYS_NOTICE:"TIMGroupSystemNoticeElem",MSG_CUSTOM:"TIMCustomElem",MSG_MERGER:"TIMRelayElem",MSG_PRIORITY_HIGH:"High",MSG_PRIORITY_NORMAL:"Normal",MSG_PRIORITY_LOW:"Low",MSG_PRIORITY_LOWEST:"Lowest",CONV_C2C:"C2C",CONV_GROUP:"GROUP",CONV_TOPIC:"TOPIC",CONV_SYSTEM:"@TIM#SYSTEM",CONV_AT_ME:1,CONV_AT_ALL:2,CONV_AT_ALL_AT_ME:3,CONV_MARK_TYPE_STAR:1,CONV_MARK_TYPE_UNREAD:2,CONV_MARK_TYPE_FOLD:4,CONV_MARK_TYPE_HIDE:8,GRP_PRIVATE:"Private",GRP_WORK:"Private",GRP_PUBLIC:"Public",GRP_CHATROOM:"ChatRoom",GRP_MEETING:"ChatRoom",GRP_AVCHATROOM:"AVChatRoom",GRP_COMMUNITY:"Community",GRP_MBR_ROLE_OWNER:"Owner",GRP_MBR_ROLE_ADMIN:"Admin",GRP_MBR_ROLE_MEMBER:"Member",GRP_MBR_ROLE_CUSTOM:"Custom",GRP_TIP_MBR_JOIN:1,GRP_TIP_MBR_QUIT:2,GRP_TIP_MBR_KICKED_OUT:3,GRP_TIP_MBR_SET_ADMIN:4,GRP_TIP_MBR_CANCELED_ADMIN:5,GRP_TIP_GRP_PROFILE_UPDATED:6,GRP_TIP_MBR_PROFILE_UPDATED:7,GRP_TIP_BAN_AVCHATROOM_MEMBER:10,GRP_TIP_UNBAN_AVCHATROOM_MEMBER:11,MSG_REMIND_ACPT_AND_NOTE:"AcceptAndNotify",MSG_REMIND_ACPT_NOT_NOTE:"AcceptNotNotify",MSG_REMIND_DISCARD:"Discard",GENDER_UNKNOWN:"Gender_Type_Unknown",GENDER_FEMALE:"Gender_Type_Female",GENDER_MALE:"Gender_Type_Male",KICKED_OUT_MULT_ACCOUNT:"multipleAccount",KICKED_OUT_MULT_DEVICE:"multipleDevice",KICKED_OUT_USERSIG_EXPIRED:"userSigExpired",KICKED_OUT_REST_API:"REST_API_Kick",ALLOW_TYPE_ALLOW_ANY:"AllowType_Type_AllowAny",ALLOW_TYPE_NEED_CONFIRM:"AllowType_Type_NeedConfirm",ALLOW_TYPE_DENY_ANY:"AllowType_Type_DenyAny",FORBID_TYPE_NONE:"AdminForbid_Type_None",FORBID_TYPE_SEND_OUT:"AdminForbid_Type_SendOut",JOIN_OPTIONS_FREE_ACCESS:"FreeAccess",JOIN_OPTIONS_NEED_PERMISSION:"NeedPermission",JOIN_OPTIONS_DISABLE_APPLY:"DisableApply",JOIN_STATUS_SUCCESS:"JoinedSuccess",JOIN_STATUS_ALREADY_IN_GROUP:"AlreadyInGroup",JOIN_STATUS_WAIT_APPROVAL:"WaitAdminApproval",INVITE_OPTIONS_DISABLE_INVITE:"DisableInvite",INVITE_OPTIONS_NEED_PERMISSION:"NeedPermission",INVITE_OPTIONS_FREE_ACCESS:"FreeAccess",GRP_PROFILE_OWNER_ID:"ownerID",GRP_PROFILE_CREATE_TIME:"createTime",GRP_PROFILE_LAST_INFO_TIME:"lastInfoTime",GRP_PROFILE_MEMBER_NUM:"memberNum",GRP_PROFILE_MAX_MEMBER_NUM:"maxMemberNum",GRP_PROFILE_JOIN_OPTION:"joinOption",GRP_PROFILE_INVITE_OPTION:"inviteOption",GRP_PROFILE_INTRODUCTION:"introduction",GRP_PROFILE_NOTIFICATION:"notification",GRP_PROFILE_MUTE_ALL_MBRS:"muteAllMembers",SNS_ADD_TYPE_SINGLE:"Add_Type_Single",SNS_ADD_TYPE_BOTH:"Add_Type_Both",SNS_DELETE_TYPE_SINGLE:"Delete_Type_Single",SNS_DELETE_TYPE_BOTH:"Delete_Type_Both",SNS_APPLICATION_TYPE_BOTH:"Pendency_Type_Both",SNS_APPLICATION_SENT_TO_ME:"Pendency_Type_ComeIn",SNS_APPLICATION_SENT_BY_ME:"Pendency_Type_SendOut",SNS_APPLICATION_AGREE:"Response_Action_Agree",SNS_APPLICATION_AGREE_AND_ADD:"Response_Action_AgreeAndAdd",SNS_CHECK_TYPE_BOTH:"CheckResult_Type_Both",SNS_CHECK_TYPE_SINGLE:"CheckResult_Type_Single",SNS_TYPE_NO_RELATION:"CheckResult_Type_NoRelation",SNS_TYPE_A_WITH_B:"CheckResult_Type_AWithB",SNS_TYPE_B_WITH_A:"CheckResult_Type_BWithA",SNS_TYPE_BOTH_WAY:"CheckResult_Type_BothWay",NET_STATE_CONNECTED:"connected",NET_STATE_CONNECTING:"connecting",NET_STATE_DISCONNECTED:"disconnected",MSG_AT_ALL:"__kImSDK_MesssageAtALL__",READ_ALL_C2C_MSG:"readAllC2CMessage",READ_ALL_GROUP_MSG:"readAllGroupMessage",READ_ALL_MSG:"readAllMessage",USER_STATUS_UNKNOWN:0,USER_STATUS_ONLINE:1,USER_STATUS_OFFLINE:2,USER_STATUS_UNLOGINED:3},T=function(){function e(){n(this,e),this.cache=[],this.options=null}return r(e,[{key:"use",value:function(e){if("function"!=typeof e)throw"middleware must be a function";return this.cache.push(e),this}},{key:"next",value:function(e){if(this.middlewares&&this.middlewares.length>0)return this.middlewares.shift().call(this,this.options,this.next.bind(this))}},{key:"run",value:function(e){return this.middlewares=this.cache.map((function(e){return e})),this.options=e,this.next()}}]),e}(),D=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;n(this,e),this.high=t,this.low=a}return r(e,[{key:"equal",value:function(e){return null!==e&&this.low===e.low&&this.high===e.high}},{key:"toString",value:function(){var e=Number(this.high).toString(16),t=Number(this.low).toString(16);if(t.length<8)for(var a=8-t.length;a;)t="0"+t,a--;return e+t}}]),e}(),b={TEST:{CHINA:{DEFAULT:"wss://wss-dev.tim.qq.com"},OVERSEA:{DEFAULT:"wss://wss-dev.tim.qq.com"},SINGAPORE:{DEFAULT:"wss://wsssgp-dev.im.qcloud.com"},KOREA:{DEFAULT:"wss://wsskr-dev.im.qcloud.com"},GERMANY:{DEFAULT:"wss://wssger-dev.im.qcloud.com"},IND:{DEFAULT:"wss://wssind-dev.im.qcloud.com"},JPN:{DEFAULT:"wss://wssjpn-dev.im.qcloud.com"},USA:{DEFAULT:"wss://wssusa-dev.im.qcloud.com"}},PRODUCTION:{CHINA:{DEFAULT:"wss://wss.im.qcloud.com",BACKUP:"wss://wss.tim.qq.com",STAT:"https://events.im.qcloud.com",ANYCAST:"wss://162.14.13.203"},OVERSEA:{DEFAULT:"wss://wss.im.qcloud.com",BACKUP:"wss://wss.my-imcloud.com",STAT:"https://api.my-imcloud.com"},SINGAPORE:{DEFAULT:"wss://wsssgp.im.qcloud.com",BACKUP:"wss://wsssgp.my-imcloud.com",STAT:"https://apisgp.my-imcloud.com"},KOREA:{DEFAULT:"wss://wsskr.im.qcloud.com",BACKUP:"wss://wsskr.my-imcloud.com",STAT:"https://apikr.my-imcloud.com"},GERMANY:{DEFAULT:"wss://wssger.im.qcloud.com",BACKUP:"wss://wssger.my-imcloud.com",STAT:"https://apiger.my-imcloud.com"},IND:{DEFAULT:"wss://wssind.my-imcloud.com",BACKUP:"wss://wssind.im.qcloud.com",STAT:"https://apiind.my-imcloud.com"},JPN:{DEFAULT:"wss://wssjpn.im.qcloud.com",BACKUP:"wss://wssjpn.my-imcloud.com",STAT:"https://apijpn.my-imcloud.com"},USA:{DEFAULT:"wss://wssusa.im.qcloud.com",BACKUP:"wss://wssusa.my-imcloud.com",STAT:"https://apiusa.my-imcloud.com"}}},V={ANDROID:2,IOS:3,MAC:4,WEB:7,WX_MP:8,QQ_MP:9,TT_MP:10,BAIDU_MP:11,ALI_MP:12,IPAD:13,UNI_NATIVE_APP:15},A="1.7.3",L=537048168,R="CHINA",O="OVERSEA",B="SINGAPORE",P="KOREA",U="GERMANY",G="IND",F="JPN",q="USA",z={HOST:{CURRENT:{DEFAULT:"wss://wss.im.qcloud.com",STAT:"https://events.im.qcloud.com"},setCurrent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R;this.CURRENT=b.PRODUCTION[e]}},NAME:{OPEN_IM:"openim",OPEN_IM_MSG_EXT:"openim_msg_ext_http_svc",GROUP:"group_open_http_svc",GROUP_AVCHATROOM:"group_open_avchatroom_http_svc",GROUP_COMMUNITY:"million_group_open_http_svc",GROUP_ATTR:"group_open_attr_http_svc",FRIEND:"sns",PROFILE:"profile",RECENT_CONTACT:"recentcontact",PIC:"openpic",BIG_GROUP_NO_AUTH:"group_open_http_noauth_svc",BIG_GROUP_LONG_POLLING:"group_open_long_polling_http_svc",BIG_GROUP_LONG_POLLING_NO_AUTH:"group_open_long_polling_http_noauth_svc",IM_OPEN_STAT:"imopenstat",WEB_IM:"webim",IM_COS_SIGN:"im_cos_sign_svr",CUSTOM_UPLOAD:"im_cos_msg",HEARTBEAT:"heartbeat",IM_OPEN_PUSH:"im_open_push",IM_OPEN_STATUS:"im_open_status",IM_LONG_MESSAGE:"im_long_msg",IM_CONFIG_MANAGER:"im_sdk_config_mgr",STAT_SERVICE:"StatSvc",OVERLOAD_PUSH:"OverLoadPush",IM_MSG_AUDIT_MGR:"im_msg_audit_mgr",TUIROOM_SVR:"tui_room_svr",IM_OPEN_TRANSLATE:"im_open_translate"},CMD:{LOGIN:"wslogin",LOGOUT_LONG_POLL:"longpollinglogout",LOGOUT:"wslogout",HELLO:"wshello",STAT_BACKGROUND:"ws_stat_background",STAT_FOREGROUND:"ws_stat_foreground",SET_TOKEN:"ws_stat_settoken",PORTRAIT_GET:"portrait_get_all",PORTRAIT_SET:"portrait_set",GET_LONG_POLL_ID:"getlongpollingid",LONG_POLL:"longpolling",AVCHATROOM_LONG_POLL:"get_msg",ADD_FRIEND:"friend_add",UPDATE_FRIEND:"friend_update",GET_FRIEND_LIST:"friend_get",GET_FRIEND_PROFILE:"friend_get_specified",DELETE_FRIEND:"friend_delete",CHECK_FRIEND:"friend_check",GET_FRIEND_GROUP_LIST:"group_get",RESPOND_FRIEND_APPLICATION:"friend_response",GET_FRIEND_APPLICATION_LIST:"pendency_get",DELETE_FRIEND_APPLICATION:"pendency_delete",REPORT_FRIEND_APPLICATION:"pendency_report",GET_GROUP_APPLICATION:"get_pendency",CREATE_FRIEND_GROUP:"group_add",DELETE_FRIEND_GROUP:"group_delete",UPDATE_FRIEND_GROUP:"group_update",GET_BLACKLIST:"black_list_get",ADD_BLACKLIST:"black_list_add",DELETE_BLACKLIST:"black_list_delete",CREATE_GROUP:"create_group",GET_JOINED_GROUPS:"get_joined_group_list",SET_GROUP_ATTRIBUTES:"set_group_attr",MODIFY_GROUP_ATTRIBUTES:"modify_group_attr",DELETE_GROUP_ATTRIBUTES:"delete_group_attr",CLEAR_GROUP_ATTRIBUTES:"clear_group_attr",GET_GROUP_ATTRIBUTES:"get_group_attr",SEND_MESSAGE:"sendmsg",REVOKE_C2C_MESSAGE:"msgwithdraw",DELETE_C2C_MESSAGE:"delete_c2c_msg_ramble",MODIFY_C2C_MESSAGE:"modify_c2c_msg",MODIFY_C2C_MESSAGE_EXTENSIONS:"set_key_values",GET_C2C_MESSAGE_EXTENSIONS:"get_key_values",SEND_GROUP_MESSAGE:"send_group_msg",REVOKE_GROUP_MESSAGE:"group_msg_recall",DELETE_GROUP_MESSAGE:"delete_group_ramble_msg_by_seq",MODIFY_GROUP_MESSAGE:"modify_group_msg",MODIFY_GROUP_MESSAGE_EXTENSIONS:"group_set_key_values",GET_GROUP_MESSAGE_EXTENSIONS:"group_get_key_values",GET_GROUP_INFO:"get_group_self_member_info",GET_GROUP_MEMBER_INFO:"get_specified_group_member_info",GET_GROUP_MEMBER_LIST:"get_group_member_info",GET_AVCHATROOM_MEMBER_LIST:"get_members",MARK_AVCHATROOM_MEMBER_INFO:"modify_user_info",QUIT_GROUP:"quit_group",CHANGE_GROUP_OWNER:"change_group_owner",DESTROY_GROUP:"destroy_group",ADD_GROUP_MEMBER:"add_group_member",DELETE_GROUP_MEMBER:"delete_group_member",BAN_AVCHATROOM_MEMBER:"ban_group_member",SEARCH_GROUP_BY_ID:"get_group_public_info",APPLY_JOIN_GROUP:"apply_join_group",HANDLE_APPLY_JOIN_GROUP:"handle_apply_join_group",HANDLE_INVITE_JOIN_GROUP:"handle_invite_join_permission_group",HANDLE_GROUP_INVITATION:"handle_invite_join_group",MODIFY_GROUP_INFO:"modify_group_base_info",MODIFY_GROUP_MEMBER_INFO:"modify_group_member_info",DELETE_GROUP_SYSTEM_MESSAGE:"deletemsg",DELETE_GROUP_AT_TIPS:"deletemsg",GET_GROUP_NOTIFY:"get_group_notify",GET_CONVERSATION_LIST:"get",PAGING_GET_CONVERSATION_LIST:"page_get",DELETE_CONVERSATION:"batch_delete",CLEAR_HISTORY_MESSAGE:"clear_msg",PIN_CONVERSATION:"top",SET_CONVERSATION_CUSTOM_DATA:"mark_contact",MARK_CONVERSATION:"mark_contact",CREATE_CONVERSATION_GROUP:"create_contact_group",DELETE_CONVERSATION_GROUP:"del_contact_group",UPDATE_CONVERSATION_GROUP:"update_contact_group",GET_CONVERSATION_GROUP_LIST:"get_contact_group",GET_MESSAGES:"getmsg",GET_C2C_ROAM_MESSAGES:"getroammsg",SET_C2C_PEER_MUTE_NOTIFICATIONS:"set_c2c_peer_mute_notifications",GET_C2C_PEER_MUTE_NOTIFICATIONS:"get_c2c_peer_mute_notifications",GET_GROUP_ROAM_MESSAGES:"group_msg_get",GET_READ_RECEIPT:"get_group_msg_receipt",GET_READ_RECEIPT_DETAIL:"get_group_msg_receipt_detail",SEND_READ_RECEIPT:"group_msg_receipt",SEND_C2C_READ_RECEIPT:"c2c_msg_read_receipt",SET_C2C_MESSAGE_READ:"msgreaded",GET_PEER_READ_TIME:"get_peer_read_time",SET_GROUP_MESSAGE_READ:"msg_read_report",FILE_READ_AND_WRITE_AUTHKEY:"authkey",FILE_UPLOAD:"pic_up",COS_SIGN:"cos",COS_PRE_SIG:"pre_sig",VIDEO_COVER:"video_cover",TIM_WEB_REPORT_V2:"tim_web_report_v2",BIG_DATA_HALLWAY_AUTH_KEY:"authkey",GET_ONLINE_MEMBER_NUM:"get_online_member_num",ALIVE:"alive",MESSAGE_PUSH:"msg_push",MULTI_MESSAGE_PUSH:"multi_msg_push_ws",MESSAGE_PUSH_ACK:"ws_msg_push_ack",STATUS_FORCE_OFFLINE:"stat_forceoffline",DOWNLOAD_MERGER_MESSAGE:"get_relay_json_msg",UPLOAD_MERGER_MESSAGE:"save_relay_json_msg",FETCH_CLOUD_CONTROL_CONFIG:"fetch_config",PUSHED_CLOUD_CONTROL_CONFIG:"push_configv2",FETCH_COMMERCIAL_CONFIG:"fetch_imsdk_purchase_bitsv2",PUSHED_COMMERCIAL_CONFIG:"push_imsdk_purchase_bitsv2",KICK_OTHER:"KickOther",OVERLOAD_NOTIFY:"notify2",SET_ALL_MESSAGE_READ:"read_all_unread_msg",CREATE_TOPIC:"create_topic",DELETE_TOPIC:"destroy_topic",UPDATE_TOPIC_PROFILE:"modify_topic",GET_TOPIC_LIST:"get_topic",SET_SELF_STATUS:"ws_set_custom_status",GET_USER_STATUS:"ws_get_user_status",SUBSCRIBE_USER_STATUS:"ws_status_subscribe",UNSUBSCRIBE_USER_STATUS:"ws_status_unsubscribe",GET_RPOFANITY_LIST:"get_local_words",TRANSLATE_TEXT:"ws_batch_trans_text",UPDATE_GROUP_COUNTER:"update_group_counter",GET_GROUP_COUNTER:"get_group_counter"},CHANNEL:{SOCKET:1,XHR:2,AUTO:0},NAME_VERSION:{openim:"v4",group_open_http_svc:"v4",sns:"v4",profile:"v4",recentcontact:"v4",openpic:"v4",group_open_http_noauth_svc:"v4",group_open_long_polling_http_svc:"v4",group_open_long_polling_http_noauth_svc:"v4",imopenstat:"v4",im_cos_sign_svr:"v4",im_cos_msg:"v4",webim:"v4",im_open_push:"v4",im_open_status:"v4"}},H={SEARCH_MSG:new D(0,Math.pow(2,0)).toString(),SEARCH_GRP_SNS:new D(0,Math.pow(2,1)).toString(),AVCHATROOM_HISTORY_MSG:new D(0,Math.pow(2,2)).toString(),GRP_COMMUNITY:new D(0,Math.pow(2,3)).toString(),MSG_TO_SPECIFIED_GRP_MBR:new D(0,Math.pow(2,4)).toString(),AVCHATROOM_MBR_LIST:new D(0,Math.pow(2,6)).toString(),USER_STATUS:new D(0,Math.pow(2,7)).toString(),CONV_MARK:new D(0,Math.pow(2,9)).toString(),CONV_GROUP:new D(0,Math.pow(2,10)).toString(),AVCHATROOM_BAN_MBR:new D(0,Math.pow(2,11)).toString(),MSG_EXT:new D(0,Math.pow(2,13)).toString(),GRP_COUNTER:new D(0,Math.pow(2,15)).toString()},$="c2c_text_message",j="c2c_custom_message",K="group_text_message",Y="group_custom_message",W="user_profile",J="group_profile",Z="group_member_profile";z.HOST.setCurrent(R);var X="undefined"!=typeof wx&&"function"==typeof wx.getSystemInfoSync&&Boolean(wx.getSystemInfoSync().fontSizeSetting),Q=X&&"function"==typeof wx.createGamePortal,ee="undefined"!=typeof qq&&"function"==typeof qq.getSystemInfoSync&&Boolean(qq.getSystemInfoSync().fontSizeSetting),te="undefined"!=typeof tt&&"function"==typeof tt.getSystemInfoSync&&Boolean(tt.getSystemInfoSync().fontSizeSetting),ae="undefined"!=typeof swan&&"function"==typeof swan.getSystemInfoSync&&Boolean(swan.getSystemInfoSync().fontSizeSetting),ne="undefined"!=typeof my&&"function"==typeof my.getSystemInfoSync&&Boolean(my.getSystemInfoSync().fontSizeSetting),oe="undefined"!=typeof jd&&"function"==typeof jd.getSystemInfoSync,ie="undefined"!=typeof uni&&"undefined"==typeof window&&!0,re="undefined"!=typeof uni,se=X||ee||te||ae||ne||ie||oe,le=("undefined"!=typeof uni||"undefined"!=typeof window)&&!se,ce=ee?qq:te?tt:ae?swan:ne?my:X?wx:ie?uni:oe?jd:{},ue=le&&window&&window.navigator&&window.navigator.userAgent||"",de=/(micromessenger|webbrowser)/i.test(ue),me=/AppleWebKit\/([\d.]+)/i.exec(ue);me&&parseFloat(me.pop());var pe,he,ve,ge=(pe="WEB",de?pe="WEB":ee?pe="QQ_MP":te?pe="TT_MP":ae?pe="BAIDU_MP":ne?pe="ALI_MP":X?pe="WX_MP":ie&&(pe="UNI_NATIVE_APP"),V[pe]),fe=/iPad/i.test(ue),ye=/iPhone/i.test(ue)&&!fe,_e=/iPod/i.test(ue),ke=ye||fe||_e,Ee=(he=ue.match(/OS (\d+)_/i))&&he[1]?he[1]:null,xe=/Android/i.test(ue),Ne=function(){var e=ue.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;var t=e[1]&&parseFloat(e[1]),a=e[2]&&parseFloat(e[2]);return t&&a?parseFloat(e[1]+"."+e[2]):t||null}();(ve=ue.match(/Chrome\/(\d+)/))&&ve[1]&&parseFloat(ve[1]);var we=/MSIE/.test(ue)||ue.indexOf("Trident")>-1&&ue.indexOf("rv:11.0")>-1,Ce=function(){var e=/MSIE\s(\d+)\.\d/.exec(ue),t=e&&parseFloat(e[1]);return!t&&/Trident\/7.0/i.test(ue)&&/rv:11.0/.test(ue)&&(t=11),t}();!function(){var e=ue.match(/TBS\/(\d+)/i);e&&e[1]&&e[1]}();var Me,Se,Ie=/Windows/i.test(ue),Te=/MAC OS X/i.test(ue),De=le&&"undefined"!=typeof Worker&&!we,be=xe||ke,Ve=le&&void 0!==window.tencent_cloud_im_csig_flutter_for_web_25F_cy;Me="undefined"!=typeof console?console:void 0!==h&&h.console?h.console:"undefined"!=typeof window&&window.console?window.console:{};for(var Ae=function(){},Le=["assert","clear","count","debug","dir","dirxml","error","group","groupCollapsed","groupEnd","info","log","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],Re=Le.length;Re--;)Se=Le[Re],console[Se]||(Me[Se]=Ae);var Oe=Me,Be=0,Pe=function(){return(new Date).getTime()+Be},Ue=function(){Be=0},Ge=function(){return Math.floor(Pe()/1e3)},Fe=0;function qe(){return Kt()?"%c TIM %c":"TIM"}function ze(){var e,t=((e=new Date).setTime(Pe()),e);return t.toLocaleTimeString("en-US",{hour12:!1})+"."+function(e){var t;switch(e.toString().length){case 1:t="00"+e;break;case 2:t="0"+e;break;default:t=e}return t}(t.getMilliseconds())}var He={arguments2String:function(e){var t="";if(1===e.length)t=e[0];else for(var a=0,n=e.length;a<n;a++)ut(e[a])?mt(e[a])?t+=gt(e[a]):t+=JSON.stringify(e[a]):t+=e[a],t+=" ";return t},_exec:function(e,t){Kt()?Oe[e](qe(),"background:#0abf5b; padding:1px; border-radius:3px; color: #fff","background:transparent",ze(),t):Oe[e]("".concat(qe()," ").concat(ze()," ").concat(t))},d:function(){if(Fe<=-1){var e=this.arguments2String(arguments);this._exec("debug",e)}},l:function(){if(Fe<=0){var e=this.arguments2String(arguments);this._exec("log",e)}},log:function(){if(Fe<=0){var e=this.arguments2String(arguments);this._exec("log",e)}},i:function(){if(Fe<=1){var e=this.arguments2String(arguments);this._exec("info",e)}},w:function(){if(Fe<=2){var e=this.arguments2String(arguments);this._exec("warn",e)}},e:function(){if(Fe<=3){var e=this.arguments2String(arguments);this._exec("error",e)}},setLevel:function(e){e<4&&this._exec("log","set level from "+Fe+" to "+e),Fe=e},getLevel:function(){return Fe}},$e={JPG:1,JPEG:1,GIF:2,PNG:3,BMP:4,UNKNOWN:255},je={NICK:"Tag_Profile_IM_Nick",GENDER:"Tag_Profile_IM_Gender",BIRTHDAY:"Tag_Profile_IM_BirthDay",LOCATION:"Tag_Profile_IM_Location",SELFSIGNATURE:"Tag_Profile_IM_SelfSignature",ALLOWTYPE:"Tag_Profile_IM_AllowType",LANGUAGE:"Tag_Profile_IM_Language",AVATAR:"Tag_Profile_IM_Image",MESSAGESETTINGS:"Tag_Profile_IM_MsgSettings",ADMINFORBIDTYPE:"Tag_Profile_IM_AdminForbidType",LEVEL:"Tag_Profile_IM_Level",ROLE:"Tag_Profile_IM_Role"},Ke={UNKNOWN:"Gender_Type_Unknown",FEMALE:"Gender_Type_Female",MALE:"Gender_Type_Male"},Ye={NONE:"AdminForbid_Type_None",SEND_OUT:"AdminForbid_Type_SendOut"},We={NEED_CONFIRM:"AllowType_Type_NeedConfirm",ALLOW_ANY:"AllowType_Type_AllowAny",DENY_ANY:"AllowType_Type_DenyAny"},Je="JoinedSuccess",Ze="WaitAdminApproval",Xe="@TGS#_",Qe="@TOPIC#_",et=["url"],at=function(e){return"map"===pt(e)},nt=function(e){return"file"===pt(e)},ot=function(e){return null!==e&&("number"==typeof e&&!isNaN(e-0)||"object"===a(e)&&e.constructor===Number)},it=function(e){return"string"==typeof e},rt=function(e){return null!==e&&"object"===a(e)},st=function(e){if("object"!==a(e)||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var n=t;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return t===n},lt=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"array"===pt(e)},ct=function(e){return void 0===e},ut=function(e){return lt(e)||rt(e)},dt=function(e){return"function"==typeof e},mt=function(e){return e instanceof Error},pt=function(e){return Object.prototype.toString.call(e).match(/^\[object (.*)\]$/)[1].toLowerCase()},ht=function(e){if("string"!=typeof e)return!1;var t=e[0];return!/[^a-zA-Z0-9]/.test(t)};Date.now||(Date.now=function(){return(new Date).getTime()});var vt=function e(t,a,n,o){if(!ut(t)||!ut(a))return 0;for(var i,r=0,s=Object.keys(a),l=0,c=s.length;l<c;l++)if(i=s[l],!(ct(a[i])||n&&n.includes(i)))if(ut(t[i])&&ut(a[i]))r+=e(t[i],a[i],n,o);else{if(o&&o.includes(a[i]))continue;t[i]!==a[i]&&(t[i]=a[i],r+=1)}return r},gt=function(e){return JSON.stringify(e,["message","code"])},ft=function(e){if(0===e.length)return 0;for(var t=0,a=0,n="undefined"!=typeof document&&void 0!==document.characterSet?document.characterSet:"UTF-8";void 0!==e[t];)a+=e[t++].charCodeAt[t]<=255?1:!1===n?3:2;return a},yt=function(e){var t=e||99999999;return Math.round(Math.random()*t)},_t="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",kt=_t.length,Et=function(e,t){for(var a in e)if(e[a]===t)return!0;return!1},xt={},Nt=function(e){return-1===e.indexOf("http://")||-1===e.indexOf("https://")?"https://"+e:e.replace(/https|http/,"https")},wt=function e(t){if(0===Object.getOwnPropertyNames(t).length)return Object.create(null);var n=Array.isArray(t)?[]:Object.create(null),o="";for(var i in t)null!==t[i]?void 0!==t[i]?(o=a(t[i]),["string","number","function","boolean"].indexOf(o)>=0?n[i]=t[i]:n[i]=e(t[i])):n[i]=void 0:n[i]=null;return n};function Ct(e,t){if(!lt(e)||!lt(t))return!1;var a=!1;return t.forEach((function(t){var n=t.key,o=t.value,i=e.find((function(e){return e.key===n}));i?i.value!==o&&(i.value=o,a=!0):(e.push({key:n,value:o}),a=!0)})),a}var Mt=function(e){return e===I.GRP_AVCHATROOM},St=function(e){var t=e.type,a=e.groupID;return t===I.GRP_COMMUNITY||"".concat(a).startsWith(Xe)&&!"".concat(a).includes(Qe)},It=function(e){return"".concat(e).startsWith(Xe)&&"".concat(e).includes(Qe)},Tt=function(e){return it(e)&&e.slice(0,3)===I.CONV_C2C},Dt=function(e){return it(e)&&e.slice(0,5)===I.CONV_GROUP},bt=function(e){return it(e)&&e===I.CONV_SYSTEM};function Vt(e,t){var a={};return Object.keys(e).forEach((function(n){a[n]=t(e[n],n)})),a}function At(e){return se?new Promise((function(t,a){ce.getImageInfo({src:e,success:function(e){t({width:e.width,height:e.height})},fail:function(){t({width:0,height:0})}})})):we&&9===Ce?Promise.resolve({width:0,height:0}):new Promise((function(t,a){var n=new Image;n.onload=function(){t({width:this.width,height:this.height}),n=null},n.onerror=function(){t({width:0,height:0}),n=null},n.src=e}))}function Lt(){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return"".concat(e()+e()).concat(e()).concat(e()).concat(e()).concat(e()).concat(e()).concat(e())}function Rt(){var e="unknown";if(Te&&(e="mac"),Ie&&(e="windows"),ke&&(e="ios"),xe&&(e="android"),se)try{var t=ce.getSystemInfoSync().platform;void 0!==t&&(e=t)}catch(a){}return e}function Ot(e,t){e=e.split("."),t=t.split(".");for(var a=Math.max(e.length,t.length);e.length<a;)e.push("0");for(;t.length<a;)t.push("0");for(var n=0;n<a;n++){var o=parseInt(e[n]),i=parseInt(t[n]);if(o>i)return 1;if(o<i)return-1}return 0}function Bt(e){var t=e.originUrl,a=void 0===t?void 0:t,n=e.originWidth,o=e.originHeight,i=e.min,r=void 0===i?198:i,s=parseInt(n),l=parseInt(o),c={url:void 0,width:0,height:0};if((s<=l?s:l)<=r)c.url=a,c.width=s,c.height=l;else{l<=s?(c.width=Math.ceil(s*r/l),c.height=r):(c.width=r,c.height=Math.ceil(l*r/s));var u=a&&a.indexOf("?")>-1?"".concat(a,"&"):"".concat(a,"?");c.url="".concat(u,198===r?"imageView2/3/w/198/h/198":"imageView2/3/w/720/h/720")}return ct(a)?(c.url,v(c,et)):c}function Pt(e){var t=e[2];e[2]=e[1],e[1]=t;for(var a=0;a<e.length;a++)e[a].setType(a)}function Ut(e){var t=e.servcmd;return t.slice(t.indexOf(".")+1)}function Gt(e,t){return Math.round(Number(e)*Math.pow(10,t))/Math.pow(10,t)}function Ft(e,t){return e.includes(t)}function qt(e,t){return e.includes(t)}function zt(e){return e.split(Qe)[0]}var Ht=function(e,t,a){if(ct(t))return"";switch(e){case I.MSG_TEXT:return t.text;case I.MSG_IMAGE:return a?"[Image]":"[图片]";case I.MSG_LOCATION:return a?"[Location]":"[位置]";case I.MSG_AUDIO:return a?"[Voice]":"[语音]";case I.MSG_VIDEO:return a?"[Video]":"[视频]";case I.MSG_FILE:return a?"[File]":"[文件]";case I.MSG_CUSTOM:return a?"[Custom Messages]":"[自定义消息]";case I.MSG_GRP_TIP:return a?"[Group Notification]":"[群提示消息]";case I.MSG_GRP_SYS_NOTICE:return a?"[Group System Message]":"[群系统通知]";case I.MSG_FACE:return a?"[Animated Sticker]":"[动画表情]";case I.MSG_MERGER:return a?"[Chat Record]":"[聊天记录]";default:return""}};function $t(e){return e===I.MSG_TEXT||e===I.MSG_CUSTOM||e===I.MSG_LOCATION||e===I.MSG_FACE}function jt(e){var t=[];if(!it(e))return t;var a=e.length;if(0===a)return t;for(var n=a-1;n>=0;n--)"1"===e[n]&&t.push(Math.pow(2,a-n-1));return t}function Kt(){return!we&&!se}function Yt(e){return"the length of userIDList cannot exceed ".concat(e)}function Wt(e,t){if(e){var a=e;return t&&(e.startsWith("http://")?a=e.replace(/^http:\/\/[^/]+/,t):e.startsWith("https://")&&(a=e.replace(/^https:\/\/[^/]+/,t))),a}}var Jt=Object.prototype.hasOwnProperty;function Zt(e){if(null==e)return!0;if("boolean"==typeof e)return!1;if("number"==typeof e)return 0===e;if("string"==typeof e)return 0===e.length;if("function"==typeof e)return 0===e.length;if(Array.isArray(e))return 0===e.length;if(e instanceof Error)return""===e.message;if(st(e)){for(var t in e)if(Jt.call(e,t))return!1;return!0}return!(!at(e)&&(a=e,"set"!==pt(a))&&!nt(e))&&0===e.size;var a}function Xt(e,t,a){if(void 0===t)return!0;var n=!0;if(st(t))Object.keys(t).forEach((function(o){var i=1===e.length?e[0][o]:void 0;n=!!Qt(i,t[o],a,o)&&n}));else if(lt(t))for(var o=0;o<t.length;o++)n=!!Qt(e[o],t[o],a,t[o].name)&&n;if(n)return n;throw new Error("Params validate failed.")}function Qt(e,t,a,n){if(void 0===t)return!0;var o=!0;if(t.required&&Zt(e)&&(He.e("[".concat(a,'] Missing required params: "').concat(n,'".')),o=!1),!Zt(e)){var i=pt(e),r=t.type.toLowerCase();i!==r&&("asyncfunction"===i&&"function"===r||(He.e("[".concat(a,'] Invalid params: type check failed for "').concat(n,'".Expected ').concat(t.type,".")),o=!1))}return t.validator&&!t.validator(e)&&(He.e("[".concat(a,"] Invalid params: custom validator check failed for params.")),o=!1),o}var ea,ta={UNSEND:"unSend",SUCCESS:"success",FAIL:"fail"},aa={NOT_START:"notStart",PENDING:"pending",RESOLVED:"resolved",REJECTED:"rejected"},na=function(e){if(!e)return!1;if(Tt(e)||Dt(e)||bt(e))return!0;var t=Ta("InvalidConversationID",e);return t&&He.w(t),!1},oa=function(e){""!==e.desc&&""!==Ta("API_REFER")&&He.w("[".concat(e.api,"] | ").concat(e.param," | ").concat(e.desc,", ").concat(Ta("API_REFER")).concat(e.api))},ia=function(){return Ta("StringRequiredLog")},ra=function(e){return Ta("NonEmptyStringRequiredLog",e)},sa=function(){return Ta("NumberRequiredLog")},la=function(){return Ta("UndefinedNotAllowedLog")},ca=function(){return Ta("FileRequiredLog")},ua=function(){return Ta("FunctionRequiredLog")},da=function(){return Ta("ArrayRequiredLog")},ma=function(){return Ta("NonEmptyArrayLog")},pa=function(){return Ta("CallbackMissingLog")},ha=function(){return Ta("PositiveIntegerRequiredLog")},va=function(e,t){return Ta("StringNotLongerThanLog",e,t)},ga=function(e,t){return Ta("NumberLessThanLog",e,t)},fa=function(e){return Ta("KeyValueStringRequiredLog",e)},ya=function(){return Ta("PlainObjectRequiredLog")},_a=function(){return Ta("NonEmptyContentRequiredLog")},ka=function(){return Ta("FileNotSelectedLog")},Ea=function(){return Ta("MessageInstanceRequiredLog")},xa=function(){return Ta("NonAnonymousFunctionLog")},Na=function(){return Ta("MessageExtensionNotAvailableLog")},wa={type:"String",required:!0},Ca={type:"Array",required:!0},Ma={type:"Object",required:!0},Sa={type:"Boolean",required:!0},Ia={type:"number",required:!0},Ta=null,Da={hookGetAPITips:function(e){Ta=e},login:{userID:wa,userSig:wa},addToBlacklist:{userIDList:Ca},removeFromBlacklist:{userIDList:Ca},on:[{name:"eventName",type:"String",validator:function(e){return"string"==typeof e&&0!==e.length||(oa({api:"on",param:"eventName",desc:ra("eventName")}),!1)}},{name:"handler",type:"Function",validator:function(e){return"function"!=typeof e?(oa({api:"on",param:"handler",desc:ua()}),!1):(""===e.name&&oa({api:"on",param:"handler",desc:xa()}),!0)}}],once:[{name:"eventName",type:"String",validator:function(e){return"string"==typeof e&&0!==e.length||(oa({api:"once",param:"eventName",desc:ra("eventName")}),!1)}},{name:"handler",type:"Function",validator:function(e){return"function"!=typeof e?(oa({api:"once",param:"handler",desc:ua()}),!1):(""===e.name&&oa({api:"once",param:"handler",desc:xa()}),!0)}}],off:[{name:"eventName",type:"String",validator:function(e){return"string"==typeof e&&0!==e.length||(oa({api:"off",param:"eventName",desc:ra("eventName")}),!1)}},{name:"handler",type:"Function",validator:function(e){return"function"!=typeof e?(oa({api:"off",param:"handler",desc:ua()}),!1):(""===e.name&&oa({api:"off",param:"handler",desc:xa()}),!0)}}],sendMessage:[t({name:"message"},Ma)],setMessageExtensions:[t(t({name:"message"},Ma),{},{validator:function(e){return e.status===ta.SUCCESS&&!0===e.isSupportExtension||(oa({api:"setMessageExtensions",param:"message",desc:Na()}),!1)}}),t({name:"extensions"},Ca)],getMessageExtensions:[t(t({name:"message"},Ma),{},{validator:function(e){return e.status===ta.SUCCESS&&!0===e.isSupportExtension||(oa({api:"getMessageExtensions",param:"message",desc:Na()}),!1)}})],deleteMessageExtensions:[t(t({name:"message"},Ma),{},{validator:function(e){return e.status===ta.SUCCESS&&!0===e.isSupportExtension||(oa({api:"deleteMessageExtensions",param:"message",desc:Na()}),!1)}})],getMessageList:{conversationID:t(t({},wa),{},{validator:function(e){return na(e)}}),nextReqMessageID:{type:"String"},count:{type:"Number",validator:function(e){return!(!ct(e)&&!/^[1-9][0-9]*$/.test(e)&&(oa({api:"getMessageList",param:"count",desc:ha()}),1))}}},getMessageListHopping:{conversationID:t(t({},wa),{},{validator:function(e){return na(e)}}),sequence:{type:"Number"},time:{type:"Number"},direction:{type:"Number",validator:function(e){return!(!ct(e)&&0!==e&&1!==e&&(oa({api:"getMessageListHopping",param:"direction",desc:Ta("0Or1RequiredLog")}),1))}},count:{type:"Number",validator:function(e){return!(!ct(e)&&!/^[1-9][0-9]*$/.test(e)&&(oa({api:"getMessageListHopping",param:"count",desc:ha}),1))}}},setMessageRead:{conversationID:t(t({},wa),{},{validator:function(e){return na(e)}})},setAllMessageRead:{scope:{type:"String",required:!1,validator:function(e){return!e||-1!==[I.READ_ALL_C2C_MSG,I.READ_ALL_GROUP_MSG,I.READ_ALL_MSG].indexOf(e)||(oa({api:"setAllMessageRead",param:"scope",desc:"TIM.TYPES.READ_ALL_C2C_MSG or TIM.TYPES.READ_ALL_GROUP_MSG or TIM.TYPES.READ_ALL_MSG required"}),!1)}}},getConversationProfile:[t(t({name:"conversationID"},wa),{},{validator:function(e){return na(e)}})],clearHistoryMessage:[t(t({name:"conversationID"},wa),{},{validator:function(e){return na(e)}})],pinConversation:{conversationID:t(t({},wa),{},{validator:function(e){return na(e)}}),isPinned:t({},Sa)},setConversationCustomData:{conversationIDList:t({},Ca),customData:{type:"String",validator:function(e){return it(e)?!(e.length>256&&(oa({api:"setConversationCustomData",param:"customData",desc:va("customData",256)}),1)):(oa({api:"setConversationCustomData",param:"customData",desc:ia()}),!1)}}},markConversation:{conversationIDList:t({},Ca),markType:{type:"number",validator:function(e){return ot(e)?e<=0?(oa({api:"markConversation",param:"markType",desc:(t="markType",a=0,Ta("NumberGreaterThanLog",t,a))}),!1):!(e>=Math.pow(2,64)&&(oa({api:"markConversation",param:"markType",desc:ga("markType","Math.pow(2,64)")}),1)):(oa({api:"markConversation",param:"markType",desc:sa()}),!1);var t,a}},enableMark:t({},Sa)},createConversationGroup:{conversationIDList:t({},Ca),groupName:t(t({},wa),{},{validator:function(e){return!(!e||e.length>32&&(oa({api:"createConversationGroup",param:"groupName",desc:va("groupName",32)}),1))}})},deleteConversationGroup:[t({name:"groupName"},wa)],renameConversationGroup:{oldName:t({},wa),newName:t(t({},wa),{},{validator:function(e){return!(!e||e.length>32&&(oa({api:"renameConversationGroup",param:"newName",desc:va("newName",32)}),1))}})},addConversationsToGroup:{conversationIDList:t({},Ca),groupName:t({},wa)},deleteConversationsFromGroup:{conversationIDList:t({},Ca),groupName:t({},wa)},getGroupList:{groupProfileFilter:{type:"Array"}},getGroupProfile:{groupID:wa,groupCustomFieldFilter:{type:"Array"},memberCustomFieldFilter:{type:"Array"}},getGroupProfileAdvance:{groupIDList:Ca},createGroup:{name:wa},joinGroup:{groupID:wa,type:{type:"String"},applyMessage:{type:"String"}},quitGroup:[t({name:"groupID"},wa)],handleApplication:{message:Ma,handleAction:wa,handleMessage:{type:"String"}},changeGroupOwner:{groupID:wa,newOwnerID:wa},updateGroupProfile:{groupID:wa,muteAllMembers:{type:"Boolean"}},dismissGroup:[t({name:"groupID"},wa)],searchGroupByID:[t({name:"groupID"},wa)],initGroupAttributes:{groupID:wa,groupAttributes:t(t({},Ma),{},{validator:function(e){var t=!0;return Object.keys(e).forEach((function(a){if(!it(e[a]))return oa({api:"initGroupAttributes",param:"groupAttributes",desc:fa("value")}),t=!1})),t}})},setGroupAttributes:{groupID:wa,groupAttributes:t(t({},Ma),{},{validator:function(e){var t=!0;return Object.keys(e).forEach((function(a){if(!it(e[a]))return oa({api:"setGroupAttributes",param:"groupAttributes",desc:fa("value")}),t=!1})),t}})},deleteGroupAttributes:{groupID:wa,keyList:{type:"Array",validator:function(e){if(ct(e)||!lt(e))return oa({api:"deleteGroupAttributes",param:"keyList",desc:da()}),!1;if(!Zt(e)){var t=!0;return e.forEach((function(e){if(!it(e))return oa({api:"deleteGroupAttributes",param:"keyList",desc:Ta("StringArrayRequiredLog")}),t=!1})),t}return!0}}},getGroupAttributes:{groupID:wa,keyList:{type:"Array",validator:function(e){if(ct(e)||!lt(e))return oa({api:"getGroupAttributes",param:"keyList",desc:da()}),!1;if(!Zt(e)){var t=!0;return e.forEach((function(e){if(!it(e))return oa({api:"getGroupAttributes",param:"keyList",desc:fa("key")}),t=!1})),t}return!0}}},setGroupCounters:{groupID:wa,counters:Ma},increaseGroupCounter:{groupID:wa,key:wa,value:Ia},decreaseGroupCounter:{groupID:wa,key:wa,value:Ia},getGroupCounters:{groupID:wa},getGroupMemberList:{groupID:wa,count:{type:"Number"}},getGroupMemberProfile:{groupID:wa,userIDList:Ca,memberCustomFieldFilter:{type:"Array"}},addGroupMember:{groupID:wa,userIDList:Ca},setGroupMemberRole:{groupID:wa,userID:wa,role:wa},setGroupMemberMuteTime:{groupID:wa,userID:wa,muteTime:{type:"Number",validator:function(e){return e>=0}}},setGroupMemberNameCard:{groupID:wa,userID:{type:"String"},nameCard:{type:"String",validator:function(e){return it(e)?(e.length,!0):(oa({api:"setGroupMemberNameCard",param:"nameCard",desc:ia()}),!1)}}},setGroupMemberCustomField:{groupID:wa,userID:{type:"String"},memberCustomField:Ca},deleteGroupMember:{groupID:wa},markGroupMemberList:{groupID:wa,markType:{type:"number",validator:function(e){return ot(e)?!(e<1e3&&(oa({api:"markGroupMemberList",param:"markType",desc:(t="markType",a=1e3,Ta("NumberGreaterOrEqualLog",t,a))}),1)):(oa({api:"markGroupMemberList",param:"markType",desc:sa()}),!1);var t,a}},userIDList:t({},Ca),enableMark:t({},Sa)},createTextMessage:{to:wa,conversationType:wa,payload:t(t({},Ma),{},{validator:function(e){return st(e)?it(e.text)?0!==e.text.length||(oa({api:"createTextMessage",param:"payload.text",desc:_a()}),!1):(oa({api:"createTextMessage",param:"payload.text",desc:ia()}),!1):(oa({api:"createTextMessage",param:"payload",desc:ya()}),!1)}})},createTextAtMessage:{to:wa,conversationType:wa,payload:t(t({},Ma),{},{validator:function(e){return st(e)?it(e.text)?0===e.text.length?(oa({api:"createTextAtMessage",param:"payload.text",desc:_a()}),!1):!(e.atUserList&&!lt(e.atUserList)&&(oa({api:"createTextAtMessage",param:"payload.atUserList",desc:da()}),1)):(oa({api:"createTextAtMessage",param:"payload.text",desc:ia()}),!1):(oa({api:"createTextAtMessage",param:"payload",desc:ya()}),!1)}})},createCustomMessage:{to:wa,conversationType:wa,payload:t(t({},Ma),{},{validator:function(e){return st(e)?e.data&&!it(e.data)?(oa({api:"createCustomMessage",param:"payload.data",desc:ia()}),!1):e.description&&!it(e.description)?(oa({api:"createCustomMessage",param:"payload.description",desc:ia()}),!1):!(e.extension&&!it(e.extension)&&(oa({api:"createCustomMessage",param:"payload.extension",desc:ia()}),1)):(oa({api:"createCustomMessage",param:"payload",desc:ya()}),!1)}})},createImageMessage:{to:wa,conversationType:wa,payload:t(t({},Ma),{},{validator:function(e){if(!st(e))return oa({api:"createImageMessage",param:"payload",desc:ya()}),!1;if(ct(e.file))return oa({api:"createImageMessage",param:"payload.file",desc:la()}),!1;if(le){if(!(e.file instanceof HTMLInputElement||nt(e.file)))return st(e.file)&&"undefined"!=typeof uni?0!==e.file.tempFilePaths.length&&0!==e.file.tempFiles.length||(oa({api:"createImageMessage",param:"payload.file",desc:ka()}),!1):(oa({api:"createImageMessage",param:"payload.file",desc:ca()}),!1);if(e.file instanceof HTMLInputElement&&0===e.file.files.length)return oa({api:"createImageMessage",param:"payload.file",desc:ka()}),!1}return!0},onProgress:{type:"Function",required:!1,validator:function(e){return ct(e)&&oa({api:"createImageMessage",param:"onProgress",desc:pa()}),!0}}})},createAudioMessage:{to:wa,conversationType:wa,payload:t(t({},Ma),{},{validator:function(e){return!!st(e)||(oa({api:"createAudioMessage",param:"payload",desc:ya()}),!1)}}),onProgress:{type:"Function",required:!1,validator:function(e){return ct(e)&&oa({api:"createAudioMessage",param:"onProgress",desc:pa()}),!0}}},createVideoMessage:{to:wa,conversationType:wa,payload:t(t({},Ma),{},{validator:function(e){if(!st(e))return oa({api:"createVideoMessage",param:"payload",desc:ya()}),!1;if(ct(e.file))return oa({api:"createVideoMessage",param:"payload.file",desc:la()}),!1;if(le){if(!(e.file instanceof HTMLInputElement||nt(e.file)))return st(e.file)&&"undefined"!=typeof uni?!!nt(e.file.tempFile)||(oa({api:"createVideoMessage",param:"payload.file",desc:ka()}),!1):(oa({api:"createVideoMessage",param:"payload.file",desc:ca()}),!1);if(e.file instanceof HTMLInputElement&&0===e.file.files.length)return oa({api:"createVideoMessage",param:"payload.file",desc:ka()}),!1}return!0}}),onProgress:{type:"Function",required:!1,validator:function(e){return ct(e)&&oa({api:"createVideoMessage",param:"onProgress",desc:pa()}),!0}}},createFaceMessage:{to:wa,conversationType:wa,payload:t(t({},Ma),{},{validator:function(e){return st(e)?ot(e.index)?!!it(e.data)||(oa({api:"createFaceMessage",param:"payload.data",desc:ia()}),!1):(oa({api:"createFaceMessage",param:"payload.index",desc:sa()}),!1):(oa({api:"createFaceMessage",param:"payload",desc:ya()}),!1)}})},createFileMessage:{to:wa,conversationType:wa,payload:t(t({},Ma),{},{validator:function(e){if(!st(e))return oa({api:"createFileMessage",param:"payload",desc:ya()}),!1;if(ct(e.file))return oa({api:"createFileMessage",param:"payload.file",desc:la()}),!1;if(le){if(!(e.file instanceof HTMLInputElement||nt(e.file)))return st(e.file)&&"undefined"!=typeof uni?0!==e.file.tempFilePaths.length&&0!==e.file.tempFiles.length||(oa({api:"createFileMessage",param:"payload.file",desc:ka()}),!1):(oa({api:"createFileMessage",param:"payload.file",desc:ca()}),!1);if(e.file instanceof HTMLInputElement&&0===e.file.files.length)return oa({api:"createFileMessage",param:"payload.file",desc:ka()}),!1}return!0}}),onProgress:{type:"Function",required:!1,validator:function(e){return ct(e)&&oa({api:"createFileMessage",param:"onProgress",desc:pa()}),!0}}},createLocationMessage:{to:wa,conversationType:wa,payload:t(t({},Ma),{},{validator:function(e){return st(e)?it(e.description)?ot(e.longitude)?!!ot(e.latitude)||(oa({api:"createLocationMessage",param:"payload.latitude",desc:sa()}),!1):(oa({api:"createLocationMessage",param:"payload.longitude",desc:sa()}),!1):(oa({api:"createLocationMessage",param:"payload.description",desc:ia()}),!1):(oa({api:"createLocationMessage",param:"payload",desc:ya()}),!1)}})},createMergerMessage:{to:wa,conversationType:wa,payload:t(t({},Ma),{},{validator:function(e){if(Zt(e.messageList))return oa({api:"createMergerMessage",param:"payload.messageList",desc:ma()}),!1;if(Zt(e.compatibleText))return oa({api:"createMergerMessage",param:"payload.compatibleText",desc:ra("compatibleText")}),!1;var t=!1;return e.messageList.forEach((function(e){e.status===ta.FAIL&&(t=!0)})),!t||(oa({api:"createMergerMessage",param:"payload.messageList",desc:Ta("MergeFailedMessageLog")}),!1)}})},revokeMessage:[t(t({name:"message"},Ma),{},{validator:function(e){return Zt(e)?(oa({api:"revokeMessage",param:"message",desc:Ea()}),!1):e.conversationType===I.CONV_SYSTEM?(oa({api:"revokeMessage",param:"message",desc:Ta("MessageCanBeRevokedDesc")}),!1):!0!==e.isRevoked||(oa({api:"revokeMessage",param:"message",desc:Ta("MessageRevokedLog")}),!1)}})],deleteMessage:[t(t({name:"messageList"},Ca),{},{validator:function(e){return!Zt(e)||(oa({api:"deleteMessage",param:"messageList",desc:ma()}),!1)}})],translateText:{sourceTextList:Ca,sourceLanguage:wa,targetLanguage:wa},modifyMessage:[t(t({name:"message"},Ma),{},{validator:function(e){return Zt(e)?(oa({api:"modifyMessage",param:"message",desc:Ea()}),!1):e.conversationType===I.CONV_SYSTEM?(oa({api:"modifyMessage",param:"message",desc:Ta("MessageCanBeModifiedLog")}),!1):!0!==e._onlineOnlyFlag||(oa({api:"modifyMessage",param:"message",desc:Ta("OnlineMessageNotSupportLog")}),!1)}})],getUserProfile:{userIDList:{type:"Array",validator:function(e){return lt(e)?(0===e.length&&oa({api:"getUserProfile",param:"userIDList",desc:ma()}),!0):(oa({api:"getUserProfile",param:"userIDList",desc:da()}),!1)}}},updateMyProfile:{profileCustomField:{type:"Array",validator:function(e){return!!ct(e)||!!lt(e)||(oa({api:"updateMyProfile",param:"profileCustomField",desc:da()}),!1)}}},setSelfStatus:{customStatus:{type:"String",validator:function(e){return!!it(e)||(oa({api:"setSelfStatus",param:"customStatus",desc:ia()}),!1)}}},getUserStatus:{userIDList:{type:"Array",validator:function(e){return lt(e)?0!==e.length||(oa({api:"getUserStatus",param:"userIDList",desc:ma()}),!1):(oa({api:"getUserStatus",param:"userIDList",desc:da()}),!1)}}},subscribeUserStatus:{userIDList:{type:"Array",validator:function(e){return lt(e)?0!==e.length||(oa({api:"subscribeUserStatus",param:"userIDList",desc:ma()}),!1):(oa({api:"subscribeUserStatus",param:"userIDList",desc:da()}),!1)}}},unsubscribeUserStatus:{userIDList:{type:"Array",validator:function(e){return!e||!!lt(e)||(oa({api:"subscribeUserStatus",param:"userIDList",desc:da()}),!1)}}},addFriend:{to:wa,source:{type:"String",required:!0,validator:function(e){return!(!e||(e.startsWith("AddSource_Type_")?e.replace("AddSource_Type_","").length>8&&(oa({api:"addFriend",param:"source",desc:va("keyword",8)}),1):(oa({api:"addFriend",param:"source",desc:Ta("SourcePrefixLog")}),1)))}},remark:{type:"String",required:!1,validator:function(e){return!(it(e)&&e.length>96&&(oa({api:"addFriend",param:"remark",desc:va("remark",96)}),1))}}},deleteFriend:{userIDList:Ca},checkFriend:{userIDList:Ca},getFriendProfile:{userIDList:Ca},updateFriend:{userID:wa,remark:{type:"String",required:!1,validator:function(e){return!(it(e)&&e.length>96&&(oa({api:"updateFriend",param:"remark",desc:va("remark",96)}),1))}},friendCustomField:{type:"Array",required:!1,validator:function(e){if(e){if(!lt(e))return oa({api:"updateFriend",param:"friendCustomField",desc:da()}),!1;var t=!0;return e.forEach((function(e){return it(e.key)&&-1!==e.key.indexOf("Tag_SNS_Custom")?it(e.value)?e.key.replace("Tag_SNS_Custom_","").length>8?(oa({api:"updateFriend",param:"friendCustomField",desc:va("keyword",8)}),t=!1):void 0:(oa({api:"updateFriend",param:"friendCustomField",desc:fa("value")}),t=!1):(oa({api:"updateFriend",param:"friendCustomField",desc:Ta("FriendCustomFieldPrefixLog")}),t=!1)})),t}return!0}}},acceptFriendApplication:{userID:wa},refuseFriendApplication:{userID:wa},deleteFriendApplication:{userID:wa},createFriendGroup:{name:wa},deleteFriendGroup:{name:wa},addToFriendGroup:{name:wa,userIDList:Ca},removeFromFriendGroup:{name:wa,userIDList:Ca},renameFriendGroup:{oldName:wa,newName:wa},sendMessageReadReceipt:[{name:"messageList",type:"Array",validator:function(e){return lt(e)?0!==e.length||(oa({api:"sendMessageReadReceipt",param:"messageList",desc:ma()}),!1):(oa({api:"sendMessageReadReceipt",param:"messageList",desc:da()}),!1)}}],getMessageReadReceiptList:[{name:"messageList",type:"Array",validator:function(e){return lt(e)?0!==e.length||(oa({api:"getMessageReadReceiptList",param:"messageList",desc:ma()}),!1):(oa({api:"getMessageReadReceiptList",param:"messageList",desc:da()}),!1)}}],createTopicInCommunity:{groupID:wa,topicName:wa},deleteTopicFromCommunity:{groupID:wa,topicIDList:{type:"Array",validator:function(e){return!e||!!lt(e)||(oa({api:"deleteTopicFromCommunity",param:"topicIDList",desc:da()}),!1)}}},updateTopicProfile:{groupID:wa,topicID:wa},getTopicList:{groupID:wa,topicIDList:{type:"Array",validator:function(e){return!e||!!lt(e)||(oa({api:"getTopicList",param:"topicIDList",desc:da()}),!1)}}}},ba={login:1,logout:1,on:1,once:1,off:1,setLogLevel:1,registerPlugin:1,destroy:1,createTextMessage:1,createTextAtMessage:1,createImageMessage:1,createAudioMessage:1,createVideoMessage:1,createCustomMessage:1,createFaceMessage:1,createFileMessage:1,createLocationMessage:1,createMergerMessage:1,downloadMergerMessage:1,createForwardMessage:1,sendMessage:1,resendMessage:1,revokeMessage:1,deleteMessage:1,translateText:1,modifyMessage:1,sendMessageReadReceipt:1,getGroupMessageReadMemberList:1,getMessageReadReceiptList:1,setMessageExtensions:1,getMessageExtensions:1,deleteMessageExtensions:1,getMessageList:1,findMessage:1,getMessageListHopping:1,setMessageRead:1,setAllMessageRead:1,getConversationList:1,getConversationProfile:1,deleteConversation:1,pinConversation:1,getTotalUnreadMessageCount:1,setConversationCustomData:1,markConversation:1,createConversationGroup:1,getConversationGroupList:1,deleteConversationGroup:1,renameConversationGroup:1,addConversationsToGroup:1,deleteConversationsFromGroup:1,clearHistoryMessage:1,getGroupList:1,getGroupProfile:1,createGroup:1,joinGroup:1,updateGroupProfile:1,quitGroup:1,dismissGroup:1,changeGroupOwner:1,searchGroupByID:1,setMessageRemindType:1,getGroupApplicationList:1,handleGroupApplication:1,initGroupAttributes:1,setGroupAttributes:1,deleteGroupAttributes:1,getGroupAttributes:1,setGroupCounters:1,increaseGroupCounter:1,decreaseGroupCounter:1,getGroupCounters:1,getJoinedCommunityList:1,createTopicInCommunity:1,deleteTopicFromCommunity:1,updateTopicProfile:1,getTopicList:1,getGroupMemberProfile:1,getGroupMemberList:1,addGroupMember:1,deleteGroupMember:1,setGroupMemberNameCard:1,setGroupMemberMuteTime:1,setGroupMemberRole:1,setGroupMemberCustomField:1,getGroupOnlineMemberCount:1,markGroupMemberList:1,getMyProfile:1,getUserProfile:1,updateMyProfile:1,setSelfStatus:1,getUserStatus:1,subscribeUserStatus:1,unsubscribeUserStatus:1,getBlacklist:1,addToBlacklist:1,removeFromBlacklist:1,getFriendList:1,addFriend:1,deleteFriend:1,checkFriend:1,updateFriend:1,getFriendProfile:1,getFriendApplicationList:1,refuseFriendApplication:1,deleteFriendApplication:1,acceptFriendApplication:1,setFriendApplicationRead:1,getFriendGroupList:1,createFriendGroup:1,renameFriendGroup:1,deleteFriendGroup:1,addToFriendGroup:1,removeFromFriendGroup:1,callExperimentalAPI:1},Va=1,Aa=2,La=3,Ra=4,Oa=6,Ba=7,Pa=8,Ua=9,Ga=10,Fa=11,qa=12,za=13,Ha=14,$a=15,ja=16,Ka=17,Ya=18,Wa=19,Ja=20,Za=21,Xa=22,Qa=23,en=24,tn=25,an=26,nn=27,on=28,rn=29,sn=30,ln=31,cn=32,un=37,dn=function(){function e(t){n(this,e),this._m=t,this._n=""}return r(e,[{key:"isLoggedIn",value:function(){return this._m.getModule(qa).isLoggedIn()}},{key:"isOversea",value:function(){return this._m.getModule(qa).isOversea()}},{key:"isPrivateNetWork",value:function(){return this._m.getModule(qa).isPrivateNetWork()}},{key:"getFileDownloadProxy",value:function(){return this._m.getModule(qa).getFileDownloadProxy()}},{key:"getMyUserID",value:function(){return this._m.getModule(qa).getUserID()}},{key:"getMyTinyID",value:function(){return this._m.getModule(qa).getTinyID()}},{key:"getSDKAppID",value:function(){return this._m.getModule(qa).getSDKAppID()}},{key:"isIntl",value:function(){return this._m.getModule(qa).isIntl()}},{key:"isDevMode",value:function(){return this._m.getModule(qa).isDevMode()}},{key:"getModule",value:function(e){return this._m.getModule(e)}},{key:"getPlatform",value:function(){return ge}},{key:"getNetworkType",value:function(){return this._m.getModule($a).getNetworkType()}},{key:"probeNetwork",value:function(e){return this._m.getModule($a).probe(e)}},{key:"getCloudConfig",value:function(e){return this._m.getModule(Qa).getCloudConfig(e)}},{key:"emitOuterEvent",value:function(e,t){this._m.getOuterEmitterInstance().emit(e,t)}},{key:"emitInnerEvent",value:function(e,t){this._m.getInnerEmitterInstance().emit(e,t)}},{key:"getInnerEmitterInstance",value:function(){return this._m.getInnerEmitterInstance()}},{key:"generateTjgID",value:function(e){return this._m.getModule(qa).getTinyID()+"-"+e.random}},{key:"filterModifiedMessage",value:function(e){if(!Zt(e)){var t=e.filter((function(e){return!0===e.isModified}));t.length>0&&this.emitOuterEvent(S.MESSAGE_MODIFIED,t)}}},{key:"filterUnmodifiedMessage",value:function(e){return Zt(e)?[]:e.filter((function(e){return!1===e.isModified}))}},{key:"request",value:function(e){return this._m.getModule(Ja).request(e)}},{key:"canIUse",value:function(e){return this._m.getModule(nn).canIUse(e)}},{key:"getErrorMessage",value:function(e,t,a){return this._m.getErrorMessage(e,t,a)}},{key:"outputWarning",value:function(e,t,a){var n=this.getErrorMessage(e,t,a);n&&He.w(n)}}]),e}(),mn="wslogin",pn="wslogout",hn="wshello",vn="KickOther",gn="getmsg",fn="authkey",yn="sendmsg",_n="send_group_msg",kn="portrait_get_all",En="portrait_set",xn="black_list_get",Nn="black_list_add",wn="black_list_delete",Cn="msgwithdraw",Mn="msgreaded",Sn="set_c2c_peer_mute_notifications",In="get_c2c_peer_mute_notifications",Tn="getroammsg",Dn="get_peer_read_time",bn="delete_c2c_msg_ramble",Vn="modify_c2c_msg",An="set_key_values",Ln="get_key_values",Rn="page_get",On="get",Bn="batch_delete",Pn="clear_msg",Un="top",Gn="deletemsg",Fn="set_conv_custom_data",qn="mark_contact",zn="create_contact_group",Hn="del_contact_group",$n="update_contact_group",jn="add_conv_to_group",Kn="del_conv_from_group",Yn="get_contact_group",Wn="get_joined_group_list",Jn="get_group_self_member_info",Zn="create_group",Xn="destroy_group",Qn="modify_group_base_info",eo="apply_join_group",to="apply_join_group_noauth",ao="quit_group",no="get_group_public_info",oo="change_group_owner",io="handle_apply_join_group",ro="handle_invite_join_permission_group",so="handle_invite_join_group",lo="group_msg_recall",co="msg_read_report",uo="read_all_unread_msg",mo="group_msg_get",po="get_group_msg_receipt",ho="group_msg_receipt",vo="c2c_msg_read_receipt",go="get_group_msg_receipt_detail",fo="get_pendency",yo="deletemsg",_o="get_msg",ko="get_msg_noauth",Eo="get_online_member_num",xo="delete_group_ramble_msg_by_seq",No="modify_group_msg",wo="set_group_attr",Co="modify_group_attr",Mo="delete_group_attr",So="clear_group_attr",Io="get_group_attr",To="group_set_key_values",Do="group_get_key_values",bo="get_group_notify",Vo="update_group_counter",Ao="get_group_counter",Lo="get_group_member_info",Ro="get_members",Oo="get_specified_group_member_info",Bo="add_group_member",Po="delete_group_member",Uo="ban_group_member",Go="modify_group_member_info",Fo="modify_user_info",qo="cos",zo="pre_sig",Ho="video_cover",$o="tim_web_report_v2",jo="alive",Ko="msg_push",Yo="multi_msg_push_ws",Wo="ws_msg_push_ack",Jo="stat_forceoffline",Zo="save_relay_json_msg",Xo="get_relay_json_msg",Qo="fetch_config",ei="push_configv2",ti="fetch_imsdk_purchase_bitsv2",ai="push_imsdk_purchase_bitsv2",ni="notify2",oi="create_topic",ii="destroy_topic",ri="modify_topic",si="get_topic",li="ws_set_custom_status",ci="ws_get_user_status",ui="ws_status_subscribe",di="ws_status_unsubscribe",mi="ws_stat_background",pi="ws_stat_foreground",hi="ws_stat_settoken",vi="get_local_words",gi="ws_batch_trans_text",fi={NO_SDKAPPID:2e3,NO_ACCOUNT_TYPE:2001,NO_IDENTIFIER:2002,NO_USERSIG:2003,NO_TINYID:2022,NO_A2KEY:2023,USER_NOT_LOGGED_IN:2024,REPEAT_LOGIN:2025,COS_UNDETECTED:2040,COS_GET_SIG_FAIL:2041,MESSAGE_SEND_FAIL:2100,MESSAGE_SEND_FAIL_NOT_IN_AVCHATROOM:2101,MESSAGE_SEND_NEED_MESSAGE_INSTANCE:2105,MESSAGE_SEND_INVALID_CONVERSATION_TYPE:2106,MESSAGE_FILE_IS_EMPTY:2108,MESSAGE_ONPROGRESS_FUNCTION_ERROR:2109,MESSAGE_REVOKE_FAIL:2110,MESSAGE_DELETE_FAIL:2111,MESSAGE_UNREAD_ALL_FAIL:2112,READ_RECEIPT_MESSAGE_LIST_EMPTY:2114,MESSAGE_SEND_GROUP_WITH_TOPIC_FAIL:2115,CANNOT_DELETE_GROUP_SYSTEM_NOTICE:2116,TRANSLATE_TEXT_FAIL:2117,MESSAGE_IMAGE_SELECT_FILE_FIRST:2251,MESSAGE_IMAGE_TYPES_LIMIT:2252,MESSAGE_IMAGE_SIZE_LIMIT:2253,MESSAGE_AUDIO_UPLOAD_FAIL:2300,MESSAGE_AUDIO_SIZE_LIMIT:2301,MESSAGE_VIDEO_UPLOAD_FAIL:2350,MESSAGE_VIDEO_SIZE_LIMIT:2351,MESSAGE_VIDEO_TYPES_LIMIT:2352,MESSAGE_FILE_UPLOAD_FAIL:2400,MESSAGE_FILE_SELECT_FILE_FIRST:2401,MESSAGE_FILE_SIZE_LIMIT:2402,MESSAGE_FILE_URL_IS_EMPTY:2403,MESSAGE_MERGER_TYPE_INVALID:2450,MESSAGE_MERGER_KEY_INVALID:2451,MESSAGE_MERGER_DOWNLOAD_FAIL:2452,MESSAGE_FORWARD_TYPE_INVALID:2453,MESSAGE_MODIFY_CONFLICT:2480,MESSAGE_MODIFY_DISABLED_IN_AVCHATROOM:2481,CONVERSATION_NOT_FOUND:2500,USER_OR_GROUP_NOT_FOUND:2501,CONVERSATION_UN_RECORDED_TYPE:2502,INVALID_CONVERSATION_ID:2503,ILLEGAL_GROUP_TYPE:2600,CANNOT_JOIN_WORK:2601,ILLEGAL_GROUP_ID:2602,CANNOT_FIND_GROUP:2603,CANNOT_CHANGE_OWNER_IN_AVCHATROOM:2620,CANNOT_CHANGE_OWNER_TO_SELF:2621,CANNOT_DISMISS_WORK:2622,MEMBER_NOT_IN_GROUP:2623,JOIN_GROUP_FAIL:2660,CANNOT_ADD_MEMBER_IN_AVCHATROOM:2661,CANNOT_JOIN_NON_AVCHATROOM_WITHOUT_LOGIN:2662,NOT_OWNER:2681,CANNOT_SET_MEMBER_ROLE_IN_WORK_AND_AVCHATROOM:2682,INVALID_MEMBER_ROLE:2683,CANNOT_SET_SELF_MEMBER_ROLE:2684,CANNOT_MUTE_SELF:2685,BAN_DURATION_INVALID:2686,NOT_MY_FRIEND:2700,ALREADY_MY_FRIEND:2701,FRIEND_GROUP_EXISTED:2710,FRIEND_GROUP_NOT_EXIST:2711,FRIEND_APPLICATION_NOT_EXIST:2716,UPDATE_PROFILE_INVALID_PARAM:2721,UPDATE_PROFILE_NO_KEY:2722,CANNOT_ADD_SELF_TO_BLACKLIST:2742,NETWORK_ERROR:2800,NETWORK_TIMEOUT:2801,NO_NETWORK:2805,UNCAUGHT_ERROR:2903,INVALID_OPERATION:2905,INVALID_TRTC_CMD:2995,OVER_FREQUENCY_LIMIT:2996,CANNOT_FIND_PROTOCOL:2997,CANNOT_FIND_MODULE:2998,SDK_IS_NOT_READY:2999,LOGGING_IN:3e3,LOGIN_FAILED:3001,KICKED_OUT_MULT_DEVICE:3002,KICKED_OUT_MULT_ACCOUNT:3003,KICKED_OUT_USERSIG_EXPIRED:3004,LOGGED_OUT:3005,KICKED_OUT_REST_API:3006,ILLEGAL_TOPIC_ID:3021,CANNOT_USE_COMMERCIAL_ABILITY:3122,PROFANITY_FOUND:3123,MESSAGE_A2KEY_EXPIRED:20002,ACCOUNT_A2KEY_EXPIRED:70001,HELLO_ANSWER_KICKED_OUT:1002,OPEN_SERVICE_OVERLOAD_ERROR:60022},yi="networkRTT",_i="messageE2EDelay",ki="sendMessageC2C",Ei="sendMessageGroup",xi="sendMessageGroupAV",Ni="sendMessageRichMedia",wi="cosUpload",Ci="messageReceivedGroup",Mi="messageReceivedGroupAVPush",Si="messageReceivedGroupAVPull",Ii=(s(ea={},yi,2),s(ea,_i,3),s(ea,ki,4),s(ea,Ei,5),s(ea,xi,6),s(ea,Ni,7),s(ea,Ci,8),s(ea,Mi,9),s(ea,Si,10),s(ea,wi,11),ea),Ti={info:4,warning:5,error:6},Di={wifi:1,"2g":2,"3g":3,"4g":4,"5g":5,unknown:6,none:7,online:8},bi={login:4},Vi=function(){function e(t){n(this,e),this._n="SSOLogData",this.eventType=bi[t]||0,this.timestamp=0,this.networkType=8,this.code=0,this.message="",this.moreMessage="",this.extension=t,this.costTime=0,this.duplicate=!1,this.level=4,this.uiPlatform=void 0,this._sentFlag=!1,this._startts=Pe()}return r(e,[{key:"updateTimeStamp",value:function(){this.timestamp=Pe()}},{key:"start",value:function(e){return this._startts=e,this}},{key:"end",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this._sentFlag){var a=Pe();0===this.costTime&&(this.costTime=a-this._startts),this.setMoreMessage("startts:".concat(this._startts," endts:").concat(a)),t?(this._sentFlag=!0,this._eventStatModule&&this._eventStatModule.pushIn(this)):setTimeout((function(){e._sentFlag=!0,e._eventStatModule&&e._eventStatModule.pushIn(e)}),0)}}},{key:"setError",value:function(e,t,a){if(!(e instanceof Error))return He.w("".concat(this._n,".setError value not instanceof Error, please check!")),this;if(this._sentFlag)return this;if(this.setNetworkType(a),t)e.code&&this.setCode(e.code),e.message&&this.setMoreMessage(e.message);else{var n=fi.NO_NETWORK;this.setCode(n)}return this.setLevel("error"),this}},{key:"setCode",value:function(e){return ct(e)||this._sentFlag||("ECONNABORTED"===e&&(this.code=103),ot(e)?this.code=e:He.w("".concat(this._n,".setCode value not a number, please check!"),e,a(e))),this}},{key:"setMessage",value:function(e){return ct(e)||this._sentFlag||(ot(e)&&(this.message=e.toString()),it(e)&&(this.message=e)),this}},{key:"setCostTime",value:function(e){return this.costTime=e,this}},{key:"setLevel",value:function(e){return ct(e)||this._sentFlag||(this.level=Ti[e]),this}},{key:"setMoreMessage",value:function(e){return Zt(this.moreMessage)?this.moreMessage="".concat(e):this.moreMessage+=" ".concat(e),this}},{key:"setNetworkType",value:function(e){if(ct(e))He.w("".concat(this._n,".setNetworkType value is undefined, please check!"));else{var t=Di[e.toLowerCase()];ct(t)||(this.networkType=t)}return this}},{key:"getStartTs",value:function(){return this._startts}},{key:"setUIPlatform",value:function(e){this.uiPlatform=e}}],[{key:"bindEventStatModule",value:function(t){e.prototype._eventStatModule=t}}]),e}(),Ai=function(){function e(t){n(this,e),this.type=I.MSG_TEXT,this.content={text:t.text||""}}return r(e,[{key:"setText",value:function(e){this.content.text=e}},{key:"sendable",value:function(){return 0!==this.content.text.length}}]),e}(),Li=function(){function e(t,a){n(this,e),this._imageMemoryURL="",this._fileDownloadProxy=a,se?this.createImageDataASURLInWXMiniApp(t.file):this.createImageDataASURLInWeb(t.file),this._initImageInfoModel(),this.type=I.MSG_IMAGE,this._percent=0,this.content={imageFormat:t.imageFormat||$e.UNKNOWN,uuid:t.uuid,imageInfoArray:[]},this.initImageInfoArray(t.imageInfoArray),this._autoFixUrl()}return r(e,[{key:"_initImageInfoModel",value:function(){var e=this;this._ImageInfoModel=function(t){this.instanceID=yt(9999999),this.sizeType=t.type||0,this.type=0,this.size=t.size||0,this.width=t.width||0,this.height=t.height||0,this.imageUrl=t.url||"",this.url=Wt(t.url||e._imageMemoryURL,e._fileDownloadProxy)},this._ImageInfoModel.prototype={setSizeType:function(e){this.sizeType=e},setType:function(e){this.type=e},setImageUrl:function(e){e&&(this.imageUrl=e)},getImageUrl:function(){return this.imageUrl}}}},{key:"initImageInfoArray",value:function(e){for(var t=0,a=null,n=null;t<=2;)n=ct(e)||ct(e[t])?{type:0,size:0,width:0,height:0,url:""}:e[t],(a=new this._ImageInfoModel(n)).setSizeType(t+1),a.setType(t),this.addImageInfo(a),t++;this.updateAccessSideImageInfoArray()}},{key:"updateImageInfoArray",value:function(e){for(var t,a=this.content.imageInfoArray.length,n=0;n<a;n++)t=this.content.imageInfoArray[n],e[n].size&&(t.size=e[n].size),e[n].url&&t.setImageUrl(e[n].url),e[n].width&&(t.width=e[n].width),e[n].height&&(t.height=e[n].height)}},{key:"_autoFixUrl",value:function(){for(var e=this.content.imageInfoArray.length,t="",a="",n=["http","https"],o=null,i=0;i<e;i++)this.content.imageInfoArray[i].url&&""!==(o=this.content.imageInfoArray[i]).imageUrl&&(a=o.imageUrl.slice(0,o.imageUrl.indexOf("://")+1),t=o.imageUrl.slice(o.imageUrl.indexOf("://")+1),n.indexOf(a)<0&&(a="https:"),this.content.imageInfoArray[i].setImageUrl([a,t].join("")))}},{key:"updatePercent",value:function(e){this._percent=e,this._percent>1&&(this._percent=1)}},{key:"updateImageFormat",value:function(e){this.content.imageFormat=$e[e.toUpperCase()]||$e.UNKNOWN}},{key:"createImageDataASURLInWeb",value:function(e){void 0!==e&&e.files.length>0&&(this._imageMemoryURL=window.URL.createObjectURL(e.files[0]))}},{key:"createImageDataASURLInWXMiniApp",value:function(e){e&&e.url&&(this._imageMemoryURL=e.url)}},{key:"replaceImageInfo",value:function(e,t){this.content.imageInfoArray[t]instanceof this._ImageInfoModel||(this.content.imageInfoArray[t]=e)}},{key:"addImageInfo",value:function(e){this.content.imageInfoArray.length>=3||this.content.imageInfoArray.push(e)}},{key:"updateAccessSideImageInfoArray",value:function(){var e=this.content.imageInfoArray,t=e[0],a=t.width,n=void 0===a?0:a,o=t.height,i=void 0===o?0:o;0!==n&&0!==i&&(Pt(e),Object.assign(e[2],Bt({originWidth:n,originHeight:i,min:720})))}},{key:"sendable",value:function(){return 0!==this.content.imageInfoArray.length&&""!==this.content.imageInfoArray[0].imageUrl&&0!==this.content.imageInfoArray[0].size}}]),e}(),Ri=function(){function e(t){n(this,e),this.type=I.MSG_FACE,this.content=t||null}return r(e,[{key:"sendable",value:function(){return null!==this.content}}]),e}(),Oi=function(){function e(t,a){n(this,e),this.type=I.MSG_AUDIO,this._percent=0,this.content={downloadFlag:2,second:t.second,size:t.size,url:Wt(t.url,a),remoteAudioUrl:t.url||"",uuid:t.uuid}}return r(e,[{key:"updatePercent",value:function(e){this._percent=e,this._percent>1&&(this._percent=1)}},{key:"updateAudioUrl",value:function(e){this.content.remoteAudioUrl=e}},{key:"sendable",value:function(){return""!==this.content.remoteAudioUrl}}]),e}(),Bi={from:!0,groupID:!0,groupName:!0,to:!0},Pi=function(){function e(t){n(this,e),this.type=I.MSG_GRP_TIP,this.content={},this._initContent(t)}return r(e,[{key:"_initContent",value:function(e){var t=this;Object.keys(e).forEach((function(a){switch(a){case"remarkInfo":case"operatorInfo":case"memberExtraInfo":case"onlineMemberInfo":break;case"groupProfile":t.content.groupProfile={},t._initGroupProfile(e[a]);break;case"memberInfoList":case"msgMemberInfo":t._updateMemberList(e[a]);break;case"memberNum":t.content[a]=e[a],t.content.memberCount=e[a];break;case"newGroupProfile":t.content.newGroupProfile={},t._initNewGroupProfile(e[a]);break;default:t.content[a]=e[a]}})),this.content.userIDList||(this.content.userIDList=[this.content.operatorID])}},{key:"_initGroupProfile",value:function(e){for(var t=Object.keys(e),a=0;a<t.length;a++){var n=t[a];Bi[n]&&(this.content.groupProfile[n]=e[n])}}},{key:"_updateMemberList",value:function(e){Zt(this.content.memberList)?this.content.memberList=e:this.content.memberList.forEach((function(t){e.forEach((function(e){t.userID===e.userID&&Object.assign(t,e)}))}))}},{key:"_initNewGroupProfile",value:function(e){for(var t=Object.keys(e),a=0;a<t.length;a++){var n=t[a];this.content.newGroupProfile[n]="muteAllMembers"!==n?e[n]:1===e[n]}}}]),e}(),Ui={from:!0,groupID:!0,groupName:!0,to:!0},Gi=function(){function e(t){n(this,e),this.type=I.MSG_GRP_SYS_NOTICE,this.content={},this._initContent(t)}return r(e,[{key:"_initContent",value:function(e){var t=this;Object.keys(e).forEach((function(a){switch(a){case"memberInfoList":break;case"remarkInfo":t.content.handleMessage=e[a];break;case"groupProfile":t.content.groupProfile={},t._initGroupProfile(e[a]);break;default:t.content[a]=e[a]}}))}},{key:"_initGroupProfile",value:function(e){for(var t=Object.keys(e),a=0;a<t.length;a++){var n=t[a];Ui[n]&&("groupName"===n?this.content.groupProfile.name=e[n]:this.content.groupProfile[n]=e[n])}}}]),e}(),Fi=function(){function e(t,a){n(this,e),this.type=I.MSG_FILE,this._percent=0;var o=this._getFileInfo(t);this.content={downloadFlag:2,fileUrl:Wt(t.url,a)||"",uuid:t.uuid,fileName:o.name||"",fileSize:o.size||0}}return r(e,[{key:"_getFileInfo",value:function(e){if(!ct(e.fileName)&&!ct(e.fileSize))return{size:e.fileSize,name:e.fileName};var t=e.file.files[0];if(ie){if(t.path&&-1!==t.path.indexOf(".")){var a=t.path.slice(t.path.lastIndexOf(".")+1).toLowerCase();t.type=a,t.name||(t.name="".concat(yt(999999),".").concat(a))}t.name||(t.type="",t.name=t.path.slice(t.path.lastIndexOf("/")+1).toLowerCase()),t.suffix&&(t.type=t.suffix),t.url||(t.url=t.path)}return{size:t.size,name:t.name}}},{key:"updatePercent",value:function(e){this._percent=e,this._percent>1&&(this._percent=1)}},{key:"updateFileUrl",value:function(e){this.content.fileUrl=e}},{key:"sendable",value:function(){return""!==this.content.fileUrl&&""!==this.content.fileName&&0!==this.content.fileSize}}]),e}(),qi=function(){function e(t){n(this,e),this.type=I.MSG_CUSTOM,this.content={data:t.data||"",description:t.description||"",extension:t.extension||""}}return r(e,[{key:"setData",value:function(e){return this.content.data=e,this}},{key:"setDescription",value:function(e){return this.content.description=e,this}},{key:"setExtension",value:function(e){return this.content.extension=e,this}},{key:"sendable",value:function(){return 0!==this.content.data.length||0!==this.content.description.length||0!==this.content.extension.length}}]),e}(),zi=function(){function e(t,a){n(this,e),this.type=I.MSG_VIDEO,this._percent=0,this.content={remoteVideoUrl:t.remoteVideoUrl||t.videoUrl||"",videoFormat:t.videoFormat,videoSecond:parseInt(t.videoSecond,10),videoSize:t.videoSize,videoUrl:Wt(t.videoUrl,a),videoDownloadFlag:2,videoUUID:t.videoUUID,thumbUUID:t.thumbUUID,thumbFormat:t.thumbFormat,thumbWidth:t.thumbWidth,snapshotWidth:t.thumbWidth,thumbHeight:t.thumbHeight,snapshotHeight:t.thumbHeight,thumbSize:t.thumbSize,snapshotSize:t.thumbSize,thumbDownloadFlag:2,thumbUrl:Wt(t.thumbUrl,a),snapshotUrl:Wt(t.thumbUrl,a)}}return r(e,[{key:"updatePercent",value:function(e){this._percent=e,this._percent>1&&(this._percent=1)}},{key:"updateVideoUrl",value:function(e){e&&(this.content.remoteVideoUrl=e)}},{key:"updateSnapshotInfo",value:function(e){var t=e.snapshotUrl,a=e.snapshotWidth,n=e.snapshotHeight;Zt(t)||(this.content.thumbUrl=this.content.snapshotUrl=t),Zt(a)||(this.content.thumbWidth=this.content.snapshotWidth=Number(a)),Zt(n)||(this.content.thumbHeight=this.content.snapshotHeight=Number(n))}},{key:"sendable",value:function(){return""!==this.content.remoteVideoUrl}}]),e}(),Hi=function(){function e(t){n(this,e),this.type=I.MSG_LOCATION;var a=t.description,o=t.longitude,i=t.latitude;this.content={description:a,longitude:o,latitude:i}}return r(e,[{key:"sendable",value:function(){return!0}}]),e}(),$i=function(){function e(t,a){if(n(this,e),this.from=t.from,this.messageSender=t.from,this.time=t.time,this.messageSequence=t.sequence,this.clientSequence=t.clientSequence||t.sequence,this.messageRandom=t.random,this.cloudCustomData=t.cloudCustomData||"",this.clientTime=t.clientTime||void 0,t.ID)this.ID=t.ID||"",this.nick=t.nick||"",this.avatar=t.avatar||"",this.messageBody=[{type:t.type,payload:t.payload}],t.conversationType.startsWith(I.CONV_C2C)?this.receiverUserID=t.to:t.conversationType.startsWith(I.CONV_GROUP)&&(this.receiverGroupID=t.to),this.messageReceiver=t.to;else{this.nick=t.nick||"",this.avatar=t.avatar||"",this.messageBody=[];var o=t.elements[0].type,i=t.elements[0].content;this._patchRichMediaPayload(o,i),this._updateRichMediaDownloadUrl(o,i,a),o===I.MSG_MERGER?this.messageBody.push({type:o,payload:new ji(i).content}):this.messageBody.push({type:o,payload:i}),t.groupID&&(this.receiverGroupID=t.groupID,this.messageReceiver=t.groupID),t.to&&(this.receiverUserID=t.to,this.messageReceiver=t.to),this.ID="".concat(t.tinyID,"-").concat(t.clientTime,"-").concat(t.random)}}return r(e,[{key:"_patchRichMediaPayload",value:function(e,t){e===I.MSG_IMAGE?t.imageInfoArray.forEach((function(e){!e.imageUrl&&e.url&&(e.imageUrl=e.url,e.sizeType=e.type,1===e.type?e.type=0:3===e.type&&(e.type=1))})):e===I.MSG_VIDEO?!t.remoteVideoUrl&&t.videoUrl&&(t.remoteVideoUrl=t.videoUrl):e===I.MSG_AUDIO?!t.remoteAudioUrl&&t.url&&(t.remoteAudioUrl=t.url):e===I.MSG_FILE&&!t.fileUrl&&t.url&&(t.fileUrl=t.url,t.url=void 0)}},{key:"_updateRichMediaDownloadUrl",value:function(e,t,a){a&&(e===I.MSG_IMAGE?t.imageInfoArray.forEach((function(e){e.url=Wt(e.url,a)})):e===I.MSG_VIDEO?(t.videoUrl=Wt(t.videoUrl,a),t.snapshotUrl=Wt(t.thumbUrl,a),t.snapshotHeight=t.thumbHeight,t.snapshotWidth=t.thumbWidth):e===I.MSG_AUDIO?t.url=Wt(t.url,a):e===I.MSG_FILE&&(t.fileUrl=Wt(t.fileUrl,a)))}}]),e}(),ji=function(){function e(t,a){if(n(this,e),this.type=I.MSG_MERGER,this.content={downloadKey:"",pbDownloadKey:"",messageList:[],title:"",abstractList:[],compatibleText:"",version:0,layersOverLimit:!1},t.downloadKey){var o=t.downloadKey,i=t.pbDownloadKey,r=t.title,s=t.abstractList,l=t.compatibleText,c=t.version;this.content.downloadKey=o,this.content.pbDownloadKey=i,this.content.title=r,this.content.abstractList=s,this.content.compatibleText=l,this.content.version=c||0}else if(Zt(t.messageList))1===t.layersOverLimit&&(this.content.layersOverLimit=!0);else{var u=t.messageList,d=t.title,m=t.abstractList,p=t.compatibleText,h=t.version,v=[];u.forEach((function(e){if(!Zt(e)){var t=new $i(e,a);v.push(t)}})),this.content.messageList=v,this.content.title=d,this.content.abstractList=m,this.content.compatibleText=p,this.content.version=h||0}}return r(e,[{key:"sendable",value:function(){return!Zt(this.content.messageList)||!Zt(this.content.downloadKey)}}]),e}(),Ki={1:I.MSG_PRIORITY_HIGH,2:I.MSG_PRIORITY_NORMAL,3:I.MSG_PRIORITY_LOW,4:I.MSG_PRIORITY_LOWEST},Yi=function(){function e(t){n(this,e),this.ID="",this.conversationID=t.conversationID||null,this.conversationType=t.conversationType||I.CONV_C2C,this.conversationSubType=t.conversationSubType,this.time=t.time||Math.ceil(Date.now()/1e3),this.sequence=t.sequence||0,this.clientSequence=t.clientSequence||t.sequence||0,this.random=t.random||0===t.random?t.random:yt(),this.priority=this._computePriority(t.priority),this.nick=t.nick||"",this.avatar=t.avatar||"",this.isPeerRead=!1,this.nameCard="",this._elements=[],this.isPlaceMessage=t.isPlaceMessage||0,this.isRevoked=2===t.isPlaceMessage||8===t.msgFlagBits,this.from=t.from||null,this.to=t.to||null,this.flow="",this.isSystemMessage=t.isSystemMessage||!1,this.protocol=t.protocol||"JSON",this.isResend=!1,this.isRead=!1,this.status=t.status||ta.SUCCESS,this._onlineOnlyFlag=!1,this._groupAtInfoList=[],this._relayFlag=!1,this.atUserList=[],this.cloudCustomData=t.cloudCustomData||"",this.isDeleted=!1,this.isModified=!1,this._isExcludedFromUnreadCount=!(!t.messageControlInfo||1!==t.messageControlInfo.excludedFromUnreadCount),this._isExcludedFromLastMessage=!(!t.messageControlInfo||1!==t.messageControlInfo.excludedFromLastMessage),this.clientTime=t.clientTime||Ge()||0,this.senderTinyID=t.senderTinyID||t.tinyID||"",this.readReceiptInfo=t.readReceiptInfo||{readCount:void 0,unreadCount:void 0,isPeerRead:void 0},this.needReadReceipt=!0===t.needReadReceipt||1===t.needReadReceipt,this.version=t.messageVersion||0,this.isBroadcastMessage=t.isBroadcastMessage||!1,this._receiverList=t.receiverList||void 0,this.isSupportExtension=!0===t.isSupportExtension||1===t.isSupportExtension,this.revoker=t.revokerInfo&&t.revokerInfo.revoker||null,this.reInitialize(t.currentUser),this.extractGroupInfo(t.groupProfile||null),this.handleGroupAtInfo(t),this.initC2CReadReceiptInfo(t.readReceiptSentByPeer)}return r(e,[{key:"elements",get:function(){return this._elements}},{key:"getElements",value:function(){return this._elements}},{key:"extractGroupInfo",value:function(e){if(null!==e){it(e.nick)&&(this.nick=e.nick),it(e.avatar)&&(this.avatar=e.avatar);var t=e.messageFromAccountExtraInformation;st(t)&&it(t.nameCard)&&(this.nameCard=t.nameCard)}}},{key:"handleGroupAtInfo",value:function(e){var t=this;e.payload&&e.payload.atUserList&&e.payload.atUserList.forEach((function(e){e!==I.MSG_AT_ALL?(t._groupAtInfoList.push({groupAtAllFlag:0,groupAtUserID:e}),t.atUserList.push(e)):(t._groupAtInfoList.push({groupAtAllFlag:1}),t.atUserList.push(I.MSG_AT_ALL))})),lt(e.groupAtInfo)&&e.groupAtInfo.forEach((function(e){0===e.groupAtAllFlag?t.atUserList.push(e.groupAtUserID):1===e.groupAtAllFlag&&t.atUserList.push(I.MSG_AT_ALL)}))}},{key:"getGroupAtInfoList",value:function(){return this._groupAtInfoList}},{key:"_initProxy",value:function(){this._elements[0]&&(this.payload=this._elements[0].content,this.type=this._elements[0].type)}},{key:"reInitialize",value:function(e){e&&(this.status=this.from?ta.SUCCESS:ta.UNSEND,!this.from&&(this.from=e)),this._initFlow(e),this._initSequence(e),this._concatConversationID(e),this.generateMessageID()}},{key:"isSendable",value:function(){return 0!==this._elements.length&&"function"==typeof this._elements[0].sendable&&this._elements[0].sendable()}},{key:"_initTo",value:function(e){this.conversationType===I.CONV_GROUP&&(this.to=e.groupID)}},{key:"_initSequence",value:function(e){0===this.clientSequence&&e&&(this.clientSequence=function(e){if(!e)return!1;if(void 0===xt[e]){var t=new Date,a="3".concat(t.getHours()).slice(-2),n="0".concat(t.getMinutes()).slice(-2),o="0".concat(t.getSeconds()).slice(-2);xt[e]=parseInt([a,n,o,"0001"].join("")),a=null,n=null,o=null,He.l("autoIncrementIndex start index:".concat(xt[e]))}return xt[e]++}(e)),0===this.sequence&&this.conversationType===I.CONV_C2C&&(this.sequence=this.clientSequence)}},{key:"generateMessageID",value:function(){this.from===I.CONV_SYSTEM&&(this.senderTinyID="144115198244471703"),this.ID="".concat(this.senderTinyID,"-").concat(this.clientTime,"-").concat(this.random)}},{key:"_initFlow",value:function(e){""!==e&&(e===this.from?(this.flow="out",this.isRead=!0):this.flow="in")}},{key:"_concatConversationID",value:function(e){var t=this.to,a="",n=this.conversationType;n!==I.CONV_SYSTEM?(a=n===I.CONV_C2C?e===this.from?t:this.from:this.to,this.conversationID=a?"".concat(n).concat(a):null):this.conversationID=I.CONV_SYSTEM}},{key:"isElement",value:function(e){return e instanceof Ai||e instanceof Li||e instanceof Ri||e instanceof Oi||e instanceof Fi||e instanceof zi||e instanceof Pi||e instanceof Gi||e instanceof qi||e instanceof Hi||e instanceof ji}},{key:"setElement",value:function(e,t){var a=this;if(this.isElement(e))return this._elements=[e],void this._initProxy();var n=function(e){if(e.type&&e.content)switch(e.type){case I.MSG_TEXT:a.setTextElement(e.content);break;case I.MSG_IMAGE:a.setImageElement(e.content,t);break;case I.MSG_AUDIO:a.setAudioElement(e.content,t);break;case I.MSG_FILE:a.setFileElement(e.content,t);break;case I.MSG_VIDEO:a.setVideoElement(e.content,t);break;case I.MSG_CUSTOM:a.setCustomElement(e.content);break;case I.MSG_LOCATION:a.setLocationElement(e.content);break;case I.MSG_GRP_TIP:a.setGroupTipElement(e.content);break;case I.MSG_GRP_SYS_NOTICE:a.setGroupSystemNoticeElement(e.content);break;case I.MSG_FACE:a.setFaceElement(e.content);break;case I.MSG_MERGER:a.setMergerElement(e.content,t)}};if(lt(e))for(var o=0;o<e.length;o++)n(e[o]);else n(e);this._initProxy()}},{key:"clearElement",value:function(){this._elements.length=0}},{key:"setTextElement",value:function(e){var t="string"==typeof e?e:e.text,a=new Ai({text:t});this._elements.push(a)}},{key:"setImageElement",value:function(e,t){var a=new Li(e,t);this._elements.push(a)}},{key:"setAudioElement",value:function(e,t){var a=new Oi(e,t);this._elements.push(a)}},{key:"setFileElement",value:function(e,t){var a=new Fi(e,t);this._elements.push(a)}},{key:"setVideoElement",value:function(e,t){var a=new zi(e,t);this._elements.push(a)}},{key:"setLocationElement",value:function(e){var t=new Hi(e);this._elements.push(t)}},{key:"setCustomElement",value:function(e){var t=new qi(e);this._elements.push(t)}},{key:"setGroupTipElement",value:function(e){var t={},a=e.operationType;if(Zt(e.memberInfoList)?e.operatorInfo&&(t=e.operatorInfo):a!==I.GRP_TIP_MBR_JOIN&&a!==I.GRP_TIP_MBR_KICKED_OUT&&a!==I.GRP_TIP_MBR_SET_ADMIN&&a!==I.GRP_TIP_MBR_CANCELED_ADMIN||(t=e.memberInfoList[0]),!Zt(e.memberExtraInfo)){var n=e.memberExtraInfo.reason;e.msgMemberInfo.forEach((function(e){e.reason=n}))}var o=t,i=o.nick,r=o.avatar;it(i)&&(this.nick=i),it(r)&&(this.avatar=r);var s=new Pi(e);this._elements.push(s)}},{key:"setGroupSystemNoticeElement",value:function(e){var t=new Gi(e);this._elements.push(t)}},{key:"setFaceElement",value:function(e){var t=new Ri(e);this._elements.push(t)}},{key:"setMergerElement",value:function(e,t){var a=new ji(e,t);this._elements.push(a)}},{key:"setIsRead",value:function(e){this.isRead=e}},{key:"setRelayFlag",value:function(e){this._relayFlag=e}},{key:"getRelayFlag",value:function(){return this._relayFlag}},{key:"_computePriority",value:function(e){if(ct(e))return I.MSG_PRIORITY_NORMAL;if(it(e)&&-1!==Object.values(Ki).indexOf(e))return e;if(ot(e)){var t=""+e;if(-1!==Object.keys(Ki).indexOf(t))return Ki[t]}return I.MSG_PRIORITY_NORMAL}},{key:"setNickAndAvatar",value:function(e){var t=e.nick,a=e.avatar;it(t)&&(this.nick=t),it(a)&&(this.avatar=a)}},{key:"setNameCard",value:function(e){it(e)&&(this.nameCard=e)}},{key:"initC2CReadReceiptInfo",value:function(e){this.conversationType===I.CONV_C2C&&!0===this.needReadReceipt&&(this.readReceiptInfo.isPeerRead=1===e)}}]),e}(),Wi=function(e){return{code:0,data:e||{}}},Ji=function(e){l(a,e);var t=y(a);function a(e){var o;n(this,a),o=t.call(this);var i=e.code,r=e.message,s=e.data;return o.code=i,o.message=r||o._getErrorMessage(o.code),o.data=s||{},o}return r(a)}(p(Error)),Zi=null,Xi=function(e){Zi=e},Qi=function(e){return Promise.resolve(Wi(e))},er=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e instanceof Ji)return t&&null!==Zi&&Zi.emit(S.ERROR,e),Promise.reject(e);if(e instanceof Error){var a=new Ji({code:fi.UNCAUGHT_ERROR});return t&&null!==Zi&&Zi.emit(S.ERROR,a),Promise.reject(a)}if(!ct(e)&&!ct(e.code)){var n=new Ji(e);return t&&null!==Zi&&Zi.emit(S.ERROR,n),Promise.reject(n)}},tr=function(e){l(o,e);var a=y(o);function o(e){var t;return n(this,o),(t=a.call(this,e))._n="C2CModule",t._messageFromUnreadDBMap=new Map,t._signalingFromUnreadDBList=[],t}return r(o,[{key:"onNewC2CMessage",value:function(e){var t=e.dataList,a=e.isInstantMessage,n=e.C2CRemainingUnreadList,o=e.C2CPairUnreadList;He.d("".concat(this._n,".onNewC2CMessage count:").concat(t.length," isInstantMessage:").concat(a));var i=this._newC2CMessageStoredAndSummary({dataList:t,C2CRemainingUnreadList:n,C2CPairUnreadList:o,isInstantMessage:a}),r=i.conversationOptionsList,s=i.messageList,l=i.isUnreadC2CMessage;this.filterModifiedMessage(s),r.length>0&&this.getModule(Fa).onNewMessage({conversationOptionsList:r,isInstantMessage:a,isUnreadC2CMessage:l});var c=this.filterUnmodifiedMessage(s);a&&c.length>0&&this.emitOuterEvent(S.MESSAGE_RECEIVED,c),s.length=0}},{key:"_newC2CMessageStoredAndSummary",value:function(e){for(var t=e.dataList,a=e.C2CRemainingUnreadList,n=e.C2CPairUnreadList,o=e.isInstantMessage,i=null,r=[],s=[],l={},c=this.getModule(ja),u=this.getModule(an),d=!1,m=this.getModule(Fa),p=this.getFileDownloadProxy(),h=0,v=t.length;h<v;h++)if(this._isSignaling(t[h]))this._signalingFromUnreadDBList.push(t[h].eventArray[0].c2CNotifyMsgArray[0]);else{var g=t[h];g.currentUser=this.getMyUserID(),g.conversationType=I.CONV_C2C,g.isSystemMessage=!!g.isSystemMessage,(ct(g.nick)||ct(g.avatar))&&(d=!0,He.d("".concat(this._n,"._newC2CMessageStoredAndSummary nick or avatar missing!"))),i=new Yi(g),g.elements=c.parseElements(g.elements,g.from),i.setElement(g.elements,p),i.setNickAndAvatar({nick:g.nick,avatar:g.avatar});var f=i.conversationID;if(o){if(1===this._messageFromUnreadDBMap.get(i.ID))continue;var y=!1;if(i.from!==this.getMyUserID()){var _=m.getLatestMessageSentByPeer(f);if(_){var k=_.nick,E=_.avatar;d?i.setNickAndAvatar({nick:k,avatar:E}):k===i.nick&&E===i.avatar||(y=!0)}}else{var x=m.getLatestMessageSentByMe(f);if(x){var N=x.nick,w=x.avatar;N===i.nick&&w===i.avatar||m.modifyMessageSentByMe({conversationID:f,latestNick:i.nick,latestAvatar:i.avatar})}}var C=1===t[h].isModified;if(m.isMessageSentByCurrentInstance(i)?i.isModified=C:C=!1,0===g.msgLifeTime)i._onlineOnlyFlag=!0,m.isMessageSentByCurrentInstance(i)||s.push(i);else{if(!m.pushIntoMessageList(s,i,C))continue;y&&(m.modifyMessageSentByPeer({conversationID:f,latestNick:i.nick,latestAvatar:i.avatar}),m.updateUserProfileSpecifiedKey({conversationID:f,nick:i.nick,avatar:i.avatar}))}o&&i.clientTime>0&&u.addMessageDelay(i.clientTime)}else this._messageFromUnreadDBMap.set(i.ID,1);if(0!==g.msgLifeTime){if(!1===i._onlineOnlyFlag){var M=m.getLastMessageTime(f);if(ot(M)&&i.time<M)continue;if(ct(l[f])){var S=0;"in"===i.flow&&(i._isExcludedFromUnreadCount||(S=1)),l[f]=r.push({conversationID:f,unreadCount:S,type:i.conversationType,subType:i.conversationSubType,lastMessage:i._isExcludedFromLastMessage?"":i})-1}else{var T=l[f];r[T].type=i.conversationType,r[T].subType=i.conversationSubType,r[T].lastMessage=i._isExcludedFromLastMessage?"":i,"in"===i.flow&&(i._isExcludedFromUnreadCount||r[T].unreadCount++)}}}else i._onlineOnlyFlag=!0}this._handleSignalingFromUnreadDB();var D=!1;if(lt(n))for(var b=function(e,t){if(n[e].unreadCount>0){D=!0;var a=r.find((function(t){return t.conversationID==="C2C".concat(n[e].from)}));a?a.unreadCount=n[e].unreadCount:r.push({conversationID:"C2C".concat(n[e].from),unreadCount:n[e].unreadCount,type:I.CONV_C2C})}},V=0,A=n.length;V<A;V++)b(V);if(lt(a))for(var L=function(e,t){r.find((function(t){return t.conversationID==="C2C".concat(a[e].from)}))||r.push({conversationID:"C2C".concat(a[e].from),type:I.CONV_C2C,lastMsgTime:a[e].lastMsgTime})},R=0,O=a.length;R<O;R++)L(R);return{conversationOptionsList:r,messageList:s,isUnreadC2CMessage:D}}},{key:"_isSignaling",value:function(e){var t=e.eventArray;return!(!lt(t)||10!==t[0].event)}},{key:"_handleSignalingFromUnreadDB",value:function(){var e=this._signalingFromUnreadDBList.length;if(He.l("".concat(this._n,"._handleSignalingFromUnreadDB signalingCount:").concat(e)),0!==e){var t=[];this._signalingFromUnreadDBList.forEach((function(e){e.hasOwnProperty("c2cMessageRevokedNotify")&&t.push(e)})),this.onC2CMessageRevoked({dataList:t}),this._signalingFromUnreadDBList.length=0,t.length=0}}},{key:"onC2CMessageRevoked",value:function(e){var t=this,a=this.getModule(Fa),n=[],o=null,i=!0;e.dataList.forEach((function(e){if(e.c2cMessageRevokedNotify){var r=e.c2cMessageRevokedNotify.revokedInfos;ct(r)||r.forEach((function(e){var r=t.getMyUserID()===e.from?"".concat(I.CONV_C2C).concat(e.to):"".concat(I.CONV_C2C).concat(e.from);o=a.revoke(r,e.sequence,e.random);var s=e.revokerInfo&&e.revokerInfo.revoker;if(o)o.revoker||(o.revoker=s,n.push(o));else{var l={conversationID:r,sequence:e.sequence,time:e.time,revoker:s};a.isLastMessageRevoked(l)&&(n.push(l),i=!1)}}))}})),0!==n.length&&(a.onMessageRevoked(n),!0===i&&(He.l("".concat(this._n,".onC2CMessageRevoked count:").concat(n.length)),this.emitOuterEvent(S.MESSAGE_REVOKED,n)))}},{key:"onC2CMessageReadReceipt",value:function(e){var t=this;e.dataList.forEach((function(e){if(!Zt(e.c2cMessageReadReceipt)){var a=e.c2cMessageReadReceipt.to;e.c2cMessageReadReceipt.uinPairReadArray.forEach((function(e){var n=e.peerReadTime;He.d("".concat(t._n,"._onC2CMessageReadReceipt to:").concat(a," peerReadTime:").concat(n));var o="".concat(I.CONV_C2C).concat(a),i=t.getModule(Fa);i.recordPeerReadTime(o,n),i.updateMessageIsPeerReadProperty(o,n)}))}}))}},{key:"onC2CMessageReadNotice",value:function(e){var t=this;e.dataList.forEach((function(e){if(!Zt(e.c2cMessageReadNotice)){var a=t.getModule(Fa);e.c2cMessageReadNotice.uinPairReadArray.forEach((function(e){var n=e.from,o=e.peerReadTime;He.d("".concat(t._n,".onC2CMessageReadNotice from:").concat(n," lastReadTime:").concat(o));var i="".concat(I.CONV_C2C).concat(n);a.updateIsReadAfterReadReport({conversationID:i,lastMessageTime:o}),a.updateUnreadCount(i)}))}}))}},{key:"onC2CMessageModified",value:function(e){He.d("".concat(this._n,".onC2CMessageModified options:"),JSON.stringify(e));var a=this.getModule(Fa);e.dataList.forEach((function(e){a.onMessageModified(t(t({},e),{},{conversationType:I.CONV_C2C}))}))}},{key:"onReadReceiptList",value:function(e){He.d("".concat(this._n,".onReadReceiptList options:"),JSON.stringify(e));var t=e.dataList,a=t.userID,n=t.readReceiptList;this.getModule(Fa).updateReadReceiptInfo({userID:a,readReceiptList:n})}},{key:"sendMessage",value:function(e,t){var a=this._createC2CMessagePack(e,t);return this.request(a)}},{key:"_createC2CMessagePack",value:function(e,t){var a=null;t&&(t.offlinePushInfo&&(a=t.offlinePushInfo),!0===t.onlineUserOnly&&(a?a.disablePush=!0:a={disablePush:!0}));var n="";it(e.cloudCustomData)&&e.cloudCustomData.length>0&&(n=e.cloudCustomData);var o=[];if(st(t)&&st(t.messageControlInfo)){var i=t.messageControlInfo,r=i.excludedFromUnreadCount,s=i.excludedFromLastMessage,l=i.excludedFromContentModeration;!0===r&&o.push("NoUnread"),!0===s&&o.push("NoLastMsg"),!0===l&&o.push("NoMsgCheck")}var c=this.isOnlineMessage(e,t)?0:void 0;return{protocolName:yn,tjgID:this.generateTjgID(e),requestData:{fromAccount:this.getMyUserID(),toAccount:e.to,msgBody:e.getElements(),cloudCustomData:n,msgSeq:e.sequence,msgRandom:e.random,msgLifeTime:c,nick:e.nick,avatar:e.avatar,offlinePushInfo:a?{pushFlag:!0===a.disablePush?1:0,title:a.title||"",desc:a.description||"",ext:a.extension||"",apnsInfo:{badgeMode:!0===a.ignoreIOSBadge?1:0,isVoipPush:this._isVoipPush(a)},androidInfo:{OPPOChannelID:a.androidOPPOChannelID||""}}:void 0,messageControlInfo:0!==c?o:void 0,clientTime:e.clientTime,needReadReceipt:!0===e.needReadReceipt?1:0,isSupportExtension:!0===e.isSupportExtension?1:0}}}},{key:"_isVoipPush",value:function(e){var t=void 0;return ct(e.disableVoipPush)||(t=!1===e.disableVoipPush?1:0),t}},{key:"isOnlineMessage",value:function(e,t){return!(!t||!0!==t.onlineUserOnly)}},{key:"revokeMessage",value:function(e){return this.request({protocolName:Cn,requestData:{msgInfo:{fromAccount:e.from,toAccount:e.to,msgSeq:e.sequence,msgRandom:e.random,msgTimeStamp:e.time}}})}},{key:"deleteMessage",value:function(e){var t=e.to,a=e.keyList;return He.l("".concat(this._n,".deleteMessage toAccount:").concat(t," count:").concat(a.length)),this.request({protocolName:bn,requestData:{fromAccount:this.getMyUserID(),to:t,keyList:a}})}},{key:"modifyRemoteMessage",value:function(e){var t=e.from,a=e.to,n=e.version,o=void 0===n?0:n,i=e.sequence,r=e.random,s=e.time,l=e.payload,c=e.type,u=e.cloudCustomData,d=void 0;return $t(c)&&(d=[]).push({type:c,content:l}),this.request({protocolName:Vn,requestData:{from:t,to:a,version:o,sequence:i,random:r,time:s,elements:d,cloudCustomData:u}})}},{key:"setMessageRead",value:function(e){var t=this,a=e.conversationID,n=e.lastMessageTime,o="".concat(this._n,".setMessageRead");He.l("".concat(o," conversationID:").concat(a," lastMessageTime:").concat(n)),ot(n)||this.outputWarning("DoNotModifyLastTime");var i=new Vi("setC2CMessageRead");return i.setMessage("conversationID:".concat(a," lastMessageTime:").concat(n)),this.request({protocolName:Mn,requestData:{C2CMsgReaded:{cookie:"",C2CMsgReadedItem:[{toAccount:a.replace("C2C",""),lastMessageTime:n,receipt:1}]}}}).then((function(){i.setNetworkType(t.getNetworkType()).end(),He.l("".concat(o," ok"));var e=t.getModule(Fa);return e.updateIsReadAfterReadReport({conversationID:a,lastMessageTime:n}),e.updateUnreadCount(a),Wi()})).catch((function(e){return t.probeNetwork().then((function(t){var a=_(t,2),n=a[0],o=a[1];i.setError(e,n,o).end()})),He.l("".concat(o," failed. error:"),e),er(e)}))}},{key:"getRoamingMessage",value:function(e){var t=this,a="".concat(this._n,".getRoamingMessage"),n=e.peerAccount,o=e.conversationID,i=e.count,r=e.lastMessageTime,s=e.messageKey,l="peerAccount:".concat(n," count:").concat(i||15," lastMessageTime:").concat(r||0," messageKey:").concat(s);He.l("".concat(a," ").concat(l));var c=new Vi("getC2CRoamingMessages");return this.request({protocolName:Tn,requestData:{peerAccount:n,count:i||15,lastMessageTime:r||0,messageKey:s}}).then((function(e){var n=e.data,i=n.complete,r=n.messageList,s=n.messageKey,u=n.lastMessageTime;ct(r)?He.l("".concat(a," ok. complete:").concat(i," but messageList is undefined!")):He.l("".concat(a," ok. complete:").concat(i," count:").concat(r.length)),c.setNetworkType(t.getNetworkType()).setMessage("".concat(l," complete:").concat(i," length:").concat(r.length)).end();var d=t.getModule(Fa);1===i&&d.setCompleted(o);var m=d.onRoamingMessage(r,o);d.modifyMessageList(o),d.updateIsRead(o),d.updateRoamingMessageKeyAndTime(o,s,u);var p=d.getPeerReadTime(o);if(He.l("".concat(a," update isPeerRead property. conversationID:").concat(o," peerReadTime:").concat(p)),p)d.updateMessageIsPeerReadProperty(o,p);else{var h=o.replace(I.CONV_C2C,"");t.getRemotePeerReadTime([h]).then((function(){d.updateMessageIsPeerReadProperty(o,d.getPeerReadTime(o))}))}var v="";if(m.length>0)v=m[0].ID;else{var g=d.getLocalOldestMessage(o);g&&(v=g.ID)}return He.l("".concat(a," nextReqID:").concat(v," stored message count:").concat(m.length)),{nextReqID:v,storedMessageList:m}})).catch((function(e){return t.probeNetwork().then((function(t){var a=_(t,2),n=a[0],o=a[1];c.setMessage(l).setError(e,n,o).end()})),He.w("".concat(a," failed. error:"),e),er(e)}))}},{key:"getRoamingMessagesHopping",value:function(e){var t=this,a="".concat(this._n,".getRoamingMessagesHopping"),n=e.peerAccount,o=e.time,i=void 0===o?0:o,r=e.count,s=e.direction,l="".concat(I.CONV_C2C).concat(n),c="peerAccount:".concat(n," count:").concat(r," time:").concat(i," direction:").concat(s);He.l("".concat(a," ").concat(c));var u=new Vi("getC2CRoamingMessagesHopping");return this.request({protocolName:Tn,requestData:{peerAccount:n,count:r+1,lastMessageTime:i,direction:s}}).then((function(e){var n=e.data,o=n.complete,i=n.messageList,r=void 0===i?[]:i,d=n.lastMessageTime;He.l("".concat(a," ok. complete:").concat(o," count:").concat(r.length)),u.setNetworkType(t.getNetworkType()).setMessage("".concat(c," complete:").concat(o," length:").concat(r.length)).end(),1!==o&&(1===s?r.pop():r.shift());var m=t.getModule(Fa).onRoamingMessage(r,l,!1);t._modifyMessageList(l,m);var p=t._computeResult({complete:o,lastMessageTime:d,resultList:m});return Wi(p)})).catch((function(e){return t.probeNetwork().then((function(t){var a=_(t,2),n=a[0],o=a[1];u.setMessage(c).setError(e,n,o).end()})),He.w("".concat(a," failed. error:"),e),er(e)}))}},{key:"_computeResult",value:function(e){var t=e.complete,a=void 0===t?0:t,n=e.lastMessageTime,o=e.resultList,i={messageList:k(void 0===o?[]:o),isCompleted:!1,nextMessageTime:""};return 1===a?(i.isCompleted=!0,i):(i.nextMessageTime=n,i)}},{key:"_modifyMessageList",value:function(e,t){var a=this.getModule(Fa).getLocalConversation(e);if(a)for(var n=a.userProfile.nick,o=a.userProfile.avatar,i=this.getModule(Ra).getNickAndAvatarByUserID(this.getMyUserID()),r=i.nick,s=i.avatar,l=t.length-1;l>=0;l--){var c=t[l];"in"===c.flow&&(c.nick!==n&&c.setNickAndAvatar({nick:n}),c.avatar!==o&&c.setNickAndAvatar({avatar:o})),"out"===c.flow&&(c.nick!==r&&c.setNickAndAvatar({nick:r}),c.avatar!==s&&c.setNickAndAvatar({avatar:s}))}}},{key:"getRemotePeerReadTime",value:function(e){var t=this,a="".concat(this._n,".getRemotePeerReadTime");if(Zt(e))return He.w("".concat(a," userIDList is empty!")),Promise.resolve();var n=new Vi("getPeerReadTime");return He.l("".concat(a," userIDList:").concat(e)),this.request({protocolName:Dn,requestData:{userIDList:e}}).then((function(o){var i=o.data.peerReadTimeList;He.l("".concat(a," ok. peerReadTimeList:").concat(i));for(var r="",s=t.getModule(Fa),l=0;l<e.length;l++)r+="".concat(e[l],"-").concat(i[l]," "),i[l]>0&&s.recordPeerReadTime("C2C".concat(e[l]),i[l]);n.setNetworkType(t.getNetworkType()).setMessage(r).end()})).catch((function(e){t.probeNetwork().then((function(t){var a=_(t,2),o=a[0],i=a[1];n.setError(e,o,i).end()})),He.w("".concat(a," failed. error:"),e)}))}},{key:"sendReadReceipt",value:function(e){var t=this,a=e[0].conversationID.replace(I.CONV_C2C,""),n=new Vi("sendC2CReadReceipt");n.setMessage("peerAccount:".concat(a));var o=this.getMyUserID(),i=e.filter((function(e){return e.from!==o&&!0===e.needReadReceipt})).map((function(e){return{fromAccount:e.from,toAccount:e.to,sequence:e.sequence,random:e.random,time:e.time,clientTime:e.clientTime}}));if(0===i.length)return er({code:fi.READ_RECEIPT_MESSAGE_LIST_EMPTY});var r="".concat(this._n,".sendReadReceipt");return He.l("".concat(r,". peerAccount:").concat(a," messageInfoList length:").concat(i.length)),this.request({protocolName:vo,requestData:{peerAccount:a,messageInfoList:i}}).then((function(e){return n.end(),He.l("".concat(r," ok")),Wi()})).catch((function(e){return t.probeNetwork().then((function(t){var a=_(t,2),o=a[0],i=a[1];n.setError(e,o,i).end()})),He.w("".concat(r," failed. error:"),e),er(e)}))}},{key:"getReadReceiptList",value:function(e){var t="".concat(this._n,".getReadReceiptList"),a=this.getMyUserID(),n=e.filter((function(e){return e.from===a&&!0===e.needReadReceipt}));return He.l("".concat(t," userID:").concat(a," messageList length:").concat(n.length)),Qi({messageList:n})}},{key:"getMessageExtensions",value:function(e,t){return He.l("".concat(this._n,".getMessageExtensions startSequence:").concat(t)),this.request({protocolName:Ln,requestData:{from:e.from,to:e.to,messageKey:this._getMessageKey(e),startSequence:t}})}},{key:"modifyMessageExtensions",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return He.l("".concat(this._n,".modifyMessageExtensions operateType:").concat(a)),this.request({protocolName:An,requestData:{from:e.from,to:e.to,messageKey:this._getMessageKey(e),extensionList:t,operateType:a}})}},{key:"_getMessageKey",value:function(e){var t=e.clientSequence,a=e.random,n=e.time;return"".concat(t,"_").concat(a,"_").concat(n)}},{key:"reset",value:function(){He.l("".concat(this._n,".reset")),this._messageFromUnreadDBMap.clear(),this._signalingFromUnreadDBList.length=0}}]),o}(dn),ar=function(){function e(){n(this,e),this.list=new Map,this._n="MessageListHandler",this._latestMessageSentByPeerMap=new Map,this._latestMessageSentByMeMap=new Map}return r(e,[{key:"getLocalOldestMessageByConversationID",value:function(e){if(!e)return null;if(!this.list.has(e))return null;var t=this.list.get(e).values();return t?t.next().value:null}},{key:"pushIn",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=e.conversationID,n=!0;this.list.has(a)||this.list.set(a,new Map);var o=this._getUniqueIDOfMessage(e);if(this.list.get(a).has(o)){var i=this.list.get(a).get(o);if(!t||!0===i.isModified)return!1}return this.list.get(a).set(o,e),this._setLatestMessageSentByPeer(a,e),this._setLatestMessageSentByMe(a,e),n}},{key:"unshift",value:function(e,t){var a;if(lt(e)?e.length>0&&(a=e[0].conversationID,this._unshiftMultipleMessages(e,t)):(a=e.conversationID,this._unshiftSingleMessage(e,t)),a&&a.startsWith(I.CONV_C2C)){var n=Array.from(this.list.get(a).values()),o=n.length;if(0===o)return;for(var i=o-1;i>=0;i--)if("out"===n[i].flow){this._setLatestMessageSentByMe(a,n[i]);break}for(var r=o-1;r>=0;r--)if("in"===n[r].flow){this._setLatestMessageSentByPeer(a,n[r]);break}}}},{key:"_unshiftSingleMessage",value:function(e,t){var a=e.conversationID,n=this._getUniqueIDOfMessage(e);if(!this.list.has(a))return this.list.set(a,new Map),this.list.get(a).set(n,e),void t.push(e);var o=this.list.get(a),i=Array.from(o);o.has(n)||(i.unshift([n,e]),this.list.set(a,new Map(i)),t.push(e))}},{key:"_unshiftMultipleMessages",value:function(e,t){for(var a=e.length,n=[],o=e[0].conversationID,i=this.list.get(o),r=this.list.has(o)?Array.from(i):[],s=0;s<a;s++){var l=this._getUniqueIDOfMessage(e[s]);i&&i.has(l)||(n.push([l,e[s]]),t.push(e[s]))}this.list.set(o,new Map(n.concat(r)))}},{key:"remove",value:function(e){var t=e.conversationID,a=this._getUniqueIDOfMessage(e);this.list.has(t)&&this.list.get(t).delete(a)}},{key:"revoke",value:function(e,t,a){if(He.d("revoke message",e,t,a),this.list.has(e)){var n,o=M(this.list.get(e));try{for(o.s();!(n=o.n()).done;){var i=_(n.value,2)[1];if(i.sequence===t&&(ct(a)||i.random===a))return i.isRevoked||(i.isRevoked=!0),i}}catch(r){o.e(r)}finally{o.f()}}return null}},{key:"removeByConversationID",value:function(e){this.list.has(e)&&(this.list.delete(e),this._latestMessageSentByPeerMap.delete(e),this._latestMessageSentByMeMap.delete(e))}},{key:"findMessage",value:function(e){var t,a=null,n=M(this.list);try{for(n.s();!(t=n.n()).done;)for(var o=k(_(t.value,2)[1].values()),i=o.length,r=0;r<i;r++)if(o[r].ID===e){a=o[r];break}}catch(s){n.e(s)}finally{n.f()}return a}},{key:"updateMessageIsPeerReadProperty",value:function(e,t){var a=[];if(this.list.has(e)){var n,o=M(this.list.get(e));try{for(o.s();!(n=o.n()).done;){var i=_(n.value,2)[1];i.time<=t&&!i.isPeerRead&&"out"===i.flow&&(i.isPeerRead=!0,a.push(i))}}catch(r){o.e(r)}finally{o.f()}He.l("".concat(this._n,".updateMessageIsPeerReadProperty conversationID:").concat(e," peerReadTime:").concat(t," count:").concat(a.length))}return a}},{key:"updateMessageIsModifiedProperty",value:function(e){var t=e.conversationID;if(this.list.has(t)){var a=this._getUniqueIDOfMessage(e),n=this.list.get(t).get(a);n&&(n.isModified=!0)}}},{key:"hasLocalMessageList",value:function(e){return this.list.has(e)}},{key:"getLocalMessageList",value:function(e){return this.hasLocalMessageList(e)?k(this.list.get(e).values()):[]}},{key:"hasLocalMessage",value:function(e,t){for(var a=!1,n=this.getLocalMessageList(e),o=n.length,i=0;i<o;i++)n[i].ID===t&&(a=!0);return a}},{key:"getLocalMessage",value:function(e,t){for(var a=null,n=this.getLocalMessageList(e),o=n.length,i=0;i<o;i++)if(n[i].ID===t){a=n[i];break}return a}},{key:"getLocalLastMessage",value:function(e){var t=this.getLocalMessageList(e);return t[t.length-1]}},{key:"getLocalOldestMessage",value:function(e){return this.getLocalMessageList(e)[0]}},{key:"_setLatestMessageSentByPeer",value:function(e,t){e.startsWith(I.CONV_C2C)&&"in"===t.flow&&this._latestMessageSentByPeerMap.set(e,t)}},{key:"_setLatestMessageSentByMe",value:function(e,t){e.startsWith(I.CONV_C2C)&&"out"===t.flow&&this._latestMessageSentByMeMap.set(e,t)}},{key:"getLatestMessageSentByPeer",value:function(e){return this._latestMessageSentByPeerMap.get(e)}},{key:"getLatestMessageSentByMe",value:function(e){return this._latestMessageSentByMeMap.get(e)}},{key:"modifyMessageSentByPeer",value:function(e){var t=e.conversationID,a=e.latestNick,n=e.latestAvatar,o=this.list.get(t);if(!Zt(o)){var i=Array.from(o.values()),r=i.length;if(0!==r){for(var s=null,l=0,c=!1,u=r-1;u>=0;u--)"in"===i[u].flow&&((s=i[u]).nick!==a&&(s.setNickAndAvatar({nick:a}),c=!0),s.avatar!==n&&(s.setNickAndAvatar({avatar:n}),c=!0),c&&(l+=1));He.l("".concat(this._n,".modifyMessageSentByPeer conversationID:").concat(t," count:").concat(l))}}}},{key:"modifyMessageSentByMe",value:function(e){var t=e.conversationID,a=e.latestNick,n=e.latestAvatar,o=this.list.get(t);if(!Zt(o)){var i=Array.from(o.values()),r=i.length;if(0!==r){for(var s=null,l=0,c=!1,u=r-1;u>=0;u--)"out"===i[u].flow&&((s=i[u]).nick!==a&&(s.setNickAndAvatar({nick:a}),c=!0),s.avatar!==n&&(s.setNickAndAvatar({avatar:n}),c=!0),c&&(l+=1));He.l("".concat(this._n,".modifyMessageSentByMe conversationID:").concat(t," count:").concat(l))}}}},{key:"getTopicConversationIDList",value:function(e){return k(this.list.keys()).filter((function(t){return t.startsWith("".concat(I.CONV_GROUP).concat(e))}))}},{key:"traversal",value:function(){if(0!==this.list.size&&-1===He.getLevel()){console.group("conversationID-messageCount");var e,t=M(this.list);try{for(t.s();!(e=t.n()).done;){var a=_(e.value,2),n=a[0],i=a[1];o("log","at node_modules/tim-js-sdk/tim-js.js:1","".concat(n,"-").concat(i.size))}}catch(r){t.e(r)}finally{t.f()}console.groupEnd()}}},{key:"onMessageModified",value:function(e,t){if(!this.list.has(e))return{isUpdated:!1,message:null};var a=this._getUniqueIDOfMessage(t),n=this.list.get(e).has(a);if(He.d("".concat(this._n,".onMessageModified conversationID:").concat(e," uniqueID:").concat(a," has:").concat(n)),n){var o=this.list.get(e).get(a),i=t.messageVersion,r=t.elements,s=t.cloudCustomData;return o.version<i?(o.version=i,o._elements=JSON.parse(JSON.stringify(r)),o.payload=JSON.parse(JSON.stringify(r[0].content)),o.type=r[0].type,o.cloudCustomData=s,o.isModified=!0,{isUpdated:!0,message:o}):{isUpdated:!1,message:o}}return{isUpdated:!1,message:null}}},{key:"_getUniqueIDOfMessage",value:function(e){var t=e.from,a=e.to,n=e.random,o=e.sequence,i=e.time;return"".concat(t,"-").concat(a,"-").concat(n,"-").concat(o,"-").concat(i)}},{key:"reset",value:function(){this.list.clear(),this._latestMessageSentByPeerMap.clear(),this._latestMessageSentByMeMap.clear()}}]),e}(),nr="_a2KeyAndTinyIDUpdated",or="_cloudConfigUpdated",ir="_profileUpdated";function rr(e){this.mixin(e)}rr.mixin=function(e){var t=e.prototype||e;t._isReady=!1,t.ready=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e)return this._isReady?void(t?e.call(this):setTimeout(e,1)):(this._readyQueue=this._readyQueue||[],void this._readyQueue.push(e))},t.triggerReady=function(){var e=this;this._isReady=!0,setTimeout((function(){var t=e._readyQueue;e._readyQueue=[],t&&t.length>0&&t.forEach((function(e){e.call(this)}),e)}),1)},t.resetReady=function(){this._isReady=!1,this._readyQueue=[]},t.isReady=function(){return this._isReady}};var sr=["jpg","jpeg","gif","png","bmp","image","webp"],lr=["mp4","quicktime","mov"],cr=1,ur=2,dr=3,mr=255,pr=function(){function e(t){var a=this;n(this,e),Zt(t)||(this.userID=t.userID||"",this.nick=t.nick||"",this.gender=t.gender||"",this.birthday=t.birthday||0,this.location=t.location||"",this.selfSignature=t.selfSignature||"",this.allowType=t.allowType||I.ALLOW_TYPE_ALLOW_ANY,this.language=t.language||0,this.avatar=t.avatar||"",this.messageSettings=t.messageSettings||0,this.adminForbidType=t.adminForbidType||I.FORBID_TYPE_NONE,this.level=t.level||0,this.role=t.role||0,this.lastUpdatedTime=0,this.profileCustomField=[],Zt(t.profileCustomField)||t.profileCustomField.forEach((function(e){a.profileCustomField.push({key:e.key,value:e.value})})))}return r(e,[{key:"validate",value:function(e){var t=!0,a="";if(Zt(e))return{valid:!1,tips:"empty options"};if(e.profileCustomField)for(var n=e.profileCustomField.length,o=null,i=0;i<n;i++){if(o=e.profileCustomField[i],!it(o.key)||-1===o.key.indexOf("Tag_Profile_Custom"))return{valid:!1,tips:"The prefix of keys of the custom profile key-value pairs (which is profileCustomField) must be Tag_Profile_Custom"};if(!it(o.value))return{valid:!1,tips:"The type of values of the custom profile key-value pairs (which is profileCustomField) must be String"}}for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if("profileCustomField"===r)continue;if(Zt(e[r])&&!it(e[r])&&!ot(e[r])){a="key:"+r+", invalid value:"+e[r],t=!1;continue}switch(r){case"nick":it(e[r])||(a="nick must be a string",t=!1),ft(e[r])>500&&(a="nick name limited: must less than or equal to ".concat(500," bytes, current size: ").concat(ft(e[r])," bytes"),t=!1);break;case"gender":Et(Ke,e.gender)||(a="key:gender, invalid value:"+e.gender,t=!1);break;case"birthday":ot(e.birthday)||(a="birthday must be a number",t=!1);break;case"location":it(e.location)||(a="location must be a string",t=!1);break;case"selfSignature":it(e.selfSignature)||(a="selfSignature must be a string",t=!1);break;case"allowType":Et(We,e.allowType)||(a="key:allowType, invalid value:"+e.allowType,t=!1);break;case"language":ot(e.language)||(a="language must be a number",t=!1);break;case"avatar":it(e.avatar)||(a="avatar must be a string",t=!1);break;case"messageSettings":0!==e.messageSettings&&1!==e.messageSettings&&(a="messageSettings must be 0 or 1",t=!1);break;case"adminForbidType":Et(Ye,e.adminForbidType)||(a="key:adminForbidType, invalid value:"+e.adminForbidType,t=!1);break;case"level":ot(e.level)||(a="level must be a number",t=!1);break;case"role":ot(e.role)||(a="role must be a number",t=!1);break;default:a="unknown key:"+r+"  "+e[r],t=!1}}return{valid:t,tips:a}}}]),e}(),hr=r((function e(t){n(this,e),this.value=t,this.next=null})),vr=function(){function e(t){n(this,e),this.MAX_LENGTH=t,this.pTail=null,this.pNodeToDel=null,this.map=new Map}return r(e,[{key:"set",value:function(e){var t=new hr(e);if(this.map.size<this.MAX_LENGTH)null===this.pTail?(this.pTail=t,this.pNodeToDel=t):(this.pTail.next=t,this.pTail=t),this.map.set(e,1);else{var a=this.pNodeToDel;this.pNodeToDel=this.pNodeToDel.next,this.map.delete(a.value),a.next=null,a=null,this.pTail.next=t,this.pTail=t,this.map.set(e,1)}}},{key:"has",value:function(e){return this.map.has(e)}},{key:"delete",value:function(e){this.has(e)&&this.map.delete(e)}},{key:"tail",value:function(){return this.pTail}},{key:"size",value:function(){return this.map.size}},{key:"data",value:function(){return Array.from(this.map.keys())}},{key:"reset",value:function(){for(var e;null!==this.pNodeToDel;)e=this.pNodeToDel,this.pNodeToDel=this.pNodeToDel.next,e.next=null,e=null;this.pTail=null,this.map.clear()}}]),e}(),gr=["groupID","name","avatar","type","introduction","notification","ownerID","selfInfo","createTime","infoSequence","lastInfoTime","lastMessage","nextMessageSeq","memberNum","maxMemberNum","memberList","joinOption","groupCustomField","muteAllMembers","isSupportTopic","inviteOption","_lastRevokedTime"],fr=function(){function e(t){n(this,e),this.groupID="",this.name="",this.avatar="",this.type="",this.introduction="",this.notification="",this.ownerID="",this.createTime="",this.infoSequence="",this.lastInfoTime="",this.selfInfo={messageRemindType:"",joinTime:"",nameCard:"",role:"",userID:"",memberCustomField:void 0,readedSequence:0,excludedUnreadSequenceList:void 0},this.lastMessage={lastTime:"",lastSequence:"",fromAccount:"",messageForShow:""},this.nextMessageSeq="",this.memberNum="",this.memberCount="",this.maxMemberNum="",this.maxMemberCount="",this.joinOption="",this.inviteOption="",this.groupCustomField=[],this.muteAllMembers=!1,this.isSupportTopic=!1,this._lastRevokedTime=0,this._initGroup(t)}return r(e,[{key:"memberNum",get:function(){return this.memberCount},set:function(e){}},{key:"maxMemberNum",get:function(){return this.maxMemberCount},set:function(e){}},{key:"_initGroup",value:function(e){for(var t in e)gr.indexOf(t)<0||("selfInfo"!==t?("memberNum"===t&&(this.memberCount=e[t]),"maxMemberNum"===t&&(this.maxMemberCount=e[t]),"isSupportTopic"!==t?this[t]=e[t]:this.isSupportTopic=1===e[t]):this.updateSelfInfo(e[t]))}},{key:"updateGroup",value:function(e){var t=this;e.appid=void 0,e.grossTopicNextMsgSeq=void 0,e.selfInfo&&(e.selfInfo.grossTopicReadSeq=void 0);var a=JSON.parse(JSON.stringify(e));a.lastMsgTime&&(this.lastMessage.lastTime=a.lastMsgTime),ct(a.muteAllMembers)||("On"===a.muteAllMembers?a.muteAllMembers=!0:a.muteAllMembers=!1),a.groupCustomField&&Ct(this.groupCustomField,a.groupCustomField),ct(a.memberNum)||(this.memberCount=a.memberNum),ct(a.maxMemberNum)||(this.maxMemberCount=a.maxMemberNum),ct(a.isSupportTopic)||(this.isSupportTopic=ot(a.isSupportTopic)?1===a.isSupportTopic:a.isSupportTopic),vt(this,a,["members","errorCode","lastMsgTime","groupCustomField","memberNum","maxMemberNum","isSupportTopic"]),lt(a.members)&&a.members.length>0&&a.members.forEach((function(e){e.userID===t.selfInfo.userID&&vt(t.selfInfo,e,["sequence"])}))}},{key:"updateSelfInfo",value:function(e){var a={nameCard:e.nameCard,joinTime:e.joinTime,role:e.role,messageRemindType:e.messageRemindType,readedSequence:e.readedSequence,excludedUnreadSequenceList:e.excludedUnreadSequenceList};vt(this.selfInfo,t({},a),[],["",null,void 0,0,NaN])}},{key:"setSelfNameCard",value:function(e){this.selfInfo.nameCard=e}}]),e}(),yr=function(e,a){return ct(e)?{lastTime:0,lastSequence:0,fromAccount:0,messageForShow:"",payload:null,type:"",isRevoked:!1,cloudCustomData:"",onlineOnlyFlag:!1,nick:"",nameCard:"",version:0,isPeerRead:!1,revoker:null}:e instanceof Yi?{lastTime:e.time||0,lastSequence:e.sequence||0,fromAccount:e.from||"",messageForShow:Ht(e.type,e.payload,a),payload:e.payload||null,type:e.type||null,isRevoked:e.isRevoked||!1,cloudCustomData:e.cloudCustomData||"",onlineOnlyFlag:e._onlineOnlyFlag||!1,nick:e.nick||"",nameCard:e.nameCard||"",version:e.version||0,isPeerRead:e.isPeerRead||!1,revoker:e.revoker||null}:t(t({},e),{},{messageForShow:Ht(e.type,e.payload,a)})},_r=function(){function e(t,a){n(this,e),this.conversationID=t.conversationID||"",this.unreadCount=t.unreadCount||0,this.type=t.type||"",this.lastMessage=yr(t.lastMessage,a),t.lastMsgTime&&(this.lastMessage.lastTime=t.lastMsgTime),this._isInfoCompleted=!1,this.peerReadTime=t.peerReadTime||0,this.groupAtInfoList=[],this.remark="",this.isPinned=t.isPinned||!1,this.messageRemindType="",this.markList=t.markList||[],this.customData=t.customData||"",this.conversationGroupList=t.conversationGroupList||[],this._initProfile(t)}return r(e,[{key:"toAccount",get:function(){return this.conversationID.startsWith(I.CONV_C2C)?this.conversationID.replace(I.CONV_C2C,""):this.conversationID.startsWith(I.CONV_GROUP)?this.conversationID.replace(I.CONV_GROUP,""):""}},{key:"subType",get:function(){return this.groupProfile?this.groupProfile.type:""}},{key:"_initProfile",value:function(e){var t=this;Object.keys(e).forEach((function(a){switch(a){case"userProfile":t.userProfile=e.userProfile;break;case"groupProfile":t.groupProfile=e.groupProfile}})),ct(this.userProfile)&&this.type===I.CONV_C2C?this.userProfile=new pr({userID:e.conversationID.replace("C2C","")}):ct(this.groupProfile)&&this.type===I.CONV_GROUP&&(this.groupProfile=new fr({groupID:e.conversationID.replace("GROUP","")}))}},{key:"updateUnreadCount",value:function(e){var t=e.nextUnreadCount,a=e.isFromGetConversations,n=e.isUnreadC2CMessage;ct(t)||(Mt(this.subType)?this.unreadCount=0:a&&this.type===I.CONV_GROUP||a&&this.type===I.CONV_TOPIC||n&&this.type===I.CONV_C2C?this.unreadCount=t:this.unreadCount=this.unreadCount+t)}},{key:"updateLastMessage",value:function(e){this.lastMessage=yr(e)}},{key:"updateGroupAtInfoList",value:function(e){if(!this._isNeedMergeGroupAtInfo(e)){var t,a=(E(t=e.groupAtType)||x(t)||N(t)||C()).slice(0);-1!==a.indexOf(I.CONV_AT_ME)&&-1!==a.indexOf(I.CONV_AT_ALL)&&(a=[I.CONV_AT_ALL_AT_ME]);var n={from:e.from,groupID:e.groupID,topicID:e.topicID,messageSequence:e.sequence,atTypeArray:a,__random:e.__random,__sequence:e.__sequence};this.groupAtInfoList.push(n)}}},{key:"_isNeedMergeGroupAtInfo",value:function(e){var t=e.groupID,a=e.sequence;if(!St({groupID:t}))return!1;var n=!1;return this.groupAtInfoList.forEach((function(t){t.messageSequence===a&&(t.atTypeArray.indexOf(I.CONV_AT_ME)>-1&&e.groupAtType.indexOf(I.CONV_AT_ALL)>-1&&(t.atTypeArray=[I.CONV_AT_ALL_AT_ME]),t.atTypeArray.indexOf(I.CONV_AT_ALL)>-1&&e.groupAtType.indexOf(I.CONV_AT_ME)>-1&&(t.atTypeArray=[I.CONV_AT_ALL_AT_ME],t.__random=e.__random,t.__sequence=e.__sequence),n=!0)})),n}},{key:"clearGroupAtInfoList",value:function(){this.groupAtInfoList.length=0}},{key:"reduceUnreadCount",value:function(){return this.unreadCount>=1&&(this.unreadCount-=1,!0)}},{key:"isLastMessageRevoked",value:function(e){var t=e.sequence,a=e.time;return this.type===I.CONV_C2C&&t===this.lastMessage.lastSequence&&a===this.lastMessage.lastTime||this.type===I.CONV_GROUP&&t===this.lastMessage.lastSequence}},{key:"setLastMessageRevoked",value:function(e){this.lastMessage.isRevoked=e}},{key:"setLastMessageRevoker",value:function(e){this.lastMessage.revoker=e}}]),e}(),kr=function(){function e(t){n(this,e),this._conversationModule=t,this._n="MessageRemindHandler",this._updateSequence=0}return r(e,[{key:"getC2CMessageRemindType",value:function(){var e=this,t="".concat(this._n,".getC2CMessageRemindType");return this._conversationModule.request({protocolName:In,updateSequence:this._updateSequence}).then((function(a){He.l("".concat(t," ok"));var n=a.data,o=n.updateSequence,i=n.muteFlagList;e._updateSequence=o,e._patchC2CMessageRemindType(i)})).catch((function(e){He.e("".concat(t," failed. error:"),e)}))}},{key:"_patchC2CMessageRemindType",value:function(e){var t=this,a=0,n="";lt(e)&&e.length>0&&e.forEach((function(e){var o=e.userID,i=e.muteFlag;0===i?n=I.MSG_REMIND_ACPT_AND_NOTE:1===i?n=I.MSG_REMIND_DISCARD:2===i&&(n=I.MSG_REMIND_ACPT_NOT_NOTE),!0===t._conversationModule.patchMessageRemindType({ID:o,isC2CConversation:!0,messageRemindType:n})&&(a+=1)})),He.l("".concat(this._n,"._patchC2CMessageRemindType count:").concat(a))}},{key:"set",value:function(e){return e.groupID?this._setGroupMessageRemindType(e):lt(e.userIDList)?this._setC2CMessageRemindType(e):void 0}},{key:"_setGroupMessageRemindType",value:function(e){var t=this,a="".concat(this._n,"._setGroupMessageRemindType"),n=e.groupID,o=e.messageRemindType,i="groupID:".concat(n," messageRemindType:").concat(o),r=new Vi("setMessageRemindType");return r.setMessage(i),this._getModule(Ua).modifyGroupMemberInfo({groupID:n,messageRemindType:o,userID:this._conversationModule.getMyUserID()}).then((function(){r.setNetworkType(t._conversationModule.getNetworkType()).end(),He.l("".concat(a," ok. ").concat(i));var n=t.onGroupMessageRemindTypeUpdated(e);return t._conversationModule.emitTotalUnreadMessageCountUpdate(),Wi(n)})).catch((function(e){return t._conversationModule.probeNetwork().then((function(t){var a=_(t,2),n=a[0],o=a[1];r.setError(e,n,o).end()})),He.e("".concat(a," failed. error:"),e),er(e)}))}},{key:"onGroupMessageRemindTypeUpdated",value:function(e){var t=e.groupID,a=e.messageRemindType,n=this._getModule(Ba).getLocalGroupProfile(t);if(n&&(n.selfInfo.messageRemindType=a),It(t)){var o=t,i=zt(o),r=this._getModule(Ga).getLocalTopic(i,o);return r&&(r.updateSelfInfo({messageRemindType:a}),this._conversationModule.emitOuterEvent(S.TOPIC_UPDATED,{groupID:i,topic:r})),{topic:r}}return this._conversationModule.patchMessageRemindType({ID:t,isC2CConversation:!1,messageRemindType:a})&&this._emitConversationUpdate(),{group:n}}},{key:"_setC2CMessageRemindType",value:function(e){var t=this,a="".concat(this._n,"._setC2CMessageRemindType"),n=e.userIDList,o=e.messageRemindType,i=n.slice(0,30),r=0;o===I.MSG_REMIND_DISCARD?r=1:o===I.MSG_REMIND_ACPT_NOT_NOTE&&(r=2);var s="userIDList:".concat(i," messageRemindType:").concat(o),l=new Vi("setMessageRemindType");return l.setMessage(s),this._conversationModule.request({protocolName:Sn,requestData:{userIDList:i,muteFlag:r}}).then((function(e){l.setNetworkType(t._conversationModule.getNetworkType()).end();var n=e.data,r=n.updateSequence,s=n.errorList;t._updateSequence=r;var c=[],u=[];lt(s)&&s.forEach((function(e){c.push(e.userID),u.push({userID:e.userID,code:e.errorCode})}));var d=i.filter((function(e){return-1===c.indexOf(e)}));He.l("".concat(a," ok. successUserIDList:").concat(d," failureUserIDList:").concat(JSON.stringify(u)));var m=0;return d.forEach((function(e){t._conversationModule.patchMessageRemindType({ID:e,isC2CConversation:!0,messageRemindType:o})&&(m+=1)})),m>=1&&t._emitConversationUpdate(),i.length=c.length=0,t._conversationModule.emitTotalUnreadMessageCountUpdate(),Qi({successUserIDList:d.map((function(e){return{userID:e}})),failureUserIDList:u})})).catch((function(e){return t._conversationModule.probeNetwork().then((function(t){var a=_(t,2),n=a[0],o=a[1];l.setError(e,n,o).end()})),He.e("".concat(a," failed. error:"),e),er(e)}))}},{key:"_getModule",value:function(e){return this._conversationModule.getModule(e)}},{key:"_emitConversationUpdate",value:function(){this._conversationModule.emitConversationUpdate(!0,!1)}},{key:"setUpdateSequence",value:function(e){this._updateSequence=e}},{key:"reset",value:function(){He.l("".concat(this._n,".reset")),this._updateSequence=0}}]),e}(),Er=function(){function e(t){n(this,e),this._conversationModule=t,this._n="ConvGroupHandler",this._convGroupMap=new Map,this._startIndex=0,this._pagingStatus=aa.NOT_START}return r(e,[{key:"setConvCustomData",value:function(e){var t=this,a="".concat(this._n,".").concat("setConvCustomData"),n=e.conversationIDList,o=e.customData;He.l("".concat(a," options:"),e);var i=new Vi("setConvCustomData");i.setMessage(JSON.stringify(e));var r={fromAccount:this._getMyUserID(),itemList:[]},s=[],l=[];return n.forEach((function(e){if(!t._hasLocalConversation(e))return t._onConversationNotFound(l,e),!0;if(!Tt(e)&&!Dt(e))return t._onConversationIDInvalid(l,e),!0;var a={operationType:2,contactItem:void 0,customMark:o};Tt(e)?a.contactItem={type:1,toAccount:e.replace(I.CONV_C2C,"")}:Dt(e)&&(a.contactItem={type:2,groupID:e.replace(I.CONV_GROUP,"")}),r.itemList.push(a)})),l.length===n.length?Qi({successConversationIDList:s,failureConversationIDList:l}):this._conversationModule.request({protocolName:Fn,requestData:r}).then((function(e){i.setNetworkType(t._conversationModule.getNetworkType()).end(),He.l("".concat(a," ok"));var n=e.data.resultItem;if(lt(n)){var r,c,u=!1;n.forEach((function(e){r=t._concatConversationID(e.contactItem),0===e.resultCode?(s.push(r),(c=t._getLocalConversation(r))&&c.customData!==o&&(c.customData=o,u=!0)):l.push({conversationID:r,code:e.resultCode,message:e.resultInfo})})),!0===u&&t._emitConversationUpdate()}return Wi({successConversationIDList:s,failureConversationIDList:l})})).catch((function(e){return t._conversationModule.probeNetwork().then((function(t){var a=_(t,2),n=a[0],o=a[1];i.setError(e,n,o).end()})),He.e("".concat(a," failed. error:"),e),er(e)}))}},{key:"markConversation",value:function(e){var t=this;if(!this._conversationModule.canIUse(H.CONV_MARK))return er({code:fi.CANNOT_USE_COMMERCIAL_ABILITY});var a="".concat(this._n,".").concat("markConversation"),n=e.conversationIDList,o=e.markType,i=e.enableMark;He.l("".concat(a," options:"),e);var r=new Vi("markConversation");r.setMessage(JSON.stringify(e));var s=void 0,l=void 0,c=this._getFlagBit(o);!0===i?l=[c]:s=[c];var u={fromAccount:this._getMyUserID(),itemList:[]},d=[],m=[];return n.forEach((function(e){if(!t._hasLocalConversation(e))return t._onConversationNotFound(m,e),!0;if(!Tt(e)&&!Dt(e))return t._onConversationIDInvalid(m,e),!0;var a={operationType:1,contactItem:void 0,clearMark:s,setMark:l};Tt(e)?a.contactItem={type:1,toAccount:e.replace(I.CONV_C2C,"")}:Dt(e)&&(a.contactItem={type:2,groupID:e.replace(I.CONV_GROUP,"")}),u.itemList.push(a)})),m.length===n.length?Qi({successConversationIDList:d,failureConversationIDList:m}):this._conversationModule.request({protocolName:qn,requestData:u}).then((function(e){r.setNetworkType(t._conversationModule.getNetworkType()).end(),He.l("".concat(a," ok"));var n=e.data.resultItem;if(lt(n)){var s,l,c=!1;n.forEach((function(e){if(s=t._concatConversationID(e.contactItem),0===e.resultCode){if(d.push(s),l=t._getLocalConversation(s)){var a=l.markList.indexOf(o);!0===i?-1===a&&(l.markList.push(o),c=!0):-1!==a&&(l.markList.splice(a,1),c=!0)}}else m.push({conversationID:s,code:e.resultCode,message:e.resultInfo})})),!0===c&&t._emitConversationUpdate()}return Wi({successConversationIDList:d,failureConversationIDList:m})})).catch((function(e){return t._conversationModule.probeNetwork().then((function(t){var a=_(t,2),n=a[0],o=a[1];r.setError(e,n,o).end()})),He.e("".concat(a," failed. error:"),e),er(e)}))}},{key:"getLocalConvGroupList",value:function(){var e=this;return He.l("".concat(this._n,".getLocalConvGroupList pagingStatus:").concat(this._pagingStatus)),this._pagingStatus===aa.REJECTED?this.getRemoteConvGroupList().then((function(){return Wi(k(e._convGroupMap.values()))})):Qi(k(this._convGroupMap.values()))}},{key:"getRemoteConvGroupList",value:function(){var e=this,t="".concat(this._n,".getRemoteConvGroupList");return this._pagingStatus=aa.PENDING,this._conversationModule.request({protocolName:Yn,requestData:{fromAccount:this._getMyUserID(),startIndex:this._startIndex,startTime:Ge()}}).then((function(a){var n,o,i=a.data,r=i.completeFlag,s=i.contactItem,l=i.nextStartIndex,c=void 0===l?0:l,u=i.groupItem;if(e._startIndex=c,He.l("".concat(t," completeFlag:").concat(r," nextStartIndex:").concat(c)),lt(u)&&u.forEach((function(t){var a=t.convGroupID,n=t.groupName;e._convGroupMap.set(a,n)})),lt(s)&&s.forEach((function(t){var a=t.standardMark,i=t.customData,r=t.convGroupIDList;if(n=e._concatConversationID(t),(o=e._getLocalConversation(n))&&(o.markList=jt(a),o.customData=i||"",lt(r))){var s=[];r.forEach((function(t){e._convGroupMap.has(t)&&s.push(e._convGroupMap.get(t))})),o.conversationGroupList=[].concat(s),s.length=0}})),0===r)return e.getRemoteConvGroupList();1===r&&(e._pagingStatus=aa.RESOLVED,e._emitConversationUpdate(),e._emitConvGroupListUpdate())})).catch((function(a){e._pagingStatus=aa.REJECTED,He.w("".concat(t," failed. error:"),a)}))}},{key:"createConvGroup",value:function(e){var t=this;if(!this._conversationModule.canIUse(H.CONV_GROUP))return er({code:fi.CANNOT_USE_COMMERCIAL_ABILITY});var a="".concat(this._n,".").concat("createConvGroup");He.l("".concat(a," options:"),e);var n=new Vi("createConvGroup");n.setMessage(JSON.stringify(e));var o=e.groupName,i=e.conversationIDList,r={fromAccount:this._getMyUserID(),itemList:[{groupName:o,contactItem:[]}]},s=[],l=[];return i.forEach((function(e){return t._hasLocalConversation(e)?Tt(e)||Dt(e)?void(Tt(e)?r.itemList[0].contactItem.push({type:1,toAccount:e.replace(I.CONV_C2C,"")}):Dt(e)&&r.itemList[0].contactItem.push({type:2,groupID:e.replace(I.CONV_GROUP,"")})):(t._onConversationIDInvalid(l,e),!0):(t._onConversationNotFound(l,e),!0)})),l.length===i.length?Qi({successConversationIDList:s,failureConversationIDList:l}):this._conversationModule.request({protocolName:zn,requestData:r}).then((function(e){n.setNetworkType(t._conversationModule.getNetworkType()).end(),He.l("".concat(a," ok"));var i=e.data.groupResultItem[0],r=i.groupItem,c=i.resultItem;if(st(r)&&(t._convGroupMap.set(r.convGroupID,r.groupName),t._emitConvGroupListUpdate()),lt(c)){var u,d,m=!1;c.forEach((function(e){u=t._concatConversationID(e.contactItem),0===e.resultCode?(s.push(u),(d=t._getLocalConversation(u))&&-1===d.conversationGroupList.indexOf(o)&&(d.conversationGroupList.push(o),m=!0)):l.push({conversationID:u,code:e.resultCode,message:e.resultInfo})})),!0===m&&(t._emitConversationUpdate(),t._emitConvGroupListUpdate())}return Wi({successConversationIDList:s,failureConversationIDList:l})})).catch((function(e){return t._conversationModule.probeNetwork().then((function(t){var a=_(t,2),o=a[0],i=a[1];n.setError(e,o,i).end()})),He.e("".concat(a," failed. error:"),e),er(e)}))}},{key:"deleteConvGroup",value:function(e){var t=this;if(!this._conversationModule.canIUse(H.CONV_GROUP))return er({code:fi.CANNOT_USE_COMMERCIAL_ABILITY});var a="".concat(this._n,".").concat("deleteConvGroup");He.l("".concat(a," groupName:").concat(e));var n=new Vi("deleteConvGroup");return n.setMessage(e),this._conversationModule.request({protocolName:Hn,requestData:{fromAccount:this._getMyUserID(),groupName:[e]}}).then((function(o){n.setNetworkType(t._conversationModule.getNetworkType()).end(),He.l("".concat(a," ok"));var i=o.data.groupItem;if(lt(i)){var r=!1;i.forEach((function(e){t._convGroupMap.has(e.convGroupID)&&(t._convGroupMap.delete(e.convGroupID),r=!0)})),!0===r&&t._emitConvGroupListUpdate()}t._eraseFromConversationGroupList([e])})).catch((function(e){return t._conversationModule.probeNetwork().then((function(t){var a=_(t,2),o=a[0],i=a[1];n.setError(e,o,i).end()})),He.e("".concat(a," failed. error:"),e),er(e)}))}},{key:"renameConvGroup",value:function(e){var t=this;if(!this._conversationModule.canIUse(H.CONV_GROUP))return er({code:fi.CANNOT_USE_COMMERCIAL_ABILITY});var a="".concat(this._n,".").concat("renameConvGroup");He.l("".concat(a," options:"),e);var n=new Vi("renameConvGroup");n.setMessage(JSON.stringify(e));var o=e.oldName,i=e.newName;return this._conversationModule.request({protocolName:$n,requestData:{fromAccount:this._getMyUserID(),updateType:1,updateGroup:{updateGroupType:1,oldName:o,newName:i}}}).then((function(e){n.setNetworkType(t._conversationModule.getNetworkType()).end(),He.l("".concat(a," ok"));var r=e.data.updateGroupResult.convGroupID;t._convGroupMap.set(r,i),t._emitConvGroupListUpdate();var s,l,c=t._conversationModule.getLocalConversationList(),u=!1;c.forEach((function(e){s=e.conversationGroupList,-1!==(l=s.indexOf(o))&&(s.splice(l,1,i),u=!0)})),!0===u&&t._emitConversationUpdate()})).catch((function(e){return t._conversationModule.probeNetwork().then((function(t){var a=_(t,2),o=a[0],i=a[1];n.setError(e,o,i).end()})),He.e("".concat(a," failed. error:"),e),er(e)}))}},{key:"addConvsToGroup",value:function(e){var t=this;if(!this._conversationModule.canIUse(H.CONV_GROUP))return er({code:fi.CANNOT_USE_COMMERCIAL_ABILITY});var a="".concat(this._n,".").concat("addConvsToGroup");He.l("".concat(a," options:"),e);var n=new Vi("addConvsToGroup");n.setMessage(JSON.stringify(e));var o=e.conversationIDList,i=e.groupName,r={fromAccount:this._getMyUserID(),updateType:1,updateGroup:{updateGroupType:2,groupName:i,updateItem:[]}},s=[],l=[];return o.forEach((function(e){return t._hasLocalConversation(e)?Tt(e)||Dt(e)?void(Tt(e)?r.updateGroup.updateItem.push({operationType:1,contactItem:{type:1,toAccount:e.replace(I.CONV_C2C,"")}}):Dt(e)&&r.updateGroup.updateItem.push({operationType:1,contactItem:{type:2,groupID:e.replace(I.CONV_GROUP,"")}})):(t._onConversationIDInvalid(l,e),!0):(t._onConversationNotFound(l,e),!0)})),l.length===o.length?Qi({successConversationIDList:s,failureConversationIDList:l}):this._conversationModule.request({protocolName:jn,requestData:r}).then((function(e){n.setNetworkType(t._conversationModule.getNetworkType()).end(),He.l("".concat(a," ok"));var o=e.data.updateGroupResult.contactResultItem;if(lt(o)){var r,c,u=!1;o.forEach((function(e){r=t._concatConversationID(e.contactItem),0===e.resultCode?(c=t._getLocalConversation(r))&&-1===c.conversationGroupList.indexOf(i)&&(c.conversationGroupList.push(i),s.push(r),u=!0):l.push({conversationID:r,code:e.resultCode,message:e.resultInfo})})),!0===u&&(t._emitConversationUpdate(),t._emitConvInGroupUpdate(i))}return Wi({successConversationIDList:s,failureConversationIDList:l})})).catch((function(e){return t._conversationModule.probeNetwork().then((function(t){var a=_(t,2),o=a[0],i=a[1];n.setError(e,o,i).end()})),He.e("".concat(a," failed. error:"),e),er(e)}))}},{key:"deleteConvsFromGroup",value:function(e){var t=this;if(!this._conversationModule.canIUse(H.CONV_GROUP))return er({code:fi.CANNOT_USE_COMMERCIAL_ABILITY});var a="".concat(this._n,".").concat("deleteConvsFromGroup");He.l("".concat(a," options:"),e);var n=new Vi("deleteConvsFromGroup");n.setMessage(JSON.stringify(e));var o=e.conversationIDList,i=e.groupName,r={fromAccount:this._getMyUserID(),updateType:1,updateGroup:{updateGroupType:2,groupName:i,updateItem:[]}},s=[],l=[];return o.forEach((function(e){return t._hasLocalConversation(e)?Tt(e)||Dt(e)?void(Tt(e)?r.updateGroup.updateItem.push({operationType:2,contactItem:{type:1,toAccount:e.replace(I.CONV_C2C,"")}}):Dt(e)&&r.updateGroup.updateItem.push({operationType:2,contactItem:{type:2,groupID:e.replace(I.CONV_GROUP,"")}})):(t._onConversationIDInvalid(l,e),!0):(t._onConversationNotFound(l,e),!0)})),l.length===o.length?Qi({successConversationIDList:s,failureConversationIDList:l}):this._conversationModule.request({protocolName:Kn,requestData:r}).then((function(e){n.setNetworkType(t._conversationModule.getNetworkType()).end(),He.l("".concat(a," ok"));var o=e.data.updateGroupResult.contactResultItem;if(lt(o)){var r,c,u=!1;o.forEach((function(e){if(r=t._concatConversationID(e.contactItem),0===e.resultCode){if(c=t._getLocalConversation(r)){var a=c.conversationGroupList.indexOf(i);-1!==a&&(c.conversationGroupList.splice(a,1),s.push(r),u=!0)}}else l.push({conversationID:r,code:e.resultCode,message:e.resultInfo})})),!0===u&&(t._emitConversationUpdate(),t._emitConvInGroupUpdate(i))}return Wi({successConversationIDList:s,failureConversationIDList:l})})).catch((function(e){return t._conversationModule.probeNetwork().then((function(t){var a=_(t,2),o=a[0],i=a[1];n.setError(e,o,i).end()})),He.e("".concat(a," failed. error:"),e),er(e)}))}},{key:"onConvMarkUpdated",value:function(e){var t=this;if(!Zt(e)){var a,n;He.d("".concat(this._n,".onConvMarkUpdated markItemList:"),e);var o=!1;e.forEach((function(e){var i=e.recentContactItem,r=e.optType,s=e.standardMark,l=e.customMark;if(a=t._concatConversationID(i),n=t._getLocalConversation(a))if(1===r){var c=jt(s);!0!==function(e,t){if(e===t)return!0;if(!e||!t)return!1;if(e.length!==t.length)return!1;for(var a=0,n=e.length;a<n;a++)if(e[a]!==t[a])return!1;return!0}(n.markList,c)&&(n.markList=c,o=!0)}else 2===r&&n.customData!==l&&void 0!==l&&(n.customData=l,o=!0)})),!0===o&&this._emitConversationUpdate()}}},{key:"onConvGroupCreated",value:function(e){var t=this;He.d("".concat(this._n,".onConvGroupCreated resultList:"),e);var a=!1,n=!1;lt(e)&&(e.forEach((function(e){var o=e.msgGroupItem,i=o.groupID,r=o.groupName;t._convGroupMap.get(i)!==r&&(t._convGroupMap.set(i,r),n=!0);var s,l,c=e.msgRecentContactItem;lt(c)&&c.forEach((function(e){s=t._concatConversationID(e),(l=t._getLocalConversation(s))&&-1===l.conversationGroupList.indexOf(r)&&(l.conversationGroupList.push(r),a=!0)}))})),!0===a&&this._emitConversationUpdate(),!0===n&&this._emitConvGroupListUpdate())}},{key:"onConvGroupDeleted",value:function(e){var t=this;He.d("".concat(this._n,".onConvGroupDeleted groupItemList:"),e);var a=[];if(lt(e)){var n=!1;e.forEach((function(e){var o=e.groupID,i=e.groupName;t._convGroupMap.has(o)&&(t._convGroupMap.delete(o),n=!0,a.push(i))})),!0===n&&this._emitConvGroupListUpdate()}this._eraseFromConversationGroupList(a)}},{key:"_eraseFromConversationGroupList",value:function(e){Zt(e)||(this._conversationModule.getLocalConversationList().forEach((function(t){t.conversationGroupList=t.conversationGroupList.filter((function(t){return!e.includes(t)}))})),this._emitConversationUpdate())}},{key:"onConvGroupNameUpdated",value:function(e){He.d("".concat(this._n,".onConvGroupNameUpdated options:"),e);var t=e.groupID,a=e.groupName,n=e.oldGroupName;if(this._convGroupMap.get(t)!==a){this._convGroupMap.set(t,a),this._emitConvGroupListUpdate();var o,i,r=this._conversationModule.getLocalConversationList(),s=!1;r.forEach((function(e){o=e.conversationGroupList,-1!==(i=o.indexOf(n))&&(o.splice(i,1,a),s=!0)})),!0===s&&this._emitConversationUpdate()}}},{key:"onConvInGroupUpdated",value:function(e){var t=this;He.d("".concat(this._n,".onConvInGroupUpdated options:"),e);var a=e.oldGroupName,n=e.recentContactUpdateGroupItem;if(lt(n)){var o,i,r,s=!1;n.forEach((function(e){var n=e.contactOptType,l=e.recentContactItem;o=t._concatConversationID(l),(i=t._getLocalConversation(o))&&(r=i.conversationGroupList.indexOf(a),1===n?-1===r&&(i.conversationGroupList.push(a),s=!0):2===n&&-1!==r&&(i.conversationGroupList.splice(r,1),s=!0))})),!0===s&&(this._emitConversationUpdate(),this._emitConvInGroupUpdate(a))}}},{key:"onConvAddedToOrDeletedFromGroup",value:function(e){var t=this;He.d("".concat(this._n,".onConvAddedToOrDeletedFromGroup options:"),e);var a=e.msgRecentContactItem,n=e.msgRecentContactUpdateContactItem,o=this._concatConversationID(a),i=this._getLocalConversation(o);if(i&&lt(n)){var r,s=!1;n.forEach((function(e){var a=e.groupOptType,n=e.recentContactGroupItem.groupName;r=i.conversationGroupList.indexOf(n),1===a?-1===r&&(i.conversationGroupList.push(n),s=!0):2===a&&-1!==r&&(i.conversationGroupList.splice(r,1),s=!0),!0===s&&t._emitConvInGroupUpdate(n)})),!0===s&&this._emitConversationUpdate()}}},{key:"onConvGroupListSynced",value:function(e){var t=this;lt(e)&&0!==e.length&&(He.l("".concat(this._n,".onConvGroupListSynced groupItemList:"),e),e.forEach((function(e){t._convGroupMap.set(e.convGroupID,e.groupName)})))}},{key:"getConvGroupListByID",value:function(e){var t=this;if(!Zt(e)){var a=[];return e.forEach((function(e){t._convGroupMap.has(e)&&a.push(t._convGroupMap.get(e))})),a}}},{key:"_onConversationNotFound",value:function(e,t){e.push({conversationID:t,code:fi.CONVERSATION_NOT_FOUND,message:this._conversationModule.getErrorMessage(fi.CONVERSATION_NOT_FOUND)})}},{key:"_onConversationIDInvalid",value:function(e,t){e.push({conversationID:t,code:fi.INVALID_CONVERSATION_ID,message:this._conversationModule.getErrorMessage(fi.INVALID_CONVERSATION_ID)})}},{key:"_getFlagBit",value:function(e){for(var t=e.toString(2),a=t.length,n=a-1;n>=0;n--)if("1"===t[n])return a-n-1}},{key:"_concatConversationID",value:function(e){var t,a=e.type,n=e.to,o=e.groupID,i=e.userID;return 1===a?ct(i)?ct(n)||(t="".concat(I.CONV_C2C).concat(n)):t="".concat(I.CONV_C2C).concat(i):2===a&&(t="".concat(I.CONV_GROUP).concat(o)),t}},{key:"_getMyUserID",value:function(){return this._conversationModule.getMyUserID()}},{key:"_insertConversationGroup",value:function(e,t){var a=this._getLocalConversation(e);if(a){var n=a.conversationGroupList;-1===n.indexOf(t)&&n.push(t)}}},{key:"_getLocalConversation",value:function(e){return this._conversationModule.getLocalConversation(e)}},{key:"_hasLocalConversation",value:function(e){return this._conversationModule.hasLocalConversation(e)}},{key:"_emitConversationUpdate",value:function(){this._conversationModule.emitConversationUpdate(!0,!1)}},{key:"_emitConvGroupListUpdate",value:function(){this._conversationModule.emitOuterEvent(S.CONVERSATION_GROUP_LIST_UPDATED,k(this._convGroupMap.values()))}},{key:"_emitConvInGroupUpdate",value:function(e){var t={groupName:e,conversationList:[]},a=this._conversationModule.getLocalConversationList();t.conversationList=a.filter((function(t){return t.conversationGroupList.includes(e)})),this._conversationModule.emitOuterEvent(S.CONVERSATION_IN_GROUP_UPDATED,t)}},{key:"reset",value:function(){He.l("".concat(this._n,".reset")),this._convGroupMap.clear(),this._startIndex=0,this._pagingStatus=aa.NOT_START}}]),e}(),xr=function(e){l(o,e);var a=y(o);function o(e){var t;return n(this,o),(t=a.call(this,e))._n="ConversationModule",rr.mixin(g(t)),t._messageListHandler=new ar,t._messageRemindHandler=new kr(g(t)),t._convGroupHandler=new Er(g(t)),t.singlyLinkedList=new vr(100),t._pagingStatus=aa.NOT_START,t._pagingTimeStamp=0,t._pagingStartIndex=0,t._pagingPinnedTimeStamp=0,t._pagingPinnedStartIndex=0,t._pagingConvIDMap=new Map,t._convIDFromUnreadDBMap=new Map,t._conversationMap=new Map,t._tmpGroupList=[],t._tmpGroupAtTipsList=[],t._peerReadTimeMap=new Map,t._completedMap=new Map,t._roamingMessageKeyAndTimeMap=new Map,t._roamingMessageSequenceMap=new Map,t._remoteGroupReadSequenceMap=new Map,t._convTotalUnreadCount=0,t._pagingGetCostList=[],t._initListeners(),t}return r(o,[{key:"_initListeners",value:function(){var e=this.getInnerEmitterInstance();e.on(nr,this._initLocalConversationList,this),e.on(ir,this._onProfileUpdated,this)}},{key:"onCheckTimer",value:function(e){e%60==0&&this._messageListHandler.traversal()}},{key:"_initLocalConversationList",value:function(){var e=this,t=new Vi("_initLocalConversationList");He.l("".concat(this._n,".").concat("_initLocalConversationList"));var a="",n=this._getStorageConversationList(),o=this.isIntl();if(n){for(var i=n.length,r=0;r<i;r++){var s=n[r];if(s){if(s.conversationID==="".concat(I.CONV_C2C,"@TLS#ERROR")||s.conversationID==="".concat(I.CONV_C2C,"@TLS#NOT_FOUND"))continue;if(s.groupProfile){var l=s.groupProfile.type;if(Mt(l))continue}}this._conversationMap.set(n[r].conversationID,new _r(n[r],o))}this.emitConversationUpdate(!0,!1),a="count:".concat(i)}else a="count:0";t.setNetworkType(this.getNetworkType()).setMessage(a).end(),this.getModule(Oa)||this.triggerReady(),this.ready((function(){e._tmpGroupList.length>0&&(e.updateConversationGroupProfile(e._tmpGroupList),e._tmpGroupList.length=0)})),this.syncConversationList()}},{key:"onMessageSent",value:function(e){this._onSendOrReceiveMessage({conversationOptionsList:e.conversationOptionsList,isInstantMessage:!0})}},{key:"onNewMessage",value:function(e){this._onSendOrReceiveMessage(e)}},{key:"_onSendOrReceiveMessage",value:function(e){var t=this,a=e.conversationOptionsList,n=e.isInstantMessage,o=void 0===n||n,i=e.isUnreadC2CMessage,r=void 0!==i&&i,s=e.updateUnreadCount,l=void 0===s||s;this._isReady?0!==a.length&&(this._getC2CPeerReadTime(a),this._updateLocalConversationList({conversationOptionsList:a,isInstantMessage:o,isUnreadC2CMessage:r,isFromGetConversations:!1,updateUnreadCount:l}),o||(this._convIDFromUnreadDBMap=new Map([].concat(k(this._convIDFromUnreadDBMap),k(a.map((function(e){return[e.conversationID,1]}))))),this._diffAndDeleteConversation()),this._setStorageConversationList(),a.filter((function(e){return e.type===I.CONV_TOPIC})).length>0||this.emitConversationUpdate()):this.ready((function(){t._onSendOrReceiveMessage(e)}))}},{key:"updateConversationGroupProfile",value:function(e){var t=this;if(!lt(e)||0!==e.length)if(0!==this._conversationMap.size){var a=!1;e.forEach((function(e){var n="GROUP".concat(e.groupID);if(t._conversationMap.has(n)){a=!0;var o=t._conversationMap.get(n);o.groupProfile=JSON.parse(JSON.stringify(e)),o.lastMessage.lastSequence<e.nextMessageSeq&&(o.lastMessage.lastSequence=e.nextMessageSeq-1),o.subType||(o.subType=e.type)}})),a&&this.emitConversationUpdate(!0,!1)}else this._tmpGroupList=e}},{key:"_updateConversationUserProfile",value:function(e){var t=this;e.data.forEach((function(e){var a="C2C".concat(e.userID);t._conversationMap.has(a)&&(t._conversationMap.get(a).userProfile=e)})),this.emitConversationUpdate(!0,!1)}},{key:"onMessageRevoked",value:function(e){var t=this;if(0!==e.length){var a=null,n=!1,o=[];e.forEach((function(e){(a=t._conversationMap.get(e.conversationID))&&(a.type===I.CONV_TOPIC?o.push(e):(a.reduceUnreadCount()&&(n=!0),a.isLastMessageRevoked({sequence:e.sequence,time:e.time})&&(a.setLastMessageRevoked(!0),a.setLastMessageRevoker(e.revoker),n=!0)))})),this.getModule(Ga).onMessageRevoked(o),n&&(this.emitConversationUpdate(!0,!1),this.emitTotalUnreadMessageCountUpdate())}}},{key:"isLastMessageRevoked",value:function(e){var t=!1,a=e.conversationID,n=e.sequence,o=e.time,i=this._conversationMap.get(a);return i&&(t=i.type===I.CONV_TOPIC?this.getModule(Ga).isLastMessageRevoked({topicID:a.replace(I.CONV_GROUP,""),sequence:n}):i.isLastMessageRevoked({sequence:n,time:o})),He.l("".concat(this._n,".isLastMessageRevoked options:").concat(JSON.stringify(e)," ret:").concat(t)),t}},{key:"onMessageDeleted",value:function(e){var t=this;if(0!==e.length){var a=null;e.forEach((function(e){(a=t._messageListHandler.getLocalMessage(e.conversationID,e.ID))&&(a.isDeleted=!0),e!==a&&(e.isDeleted=!0)}));for(var n=e[0].conversationID,o=this._messageListHandler.getLocalMessageList(n),i={},r=o.length-1;r>=0;r--)if(!o[r].isDeleted){i=o[r];break}var s=this._conversationMap.get(n);if(s){var l=!1;s.lastMessage.lastSequence===i.sequence&&s.lastMessage.lastTime===i.time||(Zt(i)&&(i=void 0),s.updateLastMessage(i),s.type!==I.CONV_TOPIC&&(l=!0),He.l("".concat(this._n,".onMessageDeleted. update conversationID:").concat(n," with lastMessage:"),s.lastMessage)),n.startsWith(I.CONV_C2C)&&this.updateUnreadCount(n),l&&this.emitConversationUpdate(!0,!1)}}}},{key:"onMessageModified",value:function(e){var t=e.conversationType,a=e.from,n=e.to,o=e.time,i=e.sequence,r=e.elements,s=e.cloudCustomData,l=e.messageVersion,c=this.getMyUserID(),u="".concat(t).concat(n);n===c&&t===I.CONV_C2C&&(u="".concat(t).concat(a));var d=this._messageListHandler.onMessageModified(u,e),m=d.isUpdated,p=d.message;!0===m&&this.emitOuterEvent(S.MESSAGE_MODIFIED,[p]);var h=this._isTopicConversation(u);if(He.l("".concat(this._n,".onMessageModified isUpdated:").concat(m," isTopicMessage:").concat(h," from:").concat(a," to:").concat(n)),h)this.getModule(Ga).onMessageModified(e);else{var v=this._conversationMap.get(u);if(v){var g=v.lastMessage;He.d("".concat(this._n.onMessageModified," lastMessage:"),JSON.stringify(g),"options:",JSON.stringify(e)),g&&g.lastTime===o&&g.lastSequence===i&&g.version!==l&&(g.type=r[0].type,g.payload=r[0].content,g.messageForShow=Ht(g.type,g.payload,this.isIntl()),g.cloudCustomData=s,g.version=l,this.emitConversationUpdate(!0,!1))}}return p}},{key:"onNewGroupAtTips",value:function(e){var a=this,n=e.dataList,o=null;n.forEach((function(e){e.groupAtTips?o=e.groupAtTips:e.elements?o=t(t({},e.elements),{},{sync:!0}):e.groupAtType&&(o=t(t({},e),{},{sync:!0})),o.__random=e.random,o.__sequence=e.clientSequence,a._tmpGroupAtTipsList.push(o)})),He.d("".concat(this._n,".onNewGroupAtTips isReady:").concat(this._isReady),this._tmpGroupAtTipsList),this._isReady&&this._handleGroupAtTipsList()}},{key:"_handleGroupAtTipsList",value:function(){var e=this;if(0!==this._tmpGroupAtTipsList.length){var t=!1;this._tmpGroupAtTipsList.forEach((function(a){var n=a.groupID,o=a.from,i=a.topicID,r=void 0===i?void 0:i,s=a.sync,l=void 0!==s&&s;if(o!==e.getMyUserID())if(ct(r)){var c=e._conversationMap.get("".concat(I.CONV_GROUP).concat(n));c&&(c.updateGroupAtInfoList(a),t=!0)}else{var u=e._conversationMap.get("".concat(I.CONV_GROUP).concat(r));if(u){u.updateGroupAtInfoList(a);var d=e.getModule(Ga),m=u.groupAtInfoList;d.onConversationProxy({topicID:r,groupAtInfoList:m})}Zt(u)&&l&&(e.updateTopicConversation([{conversationID:"".concat(I.CONV_GROUP).concat(r),type:I.CONV_TOPIC}]),e._conversationMap.get("".concat(I.CONV_GROUP).concat(r)).updateGroupAtInfoList(a))}})),t&&this.emitConversationUpdate(!0,!1),this._tmpGroupAtTipsList.length=0}}},{key:"_getC2CPeerReadTime",value:function(e){var t=this,a=[];if(e.forEach((function(e){t._conversationMap.has(e.conversationID)||e.type!==I.CONV_C2C||a.push(e.conversationID.replace(I.CONV_C2C,""))})),a.length>0){He.d("".concat(this._n,"._getC2CPeerReadTime userIDList:").concat(a));var n=this.getModule(Oa);n&&n.getRemotePeerReadTime(a)}}},{key:"_getStorageConversationList",value:function(){return this.getModule(za).getItem("conversationMap")}},{key:"_setStorageConversationList",value:function(){var e=this.getLocalConversationList().filter((function(e){return e.type===I.CONV_C2C||e.type===I.CONV_GROUP&&e.lastMessage.type!==I.MSG_GRP_TIP})).slice(0,20).map((function(e){return{conversationID:e.conversationID,type:e.type,subType:e.subType,lastMessage:e.lastMessage,groupProfile:e.groupProfile,userProfile:e.userProfile}}));this.getModule(za).setItem("conversationMap",e)}},{key:"emitConversationUpdate",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=this.getLocalConversationList();if(t){var n=this.getModule(Ba);n&&n.updateGroupLastMessage(a)}e&&this.emitOuterEvent(S.CONVERSATION_LIST_UPDATED)}},{key:"getLocalConversationList",value:function(){return k(this._conversationMap.values()).filter((function(e){return e.type!==I.CONV_TOPIC}))}},{key:"getLocalConversation",value:function(e){return this._conversationMap.get(e)}},{key:"hasLocalConversation",value:function(e){return this._conversationMap.has(e)}},{key:"getLocalOldestMessage",value:function(e){return this._messageListHandler.getLocalOldestMessage(e)}},{key:"syncConversationList",value:function(){var e=this,t=new Vi("syncConversationList");return this._pagingStatus===aa.NOT_START&&this._conversationMap.clear(),this._pagingGetConversationList().then((function(a){var n=function(e){if(lt(e)&&0!==e.length){var t=0;return e.forEach((function(e){t+=e})),(t/e.length).toFixed(0)}}(e._pagingGetCostList);return He.l("".concat(e._n,".").concat("syncConversationList",". sum ").concat(function(e){if(lt(e)&&0!==e.length){var t=0;return e.forEach((function(e){t+=e})),t.toFixed(0)}}(e._pagingGetCostList)," ms, average ").concat(n," ms")),e._pagingGetCostList.length=0,e._pagingStatus=aa.RESOLVED,e._diffAndDeleteConversation(),e.emitConversationUpdate(!0,!1),e._setStorageConversationList(),e._handleC2CPeerReadTime(),e._patchConversationProperties(),t.setMessage(e._conversationMap.size).setMoreMessage(n).setNetworkType(e.getNetworkType()).end(),a})).catch((function(a){return e._pagingStatus=aa.REJECTED,t.setMessage(e._pagingTimeStamp),e.probeNetwork().then((function(e){var n=_(e,2),o=n[0],i=n[1];t.setError(a,o,i).end()})),er(a)}))}},{key:"_diffAndDeleteConversation",value:function(){var e=this;if(this._isSyncCompleted()){var t=[];this._conversationMap.forEach((function(a,n){!e._pagingConvIDMap.has(n)&&e._convIDFromUnreadDBMap.has(n)&&(e._conversationMap.delete(n),t.push(n))})),He.l("".concat(this._n,"._diffAndDeleteConversation list:").concat(t))}}},{key:"_patchConversationProperties",value:function(){var e=this,t=Date.now(),a=this.checkAndPatchRemark(),n=this._messageRemindHandler.getC2CMessageRemindType(),o=this.getModule(Ba).getGroupList();Promise.all([a,n,o]).then((function(){var a=Date.now()-t;He.l("".concat(e._n,"._patchConversationProperties ok. cost ").concat(a," ms")),e.emitConversationUpdate(!0,!1),e.emitTotalUnreadMessageCountUpdate()}))}},{key:"_pagingGetConversationList",value:function(){var e=this,t="".concat(this._n,"._pagingGetConversationList");He.l("".concat(t," timeStamp:").concat(this._pagingTimeStamp," startIndex:").concat(this._pagingStartIndex)+" pinnedTimeStamp:".concat(this._pagingPinnedTimeStamp," pinnedStartIndex:").concat(this._pagingPinnedStartIndex));var a=Date.now();return this._pagingStatus=aa.PENDING,this.request({protocolName:Rn,requestData:{fromAccount:this.getMyUserID(),timeStamp:this._pagingTimeStamp,startIndex:this._pagingStartIndex,pinnedTimeStamp:this._pagingPinnedTimeStamp,pinnedStartIndex:this._pagingPinnedStartIndex,orderType:1}}).then((function(n){var o=n.data,i=o.completeFlag,r=o.conversations,s=void 0===r?[]:r,l=o.timeStamp,c=o.startIndex,u=o.pinnedTimeStamp,d=o.pinnedStartIndex,m=o.groupItem,p=Date.now()-a;if(e._pagingGetCostList.push(p),He.l("".concat(t," ok. completeFlag:").concat(i," count:").concat(s.length," cost ").concat(p," ms")),e._convGroupHandler.onConvGroupListSynced(m),s.length>0){var h=e._getConversationOptions(s);e._pagingConvIDMap=new Map([].concat(k(e._pagingConvIDMap),k(h.map((function(e){return[e.conversationID,1]}))))),e._updateLocalConversationList({conversationOptionsList:h,isFromGetConversations:!0}),e.isLoggedIn()&&e.emitConversationUpdate()}if(!e._isReady){if(!e.isLoggedIn())return Qi();e.triggerReady()}return e._pagingTimeStamp=l,e._pagingStartIndex=c,e._pagingPinnedTimeStamp=u,e._pagingPinnedStartIndex=d,1!==i?e._pagingGetConversationList():(e._handleGroupAtTipsList(),e._convGroupHandler.getRemoteConvGroupList(),Qi())})).catch((function(a){throw e.isLoggedIn()&&(e._isReady||(He.w("".concat(t," failed. error:"),a),e.triggerReady())),a}))}},{key:"_updateLocalConversationList",value:function(e){var t,a=e.isFromGetConversations,n=e.isInstantMessage,o=Date.now();t=this._getTmpConversationListMapping(e),this._conversationMap=new Map(this._sortConversationList([].concat(k(t.toBeUpdatedConversationList),k(this._conversationMap)))),a||(this._updateUserOrGroupProfile(t.newConversationList),n&&this.emitTotalUnreadMessageCountUpdate()),He.d("".concat(this._n,"._updateLocalConversationList cost ").concat(Date.now()-o," ms"))}},{key:"_getTmpConversationListMapping",value:function(e){for(var t=e.conversationOptionsList,a=e.isFromGetConversations,n=e.isInstantMessage,o=e.isUnreadC2CMessage,i=void 0!==o&&o,r=e.updateUnreadCount,s=[],l=[],c=this.getModule(Ba),u=this.getModule(Pa),d=this.isIntl(),m=0,p=t.length;m<p;m++){var h=new _r(t[m],d),v=h.conversationID;if(v!=="".concat(I.CONV_C2C,"@TLS#ERROR")&&v!=="".concat(I.CONV_C2C,"@TLS#NOT_FOUND"))if(this._conversationMap.has(v)){var g=this._conversationMap.get(v),f=["unreadCount","allowType","adminForbidType","payload","isPinned"];!1===n&&f.push("lastMessage");var y=t[m].lastMessage,_=!ct(y);_||t[m].type===I.CONV_TOPIC||this._onLastMessageNotExist(t[m]),ct(n)&&_&&null===g.lastMessage.payload&&(g.lastMessage.payload=y.payload),Zt(g.lastMessage.revoker)||(g.lastMessage.revoker=null),vt(g,h,f,[null,void 0,"",0,NaN]),!0===r&&g.updateUnreadCount({nextUnreadCount:h.unreadCount,isFromGetConversations:a,isUnreadC2CMessage:i}),n&&_&&(y.payload&&(g.lastMessage.payload=y.payload),g.type===I.CONV_GROUP&&(g.lastMessage.nameCard=y.nameCard,g.lastMessage.nick=y.nick)),_&&g.lastMessage.cloudCustomData!==y.cloudCustomData&&(g.lastMessage.cloudCustomData=y.cloudCustomData||""),this._conversationMap.delete(v),s.push([v,g])}else{if(h.type===I.CONV_GROUP&&c){var k=h.groupProfile.groupID,E=c.getLocalGroupProfile(k);E&&(h.groupProfile=E,!0===r&&h.updateUnreadCount({nextUnreadCount:0}))}else if(h.type===I.CONV_C2C){var x=v.replace(I.CONV_C2C,"");u&&u.isMyFriend(x)&&(h.remark=u.getFriendRemark(x))}l.push(h),s.push([v,h])}}var N=this.getModule(Ga);return s.forEach((function(e){if(e[1].type===I.CONV_TOPIC){var t=e[1],a=t.conversationID,n=t.unreadCount,o=t.groupAtInfoList;N.onConversationProxy({topicID:a.replace(I.CONV_GROUP,""),unreadCount:n,groupAtInfoList:Zt(o)?void 0:o})}})),{toBeUpdatedConversationList:s,newConversationList:l}}},{key:"_onLastMessageNotExist",value:function(e){new Vi("lastMessageNotExist").setMessage("".concat(JSON.stringify(e))).setNetworkType(this.getNetworkType()).end()}},{key:"_sortConversationList",value:function(e){var t=[],a=[],n=[],o=[];return e.forEach((function(e){!0===e[1].isPinned?Zt(e[1].lastMessage.lastTime)?a.push(e):t.push(e):Zt(e[1].lastMessage.lastTime)?o.push(e):n.push(e)})),t.sort((function(e,t){return t[1].lastMessage.lastTime-e[1].lastMessage.lastTime})).concat(a).concat(n.sort((function(e,t){return t[1].lastMessage.lastTime-e[1].lastMessage.lastTime}))).concat(o)}},{key:"_sortConversationListAndEmitEvent",value:function(){this._conversationMap=new Map(this._sortConversationList(k(this._conversationMap))),this.emitConversationUpdate(!0,!1)}},{key:"_updateUserOrGroupProfile",value:function(e){var t=this;if(0!==e.length){var a=[],n=[],o=this.getModule(Ra),i=this.getModule(Ba);e.forEach((function(e){if(e.type===I.CONV_C2C)a.push(e.toAccount);else if(e.type===I.CONV_GROUP){var t=e.toAccount;i.hasLocalGroup(t)?e.groupProfile=i.getLocalGroupProfile(t):n.push(t)}})),He.l("".concat(this._n,"._updateUserOrGroupProfile c2cUserIDList:").concat(a," groupIDList:").concat(n)),a.length>0&&o.getUserProfile({userIDList:a}).then((function(e){var a=e.data;lt(a)?a.forEach((function(e){t._doUpdateUserProfile("C2C".concat(e.userID),e)})):t._doUpdateUserProfile("C2C".concat(a.userID),a)})),n.length>0&&i.getGroupProfileAdvance({groupIDList:n,responseFilter:{groupBaseInfoFilter:["Type","Name","FaceUrl"]}}).then((function(e){e.data.successGroupList.forEach((function(e){var a="GROUP".concat(e.groupID);if(t._conversationMap.has(a)){var n=t._conversationMap.get(a);vt(n.groupProfile,e,[],[null,void 0,"",0,NaN]),!n.subType&&e.type&&(n.subType=e.type)}}))}))}}},{key:"_doUpdateUserProfile",value:function(e,t){this.hasLocalConversation(e)&&(this.getLocalConversation(e).userProfile=t)}},{key:"_getConversationOptions",value:function(e){var a=this,n=[],o=e.filter((function(e){var t=e.type,a=e.userID;return 1===t&&"@TLS#NOT_FOUND"!==a&&"@TLS#ERROR"!==a||2===t})),i=this.getMyUserID(),r=o.map((function(e){if(ct(e.lastMsg)&&(e.lastMsg={elements:[]}),1===e.type){var o={userID:e.userID,nick:e.peerNick,avatar:e.peerAvatar};return n.push(o),{conversationID:"C2C".concat(e.userID),type:"C2C",lastMessage:{lastTime:e.time,lastSequence:e.sequence,fromAccount:e.lastC2CMsgFromAccount,messageForShow:e.messageShow,type:e.lastMsg.elements[0]?e.lastMsg.elements[0].type:null,payload:e.lastMsg.elements[0]?a._amendLayersOverLimitProperty(e.lastMsg.elements[0].content):null,cloudCustomData:e.lastMsg.cloudCustomData||"",isRevoked:8===e.lastMessageFlag,onlineOnlyFlag:!1,nick:"",nameCard:"",version:0,isPeerRead:e.lastC2CMsgFromAccount===i&&e.time<=e.c2cPeerReadTime,revoker:e.lastMsg.revokerInfo?e.lastMsg.revokerInfo.revoker:null},userProfile:new pr(o),peerReadTime:e.c2cPeerReadTime,isPinned:1===e.isPinned,messageRemindType:"",customData:e.customMark||"",markList:jt(e.standardMark),conversationGroupList:a._convGroupHandler.getConvGroupListByID(e.contactGroupId)}}return{conversationID:"GROUP".concat(e.groupID),type:"GROUP",lastMessage:t(t({lastTime:e.time,lastSequence:e.sequence,fromAccount:e.msgGroupFromAccount,messageForShow:e.messageShow},a._patchTypeAndPayload(e)),{},{cloudCustomData:e.lastMsg.cloudCustomData||"",isRevoked:2===e.lastMessageFlag,onlineOnlyFlag:!1,nick:e.senderNick||"",nameCard:e.senderNameCard||"",revoker:e.lastMsg.revokerInfo?e.lastMsg.revokerInfo.revoker:null}),groupProfile:new fr({groupID:e.groupID,name:e.groupNick,avatar:e.groupImage}),unreadCount:e.unreadCount,peerReadTime:0,isPinned:1===e.isPinned,messageRemindType:"",version:0,customData:e.customMark||"",markList:jt(e.standardMark),conversationGroupList:a._convGroupHandler.getConvGroupListByID(e.contactGroupId)}}));return n.length>0&&this.getModule(Ra).onConversationsProfileUpdated(n),r}},{key:"_patchTypeAndPayload",value:function(e){var a=e.lastMsg,n=a.event,o=void 0===n?void 0:n,i=a.elements,r=void 0===i?[]:i,s=a.groupTips,l=void 0===s?{}:s;if(!ct(o)&&!Zt(l)){var c=new Yi(l);c.setElement({type:I.MSG_GRP_TIP,content:t(t({},l.elements),{},{groupProfile:l.groupProfile})});var u=JSON.parse(JSON.stringify(c.payload));return c=null,{type:I.MSG_GRP_TIP,payload:u}}return{type:r[0]?r[0].type:null,payload:r[0]?this._amendLayersOverLimitProperty(r[0].content):null}}},{key:"_amendLayersOverLimitProperty",value:function(e){var t=e.layersOverLimit;return 0===t?e.layersOverLimit=!1:1===t&&(e.layersOverLimit=!0),e}},{key:"getLocalMessageList",value:function(e){return this._messageListHandler.getLocalMessageList(e)}},{key:"deleteLocalMessage",value:function(e){e instanceof Yi&&this._messageListHandler.remove(e)}},{key:"onConversationDeleted",value:function(e){if(lt(e)){var t=e.map((function(e){var t=e.type,a=e.userID,n=e.groupID;return 1===t?"".concat(I.CONV_C2C).concat(a):2===t?"".concat(I.CONV_GROUP).concat(n):void 0}));He.l("".concat(this._n,".onConversationDeleted conversationIDList:").concat(t)),this.deleteLocalConversationList(t)}}},{key:"onConversationPinned",value:function(e){var t=this;if(lt(e)){var a=!1;e.forEach((function(e){var n,o=e.type,i=e.userID,r=e.groupID;1===o?n=t.getLocalConversation("".concat(I.CONV_C2C).concat(i)):2===o&&(n=t.getLocalConversation("".concat(I.CONV_GROUP).concat(r))),n&&(He.l("".concat(t._n,".onConversationPinned conversationID:").concat(n.conversationID," isPinned:").concat(n.isPinned)),n.isPinned||(n.isPinned=!0,a=!0))})),a&&this._sortConversationListAndEmitEvent()}}},{key:"onConversationUnpinned",value:function(e){var t=this;if(lt(e)){var a=!1;e.forEach((function(e){var n,o=e.type,i=e.userID,r=e.groupID;1===o?n=t.getLocalConversation("".concat(I.CONV_C2C).concat(i)):2===o&&(n=t.getLocalConversation("".concat(I.CONV_GROUP).concat(r))),n&&(He.l("".concat(t._n,".onConversationUnpinned conversationID:").concat(n.conversationID," isPinned:").concat(n.isPinned)),n.isPinned&&(n.isPinned=!1,a=!0))})),a&&this._sortConversationListAndEmitEvent()}}},{key:"getMessageList",value:function(e){var t=this,a=e.conversationID,n=e.nextReqMessageID,o=e.count,i="".concat(this._n,".getMessageList"),r=this.getLocalConversation(a),s="";if(r&&r.groupProfile&&(s=r.groupProfile.type),Mt(s))return He.l("".concat(i," not available in avchatroom. conversationID:").concat(a)),Qi({messageList:[],nextReqMessageID:"",isCompleted:!0});(ct(o)||o>15)&&(o=15),!n&&this._isNotInCommunity(a)&&(this._messageListHandler.removeByConversationID(a),this._completedMap.delete(a),this._roamingMessageSequenceMap.delete(a));var l=this._computeRemainingCount({conversationID:a,nextReqMessageID:n}),c=this._completedMap.has(a);if(He.l("".concat(i," conversationID:").concat(a," nextReqMessageID:").concat(n)+" remainingCount:".concat(l," count:").concat(o," isCompleted:").concat(c)),this._needGetHistory({conversationID:a,remainingCount:l,count:o}))return this.getHistoryMessages({conversationID:a,nextReqMessageID:n,count:20}).then((function(e){var n=e.nextReqID,o=e.storedMessageList,r=t._completedMap.has(a),s=o;l>0&&(s=t._messageListHandler.getLocalMessageList(a).slice(0,o.length+l));var c={nextReqMessageID:r?"":n,messageList:s,isCompleted:r};return He.l("".concat(i," ret.nextReqMessageID:").concat(c.nextReqMessageID," ret.isCompleted:").concat(c.isCompleted," ret.length:").concat(s.length)),Wi(c)}));this.modifyMessageList(a);var u=this._getMessageListFromMemory({conversationID:a,nextReqMessageID:n,count:o});return Qi(u)}},{key:"_getMessageListFromMemory",value:function(e){var t=e.conversationID,a=e.nextReqMessageID,n=e.count,o="".concat(this._n,"._getMessageListFromMemory"),i=this._messageListHandler.getLocalMessageList(t),r=i.length,s=0,l={isCompleted:!1,nextReqMessageID:"",messageList:[]};return a?(s=i.findIndex((function(e){return e.ID===a})))>n?(l.messageList=i.slice(s-n,s),l.nextReqMessageID=i[s-n].ID):(l.messageList=i.slice(0,s),l.isCompleted=!0):r>n?(s=r-n,l.messageList=i.slice(s,r),l.nextReqMessageID=i[s].ID):(l.messageList=i.slice(0,r),l.isCompleted=!0),He.l("".concat(o," conversationID:").concat(t)+" ret.nextReqMessageID:".concat(l.nextReqMessageID," ret.isCompleted:").concat(l.isCompleted," ret.length:").concat(l.messageList.length)),l}},{key:"getMessageListHopping",value:function(e){var t=e.conversationID,a=e.sequence,n=e.time,o=e.count,i=e.direction,r=void 0===i?0:i;if((ct(o)||o>15)&&(o=15),t.startsWith(I.CONV_C2C)){var s=this.getModule(Oa),l=t.replace(I.CONV_C2C,"");return s.getRoamingMessagesHopping({peerAccount:l,time:n,count:o,direction:r})}if(t.startsWith(I.CONV_GROUP)){var c=this.getModule(Ba),u=t.replace(I.CONV_GROUP,"");return c.getRoamingMessagesHopping({groupID:u,sequence:a,count:o,direction:r})}}},{key:"_computeRemainingCount",value:function(e){var t=e.conversationID,a=e.nextReqMessageID,n=this._messageListHandler.getLocalMessageList(t),o=n.length;if(!a)return o;var i=0;return Tt(t)?i=n.findIndex((function(e){return e.ID===a})):Dt(t)&&(i=-1!==a.indexOf("-")?n.findIndex((function(e){return e.ID===a})):n.findIndex((function(e){return e.sequence===a}))),-1===i&&(i=0),i}},{key:"_getMessageListSize",value:function(e){return this._messageListHandler.getLocalMessageList(e).length}},{key:"_needGetHistory",value:function(e){var t=e.conversationID,a=e.remainingCount,n=e.count,o=this.getLocalConversation(t),i="";return o&&o.groupProfile&&(i=o.groupProfile.type),!bt(t)&&!Mt(i)&&!(Dt(t)&&this._isPagingGetGroupListCompleted()&&this._getLocalGroupCount()<=4e3&&!this._hasLocalGroup(t)&&!this._isTopicConversation(t))&&a<=n&&!this._completedMap.has(t)}},{key:"_isTopicConversation",value:function(e){var t=e.replace(I.CONV_GROUP,"");return It(t)}},{key:"getHistoryMessages",value:function(e){var t=e.conversationID,a=e.count;if(t===I.CONV_SYSTEM)return Qi();var n=15;a>20&&(n=20);var o=null;if(Tt(t)){var i=this._roamingMessageKeyAndTimeMap.has(t);return(o=this.getModule(Oa))?o.getRoamingMessage({conversationID:t,peerAccount:t.replace(I.CONV_C2C,""),count:n,lastMessageTime:i?this._roamingMessageKeyAndTimeMap.get(t).lastMessageTime:0,messageKey:i?this._roamingMessageKeyAndTimeMap.get(t).messageKey:""}):er({code:fi.CANNOT_FIND_MODULE})}if(Dt(t)){if(!(o=this.getModule(Ba)))return er({code:fi.CANNOT_FIND_MODULE});var r=null;this._conversationMap.has(t)&&(r=this._conversationMap.get(t).lastMessage);var s=0;r&&(s=r.lastSequence);var l=this._roamingMessageSequenceMap.get(t);return o.getRoamingMessage({conversationID:t,groupID:t.replace(I.CONV_GROUP,""),count:n,sequence:l||s})}return Qi()}},{key:"patchConversationLastMessage",value:function(e){var t=this.getLocalConversation(e);if(t){var a=t.lastMessage,n=a.messageForShow,o=a.payload;if(Zt(n)||Zt(o)){var i=this._messageListHandler.getLocalMessageList(e);if(0===i.length)return;var r=i[i.length-1];He.l("".concat(this._n,".patchConversationLastMessage conversationID:").concat(e," payload:"),r.payload),t.updateLastMessage(r)}}}},{key:"onRoamingMessage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1?arguments[1]:void 0,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=a.startsWith(I.CONV_C2C)?I.CONV_C2C:I.CONV_GROUP,i=null,r=[],s=[],l=0,c=e.length,u=null,d=o===I.CONV_GROUP,m=this.getModule(ja),p=this.getFileDownloadProxy(),h=function(){l=d?e.length-1:0,c=d?0:e.length},v=function(){d?--l:++l},g=function(){return d?l>=c:l<c};for(h();g();v())if(d&&1===e[l].sequence&&n&&this.setCompleted(a),1!==e[l].isPlaceMessage)if((i=new Yi(e[l])).to=e[l].to,o!==I.CONV_GROUP||ct(e[l].topicID)||(i.to=e[l].topicID),i.isSystemMessage=!!e[l].isSystemMessage,i.conversationType=o,4===e[l].event?u={type:I.MSG_GRP_TIP,content:t(t({},e[l].elements),{},{groupProfile:e[l].groupProfile})}:(e[l].elements=m.parseElements(e[l].elements,e[l].from),u=e[l].elements),d||i.setNickAndAvatar({nick:e[l].nick,avatar:e[l].avatar}),Zt(u)){var f=new Vi("emptyMessageBody");f.setMessage("from:".concat(i.from," to:").concat(i.to," sequence:").concat(i.sequence," event:").concat(e[l].event)),f.setNetworkType(this.getNetworkType()).setLevel("warning").end()}else i.setElement(u,p),i.reInitialize(this.getMyUserID()),r.push(i);return h=v=g=null,n?(this._messageListHandler.unshift(r,s),r=null,s):(s=null,r)}},{key:"findMessage",value:function(e){return this._messageListHandler.findMessage(e)}},{key:"_isNotInCommunity",value:function(e){var t=!1;if(e.startsWith(I.CONV_GROUP)&&this._isTopicConversation(e)){var a=zt(e.replace(I.CONV_GROUP,""));this.getModule(Ba).hasLocalGroup(a)||(t=!0)}return t}},{key:"deleteTopicRoamingMessageInfo",value:function(e){var t=this;St({groupID:e})&&this._messageListHandler.getTopicConversationIDList(e).forEach((function(e){t._messageListHandler.removeByConversationID(e),t._completedMap.delete(e),t._roamingMessageSequenceMap.delete(e)}))}},{key:"deleteGroupRomaingMessageInfo",value:function(e){var t="".concat(I.CONV_GROUP).concat(e);this._messageListHandler.removeByConversationID(t),this._completedMap.delete(t),this._roamingMessageSequenceMap.delete(t)}},{key:"setMessageRead",value:function(e){var t=e.conversationID,a=this.getLocalConversation(t);if(He.l("".concat(this._n,".setMessageRead conversationID:").concat(t," unreadCount:").concat(a?a.unreadCount:0)),!a)return Qi();if(a.type!==I.CONV_GROUP&&a.type!==I.CONV_TOPIC||Zt(a.groupAtInfoList)||this.deleteGroupAtTips(t),0===a.unreadCount)return Qi();if(a.type===I.CONV_GROUP&&!this._hasLocalGroup(t))return 0!==a.unreadCount&&(a.unreadCount=0,this.emitConversationUpdate(!0,!1)),Qi();var n=this._messageListHandler.getLocalLastMessage(t),o=a.lastMessage.lastTime;n&&o<n.time&&(o=n.time);var i=a.lastMessage.lastSequence;if(n&&i<n.sequence&&(i=n.sequence),a.type===I.CONV_TOPIC&&ct(n)){var r=this.getModule(Ga),s=t.replace(I.CONV_GROUP,""),l=zt(s),c=r.getLocalTopic(l,s);c&&(i=c.nextMessageSeq-1)}var u=null;switch(a.type){case I.CONV_C2C:return(u=this.getModule(Oa))?u.setMessageRead({conversationID:t,lastMessageTime:o}):er({code:fi.CANNOT_FIND_MODULE});case I.CONV_GROUP:case I.CONV_TOPIC:return(u=this.getModule(Ba))?u.setMessageRead({conversationID:t,lastMessageSeq:i}):er({code:fi.CANNOT_FIND_MODULE});case I.CONV_SYSTEM:return a.unreadCount=0,this.emitConversationUpdate(!0,!1),Qi();default:return Qi()}}},{key:"setAllMessageRead",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a="setAllMessageRead",n="".concat(this._n,".").concat(a);t.scope||(t.scope=I.READ_ALL_MSG),He.l("".concat(n," options:"),t);var o=this._createSetAllMessageReadPack(t);if(0===o.readAllC2CMessage&&0===o.groupMessageReadInfoList.length)return Qi();var i=new Vi(a);return this.request({protocolName:uo,requestData:o}).then((function(a){var n=a.data,o=e._handleAllMessageRead(n);return i.setMessage("scope:".concat(t.scope," failureGroups:").concat(JSON.stringify(o))).setNetworkType(e.getNetworkType()).end(),Qi()})).catch((function(t){return e.probeNetwork().then((function(e){var a=_(e,2),n=a[0],o=a[1];i.setError(t,n,o).end()})),He.w("".concat(n," failed. error:"),t),er({code:t&&t.code?t.code:fi.MESSAGE_UNREAD_ALL_FAIL,message:t&&t.message?t.message:void 0})}))}},{key:"setConversationCustomData",value:function(e){return this._convGroupHandler.setConvCustomData(e)}},{key:"markConversation",value:function(e){return this._convGroupHandler.markConversation(e)}},{key:"getConversationGroupList",value:function(){return this._convGroupHandler.getLocalConvGroupList()}},{key:"createConversationGroup",value:function(e){return this._convGroupHandler.createConvGroup(e)}},{key:"deleteConversationGroup",value:function(e){return this._convGroupHandler.deleteConvGroup(e)}},{key:"renameConversationGroup",value:function(e){return this._convGroupHandler.renameConvGroup(e)}},{key:"addConversationsToGroup",value:function(e){return this._convGroupHandler.addConvsToGroup(e)}},{key:"deleteConversationsFromGroup",value:function(e){return this._convGroupHandler.deleteConvsFromGroup(e)}},{key:"onConversationMarkUpdated",value:function(e){this._convGroupHandler.onConvMarkUpdated(e)}},{key:"onConversationGroupCreated",value:function(e){this._convGroupHandler.onConvGroupCreated(e)}},{key:"onConversationGroupDeleted",value:function(e){this._convGroupHandler.onConvGroupDeleted(e)}},{key:"onConversationGroupNameUpdated",value:function(e){this._convGroupHandler.onConvGroupNameUpdated(e)}},{key:"onConversationInGroupUpdated",value:function(e){this._convGroupHandler.onConvInGroupUpdated(e)}},{key:"onConversationAddedToOrDeletedFromGroup",value:function(e){this._convGroupHandler.onConvAddedToOrDeletedFromGroup(e)}},{key:"_getConversationLastMessageSequence",value:function(e){var t=this._messageListHandler.getLocalLastMessage(e.conversationID),a=e.lastMessage.lastSequence;return t&&a<t.sequence&&(a=t.sequence),a}},{key:"_getConversationLastMessageTime",value:function(e){var t=this._messageListHandler.getLocalLastMessage(e.conversationID),a=e.lastMessage.lastTime;return t&&a<t.time&&(a=t.time),a}},{key:"_createSetAllMessageReadPack",value:function(e){var t,a={readAllC2CMessage:0,groupMessageReadInfoList:[]},n=e.scope,o=M(this._conversationMap);try{for(o.s();!(t=o.n()).done;){var i=_(t.value,2)[1];if(i.unreadCount>0)if(i.type===I.CONV_C2C&&0===a.readAllC2CMessage){if(n===I.READ_ALL_MSG)a.readAllC2CMessage=1;else if(n===I.READ_ALL_C2C_MSG){a.readAllC2CMessage=1;break}}else if(i.type===I.CONV_GROUP&&(n===I.READ_ALL_GROUP_MSG||n===I.READ_ALL_MSG)){var r=this._getConversationLastMessageSequence(i);a.groupMessageReadInfoList.push({groupID:i.groupProfile.groupID,messageSequence:r})}}}catch(s){o.e(s)}finally{o.f()}return a}},{key:"onPushedAllMessageRead",value:function(e){this._handleAllMessageRead(e)}},{key:"_handleAllMessageRead",value:function(e){var t=e.groupMessageReadInfoList,a=e.readAllC2CMessage,n=this._parseGroupReadInfo(t);return this._updateAllConversationUnreadCount({readAllC2CMessage:a})>=1&&(this.emitConversationUpdate(!0,!1),this.emitTotalUnreadMessageCountUpdate()),n}},{key:"_parseGroupReadInfo",value:function(e){var t=[];if(e&&e.length)for(var a=0,n=e.length;a<n;a++){var o=e[a],i=o.groupID,r=o.sequence,s=o.retCode,l=o.lastMessageSeq;ct(s)?this._remoteGroupReadSequenceMap.set(i,l):(this._remoteGroupReadSequenceMap.set(i,r),0!==s&&t.push("".concat(i,"-").concat(r,"-").concat(s)))}return t}},{key:"_updateAllConversationUnreadCount",value:function(e){var t,a=e.readAllC2CMessage,n=0,o=M(this._conversationMap);try{for(o.s();!(t=o.n()).done;){var i=_(t.value,2),r=i[0],s=i[1];if(s.unreadCount>=1){if(1===a&&s.type===I.CONV_C2C){var l=this._getConversationLastMessageTime(s);this.updateIsReadAfterReadReport({conversationID:r,lastMessageTime:l})}else if(s.type===I.CONV_GROUP){var c=r.replace(I.CONV_GROUP,"");if(this._remoteGroupReadSequenceMap.has(c)){var u=this._remoteGroupReadSequenceMap.get(c),d=this._getConversationLastMessageSequence(s);this.updateIsReadAfterReadReport({conversationID:r,remoteReadSequence:u}),d>=u&&this._remoteGroupReadSequenceMap.delete(c)}}this.updateUnreadCount(r,!1)&&(n+=1)}}}catch(m){o.e(m)}finally{o.f()}return n}},{key:"isRemoteRead",value:function(e){var t=e.conversationID,a=e.sequence,n=t.replace(I.CONV_GROUP,""),o=!1;if(this._remoteGroupReadSequenceMap.has(n)){var i=this._remoteGroupReadSequenceMap.get(n);a<=i&&(o=!0,He.l("".concat(this._n,".isRemoteRead conversationID:").concat(t," messageSequence:").concat(a," remoteReadSequence:").concat(i))),a>=i+10&&this._remoteGroupReadSequenceMap.delete(n)}return o}},{key:"updateIsReadAfterReadReport",value:function(e){var t=e.conversationID,a=e.lastMessageSeq,n=e.lastMessageTime,o=this._messageListHandler.getLocalMessageList(t);if(0!==o.length)for(var i,r=o.length-1;r>=0;r--)if(i=o[r],!(n&&i.time>n||a&&i.sequence>a)){if("in"===i.flow&&i.isRead)break;i.setIsRead(!0)}}},{key:"updateUnreadCount",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=!1,n=this.getLocalConversation(e),o=this._messageListHandler.getLocalMessageList(e);if(n){var i=n.unreadCount,r=o.filter((function(e){return!e.isRead&&!e._onlineOnlyFlag&&!e.isDeleted})).length;if(i!==r&&(n.unreadCount=r,a=!0,He.l("".concat(this._n,".updateUnreadCount from ").concat(i," to ").concat(r,", conversationID:").concat(e)),!0===t&&(this.emitConversationUpdate(!0,!1),this.emitTotalUnreadMessageCountUpdate())),a&&n.type===I.CONV_TOPIC){var s=n.unreadCount,l=this.getModule(Ga),c=e.replace(I.CONV_GROUP,"");l.onConversationProxy({topicID:c,unreadCount:s})}return a}}},{key:"clearGroupAtInfoList",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=this.getLocalConversation(e);if(a&&a.groupAtInfoList.length>0){if(a.clearGroupAtInfoList(),He.l("".concat(this._n,".clearGroupAtInfoList conversationID:").concat(e)),a.type===I.CONV_TOPIC){var n=a.groupAtInfoList,o=this.getModule(Ga),i=e.replace(I.CONV_GROUP,"");o.onConversationProxy({topicID:i,groupAtInfoList:n})}!0===t&&this.emitConversationUpdate(!0,!1)}}},{key:"updateReadReceiptInfo",value:function(e){var t=this,a=e.userID,n=void 0===a?void 0:a,o=e.groupID,i=void 0===o?void 0:o,r=e.readReceiptList;if(!Zt(r)){var s=[];if(ct(n)){if(!ct(i)){var l="".concat(I.CONV_GROUP).concat(i);r.forEach((function(e){var a=e.tinyID,n=e.clientTime,o=e.random,r=e.readCount,c=e.unreadCount,u="".concat(a,"-").concat(n,"-").concat(o),d=t._messageListHandler.getLocalMessage(l,u),m={groupID:i,messageID:u,readCount:0,unreadCount:0};d&&(ot(r)&&(d.readReceiptInfo.readCount=r,m.readCount=r),ot(c)&&(d.readReceiptInfo.unreadCount=c,m.unreadCount=c),s.push(m))}))}}else{var c="".concat(I.CONV_C2C).concat(n);r.forEach((function(e){var a=e.tinyID,o=e.clientTime,i=e.random,r="".concat(a,"-").concat(o,"-").concat(i),l=t._messageListHandler.getLocalMessage(c,r);if(l){l.readReceiptInfo.isPeerRead=!0;var u={userID:n,messageID:r,isPeerRead:!0};s.push(u)}}))}s.length>0&&this.emitOuterEvent(S.MESSAGE_READ_RECEIPT_RECEIVED,s)}}},{key:"recomputeGroupUnreadCount",value:function(e){var t=e.conversationID,a=e.count,n=this.getLocalConversation(t);if(n){var o=n.unreadCount,i=o-a;i<0&&(i=0),n.unreadCount=i,He.l("".concat(this._n,".recomputeGroupUnreadCount from ").concat(o," to ").concat(i,", conversationID:").concat(t))}}},{key:"updateIsRead",value:function(e){var t=this.getLocalConversation(e),a=this.getLocalMessageList(e);if(t&&0!==a.length&&!bt(t.type)){for(var n=[],o=0,i=a.length;o<i;o++)"in"!==a[o].flow?"out"!==a[o].flow||a[o].isRead||a[o].setIsRead(!0):n.push(a[o]);var r=0;if(t.type===I.CONV_C2C){var s=n.slice(-t.unreadCount).filter((function(e){return e.isRevoked})).length;r=n.length-t.unreadCount-s}else r=n.length-t.unreadCount;for(var l=0;l<r&&!n[l].isRead;l++)n[l].setIsRead(!0)}}},{key:"deleteGroupAtTips",value:function(e){var t=this,a="".concat(this._n,".deleteGroupAtTips");He.l("".concat(a));var n=this._conversationMap.get(e);if(!n)return Promise.resolve();var o=n.groupAtInfoList;if(0===o.length)return Promise.resolve();var i=void 0;e.startsWith(I.CONV_GROUP)&&(i=e.replace(I.CONV_GROUP,""));var r=k(o);if((St({groupID:i})||It(i))&&0===(r=o.filter((function(e){return!e.atTypeArray.includes(I.CONV_AT_ALL)}))).length)return this.clearGroupAtInfoList(e,!1),Promise.resolve();var s=this.getMyUserID();return this.request({protocolName:Gn,requestData:{messageListToDelete:r.map((function(e){return{from:e.from,to:s,messageSeq:e.__sequence,messageRandom:e.__random,groupID:ct(e.topicID)?e.groupID:e.topicID}}))}}).then((function(){return He.l("".concat(a," ok. count:").concat(o.length)),t.clearGroupAtInfoList(e,!1),Promise.resolve()})).catch((function(e){return He.e("".concat(a," failed. error:"),e),er(e)}))}},{key:"appendToMessageList",value:function(e){this._messageListHandler.pushIn(e)}},{key:"setMessageRandom",value:function(e){this.singlyLinkedList.set(e.random)}},{key:"deleteMessageRandom",value:function(e){this.singlyLinkedList.delete(e.random)}},{key:"pushIntoMessageList",value:function(e,t,a){return!(!this._messageListHandler.pushIn(t,a)||this._isMessageFromCurrentInstance(t)&&!a||(e.push(t),0))}},{key:"_isMessageFromCurrentInstance",value:function(e){return this.singlyLinkedList.has(e.random)}},{key:"revoke",value:function(e,t,a){return this._messageListHandler.revoke(e,t,a)}},{key:"getPeerReadTime",value:function(e){return this._peerReadTimeMap.get(e)}},{key:"recordPeerReadTime",value:function(e,t){this._peerReadTimeMap.has(e)?this._peerReadTimeMap.get(e)<t&&this._peerReadTimeMap.set(e,t):this._peerReadTimeMap.set(e,t)}},{key:"updateMessageIsPeerReadProperty",value:function(e,t){if(e.startsWith(I.CONV_C2C)&&t>0){var a=this._messageListHandler.updateMessageIsPeerReadProperty(e,t);if(a.length>0&&this.emitOuterEvent(S.MESSAGE_READ_BY_PEER,a),this._conversationMap.has(e)){var n=this._conversationMap.get(e).lastMessage;Zt(n)||n.fromAccount===this.getMyUserID()&&n.lastTime<=t&&!n.isPeerRead&&(n.isPeerRead=!0,this.emitConversationUpdate(!0,!1))}}}},{key:"updateMessageIsModifiedProperty",value:function(e){this._messageListHandler.updateMessageIsModifiedProperty(e)}},{key:"setCompleted",value:function(e){He.l("".concat(this._n,".setCompleted. conversationID:").concat(e)),this._completedMap.set(e,!0)}},{key:"updateRoamingMessageKeyAndTime",value:function(e,t,a){this._roamingMessageKeyAndTimeMap.set(e,{messageKey:t,lastMessageTime:a})}},{key:"updateRoamingMessageSequence",value:function(e,t){this._roamingMessageSequenceMap.set(e,t)}},{key:"getConversationList",value:function(e){var t=this,a="getConversationList",n="".concat(this._n,".").concat(a),o="pagingStatus:".concat(this._pagingStatus,", local conversation count:").concat(this._conversationMap.size,", options:").concat(e);if(He.l("".concat(n,". ").concat(o)),this._pagingStatus===aa.REJECTED){var i=new Vi(a);return i.setMessage(o),this.syncConversationList().then((function(){i.setNetworkType(t.getNetworkType()).end();var a=t._getConversationList(e);return Wi({conversationList:a,isSyncCompleted:t._isSyncCompleted()})})).catch((function(e){return t.probeNetwork().then((function(t){var a=_(t,2),n=a[0],o=a[1];i.setError(e,n,o).end()})),He.e("".concat(n," failed. error:"),e),er(e)}))}if(0===this._conversationMap.size){var r=new Vi(a);return r.setMessage(o),this.syncConversationList().then((function(){r.setNetworkType(t.getNetworkType()).end();var a=t._getConversationList(e);return Wi({conversationList:a,isSyncCompleted:t._isSyncCompleted()})})).catch((function(e){return t.probeNetwork().then((function(t){var a=_(t,2),n=a[0],o=a[1];r.setError(e,n,o).end()})),He.e("".concat(n," failed. error:"),e),er(e)}))}var s=this._getConversationList(e);return He.l("".concat(n,". returned conversation count:").concat(s.length)),Qi({conversationList:s,isSyncCompleted:this._isSyncCompleted()})}},{key:"_getConversationList",value:function(e){if(ct(e))return this.getLocalConversationList();if(lt(e))return 0===e.length?[]:this.getLocalConversationList().filter((function(t){return e.includes(t.conversationID)}));if(st(e)){var t=e.type,a=e.markType,n=e.groupName;return this.getLocalConversationList().filter((function(e){return(t!==I.CONV_C2C&&t!==I.CONV_GROUP||e.type===t)&&(!it(n)||e.conversationGroupList.includes(n))&&(!ot(a)||e.markList.includes(a))}))}return[]}},{key:"_handleC2CPeerReadTime",value:function(){var e,t=M(this._conversationMap);try{for(t.s();!(e=t.n()).done;){var a=_(e.value,2),n=a[0],o=a[1];o.type===I.CONV_C2C&&(He.d("".concat(this._n,"._handleC2CPeerReadTime conversationID:").concat(n," peerReadTime:").concat(o.peerReadTime)),this.recordPeerReadTime(n,o.peerReadTime))}}catch(i){t.e(i)}finally{t.f()}}},{key:"_isPagingGetGroupListCompleted",value:function(){return this.getModule(Ba).isPagingGetCompleted()}},{key:"_getLocalGroupCount",value:function(){return this.getModule(Ba).getLocalGroupList().length}},{key:"_hasLocalGroup",value:function(e){return this.getModule(Ba).hasLocalGroup(e.replace(I.CONV_GROUP,""))}},{key:"getConversationProfile",value:function(e){var t,a=this;if((t=this._conversationMap.has(e)?this._conversationMap.get(e):new _r({conversationID:e,type:e.slice(0,3)===I.CONV_C2C?I.CONV_C2C:I.CONV_GROUP},this.isIntl()))._isInfoCompleted||t.type===I.CONV_SYSTEM)return Qi({conversation:t});if(Dt(e)&&!this._hasLocalGroup(e))return Qi({conversation:t});var n="".concat(this._n,".").concat("getConversationProfile"),o=new Vi("getConversationProfile");return He.l("".concat(n,". conversationID:").concat(e," remark:").concat(t.remark," lastMessage:"),t.lastMessage),this._updateUserOrGroupProfileCompletely(t).then((function(i){o.setNetworkType(a.getNetworkType()).setMessage("conversationID:".concat(e," unreadCount:").concat(i.data.conversation.unreadCount)).end();var r=a.getModule(Pa);if(r&&t.type===I.CONV_C2C){var s=e.replace(I.CONV_C2C,"");if(r.isMyFriend(s)){var l=r.getFriendRemark(s);t.remark!==l&&(t.remark=l,He.l("".concat(n,". conversationID:").concat(e," patch remark:").concat(t.remark)))}}return He.l("".concat(n," ok. conversationID:").concat(e)),i})).catch((function(t){return a.probeNetwork().then((function(a){var n=_(a,2),i=n[0],r=n[1];o.setError(t,i,r).setMessage("conversationID:".concat(e)).end()})),He.e("".concat(n," failed. error:"),t),er(t)}))}},{key:"_updateUserOrGroupProfileCompletely",value:function(e){var t=this;return e.type===I.CONV_C2C?this.getModule(Ra).getUserProfile({userIDList:[e.toAccount]}).then((function(a){var n=a.data;return 0===n.length?er(new Ji({code:fi.USER_OR_GROUP_NOT_FOUND})):(e.userProfile=n[0],e._isInfoCompleted=!0,t._unshiftConversation(e),Qi({conversation:e}))})):this.getModule(Ba).getGroupProfile({groupID:e.toAccount}).then((function(a){return e.groupProfile=a.data.group,e._isInfoCompleted=!0,t._unshiftConversation(e),Qi({conversation:e})}))}},{key:"_unshiftConversation",value:function(e){e instanceof _r&&!this._conversationMap.has(e.conversationID)&&(this._conversationMap=new Map([[e.conversationID,e]].concat(k(this._conversationMap))),this._setStorageConversationList(),this.emitConversationUpdate(!0,!1))}},{key:"_onProfileUpdated",value:function(e){var t=this;e.data.forEach((function(e){var a=e.userID;if(a===t.getMyUserID())t._onMyProfileModified({latestNick:e.nick,latestAvatar:e.avatar});else{var n=t._conversationMap.get("".concat(I.CONV_C2C).concat(a));n&&(n.userProfile=e)}}))}},{key:"_isSyncCompleted",value:function(){return this._pagingStatus===aa.RESOLVED}},{key:"_errorLog",value:function(e,t,a,n){var o=new Error("Params validate failed."),i="".concat(this.getErrorMessage("API_REFER")).concat(e);throw He.w("[".concat(e,"] | ").concat(t," | ").concat(this.getErrorMessage(a,n),", ").concat(i)),He.e("[".concat(e,"] Invalid ").concat(t,": type check failed for ").concat(t,".")),o}},{key:"_isValidConversationID",value:function(e){return Tt(e)||Dt(e)||bt(e)}},{key:"deleteConversation",value:function(e){var t=this,a="deleteConversation";return it(e)||rt(e)||this._errorLog(a,"options","StringOrObjectRequiredLog"),it(e)?(this._isValidConversationID(e)||this._errorLog(a,"options","InvalidConversationID",e),He.l("".concat(this._n,".").concat(a," conversationID:").concat(e)),this.deleteConversationList({conversationIDList:[e],flag:1})):(lt(e.conversationIDList)||this._errorLog(a,"conversationIDList","ArrayRequiredLog"),0===e.conversationIDList.length&&this._errorLog(a,"conversationIDList","NonEmptyArrayLog"),e.conversationIDList.forEach((function(e){t._isValidConversationID(e)||t._errorLog(a,"conversationIDList","InvalidConversationID",e)})),"clearHistoryMessage"in e&&"boolean"!=typeof e.clearHistoryMessage&&this._errorLog(a,"clearHistoryMessage","BooleanRequiredLog"),e.conversationIDList.length>100&&(e.conversationIDList=e.conversationIDList.slice(0,100)),this.deleteConversationList(e))}},{key:"deleteConversationList",value:function(e){var t=this,a=e.conversationIDList,n=void 0===a?[]:a,o=e.clearHistoryMessage,i=void 0===o||o,r=e.flag,s=void 0===r?0:r,l="".concat(this._n,".").concat("deleteConversationList");He.l("".concat(l," conversationIDList.length:").concat(n.length," clearHistoryMessage:").concat(i));var c=new Vi("deleteConversationList");return c.setMessage("conversationIDList:".concat(n)),Promise.all([this.rmLocalOnlyConversationList(n),this.rmLocalAndRemoteConversationList(n,i)]).then((function(e){c.setNetworkType(t.getNetworkType()).end();var a=[].concat(k(e[0]),k(e[1]));return 0===a.length?er(new Ji({code:fi.CONVERSATION_NOT_FOUND})):(He.l("".concat(l," ok")),Qi(1===s?{conversationID:a[0]}:{conversationIDList:a}))})).catch((function(e){return t.probeNetwork().then((function(t){var a=_(t,2),n=a[0],o=a[1];c.setError(e,n,o).end()})),He.e("".concat(l," failed. error:"),e),er(e)}))}},{key:"rmLocalOnlyConversationList",value:function(e){var t=this;return e.filter((function(e){if(!t._conversationMap.has(e))return!1;var a=t.getLocalConversation(e).type;return a!==I.CONV_GROUP||t._hasLocalGroup(e)?a===I.CONV_SYSTEM&&(t.getModule(Ba).deleteGroupSystemNotice({messageList:t._messageListHandler.getLocalMessageList(e)}),t.deleteLocalConversation(e),!0):(t.deleteLocalConversation(e),!0)}))}},{key:"rmLocalAndRemoteConversationList",value:function(e,t){var a=this,n={fromAccount:this.getMyUserID(),conversationList:[],clearHistoryMessage:t?1:0};return e.forEach((function(e){if(a._conversationMap.has(e)){var t=a.getLocalConversation(e).type;t===I.CONV_C2C?n.conversationList.push({toAccount:e.replace(t,""),type:1}):t===I.CONV_GROUP&&a._hasLocalGroup(e)&&n.conversationList.push({toGroupID:e.replace(t,""),type:2})}})),0===n.conversationList.length?[]:this.request({protocolName:Bn,requestData:n}).then((function(e){var t=[];return e.data.resultList.length>0&&e.data.resultList.map((function(e){if(0===e.code){var a=1===e.type?"".concat(I.CONV_C2C).concat(e.to):"".concat(I.CONV_GROUP).concat(e.groupID);t.push(a)}})),a.deleteLocalConversationList(t),t}))}},{key:"clearHistoryMessage",value:function(e){var t=this,a={fromAccount:this.getMyUserID(),toAccount:void 0,type:void 0,toGroupID:void 0};if(!this._conversationMap.has(e))return er({code:fi.CONVERSATION_NOT_FOUND});var n=this._conversationMap.get(e).type;if(n===I.CONV_C2C)a.type=1,a.toAccount=e.replace(I.CONV_C2C,"");else{if(n!==I.CONV_GROUP)return n===I.CONV_SYSTEM?(this.getModule(Ba).deleteGroupSystemNotice({messageList:this._messageListHandler.getLocalMessageList(e)}),Qi({conversationID:e})):er({code:fi.CONVERSATION_UN_RECORDED_TYPE});a.type=2,a.toGroupID=e.replace(I.CONV_GROUP,"")}var o="".concat(this._n,".").concat("clearHistoryMessage"),i=new Vi("clearHistoryMessage");return i.setMessage("conversationID:".concat(e)),He.l("".concat(o,". conversationID:").concat(e)),this.setMessageRead({conversationID:e}).then((function(){return t.request({protocolName:Pn,requestData:a})})).then((function(){i.setNetworkType(t.getNetworkType()).end(),He.l("".concat(o," ok")),t._messageListHandler.removeByConversationID(e),t.setCompleted(e);var a=t.getLocalConversation(e);return a&&(a.updateLastMessage(),t._sortConversationListAndEmitEvent()),Qi({conversationID:e})})).catch((function(e){return t.probeNetwork().then((function(t){var a=_(t,2),n=a[0],o=a[1];i.setError(e,n,o).end()})),He.e("".concat(o," failed. error:"),e),er(e)}))}},{key:"pinConversation",value:function(e){var t=this,a=e.conversationID,n=e.isPinned;if(!this._conversationMap.has(a))return er({code:fi.CONVERSATION_NOT_FOUND});var o=this.getLocalConversation(a);if(o.isPinned===n)return Qi({conversationID:a});var i="".concat(this._n,".").concat("pinConversation"),r=new Vi("pinConversation");r.setMessage("conversationID:".concat(a," isPinned:").concat(n)),He.l("".concat(i,". conversationID:").concat(a," isPinned:").concat(n));var s=null;return Tt(a)?s={type:1,toAccount:a.replace(I.CONV_C2C,"")}:Dt(a)&&(s={type:2,groupID:a.replace(I.CONV_GROUP,"")}),this.request({protocolName:Un,requestData:{fromAccount:this.getMyUserID(),operationType:!0===n?1:2,itemList:[s]}}).then((function(){return r.setNetworkType(t.getNetworkType()).end(),He.l("".concat(i," ok")),o.isPinned!==n&&(o.isPinned=n,t._sortConversationListAndEmitEvent()),Wi({conversationID:a})})).catch((function(e){return t.probeNetwork().then((function(t){var a=_(t,2),n=a[0],o=a[1];r.setError(e,n,o).end()})),He.e("".concat(i," failed. error:"),e),er(e)}))}},{key:"setMessageRemindType",value:function(e){return this._messageRemindHandler.set(e)}},{key:"patchMessageRemindType",value:function(e){var t=e.ID,a=e.isC2CConversation,n=e.messageRemindType,o=!1,i=this.getLocalConversation(a?"".concat(I.CONV_C2C).concat(t):"".concat(I.CONV_GROUP).concat(t));return i&&i.messageRemindType!==n&&(i.messageRemindType=n,o=!0),He.d("".concat(this._n,".patchMessageRemindType options:"),e,"ret:".concat(o)),o}},{key:"onC2CMessageRemindTypeSynced",value:function(e){var t=this,a="".concat(this._n,".onC2CMessageRemindTypeSynced");He.d(a,e),e.dataList.forEach((function(e){if(!Zt(e.muteNotificationsSync)){var n,o=e.muteNotificationsSync,i=o.to,r=o.updateSequence,s=o.muteFlag;t._messageRemindHandler.setUpdateSequence(r),0===s?n=I.MSG_REMIND_ACPT_AND_NOTE:1===s?n=I.MSG_REMIND_DISCARD:2===s&&(n=I.MSG_REMIND_ACPT_NOT_NOTE);var l=0;t.patchMessageRemindType({ID:i,isC2CConversation:!0,messageRemindType:n})&&(l+=1),He.l("".concat(a," updateCount:").concat(l)),l>=1&&t.emitConversationUpdate(!0,!1)}}))}},{key:"onGroupMessageRemindTypeSynced",value:function(e){He.d("".concat(this._n,".onGroupMessageRemindTypeSynced options:"),e),this._messageRemindHandler.onGroupMessageRemindTypeUpdated(e)}},{key:"deleteLocalConversation",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=this._conversationMap.has(e);if(He.d("".concat(this._n,".deleteLocalConversation conversationID:").concat(e," has:").concat(a)),a&&(this._conversationMap.delete(e),this._roamingMessageKeyAndTimeMap.has(e)&&this._roamingMessageKeyAndTimeMap.delete(e),this._roamingMessageSequenceMap.has(e)&&this._roamingMessageSequenceMap.delete(e),this._setStorageConversationList(),this._messageListHandler.removeByConversationID(e),this._completedMap.delete(e),t)){var n=!this._isTopicConversation(e);this.emitConversationUpdate(n,!1)}}},{key:"deleteLocalConversationList",value:function(e){var t=this,a=0,n=!1;e.forEach((function(e){t._conversationMap.has(e)&&(a+=t._conversationMap.get(e).unreadCount||0,t.deleteLocalConversation(e,!1),n=!0)})),He.l("".concat(this._n,".deleteLocalConversationList conversationIDList.length:").concat(e.length," isConvIDExisted:").concat(n)),n&&(this.emitConversationUpdate(!0,!1),a>0&&this.emitTotalUnreadMessageCountUpdate())}},{key:"isMessageSentByCurrentInstance",value:function(e){return!(!this._messageListHandler.hasLocalMessage(e.conversationID,e.ID)&&!this.singlyLinkedList.has(e.random))}},{key:"modifyMessageList",value:function(e){if(e.startsWith(I.CONV_C2C)&&this._conversationMap.has(e)){var t=this._conversationMap.get(e),a=Date.now();this._messageListHandler.modifyMessageSentByPeer({conversationID:e,latestNick:t.userProfile.nick,latestAvatar:t.userProfile.avatar});var n=this.getModule(Ra).getNickAndAvatarByUserID(this.getMyUserID());this._messageListHandler.modifyMessageSentByMe({conversationID:e,latestNick:n.nick,latestAvatar:n.avatar}),He.l("".concat(this._n,".modifyMessageList conversationID:").concat(e," cost ").concat(Date.now()-a," ms"))}}},{key:"updateUserProfileSpecifiedKey",value:function(e){He.l("".concat(this._n,".updateUserProfileSpecifiedKey options:"),e);var t=e.conversationID,a=e.nick,n=e.avatar;if(this._conversationMap.has(t)){var o=this._conversationMap.get(t).userProfile;it(a)&&o.nick!==a&&(o.nick=a),it(n)&&o.avatar!==n&&(o.avatar=n),this.emitConversationUpdate(!0,!1)}}},{key:"_onMyProfileModified",value:function(e){var a=this,n=this.getLocalConversationList(),o=Date.now();n.forEach((function(n){a.modifyMessageSentByMe(t({conversationID:n.conversationID},e))})),He.l("".concat(this._n,"._onMyProfileModified. modify all messages sent by me, cost ").concat(Date.now()-o," ms"))}},{key:"modifyMessageSentByMe",value:function(e){this._messageListHandler.modifyMessageSentByMe(e)}},{key:"getLatestMessageSentByMe",value:function(e){return this._messageListHandler.getLatestMessageSentByMe(e)}},{key:"modifyMessageSentByPeer",value:function(e){this._messageListHandler.modifyMessageSentByPeer(e)}},{key:"getLatestMessageSentByPeer",value:function(e){return this._messageListHandler.getLatestMessageSentByPeer(e)}},{key:"pushIntoNoticeResult",value:function(e,t){return!(!this._messageListHandler.pushIn(t)||this.singlyLinkedList.has(t.random)||(e.push(t),0))}},{key:"getLocalLastMessage",value:function(e){return this._messageListHandler.getLocalLastMessage(e)}},{key:"checkAndPatchRemark",value:function(){var e=Promise.resolve();if(0===this._conversationMap.size)return e;var t=this.getModule(Pa);if(!t)return e;var a=k(this._conversationMap.values()).filter((function(e){return e.type===I.CONV_C2C}));if(0===a.length)return e;var n=0;return a.forEach((function(e){var a=e.conversationID.replace(I.CONV_C2C,"");if(t.isMyFriend(a)){var o=t.getFriendRemark(a);e.remark!==o&&(e.remark=o,n+=1)}})),He.l("".concat(this._n,".checkAndPatchRemark. c2c conversation count:").concat(a.length,", patched count:").concat(n)),e}},{key:"updateTopicConversation",value:function(e){this._updateLocalConversationList({conversationOptionsList:e,isFromGetConversations:!0})}},{key:"sendReadReceipt",value:function(e){var t=e[0],a=null;return t.conversationType===I.CONV_C2C?a=this._m.getModule(Oa):t.conversationType===I.CONV_GROUP&&(a=this._m.getModule(Ba)),a?a.sendReadReceipt(e):er({code:fi.CANNOT_FIND_MODULE})}},{key:"getReadReceiptList",value:function(e){var t=e[0],a=null;return t.conversationType===I.CONV_C2C?a=this._m.getModule(Oa):t.conversationType===I.CONV_GROUP&&(a=this._m.getModule(Ba)),a?a.getReadReceiptList(e):er({code:fi.CANNOT_FIND_MODULE})}},{key:"getLastMessageTime",value:function(e){var t=this.getLocalConversation(e);return t?t.lastMessage.lastTime:0}},{key:"getTotalUnreadMessageCount",value:function(){var e=this.getLocalConversationList(),t=0;return e.forEach((function(e){e.type!==I.CONV_SYSTEM&&(""!==e.messageRemindType&&e.messageRemindType!==I.MSG_REMIND_ACPT_AND_NOTE||(t+=e.unreadCount))})),t}},{key:"emitTotalUnreadMessageCountUpdate",value:function(){var e=this.getTotalUnreadMessageCount();this._convTotalUnreadCount!==e&&(He.l("".concat(this._n,".emitTotalUnreadMessageCountUpdate from ").concat(this._convTotalUnreadCount," to ").concat(e)),this._convTotalUnreadCount=e,this.emitOuterEvent(S.TOTAL_UNREAD_MESSAGE_COUNT_UPDATED))}},{key:"reset",value:function(){He.l("".concat(this._n,".reset")),this._pagingStatus=aa.NOT_START,this._messageListHandler.reset(),this._messageRemindHandler.reset(),this._roamingMessageKeyAndTimeMap.clear(),this._roamingMessageSequenceMap.clear(),this.singlyLinkedList.reset(),this._peerReadTimeMap.clear(),this._completedMap.clear(),this._conversationMap.clear(),this._pagingTimeStamp=0,this._pagingStartIndex=0,this._pagingPinnedTimeStamp=0,this._pagingPinnedStartIndex=0,this._remoteGroupReadSequenceMap.clear(),this._convTotalUnreadCount=0,this._pagingGetCostList.length=0,this.resetReady()}}]),o}(dn),Nr=function(){function e(t){n(this,e),this._groupModule=t,this._n="GroupTipsHandler",this._cachedGroupTipsMap=new Map,this._checkCountMap=new Map,this.MAX_CHECK_COUNT=4,this._getTopicPendingMap=new Map}return r(e,[{key:"onCheckTimer",value:function(e){e%1==0&&this._cachedGroupTipsMap.size>0&&this._checkCachedGroupTips()}},{key:"_checkCachedGroupTips",value:function(){var e=this;this._cachedGroupTipsMap.forEach((function(t,a){var n=e._checkCountMap.get(a),o=e._groupModule.hasLocalGroup(a);He.l("".concat(e._n,"._checkCachedGroupTips groupID:").concat(a," hasLocalGroup:").concat(o," checkCount:").concat(n)),o?(e._notifyCachedGroupTips(a),e._checkCountMap.delete(a),e._groupModule.deleteUnjoinedAVChatRoom(a)):n>=e.MAX_CHECK_COUNT?(e._deleteCachedGroupTips(a),e._checkCountMap.delete(a)):(n++,e._checkCountMap.set(a,n))}))}},{key:"onNewGroupTips",value:function(e){He.d("".concat(this._n,".onReceiveGroupTips count:").concat(e.dataList.length));var t=this.newGroupTipsStoredAndSummary(e),a=t.eventDataList,n=t.result,o=t.AVChatRoomMessageList;o.length>0&&this._groupModule.onAVChatRoomMessage(o),a.length>0&&(this._groupModule.updateNextMessageSeq(a),this._groupModule.getModule(Fa).onNewMessage({conversationOptionsList:a,isInstantMessage:!0})),n.length>0&&(this._groupModule.emitOuterEvent(S.MESSAGE_RECEIVED,n),this.handleMessageList(n))}},{key:"newGroupTipsStoredAndSummary",value:function(e){for(var a=this,n=e.event,o=e.dataList,i=null,r=[],s=[],l={},c=[],u=function(e,u){var d=wt(o[e]);if(6===n){if(a._groupModule.isGroupAttributesUpdatedNotice(d))return"continue";if(a._groupModule.isGroupCountersNotice(d))return"continue"}var m=d.groupProfile,p=m.groupID,h=m.communityType,v=void 0===h?0:h,g=m.topicID,f=void 0===g?void 0:g,y=m.invisible,_=void 0,k=a._groupModule.isMessageFromTopic(v,f);if(k){_=I.CONV_TOPIC,d.to=f;var E=a._groupModule.getModule(Ga);E.hasLocalTopic(p,f)||a._getTopicPendingMap.has(f)||(a._getTopicPendingMap.set(f,1),E.getTopicList({groupID:p,topicIDList:[f]}).finally((function(){a._getTopicPendingMap.delete(f)})))}var x=a._groupModule.hasLocalGroup(p);if(!x&&a._groupModule.isUnjoinedAVChatRoom(p))return"continue";if(!x&&!k)return a._cacheGroupTipsAndProbe({groupID:p,event:n,item:d}),"continue";if(a._groupModule.isMessageFromOrToAVChatroom(p))return d.event=n,c.push(d),"continue";if(d.currentUser=a._groupModule.getMyUserID(),d.conversationType=I.CONV_GROUP,(i=new Yi(d)).setElement({type:I.MSG_GRP_TIP,content:t(t({},d.elements),{},{groupProfile:d.groupProfile})}),i.isSystemMessage=!1,1===y)return a._qualityStat(i),"continue";var N=a._groupModule.getModule(Fa),w=i,C=w.conversationID,M=w.sequence;if(6===n)i._onlineOnlyFlag=!0,s.push(i);else if(!N.pushIntoNoticeResult(s,i))return"continue";if(a._groupModule.isMessageFromCommunityOfTopic(v,f))return"continue";if(6===n&&N.getLocalConversation(C))return"continue";6!==n&&a._qualityStat(i);var S=N.isRemoteRead({conversationID:C,sequence:M});if(ct(l[C])){var T=0;"in"===i.flow&&(i._isExcludedFromUnreadCount||i._onlineOnlyFlag||S||(T=1)),l[C]=r.push({conversationID:C,unreadCount:T,type:ct(_)?i.conversationType:_,subType:i.conversationSubType,lastMessage:i._isExcludedFromLastMessage?"":i})-1}else{var D=l[C];r[D].type=i.conversationType,r[D].subType=i.conversationSubType,r[D].lastMessage=i._isExcludedFromLastMessage?"":i,"in"===i.flow&&(i._isExcludedFromUnreadCount||i._onlineOnlyFlag||S||r[D].unreadCount++)}},d=0,m=o.length;d<m;d++)u(d);return{eventDataList:r,result:s,AVChatRoomMessageList:c}}},{key:"_qualityStat",value:function(e){this._groupModule.getModule(an).addMessageSequence({key:Ci,message:e})}},{key:"handleMessageList",value:function(e){var t=this;e.forEach((function(e){switch(e.payload.operationType){case 1:t._onNewMemberComeIn(e);break;case 2:t._onMemberQuit(e);break;case 3:t._onMemberKickedOut(e);break;case 4:t._onMemberSetAdmin(e);break;case 5:t._onMemberCancelledAdmin(e);break;case 6:t._onGroupProfileModified(e);break;case 7:t._onMemberInfoModified(e);break;case 8:t._onTopicProfileUpdated(e);break;default:He.w("".concat(t._n,".handleMessageList unknown operationType:").concat(e.payload.operationType))}}))}},{key:"_onNewMemberComeIn",value:function(e){var t=e.payload,a=t.memberNum,n=t.groupProfile.groupID,o=this._groupModule.getLocalGroupProfile(n);o&&ot(a)&&o.memberCount!==a&&(o.memberCount=a,this._updateConversationGroupProfile(o))}},{key:"_onMemberQuit",value:function(e){var t=e.payload,a=t.memberNum,n=t.groupProfile.groupID,o=this._groupModule.getLocalGroupProfile(n);o&&ot(a)&&o.memberCount!==a&&(o.memberCount=a,this._updateConversationGroupProfile(o)),this._groupModule.getModule(Ua).deleteLocalGroupMembers(n,e.payload.userIDList)}},{key:"_onMemberKickedOut",value:function(e){var t=e.payload,a=t.memberNum,n=t.groupProfile.groupID,o=this._groupModule.getLocalGroupProfile(n);o&&ot(a)&&o.memberCount!==a&&(o.memberCount=a,this._updateConversationGroupProfile(o)),this._groupModule.getModule(Ua).deleteLocalGroupMembers(n,e.payload.userIDList)}},{key:"_updateConversationGroupProfile",value:function(e){this._groupModule.getModule(Fa).updateConversationGroupProfile([e])}},{key:"_onMemberSetAdmin",value:function(e){var t=e.payload.groupProfile.groupID,a=e.payload.userIDList,n=this._groupModule.getModule(Ua);a.forEach((function(e){var a=n.getLocalGroupMemberInfo(t,e);a&&a.updateRole(I.GRP_MBR_ROLE_ADMIN)}))}},{key:"_onMemberCancelledAdmin",value:function(e){var t=e.payload.groupProfile.groupID,a=e.payload.userIDList,n=this._groupModule.getModule(Ua);a.forEach((function(e){var a=n.getLocalGroupMemberInfo(t,e);a&&a.updateRole(I.GRP_MBR_ROLE_MEMBER)}))}},{key:"_onGroupProfileModified",value:function(e){var t=this,a=e.payload,n=a.newGroupProfile,o=a.groupProfile.groupID,i=this._groupModule.getLocalGroupProfile(o);Object.keys(n).forEach((function(e){switch(e){case"ownerID":t._ownerChanged(i,n);break;case"groupName":i.name=n[e];break;default:i[e]=n[e]}}));var r=!i.isSupportTopic;this._groupModule.emitGroupListUpdate(!0,r)}},{key:"_ownerChanged",value:function(e,t){var a=e.groupID,n=this._groupModule.getLocalGroupProfile(a),o=this._groupModule.getMyUserID();if(o===t.ownerID){n.updateGroup({selfInfo:{role:I.GRP_MBR_ROLE_OWNER}});var i=this._groupModule.getModule(Ua),r=i.getLocalGroupMemberInfo(a,o),s=this._groupModule.getLocalGroupProfile(a).ownerID,l=i.getLocalGroupMemberInfo(a,s);r&&r.updateRole(I.GRP_MBR_ROLE_OWNER),l&&l.updateRole(I.GRP_MBR_ROLE_MEMBER)}}},{key:"_onMemberInfoModified",value:function(e){var t=e.to,a=e.payload,n=a.groupProfile,o=a.memberList,i=n.groupID;It(t)&&this._updateTopicMuteTime(e);var r=this._groupModule.getModule(Ua);o.forEach((function(e){var t=r.getLocalGroupMemberInfo(i,e.userID);t&&ot(e.muteTime)&&t.updateMuteUntil(e.muteTime)}))}},{key:"_updateTopicMuteTime",value:function(e){var t=e.to,a=e.payload,n=a.groupProfile,o=a.memberList,i=void 0===o?[]:o,r=this._groupModule.getModule(Ga),s=n.groupID,l=r.getLocalTopic(s,t);if(l){for(var c=!1,u=0;u<i.length;u++){var d=i[u];if(d.userID===this._groupModule.getMyUserID()&&d.muteTime>=0){l.updateSelfInfo({muteTime:d.muteTime}),c=!0;break}}c&&this._groupModule.emitOuterEvent(S.TOPIC_UPDATED,{groupID:s,topic:l})}}},{key:"_onTopicProfileUpdated",value:function(e){var a=e.payload,n=a.groupProfile.groupID,o=a.newTopicInfo;this._groupModule.getModule(Ga).onTopicProfileUpdated(t({groupID:n,topicID:e.to},o))}},{key:"_cacheGroupTips",value:function(e,t){this._cachedGroupTipsMap.has(e)||this._cachedGroupTipsMap.set(e,[]),this._cachedGroupTipsMap.get(e).push(t)}},{key:"_deleteCachedGroupTips",value:function(e){this._cachedGroupTipsMap.has(e)&&this._cachedGroupTipsMap.delete(e)}},{key:"_notifyCachedGroupTips",value:function(e){var t=this,a=this._cachedGroupTipsMap.get(e)||[];a.forEach((function(e){t.onNewGroupTips(e)})),this._deleteCachedGroupTips(e),He.l("".concat(this._n,"._notifyCachedGroupTips groupID:").concat(e," count:").concat(a.length))}},{key:"_cacheGroupTipsAndProbe",value:function(e){var t=this,a=e.groupID,n=e.event,o=e.item;this._cacheGroupTips(a,{event:n,dataList:[o]}),this._groupModule.getGroupSimplifiedInfo(a).then((function(e){e.type===I.GRP_AVCHATROOM?t._groupModule.hasLocalGroup(a)?t._notifyCachedGroupTips(a):t._groupModule.setUnjoinedAVChatRoom(a):(t._groupModule.updateGroupMap([e]),t._notifyCachedGroupTips(a))})),this._checkCountMap.has(a)||this._checkCountMap.set(a,0),He.l("".concat(this._n,"._cacheGroupTipsAndProbe groupID:").concat(a))}},{key:"reset",value:function(){this._cachedGroupTipsMap.clear(),this._checkCountMap.clear(),this._getTopicPendingMap.clear()}}]),e}(),wr=function(){function e(t){n(this,e),this._groupModule=t,this._n="CommonGroupHandler",this.tempConversationList=null,this._cachedGroupMessageMap=new Map,this._checkCountMap=new Map,this.MAX_CHECK_COUNT=4,this._getTopicPendingMap=new Map,this._isPagingGetCompleted=!1,t.getInnerEmitterInstance().once(nr,this._initGroupList,this)}return r(e,[{key:"onCheckTimer",value:function(e){e%1==0&&this._cachedGroupMessageMap.size>0&&this._checkCachedGroupMessage()}},{key:"_checkCachedGroupMessage",value:function(){var e=this;this._cachedGroupMessageMap.forEach((function(t,a){var n=e._checkCountMap.get(a),o=e._groupModule.hasLocalGroup(a);He.l("".concat(e._n,"._checkCachedGroupMessage groupID:").concat(a," hasLocalGroup:").concat(o," checkCount:").concat(n)),o?(e._notifyCachedGroupMessage(a),e._checkCountMap.delete(a),e._groupModule.deleteUnjoinedAVChatRoom(a)):n>=e.MAX_CHECK_COUNT?(e._deleteCachedGroupMessage(a),e._checkCountMap.delete(a)):(n++,e._checkCountMap.set(a,n))}))}},{key:"_initGroupList",value:function(){var e=this;He.l("".concat(this._n,"._initGroupList"));var t=new Vi("getGroupListInStorage"),a=this._groupModule.getStorageGroupList();if(lt(a)&&a.length>0){a.forEach((function(t){e._groupModule.initGroupMap(t)})),this._groupModule.emitGroupListUpdate(!0,!1);var n=this._groupModule.getLocalGroupList().length;t.setNetworkType(this._groupModule.getNetworkType()).setMessage("group count:".concat(n)).end()}else t.setNetworkType(this._groupModule.getNetworkType()).setMessage("group count:0").end();He.l("".concat(this._n,"._initGroupList ok"))}},{key:"handleUpdateGroupLastMessage",value:function(e){var a="".concat(this._n,".handleUpdateGroupLastMessage");if(He.l("".concat(a," conversation count:").concat(e.length,", local group count:").concat(this._groupModule.getLocalGroupList().length)),0!==this._groupModule.getGroupMap().size){for(var n,o,i,r=!1,s=0,l=e.length;s<l;s++)(n=e[s]).type===I.CONV_GROUP&&(o=n.conversationID.split(/^GROUP/)[1],(i=this._groupModule.getLocalGroupProfile(o))&&(i.lastMessage=t({},n.lastMessage),r=!0));r&&(this._groupModule.sortLocalGroupList(),this._groupModule.emitGroupListUpdate(!0,!1))}else this.tempConversationList=e}},{key:"onNewGroupMessage",value:function(e){He.d("".concat(this._n,".onNewGroupMessage count:").concat(e.dataList.length));var t=this._newGroupMessageStoredAndSummary(e),a=t.conversationOptionsList,n=t.messageList,o=t.AVChatRoomMessageList;o.length>0&&this._groupModule.onAVChatRoomMessage(o),this._groupModule.filterModifiedMessage(n),a.length>0&&(this._groupModule.updateNextMessageSeq(a),this._groupModule.getModule(Fa).onNewMessage({conversationOptionsList:a,isInstantMessage:e.isInstantMessage||!0,updateUnreadCount:e.updateUnreadCount||!0}));var i=this._groupModule.filterUnmodifiedMessage(n);i.length>0&&this._groupModule.emitOuterEvent(S.MESSAGE_RECEIVED,i),n.length=0}},{key:"_newGroupMessageStoredAndSummary",value:function(e){var t=this,a=e.dataList,n=e.event,o=e.isInstantMessage,i=null,r=[],s=[],l=[],c={},u=this._groupModule.getModule(ja),d=this._groupModule.getFileDownloadProxy(),m=a.length;m>1&&a.sort((function(e,t){return e.sequence-t.sequence}));for(var p=function(e){var m=wt(a[e]),p=m.groupProfile,h=p.groupID,v=p.communityType,g=void 0===v?0:v,f=p.topicID,y=void 0===f?void 0:f,_=p.invisible,k=void 0,E=t._groupModule.isMessageFromTopic(g,y);if(E){k=I.CONV_TOPIC,m.to=y;var x=t._groupModule.getModule(Ga);x.hasLocalTopic(h,y)||t._getTopicPendingMap.has(y)||(t._getTopicPendingMap.set(y,1),x.getTopicList({groupID:h,topicIDList:[y]}).finally((function(){t._getTopicPendingMap.delete(y)})))}var N=t._groupModule.hasLocalGroup(h);if(!N&&t._groupModule.isUnjoinedAVChatRoom(h))return"continue";if(!N&&!E)return t._cacheGroupMessageAndProbe({groupID:h,event:n,item:m}),"continue";if(t._groupModule.isMessageFromOrToAVChatroom(h))return m.event=n,l.push(m),"continue";if(m.currentUser=t._groupModule.getMyUserID(),m.conversationType=I.CONV_GROUP,m.isSystemMessage=!!m.isSystemMessage,i=new Yi(m),m.elements=u.parseElements(m.elements,m.from),i.setElement(m.elements,d),1===_)return t._qualityStat(o,i),"continue";var w=1===a[e].isModified,C=t._groupModule.getModule(Fa);if(C.isMessageSentByCurrentInstance(i)?i.isModified=w:w=!1,1===m.onlineOnlyFlag)i._onlineOnlyFlag=!0,C.isMessageSentByCurrentInstance(i)||s.push(i);else{if(t._groupModule.isMessageFromCommunityOfTopic(g,y))return s.push(i),"continue";if(!C.pushIntoMessageList(s,i,w))return"continue";t._qualityStat(o,i);var M=i,S=M.conversationID,T=M.sequence,D=C.isRemoteRead({conversationID:S,sequence:T});if(ct(c[S])){var b=0;"in"===i.flow&&(i._isExcludedFromUnreadCount||D||(b=1)),c[S]=r.push({conversationID:S,unreadCount:b,type:ct(k)?i.conversationType:k,subType:i.conversationSubType,lastMessage:i._isExcludedFromLastMessage?"":i})-1}else{var V=c[S];r[V].type=ct(k)?i.conversationType:k,r[V].subType=i.conversationSubType,r[V].lastMessage=i._isExcludedFromLastMessage?"":i,"in"===i.flow&&(i._isExcludedFromUnreadCount||D||r[V].unreadCount++)}}},h=0;h<m;h++)p(h);return{conversationOptionsList:r,messageList:s,AVChatRoomMessageList:l}}},{key:"_qualityStat",value:function(e,t){var a=this._groupModule.getModule(an);a.addMessageSequence({key:Ci,message:t}),e&&t.clientTime>0&&a.addMessageDelay(t.clientTime)}},{key:"onGroupMessageRevoked",value:function(e){var t=this._groupModule.getModule(Fa),a=[],n=null,o=!0;e.dataList.forEach((function(e){var i=e.elements.revokedInfos;ct(i)||i.forEach((function(e){var i=Zt(e.topicID)?"GROUP".concat(e.groupID):"GROUP".concat(e.topicID);n=t.revoke(i,e.sequence,e.random);var r=e.revokerInfo&&e.revokerInfo.revoker;if(n)n.revoker=r,a.push(n);else{var s={conversationID:i,to:e.topicID||"",sequence:e.sequence,time:e.time,revoker:r};t.isLastMessageRevoked(s)&&(a.push(s),o=!1)}}))})),0!==a.length&&(t.onMessageRevoked(a),!0===o&&(He.l("".concat(this._n,".onGroupMessageRevoked count:").concat(a.length)),this._groupModule.emitOuterEvent(S.MESSAGE_REVOKED,a)))}},{key:"_groupListTreeShaking",value:function(e){for(var t=new Map(k(this._groupModule.getGroupMap())),a=0,n=e.length;a<n;a++)t.delete(e[a].groupID);this._groupModule.hasJoinedAVChatRoom()&&this._groupModule.getJoinedAVChatRoom().forEach((function(e){t.delete(e)})),this._groupModule.getGroupMap().forEach((function(e,a){e.isSupportTopic&&t.delete(a)}));for(var o=k(t.keys()),i=0,r=o.length;i<r;i++)this._groupModule.deleteGroup(o[i])}},{key:"getGroupList",value:function(e){var t=this,a="".concat(this._n,".").concat("getGroupList"),n=new Vi("getGroupList");He.l("".concat(a));var o={introduction:"Introduction",notification:"Notification",createTime:"CreateTime",ownerID:"Owner_Account",lastInfoTime:"LastInfoTime",memberNum:"MemberNum",maxMemberNum:"MaxMemberNum",joinOption:"ApplyJoinOption",inviteOption:"InviteJoinOption",muteAllMembers:"ShutUpAllMember"},i=["Type","Name","FaceUrl","NextMsgSeq","LastMsgTime","AtInfoList","LastRecallTime"],r=[];e&&e.groupProfileFilter&&e.groupProfileFilter.forEach((function(e){o[e]&&i.push(o[e])}));var s=(e||{}).isGroupWithTopicOnly,l=void 0!==s&&s;return this._pagingGetGroupList({limit:50,offset:0,groupBaseInfoFilter:i,groupList:r,isGroupWithTopicOnly:l}).then((function(){He.l("".concat(a," ok. count:").concat(r.length," isGroupWithTopicOnly:").concat(l)),l||t._groupListTreeShaking(r),t._groupModule.updateGroupMap(r);var e=t._groupModule.getLocalGroupList().length;n.setNetworkType(t._groupModule.getNetworkType()).setMessage("remote count:".concat(r.length,", after tree shaking, local count:").concat(e,", isGroupWithTopicOnly:").concat(l)).end(),t.tempConversationList&&(t.handleUpdateGroupLastMessage(t.tempConversationList),t.tempConversationList=null),t._groupModule.patchGroupMessageRemindType(),t._groupModule.recomputeUnreadCount(),t._groupModule.emitGroupListUpdate(!0,!l);var o=t._groupModule.getLocalGroupList();if(l){var i=o.filter((function(e){return!0===e.isSupportTopic}));return Wi({groupList:i})}return t._isPagingGetCompleted=!0,Wi({groupList:o})})).catch((function(e){return t._groupModule.probeNetwork().then((function(t){var a=_(t,2),o=a[0],i=a[1];n.setError(e,o,i).end()})),He.e("".concat(a," failed. error:"),e),er(e)}))}},{key:"isPagingGetCompleted",value:function(){return this._isPagingGetCompleted}},{key:"_pagingGetGroupList",value:function(e){var t=this,a="".concat(this._n,".").concat("_pagingGetGroupList"),n=e.isCommunityRelay,o=void 0!==n&&n,i=e.isGroupWithTopicOnly,r=void 0!==i&&i,s=e.limit,l=e.offset,c=e.groupBaseInfoFilter,u=e.groupList;if(r)return this._pagingGetGroupListWithTopic({limit:s,offset:l,groupBaseInfoFilter:c,groupList:u});var d=new Vi("_pagingGetGroupList");return this._groupModule.request({protocolName:Wn,requestData:{type:o?I.GRP_COMMUNITY:void 0,memberAccount:this._groupModule.getMyUserID(),limit:s,offset:l,responseFilter:{groupBaseInfoFilter:c,selfInfoFilter:["Role","JoinTime","MsgFlag","MsgSeq"]}}}).then((function(e){var n=e.data,i=n.groups,r=void 0===i?[]:i,m=n.totalCount;u.push.apply(u,k(r)),t._handleGroupAtInfoWithoutTopic(o,r);var p=l+s,h=!(m>p),v="offset:".concat(l," totalCount:").concat(m," isCompleted:").concat(h," ")+"currentCount:".concat(u.length," isCommunityRelay:").concat(o);return d.setNetworkType(t._groupModule.getNetworkType()).setMessage("".concat(v)).end(),o||h?!o&&h?(He.l("".concat(a," start to get community list")),l=0,t._pagingGetGroupList({limit:s,offset:l,groupBaseInfoFilter:c,groupList:u,isCommunityRelay:!0})):o&&!h?(l=p,t._pagingGetGroupList({limit:s,offset:l,groupBaseInfoFilter:c,groupList:u,isCommunityRelay:!0})):(He.l("".concat(a," ok. totalCount:").concat(u.length)),Wi({groupList:u})):(l=p,t._pagingGetGroupList({limit:s,offset:l,groupBaseInfoFilter:c,groupList:u}))})).catch((function(e){return 11e3!==e.code&&t._groupModule.probeNetwork().then((function(t){var a=_(t,2),n=a[0],i=a[1];d.setMessage("isCommunityRelay:".concat(o)).setError(e,n,i).end()})),o?(11e3===e.code&&(d=null,He.l("".concat(a," ok. community unavailable"))),Qi({groupList:u})):er(e)}))}},{key:"_pagingGetGroupListWithTopic",value:function(e){var t=this,a="".concat(this._n,"._pagingGetGroupListWithTopic"),n=e.limit,o=e.offset,i=e.groupBaseInfoFilter,r=e.groupList,s=new Vi("pagingGetGroupListWithTopic");return this._groupModule.request({protocolName:Wn,requestData:{type:I.GRP_COMMUNITY,memberAccount:this._groupModule.getMyUserID(),limit:n,offset:o,responseFilter:{groupBaseInfoFilter:i,selfInfoFilter:["Role","JoinTime","MsgFlag","MsgSeq"]},isSupportTopic:1}}).then((function(e){var l=e.data,c=l.groups,u=void 0===c?[]:c,d=l.totalCount;r.push.apply(r,k(u));var m=o+n,p=!(d>m),h="offset:".concat(o," totalCount:").concat(d," isCompleted:").concat(p," ")+"currentCount:".concat(r.length);return s.setNetworkType(t._groupModule.getNetworkType()).setMessage("".concat(h)).end(),p?(He.l("".concat(a," ok. totalCount:").concat(r.length)),Wi({groupList:r})):(o=m,t._pagingGetGroupListWithTopic({limit:n,offset:o,groupBaseInfoFilter:i,groupList:r}))})).catch((function(e){return t._groupModule.probeNetwork().then((function(t){var a=_(t,2),n=a[0],o=a[1];s.setError(e,n,o).end()})),er(e)}))}},{key:"_cacheGroupMessage",value:function(e,t){this._cachedGroupMessageMap.has(e)||this._cachedGroupMessageMap.set(e,[]),this._cachedGroupMessageMap.get(e).push(t)}},{key:"_deleteCachedGroupMessage",value:function(e){this._cachedGroupMessageMap.has(e)&&this._cachedGroupMessageMap.delete(e)}},{key:"_notifyCachedGroupMessage",value:function(e){var t=this,a=this._cachedGroupMessageMap.get(e)||[];a.forEach((function(e){t.onNewGroupMessage(e)})),this._deleteCachedGroupMessage(e),He.l("".concat(this._n,"._notifyCachedGroupMessage groupID:").concat(e," count:").concat(a.length))}},{key:"_cacheGroupMessageAndProbe",value:function(e){var t=this,a=e.groupID,n=e.event,o=e.item;this._cacheGroupMessage(a,{event:n,dataList:[o]}),this._groupModule.getGroupSimplifiedInfo(a).then((function(e){e.type===I.GRP_AVCHATROOM?t._groupModule.hasLocalGroup(a)?t._notifyCachedGroupMessage(a):t._groupModule.setUnjoinedAVChatRoom(a):(t._groupModule.updateGroupMap([e]),t._notifyCachedGroupMessage(a))})),this._checkCountMap.has(a)||this._checkCountMap.set(a,0),He.l("".concat(this._n,"._cacheGroupMessageAndProbe groupID:").concat(a))}},{key:"_handleGroupAtInfoWithoutTopic",value:function(e,a){var n=this;e&&0!==a.length&&a.forEach((function(e){var a=e.groupID,o=e.groupAtInfoList,i=[];ct(o)||(o.forEach((function(e){i.push(t(t({},e),{},{groupID:a}))})),n._groupModule.getModule(Fa).onNewGroupAtTips({dataList:i}))}))}},{key:"reset",value:function(){this._cachedGroupMessageMap.clear(),this._checkCountMap.clear(),this._getTopicPendingMap.clear(),this._isPagingGetCompleted=!1,this._groupModule.getInnerEmitterInstance().once(nr,this._initGroupList,this)}}]),e}(),Cr=1,Mr=2,Sr=3,Ir=4,Tr=5,Dr=function(){function e(t){n(this,e),this._groupModule=t,this._n="GroupAttributesHandler",this._groupAttributesMap=new Map,this._groupAttributesCopy={},this.CACHE_EXPIRE_TIME=3e4,this._groupModule.getInnerEmitterInstance().on(or,this._onCloudConfigUpdated,this)}return r(e,[{key:"_onCloudConfigUpdated",value:function(){var e=this._groupModule.getCloudConfig("grp_attr_cache_time");ct(e)||(this.CACHE_EXPIRE_TIME=Number(e))}},{key:"updateLocalMainSequenceOnReconnected",value:function(){this._groupAttributesMap.forEach((function(e){e.localMainSequence=0}))}},{key:"isGroupAttributesUpdatedNotice",value:function(e){var t=e.to,a=e.elements.newGroupProfile,n=!ct(a)&&!Zt(a.groupAttributeOption);return n&&this._onGroupAttributesUpdated({groupID:t,groupAttributeOption:a.groupAttributeOption}),n}},{key:"_onGroupAttributesUpdated",value:function(e){var t=this,a=e.groupID,n=e.groupAttributeOption,o=n.mainSequence,i=n.isWithChangedAttributeInfo,r=n.groupAttributeList,s=void 0===r?[]:r,l=n.operationType;if(He.l("".concat(this._n,".onGroupAttributesUpdated. ")+"groupID:".concat(a," isWithChangedAttributeInfo:").concat(i," operationType:").concat(l)),!ct(l)){this._groupAttributesCopy=this._getCachedAttributes({groupID:a});var c=o-this._getLocalGroupAttributes(a).localMainSequence;if(0!==c){if(1===i&&1===c)return this._refreshCachedGroupAttributes({groupID:a,remoteMainSequence:o,groupAttributeList:s,operationType:l}),void this._emitGroupAttributesUpdated(a);if(this._hasLocalGroupAttributes(a)){var u=this._getLocalGroupAttributes(a).avChatRoomKey;this._getGroupAttributes({groupID:a,avChatRoomKey:u}).then((function(){t._emitGroupAttributesUpdated(a)}))}}}}},{key:"initGroupAttributesCache",value:function(e){var t=e.groupID,a=e.avChatRoomKey,n=void 0===a?void 0:a;this._groupAttributesMap.set(t,{lastUpdateTime:0,localMainSequence:0,remoteMainSequence:0,attributes:new Map,avChatRoomKey:n}),He.l("".concat(this._n,".initGroupAttributesCache groupID:").concat(t," avChatRoomKey:").concat(n))}},{key:"initGroupAttributes",value:function(e){var t=this,a=e.groupID,n=e.groupAttributes,o=this._getLocalGroupAttributes(a),i=o.remoteMainSequence,r=o.avChatRoomKey,s=new Vi("initGroupAttributes");return s.setMessage("groupID:".concat(a," avChatRoomKey:").concat(r," mainSequence:").concat(i)),this._groupModule.request({protocolName:wo,requestData:{groupID:a,avChatRoomKey:r,mainSequence:i,groupAttributeList:this._transformGroupAttributes(n)}}).then((function(e){He.l("".concat(t._n,".").concat("initGroupAttributes"," ok. groupID:").concat(a));var o=e.data,i=o.mainSequence,r=k(o.groupAttributeList);return r.forEach((function(e){e.value=n[e.key]})),t._groupAttributesCopy=t._getCachedAttributes({groupID:a}),t._refreshCachedGroupAttributes({groupID:a,remoteMainSequence:i,groupAttributeList:r,operationType:Cr}),t._emitGroupAttributesUpdated(a),s.setNetworkType(t._groupModule.getNetworkType()).end(),Wi({groupAttributes:n})})).catch((function(e){return t._groupModule.probeNetwork().then((function(t){var a=_(t,2),n=a[0],o=a[1];s.setError(e,n,o).end()})),er(e)}))}},{key:"setGroupAttributes",value:function(e){var t=this,a="".concat(this._n,".").concat("setGroupAttributes"),n=e.groupID,o=e.groupAttributes,i=this._getLocalGroupAttributes(n),r=i.remoteMainSequence,s=i.avChatRoomKey,l=i.attributes,c=this._transformGroupAttributes(o);c.forEach((function(e){var t=e.key;e.sequence=0,l.has(t)&&(e.sequence=l.get(t).sequence)}));var u=new Vi("setGroupAttributes");return u.setMessage("groupID:".concat(n," groupAttributes:").concat(JSON.stringify(o))),He.l("".concat(a,". groupID:").concat(n," mainSequence:").concat(r)),this._groupModule.request({protocolName:Co,requestData:{groupID:n,avChatRoomKey:s,mainSequence:r,groupAttributeList:c}}).then((function(e){He.l("".concat(a," ok."));var i=e.data,r=i.mainSequence,s=k(i.groupAttributeList);return s.forEach((function(e){e.value=o[e.key]})),t._groupAttributesCopy=t._getCachedAttributes({groupID:n}),t._refreshCachedGroupAttributes({groupID:n,remoteMainSequence:r,groupAttributeList:s,operationType:Mr}),t._emitGroupAttributesUpdated(n),u.setNetworkType(t._groupModule.getNetworkType()).end(),Wi({groupAttributes:o})})).catch((function(e){return t._groupModule.probeNetwork().then((function(t){var a=_(t,2),n=a[0],o=a[1];u.setError(e,n,o).end()})),er(e)}))}},{key:"deleteGroupAttributes",value:function(e){var t=this,a=e.groupID,n=e.keyList,o=void 0===n?[]:n,i=this._getLocalGroupAttributes(a),r=i.remoteMainSequence,s=i.avChatRoomKey,l=i.attributes,c=k(l.keys()),u=So,d=Sr,m={groupID:a,avChatRoomKey:s,mainSequence:r},p=[];o.length>0&&(c=[],u=Mo,d=Ir,o.forEach((function(e){var t=0;l.has(e)&&(t=l.get(e).sequence,c.push(e)),p.push({key:e,sequence:t})})),m.groupAttributeList=p);var h=new Vi("deleteGroupAttributes");return h.setMessage("groupID:".concat(a," mainSequence:").concat(r," keyList:").concat(o," protocolName:").concat(u)),this._groupModule.request({protocolName:u,requestData:m}).then((function(e){He.l("".concat(t._n,".").concat("deleteGroupAttributes"," ok. groupID:").concat(a));var n=e.data.mainSequence;return t._groupAttributesCopy=t._getCachedAttributes({groupID:a}),t._refreshCachedGroupAttributes({groupID:a,remoteMainSequence:n,groupAttributeList:p,operationType:d}),t._emitGroupAttributesUpdated(a),h.setNetworkType(t._groupModule.getNetworkType()).end(),Wi({keyList:c})})).catch((function(e){return t._groupModule.probeNetwork().then((function(t){var a=_(t,2),n=a[0],o=a[1];h.setError(e,n,o).end()})),er(e)}))}},{key:"getGroupAttributes",value:function(e){var t=this,a="".concat(this._n,".").concat("getGroupAttributes"),n=e.groupID,o=this._getLocalGroupAttributes(n),i=o.avChatRoomKey,r=o.lastUpdateTime,s=o.localMainSequence,l=o.remoteMainSequence,c=new Vi("getGroupAttributes");if(c.setMessage("groupID:".concat(n," localMainSequence:").concat(s," remoteMainSequence:").concat(l," keyList:").concat(e.keyList)),Date.now()-r>=this.CACHE_EXPIRE_TIME||s<l)return this._getGroupAttributes({groupID:n,avChatRoomKey:i}).then((function(o){c.setMoreMessage("get attributes from remote. count:".concat(o.length)).setNetworkType(t._groupModule.getNetworkType()).end(),He.l("".concat(a," from remote. groupID:").concat(n));var i=t._getCachedAttributes(e);return Wi({groupAttributes:i})})).catch((function(e){return t._groupModule.probeNetwork().then((function(t){var a=_(t,2),n=a[0],o=a[1];c.setError(e,n,o).end()})),er(e)}));c.setMoreMessage("get attributes from cache").setNetworkType(this._groupModule.getNetworkType()).end(),He.l("".concat(a," from cache. groupID:").concat(n));var u=this._getCachedAttributes(e);return Qi({groupAttributes:u})}},{key:"_getGroupAttributes",value:function(e){var a=this,n=0;return ct(e.avChatRoomKey)||(n=1),this._groupModule.request({protocolName:Io,requestData:t(t({},e),{},{groupType:n})}).then((function(t){He.l("".concat(a._n,"._getGroupAttributes ok. groupID:").concat(e.groupID));var n=t.data,o=n.mainSequence,i=n.groupAttributeList,r=k(i);return ct(o)||a._refreshCachedGroupAttributes({groupID:e.groupID,remoteMainSequence:o,groupAttributeList:r,operationType:Tr}),i})).catch((function(e){return er(e)}))}},{key:"_refreshCachedGroupAttributes",value:function(e){var t=e.groupID,a=e.remoteMainSequence,n=e.groupAttributeList,o=e.operationType;if(this._hasLocalGroupAttributes(t)){var i=this._getLocalGroupAttributes(t),r=i.localMainSequence;if(o===Tr||a-r==1)i.remoteMainSequence=a,i.localMainSequence=a,i.lastUpdateTime=Date.now(),this._updateCachedAttributes({groupAttributes:i,groupAttributeList:n,operationType:o});else{if(r===a)return;i.remoteMainSequence=a}this._groupAttributesMap.set(t,i);var s="operationType:".concat(o," localMainSequence:").concat(r," remoteMainSequence:").concat(a);He.l("".concat(this._n,"._refreshCachedGroupAttributes. ").concat(s))}}},{key:"_getCachedAttributes",value:function(e){var t=e.groupID,a=e.keyList,n=void 0===a?[]:a,o={};if(this._hasLocalGroupAttributes(t)){var i=this._getLocalGroupAttributes(t).attributes;if(n.length>0)n.forEach((function(e){i.has(e)&&(o[e]=i.get(e).value)}));else{var r,s=M(i.keys());try{for(s.s();!(r=s.n()).done;){var l=r.value;o[l]=i.get(l).value}}catch(c){s.e(c)}finally{s.f()}}}return o}},{key:"_updateCachedAttributes",value:function(e){var t=e.groupAttributes,a=e.groupAttributeList,n=e.operationType;n!==Sr?n!==Ir?(n===Cr&&t.attributes.clear(),a.forEach((function(e){var a=e.key,n=e.value,o=e.sequence;t.attributes.set(a,{value:n,sequence:o})}))):a.forEach((function(e){t.attributes.delete(e.key)})):t.attributes.clear()}},{key:"_hasLocalGroupAttributes",value:function(e){return this._groupAttributesMap.has(e)}},{key:"_getLocalGroupAttributes",value:function(e){return this._hasLocalGroupAttributes(e)||this.initGroupAttributesCache({groupID:e}),this._groupAttributesMap.get(e)}},{key:"_transformGroupAttributes",value:function(e){var t=[];return Object.keys(e).forEach((function(a){t.push({key:a,value:e[a]})})),t}},{key:"_emitGroupAttributesUpdated",value:function(e){var t=this._getCachedAttributes({groupID:e}),a=this._computeAttrChangedInfo(t),n=a.updatedKeyList,o=a.deletedKeyList;He.l("".concat(this._n,"._emitGroupAttributesUpdated update:").concat(n.length,", delete:").concat(o.length)),0===n.length&&0===o.length||this._groupModule.emitOuterEvent(S.GROUP_ATTRIBUTES_UPDATED,{groupID:e,groupAttributes:t,updatedKeyList:n,deletedKeyList:o})}},{key:"_computeAttrChangedInfo",value:function(e){var t=this,a=[],n=[];return Object.keys(e).forEach((function(n){e[n]!==t._groupAttributesCopy[n]&&a.push(n)})),Object.keys(this._groupAttributesCopy).forEach((function(t){ct(e[t])&&n.push(t)})),this._groupAttributesCopy={},{updatedKeyList:a,deletedKeyList:n}}},{key:"deleteLocalGroupAttributes",value:function(e){this._hasLocalGroupAttributes(e)&&this._groupAttributesMap.delete(e)}},{key:"reset",value:function(){this._groupAttributesMap.clear(),this._groupAttributesCopy={},this.CACHE_EXPIRE_TIME=3e4}}]),e}(),br="Set",Vr="Increase",Ar="Decrease",Lr=function(){function e(t){n(this,e),this._groupModule=t,this._n="GroupCountersHandler",this._groupCountersMap=new Map,this.EXPIRE_TIME=3e4,this._groupModule.getInnerEmitterInstance().on(or,this._onCloudConfigUpdated,this)}return r(e,[{key:"_onCloudConfigUpdated",value:function(){var e=this._groupModule.getCloudConfig("grp_counter_expire_time");ct(e)||(this.EXPIRE_TIME=Number(e))}},{key:"isGroupCountersNotice",value:function(e){var t=e.to,a=e.elements.groupCounterInfo,n=!1;return Zt(a)||(this._onGroupCountersUpdated({groupID:t,groupCounterInfo:a}),n=!0),n}},{key:"_onGroupCountersUpdated",value:function(e){var t=this,a=e.groupID;e.groupCounterInfo.forEach((function(e){var n=e.type,o=e.groupCounterSeq,i=e.counterList,r=void 0===i?[]:i;0!==n&&2!==n||(t._updateLocalGroupCounters({groupID:a,groupCounterSeq:o,counterList:r}),r.forEach((function(e){t._groupModule.emitOuterEvent(S.GROUP_COUNTER_UPDATED,{groupID:a,key:e.key,value:e.value})}))),1===n&&t._deleteLocalGroupCounters({groupID:a,groupCounterSeq:o,counterList:r})})),He.l("".concat(this._n,"._onGroupCountersUpdated groupID:").concat(a))}},{key:"initGroupCountersCache",value:function(e){var t=e.groupID,a=e.avChatRoomKey;this._groupCountersMap.set(t,{lastUpdateTime:0,groupCounterSeq:0,counters:new Map,avChatRoomKey:a}),He.l("".concat(this._n,".initGroupCountersCache groupID:").concat(t," avChatRoomKey:").concat(a))}},{key:"setGroupCounters",value:function(e){var t=this;if(!this._groupModule.canIUse(H.GRP_COUNTER))return er({code:fi.CANNOT_USE_COMMERCIAL_ABILITY});var a="".concat(this._n,".setGroupCounters"),n=e.groupID,o=e.counters,i=this._convertObjectToList(o),r=this._getLocalGroupCounters(n).avChatRoomKey,s="groupID:".concat(n," count:").concat(i.length),l=new Vi("setGroupCounters");return l.setMessage("".concat(s)),He.l("".concat(a,". ").concat(s)),this._updateGroupCounters({groupID:n,counterList:i,avChatRoomKey:r,mode:br}).then((function(e){return l.end(),He.l("".concat(a," ok.")),Wi({counters:e})})).catch((function(e){return t._groupModule.probeNetwork().then((function(t){var a=_(t,2),n=a[0],o=a[1];l.setError(e,n,o).end()})),He.e("".concat(a," failed. error:"),e),er(e)}))}},{key:"increaseGroupCounter",value:function(e){var t=this;if(!this._groupModule.canIUse(H.GRP_COUNTER))return er({code:fi.CANNOT_USE_COMMERCIAL_ABILITY});var a="".concat(this._n,".increaseGroupCounters"),n=e.groupID,o=e.key,i=e.value,r=this._getLocalGroupCounters(n).avChatRoomKey,s="groupID:".concat(n," key:").concat(o," value:").concat(i),l=new Vi("increaseGroupCounter");l.setMessage("".concat(s)),He.l("".concat(a,". ").concat(s));var c=[{key:o,value:i}];return this._updateGroupCounters({groupID:n,counterList:c,avChatRoomKey:r,mode:Vr}).then((function(e){return l.end(),He.l("".concat(a," ok.")),Wi({counters:e})})).catch((function(e){return t._groupModule.probeNetwork().then((function(t){var a=_(t,2),n=a[0],o=a[1];l.setError(e,n,o).end()})),He.e("".concat(a," failed. error:"),e),er(e)}))}},{key:"decreaseGroupCounter",value:function(e){var t=this;if(!this._groupModule.canIUse(H.GRP_COUNTER))return er({code:fi.CANNOT_USE_COMMERCIAL_ABILITY});var a="".concat(this._n,".decreaseGroupCounter"),n=e.groupID,o=e.key,i=e.value,r=this._getLocalGroupCounters(n).avChatRoomKey,s="groupID:".concat(n," key:").concat(o," value:").concat(i),l=new Vi("decreaseGroupCounter");l.setMessage("".concat(s)),He.l("".concat(a,". ").concat(s));var c=[{key:o,value:i}];return this._updateGroupCounters({groupID:n,counterList:c,avChatRoomKey:r,mode:Ar}).then((function(e){return l.end(),He.l("".concat(a," ok.")),Wi({counters:e})})).catch((function(e){return t._groupModule.probeNetwork().then((function(t){var a=_(t,2),n=a[0],o=a[1];l.setError(e,n,o).end()})),He.e("".concat(a," failed. error:"),e),er(e)}))}},{key:"getGroupCounters",value:function(e){var t=this;if(!this._groupModule.canIUse(H.GRP_COUNTER))return er({code:fi.CANNOT_USE_COMMERCIAL_ABILITY});var a="".concat(this._n,".getGroupCounters"),n=e.groupID,o=e.keyList,i=void 0===o?[]:o,r=this._getLocalGroupCounters(n),s=r.avChatRoomKey,l=r.lastUpdateTime,c=new Vi("getGroupCounters");if(c.setMessage("groupID:".concat(n)),Date.now()-l>=this.EXPIRE_TIME)return this._getRemoteGroupCounters({groupID:n,avChatRoomKey:s}).then((function(e){c.setMoreMessage("from remote. count:".concat(e.length)).end(),He.l("".concat(a," from remote. groupID:").concat(n));var o=t._getLocalCounters(n,i);return Wi({counters:o})})).catch((function(e){return t._groupModule.probeNetwork().then((function(t){var a=_(t,2),n=a[0],o=a[1];c.setError(e,n,o).end()})),er(e)}));c.setMoreMessage("from cache").end(),He.l("".concat(a," from cache. groupID:").concat(n));var u=this._getLocalCounters(n,i);return Qi({counters:u})}},{key:"_getRemoteGroupCounters",value:function(e){var a=this;return this._groupModule.request({protocolName:Ao,requestData:t({},e)}).then((function(t){var n=t.data,o=n.counterList,i=void 0===o?[]:o,r=n.groupCounterSeq;return a._updateLocalGroupCounters({groupID:e.groupID,counterList:i,groupCounterSeq:r}),He.l("".concat(a._n,"._getRemoteGroupCounters ok. groupID:").concat(e.groupID)),i})).catch((function(e){return er(e)}))}},{key:"_convertObjectToList",value:function(e){var t=[];return Object.keys(e).forEach((function(a){t.push({key:a,value:e[a]})})),t}},{key:"_updateGroupCounters",value:function(e){var a="".concat(this._n,"._updateGroupCounters"),n=e.groupID,o=e.avChatRoomKey,i=e.mode;return He.l("".concat(a,". groupID:").concat(n," avChatRoomKey:").concat(o," mode:").concat(i)),this._groupModule.request({protocolName:Vo,requestData:t({},e)}).then((function(e){He.l("".concat(a," ok."));var t=e.data.counterList,n={};return(void 0===t?[]:t).forEach((function(e){var t=e.key,a=e.value;n[t]=a})),n})).catch((function(e){return er(e)}))}},{key:"_hasLocalGroupCounters",value:function(e){return this._groupCountersMap.has(e)}},{key:"_getLocalGroupCounters",value:function(e){return this._hasLocalGroupCounters(e)||this.initGroupCountersCache({groupID:e}),this._groupCountersMap.get(e)}},{key:"_updateLocalGroupCounters",value:function(e){var t=e.groupID,a=e.counterList,n=void 0===a?[]:a,o=e.groupCounterSeq;if(this._hasLocalGroupCounters(t)){var i=this._getLocalGroupCounters(t),r=i.counters,s=i.avChatRoomKey,l=i.groupCounterSeq;if(o>0&&o<l)return;n.forEach((function(e){var t=e.key,a=e.value;r.set(t,a)})),this._groupCountersMap.set(t,{lastUpdateTime:Date.now(),groupCounterSeq:o,counters:r,avChatRoomKey:s})}}},{key:"_deleteLocalGroupCounters",value:function(e){var t=e.groupID,a=e.counterList,n=void 0===a?[]:a,o=e.groupCounterSeq;if(this._hasLocalGroupCounters(t)){var i=this._getLocalGroupCounters(t),r=i.counters,s=i.avChatRoomKey;n.forEach((function(e){r.delete(e.key)})),this._groupCountersMap.set(t,{lastUpdateTime:Date.now(),groupCounterSeq:o,counters:r,avChatRoomKey:s})}}},{key:"_getLocalCounters",value:function(e,t){var a={};if(!this._hasLocalGroupCounters(e))return a;var n=this._getLocalGroupCounters(e).counters;if(t.length>0)t.forEach((function(e){n.has(e)&&(a[e]=n.get(e))}));else{var o,i=M(n.keys());try{for(i.s();!(o=i.n()).done;){var r=o.value;a[r]=n.get(r)}}catch(s){i.e(s)}finally{i.f()}}return a}},{key:"reset",value:function(){this._groupCountersMap.clear(),this.EXPIRE_TIME=3e4}}]),e}(),Rr=function(){function e(t){n(this,e);var a=t.manager,o=t.groupID,i=t.onInit,r=t.onSuccess,s=t.onFail;this._n="Polling",this._manager=a,this._groupModule=a._groupModule,this._onInit=i,this._onSuccess=r,this._onFail=s,this._groupID=o,this._timeoutID=-1,this._isRunning=!1,this._protocolName=_o}return r(e,[{key:"start",value:function(){var e=this._groupModule.isLoggedIn();e||(this._protocolName=ko),He.l("".concat(this._n,".start pollingInterval:").concat(this._manager.getPollingInterval()," isLoggedIn:").concat(e)),this._isRunning=!0,this._request()}},{key:"isRunning",value:function(){return this._isRunning}},{key:"_request",value:function(){var e=this,t=this._onInit(this._groupID);this._groupModule.request({protocolName:this._protocolName,requestData:t}).then((function(t){e._onSuccess(e._groupID,t),e.isRunning()&&(clearTimeout(e._timeoutID),e._timeoutID=setTimeout(e._request.bind(e),e._manager.getPollingInterval()))})).catch((function(t){e._onFail(e._groupID,t),e.isRunning()&&(clearTimeout(e._timeoutID),e._timeoutID=setTimeout(e._request.bind(e),e._manager.MAX_POLLING_INTERVAL))}))}},{key:"stop",value:function(){He.l("".concat(this._n,".stop")),this._timeoutID>0&&(clearTimeout(this._timeoutID),this._timeoutID=-1),this._isRunning=!1}},{key:"getPollingTimerID",value:function(){return this._timeoutID}}]),e}(),Or={3:!0,4:!0,5:!0,6:!0,17:!0},Br=function(){function e(t){n(this,e),this._groupModule=t,this._n="AVChatRoomHandler",this._joinedGroupMap=new Map,this._pollingRequestInfoMap=new Map,this._pollingInstanceMap=new Map,this.sequencesLinkedList=new vr(200),this.messageIDLinkedList=new vr(100),this.receivedMessageCount=0,this._reportMessageStackedCount=0,this._onlineMemberCountMap=new Map,this.DEFAULT_EXPIRE_TIME=60,this.DEFAULT_POLLING_INTERVAL=300,this.MAX_POLLING_INTERVAL=2e3,this._pollingInterval=this.DEFAULT_POLLING_INTERVAL,this.DEFAULT_POLLING_NO_MESSAGE_COUNT=20,this.DEFAULT_POLLING_INTERVAL_PLUS=2e3,this._pollingNoMessageCount=0,this._startBroadcastSeq=1,this._broadcastMessageIDMap=new Map,this.DEFAULT_POLLING_SIMPLIFIED_MSG=0}return r(e,[{key:"hasJoinedAVChatRoom",value:function(){return this._joinedGroupMap.size>0}},{key:"checkJoinedAVChatRoomByID",value:function(e){return this._joinedGroupMap.has(e)}},{key:"getJoinedAVChatRoom",value:function(){return this._joinedGroupMap.size>0?k(this._joinedGroupMap.keys()):null}},{key:"_updateRequestData",value:function(e){var a=this._pollingRequestInfoMap.get(e);return e===k(this._pollingInstanceMap.keys())[0]?t(t({},a),{},{startBroadcastSeq:this._startBroadcastSeq,simplifiedMessage:this.DEFAULT_POLLING_SIMPLIFIED_MSG}):t(t({},a),{},{simplifiedMessage:this.DEFAULT_POLLING_SIMPLIFIED_MSG})}},{key:"_handleSuccess",value:function(e,t){var a=t.data,n=a.key,o=a.nextSeq,i=a.rspMsgList,r=a.errorCode,s=a.nextBroadcastSeq,l=a.broadcastMessageList;if(0!==r){var c=this._pollingRequestInfoMap.get(e),u=new Vi("longPollingAVError"),d=c?"".concat(c.key,"-").concat(c.startSeq):"requestInfo is undefined";u.setMessage("".concat(e,"-").concat(d,"-").concat(t.errorInfo)).setCode(t.errorCode).setNetworkType(this._groupModule.getNetworkType()).end(!0)}else{if(!this.checkJoinedAVChatRoomByID(e))return;it(n)&&ot(o)&&this._pollingRequestInfoMap.set(e,{key:n,startSeq:o}),ot(s)&&s>this._startBroadcastSeq&&(this._startBroadcastSeq=s),lt(i)&&i.length>0?(i.forEach((function(e){e.to=e.groupID})),this.onMessage(i)):(this._pollingNoMessageCount+=1,this._pollingNoMessageCount===this.DEFAULT_POLLING_NO_MESSAGE_COUNT&&(this._pollingInterval=this.DEFAULT_POLLING_INTERVAL+this.DEFAULT_POLLING_INTERVAL_PLUS)),this._onBroadcastMessage(l)}}},{key:"_handleFailure",value:function(e,t){}},{key:"onMessage",value:function(e){if(lt(e)&&0!==e.length){0!==this._pollingNoMessageCount&&(this._pollingNoMessageCount=0,this._pollingInterval=this.DEFAULT_POLLING_INTERVAL);var t=null,a=[],n=this._getModule(Fa),o=this._getModule(an),i=e.length;i>1&&e.sort((function(e,t){return e.sequence-t.sequence}));for(var r=this._getModule(qa),s=0;s<i;s++){var l=this.restoreMessageFromSimplified(e[s]);if(Or[l.event]){if(6===l.event){if(this._groupModule.isGroupAttributesUpdatedNotice(l))continue;if(this._groupModule.isGroupCountersNotice(l))continue}this.receivedMessageCount+=1,t=this.packMessage(l,l.event);var c=1===l.isModified,u=1===l.isHistoryMessage;if((r.isUnlimitedAVChatRoom()||!this.sequencesLinkedList.has(t.sequence))&&!this.messageIDLinkedList.has(t.ID)){var d=t.conversationID;if(this.receivedMessageCount%50==0?this._getModule(Xa).detectFirstRound(d,this.sequencesLinkedList.data()):this.receivedMessageCount%80==0&&this._getModule(Xa).detectSecondRound(d,this.sequencesLinkedList.data()),null!==this.sequencesLinkedList.tail()){var m=this.sequencesLinkedList.tail().value,p=t.sequence-m;p>1&&p<=20?this._getModule(Xa).onMessageMaybeLost(d,m+1,p-1):p<-1&&p>=-20&&this._getModule(Xa).onMessageMaybeLost(d,t.sequence+1,Math.abs(p)-1)}this.sequencesLinkedList.set(t.sequence),this.messageIDLinkedList.set(t.ID);var h=!1;if(this._isMessageSentByCurrentInstance(t)?c&&(h=!0,t.isModified=c,n.updateMessageIsModifiedProperty(t)):h=!0,h){if(t.conversationType===I.CONV_SYSTEM&&5===t.payload.operationType&&this._onGroupDismissed(t.payload.groupProfile.groupID),!u&&t.conversationType!==I.CONV_SYSTEM){var v=t.conversationID.replace(I.CONV_GROUP,"");this._pollingInstanceMap.has(v)?this._groupModule.isLoggedIn()&&o.addMessageSequence({key:Si,message:t}):(t.type!==I.MSG_GRP_TIP&&t.clientTime>0&&o.addMessageDelay(t.clientTime),o.addMessageSequence({key:Mi,message:t}))}a.push(t)}}}else He.w("".concat(this._n,".onMessage unknown event:").concat(l.event))}if(0!==a.length){this._groupModule.filterModifiedMessage(a);var g=this.packConversationOption(a);g.length>0&&this._getModule(Fa).onNewMessage({conversationOptionsList:g,isInstantMessage:!0}),He.d("".concat(this._n,".onMessage count:").concat(a.length)),this._checkMessageStacked(a);var f=this._groupModule.filterUnmodifiedMessage(a);f.length>0&&this._groupModule.emitOuterEvent(S.MESSAGE_RECEIVED,f),a.length=0}}}},{key:"isBroadcastOrNormal",value:function(e){return 3===e||17===e}},{key:"isGroupTip",value:function(e){return 4===e||6===e}},{key:"isGroupSystemNotice",value:function(e){return 5===e}},{key:"restoreGroupTipElements",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.groupJoinType||(e.groupJoinType=1);var t=e.operatorInfo,a=void 0===t?{}:t,n=e.operatorID,o=e.userIDList,i=void 0===o?[]:o,r=a.userID,s=void 0===r?n:r,l=a.avatar,c=void 0===l?"":l,u=a.nick,d=void 0===u?"":u;e.operatorInfo={userID:s,avatar:c,nick:d};var m=i.map((function(e){return{userID:e}}));return e.memberInfoList=e.memberInfoList||m,e}},{key:"restoreMessageFromSimplified",value:function(e){var a=e.event;if(this.isBroadcastOrNormal(a)&&(e.cloudCustomData=e.cloudCustomData||"",e.elements=e.elements.map((function(e){if(e.type===I.MSG_CUSTOM){var a=e.content,n=void 0===a?{}:a;e.content=t({data:"",description:"",extension:""},n)}return e}))),(this.isGroupTip(a)||this.isGroupSystemNotice(a))&&(e.from=e.from||"@TIM#SYSTEM"),this.isGroupTip(a)){e.elements=this.restoreGroupTipElements(e.elements);var n=e.elements,o=void 0===n?{}:n,i=o.operationType,r=o.operatorInfo;if(1===i){var l=[{userID:(void 0===r?{}:r).userID}];o.memberInfoList=o.memberInfoList||l}}if(this.isGroupSystemNotice(a)){var c=e.elements,u=c.memberInfoList,d=c.operatorInfo;u||(u=void 0===d?{}:d),e.elements.memberInfoList=t({userID:e.elements.operatorID,avatar:"",nick:""},u),e.elements=t({authentication:"",remarkInfo:"",messageKey:1e3*e.time},e.elements);var m=Object.keys(e.elements).filter((function(e){return"operatorInfo"!==e})).reduce((function(a,n){return t(t({},a),{},s({},n,e.elements[n]))}),{});e.elements=m}return e}},{key:"_onGroupDismissed",value:function(e){He.l("".concat(this._n,"._onGroupDismissed groupID:").concat(e)),this._groupModule.deleteLocalGroupAndConversation(e),this.reset(e)}},{key:"_checkMessageStacked",value:function(e){var t="MessageStacked",a=e.length;a>=100&&(this._groupModule.outputWarning(t,a),this._reportMessageStackedCount<5&&(new Vi(t).setNetworkType(this._groupModule.getNetworkType()).setMessage("count:".concat(a," groupID:").concat(k(this._joinedGroupMap.keys()))).setLevel("warning").end(),this._reportMessageStackedCount+=1))}},{key:"_isMessageSentByCurrentInstance",value:function(e){return!!this._getModule(Fa).isMessageSentByCurrentInstance(e)}},{key:"packMessage",value:function(e,t){e.currentUser=this._groupModule.getMyUserID(),e.conversationType=5===t?I.CONV_SYSTEM:I.CONV_GROUP,e.isSystemMessage=!!e.isSystemMessage;var a=new Yi(e),n=this.packElements(e,t);return a.setElement(n,this._groupModule.getFileDownloadProxy()),a}},{key:"packElements",value:function(e,a){return 4===a||6===a?(this._updateMemberCountByGroupTips(e),{type:I.MSG_GRP_TIP,content:t(t({},e.elements),{},{groupProfile:e.groupProfile})}):5===a?{type:I.MSG_GRP_SYS_NOTICE,content:t(t({},e.elements),{},{groupProfile:t(t({},e.groupProfile),{},{groupID:e.groupID})})}:this._getModule(ja).parseElements(e.elements,e.from)}},{key:"packConversationOption",value:function(e){for(var t=new Map,a=0;a<e.length;a++){var n=e[a],o=n.conversationID;if(t.has(o)){var i=t.get(o);i.lastMessage=n,"in"===n.flow&&i.unreadCount++}else t.set(o,{conversationID:n.conversationID,unreadCount:"out"===n.flow?0:1,type:n.conversationType,subType:n.conversationSubType,lastMessage:n})}return k(t.values())}},{key:"_updateMemberCountByGroupTips",value:function(e){var t=e.groupProfile.groupID,a=e.elements.onlineMemberInfo,n=void 0===a?void 0:a;if(!Zt(n)){var o=n.onlineMemberNum,i=void 0===o?0:o,r=n.expireTime,s=void 0===r?this.DEFAULT_EXPIRE_TIME:r,l=this._onlineMemberCountMap.get(t)||{},c=Date.now();Zt(l)?Object.assign(l,{lastReqTime:0,lastSyncTime:0,latestUpdateTime:c,memberCount:i,expireTime:s}):(l.latestUpdateTime=c,l.memberCount=i),He.d("".concat(this._n,"._updateMemberCountByGroupTips info:"),l),this._onlineMemberCountMap.set(t,l)}}},{key:"_onBroadcastMessage",value:function(e){if(!Zt(e)){for(var t=[],a=e.length,n=null,o=0;o<a;o++){var i=this.restoreMessageFromSimplified(e[o]);Or[i.event]?((n=this.packMessage(i,i.event)).isBroadcastMessage=!0,this._broadcastMessageIDMap.has(n.ID)||(t.push(n),this._broadcastMessageIDMap.set(n.ID,1))):He.w("".concat(this._n,"._onBroadcastMessage unknown event:").concat(i.event))}t.length>0&&this._groupModule.emitOuterEvent(S.MESSAGE_RECEIVED,t)}}},{key:"start",value:function(e){if(this._pollingInstanceMap.has(e)){var t=this._pollingInstanceMap.get(e);t.isRunning()||t.start()}else{var a=new Rr({manager:this,groupID:e,onInit:this._updateRequestData.bind(this),onSuccess:this._handleSuccess.bind(this),onFail:this._handleFailure.bind(this)});a.start(),this._pollingInstanceMap.set(e,a),He.l("".concat(this._n,".start groupID:").concat(e))}}},{key:"handleJoinResult",value:function(e){var t=this;return this._preCheck().then((function(){var a=e.longPollingKey,n=e.group,o=n.groupID;return t._joinedGroupMap.set(o,n),t._groupModule.updateGroupMap([n]),t._groupModule.deleteUnjoinedAVChatRoom(o),t._groupModule.emitGroupListUpdate(!0,!1),ct(a)?Qi({status:Je,group:n}):Promise.resolve()}))}},{key:"startRunLoop",value:function(e){var t=this;return this.handleJoinResult(e).then((function(){var a=e.longPollingKey,n=e.group,o=e.startSeq,i=void 0===o?0:o,r=n.groupID;return t._pollingRequestInfoMap.set(r,{key:a,startSeq:i}),t.start(r),t._groupModule.isLoggedIn()?Qi({status:Je,group:n}):Qi({status:Je})}))}},{key:"_preCheck",value:function(){if(this._getModule(qa).isUnlimitedAVChatRoom())return Promise.resolve();if(!this.hasJoinedAVChatRoom())return Promise.resolve();var e=_(this._joinedGroupMap.entries().next().value,2),t=e[0],a=e[1];if(this._groupModule.isLoggedIn()){if(a.selfInfo.role!==I.GRP_MBR_ROLE_OWNER&&a.ownerID!==this._groupModule.getMyUserID())return this._groupModule.quitGroup(t);this._groupModule.deleteLocalGroupAndConversation(t)}else this._groupModule.deleteLocalGroupAndConversation(t);return this.reset(t),Promise.resolve()}},{key:"joinWithoutAuth",value:function(e){var t=this,a=e.groupID,n="".concat(this._n,".").concat("joinWithoutAuth"),o=new Vi("joinWithoutAuth");return this._groupModule.request({protocolName:to,requestData:e}).then((function(e){var i=e.data.longPollingKey;if(t._groupModule.probeNetwork().then((function(e){var t=_(e,2);t[0];var n=t[1];o.setNetworkType(n).setMessage("groupID:".concat(a," longPollingKey:").concat(i)).end(!0)})),ct(i))return er({code:fi.CANNOT_JOIN_NON_AVCHATROOM_WITHOUT_LOGIN});He.l("".concat(n," ok. groupID:").concat(a)),t._getModule(Fa).setCompleted("".concat(I.CONV_GROUP).concat(a));var r=new fr({groupID:a});return t.startRunLoop({group:r,longPollingKey:i}),Wi({status:Je})})).catch((function(e){return He.e("".concat(n," failed. groupID:").concat(a," error:"),e),t._groupModule.probeNetwork().then((function(t){var n=_(t,2),i=n[0],r=n[1];o.setError(e,i,r).setMessage("groupID:".concat(a)).end(!0)})),er(e)})).finally((function(){t._groupModule.getModule(Ha).reportAtOnce()}))}},{key:"getGroupOnlineMemberCount",value:function(e){var t=this._onlineMemberCountMap.get(e)||{},a=Date.now();return Zt(t)||a-t.lastSyncTime>1e3*t.expireTime&&a-t.latestUpdateTime>1e4&&a-t.lastReqTime>3e3?(t.lastReqTime=a,this._onlineMemberCountMap.set(e,t),this._getGroupOnlineMemberCount(e).then((function(e){return Wi({memberCount:e.memberCount})})).catch((function(e){return er(e)}))):Qi({memberCount:t.memberCount})}},{key:"_getGroupOnlineMemberCount",value:function(e){var t=this,a="".concat(this._n,".").concat("_getGroupOnlineMemberCount");return this._groupModule.request({protocolName:Eo,requestData:{groupID:e}}).then((function(n){var o=t._onlineMemberCountMap.get(e)||{},i=n.data,r=i.onlineMemberNum,s=void 0===r?0:r,l=i.expireTime,c=void 0===l?t.DEFAULT_EXPIRE_TIME:l;He.l("".concat(a," ok. groupID:").concat(e," memberCount:").concat(s," expireTime:").concat(c));var u=Date.now();return Zt(o)&&(o.lastReqTime=u),t._onlineMemberCountMap.set(e,Object.assign(o,{lastSyncTime:u,latestUpdateTime:u,memberCount:s,expireTime:c})),{memberCount:s}})).catch((function(n){return He.w("".concat(a," failed. error:"),n),new Vi("_getGroupOnlineMemberCount").setCode(n.code).setMessage("groupID:".concat(e," error:").concat(JSON.stringify(n))).setNetworkType(t._groupModule.getNetworkType()).end(),Promise.reject(n)}))}},{key:"_getModule",value:function(e){return this._groupModule.getModule(e)}},{key:"setPollingInterval",value:function(e){ct(e)||(ot(e)?this._pollingInterval=this.DEFAULT_POLLING_INTERVAL=e:this._pollingInterval=this.DEFAULT_POLLING_INTERVAL=parseInt(e,10))}},{key:"setPollingIntervalPlus",value:function(e){ct(e)||(ot(e)?this.DEFAULT_POLLING_INTERVAL_PLUS=e:this.DEFAULT_POLLING_INTERVAL_PLUS=parseInt(e,10))}},{key:"setPollingNoMessageCount",value:function(e){ct(e)||(ot(e)?this.DEFAULT_POLLING_NO_MESSAGE_COUNT=e:this.DEFAULT_POLLING_NO_MESSAGE_COUNT=parseInt(e,10))}},{key:"setPollingSimplifiedMessage",value:function(e){ct(e)||"0"!==e&&"1"!==e||(this.DEFAULT_POLLING_SIMPLIFIED_MSG=parseInt(e,10))}},{key:"getPollingInterval",value:function(){return this._pollingInterval}},{key:"onAVChatRoomMemberBanned",value:function(e){var t=e.payload.groupProfile.groupID;He.l("".concat(this._n,".onAVChatRoomMemberBanned groupID:").concat(t)),this._groupModule.deleteLocalGroupAndConversation(t),this.reset(t)}},{key:"restartPolling",value:function(){He.l("".concat(this._n,".restartPolling count:").concat(this._pollingInstanceMap.size));var e,t=M(this._pollingInstanceMap.values());try{for(t.s();!(e=t.n()).done;){var a=e.value;a.stop(),a.start()}}catch(n){t.e(n)}finally{t.f()}}},{key:"getPollingTimerID",value:function(e){if(!this._pollingInstanceMap.has(e))return-1;var t=this._pollingInstanceMap.get(e).getPollingTimerID();return He.l("".concat(this._n,".getPollingTimerID groupID:").concat(e," timerID:").concat(t)),t}},{key:"reset",value:function(e){if(e){He.l("".concat(this._n,".reset groupID:").concat(e));var t=this._pollingInstanceMap.get(e);t&&t.stop(),this._pollingInstanceMap.delete(e),this._joinedGroupMap.delete(e),this._pollingRequestInfoMap.delete(e),this._onlineMemberCountMap.delete(e)}else{He.l("".concat(this._n,".reset all"));var a,n=M(this._pollingInstanceMap.values());try{for(n.s();!(a=n.n()).done;)a.value.stop()}catch(o){n.e(o)}finally{n.f()}this._pollingInstanceMap.clear(),this._joinedGroupMap.clear(),this._pollingRequestInfoMap.clear(),this._onlineMemberCountMap.clear(),this._broadcastMessageIDMap.clear()}this.sequencesLinkedList.reset(),this.messageIDLinkedList.reset(),this.receivedMessageCount=0,this._reportMessageStackedCount=0,this._pollingInterval=this.DEFAULT_POLLING_INTERVAL=300,this.DEFAULT_POLLING_NO_MESSAGE_COUNT=20,this.DEFAULT_POLLING_INTERVAL_PLUS=2e3,this._pollingNoMessageCount=0}}]),e}(),Pr=1,Ur=15,Gr=function(){function e(t){n(this,e),this._groupModule=t,this._n="GroupSystemNoticeHandler",this.pendencyMap=new Map}return r(e,[{key:"onNewGroupSystemNotice",value:function(e){var t=e.dataList,a=e.isSyncingEnded,n=e.isInstantMessage;He.d("".concat(this._n,".onReceiveSystemNotice count:").concat(t.length));var o=this.newSystemNoticeStoredAndSummary({notifiesList:t,isInstantMessage:n}),i=o.eventDataList,r=o.result;i.length>0&&(this._groupModule.getModule(Fa).onNewMessage({conversationOptionsList:i,isInstantMessage:n}),this._onReceivedGroupSystemNotice({result:r,isInstantMessage:n})),n?r.length>0&&this._groupModule.emitOuterEvent(S.MESSAGE_RECEIVED,r):!0===a&&this._clearGroupSystemNotice()}},{key:"newSystemNoticeStoredAndSummary",value:function(e){var a=e.notifiesList,n=e.isInstantMessage,o=null,i=a.length,r=0,s=[],l={conversationID:I.CONV_SYSTEM,unreadCount:0,type:I.CONV_SYSTEM,subType:null,lastMessage:null};for(r=0;r<i;r++){var c=a[r],u=c.groupProfile,d=u.communityType,m=void 0===d?0:d,p=u.topicID,h=void 0===p?void 0:p,v=c.elements,g=v.topicIDList,f=void 0===g?void 0:g,y=v.operationType;if(!(2!==m||Zt(h)&&Zt(f))){if([17,18,20].includes(y)){this._handleTopicSystemNotice(c);continue}Zt(h)||(c.to=h)}c.elements.operationType!==Ur&&(c.currentUser=this._groupModule.getMyUserID(),c.conversationType=I.CONV_SYSTEM,c.conversationID=I.CONV_SYSTEM,(o=new Yi(c)).setElement({type:I.MSG_GRP_SYS_NOTICE,content:t(t({},c.elements),{},{groupProfile:t({},c.groupProfile)})}),o.isSystemMessage=!0,(1===o.sequence&&1===o.random||2===o.sequence&&2===o.random)&&(o.sequence=yt(),o.random=yt(),o.generateMessageID(),He.l("".concat(this._n,".newSystemNoticeStoredAndSummary sequence and random maybe duplicated, regenerate. ID:").concat(o.ID))),this._groupModule.getModule(Fa).pushIntoNoticeResult(s,o)&&(n?l.unreadCount++:o.setIsRead(!0),l.subType=o.conversationSubType))}return l.lastMessage=s[s.length-1],{eventDataList:s.length>0?[l]:[],result:s}}},{key:"_clearGroupSystemNotice",value:function(){var e=this;this._getPendencyList().then((function(t){t.forEach((function(t){e.pendencyMap.set("".concat(t.from,"_").concat(t.groupID,"_").concat(t.to),t)}));var a=e._groupModule.getModule(Fa).getLocalMessageList(I.CONV_SYSTEM),n=[];a.forEach((function(t){var a=t.payload,o=a.operatorID,i=a.operationType,r=a.groupProfile;if(i===Pr){var s="".concat(o,"_").concat(r.groupID,"_").concat(r.to),l=e.pendencyMap.get(s);l&&ot(l.handled)&&0!==l.handled&&n.push(t)}})),e.deleteGroupSystemNotice({messageList:n})}))}},{key:"deleteGroupSystemNotice",value:function(e){var t=this,a="".concat(this._n,".deleteGroupSystemNotice");return lt(e.messageList)&&0!==e.messageList.length?(He.l("".concat(a," ")+e.messageList.map((function(e){return e.ID}))),this._groupModule.request({protocolName:yo,requestData:{messageListToDelete:e.messageList.map((function(e){return{from:I.CONV_SYSTEM,messageSeq:e.clientSequence,messageRandom:e.random}}))}}).then((function(){He.l("".concat(a," ok"));var n=t._groupModule.getModule(Fa);return e.messageList.forEach((function(e){n.deleteLocalMessage(e)})),Wi()})).catch((function(e){return He.e("".concat(a," error:"),e),er(e)}))):Qi()}},{key:"_getPendencyList",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.type,n=void 0===a?void 0:a,o=t.startTime,i=void 0===o?0:o,r=t.limit,s=void 0===r?20:r;return this._groupModule.request({protocolName:fo,requestData:{type:n,startTime:i,limit:s,handleAccount:this._groupModule.getMyUserID()}}).then((function(t){var a=t.data.pendencyList;return 0!==t.data.nextStartTime?e._getPendencyList({startTime:t.data.nextStartTime}).then((function(e){return[].concat(k(a),k(e))})):a}))}},{key:"getGroupApplicationList",value:function(){var e=this;return this._getPendencyList().then((function(t){return e._getPendencyList({type:I.GRP_COMMUNITY}).then((function(a){return t.push.apply(t,k(a)),e._handlePendencyResult(t)})).catch((function(a){return e._handlePendencyResult(t)}))}))}},{key:"_handlePendencyResult",value:function(e){var t=this,a=[];return e.forEach((function(e){t.pendencyMap.set("".concat(e.from,"_").concat(e.groupID,"_").concat(e.to),e),0===e.handled&&a.push({applicant:e.from,applicantNick:e.fromUserNickName,groupName:e.groupName,groupID:e.groupID,authentication:e.authentication,messageKey:e.time,applicationType:e.applicationType,userID:e.userID})})),Qi({applicationList:a})}},{key:"_onReceivedGroupSystemNotice",value:function(e){var t=this,a=e.result;e.isInstantMessage&&a.forEach((function(e){switch(e.payload.operationType){case 1:case 3:case 6:case 11:case 12:case 15:break;case 2:t._onApplyGroupRequestAgreed(e);break;case 4:t._onMemberKicked(e);break;case 5:t._onGroupDismissed(e);break;case 7:t._onInviteGroup(e);break;case 8:t._onQuitGroup(e);break;case 9:t._onSetManager(e);break;case 10:t._onDeleteManager(e);break;case 20:t._onMessageRemindTypeSynced(e);break;case 21:t._groupModule.onAVChatRoomMemberBanned(e)}}))}},{key:"_onApplyGroupRequestAgreed",value:function(e){var t=this,a=e.payload.groupProfile.groupID;this._groupModule.hasLocalGroup(a)||this._groupModule.getGroupProfile({groupID:a}).then((function(e){var a=e.data.group;if(a){t._groupModule.updateGroupMap([a]);var n=!a.isSupportTopic;t._groupModule.emitGroupListUpdate(!0,n)}}))}},{key:"_onMemberKicked",value:function(e){var t=e.payload.groupProfile.groupID;this._groupModule.hasLocalGroup(t)&&this._groupModule.deleteLocalGroupAndConversation(t)}},{key:"_onGroupDismissed",value:function(e){var t=e.payload.groupProfile.groupID;this._groupModule.hasLocalGroup(t)&&this._groupModule.deleteLocalGroupAndConversation(t);var a=this._groupModule._AVChatRoomHandler;a&&a.checkJoinedAVChatRoomByID(t)&&a.reset(t)}},{key:"_onInviteGroup",value:function(e){var t=this,a=e.payload.groupProfile.groupID;this._groupModule.hasLocalGroup(a)||this._groupModule.getGroupProfile({groupID:a}).then((function(e){var a=e.data.group;a&&(t._groupModule.updateGroupMap([a]),t._groupModule.emitGroupListUpdate())}))}},{key:"_onQuitGroup",value:function(e){var t=e.payload.groupProfile.groupID;this._groupModule.hasLocalGroup(t)&&this._groupModule.deleteLocalGroupAndConversation(t)}},{key:"_onSetManager",value:function(e){var t=e.payload.groupProfile,a=t.to,n=t.groupID,o=this._groupModule.getModule(Ua).getLocalGroupMemberInfo(n,a);o&&o.updateRole(I.GRP_MBR_ROLE_ADMIN)}},{key:"_onDeleteManager",value:function(e){var t=e.payload.groupProfile,a=t.to,n=t.groupID,o=this._groupModule.getModule(Ua).getLocalGroupMemberInfo(n,a);o&&o.updateRole(I.GRP_MBR_ROLE_MEMBER)}},{key:"_onMessageRemindTypeSynced",value:function(e){var t=e.payload.groupProfile.groupID,a=e.payload.messageRemindType;this._groupModule.getModule(Fa).onGroupMessageRemindTypeSynced({groupID:t,messageRemindType:a})}},{key:"_handleTopicSystemNotice",value:function(e){var t=e.groupProfile,a=t.groupID,n=t.topicID,o=e.elements,i=o.operationType,r=o.topicIDList,s=o.messageRemindType,l=this._groupModule.getModule(Ga);17===i?l.onTopicCreated({groupID:a,topicID:n}):18===i?l.onTopicDeleted({groupID:a,topicIDList:r}):20===i&&l.onTopicMessageRemindTypeUpdated({groupID:a,topicID:n,messageRemindType:s})}},{key:"reset",value:function(){this.pendencyMap.clear()}}]),e}(),Fr=["relayFlag"],qr=function(e){l(o,e);var a=y(o);function o(e){var t;return n(this,o),(t=a.call(this,e))._n="GroupModule",t._commonGroupHandler=null,t._AVChatRoomHandler=null,t._groupSystemNoticeHandler=null,t._commonGroupHandler=new wr(g(t)),t._groupAttributesHandler=new Dr(g(t)),t._groupCountersHandler=new Lr(g(t)),t._AVChatRoomHandler=new Br(g(t)),t._groupTipsHandler=new Nr(g(t)),t._groupSystemNoticeHandler=new Gr(g(t)),t.groupMap=new Map,t._unjoinedAVChatRoomList=new Map,t._receiptDetailCompleteMap=new Map,t.getInnerEmitterInstance().on(or,t._onCloudConfigUpdated,g(t)),t}return r(o,[{key:"_onCloudConfigUpdated",value:function(){var e=this.getCloudConfig("polling_interval"),t=this.getCloudConfig("polling_interval_plus"),a=this.getCloudConfig("polling_no_msg_count"),n=this.getCloudConfig("polling_simplified_msg");this._AVChatRoomHandler&&(He.l("".concat(this._n,"._onCloudConfigUpdated pollingInterval:").concat(e)+" pollingIntervalPlus:".concat(t," pollingNoMessageCount:").concat(a)+" pollingSimplifiedMessage:".concat(n)),this._AVChatRoomHandler.setPollingInterval(e),this._AVChatRoomHandler.setPollingIntervalPlus(t),this._AVChatRoomHandler.setPollingNoMessageCount(a),this._AVChatRoomHandler.setPollingSimplifiedMessage(n))}},{key:"onCheckTimer",value:function(e){this.isLoggedIn()&&(this._commonGroupHandler.onCheckTimer(e),this._groupTipsHandler.onCheckTimer(e))}},{key:"guardForAVChatRoom",value:function(e){var t=this;if(e.conversationType===I.CONV_GROUP){var a=It(e.to)?zt(e.to):e.to;return this.hasLocalGroup(a)?Qi():this.getGroupProfile({groupID:a}).then((function(n){var o=n.data.group.type;if(He.l("".concat(t._n,".guardForAVChatRoom. groupID:").concat(a," type:").concat(o)),o===I.GRP_AVCHATROOM){var i=fi.MESSAGE_SEND_FAIL_NOT_IN_AVCHATROOM;return er(new Ji({code:i,message:t.getErrorMessage(i,e.from,a),data:{message:e}}))}return Qi()}))}return Qi()}},{key:"checkJoinedAVChatRoomByID",value:function(e){return!!this._AVChatRoomHandler&&this._AVChatRoomHandler.checkJoinedAVChatRoomByID(e)}},{key:"onNewGroupMessage",value:function(e){this._commonGroupHandler&&this._commonGroupHandler.onNewGroupMessage(e)}},{key:"updateNextMessageSeq",value:function(e){var t=this;if(lt(e)){var a=this.getModule(Ga);e.forEach((function(e){var n=e.conversationID.replace(I.CONV_GROUP,"");It(n)&&a.updateLastMessage(n,e.lastMessage),t.groupMap.has(n)&&(t.groupMap.get(n).nextMessageSeq=e.lastMessage.sequence+1)}))}}},{key:"onNewGroupTips",value:function(e){this._groupTipsHandler&&this._groupTipsHandler.onNewGroupTips(e)}},{key:"onGroupMessageRevoked",value:function(e){this._commonGroupHandler&&this._commonGroupHandler.onGroupMessageRevoked(e)}},{key:"onNewGroupSystemNotice",value:function(e){this._groupSystemNoticeHandler&&this._groupSystemNoticeHandler.onNewGroupSystemNotice(e)}},{key:"onGroupMessageReadNotice",value:function(e){var t=this;e.dataList.forEach((function(e){var a=e.elements.groupMessageReadNotice;if(!ct(a)){var n=t.getModule(Fa);a.forEach((function(e){var a=e.groupID,o=e.topicID,i=void 0===o?void 0:o,r=e.lastMessageSeq;He.d("".concat(t._n,".onGroupMessageReadNotice groupID:").concat(a," lastMessageSeq:").concat(r));var s="".concat(I.CONV_GROUP).concat(a),l=!0;Zt(i)||(s="".concat(I.CONV_GROUP).concat(i),l=!1),n.updateIsReadAfterReadReport({conversationID:s,lastMessageSeq:r}),n.updateUnreadCount(s,l),n.clearGroupAtInfoList(s,l)}))}}))}},{key:"onReadReceiptList",value:function(e){var t=this;He.d("".concat(this._n,".onReadReceiptList options:"),JSON.stringify(e)),e.dataList.forEach((function(e){var a=e.groupProfile,n=e.elements,o=a.groupID,i=t.getModule(Fa),r=n.readReceiptList;i.updateReadReceiptInfo({groupID:o,readReceiptList:r})}))}},{key:"onGroupMessageModified",value:function(e){He.d("".concat(this._n,".onGroupMessageModified options:"),JSON.stringify(e));var a=this.getModule(Fa);e.dataList.forEach((function(e){a.onMessageModified(t(t({},e),{},{conversationType:I.CONV_GROUP,to:e.topicID?e.topicID:e.groupID}))}))}},{key:"deleteGroupSystemNotice",value:function(e){this._groupSystemNoticeHandler&&this._groupSystemNoticeHandler.deleteGroupSystemNotice(e)}},{key:"initGroupMap",value:function(e){this.groupMap.set(e.groupID,new fr(e))}},{key:"deleteGroup",value:function(e){this.groupMap.delete(e)}},{key:"updateGroupMap",value:function(e){var t,a=this,n=this.getModule(Fa);e.forEach((function(e){t=e.groupID,a.groupMap.has(t)?a.groupMap.get(t).updateGroup(e):(a.groupMap.set(t,new fr(e)),n.deleteGroupRomaingMessageInfo(t))}));var o,i=this.getMyUserID(),r=M(this.groupMap);try{for(r.s();!(o=r.n()).done;){var s=_(o.value,2)[1];s.selfInfo.userID=i,"Owner"===s.selfInfo.role&&(s.ownerID=i)}}catch(l){r.e(l)}finally{r.f()}this._setStorageGroupList()}},{key:"getStorageGroupList",value:function(){return this.getModule(za).getItem("groupMap")}},{key:"_setStorageGroupList",value:function(){var e=this.getLocalGroupList().filter((function(e){var t=e.type;return!Mt(t)})).filter((function(e){return!e.isSupportTopic})).slice(0,20).map((function(e){return{groupID:e.groupID,name:e.name,avatar:e.avatar,type:e.type}}));this.getModule(za).setItem("groupMap",e)}},{key:"getGroupMap",value:function(){return this.groupMap}},{key:"getLocalGroupList",value:function(){return k(this.groupMap.values())}},{key:"getLocalGroupProfile",value:function(e){return this.groupMap.get(e)}},{key:"sortLocalGroupList",value:function(){var e=k(this.groupMap).filter((function(e){var t=_(e,2);return t[0],!Zt(t[1].lastMessage)}));e.sort((function(e,t){return t[1].lastMessage.lastTime-e[1].lastMessage.lastTime})),this.groupMap=new Map(k(e))}},{key:"updateGroupLastMessage",value:function(e){this._commonGroupHandler&&this._commonGroupHandler.handleUpdateGroupLastMessage(e)}},{key:"emitGroupListUpdate",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=this.getLocalGroupList();if(e&&this.emitOuterEvent(S.GROUP_LIST_UPDATED),t){var n=JSON.parse(JSON.stringify(a));this.getModule(Fa).updateConversationGroupProfile(n)}}},{key:"patchGroupMessageRemindType",value:function(){var e=this.getLocalGroupList(),t=this.getModule(Fa),a=0;e.forEach((function(e){!0===t.patchMessageRemindType({ID:e.groupID,isC2CConversation:!1,messageRemindType:e.selfInfo.messageRemindType})&&(a+=1)})),He.l("".concat(this._n,".patchGroupMessageRemindType count:").concat(a))}},{key:"recomputeUnreadCount",value:function(){var e=this.getLocalGroupList(),t=this.getModule(Fa);e.forEach((function(e){var a=e.groupID,n=e.selfInfo,o=n.excludedUnreadSequenceList,i=n.readedSequence;if(lt(o)){var r=0;o.forEach((function(t){t>=i&&t<=e.nextMessageSeq-1&&(r+=1)})),r>=1&&t.recomputeGroupUnreadCount({conversationID:"".concat(I.CONV_GROUP).concat(a),count:r})}}))}},{key:"getMyNameCardByGroupID",value:function(e){var t=this.getLocalGroupProfile(e);return t?t.selfInfo.nameCard:""}},{key:"isPagingGetCompleted",value:function(){return!!this._commonGroupHandler&&this._commonGroupHandler.isPagingGetCompleted()}},{key:"getGroupList",value:function(e){return this._commonGroupHandler?this._commonGroupHandler.getGroupList(e):Qi()}},{key:"getGroupProfile",value:function(e){var t=this,a="".concat(this._n,".").concat("getGroupProfile"),n=new Vi("getGroupProfile"),o=e.groupID,i=e.groupCustomFieldFilter;He.l("".concat(a," groupID:").concat(o));var r={groupIDList:[o],responseFilter:{groupBaseInfoFilter:["Type","Name","Introduction","Notification","FaceUrl","Owner_Account","CreateTime","InfoSeq","LastInfoTime","LastMsgTime","MemberNum","MaxMemberNum","ApplyJoinOption","NextMsgSeq","ShutUpAllMember","InviteJoinOption"],groupCustomFieldFilter:i,memberInfoFilter:["Role","JoinTime","MsgSeq","MsgFlag","NameCard"]}};return this.getGroupProfileAdvance(r).then((function(e){var i,r=e.data,s=r.successGroupList,l=r.failureGroupList;return He.l("".concat(a," ok")),l.length>0?er(l[0]):(Mt(s[0].type)&&!t.hasLocalGroup(o)?i=new fr(s[0]):(t.updateGroupMap(s),i=t.getLocalGroupProfile(o)),i.isSupportTopic||t.getModule(Fa).updateConversationGroupProfile([i]),n.setNetworkType(t.getNetworkType()).setMessage("groupID:".concat(o," type:").concat(i.type," muteAllMembers:").concat(i.muteAllMembers," ownerID:").concat(i.ownerID)).end(),Wi({group:i}))})).catch((function(o){return t.probeNetwork().then((function(t){var a=_(t,2),i=a[0],r=a[1];n.setError(o,i,r).setMessage("groupID:".concat(e.groupID)).end()})),He.e("".concat(a," failed. error:"),o),er(o)}))}},{key:"getGroupProfileAdvance",value:function(e){var a="".concat(this._n,".getGroupProfileAdvance"),n=e.groupIDList;lt(n)&&n.length>50&&(this.outputWarning("GetGroupProfileLimit"),n.length=50);var o=[],i=[];n.forEach((function(e){St({groupID:e})?i.push(e):o.push(e)}));var r=[];if(o.length>0){var s=this._getGroupProfileAdvance(t(t({},e),{},{groupIDList:o}));r.push(s)}if(i.length>0){var l=this._getGroupProfileAdvance(t(t({},e),{},{groupIDList:i,relayFlag:o.length>0}));r.push(l)}return Promise.all(r).then((function(e){var t=[],a=[];return e.forEach((function(e){t.push.apply(t,k(e.successGroupList)),a.push.apply(a,k(e.failureGroupList))})),Wi({successGroupList:t,failureGroupList:a})})).catch((function(e){return He.e("".concat(a," failed. error:"),e),er(e)}))}},{key:"_getGroupProfileAdvance",value:function(e){var t=this,a=e.relayFlag,n=void 0!==a&&a,o=v(e,Fr);return this.request({protocolName:Jn,requestData:o}).then((function(e){He.l("".concat(t._n,"._getGroupProfileAdvance ok."));var a=e.data.groups;return{successGroupList:a.filter((function(e){return ct(e.errorCode)||0===e.errorCode})),failureGroupList:a.filter((function(e){return e.errorCode&&0!==e.errorCode})).map((function(e){return new Ji({code:e.errorCode,message:e.errorInfo,data:{groupID:e.groupID}})}))}})).catch((function(t){return n&&St({groupID:e.groupIDList[0]})?{successGroupList:[],failureGroupList:[]}:er(t)}))}},{key:"createGroup",value:function(e){var a=this,n="".concat(this._n,".").concat("createGroup"),o=e.type,i=e.groupID;if(e.name&&!1===this._filterProfanity("name",e))return er({code:fi.PROFANITY_FOUND});if(e.introduction&&!1===this._filterProfanity("introduction",e))return er({code:fi.PROFANITY_FOUND});if(e.notification&&!1===this._filterProfanity("notification",e))return er({code:fi.PROFANITY_FOUND});if(!["Public","Private","ChatRoom","AVChatRoom","Community"].includes(o))return er({code:fi.ILLEGAL_GROUP_TYPE});if(!St({type:o})){if(!Zt(i)&&St({groupID:i}))return er({code:fi.ILLEGAL_GROUP_ID});e.isSupportTopic=void 0}if(Mt(o)&&!ct(e.memberList)&&e.memberList.length>0&&(e.memberList=void 0),this._canIUseJoinOption(o)||ct(e.joinOption)||(e.joinOption=void 0),St({type:o})){if(!Zt(i)&&!St({groupID:i}))return er({code:fi.ILLEGAL_GROUP_ID});e.isSupportTopic=!0===e.isSupportTopic?1:0}var r=new Vi("createGroup");He.l("".concat(n," options:"),e);var s=null,l=[];return this.request({protocolName:Zn,requestData:t(t({},e),{},{ownerID:this.getMyUserID(),webPushFlag:1})}).then((function(o){var i=o.data,c=i.groupID,u=i.overLimitUserIDList,d=void 0===u?[]:u;if(s=c,l=d,r.setNetworkType(a.getNetworkType()).setMessage("groupType:".concat(e.type," groupID:").concat(c," overLimitUserIDList=").concat(d)).end(),He.l("".concat(n," ok groupID:").concat(c," overLimitUserIDList:"),d),e.type===I.GRP_AVCHATROOM)return a.getGroupProfile({groupID:c});if(e.type===I.GRP_COMMUNITY&&1===e.isSupportTopic)return a.getGroupProfile({groupID:c});Zt(e.memberList)||Zt(d)||(e.memberList=e.memberList.filter((function(e){return-1===d.indexOf(e.userID)}))),a.updateGroupMap([t(t({},e),{},{groupID:c})]);var m=a.getModule(Aa),p=m.createCustomMessage({to:c,conversationType:I.CONV_GROUP,payload:{data:"group_create",extension:a.isIntl()?"".concat(a.getMyUserID()," created a group"):"".concat(a.getMyUserID(),"创建群组")}});return m.sendMessageInstance(p),a.emitGroupListUpdate(),a.getGroupProfile({groupID:c})})).then((function(e){var t=e.data.group,a=t.selfInfo,n=a.nameCard,o=a.joinTime;return t.updateSelfInfo({nameCard:n,joinTime:o,messageRemindType:I.MSG_REMIND_ACPT_AND_NOTE,role:I.GRP_MBR_ROLE_OWNER}),Wi({group:t,overLimitUserIDList:l})})).catch((function(o){if(r.setMessage("groupType:".concat(e.type)),a.probeNetwork().then((function(e){var t=_(e,2),a=t[0],n=t[1];r.setError(o,a,n).end()})),10010===o.code||10007===o.code){a.updateGroupMap([t(t({},e),{},{groupID:s})]);var i=a.getLocalGroupProfile(s);return He.l("".concat(n," success, but failed to get group profile.")),Wi({group:i,overLimitUserIDList:l})}return He.e("".concat(n," failed. error:"),o),er(o)}))}},{key:"dismissGroup",value:function(e){var t=this,a="".concat(this._n,".").concat("dismissGroup");if(this.hasLocalGroup(e)&&this.getLocalGroupProfile(e).type===I.GRP_WORK)return er(new Ji({code:fi.CANNOT_DISMISS_WORK}));var n=new Vi("dismissGroup");return n.setMessage("groupID:".concat(e)),He.l("".concat(a," groupID:").concat(e)),this.request({protocolName:Xn,requestData:{groupID:e}}).then((function(){return n.setNetworkType(t.getNetworkType()).end(),He.l("".concat(a," ok")),t.deleteLocalGroupAndConversation(e),t.checkJoinedAVChatRoomByID(e)&&t._AVChatRoomHandler.reset(e),t._groupAttributesHandler.deleteLocalGroupAttributes(e),Wi({groupID:e})})).catch((function(e){return t.probeNetwork().then((function(t){var a=_(t,2),o=a[0],i=a[1];n.setError(e,o,i).end()})),He.e("".concat(a," failed. error:"),e),er(e)}))}},{key:"updateGroupProfile",value:function(e){var t=this,a="".concat(this._n,".").concat("updateGroupProfile");if(this.hasLocalGroup(e.groupID)){var n=this.getLocalGroupProfile(e.groupID).type;this._canIUseJoinOption(n)||ct(e.joinOption)||(He.w("".concat(a," joinOption is unavailable for Work/Meeting/AVChatRoom")),e.joinOption=void 0)}if(ct(e.muteAllMembers)||(e.muteAllMembers?e.muteAllMembers="On":e.muteAllMembers="Off"),e.name&&!1===this._filterProfanity("name",e))return er({code:fi.PROFANITY_FOUND});if(e.introduction&&!1===this._filterProfanity("introduction",e))return er({code:fi.PROFANITY_FOUND});if(e.notification&&!1===this._filterProfanity("notification",e))return er({code:fi.PROFANITY_FOUND});var o=new Vi("updateGroupProfile");return o.setMessage(JSON.stringify(e)),He.l("".concat(a," groupID:").concat(e.groupID)),this.request({protocolName:Qn,requestData:e}).then((function(){return o.setNetworkType(t.getNetworkType()).end(),He.l("".concat(a," ok")),t.hasLocalGroup(e.groupID)&&(t.groupMap.get(e.groupID).updateGroup(e),t._setStorageGroupList()),Wi({group:t.groupMap.get(e.groupID)})})).catch((function(e){return t.probeNetwork().then((function(t){var a=_(t,2),n=a[0],i=a[1];o.setError(e,n,i).end()})),He.l("".concat(a," failed. error:"),e),er(e)}))}},{key:"_filterProfanity",value:function(e,t){var a=this.getModule(rn);if(!a)return!0;var n=a.filterText(t[e],J),o=n.isAllowedToSend,i=n.modifiedText;return!0===o&&(t[e]=i,!0)}},{key:"joinGroup",value:function(e){var t=this,a=e.groupID,n=e.type,o="".concat(this._n,".joinGroup");if(n===I.GRP_WORK)return er({code:fi.CANNOT_JOIN_WORK});if(this.deleteUnjoinedAVChatRoom(a),this.hasLocalGroup(a)){if(!this.isLoggedIn())return Qi({status:I.JOIN_STATUS_ALREADY_IN_GROUP});var i=new Vi("applyJoinGroup");return this.getGroupProfile({groupID:a}).then((function(){return i.setNetworkType(t.getNetworkType()).setMessage("groupID:".concat(a," joinedStatus:").concat(I.JOIN_STATUS_ALREADY_IN_GROUP)).end(),Qi({status:I.JOIN_STATUS_ALREADY_IN_GROUP})})).catch((function(n){return i.setNetworkType(t.getNetworkType()).setMessage("groupID:".concat(a," unjoined")).end(),He.w("".concat(o," ").concat(a," was unjoined, now join!")),t.groupMap.delete(a),t.applyJoinGroup(e)}))}return He.l("".concat(o," groupID:").concat(a)),this.isLoggedIn()?this.applyJoinGroup(e):this._AVChatRoomHandler.joinWithoutAuth(e)}},{key:"applyJoinGroup",value:function(e){var a=this,n="".concat(this._n,".").concat("applyJoinGroup"),o=e.groupID;if(!Zt(e.applyMessage)&&!1===this._filterProfanity("applyMessage",e))return er({code:fi.PROFANITY_FOUND});var i=new Vi("applyJoinGroup"),r=t({},e),s=this.canIUse(H.AVCHATROOM_HISTORY_MSG);return s&&(r.historyMessageFlag=1),this.getModule(Fa).deleteTopicRoamingMessageInfo(o),this.request({protocolName:eo,requestData:r}).then((function(e){var t=e.data,r=t.joinedStatus,l=t.longPollingKey,c=t.startSeq,u=t.avChatRoomFlag,d=t.avChatRoomKey,m=t.messageList,p="groupID:".concat(o," joinedStatus:").concat(r," longPollingKey:").concat(l," startSeq:").concat(c)+" avChatRoomFlag:".concat(u," canGetAVChatRoomHistoryMessage:").concat(s,",")+" history message count:".concat(Zt(m)?0:m.length);switch(i.setNetworkType(a.getNetworkType()).setMessage("".concat(p)).end(),He.l("".concat(n," ok. ").concat(p)),r){case Ze:return Wi({status:Ze});case Je:return a.getGroupProfile({groupID:o}).then((function(e){var t=e.data.group;return a._handleJoinResult({group:t,avChatRoomFlag:u,longPollingKey:l,startSeq:c,avChatRoomKey:d,messageList:m})})).catch((function(){var e=new fr({groupID:o});return a._handleJoinResult({group:e,avChatRoomFlag:u,longPollingKey:l,startSeq:c,avChatRoomKey:d,messageList:m})}));default:var h=new Ji({code:fi.JOIN_GROUP_FAIL});return He.e("".concat(n," failed. error:"),h),er(h)}})).catch((function(e){return i.setMessage("groupID:".concat(o)),a.probeNetwork().then((function(t){var a=_(t,2),n=a[0],o=a[1];i.setError(e,n,o).end()})),He.e("".concat(n," failed. error:"),e),er(e)}))}},{key:"_handleJoinResult",value:function(e){var t,a=this,n=e.group,o=e.avChatRoomFlag,i=e.longPollingKey,r=e.startSeq,s=e.avChatRoomKey,l=e.messageList,c=n.groupID;return 1===o?(this.getModule(Fa).setCompleted("".concat(I.CONV_GROUP).concat(c)),this._groupAttributesHandler.initGroupAttributesCache({groupID:c,avChatRoomKey:s}),this._groupCountersHandler.initGroupCountersCache({groupID:c,avChatRoomKey:s}),(t=ct(i)?this._AVChatRoomHandler.handleJoinResult({group:n}):this._AVChatRoomHandler.startRunLoop({group:n,longPollingKey:i,startSeq:r})).then((function(){a._onAVChatRoomHistoryMessage(l)})),t):(this.emitGroupListUpdate(!0,!1),Wi({status:Je,group:n}))}},{key:"quitGroup",value:function(e){var t=this,a="".concat(this._n,".").concat("quitGroup");He.l("".concat(a," groupID:").concat(e));var n=this.checkJoinedAVChatRoomByID(e);if(!n&&!this.hasLocalGroup(e))return er({code:fi.MEMBER_NOT_IN_GROUP});if(n&&!this.isLoggedIn())return He.l("".concat(a," anonymously ok. groupID:").concat(e)),this.deleteLocalGroupAndConversation(e),this._AVChatRoomHandler.reset(e),Qi({groupID:e});var o=new Vi("quitGroup");return o.setMessage("groupID:".concat(e)),this.request({protocolName:ao,requestData:{groupID:e}}).then((function(){return o.setNetworkType(t.getNetworkType()).end(),He.l("".concat(a," ok")),t.deleteLocalGroupAndConversation(e),n&&t._AVChatRoomHandler.reset(e),t._groupAttributesHandler.deleteLocalGroupAttributes(e),Wi({groupID:e})})).catch((function(e){return t.probeNetwork().then((function(t){var a=_(t,2),n=a[0],i=a[1];o.setError(e,n,i).end()})),He.e("".concat(a," failed. error:"),e),er(e)}))}},{key:"searchGroupByID",value:function(e){var t=this,a="".concat(this._n,".").concat("searchGroupByID"),n={groupIDList:[e]},o=new Vi("searchGroupByID");return o.setMessage("groupID:".concat(e)),He.l("".concat(a," groupID:").concat(e)),this.request({protocolName:no,requestData:n}).then((function(e){var n=e.data.groupProfile;if(0!==n[0].errorCode)throw new Ji({code:n[0].errorCode,message:n[0].errorInfo});return o.setNetworkType(t.getNetworkType()).end(),He.l("".concat(a," ok")),Wi({group:new fr(n[0])})})).catch((function(e){return t.probeNetwork().then((function(t){var a=_(t,2),n=a[0],i=a[1];o.setError(e,n,i).end()})),He.w("".concat(a," failed. error:"),e),er(e)}))}},{key:"changeGroupOwner",value:function(e){var t=this,a="".concat(this._n,".").concat("changeGroupOwner");if(this.hasLocalGroup(e.groupID)&&this.getLocalGroupProfile(e.groupID).type===I.GRP_AVCHATROOM)return er({code:fi.CANNOT_CHANGE_OWNER_IN_AVCHATROOM});if(e.newOwnerID===this.getMyUserID())return er({code:fi.CANNOT_CHANGE_OWNER_TO_SELF});var n=new Vi("changeGroupOwner");return n.setMessage("groupID:".concat(e.groupID," newOwnerID:").concat(e.newOwnerID)),He.l("".concat(a," groupID:").concat(e.groupID)),this.request({protocolName:oo,requestData:e}).then((function(){n.setNetworkType(t.getNetworkType()).end(),He.l("".concat(a," ok"));var o=e.groupID,i=e.newOwnerID;t.groupMap.get(o).ownerID=i;var r=t.getModule(Ua).getLocalGroupMemberList(o);if(r instanceof Map){var s=r.get(t.getMyUserID());ct(s)||(s.updateRole("Member"),t.groupMap.get(o).selfInfo.role="Member");var l=r.get(i);ct(l)||l.updateRole("Owner")}return t.emitGroupListUpdate(!0,!1),Wi({group:t.groupMap.get(o)})})).catch((function(e){return t.probeNetwork().then((function(t){var a=_(t,2),o=a[0],i=a[1];n.setError(e,o,i).end()})),He.e("".concat(a," failed. error:"),e),er(e)}))}},{key:"getGroupApplicationList",value:function(){return this._groupSystemNoticeHandler.getGroupApplicationList()}},{key:"handleGroupApplication",value:function(e){var t,a,n,o,i,r=this,s="".concat(this._n,".").concat("handleGroupApplication"),l=e.handleAction,c=e.handleMessage,u=e.message,d=e.application;u?(t=u.payload.operatorID,a=u.payload.groupProfile.groupID,n=u.payload.authentication,o=u.payload.messageKey):d&&(t=d.applicant,a=d.groupID,n=d.authentication,o=d.messageKey);var m=io;d&&2===d.applicationType&&(m=ro,i=d.userID);var p=new Vi("handleGroupApplication");return p.setMessage("groupID:".concat(a)),He.l("".concat(s," groupID:").concat(a)),this.request({protocolName:m,requestData:{handleAction:l,handleMessage:c,applicant:t,invitee:i,groupID:a,authentication:n,messageKey:o}}).then((function(){return p.setNetworkType(r.getNetworkType()).end(),He.l("".concat(s," ok")),u&&r._groupSystemNoticeHandler.deleteGroupSystemNotice({messageList:[e.message]}),Wi({group:r.getLocalGroupProfile(a)})})).catch((function(e){return r.probeNetwork().then((function(t){var a=_(t,2),n=a[0],o=a[1];p.setError(e,n,o).end()})),He.e("".concat(s," failed. error"),e),er(e)}))}},{key:"handleGroupInvitation",value:function(e){var a=this,n="".concat(this._n,".").concat("handleGroupInvitation"),o=e.message.payload,i=o.groupProfile.groupID,r=o.authentication,s=o.messageKey,l=o.operatorID,c=e.handleAction,u=new Vi("handleGroupInvitation");return u.setMessage("groupID:".concat(i," inviter:").concat(l," handleAction:").concat(c)),He.l("".concat(n," groupID:").concat(i," inviter:").concat(l," handleAction:").concat(c)),this.request({protocolName:so,requestData:t(t({},e),{},{inviter:l,groupID:i,authentication:r,messageKey:s})}).then((function(){return u.setNetworkType(a.getNetworkType()).end(),He.l("".concat(n," ok")),a._groupSystemNoticeHandler.deleteGroupSystemNotice({messageList:[e.message]}),Wi({group:a.getLocalGroupProfile(i)})})).catch((function(e){return a.probeNetwork().then((function(t){var a=_(t,2),n=a[0],o=a[1];u.setError(e,n,o).end()})),He.e("".concat(n," failed. error"),e),er(e)}))}},{key:"getGroupOnlineMemberCount",value:function(e){return this._AVChatRoomHandler?this._AVChatRoomHandler.checkJoinedAVChatRoomByID(e)?this._AVChatRoomHandler.getGroupOnlineMemberCount(e):Qi({memberCount:0}):er({code:fi.CANNOT_FIND_MODULE})}},{key:"hasLocalGroup",value:function(e){return this.groupMap.has(e)}},{key:"deleteLocalGroupAndConversation",value:function(e){var t=this.checkJoinedAVChatRoomByID(e);if(He.l("".concat(this._n,".deleteLocalGroupAndConversation isJoinedAVChatRoom:").concat(t)),t&&this.getModule(Fa).deleteLocalConversation("".concat(I.CONV_GROUP).concat(e)),St({groupID:e})){var a=this.getLocalGroupProfile(e);a&&!0===a.isSupportTopic&&this.getModule(Ga).deleteTopicListInCommunity(e)}this._deleteLocalGroup(e),this.emitGroupListUpdate(!0,!1)}},{key:"_deleteLocalGroup",value:function(e){this.groupMap.delete(e),this.getModule(Ua).deleteGroupMemberList(e),this._setStorageGroupList()}},{key:"sendMessage",value:function(e,t){if(lt(e._receiverList)&&e._receiverList.length>0&&!this.canIUse(H.MSG_TO_SPECIFIED_GRP_MBR))return er({code:fi.CANNOT_USE_COMMERCIAL_ABILITY});var a=this.createGroupMessagePack(e,t);return this.request(a)}},{key:"createGroupMessagePack",value:function(e,t){var a=null;t&&t.offlinePushInfo&&(a=t.offlinePushInfo);var n="";it(e.cloudCustomData)&&e.cloudCustomData.length>0&&(n=e.cloudCustomData);var o=[];if(st(t)&&st(t.messageControlInfo)){var i=t.messageControlInfo,r=i.excludedFromUnreadCount,s=i.excludedFromLastMessage,l=i.excludedFromContentModeration;!0===r&&o.push("NoUnread"),!0===s&&o.push("NoLastMsg"),!0===l&&o.push("NoMsgCheck")}var c=void 0;lt(e._receiverList)&&e._receiverList.length>0&&(c=e._receiverList,e._receiverList.length>50&&(c=e._receiverList.slice(0,50),this.outputWarning("ReceiverListLimit")));var u=this.isOnlineMessage(e,t)?1:0,d=e.getGroupAtInfoList(),m={fromAccount:this.getMyUserID(),groupID:e.to,msgBody:e.getElements(),cloudCustomData:n,random:e.random,priority:e.priority,clientSequence:e.clientSequence,groupAtInfo:e.type!==I.MSG_TEXT||Zt(d)?void 0:d,onlineOnlyFlag:u,clientTime:e.clientTime,offlinePushInfo:a?{pushFlag:!0===a.disablePush?1:0,title:a.title||"",desc:a.description||"",ext:a.extension||"",apnsInfo:{badgeMode:!0===a.ignoreIOSBadge?1:0,isVoipPush:this._isVoipPush(a)},androidInfo:{OPPOChannelID:a.androidOPPOChannelID||""}}:void 0,messageControlInfo:0===u?o:void 0,needReadReceipt:!0!==e.needReadReceipt||this.isMessageFromOrToAVChatroom(e.to)?0:1,receiverList:c,isSupportExtension:!0===e.isSupportExtension?1:0};return It(e.to)&&(m.groupID=zt(e.to),m.topicID=e.to),{protocolName:_n,tjgID:this.generateTjgID(e),requestData:m}}},{key:"_isVoipPush",value:function(e){var t=void 0;return ct(e.disableVoipPush)||(t=!1===e.disableVoipPush?1:0),t}},{key:"revokeMessage",value:function(e){var t={groupID:e.to,msgSeqList:[{msgSeq:e.sequence}]};return It(e.to)&&(t.groupID=zt(e.to),t.topicID=e.to),this.request({protocolName:lo,requestData:t})}},{key:"deleteMessage",value:function(e){var t=e.to,a=e.keyList;He.l("".concat(this._n,".deleteMessage groupID:").concat(t," count:").concat(a.length));var n={groupID:t,deleter:this.getMyUserID(),keyList:a};return It(t)&&(n.groupID=zt(t),n.topicID=t),this.request({protocolName:xo,requestData:n})}},{key:"modifyRemoteMessage",value:function(e){var t=e.to,a=e.sequence,n=e.payload,o=e.type,i=e.version,r=void 0===i?0:i,s=e.cloudCustomData,l=t,c=void 0;It(t)&&(l=zt(t),c=t);var u=void 0;return $t(o)&&(u=[]).push({type:o,content:n}),this.request({protocolName:No,requestData:{groupID:l,topicID:c,sequence:a,version:r,elements:u,cloudCustomData:s}})}},{key:"getRoamingMessage",value:function(e){var t=this,a="".concat(this._n,".getRoamingMessage"),n=e.conversationID,o=e.groupID,i=e.sequence,r=new Vi("getGroupRoamingMessages"),s=0,l=void 0;return It(o)&&(o=zt(l=o)),this._computeLastSequence({groupID:o,topicID:l,sequence:i}).then((function(e){return s=e,He.l("".concat(a," groupID:").concat(o," startSequence:").concat(s)),t.request({protocolName:mo,requestData:{groupID:o,count:21,sequence:s,topicID:l}})})).then((function(e){var i=e.data,c=i.messageList,u=i.complete,d=i.invisibleSequenceList,m=void 0===d?[]:d;ct(c)?He.l("".concat(a," ok. complete:").concat(u," but messageList is undefined!")):He.l("".concat(a," ok. complete:").concat(u," count:").concat(c.length));var p=t._getMinSequence(m,c)-1;r.setNetworkType(t.getNetworkType()).setMessage("groupID:".concat(o," topicID:").concat(l," startSequence:").concat(s," complete:").concat(u," nextSequence:").concat(p)).end();var h=t.getModule(Fa),v=[];return Zt(c)||(h.updateRoamingMessageSequence(n,p),v=h.onRoamingMessage(c,n),h.updateIsRead(n),h.patchConversationLastMessage(n)),(2===u||p<=1)&&(h.setCompleted(n),p=""),He.l("".concat(a," nextReqID:").concat(p,", stored message count:").concat(v.length,", invisible sequence count:").concat(m.length)),{nextReqID:p+"",storedMessageList:v}})).catch((function(e){return t.probeNetwork().then((function(t){var a=_(t,2),n=a[0],i=a[1];r.setError(e,n,i).setMessage("groupID:".concat(o," topicID:").concat(l," startSequence:").concat(s)).end()})),He.w("".concat(a," failed. error:"),e),er(e)}))}},{key:"_getGroupIDOfMessage",value:function(e){return e.conversationID.replace(I.CONV_GROUP,"")}},{key:"_getMinSequence",value:function(e,t){var a=0;Zt(t)||(a=t[t.length-1].sequence);var n=0;return Zt(e)||(n=e[e.length-1]),He.l("".concat(this._n,"._getMinSequence minVisibleSequence:").concat(a," minInvisibleSequence:").concat(n)),n>0&&n<a?n:a}},{key:"getReadReceiptList",value:function(e){var t=this,a="".concat(this._n,".").concat("getReadReceiptList"),n=this._getGroupIDOfMessage(e[0]),o=this.getMyUserID(),i=e.filter((function(e){return e.from===o&&!0===e.needReadReceipt})).map((function(e){return{sequence:e.sequence}}));if(He.l("".concat(a," groupID:").concat(n," sequenceList:").concat(JSON.stringify(i))),0===i.length)return Qi({messageList:e});var r=new Vi("getReadReceiptList");return r.setMessage("groupID:".concat(n)),this.request({protocolName:po,requestData:{groupID:n,sequenceList:i}}).then((function(t){r.end(),He.l("".concat(a," ok"));var n=t.data.readReceiptList;return lt(n)&&n.forEach((function(t){e.forEach((function(e){0===t.code&&t.sequence===e.sequence&&(e.readReceiptInfo.readCount=t.readCount,e.readReceiptInfo.unreadCount=t.unreadCount)}))})),Wi({messageList:e})})).catch((function(e){return t.probeNetwork().then((function(t){var a=_(t,2),n=a[0],o=a[1];r.setError(e,n,o).end()})),He.w("".concat(a," failed. error:"),e),er(e)}))}},{key:"sendReadReceipt",value:function(e){var t=this,a="".concat(this._n,".").concat("sendReadReceipt"),n=this._getGroupIDOfMessage(e[0]),o=new Vi("sendReadReceipt");o.setMessage("groupID:".concat(n));var i=this.getMyUserID(),r=e.filter((function(e){return e.from!==i&&!0===e.needReadReceipt})).map((function(e){return{sequence:e.sequence}}));return 0===r.length?er({code:fi.READ_RECEIPT_MESSAGE_LIST_EMPTY}):(He.l("".concat(a,". sequenceList:").concat(JSON.stringify(r))),this.request({protocolName:ho,requestData:{groupID:n,sequenceList:r}}).then((function(e){return o.end(),He.l("".concat(a," ok")),Wi()})).catch((function(e){return t.probeNetwork().then((function(t){var a=_(t,2),n=a[0],i=a[1];o.setError(e,n,i).end()})),He.w("".concat(a," failed. error:"),e),er(e)})))}},{key:"getReadReceiptDetail",value:function(e){var t=this,a=e.message,n=e.filter,o=e.cursor,i=e.count,r=this._getGroupIDOfMessage(a),s=a.ID,l=a.sequence,c="".concat(this._n,".").concat("getReadReceiptDetail"),u=this._receiptDetailCompleteMap.get(s)||!1,d=0!==n&&1!==n?0:n,m=it(o)?o:"",p=!ot(i)||i<=0||i>=100?100:i,h="groupID:".concat(r," sequence:").concat(l," cursor:").concat(m," filter:").concat(d," completeFlag:").concat(u);He.l("".concat(c," ").concat(h));var v={cursor:"",isCompleted:!1,messageID:s,unreadUserIDList:[],readUserIDList:[]},g=new Vi("getReadReceiptDetail");return g.setMessage(h),this.request({protocolName:go,requestData:{groupID:r,sequence:l,flag:d,cursor:m,count:p}}).then((function(e){g.end();var a=e.data,n=a.cursor,o=a.isCompleted,i=a.unreadUserIDList,r=a.readUserIDList;return v.cursor=n,1===o&&(v.isCompleted=!0,t._receiptDetailCompleteMap.set(s,!0)),0===d?v.readUserIDList=r.map((function(e){return e.userID})):1===d&&(v.unreadUserIDList=i.map((function(e){return e.userID}))),He.l("".concat(c," ok")),Wi(v)})).catch((function(e){return t.probeNetwork().then((function(t){var a=_(t,2),n=a[0],o=a[1];g.setError(e,n,o).end()})),He.w("".concat(c," failed. error:"),e),er(e)}))}},{key:"getRoamingMessagesHopping",value:function(e){var t=this,a="".concat(this._n,".getRoamingMessagesHopping"),n=new Vi("getGroupRoamingMessagesHopping"),o=e.groupID,i=e.count,r=e.sequence,s=e.direction,l=r;1===s&&(l=r+i-1);var c=void 0;It(o)&&(o=zt(c=o));var u="".concat(c?"topicID:".concat(c):"groupID:".concat(o)," sequence:").concat(r," direction:").concat(s);return He.l("".concat(a," ").concat(u)),this.request({protocolName:mo,requestData:{groupID:o,topicID:c,count:i,sequence:l}}).then((function(o){var i=o.data,l=i.messageList,c=i.complete,d="complete:".concat(c," count:").concat(l?l.length:0);if(He.l("".concat(a," ok. ").concat(d)),n.setNetworkType(t.getNetworkType()).setMessage("".concat(u," ").concat(d)).end(),2===c||Zt(l)){var m=t._computeResult();return Wi(m)}var p="".concat(I.CONV_GROUP).concat(e.groupID),h=t.getModule(Fa).onRoamingMessage(l,p,!1),v=t._computeResult({direction:s,sequence:r,remoteMessageList:l,processedMessageList:h});return Wi(v)})).catch((function(e){return t.probeNetwork().then((function(t){var a=_(t,2),s=a[0],l=a[1];n.setError(e,s,l).setMessage("groupID:".concat(o," sequence:").concat(r," count:").concat(i)).end()})),He.w("".concat(a," failed. error:"),e),er(e)}))}},{key:"_computeResult",value:function(e){var t={messageList:[],isCompleted:!1,nextMessageSeq:""};if(ct(e))return t.isCompleted=!0,t;var a=e.direction,n=e.sequence,o=e.remoteMessageList,i=void 0===o?[]:o,r=e.processedMessageList,s=void 0===r?[]:r,l=i.length;return 1===a?(t.nextMessageSeq=i[0].sequence+1,s.forEach((function(e){e.sequence>=n&&t.messageList.push(e)})),0===t.messageList.length&&i[0].sequence<n&&(t.isCompleted=!0,t.nextMessageSeq=""),t):(t.nextMessageSeq=i[l-1].sequence-1,t.messageList=k(s),0===t.nextMessageSeq&&(t.isCompleted=!0,t.nextMessageSeq=""),t)}},{key:"setMessageRead",value:function(e){var t=this,a=e.conversationID,n=e.lastMessageSeq,o="".concat(this._n,".setMessageRead");He.l("".concat(o," conversationID:").concat(a," lastMessageSeq:").concat(n)),ot(n)||this.outputWarning("DoNotModifyLastSeq");var i=new Vi("setGroupMessageRead");i.setMessage("".concat(a,"-").concat(n));var r=a.replace(I.CONV_GROUP,""),s=void 0;return It(r)&&(r=zt(s=r)),this.request({protocolName:co,requestData:{groupID:r,topicID:s,messageReadSeq:n}}).then((function(){i.setNetworkType(t.getNetworkType()).end(),He.l("".concat(o," ok."));var e=t.getModule(Fa);e.updateIsReadAfterReadReport({conversationID:a,lastMessageSeq:n});var l=!0;if(!ct(s)){l=!1;var c=t.getModule(Ga).getLocalTopic(r,s);c&&c.updateSelfInfo({readedSequence:n})}return e.updateUnreadCount(a,l),Wi()})).catch((function(e){return t.probeNetwork().then((function(t){var a=_(t,2),n=a[0],o=a[1];i.setError(e,n,o).end()})),He.l("".concat(o," failed. error:"),e),er(e)}))}},{key:"_computeLastSequence",value:function(e){var t=e.groupID,a=e.topicID,n=void 0===a?void 0:a,o=e.sequence;return o>0?Promise.resolve(o):ct(n)||this.hasLocalGroup(t)?ct(n)?this.getGroupLastSequence(t):this.getTopicLastSequence({groupID:t,topicID:n}):Promise.resolve(0)}},{key:"getGroupLastSequence",value:function(e){var t=this,a="".concat(this._n,".").concat("getGroupLastSequence"),n=new Vi("getGroupLastSequence"),o=0,i="";if(this.hasLocalGroup(e)){var r=this.getLocalGroupProfile(e),s=r.lastMessage;if(s.lastSequence>0&&!1===s.onlineOnlyFlag)return o=s.lastSequence,i="got lastSequence:".concat(o," from local group profile[lastMessage.lastSequence]. groupID:").concat(e),He.l("".concat(a," ").concat(i)),n.setNetworkType(this.getNetworkType()).setMessage("".concat(i)).end(),Promise.resolve(o);if(r.nextMessageSeq>1)return o=r.nextMessageSeq-1,i="got lastSequence:".concat(o," from local group profile[nextMessageSeq]. groupID:").concat(e),He.l("".concat(a," ").concat(i)),n.setNetworkType(this.getNetworkType()).setMessage("".concat(i)).end(),Promise.resolve(o)}var l="GROUP".concat(e),c=this.getModule(Fa).getLocalConversation(l);if(c&&c.lastMessage.lastSequence&&!1===c.lastMessage.onlineOnlyFlag)return o=c.lastMessage.lastSequence,i="got lastSequence:".concat(o," from local conversation profile[lastMessage.lastSequence]. groupID:").concat(e),He.l("".concat(a," ").concat(i)),n.setNetworkType(this.getNetworkType()).setMessage("".concat(i)).end(),Promise.resolve(o);var u={groupIDList:[e],responseFilter:{groupBaseInfoFilter:["NextMsgSeq"]}};return this.getGroupProfileAdvance(u).then((function(r){var s=r.data.successGroupList;return Zt(s)?He.l("".concat(a," successGroupList is empty. groupID:").concat(e)):(o=s[0].nextMessageSeq-1,i="got lastSequence:".concat(o," from getGroupProfileAdvance. groupID:").concat(e),He.l("".concat(a," ").concat(i))),n.setNetworkType(t.getNetworkType()).setMessage("".concat(i)).end(),o})).catch((function(o){return t.probeNetwork().then((function(t){var a=_(t,2),i=a[0],r=a[1];n.setError(o,i,r).setMessage("get lastSequence failed from getGroupProfileAdvance. groupID:".concat(e)).end()})),He.w("".concat(a," failed. error:"),o),er(o)}))}},{key:"getTopicLastSequence",value:function(e){var t=this,a=e.groupID,n=e.topicID,o="".concat(this._n,".").concat("getTopicLastSequence"),i=new Vi("getTopicLastSequence"),r=0,s="",l=this.getModule(Ga);return l.hasLocalTopic(a,n)?(r=l.getLocalTopic(a,n).nextMessageSeq-1,s="get lastSequence:".concat(r," from local topic info[nextMessageSeq]. topicID:").concat(n),He.l("".concat(o," ").concat(s)),i.setNetworkType(this.getNetworkType()).setMessage("".concat(s)).end(),Promise.resolve(r)):l.getTopicList({groupID:a,topicIDList:[n]}).then((function(e){var a=e.data.successTopicList;return Zt(a)?He.l("".concat(o," successTopicList is empty. topicID:").concat(n)):(r=a[0].nextMessageSeq-1,s="get lastSequence:".concat(r," from getTopicList. topicID:").concat(n),He.l("".concat(o," ").concat(s))),i.setNetworkType(t.getNetworkType()).setMessage("".concat(s)).end(),r})).catch((function(e){return t.probeNetwork().then((function(t){var a=_(t,2),o=a[0],r=a[1];i.setError(e,o,r).setMessage("get lastSequence failed from getTopicList. topicID:".concat(n)).end()})),He.w("".concat(o," failed. error:"),e),er(e)}))}},{key:"isMessageFromOrToAVChatroom",value:function(e){return!!this._AVChatRoomHandler&&this._AVChatRoomHandler.checkJoinedAVChatRoomByID(e)}},{key:"hasJoinedAVChatRoom",value:function(){return this._AVChatRoomHandler?this._AVChatRoomHandler.hasJoinedAVChatRoom():0}},{key:"getJoinedAVChatRoom",value:function(){return this._AVChatRoomHandler?this._AVChatRoomHandler.getJoinedAVChatRoom():[]}},{key:"isOnlineMessage",value:function(e,t){return!(!this._canIUseOnlineOnlyFlag(e)||!t||!0!==t.onlineUserOnly)}},{key:"_canIUseOnlineOnlyFlag",value:function(e){var t=this.getJoinedAVChatRoom();return!t||!t.includes(e.to)||e.conversationType!==I.CONV_GROUP}},{key:"_onAVChatRoomHistoryMessage",value:function(e){if(!Zt(e)){He.l("".concat(this._n,"._onAVChatRoomHistoryMessage count:").concat(e.length));var a=[];e.forEach((function(e){a.push(t(t({},e),{},{isHistoryMessage:1}))})),this.onAVChatRoomMessage(a)}}},{key:"onAVChatRoomMessage",value:function(e){this._AVChatRoomHandler&&this._AVChatRoomHandler.onMessage(e)}},{key:"onAVChatRoomMemberBanned",value:function(e){this._AVChatRoomHandler&&this._AVChatRoomHandler.onAVChatRoomMemberBanned(e)}},{key:"getGroupSimplifiedInfo",value:function(e){var t=this,a=new Vi("getGroupSimplifiedInfo"),n={groupIDList:[e],responseFilter:{groupBaseInfoFilter:["Type","Name"]}};return this.getGroupProfileAdvance(n).then((function(n){var o=n.data.successGroupList;return a.setNetworkType(t.getNetworkType()).setMessage("groupID:".concat(e," type:").concat(o[0].type)).end(),o[0]})).catch((function(n){t.probeNetwork().then((function(t){var o=_(t,2),i=o[0],r=o[1];a.setError(n,i,r).setMessage("groupID:".concat(e)).end()}))}))}},{key:"setUnjoinedAVChatRoom",value:function(e){this._unjoinedAVChatRoomList.set(e,1)}},{key:"deleteUnjoinedAVChatRoom",value:function(e){this._unjoinedAVChatRoomList.has(e)&&this._unjoinedAVChatRoomList.delete(e)}},{key:"isUnjoinedAVChatRoom",value:function(e){return this._unjoinedAVChatRoomList.has(e)}},{key:"isGroupAttributesUpdatedNotice",value:function(e){return this._groupAttributesHandler.isGroupAttributesUpdatedNotice(e)}},{key:"updateLocalMainSequenceOnReconnected",value:function(){this._groupAttributesHandler.updateLocalMainSequenceOnReconnected()}},{key:"initGroupAttributes",value:function(e){return this._groupAttributesHandler.initGroupAttributes(e)}},{key:"setGroupAttributes",value:function(e){return this._groupAttributesHandler.setGroupAttributes(e)}},{key:"deleteGroupAttributes",value:function(e){return this._groupAttributesHandler.deleteGroupAttributes(e)}},{key:"getGroupAttributes",value:function(e){return this._groupAttributesHandler.getGroupAttributes(e)}},{key:"isMessageFromTopic",value:function(e,t){return 2===e&&!Zt(t)}},{key:"isMessageFromCommunityOfTopic",value:function(e,t){return 2===e&&Zt(t)}},{key:"getMessageExtensions",value:function(e,t){return He.l("".concat(this._n,".getMessageExtensions startSequence:").concat(t)),this.request({protocolName:Do,requestData:{groupID:e.to,messageSequence:e.sequence,startSequence:t}})}},{key:"modifyMessageExtensions",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return He.l("".concat(this._n,".modifyMessageExtensions operateType:").concat(a)),this.request({protocolName:To,requestData:{groupID:e.to,messageSequence:e.sequence,extensionList:t,operateType:a}})}},{key:"getGroupNotify",value:function(e){var a=this;if(this.hasLocalGroup(e)){var n=this.getLocalGroupProfile(e),o=n.type,i=n.isSupportTopic;if(!Mt(o)&&!i){var r="".concat(this._n,".getGroupNotify"),s=this._getGroupLastRevokedTime(e),l=1e3*Pe();He.l("".concat(r," groupID:").concat(e," type:").concat(o," beginTime:").concat(s," endTime:").concat(l)),this.request({protocolName:bo,requestData:{type:St({type:o,groupID:e})?I.GRP_COMMUNITY:void 0,groupID:e,beginTime:s,endTime:l}}).then((function(n){var o=n.data,i=o.nextRevokedTime,s=o.notifyList;He.l("".concat(r," ok. groupID:").concat(e," nextRevokedTime:").concat(i));var l={dataList:[{elements:{revokedInfos:[]}}]};lt(s)&&s.forEach((function(a){l.dataList[0].elements.revokedInfos.push({groupID:e,sequence:a.sequence,random:a.random,revokerInfo:t({},a.revokerInfo)})})),a.onGroupMessageRevoked(l),0!==i?(a._setGroupLastRevokedTime(e,i),a.getGroupNotify(e)):a._setGroupLastRevokedTime(e,1e3*Pe())})).catch((function(e){He.e("".concat(r," failed. error:"),e)}))}}}},{key:"_getGroupLastRevokedTime",value:function(e){return this.hasLocalGroup(e)?this.getLocalGroupProfile(e)._lastRevokedTime:0}},{key:"_setGroupLastRevokedTime",value:function(e,t){this.hasLocalGroup(e)&&(this.getLocalGroupProfile(e)._lastRevokedTime=t)}},{key:"isGroupCountersNotice",value:function(e){return this._groupCountersHandler.isGroupCountersNotice(e)}},{key:"setGroupCounters",value:function(e){return this._groupCountersHandler.setGroupCounters(e)}},{key:"increaseGroupCounter",value:function(e){return this._groupCountersHandler.increaseGroupCounter(e)}},{key:"decreaseGroupCounter",value:function(e){return this._groupCountersHandler.decreaseGroupCounter(e)}},{key:"getGroupCounters",value:function(e){return this._groupCountersHandler.getGroupCounters(e)}},{key:"restartPolling",value:function(){this._AVChatRoomHandler&&this._AVChatRoomHandler.restartPolling()}},{key:"getPollingTimerID",value:function(e){if(!e)return-1;var t=this.getLocalGroupProfile(e);return t&&Mt(t.type)?this._AVChatRoomHandler.getPollingTimerID(e):-1}},{key:"_canIUseJoinOption",value:function(e){return e===I.GRP_PUBLIC||St({type:e})}},{key:"reset",value:function(){this.groupMap.clear(),this._unjoinedAVChatRoomList.clear(),this._receiptDetailCompleteMap.clear(),this._commonGroupHandler.reset(),this._groupSystemNoticeHandler.reset(),this._groupTipsHandler.reset(),this._groupAttributesHandler.reset(),this._groupCountersHandler.reset(),this._AVChatRoomHandler&&this._AVChatRoomHandler.reset()}}]),o}(dn),zr=function(){function e(t){n(this,e),this.userID="",this.avatar="",this.nick="",this.role="",this.joinTime="",this.lastSendMsgTime="",this.nameCard="",this.muteUntil=0,this.memberCustomField=[],this._initMember(t)}return r(e,[{key:"_initMember",value:function(e){this.updateMember(e)}},{key:"updateMember",value:function(e){var t=[null,void 0,"",0,NaN];e.memberCustomField&&Ct(this.memberCustomField,e.memberCustomField),vt(this,e,["memberCustomField","marks"],t)}},{key:"updateRole",value:function(e){["Owner","Admin","Member"].indexOf(e)<0||(this.role=e)}},{key:"updateMuteUntil",value:function(e){ct(e)||(this.muteUntil=Math.floor((Date.now()+1e3*e)/1e3))}},{key:"updateNameCard",value:function(e){ct(e)||(this.nameCard=e)}},{key:"updateMemberCustomField",value:function(e){e&&Ct(this.memberCustomField,e)}}]),e}(),Hr=function(e){l(o,e);var a=y(o);function o(e){var t;return n(this,o),(t=a.call(this,e))._n="GroupMemberModule",t.groupMemberListMap=new Map,t.getInnerEmitterInstance().on(ir,t._onProfileUpdated,g(t)),t}return r(o,[{key:"_onProfileUpdated",value:function(e){for(var t=this,a=e.data,n=function(e){var n=a[e];t.groupMemberListMap.forEach((function(e){e.has(n.userID)&&e.get(n.userID).updateMember({nick:n.nick,avatar:n.avatar})}))},o=0;o<a.length;o++)n(o)}},{key:"deleteGroupMemberList",value:function(e){this.groupMemberListMap.delete(e)}},{key:"getGroupMemberList",value:function(e){var t=this,a=e.groupID,n=e.offset,o=void 0===n?0:n,i=e.count,r=void 0===i?15:i,s=e.filter,l=void 0===s?void 0:s,c="".concat(this._n,".").concat("getGroupMemberList"),u=this.getModule(Ba),d=u.hasLocalGroup(a);if(He.l("".concat(c," groupID:").concat(a," offset:").concat(o," count:").concat(r," hasLocalGroup:").concat(d)),!d)return Qi({memberList:[],offset:0});if(u.getLocalGroupProfile(a).type===I.GRP_AVCHATROOM){if(this.canIUse(H.AVCHATROOM_MBR_LIST))return this._getAVChatRoomMemberList({groupID:a,offset:o,filter:l});this.outputWarning("LiveOnlineMember")}var m=new Vi("getGroupMemberList"),p=0,h={groupID:a,limit:r>100?100:r};St({groupID:a})?h.next="".concat(o):(h.offset=o,p=o+r);var v=[];return this.request({protocolName:Lo,requestData:h}).then((function(e){var n=e.data,o=n.members,i=n.memberNum,r=n.next,s=void 0===r?void 0:r;if(ct(s)||(p=Zt(s)?0:s),!lt(o)||0===o.length)return p=0,Promise.resolve([]);var l=t.getModule(Ba);return l.hasLocalGroup(a)&&(l.getLocalGroupProfile(a).memberNum=i),v=t._updateLocalGroupMemberMap(a,o),t.getModule(Ra).getUserProfile({userIDList:o.map((function(e){return e.userID})),tagList:[je.NICK,je.AVATAR]})})).then((function(e){var n=e.data;if(!lt(n)||0===n.length)return Qi({memberList:[],offset:p});var i=n.map((function(e){return{userID:e.userID,nick:e.nick,avatar:e.avatar}}));return t._updateLocalGroupMemberMap(a,i),v.length<r&&(p=0),m.setNetworkType(t.getNetworkType()).setMessage("groupID:".concat(a," offset:").concat(o," count:").concat(r)).end(),He.l("".concat(c," ok.")),Wi({memberList:v,offset:p})})).catch((function(e){return t.probeNetwork().then((function(t){var a=_(t,2),n=a[0],o=a[1];m.setError(e,n,o).end()})),He.e("".concat(c," failed. error:"),e),er(e)}))}},{key:"_getAVChatRoomMemberList",value:function(e){var t=this,a=e.groupID,n=e.offset,o=e.filter,i="".concat(this._n,".").concat("_getAVChatRoomMemberList"),r=new Vi("_getAVChatRoomMemberList");return r.setMessage("groupID:".concat(a," offset:").concat(n," filter:").concat(o)),this.request({protocolName:Ro,requestData:{groupID:a,offset:n,filter:o}}).then((function(e){var n=e.data,o=n.memberList,s=void 0===o?[]:o,l=n.offset,c=void 0===l?0:l;r.setNetworkType(t.getNetworkType()).end(),He.l("".concat(i," ok. member count:").concat(s.length,", next request timestamp:").concat(c));var u=t._updateLocalGroupMemberMap(a,s);return Wi({memberList:u,offset:c})})).catch((function(e){return t.probeNetwork().then((function(t){var a=_(t,2),n=a[0],o=a[1];r.setError(e,n,o).end()})),He.e("".concat(i," failed. error:"),e),er(e)}))}},{key:"getGroupMemberProfile",value:function(e){var a=this,n="".concat(this._n,".").concat("getGroupMemberProfile"),o=new Vi("getGroupMemberProfile");o.setMessage(e.userIDList.length>5?"userIDList.length:".concat(e.userIDList.length):"userIDList:".concat(e.userIDList)),He.l("".concat(n," groupID:").concat(e.groupID," userIDList:").concat(e.userIDList.join(","))),e.userIDList.length>50&&(e.userIDList=e.userIDList.slice(0,50));var i=e.groupID,r=e.userIDList;return this._getGroupMemberProfileAdvance(t(t({},e),{},{userIDList:r})).then((function(e){var t=e.data.members;return lt(t)&&0!==t.length?(a._updateLocalGroupMemberMap(i,t),a.getModule(Ra).getUserProfile({userIDList:t.map((function(e){return e.userID})),tagList:[je.NICK,je.AVATAR]})):Qi([])})).then((function(e){var t=e.data.map((function(e){return{userID:e.userID,nick:e.nick,avatar:e.avatar}}));a._updateLocalGroupMemberMap(i,t);var n=r.filter((function(e){return a.hasLocalGroupMember(i,e)})).map((function(e){return a.getLocalGroupMemberInfo(i,e)}));return o.setNetworkType(a.getNetworkType()).end(),Wi({memberList:n})}))}},{key:"addGroupMember",value:function(e){var t=this,a="".concat(this._n,".").concat("addGroupMember"),n=e.groupID,o=this.getModule(Ba).getLocalGroupProfile(n),i=o.type,r=new Vi("addGroupMember");if(r.setMessage("groupID:".concat(n," groupType:").concat(i)),Mt(i)){var s=new Ji({code:fi.CANNOT_ADD_MEMBER_IN_AVCHATROOM});return r.setError(s,!0,this.getNetworkType()).end(),er(s)}return e.userIDList=e.userIDList.map((function(e){return{userID:e}})),He.l("".concat(a," groupID:").concat(n)),this.request({protocolName:Bo,requestData:e}).then((function(n){var i=n.data.members;He.l("".concat(a," ok"));var s=i.filter((function(e){return 1===e.result})).map((function(e){return e.userID})),l=i.filter((function(e){return 0===e.result})).map((function(e){return e.userID})),c=i.filter((function(e){return 2===e.result})).map((function(e){return e.userID})),u=i.filter((function(e){return 4===e.result})).map((function(e){return e.userID})),d="groupID:".concat(e.groupID,", ")+"successUserIDList:".concat(s,", ")+"failureUserIDList:".concat(l,", ")+"existedUserIDList:".concat(c,", ")+"overLimitUserIDList:".concat(u);return r.setNetworkType(t.getNetworkType()).setMoreMessage(d).end(),0===s.length?Wi({successUserIDList:s,failureUserIDList:l,existedUserIDList:c,overLimitUserIDList:u}):(o.memberCount+=s.length,t._updateConversationGroupProfile(o),Wi({successUserIDList:s,failureUserIDList:l,existedUserIDList:c,overLimitUserIDList:u,group:o}))})).catch((function(e){return t.probeNetwork().then((function(t){var a=_(t,2),n=a[0],o=a[1];r.setError(e,n,o).end()})),He.e("".concat(a," failed. error:"),e),er(e)}))}},{key:"deleteGroupMember",value:function(e){var t=this,a="".concat(this._n,".").concat("deleteGroupMember"),n=e.groupID,o=e.userIDList,i=this.getModule(Ba).getLocalGroupProfile(n);if(ct(i))return er({code:fi.CANNOT_FIND_GROUP});if(Mt(i.type))return this.canIUse(H.AVCHATROOM_BAN_MBR)?this._banAVChatRoomMember(e):er({code:fi.CANNOT_USE_COMMERCIAL_ABILITY});var r=new Vi("deleteGroupMember"),s="groupID:".concat(n," ").concat(o.length>5?"userIDList.length:".concat(o.length):"userIDList:".concat(o));return r.setMessage(s),He.l("".concat(a," groupID:").concat(n," userIDList:"),o),this.request({protocolName:Po,requestData:e}).then((function(){return r.setNetworkType(t.getNetworkType()).end(),He.l("".concat(a," ok")),i.memberCount-=1,t._updateConversationGroupProfile(i),t.deleteLocalGroupMembers(n,o),Wi({group:i,userIDList:o})})).catch((function(e){return t.probeNetwork().then((function(t){var a=_(t,2),n=a[0],o=a[1];r.setError(e,n,o).end()})),He.e("".concat(a," failed. error:"),e),er(e)}))}},{key:"_updateConversationGroupProfile",value:function(e){this.getModule(Fa).updateConversationGroupProfile([e])}},{key:"_banAVChatRoomMember",value:function(e){var t=this,a="".concat(this._n,".").concat("deleteGroupMember"),n=e.groupID,o=e.userIDList,i="groupID:".concat(n," ").concat(o.length>5?"userIDList.length:".concat(o.length):"userIDList:".concat(o)),r=new Vi("deleteGroupMember");r.setMessage(i),He.l("".concat(a," groupID:").concat(n," userIDList:"),o);var s=this.getModule(Ba).getLocalGroupProfile(n);return ct(e.duration)||0===e.duration?er({code:fi.BAN_DURATION_INVALID}):this.request({protocolName:Uo,requestData:e}).then((function(){return r.setNetworkType(t.getNetworkType()).end(),He.l("".concat(a," ok")),t.deleteLocalGroupMembers(n,o),Wi({group:s,userIDList:o})})).catch((function(e){return t.probeNetwork().then((function(t){var a=_(t,2),n=a[0],o=a[1];r.setError(e,n,o).end()})),He.e("".concat(a," failed. error:"),e),er(e)}))}},{key:"setGroupMemberMuteTime",value:function(e){var t=this,a=e.groupID,n=e.userID,o=e.muteTime,i="".concat(this._n,".").concat("setGroupMemberMuteTime");if(n===this.getMyUserID())return er(new Ji({code:fi.CANNOT_MUTE_SELF}));He.l("".concat(i," groupID:").concat(a," userID:").concat(n));var r=new Vi("setGroupMemberMuteTime");return r.setMessage("groupID:".concat(a," userID:").concat(n," muteTime:").concat(o)),this.modifyGroupMemberInfo({groupID:a,userID:n,muteTime:o}).then((function(e){r.setNetworkType(t.getNetworkType()).end(),He.l("".concat(i," ok"));var n=t.getModule(Ba);return Wi({group:n.getLocalGroupProfile(a),member:e})})).catch((function(e){return t.probeNetwork().then((function(t){var a=_(t,2),n=a[0],o=a[1];r.setError(e,n,o).end()})),He.e("".concat(i," failed. error:"),e),er(e)}))}},{key:"setGroupMemberRole",value:function(e){var t=this,a="".concat(this._n,".").concat("setGroupMemberRole"),n=e.groupID,o=e.userID,i=e.role,r=this.getModule(Ba).getLocalGroupProfile(n);if(r.selfInfo.role!==I.GRP_MBR_ROLE_OWNER)return er({code:fi.NOT_OWNER});if([I.GRP_WORK,I.GRP_AVCHATROOM].includes(r.type))return er({code:fi.CANNOT_SET_MEMBER_ROLE_IN_WORK_AND_AVCHATROOM});var s=[I.GRP_MBR_ROLE_ADMIN,I.GRP_MBR_ROLE_MEMBER];if(St({groupID:n})&&s.push(I.GRP_MBR_ROLE_CUSTOM),s.indexOf(i)<0)return er({code:fi.INVALID_MEMBER_ROLE});if(o===this.getMyUserID())return er({code:fi.CANNOT_SET_SELF_MEMBER_ROLE});var l=new Vi("setGroupMemberRole");return l.setMessage("groupID:".concat(n," userID:").concat(o," role:").concat(i)),He.l("".concat(a," groupID:").concat(n," userID:").concat(o)),this.modifyGroupMemberInfo({groupID:n,userID:o,role:i}).then((function(e){return l.setNetworkType(t.getNetworkType()).end(),He.l("".concat(a," ok")),Wi({group:r,member:e})})).catch((function(e){return t.probeNetwork().then((function(t){var a=_(t,2),n=a[0],o=a[1];l.setError(e,n,o).end()})),He.e("".concat(a," failed. error:"),e),er(e)}))}},{key:"_filterProfanity",value:function(e,t){var a=this.getModule(rn);if(!a)return!0;var n=a.filterText(t[e],Z),o=n.isAllowedToSend,i=n.modifiedText;return!0===o&&(t[e]=i,!0)}},{key:"setGroupMemberNameCard",value:function(e){var t=this,a="".concat(this._n,".").concat("setGroupMemberNameCard");if(e.nameCard&&!1===this._filterProfanity("nameCard",e))return er({code:fi.PROFANITY_FOUND});var n=e.groupID,o=e.userID,i=void 0===o?this.getMyUserID():o,r=e.nameCard;He.l("".concat(a," groupID:").concat(n," userID:").concat(i));var s=new Vi("setGroupMemberNameCard");return s.setMessage("groupID:".concat(n," userID:").concat(i," nameCard:").concat(r)),this.modifyGroupMemberInfo({groupID:n,userID:i,nameCard:r}).then((function(e){He.l("".concat(a," ok")),s.setNetworkType(t.getNetworkType()).end();var o=t.getModule(Ba).getLocalGroupProfile(n);return i===t.getMyUserID()&&o&&o.setSelfNameCard(r),Wi({group:o,member:e})})).catch((function(e){return t.probeNetwork().then((function(t){var a=_(t,2),n=a[0],o=a[1];s.setError(e,n,o).end()})),He.e("".concat(a," failed. error:"),e),er(e)}))}},{key:"setGroupMemberCustomField",value:function(e){var t=this,a="".concat(this._n,".").concat("setGroupMemberCustomField"),n=e.groupID,o=e.userID,i=void 0===o?this.getMyUserID():o,r=e.memberCustomField;He.l("".concat(a," groupID:").concat(n," userID:").concat(i));var s=new Vi("setGroupMemberCustomField");return s.setMessage("groupID:".concat(n," userID:").concat(i," memberCustomField:").concat(JSON.stringify(r))),this.modifyGroupMemberInfo({groupID:n,userID:i,memberCustomField:r}).then((function(e){s.setNetworkType(t.getNetworkType()).end(),He.l("".concat(a," ok"));var o=t.getModule(Ba).getLocalGroupProfile(n);return Wi({group:o,member:e})})).catch((function(e){return t.probeNetwork().then((function(t){var a=_(t,2),n=a[0],o=a[1];s.setError(e,n,o).end()})),He.e("".concat(a," failed. error:"),e),er(e)}))}},{key:"modifyGroupMemberInfo",value:function(e){var a=this,n=e.groupID,o=e.userID,i=void 0;return It(n)&&(n=zt(i=n)),this.request({protocolName:Go,requestData:t(t({},e),{},{groupID:n,topicID:i})}).then((function(){if(a.hasLocalGroupMember(n,o)){var t=a.getLocalGroupMemberInfo(n,o);return ct(e.muteTime)||t.updateMuteUntil(e.muteTime),ct(e.role)||t.updateRole(e.role),ct(e.nameCard)||t.updateNameCard(e.nameCard),ct(e.memberCustomField)||t.updateMemberCustomField(e.memberCustomField),t}return a.getGroupMemberProfile({groupID:n,userIDList:[o]}).then((function(e){return _(e.data.memberList,1)[0]}))}))}},{key:"markGroupMemberList",value:function(e){var t=this,a="".concat(this._n,".").concat("markGroupMemberList"),n=e.groupID,o=e.markType,i=e.enableMark,r=e.userIDList,s=void 0===r?[]:r,l="groupID:".concat(n," markType:").concat(o," enableMark:").concat(i," userIDList count: ").concat(s.length);He.l("".concat(a," ").concat(l));var c=2,u=[];!0===i&&(c=1);var d=k(s);s.length>500&&(d=s.slice(0,500),He.w("".concat(a," ").concat(Yt(500)))),d.forEach((function(e){u.push({userID:e,markType:[o]})})),d=null;var m=new Vi("markGroupMemberList");return m.setMessage("".concat(l)),this.request({protocolName:Fo,requestData:{groupID:n,operationType:c,memberList:u}}).then((function(e){var n=e.data.memberList,o=void 0===n?[]:n,i=[],r=[];o.length===s.length?i.push.apply(i,k(s)):(o.forEach((function(e){i.push(e.userID)})),s.forEach((function(e){i.includes(e)||r.push(e)})));var l="success count:".concat(i.length," fail count:").concat(r.length);return m.setNetworkType(t.getNetworkType()).setMessage(l).end(),He.l("".concat(a," ok. ").concat(l)),Wi({successUserIDList:i,failureUserIDList:r})})).catch((function(e){return t.probeNetwork().then((function(t){var a=_(t,2),n=a[0],o=a[1];m.setError(e,n,o).end()})),He.e("".concat(a," failed. error:"),e),er(e)}))}},{key:"_getGroupMemberProfileAdvance",value:function(e){return this.request({protocolName:Oo,requestData:t(t({},e),{},{memberInfoFilter:e.memberInfoFilter?e.memberInfoFilter:["Role","JoinTime","NameCard","ShutUpUntil"]})})}},{key:"_updateLocalGroupMemberMap",value:function(e,t){var a=this;return lt(t)&&0!==t.length?t.map((function(t){return a.hasLocalGroupMember(e,t.userID)?a.getLocalGroupMemberInfo(e,t.userID).updateMember(t):a.setLocalGroupMember(e,new zr(t)),a.getLocalGroupMemberInfo(e,t.userID)})):[]}},{key:"deleteLocalGroupMembers",value:function(e,t){var a=this.groupMemberListMap.get(e);a&&t.forEach((function(e){a.delete(e)}))}},{key:"getLocalGroupMemberInfo",value:function(e,t){return this.groupMemberListMap.has(e)?this.groupMemberListMap.get(e).get(t):null}},{key:"setLocalGroupMember",value:function(e,t){if(this.groupMemberListMap.has(e))this.groupMemberListMap.get(e).set(t.userID,t);else{var a=(new Map).set(t.userID,t);this.groupMemberListMap.set(e,a)}}},{key:"getLocalGroupMemberList",value:function(e){return this.groupMemberListMap.get(e)}},{key:"hasLocalGroupMember",value:function(e,t){return this.groupMemberListMap.has(e)&&this.groupMemberListMap.get(e).has(t)}},{key:"hasLocalGroupMemberMap",value:function(e){return this.groupMemberListMap.has(e)}},{key:"reset",value:function(){this.groupMemberListMap.clear()}}]),o}(dn),$r=["topicID","topicName","avatar","introduction","notification","unreadCount","muteAllMembers","customData","groupAtInfoList","nextMessageSeq","selfInfo"],jr=function(e,t){return Zt(e)?{lastTime:0,lastSequence:0,fromAccount:"",payload:null,type:"",messageForShow:"",nick:"",version:0,cloudCustomData:"",isRevoked:!1,revoker:null}:{lastTime:e.time||0,lastSequence:e.sequence||0,fromAccount:e.from||"",payload:e.payload||null,type:e.type||"",messageForShow:Ht(e.type,e.payload,t),nick:e.nick||"",version:e.version||0,cloudCustomData:e.cloudCustomData||"",isRevoked:e.isRevoked||!1,revoker:e.revoker||null}},Kr=function(){function e(t,a){n(this,e),this.topicID="",this.topicName="",this.avatar="",this.introduction="",this.notification="",this.unreadCount=0,this.muteAllMembers=!1,this.customData="",this.groupAtInfoList=[],this.nextMessageSeq=0,this.lastMessage=jr(t.lastMessage,a),this.selfInfo={muteTime:0,readedSequence:0,messageRemindType:"",excludedUnreadSequenceList:void 0},this._initTopic(t)}return r(e,[{key:"_initTopic",value:function(e){for(var t in e)$r.indexOf(t)<0||("selfInfo"===t?this.updateSelfInfo(e[t]):this[t]="muteAllMembers"===t?1===e[t]:e[t])}},{key:"updateUnreadCount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.unreadCount=e}},{key:"updateNextMessageSeq",value:function(e){this.nextMessageSeq=e}},{key:"updateLastMessage",value:function(e){this.lastMessage=jr(e)}},{key:"updateGroupAtInfoList",value:function(e){this.groupAtInfoList=JSON.parse(JSON.stringify(e))}},{key:"updateTopic",value:function(e){ct(e.selfInfo)||this.updateSelfInfo(e.selfInfo),ct(e.muteAllMembers)||(this.muteAllMembers=1===e.muteAllMembers),vt(this,e,["groupID","lastMessageTime","selfInfo","muteAllMembers","lastMsg"])}},{key:"updateSelfInfo",value:function(e){return 0!==vt(this.selfInfo,e,[],[""])}},{key:"reduceUnreadCount",value:function(){return this.unreadCount>=1&&(this.unreadCount-=1,!0)}},{key:"isLastMessageRevoked",value:function(e){return e.sequence===this.lastMessage.lastSequence}},{key:"setLastMessageRevoked",value:function(e){this.lastMessage.isRevoked=e}},{key:"setLastMessageRevoker",value:function(e){this.lastMessage.revoker=e}}]),e}(),Yr=function(e){l(o,e);var a=y(o);function o(e){var t;return n(this,o),(t=a.call(this,e))._n="TopicModule",t._topicMap=new Map,t._getTopicTimeMap=new Map,t.TOPIC_CACHE_TIME=300,t.TOPIC_LAST_ACTIVE_TIME=3600,t.getInnerEmitterInstance().on(or,t._onCloudConfigUpdated,g(t)),t}return r(o,[{key:"_onCloudConfigUpdated",value:function(){var e=this.getCloudConfig("topic_cache_time"),t=this.getCloudConfig("topic_last_active_time");ct(e)||(this.TOPIC_CACHE_TIME=Number(e)),ct(t)||(this.TOPIC_LAST_ACTIVE_TIME=Number(t))}},{key:"onTopicCreated",value:function(e){var t=e.groupID;this.resetGetTopicTime(t),this.emitOuterEvent(S.TOPIC_CREATED,e)}},{key:"onTopicDeleted",value:function(e){var t=this,a=e.groupID,n=e.topicIDList;(void 0===n?[]:n).forEach((function(e){t._deleteLocalTopic(a,e)})),this.emitOuterEvent(S.TOPIC_DELETED,e)}},{key:"onTopicMessageRemindTypeUpdated",value:function(e){var t=e.groupID,a=e.topicID,n=e.messageRemindType,o=this.getLocalTopic(t,a);if(o){var i=o.updateSelfInfo({messageRemindType:n});i&&this.emitOuterEvent(S.TOPIC_UPDATED,{groupID:t,topic:o}),He.d("".concat(this._n,".onTopicMessageRemindTypeUpdated topicID:").concat(a)+" messageRemindType:".concat(n," isTopicUpdated:").concat(i))}}},{key:"onTopicProfileUpdated",value:function(e){var t=e.groupID,a=e.topicID,n=this.getLocalTopic(t,a);n&&(n.updateTopic(e),this.emitOuterEvent(S.TOPIC_UPDATED,{groupID:t,topic:n}))}},{key:"onConversationProxy",value:function(e){var t=e.topicID,a=e.unreadCount,n=e.groupAtInfoList,o=zt(t),i=this.getLocalTopic(o,t),r=!1;i&&(ct(a)||i.unreadCount===a||(i.updateUnreadCount(a),r=!0),ct(n)||(i.updateGroupAtInfoList(n),r=!0)),r&&this.emitOuterEvent(S.TOPIC_UPDATED,{groupID:o,topic:i})}},{key:"onMessageSent",value:function(e){var t=e.groupID,a=e.topicID,n=e.lastMessage,o=this.getLocalTopic(t,a);o&&(o.nextMessageSeq+=1,o.updateLastMessage(n),this.emitOuterEvent(S.TOPIC_UPDATED,{groupID:t,topic:o}))}},{key:"onMessageModified",value:function(e){var t=e.to,a=e.time,n=e.sequence,o=e.elements,i=e.cloudCustomData,r=e.messageVersion,s=zt(t),l=this.getLocalTopic(s,t);if(l){var c=l.lastMessage;He.d("".concat(this._n,".onMessageModified topicID:").concat(t," lastMessage:"),JSON.stringify(c),"options:",JSON.stringify(e)),c&&(null===c.payload||c.lastTime===a&&c.lastSequence===n&&c.version!==r)&&(c.type=o[0].type,c.payload=o[0].content,c.messageForShow=Ht(c.type,c.payload,this.isIntl()),c.cloudCustomData=i,c.version=r,c.lastSequence=n,c.lastTime=a,this.emitOuterEvent(S.TOPIC_UPDATED,{groupID:s,topic:l}))}}},{key:"onMessageRevoked",value:function(e){var t=this;if(0!==e.length){var a=null,n=null,o=!1;e.forEach((function(e){var i=e.to;n=zt(i),(a=t.getLocalTopic(n,i))&&(a.reduceUnreadCount()&&(o=!0),a.isLastMessageRevoked(e)&&(a.setLastMessageRevoked(!0),a.setLastMessageRevoker(e.revoker),o=!0))})),o&&this.emitOuterEvent(S.TOPIC_UPDATED,{groupID:n,topic:a})}}},{key:"isLastMessageRevoked",value:function(e){var t=e.topicID,a=e.sequence,n=zt(t),o=this.getLocalTopic(n,t),i=!1;return o&&(i=o.isLastMessageRevoked({sequence:a})),i}},{key:"getJoinedCommunityList",value:function(){return this.getModule(Ba).getGroupList({isGroupWithTopicOnly:!0}).then((function(e){var t=e.data.groupList;return Wi({groupList:void 0===t?[]:t})})).catch((function(e){return er(e)}))}},{key:"createTopicInCommunity",value:function(e){var a=this,n="".concat(this._n,".").concat("createTopicInCommunity"),o=e.topicID;if(!ct(o)&&!It(o))return er({code:fi.ILLEGAL_TOPIC_ID});if(e.topicName&&!1===this._filterProfanity("topicName",e))return er({code:fi.PROFANITY_FOUND});if(e.introduction&&!1===this._filterProfanity("introduction",e))return er({code:fi.PROFANITY_FOUND});if(e.notification&&!1===this._filterProfanity("notification",e))return er({code:fi.PROFANITY_FOUND});var i=new Vi("createTopicInCommunity");return this.request({protocolName:oi,requestData:t({},e)}).then((function(o){var r=o.data.topicID;return i.setMessage("topicID:".concat(r)).setNetworkType(a.getNetworkType()).end(),He.l("".concat(n," ok")),a._updateTopicMap([t(t({},e),{},{topicID:r})]),Wi({topicID:r})})).catch((function(e){return a.probeNetwork().then((function(t){var a=_(t,2),n=a[0],o=a[1];i.setError(e,n,o).end()})),He.e("".concat(n," failed. error:"),e),er(e)}))}},{key:"deleteTopicFromCommunity",value:function(e){var t=this,a="".concat(this._n,".").concat("deleteTopicFromCommunity"),n=e.groupID,o=e.topicIDList,i=void 0===o?[]:o,r=new Vi("deleteTopicFromCommunity");return r.setMessage("groupID:".concat(n," topicIDList:").concat(i)),this.request({protocolName:ii,requestData:{groupID:n,topicIDList:i}}).then((function(e){var a=e.data.resultList,o=[],i=[];(void 0===a?[]:a).forEach((function(e){var t=e.topicID,a=e.errorCode,n=e.errorInfo;0===a?o.push({topicID:t}):i.push({topicID:t,code:a,message:n})}));var s="success count:".concat(o.length,", fail count:").concat(i.length);return r.setMoreMessage("".concat(s)).setNetworkType(t.getNetworkType()).end(),He.l("".concat(s)),o.forEach((function(e){t._deleteLocalTopic(n,e.topicID)})),Wi({successTopicList:o,failureTopicList:i})})).catch((function(e){return t.probeNetwork().then((function(t){var a=_(t,2),n=a[0],o=a[1];r.setError(e,n,o).end()})),He.e("".concat(a," failed. error:"),e),er(e)}))}},{key:"updateTopicProfile",value:function(e){var a=this,n="".concat(this._n,".").concat("updateTopicProfile");if(He.l("".concat(n," options:"),e),e.topicName&&!1===this._filterProfanity("topicName",e))return er({code:fi.PROFANITY_FOUND});if(e.introduction&&!1===this._filterProfanity("introduction",e))return er({code:fi.PROFANITY_FOUND});if(e.notification&&!1===this._filterProfanity("notification",e))return er({code:fi.PROFANITY_FOUND});var o=new Vi("updateTopicProfile");return o.setMessage("groupID:".concat(e.groupID," topicID:").concat(e.topicID)),ct(e.muteAllMembers)||(e.muteAllMembers=!0===e.muteAllMembers?"On":"Off"),this.request({protocolName:ri,requestData:t({},e)}).then((function(){return o.setNetworkType(a.getNetworkType()).end(),He.l("".concat(n," ok")),a._updateTopicMap([e]),Wi({topic:a.getLocalTopic(e.groupID,e.topicID)})})).catch((function(e){return a.probeNetwork().then((function(t){var a=_(t,2),n=a[0],i=a[1];o.setError(e,n,i).end()})),He.e("".concat(n," failed. error:"),e),er(e)}))}},{key:"getTopicList",value:function(e){var a=this,n="".concat(this._n,".").concat("getTopicList"),o=e.groupID,i=e.topicIDList,r=void 0===i?[]:i,s=0===r.length,l=new Vi("getTopicList");if(l.setMessage("groupID:".concat(o)),this._getTopicTimeMap.has(o)){var c=this._getTopicTimeMap.get(o),u=c.isGetAll,d=c.time;if((u||!u&&!s)&&Date.now()-d<1e3*this.TOPIC_CACHE_TIME){var m=this._getLocalTopicList(o,r);if(s||m.length===r.length)return l.setNetworkType(this.getNetworkType()).setMoreMessage("from cache, topic count:".concat(m.length)).end(),He.l("".concat(n," groupID:").concat(o," from cache, topic count:").concat(m.length)),Qi({successTopicList:m,failureTopicList:[]})}}return this.request({protocolName:si,requestData:{groupID:o,topicIDList:r}}).then((function(e){var i=e.data.topicInfoList,r=[],c=[],u=[];(void 0===i?[]:i).forEach((function(e){var a=e.topic,n=e.selfInfo,o=e.errorCode,i=e.errorInfo,s=a.topicID;0===o?(r.push(t(t({},a),{},{selfInfo:n})),c.push(s)):u.push({topicID:s,code:o,message:i})})),a._updateTopicMap(r),a._handleTopicAtInfo(r);var d="success count:".concat(c.length,", fail count:").concat(u.length);l.setNetworkType(a.getNetworkType()).setMoreMessage("".concat(d)).end(),He.l("".concat(n," groupID:").concat(o," from remote, ").concat(d));var m=[];return Zt(c)||(a._getTopicTimeMap.set(o,{time:Date.now(),isGetAll:s}),m=a._getLocalTopicList(o,c)),Wi({successTopicList:m,failureTopicList:u})})).catch((function(e){return a.probeNetwork(e).then((function(t){var a=_(t,2),n=a[0],o=a[1];l.setError(e,n,o).end()})),He.e("".concat(n," failed. error:"),e),er(e)}))}},{key:"hasLocalTopic",value:function(e,t){return!!this._topicMap.has(e)&&this._topicMap.get(e).has(t)}},{key:"getLocalTopic",value:function(e,t){var a=null;return this._topicMap.has(e)&&(a=this._topicMap.get(e).get(t)),a}},{key:"_getLocalTopicList",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=this._topicMap.get(e),n=[];return a&&(n=k(a.values())),0===t.length?n:n.filter((function(e){return t.includes(e.topicID)}))}},{key:"_deleteLocalTopic",value:function(e,t){this._topicMap.has(e)&&(this._topicMap.get(e).delete(t),He.l("".concat(this._n,"._deleteLocalTopic groupID:").concat(e," topicID:").concat(t)))}},{key:"_updateTopicMap",value:function(e){var t=this,a=[];e.forEach((function(e){var n=e.groupID,o=e.topicID,i=null;t._topicMap.has(n)||t._topicMap.set(n,new Map),t._topicMap.get(n).has(o)?(i=t._topicMap.get(n).get(o)).updateTopic(e):(t._getTopicLastMessage(e),i=new Kr(e,t.isIntl()),t._topicMap.get(n).set(o,i));var r=t._computeUnreadCount(i);i.updateUnreadCount(r),a.push({conversationID:"".concat(I.CONV_GROUP).concat(o),type:I.CONV_TOPIC,unreadCount:r})})),a.length>0&&this.getModule(Fa).updateTopicConversation(a)}},{key:"resetGetTopicTime",value:function(e){var t=this;ct(e)?k(this._getTopicTimeMap.keys()).forEach((function(e){t._getTopicTimeMap.set(e,0)})):this._getTopicTimeMap.set(e,0)}},{key:"getTopicListOnReconnected",value:function(){var e=this,t=k(this._topicMap.keys()),a=[];t.forEach((function(t){var n=[];e._getLocalTopicList(t).forEach((function(t){var a=t.lastMessage.lastTime,o=void 0===a?0:a;Date.now()-1e3*o<1e3*e.TOPIC_LAST_ACTIVE_TIME&&n.push(t.topicID)})),n.length>0&&a.push({groupID:t,topicIDList:n})})),He.l("".concat(this._n,".getTopicListOnReconnected. active community count:").concat(a.length)),this._relayGetTopicList(a)}},{key:"_relayGetTopicList",value:function(e){var t=this;if(0!==e.length){var a=e.shift(),n=a.topicIDList.length>5?"topicIDList.length:".concat(a.topicIDList.length):"topicIDList:".concat(a.topicIDList),o=new Vi("relayGetTopicList");o.setMessage(n),He.l("".concat(this._n,"._relayGetTopicList. ").concat(n)),this.getTopicList(a).then((function(){o.setNetworkType(t.getNetworkType()).end(),t._relayGetTopicList(e)})).catch((function(a){t.probeNetwork().then((function(e){var t=_(e,2),n=t[0],i=t[1];o.setError(a,n,i).end()})),t._relayGetTopicList(e)}))}}},{key:"_handleTopicAtInfo",value:function(e){var a=this;0!==e.length&&e.forEach((function(e){var n=e.groupID,o=e.topicID,i=e.groupAtInfoList,r=[];ct(i)||(i.forEach((function(e){r.push(t(t({},e),{},{groupID:n,topicID:o}))})),a.getModule(Fa).onNewGroupAtTips({dataList:r}))}))}},{key:"_getTopicLastMessage",value:function(e){if(!ct(e.lastMsg)){var t={time:e.lastMsg.time,sequence:e.lastMsg.sequence,from:e.lastMsg.from,payload:e.lastMsg.elements[0]?e.lastMsg.elements[0].content:null,type:e.lastMsg.elements[0]?e.lastMsg.elements[0].type:"",nick:e.lastMsg.nick,version:e.lastMsg.messageVersion,cloudCustomData:e.lastMsg.cloudCustomData,isRevoked:2===e.lastMsg.isPlaceMessage,revoker:Zt(e.lastMsg.revokerInfo)?null:e.lastMsg.revokerInfo.revoker};e.lastMessage=t}}},{key:"deleteTopicListInCommunity",value:function(e){var t=this,a=this._getLocalTopicList(e),n=this.getModule(Fa);a.forEach((function(a){var o=a.topicID;t._deleteLocalTopic(e,o),t._getTopicTimeMap.delete(e),n.deleteLocalConversation("".concat(I.CONV_GROUP).concat(o))}))}},{key:"_computeUnreadCount",value:function(e){var t=e.selfInfo,a=t.excludedUnreadSequenceList,n=t.readedSequence,o=e.nextMessageSeq-e.selfInfo.readedSequence-1;if(lt(a)){var i=0;a.forEach((function(t){t>=n&&t<=e.nextMessageSeq-1&&(i+=1)})),i>=1&&(o-=i)}return o<0?0:o}},{key:"_filterProfanity",value:function(e,t){var a=this.getModule(rn);if(!a)return!0;var n=a.filterText(t[e],J),o=n.isAllowedToSend,i=n.modifiedText;return!0===o&&(t[e]=i,!0)}},{key:"updateLastMessage",value:function(e,t){var a=zt(e),n=this.getLocalTopic(a,e);if(n){var o=t.sequence+1;n.updateNextMessageSeq(o),n.updateLastMessage(t),this.emitOuterEvent(S.TOPIC_UPDATED,{groupID:a,topic:n})}}},{key:"getMessageExtensions",value:function(e,t){He.l("".concat(this._n,".getMessageExtensions startSequence:").concat(t));var a=zt(e.to);return this.request({protocolName:Do,requestData:{groupID:a,topicID:e.to,messageSequence:e.sequence,startSequence:t}})}},{key:"modifyMessageExtensions",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;He.l("".concat(this._n,".modifyMessageExtensions operateType:").concat(a));var n=zt(e.to);return this.request({protocolName:To,requestData:{groupID:n,topicID:e.to,messageSequence:e.sequence,extensionList:t,operateType:a}})}},{key:"reset",value:function(){He.l("".concat(this._n,".reset")),this._topicMap.clear(),this._getTopicTimeMap.clear(),this.TOPIC_CACHE_TIME=300,this.TOPIC_LAST_ACTIVE_TIME=3600}}]),o}(dn),Wr=function(){function e(t){n(this,e),this._userModule=t,this._n="ProfileHandler",this.TAG="profile",this.accountProfileMap=new Map,this.expirationTime=864e5}return r(e,[{key:"setExpirationTime",value:function(e){this.expirationTime=e}},{key:"getUserProfile",value:function(e){var t=this,a="".concat(this._n,".").concat("getUserProfile"),n=e.userIDList;e.fromAccount=this._userModule.getMyAccount(),n.length>100&&(He.w("".concat(a," ").concat(Yt(100))),n.length=100);for(var o,i=[],r=[],s=0,l=n.length;s<l;s++)o=n[s],this._userModule.isMyFriend(o)&&this._contains(o)?r.push(this._getProfileFromMap(o)):i.push(o);if(0===i.length)return Qi(r);e.toAccount=i;var c=e.bFromGetMyProfile||!1,u=[];e.toAccount.forEach((function(e){u.push({toAccount:e,standardSequence:0,customSequence:0})})),e.userItem=u;var d=new Vi("getUserProfile");return d.setMessage(n.length>5?"userIDList.length:".concat(n.length):"userIDList:".concat(n)),this._userModule.request({protocolName:kn,requestData:e}).then((function(e){d.setNetworkType(t._userModule.getNetworkType()).end(),He.i("".concat(a," ok"));var n=t._handleResponse(e).concat(r);return Wi(c?n[0]:n)})).catch((function(e){return t._userModule.probeNetwork().then((function(t){var a=_(t,2),n=a[0],o=a[1];d.setError(e,n,o).end()})),He.e("".concat(a," failed. error:"),e),er(e)}))}},{key:"getMyProfile",value:function(){var e=this._userModule.getMyAccount(),t="".concat(this._n,".getMyProfile");if(He.l("".concat(t," myAccount:").concat(e)),this._fill(),this._contains(e)){var a=this._getProfileFromMap(e);return He.d("".concat(t," from cache, myProfile:").concat(JSON.stringify(a))),Qi(a)}return this.getUserProfile({fromAccount:e,userIDList:[e],bFromGetMyProfile:!0})}},{key:"_handleResponse",value:function(e){var t=e.data.userProfileItem;if(!lt(t))return[];for(var a=[],n=Date.now(),o=0,i=t.length;o<i;o++){var r=t[o],s=r.to,l=r.profileItem;if("@TLS#NOT_FOUND"!==s&&""!==s){var c=this._update(s,this._getLatestProfileFromResponse(s,l)).latestProfile;a.push(c)}}return He.l("".concat(this._n,"._handleResponse cost ").concat(Date.now()-n," ms")),a}},{key:"_getLatestProfileFromResponse",value:function(e,t){var a={userID:e,profileCustomField:[]};if(!Zt(t))for(var n=0,o=t.length;n<o;n++)if(t[n].tag.indexOf("Tag_Profile_Custom")>-1)a.profileCustomField.push({key:t[n].tag,value:t[n].value});else switch(t[n].tag){case je.NICK:a.nick=t[n].value;break;case je.GENDER:a.gender=t[n].value;break;case je.BIRTHDAY:a.birthday=t[n].value;break;case je.LOCATION:a.location=t[n].value;break;case je.SELFSIGNATURE:a.selfSignature=t[n].value;break;case je.ALLOWTYPE:a.allowType=t[n].value;break;case je.LANGUAGE:a.language=t[n].value;break;case je.AVATAR:a.avatar=t[n].value;break;case je.MESSAGESETTINGS:a.messageSettings=t[n].value;break;case je.ADMINFORBIDTYPE:a.adminForbidType=t[n].value;break;case je.LEVEL:a.level=t[n].value;break;case je.ROLE:a.role=t[n].value;break;default:He.w("".concat(this._n,"._getLatestProfileFromResponse unknown tag:"),t[n].tag,t[n].value)}return a}},{key:"updateMyProfile",value:function(e){var t=this,a="".concat(this._n,".").concat("updateMyProfile");if(e.nick&&!1===this._userModule.filterProfanity("nick",e))return er({code:fi.PROFANITY_FOUND});if(e.selfSignature&&!1===this._userModule.filterProfanity("selfSignature",e))return er({code:fi.PROFANITY_FOUND});var n=new Vi("updateMyProfile");n.setMessage(JSON.stringify(e));var o=(new pr).validate(e);if(!o.valid)return n.setCode(fi.UPDATE_PROFILE_INVALID_PARAM).setMoreMessage("info:".concat(o.tips)).setNetworkType(this._userModule.getNetworkType()).end(),He.e("".concat(a," info:").concat(o.tips)),er({code:fi.UPDATE_PROFILE_INVALID_PARAM});var i=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&("profileCustomField"===r?e.profileCustomField.forEach((function(e){i.push({tag:e.key,value:e.value})})):i.push({tag:je[r.toUpperCase()],value:e[r]}));if(0===i.length){var s=new Ji({code:fi.UPDATE_PROFILE_NO_KEY});return n.setError(s,!0,this._userModule.getNetworkType()).end(),He.e("".concat(a," failed. error:"),s),er(s)}var l=this._userModule.getMyAccount();return this._userModule.request({protocolName:En,requestData:{fromAccount:l,profileItem:i}}).then((function(o){n.setNetworkType(t._userModule.getNetworkType()).end(),He.i("".concat(a," ok"));var i=t._update(l,e),r=i.isProfileUpdated,s=i.latestProfile;return!0===r&&t._userModule.emitOuterEvent(S.PROFILE_UPDATED,[s]),Qi(s)})).catch((function(e){return t._userModule.probeNetwork().then((function(t){var a=_(t,2),o=a[0],i=a[1];n.setError(e,o,i).end()})),He.e("".concat(a," failed. error:"),e),er(e)}))}},{key:"onProfileModified",value:function(e){var t=e.dataList;if(!Zt(t)){var a,n=t.length;He.d("".concat(this._n,".onProfileModified count:").concat(n," dataList:"),e.dataList);for(var o=[],i=0;i<n;i++){a=t[i].userID;var r=this._update(a,this._getLatestProfileFromResponse(a,t[i].profileList)),s=r.isProfileUpdated,l=r.latestProfile;!0===s&&o.push(l)}o.length>0&&(this._userModule.emitInnerEvent(ir,o),this._userModule.emitOuterEvent(S.PROFILE_UPDATED,o))}}},{key:"_fill",value:function(){if(0===this.accountProfileMap.size){for(var e=this._getCachedProfiles(),t=Date.now(),a=0,n=e.length;a<n;a++)t-e[a].lastUpdatedTime<this.expirationTime&&this.accountProfileMap.set(e[a].userID,e[a]);He.l("".concat(this._n,"._fill from cache, size:").concat(this.accountProfileMap.size))}}},{key:"_update",value:function(e,t){var a,n=!1,o=Date.now();return this._contains(e)?(a=this._getProfileFromMap(e),t.profileCustomField&&!0===Ct(a.profileCustomField,t.profileCustomField)&&(a.lastUpdatedTime=o,n=!0),vt(a,t,["profileCustomField"])>0&&(a.lastUpdatedTime=o,n=!0)):(a=new pr(t),(this._userModule.isMyFriend(e)||e===this._userModule.getMyAccount())&&(a.lastUpdatedTime=o,n=!0,this.accountProfileMap.set(e,a))),this._flush(e===this._userModule.getMyAccount()),He.l("".concat(this._n,"._update account:").concat(e," isProfileUpdated:").concat(n)),{isProfileUpdated:n,latestProfile:a}}},{key:"_flush",value:function(e){var t=k(this.accountProfileMap.values()),a=this._userModule.getStorageModule();He.d("".concat(this._n,"._flush length:").concat(t.length," flushAtOnce:").concat(e)),a.setItem(this.TAG,t,e)}},{key:"_contains",value:function(e){return this.accountProfileMap.has(e)}},{key:"_getProfileFromMap",value:function(e){return this.accountProfileMap.get(e)}},{key:"_getCachedProfiles",value:function(){var e=this._userModule.getStorageModule().getItem(this.TAG);return Zt(e)?[]:e}},{key:"onConversationsProfileUpdated",value:function(e){for(var t,a,n,o=[],i=0,r=e.length;i<r;i++)a=(t=e[i]).userID,this._userModule.isMyFriend(a)&&(this._contains(a)?(n=this._getProfileFromMap(a),vt(n,t)>0&&o.push(a)):o.push(t.userID));0!==o.length&&(He.i("".concat(this._n,".onConversationsProfileUpdated toAccountList:").concat(o)),this.getUserProfile({userIDList:o}))}},{key:"getNickAndAvatarByUserID",value:function(e){if(this._contains(e)){var t=this._getProfileFromMap(e);return{nick:t.nick,avatar:t.avatar}}return{nick:"",avatar:""}}},{key:"reset",value:function(){this._flush(!0),this.accountProfileMap.clear()}}]),e}(),Jr=r((function e(t){n(this,e),Zt||(this.userID=t.userID||"",this.timeStamp=t.timeStamp||0)})),Zr=function(){function e(t){n(this,e),this._userModule=t,this._n="BlacklistHandler",this._blacklistMap=new Map,this.startIndex=0,this.maxLimited=100,this.currentSequence=0}return r(e,[{key:"getLocalBlacklist",value:function(){return k(this._blacklistMap.keys())}},{key:"getBlacklist",value:function(){var e=this,t="".concat(this._n,".getBlacklist"),a={fromAccount:this._userModule.getMyAccount(),maxLimited:this.maxLimited,startIndex:0,lastSequence:this.currentSequence},n=new Vi("getBlacklist");return this._userModule.request({protocolName:xn,requestData:a}).then((function(a){var o=a.data,i=o.blackListItem,r=o.currentSequence,s=Zt(i)?0:i.length;n.setNetworkType(e._userModule.getNetworkType()).setMessage("count:".concat(s)).end(),He.i("".concat(t," ok")),e.currentSequence=r,e._handleResponse(i,!0),e._userModule.emitOuterEvent(S.BLACKLIST_UPDATED,k(e._blacklistMap.keys()))})).catch((function(a){return e._userModule.probeNetwork().then((function(e){var t=_(e,2),o=t[0],i=t[1];n.setError(a,o,i).end()})),He.e("".concat(t," failed. error:"),a),er(a)}))}},{key:"addBlacklist",value:function(e){var t=this,a=new Vi("addToBlacklist"),n="".concat(this._n,".addBlacklist"),o=this._userModule.getMyAccount();if(1===e.userIDList.length&&e.userIDList[0]===o){var i=fi.CANNOT_ADD_SELF_TO_BLACKLIST,r=this._userModule.getErrorMessage(i);a.setCode(i).setMessage(r).setNetworkType(this._userModule.getNetworkType()).end();var s=new Ji({code:i});return He.e("".concat(n," failed. error:"),s),er(s)}return e.userIDList.includes(o)&&(e.userIDList=e.userIDList.filter((function(e){return e!==o}))),e.fromAccount=this._userModule.getMyAccount(),e.toAccount=e.userIDList,this._userModule.request({protocolName:Nn,requestData:e}).then((function(o){return a.setNetworkType(t._userModule.getNetworkType()).setMessage(e.userIDList.length>5?"userIDList.length:".concat(e.userIDList.length):"userIDList:".concat(e.userIDList)).end(),He.i("".concat(n," ok")),t._handleResponse(o.resultItem,!0),Wi(k(t._blacklistMap.keys()))})).catch((function(e){return t._userModule.probeNetwork().then((function(t){var n=_(t,2),o=n[0],i=n[1];a.setError(e,o,i).end()})),He.e("".concat(n," failed. error:"),e),er(e)}))}},{key:"_handleResponse",value:function(e,t){if(!Zt(e))for(var a,n,o,i=0,r=e.length;i<r;i++)n=e[i].to,o=e[i].resultCode,(ct(o)||0===o)&&(t?((a=this._blacklistMap.has(n)?this._blacklistMap.get(n):new Jr).userID=n,!Zt(e[i].addBlackTimeStamp)&&(a.timeStamp=e[i].addBlackTimeStamp),this._blacklistMap.set(n,a)):this._blacklistMap.has(n)&&(a=this._blacklistMap.get(n),this._blacklistMap.delete(n)));He.l("".concat(this._n,"._handleResponse total:").concat(this._blacklistMap.size," bAdd:").concat(t))}},{key:"deleteBlacklist",value:function(e){var t=this,a="".concat(this._n,".deleteBlacklist"),n=new Vi("removeFromBlacklist");return e.fromAccount=this._userModule.getMyAccount(),e.toAccount=e.userIDList,this._userModule.request({protocolName:wn,requestData:e}).then((function(o){return n.setNetworkType(t._userModule.getNetworkType()).setMessage(e.userIDList.length>5?"userIDList.length:".concat(e.userIDList.length):"userIDList:".concat(e.userIDList)).end(),He.i("".concat(a," ok")),t._handleResponse(o.data.resultItem,!1),Wi(k(t._blacklistMap.keys()))})).catch((function(e){return t._userModule.probeNetwork().then((function(t){var a=_(t,2),o=a[0],i=a[1];n.setError(e,o,i).end()})),He.e("".concat(a," failed. error:"),e),er(e)}))}},{key:"onAccountDeleted",value:function(e){for(var t,a=[],n=0,o=e.length;n<o;n++)t=e[n],this._blacklistMap.has(t)&&(this._blacklistMap.delete(t),a.push(t));a.length>0&&(He.l("".concat(this._n,".onAccountDeleted count:").concat(a.length," userIDList:"),a),this._userModule.emitOuterEvent(S.BLACKLIST_UPDATED,k(this._blacklistMap.keys())))}},{key:"onAccountAdded",value:function(e){for(var t,a=[],n=0,o=e.length;n<o;n++)t=e[n],this._blacklistMap.has(t)||(this._blacklistMap.set(t,new Jr({userID:t})),a.push(t));a.length>0&&(He.l("".concat(this._n,".onAccountAdded count:").concat(a.length," userIDList:"),a),this._userModule.emitOuterEvent(S.BLACKLIST_UPDATED,k(this._blacklistMap.keys())))}},{key:"reset",value:function(){this._blacklistMap.clear(),this.startIndex=0,this.maxLimited=100,this.currentSequence=0}}]),e}(),Xr=function(e){var t=String(e).replace(/[=]+$/,""),a="";if(t.length%4==1)return"";for(var n,o,i=0,r=0;o=t.charAt(r++);~o&&(n=i%4?64*n+o:o,i++%4)?a+=String.fromCharCode(255&n>>(-2*i&6)):0)o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(o);try{return decodeURIComponent(escape(a))}catch(s){return""}},Qr=function(){function e(t){n(this,e),this._userModule=t,this._n="UserStatusHandler",this.MAX_QUERY_USER_COUNT=500,this.MAX_SUBSCRIBE_USER_COUNT=100,this.MAX_UNSUBSCRIBE_USER_COUNT=100,this._userModule.getInnerEmitterInstance().on(or,this._onCloudConfigUpdated,this)}return r(e,[{key:"_onCloudConfigUpdated",value:function(){var e=this._userModule.getCloudConfig("status_query_count"),t=this._userModule.getCloudConfig("status_sub_count"),a=this._userModule.getCloudConfig("status_unsub_count");He.l("".concat(this._n,"._onCloudConfigUpdated statusQueryCount:").concat(e," statusSubscribeCount:").concat(t)+" statusUnsubscribeCount:".concat(a)),ct(e)||(this.MAX_QUERY_USER_COUNT=parseInt(e,10)),ct(e)||(this.MAX_SUBSCRIBE_USER_COUNT=parseInt(t,10)),ct(e)||(this.MAX_UNSUBSCRIBE_USER_COUNT=parseInt(a,10))}},{key:"onUserStatusUpdated",value:function(e){var t=e.dataList,a=this._userModule.getMyUserID(),n=this._userModule.getModule(qa),o=t.map((function(e){var t=e.to,o=e.statusType,i=e.customStatus,r=Xr(i);return t===a&&n.setCustomStatus(r),{userID:t,statusType:o,customStatus:r}}));this._userModule.emitOuterEvent(S.USER_STATUS_UPDATED,o)}},{key:"setSelfStatus",value:function(e){var t=this,a="".concat(this._n,".setSelfStatus");if(!1===this._userModule.filterProfanity("customStatus",e))return er({code:fi.PROFANITY_FOUND});var n=new Vi("setSelfStatus"),o=e.customStatus;return this._userModule.request({protocolName:li,requestData:{customStatus:o}}).then((function(e){return n.setNetworkType(t._userModule.getNetworkType()).setMessage("customStatus:".concat(o)).end(),He.l("".concat(a," ok. customStatus:").concat(o)),t._userModule.getModule(qa).setCustomStatus(o),Wi({userID:t._userModule.getMyUserID(),statusType:1,customStatus:o})})).catch((function(e){return t._userModule.probeNetwork().then((function(t){var a=_(t,2),o=a[0],i=a[1];n.setError(e,o,i).end()})),He.e("".concat(a," failed. error:"),e),er(e)}))}},{key:"getUserStatus",value:function(e){var t=this,a="".concat(this._n,".getUserStatus"),n=e.userIDList,o=void 0===n?[]:n,i=this._userModule.getMyUserID(),r=k(o),s=void 0,l=r.indexOf(i);if(l>-1){r.splice(l,1);var c=this._userModule.getModule(qa).getCustomStatus();s={userID:i,statusType:1,customStatus:c}}if(0===r.length)return Qi({successUserList:[s],failureUserList:[]});if(!this._userModule.canIUse(H.USER_STATUS))return er({code:fi.CANNOT_USE_COMMERCIAL_ABILITY});r.length>this.MAX_QUERY_USER_COUNT&&(He.w("".concat(a," ").concat(Yt(this.MAX_QUERY_USER_COUNT))),r=o.slice(0,this.MAX_QUERY_USER_COUNT));var u=new Vi("getUserStatus");return this._userModule.request({protocolName:ci,requestData:{userIDList:r}}).then((function(e){var n=e.data,i=n.successUserList,r=void 0===i?[]:i,l=n.failureUserList,c=void 0===l?[]:l,d=r.map((function(e){var t=e.userID,a=e.statusType,n=e.customStatus;return{userID:t,statusType:a,customStatus:Xr(n)}})),m=c.map((function(e){var t=e.userID,a=e.invalidUserID,n=e.errorCode,o=e.errorInfo;return{userID:Zt(a)?t:a,code:n,message:o}}));ct(s)||d.unshift(s);var p="userID count:".concat(o.length,", success count:").concat(d.length,", fail count:").concat(m.length);return u.setNetworkType(t._userModule.getNetworkType()).setMessage("".concat(p)).end(),He.l("".concat(a," ok. ").concat(p,".")),Wi({successUserList:d,failureUserList:m})})).catch((function(e){return t._userModule.probeNetwork().then((function(t){var a=_(t,2),n=a[0],i=a[1];u.setMessage("userID count:".concat(o.length)).setError(e,n,i).end()})),He.e("".concat(a," failed. error:"),e),er(e)}))}},{key:"subscribeUserStatus",value:function(e){var t=this;if(!this._userModule.canIUse(H.USER_STATUS))return er({code:fi.CANNOT_USE_COMMERCIAL_ABILITY});var a="".concat(this._n,".subscribeUserStatus"),n=e.userIDList,o=void 0===n?[]:n,i=k(o);i.length>this.MAX_SUBSCRIBE_USER_COUNT&&(He.w("".concat(a," ").concat(Yt(this.MAX_SUBSCRIBE_USER_COUNT))),i=o.slice(0,this.MAX_SUBSCRIBE_USER_COUNT));var r=new Vi("subscribeUserStatus"),s="userID count:".concat(o.length);return He.l("".concat(a," ").concat(s)),this._userModule.request({protocolName:ui,requestData:{userIDList:i}}).then((function(e){var n=e.data.failureUserList,o=(void 0===n?[]:n).map((function(e){var t=e.userID,a=e.invalidUserID,n=e.errorCode,o=e.errorInfo;return{userID:Zt(a)?t:a,code:n,message:o}}));return r.setNetworkType(t._userModule.getNetworkType()).setMessage("".concat(s," fail count:").concat(o.length)).end(),He.l("".concat(a," ok. fail count:").concat(o.length,".")),Wi({failureUserList:o})})).catch((function(e){return t._userModule.probeNetwork().then((function(t){var a=_(t,2),n=a[0],o=a[1];r.setMessage("".concat(s)).setError(e,n,o).end()})),He.e("".concat(a," failed. error:"),e),er(e)}))}},{key:"unsubscribeUserStatus",value:function(e){var t=this;if(!this._userModule.canIUse(H.USER_STATUS))return er({code:fi.CANNOT_USE_COMMERCIAL_ABILITY});var a="".concat(this._n,".unsubscribeUserStatus"),n=(e||{}).userIDList,o=void 0===n?[]:n,i=k(o);o.length>this.MAX_UNSUBSCRIBE_USER_COUNT&&(He.w("".concat(a," ").concat(Yt(this.MAX_UNSUBSCRIBE_USER_COUNT))),i=o.slice(0,this.MAX_UNSUBSCRIBE_USER_COUNT));var r=new Vi("unsubscribeUserStatus"),s="userID count:".concat(o.length);He.l("".concat(a," ").concat(s));var l={userIDList:i};return 0===i.length&&(l.userIDList=void 0,l.unsubscribeAll=1),this._userModule.request({protocolName:di,requestData:l}).then((function(e){var n=e.data.failureUserList,o=(void 0===n?[]:n).map((function(e){var t=e.userID,a=e.invalidUserID,n=e.errorCode,o=e.errorInfo;return{userID:Zt(a)?t:a,code:n,message:o}}));return r.setNetworkType(t._userModule.getNetworkType()).setMessage("".concat(s," fail count:").concat(o.length)).end(),He.l("".concat(a," ok. fail count:").concat(o.length,".")),Wi({failureUserList:o})})).catch((function(e){return t._userModule.probeNetwork().then((function(t){var a=_(t,2),n=a[0],o=a[1];r.setMessage("".concat(s)).setError(e,n,o).end()})),He.e("".concat(a," failed. error:"),e),er(e)}))}},{key:"reset",value:function(){this.MAX_QUERY_USER_COUNT=500,this.MAX_SUBSCRIBE_USER_COUNT=100,this.MAX_UNSUBSCRIBE_USER_COUNT=100}}]),e}(),es=function(e){l(a,e);var t=y(a);function a(e){var o;return n(this,a),(o=t.call(this,e))._n="UserModule",o._profileHandler=new Wr(g(o)),o._blacklistHandler=new Zr(g(o)),o._userStatusHandler=new Qr(g(o)),o.getInnerEmitterInstance().on(nr,o.onContextUpdated,g(o)),o}return r(a,[{key:"onContextUpdated",value:function(e){this._profileHandler.getMyProfile(),this._blacklistHandler.getBlacklist()}},{key:"onProfileModified",value:function(e){this._profileHandler.onProfileModified(e)}},{key:"onRelationChainModified",value:function(e){var t=e.dataList;if(!Zt(t)){var a=[];t.forEach((function(e){e.blackListDelAccount&&a.push.apply(a,k(e.blackListDelAccount))})),a.length>0&&this._blacklistHandler.onAccountDeleted(a);var n=[];t.forEach((function(e){e.blackListAddAccount&&n.push.apply(n,k(e.blackListAddAccount))})),n.length>0&&this._blacklistHandler.onAccountAdded(n)}}},{key:"onConversationsProfileUpdated",value:function(e){this._profileHandler.onConversationsProfileUpdated(e)}},{key:"getMyAccount",value:function(){return this.getMyUserID()}},{key:"getMyProfile",value:function(){return this._profileHandler.getMyProfile()}},{key:"getStorageModule",value:function(){return this.getModule(za)}},{key:"filterProfanity",value:function(e,t){var a=this.getModule(rn);if(!a)return!0;var n=a.filterText(t[e],W),o=n.isAllowedToSend,i=n.modifiedText;return!0===o&&(t[e]=i,!0)}},{key:"isMyFriend",value:function(e){var t=this.getModule(Pa);return!!t&&t.isMyFriend(e)}},{key:"getUserProfile",value:function(e){return this._profileHandler.getUserProfile(e)}},{key:"updateMyProfile",value:function(e){return this._profileHandler.updateMyProfile(e)}},{key:"getNickAndAvatarByUserID",value:function(e){return this._profileHandler.getNickAndAvatarByUserID(e)}},{key:"getLocalBlacklist",value:function(){var e=this._blacklistHandler.getLocalBlacklist();return Qi(e)}},{key:"addBlacklist",value:function(e){return this._blacklistHandler.addBlacklist(e)}},{key:"deleteBlacklist",value:function(e){return this._blacklistHandler.deleteBlacklist(e)}},{key:"onUserStatusUpdated",value:function(e){this._userStatusHandler.onUserStatusUpdated(e)}},{key:"setSelfStatus",value:function(e){return this._userStatusHandler.setSelfStatus(e)}},{key:"getUserStatus",value:function(e){return this._userStatusHandler.getUserStatus(e)}},{key:"subscribeUserStatus",value:function(e){return this._userStatusHandler.subscribeUserStatus(e)}},{key:"unsubscribeUserStatus",value:function(e){return this._userStatusHandler.unsubscribeUserStatus(e)}},{key:"reset",value:function(){He.l("".concat(this._n,".reset")),this._profileHandler.reset(),this._blacklistHandler.reset(),this._userStatusHandler.reset()}}]),a}(dn),ts=function(){function e(t,a){n(this,e),this._m=t,this._isLoggedIn=!1,this._SDKAppID=a.SDKAppID,this._userID=a.userID||"",this._userSig=a.userSig||"",this._version="2.27.6",this._a2Key="",this._tinyID="",this._customStatus="",this._contentType="json",this._unlimitedAVChatRoom=a.unlimitedAVChatRoom,this._scene=a.scene||"",this._oversea=a.oversea,this._instanceID=a.instanceID,this._statusInstanceID=0,this._isDevMode=a.devMode,this._proxyServer=a.proxyServer,this._fileUploadProxy=a.fileUploadProxy,this._fileDownloadProxy=a.fileDownloadProxy}return r(e,[{key:"isLoggedIn",value:function(){return this._isLoggedIn}},{key:"isOversea",value:function(){return this._oversea}},{key:"isPrivateNetWork",value:function(){return this._proxyServer}},{key:"isDevMode",value:function(){return this._isDevMode}},{key:"isSingaporeSite",value:function(){return this._SDKAppID>=2e7&&this._SDKAppID<3e7||this._SDKAppID>=172e7&&this._SDKAppID<173e7}},{key:"isKoreaSite",value:function(){return this._SDKAppID>=3e7&&this._SDKAppID<4e7||this._SDKAppID>=173e7&&this._SDKAppID<174e7}},{key:"isGermanySite",value:function(){return this._SDKAppID>=4e7&&this._SDKAppID<5e7||this._SDKAppID>=174e7&&this._SDKAppID<175e7}},{key:"isIndiaSite",value:function(){return this._SDKAppID>=5e7&&this._SDKAppID<6e7||this._SDKAppID>=175e7&&this._SDKAppID<176e7}},{key:"isJapanSite",value:function(){return this._SDKAppID>=6e7&&this._SDKAppID<7e7||this._SDKAppID>=176e7&&this._SDKAppID<177e7}},{key:"isUSASite",value:function(){return this._SDKAppID>=7e7&&this._SDKAppID<8e7||this._SDKAppID>=177e7&&this._SDKAppID<178e7}},{key:"isIntl",value:function(){return 0===(e=this._SDKAppID)||e>=2e7&&e<8e7||e>=172e7&&e<178e7;var e}},{key:"isUnlimitedAVChatRoom",value:function(){return this._unlimitedAVChatRoom}},{key:"setUserID",value:function(e){this._userID=e}},{key:"getUserID",value:function(){return this._userID}},{key:"setUserSig",value:function(e){this._userSig=e}},{key:"getUserSig",value:function(){return this._userSig}},{key:"getSDKAppID",value:function(){return this._SDKAppID}},{key:"setTinyID",value:function(e){this._tinyID=e,this._isLoggedIn=!0}},{key:"getTinyID",value:function(){return this._tinyID}},{key:"setCustomStatus",value:function(e){this._customStatus=e}},{key:"getCustomStatus",value:function(){return this._customStatus}},{key:"getScene",value:function(){return Ve?window.tencent_cloud_im_csig_flutter_for_web_25F_cy:this._isTUIKit()?"tuikit":this._scene}},{key:"getInstanceID",value:function(){return this._instanceID}},{key:"getStatusInstanceID",value:function(){return this._statusInstanceID}},{key:"setStatusInstanceID",value:function(e){this._statusInstanceID=e}},{key:"getVersion",value:function(){return this._version}},{key:"getA2Key",value:function(){return this._a2Key}},{key:"setA2Key",value:function(e){this._a2Key=e}},{key:"getContentType",value:function(){return this._contentType}},{key:"getProxyServer",value:function(){return this._proxyServer}},{key:"getFileUploadProxy",value:function(){return this._fileUploadProxy}},{key:"getFileDownloadProxy",value:function(){return this._fileDownloadProxy}},{key:"_isTUIKit",value:function(){var e=!1,t=!1,a=!1,n=!1,o=[];se&&(o=Object.keys(ce)),le&&(o=re?Object.keys(uni):Object.keys(window));for(var i=0,r=o.length;i<r;i++)if(o[i].toLowerCase().includes("uikit")){e=!0;break}if(o=null,se&&!dt(ce.createGamePortal)&&dt(getApp)&&!ct(getApp())){var s=getApp().globalData;st(s)&&!0===s.isTUIKit&&(t=!0)}!0===this._m.getModule(za).getStorageSync("TIM_".concat(this._SDKAppID,"_isTUIKit"))&&(a=!0);var l=null;if(X&&!te&&"undefined"==typeof uni&&__wxConfig&&(l=__wxConfig.pages),ee&&"undefined"==typeof uni&&__qqConfig&&(l=__qqConfig.pages),lt(l)&&l.length>0){for(var c=0,u=l.length;c<u;c++)if(l[c].toLowerCase().includes("tui")){n=!0;break}l=null}return e||t||a||n}},{key:"reset",value:function(){this._isLoggedIn=!1,this._userSig="",this._a2Key="",this._tinyID="",this._customStatus="",this._statusInstanceID=0}}]),e}(),as=function(e){l(a,e);var t=y(a);function a(e){var o;return n(this,a),(o=t.call(this,e))._n="SignModule",o._helloInterval=120,o._lastLoginTs=0,o._lastWsHelloTs=0,o._isWebUniapp=0,rr.mixin(g(o)),o}return r(a,[{key:"onCheckTimer",value:function(e){this.isLoggedIn()&&e%this._helloInterval==0&&this._hello()}},{key:"login",value:function(e){var t="";if(this.isLoggedIn()){var a=this.getMyUserID();return(t=this.getErrorMessage("RepeatLogin",a))&&He.w(t),Qi({actionStatus:"OK",errorCode:0,errorInfo:t,repeatLogin:!0})}if(Date.now()-this._lastLoginTs<=15e3)return this.outputWarning("LoggingIn",e.userID),er({code:fi.REPEAT_LOGIN});He.l("".concat(this._n,".login userID:").concat(e.userID));var n=this._checkLoginInfo(e);if(0!==n.code)return er(n);var o=this.getModule(qa),i=e.userID,r=e.userSig;return o.setUserID(i),o.setUserSig(r),this.getModule(Ja).updateProtocolConfig(),this._login()}},{key:"_login",value:function(){var e=this,t=this.getModule(qa),a=t.getScene(),n=0,o=new Vi("login");o.setMessage("".concat(a)).setMoreMessage("identifier:".concat(this.getMyUserID())),re?"tuikit"===a?o.setUIPlatform(4):o.setUIPlatform(3):se?"tuikit"===a?o.setUIPlatform(12):o.setUIPlatform(11):le&&(Ve?"flutter_web_uikit"===a?o.setUIPlatform(21):o.setUIPlatform(20):this._isReactUIKit()?be?o.setUIPlatform(25):o.setUIPlatform(24):be?"tuikit"===a?o.setUIPlatform(17):o.setUIPlatform(16):"tuikit"===a?o.setUIPlatform(14):o.setUIPlatform(13));var i=this.getModule(on);if(i.canIUseOfflinePush()){this._isWebUniapp=i.getUniAppPlatform();var r=this._getStatusInstanceID();t.setStatusInstanceID(r),this.getModule(Ja).updateProtocolConfig(),n=i.getDeviceBrand()}var s="".concat(this._n,"._login");return this._lastLoginTs=Date.now(),this.request({protocolName:mn,requestData:{deviceBrand:n,isWebUniapp:this._isWebUniapp}}).then((function(n){e._lastLoginTs=0;var i=Date.now(),r=null,l=n.data,c=l.a2Key,u=l.tinyID,d=l.helloInterval,m=l.instanceID,p=l.timeStamp,h=l.customStatus,v=void 0===h?"":h,g=l.purchaseBits;He.l("".concat(s," ok. scene:").concat(a," helloInterval:").concat(d," instanceID:").concat(m," timeStamp:").concat(p));var f=1e3*p,y=i-o.getStartTs(),_=f+parseInt(y/2)-i,k=o.getStartTs()+_;if(o.start(k),function(e,t){Be=t;var a=new Date;a.setTime(e),He.i("baseTime from server:".concat(a," offset:").concat(Be))}(f,_),!u)throw r=new Ji({code:fi.NO_TINYID}),o.setError(r,!0,e.getNetworkType()).end(),r;if(!c)throw r=new Ji({code:fi.NO_A2KEY}),o.setError(r,!0,e.getNetworkType()).end(),r;var E=Xr(v);o.setNetworkType(e.getNetworkType()).setMoreMessage("helloInterval:".concat(d," instanceID:").concat(m," offset:").concat(_," customStatus:").concat(E)).end(),t.setA2Key(c),t.setTinyID(u),t.setStatusInstanceID(m),t.setCustomStatus(E),g&&e.getModule(nn).onPushedConfig({errorCode:0,expiredTime:0,purchaseBits:g}),e.getModule(Ja).updateProtocolConfig(),e.emitInnerEvent(nr),e._helloInterval=d,e.triggerReady();var x=e.getModule(on);return x.canIUseOfflinePush()&&(uni.setStorageSync("timUniAppInstanceID",m),x.init()),e._fetchCloudControlConfig(),e.getModule(rn).init(),n})).catch((function(t){return e.probeNetwork().then((function(e){var a=_(e,2),n=a[0],i=a[1];o.setError(t,n,i).end(!0)})),e._m.setNotReadyReason(fi.LOGIN_FAILED),He.e("".concat(s," failed. error:"),t),e._lastLoginTs=0,e._m.onLoginFailed(),er(t)}))}},{key:"logout",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!this.isLoggedIn())return er({code:fi.USER_NOT_LOGGED_IN});new Vi("logout").setNetworkType(this.getNetworkType()).setMessage("identifier:".concat(this.getMyUserID())).end(!0);var a="".concat(this._n,".logout");return He.i("".concat(a," type:").concat(t)),0===t&&this._m.setNotReadyReason(fi.LOGGED_OUT),this.request({protocolName:pn,requestData:{type:t}}).then((function(){return e.resetReady(),Qi({})})).catch((function(t){return He.e("".concat(a," error:"),t),e.resetReady(),Qi({})}))}},{key:"_fetchCloudControlConfig",value:function(){this.getModule(Qa).fetchConfig()}},{key:"_getStatusInstanceID",value:function(){return uni.getStorageSync("timUniAppInstanceID")}},{key:"_hello",value:function(){var e=this;this._lastWsHelloTs=Date.now(),this.request({protocolName:hn,requestData:{isWebUniapp:this._isWebUniapp}}).catch((function(t){He.w("".concat(e._n,"._hello error:"),t)}))}},{key:"getLastWsHelloTs",value:function(){return this._lastWsHelloTs}},{key:"_checkLoginInfo",value:function(e){var t=0;return Zt(this.getModule(qa).getSDKAppID())?t=fi.NO_SDKAPPID:Zt(e.userID)?t=fi.NO_IDENTIFIER:Zt(e.userSig)&&(t=fi.NO_USERSIG),{code:t}}},{key:"_isReactUIKit",value:function(){return le&&void 0!==window.tencent_cloud_im_csig_react_uikit_23F_xa}},{key:"onMultipleAccountKickedOut",value:function(e){var t=this;new Vi("kickedOut").setNetworkType(this.getNetworkType()).setMessage("type:".concat(I.KICKED_OUT_MULT_ACCOUNT," newInstanceInfo:").concat(JSON.stringify(e))).end(!0),He.w("".concat(this._n,".onMultipleAccountKickedOut userID:").concat(this.getMyUserID()," newInstanceInfo:"),e),this.logout(1).then((function(){t.emitOuterEvent(S.KICKED_OUT,{type:I.KICKED_OUT_MULT_ACCOUNT}),t._m.setNotReadyReason(fi.KICKED_OUT_MULT_ACCOUNT),t._m.reset()}))}},{key:"onMultipleDeviceKickedOut",value:function(e){var t=this;new Vi("kickedOut").setNetworkType(this.getNetworkType()).setMessage("type:".concat(I.KICKED_OUT_MULT_DEVICE," newInstanceInfo:").concat(JSON.stringify(e))).end(!0),He.w("".concat(this._n,".onMultipleDeviceKickedOut userID:").concat(this.getMyUserID()," newInstanceInfo:"),e),this.logout(1).then((function(){t.emitOuterEvent(S.KICKED_OUT,{type:I.KICKED_OUT_MULT_DEVICE}),t._m.setNotReadyReason(fi.KICKED_OUT_MULT_DEVICE),t._m.reset()}))}},{key:"onUserSigExpired",value:function(){new Vi("kickedOut").setNetworkType(this.getNetworkType()).setMessage(I.KICKED_OUT_USERSIG_EXPIRED).end(!0),He.w("".concat(this._n,".onUserSigExpired: userSig expired")),0!==this.getModule(qa).getStatusInstanceID()&&(this.emitOuterEvent(S.KICKED_OUT,{type:I.KICKED_OUT_USERSIG_EXPIRED}),this._m.setNotReadyReason(fi.KICKED_OUT_USERSIG_EXPIRED),this._m.reset())}},{key:"onRestApiKickedOut",value:function(e){new Vi("kickedOut").setNetworkType(this.getNetworkType()).setMessage("type:".concat(I.KICKED_OUT_REST_API," newInstanceInfo:").concat(JSON.stringify(e))).end(!0),He.w("".concat(this._n,".onRestApiKickedOut userID:").concat(this.getMyUserID()," newInstanceInfo:"),e),0!==this.getModule(qa).getStatusInstanceID()&&(this.emitOuterEvent(S.KICKED_OUT,{type:I.KICKED_OUT_REST_API}),this._m.setNotReadyReason(fi.KICKED_OUT_REST_API),this._m.reset(),this.getModule(Za).onRestApiKickedOut())}},{key:"reset",value:function(){He.l("".concat(this._n,".reset")),this.resetReady(),this._helloInterval=120,this._lastLoginTs=0,this._lastWsHelloTs=0,this._isWebUniapp=0}}]),a}(dn);function ns(){return null}var os=function(){function e(t){n(this,e),this._m=t,this._n="StorageModule",this._storageQueue=new Map,this._errorTolerantHandle()}return r(e,[{key:"_errorTolerantHandle",value:function(){se||!ct(window)&&this._canIUseCookies()||(this.getItem=ns,this.setItem=ns,this.removeItem=ns,this.clear=ns)}},{key:"onCheckTimer",value:function(e){if(e%20==0){if(0===this._storageQueue.size)return;this._doFlush()}}},{key:"_doFlush",value:function(){try{var e,t=M(this._storageQueue);try{for(t.s();!(e=t.n()).done;){var a=_(e.value,2),n=a[0],o=a[1];this._setStorageSync(this._getKey(n),o)}}catch(i){t.e(i)}finally{t.f()}this._storageQueue.clear()}catch(r){He.w("".concat(this._n,"._doFlush error:"),r)}}},{key:"_getPrefix",value:function(){var e=this._m.getModule(qa);return"TIM_".concat(e.getSDKAppID(),"_").concat(e.getUserID(),"_")}},{key:"_getKey",value:function(e){return"".concat(this._getPrefix()).concat(e)}},{key:"getItem",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{var a=t?this._getKey(e):e;return this.getStorageSync(a)}catch(n){return He.w("".concat(this._n,".getItem error:"),n),{}}}},{key:"setItem",value:function(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2]){var a=arguments.length>3&&void 0!==arguments[3]&&!arguments[3]?e:this._getKey(e);this._setStorageSync(a,t)}else this._storageQueue.set(e,t)}},{key:"clear",value:function(){try{se?ce.clearStorageSync():this._canIUseCookies()&&localStorage.clear()}catch(e){He.w("".concat(this._n,".clear error:"),e)}}},{key:"removeItem",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{var a=t?this._getKey(e):e;this._removeStorageSync(a)}catch(n){He.w("".concat(this._n,".removeItem error:"),n)}}},{key:"getSize",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"b";try{var n={size:0,limitSize:5242880,unit:a};if(Object.defineProperty(n,"leftSize",{enumerable:!0,get:function(){return n.limitSize-n.size}}),se&&(n.limitSize=1024*ce.getStorageInfoSync().limitSize),e)n.size=JSON.stringify(this.getItem(e)).length+this._getKey(e).length;else if(se)ce.getStorageInfoSync().keys.forEach((function(e){n.size+=JSON.stringify(t.getStorageSync(e)).length+t._getKey(e).length}));else if(this._canIUseCookies())for(var o in localStorage)localStorage.hasOwnProperty(o)&&(n.size+=localStorage.getItem(o).length+o.length);return this._convertUnit(n)}catch(i){He.w("".concat(this._n," error:"),i)}}},{key:"_convertUnit",value:function(e){var t={},a=e.unit;for(var n in t.unit=a,e)"number"==typeof e[n]&&("kb"===a.toLowerCase()?t[n]=Math.round(e[n]/1024):"mb"===a.toLowerCase()?t[n]=Math.round(e[n]/1024/1024):t[n]=e[n]);return t}},{key:"_setStorageSync",value:function(e,t){se?ne?my.setStorageSync({key:e,data:t}):ce.setStorageSync(e,t):this._canIUseCookies()&&localStorage.setItem(e,JSON.stringify(t))}},{key:"getStorageSync",value:function(e){return se?ne?my.getStorageSync({key:e}).data:ce.getStorageSync(e):this._canIUseCookies()?JSON.parse(localStorage.getItem(e)):{}}},{key:"_removeStorageSync",value:function(e){se?ne?my.removeStorageSync({key:e}):ce.removeStorageSync(e):this._canIUseCookies()&&localStorage.removeItem(e)}},{key:"_canIUseCookies",value:function(){return navigator&&navigator.cookieEnabled&&localStorage}},{key:"reset",value:function(){He.l("".concat(this._n,".reset")),this._doFlush()}}]),e}(),is=function(){function e(t){n(this,e),this._n="SSOLogBody",this._report=[]}return r(e,[{key:"pushIn",value:function(e){He.d("".concat(this._n,".pushIn"),this._report.length,e),this._report.push(e)}},{key:"backfill",value:function(e){var t;lt(e)&&0!==e.length&&(He.d("".concat(this._n,".backfill"),this._report.length,e.length),(t=this._report).unshift.apply(t,k(e)))}},{key:"getLogsNumInMemory",value:function(){return this._report.length}},{key:"isEmpty",value:function(){return 0===this._report.length}},{key:"_reset",value:function(){this._report.length=0,this._report=[]}},{key:"getLogsInMemory",value:function(){var e=this._report.slice();return this._reset(),e}}]),e}(),rs=function(e){var t=e.getModule(qa);return{SDKType:10,SDKAppID:t.getSDKAppID(),SDKVersion:t.getVersion(),tinyID:Number(t.getTinyID()),userID:t.getUserID(),platform:e.getPlatform(),instanceID:t.getInstanceID(),traceID:Pe()}},ss=function(e){l(o,e);var a=y(o);function o(e){var t;n(this,o),(t=a.call(this,e))._n="EventStatModule",t.TAG="im-ssolog-event",t._reportBody=new is,t.MIN_THRESHOLD=20,t.MAX_THRESHOLD=100,t.WAITING_TIME=6e4,t.REPORT_LEVEL=[4,5,6],t.REPORT_SDKAPPID_BLACKLIST=[],t.REPORT_TINYID_WHITELIST=[],t._lastReportTime=Date.now();var i=t.getInnerEmitterInstance();return i.on(nr,t._onLoginSuccess,g(t)),i.on(or,t._onCloudConfigUpdated,g(t)),t}return r(o,[{key:"reportAtOnce",value:function(){He.d("".concat(this._n,".reportAtOnce")),this._report()}},{key:"_onLoginSuccess",value:function(){var e=this,t=this.getModule(za),a=t.getItem(this.TAG,!1);!Zt(a)&&dt(a.forEach)&&(He.l("".concat(this._n,"._onLoginSuccess get ssolog in storage, count:").concat(a.length)),a.forEach((function(t){e._reportBody.pushIn(t)})),t.removeItem(this.TAG,!1))}},{key:"_onCloudConfigUpdated",value:function(){var e=this.getCloudConfig("evt_rpt_threshold"),t=this.getCloudConfig("evt_rpt_waiting"),a=this.getCloudConfig("evt_rpt_level"),n=this.getCloudConfig("evt_rpt_sdkappid_bl"),o=this.getCloudConfig("evt_rpt_tinyid_wl");ct(e)||(this.MIN_THRESHOLD=Number(e)),ct(t)||(this.WAITING_TIME=Number(t)),ct(a)||(this.REPORT_LEVEL=a.split(",").map((function(e){return Number(e)}))),ct(n)||(this.REPORT_SDKAPPID_BLACKLIST=n.split(",").map((function(e){return Number(e)}))),ct(o)||(this.REPORT_TINYID_WHITELIST=o.split(","))}},{key:"pushIn",value:function(e){e instanceof Vi&&(e.updateTimeStamp(),this._reportBody.pushIn(e),this._reportBody.getLogsNumInMemory()>=this.MIN_THRESHOLD&&this._report())}},{key:"onCheckTimer",value:function(){Date.now()<this._lastReportTime+this.WAITING_TIME||this._reportBody.isEmpty()||this._report()}},{key:"_filterLogs",value:function(e){var t=this,a=this.getModule(qa),n=a.getSDKAppID(),o=a.getTinyID();return Ft(this.REPORT_SDKAPPID_BLACKLIST,n)&&!qt(this.REPORT_TINYID_WHITELIST,o)?[]:e.filter((function(e){return t.REPORT_LEVEL.includes(e.level)}))}},{key:"_report",value:function(){var e=this;if(!this._reportBody.isEmpty()){var a=this._reportBody.getLogsInMemory(),n=this._filterLogs(a);if(0!==n.length){var o={header:rs(this),event:n};this.request({protocolName:$o,requestData:t({},o)}).then((function(){e._lastReportTime=Date.now()})).catch((function(t){He.w("".concat(e._n,".report failed. networkType:").concat(e.getNetworkType()," error:"),t),e._reportBody.backfill(a),e._reportBody.getLogsNumInMemory()>e.MAX_THRESHOLD&&e._flushAtOnce()}))}else this._lastReportTime=Date.now()}}},{key:"_flushAtOnce",value:function(){var e=this.getModule(za),t=e.getItem(this.TAG,!1),a=this._reportBody.getLogsInMemory(),n="".concat(this._n,"._flushAtOnce");if(Zt(t))He.l("".concat(n," count:").concat(a.length)),e.setItem(this.TAG,a,!0,!1);else{var o=a.concat(t);o.length>this.MAX_THRESHOLD&&(o=o.slice(0,this.MAX_THRESHOLD)),He.l("".concat(n," count:").concat(o.length)),e.setItem(this.TAG,o,!0,!1)}}},{key:"reset",value:function(){He.l("".concat(this._n,".reset")),this._lastReportTime=0,this._report(),this.REPORT_SDKAPPID_BLACKLIST=[],this.REPORT_TINYID_WHITELIST=[]}}]),o}(dn),ls="none",cs="online",us=[fi.OVER_FREQUENCY_LIMIT,fi.OPEN_SERVICE_OVERLOAD_ERROR],ds=function(){function e(t){n(this,e),this._m=t,this._networkType="",this._n="NetMonitorModule",this.MAX_WAIT_TIME=3e3,this._mpNetworkStatusCallback=null,this._webOnlineCallback=null,this._webOfflineCallback=null}return r(e,[{key:"start",value:function(){var e=this;se?(ce.getNetworkType({success:function(t){e._networkType=t.networkType||t.subtype||"",t.networkType===ls?He.w("".concat(e._n,".start no network, please check!")):He.i("".concat(e._n,".start networkType:").concat(t.networkType))}}),this._mpNetworkStatusCallback=this._onNetworkStatusChange.bind(this),ce.onNetworkStatusChange(this._mpNetworkStatusCallback)):(this._networkType=cs,this._webOnlineCallback=this._onWebOnline.bind(this),this._webOfflineCallback=this._onWebOffline.bind(this),window&&(window.addEventListener("online",this._webOnlineCallback),window.addEventListener("offline",this._webOfflineCallback)))}},{key:"_onWebOnline",value:function(){this._onNetworkStatusChange({isConnected:!0,networkType:cs})}},{key:"_onWebOffline",value:function(){this._onNetworkStatusChange({isConnected:!1,networkType:ls})}},{key:"_onNetworkStatusChange",value:function(e){var t=e.isConnected,a=e.networkType,n="".concat(this._n,"._onNetworkStatusChange"),o=!1;t?(He.i("".concat(n," previous:").concat(this._networkType," current:").concat(a)),this._networkType!==a&&(o=!0,this._m.getModule(Za).reConnect(!0))):this._networkType!==a&&(o=!0,He.w("".concat(n," no network, please check!")),this._m.getModule(Za).offline()),o&&(new Vi("networkChange").setMessage("isConnected:".concat(t," previousNetworkType:").concat(this._networkType," networkType:").concat(a)).end(),this._networkType=a)}},{key:"probe",value:function(e){var t=this;if(!ct(e)&&us.includes(e.code))return Promise.resolve([!0,this._networkType]);var a="".concat(this._n,".probe");return new Promise((function(e,n){se?ce.getNetworkType({success:function(n){t._networkType=n.networkType,n.networkType===ls?(He.w("".concat(a," no network, please check!")),e([!1,n.networkType])):(He.i("".concat(a," networkType:").concat(n.networkType)),e([!0,n.networkType]))}}):t._networkType===ls?e([!1,ls]):e([!0,cs])}))}},{key:"getNetworkType",value:function(){return this._networkType}},{key:"reset",value:function(){He.l("".concat(this._n,".reset")),se?null!==this._mpNetworkStatusCallback&&(ce.offNetworkStatusChange&&(ie||te?ce.offNetworkStatusChange(this._mpNetworkStatusCallback):ce.offNetworkStatusChange()),this._mpNetworkStatusCallback=null):window&&(null!==this._webOnlineCallback&&(window.removeEventListener("online",this._webOnlineCallback),this._webOnlineCallback=null),null!==this._onWebOffline&&(window.removeEventListener("offline",this._webOfflineCallback),this._webOfflineCallback=null))}}]),e}();function ms(e,t){return e(t={exports:{}},t.exports),t.exports}var ps=ms((function(e){var t=Object.prototype.hasOwnProperty,a="~";function n(){}function o(e,t,a){this.fn=e,this.context=t,this.once=a||!1}function i(e,t,n,i,r){if("function"!=typeof n)throw new TypeError("The listener must be a function");var s=new o(n,i||e,r),l=a?a+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function r(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function s(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(a=!1)),s.prototype.eventNames=function(){var e,n,o=[];if(0===this._eventsCount)return o;for(n in e=this._events)t.call(e,n)&&o.push(a?n.slice(1):n);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(e)):o},s.prototype.listeners=function(e){var t=a?a+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var o=0,i=n.length,r=new Array(i);o<i;o++)r[o]=n[o].fn;return r},s.prototype.listenerCount=function(e){var t=a?a+e:e,n=this._events[t];return n?n.fn?1:n.length:0},s.prototype.emit=function(e,t,n,o,i,r){var s=a?a+e:e;if(!this._events[s])return!1;var l,c,u=this._events[s],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,n),!0;case 4:return u.fn.call(u.context,t,n,o),!0;case 5:return u.fn.call(u.context,t,n,o,i),!0;case 6:return u.fn.call(u.context,t,n,o,i,r),!0}for(c=1,l=new Array(d-1);c<d;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var m,p=u.length;for(c=0;c<p;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,n);break;case 4:u[c].fn.call(u[c].context,t,n,o);break;default:if(!l)for(m=1,l=new Array(d-1);m<d;m++)l[m-1]=arguments[m];u[c].fn.apply(u[c].context,l)}}return!0},s.prototype.on=function(e,t,a){return i(this,e,t,a,!1)},s.prototype.once=function(e,t,a){return i(this,e,t,a,!0)},s.prototype.removeListener=function(e,t,n,o){var i=a?a+e:e;if(!this._events[i])return this;if(!t)return r(this,i),this;var s=this._events[i];if(s.fn)s.fn!==t||o&&!s.once||n&&s.context!==n||r(this,i);else{for(var l=0,c=[],u=s.length;l<u;l++)(s[l].fn!==t||o&&!s[l].once||n&&s[l].context!==n)&&c.push(s[l]);c.length?this._events[i]=1===c.length?c[0]:c:r(this,i)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=a?a+e:e,this._events[t]&&r(this,t)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=a,s.EventEmitter=s,e.exports=s})),hs=function(e){l(a,e);var t=y(a);function a(e){var o;return n(this,a),(o=t.call(this,e))._n="BigDataChannelModule",o.FILETYPE={SOUND:2106,FILE:2107,VIDEO:2113},o._bdh_download_server="grouptalk.c2c.qq.com",o._BDHBizID=10001,o._authKey="",o._expireTime=0,o.getInnerEmitterInstance().on(nr,o._getAuthKey,g(o)),o}return r(a,[{key:"_getAuthKey",value:function(){var e=this;this.isIntl()||this.request({protocolName:fn}).then((function(t){t.data.authKey&&(e._authKey=t.data.authKey,e._expireTime=parseInt(t.data.expireTime))}))}},{key:"_isFromOlderVersion",value:function(e){return!(!e.content||2===e.content.downloadFlag)}},{key:"parseElements",value:function(e,t){if(!lt(e)||!t)return[];for(var a=[],n=null,o=0;o<e.length;o++)n=e[o],this._needParse(n)?a.push(this._parseElement(n,t)):a.push(e[o]);return a}},{key:"_needParse",value:function(e){return!e.cloudCustomData&&!(!this._isFromOlderVersion(e)||e.type!==I.MSG_AUDIO&&e.type!==I.MSG_FILE&&e.type!==I.MSG_VIDEO)}},{key:"_parseElement",value:function(e,t){switch(e.type){case I.MSG_AUDIO:return this._parseAudioElement(e,t);case I.MSG_FILE:return this._parseFileElement(e,t);case I.MSG_VIDEO:return this._parseVideoElement(e,t)}}},{key:"_parseAudioElement",value:function(e,t){return e.content.url=this._genAudioUrl(e.content.uuid,t),e}},{key:"_parseFileElement",value:function(e,t){return e.content.url=this._genFileUrl(e.content.uuid,t,e.content.fileName),e}},{key:"_parseVideoElement",value:function(e,t){return e.content.url=this._genVideoUrl(e.content.uuid,t),e}},{key:"_genAudioUrl",value:function(e,t){if(""===this._authKey)return"";var a=this.getModule(qa).getSDKAppID();return"https://".concat(this._bdh_download_server,"/asn.com/stddownload_common_file?authkey=").concat(this._authKey,"&bid=").concat(this._BDHBizID,"&subbid=").concat(a,"&fileid=").concat(e,"&filetype=").concat(this.FILETYPE.SOUND,"&openid=").concat(t,"&ver=0")}},{key:"_genFileUrl",value:function(e,t,a){if(""===this._authKey)return"";a||(a="".concat(Math.floor(1e5*Math.random()),"-").concat(Date.now()));var n=this.getModule(qa).getSDKAppID();return"https://".concat(this._bdh_download_server,"/asn.com/stddownload_common_file?authkey=").concat(this._authKey,"&bid=").concat(this._BDHBizID,"&subbid=").concat(n,"&fileid=").concat(e,"&filetype=").concat(this.FILETYPE.FILE,"&openid=").concat(t,"&ver=0&filename=").concat(encodeURIComponent(a))}},{key:"_genVideoUrl",value:function(e,t){if(""===this._authKey)return"";var a=this.getModule(qa).getSDKAppID();return"https://".concat(this._bdh_download_server,"/asn.com/stddownload_common_file?authkey=").concat(this._authKey,"&bid=").concat(this._BDHBizID,"&subbid=").concat(a,"&fileid=").concat(e,"&filetype=").concat(this.FILETYPE.VIDEO,"&openid=").concat(t,"&ver=0")}},{key:"reset",value:function(){this._authKey="",this.expireTime=0}}]),a}(dn),vs=["requestSnapshotUrl"],gs=function(e){l(o,e);var a=y(o);function o(e){var t;n(this,o),(t=a.call(this,e))._n="UploadModule",t.TIMUploadPlugin=null,t.timUploadPlugin=null,t.COSSDK=null,t._cosUploadMethod=null,t.expiredTimeLimit=600,t.appid=0,t.bucketName="",t.ciUrl="",t.directory="",t.downloadUrl="",t.uploadUrl="",t.region="ap-shanghai",t.cos=null,t.cosOptions={secretId:"",secretKey:"",sessionToken:"",expiredTime:0},t.uploadFileType="",t.duration=900,t.tryCount=0,t.UPLOAD_SIZE_LIMIT={AUDIO:20971520,FILE:104857600,IMAGE:20971520,VIDEO:104857600};var i=t.getInnerEmitterInstance();return i.on(nr,t._init,g(t)),i.on(or,t._onCloudConfigUpdated,g(t)),t}return r(o,[{key:"_init",value:function(){var e=this.getModule(Ya);if(this.TIMUploadPlugin=e.getPlugin("tim-upload-plugin"),this.TIMUploadPlugin)this._initUploaderMethod();else{var t=se?"cos-wx-sdk":"cos-js-sdk";this.COSSDK=e.getPlugin(t),this.COSSDK?(this._getAuthorizationKey(),this.outputWarning("CosReplacement",t)):this.outputWarning("PluginUndetected")}}},{key:"_onCloudConfigUpdated",value:function(){var e="".concat(this._n,"._onCloudConfigUpdated"),t=this.getCloudConfig("upload_size_limit");if(He.l("".concat(e," uploadSizeLimit:").concat(t)),!ct(t))try{var a=JSON.parse(t);this.UPLOAD_SIZE_LIMIT={AUDIO:a.a?1048576*parseInt(a.a):this.UPLOAD_SIZE_LIMIT.AUDIO,FILE:a.f?1048576*parseInt(a.f):this.UPLOAD_SIZE_LIMIT.FILE,IMAGE:a.i?1048576*parseInt(a.i):this.UPLOAD_SIZE_LIMIT.IMAGE,VIDEO:a.v?1048576*parseInt(a.v):this.UPLOAD_SIZE_LIMIT.VIDEO}}catch(n){He.e("".concat(e," JSON parse error. uploadSizeLimit:"),t)}}},{key:"_getAuthorizationKey",value:function(){var e=this,t="".concat(this._n,".").concat("_getAuthorizationKey"),a=new Vi("_getAuthorizationKey"),n=Math.ceil(Date.now()/1e3);this.request({protocolName:qo,requestData:{duration:this.expiredTimeLimit}}).then((function(o){var i=o.data;He.l("".concat(t," ok. data:"),i);var r=i.expiredTime-n;a.setMessage("requestId:".concat(i.requestId," requestTime:").concat(n," expiredTime:").concat(i.expiredTime," diff:").concat(r,"s")).setNetworkType(e.getNetworkType()).end(),!se&&i.region&&(e.region=i.region),e.appid=i.appid,e.bucketName=i.bucketName,e.ciUrl=i.ciUrl,e.directory=i.directory,e.downloadUrl=i.downloadUrl,e.uploadUrl=i.uploadUrl,e.cosOptions={secretId:i.secretId,secretKey:i.secretKey,sessionToken:i.sessionToken,expiredTime:i.expiredTime},He.l("".concat(t," ok. region:").concat(e.region," bucketName:").concat(e.bucketName)),e._initUploaderMethod()})).catch((function(n){e.probeNetwork().then((function(e){var t=_(e,2),o=t[0],i=t[1];a.setError(n,o,i).end()})),He.w("".concat(t," failed. error:"),n)}))}},{key:"_getCosPreSigUrl",value:function(e){var t=this,a="".concat(this._n,".").concat("_getCosPreSigUrl"),n=Math.ceil(Date.now()/1e3),o=new Vi("_getCosPreSigUrl");return this.request({protocolName:zo,requestData:{fileType:e.fileType,fileName:e.fileName,uploadMethod:e.uploadMethod,duration:e.duration}}).then((function(e){t.tryCount=0;var i=e.data||{},r=i.expiredTime-n;return He.l("".concat(a," ok. data:"),i),o.setMessage("requestId:".concat(i.requestId," expiredTime:").concat(i.expiredTime," diff:").concat(r,"s")).setNetworkType(t.getNetworkType()).end(),i})).catch((function(n){return-1===n.code&&(n.code=fi.COS_GET_SIG_FAIL),t.probeNetwork().then((function(e){var t=_(e,2),a=t[0],i=t[1];o.setError(n,a,i).end()})),He.w("".concat(a," failed. error:"),n),t.tryCount<1?(t.tryCount++,t._getCosPreSigUrl(e)):(t.tryCount=0,er({code:fi.COS_GET_SIG_FAIL}))}))}},{key:"_initUploaderMethod",value:function(){var e=this;if(this.TIMUploadPlugin)return this.timUploadPlugin=new this.TIMUploadPlugin,void(this._cosUploadMethod=function(t,a){e.timUploadPlugin.uploadFile(t,a)});this.appid&&(this.cos=se?new this.COSSDK({ForcePathStyle:!0,getAuthorization:this._getAuthorization.bind(this)}):new this.COSSDK({getAuthorization:this._getAuthorization.bind(this)}),this._cosUploadMethod=se?function(t,a){e.cos.postObject(t,a)}:function(t,a){e.cos.uploadFiles(t,a)})}},{key:"onCheckTimer",value:function(e){this.COSSDK&&(this.TIMUploadPlugin||this.isLoggedIn()&&e%60==0&&Math.ceil(Date.now()/1e3)>=this.cosOptions.expiredTime-120&&this._getAuthorizationKey())}},{key:"_getAuthorization",value:function(e,t){t({TmpSecretId:this.cosOptions.secretId,TmpSecretKey:this.cosOptions.secretKey,XCosSecurityToken:this.cosOptions.sessionToken,ExpiredTime:this.cosOptions.expiredTime})}},{key:"upload",value:function(e){if(!0===e.getRelayFlag())return Promise.resolve();var t=this.getModule(an);switch(e.type){case I.MSG_IMAGE:return t.addTotalCount(wi),this._uploadImage(e);case I.MSG_FILE:return t.addTotalCount(wi),this._uploadFile(e);case I.MSG_AUDIO:return t.addTotalCount(wi),this._uploadAudio(e);case I.MSG_VIDEO:return t.addTotalCount(wi),this._uploadVideo(e);default:return Promise.resolve()}}},{key:"_uploadImage",value:function(e){var a=this,n=this.getModule(Aa),o=e.getElements()[0],i=n.getMessageOption(e.clientSequence);return this.doUploadImage({file:i.payload.file,to:i.to,onProgress:function(e){if(o.updatePercent(e),dt(i.onProgress))try{i.onProgress(e)}catch(t){return er({code:fi.MESSAGE_ONPROGRESS_FUNCTION_ERROR})}}}).then((function(n){var i,r,s=n.location,l=n.fileType,c=n.fileSize,u=n.width,d=n.height,m=n.smallImageUrl,p=n.smallImageWidth,h=n.smallImageHeight,v=n.largeImageUrl,g=n.largeImageWidth,f=n.largeImageHeight,y=a.isPrivateNetWork()?s:Nt(s);return o.updateImageFormat(l),m&&v?(i={url:m,width:p,height:h},r={url:v,width:g,height:f}):(i=Bt({originUrl:y,originWidth:u,originHeight:d,min:198}),r=Bt({originUrl:y,originWidth:u,originHeight:d,min:720})),o.updateImageInfoArray([{size:c,url:y,width:u,height:d},t({},r),t({},i)]),e}))}},{key:"_uploadFile",value:function(e){var t=this,a=this.getModule(Aa),n=e.getElements()[0],o=a.getMessageOption(e.clientSequence);return this.doUploadFile({file:o.payload.file,to:o.to,onProgress:function(e){if(n.updatePercent(e),dt(o.onProgress))try{o.onProgress(e)}catch(t){return er({code:fi.MESSAGE_ONPROGRESS_FUNCTION_ERROR})}}}).then((function(a){var o=a.location,i=t.isPrivateNetWork()?o:Nt(o);return n.updateFileUrl(i),e}))}},{key:"_uploadAudio",value:function(e){var t=this,a=this.getModule(Aa),n=e.getElements()[0],o=a.getMessageOption(e.clientSequence);return this.doUploadAudio({file:o.payload.file,to:o.to,onProgress:function(e){if(n.updatePercent(e),dt(o.onProgress))try{o.onProgress(e)}catch(t){return er({code:fi.MESSAGE_ONPROGRESS_FUNCTION_ERROR})}}}).then((function(a){var o=a.location,i=t.isPrivateNetWork()?o:Nt(o);return n.updateAudioUrl(i),e}))}},{key:"_uploadVideo",value:function(e){var t=this,a=this.getModule(Aa),n=e.getElements()[0],o=a.getMessageOption(e.clientSequence);return this.doUploadVideo({file:o.payload.file,to:o.to,onProgress:function(e){if(n.updatePercent(e),dt(o.onProgress))try{o.onProgress(e)}catch(t){return er({code:fi.MESSAGE_ONPROGRESS_FUNCTION_ERROR})}}}).then((function(a){var o=a.location,i=a.snapshotInfo,r=t.isPrivateNetWork()?o:Nt(o);return n.updateVideoUrl(r),Zt(i)||n.updateSnapshotInfo(i),e}))}},{key:"_checkSizeError",value:function(e){return er({code:fi["MESSAGE_".concat(e,"_SIZE_LIMIT")],message:this.getErrorMessage("UploadSizeLimit",e.toLowerCase(),"".concat(this.UPLOAD_SIZE_LIMIT[e]/1048576," MB"))})}},{key:"doUploadImage",value:function(e){var t=this;if(!e.file)return er({code:fi.MESSAGE_IMAGE_SELECT_FILE_FIRST});var a=this._checkImageType(e.file);if(!0!==a)return a;var n=this._checkImageSize(e.file);if(!0!==n)return n;var o=null;return this._setUploadFileType(cr),this.uploadByCOS(e).then((function(e){return o=e,t.isPrivateNetWork()?At(e.location):At("https://".concat(e.location))})).then((function(e){return o.width=e.width,o.height=e.height,Promise.resolve(o)}))}},{key:"_checkImageType",value:function(e){var t="";return t=se?e.url.slice(e.url.lastIndexOf(".")+1):e.files[0].name.slice(e.files[0].name.lastIndexOf(".")+1),sr.indexOf(t.toLowerCase())>=0||er({code:fi.MESSAGE_IMAGE_TYPES_LIMIT})}},{key:"_checkImageSize",value:function(e){var t=0;return 0===(t=se?e.size:e.files[0].size)?er({code:fi.MESSAGE_FILE_IS_EMPTY}):t<this.UPLOAD_SIZE_LIMIT.IMAGE||this._checkSizeError("IMAGE")}},{key:"doUploadFile",value:function(e){return e.file?e.file.files[0].size>this.UPLOAD_SIZE_LIMIT.FILE?this._checkSizeError("FILE"):0===e.file.files[0].size?er({code:fi.MESSAGE_FILE_IS_EMPTY}):(this._setUploadFileType(mr),this.uploadByCOS(e)):er({code:fi.MESSAGE_FILE_SELECT_FILE_FIRST})}},{key:"doUploadVideo",value:function(e){return e.file.videoFile.size>this.UPLOAD_SIZE_LIMIT.VIDEO?this._checkSizeError("VIDEO"):0===e.file.videoFile.size?er({code:fi.MESSAGE_FILE_IS_EMPTY}):-1===lr.indexOf(e.file.videoFile.type)?er({code:fi.MESSAGE_VIDEO_TYPES_LIMIT}):(this._setUploadFileType(ur),se?this.handleVideoUpload({file:e.file.videoFile,onProgress:e.onProgress}):le?this.handleVideoUpload(e):void 0)}},{key:"handleVideoUpload",value:function(e){var t=this;return new Promise((function(a,n){t.uploadByCOS(e).then((function(e){a(e)})).catch((function(){t.uploadByCOS(e).then((function(e){a(e)})).catch((function(){n(new Ji({code:fi.MESSAGE_VIDEO_UPLOAD_FAIL}))}))}))}))}},{key:"doUploadAudio",value:function(e){return e.file?e.file.size>this.UPLOAD_SIZE_LIMIT.AUDIO?this._checkSizeError("AUDIO"):0===e.file.size?er({code:fi.MESSAGE_FILE_IS_EMPTY}):(this._setUploadFileType(dr),this.uploadByCOS(e)):er({code:fi.MESSAGE_AUDIO_UPLOAD_FAIL})}},{key:"uploadByCOS",value:function(e){var t=this;if(!dt(this._cosUploadMethod))return this.outputWarning("PluginUndetected"),er({code:fi.COS_UNDETECTED});if(this.timUploadPlugin)return this._uploadWithPreSigUrl(e);var a=new Vi("upload"),n="".concat(this._n,".uploadByCOS"),o=Date.now(),i=this._getFile(e);return new Promise((function(r,s){var l=se?t._createCosOptionsWXMiniApp(e):t._createCosOptionsWeb(e),c=t;t._cosUploadMethod(l,(function(e,l){var u=Object.create(null);if(l){if(e||lt(l.files)&&l.files[0].error){var d=new Ji({code:fi.MESSAGE_FILE_UPLOAD_FAIL});return a.setError(d,!0,t.getNetworkType()).end(),He.l("".concat(n," failed. error:"),l.files[0].error),403===l.files[0].error.statusCode&&(He.w("".concat(n," failed. cos AccessKeyId was invalid, regain auth key!")),t._getAuthorizationKey()),void s(d)}u.fileName=i.name,u.fileSize=i.size,u.fileType=i.type.slice(i.type.indexOf("/")+1).toLowerCase(),u.location=se?l.Location:l.files[0].data.Location;var m=Date.now()-o,p=c._formatFileSize(i.size),h=c._formatSpeed(1e3*i.size/m),v="size:".concat(p," time:").concat(m,"ms speed:").concat(h);He.l("".concat(n," success. name:").concat(i.name," ").concat(v)),r(u);var g=t.getModule(an);return g.addCost(wi,m),g.addFileSize(wi,i.size),void a.setNetworkType(t.getNetworkType()).setMessage(v).end()}var f=new Ji({code:fi.MESSAGE_FILE_UPLOAD_FAIL});a.setError(f,!0,c.getNetworkType()).end(),He.w("".concat(n," failed. error:"),e),403===e.statusCode&&(He.w("".concat(n," failed. cos AccessKeyId was invalid, regain auth key!")),t._getAuthorizationKey()),s(f)}))}))}},{key:"_uploadWithPreSigUrl",value:function(e){var t=this,a="".concat(this._n,"._uploadWithPreSigUrl"),n=this._getFile(e);return this._createCosOptionsPreSigUrl(e).then((function(e){return new Promise((function(o,i){var r=new Vi("upload"),s=e.requestSnapshotUrl,l=void 0===s?void 0:s,c=v(e,vs),u=Date.now();t._cosUploadMethod(c,(function(e,s){if(e||403===s.statusCode)return r.setError(new Ji(e),!0,t.getNetworkType()).end(),He.l("".concat(a," failed, error:"),e),void i(new Ji({code:fi.MESSAGE_FILE_UPLOAD_FAIL}));var d=Object.create(null),m=s.data.location||"";t.isPrivateNetWork()||0!==m.indexOf("https://")&&0!==m.indexOf("http://")||(m=m.split("//")[1]),d.fileName=n.name,d.fileSize=n.size,d.fileType=n.type.slice(n.type.indexOf("/")+1).toLowerCase(),d.location=m;var p=Date.now()-u,h=t._formatFileSize(n.size),v=t._formatSpeed(1e3*n.size/p),g="size:".concat(h,",time:").concat(p,"ms,speed:").concat(v," res:").concat(JSON.stringify(s.data));He.l("".concat(a," success name:").concat(n.name,",").concat(g)),r.setNetworkType(t.getNetworkType()).setMessage(g).end();var f=t.getModule(an);f.addCost(wi,p),f.addFileSize(wi,n.size);var y=[];if(c.thumbUrl&&c.largeUrl&&(y=[t._getSmallImageInfoByUrl(c.thumbUrl,d),t._getLargeImageInfoByUrl(c.largeUrl,d)]),l&&y.push(t._getSnapshotInfoByUrl(l,d)),y.length>0)return Promise.all(y).then((function(){o(d)}));o(d)}))}))}))}},{key:"_getRawOrUploadProxyUrl",value:function(e){var t=this.getModule(qa).getFileUploadProxy(),a=e;return t&&(a=e.replace(/^https:\/\/[^/]+/,t)),a}},{key:"_getFile",value:function(e){var t;return lt(e.file.files)||(t=e.file.files,"filelist"===pt(t))?e.file.files[0]:e.file}},{key:"_formatFileSize",value:function(e){return e<1024?e+"B":e<1048576?Math.floor(e/1024)+"KB":Math.floor(e/1048576)+"MB"}},{key:"_formatSpeed",value:function(e){return e<=1048576?Gt(e/1024,1)+"KB/s":Gt(e/1048576,1)+"MB/s"}},{key:"_createCosOptionsWeb",value:function(e){var t=this._getFile(e),a=t.name,n=a.slice(a.lastIndexOf(".")),o=this._genFileName("".concat(yt(999999)).concat(n));return{files:[{Bucket:"".concat(this.bucketName,"-").concat(this.appid),Region:this.region,Key:"".concat(this.directory,"/").concat(o),Body:t}],SliceSize:1048576,onProgress:function(t){if("function"==typeof e.onProgress)try{e.onProgress(t.percent)}catch(a){He.w("onProgress callback error:",a)}},onFileFinish:function(e,t,a){}}}},{key:"_createCosOptionsWXMiniApp",value:function(e){var t=this._getFile(e),a=this._genFileName(t.name),n=t.url;return{Bucket:"".concat(this.bucketName,"-").concat(this.appid),Region:this.region,Key:"".concat(this.directory,"/").concat(a),FilePath:n,onProgress:function(t){if(He.l(JSON.stringify(t)),"function"==typeof e.onProgress)try{e.onProgress(t.percent)}catch(a){He.w("onProgress callback error:",a)}}}}},{key:"_createCosOptionsPreSigUrl",value:function(e){var t=this,a="",n="",o=0,i=this._getFile(e);if(se)a=this._genFileName(i.name),n=i.url,o=1;else{var r=i.name,s=r.slice(r.lastIndexOf("."));a=this._genFileName("".concat(yt(999999)).concat(s)),n=i,o=0}return this._getCosPreSigUrl({fileType:this.uploadFileType,fileName:a,uploadMethod:o,duration:this.duration}).then((function(o){var i=o.uploadUrl,r=o.downloadUrl,s=o.requestSnapshotUrl,l=void 0===s?void 0:s,c=o.thumbUrl,u=o.largeUrl;return{url:t._getRawOrUploadProxyUrl(i),fileType:t.uploadFileType,fileName:a,resources:n,downloadUrl:r,requestSnapshotUrl:l,thumbUrl:c,largeUrl:u,onProgress:function(t){if("function"==typeof e.onProgress)try{e.onProgress(t.percent)}catch(a){He.w("onProgress callback error:",a),He.e(a)}}}}))}},{key:"_genFileName",value:function(e){return"".concat(Lt(),"-").concat(e)}},{key:"_setUploadFileType",value:function(e){this.uploadFileType=e}},{key:"_getSnapshotInfoByUrl",value:function(e,t){var a=this,n=new Vi("getSnapshotInfo");return this.request({protocolName:Ho,requestData:{platform:this.getPlatform(),coverName:this._genFileName(yt(99999)),requestSnapshotUrl:e}}).then((function(e){var a=(e.data||{}).snapshotUrl;return n.setMessage("snapshotUrl:".concat(a)).end(),Zt(a)?{}:At(a).then((function(e){t.snapshotInfo={snapshotUrl:a,snapshotWidth:e.width,snapshotHeight:e.height}}))})).catch((function(e){return He.w("".concat(a._n,"._getSnapshotInfoByUrl failed. error:"),e),n.setCode(e.errorCode).setMessage(e.errorInfo).end(),{}}))}},{key:"_getSmallImageInfoByUrl",value:function(e,t){return At(e).then((function(a){t.smallImageUrl=e,t.smallImageWidth=a.width,t.smallImageHeight=a.height}))}},{key:"_getLargeImageInfoByUrl",value:function(e,t){return At(e).then((function(a){t.largeImageUrl=e,t.largeImageWidth=a.width,t.largeImageHeight=a.height}))}},{key:"reset",value:function(){He.l("".concat(this._n,".reset"))}}]),o}(dn),fs=["downloadKey","pbDownloadKey","messageList"],ys=function(){function e(t){n(this,e),this._n="MergerMessageHandler",this._messageModule=t}return r(e,[{key:"uploadMergerMessage",value:function(e,t){var a=this,n="".concat(this._n,".").concat("uploadMergerMessage");He.d("".concat(n," message:"),e,"messageBytes:".concat(t));var o=e.payload.messageList,i=o.length,r=new Vi("uploadMergerMessage");return this._messageModule.request({protocolName:Zo,requestData:{messageList:o}}).then((function(e){He.d("".concat(n," ok. response:"),e.data);var o=e.data,s=o.pbDownloadKey,l=o.downloadKey,c={pbDownloadKey:s,downloadKey:l,messageNumber:i};return r.setNetworkType(a._messageModule.getNetworkType()).setMessage("".concat(i,"-").concat(t,"-").concat(l)).end(),c})).catch((function(e){throw He.w("".concat(n," failed. error:"),e),a._messageModule.probeNetwork().then((function(t){var a=_(t,2),n=a[0],o=a[1];r.setError(e,n,o).end()})),e}))}},{key:"downloadMergerMessage",value:function(e){var a=this,n="".concat(this._n,".").concat("downloadMergerMessage");He.d("".concat(n," message:"),e);var o=e.payload.downloadKey,i=this._messageModule.getFileDownloadProxy(),r=new Vi("downloadMergerMessage");return r.setMessage("downloadKey:".concat(o)),this._messageModule.request({protocolName:Xo,requestData:{downloadKey:o}}).then((function(o){if(He.d("".concat(n," ok. response:"),o.data),dt(e.clearElement)){var s=e.payload;s.downloadKey,s.pbDownloadKey,s.messageList;var l=v(s,fs);e.clearElement(),e.setElement({type:e.type,content:t({messageList:o.data.messageList},l)},i)}else{var c=[];o.data.messageList.forEach((function(e){if(!Zt(e)){var t=new $i(e,i);c.push(t)}})),e.payload.messageList=c,e.payload.downloadKey="",e.payload.pbDownloadKey=""}return r.setNetworkType(a._messageModule.getNetworkType()).end(),e})).catch((function(e){throw He.w("".concat(n," failed. key:").concat(o," error:"),e),a._messageModule.probeNetwork().then((function(t){var a=_(t,2),n=a[0],o=a[1];r.setError(e,n,o).end()})),e}))}},{key:"createMergerMessagePack",value:function(e,t,a){return e.conversationType===I.CONV_C2C?this._createC2CMergerMessagePack(e,t,a):this._createGroupMergerMessagePack(e,t,a)}},{key:"_createC2CMergerMessagePack",value:function(e,t,a){var n=null;t&&(t.offlinePushInfo&&(n=t.offlinePushInfo),!0===t.onlineUserOnly&&(n?n.disablePush=!0:n={disablePush:!0}));var o=[];if(st(t)&&st(t.messageControlInfo)){var i=t.messageControlInfo,r=i.excludedFromUnreadCount,s=i.excludedFromLastMessage,l=i.excludedFromContentModeration;!0===r&&o.push("NoUnread"),!0===s&&o.push("NoLastMsg"),!0===l&&o.push("NoMsgCheck")}var c="";it(e.cloudCustomData)&&e.cloudCustomData.length>0&&(c=e.cloudCustomData);var u=a.pbDownloadKey,d=a.downloadKey,m=a.messageNumber,p=e.payload,h=p.title,v=p.abstractList,g=p.compatibleText,f=this._messageModule.getModule(Oa),y=f&&f.isOnlineMessage(e,t)?0:void 0;return{protocolName:yn,tjgID:this._messageModule.generateTjgID(e),requestData:{fromAccount:this._messageModule.getMyUserID(),toAccount:e.to,msgBody:[{msgType:e.type,msgContent:{pbDownloadKey:u,downloadKey:d,title:h,abstractList:v,compatibleText:g,messageNumber:m}}],cloudCustomData:c,clientTime:e.clientTime,msgSeq:e.sequence,msgRandom:e.random,msgLifeTime:y,offlinePushInfo:n?{pushFlag:!0===n.disablePush?1:0,title:n.title||"",desc:n.description||"",ext:n.extension||"",apnsInfo:{badgeMode:!0===n.ignoreIOSBadge?1:0},androidInfo:{OPPOChannelID:n.androidOPPOChannelID||""}}:void 0,messageControlInfo:0!==y?o:void 0,isSupportExtension:!0===e.isSupportExtension?1:0}}}},{key:"_createGroupMergerMessagePack",value:function(e,t,a){var n=null;t&&t.offlinePushInfo&&(n=t.offlinePushInfo);var o=[];if(st(t)&&st(t.messageControlInfo)){var i=t.messageControlInfo,r=i.excludedFromUnreadCount,s=i.excludedFromLastMessage,l=i.excludedFromContentModeration;!0===r&&o.push("NoUnread"),!0===s&&o.push("NoLastMsg"),!0===l&&o.push("NoMsgCheck")}var c="";it(e.cloudCustomData)&&e.cloudCustomData.length>0&&(c=e.cloudCustomData);var u=a.pbDownloadKey,d=a.downloadKey,m=a.messageNumber,p=e.payload,h=p.title,v=p.abstractList,g=p.compatibleText,f=this._messageModule.getModule(Ba),y=f&&f.isOnlineMessage(e,t)?1:0;return{protocolName:_n,tjgID:this._messageModule.generateTjgID(e),requestData:{fromAccount:this._messageModule.getMyUserID(),groupID:e.to,msgBody:[{msgType:e.type,msgContent:{pbDownloadKey:u,downloadKey:d,title:h,abstractList:v,compatibleText:g,messageNumber:m}}],random:e.random,priority:e.priority,clientSequence:e.clientSequence,groupAtInfo:void 0,cloudCustomData:c,onlineOnlyFlag:y,offlinePushInfo:n?{pushFlag:!0===n.disablePush?1:0,title:n.title||"",desc:n.description||"",ext:n.extension||"",apnsInfo:{badgeMode:!0===n.ignoreIOSBadge?1:0},androidInfo:{OPPOChannelID:n.androidOPPOChannelID||""}}:void 0,clientTime:e.clientTime,needReadReceipt:!0!==e.needReadReceipt||f.isMessageFromOrToAVChatroom(e.to)?0:1,messageControlInfo:0===y?o:void 0,isSupportExtension:!0===e.isSupportExtension?1:0}}}}]),e}(),_s={ERR_SVR_COMM_SENSITIVE_TEXT:80001,ERR_SVR_COMM_BODY_SIZE_LIMIT:80002,OPEN_SERVICE_OVERLOAD_ERROR:60022,ERR_SVR_MSG_PKG_PARSE_FAILED:20001,ERR_SVR_MSG_INTERNAL_AUTH_FAILED:20002,ERR_SVR_MSG_INVALID_ID:20003,ERR_SVR_MSG_PUSH_DENY:20006,ERR_SVR_MSG_IN_PEER_BLACKLIST:20007,ERR_SVR_MSG_BOTH_NOT_FRIEND:20009,ERR_SVR_MSG_NOT_PEER_FRIEND:20010,ERR_SVR_MSG_NOT_SELF_FRIEND:20011,ERR_SVR_MSG_SHUTUP_DENY:20012,ERR_SVR_GROUP_INVALID_PARAMETERS:10004,ERR_SVR_GROUP_PERMISSION_DENY:10007,ERR_SVR_GROUP_NOT_FOUND:10010,ERR_SVR_GROUP_INVALID_GROUPID:10015,ERR_SVR_GROUP_REJECT_FROM_THIRDPARTY:10016,ERR_SVR_GROUP_SHUTUP_DENY:10017,MESSAGE_SEND_FAIL:2100,OVER_FREQUENCY_LIMIT:2996},ks=[fi.MESSAGE_ONPROGRESS_FUNCTION_ERROR,fi.MESSAGE_IMAGE_SELECT_FILE_FIRST,fi.MESSAGE_IMAGE_TYPES_LIMIT,fi.MESSAGE_FILE_IS_EMPTY,fi.MESSAGE_IMAGE_SIZE_LIMIT,fi.MESSAGE_FILE_SELECT_FILE_FIRST,fi.MESSAGE_FILE_SIZE_LIMIT,fi.MESSAGE_VIDEO_SIZE_LIMIT,fi.MESSAGE_VIDEO_TYPES_LIMIT,fi.MESSAGE_AUDIO_UPLOAD_FAIL,fi.MESSAGE_AUDIO_SIZE_LIMIT,fi.COS_UNDETECTED];function Es(e){var t=!1;return Object.values(_s).includes(e)&&(t=!0),(e>=120001&&e<=13e4||e>=10100&&e<=10200)&&(t=!0),t}var xs=function(e){l(o,e);var a=y(o);function o(e){var t;return n(this,o),(t=a.call(this,e))._n="MessageModule",t._messageOptionsMap=new Map,t._mergerMessageHandler=new ys(g(t)),t}return r(o,[{key:"createTextMessage",value:function(e){var t=this.getMyUserID();e.currentUser=t,e.senderTinyID=this.getMyTinyID();var a=new Yi(e),n="string"==typeof e.payload?e.payload:e.payload.text,o=new Ai({text:n}),i=this._getNickAndAvatarByUserID(t);return a.setElement(o),a.setNickAndAvatar(i),a.setNameCard(this._getNameCardByGroupID(a)),a}},{key:"createImageMessage",value:function(e){var t=this.getMyUserID();e.currentUser=t,e.senderTinyID=this.getMyTinyID();var a=new Yi(e);if(se){var n=e.payload.file;if(nt(n))return void this.outputWarning("FileUnsupportedInMP","createImageMessage");var o=n.tempFiles[0].path||n.tempFiles[0].tempFilePath,i={url:o,name:o.slice(o.lastIndexOf("/")+1),size:n.tempFiles&&n.tempFiles[0].size||1,type:o.slice(o.lastIndexOf(".")+1).toLowerCase()};e.payload.file=i}else if(le)if(nt(e.payload.file)){var r=e.payload.file;e.payload.file={files:[r]}}else if(st(e.payload.file)&&"undefined"!=typeof uni){var s=e.payload.file.tempFiles[0];e.payload.file={files:[s]}}var l=new Li({imageFormat:$e.UNKNOWN,uuid:this._generateUUID(e.payload.file),file:e.payload.file}),c=this._getNickAndAvatarByUserID(t);return a.setElement(l),a.setNickAndAvatar(c),a.setNameCard(this._getNameCardByGroupID(a)),this._messageOptionsMap.set(a.clientSequence,e),a}},{key:"createAudioMessage",value:function(e){var t=e.payload.file;if(se){var a={url:t.tempFilePath,name:t.tempFilePath.slice(t.tempFilePath.lastIndexOf("/")+1),size:t.fileSize,second:parseInt(t.duration)/1e3,type:t.tempFilePath.slice(t.tempFilePath.lastIndexOf(".")+1).toLowerCase()};e.payload.file=a}var n=this.getMyUserID();e.currentUser=n,e.senderTinyID=this.getMyTinyID();var o=new Yi(e),i=new Oi({second:Math.floor(t.duration/1e3),size:t.fileSize||t.size,url:t.tempFilePath,uuid:this._generateUUID(e.payload.file)}),r=this._getNickAndAvatarByUserID(n);return o.setElement(i),o.setNickAndAvatar(r),o.setNameCard(this._getNameCardByGroupID(o)),this._messageOptionsMap.set(o.clientSequence,e),o}},{key:"createVideoMessage",value:function(e){var t=this.getMyUserID();e.currentUser=t,e.senderTinyID=this.getMyTinyID(),e.payload.file.thumbUrl="",e.payload.file.thumbSize=0;var a={};if(se){if(ne)return void this.outputWarning("VideoUnsupportedInAlipay");if(nt(e.payload.file))return void this.outputWarning("FileUnsupportedInMP","createVideoMessage");var n=e.payload.file;lt(n.tempFiles)&&(n=n.tempFiles[0]),a.url=n.tempFilePath,a.name=n.tempFilePath.slice(n.tempFilePath.lastIndexOf("/")+1),a.size=n.size||1,a.second=n.duration||0,a.type=n.tempFilePath.slice(n.tempFilePath.lastIndexOf(".")+1).toLowerCase()}else if(le){if(nt(e.payload.file)){var o=e.payload.file;e.payload.file.files=[o]}else if(st(e.payload.file)&&"undefined"!=typeof uni){var i=e.payload.file.tempFile;e.payload.file.files=[i]}var r=e.payload.file;a.url=window.URL.createObjectURL(r.files[0]),a.name=r.files[0].name,a.size=r.files[0].size||1,a.second=r.files[0].duration||0,a.type=r.files[0].type.split("/")[1]}e.payload.file.videoFile=a;var s=new Yi(e),l=new zi({videoFormat:a.type,videoSecond:Gt(a.second,0),videoSize:a.size,remoteVideoUrl:"",videoUrl:a.url,videoUUID:this._generateUUID(e.payload.file.videoFile),thumbUUID:this._generateUUID(e.payload.file.videoFile),thumbWidth:e.payload.file.width||200,thumbHeight:e.payload.file.height||200,thumbUrl:e.payload.file.thumbUrl,thumbSize:e.payload.file.thumbSize,thumbFormat:e.payload.file.thumbUrl.slice(e.payload.file.thumbUrl.lastIndexOf(".")+1).toLowerCase()}),c=this._getNickAndAvatarByUserID(t);return s.setElement(l),s.setNickAndAvatar(c),s.setNameCard(this._getNameCardByGroupID(s)),this._messageOptionsMap.set(s.clientSequence,e),s}},{key:"createCustomMessage",value:function(e){var t=this.getMyUserID();e.currentUser=t,e.senderTinyID=this.getMyTinyID();var a=new Yi(e),n=new qi({data:e.payload.data,description:e.payload.description,extension:e.payload.extension}),o=this._getNickAndAvatarByUserID(t);return a.setElement(n),a.setNickAndAvatar(o),a.setNameCard(this._getNameCardByGroupID(a)),a}},{key:"createFaceMessage",value:function(e){var t=this.getMyUserID();e.currentUser=t,e.senderTinyID=this.getMyTinyID();var a=new Yi(e),n=new Ri(e.payload),o=this._getNickAndAvatarByUserID(t);return a.setElement(n),a.setNickAndAvatar(o),a.setNameCard(this._getNameCardByGroupID(a)),a}},{key:"createMergerMessage",value:function(e){var t=this.getMyUserID();e.currentUser=t,e.senderTinyID=this.getMyTinyID();var a=this._getNickAndAvatarByUserID(t),n=new Yi(e),o=new ji(e.payload);return n.setElement(o),n.setNickAndAvatar(a),n.setNameCard(this._getNameCardByGroupID(n)),n.setRelayFlag(!0),n}},{key:"createForwardMessage",value:function(e){var t=e.to,a=e.conversationType,n=e.priority,o=e.payload,i=e.needReadReceipt,r=e.receiverList,s=this.getMyUserID(),l=this._getNickAndAvatarByUserID(s);if(o.type===I.MSG_GRP_TIP)return er({code:fi.MESSAGE_FORWARD_TYPE_INVALID});var c={to:t,conversationType:a,conversationID:"".concat(a).concat(t),priority:n,isPlaceMessage:0,status:ta.UNSEND,currentUser:s,senderTinyID:this.getMyTinyID(),cloudCustomData:e.cloudCustomData||o.cloudCustomData||"",needReadReceipt:i,receiverList:r,isSupportExtension:e.isSupportExtension||!1},u=new Yi(c);return u.setElement(o.getElements()[0]),u.setNickAndAvatar(l),u.setNameCard(this._getNameCardByGroupID(o)),u.setRelayFlag(!0),u}},{key:"downloadMergerMessage",value:function(e){return this._mergerMessageHandler.downloadMergerMessage(e)}},{key:"createFileMessage",value:function(e){if(se){if(!X&&!ee&&!ie)return;var a=ce.getSystemInfoSync().SDKVersion;if(X&&Ot(a,"2.5.0")<0)return void this.outputWarning("WXChooseMessageFile");if(ee&&Ot(a,"1.18.0")<0)return void this.outputWarning("QQChooseMessageFile")}if(le||ie){if(nt(e.payload.file)){var n=e.payload.file;e.payload.file={files:[n]}}else if(st(e.payload.file)&&"undefined"!=typeof uni){var o=e.payload.file,i=o.tempFiles,r=o.files,s=null;lt(i)?s=i[0]:lt(r)&&(s=r[0]),e.payload.file={files:[s]}}}else if(X||ee){var l=e.payload.file.tempFiles,c=t(t({},l[0]),{},{url:l[0].path});e.payload.file={files:[c]}}var u=this.getMyUserID();e.currentUser=u,e.senderTinyID=this.getMyTinyID();var d=new Yi(e),m=new Fi({uuid:this._generateUUID(e.payload.file),file:e.payload.file}),p=this._getNickAndAvatarByUserID(u);return d.setElement(m),d.setNickAndAvatar(p),d.setNameCard(this._getNameCardByGroupID(d)),this._messageOptionsMap.set(d.clientSequence,e),d}},{key:"createLocationMessage",value:function(e){var t=this.getMyUserID();e.currentUser=t,e.senderTinyID=this.getMyTinyID();var a=new Yi(e),n=new Hi(e.payload),o=this._getNickAndAvatarByUserID(t);return a.setElement(n),a.setNickAndAvatar(o),a.setNameCard(this._getNameCardByGroupID(a)),a}},{key:"_onCannotFindModule",value:function(){return er({code:fi.CANNOT_FIND_MODULE})}},{key:"sendMessageInstance",value:function(e,t){var a=this;if(!1===this.getModule(rn).filterMessage(e,t))return this._onSendMessageFailed(e,new Ji({code:fi.PROFANITY_FOUND}));var n,o=null;switch(e.conversationType){case I.CONV_C2C:if(!(o=this.getModule(Oa)))return this._onCannotFindModule();break;case I.CONV_GROUP:if(!(o=this.getModule(Ba)))return this._onCannotFindModule();if(St({groupID:e.to})){var i=o.getLocalGroupProfile(e.to);if(i&&i.isSupportTopic)return er({code:fi.MESSAGE_SEND_GROUP_WITH_TOPIC_FAIL})}break;default:return er({code:fi.MESSAGE_SEND_INVALID_CONVERSATION_TYPE})}var r=this.getModule(Ka),s=this.getModule(Ba);return r.upload(e).then((function(){return a._getSendMessageSpecifiedKey(e)===Ni&&a.getModule(an).addSuccessCount(wi),s.guardForAVChatRoom(e).then((function(){if(!e.isSendable())return er({code:fi.MESSAGE_FILE_URL_IS_EMPTY});a._addSendMessageTotalCount(e),n=Date.now();var i=function(e){var t="utf-8";le&&document&&(t=document.charset.toLowerCase());var a,n,o=0;if(n=e.length,"utf-8"===t||"utf8"===t)for(var i=0;i<n;i++)(a=e.codePointAt(i))<=127?o+=1:a<=2047?o+=2:a<=65535?o+=3:(o+=4,i++);else if("utf-16"===t||"utf16"===t)for(var r=0;r<n;r++)(a=e.codePointAt(r))<=65535?o+=2:(o+=4,r++);else o=e.replace(/[^\x00-\xff]/g,"aa").length;return o}(JSON.stringify(e));return e.type===I.MSG_MERGER&&i>11264?a._mergerMessageHandler.uploadMergerMessage(e,i).then((function(n){var o=a._mergerMessageHandler.createMergerMessagePack(e,t,n);return a.request(o)})):(a.getModule(Fa).setMessageRandom(e),e.conversationType===I.CONV_C2C||e.conversationType===I.CONV_GROUP?o.sendMessage(e,t):void 0)})).then((function(i){var r=i.data,s=r.time,l=r.sequence,c=r.readReceiptCode;ot(c)&&0!==c&&(new Vi("sendMessageWithReceipt").setMessage("from:".concat(e.from," to:").concat(e.to," sequence:").concat(l," readReceiptCode:").concat(c)).end(),He.w("".concat(a._n,".sendMessageInstance readReceiptCode:").concat(c," message:").concat(a.getErrorMessage(c)))),a._addSendMessageSuccessCount(e,n),a._messageOptionsMap.delete(e.clientSequence);var u=a.getModule(Fa);e.status=ta.SUCCESS,e.time=s;var d=!1;if(e.conversationType===I.CONV_GROUP)e.sequence=l;else if(e.conversationType===I.CONV_C2C){var m=u.getLatestMessageSentByMe(e.conversationID);if(m){var p=m.nick,h=m.avatar;p===e.nick&&h===e.avatar||(d=!0)}}if(d&&u.modifyMessageSentByMe({conversationID:e.conversationID,latestNick:e.nick,latestAvatar:e.avatar}),o.isOnlineMessage(e,t))e._onlineOnlyFlag=!0;else{u.appendToMessageList(e);var v=e;st(t)&&st(t.messageControlInfo)&&(!0===t.messageControlInfo.excludedFromLastMessage&&(e._isExcludedFromLastMessage=!0,v=""),!0===t.messageControlInfo.excludedFromUnreadCount&&(e._isExcludedFromUnreadCount=!0));var g=e.conversationType;It(e.to)&&(g=I.CONV_TOPIC,a.getModule(Ga).onMessageSent({groupID:zt(e.to),topicID:e.to,lastMessage:v})),u.onMessageSent({conversationOptionsList:[{conversationID:e.conversationID,unreadCount:0,type:g,subType:e.conversationSubType,lastMessage:v}]})}return e.getRelayFlag()||"TIMImageElem"!==e.type||Pt(e.payload.imageInfoArray),Wi({message:e})}))})).catch((function(t){return a._onSendMessageFailed(e,t)}))}},{key:"_onSendMessageFailed",value:function(e,t){e.status=ta.FAIL,this.getModule(Fa).deleteMessageRandom(e),this._addSendMessageFailCountOnUser(e,t);var a=new Vi("sendMessage");return a.setMessage("tjg_id:".concat(this.generateTjgID(e)," type:").concat(e.type," from:").concat(e.from," to:").concat(e.to)),this.probeNetwork().then((function(e){var n=_(e,2),o=n[0],i=n[1];a.setError(t,o,i).end()})),He.e("".concat(this._n,"._onSendMessageFailed error:"),t),er(new Ji({code:t&&t.code?t.code:fi.MESSAGE_SEND_FAIL,message:t&&t.message?t.message:void 0,data:{message:e}}))}},{key:"_getSendMessageSpecifiedKey",value:function(e){if([I.MSG_IMAGE,I.MSG_AUDIO,I.MSG_VIDEO,I.MSG_FILE].includes(e.type))return Ni;if(e.conversationType===I.CONV_C2C)return ki;if(e.conversationType===I.CONV_GROUP){var t=this.getModule(Ba).getLocalGroupProfile(e.to);if(!t)return;var a=t.type;return Mt(a)?xi:Ei}}},{key:"_addSendMessageTotalCount",value:function(e){var t=this._getSendMessageSpecifiedKey(e);t&&this.getModule(an).addTotalCount(t)}},{key:"_addSendMessageSuccessCount",value:function(e,t){var a=Math.abs(Date.now()-t),n=this._getSendMessageSpecifiedKey(e);if(n){var o=this.getModule(an);o.addSuccessCount(n),o.addCost(n,a)}}},{key:"_addSendMessageFailCountOnUser",value:function(e,t){var a,n,o=t.code,i=void 0===o?-1:o,r=this.getModule(an),s=this._getSendMessageSpecifiedKey(e);s===Ni&&(a=i,n=!1,ks.includes(a)&&(n=!0),n)?r.addFailedCountOfUserSide(wi):Es(i)&&s&&r.addFailedCountOfUserSide(s)}},{key:"resendMessage",value:function(e){return e.isResend=!0,e.status=ta.UNSEND,this.sendMessageInstance(e)}},{key:"revokeMessage",value:function(e){var t=this,a=null;if(e.conversationType===I.CONV_C2C?a=this.getModule(Oa):e.conversationType===I.CONV_GROUP&&(a=this.getModule(Ba)),!a)return this._onCannotFindModule();var n=new Vi("revokeMessage");n.setMessage("tjg_id:".concat(this.generateTjgID(e)," type:").concat(e.type," from:").concat(e.from," to:").concat(e.to));var o="".concat(this._n,".").concat("revokeMessage");return a.revokeMessage(e).then((function(a){var i=a.data.recallRetList;if(!Zt(i)&&0!==i[0].retCode){var r=new Ji({code:i[0].retCode,data:{message:e}});return n.setCode(r.code).setMoreMessage(r.message).end(),er(r)}return He.i("".concat(o," ok. ID:").concat(e.ID)),e.isRevoked=!0,n.end(),t.getModule(Fa).onMessageRevoked([e]),Wi({message:e})})).catch((function(a){t.probeNetwork().then((function(e){var t=_(e,2),o=t[0],i=t[1];n.setError(a,o,i).end()}));var i=new Ji({code:a&&a.code?a.code:fi.MESSAGE_REVOKE_FAIL,message:a&&a.message?a.message:void 0,data:{message:e}});return He.w("".concat(o," failed. error:"),a),er(i)}))}},{key:"deleteMessage",value:function(e){var t=this,a=null,n=e[0],o=n.conversationID,i="",r=[],s=[];if(n.conversationType===I.CONV_C2C)a=this.getModule(Oa),i=o.replace(I.CONV_C2C,""),e.forEach((function(e){e&&e.status===ta.SUCCESS&&e.conversationID===o&&(e._onlineOnlyFlag||r.push("".concat(e.sequence,"_").concat(e.random,"_").concat(e.time)),s.push(e))}));else if(n.conversationType===I.CONV_GROUP)a=this.getModule(Ba),i=o.replace(I.CONV_GROUP,""),e.forEach((function(e){e&&e.status===ta.SUCCESS&&e.conversationID===o&&(e._onlineOnlyFlag||r.push("".concat(e.sequence)),s.push(e))}));else if(n.conversationType===I.CONV_SYSTEM)return er({code:fi.CANNOT_DELETE_GROUP_SYSTEM_NOTICE});if(!a)return this._onCannotFindModule();if(0===r.length)return this._onMessageDeleted(s);r.length>30&&(r=r.slice(0,30),s=s.slice(0,30));var l=new Vi("deleteMessage");l.setMessage("to:".concat(i," count:").concat(r.length));var c="".concat(this._n,".").concat("deleteMessage");return a.deleteMessage({to:i,keyList:r}).then((function(e){return l.end(),He.i("".concat(c," ok")),t._onMessageDeleted(s)})).catch((function(e){t.probeNetwork().then((function(t){var a=_(t,2),n=a[0],o=a[1];l.setError(e,n,o).end()})),He.w("".concat(c," failed. error:"),e);var a=new Ji({code:e&&e.code?e.code:fi.MESSAGE_DELETE_FAIL,message:e&&e.message?e.message:void 0});return er(a)}))}},{key:"_onMessageDeleted",value:function(e){return this.getModule(Fa).onMessageDeleted(e),Qi({messageList:e})}},{key:"translateText",value:function(e){var a="".concat(this._n,".").concat("translateText"),n=e.sourceTextList,o=e.sourceLanguage,i=e.targetLanguage,r=new Vi("translateText");return r.setMessage("sourceLanguage:".concat(o," targetLanguage:").concat(i)),this.request({protocolName:gi,requestData:{sourceTextList:n,source:o||"auto",target:i,from:this.getMyTinyID(),SDKAppID:this.getSDKAppID()}}).then((function(e){var n=e.data,o=n.error,i=n.requestID,s=n.translatedTextList;if(0===o.code)return r.end(),He.i("".concat(a," ok. requestID:").concat(i)),Wi({translatedTextList:s});throw t(t({},o),{},{requestID:i})})).catch((function(e){return r.setCode(e.code).setMoreMessage(e.requestID).end(),He.w("".concat(a," failed. error:"),e),er({code:fi.TRANSLATE_TEXT_FAIL})}))}},{key:"modifyRemoteMessage",value:function(e){var t=this,a=null,n=e.conversationType,o=e.to;if(this.getModule(Ba).isMessageFromOrToAVChatroom(o))return er({code:fi.MESSAGE_MODIFY_DISABLED_IN_AVCHATROOM,data:{message:e}});if(!1===this.getModule(rn).filterMessage(e))return er({code:fi.PROFANITY_FOUND,data:{message:e}});n===I.CONV_C2C?a=this.getModule(Oa):n===I.CONV_GROUP&&(a=this.getModule(Ba));var i=new Vi("modifyMessage");i.setMessage("to:".concat(o));var r="".concat(this._n,".modifyRemoteMessage");return a.modifyRemoteMessage(e).then((function(a){i.end(),He.i("".concat(r," ok"));var n=t._onModifyRemoteMessageResp(e,a.data);return Wi({message:n})})).catch((function(a){if(i.setCode(a.code).setMoreMessage(a.message).end(),He.w("".concat(r," failed. error:"),a),20027===a.code){var n=t._onModifyRemoteMessageResp(e,a.data);return er({code:fi.MESSAGE_MODIFY_CONFLICT,data:{message:n}})}return er({code:a.code,message:a.message,data:{message:e}})}))}},{key:"_onModifyRemoteMessageResp",value:function(e,t){He.d("".concat(this._n,"._onModifyRemoteMessageResp options:"),t);var a=e.conversationType,n=e.from,o=e.to,i=e.random,r=e.sequence,s=e.time,l=t.elements,c=t.messageVersion,u=t.cloudCustomData,d=void 0===u?"":u;return this.getModule(Fa).onMessageModified({conversationType:a,from:n,to:o,time:s,random:i,sequence:r,elements:l,cloudCustomData:d,messageVersion:c})}},{key:"_generateUUID",value:function(e){var t=this.getModule(qa),a="".concat(t.getSDKAppID(),"-").concat(t.getUserID(),"-").concat(function(){for(var e="",t=32;t>0;--t)e+=_t[Math.floor(Math.random()*kt)];return e}()),n=e.name||e.value||e.url||e.tempFilePath,o=n&&n.slice(n.lastIndexOf(".")+1);return o&&(a="".concat(a,".").concat(o)),a}},{key:"getMessageOption",value:function(e){return this._messageOptionsMap.get(e)}},{key:"_getNickAndAvatarByUserID",value:function(e){return this.getModule(Ra).getNickAndAvatarByUserID(e)}},{key:"_getNameCardByGroupID",value:function(e){if(e.conversationType===I.CONV_GROUP){var t=this.getModule(Ba);if(t)return t.getMyNameCardByGroupID(e.to)}return""}},{key:"reset",value:function(){He.l("".concat(this._n,".reset")),this._messageOptionsMap.clear()}}]),o}(dn),Ns=function(e){l(a,e);var t=y(a);function a(e){var o;return n(this,a),(o=t.call(this,e))._n="MessageExtensionModule",o.messageExtensionMap=new Map,o.globalSeqMap=new Map,o.getMessageExtensionsMap=new Map,o}return r(a,[{key:"onMessageExtensionNotify",value:function(e){var t=this,a=e.dataList,n=a.messageInfo,o=a.operateType,i=a.operateResultList,r=a.tinyID,s=a.globalSequence,l=n.clientTime,c=n.random,u="".concat(r,"-").concat(l,"-").concat(c),d=[],m=[];He.l("".concat(this._n,".onMessageExtensionNotify messageID:").concat(u," operateType:").concat(o," globalSequence:").concat(s)),this._updateGlobalSequence(u,s);var p=!1,h=!1;i.forEach((function(e){var a=e.extensions,n=void 0===a?[]:a,i=e.clearSequence;1===o?(p=!0,n.forEach((function(e){d.push({key:e.key,value:e.value})})),t._updateLocalExtension(u,n)):2===o?(h=!0,n.forEach((function(e){m.push(e.key)})),t._updateLocalExtension(u,n)):3===o&&(h=!0,t._hasLocalExtension(u)&&t._getLocalExtension(u).forEach((function(e,t){e.seq<=i&&!Zt(e.value)&&m.push(t)})),t._clearLocalExtension(u,i))})),p&&this.emitOuterEvent(S.MESSAGE_EXTENSIONS_UPDATED,{messageID:u,extensions:d}),h&&this.emitOuterEvent(S.MESSAGE_EXTENSIONS_DELETED,{messageID:u,keyList:m})}},{key:"setMessageExtensions",value:function(e,t){var a=this;if(!this.canIUse(H.MSG_EXT))return er({code:fi.CANNOT_USE_COMMERCIAL_ABILITY});var n="".concat(this._n,".").concat("setMessageExtensions"),o=e.ID,i=e.conversationID,r=e.sequence,s=e.time,l=k(t);t.length>20&&(l=t.slice(0,20),He.w("".concat(n,". the length of extensions cannot exceed 20.")));var c="conversationID:".concat(i," messageID:").concat(o," sequence:").concat(r," time:").concat(s," count:").concat(l.length),u=new Vi("setMessageExtensions");return u.setMessage(c),He.l("".concat(n," ").concat(c)),this._modifyMessageExtensions(e,l).then((function(e){var t=e.resultList,a=e.successCount,o=e.failureCount,i="success count:".concat(a," fail count:").concat(o);return u.setMoreMessage(i).end(),He.l("".concat(n," ok. ").concat(i)),Wi({extensions:t})})).catch((function(e){return a.probeNetwork().then((function(t){var a=_(t,2),n=a[0],o=a[1];u.setError(e,n,o).end()})),He.e("".concat(n," failed. error:"),e),er(e)}))}},{key:"getMessageExtensions",value:function(e){var t=this;if(!this.canIUse(H.MSG_EXT))return er({code:fi.CANNOT_USE_COMMERCIAL_ABILITY});var a="".concat(this._n,".").concat("getMessageExtensions"),n=e.ID,o=e.conversationID,i=e.sequence,r=e.time,s="conversationID:".concat(o," messageID:").concat(n," sequence:").concat(i," time:").concat(r),l=new Vi("getMessageExtensions");l.setMessage(s),He.l("".concat(a," ").concat(s));var c=void 0;return this.getMessageExtensionsMap.has(n)&&(c=this._getGlobalSequence(n)),this._getMessageExtensions(e,c).then((function(e){return l.end(),He.l("".concat(a," ok. total count:").concat(e.length)),ct(c)&&e.length>0&&t.getMessageExtensionsMap.set(n,1),Wi({extensions:e})})).catch((function(e){return t.probeNetwork().then((function(t){var a=_(t,2),n=a[0],o=a[1];l.setError(e,n,o).end()})),He.e("".concat(a," failed. error:"),e),er(e)}))}},{key:"deleteMessageExtensions",value:function(e,t){var a=this;if(!this.canIUse(H.MSG_EXT))return er({code:fi.CANNOT_USE_COMMERCIAL_ABILITY});var n="".concat(this._n,".").concat("deleteMessageExtensions"),o=[],i=3;Zt(t)||(i=2,t.forEach((function(e){o.push({key:e,value:"",seq:0})})));var r=e.ID,s=e.conversationID,l=e.sequence,c=e.time,u="conversationID:".concat(s," messageID:").concat(r," sequence:").concat(l," time:").concat(c," operateType:").concat(i),d=new Vi("deleteMessageExtensions");return d.setMessage(u),He.l("".concat(n," ").concat(u)),this._modifyMessageExtensions(e,o,i).then((function(e){var t=e.resultList,a=e.successCount,o=e.failureCount,r="";return 2===i&&(r="success count:".concat(a," fail count:").concat(o)),d.setMoreMessage("".concat(r)).end(),He.l("".concat(n," ok. ").concat(r)),Wi({extensions:t})})).catch((function(e){return a.probeNetwork().then((function(t){var a=_(t,2),n=a[0],o=a[1];d.setError(e,n,o).end()})),He.e("".concat(n," failed. error:"),e),er(e)}))}},{key:"_modifyMessageExtensions",value:function(e,t){var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=It(e.to)?I.CONV_TOPIC:e.conversationType,i=void 0;3!==n&&(i=this._getRequestExtensions(e,t));var r=null;switch(o){case I.CONV_C2C:r=this.getModule(Oa);break;case I.CONV_GROUP:r=this.getModule(Ba);break;case I.CONV_TOPIC:r=this.getModule(Ga);break;default:return er({code:fi.CANNOT_FIND_MODULE})}return r.modifyMessageExtensions(e,i,n).then((function(t){var n=t.data,o=n.extensions,i=n.seq,r=[],s=0,l=0,c=[];return(o=Zt(o)?[]:o).forEach((function(e){var t=e.errorCode,a=e.extension,n=a.key,o=a.value,i=a.seq;r.push({code:t,key:n,value:o}),0===t?s++:l++,c.push({key:n,value:o,seq:i})})),a._updateGlobalSequence(e.ID,i),c.length>0&&(a._updateLocalExtension(e.ID,c),c=null),{resultList:r,successCount:s,failureCount:l}})).catch((function(e){return er(e)}))}},{key:"_getRequestExtensions",value:function(e,t){var a=[];if(this._hasLocalExtension(e.ID)){var n=this._getLocalExtension(e.ID);return t.forEach((function(e){var t=e.key,o=e.value,i=0;n.has(t)&&(i=n.get(t).seq),a.push({key:t,value:o,seq:i})})),a}return t.forEach((function(e){var t=e.key,n=e.value;a.push({key:t,value:n,seq:0})})),a}},{key:"_getMessageExtensions",value:function(e,t){var a=this,n="".concat(this._n,"._getMessageExtensions"),o=e.ID,i=e.to,r=null;switch(It(i)?I.CONV_TOPIC:e.conversationType){case I.CONV_C2C:r=this.getModule(Oa);break;case I.CONV_GROUP:r=this.getModule(Ba);break;case I.CONV_TOPIC:r=this.getModule(Ga);break;default:return er({code:fi.CANNOT_FIND_MODULE})}return r.getMessageExtensions(e,t).then((function(t){var i=t.data,r=i.extensions,s=i.completeFlag,l=i.globalSequence,c=i.clearSequence;if(r=Zt(r)?[]:r,He.l("".concat(n," ok. completeFlag:").concat(s," globalSequence:").concat(l," clearSequence:").concat(c," count:").concat(r.length)),a._updateLocalExtension(o,r),a._clearLocalExtension(o,c),a._updateGlobalSequence(o,l),1!==s){var u=r.slice(-1)[0].seq+1;return a._getMessageExtensions(e,u)}return a._getLocalExtensions(o)})).catch((function(e){return er(e)}))}},{key:"_hasLocalExtension",value:function(e){return this.messageExtensionMap.has(e)}},{key:"_getLocalExtension",value:function(e){return this.messageExtensionMap.get(e)}},{key:"_updateLocalExtension",value:function(e,t){this._hasLocalExtension(e)||this.messageExtensionMap.set(e,new Map);var a=this._getLocalExtension(e);t.forEach((function(e){var t=e.key,n=e.value,o=void 0===n?"":n,i=e.seq;a.set(t,{value:o,seq:i})}))}},{key:"_clearLocalExtension",value:function(e,t){if(!(t<=0)&&this._hasLocalExtension(e)){var a=this._getLocalExtension(e);a.forEach((function(e,n){e.seq<=t&&a.delete(n)}))}}},{key:"_getLocalExtensions",value:function(e){var t=[];return this._hasLocalExtension(e)&&this._getLocalExtension(e).forEach((function(e,a){var n=e.value;Zt(n)||t.push({key:a,value:n})})),t}},{key:"_getGlobalSequence",value:function(e){return this.globalSeqMap.get(e)}},{key:"_updateGlobalSequence",value:function(e,t){this.globalSeqMap.set(e,t)}},{key:"reset",value:function(){He.l("".concat(this._n,".reset")),this.messageExtensionMap.clear(),this.globalSeqMap.clear(),this.getMessageExtensionsMap.clear()}}]),a}(dn),ws=function(e){l(a,e);var t=y(a);function a(e){var o;return n(this,a),(o=t.call(this,e))._n="ComboMessageModule",o}return r(a,[{key:"sendMessage",value:function(e){var t=this,a=this._constructMessageInstance(e);if(null===a)return er({code:fi.MESSAGE_SEND_FAIL});this._addSendMessageTotalCount(a);var n=Date.now();return this.getModule(Fa).setMessageRandom(a),this._sendComboMessage(a,e).then((function(e){var o=e.data,i=o.time,r=o.sequence,s=o.readReceiptCode;ot(s)&&0!==s&&(new Vi("sendMessageWithReceipt").setMessage("from:".concat(a.from," to:").concat(a.to," sequence:").concat(r," readReceiptCode:").concat(s)).end(),He.w("".concat(t._n,".sendMessage readReceiptCode:").concat(s," message:").concat(t.getErrorMessage(s)))),t._addSendMessageSuccessCount(a,n);var l=t.getModule(Fa);a.status=ta.SUCCESS,a.time=i,a.conversationType===I.CONV_GROUP&&(a.sequence=r),l.appendToMessageList(a);var c=a;return!0===a._isExcludedFromLastMessage&&(c=""),l.onMessageSent({conversationOptionsList:[{conversationID:a.conversationID,unreadCount:0,type:a.conversationType,subType:a.conversationSubType,lastMessage:c}]}),Wi({message:a})})).catch((function(e){return t._onSendMessageFailed(a,e)}))}},{key:"_sendComboMessage",value:function(e,t){var a=this._m.getModule(Ja),n="";return e.conversationType===I.CONV_C2C&&(n="".concat(z.NAME.OPEN_IM,".").concat(z.CMD.SEND_MESSAGE)),e.conversationType===I.CONV_GROUP&&(n="".concat(z.NAME.GROUP,".").concat(z.CMD.SEND_GROUP_MESSAGE)),a.sendComboMessage({servcmd:n,data:t})}},{key:"_constructMessageInstance",value:function(e){var t="".concat(this._n,"._constructMessageInstance"),a=null;try{var n=this.getMyUserID(),o={};if(o.senderTinyID=this.getMyTinyID(),o.currentUser=n,o.from=e.From_Account||n,e.GroupId?(o.conversationID="".concat(I.CONV_GROUP).concat(e.GroupId),o.conversationType=I.CONV_GROUP,o.to=e.GroupId):e.To_Account&&(o.conversationID="".concat(I.CONV_C2C).concat(e.To_Account),o.conversationType=I.CONV_C2C,o.to=e.To_Account),o.time=e.MsgTimeStamp||0,o.random=e.Random||e.MsgRandom||0,o.priority=e.MsgPriority,it(e.CloudCustomData)&&e.CloudCustomData.length>0&&(o.cloudCustomData=e.CloudCustomData),lt(e.SendMsgControl)&&(o.messageControlInfo={},e.SendMsgControl.includes("NoUnread")&&(o.messageControlInfo.excludedFromUnreadCount=1),e.SendMsgControl.includes("NoLastMsg")&&(o.messageControlInfo.excludedFromLastMessage=1)),o.conversationType===I.CONV_GROUP&&lt(e.To_Account)&&e.To_Account.length>0){var i=e.To_Account;e.To_Account.length>50&&(i=e.To_Account.slice(0,50),He.w("".concat(t," To_Account must be less than or equal to 50."))),o.receiverList=k(i),e.To_Account=k(i)}1!==e.IsNeedReadReceipt&&1!==e.NeedReadReceipt||(o.needReadReceipt=!0),1===e.SupportMessageExtension&&(o.isSupportExtension=!0),(a=new Yi(o)).status=ta.UNSEND,e.MsgClientTime=a.clientTime,a.conversationType===I.CONV_C2C&&(e.MsgSeq=a.sequence);for(var r,s=e.MsgBody.length,l=0;l<s;l++)"TIMTextElem"===(r=e.MsgBody[l]).MsgType?a.setTextElement(r.MsgContent.Text):"TIMCustomElem"===r.MsgType?a.setCustomElement({data:r.MsgContent.Data||"",description:r.MsgContent.Desc||"",extension:r.MsgContent.Ext||""}):"TIMFaceElem"===r.MsgType&&a.setFaceElement({index:r.MsgContent.Index,data:r.MsgContent.Data});var c=a.getElements();a.payload=c[0].content,a.type=c[0].type}catch(u){a=null,He.e("".concat(t," failed. error:"),u)}return a}},{key:"_onSendMessageFailed",value:function(e,t){e.status=ta.FAIL,this.getModule(Fa).deleteMessageRandom(e),this._addSendMessageFailCountOnUser(e,t);var a=new Vi("sendMessage");return a.setMessage("tjg_id:".concat(this.generateTjgID(e)," type:").concat(e.type," from:").concat(e.from," to:").concat(e.to)),this.probeNetwork().then((function(e){var n=_(e,2),o=n[0],i=n[1];a.setError(t,o,i).end()})),He.e("".concat(this._n,"._onSendMessageFailed error:"),t),er(new Ji({code:t&&t.code?t.code:fi.MESSAGE_SEND_FAIL,message:t&&t.message?t.message:void 0,data:{message:e}}))}},{key:"_getSendMessageSpecifiedKey",value:function(e){if(e.conversationType===I.CONV_C2C)return ki;if(e.conversationType===I.CONV_GROUP){var t=this.getModule(Ba).getLocalGroupProfile(e.to);if(!t)return;var a=t.type;return Mt(a)?xi:Ei}}},{key:"_addSendMessageTotalCount",value:function(e){var t=this._getSendMessageSpecifiedKey(e);t&&this.getModule(an).addTotalCount(t)}},{key:"_addSendMessageSuccessCount",value:function(e,t){var a=Math.abs(Date.now()-t),n=this._getSendMessageSpecifiedKey(e);if(n){var o=this.getModule(an);o.addSuccessCount(n),o.addCost(n,a)}}},{key:"_addSendMessageFailCountOnUser",value:function(e,t){var a=t.code,n=void 0===a?-1:a,o=this.getModule(an),i=this._getSendMessageSpecifiedKey(e);Es(n)&&i&&o.addFailedCountOfUserSide(i)}}]),a}(dn),Cs=function(e){l(a,e);var t=y(a);function a(e){var o;return n(this,a),(o=t.call(this,e))._n="PluginModule",o.plugins={},o}return r(a,[{key:"registerPlugin",value:function(e){var t=this;Object.keys(e).forEach((function(a){t.plugins[a]=e[a]})),new Vi("registerPlugin").setMessage("".concat(Object.keys(e))).end()}},{key:"getPlugin",value:function(e){return this.plugins[e]}},{key:"reset",value:function(){}}]),a}(dn),Ms=function(e){l(o,e);var a=y(o);function o(e){var t;return n(this,o),(t=a.call(this,e))._n="SyncUnreadMessageModule",t._cookie="",t._onlineSyncFlag=!1,t.getInnerEmitterInstance().on(nr,t._onLoginSuccess,g(t)),t}return r(o,[{key:"_onLoginSuccess",value:function(e){this._startSync({cookie:this._cookie,syncFlag:0,isOnlineSync:0})}},{key:"_startSync",value:function(e){var a=this,n=e.cookie,o=e.syncFlag,i=e.isOnlineSync,r="".concat(this._n,"._startSync");He.l("".concat(r," cookie:").concat(n," syncFlag:").concat(o," isOnlineSync:").concat(i)),this.request({protocolName:gn,requestData:{cookie:n,syncFlag:o,isOnlineSync:i}}).then((function(e){var n=e.data,o=n.cookie,i=n.syncFlag;a._cookie=o,Zt(o)||(0===i||1===i?(a._dispatchUnreadMessage(t(t({},e.data),{},{isSyncingEnded:!1})),a._startSync({cookie:o,syncFlag:i,isOnlineSync:0})):2===i&&a._dispatchUnreadMessage(t(t({},e.data),{},{isSyncingEnded:!0})))})).catch((function(e){He.e("".concat(r," failed. error:"),e)}))}},{key:"_dispatchUnreadMessage",value:function(e){e.eventArray&&this.getModule(Ja).onMessage({head:{},body:{eventArray:e.eventArray,isInstantMessage:this._onlineSyncFlag,isSyncingEnded:e.isSyncingEnded}}),this.getModule(Oa).onNewC2CMessage({dataList:e.messageList,isInstantMessage:!!e.isSyncingEnded&&this._onlineSyncFlag,C2CRemainingUnreadList:e.C2CRemainingUnreadList,C2CPairUnreadList:e.C2CPairUnreadList})}},{key:"startOnlineSync",value:function(){He.l("".concat(this._n,".startOnlineSync")),this._onlineSyncFlag=!0,this._startSync({cookie:this._cookie,syncFlag:0,isOnlineSync:1})}},{key:"startSyncOnReconnected",value:function(){He.l("".concat(this._n,".startSyncOnReconnected.")),this._onlineSyncFlag=!0,this._startSync({cookie:this._cookie,syncFlag:0,isOnlineSync:0})}},{key:"reset",value:function(){He.l("".concat(this._n,".reset")),this._onlineSyncFlag=!1,this._cookie=""}}]),o}(dn),Ss={request:{toAccount:"To_Account",fromAccount:"From_Account",to:"To_Account",from:"From_Account",groupID:"GroupId",groupAtUserID:"GroupAt_Account",extension:"Ext",data:"Data",description:"Desc",elements:"MsgBody",sizeType:"Type",downloadFlag:"Download_Flag",thumbUUID:"ThumbUUID",videoUUID:"VideoUUID",remoteAudioUrl:"Url",remoteVideoUrl:"VideoUrl",videoUrl:"",imageUrl:"URL",fileUrl:"Url",uuid:"UUID",priority:"MsgPriority",receiverUserID:"To_Account",receiverGroupID:"GroupId",messageSender:"SenderId",messageReceiver:"ReceiverId",nick:"From_AccountNick",avatar:"From_AccountHeadurl",messageNumber:"MsgNum",pbDownloadKey:"PbMsgKey",downloadKey:"JsonMsgKey",applicationType:"PendencyType",userIDList:"To_Account",groupNameList:"GroupName",userID:"To_Account",groupAttributeList:"GroupAttr",mainSequence:"AttrMainSeq",avChatRoomKey:"BytesKey",attributeControl:"AttrControl",sequence:"seq",messageControlInfo:"SendMsgControl",updateSequence:"UpdateSeq",clientTime:"MsgClientTime",sequenceList:"MsgSeqList",topicID:"TopicId",customData:"CustomString",isSupportTopic:"SupportTopic",isWebUniapp:"is_web_uniapp",isSupportExtension:"SupportMessageExtension",messageSequence:"MsgSeq",messageKey:"MsgKey",startSequence:"startSeq",simplifiedMessage:"DownsizeFlag"},response:{MsgPriority:"priority",ThumbUUID:"thumbUUID",VideoUUID:"videoUUID",Download_Flag:"downloadFlag",GroupId:"groupID",Member_Account:"userID",MsgList:"messageList",SyncFlag:"syncFlag",To_Account:"to",From_Account:"from",MsgSeq:"sequence",MsgRandom:"random",MsgTime:"time",MsgTimeStamp:"time",MsgContent:"content",MsgBody:"elements",From_AccountNick:"nick",From_AccountHeadurl:"avatar",GroupWithdrawInfoArray:"revokedInfos",GroupReadInfoArray:"groupMessageReadNotice",LastReadMsgSeq:"lastMessageSeq",WithdrawC2cMsgNotify:"c2cMessageRevokedNotify",C2cWithdrawInfoArray:"revokedInfos",C2cReadedReceipt:"c2cMessageReadReceipt",ReadC2cMsgNotify:"c2cMessageReadNotice",LastReadTime:"peerReadTime",MsgRand:"random",MsgType:"type",MsgShow:"messageShow",NextMsgSeq:"nextMessageSeq",FaceUrl:"avatar",ProfileDataMod:"profileModify",Profile_Account:"userID",ValueBytes:"value",ValueNum:"value",NoticeSeq:"noticeSequence",NotifySeq:"notifySequence",MsgFrom_AccountExtraInfo:"messageFromAccountExtraInformation",Operator_Account:"operatorID",OpType:"operationType",ReportType:"operationType",UserId:"userID",User_Account:"userID",List_Account:"userIDList",MsgOperatorMemberExtraInfo:"operatorInfo",MsgMemberExtraInfo:"memberInfoList",ImageUrl:"avatar",NickName:"nick",MsgGroupNewInfo:"newGroupProfile",MsgAppDefinedData:"groupCustomField",Owner_Account:"ownerID",GroupFaceUrl:"avatar",GroupIntroduction:"introduction",GroupNotification:"notification",GroupApplyJoinOption:"joinOption",MsgKey:"messageKey",GroupInfo:"groupProfile",ShutupTime:"muteTime",Desc:"description",Ext:"extension",GroupAt_Account:"groupAtUserID",MsgNum:"messageNumber",PbMsgKey:"pbDownloadKey",JsonMsgKey:"downloadKey",MsgModifiedFlag:"isModified",PendencyItem:"applicationItem",PendencyType:"applicationType",AddTime:"time",AddSource:"source",AddWording:"wording",ProfileImImage:"avatar",PendencyAdd:"friendApplicationAdded",FrienPencydDel_Account:"friendApplicationDeletedUserIDList",Peer_Account:"userID",GroupAttr:"groupAttributeList",GroupAttrAry:"groupAttributeList",AttrMainSeq:"mainSequence",seq:"sequence",GroupAttrOption:"groupAttributeOption",BytesChangedKeys:"changedKeyList",GroupAttrInfo:"groupAttributeList",GroupAttrSeq:"mainSequence",PushChangedAttrValFlag:"isWithChangedAttributeInfo",SubKeySeq:"sequence",Val:"value",MsgGroupFromCardName:"senderNameCard",MsgGroupFromNickName:"senderNick",C2cNick:"peerNick",C2cImage:"peerAvatar",SendMsgControl:"messageControlInfo",NoLastMsg:"excludedFromLastMessage",NoUnread:"excludedFromUnreadCount",UpdateSeq:"updateSequence",MuteNotifications:"muteFlag",MsgClientTime:"clientTime",TinyId:"tinyID",GroupMsgReceiptList:"readReceiptList",ReadNum:"readCount",UnreadNum:"unreadCount",TopicId:"topicID",MillionGroupFlag:"communityType",SupportTopic:"isSupportTopic",MsgTopicNewInfo:"newTopicInfo",ShutupAll:"muteAllMembers",CustomString:"customData",TopicFaceUrl:"avatar",TopicIntroduction:"introduction",TopicNotification:"notification",TopicIdArray:"topicIDList",MsgVersion:"messageVersion",C2cMsgModNotifys:"c2cMessageModified",GroupMsgModNotifys:"groupMessageModified",ApplyJoinOption:"joinOption",MsgFlag:"messageRemindType",AtInfoList:"groupAtInfoList",AtFlagList:"groupAtType",AtMsgSeq:"sequence",BanDuration:"duration",BanDescription:"reason",NotVisible:"invisible",BytesTag:"tag",BytesValue:"value",RptBytesValue:"value",LatestSeq:"globalSequence",ClearSeq:"clearSequence",SupportMessageExtension:"isSupportExtension",ExtensionList:"extensions",GroupCounter:"counterList",Revoker_Account:"revoker",MsgExtensionNotify:"messageExtensionNotify",ExtensionC2cMsgInfo:"messageInfo",ExtensionGroupMsgInfo:"messageInfo",MsgOptType:"operateType",SetKVInfo:"operateResultList",DeleteKVInfo:"operateResultList",ClearKVInfo:"operateResultList",MsgKeyValue:"extensions",ClearMsgSeq:"clearSequence",MsgLastSeq:"globalSequence",InviteJoinOption:"inviteOption",MemberList_Account:"inviteeList",MsgMemberExtraInfoList:"inviteeInfoList",E:"event",GInf:"groupProfile",MCT:"clientTime",MR:"random",MP:"priority",MTS:"time",GId:"groupID",MS:"sequence",CCD:"cloudCustomData",F_Account:"from",F_Hd:"avatar",F_NN:"nick",GN:"groupName",GT:"groupType",IsSys:"isSystemMessage",OpInf:"operatorInfo",Img:"avatar",NN:"nick",OnlineInf:"onlineMemberInfo",ET:"expireTime",Num:"onlineMemberNum",Opt:"operationType",O_Account:"operatorID",RT:"operationType",UDF:"userDefinedField",L_Account:"userIDList"},ignoreKeyWord:["C2C","ID","USP"]};function Is(e,t){if("string"!=typeof e&&!Array.isArray(e))throw new TypeError("Expected the input to be `string | string[]`");var a;return t=Object.assign({pascalCase:!1},t),0===(e=Array.isArray(e)?e.map((function(e){return e.trim()})).filter((function(e){return e.length})).join("-"):e.trim()).length?"":1===e.length?t.pascalCase?e.toUpperCase():e.toLowerCase():(e!==e.toLowerCase()&&(e=Ts(e)),a=e=e.replace(/^[_.\- ]+/,"").toLowerCase().replace(/[_.\- ]+(\w|$)/g,(function(e,t){return t.toUpperCase()})).replace(/\d+(\w|$)/g,(function(e){return e.toUpperCase()})),t.pascalCase?a.charAt(0).toUpperCase()+a.slice(1):a)}var Ts=function(e){for(var t=!1,a=!1,n=!1,o=0;o<e.length;o++){var i=e[o];t&&/[a-zA-Z]/.test(i)&&i.toUpperCase()===i?(e=e.slice(0,o)+"-"+e.slice(o),t=!1,n=a,a=!0,o++):a&&n&&/[a-zA-Z]/.test(i)&&i.toLowerCase()===i?(e=e.slice(0,o-1)+"-"+e.slice(o-1),n=a,a=!1,t=!0):(t=i.toLowerCase()===i&&i.toUpperCase()!==i,n=a,a=i.toUpperCase()===i&&i.toLowerCase()!==i)}return e};function Ds(e,t){var a=0;return function e(t,n){if(++a>100)return a--,t;if(lt(t)){var o=t.map((function(t){return rt(t)?e(t,n):t}));return a--,o}if(rt(t)){var i=(r=t,s=function(e,t){if(!ht(t))return!1;if((o=t)!==Is(o))for(var a=0;a<Ss.ignoreKeyWord.length&&!t.includes(Ss.ignoreKeyWord[a]);a++);var o,i;return ct(n[t])?"OPPOChannelID"===(i=t)?i:i[0].toUpperCase()+Is(i).slice(1):n[t]},l=Object.create(null),Object.keys(r).forEach((function(e){var t=s(r[e],e);t&&(l[t]=r[e])})),l);return i=Vt(i,(function(t,a){return lt(t)||rt(t)?e(t,n):t})),a--,i}var r,s,l}(e,t)}function bs(e,t){if(lt(e))return e.map((function(e){return rt(e)?bs(e,t):e}));if(rt(e)){var a=(n=e,o=function(e,a){return ct(t[a])?Is(a):t[a]},i={},Object.keys(n).forEach((function(e){i[o(n[e],e)]=n[e]})),i);return Vt(a,(function(e){return lt(e)||rt(e)?bs(e,t):e}))}var n,o,i}var Vs=String.fromCharCode,As=function(e){var t=0|e.charCodeAt(0);if(55296<=t)if(t<56320){var a=0|e.charCodeAt(1);if(56320<=a&&a<=57343){if((t=(t<<10)+a-56613888|0)>65535)return Vs(240|t>>>18,128|t>>>12&63,128|t>>>6&63,128|63&t)}else t=65533}else t<=57343&&(t=65533);return t<=2047?Vs(192|t>>>6,128|63&t):Vs(224|t>>>12,128|t>>>6&63,128|63&t)},Ls=function(e){for(var t=void 0===e?"":(""+e).replace(/[\x80-\uD7ff\uDC00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]?/g,As),a=0|t.length,n=new Uint8Array(a),o=0;o<a;o=o+1|0)n[o]=0|t.charCodeAt(o);return n},Rs=function(){function e(t){n(this,e),this._handler=t;var a=t.getURL();if(this._socket=null,this._workerSocket=null,this._id=yt(),this._handler.getIsWorkerEnabled()){var o=URL.createObjectURL(new Blob([';let _socket = null;onmessage = function(event) {  if (event.data.cmd === "start") {    const url = event.data.url;    _socket = new WebSocket(url);    _socket.binaryType = "arraybuffer";    _socket.onopen = function() {      postMessage({ callback: "onOpen", extensions: _socket.extensions });    };    _socket.onclose = function(e) {      postMessage({ callback: "onOpen", e: { code: e.code, reason: e.reason } });    };    _socket.onmessage = function(e) {      postMessage({ callback: "onMessage", data: e.data });    };    _socket.onerror = function(e) {      postMessage({ callback: "onError", e: { isTrusted: "true" } });    };  } else if (event.data.cmd === "sendMessage") {    if (_socket !== null) {      _socket.send(event.data.data);    }  } else if (event.data.cmd === "stop") {    if (_socket !== null) {      _socket.close(event.data.code);      _socket = null;    }  }};'],{type:"application/javascript; charset=utf-8"}));this._workerSocket=new Worker(o);var i=this;this._workerSocket.onmessage=function(e){var t=e.data,a=t.callback,n=t.e,o=t.extensions;"onOpen"===a?i._onOpen(o):"onClose"===a?i._onClose(n):"onError"===a?i._onError(n):"onMessage"===a&&i._onMessage(e.data)},this._workerSocket.postMessage({cmd:"start",id:this._id,url:a})}else se?ne?(ce.connectSocket({url:a,header:{"content-type":"application/json"}}),ce.onSocketClose(this._onClose.bind(this)),ce.onSocketOpen(this._onOpen.bind(this)),ce.onSocketMessage(this._onMessage.bind(this)),ce.onSocketError(this._onError.bind(this))):(this._socket=ce.connectSocket({url:a,header:{"content-type":"application/json"},complete:function(){}}),this._socket.onClose(this._onClose.bind(this)),this._socket.onOpen(this._onOpen.bind(this)),this._socket.onMessage(this._onMessage.bind(this)),this._socket.onError(this._onError.bind(this))):le&&(this._socket=new WebSocket(a),this._socket.binaryType="arraybuffer",this._socket.onopen=this._onOpen.bind(this,this._socket.extensions),this._socket.onmessage=this._onMessage.bind(this),this._socket.onclose=this._onClose.bind(this),this._socket.onerror=this._onError.bind(this));this._canIUseBinaryFrame=t.canIUseBinaryFrame()}return r(e,[{key:"getID",value:function(){return this._id}},{key:"_onOpen",value:function(e){this._handler.onOpen({id:this._id,res:JSON.stringify(e)})}},{key:"_onClose",value:function(e){this._handler.onClose({id:this._id,e:e})}},{key:"_onMessage",value:function(e){var t;t=this._canIUseBinaryFrame?this._isAppCompressedData(e.data)?this._handler.inflate(e.data):function(e){for(var t=new Uint8Array(e),a="",n=0,o=t.length;n<o;){var i=t[n],r=0,s=0;if(i<=127?(r=0,s=255&i):i<=223?(r=1,s=31&i):i<=239?(r=2,s=15&i):i<=244&&(r=3,s=7&i),o-n-r>0)for(var l=0;l<r;)s=s<<6|63&(i=t[n+l+1]),l+=1;else s=65533,r=o-n;a+=String.fromCodePoint(s),n+=r+1}return a}(e.data):e.data,this._handler.onMessage({data:t})}},{key:"_isAppCompressedData",value:function(e){var t=new Uint8Array(e);return 67===t[0]&&79===t[1]&&77===t[2]&&80===t[3]}},{key:"_onError",value:function(e){this._handler.onError({id:this._id,e:e})}},{key:"setIsWorkerEnabled",value:function(e){this._isWorkerEnabled=!0}},{key:"close",value:function(e){if(this._workerSocket&&(this._workerSocket.postMessage({cmd:"stop",code:e}),this._workerSocket.terminate(),this._workerSocket=null),ne)return ce.offSocketClose(),ce.offSocketMessage(),ce.offSocketOpen(),ce.offSocketError(),void ce.closeSocket();this._socket&&(se?(this._socket.onClose((function(){})),this._socket.onOpen((function(){})),this._socket.onMessage((function(){})),this._socket.onError((function(){}))):le&&(this._socket.onopen=null,this._socket.onmessage=null,this._socket.onclose=null,this._socket.onerror=null),ae?this._socket.close({code:e}):this._socket.close(e),this._socket=null)}},{key:"send",value:function(e){if(this._workerSocket)this._workerSocket.postMessage({cmd:"sendMessage",data:this._canIUseBinaryFrame?Ls(e.data).buffer:e.data});else{if(ne)return void ce.sendSocketMessage({data:e.data,fail:function(){e.fail&&e.requestID&&e.fail(e.requestID)}});this._socket&&(se?this._socket.send({data:this._canIUseBinaryFrame?Ls(e.data).buffer:e.data,fail:function(){e.fail&&e.requestID&&e.fail(e.requestID)}}):le&&this._socket.send(this._canIUseBinaryFrame?Ls(e.data):e.data))}}}]),e}(),Os=4e3,Bs=4001,Ps=["keyMap"],Us=["keyMap"],Gs="connected",Fs="connecting",qs="disconnected",zs=function(){function e(t){n(this,e),this._channelModule=t,this._n="SocketHandler",this._promiseMap=new Map,this._readyState=qs,this._simpleRequestMap=new Map,this.MAX_SIZE=100,this._startSequence=yt(),this._startTs=0,this._reConnectFlag=!1,this._nextPingTs=0,this._reConnectCount=0,this.MAX_RECONNECT_COUNT=3,this._socketID=-1,this._random=0,this._socket=null,this._url="",this._onOpenTs=0,this._canIUseBinaryFrame=!0,this._isWorkerEnabled=!0,this._setWebsocketHost(),this._initConnection()}return r(e,[{key:"_setWebsocketHost",value:function(){var e=this._channelModule.getModule(qa),t=R;this._channelModule.isOversea()&&(t=O),e.isSingaporeSite()?t=B:e.isKoreaSite()?t=P:e.isGermanySite()?t=U:e.isIndiaSite()?t=G:e.isJapanSite()?t=F:e.isUSASite()&&(t=q),z.HOST.setCurrent(t)}},{key:"_initConnection",value:function(){ct(z.HOST.CURRENT.BACKUP)||""===this._url?this._url=z.HOST.CURRENT.DEFAULT:this._url===z.HOST.CURRENT.DEFAULT?this._url=z.HOST.CURRENT.BACKUP:this._url===z.HOST.CURRENT.BACKUP?this._url=this._canIUseAnyCast()?z.HOST.CURRENT.ANYCAST:z.HOST.CURRENT.DEFAULT:this._url===z.HOST.CURRENT.ANYCAST&&(z.HOST.CURRENT.ANYCAST="",this._url=z.HOST.CURRENT.DEFAULT);var e=this._channelModule.getModule(qa).getProxyServer();Zt(e)||(this._url=e),this._connect(),this._nextPingTs=0}},{key:"_canIUseAnyCast",value:function(){return le&&z.HOST.CURRENT.ANYCAST}},{key:"onCheckTimer",value:function(e){e%1==0&&this._checkPromiseMap()}},{key:"_checkPromiseMap",value:function(){var e=this;0!==this._promiseMap.size&&this._promiseMap.forEach((function(t,a){var n=t.reject,o=t.timestamp,i=15e3;-1!==a.indexOf(mn)?i=9e4:-1!==a.indexOf(jo)&&(i=3e3),Date.now()-o>=i&&(He.l("".concat(e._n,"._checkPromiseMap request timeout, delete requestID:").concat(a)),e._promiseMap.delete(a),n(new Ji({code:fi.NETWORK_TIMEOUT})),e._channelModule.onRequestTimeout(a))}))}},{key:"onOpen",value:function(e){if(""!==this._readyState){this._onOpenTs=Date.now();var t=e.id,a=e.res;this._socketID=t;var n=Date.now()-this._startTs,o="socketID:".concat(t," res:").concat(a);He.l("".concat(this._n,"._onOpen cost:").concat(n," ms. ").concat(o)),new Vi("wsOnOpen").setMessage(n).setCostTime(n).setMoreMessage(o).end(),e.id===this._socketID&&(this._readyState=Gs,this._reConnectCount=0,this._resend(),!0===this._reConnectFlag&&(this._channelModule.onReconnected(),this._reConnectFlag=!1),this._channelModule.onOpen())}}},{key:"onClose",value:function(e){var t=new Vi("wsOnClose"),a=e.id,n=e.e,o="sourceSocketID:".concat(a," currentSocketID:").concat(this._socketID," code:").concat(n.code," reason:").concat(n.reason),i=0;0!==this._onOpenTs&&(i=Date.now()-this._onOpenTs),t.setMessage(i).setCostTime(i).setMoreMessage(o).setCode(n.code).end(),He.l("".concat(this._n,"._onClose ").concat(o," onlineTime:").concat(i)),a===this._socketID&&(this._readyState=qs,i<1e3?this._channelModule.onReconnectFailed():this._channelModule.onClose())}},{key:"onError",value:function(e){var t=e.id,a=e.e,n="sourceSocketID:".concat(t," currentSocketID:").concat(this._socketID);new Vi("wsOnError").setMessage(a.errMsg||gt(a)).setMoreMessage(n).setLevel("error").end(),He.w("".concat(this._n,"._onError"),a,n),t===this._socketID&&(this._readyState="",this._channelModule.onError())}},{key:"onMessage",value:function(e){var t;try{t=JSON.parse(e.data)}catch(c){new Vi("jsonParseError").setMessage(e.data).end()}if(t&&t.head){var a=this._getRequestIDFromHead(t.head),n=t.body;if(!this._isTRTCCommand(a)){var o=Ut(t.head);n=bs(t.body,this._getResponseKeyMap(o))}if(He.d("".concat(this._n,".onMessage ret:").concat(JSON.stringify(n)," requestID:").concat(a," has:").concat(this._promiseMap.has(a))),this._setNextPingTs(),this._promiseMap.has(a)){var i=this._promiseMap.get(a),r=i.resolve,s=i.reject,l=i.timestamp;return this._promiseMap.delete(a),this._calcRTT(l),void(n.errorCode&&0!==n.errorCode?(this._channelModule.onErrorCodeNotZero(n),s(new Ji({code:n.errorCode,message:n.errorInfo||"",data:a.includes(Vn)||a.includes(No)?{elements:n.elements,messageVersion:n.messageVersion,cloudCustomData:n.cloudCustomData}:void 0}))):r(Wi(n)))}this._channelModule.onMessage({head:t.head,body:n})}}},{key:"_isTRTCCommand",value:function(e){for(var t=this._channelModule.getModule(sn).getCommandList(),a=!1,n=0;n<t.length;n++)if(e.startsWith(t[n])){a=!0;break}return a}},{key:"_calcRTT",value:function(e){var t=Date.now()-e;this._channelModule.getModule(an).addRTT(t)}},{key:"_connect",value:function(){this._startTs=Date.now(),this._onOpenTs=0,this._socket=new Rs(this),this._socketID=this._socket.getID(),this._readyState=Fs,He.l("".concat(this._n,"._connect isWorkerEnabled:").concat(this.getIsWorkerEnabled()," socketID:").concat(this._socketID," url:").concat(this.getURL())),new Vi("wsConnect").setMessage("socketID:".concat(this._socketID," url:").concat(this.getURL())).end()}},{key:"getURL",value:function(){this._channelModule.isDevMode()&&(this._canIUseBinaryFrame=!1);var e=Rt();(ne||X&&"windows"===e||ie)&&(this._canIUseBinaryFrame=!1);var t=-1;"ios"===e?t=Ee||-1:"android"===e&&(t=Ne||-1);var a=this._channelModule.getModule(qa),n=this._channelModule.getPlatform(),o=a.getSDKAppID(),i=a.getInstanceID(),r="sdkappid=".concat(o,"&instanceid=").concat(i,"&random=").concat(this._getRandom(),"&platform=").concat(n,"&host=").concat(e)+"&version=".concat(t,"&sdkversion=").concat("2.27.6");return Q&&(r+="&isminigame=1"),this._channelModule.canIUseInflate()&&(r+="&compress=gzip"),this._canIUseBinaryFrame?"".concat(this._url,"/binfo?").concat(r):"".concat(this._url,"/info?").concat(r)}},{key:"_closeConnection",value:function(e){He.l("".concat(this._n,"._closeConnection socketID:").concat(this._socketID)),this._socket&&(this._socket.close(e),this._socketID=-1,this._socket=null,this._readyState=qs)}},{key:"_resend",value:function(){var e=this;if(He.l("".concat(this._n,"._resend reConnectFlag:").concat(this._reConnectFlag),"promiseMap.size:".concat(this._promiseMap.size," simpleRequestMap.size:").concat(this._simpleRequestMap.size)),this._promiseMap.size>0&&this._promiseMap.forEach((function(t,a){var n=t.uplinkData,o=t.resolve,i=t.reject;e._promiseMap.set(a,{resolve:o,reject:i,timestamp:Date.now(),uplinkData:n}),e._execute(a,n)})),this._simpleRequestMap.size>0){var t,a=M(this._simpleRequestMap);try{for(a.s();!(t=a.n()).done;){var n=_(t.value,2),o=n[0],i=n[1];this._execute(o,i)}}catch(r){a.e(r)}finally{a.f()}this._simpleRequestMap.clear()}}},{key:"send",value:function(e){var t=this;e.head.seq=this._getSequence(),e.head.reqtime=Math.floor(Date.now()/1e3),e.keyMap;var a=v(e,Ps),n=this._getRequestIDFromHead(e.head),o=JSON.stringify(a);return new Promise((function(e,i){t._promiseMap.set(n,{resolve:e,reject:i,timestamp:Date.now(),uplinkData:o}),He.d("".concat(t._n,".send uplinkData:").concat(JSON.stringify(a)," requestID:").concat(n," readyState:").concat(t._readyState)),t._readyState!==Gs?t._reConnect():(t._execute(n,o),t._channelModule.getModule(an).addRequestCount())}))}},{key:"simplySend",value:function(e){e.head.seq=this._getSequence(),e.head.reqtime=Math.floor(Date.now()/1e3),e.keyMap;var t=v(e,Us),a=this._getRequestIDFromHead(e.head),n=JSON.stringify(t);this._readyState!==Gs?(this._simpleRequestMap.size<this.MAX_SIZE?this._simpleRequestMap.set(a,n):He.l("".concat(this._n,".simplySend. simpleRequestMap is full, drop request!")),this._reConnect()):this._execute(a,n)}},{key:"_execute",value:function(e,t){this._socket.send({data:t,fail:se?this._onSendFail.bind(this):void 0,requestID:e})}},{key:"_onSendFail",value:function(e){He.l("".concat(this._n,"._onSendFail requestID:").concat(e))}},{key:"_getSequence",value:function(){var e;if(this._startSequence<2415919103)return e=this._startSequence,this._startSequence+=1,2415919103===this._startSequence&&(this._startSequence=yt()),e}},{key:"_getRequestIDFromHead",value:function(e){return e.servcmd+e.seq}},{key:"_getResponseKeyMap",value:function(e){var a=this._channelModule.getKeyMap(e);return t(t({},Ss.response),a.response)}},{key:"_reConnect",value:function(){this._readyState!==Gs&&this._readyState!==Fs&&this.forcedReconnect()}},{key:"forcedReconnect",value:function(){var e=this,t="".concat(this._n,".forcedReconnect");He.l("".concat(t," count:").concat(this._reConnectCount," readyState:").concat(this._readyState)),this._reConnectFlag=!0,this._resetRandom(),this._reConnectCount<this.MAX_RECONNECT_COUNT?(this._reConnectCount+=1,this._closeConnection(Bs),this._initConnection()):(this._reConnectCount=0,this._channelModule.probeNetwork().then((function(a){var n=_(a,2),o=n[0];n[1],o?(He.w("".concat(t," disconnected from wsserver but network is ok, continue...")),e._closeConnection(Bs),e._initConnection()):e._channelModule.onReconnectFailed()})))}},{key:"getReconnectFlag",value:function(){return this._reConnectFlag}},{key:"_setNextPingTs",value:function(){this._nextPingTs=Date.now()+1e4}},{key:"getNextPingTs",value:function(){return this._nextPingTs}},{key:"isConnected",value:function(){return this._readyState===Gs}},{key:"canIUseBinaryFrame",value:function(){return this._canIUseBinaryFrame}},{key:"inflate",value:function(e){if(this._channelModule.canIUseInflate())return this._channelModule.getModule(un).inflate(e)}},{key:"setIsWorkerEnabled",value:function(e){He.l("".concat(this._n,".setIsWorkerEnabled flag:").concat(e)),this._isWorkerEnabled=e}},{key:"getIsWorkerEnabled",value:function(){return this._isWorkerEnabled&&De}},{key:"_getRandom",value:function(){return 0===this._random&&(this._random=Math.random()),this._random}},{key:"_resetRandom",value:function(){this._random=0}},{key:"close",value:function(){He.l("".concat(this._n,".close")),this._closeConnection(Os),this._promiseMap.clear(),this._startSequence=yt(),this._readyState=qs,this._simpleRequestMap.clear(),this._reConnectFlag=!1,this._reConnectCount=0,this._onOpenTs=0,this._url="",this._random=0,this._canIUseBinaryFrame=!0,this._isWorkerEnabled=!0}}]),e}(),Hs=function(e){l(a,e);var t=y(a);function a(e){var o;if(n(this,a),(o=t.call(this,e))._n="ChannelModule",o._socketHandler=new zs(g(o)),o._probing=!1,o._isAppShowing=!0,o._previousState=I.NET_STATE_CONNECTED,se&&"function"==typeof ce.onAppShow&&"function"==typeof ce.onAppHide){var i=o._onAppHide.bind(g(o)),r=o._onAppShow.bind(g(o));"function"==typeof ce.offAppHide&&ce.offAppHide(i),"function"==typeof ce.offAppShow&&ce.offAppShow(r),ce.onAppHide(i),ce.onAppShow(r)}return o._timerForNotLoggedIn=-1,o._timerForNotLoggedIn=setInterval(o.onCheckTimer.bind(g(o)),1e3),o._fatalErrorFlag=!1,o}return r(a,[{key:"onCheckTimer",value:function(e){this._socketHandler&&(this.isLoggedIn()?(this._timerForNotLoggedIn>0&&(clearInterval(this._timerForNotLoggedIn),this._timerForNotLoggedIn=-1),this._socketHandler.onCheckTimer(e)):this._socketHandler.onCheckTimer(1),this._checkNextPing())}},{key:"onErrorCodeNotZero",value:function(e){this.getModule(Ja).onErrorCodeNotZero(e)}},{key:"onMessage",value:function(e){this.getModule(Ja).onMessage(e)}},{key:"send",value:function(e){return this._socketHandler?this._previousState!==I.NET_STATE_CONNECTED&&e.head.servcmd.includes($o)?(this.reConnect(),this._sendLogViaHTTP(e)):this._socketHandler.send(e):Promise.reject()}},{key:"_sendLogViaHTTP",value:function(e){var t=z.HOST.CURRENT.STAT;return new Promise((function(a,n){var o="".concat(t,"/v4/imopenstat/tim_web_report_v2?sdkappid=").concat(e.head.sdkappid,"&reqtime=").concat(Date.now()),i=JSON.stringify(e.body),r="application/x-www-form-urlencoded;charset=UTF-8";if(se)ce.request({url:o,data:i,method:"POST",timeout:3e3,header:{"content-type":r},success:function(){a()},fail:function(){n(new Ji({code:fi.NETWORK_ERROR}))}});else{var s=new XMLHttpRequest,l=setTimeout((function(){s.abort(),n(new Ji({code:fi.NETWORK_TIMEOUT}))}),3e3);s.onreadystatechange=function(){4===s.readyState&&(clearTimeout(l),200===s.status||304===s.status?a():n(new Ji({code:fi.NETWORK_ERROR})))},s.open("POST",o,!0),s.setRequestHeader("Content-type",r),s.send(i)}}))}},{key:"simplySend",value:function(e){return this._socketHandler?this._socketHandler.simplySend(e):Promise.reject()}},{key:"onOpen",value:function(){this._ping()}},{key:"onClose",value:function(){this._socketHandler&&this._socketHandler.getReconnectFlag()&&this._emitNetStateChangeEvent(I.NET_STATE_DISCONNECTED),this.reConnect()}},{key:"onError",value:function(){se&&!ie&&this.outputWarning("DomainNameInMP"),this._emitNetStateChangeEvent(I.NET_STATE_DISCONNECTED)}},{key:"getKeyMap",value:function(e){return this.getModule(Ja).getKeyMap(e)}},{key:"_onAppHide",value:function(){this._isAppShowing=!1}},{key:"_onAppShow",value:function(){this._isAppShowing=!0}},{key:"onRequestTimeout",value:function(e){}},{key:"onReconnected",value:function(){He.l("".concat(this._n,".onReconnected")),this._m.restartTimer(),this.getModule(Ja).onReconnected(),this._emitNetStateChangeEvent(I.NET_STATE_CONNECTED)}},{key:"onReconnectFailed",value:function(){He.l("".concat(this._n,".onReconnectFailed")),this._emitNetStateChangeEvent(I.NET_STATE_DISCONNECTED)}},{key:"setIsWorkerEnabled",value:function(e){this._socketHandler&&this._socketHandler.setIsWorkerEnabled(!1)}},{key:"offline",value:function(){this._emitNetStateChangeEvent(I.NET_STATE_DISCONNECTED)}},{key:"reConnect",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=!1;this._socketHandler&&(t=this._socketHandler.getReconnectFlag());var a="forcedFlag:".concat(e," fatalErrorFlag:").concat(this._fatalErrorFlag," previousState:").concat(this._previousState," reconnectFlag:").concat(t);if(He.l("".concat(this._n,".reConnect ").concat(a)),!this._fatalErrorFlag&&this._socketHandler){if(!0===e)this._socketHandler.forcedReconnect();else{if(this._previousState===I.NET_STATE_CONNECTING&&t)return;this._socketHandler.forcedReconnect()}this._emitNetStateChangeEvent(I.NET_STATE_CONNECTING)}}},{key:"_emitNetStateChangeEvent",value:function(e){this._previousState!==e&&(He.l("".concat(this._n,"._emitNetStateChangeEvent from ").concat(this._previousState," to ").concat(e)),this._previousState=e,this.emitOuterEvent(S.NET_STATE_CHANGE,{state:e}))}},{key:"_ping",value:function(){var e=this;if(!0!==this._probing){this._probing=!0;var t=this.getModule(Ja).getProtocolData({protocolName:jo});this.send(t).then((function(){e._probing=!1})).catch((function(t){if(He.w("".concat(e._n,"._ping failed. error:"),t),e._probing=!1,t&&60002===t.code)return new Vi("error").setMessage("code:".concat(t.code," message:").concat(t.message)).setNetworkType(e.getModule($a).getNetworkType()).end(),e._fatalErrorFlag=!0,void e._emitNetStateChangeEvent(I.NET_STATE_DISCONNECTED);e.probeNetwork().then((function(t){var a=_(t,2),n=a[0],o=a[1];He.l("".concat(e._n,"._ping failed. probe network, isAppShowing:").concat(e._isAppShowing," online:").concat(n," networkType:").concat(o)),n?e.reConnect():e._emitNetStateChangeEvent(I.NET_STATE_DISCONNECTED)}))}))}}},{key:"_checkNextPing",value:function(){this._socketHandler&&this._socketHandler.isConnected()&&Date.now()>=this._socketHandler.getNextPingTs()&&this._ping()}},{key:"canIUseInflate",value:function(){return this._m.canIUseInflate()}},{key:"dealloc",value:function(){this._socketHandler&&(this._socketHandler.close(),this._socketHandler=null),this._timerForNotLoggedIn>-1&&clearInterval(this._timerForNotLoggedIn)}},{key:"onRestApiKickedOut",value:function(){this._socketHandler&&(this._socketHandler.close(),this.reConnect(!0))}},{key:"reset",value:function(){He.l("".concat(this._n,".reset")),this._previousState=I.NET_STATE_CONNECTED,this._probing=!1,this._fatalErrorFlag=!1,this._timerForNotLoggedIn=setInterval(this.onCheckTimer.bind(this),1e3)}}]),a}(dn),$s=["a2","tinyid"],js=["a2","tinyid"],Ks=function(){function e(t){n(this,e),this._n="ProtocolHandler",this._sessionModule=t,this._configMap=new Map,this._fillConfigMap()}return r(e,[{key:"_fillConfigMap",value:function(){this._configMap.clear();var e=this._sessionModule.genCommonHead(),a=this._sessionModule.genCosSpecifiedHead(),n=this._sessionModule.genSSOReportHead(),o=this._sessionModule.isIntl();this._configMap.set(mn,{head:t(t({},e),{},{servcmd:"".concat(z.NAME.IM_OPEN_STATUS,".").concat(z.CMD.LOGIN)}),body:{state:"Online",isWebUniapp:0,deviceBrand:0},keyMap:{request:{deviceBrand:"InstType"},response:{InstId:"instanceID",HelloInterval:"helloInterval"}}}),this._configMap.set(pn,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.IM_OPEN_STATUS,".").concat(z.CMD.LOGOUT)}),body:{type:0},keyMap:{request:{type:"wslogout_type"}}}}(e)),this._configMap.set(hn,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.IM_OPEN_STATUS,".").concat(z.CMD.HELLO)}),body:{isWebUniapp:0},keyMap:{response:{NewInstInfo:"newInstanceInfo"}}}}(e)),this._configMap.set(vn,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.STAT_SERVICE,".").concat(z.CMD.KICK_OTHER)}),body:{}}}(e)),this._configMap.set(qo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.IM_COS_SIGN,".").concat(z.CMD.COS_SIGN)}),body:{cmd:"open_im_cos_svc",subCmd:"get_cos_token",duration:300,version:2},keyMap:{request:{userSig:"usersig",subCmd:"sub_cmd",cmd:"cmd",duration:"duration",version:"version"},response:{expired_time:"expiredTime",bucket_name:"bucketName",session_token:"sessionToken",tmp_secret_id:"secretId",tmp_secret_key:"secretKey"}}}}(a)),this._configMap.set(zo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.CUSTOM_UPLOAD,".").concat(z.CMD.COS_PRE_SIG)}),body:{fileType:void 0,fileName:void 0,uploadMethod:0,duration:900},keyMap:{request:{userSig:"usersig",fileType:"file_type",fileName:"file_name",uploadMethod:"upload_method"},response:{expired_time:"expiredTime",request_id:"requestId",head_url:"headUrl",upload_url:"uploadUrl",download_url:"downloadUrl",ci_url:"ciUrl",snapshot_url:"requestSnapshotUrl"}}}}(a)),this._configMap.set(Ho,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.CUSTOM_UPLOAD,".").concat(z.CMD.VIDEO_COVER)}),body:{version:1,platform:void 0,coverName:void 0,requestSnapshotUrl:void 0},keyMap:{request:{version:"version",platform:"platform",coverName:"cover_name",requestSnapshotUrl:"snapshot_url"},response:{error_code:"errorCode",error_msg:"errorInfo",download_url:"snapshotUrl"}}}}(a)),this._configMap.set(ti,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.IM_CONFIG_MANAGER,".").concat(z.CMD.FETCH_COMMERCIAL_CONFIG)}),body:{SDKAppID:0},keyMap:{request:{SDKAppID:"uint32_sdkappid"},response:{int32_error_code:"errorCode",str_error_message:"errorMessage",str_purchase_bits:"purchaseBits",uint32_expired_time:"expiredTime"}}}}(e)),this._configMap.set(ai,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.IM_CONFIG_MANAGER,".").concat(z.CMD.PUSHED_COMMERCIAL_CONFIG)}),body:{},keyMap:{response:{int32_error_code:"errorCode",str_error_message:"errorMessage",str_purchase_bits:"purchaseBits",uint32_expired_time:"expiredTime"}}}}(e)),this._configMap.set(Qo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.IM_CONFIG_MANAGER,".").concat(z.CMD.FETCH_CLOUD_CONTROL_CONFIG)}),body:{SDKAppID:0,version:0},keyMap:{request:{SDKAppID:"uint32_sdkappid",version:"uint64_version"},response:{int32_error_code:"errorCode",str_error_message:"errorMessage",str_json_config:"cloudControlConfig",uint32_expired_time:"expiredTime",uint32_sdkappid:"SDKAppID",uint64_version:"version"}}}}(e)),this._configMap.set(ei,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.IM_CONFIG_MANAGER,".").concat(z.CMD.PUSHED_CLOUD_CONTROL_CONFIG)}),body:{},keyMap:{response:{int32_error_code:"errorCode",str_error_message:"errorMessage",str_json_config:"cloudControlConfig",uint32_expired_time:"expiredTime",uint32_sdkappid:"SDKAppID",uint64_version:"version"}}}}(e)),this._configMap.set(ni,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.OVERLOAD_PUSH,".").concat(z.CMD.OVERLOAD_NOTIFY)}),body:{},keyMap:{response:{OverLoadServCmd:"overloadCommand",DelaySecs:"waitingTime"}}}}(e)),this._configMap.set(gn,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.OPEN_IM,".").concat(z.CMD.GET_MESSAGES)}),body:{cookie:"",syncFlag:0,needAbstract:1,isOnlineSync:0,needSignaling:1},keyMap:{request:{fromAccount:"From_Account",toAccount:"To_Account",from:"From_Account",to:"To_Account",time:"MsgTimeStamp",sequence:"MsgSeq",random:"MsgRandom",elements:"MsgBody"},response:{MsgList:"messageList",SyncFlag:"syncFlag",To_Account:"to",From_Account:"from",ClientSeq:"clientSequence",MsgSeq:"sequence",NoticeSeq:"noticeSequence",NotifySeq:"notifySequence",MsgRandom:"random",MsgTimeStamp:"time",MsgContent:"content",ToGroupId:"to",MsgKey:"messageKey",GroupTips:"groupTips",MsgBody:"elements",MsgType:"type",C2CRemainingUnreadCount:"C2CRemainingUnreadList",C2CPairUnreadCount:"C2CPairUnreadList"}}}}(e)),o||(this._configMap.set(fn,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.OPEN_IM,".").concat(z.CMD.BIG_DATA_HALLWAY_AUTH_KEY)}),body:{}}}(e)),this._configMap.set(vi,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.IM_MSG_AUDIT_MGR,".").concat(z.CMD.GET_RPOFANITY_LIST)}),body:{version:0,deviceID:"",startIndex:void 0},keyMap:{request:{version:"uint64_version",deviceID:"str_device_id",startIndex:"uint64_start_index"},response:{msg_cmd_error_code:"errorInfo",str_err_msg:"errorMessage",uint32_code:"errorCode",msg_scene_ctl_config:"filterConfig",uint64_c2c_custom_msg_flag:"c2c_custom_message",uint64_c2c_text_msg_flag:"c2c_text_message",uint64_group_custom_msg_flag:"group_custom_message",uint64_group_text_msg_flag:"group_text_message",uint64_group_info_flag:"group_profile",uint64_group_member_info_flag:"group_member_profile",uint64_relation_chain_flag:"sns",uint64_user_info_flag:"user_profile",rpt_msg_dirty_word:"lexicon",str_dirty_word:"profanity",str_replaced_content:"replacement",uint64_filter_type:"filterType",uint64_id:"id",uint64_word_type:"profanityType",uint64_complete_flag:"completeFlag",uint64_next_start_index:"nextStartIndex",uint64_version:"version",uint64_expired_time:"expiredTime"}}}}(e))),this._configMap.set(yn,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.OPEN_IM,".").concat(z.CMD.SEND_MESSAGE)}),body:{fromAccount:"",toAccount:"",msgSeq:0,msgRandom:0,msgBody:[],cloudCustomData:void 0,nick:"",avatar:"",msgLifeTime:void 0,offlinePushInfo:{pushFlag:0,title:"",desc:"",ext:"",apnsInfo:{badgeMode:0,isVoipPush:void 0},androidInfo:{OPPOChannelID:""}},messageControlInfo:void 0,clientTime:void 0,needReadReceipt:0,isSupportExtension:0},keyMap:{request:{fromAccount:"From_Account",toAccount:"To_Account",msgTimeStamp:"MsgTimeStamp",msgSeq:"MsgSeq",msgRandom:"MsgRandom",msgBody:"MsgBody",count:"MaxCnt",lastMessageTime:"LastMsgTime",messageKey:"MsgKey",peerAccount:"Peer_Account",data:"Data",description:"Desc",extension:"Ext",type:"MsgType",content:"MsgContent",sizeType:"Type",uuid:"UUID",url:"",imageUrl:"URL",fileUrl:"Url",remoteAudioUrl:"Url",remoteVideoUrl:"VideoUrl",thumbUUID:"ThumbUUID",videoUUID:"VideoUUID",videoUrl:"",downloadFlag:"Download_Flag",nick:"From_AccountNick",avatar:"From_AccountHeadurl",from:"From_Account",time:"MsgTimeStamp",messageRandom:"MsgRandom",messageSequence:"MsgSeq",elements:"MsgBody",clientSequence:"ClientSeq",payload:"MsgContent",messageList:"MsgList",messageNumber:"MsgNum",abstractList:"AbstractList",messageBody:"MsgBody",needReadReceipt:"IsNeedReadReceipt"}}}}(e)),this._configMap.set(_n,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.GROUP,".").concat(z.CMD.SEND_GROUP_MESSAGE)}),body:{fromAccount:"",groupID:"",random:0,clientSequence:0,priority:"",msgBody:[],cloudCustomData:void 0,onlineOnlyFlag:0,offlinePushInfo:{pushFlag:0,title:"",desc:"",ext:"",apnsInfo:{badgeMode:0,isVoipPush:void 0},androidInfo:{OPPOChannelID:""}},groupAtInfo:[],messageControlInfo:void 0,clientTime:void 0,needReadReceipt:0,topicID:void 0,receiverList:void 0,isSupportExtension:0},keyMap:{request:{to:"GroupId",extension:"Ext",data:"Data",description:"Desc",random:"Random",sequence:"ReqMsgSeq",count:"ReqMsgNumber",type:"MsgType",priority:"MsgPriority",content:"MsgContent",elements:"MsgBody",sizeType:"Type",uuid:"UUID",url:"",imageUrl:"URL",fileUrl:"Url",remoteAudioUrl:"Url",remoteVideoUrl:"VideoUrl",thumbUUID:"ThumbUUID",videoUUID:"VideoUUID",videoUrl:"",downloadFlag:"Download_Flag",clientSequence:"ClientSeq",from:"From_Account",time:"MsgTimeStamp",messageRandom:"MsgRandom",messageSequence:"MsgSeq",payload:"MsgContent",messageList:"MsgList",messageNumber:"MsgNum",abstractList:"AbstractList",messageBody:"MsgBody",needReadReceipt:"NeedReadReceipt",receiverList:"To_Account"},response:{MsgTime:"time",MsgSeq:"sequence"}}}}(e)),this._configMap.set(Cn,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.OPEN_IM,".").concat(z.CMD.REVOKE_C2C_MESSAGE)}),body:{msgInfo:{fromAccount:"",toAccount:"",msgTimeStamp:0,msgSeq:0,msgRandom:0}},keyMap:{request:{msgInfo:"MsgInfo",msgTimeStamp:"MsgTimeStamp",msgSeq:"MsgSeq",msgRandom:"MsgRandom"}}}}(e)),this._configMap.set(lo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.GROUP,".").concat(z.CMD.REVOKE_GROUP_MESSAGE)}),body:{groupID:"",msgSeqList:void 0,topicID:""},keyMap:{request:{msgSeqList:"MsgSeqList",msgSeq:"MsgSeq"}}}}(e)),this._configMap.set(Tn,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.OPEN_IM,".").concat(z.CMD.GET_C2C_ROAM_MESSAGES)}),body:{peerAccount:"",count:15,lastMessageTime:0,messageKey:"",withRecalledMessage:1,direction:0},keyMap:{request:{messageKey:"MsgKey",peerAccount:"Peer_Account",count:"MaxCnt",lastMessageTime:"LastMsgTime",withRecalledMessage:"WithRecalledMsg",direction:"GetDirection"},response:{LastMsgTime:"lastMessageTime",IsNeedReadReceipt:"needReadReceipt",IsPeerRead:"readReceiptSentByPeer"}}}}(e)),this._configMap.set(Vn,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.OPEN_IM,".").concat(z.CMD.MODIFY_C2C_MESSAGE)}),body:{from:"",to:"",sequence:0,random:0,time:0,version:0,elements:void 0,cloudCustomData:void 0},keyMap:{request:{sequence:"MsgSeq",random:"MsgRandom",time:"MsgTime",version:"MsgVersion",type:"MsgType",content:"MsgContent"}}}}(e)),this._configMap.set(mo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.GROUP,".").concat(z.CMD.GET_GROUP_ROAM_MESSAGES)}),body:{withRecalledMsg:1,groupID:"",count:15,sequence:"",topicID:void 0},keyMap:{request:{sequence:"ReqMsgSeq",count:"ReqMsgNumber",withRecalledMessage:"WithRecalledMsg"},response:{Random:"random",MsgTime:"time",MsgSeq:"sequence",ReqMsgSeq:"sequence",RspMsgList:"messageList",IsPlaceMsg:"isPlaceMessage",IsSystemMsg:"isSystemMessage",ToGroupId:"to",EnumFrom_AccountType:"fromAccountType",EnumTo_AccountType:"toAccountType",GroupCode:"groupCode",MsgPriority:"priority",MsgBody:"elements",MsgType:"type",MsgContent:"content",IsFinished:"complete",Download_Flag:"downloadFlag",ClientSeq:"clientSequence",ThumbUUID:"thumbUUID",VideoUUID:"videoUUID",ToTopicId:"topicID",InvisibleMsgSeq:"invisibleSequenceList"}}}}(e)),this._configMap.set(Mn,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.OPEN_IM,".").concat(z.CMD.SET_C2C_MESSAGE_READ)}),body:{C2CMsgReaded:void 0},keyMap:{request:{lastMessageTime:"LastedMsgTime"}}}}(e)),this._configMap.set(Sn,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.OPEN_IM,".").concat(z.CMD.SET_C2C_PEER_MUTE_NOTIFICATIONS)}),body:{userIDList:void 0,muteFlag:0},keyMap:{request:{userIDList:"Peer_Account",muteFlag:"Mute_Notifications"}}}}(e)),this._configMap.set(In,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.OPEN_IM,".").concat(z.CMD.GET_C2C_PEER_MUTE_NOTIFICATIONS)}),body:{updateSequence:0},keyMap:{response:{MuteNotificationsList:"muteFlagList"}}}}(e)),this._configMap.set(co,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.GROUP,".").concat(z.CMD.SET_GROUP_MESSAGE_READ)}),body:{groupID:void 0,messageReadSeq:void 0,topicID:void 0},keyMap:{request:{messageReadSeq:"MsgReadedSeq"}}}}(e)),this._configMap.set(uo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.OPEN_IM,".").concat(z.CMD.SET_ALL_MESSAGE_READ)}),body:{readAllC2CMessage:0,groupMessageReadInfoList:[]},keyMap:{request:{readAllC2CMessage:"C2CReadAllMsg",groupMessageReadInfoList:"GroupReadInfo",messageSequence:"MsgSeq"},response:{C2CReadAllMsg:"readAllC2CMessage",GroupReadInfoArray:"groupMessageReadInfoList"}}}}(e)),this._configMap.set(bn,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.OPEN_IM,".").concat(z.CMD.DELETE_C2C_MESSAGE)}),body:{fromAccount:"",to:"",keyList:void 0},keyMap:{request:{keyList:"MsgKeyList"}}}}(e)),this._configMap.set(xo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.GROUP,".").concat(z.CMD.DELETE_GROUP_MESSAGE)}),body:{groupID:"",deleter:"",keyList:void 0,topicID:void 0},keyMap:{request:{deleter:"Deleter_Account",keyList:"Seqs"}}}}(e)),this._configMap.set(gi,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.IM_OPEN_TRANSLATE,".").concat(z.CMD.TRANSLATE_TEXT)}),body:{sourceTextList:void 0,SDKAppID:0,from:0,source:"",target:""},keyMap:{request:{sourceTextList:"SourceText",SDKAppID:"SdkAppId",from:"FromAccount"},response:{TargetText:"translatedTextList",RequestId:"requestID",CmdErrorCode:"error",ErrorCode:"code",ErrorInfo:"message"}}}}(e)),this._configMap.set(No,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.OPEN_IM,".").concat(z.CMD.MODIFY_GROUP_MESSAGE)}),body:{groupID:"",topicID:void 0,sequence:0,version:0,elements:void 0,cloudCustomData:void 0},keyMap:{request:{sequence:"MsgSeq",version:"MsgVersion",type:"MsgType",content:"MsgContent"}}}}(e)),this._configMap.set(po,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.GROUP,".").concat(z.CMD.GET_READ_RECEIPT)}),body:{groupID:"",sequenceList:void 0},keyMap:{request:{sequence:"MsgSeq"}}}}(e)),this._configMap.set(vo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.OPEN_IM,".").concat(z.CMD.SEND_C2C_READ_RECEIPT)}),body:{peerAccount:"",messageInfoList:void 0},keyMap:{request:{peerAccount:"Peer_Account",messageInfoList:"C2CMsgInfo",fromAccount:"From_Account",toAccount:"To_Account",sequence:"MsgSeq",random:"MsgRandom",time:"MsgTime",clientTime:"MsgClientTime"}}}}(e)),this._configMap.set(ho,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.GROUP,".").concat(z.CMD.SEND_READ_RECEIPT)}),body:{groupID:"",sequenceList:void 0},keyMap:{request:{sequenceList:"MsgSeqList",sequence:"MsgSeq"}}}}(e)),this._configMap.set(go,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.GROUP,".").concat(z.CMD.GET_READ_RECEIPT_DETAIL)}),body:{groupID:"",sequence:void 0,flag:0,cursor:0,count:0},keyMap:{request:{sequence:"MsgSeq",count:"Num"},response:{ReadList:"readUserIDList",Read_Account:"userID",UnreadList:"unreadUserIDList",Unread_Account:"userID",IsFinish:"isCompleted"}}}}(e)),this._configMap.set(An,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.OPEN_IM_MSG_EXT,".").concat(z.CMD.MODIFY_C2C_MESSAGE_EXTENSIONS)}),body:{from:void 0,to:void 0,messageKey:void 0,operateType:void 0,extensionList:void 0}}}(e)),this._configMap.set(Ln,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.OPEN_IM_MSG_EXT,".").concat(z.CMD.GET_C2C_MESSAGE_EXTENSIONS)}),body:{from:void 0,to:void 0,messageKey:void 0,startSequence:void 0}}}(e)),this._configMap.set(To,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.OPEN_IM_MSG_EXT,".").concat(z.CMD.MODIFY_GROUP_MESSAGE_EXTENSIONS)}),body:{groupID:void 0,topicID:void 0,messageSequence:void 0,operateType:void 0,extensionList:void 0}}}(e)),this._configMap.set(Do,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.OPEN_IM_MSG_EXT,".").concat(z.CMD.GET_GROUP_MESSAGE_EXTENSIONS)}),body:{groupID:void 0,topicID:void 0,messageSequence:void 0,startSequence:void 0}}}(e)),this._configMap.set(Dn,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.OPEN_IM,".").concat(z.CMD.GET_PEER_READ_TIME)}),body:{userIDList:void 0},keyMap:{request:{userIDList:"To_Account"},response:{ReadTime:"peerReadTimeList"}}}}(e)),this._configMap.set(On,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.RECENT_CONTACT,".").concat(z.CMD.GET_CONVERSATION_LIST)}),body:{fromAccount:void 0,count:0},keyMap:{request:{},response:{SessionItem:"conversations",ToAccount:"groupID",To_Account:"userID",UnreadMsgCount:"unreadCount",MsgGroupReadedSeq:"messageReadSeq",C2cPeerReadTime:"c2cPeerReadTime"}}}}(e)),this._configMap.set(Rn,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.RECENT_CONTACT,".").concat(z.CMD.PAGING_GET_CONVERSATION_LIST)}),body:{fromAccount:void 0,timeStamp:void 0,startIndex:void 0,pinnedTimeStamp:void 0,pinnedStartIndex:void 0,orderType:void 0,messageAssistFlag:4,assistFlag:15},keyMap:{request:{messageAssistFlag:"MsgAssistFlags",assistFlag:"AssistFlags",pinnedTimeStamp:"TopTimeStamp",pinnedStartIndex:"TopStartIndex"},response:{SessionItem:"conversations",ToAccount:"groupID",To_Account:"userID",UnreadMsgCount:"unreadCount",MsgGroupReadedSeq:"messageReadSeq",C2cPeerReadTime:"c2cPeerReadTime",LastMsgFlags:"lastMessageFlag",TopFlags:"isPinned",TopTimeStamp:"pinnedTimeStamp",TopStartIndex:"pinnedStartIndex",GroupId:"convGroupID"}}}}(e)),this._configMap.set(Bn,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.RECENT_CONTACT,".").concat(z.CMD.DELETE_CONVERSATION)}),body:{fromAccount:"",conversationList:void 0,clearHistoryMessage:void 0},keyMap:{request:{toGroupID:"ToGroupid",clearHistoryMessage:"ClearRamble",conversationList:"ContactItem"},response:{ResultItem:"resultList",ToGroupid:"groupID",ResultCode:"code",ResultInfo:"info"}}}}(e)),this._configMap.set(Pn,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.RECENT_CONTACT,".").concat(z.CMD.CLEAR_HISTORY_MESSAGE)}),body:{fromAccount:"",toAccount:void 0,type:1,toGroupID:void 0},keyMap:{request:{toGroupID:"ToGroupid"}}}}(e)),this._configMap.set(Un,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.RECENT_CONTACT,".").concat(z.CMD.PIN_CONVERSATION)}),body:{fromAccount:"",operationType:1,itemList:void 0},keyMap:{request:{itemList:"RecentContactItem"}}}}(e)),this._configMap.set(Gn,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.OPEN_IM,".").concat(z.CMD.DELETE_GROUP_AT_TIPS)}),body:{messageListToDelete:void 0},keyMap:{request:{messageListToDelete:"DelMsgList",messageSeq:"MsgSeq",messageRandom:"MsgRandom"}}}}(e)),this._configMap.set(Fn,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.RECENT_CONTACT,".").concat(z.CMD.MARK_CONVERSATION)}),body:{fromAccount:"",itemList:void 0},keyMap:{request:{itemList:"MarkItem",operationType:"OptType",groupID:"ToGroupId"},response:{ToGroupId:"groupID",OptType:"operationType"}}}}(e)),this._configMap.set(qn,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.RECENT_CONTACT,".").concat(z.CMD.MARK_CONVERSATION)}),body:{fromAccount:"",itemList:void 0},keyMap:{request:{itemList:"MarkItem",operationType:"OptType",groupID:"ToGroupId"},response:{ToGroupId:"groupID",OptType:"operationType"}}}}(e)),this._configMap.set(zn,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.RECENT_CONTACT,".").concat(z.CMD.CREATE_CONVERSATION_GROUP)}),body:{fromAccount:"",itemList:void 0},keyMap:{request:{itemList:"GroupContactItem",groupID:"ToGroupId"},response:{GroupId:"convGroupID",ToGroupId:"groupID",OptType:"operationType"}}}}(e)),this._configMap.set(Hn,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.RECENT_CONTACT,".").concat(z.CMD.DELETE_CONVERSATION_GROUP)}),body:{fromAccount:"",groupName:void 0},keyMap:{request:{},response:{GroupId:"convGroupID"}}}}(e)),this._configMap.set($n,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.RECENT_CONTACT,".").concat(z.CMD.UPDATE_CONVERSATION_GROUP)}),body:{fromAccount:"",updateType:void 0,updateGroup:void 0},keyMap:{request:{oldName:"OldGroupName",newName:"NewGroupName",groupID:"ToGroupId",operationType:"ContactOptType",groupName:"OldGroupName",updateItem:"ContactUpdateItem"},response:{ContactOptType:"operationType",ToGroupId:"groupID",GroupId:"convGroupID"}}}}(e)),this._configMap.set(jn,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.RECENT_CONTACT,".").concat(z.CMD.UPDATE_CONVERSATION_GROUP)}),body:{fromAccount:"",updateType:void 0,updateGroup:{groupName:void 0,updateGroupType:void 0,updateItem:void 0}},keyMap:{request:{},response:{}}}}(e)),this._configMap.set(Kn,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.RECENT_CONTACT,".").concat(z.CMD.UPDATE_CONVERSATION_GROUP)}),body:{fromAccount:"",updateType:void 0,updateGroup:void 0},keyMap:{request:{},response:{}}}}(e)),this._configMap.set(Yn,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.RECENT_CONTACT,".").concat(z.CMD.GET_CONVERSATION_GROUP_LIST)}),body:{fromAccount:"",startTime:void 0,startIndex:void 0},keyMap:{request:{},response:{GroupId:"convGroupID",ToGroupId:"groupID",OptType:"operationType",CustomMark:"customData",ContactGroupId:"convGroupIDList"}}}}(e)),this._configMap.set(kn,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.PROFILE,".").concat(z.CMD.PORTRAIT_GET)}),body:{fromAccount:"",userItem:[]},keyMap:{request:{toAccount:"To_Account",standardSequence:"StandardSequence",customSequence:"CustomSequence"}}}}(e)),this._configMap.set(En,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.PROFILE,".").concat(z.CMD.PORTRAIT_SET)}),body:{fromAccount:"",profileItem:[{tag:je.NICK,value:""},{tag:je.GENDER,value:""},{tag:je.ALLOWTYPE,value:""},{tag:je.AVATAR,value:""}]},keyMap:{request:{toAccount:"To_Account",standardSequence:"StandardSequence",customSequence:"CustomSequence"}}}}(e)),this._configMap.set(xn,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.FRIEND,".").concat(z.CMD.GET_BLACKLIST)}),body:{fromAccount:"",startIndex:0,maxLimited:30,lastSequence:0},keyMap:{response:{CurruentSequence:"currentSequence"}}}}(e)),this._configMap.set(Nn,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.FRIEND,".").concat(z.CMD.ADD_BLACKLIST)}),body:{fromAccount:"",toAccount:[]}}}(e)),this._configMap.set(wn,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.FRIEND,".").concat(z.CMD.DELETE_BLACKLIST)}),body:{fromAccount:"",toAccount:[]}}}(e)),this._configMap.set(li,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.IM_OPEN_STATUS,".").concat(z.CMD.SET_SELF_STATUS)}),body:{customStatus:""},keyMap:{}}}(e)),this._configMap.set(ci,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.IM_OPEN_STATUS,".").concat(z.CMD.GET_USER_STATUS)}),body:{userIDList:void 0},keyMap:{response:{UserStatusList:"successUserList",ErrorList:"failureUserList",To_Account:"userID",Invalid_Account:"invalidUserID",Status:"statusType"}}}}(e)),this._configMap.set(ui,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.IM_OPEN_STATUS,".").concat(z.CMD.SUBSCRIBE_USER_STATUS)}),body:{userIDList:void 0},keyMap:{response:{ErrorList:"failureUserList",To_Account:"userID",Invalid_Account:"invalidUserID"}}}}(e)),this._configMap.set(di,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.IM_OPEN_STATUS,".").concat(z.CMD.UNSUBSCRIBE_USER_STATUS)}),body:{userIDList:void 0,unsubscribeAll:void 0},keyMap:{response:{ErrorList:"failureUserList",To_Account:"userID",Invalid_Account:"invalidUserID"}}}}(e)),this._configMap.set(Wn,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.GROUP,".").concat(z.CMD.GET_JOINED_GROUPS)}),body:{memberAccount:"",limit:void 0,offset:void 0,groupType:void 0,responseFilter:{groupBaseInfoFilter:void 0,selfInfoFilter:void 0},isSupportTopic:0},keyMap:{request:{memberAccount:"Member_Account"},response:{GroupIdList:"groups",NoUnreadSeqList:"excludedUnreadSequenceList",MsgSeq:"readedSequence",LastRecallTime:"_lastRevokedTime"}}}}(e)),this._configMap.set(Jn,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.GROUP,".").concat(z.CMD.GET_GROUP_INFO)}),body:{groupIDList:void 0,responseFilter:{groupBaseInfoFilter:["Type","Name","Introduction","Notification","FaceUrl","Owner_Account","CreateTime","InfoSeq","LastInfoTime","LastMsgTime","MemberNum","MaxMemberNum","ApplyJoinOption","NextMsgSeq","ShutUpAllMember"],groupCustomFieldFilter:void 0,memberInfoFilter:void 0,memberCustomFieldFilter:void 0}},keyMap:{request:{groupIDList:"GroupIdList",groupCustomField:"AppDefinedData",memberCustomField:"AppMemberDefinedData",groupCustomFieldFilter:"AppDefinedDataFilter_Group",memberCustomFieldFilter:"AppDefinedDataFilter_GroupMember"},response:{GroupIdList:"groups",AppDefinedData:"groupCustomField",AppMemberDefinedData:"memberCustomField",AppDefinedDataFilter_Group:"groupCustomFieldFilter",AppDefinedDataFilter_GroupMember:"memberCustomFieldFilter",InfoSeq:"infoSequence",MemberList:"members",GroupInfo:"groups",ShutUpUntil:"muteUntil",ShutUpAllMember:"muteAllMembers"}}}}(e)),this._configMap.set(Zn,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.GROUP,".").concat(z.CMD.CREATE_GROUP)}),body:{type:void 0,name:void 0,groupID:void 0,ownerID:void 0,introduction:void 0,notification:void 0,maxMemberNum:void 0,joinOption:void 0,memberList:void 0,groupCustomField:void 0,memberCustomField:void 0,webPushFlag:1,avatar:"",isSupportTopic:void 0,inviteOption:void 0},keyMap:{request:{ownerID:"Owner_Account",userID:"Member_Account",avatar:"FaceUrl",maxMemberNum:"MaxMemberCount",joinOption:"ApplyJoinOption",groupCustomField:"AppDefinedData",memberCustomField:"AppMemberDefinedData",inviteOption:"InviteJoinOption"},response:{HugeGroupFlag:"avChatRoomFlag",OverJoinedGroupLimit_Account:"overLimitUserIDList"}}}}(e)),this._configMap.set(Xn,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.GROUP,".").concat(z.CMD.DESTROY_GROUP)}),body:{groupID:void 0}}}(e)),this._configMap.set(Qn,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.GROUP,".").concat(z.CMD.MODIFY_GROUP_INFO)}),body:{groupID:void 0,name:void 0,introduction:void 0,notification:void 0,avatar:void 0,joinOption:void 0,groupCustomField:void 0,muteAllMembers:void 0,inviteOption:void 0},keyMap:{request:{groupCustomField:"AppDefinedData",muteAllMembers:"ShutUpAllMember",joinOption:"ApplyJoinOption",avatar:"FaceUrl",inviteOption:"InviteJoinOption"},response:{AppDefinedData:"groupCustomField",ShutUpAllMember:"muteAllMembers"}}}}(e)),this._configMap.set(eo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.GROUP,".").concat(z.CMD.APPLY_JOIN_GROUP)}),body:{groupID:void 0,applyMessage:void 0,userDefinedField:void 0,webPushFlag:1,historyMessageFlag:void 0},keyMap:{request:{applyMessage:"ApplyMsg",historyMessageFlag:"HugeGroupHistoryMsgFlag"},response:{HugeGroupFlag:"avChatRoomFlag",AVChatRoomKey:"avChatRoomKey",RspMsgList:"messageList",ToGroupId:"to"}}}}(e)),this._configMap.set(to,function(e){return e.a2,e.tinyid,{head:t(t({},v(e,$s)),{},{servcmd:"".concat(z.NAME.BIG_GROUP_NO_AUTH,".").concat(z.CMD.APPLY_JOIN_GROUP)}),body:{groupID:void 0,applyMessage:void 0,userDefinedField:void 0,webPushFlag:1},keyMap:{request:{applyMessage:"ApplyMsg"},response:{HugeGroupFlag:"avChatRoomFlag"}}}}(e)),this._configMap.set(ao,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.GROUP,".").concat(z.CMD.QUIT_GROUP)}),body:{groupID:void 0}}}(e)),this._configMap.set(no,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.GROUP,".").concat(z.CMD.SEARCH_GROUP_BY_ID)}),body:{groupIDList:void 0,responseFilter:{groupBasePublicInfoFilter:["Type","Name","Introduction","Notification","FaceUrl","CreateTime","Owner_Account","LastInfoTime","LastMsgTime","NextMsgSeq","MemberNum","MaxMemberNum","ApplyJoinOption","InviteJoinOption"]}},keyMap:{response:{}}}}(e)),this._configMap.set(oo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.GROUP,".").concat(z.CMD.CHANGE_GROUP_OWNER)}),body:{groupID:void 0,newOwnerID:void 0},keyMap:{request:{newOwnerID:"NewOwner_Account"}}}}(e)),this._configMap.set(io,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.GROUP,".").concat(z.CMD.HANDLE_APPLY_JOIN_GROUP)}),body:{groupID:void 0,applicant:void 0,handleAction:void 0,handleMessage:void 0,authentication:void 0,messageKey:void 0,userDefinedField:void 0},keyMap:{request:{applicant:"Applicant_Account",handleAction:"HandleMsg",handleMessage:"ApprovalMsg",messageKey:"MsgKey"}}}}(e)),this._configMap.set(ro,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.GROUP,".").concat(z.CMD.HANDLE_INVITE_JOIN_GROUP)}),body:{groupID:void 0,applicant:void 0,invitee:void 0,handleAction:void 0,handleMessage:void 0,authentication:void 0,userDefinedField:void 0},keyMap:{request:{applicant:"Applicant_Account",invitee:"Invited_Account",handleAction:"HandleMsg",handleMessage:"ApprovalMsg"}}}}(e)),this._configMap.set(so,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.GROUP,".").concat(z.CMD.HANDLE_GROUP_INVITATION)}),body:{groupID:void 0,inviter:void 0,handleAction:void 0,handleMessage:void 0,authentication:void 0,messageKey:void 0,userDefinedField:void 0},keyMap:{request:{inviter:"Inviter_Account",handleAction:"HandleMsg",handleMessage:"ApprovalMsg",messageKey:"MsgKey"}}}}(e)),this._configMap.set(fo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.GROUP,".").concat(z.CMD.GET_GROUP_APPLICATION)}),body:{startTime:void 0,limit:void 0,handleAccount:void 0},keyMap:{request:{handleAccount:"Handle_Account"},response:{To_Account:"userID"}}}}(e)),this._configMap.set(yo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.OPEN_IM,".").concat(z.CMD.DELETE_GROUP_SYSTEM_MESSAGE)}),body:{messageListToDelete:void 0},keyMap:{request:{messageListToDelete:"DelMsgList",messageSeq:"MsgSeq",messageRandom:"MsgRandom"}}}}(e)),this._configMap.set(_o,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.BIG_GROUP_LONG_POLLING,".").concat(z.CMD.AVCHATROOM_LONG_POLL)}),body:{USP:1,startSeq:1,startBroadcastSeq:void 0,holdTime:90,key:void 0,simplifiedMessage:void 0},keyMap:{request:{USP:"USP"},response:{ToGroupId:"groupID",RspBroadcastMsgList:"broadcastMessageList",IsSystemMsg:"isSystemMessage"}}}}(e)),this._configMap.set(ko,function(e){return e.a2,e.tinyid,{head:t(t({},v(e,js)),{},{servcmd:"".concat(z.NAME.BIG_GROUP_LONG_POLLING_NO_AUTH,".").concat(z.CMD.AVCHATROOM_LONG_POLL)}),body:{USP:1,startSeq:1,holdTime:90,key:void 0,simplifiedMessage:void 0},keyMap:{request:{USP:"USP"},response:{ToGroupId:"groupID",RspBroadcastMsgList:"broadcastMessageList",IsSystemMsg:"isSystemMessage"}}}}(e)),this._configMap.set(Eo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.GROUP,".").concat(z.CMD.GET_ONLINE_MEMBER_NUM)}),body:{groupID:void 0}}}(e)),this._configMap.set(wo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.GROUP,".").concat(z.CMD.SET_GROUP_ATTRIBUTES)}),body:{groupID:void 0,groupAttributeList:void 0,mainSequence:void 0,avChatRoomKey:void 0,attributeControl:["RaceConflict"]},keyMap:{request:{key:"key",value:"value"}}}}(e)),this._configMap.set(Co,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.GROUP,".").concat(z.CMD.MODIFY_GROUP_ATTRIBUTES)}),body:{groupID:void 0,groupAttributeList:void 0,mainSequence:void 0,avChatRoomKey:void 0,attributeControl:["RaceConflict"]},keyMap:{request:{key:"key",value:"value"}}}}(e)),this._configMap.set(Mo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.GROUP,".").concat(z.CMD.DELETE_GROUP_ATTRIBUTES)}),body:{groupID:void 0,groupAttributeList:void 0,mainSequence:void 0,avChatRoomKey:void 0,attributeControl:["RaceConflict"]},keyMap:{request:{key:"key"}}}}(e)),this._configMap.set(So,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.GROUP,".").concat(z.CMD.CLEAR_GROUP_ATTRIBUTES)}),body:{groupID:void 0,mainSequence:void 0,avChatRoomKey:void 0,attributeControl:["RaceConflict"]}}}(e)),this._configMap.set(Io,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.GROUP_ATTR,".").concat(z.CMD.GET_GROUP_ATTRIBUTES)}),body:{groupID:void 0,avChatRoomKey:void 0,groupType:1},keyMap:{request:{avChatRoomKey:"Key",groupType:"GroupType"}}}}(e)),this._configMap.set(bo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.GROUP,".").concat(z.CMD.GET_GROUP_NOTIFY)}),body:{notifyType:1,groupID:"",beginTime:0,endTime:0,limit:20},keyMap:{request:{},response:{NextMsgTime:"nextRevokedTime",NotifyMsgList:"notifyList"}}}}(e)),this._configMap.set(Vo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.GROUP,".").concat(z.CMD.UPDATE_GROUP_COUNTER)}),body:{groupID:void 0,counterList:void 0,avChatRoomKey:void 0,mode:void 0},keyMap:{request:{counterList:"GroupCounter"}}}}(e)),this._configMap.set(Ao,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.GROUP,".").concat(z.CMD.GET_GROUP_COUNTER)}),body:{groupID:void 0,keyList:[],avChatRoomKey:void 0},keyMap:{request:{keyList:"GroupCounterKeys"}}}}(e)),this._configMap.set(oi,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.GROUP_COMMUNITY,".").concat(z.CMD.CREATE_TOPIC)}),body:{groupID:void 0,topicName:void 0,avatar:void 0,customData:void 0,topicID:void 0,notification:void 0,introduction:void 0},keyMap:{request:{avatar:"FaceUrl"}}}}(e)),this._configMap.set(ii,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.GROUP_COMMUNITY,".").concat(z.CMD.DELETE_TOPIC)}),body:{groupID:void 0,topicIDList:void 0},keyMap:{request:{topicIDList:"TopicIdList"},response:{DestroyResultItem:"resultList"}}}}(e)),this._configMap.set(ri,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.GROUP_COMMUNITY,".").concat(z.CMD.UPDATE_TOPIC_PROFILE)}),body:{groupID:void 0,topicID:void 0,avatar:void 0,customData:void 0,notification:void 0,introduction:void 0,muteAllMembers:void 0,topicName:void 0},keyMap:{request:{avatar:"FaceUrl",muteAllMembers:"ShutUpAllMember"}}}}(e)),this._configMap.set(si,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.GROUP_COMMUNITY,".").concat(z.CMD.GET_TOPIC_LIST)}),body:{groupID:void 0,topicIDList:void 0,MemberInfoFilter:["NoUnreadSeqList"]},keyMap:{request:{topicIDList:"TopicIdList"},response:{TopicAndSelfInfo:"topicInfoList",TopicInfo:"topic",GroupID:"groupID",ShutUpTime:"muteTime",ShutUpAllFlag:"muteAllMembers",LastMsgTime:"lastMessageTime",MsgSeq:"readedSequence",LastMsgSeq:"sequence",NoUnreadSeqList:"excludedUnreadSequenceList"}}}}(e)),this._configMap.set(Lo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.GROUP,".").concat(z.CMD.GET_GROUP_MEMBER_LIST)}),body:{groupID:void 0,limit:0,offset:void 0,next:void 0,memberRoleFilter:void 0,memberInfoFilter:["Role","NameCard","ShutUpUntil","JoinTime"],memberCustomFieldFilter:void 0},keyMap:{request:{memberCustomFieldFilter:"AppDefinedDataFilter_GroupMember"},response:{AppMemberDefinedData:"memberCustomField",AppDefinedDataFilter_GroupMember:"memberCustomFieldFilter",MemberList:"members",ShutUpUntil:"muteUntil"}}}}(e)),this._configMap.set(Ro,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.GROUP_AVCHATROOM,".").concat(z.CMD.GET_AVCHATROOM_MEMBER_LIST)}),body:{groupID:void 0,offset:void 0,filter:void 0},keyMap:{request:{offset:"Timestamp",filter:"Mark"},response:{NextTimestamp:"offset"}}}}(e)),this._configMap.set(Oo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.GROUP,".").concat(z.CMD.GET_GROUP_MEMBER_INFO)}),body:{groupID:void 0,userIDList:void 0,memberInfoFilter:void 0,memberCustomFieldFilter:void 0},keyMap:{request:{userIDList:"Member_List_Account",memberCustomFieldFilter:"AppDefinedDataFilter_GroupMember"},response:{MemberList:"members",ShutUpUntil:"muteUntil",AppDefinedDataFilter_GroupMember:"memberCustomFieldFilter",AppMemberDefinedData:"memberCustomField"}}}}(e)),this._configMap.set(Bo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.GROUP,".").concat(z.CMD.ADD_GROUP_MEMBER)}),body:{groupID:void 0,silence:void 0,userIDList:void 0},keyMap:{request:{userID:"Member_Account",userIDList:"MemberList"},response:{MemberList:"members"}}}}(e)),this._configMap.set(Po,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.GROUP,".").concat(z.CMD.DELETE_GROUP_MEMBER)}),body:{groupID:void 0,userIDList:void 0,reason:void 0},keyMap:{request:{userIDList:"MemberToDel_Account"}}}}(e)),this._configMap.set(Uo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.GROUP,".").concat(z.CMD.BAN_AVCHATROOM_MEMBER)}),body:{groupID:void 0,userIDList:void 0,duration:void 0,reason:""},keyMap:{request:{userIDList:"Members_Account",duration:"Duration",reason:"Description"}}}}(e)),this._configMap.set(Go,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.GROUP,".").concat(z.CMD.MODIFY_GROUP_MEMBER_INFO)}),body:{groupID:void 0,topicID:void 0,userID:void 0,messageRemindType:void 0,nameCard:void 0,role:void 0,memberCustomField:void 0,muteTime:void 0},keyMap:{request:{userID:"Member_Account",memberCustomField:"AppMemberDefinedData",muteTime:"ShutUpTime",messageRemindType:"MsgFlag"}}}}(e)),this._configMap.set(Fo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.GROUP_AVCHATROOM,".").concat(z.CMD.MARK_AVCHATROOM_MEMBER_INFO)}),body:{groupID:void 0,operationType:1,memberList:[]},keyMap:{request:{operationType:"CommandType",memberList:"MemberList",markType:"Marks",userID:"Member_Account"},response:{CommandType:"operationType",Marks:"markType",Member_Account:"userID"}}}}(e)),this._configMap.set($o,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.IM_OPEN_STAT,".").concat(z.CMD.TIM_WEB_REPORT_V2)}),body:{header:{},event:[],quality:[]},keyMap:{request:{SDKType:"sdk_type",SDKVersion:"sdk_version",deviceType:"device_type",platform:"platform",instanceID:"instance_id",traceID:"trace_id",SDKAppID:"sdk_app_id",userID:"user_id",tinyID:"tiny_id",extension:"extension",timestamp:"timestamp",networkType:"network_type",eventType:"event_type",code:"error_code",message:"error_message",moreMessage:"more_message",duplicate:"duplicate",costTime:"cost_time",level:"level",qualityType:"quality_type",reportIndex:"report_index",wholePeriod:"whole_period",totalCount:"total_count",rttCount:"success_count_business",successRateOfRequest:"percent_business",countLessThan1Second:"success_count_business",percentOfCountLessThan1Second:"percent_business",countLessThan3Second:"success_count_platform",percentOfCountLessThan3Second:"percent_platform",successCountOfBusiness:"success_count_business",successRateOfBusiness:"percent_business",successCountOfPlatform:"success_count_platform",successRateOfPlatform:"percent_platform",successCountOfMessageReceived:"success_count_business",successRateOfMessageReceived:"percent_business",avgRTT:"average_value",avgDelay:"average_value",avgValue:"average_value",uiPlatform:"ui_platform"}}}}(n)),this._configMap.set(jo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.HEARTBEAT,".").concat(z.CMD.ALIVE)}),body:{}}}(e)),this._configMap.set(Ko,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.IM_OPEN_PUSH,".").concat(z.CMD.MESSAGE_PUSH)}),body:{},keyMap:{response:{C2cMsgArray:"C2CMessageArray",GroupMsgArray:"groupMessageArray",GroupTips:"groupTips",C2cNotifyMsgArray:"C2CNotifyMessageArray",C2cMsgInfo:"C2CReadReceiptArray",ClientSeq:"clientSequence",MsgPriority:"priority",NoticeSeq:"noticeSequence",MsgContent:"content",MsgType:"type",MsgBody:"elements",ToGroupId:"to",Desc:"description",Ext:"extension",IsSyncMsg:"isSyncMessage",Flag:"needSync",NeedAck:"needAck",PendencyAdd_Account:"userID",ProfileImNick:"nick",PendencyType:"applicationType",C2CReadAllMsg:"readAllC2CMessage",IsNeedReadReceipt:"needReadReceipt",Status:"statusType"}}}}(e)),this._configMap.set(Yo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.IM_OPEN_PUSH,".").concat(z.CMD.MULTI_MESSAGE_PUSH)}),body:{},keyMap:{response:{GroupMsgArray:"groupMessageArray",GroupTips:"groupTips",ClientSeq:"clientSequence",MsgPriority:"priority",NoticeSeq:"noticeSequence",MsgContent:"content",MsgType:"type",MsgBody:"elements",ToGroupId:"to",Desc:"description",Ext:"extension",IsSyncMsg:"isSyncMessage",Flag:"needSync",NeedAck:"needAck",PendencyType:"applicationType"}}}}(e)),this._configMap.set(Wo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.OPEN_IM,".").concat(z.CMD.MESSAGE_PUSH_ACK)}),body:{sessionData:void 0},keyMap:{request:{sessionData:"SessionData"}}}}(e)),this._configMap.set(Jo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.IM_OPEN_STATUS,".").concat(z.CMD.STATUS_FORCE_OFFLINE)}),body:{},keyMap:{response:{C2cNotifyMsgArray:"C2CNotifyMessageArray",NoticeSeq:"noticeSequence",KickoutMsgNotify:"kickoutMsgNotify",NewInstInfo:"newInstanceInfo"}}}}(e)),this._configMap.set(Xo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.IM_LONG_MESSAGE,".").concat(z.CMD.DOWNLOAD_MERGER_MESSAGE)}),body:{downloadKey:""},keyMap:{response:{Data:"data",Desc:"description",Ext:"extension",Download_Flag:"downloadFlag",ThumbUUID:"thumbUUID",VideoUUID:"videoUUID"}}}}(e)),this._configMap.set(Zo,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.IM_LONG_MESSAGE,".").concat(z.CMD.UPLOAD_MERGER_MESSAGE)}),body:{messageList:[]},keyMap:{request:{fromAccount:"From_Account",toAccount:"To_Account",msgTimeStamp:"MsgTimeStamp",msgSeq:"MsgSeq",msgRandom:"MsgRandom",msgBody:"MsgBody",type:"MsgType",content:"MsgContent",data:"Data",description:"Desc",extension:"Ext",sizeType:"Type",uuid:"UUID",url:"",imageUrl:"URL",fileUrl:"Url",remoteAudioUrl:"Url",remoteVideoUrl:"VideoUrl",thumbUUID:"ThumbUUID",videoUUID:"VideoUUID",videoUrl:"",downloadFlag:"Download_Flag",from:"From_Account",time:"MsgTimeStamp",messageRandom:"MsgRandom",messageSequence:"MsgSeq",elements:"MsgBody",clientSequence:"ClientSeq",payload:"MsgContent",messageList:"MsgList",messageNumber:"MsgNum",abstractList:"AbstractList",messageBody:"MsgBody"}}}}(e)),this._configMap.set(hi,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.IM_OPEN_STATUS,".").concat(z.CMD.SET_TOKEN)}),body:{tokenID:"",pushMsg:0,sdkAppID:0,businessID:"",deviceBrand:"",deviceToken:"",isTpns:0,isWebUniapp:0},keyMap:{request:{tokenID:"TokenID",pushMsg:"PushMsg",sdkAppID:"EnterVersion",businessID:"BusiID",deviceBrand:"InstType",deviceToken:"VarToken",isTpns:"IsTpns"}}}}(e)),this._configMap.set(pi,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.IM_OPEN_STATUS,".").concat(z.CMD.STAT_FOREGROUND)}),body:{isWebUniapp:0}}}(e)),this._configMap.set(mi,function(e){return{head:t(t({},e),{},{servcmd:"".concat(z.NAME.IM_OPEN_STATUS,".").concat(z.CMD.STAT_BACKGROUND)}),body:{C2CUnread:0,GroupUnread:0,isWebUniapp:0},keyMap:{request:{c2cUnreadCount:"C2cUnread",groupUnreadCount:"GrpUnread"}}}}(e))}},{key:"has",value:function(e){return this._configMap.has(e)}},{key:"get",value:function(e){return this._configMap.get(e)}},{key:"update",value:function(){this._fillConfigMap()}},{key:"getKeyMap",value:function(e){return this.has(e)?this.get(e).keyMap||{}:(He.w("".concat(this._n,".getKeyMap unknown protocolName:").concat(e)),{})}},{key:"getProtocolData",value:function(e){var t=e.protocolName,a=e.requestData,n=this.get(t),o=null;if(a){var i=this._simpleDeepCopy(n),r=this._updateService(a,i),s=r.body,l=Object.create(null);for(var c in s)if(Object.prototype.hasOwnProperty.call(s,c)){if(l[c]=s[c],void 0===a[c])continue;l[c]=a[c]}r.body=l,o=this._getUplinkData(r)}else o=this._getUplinkData(n);return o}},{key:"_getUplinkData",value:function(e){var t=this._requestDataCleaner(e),a=Ut(t.head),n=Ds(t.body,this._getRequestKeyMap(a));return t.body=n,t}},{key:"_updateService",value:function(e,t){var a=Ut(t.head);if(this._isFromGroupRequest(t)){var n=e.type,o=e.groupID,i=void 0===o?void 0:o,r=e.groupIDList,s=void 0===r?[]:r;ct(i)&&(i=s[0]||""),St({type:n,groupID:i})&&(t.head.servcmd="".concat(z.NAME.GROUP_COMMUNITY,".").concat(a))}return t}},{key:"_isFromGroupRequest",value:function(e){return e.head.servcmd.includes(z.NAME.GROUP)||e.head.servcmd.includes(z.NAME.GROUP_ATTR)}},{key:"_getRequestKeyMap",value:function(e){var a=this.getKeyMap(e);return t(t({},Ss.request),a.request)}},{key:"_requestDataCleaner",value:function(e){var t=Array.isArray(e)?[]:Object.create(null);for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&ht(n)&&null!==e[n]&&void 0!==e[n]&&("object"!==a(e[n])?t[n]=e[n]:t[n]=this._requestDataCleaner.bind(this)(e[n]));return t}},{key:"_simpleDeepCopy",value:function(e){for(var t,a=Object.keys(e),n={},o=0,i=a.length;o<i;o++)t=a[o],lt(e[t])?n[t]=Array.from(e[t]):rt(e[t])?n[t]=this._simpleDeepCopy(e[t]):n[t]=e[t];return n}}]),e}(),Ys=[Wo],Ws=function(){function e(t){n(this,e),this._sessionModule=t,this._n="DownlinkHandler",this._eventHandlerMap=new Map,this._eventHandlerMap.set("C2CMessageArray",this._c2cMessageArrayHandler.bind(this)),this._eventHandlerMap.set("groupMessageArray",this._groupMessageArrayHandler.bind(this)),this._eventHandlerMap.set("groupTips",this._groupTipsHandler.bind(this)),this._eventHandlerMap.set("C2CNotifyMessageArray",this._C2CNotifyMessageArrayHandler.bind(this)),this._eventHandlerMap.set("C2CReadReceiptArray",this._C2CReadReceiptArrayHandler.bind(this)),this._eventHandlerMap.set("profileModify",this._profileHandler.bind(this)),this._eventHandlerMap.set("friendListMod",this._relationChainHandler.bind(this)),this._eventHandlerMap.set("recentContactMod",this._recentContactHandler.bind(this)),this._eventHandlerMap.set("readAllC2CMessage",this._allMessageReadHandler.bind(this)),this._eventHandlerMap.set("c2cMessageModified",this._c2cMessageModifiedHandler.bind(this)),this._eventHandlerMap.set("groupMessageModified",this._groupMessageModifiedHandler.bind(this)),this._eventHandlerMap.set("userStatusList",this._userStatusListHandler.bind(this)),this._eventHandlerMap.set("messageExtensionNotify",this._messageExtensionNotifyHandler.bind(this)),this._keys=k(this._eventHandlerMap.keys())}return r(e,[{key:"_c2cMessageArrayHandler",value:function(e){var t=this._sessionModule.getModule(Oa);t&&(e.dataList.forEach((function(e){if(1===e.isSyncMessage){var t=e.from;e.from=e.to,e.to=t}})),1===e.needSync&&this._sessionModule.getModule(Wa).startOnlineSync(),t.onNewC2CMessage({dataList:e.dataList,isInstantMessage:!0}))}},{key:"_c2cMessageModifiedHandler",value:function(e){var t=this._sessionModule.getModule(Oa);t&&t.onC2CMessageModified(e)}},{key:"_groupMessageArrayHandler",value:function(e){var t=this._sessionModule.getModule(Ba);t&&t.onNewGroupMessage({event:e.event,dataList:e.dataList,isInstantMessage:!0})}},{key:"_groupMessageModifiedHandler",value:function(e){var t=this._sessionModule.getModule(Ba);t&&t.onGroupMessageModified(e)}},{key:"_groupTipsHandler",value:function(e){var t=this._sessionModule.getModule(Ba);if(t){var a=e.event,n=e.dataList,o=e.isInstantMessage,i=void 0===o||o,r=e.isSyncingEnded;switch(a){case 4:case 6:t.onNewGroupTips({event:a,dataList:n});break;case 5:for(var s=0;s<n.length;s++)if(lt(n[s].elements.revokedInfos))t.onGroupMessageRevoked({dataList:n});else if(lt(n[s].elements.groupMessageReadNotice))t.onGroupMessageReadNotice({dataList:n});else{if(!lt(n[s].elements.readReceiptList)){t.onNewGroupSystemNotice({dataList:n,isInstantMessage:i,isSyncingEnded:r});break}t.onReadReceiptList({dataList:n})}break;case 12:this._sessionModule.getModule(Fa).onNewGroupAtTips({dataList:n});break;default:He.l("".concat(this._n,"._groupTipsHandler unknown event:").concat(a," dataList:"),n)}}}},{key:"_C2CNotifyMessageArrayHandler",value:function(e){var t=this,a=e.dataList;if(lt(a)){var n=this._sessionModule.getModule(Oa);a.forEach((function(e){if(st(e))if(e.hasOwnProperty("kickoutMsgNotify")){var o=e.kickoutMsgNotify,i=o.kickType,r=o.newInstanceInfo,s=void 0===r?{}:r;1===i?t._sessionModule.onMultipleAccountKickedOut(s):2===i?t._sessionModule.onMultipleDeviceKickedOut(s):3===i&&t._sessionModule.onRestApiKickedOut(s)}else e.hasOwnProperty("c2cMessageRevokedNotify")?n&&n.onC2CMessageRevoked({dataList:a}):e.hasOwnProperty("c2cMessageReadReceipt")?n&&n.onC2CMessageReadReceipt({dataList:a}):e.hasOwnProperty("c2cMessageReadNotice")?n&&n.onC2CMessageReadNotice({dataList:a}):e.hasOwnProperty("muteNotificationsSync")&&t._sessionModule.getModule(Fa).onC2CMessageRemindTypeSynced({dataList:a})}))}}},{key:"_C2CReadReceiptArrayHandler",value:function(e){this._sessionModule.getModule(Oa).onReadReceiptList(e)}},{key:"_profileHandler",value:function(e){this._sessionModule.getModule(Ra).onProfileModified({dataList:e.dataList});var t=this._sessionModule.getModule(Pa);t&&t.onFriendProfileModified({dataList:e.dataList})}},{key:"_relationChainHandler",value:function(e){this._sessionModule.getModule(Ra).onRelationChainModified({dataList:e.dataList});var t=this._sessionModule.getModule(Pa);t&&t.onRelationChainModified({dataList:e.dataList})}},{key:"_recentContactHandler",value:function(e){var t=e.dataList;if(lt(t)){var a=this._sessionModule.getModule(Fa);a&&t.forEach((function(e){var t=e.pushType;if(1===t){var n=e.recentContactDeleteItem;a.onConversationDeleted(n.recentContactList)}else if(2===t){var o=e.recentContactTopItem;a.onConversationPinned(o.recentContactList)}else if(3===t){var i=e.recentContactTopItem;a.onConversationUnpinned(i.recentContactList)}else if(4===t){var r=e.recentContactMarkContact;a.onConversationMarkUpdated(r.recentContactMarkContactItem)}else if(5===t){var s=e.recentContactCreateContactGroup;a.onConversationGroupCreated(s.msgContactGroupContactItem)}else if(6===t){var l=e.recentContactDelContactGroup;a.onConversationGroupDeleted(l.msgGroupItem)}else if(7===t){var c=e.recentContactUpdateContactGroup,u=c.updateType,d=c.msgUpdateGroup,m=c.msgUpdateContact;if(1===u){var p=d.updateGroupType;1===p?a.onConversationGroupNameUpdated(d):2===p&&a.onConversationInGroupUpdated(d)}else 2===u&&a.onConversationAddedToOrDeletedFromGroup(m)}}))}}},{key:"_allMessageReadHandler",value:function(e){var t=e.dataList,a=this._sessionModule.getModule(Fa);a&&a.onPushedAllMessageRead(t)}},{key:"_userStatusListHandler",value:function(e){this._sessionModule.getModule(Ra).onUserStatusUpdated(e)}},{key:"_messageExtensionNotifyHandler",value:function(e){this._sessionModule.getModule(La).onMessageExtensionNotify(e)}},{key:"onMessage",value:function(e){var t=this,a=e.body;if(this._filterMessageFromIMOpenPush(e)){var n=a.eventArray,o=a.isInstantMessage,i=a.isSyncingEnded,r=a.needSync;if(lt(n))for(var s=null,l=null,c=0,u=0,d=n.length;u<d;u++){c=(s=n[u]).event;var m=Object.keys(s).find((function(e){return-1!==t._keys.indexOf(e)}));m?(l=14===c?{readAllC2CMessage:s[m],groupMessageReadInfoList:s.groupMessageReadNotice||[]}:16===c?{userID:s.userID,readReceiptList:s[m]}:s[m],this._eventHandlerMap.get(m)({event:c,dataList:l,isInstantMessage:o,isSyncingEnded:i,needSync:r})):He.l("".concat(this._n,".onMessage unknown eventItem:").concat(s))}}}},{key:"_filterMessageFromIMOpenPush",value:function(e){var t=e.head,a=e.body,n=t.servcmd,o=!1;if(ct(n)||(o=n.includes(z.NAME.IM_CONFIG_MANAGER)||n.includes(z.NAME.OVERLOAD_PUSH)||n.includes(z.NAME.STAT_SERVICE)),!o)return!0;if(n.includes(z.CMD.PUSHED_CLOUD_CONTROL_CONFIG))this._sessionModule.getModule(Qa).onPushedCloudControlConfig(a);else if(n.includes(z.CMD.PUSHED_COMMERCIAL_CONFIG))this._sessionModule.getModule(nn).onPushedConfig(a);else if(n.includes(z.CMD.OVERLOAD_NOTIFY))this._sessionModule.onPushedServerOverload(a);else if(n.includes(z.CMD.KICK_OTHER)){var i=Date.now();this._sessionModule.reLoginOnKickOther();var r=new Vi("kickOther"),s=this._sessionModule.getModule(Va).getLastWsHelloTs(),l=i-s;r.setMessage("last wshello time:".concat(s," diff:").concat(l,"ms")).setNetworkType(this._sessionModule.getNetworkType()).end()}return!1}}]),e}(),Js=[{cmd:z.CMD.GET_GROUP_INFO,interval:1,count:20},{cmd:z.CMD.GET_AVCHATROOM_MEMBER_LIST,interval:3,count:1},{cmd:z.CMD.GET_GROUP_APPLICATION,interval:1,count:15},{cmd:z.CMD.GET_TOPIC_LIST,interval:1,count:10},{cmd:z.CMD.SET_GROUP_ATTRIBUTES,interval:5,count:10},{cmd:z.CMD.MODIFY_GROUP_ATTRIBUTES,interval:5,count:10},{cmd:z.CMD.DELETE_GROUP_ATTRIBUTES,interval:5,count:10},{cmd:z.CMD.CLEAR_GROUP_ATTRIBUTES,interval:5,count:10},{cmd:z.CMD.GET_GROUP_ATTRIBUTES,interval:5,count:20},{cmd:z.CMD.UPDATE_GROUP_COUNTER,interval:5,count:20},{cmd:z.CMD.GET_GROUP_COUNTER,interval:5,count:20},{cmd:z.CMD.SET_ALL_MESSAGE_READ,interval:1,count:1},{cmd:z.CMD.GET_USER_STATUS,interval:5,count:20},{cmd:z.CMD.SUBSCRIBE_USER_STATUS,interval:5,count:20},{cmd:z.CMD.UNSUBSCRIBE_USER_STATUS,interval:5,count:20}],Zs=function(e){l(o,e);var a=y(o);function o(e){var t;return n(this,o),(t=a.call(this,e))._n="SessionModule",t._platform=t.getPlatform(),t._protocolHandler=new Ks(g(t)),t._messageDispatcher=new Ws(g(t)),t._commandFrequencyLimitMap=new Map,t._commandRequestInfoMap=new Map,t._serverOverloadInfoMap=new Map,t._init(),t.getInnerEmitterInstance().on(or,t._onCloudConfigUpdated,g(t)),t}return r(o,[{key:"_init",value:function(){this._updateCommandFrequencyLimitMap(Js)}},{key:"_onCloudConfigUpdated",value:function(){var e=this.getCloudConfig("cmd_frequency_limit");ct(e)||(e=JSON.parse(e),this._updateCommandFrequencyLimitMap(e))}},{key:"_updateCommandFrequencyLimitMap",value:function(e){var t=this;e.forEach((function(e){t._commandFrequencyLimitMap.set(e.cmd,{interval:e.interval,count:e.count})}))}},{key:"updateProtocolConfig",value:function(){this._protocolHandler.update()}},{key:"request",value:function(e){He.d("".concat(this._n,".request options:"),e);var t=e.protocolName,a=e.tjgID;if(!this._protocolHandler.has(t))return He.w("".concat(this._n,".request unknown protocol:").concat(t)),er({code:fi.CANNOT_FIND_PROTOCOL});var n=this.getProtocolData(e),o=n.head.servcmd;if(this._isFrequencyOverLimit(o))return er({code:fi.OVER_FREQUENCY_LIMIT});if(this._isServerOverload(o))return er({code:fi.OPEN_SERVICE_OVERLOAD_ERROR});Zt(a)||(n.head.tjgID=a);var i=this.getModule(Za);return Ys.includes(t)?i.simplySend(n):i.send(n)}},{key:"getKeyMap",value:function(e){return this._protocolHandler.getKeyMap(e)}},{key:"genCommonHead",value:function(){var e=this.getModule(qa);return{ver:"v4",platform:this._platform,websdkappid:L,websdkversion:A,a2:e.getA2Key()||void 0,tinyid:e.getTinyID()||void 0,status_instid:e.getStatusInstanceID(),sdkappid:e.getSDKAppID(),contenttype:e.getContentType(),reqtime:0,identifier:e.getA2Key()?void 0:e.getUserID(),usersig:e.getA2Key()?void 0:e.getUserSig(),sdkability:192371,tjgID:""}}},{key:"genCosSpecifiedHead",value:function(){var e=this.getModule(qa);return{ver:"v4",platform:this._platform,websdkappid:L,websdkversion:A,sdkappid:e.getSDKAppID(),contenttype:e.getContentType(),reqtime:0,identifier:e.getUserID(),usersig:e.getUserSig(),status_instid:e.getStatusInstanceID(),sdkability:192371}}},{key:"genSSOReportHead",value:function(){var e=this.getModule(qa);return{ver:"v4",platform:this._platform,websdkappid:L,websdkversion:A,sdkappid:e.getSDKAppID(),contenttype:"",reqtime:0,identifier:"",usersig:"",status_instid:e.getStatusInstanceID(),sdkability:192371}}},{key:"getProtocolData",value:function(e){return this._protocolHandler.getProtocolData(e)}},{key:"trans",value:function(e){var a=e.servcmd,n=e.data,o={head:t(t({},this.genCommonHead()),{},{servcmd:a}),body:n};return this.getModule(Za).send(o)}},{key:"sendComboMessage",value:function(e){var a=e.servcmd,n=e.data,o={head:t(t({},this.genCommonHead()),{},{servcmd:a}),body:n};return this.getModule(Za).send(o)}},{key:"onErrorCodeNotZero",value:function(e){var t=e.errorCode;if(t===fi.HELLO_ANSWER_KICKED_OUT){var a=e.kickType,n=e.newInstanceInfo,o=void 0===n?{}:n;1===a?this.onMultipleAccountKickedOut(o):2===a?this.onMultipleDeviceKickedOut(o):3===a&&this.onRestApiKickedOut(o)}t!==fi.MESSAGE_A2KEY_EXPIRED&&t!==fi.ACCOUNT_A2KEY_EXPIRED||(this._onUserSigExpired(),this.getModule(Za).reConnect())}},{key:"onMessage",value:function(e){var t=e.body,a=t.needAck,n=void 0===a?0:a,o=t.sessionData;1===n&&this._sendACK(o),this._messageDispatcher.onMessage(e)}},{key:"onReconnected",value:function(){this._reLoginOnReconnected()}},{key:"reLoginOnKickOther",value:function(){He.l("".concat(this._n,".reLoginOnKickOther")),this._reLogin()}},{key:"_reLoginOnReconnected",value:function(){He.l("".concat(this._n,"._reLoginOnReconnected")),this._reLogin()}},{key:"_reLogin",value:function(){var e=this;if(this.isLoggedIn()){var t=0,a=this.getModule(on);a.canIUseOfflinePush()&&(t=a.getUniAppPlatform()),this.request({protocolName:mn,requestData:{isWebUniapp:t}}).then((function(t){var a=t.data.instanceID;e.getModule(qa).setStatusInstanceID(a),He.l("".concat(e._n,"._reLogin ok.")),e.getModule(Fa).syncConversationList().then((function(){He.l("".concat(e._n,"._reLogin, sync conversation list ok.")),e.getModule(tn).start()})),e.getModule(Ba).updateLocalMainSequenceOnReconnected();var n=e.getModule(Ga);n.resetGetTopicTime(),n.getTopicListOnReconnected()}))}}},{key:"onMultipleAccountKickedOut",value:function(e){this.getModule(Va).onMultipleAccountKickedOut(e)}},{key:"onMultipleDeviceKickedOut",value:function(e){this.getModule(Va).onMultipleDeviceKickedOut(e)}},{key:"_onUserSigExpired",value:function(){this.getModule(Va).onUserSigExpired()}},{key:"onRestApiKickedOut",value:function(e){this.getModule(Va).onRestApiKickedOut(e)}},{key:"_sendACK",value:function(e){this.request({protocolName:Wo,requestData:{sessionData:e}})}},{key:"_isFrequencyOverLimit",value:function(e){var t=e.split(".")[1];if(!this._commandFrequencyLimitMap.has(t))return!1;if(!this._commandRequestInfoMap.has(t))return this._commandRequestInfoMap.set(t,{startTime:Date.now(),requestCount:1}),!1;var a=this._commandFrequencyLimitMap.get(t),n=a.count,o=a.interval,i=this._commandRequestInfoMap.get(t),r=i.startTime,s=i.requestCount;if(Date.now()-r>1e3*o)return this._commandRequestInfoMap.set(t,{startTime:Date.now(),requestCount:1}),!1;s+=1,this._commandRequestInfoMap.set(t,{startTime:r,requestCount:s});var l=!1;return s>n&&(l=!0),l}},{key:"_isServerOverload",value:function(e){if(!this._serverOverloadInfoMap.has(e))return!1;var t=this._serverOverloadInfoMap.get(e),a=t.overloadTime,n=t.waitingTime,o=!1;return Date.now()-a<=1e3*n?o=!0:(this._serverOverloadInfoMap.delete(e),o=!1),o}},{key:"onPushedServerOverload",value:function(e){var t=e.overloadCommand,a=e.waitingTime;this._serverOverloadInfoMap.set(t,{overloadTime:Date.now(),waitingTime:a}),He.w("".concat(this._n,".onPushedServerOverload waitingTime:").concat(a,"s"))}},{key:"reset",value:function(){He.l("".concat(this._n,".reset")),this._updateCommandFrequencyLimitMap(Js),this._commandRequestInfoMap.clear(),this._serverOverloadInfoMap.clear()}}]),o}(dn),Xs=function(e){l(a,e);var t=y(a);function a(e){var o;return n(this,a),(o=t.call(this,e))._n="MessageLossDetectionModule",o._maybeLostSequencesMap=new Map,o._firstRoundRet=[],o}return r(a,[{key:"onMessageMaybeLost",value:function(e,t,a){this._maybeLostSequencesMap.has(e)||this._maybeLostSequencesMap.set(e,[]);for(var n=this._maybeLostSequencesMap.get(e),o=0;o<a;o++)-1===n.indexOf(t+o)&&n.push(t+o)}},{key:"detectFirstRound",value:function(e,t){var a=this._maybeLostSequencesMap.get(e);if(!Zt(a)&&!Zt(t)){var n=a.filter((function(e){return-1===t.indexOf(e)}));0===n.length?He.i("".concat(this._n,".detectFirstRound no message loss. conversationID:").concat(e)):this._firstRoundRet=this._firstRoundRet.concat(n),a.length=0}}},{key:"detectSecondRound",value:function(e,t){if(!Zt(this._firstRoundRet)&&!Zt(t)){var a=this._firstRoundRet.filter((function(e){return-1===t.indexOf(e)}));this._firstRoundRet.length=0;var n,o=a.length;0!==o&&(o<=5?n=e+"-"+a.join("-"):(a.sort((function(e,t){return e-t})),n=e+" start:"+a[0]+" end:"+a[o-1]+" count:"+o),new Vi("messageLoss").setMessage(n).setNetworkType(this.getNetworkType()).setLevel("warning").end(),He.i("".concat(this._n,".detectSecondRound message loss detected. conversationID:").concat(e," lostSequences:").concat(a)))}}},{key:"reset",value:function(){He.l("".concat(this._n,".reset")),this._maybeLostSequencesMap.clear(),this._firstRoundRet.length=0}}]),a}(dn),Qs=function(e){l(a,e);var t=y(a);function a(e){var o;return n(this,a),(o=t.call(this,e))._n="CloudControlModule",o._cloudConfig=new Map,o._expiredTime=0,o._version=0,o._isFetching=!1,o}return r(a,[{key:"getCloudConfig",value:function(e){return ct(e)?this._cloudConfig:this._cloudConfig.has(e)?this._cloudConfig.get(e):void 0}},{key:"_canFetchConfig",value:function(){return this.isLoggedIn()&&!this._isFetching&&Date.now()>=this._expiredTime}},{key:"fetchConfig",value:function(){var e=this,t=this._canFetchConfig();if(He.l("".concat(this._n,".fetchConfig canFetchConfig:").concat(t)),t){var a=new Vi("fetchCloudControlConfig"),n=this.getModule(qa).getSDKAppID();this._isFetching=!0,this.request({protocolName:Qo,requestData:{SDKAppID:n,version:this._version}}).then((function(t){e._isFetching=!1,a.setMessage("version:".concat(e._version," newVersion:").concat(t.data.version," config:").concat(t.data.cloudControlConfig)).setNetworkType(e.getNetworkType()).end(),He.l("".concat(e._n,".fetchConfig ok")),e._parseCloudControlConfig(t.data)})).catch((function(t){e._isFetching=!1,e.probeNetwork().then((function(e){var n=_(e,2),o=n[0],i=n[1];a.setError(t,o,i).end()})),He.l("".concat(e._n,".fetchConfig failed. error:"),t),e._setExpiredTimeOnResponseError(12e4)}))}}},{key:"onPushedCloudControlConfig",value:function(e){He.l("".concat(this._n,".onPushedCloudControlConfig")),new Vi("pushedCloudControlConfig").setNetworkType(this.getNetworkType()).setMessage("newVersion:".concat(e.version," config:").concat(e.cloudControlConfig)).end(),this._parseCloudControlConfig(e)}},{key:"onCheckTimer",value:function(e){this._canFetchConfig()&&this.fetchConfig()}},{key:"_parseCloudControlConfig",value:function(e){var t=this,a="".concat(this._n,"._parseCloudControlConfig"),n=e.errorCode,o=e.errorMessage,i=e.cloudControlConfig,r=e.version,s=e.expiredTime;if(0===n){if(this._version!==r){var l=null;try{l=JSON.parse(i)}catch(c){this.isPrivateNetWork()||He.e("".concat(a," JSON parse error. cloudControlConfig:"),i)}l&&(this._cloudConfig.clear(),Object.keys(l).forEach((function(e){t._cloudConfig.set(e,l[e])})),this._version=r,this.emitInnerEvent(or))}this._expiredTime=Date.now()+1e3*s}else ct(n)?(He.l("".concat(a," failed. Invalid message format:"),e),this._setExpiredTimeOnResponseError(36e5)):(He.e("".concat(a," errorCode:").concat(n," errorMessage:").concat(o)),this._setExpiredTimeOnResponseError(12e4))}},{key:"_setExpiredTimeOnResponseError",value:function(e){this._expiredTime=Date.now()+e}},{key:"reset",value:function(){He.l("".concat(this._n,".reset")),this._cloudConfig.clear(),this._expiredTime=0,this._version=0,this._isFetching=!1}}]),a}(dn),el=function(e){l(a,e);var t=y(a);function a(e){var o;return n(this,a),(o=t.call(this,e))._n="RecoverMessageModule",o.PULL_LIMIT_COUNT=15,o}return r(a,[{key:"start",value:function(){this._recoverGroupChat(),this._recoverC2CChat()}},{key:"_recoverGroupChat",value:function(){var e,t,a=this,n=this._getLocalConversationList().filter((function(e){return e.type===I.CONV_GROUP&&e.groupProfile.type!==I.GRP_AVCHATROOM})),o=this.getModule(Fa),i=0,r=0,s=0;n.forEach((function(n){var l=n.conversationID,c=n.lastMessage;t=l.replace(I.CONV_GROUP,""),e=o.getLocalLastMessage(l),c&&0!==c.lastSequence&&e?(r=c.lastSequence,i=e.sequence,s=r-i,i>0&&s>=1&&s<300?a._recoverGroupMessage({groupID:t,localLastMessageSequence:i,remoteLastMessageSequence:r}):a._getGroupNotify(t)):a._getGroupNotify(t)}))}},{key:"_recoverC2CChat",value:function(){var e,t=this,a=this._getLocalConversationList().filter((function(e){return e.type===I.CONV_C2C})),n=this.getModule(Fa),o=0,i=0,r=0,s=[Promise.resolve()];a.forEach((function(a){var l=a.conversationID,c=a.lastMessage;e=n.getLocalLastMessage(l),c&&0!==c.lastTime&&e&&(i=c.lastTime,o=e.time,r=i-o,o>0&&r>=1&&r<=600&&s.push(t._recoverC2CMessage({conversationID:l,localLastMessageTime:o,remoteLastMessageTime:i})))})),Promise.all(s).then((function(){He.l("".concat(t._n,"._recoverC2CChat all promise fulfilled, start to sync unread messages")),t.getModule(Wa).startSyncOnReconnected()}))}},{key:"_getLocalConversationList",value:function(){return this.getModule(Fa).getLocalConversationList()}},{key:"_recoverGroupMessage",value:function(e){var t=this,a="".concat(this._n,"._recoverGroupMessage");He.l("".concat(a," options:"),e);var n=e.groupID,o=e.localLastMessageSequence,i=e.remoteLastMessageSequence;this._getGroupRomaingMessage({groupID:n,sequence:o}).then((function(e){var o=e.data,r=o.complete,s=o.messageList;if(!ct(s)){var l=s[0].sequence;He.l("".concat(a," pkgLastMessageSequence:").concat(l," complete:").concat(r)),l<i&&2!==r&&t._recoverGroupMessage({groupID:n,localLastMessageSequence:l,remoteLastMessageSequence:i}),new Vi("recoverMessage").setNetworkType(t.getNetworkType()).setMessage("groupID:".concat(n," complete:").concat(r," messageList length:").concat(s.length)).end();var c=t.getModule(Ba);s.length>1&&s.sort((function(e,t){return e.sequence-t.sequence}));for(var u=0;u<s.length;u++){var d=s[u];d.from!==I.CONV_SYSTEM?c.onNewGroupMessage({dataList:[d],isInstantMessage:!1,updateUnreadCount:!1}):c.onNewGroupTips({event:d.event,dataList:[d]})}t._getGroupNotify(n)}}))}},{key:"_getGroupNotify",value:function(e){this.getModule(Ba).getGroupNotify(e)}},{key:"_getGroupRomaingMessage",value:function(e){var t=e.groupID,a=e.sequence;return this.request({protocolName:mo,requestData:{groupID:t,count:this.PULL_LIMIT_COUNT,sequence:a+this.PULL_LIMIT_COUNT-1}})}},{key:"_recoverC2CMessage",value:function(e){var t=this,a="".concat(this._n,"._recoverC2CMessage");He.l("".concat(this._n,"._recoverC2CMessage options:"),e);var n=e.conversationID,o=e.localLastMessageTime,i=e.remoteLastMessageTime;return this._getC2CRoamingMessage({conversationID:n,time:o}).then((function(e){var o=e.data,r=o.complete,s=o.messageList;if(!ct(s)){var l=s.length;new Vi("recoverMessage").setNetworkType(t.getNetworkType()).setMessage("".concat(n," complete:").concat(r," messageList length:").concat(l)).end(),t.getModule(Oa).onNewC2CMessage({dataList:s,isInstantMessage:!0});var c=s[l-1].time;if(He.l("".concat(a," pkgLastMessageTime:").concat(c," complete:").concat(r)),c<i&&1!==r)return t._recoverC2CMessage({conversationID:n,localLastMessageTime:c,remoteLastMessageTime:i})}}))}},{key:"_getC2CRoamingMessage",value:function(e){var t=e.conversationID,a=e.time;return this.request({protocolName:Tn,requestData:{peerAccount:t.replace(I.CONV_C2C,""),count:this.PULL_LIMIT_COUNT+1,lastMessageTime:a,direction:1}})}},{key:"reset",value:function(){He.l("".concat(this._n,".reset"))}}]),a}(dn),tl=function(){function e(){n(this,e),this._n="AvgE2EDelay",this._e2eDelayArray=[]}return r(e,[{key:"addMessageDelay",value:function(e){var t=Ge()-e;t>=0&&this._e2eDelayArray.push(t)}},{key:"_calcAvg",value:function(e,t){if(0===t)return 0;var a=0;return e.forEach((function(e){a+=e})),Gt(a/t,1)}},{key:"_calcCountWithLimit",value:function(e){var t=e.e2eDelayArray,a=e.min,n=e.max;return t.filter((function(e){return a<=e&&e<n})).length}},{key:"_calcPercent",value:function(e,t){var a=Gt(e/t*100,2);return a>100&&(a=100),a}},{key:"_checkE2EDelayException",value:function(e,t){var a=e.filter((function(e){return e>t}));if(a.length>0){var n=a.length,o=Math.min.apply(Math,k(a)),i=Math.max.apply(Math,k(a)),r=this._calcAvg(a,n),s=Gt(n/e.length*100,2);s>50&&new Vi("messageE2EDelayException").setMessage("count:".concat(n," min:").concat(o," max:").concat(i," avg:").concat(r," percent:").concat(s)).setLevel("warning").end()}}},{key:"getStatResult",value:function(){var e=this._e2eDelayArray.length;if(0===e)return null;var t=k(this._e2eDelayArray),a=this._calcCountWithLimit({e2eDelayArray:t,min:0,max:1}),n=this._calcCountWithLimit({e2eDelayArray:t,min:1,max:3}),o=this._calcPercent(a,e),i=this._calcPercent(n,e),r=this._calcAvg(t,e);return this._checkE2EDelayException(t,3),t.length=0,this.reset(),{totalCount:e,countLessThan1Second:a,percentOfCountLessThan1Second:o,countLessThan3Second:n,percentOfCountLessThan3Second:i,avgDelay:r}}},{key:"reset",value:function(){this._e2eDelayArray.length=0}}]),e}(),al=function(){function e(){n(this,e),this._n="AvgRTT",this._requestCount=0,this._rttArray=[]}return r(e,[{key:"addRequestCount",value:function(){this._requestCount+=1}},{key:"addRTT",value:function(e){this._rttArray.push(e)}},{key:"_calcTotalCount",value:function(){return this._requestCount}},{key:"_calcRTTCount",value:function(e){return e.length}},{key:"_calcSuccessRateOfRequest",value:function(e,t){if(0===t)return 0;var a=Gt(e/t*100,2);return a>100&&(a=100),a}},{key:"_calcAvg",value:function(e,t){if(0===t)return 0;var a=0;return e.forEach((function(e){a+=e})),parseInt(a/t)}},{key:"_calcMax",value:function(){return Math.max.apply(Math,k(this._rttArray))}},{key:"_calcMin",value:function(){return Math.min.apply(Math,k(this._rttArray))}},{key:"getStatResult",value:function(){var e=this._calcTotalCount(),t=k(this._rttArray);if(0===e)return null;var a=this._calcRTTCount(t),n=this._calcSuccessRateOfRequest(a,e),o=this._calcAvg(t,a);return He.l("".concat(this._n,".getStatResult max:").concat(this._calcMax()," min:").concat(this._calcMin()," avg:").concat(o)),this.reset(),{totalCount:e,rttCount:a,successRateOfRequest:n,avgRTT:o}}},{key:"reset",value:function(){this._requestCount=0,this._rttArray.length=0}}]),e}(),nl=function(){function e(){n(this,e),this._map=new Map}return r(e,[{key:"initMap",value:function(e){var t=this;e.forEach((function(e){t._map.set(e,{totalCount:0,successCount:0,failedCountOfUserSide:0,costArray:[],fileSizeArray:[]})}))}},{key:"addTotalCount",value:function(e){return!(ct(e)||!this._map.has(e)||(this._map.get(e).totalCount+=1,0))}},{key:"addSuccessCount",value:function(e){return!(ct(e)||!this._map.has(e)||(this._map.get(e).successCount+=1,0))}},{key:"addFailedCountOfUserSide",value:function(e){return!(ct(e)||!this._map.has(e)||(this._map.get(e).failedCountOfUserSide+=1,0))}},{key:"addCost",value:function(e,t){return!(ct(e)||!this._map.has(e)||(this._map.get(e).costArray.push(t),0))}},{key:"addFileSize",value:function(e,t){return!(ct(e)||!this._map.has(e)||(this._map.get(e).fileSizeArray.push(t),0))}},{key:"_calcSuccessRateOfBusiness",value:function(e){if(ct(e)||!this._map.has(e))return-1;var t=this._map.get(e),a=Gt(t.successCount/t.totalCount*100,2);return a>100&&(a=100),a}},{key:"_calcSuccessRateOfPlatform",value:function(e){if(ct(e)||!this._map.has(e))return-1;var t=this._map.get(e),a=this._calcSuccessCountOfPlatform(e)/t.totalCount*100;return(a=Gt(a,2))>100&&(a=100),a}},{key:"_calcTotalCount",value:function(e){return ct(e)||!this._map.has(e)?-1:this._map.get(e).totalCount}},{key:"_calcSuccessCountOfBusiness",value:function(e){return ct(e)||!this._map.has(e)?-1:this._map.get(e).successCount}},{key:"_calcSuccessCountOfPlatform",value:function(e){if(ct(e)||!this._map.has(e))return-1;var t=this._map.get(e);return t.successCount+t.failedCountOfUserSide}},{key:"_calcAvg",value:function(e){return ct(e)||!this._map.has(e)?-1:e===wi?this._calcAvgSpeed(e):this._calcAvgCost(e)}},{key:"_calcAvgCost",value:function(e){var t=this._map.get(e).costArray.length;if(0===t)return 0;var a=0;return this._map.get(e).costArray.forEach((function(e){a+=e})),parseInt(a/t)}},{key:"_calcAvgSpeed",value:function(e){var t=0,a=0;return this._map.get(e).costArray.forEach((function(e){t+=e})),this._map.get(e).fileSizeArray.forEach((function(e){a+=e})),parseInt(1e3*a/t)}},{key:"getStatResult",value:function(e){var t=this._calcTotalCount(e);if(0===t)return null;var a=this._calcSuccessCountOfBusiness(e),n=this._calcSuccessRateOfBusiness(e),o=this._calcSuccessCountOfPlatform(e),i=this._calcSuccessRateOfPlatform(e),r=this._calcAvg(e);return this.reset(e),{totalCount:t,successCountOfBusiness:a,successRateOfBusiness:n,successCountOfPlatform:o,successRateOfPlatform:i,avgValue:r}}},{key:"reset",value:function(e){ct(e)?this._map.clear():this._map.set(e,{totalCount:0,successCount:0,failedCountOfUserSide:0,costArray:[],fileSizeArray:[]})}}]),e}(),ol=function(){function e(){n(this,e),this._lastMap=new Map,this._currentMap=new Map}return r(e,[{key:"initMap",value:function(e){var t=this;e.forEach((function(e){t._lastMap.set(e,new Map),t._currentMap.set(e,new Map)}))}},{key:"addMessageSequence",value:function(e){var t=e.key,a=e.message;if(ct(t)||!this._lastMap.has(t)||!this._currentMap.has(t))return!1;var n=a.conversationID,o=a.sequence,i=n.replace(I.CONV_GROUP,"");if(0===this._lastMap.get(t).size)this._addCurrentMap(e);else if(this._lastMap.get(t).has(i)){var r=this._lastMap.get(t).get(i),s=r.length-1;o>r[0]&&o<r[s]?(r.push(o),r.sort(),this._lastMap.get(t).set(i,r)):this._addCurrentMap(e)}else this._addCurrentMap(e);return!0}},{key:"_addCurrentMap",value:function(e){var t=e.key,a=e.message,n=a.conversationID,o=a.sequence,i=n.replace(I.CONV_GROUP,"");this._currentMap.get(t).has(i)||this._currentMap.get(t).set(i,[]),this._currentMap.get(t).get(i).push(o)}},{key:"_copyData",value:function(e){if(!ct(e)){this._lastMap.set(e,new Map);var t,a=this._lastMap.get(e),n=M(this._currentMap.get(e));try{for(n.s();!(t=n.n()).done;){var o=_(t.value,2),i=o[0],r=o[1];a.set(i,r)}}catch(s){n.e(s)}finally{n.f()}a=null,this._currentMap.set(e,new Map)}}},{key:"getStatResult",value:function(e){if(ct(this._currentMap.get(e))||ct(this._lastMap.get(e)))return null;if(0===this._lastMap.get(e).size)return this._copyData(e),null;var t=0,a=0;if(this._lastMap.get(e).forEach((function(e,n){var o=k(e.values()),i=o.length,r=o[i-1]-o[0]+1;t+=r,a+=i})),0===t)return null;var n=Gt(a/t*100,2);return n>100&&(n=100),this._copyData(e),{totalCount:t,successCountOfMessageReceived:a,successRateOfMessageReceived:n}}},{key:"reset",value:function(){this._currentMap.clear(),this._lastMap.clear()}}]),e}(),il=function(e){l(o,e);var a=y(o);function o(e){var t;n(this,o),(t=a.call(this,e))._n="QualityStatModule",t.TAG="im-ssolog-quality-stat",t.reportIndex=0,t.wholePeriod=!1,t._qualityItems=[yi,_i,ki,Ei,xi,Ni,wi,Ci,Mi,Si],t._messageSentItems=[ki,Ei,xi,Ni,wi],t._messageReceivedItems=[Ci,Mi,Si],t.REPORT_INTERVAL=120,t.REPORT_SDKAPPID_BLACKLIST=[],t.REPORT_TINYID_WHITELIST=[],t._statInfoArr=[],t._avgRTT=new al,t._avgE2EDelay=new tl,t._rateMessageSent=new nl,t._rateMessageReceived=new ol;var i=t.getInnerEmitterInstance();return i.on(nr,t._onLoginSuccess,g(t)),i.on(or,t._onCloudConfigUpdated,g(t)),t}return r(o,[{key:"_onLoginSuccess",value:function(){var e=this;this._rateMessageSent.initMap(this._messageSentItems),this._rateMessageReceived.initMap(this._messageReceivedItems);var t=this.getModule(za),a=t.getItem(this.TAG,!1);!Zt(a)&&dt(a.forEach)&&(He.l("".concat(this._n,"._onLoginSuccess get quality stat logs from local storage, count:").concat(a.length)),a.forEach((function(t){e._statInfoArr.push(t)})),t.removeItem(this.TAG,!1))}},{key:"_onCloudConfigUpdated",value:function(){var e=this.getCloudConfig("q_rpt_interval"),t=this.getCloudConfig("q_rpt_sdkappid_bl"),a=this.getCloudConfig("q_rpt_tinyid_wl");ct(e)||(this.REPORT_INTERVAL=Number(e)),ct(t)||(this.REPORT_SDKAPPID_BLACKLIST=t.split(",").map((function(e){return Number(e)}))),ct(a)||(this.REPORT_TINYID_WHITELIST=a.split(","))}},{key:"onCheckTimer",value:function(e){this.isLoggedIn()&&e%this.REPORT_INTERVAL==0&&(this.wholePeriod=!0,this._report())}},{key:"addRequestCount",value:function(){this._avgRTT.addRequestCount()}},{key:"addRTT",value:function(e){this._avgRTT.addRTT(e)}},{key:"addMessageDelay",value:function(e){this._avgE2EDelay.addMessageDelay(e)}},{key:"addTotalCount",value:function(e){this._rateMessageSent.addTotalCount(e)||He.w("".concat(this._n,".addTotalCount invalid key:"),e)}},{key:"addSuccessCount",value:function(e){this._rateMessageSent.addSuccessCount(e)||He.w("".concat(this._n,".addSuccessCount invalid key:"),e)}},{key:"addFailedCountOfUserSide",value:function(e){this._rateMessageSent.addFailedCountOfUserSide(e)||He.w("".concat(this._n,".addFailedCountOfUserSide invalid key:"),e)}},{key:"addCost",value:function(e,t){this._rateMessageSent.addCost(e,t)||He.w("".concat(this._n,".addCost invalid key or cost:"),e,t)}},{key:"addFileSize",value:function(e,t){this._rateMessageSent.addFileSize(e,t)||He.w("".concat(this._n,".addFileSize invalid key or size:"),e,t)}},{key:"addMessageSequence",value:function(e){this._rateMessageReceived.addMessageSequence(e)||He.w("".concat(this._n,".addMessageSequence invalid key:"),e.key)}},{key:"_getQualityItem",value:function(e){var a={},n=Di[this.getNetworkType()];ct(n)&&(n=8);var o={qualityType:Ii[e],timestamp:Pe(),networkType:n,extension:""};switch(e){case yi:a=this._avgRTT.getStatResult();break;case _i:a=this._avgE2EDelay.getStatResult();break;case ki:case Ei:case xi:case Ni:case wi:a=this._rateMessageSent.getStatResult(e);break;case Ci:case Mi:case Si:a=this._rateMessageReceived.getStatResult(e)}return null===a?null:t(t({},o),a)}},{key:"_report",value:function(e){var t=this,a=[],n=null;ct(e)?this._qualityItems.forEach((function(e){null!==(n=t._getQualityItem(e))&&(n.reportIndex=t.reportIndex,n.wholePeriod=t.wholePeriod,a.push(n))})):null!==(n=this._getQualityItem(e))&&(n.reportIndex=this.reportIndex,n.wholePeriod=this.wholePeriod,a.push(n)),He.d("".concat(this._n,"._report"),a),this._statInfoArr.length>0&&(a=a.concat(this._statInfoArr),this._statInfoArr=[]);var o=this.getModule(qa),i=o.getSDKAppID(),r=o.getTinyID();Ft(this.REPORT_SDKAPPID_BLACKLIST,i)&&!qt(this.REPORT_TINYID_WHITELIST,r)&&(a=[]),a.length>0&&this._doReport(a)}},{key:"_doReport",value:function(e){var a=this,n={header:rs(this),quality:e};this.request({protocolName:$o,requestData:t({},n)}).then((function(){a.reportIndex++,a.wholePeriod=!1})).catch((function(t){He.w("".concat(a._n,"._doReport, online:").concat(a.getNetworkType()," error:"),t),a._statInfoArr=a._statInfoArr.concat(e),a._flushAtOnce()}))}},{key:"_flushAtOnce",value:function(){var e=this.getModule(za),t=e.getItem(this.TAG,!1),a=this._statInfoArr,n="".concat(this._n,"._flushAtOnce");if(Zt(t))He.l("".concat(n," count:").concat(a.length)),e.setItem(this.TAG,a,!0,!1);else{var o=a.concat(t);o.length>10&&(o=o.slice(0,10)),He.l("".concat(n," count:").concat(o.length)),e.setItem(this.TAG,o,!0,!1)}this._statInfoArr=[]}},{key:"reset",value:function(){He.l("".concat(this._n,".reset")),this._report(),this.reportIndex=0,this.wholePeriod=!1,this.REPORT_SDKAPPID_BLACKLIST=[],this.REPORT_TINYID_WHITELIST=[],this._avgRTT.reset(),this._avgE2EDelay.reset(),this._rateMessageSent.reset(),this._rateMessageReceived.reset()}}]),o}(dn),rl=function(e){l(a,e);var t=y(a);function a(e){var o;return n(this,a),(o=t.call(this,e))._n="WorkerTimerModule",o._isWorkerEnabled=!0,o._workerTimer=null,o._timerID=-1,o._init(),o.getInnerEmitterInstance().on(or,o._onCloudConfigUpdated,g(o)),o}return r(a,[{key:"isWorkerEnabled",value:function(){return this._isWorkerEnabled&&De}},{key:"startWorkerTimer",value:function(){He.l("".concat(this._n,".startWorkerTimer")),this._workerTimer&&this._workerTimer.postMessage("start")}},{key:"stopWorkerTimer",value:function(){He.l("".concat(this._n,".stopWorkerTimer")),this._workerTimer&&this._workerTimer.postMessage("stop")}},{key:"_init",value:function(){if(De){var e=URL.createObjectURL(new Blob(['let interval = -1;onmessage = function(event) {  if (event.data === "start") {    if (interval > 0) {      clearInterval(interval);    }    interval = setInterval(() => {      postMessage("");    }, 1000);    postMessage(interval);  } else if (event.data === "stop") {    clearInterval(interval);    interval = -1;  }};'],{type:"application/javascript; charset=utf-8"}));this._workerTimer=new Worker(e);var t=this;this._workerTimer.onmessage=function(e){e.data?(t._timerID=e.data,He.l("".concat(t._n,"._init seed:").concat(t._timerID))):t._m.onCheckTimer()}}}},{key:"_onCloudConfigUpdated",value:function(){var e=this.getCloudConfig("enable_worker");He.l("".concat(this._n,"._onCloudConfigUpdated enableWorker:").concat(e)),ct(e)||"1"===e?!this._isWorkerEnabled&&De&&(this._isWorkerEnabled=!0,this.startWorkerTimer(),this._m.onWorkerTimerEnabled()):this._isWorkerEnabled&&De&&(this._isWorkerEnabled=!1,this.stopWorkerTimer(),this._m.onWorkerTimerDisabled())}},{key:"terminate",value:function(){He.l("".concat(this._n,".terminate")),this._workerTimer&&(this._workerTimer.terminate(),this._workerTimer=null,this._timerID=-1)}},{key:"getTimerID",value:function(){return this._timerID}},{key:"reset",value:function(){He.l("".concat(this._n,".reset"))}}]),a}(dn),sl=function(){function e(){n(this,e),this._n="PurchasedFeatureHandler",this._purchasedFeatureMap=new Map}return r(e,[{key:"isValidPurchaseBits",value:function(e){return e&&"string"==typeof e&&e.length>=1&&e.length<=64&&/[01]{1,64}/.test(e)}},{key:"parsePurchaseBits",value:function(e){if(this.isValidPurchaseBits(e)){this._purchasedFeatureMap.clear();for(var t=null,a=e.length-1,n=0;a>=0;a--,n++)t=n<32?new D(0,Math.pow(2,n)).toString():new D(Math.pow(2,n-32),0).toString(),"1"===e[a]?this._purchasedFeatureMap.set(t,!0):this._purchasedFeatureMap.set(t,!1)}else He.w("".concat(this._n,".parsePurchaseBits invalid purchasebits:").concat(e))}},{key:"hasPurchasedFeature",value:function(e){return!!this._purchasedFeatureMap.get(e)}},{key:"isFeatureEnabled",value:function(e){for(var t=parseInt(e).toString(2),a=void 0,n=!0,o=t.length-1,i=0;o>=0;o--,i++)if("1"===t.charAt(o)&&(a=i<32?new D(0,Math.pow(2,i)).toString():new D(Math.pow(2,i-32),0).toString(),!this._purchasedFeatureMap.get(a))){n=!1;break}return He.l("".concat(this._n,".isFeatureEnabled decimalNumber:").concat(e," binaryString:").concat(t," ret:").concat(n)),Qi({enabled:n})}},{key:"clear",value:function(){this._purchasedFeatureMap.clear()}}]),e}(),ll=function(){function e(t){n(this,e),this._m=t,this._n="CommercialConfigModule",this._expiredTime=0,this._isFetching=!1,this._purchasedFeatureHandler=new sl}return r(e,[{key:"_canFetch",value:function(){return this._getModule(qa).isLoggedIn()?!this._isFetching&&Date.now()>=this._expiredTime:(this._expiredTime=Date.now()+2e3,!1)}},{key:"onCheckTimer",value:function(e){this._canFetch()&&this.fetchConfig()}},{key:"fetchConfig",value:function(){var e=this,t=this._canFetch(),a="".concat(this._n,".fetchConfig");if(He.l("".concat(a," canFetch:").concat(t)),t){var n=this._getModule($a),o=new Vi("fetchCommercialConfig");o.setNetworkType(n.getNetworkType());var i=this._getModule(qa).getSDKAppID(),r=this._getModule(Ja);this._isFetching=!0,r.request({protocolName:ti,requestData:{SDKAppID:i}}).then((function(t){o.setMessage("purchaseBits:".concat(t.data.purchaseBits)).end(),He.l("".concat(a," ok.")),e._parseConfig(t.data),e._isFetching=!1})).catch((function(t){n.probe().then((function(e){var a=_(e,2),n=a[0],i=a[1];o.setError(t,n,i).end()})),e._isFetching=!1}))}}},{key:"onPushedConfig",value:function(e){var t="".concat(this._n,".onPushedConfig data:").concat(JSON.stringify(e));He.l("".concat(t)),new Vi("pushedCommercialConfig").setNetworkType(this._getModule($a).getNetworkType()).setMessage("purchaseBits:".concat(e.purchaseBits)).end(),this._parseConfig(e)}},{key:"_parseConfig",value:function(e){var t="".concat(this._n,"._parseConfig"),a=e.errorCode,n=e.errorMessage,o=e.purchaseBits,i=e.expiredTime;0===a?(this._purchasedFeatureHandler.parsePurchaseBits(o),this._expiredTime=Date.now()+1e3*i):ct(a)?(He.l("".concat(t," failed. Invalid message format:"),e),this._setExpiredTimeOnResponseError(36e5)):(He.e("".concat(t," errorCode:").concat(a," errorMessage:").concat(n)),this._setExpiredTimeOnResponseError(12e4))}},{key:"_setExpiredTimeOnResponseError",value:function(e){this._expiredTime=Date.now()+e}},{key:"canIUse",value:function(e){return this._purchasedFeatureHandler.hasPurchasedFeature(e)}},{key:"isFeatureEnabled",value:function(e){return this._purchasedFeatureHandler.isFeatureEnabled(e)}},{key:"_getModule",value:function(e){return this._m.getModule(e)}},{key:"reset",value:function(){He.l("".concat(this._n,".reset")),this._expiredTime=0,this._isFetching=!1,this._purchasedFeatureHandler.clear()}}]),e}(),cl=function(e){l(a,e);var t=y(a);function a(e){var o;return n(this,a),(o=t.call(this,e))._m=e,o._n="OfflinePushModule",o._offlinePushPlugin=void 0,o._androidPushConfig={huaweiPushBussinessId:"",xiaomiPushBussinessId:"",xiaomiPushAppId:"",xiaomiPushAppKey:"",meizuPushBussinessId:"",meizuPushAppId:"",meizuPushAppKey:"",vivoPushBussinessId:"",fcmPushBussinessId:"",oppoPushBussinessId:"",oppoPushAppKey:"",oppoPushAppSecret:"",honorPushBussinessId:""},o._deviceToken="",o._businessID=0,o._iosBusinessID=0,o._c2cUnreadCount=0,o._groupUnreadCount=0,o._isWebUniapp=0,o}return r(a,[{key:"registerPlugin",value:function(e){if(ie){this._offlinePushPlugin=e["tim-offline-push-plugin"];var t=e.offlinePushConfig||{},a=t.huaweiBusinessID,n=t.xiaomiBusinessID,o=t.xiaomiAppID,i=t.xiaomiAppKey,r=t.meizuBusinessID,s=t.meizuAppID,l=t.meizuAppKey,c=t.vivoBusinessID,u=t.oppoBusinessID,d=t.oppoAppKey,m=t.oppoAppSecret,p=t.honorBusinessID,h=t.iosBusinessID;this._androidPushConfig.huaweiPushBussinessId=a,this._androidPushConfig.xiaomiPushBussinessId=n,this._androidPushConfig.xiaomiPushAppId=o,this._androidPushConfig.xiaomiPushAppKey=i,this._androidPushConfig.meizuPushBussinessId=r,this._androidPushConfig.meizuPushAppId=s,this._androidPushConfig.meizuPushAppKey=l,this._androidPushConfig.vivoPushBussinessId=c,this._androidPushConfig.oppoPushBussinessId=u,this._androidPushConfig.oppoPushAppKey=d,this._androidPushConfig.oppoPushAppSecret=m,this._androidPushConfig.honorPushBussinessId=p,new Vi("registerPlugin").setMessage("tim-offline-push-plugin").setMoreMessage("isExist:".concat(!ct(this._offlinePushPlugin))).end(!0),He.l("".concat(this._n,".").concat("registerPlugin"," ok. offlinePushConfig:").concat(JSON.stringify(e.offlinePushConfig))),this._iosBusinessID=h,this._setAppShowListener()}else this.outputWarning("OfflinePushInUniapp")}},{key:"init",value:function(){this._isWebUniapp=this.getUniAppPlatform(),this._getDeviceToken()}},{key:"_getDeviceToken",value:function(){var e=this,t="".concat(this._n,".").concat("_getDeviceToken");if(dt(this._offlinePushPlugin.getDeviceToken)){var a="androidPushConfig:".concat(JSON.stringify(this._androidPushConfig),", iosBusinessID:").concat(this._iosBusinessID);He.l("".concat(t," start. ").concat(a)),new Vi("_getDeviceToken").setMessage("".concat(a)).end(!0),this._offlinePushPlugin.getDeviceToken(this._androidPushConfig,(function(n){var o=new Vi("getDeviceTokenRes"),i=n.code,r=n.msg;if(0===i){var s=n.data,l=s.deviceToken,c=s.deviceBrand,u=s.deviceType,d=s.bussinessId;e._deviceToken=l,e._businessID=d||e._iosBusinessID,a="deviceToken:".concat(l,", deviceBrand:").concat(c||u,", businessID:").concat(e._businessID),He.l("".concat(t," ok. ").concat(a)),o.setMessage(a).end(!0),e._setToken()}else o.setMessage("code:".concat(i,", msg:").concat(r)).end(!0),He.e("".concat(t," failed. error:"),n)}))}else He.e("".concat(t," getDeviceToken is not a function"))}},{key:"canIUseOfflinePush",value:function(){return ie&&!ct(this._offlinePushPlugin)}},{key:"_setAppShowListener",value:function(){var e=this,t="".concat(this._n,".").concat("_setAppShowListener");ct(this._offlinePushPlugin)?He.e("".concat(t," offlinePushPlugin is undefined")):dt(this._offlinePushPlugin.setAppShowListener)?(new Vi("_setAppShowListener").end(!0),He.l("".concat(t," start")),this._offlinePushPlugin.setAppShowListener((function(a){var n=(a||{}).appShow;new Vi("setAppShowListenerRes").setMessage("appShow:".concat(n)).end(!0),He.l("".concat(t," ok. appShow:").concat(n)),e._m.isReady()&&(0===n?(e._getConvUnreadCount(),e._onBackground()):1===n&&e._onForeground())}))):He.e("".concat(t," setAppShowListener is not a function"))}},{key:"getDeviceBrand",value:function(){if(!ct(this._offlinePushPlugin)&&dt(this._offlinePushPlugin.getDeviceType)){var e=(this._offlinePushPlugin.getDeviceType()||{}).deviceType;return He.l("".concat(this._n,".getDeviceBrand ok. deviceType:").concat(e)),e}}},{key:"_setToken",value:function(){var e,t=this,a="".concat(this._n,"._setToken"),n=this.getModule(qa),o=1,i="",r="";Zt(this._deviceToken)&&(o=0);var s=this.getUniAppPlatform(),l=this.getDeviceBrand();s===V.IOS||s===V.IPAD||s===V.MAC?r=this._deviceToken:s===V.ANDROID&&(i=this._deviceToken);var c=new Vi("offlinePushSetToken");return e="deviceToken:".concat(r||i,", businessID:").concat(this._businessID,", ")+"deviceBrand:".concat(l,", isWebUniapp:").concat(this._isWebUniapp,", pushMsg:").concat(o,", platform:").concat(s),c.setMessage("".concat(e)),He.l("".concat(a," ").concat(e)),this.request({protocolName:hi,requestData:{tokenID:i,pushMsg:o,sdkAppID:n.getSDKAppID(),businessID:parseInt(this._businessID),deviceBrand:l,deviceToken:r,isWebUniapp:this._isWebUniapp}}).then((function(e){return c.end(),He.l("".concat(a," ok")),e})).catch((function(e){return t.probeNetwork().then((function(t){var a=_(t,2),n=a[0],o=a[1];c.setError(e,n,o).end()})),He.e("".concat(a," failed. error:"),e),er(e)}))}},{key:"_getConvUnreadCount",value:function(){var e=this;this._c2cUnreadCount=0,this._groupUnreadCount=0,this.getModule(Fa).getLocalConversationList().forEach((function(t){t.type===I.CONV_C2C&&(e._c2cUnreadCount+=t.unreadCount),t.type===I.CONV_GROUP&&(e._groupUnreadCount+=t.unreadCount)}))}},{key:"_onBackground",value:function(){var e=this,t="".concat(this._n,".").concat("_onBackground"),a=new Vi("_onBackground");this.request({protocolName:mi,requestData:{c2cUnreadCount:this._c2cUnreadCount,groupUnreadCount:this._groupUnreadCount,isWebUniapp:this._isWebUniapp}}).then((function(n){return a.setMessage("c2cUnreadCount: ".concat(e._c2cUnreadCount,", groupUnreadCount: ").concat(e._groupUnreadCount)).end(),He.l("".concat(t," ok")),n})).catch((function(n){e.probeNetwork().then((function(e){var t=_(e,2),o=t[0],i=t[1];a.setError(n,o,i).end()})),He.e("".concat(t," failed. error:"),n)}))}},{key:"_onForeground",value:function(){var e=this,t="".concat(this._n,".").concat("_onForeground"),a=new Vi("_onForeground");this.request({protocolName:pi,requestData:{isWebUniapp:this._isWebUniapp}}).then((function(e){return a.end(),He.l("".concat(t," ok")),e})).catch((function(n){e.probeNetwork().then((function(e){var t=_(e,2),o=t[0],i=t[1];a.setError(n,o,i).end()})),He.e("".concat(t," failed. error:"),n)}))}},{key:"getUniAppPlatform",value:function(){var e=uni.getSystemInfoSync().platform,t=this.getDeviceBrand();return"ios"===e?V.IOS:"android"===e?V.ANDROID:1002===t?V.IPAD:1001===t?V.MAC:void 0}},{key:"reset",value:function(){this._deviceToken="",this._businessID=0,this._c2cUnreadCount=0,this._groupUnreadCount=0,this._isWebUniapp=0,He.l("".concat(this._n,".reset"))}}]),a}(dn),ul=function(e){l(a,e);var t=y(a);function a(e){var o;return n(this,a),(o=t.call(this,e))._n="ProfanityFilterModule",o._plugin=null,o._filterConfigMap=new Map,o._startIndex=0,o._version=0,o._canIUseLexicon=!1,o._isFetching=!1,o._expiredTime=0,o}return r(a,[{key:"init",value:function(){var e=this.getModule(Ya).getPlugin("tim-profanity-filter-plugin");e?(this._plugin=new e({logger:He,isArray:lt,isMap:at,isDevMode:this.isDevMode()}),this._getLexicon()):this.outputWarning("ProfanityPluginNotFound")}},{key:"onCheckTimer",value:function(){this._plugin&&this._canIUseLexicon&&this.isLoggedIn()&&!this._isFetching&&Date.now()>=this._expiredTime&&this._getLexicon()}},{key:"filterMessage",value:function(e,t){var a=!0;if(!this._plugin||!this._canIUseLexicon)return a;if(t&&t.messageControlInfo&&!0===t.messageControlInfo.excludedFromContentModeration)return a;var n=e.type,o=e.conversationType;if(n!==I.MSG_TEXT&&n!==I.MSG_CUSTOM)return a;var i,r="".concat(this._n,".filterMessage");if(He.l("".concat(r)),n===I.MSG_TEXT){if(o===I.CONV_C2C?i=$:o===I.CONV_GROUP&&(i=K),!this._isConfigOn(i))return a;var s=this._plugin.filter(e.payload.text),l=s.type,c=s.modifiedText;1===l?a=!1:2===l&&(e.payload.text=c)}else if(n===I.MSG_CUSTOM){if(o===I.CONV_C2C?i=j:o===I.CONV_GROUP&&(i=Y),!this._isConfigOn(i))return a;var u=this._plugin.filter(e.payload.data),d=this._plugin.filter(e.payload.description),m=this._plugin.filter(e.payload.extension);1===u.type||1===d.type||1===m.type?a=!1:(2===u.type&&(e.payload.data=u.modifiedText),2===d.type&&(e.payload.description=d.modifiedText),2===m.type&&(e.payload.extension=m.modifiedText))}return He.l("".concat(r," done. isAllowedToSend:").concat(a)),a}},{key:"filterText",value:function(e,t){var a="".concat(this._n,".filterText"),n={isAllowedToSend:!0,modifiedText:e};if(!this._plugin||!this._canIUseLexicon)return n;if(!this._isConfigOn(t))return n;He.l("".concat(a));var o=this._plugin.filter(e),i=o.type,r=o.modifiedText;return 1===i?n.isAllowedToSend=!1:2===i&&(n.modifiedText=r),He.l("".concat(a," done. ret:"),n),n}},{key:"_getLexicon",value:function(){var e=this,t=new Vi("profanityFilter"),a="".concat(this._n,"._getLexicon");this._isFetching=!0,this.request({protocolName:vi,requestData:{startIndex:this._startIndex,version:this._version}}).then((function(n){var o=n.data,i=o.errorInfo,r=o.filterConfig,s=o.lexicon,l=o.strToken,c=o.completeFlag,u=o.nextStartIndex,d=o.version,m=o.expiredTime,p=i.errorCode,h=i.errorMessage;return 0!==p?(e._isFetching=!1,He.w("".concat(a," failed. error:"),i),void t.setCode(p).setMessage(h).end()):(e._onFilterConfig(r),e._getToken(l),1===c?(He.l("".concat(a," done. version:").concat(d," expiredTime:").concat(m)),e._version=d,e._canIUseLexicon=!0,e._isFetching=!1,e._expiredTime=Date.now()+1e3*m,void e._plugin.onLexiconCompleted(s)):(e._startIndex=u,e._plugin.onLexiconSliced(s),void e._getLexicon()))})).catch((function(n){e.probeNetwork().then((function(e){var a=_(e,2),o=a[0],i=a[1];t.setError(n,o,i).end()})),e._isFetching=!1,He.l("".concat(a," failed. error:"),n)}))}},{key:"_onFilterConfig",value:function(e){var t=this;Zt(e)||(this._filterConfigMap.clear(),Object.keys(e).forEach((function(a){t._filterConfigMap.set(a,e[a])})),He.l("".concat(this._n,"._onFilterConfig. keys:").concat(Array.from(this._filterConfigMap.keys())," values:").concat(Array.from(this._filterConfigMap.values()))))}},{key:"_isConfigOn",value:function(e){return 1===this._filterConfigMap.get(e)}},{key:"_getToken",value:function(e){if(it(e)){var t=e.length,a="";if(t%2==0)for(var n=0;n<=t-1;n+=2)a+=e[n+1],a+=e[n];else{for(var o=0;o<t-1;o+=2)a+=e[o+1],a+=e[o];a+=e[t-1]}this._plugin.onToken(a)}}},{key:"reset",value:function(){He.l("".concat(this._n,".reset")),this._plugin&&(this._plugin.reset(),this._plugin=null),this._filterConfigMap.clear(),this._startIndex=0,this._version=0,this._canIUseLexicon=!1,this._isFetching=!1,this._expiredTime=0}}]),a}(dn),dl=function(){function e(t){n(this,e),this._m=t,this._n="TransCmdModule",this._TRTCCommandList=["tui_room_svr.*"],this._m.getInnerEmitterInstance().on(or,this._onCloudConfigUpdated,this)}return r(e,[{key:"_onCloudConfigUpdated",value:function(){var e=this,t=this._m.getModule(Qa).getCloudConfig("rtc_cmd");ct(t)||(t=JSON.parse(t)).forEach((function(t){e._TRTCCommandList.includes(t)||e._TRTCCommandList.push(t)}))}},{key:"sendTRTCCustomData",value:function(e){var t=e.serviceCommand,a=e.data,n="".concat(z.NAME.TUIROOM_SVR,".*");return ct(t)||(n=t),this._TRTCCommandList.includes(n)?this._trans({servcmd:n,data:a}):er({code:fi.INVALID_TRTC_CMD})}},{key:"_trans",value:function(e){He.d("".concat(this._n,"._trans. options:").concat(JSON.stringify(e)));var t=e.servcmd,a=e.data;return this._m.getModule(Ja).trans({servcmd:t,data:it(a)?JSON.parse(a):a})}},{key:"getCommandList",value:function(){return this._TRTCCommandList}},{key:"reset",value:function(){He.l("".concat(this._n,".reset"))}}]),e}(),ml=function(){function e(t){n(this,e),this._m=t,this._n="ErrorMessageModule",this.TIM_ERROR_ASSISTANCE="tim_error_assistance",this.STORAGE_EXPIRES_TIME=6048e5,this._map=new Map,this._init()}return r(e,[{key:"_init",value:function(){var e=this._getStorageModule().getItem(this.TIM_ERROR_ASSISTANCE,!1);if(e){var t;try{t=JSON.parse(e)}catch(a){this._getStorageModule().removeItem(this.TIM_ERROR_ASSISTANCE,!1),He.w("".concat(this._n,"._init error:"),a)}t&&(this._needToUpdate(t)?this._fetch():this._fillMap(t.message))}else this._fetch()}},{key:"_needToUpdate",value:function(e){var t=e.localSavedTime,a=e.localSavedVersion,n=t&&(new Date).getTime()-t>=this.STORAGE_EXPIRES_TIME,o=!a||"2.27.6"!==a;return He.l("".concat(this._n,"._needToUpdate isTimeout:").concat(n," isDifferentVersion:").concat(o)),n||o}},{key:"_fetch",value:function(){if(!this._m.getModule(qa).isPrivateNetWork()){var e="https://web.sdk.qcloud.com/im/download/error-message/0.0.1/tim-error-message.txt",t="application/x-www-form-urlencoded;charset=UTF-8",a="".concat(this._n,"._fetch ok in"),n=this;if(se)ce.request({url:e,method:"GET",timeout:3e3,header:{"content-type":t},dataType:"text",success:function(e){n._fillAndSave(e.data),He.l("".concat(a," mini program"))},fail:function(){}});else{var o=new XMLHttpRequest,i=setTimeout((function(){o.abort()}),3e3);o.onreadystatechange=function(){4===o.readyState&&(clearTimeout(i),200!==o.status&&304!==o.status||(He.l("".concat(a," browser")),n._fillAndSave(o.responseText)))},o.open("GET",e,!0),o.setRequestHeader("Content-type",t),o.send()}}}},{key:"_fillAndSave",value:function(e){this._fillMap(e),this._getStorageModule().setItem(this.TIM_ERROR_ASSISTANCE,JSON.stringify({message:e,localSavedTime:(new Date).getTime(),localSavedVersion:"2.27.6"}),!0,!1)}},{key:"_getStorageModule",value:function(){return this._m.getModule(za)}},{key:"_fillMap",value:function(e){this._map.clear();for(var t,a,n,o=e.split(";\n"),i=o.length,r=new RegExp(/'/g),s=0;s<i;s++)if(t=o[s].indexOf(":"),a=o[s].slice(0,t),n=o[s].slice(t+1,o[s].length),!a.startsWith("//")){if(ct(n))continue;this._map.set(a,n.replace(r,""))}}},{key:"get",value:function(e){var t=e.isIntl,a=e.key,n=e.replacement1,o=e.replacement2,i="".concat(a,t?"_en":"_cn");!this._map.has(i)&&this._map.has(a)&&(i=a);var r="";return this._map.has(i)?(r=this._map.get(i),ct(n)||(r=r.replace("$replacement1",n)),ct(o)||(r=r.replace("$replacement2",o)),r):r}},{key:"reset",value:function(){He.l("".concat(this._n,".reset"))}}]),e}(),pl=ms((function(e,t){var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function o(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!==a(n))throw new TypeError(n+"must be non-object");for(var i in n)o(n,i)&&(e[i]=n[i])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var i={arraySet:function(e,t,a,n,o){if(t.subarray&&e.subarray)e.set(t.subarray(a,a+n),o);else for(var i=0;i<n;i++)e[o+i]=t[a+i]},flattenChunks:function(e){var t,a,n,o,i,r;for(n=0,t=0,a=e.length;t<a;t++)n+=e[t].length;for(r=new Uint8Array(n),o=0,t=0,a=e.length;t<a;t++)i=e[t],r.set(i,o),o+=i.length;return r}},r={arraySet:function(e,t,a,n,o){for(var i=0;i<n;i++)e[o+i]=t[a+i]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,i)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,r))},t.setTyped(n)}));pl.assign,pl.shrinkBuf,pl.setTyped,pl.Buf8,pl.Buf16,pl.Buf32;var hl=function(e,t,a,n){for(var o=65535&e|0,i=e>>>16&65535|0,r=0;0!==a;){a-=r=a>2e3?2e3:a;do{i=i+(o=o+t[n++]|0)|0}while(--r);o%=65521,i%=65521}return o|i<<16|0},vl=function(){for(var e,t=[],a=0;a<256;a++){e=a;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[a]=e}return t}(),gl=function(e,t,a,n){var o=vl,i=n+a;e^=-1;for(var r=n;r<i;r++)e=e>>>8^o[255&(e^t[r])];return-1^e},fl=function(e,t){var a,n,o,i,r,s,l,c,u,d,m,p,h,v,g,f,y,_,k,E,x,N,w,C,M;a=e.state,n=e.next_in,C=e.input,o=n+(e.avail_in-5),i=e.next_out,M=e.output,r=i-(t-e.avail_out),s=i+(e.avail_out-257),l=a.dmax,c=a.wsize,u=a.whave,d=a.wnext,m=a.window,p=a.hold,h=a.bits,v=a.lencode,g=a.distcode,f=(1<<a.lenbits)-1,y=(1<<a.distbits)-1;e:do{h<15&&(p+=C[n++]<<h,h+=8,p+=C[n++]<<h,h+=8),_=v[p&f];t:for(;;){if(p>>>=k=_>>>24,h-=k,0==(k=_>>>16&255))M[i++]=65535&_;else{if(!(16&k)){if(0==(64&k)){_=v[(65535&_)+(p&(1<<k)-1)];continue t}if(32&k){a.mode=12;break e}e.msg="invalid literal/length code",a.mode=30;break e}E=65535&_,(k&=15)&&(h<k&&(p+=C[n++]<<h,h+=8),E+=p&(1<<k)-1,p>>>=k,h-=k),h<15&&(p+=C[n++]<<h,h+=8,p+=C[n++]<<h,h+=8),_=g[p&y];a:for(;;){if(p>>>=k=_>>>24,h-=k,!(16&(k=_>>>16&255))){if(0==(64&k)){_=g[(65535&_)+(p&(1<<k)-1)];continue a}e.msg="invalid distance code",a.mode=30;break e}if(x=65535&_,h<(k&=15)&&(p+=C[n++]<<h,(h+=8)<k&&(p+=C[n++]<<h,h+=8)),(x+=p&(1<<k)-1)>l){e.msg="invalid distance too far back",a.mode=30;break e}if(p>>>=k,h-=k,x>(k=i-r)){if((k=x-k)>u&&a.sane){e.msg="invalid distance too far back",a.mode=30;break e}if(N=0,w=m,0===d){if(N+=c-k,k<E){E-=k;do{M[i++]=m[N++]}while(--k);N=i-x,w=M}}else if(d<k){if(N+=c+d-k,(k-=d)<E){E-=k;do{M[i++]=m[N++]}while(--k);if(N=0,d<E){E-=k=d;do{M[i++]=m[N++]}while(--k);N=i-x,w=M}}}else if(N+=d-k,k<E){E-=k;do{M[i++]=m[N++]}while(--k);N=i-x,w=M}for(;E>2;)M[i++]=w[N++],M[i++]=w[N++],M[i++]=w[N++],E-=3;E&&(M[i++]=w[N++],E>1&&(M[i++]=w[N++]))}else{N=i-x;do{M[i++]=M[N++],M[i++]=M[N++],M[i++]=M[N++],E-=3}while(E>2);E&&(M[i++]=M[N++],E>1&&(M[i++]=M[N++]))}break}}break}}while(n<o&&i<s);n-=E=h>>3,p&=(1<<(h-=E<<3))-1,e.next_in=n,e.next_out=i,e.avail_in=n<o?o-n+5:5-(n-o),e.avail_out=i<s?s-i+257:257-(i-s),a.hold=p,a.bits=h},yl=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],_l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],kl=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],El=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],xl=function(e,t,a,n,o,i,r,s){var l,c,u,d,m,p,h,v,g,f=s.bits,y=0,_=0,k=0,E=0,x=0,N=0,w=0,C=0,M=0,S=0,I=null,T=0,D=new pl.Buf16(16),b=new pl.Buf16(16),V=null,A=0;for(y=0;y<=15;y++)D[y]=0;for(_=0;_<n;_++)D[t[a+_]]++;for(x=f,E=15;E>=1&&0===D[E];E--);if(x>E&&(x=E),0===E)return o[i++]=20971520,o[i++]=20971520,s.bits=1,0;for(k=1;k<E&&0===D[k];k++);for(x<k&&(x=k),C=1,y=1;y<=15;y++)if(C<<=1,(C-=D[y])<0)return-1;if(C>0&&(0===e||1!==E))return-1;for(b[1]=0,y=1;y<15;y++)b[y+1]=b[y]+D[y];for(_=0;_<n;_++)0!==t[a+_]&&(r[b[t[a+_]]++]=_);if(0===e?(I=V=r,p=19):1===e?(I=yl,T-=257,V=_l,A-=257,p=256):(I=kl,V=El,p=-1),S=0,_=0,y=k,m=i,N=x,w=0,u=-1,d=(M=1<<x)-1,1===e&&M>852||2===e&&M>592)return 1;for(;;){h=y-w,r[_]<p?(v=0,g=r[_]):r[_]>p?(v=V[A+r[_]],g=I[T+r[_]]):(v=96,g=0),l=1<<y-w,k=c=1<<N;do{o[m+(S>>w)+(c-=l)]=h<<24|v<<16|g|0}while(0!==c);for(l=1<<y-1;S&l;)l>>=1;if(0!==l?(S&=l-1,S+=l):S=0,_++,0==--D[y]){if(y===E)break;y=t[a+r[_]]}if(y>x&&(S&d)!==u){for(0===w&&(w=x),m+=k,C=1<<(N=y-w);N+w<E&&!((C-=D[N+w])<=0);)N++,C<<=1;if(M+=1<<N,1===e&&M>852||2===e&&M>592)return 1;o[u=S&d]=x<<24|N<<16|m-i|0}}return 0!==S&&(o[m+S]=y-w<<24|64<<16|0),s.bits=x,0};function Nl(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function wl(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new pl.Buf16(320),this.work=new pl.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Cl(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new pl.Buf32(852),t.distcode=t.distdyn=new pl.Buf32(592),t.sane=1,t.back=-1,0):-2}function Ml(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,Cl(e)):-2}function Sl(e,t){var a,n;return e&&e.state?(n=e.state,t<0?(a=0,t=-t):(a=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?-2:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=a,n.wbits=t,Ml(e))):-2}function Il(e,t){var a,n;return e?(n=new wl,e.state=n,n.window=null,0!==(a=Sl(e,t))&&(e.state=null),a):-2}var Tl,Dl,bl=!0;function Vl(e){if(bl){var t;for(Tl=new pl.Buf32(512),Dl=new pl.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(xl(1,e.lens,0,288,Tl,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;xl(2,e.lens,0,32,Dl,0,e.work,{bits:5}),bl=!1}e.lencode=Tl,e.lenbits=9,e.distcode=Dl,e.distbits=5}function Al(e,t,a,n){var o,i=e.state;return null===i.window&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new pl.Buf8(i.wsize)),n>=i.wsize?(pl.arraySet(i.window,t,a-i.wsize,i.wsize,0),i.wnext=0,i.whave=i.wsize):((o=i.wsize-i.wnext)>n&&(o=n),pl.arraySet(i.window,t,a-n,o,i.wnext),(n-=o)?(pl.arraySet(i.window,t,a-n,n,0),i.wnext=n,i.whave=i.wsize):(i.wnext+=o,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=o))),0}var Ll={inflateReset:Ml,inflateReset2:Sl,inflateResetKeep:Cl,inflateInit:function(e){return Il(e,15)},inflateInit2:Il,inflate:function(e,t){var a,n,o,i,r,s,l,c,u,d,m,p,h,v,g,f,y,_,k,E,x,N,w,C,M=0,S=new pl.Buf8(4),I=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return-2;12===(a=e.state).mode&&(a.mode=13),r=e.next_out,o=e.output,l=e.avail_out,i=e.next_in,n=e.input,s=e.avail_in,c=a.hold,u=a.bits,d=s,m=l,N=0;e:for(;;)switch(a.mode){case 1:if(0===a.wrap){a.mode=13;break}for(;u<16;){if(0===s)break e;s--,c+=n[i++]<<u,u+=8}if(2&a.wrap&&35615===c){a.check=0,S[0]=255&c,S[1]=c>>>8&255,a.check=gl(a.check,S,2,0),c=0,u=0,a.mode=2;break}if(a.flags=0,a.head&&(a.head.done=!1),!(1&a.wrap)||(((255&c)<<8)+(c>>8))%31){e.msg="incorrect header check",a.mode=30;break}if(8!=(15&c)){e.msg="unknown compression method",a.mode=30;break}if(u-=4,x=8+(15&(c>>>=4)),0===a.wbits)a.wbits=x;else if(x>a.wbits){e.msg="invalid window size",a.mode=30;break}a.dmax=1<<x,e.adler=a.check=1,a.mode=512&c?10:12,c=0,u=0;break;case 2:for(;u<16;){if(0===s)break e;s--,c+=n[i++]<<u,u+=8}if(a.flags=c,8!=(255&a.flags)){e.msg="unknown compression method",a.mode=30;break}if(57344&a.flags){e.msg="unknown header flags set",a.mode=30;break}a.head&&(a.head.text=c>>8&1),512&a.flags&&(S[0]=255&c,S[1]=c>>>8&255,a.check=gl(a.check,S,2,0)),c=0,u=0,a.mode=3;case 3:for(;u<32;){if(0===s)break e;s--,c+=n[i++]<<u,u+=8}a.head&&(a.head.time=c),512&a.flags&&(S[0]=255&c,S[1]=c>>>8&255,S[2]=c>>>16&255,S[3]=c>>>24&255,a.check=gl(a.check,S,4,0)),c=0,u=0,a.mode=4;case 4:for(;u<16;){if(0===s)break e;s--,c+=n[i++]<<u,u+=8}a.head&&(a.head.xflags=255&c,a.head.os=c>>8),512&a.flags&&(S[0]=255&c,S[1]=c>>>8&255,a.check=gl(a.check,S,2,0)),c=0,u=0,a.mode=5;case 5:if(1024&a.flags){for(;u<16;){if(0===s)break e;s--,c+=n[i++]<<u,u+=8}a.length=c,a.head&&(a.head.extra_len=c),512&a.flags&&(S[0]=255&c,S[1]=c>>>8&255,a.check=gl(a.check,S,2,0)),c=0,u=0}else a.head&&(a.head.extra=null);a.mode=6;case 6:if(1024&a.flags&&((p=a.length)>s&&(p=s),p&&(a.head&&(x=a.head.extra_len-a.length,a.head.extra||(a.head.extra=new Array(a.head.extra_len)),pl.arraySet(a.head.extra,n,i,p,x)),512&a.flags&&(a.check=gl(a.check,n,p,i)),s-=p,i+=p,a.length-=p),a.length))break e;a.length=0,a.mode=7;case 7:if(2048&a.flags){if(0===s)break e;p=0;do{x=n[i+p++],a.head&&x&&a.length<65536&&(a.head.name+=String.fromCharCode(x))}while(x&&p<s);if(512&a.flags&&(a.check=gl(a.check,n,p,i)),s-=p,i+=p,x)break e}else a.head&&(a.head.name=null);a.length=0,a.mode=8;case 8:if(4096&a.flags){if(0===s)break e;p=0;do{x=n[i+p++],a.head&&x&&a.length<65536&&(a.head.comment+=String.fromCharCode(x))}while(x&&p<s);if(512&a.flags&&(a.check=gl(a.check,n,p,i)),s-=p,i+=p,x)break e}else a.head&&(a.head.comment=null);a.mode=9;case 9:if(512&a.flags){for(;u<16;){if(0===s)break e;s--,c+=n[i++]<<u,u+=8}if(c!==(65535&a.check)){e.msg="header crc mismatch",a.mode=30;break}c=0,u=0}a.head&&(a.head.hcrc=a.flags>>9&1,a.head.done=!0),e.adler=a.check=0,a.mode=12;break;case 10:for(;u<32;){if(0===s)break e;s--,c+=n[i++]<<u,u+=8}e.adler=a.check=Nl(c),c=0,u=0,a.mode=11;case 11:if(0===a.havedict)return e.next_out=r,e.avail_out=l,e.next_in=i,e.avail_in=s,a.hold=c,a.bits=u,2;e.adler=a.check=1,a.mode=12;case 12:if(5===t||6===t)break e;case 13:if(a.last){c>>>=7&u,u-=7&u,a.mode=27;break}for(;u<3;){if(0===s)break e;s--,c+=n[i++]<<u,u+=8}switch(a.last=1&c,u-=1,3&(c>>>=1)){case 0:a.mode=14;break;case 1:if(Vl(a),a.mode=20,6===t){c>>>=2,u-=2;break e}break;case 2:a.mode=17;break;case 3:e.msg="invalid block type",a.mode=30}c>>>=2,u-=2;break;case 14:for(c>>>=7&u,u-=7&u;u<32;){if(0===s)break e;s--,c+=n[i++]<<u,u+=8}if((65535&c)!=(c>>>16^65535)){e.msg="invalid stored block lengths",a.mode=30;break}if(a.length=65535&c,c=0,u=0,a.mode=15,6===t)break e;case 15:a.mode=16;case 16:if(p=a.length){if(p>s&&(p=s),p>l&&(p=l),0===p)break e;pl.arraySet(o,n,i,p,r),s-=p,i+=p,l-=p,r+=p,a.length-=p;break}a.mode=12;break;case 17:for(;u<14;){if(0===s)break e;s--,c+=n[i++]<<u,u+=8}if(a.nlen=257+(31&c),c>>>=5,u-=5,a.ndist=1+(31&c),c>>>=5,u-=5,a.ncode=4+(15&c),c>>>=4,u-=4,a.nlen>286||a.ndist>30){e.msg="too many length or distance symbols",a.mode=30;break}a.have=0,a.mode=18;case 18:for(;a.have<a.ncode;){for(;u<3;){if(0===s)break e;s--,c+=n[i++]<<u,u+=8}a.lens[I[a.have++]]=7&c,c>>>=3,u-=3}for(;a.have<19;)a.lens[I[a.have++]]=0;if(a.lencode=a.lendyn,a.lenbits=7,w={bits:a.lenbits},N=xl(0,a.lens,0,19,a.lencode,0,a.work,w),a.lenbits=w.bits,N){e.msg="invalid code lengths set",a.mode=30;break}a.have=0,a.mode=19;case 19:for(;a.have<a.nlen+a.ndist;){for(;f=(M=a.lencode[c&(1<<a.lenbits)-1])>>>16&255,y=65535&M,!((g=M>>>24)<=u);){if(0===s)break e;s--,c+=n[i++]<<u,u+=8}if(y<16)c>>>=g,u-=g,a.lens[a.have++]=y;else{if(16===y){for(C=g+2;u<C;){if(0===s)break e;s--,c+=n[i++]<<u,u+=8}if(c>>>=g,u-=g,0===a.have){e.msg="invalid bit length repeat",a.mode=30;break}x=a.lens[a.have-1],p=3+(3&c),c>>>=2,u-=2}else if(17===y){for(C=g+3;u<C;){if(0===s)break e;s--,c+=n[i++]<<u,u+=8}u-=g,x=0,p=3+(7&(c>>>=g)),c>>>=3,u-=3}else{for(C=g+7;u<C;){if(0===s)break e;s--,c+=n[i++]<<u,u+=8}u-=g,x=0,p=11+(127&(c>>>=g)),c>>>=7,u-=7}if(a.have+p>a.nlen+a.ndist){e.msg="invalid bit length repeat",a.mode=30;break}for(;p--;)a.lens[a.have++]=x}}if(30===a.mode)break;if(0===a.lens[256]){e.msg="invalid code -- missing end-of-block",a.mode=30;break}if(a.lenbits=9,w={bits:a.lenbits},N=xl(1,a.lens,0,a.nlen,a.lencode,0,a.work,w),a.lenbits=w.bits,N){e.msg="invalid literal/lengths set",a.mode=30;break}if(a.distbits=6,a.distcode=a.distdyn,w={bits:a.distbits},N=xl(2,a.lens,a.nlen,a.ndist,a.distcode,0,a.work,w),a.distbits=w.bits,N){e.msg="invalid distances set",a.mode=30;break}if(a.mode=20,6===t)break e;case 20:a.mode=21;case 21:if(s>=6&&l>=258){e.next_out=r,e.avail_out=l,e.next_in=i,e.avail_in=s,a.hold=c,a.bits=u,fl(e,m),r=e.next_out,o=e.output,l=e.avail_out,i=e.next_in,n=e.input,s=e.avail_in,c=a.hold,u=a.bits,12===a.mode&&(a.back=-1);break}for(a.back=0;f=(M=a.lencode[c&(1<<a.lenbits)-1])>>>16&255,y=65535&M,!((g=M>>>24)<=u);){if(0===s)break e;s--,c+=n[i++]<<u,u+=8}if(f&&0==(240&f)){for(_=g,k=f,E=y;f=(M=a.lencode[E+((c&(1<<_+k)-1)>>_)])>>>16&255,y=65535&M,!(_+(g=M>>>24)<=u);){if(0===s)break e;s--,c+=n[i++]<<u,u+=8}c>>>=_,u-=_,a.back+=_}if(c>>>=g,u-=g,a.back+=g,a.length=y,0===f){a.mode=26;break}if(32&f){a.back=-1,a.mode=12;break}if(64&f){e.msg="invalid literal/length code",a.mode=30;break}a.extra=15&f,a.mode=22;case 22:if(a.extra){for(C=a.extra;u<C;){if(0===s)break e;s--,c+=n[i++]<<u,u+=8}a.length+=c&(1<<a.extra)-1,c>>>=a.extra,u-=a.extra,a.back+=a.extra}a.was=a.length,a.mode=23;case 23:for(;f=(M=a.distcode[c&(1<<a.distbits)-1])>>>16&255,y=65535&M,!((g=M>>>24)<=u);){if(0===s)break e;s--,c+=n[i++]<<u,u+=8}if(0==(240&f)){for(_=g,k=f,E=y;f=(M=a.distcode[E+((c&(1<<_+k)-1)>>_)])>>>16&255,y=65535&M,!(_+(g=M>>>24)<=u);){if(0===s)break e;s--,c+=n[i++]<<u,u+=8}c>>>=_,u-=_,a.back+=_}if(c>>>=g,u-=g,a.back+=g,64&f){e.msg="invalid distance code",a.mode=30;break}a.offset=y,a.extra=15&f,a.mode=24;case 24:if(a.extra){for(C=a.extra;u<C;){if(0===s)break e;s--,c+=n[i++]<<u,u+=8}a.offset+=c&(1<<a.extra)-1,c>>>=a.extra,u-=a.extra,a.back+=a.extra}if(a.offset>a.dmax){e.msg="invalid distance too far back",a.mode=30;break}a.mode=25;case 25:if(0===l)break e;if(p=m-l,a.offset>p){if((p=a.offset-p)>a.whave&&a.sane){e.msg="invalid distance too far back",a.mode=30;break}p>a.wnext?(p-=a.wnext,h=a.wsize-p):h=a.wnext-p,p>a.length&&(p=a.length),v=a.window}else v=o,h=r-a.offset,p=a.length;p>l&&(p=l),l-=p,a.length-=p;do{o[r++]=v[h++]}while(--p);0===a.length&&(a.mode=21);break;case 26:if(0===l)break e;o[r++]=a.length,l--,a.mode=21;break;case 27:if(a.wrap){for(;u<32;){if(0===s)break e;s--,c|=n[i++]<<u,u+=8}if(m-=l,e.total_out+=m,a.total+=m,m&&(e.adler=a.check=a.flags?gl(a.check,o,m,r-m):hl(a.check,o,m,r-m)),m=l,(a.flags?c:Nl(c))!==a.check){e.msg="incorrect data check",a.mode=30;break}c=0,u=0}a.mode=28;case 28:if(a.wrap&&a.flags){for(;u<32;){if(0===s)break e;s--,c+=n[i++]<<u,u+=8}if(c!==(4294967295&a.total)){e.msg="incorrect length check",a.mode=30;break}c=0,u=0}a.mode=29;case 29:N=1;break e;case 30:N=-3;break e;case 31:return-4;default:return-2}return e.next_out=r,e.avail_out=l,e.next_in=i,e.avail_in=s,a.hold=c,a.bits=u,(a.wsize||m!==e.avail_out&&a.mode<30&&(a.mode<27||4!==t))&&Al(e,e.output,e.next_out,m-e.avail_out),d-=e.avail_in,m-=e.avail_out,e.total_in+=d,e.total_out+=m,a.total+=m,a.wrap&&m&&(e.adler=a.check=a.flags?gl(a.check,o,m,e.next_out-m):hl(a.check,o,m,e.next_out-m)),e.data_type=a.bits+(a.last?64:0)+(12===a.mode?128:0)+(20===a.mode||15===a.mode?256:0),(0===d&&0===m||4===t)&&0===N&&(N=-5),N},inflateEnd:function(e){if(!e||!e.state)return-2;var t=e.state;return t.window&&(t.window=null),e.state=null,0},inflateGetHeader:function(e,t){var a;return e&&e.state?0==(2&(a=e.state).wrap)?-2:(a.head=t,t.done=!1,0):-2},inflateSetDictionary:function(e,t){var a,n=t.length;return e&&e.state?0!==(a=e.state).wrap&&11!==a.mode?-2:11===a.mode&&hl(1,t,n,0)!==a.check?-3:Al(e,t,n,n)?(a.mode=31,-4):(a.havedict=1,0):-2},inflateInfo:"pako inflate (from Nodeca project)"},Rl=!0,Ol=!0;try{String.fromCharCode.apply(null,[0])}catch(lc){Rl=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(lc){Ol=!1}for(var Bl=new pl.Buf8(256),Pl=0;Pl<256;Pl++)Bl[Pl]=Pl>=252?6:Pl>=248?5:Pl>=240?4:Pl>=224?3:Pl>=192?2:1;function Ul(e,t){if(t<65534&&(e.subarray&&Ol||!e.subarray&&Rl))return String.fromCharCode.apply(null,pl.shrinkBuf(e,t));for(var a="",n=0;n<t;n++)a+=String.fromCharCode(e[n]);return a}Bl[254]=Bl[254]=1;var Gl=function(e){var t,a,n,o,i,r=e.length,s=0;for(o=0;o<r;o++)55296==(64512&(a=e.charCodeAt(o)))&&o+1<r&&56320==(64512&(n=e.charCodeAt(o+1)))&&(a=65536+(a-55296<<10)+(n-56320),o++),s+=a<128?1:a<2048?2:a<65536?3:4;for(t=new pl.Buf8(s),i=0,o=0;i<s;o++)55296==(64512&(a=e.charCodeAt(o)))&&o+1<r&&56320==(64512&(n=e.charCodeAt(o+1)))&&(a=65536+(a-55296<<10)+(n-56320),o++),a<128?t[i++]=a:a<2048?(t[i++]=192|a>>>6,t[i++]=128|63&a):a<65536?(t[i++]=224|a>>>12,t[i++]=128|a>>>6&63,t[i++]=128|63&a):(t[i++]=240|a>>>18,t[i++]=128|a>>>12&63,t[i++]=128|a>>>6&63,t[i++]=128|63&a);return t},Fl=function(e){for(var t=new pl.Buf8(e.length),a=0,n=t.length;a<n;a++)t[a]=e.charCodeAt(a);return t},ql=function(e,t){var a,n,o,i,r=t||e.length,s=new Array(2*r);for(n=0,a=0;a<r;)if((o=e[a++])<128)s[n++]=o;else if((i=Bl[o])>4)s[n++]=65533,a+=i-1;else{for(o&=2===i?31:3===i?15:7;i>1&&a<r;)o=o<<6|63&e[a++],i--;i>1?s[n++]=65533:o<65536?s[n++]=o:(o-=65536,s[n++]=55296|o>>10&1023,s[n++]=56320|1023&o)}return Ul(s,n)},zl=function(e,t){var a;for((t=t||e.length)>e.length&&(t=e.length),a=t-1;a>=0&&128==(192&e[a]);)a--;return a<0||0===a?t:a+Bl[e[a]]>t?a:t},Hl={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},$l={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},jl=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},Kl=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},Yl=Object.prototype.toString;function Wl(e){if(!(this instanceof Wl))return new Wl(e);this.options=pl.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new jl,this.strm.avail_out=0;var a=Ll.inflateInit2(this.strm,t.windowBits);if(a!==Hl.Z_OK)throw new Error($l[a]);if(this.header=new Kl,Ll.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=Gl(t.dictionary):"[object ArrayBuffer]"===Yl.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(a=Ll.inflateSetDictionary(this.strm,t.dictionary))!==Hl.Z_OK))throw new Error($l[a])}function Jl(e,t){var a=new Wl(t);if(a.push(e,!0),a.err)throw a.msg||$l[a.err];return a.result}Wl.prototype.push=function(e,t){var a,n,o,i,r,s=this.strm,l=this.options.chunkSize,c=this.options.dictionary,u=!1;if(this.ended)return!1;n=t===~~t?t:!0===t?Hl.Z_FINISH:Hl.Z_NO_FLUSH,"string"==typeof e?s.input=Fl(e):"[object ArrayBuffer]"===Yl.call(e)?s.input=new Uint8Array(e):s.input=e,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new pl.Buf8(l),s.next_out=0,s.avail_out=l),(a=Ll.inflate(s,Hl.Z_NO_FLUSH))===Hl.Z_NEED_DICT&&c&&(a=Ll.inflateSetDictionary(this.strm,c)),a===Hl.Z_BUF_ERROR&&!0===u&&(a=Hl.Z_OK,u=!1),a!==Hl.Z_STREAM_END&&a!==Hl.Z_OK)return this.onEnd(a),this.ended=!0,!1;s.next_out&&(0!==s.avail_out&&a!==Hl.Z_STREAM_END&&(0!==s.avail_in||n!==Hl.Z_FINISH&&n!==Hl.Z_SYNC_FLUSH)||("string"===this.options.to?(o=zl(s.output,s.next_out),i=s.next_out-o,r=ql(s.output,o),s.next_out=i,s.avail_out=l-i,i&&pl.arraySet(s.output,s.output,o,i,0),this.onData(r)):this.onData(pl.shrinkBuf(s.output,s.next_out)))),0===s.avail_in&&0===s.avail_out&&(u=!0)}while((s.avail_in>0||0===s.avail_out)&&a!==Hl.Z_STREAM_END);return a===Hl.Z_STREAM_END&&(n=Hl.Z_FINISH),n===Hl.Z_FINISH?(a=Ll.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===Hl.Z_OK):n!==Hl.Z_SYNC_FLUSH||(this.onEnd(Hl.Z_OK),s.avail_out=0,!0)},Wl.prototype.onData=function(e){this.chunks.push(e)},Wl.prototype.onEnd=function(e){e===Hl.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=pl.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Zl={Inflate:Wl,inflate:Jl,inflateRaw:function(e,t){return(t=t||{}).raw=!0,Jl(e,t)},ungzip:Jl},Xl={};(0,pl.assign)(Xl,Zl,Hl);var Ql=Xl,ec=function(){function e(t){n(this,e),this._m=t,this._n="InflateModule",this._bLogForInflateOK=!1,this._bLogForInflateError=!1}return r(e,[{key:"inflate",value:function(e){var t,a=new Uint8Array(e).slice(4),n=Date.now();try{t=Ql.inflate(a,{to:"string"}),this._bLogForInflateOK||(this._bLogForInflateOK=!0,new Vi("inflateOK").end())}catch(r){if(this._bLogForInflateError)return;return this._bLogForInflateError=!0,void new Vi("inflateError").setMessage(r).end()}var o=a.length+4,i=t.length;return He.d("inflate ok. zipped:".concat(o," unzipped:").concat(i)+" compression ratio:".concat(Math.round(100*(i-o)/i),"% cost:").concat(Date.now()-n)),t}},{key:"reset",value:function(){He.l("".concat(this._n,".reset")),this._bLogForInflateOK=!1,this._bLogForInflateError=!1}}]),e}(),tc=function(){function e(t){n(this,e);var a=new Vi("sdkConstruct");this._n="ModuleManager",this._isReady=!1,this._reason=fi.USER_NOT_LOGGED_IN,this._startLoginTs=0,this._moduleMap=new Map,this._innerEmitter=null,this._outerEmitter=null,this._checkCount=0,this._checkTimer=-1,this._moduleMap.set(qa,new ts(this,t)),this._moduleMap.set(un,new ec(this)),this._moduleMap.set(nn,new ll(this)),this._moduleMap.set(Qa,new Qs(this)),this._moduleMap.set(en,new rl(this)),this._moduleMap.set(an,new il(this)),this._moduleMap.set(Za,new Hs(this)),this._moduleMap.set(Ja,new Zs(this)),this._moduleMap.set(Va,new as(this)),this._moduleMap.set(Aa,new xs(this)),this._moduleMap.set(La,new Ns(this)),this._moduleMap.set(ln,new ws(this)),this._moduleMap.set(Ra,new es(this)),this._moduleMap.set(Oa,new tr(this)),this._moduleMap.set(Fa,new xr(this)),this._moduleMap.set(Ba,new qr(this)),this._moduleMap.set(Ua,new Hr(this)),this._moduleMap.set(Ga,new Yr(this)),this._moduleMap.set(za,new os(this)),this._moduleMap.set(cn,new ml(this)),this._moduleMap.set(Ha,new ss(this)),this._moduleMap.set($a,new ds(this)),this._moduleMap.set(ja,new hs(this)),this._moduleMap.set(Ka,new gs(this)),this._moduleMap.set(Ya,new Cs(this)),this._moduleMap.set(Wa,new Ms(this)),this._moduleMap.set(Xa,new Xs(this)),this._moduleMap.set(tn,new el(this)),this._moduleMap.set(on,new cl(this)),this._moduleMap.set(rn,new ul(this)),this._moduleMap.set(sn,new dl(this)),this._eventThrottleMap=new Map;var o=t.instanceID,i=t.oversea,r=t.SDKAppID,s="instanceID:".concat(o," SDKAppID:").concat(r," host:").concat(Rt()," oversea:").concat(i," inBrowser:").concat(le," inMiniApp:").concat(se)+" canIUseInflate:".concat(this.canIUseInflate())+" workerAvailable:".concat(De," UserAgent:").concat(ue);Vi.bindEventStatModule(this._moduleMap.get(Ha)),a.setMessage("".concat(s," ").concat(function(){var e="";if(se)try{var t=ce.getSystemInfoSync(),a=t.model,n=t.version,o=t.system,i=t.platform,r=t.SDKVersion;e="model:".concat(a," version:").concat(n," system:").concat(o," platform:").concat(i," SDKVersion:").concat(r)}catch(s){e=""}return e}())).end(),He.i("SDK ".concat(s)),Ji.prototype._getErrorMessage=this.getErrorMessage.bind(this),this._readyList=void 0,this._ssoLogForReady=null,this._initReadyList()}return r(e,[{key:"_startTimer",value:function(){var e=this._moduleMap.get(en),t=e.isWorkerEnabled();He.l("".concat(this._n,".startTimer isWorkerEnabled:").concat(t," seed:").concat(this._checkTimer)),t?e.startWorkerTimer():this._startMainThreadTimer()}},{key:"_startMainThreadTimer",value:function(){this._checkTimer<0&&(this._checkTimer=setInterval(this.onCheckTimer.bind(this),1e3)),He.l("".concat(this._n,"._startMainThreadTimer seed:").concat(this._checkTimer))}},{key:"stopTimer",value:function(){var e=this._moduleMap.get(en),t=e.isWorkerEnabled();He.l("".concat(this._n,".stopTimer isWorkerEnabled:").concat(t," seed:").concat(this._checkTimer)),t?e.stopWorkerTimer():this._stopMainThreadTimer()}},{key:"_stopMainThreadTimer",value:function(){He.l("".concat(this._n,"._stopMainThreadTimer")),this._checkTimer>0&&(clearInterval(this._checkTimer),this._checkTimer=-1,this._checkCount=0)}},{key:"_stopMainThreadSocket",value:function(){He.l("".concat(this._n,"._stopMainThreadSocket"));var e=this._moduleMap.get(Za);e.setIsWorkerEnabled(!0),e.reConnect()}},{key:"_startMainThreadSocket",value:function(){He.l("".concat(this._n,"._startMainThreadSocket"));var e=this._moduleMap.get(Za);e.setIsWorkerEnabled(!1),e.reConnect()}},{key:"onWorkerTimerEnabled",value:function(){He.l("".concat(this._n,".onWorkerTimerEnabled, disable main thread timer and socket")),this._stopMainThreadTimer(),this._stopMainThreadSocket()}},{key:"onWorkerTimerDisabled",value:function(){He.l("".concat(this._n,".onWorkerTimerDisabled, enable main thread timer and socket")),this._startMainThreadTimer(),this._startMainThreadSocket()}},{key:"onCheckTimer",value:function(){this._checkCount+=1;var e,t=M(this._moduleMap);try{for(t.s();!(e=t.n()).done;){var a=_(e.value,2)[1];a.onCheckTimer&&a.onCheckTimer(this._checkCount)}}catch(n){t.e(n)}finally{t.f()}}},{key:"_initReadyList",value:function(){var e=this;this._readyList=[this._moduleMap.get(Va),this._moduleMap.get(Fa)],this._readyList.forEach((function(t){t.ready((function(){return e._onModuleReady()}))}))}},{key:"_onModuleReady",value:function(){var e=!0;if(this._readyList.forEach((function(t){t.isReady()||(e=!1)})),e&&!this._isReady){this._isReady=!0,this._outerEmitter.emit(S.SDK_READY);var t=Date.now()-this._startLoginTs;He.w("SDK is ready. cost ".concat(t," ms")),this._startLoginTs=Date.now();var a=this._moduleMap.get($a).getNetworkType(),n=this._ssoLogForReady.getStartTs()+Be;this._ssoLogForReady.setNetworkType(a).setMessage(t).start(n).end()}}},{key:"login",value:function(){0===this._startLoginTs&&(Ue(),this._startLoginTs=Date.now(),this._startTimer(),this._moduleMap.get($a).start(),this._ssoLogForReady=new Vi("sdkReady"),this._reason=fi.LOGGING_IN)}},{key:"onLoginFailed",value:function(){this._startLoginTs=0}},{key:"getOuterEmitterInstance",value:function(){return null===this._outerEmitter&&(this._outerEmitter=new ps,Xi(this._outerEmitter),this._outerEmitter._emit=this._outerEmitter.emit,this._outerEmitter.emit=function(e,t){var a=this;if(e===S.CONVERSATION_LIST_UPDATED||e===S.FRIEND_LIST_UPDATED||e===S.GROUP_LIST_UPDATED||e===S.TOTAL_UNREAD_MESSAGE_COUNT_UPDATED)if(this._eventThrottleMap.has(e)){var n=Date.now(),o=this._eventThrottleMap.get(e);n-o.last<=1e3?(o.timeoutID&&clearTimeout(o.timeoutID),o.timeoutID=setTimeout((function(){o.last=Date.now(),a._outerEmitter._emit.apply(a._outerEmitter,[e,{name:e,data:a._getEventData(e)}])}),1e3)):(o.last=n,this._outerEmitter._emit.apply(this._outerEmitter,[e,{name:e,data:this._getEventData(e)}]))}else this._eventThrottleMap.set(e,{last:Date.now(),timeoutID:-1}),this._outerEmitter._emit.apply(this._outerEmitter,[e,{name:e,data:this._getEventData(e)}]);else this._outerEmitter._emit.apply(this._outerEmitter,[e,{name:e,data:arguments[1]}])}.bind(this)),this._outerEmitter}},{key:"_getEventData",value:function(e){return e===S.CONVERSATION_LIST_UPDATED?this._moduleMap.get(Fa).getLocalConversationList():e===S.FRIEND_LIST_UPDATED?this._moduleMap.get(Pa).getLocalFriendList(!1):e===S.GROUP_LIST_UPDATED?this._moduleMap.get(Ba).getLocalGroupList():e===S.TOTAL_UNREAD_MESSAGE_COUNT_UPDATED?this._moduleMap.get(Fa).getTotalUnreadMessageCount():void 0}},{key:"getInnerEmitterInstance",value:function(){return null===this._innerEmitter&&(this._innerEmitter=new ps,this._innerEmitter._emit=this._innerEmitter.emit,this._innerEmitter.emit=function(e,t){var a;a=st(arguments[1])&&arguments[1].data?[e,{name:arguments[0],data:arguments[1].data}]:[e,{name:arguments[0],data:arguments[1]}],this._innerEmitter._emit.apply(this._innerEmitter,a)}.bind(this)),this._innerEmitter}},{key:"hasModule",value:function(e){return this._moduleMap.has(e)}},{key:"getModule",value:function(e){return this._moduleMap.get(e)}},{key:"canIUseInflate",value:function(){return!!this._moduleMap.get(un)}},{key:"isReady",value:function(){return this._isReady}},{key:"isIntl",value:function(){return this.getModule(qa).isIntl()}},{key:"getNotReadyReason",value:function(){return this._reason}},{key:"setNotReadyReason",value:function(e){this._reason=e}},{key:"getErrorMessage",value:function(e,t,a){return this._moduleMap.get(cn).get({key:e,replacement1:t,replacement2:a,isIntl:this.isIntl()})}},{key:"outputWarning",value:function(e,t,a){var n=this.getErrorMessage(e,t,a);n&&He.w(n)}},{key:"onError",value:function(e){var t="code:".concat(e.code," message:").concat(e.message);He.w("Oops! ".concat(t)),new Vi("error").setMessage(t).setNetworkType(this.getModule($a).getNetworkType()).setLevel("error").end(),this.getOuterEmitterInstance().emit(S.ERROR,e)}},{key:"restartTimer",value:function(){He.l("".concat(this._n,".restartTimer")),this.stopTimer(),this._startTimer(),this.getModule(Ba).restartPolling()}},{key:"getTimerID",value:function(){var e=this._moduleMap.get(en);return e.isWorkerEnabled()?e.getTimerID():this._checkTimer}},{key:"getPollingTimerID",value:function(e){return this._moduleMap.get(Ba).getPollingTimerID(e)}},{key:"reset",value:function(){He.l("".concat(this._n,".reset")),Ue();var e,t=M(this._moduleMap);try{for(t.s();!(e=t.n()).done;){var a=_(e.value,2)[1];a.reset&&a.reset()}}catch(r){t.e(r)}finally{t.f()}this._startLoginTs=0,this._initReadyList(),this._isReady=!1,this.stopTimer(),this._outerEmitter.emit(S.SDK_NOT_READY);var n,o=M(this._eventThrottleMap);try{for(o.s();!(n=o.n()).done;){var i=_(n.value,2)[1];i.timeoutID&&clearTimeout(i.timeoutID)}}catch(r){o.e(r)}finally{o.f()}this._eventThrottleMap.clear()}}]),e}(),ac=function(){function e(t){n(this,e),this._funcMap=new Map,this._m=t}return r(e,[{key:"defense",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if("string"!=typeof e)return null;if(0===e.length)return null;if("function"!=typeof t)return null;if(this._funcMap.has(e)&&this._funcMap.get(e).has(t))return this._funcMap.get(e).get(t);this._funcMap.has(e)||this._funcMap.set(e,new Map);var n=null;return this._funcMap.get(e).has(t)?n=this._funcMap.get(e).get(t):(n=this._pack(e,t,a),this._funcMap.get(e).set(t,n)),n}},{key:"defenseOnce",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return"function"!=typeof t?null:this._pack(e,t,a)}},{key:"find",value:function(e,t){return"string"!=typeof e||0===e.length||"function"!=typeof t?null:this._funcMap.has(e)&&this._funcMap.get(e).has(t)?this._funcMap.get(e).get(t):(this._m.outputWarning("ListenerFnNotFound",e),null)}},{key:"delete",value:function(e,t){return"function"==typeof t&&!!this._funcMap.has(e)&&!!this._funcMap.get(e).has(t)&&(this._funcMap.get(e).delete(t),0===this._funcMap.get(e).size&&this._funcMap.delete(e),!0)}},{key:"_pack",value:function(e,t,a){var n=this;return function(){try{t.apply(a,Array.from(arguments))}catch(s){var o=Object.values(S).indexOf(e),i="CallbackError";if(-1!==o){var r=Object.keys(S)[o];n._m.outputWarning(i,r,s)}new Vi(i).setMessage("eventName:".concat(e)).setMoreMessage(s.message).end()}}}}]),e}(),nc=function(){function e(t){n(this,e);var a={SDKAppID:t.SDKAppID,unlimitedAVChatRoom:t.unlimitedAVChatRoom||!1,scene:t.scene||"",oversea:t.oversea||!1,instanceID:Lt(),devMode:t.devMode||!1,proxyServer:t.proxyServer||void 0,fileUploadProxy:t.fileUploadProxy||void 0,fileDownloadProxy:t.fileDownloadProxy||t.fileUploadProxy||void 0};this._m=new tc(a),this._safetyCallbackFactory=new ac(this._m)}return r(e,[{key:"onError",value:function(e){this._m.onError(e)}},{key:"login",value:function(e){return this._m.login(),this._getModule(Va).login(e)}},{key:"logout",value:function(){var e=this;return this._getModule(Va).logout().then((function(t){return e._m.reset(),t}))}},{key:"isReady",value:function(){return this._m.isReady()}},{key:"isIntl",value:function(){return this._m.isIntl()}},{key:"getNotReadyReason",value:function(){return this._m.getNotReadyReason()}},{key:"getErrorMessage",value:function(e,t,a){return this._m.getErrorMessage(e,t,a)}},{key:"_getModule",value:function(e){return this._m.getModule(e)}},{key:"destroy",value:function(){var e=this;return this.logout().finally((function(){e._m.stopTimer(),e._getModule(en).terminate(),e._getModule(Za).dealloc();var t=e._m.getOuterEmitterInstance(),a=e._getModule(qa);t.emit(S.SDK_DESTROY,{SDKAppID:a.getSDKAppID()})}))}},{key:"on",value:function(e,t,a){He.d("on","eventName:".concat(e)),this._m.getOuterEmitterInstance().on(e,this._safetyCallbackFactory.defense(e,t,a),a)}},{key:"once",value:function(e,t,a){He.d("once","eventName:".concat(e)),this._m.getOuterEmitterInstance().once(e,this._safetyCallbackFactory.defenseOnce(e,t,a),a||this)}},{key:"off",value:function(e,t,a,n){He.d("off","eventName:".concat(e));var o=this._safetyCallbackFactory.find(e,t);null!==o&&(this._m.getOuterEmitterInstance().off(e,o,a,n),this._safetyCallbackFactory.delete(e,t))}},{key:"registerPlugin",value:function(e){ct(e["tim-offline-push-plugin"])?this._getModule(Ya).registerPlugin(e):this._getModule(on).registerPlugin(e)}},{key:"setLogLevel",value:function(e){if(e<=0){var t=this.getErrorMessage("TIM_ASCII_ART");t&&o("log","at node_modules/tim-js-sdk/tim-js.js:1",t);var a=this.getErrorMessage("API_REFER");a&&(Kt()?o("log","at node_modules/tim-js-sdk/tim-js.js:1","%c ".concat("IM SDK API ->"," %c"),"background:#ff9d00; padding:1px; border-radius:3px; color: #fff","background:transparent",a):o("log","at node_modules/tim-js-sdk/tim-js.js:1","IM SDK API ->",a));var n=this.getErrorMessage("DOCS_GUIDE");n&&o("log","at node_modules/tim-js-sdk/tim-js.js:1",n)}He.setLevel(e)}},{key:"createTextMessage",value:function(e){return this._getModule(Aa).createTextMessage(e)}},{key:"createTextAtMessage",value:function(e){return this._getModule(Aa).createTextMessage(e)}},{key:"createImageMessage",value:function(e){return this._getModule(Aa).createImageMessage(e)}},{key:"createAudioMessage",value:function(e){return this._getModule(Aa).createAudioMessage(e)}},{key:"createVideoMessage",value:function(e){return this._getModule(Aa).createVideoMessage(e)}},{key:"createCustomMessage",value:function(e){return this._getModule(Aa).createCustomMessage(e)}},{key:"createFaceMessage",value:function(e){return this._getModule(Aa).createFaceMessage(e)}},{key:"createFileMessage",value:function(e){return this._getModule(Aa).createFileMessage(e)}},{key:"createLocationMessage",value:function(e){return this._getModule(Aa).createLocationMessage(e)}},{key:"createMergerMessage",value:function(e){return this._getModule(Aa).createMergerMessage(e)}},{key:"downloadMergerMessage",value:function(e){return e.type!==I.MSG_MERGER?er({code:fi.MESSAGE_MERGER_TYPE_INVALID}):Zt(e.payload.downloadKey)?er({code:fi.MESSAGE_MERGER_KEY_INVALID}):this._getModule(Aa).downloadMergerMessage(e).catch((function(e){return er({code:fi.MESSAGE_MERGER_DOWNLOAD_FAIL})}))}},{key:"createForwardMessage",value:function(e){return this._getModule(Aa).createForwardMessage(e)}},{key:"sendMessage",value:function(e,t){return e instanceof Yi?this._getModule(Aa).sendMessageInstance(e,t):er({code:fi.MESSAGE_SEND_NEED_MESSAGE_INSTANCE})}},{key:"callExperimentalAPI",value:function(e,t){return"sendComboMessage"===e?this._getModule(ln).sendMessage(t):"handleGroupInvitation"===e?this._getModule(Ba).handleGroupInvitation(t):"isCommercialAbilityEnabled"===e?this._getModule(nn).isFeatureEnabled(t):"isIntl"===e?this.isIntl():"sendTRTCCustomData"===e?this._getModule(sn).sendTRTCCustomData(t):"getTimerID"===e?this._m.getTimerID():"getPollingTimerID"===e?this._m.getPollingTimerID(t):er({code:fi.INVALID_OPERATION})}},{key:"revokeMessage",value:function(e){return this._getModule(Aa).revokeMessage(e)}},{key:"resendMessage",value:function(e){return this._getModule(Aa).resendMessage(e)}},{key:"deleteMessage",value:function(e){return this._getModule(Aa).deleteMessage(e)}},{key:"translateText",value:function(e){return this._getModule(Aa).translateText(e)}},{key:"setMessageExtensions",value:function(e,t){return this._getModule(La).setMessageExtensions(e,t)}},{key:"getMessageExtensions",value:function(e){return this._getModule(La).getMessageExtensions(e)}},{key:"deleteMessageExtensions",value:function(e,t){return this._getModule(La).deleteMessageExtensions(e,t)}},{key:"modifyMessage",value:function(e){return this._getModule(Aa).modifyRemoteMessage(e)}},{key:"getMessageList",value:function(e){return this._getModule(Fa).getMessageList(e)}},{key:"getMessageListHopping",value:function(e){return this._getModule(Fa).getMessageListHopping(e)}},{key:"sendMessageReadReceipt",value:function(e){return this._getModule(Fa).sendReadReceipt(e)}},{key:"getMessageReadReceiptList",value:function(e){return this._getModule(Fa).getReadReceiptList(e)}},{key:"getGroupMessageReadMemberList",value:function(e){return this._getModule(Ba).getReadReceiptDetail(e)}},{key:"findMessage",value:function(e){return this._getModule(Fa).findMessage(e)}},{key:"setMessageRead",value:function(e){return this._getModule(Fa).setMessageRead(e)}},{key:"getConversationList",value:function(e){return this._getModule(Fa).getConversationList(e)}},{key:"getConversationProfile",value:function(e){return this._getModule(Fa).getConversationProfile(e)}},{key:"deleteConversation",value:function(e){return this._getModule(Fa).deleteConversation(e)}},{key:"clearHistoryMessage",value:function(e){return this._getModule(Fa).clearHistoryMessage(e)}},{key:"pinConversation",value:function(e){return this._getModule(Fa).pinConversation(e)}},{key:"setAllMessageRead",value:function(e){return this._getModule(Fa).setAllMessageRead(e)}},{key:"setMessageRemindType",value:function(e){return this._getModule(Fa).setMessageRemindType(e)}},{key:"getTotalUnreadMessageCount",value:function(){return this._getModule(Fa).getTotalUnreadMessageCount()}},{key:"setConversationCustomData",value:function(e){return this._getModule(Fa).setConversationCustomData(e)}},{key:"markConversation",value:function(e){return this._getModule(Fa).markConversation(e)}},{key:"getConversationGroupList",value:function(){return this._getModule(Fa).getConversationGroupList()}},{key:"createConversationGroup",value:function(e){return this._getModule(Fa).createConversationGroup(e)}},{key:"deleteConversationGroup",value:function(e){return this._getModule(Fa).deleteConversationGroup(e)}},{key:"renameConversationGroup",value:function(e){return this._getModule(Fa).renameConversationGroup(e)}},{key:"addConversationsToGroup",value:function(e){return this._getModule(Fa).addConversationsToGroup(e)}},{key:"deleteConversationsFromGroup",value:function(e){return this._getModule(Fa).deleteConversationsFromGroup(e)}},{key:"getMyProfile",value:function(){return this._getModule(Ra).getMyProfile()}},{key:"getUserProfile",value:function(e){return this._getModule(Ra).getUserProfile(e)}},{key:"updateMyProfile",value:function(e){return this._getModule(Ra).updateMyProfile(e)}},{key:"getBlacklist",value:function(){return this._getModule(Ra).getLocalBlacklist()}},{key:"addToBlacklist",value:function(e){return this._getModule(Ra).addBlacklist(e)}},{key:"removeFromBlacklist",value:function(e){return this._getModule(Ra).deleteBlacklist(e)}},{key:"setSelfStatus",value:function(e){return this._getModule(Ra).setSelfStatus(e)}},{key:"getUserStatus",value:function(e){return this._getModule(Ra).getUserStatus(e)}},{key:"subscribeUserStatus",value:function(e){return this._getModule(Ra).subscribeUserStatus(e)}},{key:"unsubscribeUserStatus",value:function(e){return this._getModule(Ra).unsubscribeUserStatus(e)}},{key:"getFriendList",value:function(){var e=this._getModule(Pa);return e?e.getLocalFriendList():er({code:fi.CANNOT_FIND_MODULE})}},{key:"addFriend",value:function(e){var t=this._getModule(Pa);return t?t.addFriend(e):er({code:fi.CANNOT_FIND_MODULE})}},{key:"deleteFriend",value:function(e){var t=this._getModule(Pa);return t?t.deleteFriend(e):er({code:fi.CANNOT_FIND_MODULE})}},{key:"checkFriend",value:function(e){var t=this._getModule(Pa);return t?t.checkFriend(e):er({code:fi.CANNOT_FIND_MODULE})}},{key:"getFriendProfile",value:function(e){var t=this._getModule(Pa);return t?t.getFriendProfile(e):er({code:fi.CANNOT_FIND_MODULE})}},{key:"updateFriend",value:function(e){var t=this._getModule(Pa);return t?t.updateFriend(e):er({code:fi.CANNOT_FIND_MODULE})}},{key:"getFriendApplicationList",value:function(){var e=this._getModule(Pa);return e?e.getLocalFriendApplicationList():er({code:fi.CANNOT_FIND_MODULE})}},{key:"acceptFriendApplication",value:function(e){var t=this._getModule(Pa);return t?t.acceptFriendApplication(e):er({code:fi.CANNOT_FIND_MODULE})}},{key:"refuseFriendApplication",value:function(e){var t=this._getModule(Pa);return t?t.refuseFriendApplication(e):er({code:fi.CANNOT_FIND_MODULE})}},{key:"deleteFriendApplication",value:function(e){var t=this._getModule(Pa);return t?t.deleteFriendApplication(e):er({code:fi.CANNOT_FIND_MODULE})}},{key:"setFriendApplicationRead",value:function(){var e=this._getModule(Pa);return e?e.setFriendApplicationRead():er({code:fi.CANNOT_FIND_MODULE})}},{key:"getFriendGroupList",value:function(){var e=this._getModule(Pa);return e?e.getLocalFriendGroupList():er({code:fi.CANNOT_FIND_MODULE})}},{key:"createFriendGroup",value:function(e){var t=this._getModule(Pa);return t?t.createFriendGroup(e):er({code:fi.CANNOT_FIND_MODULE})}},{key:"deleteFriendGroup",value:function(e){var t=this._getModule(Pa);return t?t.deleteFriendGroup(e):er({code:fi.CANNOT_FIND_MODULE})}},{key:"addToFriendGroup",value:function(e){var t=this._getModule(Pa);return t?t.addToFriendGroup(e):er({code:fi.CANNOT_FIND_MODULE})}},{key:"removeFromFriendGroup",value:function(e){var t=this._getModule(Pa);return t?t.removeFromFriendGroup(e):er({code:fi.CANNOT_FIND_MODULE})}},{key:"renameFriendGroup",value:function(e){var t=this._getModule(Pa);return t?t.renameFriendGroup(e):er({code:fi.CANNOT_FIND_MODULE})}},{key:"getGroupList",value:function(e){return this._getModule(Ba).getGroupList(e)}},{key:"getGroupProfile",value:function(e){return this._getModule(Ba).getGroupProfile(e)}},{key:"createGroup",value:function(e){return this._getModule(Ba).createGroup(e)}},{key:"dismissGroup",value:function(e){return this._getModule(Ba).dismissGroup(e)}},{key:"updateGroupProfile",value:function(e){return this._getModule(Ba).updateGroupProfile(e)}},{key:"joinGroup",value:function(e){return this._getModule(Ba).joinGroup(e)}},{key:"quitGroup",value:function(e){return this._getModule(Ba).quitGroup(e)}},{key:"searchGroupByID",value:function(e){return this._getModule(Ba).searchGroupByID(e)}},{key:"getGroupOnlineMemberCount",value:function(e){return this._getModule(Ba).getGroupOnlineMemberCount(e)}},{key:"changeGroupOwner",value:function(e){return this._getModule(Ba).changeGroupOwner(e)}},{key:"getGroupApplicationList",value:function(){return this._getModule(Ba).getGroupApplicationList()}},{key:"handleGroupApplication",value:function(e){return this._getModule(Ba).handleGroupApplication(e)}},{key:"initGroupAttributes",value:function(e){return this._getModule(Ba).initGroupAttributes(e)}},{key:"setGroupAttributes",value:function(e){return this._getModule(Ba).setGroupAttributes(e)}},{key:"deleteGroupAttributes",value:function(e){return this._getModule(Ba).deleteGroupAttributes(e)}},{key:"getGroupAttributes",value:function(e){return this._getModule(Ba).getGroupAttributes(e)}},{key:"setGroupCounters",value:function(e){return this._getModule(Ba).setGroupCounters(e)}},{key:"increaseGroupCounter",value:function(e){return this._getModule(Ba).increaseGroupCounter(e)}},{key:"decreaseGroupCounter",value:function(e){return this._getModule(Ba).decreaseGroupCounter(e)}},{key:"getGroupCounters",value:function(e){return this._getModule(Ba).getGroupCounters(e)}},{key:"getGroupMemberList",value:function(e){return this._getModule(Ua).getGroupMemberList(e)}},{key:"getGroupMemberProfile",value:function(e){return this._getModule(Ua).getGroupMemberProfile(e)}},{key:"addGroupMember",value:function(e){return this._getModule(Ua).addGroupMember(e)}},{key:"deleteGroupMember",value:function(e){return this._getModule(Ua).deleteGroupMember(e)}},{key:"setGroupMemberMuteTime",value:function(e){return this._getModule(Ua).setGroupMemberMuteTime(e)}},{key:"setGroupMemberRole",value:function(e){return this._getModule(Ua).setGroupMemberRole(e)}},{key:"setGroupMemberNameCard",value:function(e){return this._getModule(Ua).setGroupMemberNameCard(e)}},{key:"setGroupMemberCustomField",value:function(e){return this._getModule(Ua).setGroupMemberCustomField(e)}},{key:"markGroupMemberList",value:function(e){return this._getModule(Ua).markGroupMemberList(e)}},{key:"getJoinedCommunityList",value:function(){return this._getModule(Ga).getJoinedCommunityList()}},{key:"createTopicInCommunity",value:function(e){return this._getModule(Ga).createTopicInCommunity(e)}},{key:"deleteTopicFromCommunity",value:function(e){return this._getModule(Ga).deleteTopicFromCommunity(e)}},{key:"updateTopicProfile",value:function(e){return this._getModule(Ga).updateTopicProfile(e)}},{key:"getTopicList",value:function(e){return this._getModule(Ga).getTopicList(e)}}]),e}(),oc={login:1,logout:1,destroy:1,on:1,off:1,ready:1,setLogLevel:1,joinGroup:1,quitGroup:1,registerPlugin:1,getGroupOnlineMemberCount:1};function ic(e,t){if(e.isReady()||1===oc[t])return!0;var a=e.getNotReadyReason(),n={code:a,message:"".concat(e.getErrorMessage(a)," | ").concat(t," | ").concat(e.getErrorMessage(fi.SDK_IS_NOT_READY))};return e.onError(n),n}var rc={},sc={create:function(e){var a=0,n=e.SDKAppID;if(ot(n))a=n;else if(a=parseInt(n),isNaN(n))return He.e("".concat("TIM.create"," failed. Failed to parse the SDKAppID, please check the arguments")),null;if(a&&rc[a])return rc[a];He.l("".concat("TIM.create"));var o=new nc(t(t({},e),{},{SDKAppID:a}));o.on(S.SDK_DESTROY,(function(e){rc[e.data.SDKAppID]=null,delete rc[e.data.SDKAppID]}));var i,r,s=(i=o,r=Object.create(null),Object.keys(ba).forEach((function(e){if(i[e]){var t=new T;r[e]=function(){var a=Array.from(arguments);return t.use((function(t,a){var n=ic(i,e);return!0===n?a():er(n)})).use((function(t,a){if(!0===Xt(t,Da[e],e))return a()})).use((function(t,a){return i[e].apply(i,t)})),t.run(a)}}})),r);return rc[a]=s,Da.hookGetAPITips(o.getErrorMessage.bind(o)),He.l("".concat("TIM.create"," ok")),s}};return sc.TYPES=I,sc.EVENT=S,sc.VERSION="2.27.6",He.l("TIM.VERSION:".concat(sc.VERSION)),sc}()}(er);const tr=v(er.exports);var ar={exports:{}};!function(e,t){e.exports=function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,s(n.key),n)}}function a(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function n(e,t,a){return(t=s(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=void 0!==h?h:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},u="undefined"!=typeof wx&&"function"==typeof wx.getSystemInfoSync&&("mac"===wx.getSystemInfoSync().platform||"windows"===wx.getSystemInfoSync().platform),d="undefined"!=typeof wx&&"function"==typeof wx.getSystemInfoSync&&Boolean(wx.getSystemInfoSync().fontSizeSetting)||u,m="undefined"!=typeof qq&&"function"==typeof qq.getSystemInfoSync&&Boolean(qq.getSystemInfoSync().fontSizeSetting),p="undefined"!=typeof tt&&"function"==typeof tt.getSystemInfoSync&&Boolean(tt.getSystemInfoSync().fontSizeSetting),v="undefined"!=typeof swan&&"function"==typeof swan.getSystemInfoSync&&Boolean(swan.getSystemInfoSync().fontSizeSetting),g="undefined"!=typeof my&&"function"==typeof my.getSystemInfoSync&&Boolean(my.getSystemInfoSync().fontSizeSetting),f="undefined"!=typeof uni&&"undefined"==typeof window&&!0,y=f&&"ios"===uni.getDeviceInfo().platform.toLocaleLowerCase(),_=(f&&uni.getDeviceInfo().platform.toLocaleLowerCase(),d||m||p||v||g||f),k=void 0!==c&&(void 0!==c.nativeModuleProxy||void 0!==c.ReactNative),E=m?qq:p?tt:v?swan:g?my:d?wx:f?uni:{},x=function(e){if("object"!==l(e)||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var a=t;null!==Object.getPrototypeOf(a);)a=Object.getPrototypeOf(a);return t===a};function N(e){if(null==e)return!0;if("boolean"==typeof e)return!1;if("number"==typeof e)return 0===e;if("string"==typeof e)return 0===e.length;if("function"==typeof e)return 0===e.length;if(Array.isArray(e))return 0===e.length;if(e instanceof Error)return""===e.message;if(x(e)){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}return!1}var w=a((function t(){e(this,t),this._n="WebRequest"}),[{key:"request",value:function(e,t){var a=this,n="".concat(this._n,".request"),i=e.downloadUrl||"",s=(e.method||"PUT").toUpperCase(),l=e.url;if(o("log","at node_modules/tim-upload-plugin/index.js:1","%c tim-upload-plugin %c","background:#0abf5b; padding:1px; border-radius:3px; color: #fff","background:transparent","".concat(n," URL:").concat(l)),e.qs){var c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"&",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"=";return N(e)?"":x(e)?Object.keys(e).map((function(n){var o=encodeURIComponent(n)+a;return Array.isArray(e[n])?e[n].map((function(e){return o+encodeURIComponent(e)})).join(t):o+encodeURIComponent(e[n])})).filter(Boolean).join(t):void 0}(e.qs);c&&(l+="".concat(-1===l.indexOf("?")?"?":"&").concat(c))}var u=new XMLHttpRequest;u.open(s,l,!0),u.responseType=e.dataType||"text";var d=e.headers||{};if(e.uploadByIP&&(d=r(r({},d),{},{host:e.uploadIP})),!N(d))for(var m in d)d.hasOwnProperty(m)&&"content-length"!==m.toLowerCase()&&"user-agent"!==m.toLowerCase()&&"origin"!==m.toLowerCase()&&"host"!==m.toLowerCase()&&u.setRequestHeader(m,d[m]);return u.onload=function(){if(200===u.status)t(null,a._xhrRes(u,a._xhrBody(u,i,e.uploadByIP&&e.uploadIP),d));else{if(e.uploadIP&&-1===e.url.indexOf(e.uploadIP))return e.url=(o=e.url,r=e.uploadIP,o.replace(/^http(s)?:\/\/(.*?)\//,"https://".concat(r,"/"))),e.uploadByIP=!0,a.request(e,t);var n={code:u.status,message:JSON.stringify(u.responseText)};t(n,a._xhrRes(u,a._xhrBody(u,i,e.uploadByIP&&e.uploadIP),d))}var o,r},u.onerror=function(n){var o=a._xhrBody(u,i,e.uploadByIP&&e.uploadIP),r={code:u.status,message:JSON.stringify(u.responseText)};o||u.statusText||0!==u.status||(n.message="CORS blocked or network error"),t(r,a._xhrRes(u,o)),r=null},e.onProgress&&u.upload&&(u.upload.onprogress=function(t){var a=t.total,n=t.loaded,o=Math.floor(100*n/a);e.onProgress({total:a,loaded:n,percent:(o>=100?100:o)/100})}),u.send(e.resources),u}},{key:"_xhrRes",value:function(e,t){var a={};return e.getAllResponseHeaders().trim().split("\n").forEach((function(e){if(e){var t=e.indexOf(":"),n=e.substr(0,t).trim().toLowerCase(),o=e.substr(t+1).trim();a[n]=o}})),{statusCode:e.status,statusMessage:e.statusText,headers:a,data:t}}},{key:"_xhrBody",value:function(e,t,a){return 200===e.status&&t?{location:t,uploadIP:a}:{response:e.responseText,uploadIP:a}}}]),C=["unknown","image","video","audio","log"],M=["name"],S=a((function t(){e(this,t)}),[{key:"request",value:function(e,t){var a=this,n=e.resources,o=void 0===n?"":n,i=e.headers,s=void 0===i?{}:i,l=e.url,c=e.downloadUrl,u=void 0===c?"":c,d=l,m=null,p=u.match(/^(https?:\/\/[^/]+\/)([^/]*\/?)(.*)$/),h=decodeURIComponent(p[3]),v=h.indexOf("?")>-1?h.split("?")[0]:h,f={key:e.fileKey?e.fileKey:v,success_action_status:200,"Content-Type":""},_={};if(y){var k=l.split("?sign=");if(k.length>1){var x=k[1];d="".concat(k[0],"?sign=").concat(encodeURIComponent("".concat(x))),_.sign=decodeURIComponent(x),_.signature=decodeURIComponent(x)}}var N={url:d,header:s,name:"file",filePath:o,formData:r(r({},f),_),timeout:e.timeout||3e5};if(g){var w=N;w.name,N=r(r({},function(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;a[n]=e[n]}return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.includes(a)||{}.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}(w,M)),{},{fileName:"file",fileType:C[e.fileType]})}return(m=E.uploadFile(r(r({},N),{},{success:function(e){a._handleResponse({response:e,downloadUrl:u,callback:t})},fail:function(e){a._handleResponse({response:e,downloadUrl:u,callback:t})}}))).onProgressUpdate&&m.onProgressUpdate((function(t){e.onProgress&&e.onProgress({total:t.totalBytesExpectedToSend,loaded:t.totalBytesSent,percent:Math.floor(t.progress)/100})})),m}},{key:"_handleResponse",value:function(e){var t=e.downloadUrl,a=e.response,n=e.callback,o=a.header,i={};if(o)for(var s in o)o.hasOwnProperty(s)&&(i[s.toLowerCase()]=o[s]);var l=+a.statusCode;200===l?n(null,{statusCode:l,headers:i,data:r(r({},a.data),{},{location:t})}):n({code:l,message:JSON.stringify(a.data)},{statusCode:l,headers:i,data:void 0})}}]),I=a((function t(){e(this,t)}),[{key:"request",value:function(e,t){var a=this,n=e.resources,o=void 0===n?"":n,i=e.fileKey,r=void 0===i?"":i,s=e.url,l=e.downloadUrl,c=void 0===l?"":l,u=new FormData;u.append("key",r),u.append("success_action_status",200),u.append("file",{uri:o,type:"application/octet-stream",name:"uploaded_file"}),fetch(s,{method:"POST",headers:{"Content-Type":"multipart/form-data"},body:u}).then((function(e){a._handleResponse({response:e,downloadUrl:c,callback:t})})).catch((function(e){a._handleResponse({response:e,downloadUrl:c,callback:t})}))}},{key:"_handleResponse",value:function(e){var t=e.downloadUrl,a=e.response,n=e.callback,o=a.headers,i=a.status,r=o&&o.map||{};200===i?n(null,{statusCode:200,headers:r,data:{location:t}}):n({code:i,message:JSON.stringify(a)},{statusCode:i,headers:r,data:void 0})}}]);return a((function t(){e(this,t),this.retry=1,this.tryCount=0,this.systemClockOffset=0,this.httpRequest=_?new S:k?new I:new w,o("log","at node_modules/tim-upload-plugin/index.js:1","TIMUploadPlugin.VERSION: ".concat("1.4.3"))}),[{key:"uploadFile",value:function(e,t){var a=this;return this.httpRequest.request(e,(function(n,o){n&&a.tryCount<a.retry&&a.allowRetry(n)?(a.tryCount++,a.uploadFile(e,t)):(a.tryCount=0,t(n,o))}))}},{key:"allowRetry",value:function(e){var t=!1,a=!1;if(e){var n=e.headers&&(e.headers.date||e.headers.Date)||e.error&&e.error.ServerTime;try{var o=e.error&&e.error.Code,i=e.error&&e.error.Message;("RequestTimeTooSkewed"===o||"AccessDenied"===o&&"Request has expired"===i)&&(a=!0)}catch(l){}if(a&&n){var r=Date.now(),s=Date.parse(n);Math.abs(r+this.systemClockOffset-s)>=3e4&&(this.systemClockOffset=s-r,t=!0)}else 5===Math.floor(e.statusCode/100)&&(t=!0)}return t}}],[{key:"getVersion",value:function(){return"1.4.3"}}])}()}(ar);const nr=v(ar.exports);let or=null;const ir=e.reactive({isLogin:!1,userId:"",sdkAppID:"",sdkReady:!1}),rr=(null==(t=tr.TYPES)?void 0:t.LOGIN_STATUS_LOGINED)||"logined",sr=(null==(a=tr.TYPES)?void 0:a.LOGIN_STATUS_UNLOGINED)||"unlogined";function lr(t){const a=e.ref(!1),n=e.ref(""),i=e.ref(null),r=()=>{if(or)return i.value=or,"ready"===or.sdkReadyState&&(ir.sdkReady=!0),or;if(!t)return o("error","at utils/useTIM.js:35","TIM 初始化失败：SDKAppID 不能为空"),null;try{return or=tr.create({SDKAppID:t,logLevel:1}),or.registerPlugin&&or.registerPlugin({"tim-upload-plugin":nr}),i.value=or,o("log","at utils/useTIM.js:47","TIM 实例初始化成功"),or}catch(e){return o("error","at utils/useTIM.js:50","TIM 实例创建失败：",e),i.value=null,null}},s=()=>new Promise((e=>{if("ready"===(null==or?void 0:or.sdkReadyState)||ir.sdkReady)return ir.sdkReady=!0,void e(!0);const t=()=>{ir.sdkReady=!0,or.off(tr.EVENT.SDK_READY,t),e(!0)};or.on(tr.EVENT.SDK_READY,t)})),l=()=>{if(or||r(),!or)return Promise.resolve(!1);if("function"==typeof or.checkLoginStatus)return new Promise((async e=>{try{const t=await or.checkLoginStatus();ir.isLogin=t===rr,e(ir.isLogin)}catch(t){e(!1)}}));{const e=or.loginStatus||sr;return ir.isLogin=e===rr,Promise.resolve(ir.isLogin)}};return r(),{tim:i,loading:a,errorMsg:n,isLogin:ir.isLogin,userId:ir.userId,sdkReady:ir.sdkReady,loginTIM:async e=>{const{userId:i,userSig:c}=e;if(!i||!c)return n.value="用户ID和UserSig不能为空",!1;a.value=!0,n.value="";try{if(!r())return a.value=!1,n.value="TIM 实例初始化失败",!1;const e=await l();if(e&&ir.userId===i)return await s(),a.value=!1,!0;e&&(await or.logout(),ir.isLogin=!1,ir.userId="",ir.sdkReady=!1);const o=await or.login({userID:i,userSig:c});return await s(),o.data&&!1===o.data.repeatLogin&&(ir.isLogin=!0,ir.userId=i,ir.sdkAppID=t),a.value=!1,!0}catch(u){a.value=!1;return[20009,10012].includes(u.code)?(ir.isLogin=!0,ir.userId=i,await s(),n.value="当前账号已登录",!0):(n.value=u.message||`登录失败：${u.code}`,o("error","at utils/useTIM.js:163","IM登录失败：",u),!1)}},logoutTIM:async()=>{if(or){a.value=!0;try{return await or.logout(),ir.isLogin=!1,ir.userId="",ir.sdkReady=!1,n.value="",a.value=!1,!0}catch(e){return a.value=!1,n.value=e.message||"登出失败",o("error","at utils/useTIM.js:183","IM登出失败：",e),!1}}},checkLoginStatus:l,waitSDKReady:s,onTIMEvent:(t,a)=>{or||r(),or&&"function"==typeof or.on?(or.on(t,a),e.onUnmounted((()=>{or&&"function"==typeof or.off&&or.off(t,a)}))):o("error","at utils/useTIM.js:192","TIM实例未初始化，无法注册事件监听",t)}}}const cr=(e,t={})=>A.post("/api/mall/category/list",e,t),ur=(e,t={})=>A.get("/api/mall/product/category",e,t),dr=(e,t={})=>A.get("/api/mall/product/recommended",e,t),mr=(e,t={})=>A.post("/api/mall/cart/batchDelete",e,t),pr=(e,t={})=>A.post("/api/mall/address/add",e,t),hr=(e,t={})=>A.post("/api/mall/address/update",e,t),vr={__name:"index",setup(t){e.useCssVars((e=>({"0658f9f4":c.value,fe9c6df8:l.value,"4bbef64b":u.value})));const a=e.ref([]),n=e.ref([]),r=ae(),l=e.ref(r.statusBarHeight+20+"rpx"),c=e.ref(r.statusBarHeight+56+"rpx"),u=e.ref(r.statusBarHeight+95+"rpx"),{loginTIM:d}=lr("1600116083");let m=e.ref(0);const p=e.ref([]);uni.$currentUser=uni.getStorageSync("currentUser");let h=e.ref();s((()=>{uni.$currentUser=uni.getStorageSync("currentUser"),uni.$currentUser.id?(h.value=uni.$currentUser,g()):uni.navigateTo({url:"./login"})}));const v=async e=>{try{const{data:t}=await((e,t={})=>A.post("/api/tencent/sig/im",e,t))({userId:e});if(await d({userId:e,userSig:t.userSig})&&(await waitSDKReady(),!tim.value))return void o("error","at pages/index/index.vue:454","TIM 实例仍未初始化")}catch(t){o("log","at pages/index/index.vue:459",t)}},g=async()=>{let e=await si();a.value=e.data},f=e.ref([]),y=e.ref(0),_=e.ref([]),k=async e=>{const{data:t}=await ur({categoryId:e});_.value=t.records},E=()=>{uni.navigateTo({url:"/pages/shopping-mall/mall-home"})},x=e.reactive({listParams:{current:1,size:10,params:{}},list:[],answerlist:[],listenerList:[],consultantList:[]});let N=e.ref([]);const w=e.ref([{icon:"/static/index/remark-icon1.png",title:"严选师资",desc:"5.2万认证咨询师"},{icon:"/static/index/remark-icon2.png",title:"专业咨询",desc:"累计时长7亿+分钟"},{icon:"/static/index/remark-icon3.png",title:"免费退改",desc:"承诺限时内可退改"},{icon:"/static/index/remark-icon4.png",title:"隐私保障",desc:"咨询过程全保密"}]),C=e.ref([{id:1,icon:"/static/index/sleep.png",title:"睡眠改善"},{id:2,icon:"/static/index/education.png",title:"亲子教育"},{id:3,icon:"/static/index/emotion.png",title:"情绪压力"},{id:4,icon:"/static/index/matching.png",title:"快速匹配"},{id:5,icon:"/static/index/marriage.png",title:"婚姻情感"}]),M=()=>{},S=e=>{m.value=e.detail.scrollTop},I=(e,t)=>{let a="listener"==e?"/pages/confide/detail":"/pages/consult/detail";uni.navigateTo({url:a+"?id="+t.id+"&userId="+t.userId})},T=()=>{uni.navigateTo({url:"/pages/forum/index/index"})},D=()=>{uni.navigateTo({url:"/pages/psychological-test/index/index"})},b=e.ref(1),V=e=>{b.value=e},L=async()=>{let e=await((e,t={})=>A.get("/api/psychology/exam/listHome",e,t))();o("log","at pages/index/index.vue:714",e),n.value=e.data},O=e.computed((()=>{const e=[];for(let t=0;t<n.value.length;t+=4)e.push(n.value.slice(t,t+4));return o("log","at pages/index/index.vue:723",e),e}));return e.onMounted((()=>{(async()=>{let e=await R();r.setUserInfo(e.data)})(),(async()=>{let e=await Ho(x.listParams);x.listenerList=e.data.records})(),(async()=>{let e=await Ki(x.listParams);x.list=e.data.records})(),L(),(async()=>{let e=await Yi(x.listParams);x.answerlist=e.data.records})(),(async()=>{let e=await ei({...x.listParams,params:{current:1,size:10}});o("log","at pages/index/index.vue:664",e.data.records),x.consultantList=e.data.records})(),(async()=>{let e=await cr(),t=[];e.data.forEach((e=>{t.push(e),e.children&&e.children.length>0&&(t=[...t,...e.children])})),y.value=t[0].id,k(t[0].id),f.value=t})(),v(uni.$currentUser.id);let e=uni.getStorageSync("consultantMenu");if(e){let t=JSON.parse(e).slice(0,9);t.push({name:"全部",icon:"/static/index/menu_all.png"}),N.value=t}else(async()=>{let e=await li({type:0});uni.setStorageSync("consultantMenu",JSON.stringify(e.data));let t=e.data.slice(0,9);t.push({name:"全部",icon:"/static/index/menu_all.png"}),o("log","at pages/index/index.vue:691",t),N.value=t})();let t=uni.getStorageSync("listenerMenu");if(t){let e=JSON.parse(t).slice(0,8);e.push({name:"全部",icon:"/static/index/l_menu_all.png"}),p.value=e}else(async()=>{let e=await li({type:1});o("log","at pages/index/index.vue:700","menu2",e),uni.setStorageSync("listenerMenu",JSON.stringify(e.data));let t=e.data.slice(0,8);t.push({name:"全部",icon:"/static/index/l_menu_all.png"}),p.value=t})()})),(t,n)=>{const o=i(e.resolveDynamicComponent("uni-search-bar"),xe),s=e.resolveComponent("viwe"),l=i(e.resolveDynamicComponent("uni-icons"),re);return e.openBlock(),e.createElementBlock("view",{class:"home-box",ref:"homBox"},[e.createElementVNode("scroll-view",{"scroll-y":"",onScroll:S,class:"scroll-content","show-scrollbar":!1},[e.createElementVNode("view",{class:"header"},[e.createElementVNode("view",{class:"grass"},[e.createElementVNode("image",{src:"/static/index/grass.png",class:"img"})]),e.createElementVNode("view",{class:"contaior"},[e.createElementVNode("view",{class:e.normalizeClass(["search-content",e.unref(m)>15?"scrollClass":""])},[e.createElementVNode("view",{class:"contact"},[e.createElementVNode("image",{src:"/static/index/logo.png",class:"logo-image"})]),e.createElementVNode("view",{class:"search"},[e.createVNode(o,{class:"uni-mt-10",radius:"100",placeholder:"搜索内容",clearButton:"auto",cancelButton:"none",onConfirm:M})]),e.createElementVNode("view",{class:"contact"},[e.createElementVNode("image",{src:e.unref(m)>15?"/static/index/scroll-notice.png":"/static/index/notice.png"},null,8,["src"])])],2),e.createElementVNode("view",{class:"swiper-content"},[e.createElementVNode("view",{class:"uni-margin-wrap"},[e.createElementVNode("swiper",{class:"swiper",circular:"","indicator-dots":!0,autoplay:!0,interval:5e3,duration:500},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.value,((t,a)=>(e.openBlock(),e.createElementBlock("swiper-item",{key:a,class:"swiper-item"},[e.createElementVNode("view",{class:"swiper-item uni-bg-red"},[e.createElementVNode("image",{src:t.image,mode:"aspectFill",class:"img"},null,8,["src"])])])))),128))])])]),e.createElementVNode("view",{class:"pour-out-box"},[e.createElementVNode("view",{class:"pour-out-header"},[e.createElementVNode("view",{class:"title"},[e.createElementVNode("view",null,"倾听专区"),e.createElementVNode("image",{src:$i})]),e.createElementVNode("view",{class:"features"},[e.createElementVNode("view",{class:"feature-item"},[e.createElementVNode("image",{src:"/static/index/privacy.png"}),e.createElementVNode("view",null,"隐私保密")]),e.createElementVNode("view",{class:"feature-item"},[e.createElementVNode("image",{src:"/static/index/fairness.png"}),e.createElementVNode("view",null,"严格把控")]),e.createElementVNode("view",{class:"feature-item"},[e.createElementVNode("image",{src:"/static/index/money.png"}),e.createElementVNode("view",null,"随用随退")])])]),e.createElementVNode("view",{class:"pour-out-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(C.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{key:a+t.id,class:"pour-out-item",onClick:e=>{return a=t,void uni.switchTab({url:"/pages/confide/index?type="+a.title});var a}},[e.createElementVNode("image",{src:t.icon},null,8,["src"]),e.createElementVNode("view",null,e.toDisplayString(t.title),1)],8,["onClick"])))),128))])])])]),e.createElementVNode("view",{class:"psychological-box"},[e.createElementVNode("view",{class:"psychological-header"},[e.createElementVNode("view",{class:"title"},[e.createElementVNode("text",null,"心理咨询师专区"),e.createElementVNode("image",{src:$i,class:"subscript"})])]),e.createElementVNode("view",{class:"info-bar"},[e.createElementVNode("text",{class:"bar-txt"},"本专区咨询师都持有国家相关资格证书")]),e.createElementVNode("view",{class:"icon-grid"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(N),((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"icon-item",onClick:e=>{return a=t,void uni.switchTab({url:"/pages/consult/index?type="+a.title});var a},key:a},[e.createElementVNode("view",{class:"icon-circle"},[e.createElementVNode("image",{src:""==t.icon?"@/static/index/icon1.png":t.icon,class:"img"},null,8,["src"])]),e.createElementVNode("text",{class:"icon-text"},e.toDisplayString(t.name),1)],8,["onClick"])))),128))])]),e.createElementVNode("view",{class:"swiper-content",style:{"padding-top":"0"}},[e.createElementVNode("view",{class:"title"},[e.createVNode(s,null,{default:e.withCtx((()=>[e.createTextVNode("名师堂专区")])),_:1}),e.createElementVNode("image",{src:$i,class:"subscript"})]),e.createElementVNode("view",{class:"uni-margin-wrap"},[e.createElementVNode("swiper",{class:"swiper",circular:"","indicator-dots":!0,autoplay:!0,interval:5e3,duration:500},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.value,((t,a)=>(e.openBlock(),e.createElementBlock("swiper-item",{key:a,class:"swiper-item"},[e.createElementVNode("view",{class:"swiper-item uni-bg-red"},[e.createElementVNode("image",{src:t.image,mode:"aspectFill",class:"img"},null,8,["src"])])])))),128))])])]),e.unref(r).mallSwitch?(e.openBlock(),e.createElementBlock("view",{key:0,class:"hot-psychological-box"},[e.createElementVNode("view",{class:"hot-psychological-header"},[e.createElementVNode("view",{class:"title"},[e.createElementVNode("view",null,"麦苗健康商城"),e.createElementVNode("image",{src:$i,class:"subscript"})]),e.createElementVNode("view",{class:"more",onClick:E},[e.createTextVNode("更多"),e.createVNode(l,{type:"right",size:"12",color:"rgba(0, 0, 0, 0.5)"})])]),e.createElementVNode("scroll-view",{class:"category-scroll","scroll-x":"true","show-scrollbar":"false"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(f.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["category-item",{active:y.value===t.id}]),key:t.id,onClick:e=>{return a=t,y.value=a.id,void k(a.id);var a}},[e.createElementVNode("view",{class:"category-name"},[e.createElementVNode("view",null,e.toDisplayString(t.name),1),t.id==y.value?(e.openBlock(),e.createElementBlock("image",{key:0,src:ji})):e.createCommentVNode("",!0),t.id==y.value?(e.openBlock(),e.createElementBlock("view",{key:1,class:"line"})):e.createCommentVNode("",!0)])],10,["onClick"])))),128))]),e.createElementVNode("view",{class:"goods-box"},[e.createElementVNode("image",{src:"/static/index/shopping-img.png",class:"shopping-img"}),e.createElementVNode("scroll-view",{class:"goods-scroll","scroll-x":"true","show-scrollbar":"false"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(_.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"goods-item",key:t.id,onClick:e=>{return a=t.id,void uni.navigateTo({url:`/pages/shopping-mall/product-details?id=${a}`});var a}},[e.createElementVNode("image",{class:"goods-thumb",src:t.thumbnail,mode:"widthFix"},null,8,["src"]),e.createElementVNode("view",{class:"goods-name"},e.toDisplayString(t.name),1),e.createElementVNode("view",{class:"goods-price"},"¥"+e.toDisplayString(t.minPrice),1)],8,["onClick"])))),128)),_.value.length?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("view",{key:0,class:"no-goods"},"暂无商品"))])])])):e.createCommentVNode("",!0),e.createElementVNode("view",{class:"hot-psychological-box hot-psychological-box2"},[e.createElementVNode("view",{class:"hot-psychological-header"},[e.createElementVNode("view",{class:"title title2"},[e.createElementVNode("view",{class:"psychology",style:e.normalizeStyle([{left:"0"},{top:1==b.value?"0":"23rpx",color:1==b.value?"":"#a3a3a3"}]),onClick:n[0]||(n[0]=e=>V(1))},"热门心理咨询师",4),e.createElementVNode("image",{class:e.normalizeClass(1==b.value?"":"subscriptImg"),src:$i},null,2),e.createElementVNode("view",{class:"subscript",style:e.normalizeStyle([{left:"285rpx"},{top:1==b.value?"20rpx":"0",color:2==b.value?"":"#a3a3a3"}]),onClick:n[1]||(n[1]=e=>V(2))},"热门倾听师",4)]),e.createElementVNode("view",{class:"more",onClick:n[2]||(n[2]=e=>(e=>{let t=1==e?"/pages/consult/index":"/pages/confide/index";uni.switchTab({url:t})})(2))},[e.createTextVNode("更多"),e.createVNode(l,{type:"right",size:"12",color:"rgba(0, 0, 0, 0.5)"})])]),e.createElementVNode("scroll-view",{class:"scroll-view_H","scroll-x":"true","scroll-left":"0","show-scrollbar":!1},[e.createElementVNode("view",{class:"scroll-wrap"},[1==b.value?(e.openBlock(),e.createElementBlock("view",{key:0,class:"list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(x.consultantList,((t,a)=>(e.openBlock(),e.createBlock(Ji,{class:"list-item",info:t,key:t.id,onClick:e=>I(t.source,t)},null,8,["info","onClick"])))),128))])):e.createCommentVNode("",!0),2==b.value?(e.openBlock(),e.createElementBlock("view",{key:1,class:"list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(x.listenerList,((t,a)=>(e.openBlock(),e.createBlock(Wi,{class:"list-item confide-list-item",info:t,key:t.id,onClick:e=>I("listener",t)},null,8,["info","onClick"])))),128))])):e.createCommentVNode("",!0)])])]),e.createElementVNode("view",{class:"psychology-test-box"},[e.createElementVNode("image",{class:"img",src:"/static/index/psychology-tree.png"}),e.createElementVNode("view",{class:"psychology-content"},[e.createElementVNode("view",{class:"psychology-content-header"},[e.createElementVNode("view",{class:"title"},[e.createElementVNode("view",{class:"psychology"},"心理测试"),e.createElementVNode("image",{src:$i,class:"subscript"})]),e.createElementVNode("view",{class:"more",onClick:D},[e.createElementVNode("text",null,"更多"),e.createVNode(l,{type:"right",size:"12",color:"rgba(0, 0, 0, 0.5)"})])]),e.createElementVNode("view",{class:"psychology-content-img"},[e.createElementVNode("image",{src:"/static/index/psychology-content-img.png",class:"content-img"})]),e.createElementVNode("swiper",{class:"content-swiper","indicator-dots":!0,autoplay:!1,"indicator-active-color":"#35CA95"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(O.value,((t,a)=>(e.openBlock(),e.createElementBlock("swiper-item",{key:a},[e.createElementVNode("view",{class:"content-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t,((t,a)=>{return e.openBlock(),e.createElementBlock("view",{class:"content-item",key:a,onClick:e=>{return a=t,void uni.navigateTo({url:`/pages/psychological-test/charge-test/charge-test?id=${a.id}`});var a}},[e.createElementVNode("view",{class:"lock"},[e.createElementVNode("image",{src:"/static/index/lock.png",class:"lock-img"})]),e.createElementVNode("view",{class:"info"},[e.createElementVNode("div",{class:"title"},e.toDisplayString(t.title),1),e.createElementVNode("div",{class:"num"},e.toDisplayString((n=t.examNum,n>=1e4?(n/1e4).toFixed(1)+"w":n))+" 人已测 ",1),e.createElementVNode("div",{class:"test-btn"},"开始测试")]),e.createElementVNode("image",{src:t.icon||"/static/index/psychology-content-icon.png",class:"content-item-img"},null,8,["src"])],8,["onClick"]);var n})),128))])])))),128))])])]),e.createElementVNode("view",{class:"recommend-article-box"},[e.createElementVNode("view",{class:"recommend-article-header"},[e.createElementVNode("view",{class:"title"},[e.createElementVNode("view",null,"文章推荐"),e.createElementVNode("image",{src:$i,class:"subscript"})]),e.createElementVNode("view",{class:"more",onClick:n[3]||(n[3]=e=>(e=>{let t=1==e?"/pages/readArticle/readArticle":"/pages/readArticle/articleDetail";uni.navigateTo({url:t})})(1))},[e.createTextVNode("更多"),e.createVNode(l,{type:"right",size:"12",color:"rgba(0, 0, 0, 0.5)"})])]),e.createElementVNode("view",{class:"article-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(x.list,(t=>(e.openBlock(),e.createBlock(e.unref(Zi),{info:t,class:"article-item",onClick:e=>{return a=t,void uni.navigateTo({url:"/pages/readArticle/articleDetail?id="+a.id});var a}},null,8,["info","onClick"])))),256))])]),e.createElementVNode("view",{class:"mm-forum-box"},[e.createElementVNode("view",{class:"mm-forum-header"},[e.createElementVNode("view",{class:"title"},[e.createElementVNode("view",null,"麦苗论坛"),e.createElementVNode("image",{src:$i,class:"subscript"})]),e.createElementVNode("view",{class:"more",onClick:T},[e.createTextVNode("更多"),e.createVNode(l,{type:"right",size:"12",color:"rgba(0, 0, 0, 0.5)"})])]),e.createElementVNode("view",{class:"forum-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(x.answerlist,(t=>(e.openBlock(),e.createBlock(e.unref(Qi),{info:t,class:"forum-content"},null,8,["info"])))),256))])]),e.createElementVNode("view",{class:"remark-box"},[e.createElementVNode("view",{class:"title"},"专业的心理服务平台"),e.createElementVNode("view",{class:"hotline"},[e.createTextVNode(" 7×24 小时专属顾问热线： "),e.createElementVNode("text",{class:"phone"},"400-6688-999")]),e.createElementVNode("view",{class:"feature-container"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(w.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"feature-item",key:a},[e.createElementVNode("image",{class:"icon",src:t.icon,mode:"aspectFit"},null,8,["src"]),e.createElementVNode("view",{class:"content"},[e.createElementVNode("text",{class:"feature-title"},e.toDisplayString(t.title),1),e.createElementVNode("text",{class:"feature-desc"},e.toDisplayString(t.desc),1)])])))),128))])])],32)],512)}}},gr=ie(vr,[["__scopeId","data-v-8fd7e178"]]);const fr=ie({name:"UniBadge",emits:["click"],props:{type:{type:String,default:"error"},inverted:{type:Boolean,default:!1},isDot:{type:Boolean,default:!1},maxNum:{type:Number,default:99},absolute:{type:String,default:""},offset:{type:Array,default:()=>[0,0]},text:{type:[String,Number],default:""},size:{type:String,default:"small"},customStyle:{type:Object,default:()=>({})}},data:()=>({}),computed:{width(){return 8*String(this.text).length+12},classNames(){const{inverted:e,type:t,size:a,absolute:n}=this;return[e?"uni-badge--"+t+"-inverted":"","uni-badge--"+t,"uni-badge--"+a,n?"uni-badge--absolute":""].join(" ")},positionStyle(){if(!this.absolute)return{};let e=this.width/2,t=10;this.isDot&&(e=5,t=5);const a=`${-e+this.offset[0]}px`,n=`${-t+this.offset[1]}px`,o={rightTop:{right:a,top:n},rightBottom:{right:a,bottom:n},leftBottom:{left:a,bottom:n},leftTop:{left:a,top:n}},i=o[this.absolute];return i||o.rightTop},dotStyle(){return this.isDot?{width:"10px",minWidth:"0",height:"10px",padding:"0",borderRadius:"10px"}:{}},displayValue(){const{isDot:e,text:t,maxNum:a}=this;return e?"":Number(t)>a?`${a}+`:t}},methods:{onClick(){this.$emit("click")}}},[["render",function(t,a,n,o,i,r){return e.openBlock(),e.createElementBlock("view",{class:"uni-badge--x"},[e.renderSlot(t.$slots,"default",{},void 0,!0),n.text?(e.openBlock(),e.createElementBlock("text",{key:0,class:e.normalizeClass([r.classNames,"uni-badge"]),style:e.normalizeStyle([r.positionStyle,n.customStyle,r.dotStyle]),onClick:a[0]||(a[0]=e=>r.onClick())},e.toDisplayString(r.displayValue),7)):e.createCommentVNode("",!0)])}],["__scopeId","data-v-077a76df"]]),yr={__name:"index",setup(t){e.useCssVars((e=>({"04a49ba8":n.value})));const a=ae(),n=e.ref(a.statusBarHeight+"px"),{tim:r,loading:l,errorMsg:c,isLogin:u,sdkReady:d,loginTIM:m,waitSDKReady:p,onTIMEvent:h}=lr(1600116083);uni.getStorageSync("currentUser").id;const v=e.ref([]),g=async()=>{await p();try{const e=await r.value.getConversationList({hasUnreadCount:!0});await r.value.getTotalUnreadMessageCount();f(e.data.conversationList)}catch(e){o("error","at pages/message/index.vue:229","获取会话列表失败：",e)}},f=async e=>{if(!Array.isArray(e)||0===e.length)return v.value=[],void o("log","at pages/message/index.vue:236","list为空，无需处理");try{const t=e.map((e=>e.toAccount)).filter((e=>e));if(0===t.length)return void(v.value=[...e]);const{data:a}=await((e,t={})=>A.post("/exam/api/sys/user-admin/paging",e,t))({params:{id:t}}),n={};(Array.isArray(a.records)?a.records:[a.records]).forEach((e=>{e.id&&(n[e.id]={avatar:e.avatar,realName:e.realName})}));const i=e.map((e=>{const t=n[e.toAccount]||{};return{...e,avatar:t.avatar||"",realName:t.realName||""}}));o("log","at pages/message/index.vue:268",i),v.value=i}catch(t){o("error","at pages/message/index.vue:273","请求postAdminList失败：",t)}};e.onMounted((()=>{h(TIM.EVENT.SDK_READY,(()=>{u&&g()})),h(TIM.EVENT.CONVERSATION_LIST_UPDATED,(e=>{conversationList.value=e.data.conversationList})),u&&d&&g()}));const y=e=>{switch(e){case"TIMTextElem":return"[文字消息]";case"TIMImageElem":return"[图片消息]";case"TIMSoundElem":return"[语音消息]";case"TIMVideoElem":return"[视频消息]";default:return"[未识别内容]"}},_=e.ref(0);e.ref(101);const k=e.ref(0),E=e.ref(null),x=()=>{E.value.open()},N=e=>{e!=k.value&&(k.value=e)},w=e.ref([{id:1,label:"全部"},{id:2,label:"服务中"},{id:3,label:"服务过"}]),C=e.ref(1),M=e.ref({});s((()=>{(async()=>{try{await g()}catch(Ft){o("log","at pages/message/index.vue:215",Ft)}})(),M.value=uni.getStorageSync("currentUser")}));const S=e.ref(null),I=e.ref(null),T=()=>{var e;null==(e=S.value)||e.close();const{isPinned:t,conversationID:a}=I.value;let n=t?"取消置顶":"置顶";r.value.pinConversation({conversationID:a,isPinned:!t}).then((()=>{g(),uni.showToast({title:n+"成功",icon:"none"})}))},D=()=>{var e;null==(e=S.value)||e.close();const{conversationID:t}=I.value;uni.showModal({content:"确认删除这条会话吗？",success:e=>{if(e.confirm){r.value.deleteConversation(t).then((()=>{g(),uni.showToast({title:"删除成功",icon:"none"})}))}}})},b=e.ref(null),V=()=>{var e;null==(e=b.value)||e.open()},L=()=>{var e;null==(e=b.value)||e.close()},R=()=>{r.value.setAllMessageRead().then((()=>{g(),uni.showToast({title:"操作成功"})})),L()};return(t,a)=>{const n=i(e.resolveDynamicComponent("uni-badge"),fr),o=i(e.resolveDynamicComponent("uni-nav-bar"),Di),r=i(e.resolveDynamicComponent("uni-icons"),re),s=i(e.resolveDynamicComponent("uni-popup"),vi);return e.openBlock(),e.createElementBlock("view",{class:"message-box"},[e.createVNode(o,{backgroundColor:"#f4f6f8",border:!1,class:"header-bar",statusBar:!0,fixed:"",leftWidth:"260rpx",rightWidth:"200rpx",height:"128rpx"},{left:e.withCtx((()=>[e.createElementVNode("view",{class:"left"},[e.createElementVNode("view",{class:e.normalizeClass(["tab-item",0==k.value?"active":""]),onClick:a[0]||(a[0]=e=>N(0))},[_.value&&_.value>0?(e.openBlock(),e.createBlock(n,{key:0,class:"uni-badge-left-margin",text:_.value,absolute:"rightTop","max-num":99},{default:e.withCtx((()=>[e.createElementVNode("text",{class:"txt"},"私聊")])),_:1},8,["text"])):(e.openBlock(),e.createElementBlock("text",{key:1,class:"txt"},"私聊"))],2),e.createElementVNode("view",{class:e.normalizeClass(["tab-item",1==k.value?"active":""]),onClick:a[1]||(a[1]=e=>N(1))},[e.createElementVNode("text",{class:"txt"},"通知")],2)])])),right:e.withCtx((()=>[e.createElementVNode("view",{class:"right"},[e.createElementVNode("view",{class:"img-txt",onClick:x},[e.createElementVNode("image",{src:"/static/consult/contect.png",class:"img"}),e.createElementVNode("text",{class:"txt"},"客服")]),e.createElementVNode("view",{class:"img-txt",onClick:V},[e.createElementVNode("image",{src:"/static/message/use-read.svg",class:"img"}),e.createElementVNode("text",{class:"txt"},"已读")])])])),_:1}),0==k.value?(e.openBlock(),e.createElementBlock("view",{key:0,class:"message-content"},[e.createElementVNode("view",{class:"content-tab-box"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(w.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["tab-item",C.value==t.id?"active":""]),key:a,onClick:e=>{var a;(a=t.id)!=C.value&&(C.value=a)}},e.toDisplayString(t.label),11,["onClick"])))),128))]),e.createElementVNode("view",{class:"scroll-content-box"},[e.createElementVNode("scroll-view",{"scroll-y":"",class:"scroll-content","show-scrollbar":!1},[v.value.length>0?(e.openBlock(),e.createElementBlock("view",{key:0},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(v.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["content-item",t.isPinned?"item-bg":""]),key:a,onClick:e=>(e=>{const{userProfile:t,realName:a,avatar:n}=e;uni.navigateTo({url:`/pages/message/private-chat?to=${t.userID}&name=${a} &avatar=${n}`})})(t)},[e.createElementVNode("view",{class:"content-item-left"},[e.createElementVNode("image",{src:t.avatar,class:"img"},null,8,["src"])]),e.createElementVNode("view",{class:"content-item-right"},[e.createElementVNode("view",{class:"content-user-date"},[e.createElementVNode("view",{class:"name"},e.toDisplayString(t.realName),1),e.createElementVNode("view",{class:"date"},e.toDisplayString(e.unref(Yo)(t.lastMessage.lastTime)),1)]),e.createElementVNode("view",{class:"item-info-bottom-item"},[e.createElementVNode("view",{class:"item-info-top_content"},[e.createElementVNode("text",{class:"unread-text"}),e.createElementVNode("text",null,e.toDisplayString(y(t.lastMessage.type)),1)]),e.createElementVNode("view",{class:"item-info-bottom_action",onClick:e.withModifiers((e=>{return a=t,I.value=a,void(null==(n=S.value)||n.open());var a,n}),["stop"])},[e.createVNode(r,{type:"more-filled",size:"24",color:"rgba(0,0,0,.35)"})],8,["onClick"])])])],10,["onClick"])))),128))])):(e.openBlock(),e.createElementBlock("view",{key:1,class:"no-conversation"},"当前没有会话"))])])])):e.createCommentVNode("",!0),e.createVNode(s,{ref_key:"conversationPopup",ref:S,type:"center","border-radius":"8rpx",class:"conversation-popup"},{default:e.withCtx((()=>[e.createElementVNode("view",{class:"item-box"},[e.createElementVNode("view",{class:"item",onClick:T},e.toDisplayString(I.value.isPinned?"取消置顶":"置顶聊天"),1),e.createElementVNode("view",{class:"item",onClick:D},"删除聊天")])])),_:1},512),e.createVNode(s,{ref_key:"alreadReadPopup",ref:b,type:"center","border-radius":"24rpx",class:"alread-read-popup"},{default:e.withCtx((()=>[e.createElementVNode("view",{class:"item-box"},[e.createElementVNode("view",{class:"title"},"全部已读"),e.createElementVNode("view",{class:"content"},"确认将所有信息标记为已读？"),e.createElementVNode("view",{class:"btn"},[e.createElementVNode("view",{class:"cancel",onClick:L},"取消"),e.createElementVNode("view",{class:"confirm",onClick:R},"已读")])])])),_:1},512),e.createVNode(Mi,{ref_key:"serviceRef",ref:E},null,512)])}}},_r=ie(yr,[["__scopeId","data-v-f73caeaf"]]),kr=(e,t={})=>A.post("/api/user/update",e,t),Er={__name:"index",setup(t){const a=ae(),n=e=>{uni.navigateTo({url:e})},o=e.ref([{url:"/static/my/grid-1.png",txt:"咨询订单"},{url:"/static/my/grid-2.png",txt:"倾诉订单"},{url:"/static/my/grid-5.png",txt:"评测记录"},{url:"/static/my/grid-7.png",txt:"足迹"},{url:"/static/my/grid-9.png",txt:"账单"}]),r=e.ref([{url:"/static/my/grid-consulting-1.png",txt:"列表"},{url:"/static/my/grid-consulting-2.png",txt:"认证资料"},{url:"/static/my/grid-consulting-3.png",txt:"服务设置"},{url:"/static/my/grid-consulting-4.png",txt:"钱包"}]),l=()=>{uni.navigateTo({url:"/pages/shopping-mall/mall-home"})},c=()=>{uni.setClipboardData({data:y.value.id}),uni.showToast({title:"复制成功",icon:"success",duration:1500})},u={0:"用户",1:"咨询师",2:"倾诉师"},d={1:["用户","咨询师"],2:["用户","倾诉师"]},m=e.ref(),p=async e=>{const t="倾诉师"==d[y.value.userRole]?2:e.detail.value;try{let e=await((e,t={})=>A.post("/api/user/changeConsultant",e,t))({consultantType:t});y.value=e.data}catch(a){}},h=()=>{uni.navigateTo({url:"/pages/forum/my/info"})},v=()=>{uni.navigateTo({url:"/pages/forum/my/my"})},g=e.ref(null),f=()=>{g.value.open()},y=e.ref({}),_=e.ref({}),k=async()=>{let e=await((e,t={})=>A.get(`/api/user/summary?userId=${e.userId}`,e,t))({userId:y.value.id});_.value=e.data};return s((()=>{(async()=>{let e=await R();y.value=e.data,m.value=d[y.value.userRole]})(),k()})),(t,s)=>{const d=i(e.resolveDynamicComponent("uni-icons"),re);return e.openBlock(),e.createElementBlock("view",{class:"my-box"},[e.createElementVNode("view",{class:"my-top-content"},[e.createElementVNode("image",{src:"/static/my/my-top-bg.png"})]),e.createElementVNode("view",{class:"container"},[e.createElementVNode("view",{class:"user-info"},[e.createElementVNode("view",null,[e.createElementVNode("image",{src:null==y.value.avatar?"@/static/my/profile.png":y.value.avatar,mode:"aspectFill",class:"profile"},null,8,["src"])]),e.createElementVNode("view",{class:"user-info-content"},[e.createElementVNode("view",null,[e.createElementVNode("view",{class:"nick-name",onClick:h},[e.createTextVNode(e.toDisplayString(y.value.realName),1),e.createVNode(d,{type:"right",size:"16"})])]),e.createElementVNode("view",{style:{display:"flex","flex-direction":"row","align-items":"center","justify-content":"space-between"}},[e.createElementVNode("view",{class:"id-num",style:{flex:"1"}},[e.createElementVNode("text",null,"ID: "+e.toDisplayString(y.value.id),1),e.createElementVNode("image",{src:"/static/my/copy.png",class:"copy",onClick:c})]),"0"!=y.value.userRole?(e.openBlock(),e.createElementBlock("picker",{key:0,range:m.value,onChange:p},[e.createElementVNode("view",{class:"change-user-box"},[e.createElementVNode("view",{class:"change-user"},[e.createTextVNode(e.toDisplayString(u[y.value.consultantType])+" ",1),e.createElementVNode("image",{src:"/static/my/bottom-arrow.png",class:"bottom-arrow"})])])],40,["range"])):(e.openBlock(),e.createElementBlock("view",{key:1,class:"change-user-box"},[e.createElementVNode("view",{class:"change-user"},"用户")]))])])]),e.createElementVNode("view",{class:"my-record-number"},[e.createElementVNode("view",{class:"item"},[e.createElementVNode("view",{class:"num"},e.toDisplayString(_.value.consultCount),1),e.createElementVNode("view",{class:"txt"},"我的咨询")]),e.createElementVNode("view",{class:"item",onClick:v},[e.createElementVNode("view",{class:"num"},e.toDisplayString(_.value.publishCount),1),e.createElementVNode("view",{class:"txt"},"我的发布")]),e.createElementVNode("view",{class:"item"},[e.createElementVNode("view",{class:"num"},e.toDisplayString(_.value.followCount),1),e.createElementVNode("view",{class:"txt"},"我的关注")]),e.createElementVNode("view",{class:"item"},[e.createElementVNode("view",{class:"num"},e.toDisplayString(_.value.collectCount),1),e.createElementVNode("view",{class:"txt"},"我的收藏")])]),e.unref(a).mallSwitch?(e.openBlock(),e.createElementBlock("view",{key:0,class:"consult-box",onClick:l},[e.createElementVNode("image",{class:"",src:"/static/settled/mall-entrance.png"})])):e.createCommentVNode("",!0),e.createElementVNode("view",{class:"my-server"},[e.createElementVNode("view",{class:"title"},"我的服务"),e.createElementVNode("view",{class:"grid-box"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{key:a,class:"grid-item grid-item-1",onClick:e=>(e=>{uni.navigateTo({url:`${{0:"/pages/payment/order/consult-order?",1:"/pages/payment/order/listener-order",2:"/pages/payment/order/exam-order",4:"/pages/payment/order/bill-order"}[e]}?type=${JSON.stringify(y.value)}&service=false`})})(a)},[e.createElementVNode("image",{src:t.url,class:"image"},null,8,["src"]),e.createElementVNode("view",{class:"txt"},e.toDisplayString(t.txt),1)],8,["onClick"])))),128))])]),"0"!=y.value.consultantType?(e.openBlock(),e.createElementBlock("view",{key:1,class:"my-server"},[e.createElementVNode("view",{class:"title"},e.toDisplayString("1"==y.value.userRole?"咨询":"倾听")+"专区",1),e.createElementVNode("view",{class:"grid-box"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{key:a,class:"grid-item",onClick:e=>(e=>{const t="1"==y.value.userRole?"consult-order":"listener-order",a={0:`/pages/payment/order/${t}`,1:"/pages/settings/serviceSettings",2:"/pages/settings/service-setup",3:"/pages/my/wallet/mine"};uni.navigateTo({url:`${a[e]}?type=${JSON.stringify({id:y.value.id,userRole:y.value.userRole})}&service=true&identity=${t}`})})(a)},[e.createElementVNode("image",{src:t.url,class:"image"},null,8,["src"]),e.createElementVNode("view",{class:"txt"},e.toDisplayString("列表"==t.txt?"1"==y.value.userRole?"咨询列表":"倾听列表":t.txt),1)],8,["onClick"])))),128))])])):e.createCommentVNode("",!0),e.createElementVNode("view",{class:"other-server"},[e.createElementVNode("view",{class:"title"},"其他服务"),e.createElementVNode("view",{class:"other-list"},[e.createElementVNode("view",{class:"other-item",onClick:s[0]||(s[0]=e=>{0==y.value.userRole?uni.navigateTo({url:`/pages/settled/settled?type=${JSON.stringify(y.value.id)}`}):uni.showToast({title:"已入驻",icon:"success"})})},[e.createElementVNode("view",{class:"item-left"},[e.createElementVNode("image",{src:"/static/my/join.png"}),e.createTextVNode(),e.createElementVNode("text",null,"入驻平台")])]),e.createElementVNode("view",{class:"other-item",onClick:s[1]||(s[1]=e=>n("/pages/settings/help-center"))},[e.createElementVNode("view",{class:"item-left"},[e.createElementVNode("image",{src:"/static/my/service-setting.png"}),e.createTextVNode(),e.createElementVNode("text",null,"帮助中心")])]),e.createElementVNode("view",{class:"other-item",onClick:s[2]||(s[2]=e=>n("/pages/settings/feedback"))},[e.createElementVNode("view",{class:"item-left"},[e.createElementVNode("image",{src:"/static/my/advice.png"}),e.createTextVNode(),e.createElementVNode("text",null,"意见反馈")])]),e.createElementVNode("view",{class:"other-item",onClick:f},[e.createElementVNode("view",{class:"item-left"},[e.createElementVNode("image",{src:we}),e.createTextVNode(),e.createElementVNode("text",null,"联系客服")])]),e.createElementVNode("view",{class:"other-item",onClick:s[3]||(s[3]=e=>n("/pages/shopping-mall/delivery-address"))},[e.createElementVNode("view",{class:"item-left"},[e.createElementVNode("image",{src:"/static/my/positioning.png",style:{width:"23rpx"}}),e.createElementVNode("text",{style:{"padding-left":"18rpx"}},"收货地址")])]),e.createElementVNode("view",{class:"other-item",onClick:s[4]||(s[4]=e=>n("/pages/settings/settings"))},[e.createElementVNode("view",{class:"item-left"},[e.createElementVNode("image",{src:"/static/my/setting.png"}),e.createTextVNode(),e.createElementVNode("text",null,"设置")])])])]),e.createVNode(Mi,{ref_key:"serviceRef",ref:g},null,512)])])}}},xr=ie(Er,[["__scopeId","data-v-64c04f88"]]),Nr=ie({__name:"readArticle",setup(t){e.useCssVars((e=>({"6e0f99ad":n.value})));const a=ae(),n=e.ref(a.statusBarHeight+"px"),o=e.ref(0),r=e.reactive({listParams:{current:1,size:10,params:{}},list:[]}),s=e.ref([{txt:"推荐",id:1},{txt:"情感",id:2},{txt:"文化",id:3},{txt:"职场",id:4},{txt:"职场",id:5},{txt:"职场",id:6},{txt:"职场",id:7},{txt:"职场",id:7}]),l=()=>{uni.navigateBack({delta:1})};return e.onMounted((()=>{(async()=>{let e=await Ki(r.listParams);r.list=e.data.records})()})),(t,a)=>{const n=i(e.resolveDynamicComponent("uni-icons"),re),c=i(e.resolveDynamicComponent("uni-nav-bar"),Di);return e.openBlock(),e.createElementBlock("view",{class:"read-article-box"},[e.createElementVNode("view",{class:"header"},[e.createVNode(c,{backgroundColor:"rgba(255,255,255,0)",border:!1,title:"文章阅读",class:"header-bar"},{left:e.withCtx((()=>[e.createVNode(n,{type:"left",size:"24",onClick:l})])),right:e.withCtx((()=>[e.createElementVNode("view",{class:"right"},[e.createElementVNode("image",{src:Ri,style:{width:"40rpx",height:"40rpx"}})])])),_:1})]),e.createElementVNode("view",{class:"article-content"},[e.createElementVNode("view",{class:"swiper-content"},[e.createElementVNode("view",{class:"uni-margin-wrap"},[e.createElementVNode("swiper",{class:"swiper",circular:"","indicator-dots":!0,autoplay:!0,interval:5e3,duration:500},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(2,(t=>e.createElementVNode("swiper-item",{key:t,class:"swiper-item"},[e.createElementVNode("view",{class:"swiper-item uni-bg-red"},[e.createElementVNode("image",{src:"https://odd.dzjob.net/profile/upload/20250519/20250520113143.png",class:"img"})])]))),64))])])])]),e.createElementVNode("view",{class:"article-tabs"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"tab-item",key:a,onClick:e=>(e=>{o.value=e})(a)},[e.createTextVNode(e.toDisplayString(t.txt)+" ",1),a==o.value?(e.openBlock(),e.createElementBlock("image",{key:0,src:$i,class:"active-img"})):e.createCommentVNode("",!0)],8,["onClick"])))),128))]),e.createElementVNode("scroll-view",{"scroll-y":"true",class:"scroll-content"},[e.createElementVNode("view",{class:"article-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.list,(t=>(e.openBlock(),e.createBlock(e.unref(Zi),{info:t,class:"article-item",onClick:e=>{return a=t,void uni.navigateTo({url:"/pages/readArticle/articleDetail?id="+a.id});var a}},null,8,["info","onClick"])))),256))])])])}}},[["__scopeId","data-v-a00951e6"]]);function wr(e){let t="";for(let a in e){t+=`${a}:${e[a]};`}return t}const Cr=ie({name:"uni-easyinput",emits:["click","iconClick","update:modelValue","input","focus","blur","confirm","clear","eyes","change","keyboardheightchange"],model:{prop:"modelValue",event:"update:modelValue"},options:{virtualHost:!0},inject:{form:{from:"uniForm",default:null},formItem:{from:"uniFormItem",default:null}},props:{name:String,value:[Number,String],modelValue:[Number,String],type:{type:String,default:"text"},clearable:{type:Boolean,default:!0},autoHeight:{type:Boolean,default:!1},placeholder:{type:String,default:" "},placeholderStyle:String,focus:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},maxlength:{type:[Number,String],default:140},confirmType:{type:String,default:"done"},clearSize:{type:[Number,String],default:24},inputBorder:{type:Boolean,default:!0},prefixIcon:{type:String,default:""},suffixIcon:{type:String,default:""},trim:{type:[Boolean,String],default:!1},cursorSpacing:{type:Number,default:0},passwordIcon:{type:Boolean,default:!0},adjustPosition:{type:Boolean,default:!0},primaryColor:{type:String,default:"#2979ff"},styles:{type:Object,default:()=>({color:"#333",backgroundColor:"#fff",disableColor:"#F7F6F6",borderColor:"#e5e5e5"})},errorMessage:{type:[String,Boolean],default:""}},data:()=>({focused:!1,val:"",showMsg:"",border:!1,isFirstBorder:!1,showClearIcon:!1,showPassword:!1,focusShow:!1,localMsg:"",isEnter:!1}),computed:{isVal(){const e=this.val;return!(!e&&0!==e)},msg(){return this.localMsg||this.errorMessage},inputMaxlength(){return Number(this.maxlength)},boxStyle(){return`color:${this.inputBorder&&this.msg?"#e43d33":this.styles.color};`},inputContentClass(){return function(e){let t="";for(let a in e)e[a]&&(t+=`${a} `);return t}({"is-input-border":this.inputBorder,"is-input-error-border":this.inputBorder&&this.msg,"is-textarea":"textarea"===this.type,"is-disabled":this.disabled,"is-focused":this.focusShow})},inputContentStyle(){const e=this.focusShow?this.primaryColor:this.styles.borderColor;return wr({"border-color":(this.inputBorder&&this.msg?"#dd524d":e)||"#e5e5e5","background-color":this.disabled?this.styles.disableColor:this.styles.backgroundColor})},inputStyle(){return wr({"padding-right":"password"===this.type||this.clearable||this.prefixIcon?"":"10px","padding-left":this.prefixIcon?"":"10px"})}},watch:{value(e){this.val=null!==e?e:""},modelValue(e){this.val=null!==e?e:""},focus(e){this.$nextTick((()=>{this.focused=this.focus,this.focusShow=this.focus}))}},created(){this.init(),this.form&&this.formItem&&this.$watch("formItem.errMsg",(e=>{this.localMsg=e}))},mounted(){this.$nextTick((()=>{this.focused=this.focus,this.focusShow=this.focus}))},methods:{init(){this.value||0===this.value?this.val=this.value:this.modelValue||0===this.modelValue||""===this.modelValue?this.val=this.modelValue:this.val=""},onClickIcon(e){this.$emit("iconClick",e)},onEyes(){this.showPassword=!this.showPassword,this.$emit("eyes",this.showPassword)},onInput(e){let t=e.detail.value;this.trim&&("boolean"==typeof this.trim&&this.trim&&(t=this.trimStr(t)),"string"==typeof this.trim&&(t=this.trimStr(t,this.trim))),this.errMsg&&(this.errMsg=""),this.val=t,this.$emit("input",t),this.$emit("update:modelValue",t)},onFocus(){this.$nextTick((()=>{this.focused=!0})),this.$emit("focus",null)},_Focus(e){this.focusShow=!0,this.$emit("focus",e)},onBlur(){this.focused=!1,this.$emit("blur",null)},_Blur(e){if(e.detail.value,this.focusShow=!1,this.$emit("blur",e),!1===this.isEnter&&this.$emit("change",this.val),this.form&&this.formItem){const{validateTrigger:e}=this.form;"blur"===e&&this.formItem.onFieldChange()}},onConfirm(e){this.$emit("confirm",this.val),this.isEnter=!0,this.$emit("change",this.val),this.$nextTick((()=>{this.isEnter=!1}))},onClear(e){this.val="",this.$emit("input",""),this.$emit("update:modelValue",""),this.$emit("clear")},onkeyboardheightchange(e){this.$emit("keyboardheightchange",e)},trimStr:(e,t="both")=>"both"===t?e.trim():"left"===t?e.trimLeft():"right"===t?e.trimRight():"start"===t?e.trimStart():"end"===t?e.trimEnd():"all"===t?e.replace(/\s+/g,""):e}},[["render",function(t,a,n,o,r,s){const l=i(e.resolveDynamicComponent("uni-icons"),re);return e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["uni-easyinput",{"uni-easyinput-error":s.msg}]),style:e.normalizeStyle(s.boxStyle)},[e.createElementVNode("view",{class:e.normalizeClass(["uni-easyinput__content",s.inputContentClass]),style:e.normalizeStyle(s.inputContentStyle)},[n.prefixIcon?(e.openBlock(),e.createBlock(l,{key:0,class:"content-clear-icon",type:n.prefixIcon,color:"#c0c4cc",onClick:a[0]||(a[0]=e=>s.onClickIcon("prefix")),size:"22"},null,8,["type"])):e.createCommentVNode("",!0),e.renderSlot(t.$slots,"left",{},void 0,!0),"textarea"===n.type?(e.openBlock(),e.createElementBlock("textarea",{key:1,class:e.normalizeClass(["uni-easyinput__content-textarea",{"input-padding":n.inputBorder}]),name:n.name,value:r.val,placeholder:n.placeholder,placeholderStyle:n.placeholderStyle,disabled:n.disabled,"placeholder-class":"uni-easyinput__placeholder-class",maxlength:s.inputMaxlength,focus:r.focused,autoHeight:n.autoHeight,"cursor-spacing":n.cursorSpacing,"adjust-position":n.adjustPosition,onInput:a[1]||(a[1]=(...e)=>s.onInput&&s.onInput(...e)),onBlur:a[2]||(a[2]=(...e)=>s._Blur&&s._Blur(...e)),onFocus:a[3]||(a[3]=(...e)=>s._Focus&&s._Focus(...e)),onConfirm:a[4]||(a[4]=(...e)=>s.onConfirm&&s.onConfirm(...e)),onKeyboardheightchange:a[5]||(a[5]=(...e)=>s.onkeyboardheightchange&&s.onkeyboardheightchange(...e))},null,42,["name","value","placeholder","placeholderStyle","disabled","maxlength","focus","autoHeight","cursor-spacing","adjust-position"])):(e.openBlock(),e.createElementBlock("input",{key:2,type:"password"===n.type?"text":n.type,class:"uni-easyinput__content-input",style:e.normalizeStyle(s.inputStyle),name:n.name,value:r.val,password:!r.showPassword&&"password"===n.type,placeholder:n.placeholder,placeholderStyle:n.placeholderStyle,"placeholder-class":"uni-easyinput__placeholder-class",disabled:n.disabled,maxlength:s.inputMaxlength,focus:r.focused,confirmType:n.confirmType,"cursor-spacing":n.cursorSpacing,"adjust-position":n.adjustPosition,onFocus:a[6]||(a[6]=(...e)=>s._Focus&&s._Focus(...e)),onBlur:a[7]||(a[7]=(...e)=>s._Blur&&s._Blur(...e)),onInput:a[8]||(a[8]=(...e)=>s.onInput&&s.onInput(...e)),onConfirm:a[9]||(a[9]=(...e)=>s.onConfirm&&s.onConfirm(...e)),onKeyboardheightchange:a[10]||(a[10]=(...e)=>s.onkeyboardheightchange&&s.onkeyboardheightchange(...e))},null,44,["type","name","value","password","placeholder","placeholderStyle","disabled","maxlength","focus","confirmType","cursor-spacing","adjust-position"])),"password"===n.type&&n.passwordIcon?(e.openBlock(),e.createElementBlock(e.Fragment,{key:3},[s.isVal?(e.openBlock(),e.createBlock(l,{key:0,class:e.normalizeClass(["content-clear-icon",{"is-textarea-icon":"textarea"===n.type}]),type:r.showPassword?"eye-slash-filled":"eye-filled",size:22,color:r.focusShow?n.primaryColor:"#c0c4cc",onClick:s.onEyes},null,8,["class","type","color","onClick"])):e.createCommentVNode("",!0)],64)):e.createCommentVNode("",!0),n.suffixIcon?(e.openBlock(),e.createElementBlock(e.Fragment,{key:4},[n.suffixIcon?(e.openBlock(),e.createBlock(l,{key:0,class:"content-clear-icon",type:n.suffixIcon,color:"#c0c4cc",onClick:a[11]||(a[11]=e=>s.onClickIcon("suffix")),size:"22"},null,8,["type"])):e.createCommentVNode("",!0)],64)):(e.openBlock(),e.createElementBlock(e.Fragment,{key:5},[n.clearable&&s.isVal&&!n.disabled&&"textarea"!==n.type?(e.openBlock(),e.createBlock(l,{key:0,class:e.normalizeClass(["content-clear-icon",{"is-textarea-icon":"textarea"===n.type}]),type:"clear",size:n.clearSize,color:s.msg?"#dd524d":r.focusShow?n.primaryColor:"#c0c4cc",onClick:s.onClear},null,8,["class","size","color","onClick"])):e.createCommentVNode("",!0)],64)),e.renderSlot(t.$slots,"right",{},void 0,!0)],6)],6)}],["__scopeId","data-v-a7f5fd7f"]]);
/*!
    * vue-router v4.4.4
    * (c) 2024 Eduardo San Martin Morote
    * @license MIT
    */var Mr,Sr,Ir,Tr,Dr,br;(Sr=Mr||(Mr={})).pop="pop",Sr.push="push",(Tr=Ir||(Ir={})).back="back",Tr.forward="forward",Tr.unknown="",(br=Dr||(Dr={}))[br.aborted=4]="aborted",br[br.cancelled=8]="cancelled",br[br.duplicated=16]="duplicated";const Vr=Symbol("");function Ar(t){return e.inject(Vr)}const Lr=ie({__name:"articleDetail",setup(t){e.useCssVars((e=>({"614f2bd1":n.value})));const a=ae(),n=e.ref(a.statusBarHeight+"px");Ar();const r=e.ref([]);e.ref(0);const s=e.ref("");let c=e.ref();const u=e.reactive({listParams:{current:1,size:10,params:{}},list:[]});e.ref([{txt:"推荐",id:1},{txt:"情感",id:2},{txt:"文化",id:3},{txt:"职场",id:4},{txt:"职场",id:5},{txt:"职场",id:6},{txt:"职场",id:7},{txt:"职场",id:7}]);const d=e.ref(),m=e.ref();(async()=>{let e=await A.get("/api/article/article/relativeArticle");r.value=e.data,o("log","at pages/readArticle/articleDetail.vue:172",r.value)})();const p=()=>{uni.navigateBack({delta:1})},h=e=>{1==e?uni.switchTab({url:"/pages/consult/index"}):uni.navigateTo({url:"/pages/consult/detail"})},v=e=>{uni.navigateTo({url:"/pages/readArticle/articleDetail?id="+e.id})},g=async()=>{let e=await((e,t={})=>A.post("/api/article/article/getArticleDetail",e,t))({id:c.value});d.value=e.data},f=async()=>{u.listParams.params.articleId=c.value;let e=await((e,t={})=>A.post("/api/comment/comment/getCommentById",e,t))(u.listParams);m.value=e.data.records},y=async()=>{let e=await((e,t={})=>A.post("/api/comment/comment/saveComment",e,t))({content:s.value,articleId:c.value});s.value="",uni.showToast({title:"发布成功",icon:"none",duration:2e3}),o("log","at pages/readArticle/articleDetail.vue:234",e)};return l((e=>{c.value=e.id,g(),f()})),e.onMounted((()=>{})),(t,a)=>{var n,o;const l=i(e.resolveDynamicComponent("uni-icons"),re),c=i(e.resolveDynamicComponent("uni-nav-bar"),Di),u=i(e.resolveDynamicComponent("uni-easyinput"),Cr);return e.openBlock(),e.createElementBlock("view",{class:"read-article-box"},[e.createElementVNode("view",{class:"header"},[e.createVNode(c,{backgroundColor:"#F4F6F8",border:!1,title:"",class:"header-bar",statusBar:!0,fixed:""},{left:e.withCtx((()=>[e.createVNode(l,{type:"left",size:"24",onClick:p})])),right:e.withCtx((()=>[e.createElementVNode("view",{class:"right"},[e.createVNode(l,{type:"more-filled",size:"24",onClick:p})])])),_:1})]),e.createElementVNode("view",{class:"article-content"},[e.createElementVNode("view",{class:"detail-box"},[e.createElementVNode("view",{class:"title"},e.toDisplayString(null==(n=d.value)?void 0:n.title),1),e.createElementVNode("view",{class:"article-user"},[e.createElementVNode("view",{class:"user"},[e.createElementVNode("view",null,[e.createElementVNode("image",{src:Bi,class:"picture"})]),e.createElementVNode("view",{class:"name-box"},[e.createElementVNode("view",{class:"name"},"咨询师"),e.createElementVNode("view",{class:"auth"},"咨询师 | 认证作家")])]),e.createElementVNode("view",{class:"follow"},[e.createVNode(l,{type:"plusempty",size:"12",color:"#35CA95"}),e.createElementVNode("text",{class:"txt"},"关注")])]),e.createElementVNode("view",{class:"content"},e.toDisplayString(null==(o=d.value)?void 0:o.content),1),e.createElementVNode("view",{class:"date-num"},[e.createElementVNode("view",null,"2025-05-06"),e.createElementVNode("view",{style:{"padding-left":"20rpx"}},"阅读 7876")]),e.createElementVNode("view",{class:"contact"},[e.createTextVNode("文章转载/侵权，请联系邮箱："),e.createElementVNode("text",{class:"txt"},"6757567@163.com")])]),e.createElementVNode("view",{style:{"background-color":"white",margin:"30rpx",padding:"18rpx"}},[e.createElementVNode("view",{style:{"margin-bottom":"30rpx"}},[e.createElementVNode("text",{style:{"font-size":"42rpx","font-weight":"bold"}},"热门评论")]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(m.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{key:a,style:{"margin-bottom":"20rpx"}},[e.createElementVNode("view",{style:{display:"flex","flex-direction":"row"}},[e.createElementVNode("image",{style:{width:"48rpx",height:"48rpx","border-radius":"24rpx"},src:null==t.avatar?"@/static/my/profile.png":t.avatar},null,8,["src"]),e.createElementVNode("view",{style:{"margin-left":"20rpx",display:"flex","flex-direction":"column"}},[e.createElementVNode("text",{style:{"font-size":"26rpx"}},e.toDisplayString(t.nickname),1),e.createElementVNode("text",{style:{"margin-top":"10rpx","font-size":"28rpx",color:"#666666"}},e.toDisplayString(t.content),1)])])])))),128))]),e.createElementVNode("view",{class:"hot-psychological-box"},[e.createElementVNode("view",{class:"hot-psychological-header"},[e.createElementVNode("view",{class:"title"},"热门咨询师"),e.createElementVNode("view",{class:"more",onClick:a[0]||(a[0]=e=>h(1))},[e.createTextVNode("更多"),e.createVNode(l,{type:"right",size:"12",color:"rgba(0, 0, 0, 0.5)"})])]),e.createElementVNode("scroll-view",{class:"scroll-view_H","scroll-x":"true","scroll-left":"0","show-scrollbar":!1},[e.createElementVNode("view",{class:"list"},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(10,(t=>e.createVNode(Ji,{class:"list-item",onClick:a[1]||(a[1]=e=>h(2))}))),64))])])]),e.createElementVNode("view",{class:"recommend-article-box"},[e.createElementVNode("view",{class:"recommend-article-header"},[e.createElementVNode("view",{class:"title"},[e.createElementVNode("view",null,"相关阅读")]),e.createElementVNode("view",{class:"more",onClick:a[2]||(a[2]=e=>v(1))},[e.createTextVNode("更多"),e.createVNode(l,{type:"right",size:"12",color:"rgba(0, 0, 0, 0.5)"})])]),e.createElementVNode("view",{class:"article-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.value,(t=>(e.openBlock(),e.createBlock(e.unref(Zi),{info:t,class:"article-item",onClick:e=>v(t)},null,8,["info","onClick"])))),256))])])]),e.createElementVNode("view",{class:"reply-box"},[e.createElementVNode("view",{class:"reply-contaior"},[e.createElementVNode("view",{class:"reply-content"},[e.createVNode(u,{onChange:y,"prefix-icon":"chat",clearable:!1,modelValue:s.value,"onUpdate:modelValue":a[3]||(a[3]=e=>s.value=e),placeholder:"写点什么",trim:!0,class:"reply-input"},null,8,["modelValue"])]),e.createElementVNode("view",{class:"reply-icons"},[e.createVNode(l,{type:"star",size:"24",color:"rgba(0, 0, 0, 0.35)"}),e.createVNode(l,{type:"hand-up",size:"24",color:"rgba(0, 0, 0, 0.35)"}),e.createVNode(l,{type:"redo",size:"24",color:"rgba(0, 0, 0, 0.35)"})])])])])}}},[["__scopeId","data-v-b76c6cc5"]]),Rr={__name:"settled",setup(t){e.useCssVars((e=>({ec0c48f8:n.value})));const a=ae(),n=e.ref(a.statusBarHeight+"px"),o=e.ref(""),r=e.ref(0);d((e=>{r.value=e.scrollTop})),l((e=>{o.value=JSON.parse(e.type)}));const c=e.ref(0),u=e.ref(0),m=async()=>{try{let e=await((e,t={})=>A.get("/api/user/verifyStatus",e,t))();const{role:t,verifyStatus:a}=e.data;t.value=t,a.value=a}catch(e){}},p=()=>{uni.navigateBack({delta:1})},h=()=>{1!=c.value||1!=u.value?2!=c.value||1!=u.value?uni.navigateTo({url:"/pages/settled/application?type=1&userInfo="+JSON.stringify(o.value)}):uni.showToast({title:"倾听师正在认证审核",icon:"error"}):uni.showToast({title:"咨询师正在认证",icon:"error"})},v=()=>{1!=c.value||1!=u.value?2!=c.value||1!=u.value?uni.navigateTo({url:"/pages/settled/application?type=2&userInfo="+JSON.stringify(o.value)}):uni.showToast({title:"倾听师正在认证审核,请稍后尝试",icon:"none"}):uni.showToast({title:"咨询师正在认证审核，请稍后尝试",icon:"none"})};return s((()=>{m()})),(t,a)=>{const n=i(e.resolveDynamicComponent("uni-icons"),re),o=i(e.resolveDynamicComponent("uni-nav-bar"),Di);return e.openBlock(),e.createElementBlock("view",{class:"settled-box"},[e.createElementVNode("view",{class:"header"},[e.createVNode(o,{class:e.normalizeClass([r.value>15?"scrollClass":"","header-bar"]),backgroundColor:"rgba(255,255,255,0)",border:!1,title:"专家入驻 | 麦苗倾诉"},{left:e.withCtx((()=>[e.createVNode(n,{type:"left",size:"24",onClick:p})])),right:e.withCtx((()=>[e.createElementVNode("view",{class:"right"},[e.createElementVNode("image",{src:Ri,style:{width:"40rpx",height:"40rpx"}})])])),_:1},8,["class"])]),e.createElementVNode("view",{class:"content"},[e.createElementVNode("view",{class:"settled_1",onClick:h},[e.createElementVNode("view",{class:"title"},"我是咨询师"),e.createElementVNode("view",{class:"use-public"},"2.5万同行 已服务了439万用户和家庭"),e.createElementVNode("view",{class:"add"},"立即加入")]),e.createElementVNode("view",{class:"settled_2",onClick:v},[e.createElementVNode("view",{class:"title"},"我是倾听师"),e.createElementVNode("view",{class:"use-public"},"2.5万同行 已服务了439万用户和家庭"),e.createElementVNode("view",{class:"add"},"立即加入")])])])}}},Or=ie(Rr,[["__scopeId","data-v-5714c051"]]),Br={__name:"application",setup(t){e.useCssVars((e=>({c3994c54:r.value})));const a=e.ref(0),n=ae(),r=e.ref(n.statusBarHeight+"px"),c=e.ref(!0),u=e.ref("申请成为咨询师"),m=e.ref("1"),p=e.ref([]),h=e.ref([]),v=e.ref(""),g=e.ref("");l((e=>{m.value=e.type,g.value=JSON.parse(e.userInfo),_(e.type),x()}));const f=e.reactive([{name:"时间自由",icon:"/static/settled/consultation-1.png",width:"90rpx",height:"87rpx"},{name:"收入可观",icon:"/static/settled/consultation-2.png",width:"90rpx",height:"85rpx"},{name:"操作便捷",icon:"/static/settled/consultation-3.png",width:"100rpx",height:"95rpx"}]),y=e.reactive([{name:"身份认证",icon:"/static/settled/consultation-4.png",width:"90rpx",height:"80rpx"},{name:"填写资料",icon:"/static/settled/consultation-5.png",width:"90rpx",height:"80rpx"},{name:"提交审核",icon:"/static/settled/consultation-6.png",width:"90rpx",height:"90rpx"}]),_=e=>{u.value="申请成为"+(1==e?"咨询师":"倾听师"),p.value=k(f,e,1),h.value=k(y,e,4)},k=(e,t,a)=>e.map(((e,n)=>({...e,icon:`/static/settled/${1==t?"consultation":"listen"}-${n+a}.png`}))),E=()=>{const e=1==m.value?"倾听师入驻协议":"咨询师入驻协议";uni.navigateTo({url:`/pages/webview/webview?type=${e}`})},x=async()=>{const e=1==m.value?"心理咨询师入驻条件":"倾听师入驻条件";try{const t={current:1,size:10,title:e};let{data:a}=await P(t);v.value=a.records[0].content}catch(t){o("log","at pages/settled/application.vue:216",t)}},N=()=>{c.value?uni.navigateTo({url:`/pages/auth/auth?type=${m.value}&userInfo=${JSON.stringify(g.value)}`}):uni.showToast({title:"请同意入驻协议",icon:"none"})};s((()=>{})),d((e=>{a.value=e.scrollTop}));const w=()=>{uni.navigateBack({delta:1})};return(t,n)=>{const o=i(e.resolveDynamicComponent("uni-icons"),re),r=i(e.resolveDynamicComponent("uni-nav-bar"),Di);return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("view",{class:e.normalizeClass(["settled-box",`settled-bg-${m.value}`])},[e.createElementVNode("view",{class:"header"},[e.createVNode(r,{class:e.normalizeClass([a.value>15?"scrollClass":"","header-bar"]),backgroundColor:"rgba(255,255,255,0)",border:!1,title:u.value},{left:e.withCtx((()=>[e.createVNode(o,{type:"left",size:"24",onClick:w})])),right:e.withCtx((()=>[e.createElementVNode("view",{class:"right"},[e.createElementVNode("image",{src:Ri,style:{width:"40rpx",height:"40rpx"}})])])),_:1},8,["class","title"])]),e.createElementVNode("view",{class:"content"},[e.createElementVNode("view",{class:"content-item"},[e.createElementVNode("view",{class:"title"},[e.createElementVNode("view",{class:e.normalizeClass(["label",`label-${m.value}`]),style:e.normalizeStyle({left:1==m.value?"29%":"34%"})},null,6),e.createElementVNode("text",null,"什么是"+e.toDisplayString(1==m.value?"心理咨询师":"倾听师"),1)]),e.createElementVNode("view",{class:"use-public"},e.toDisplayString(1==m.value?"心理咨询师":"倾听师")+"是协助求助者解决心理问题的人，心理咨询最一般、最主要的对象，是健康人群或存在心理问题的人群。",1)]),e.createElementVNode("view",{class:"content-item"},[e.createElementVNode("view",{class:"title"},[e.createElementVNode("view",{class:e.normalizeClass(["label",`label-${m.value}`]),style:e.normalizeStyle({left:1==m.value?"27%":"32%"})},null,6),e.createElementVNode("text",null,"成为"+e.toDisplayString(1==m.value?"心理咨询师":"倾听师")+"条件",1)]),e.createElementVNode("view",{class:"use-public",style:{"text-indent":"0"},innerHTML:v.value},null,8,["innerHTML"])]),e.createElementVNode("view",{class:"content-item"},[e.createElementVNode("view",{class:"title"},[e.createElementVNode("view",{class:e.normalizeClass(["label",`label-${m.value}`]),style:e.normalizeStyle({left:1==m.value?"27%":"32%"})},null,6),e.createElementVNode("text",null,"成为"+e.toDisplayString(1==m.value?"心理咨询师":"倾听师")+"好处",1)]),e.createElementVNode("view",{class:"use-public"},[e.createElementVNode("view",{class:"use-public process-box"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(p.value,((a,n)=>(e.openBlock(),e.createElementBlock("view",{class:"process",key:t.index},[e.createElementVNode("view",null,[e.createElementVNode("image",{src:a.icon,style:e.normalizeStyle({width:a.width,height:a.height})},null,12,["src"]),e.createElementVNode("view",null,e.toDisplayString(a.name),1)])])))),128))])])]),e.createElementVNode("view",{class:"content-item"},[e.createElementVNode("view",{class:"title"},[e.createElementVNode("view",{class:e.normalizeClass(["label",`label-${m.value}`]),style:{left:"39%"}},null,2),e.createElementVNode("text",null,"注册流程")]),e.createElementVNode("view",{class:"use-public process-box"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(h.value,((a,n)=>(e.openBlock(),e.createElementBlock("view",{class:"process",key:t.index},[e.createElementVNode("view",null,[e.createElementVNode("image",{src:a.icon,style:e.normalizeStyle({width:a.width,height:a.height})},null,12,["src"]),e.createElementVNode("view",null,e.toDisplayString(a.name),1)]),n<h.value.length-1?(e.openBlock(),e.createElementBlock("view",{key:0,class:e.normalizeClass(["triangle-right",`triangle-color-${m.value}`])},null,2)):e.createCommentVNode("",!0)])))),128))])])])],2),e.createElementVNode("view",null,[e.createElementVNode("view",{class:"agreement"},[e.createElementVNode("image",{src:`/static/auth/${c.value?1==m.value?"select-green":"select-yellow":"not-selected"}.png`,onClick:n[0]||(n[0]=e=>c.value=!c.value)},null,8,["src"]),e.createElementVNode("view",null,[e.createTextVNode("同意"),e.createElementVNode("text",{class:e.normalizeClass(`text-${m.value}`),onClick:E},"《"+e.toDisplayString(1==m.value?"咨询师":"倾听师")+"入驻协议》",3)])]),e.createElementVNode("button",{class:e.normalizeClass(["btn",`btn-${m.value}`]),onClick:N},"开始认证",2)])],64)}}},Pr=ie(Br,[["__scopeId","data-v-11e2ffe4"]]),Ur={__name:"consult-feel",setup(t){e.useCssVars((e=>({d9e1a7b2:n.value})));const a=ae(),n=e.ref(a.statusBarHeight+"px");e.ref("");const r=e.ref(0),s=e.ref({}),c=()=>{uni.navigateBack({delta:1})},u=e=>{r.value=e.detail.scrollTop},d=e.ref({targetUserId:"",page:1,pageSize:10});m((()=>{d.value.page+=1,v()}));const p=e.ref([]),h=e.ref([]),v=async()=>{let{data:e}=await Ci(d.value);p.value=e,h.value=[...h.value,...e.records]},g=e.ref({});return l((e=>{d.value.targetUserId=e.userId,s.value=JSON.parse(e.userInfo),(async e=>{let t=await ti({id:e});g.value=t.data})(JSON.parse(e.userInfo).id),o("log","at pages/consult-feel/consult-feel.vue:171",JSON.parse(e.userInfo).id),v()})),(t,a)=>{const n=i(e.resolveDynamicComponent("uni-icons"),re),o=i(e.resolveDynamicComponent("uni-nav-bar"),Di),l=i(e.resolveDynamicComponent("uni-rate"),Ai);return e.openBlock(),e.createElementBlock("view",{class:"evaluate-box"},[e.createElementVNode("scroll-view",{"scroll-y":"",class:"scroll-content",onScroll:u},[e.createElementVNode("view",{class:"evaluate-content"},[e.createVNode(o,{backgroundColor:r.value>15?"#fff":"transparent",border:!1,title:"咨询感受",class:"header-bar",statusBar:!0,fixed:""},{left:e.withCtx((()=>[e.createVNode(n,{type:"left",size:"24",onClick:c})])),right:e.withCtx((()=>[e.createElementVNode("view",{class:"right"},[e.createElementVNode("image",{src:Ri,style:{width:"40rpx",height:"40rpx"}})])])),_:1},8,["backgroundColor"]),e.createElementVNode("view",{class:"evaluate-info-box"},[e.createElementVNode("view",{class:"evaluate-info"},[e.createElementVNode("view",{class:"user-info"},[e.createElementVNode("view",{class:"picture"},[e.createElementVNode("image",{src:s.value.avatar,class:"img"},null,8,["src"])]),e.createElementVNode("view",{class:"user"},[e.createElementVNode("view",{class:"name"},e.toDisplayString(s.value.name),1),e.createElementVNode("view",{class:"title"},e.toDisplayString(s.value.occupationName),1)])]),e.createElementVNode("view",{class:"right",onClick:c},[e.createVNode(n,{type:"right",size:"18",color:"#B6B6C1"})])]),e.createElementVNode("view",{class:"evaluate-list-box"},[e.createElementVNode("view",{class:"header-title"},"咨询感受"),e.createElementVNode("view",{class:"score-content"},[e.createElementVNode("view",{class:"score"},[e.createElementVNode("view",{class:"star"},[e.createElementVNode("text",{class:"txt"},e.toDisplayString(g.value.rating),1),e.createVNode(l,{"allow-half":"",value:g.value.rating,readonly:"",size:"12"},null,8,["value"])]),e.createElementVNode("view",{class:"txt"},"推荐指数")]),e.createElementVNode("view",{class:"num"},[e.createElementVNode("view",null,[e.createElementVNode("view",{class:"txt"},e.toDisplayString(p.value.total)+"+",1),e.createElementVNode("view",{class:"txt1"},"真实评价")]),e.createElementVNode("view",null,[e.createElementVNode("view",{class:"txt"},e.toDisplayString(g.value.ratio)+"%",1),e.createElementVNode("view",{class:"txt1"},"满意度")])])]),e.createElementVNode("view",{class:e.normalizeClass(["sort-box",r.value>240?"sortBoxActive":""])},[e.createElementVNode("view",{class:"sort-content"},[e.createElementVNode("view",{class:"sort"},[e.createTextVNode("服务类型"),e.createElementVNode("image",{src:"/static/common/arrow.png",class:"img",style:{width:"20rpx",height:"20rpx"}})]),e.createElementVNode("view",{class:"sort"},[e.createTextVNode("默认排序"),e.createElementVNode("image",{src:"/static/common/sort.png",class:"img"})])])],2),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(h.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"content-list",key:a},[e.createElementVNode("view",{class:"content-header"},[e.createElementVNode("view",{class:"user-info"},[e.createElementVNode("view",null,[e.createElementVNode("image",{src:t.avatar,class:"picture"},null,8,["src"])]),e.createElementVNode("view",{class:"nickName"},e.toDisplayString(t.nickname),1)]),e.createElementVNode("view",{class:"date"},e.toDisplayString(t.createTime),1)]),e.createElementVNode("view",{class:"content"},[e.createVNode(e.unref(Pi),{line:2,expandText:"展开",foldHint:"收起"},{default:e.withCtx((()=>[e.createTextVNode(e.toDisplayString(t.content),1)])),_:2},1024)]),e.createElementVNode("view",{class:"evaluate-item"},[e.createElementVNode("text",{class:"item"},e.toDisplayString(t.tags),1)])])))),128))])])])],32)])}}},Gr=ie(Ur,[["__scopeId","data-v-79cdbf48"]]),Fr={__name:"evaluate",setup(t){e.useCssVars((e=>({"65ae0618":n.value})));const a=ae(),n=e.ref(a.statusBarHeight+"px");e.ref("");const r=e.ref(0),s=()=>{uni.navigateBack({delta:1})};l((e=>{u(e.userId)}));const c=e.ref([]),u=async e=>{let{data:t}=await Ci({targetUserId:e,page:1,pageSize:10});o("log","at pages/evaluate/evaluate.vue:115",t),c.value=t},d=e=>{r.value=e.detail.scrollTop};return(t,a)=>{const n=i(e.resolveDynamicComponent("uni-icons"),re),o=i(e.resolveDynamicComponent("uni-nav-bar"),Di),l=i(e.resolveDynamicComponent("uni-rate"),Ai);return e.openBlock(),e.createElementBlock("view",{class:"evaluate-box"},[e.createElementVNode("scroll-view",{"scroll-y":"",class:"scroll-content",onScroll:d,"show-scrollbar":!1},[e.createElementVNode("view",{class:"evaluate-content"},[e.createVNode(o,{backgroundColor:r.value>15?"#fff":"transparent",border:!1,title:"全部评价",class:"header-bar",statusBar:!0,fixed:""},{left:e.withCtx((()=>[e.createVNode(n,{type:"left",size:"24",onClick:s})])),right:e.withCtx((()=>[e.createElementVNode("view",{class:"right"},[e.createElementVNode("image",{src:Ri,style:{width:"40rpx",height:"40rpx"}})])])),_:1},8,["backgroundColor"]),e.createElementVNode("view",{class:"evaluate-info-box"},[e.createElementVNode("view",{class:"evaluate-list-box"},[e.createElementVNode("view",{class:"info"},[e.createElementVNode("view",{class:"feel-type-box"},[e.createElementVNode("view",{class:"first"},[e.createElementVNode("view",{class:"percent"},[e.createTextVNode("99"),e.createElementVNode("text",{class:"txt"},"%好评率")])]),e.createElementVNode("view",{class:"second"},[e.createElementVNode("view",{class:"second-item"},[e.createElementVNode("text",{class:"txt-1"},"真实评价"),e.createElementVNode("text",{class:"txt-2"},e.toDisplayString(c.value.total)+"条",1)]),e.createElementVNode("view",{class:"second-item"},[e.createElementVNode("text",{class:"txt-1"},"用户推荐"),e.createElementVNode("text",{class:"txt-2"},"100%")])])]),e.createElementVNode("view",{class:"comment-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.value.records,((t,a)=>{return e.openBlock(),e.createElementBlock("view",{class:"comment-item",key:a},[e.createElementVNode("view",{class:"user-box"},[e.createElementVNode("view",{class:"user-info"},[e.createElementVNode("image",{src:Bi,class:"img"}),e.createElementVNode("text",{class:"txt"},e.toDisplayString(t.nickname),1)]),e.createElementVNode("view",{class:"star"},[e.createVNode(l,{disabled:!0,disabledColor:"#FFC300",value:t.star,size:"12"},null,8,["value"])])]),e.createElementVNode("view",{class:"comment-content"},e.toDisplayString(t.content),1),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList((n=t.tags,(n??"").trim().split(",").filter((e=>e.trim()))),((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"tags",key:a},[e.createElementVNode("text",{class:"tag-item"},e.toDisplayString(t),1)])))),128)),e.createElementVNode("view",{class:"theme-date"},[e.createElementVNode("view",{class:"theme"},[e.createTextVNode(" 咨询主题："),e.createElementVNode("text",{class:"txt"},"心理压抑")]),e.createElementVNode("view",{class:"date"},e.toDisplayString(t.createTime),1)])]);var n})),128))])])])])])],32)])}}},qr=ie(Fr,[["__scopeId","data-v-fac2e9ea"]]),zr="/static/common/forum-fab.png",Hr="/static/common/zan.png",$r="/static/common/zan-active.png",jr="/static/common/msg.png",Kr="/static/common/share.png",Yr=ie({__name:"report",setup(t,{expose:a}){const n=e.ref(null),o=()=>{n.value.close()},r=[{id:1,label:"政治反动"},{id:2,label:"色情内容"},{id:3,label:"人身攻击"},{id:4,label:"抄袭侵权"},{id:5,label:"未成年人"},{id:6,label:"血腥暴力"},{id:7,label:"广告欺诈"},{id:8,label:"灌水"},{id:9,label:"自杀倾向"},{id:9,label:"其他"}];return a({openReport:()=>{n.value.open()},closeReport:o}),(t,a)=>{const s=i(e.resolveDynamicComponent("uni-icons"),re),l=i(e.resolveDynamicComponent("uni-popup"),vi);return e.openBlock(),e.createBlock(l,{ref_key:"report",ref:n,"background-color":"#fff","is-mask-click":!1,borderRadius:"24rpx 24rpx 0rpx 0rpx",type:"bottom"},{default:e.withCtx((()=>[e.createElementVNode("view",{class:"report-popup-box"},[e.createElementVNode("view",{class:"report-header"},[e.createElementVNode("view"),e.createElementVNode("view",{class:"title"},"选择举报理由"),e.createElementVNode("view",null,[e.createVNode(s,{type:"closeempty",size:"14",color:"rgba(0,0,0,0.3)",onClick:o})])]),e.createElementVNode("view",{class:"report-content-list"},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(r,((t,a)=>e.createElementVNode("view",{class:"report-content-item",key:a},e.toDisplayString(t.label),1))),64))])])])),_:1},512)}}},[["__scopeId","data-v-d571222b"]]),Wr=ie({__name:"share",setup(t,{expose:a}){const n=e.ref(null),r=e.ref(null),s=e.ref([{type:"wechat",img:"/static/share/wechat.svg",backgroundColor:"#00B578",text:"微信",imgWidth:"38rpx",imgHeight:"32rpx",fn:()=>new Function},{type:"friend",img:"/static/share/friend.svg",backgroundColor:"#00B578",text:"朋友圈",imgWidth:"32rpx",imgHeight:"32rpx",fn:()=>new Function},{type:"zone",img:"/static/share/zone.svg",backgroundColor:"#FFC300",text:"QQ空间",imgWidth:"38rpx",imgHeight:"32rpx",fn:()=>new Function},{type:"QQ",img:"/static/share/qq.svg",backgroundColor:"#43ADF9",text:"QQ",imgWidth:"26rpx",imgHeight:"30rpx",fn:()=>new Function},{type:"link",img:"/static/share/link.svg",backgroundColor:"rgba(0, 0, 0, 0.85)",text:"复制链接",imgWidth:"34rpx",imgHeight:"34rpx",fn:()=>new Function},{type:"report",img:"/static/share/report.svg",backgroundColor:"#f3f3f3",text:"举报",imgWidth:"36rpx",imgHeight:"28rpx",fn:()=>c()},{type:"delete",img:"/static/share/delete.svg",backgroundColor:"#f3f3f3",text:"删除",imgWidth:"32rpx",imgHeight:"30rpx",fn:()=>new Function}]),l=()=>{n.value.close()},c=()=>{o("log","at components/share/share.vue:106",1),l(),o("log","at components/share/share.vue:108",r.value),r.value.openReport()};return a({openShare:()=>{n.value.open()},closeShare:l}),(t,a)=>{const o=i(e.resolveDynamicComponent("uni-popup"),vi);return e.openBlock(),e.createElementBlock("view",null,[e.createVNode(o,{ref_key:"share",ref:n,"background-color":"#fff","is-mask-click":!1,borderRadius:"24rpx 24rpx 0rpx 0rpx",type:"bottom"},{default:e.withCtx((()=>[e.createElementVNode("view",{class:"share-popup-box"},[e.createElementVNode("view",{class:"share-content"},[e.createElementVNode("view",{class:"title"},"分享到"),e.createElementVNode("view",{class:"share-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"share-item",key:a,onClick:t.fn},[e.createElementVNode("view",{class:"share-item-img",style:e.normalizeStyle({backgroundColor:t.backgroundColor})},[e.createElementVNode("image",{src:t.img,class:"img",style:e.normalizeStyle({width:t.imgWidth,height:t.imgHeight}),mode:"widthFix"},null,12,["src"])],4),e.createElementVNode("view",{class:"txt"},e.toDisplayString(t.text),1)],8,["onClick"])))),128))]),e.createElementVNode("view",{class:"cancel",onClick:l}," 取消 ")])])])),_:1},512),e.createVNode(Yr,{ref_key:"reportRef",ref:r},null,512)])}}},[["__scopeId","data-v-37b3dbd2"]]),Jr=ie({__name:"worry",props:["statusBarHeight"],setup(t){const a=e.ref(null),n=e.reactive({listParams:{current:1,size:10,params:{}},list:[]}),o=e.ref([{id:0,label:"最新"},{id:1,label:"推荐"},{id:2,label:"关注"}]),r=e.ref(0);e.ref([{content:"测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",isZan:0,zanNum:536,isFollow:0},{content:"测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",isZan:1,zanNum:536,isFollow:1},{content:"测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",isZan:0,zanNum:536,isFollow:1},{content:"测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",isZan:0,zanNum:536,isFollow:1},{content:"测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",isZan:0,zanNum:536,isFollow:0},{content:"测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",isZan:0,zanNum:536,isFollow:0},{content:"测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",isZan:0,zanNum:536,isFollow:0},{content:"测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",isZan:0,zanNum:536,isFollow:0},{content:"测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",isZan:0,zanNum:536,isFollow:0},{content:"测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",isZan:0,zanNum:536,isFollow:0}]);const s=()=>{a.value.openShare()},l=()=>{uni.navigateTo({url:"/pages/forum/other/other"})},c=async()=>{let e=await((e,t={})=>A.post("/api/emotion/emotion/getEmotionList",e,t))(n.listParams);n.list=e.data.records};return e.onMounted((()=>{c()})),(t,c)=>{const u=i(e.resolveDynamicComponent("uni-icons"),re);return e.openBlock(),e.createElementBlock("view",{class:"forum-index-content"},[e.createElementVNode("view",{class:"tabs"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{onClick:e=>{return a=t,void(r.value!=a.id&&(r.value=a.id));var a},class:e.normalizeClass(["tab-item",r.value==t.id?"active":""]),key:a},e.toDisplayString(t.label),11,["onClick"])))),128))]),e.createElementVNode("view",{class:"forum-index-list"},[e.createElementVNode("scroll-view",{"scroll-y":"true",class:"scroll-content","show-scrollbar":!1},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.list,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"forum-index-list-item",key:a},[e.createElementVNode("view",{class:"item-header"},[e.createElementVNode("view",{class:"item-header-left",onClick:l},[e.createElementVNode("view",{class:"header-pic"},[e.createElementVNode("image",{src:Bi,class:"img"})]),e.createElementVNode("view",{class:"header-info"},[e.createElementVNode("view",{class:"name"},e.toDisplayString(t.realName),1),e.createElementVNode("view",{class:"time"},"52分钟前")])]),e.createElementVNode("view",{class:"item-header-right"},[2!=r.value?(e.openBlock(),e.createElementBlock("view",{key:0},[0==t.isFollow?(e.openBlock(),e.createElementBlock("view",{key:0,class:"follow"},[e.createVNode(u,{type:"plusempty",size:"12",color:"#35CA95"}),e.createTextVNode("关注")])):(e.openBlock(),e.createElementBlock("view",{key:1,class:"follow isFollow"},"已关注"))])):e.createCommentVNode("",!0),e.createElementVNode("view",null,[e.createVNode(u,{type:"more-filled",size:"18",color:"#808080"})])])]),e.createElementVNode("view",{class:"item-content"},[e.createVNode(e.unref(Pi),{line:5,expandText:"展开",foldHint:"收起"},{default:e.withCtx((()=>[e.createTextVNode(e.toDisplayString(t.content),1)])),_:2},1024)]),e.createElementVNode("view",{class:"item-btn"},[0==t.isZan?(e.openBlock(),e.createElementBlock("view",{key:0},[e.createElementVNode("image",{src:Hr,class:"img"}),e.createTextVNode("点赞 ")])):(e.openBlock(),e.createElementBlock("view",{key:1},[e.createElementVNode("image",{src:$r,class:"img"}),e.createTextVNode(e.toDisplayString(t.zanNum),1)])),e.createElementVNode("view",null,[e.createElementVNode("image",{src:jr,class:"img"}),e.createTextVNode("评论 ")]),e.createElementVNode("view",null,[e.createElementVNode("image",{src:Kr,class:"img",onClick:s}),e.createTextVNode("分享 ")])])])))),128))])]),e.createVNode(Wr,{ref_key:"sharePopup",ref:a},null,512)])}}},[["__scopeId","data-v-c8cd321d"]]),Zr=ie({__name:"qa",setup(t){const a=e.ref(null),n=e.reactive({listParams:{current:1,size:10,params:{}},list:[]}),r=e.ref([]),s=e.ref([{id:0,label:"最新"},{id:1,label:"推荐"}]),l=e.ref(0);e.ref([{content:"测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",isZan:0,zanNum:536,isFollow:0}]);const c=()=>{a.value.openShare()};(async()=>{let e=await((e,t={})=>A.get("/api/answer/answer/hotList",e,t))();o("log","at pages/forum/index/components/qa.vue:122",e),r.value=e.data})();return e.onMounted((()=>{(async()=>{let e=await Yi(n.listParams);o("log","at pages/forum/index/components/qa.vue:116",e),n.list=e.data.records})()})),(t,u)=>{const d=i(e.resolveDynamicComponent("uni-icons"),re);return e.openBlock(),e.createElementBlock("view",{class:"forum-index-content"},[e.createElementVNode("view",{class:"header"},[e.createElementVNode("text",{class:"num"},"172,567"),e.createTextVNode(" 个问题在这里收获了答案")]),e.createElementVNode("scroll-view",{"scroll-x":"true",class:"scroll-content-x","show-scrollbar":!1},[e.createElementVNode("view",{class:"qa-content-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"qa-content-item",key:a},[e.createElementVNode("view",{class:"item-box"},[e.createElementVNode("view",{class:"title"},e.toDisplayString(t.title),1),e.createElementVNode("view",{class:"content"},[e.createElementVNode("text",{class:"txt"},e.toDisplayString(null==t.totalComment?0:t.totalComment)+" 个回答",1),e.createVNode(d,{type:"help-filled",size:"14",color:"rgba(104, 117, 129, 1)"})])])])))),128))])]),e.createElementVNode("view",{class:"tabs"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{onClick:e=>{return a=t,void(l.value!=a.id&&(l.value=a.id));var a},class:e.normalizeClass(["tab-item",l.value==t.id?"active":""]),key:a},e.toDisplayString(t.label),11,["onClick"])))),128))]),e.createElementVNode("view",{class:"forum-index-list"},[e.createElementVNode("scroll-view",{"scroll-y":"true",class:"scroll-content","show-scrollbar":!1},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.list,(a=>(e.openBlock(),e.createElementBlock("view",{class:"forum-index-list-item",key:t.index,onClick:e=>{return o("log","at pages/forum/index/components/qa.vue:128","===================="+(t=a.id)),void uni.navigateTo({url:"/pages/forum/index/qaDetail?id="+t});var t}},[e.createElementVNode("view",{class:"question"},[e.createElementVNode("image",{src:"/static/forum/question.svg",class:"img"}),e.createElementVNode("text",{class:"txt"},e.toDisplayString(a.title),1)]),e.createElementVNode("view",{class:"item-header"},[e.createElementVNode("view",{class:"item-header-left"},[e.createElementVNode("view",{class:"header-pic"},[e.createElementVNode("image",{src:null==a.avatar?"@/static/my/profile.png":a.avatar,class:"img"},null,8,["src"]),e.createElementVNode("view",{class:"name"},e.toDisplayString(a.realName),1),e.createElementVNode("text",{class:"tip"},"咨询师")])])]),e.createElementVNode("view",{class:"item-content"},[e.createVNode(e.unref(Pi),{line:5,expandText:"展开",foldHint:"收起"},{default:e.withCtx((()=>[e.createTextVNode(e.toDisplayString(a.content),1)])),_:2},1024)]),e.createElementVNode("view",{class:"item-btn"},[0==a.isZan?(e.openBlock(),e.createElementBlock("view",{key:0},[e.createElementVNode("image",{src:Hr,class:"img"}),e.createTextVNode("点赞 ")])):(e.openBlock(),e.createElementBlock("view",{key:1},[e.createElementVNode("image",{src:$r,class:"img"}),e.createTextVNode(e.toDisplayString(a.zanNum),1)])),e.createElementVNode("view",null,[e.createElementVNode("image",{src:jr,class:"img"}),e.createTextVNode("评论 ")]),e.createElementVNode("view",null,[e.createElementVNode("image",{src:Kr,class:"img",onClick:c}),e.createTextVNode("分享 ")]),e.createElementVNode("view",null,[e.createVNode(d,{type:"more-filled",size:"18",color:"#808080"})])])],8,["onClick"])))),128))])]),e.createVNode(Wr,{ref_key:"sharePopup",ref:a},null,512)])}}},[["__scopeId","data-v-3b2077e6"]]),Xr=ie({__name:"index",setup(t){e.useCssVars((e=>({e340955e:n.value})));const a=ae(),n=e.ref(a.statusBarHeight+"px");e.ref(0);const o=e.ref([{id:0,label:"心事"},{id:1,label:"问答"}]),r=e.ref(0),s=()=>{uni.navigateTo({url:"/pages/forum/write/write"})},l=()=>{uni.navigateBack({delta:1})},c=()=>{uni.navigateTo({url:"/pages/forum/my/my"})};return(t,a)=>{const n=i(e.resolveDynamicComponent("uni-icons"),re);return e.openBlock(),e.createElementBlock("view",{class:"forum-index-box"},[e.createElementVNode("view",{class:"navbar"},[e.createElementVNode("view",{class:"header"},[e.createElementVNode("view",{class:"left"},[e.createVNode(n,{type:"left",size:"24",color:"#000",onClick:l}),e.createElementVNode("view",{class:"tabs"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.value,((t,a)=>(e.openBlock(),e.createElementBlock("text",{class:e.normalizeClass(["tab-item",r.value==t.id?"active":""]),onClick:e=>{return a=t,void(r.value!=a.id&&(r.value=a.id));var a},key:a},e.toDisplayString(t.label),11,["onClick"])))),128))])]),e.createElementVNode("view",{class:"user",onClick:c},[e.createVNode(n,{type:"person",size:"24",color:"rgba(0,0,0,.85)"})])])]),0==r.value?(e.openBlock(),e.createElementBlock("view",{key:0,class:"worry-box"},[e.createVNode(Jr)])):(e.openBlock(),e.createElementBlock("view",{key:1,class:"qa-box"},[e.createVNode(Zr)])),e.createElementVNode("view",{class:"fab-button",onClick:s},[e.createElementVNode("image",{src:zr,class:"img"})])])}}},[["__scopeId","data-v-9e0d2d4c"]]),Qr=ie({__name:"write",setup(t){const a=()=>{uni.navigateBack({delta:1})},n=e=>{uni.navigateTo({url:e})};return(t,o)=>{const r=i(e.resolveDynamicComponent("uni-icons"),re);return e.openBlock(),e.createElementBlock("view",{class:"write-box"},[e.createElementVNode("view",{class:"write-header"},[e.createElementVNode("view",{class:"title"},"每个灵魂都值得被看见"),e.createElementVNode("view",{class:"remark"},"出自 / 旅行社")]),e.createElementVNode("view",{class:"operate-list-box"},[e.createElementVNode("view",{class:"operate-first"},[e.createElementVNode("view",{class:"first-item green",onClick:o[0]||(o[0]=e=>n("/pages/forum/write/send-dynamics/send-dynamics"))},[e.createElementVNode("view",{class:"title"},"发心事"),e.createElementVNode("view",{class:"content"},"此时此刻，随时记录收获爱与温暖"),e.createElementVNode("image",{src:"/static/forum/send.svg",class:"img"})]),e.createElementVNode("view",{class:"first-item yellow",onClick:o[1]||(o[1]=e=>n("/pages/forum/write/ask-question/ask-question"))},[e.createElementVNode("view",{class:"title"},"提问题"),e.createElementVNode("view",{class:"content"},"7万+7万+专业咨询师为你答疑解惑"),e.createElementVNode("image",{src:"/static/forum/qa.svg",class:"img"})])]),e.createElementVNode("view",{class:"txt"},"写给自己的一封信"),e.createElementVNode("view",{class:"operate-second"},[e.createElementVNode("view",{class:"second-item one"},[e.createElementVNode("view",{class:"title",onClick:o[2]||(o[2]=e=>n("/pages/forum/write/write-mailbox/write-mailbox?type=old"))},"从前"),e.createElementVNode("view",{class:"content"},"写给从前的一封信")]),e.createElementVNode("view",{class:"second-item two"},[e.createElementVNode("view",{class:"title",onClick:o[3]||(o[3]=e=>n("/pages/forum/write/write-mailbox/write-mailbox?type=new"))},"现在"),e.createElementVNode("view",{class:"content"},"写给现在的一封信")]),e.createElementVNode("view",{class:"second-item three"},[e.createElementVNode("view",{class:"title",onClick:o[4]||(o[4]=e=>n("/pages/forum/write/write-mailbox/write-mailbox?type=future"))},"未来"),e.createElementVNode("view",{class:"content"},"写给未来的一封信")])]),e.createElementVNode("view",{class:"close"},[e.createVNode(r,{type:"close",size:"24",color:"rgba(0,0,0,0.3)",onClick:a})])])])}}},[["__scopeId","data-v-121d31d0"]]);let es="data:image/jpg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAAA8AAD/4QMraHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjMtYzAxMSA2Ni4xNDU2NjEsIDIwMTIvMDIvMDYtMTQ6NTY6MjcgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDUzYgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjREMEQwRkY0RjgwNDExRUE5OTY2RDgxODY3NkJFODMxIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjREMEQwRkY1RjgwNDExRUE5OTY2RDgxODY3NkJFODMxIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NEQwRDBGRjJGODA0MTFFQTk5NjZEODE4Njc2QkU4MzEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NEQwRDBGRjNGODA0MTFFQTk5NjZEODE4Njc2QkU4MzEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7/7gAOQWRvYmUAZMAAAAAB/9sAhAAGBAQEBQQGBQUGCQYFBgkLCAYGCAsMCgoLCgoMEAwMDAwMDBAMDg8QDw4MExMUFBMTHBsbGxwfHx8fHx8fHx8fAQcHBw0MDRgQEBgaFREVGh8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx//wAARCADIAMgDAREAAhEBAxEB/8QAcQABAQEAAwEBAAAAAAAAAAAAAAUEAQMGAgcBAQAAAAAAAAAAAAAAAAAAAAAQAAIBAwICBgkDBQAAAAAAAAABAhEDBCEFMVFBYXGREiKBscHRMkJSEyOh4XLxYjNDFBEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEQMRAD8A/fAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHbHFyZ/Dam+yLA+Z2L0Pjtyj2poD4AAAAAAAAAAAAAAAAAAAAAAAAKWFs9y6lcvvwQeqj8z9wFaziY1n/HbUX9XF97A7QAGXI23EvJ1goyfzR0YEfN269jeZ+a03pNe0DIAAAAAAAAAAAAAAAAAAAACvtO3RcVkXlWutuL9YFYAAAAAOJRjKLjJVi9GmB5/csH/mu1h/in8PU+QGMAAAAAAAAAAAAAAAAAAaMDG/6MmMH8C80+xAelSSVFolwQAAAAAAAHVlWI37ErUulaPk+hgeYnCUJuElSUXRrrQHAAAAAAAAAAAAAAAAABa2Oz4bM7r4zdF2ICmAAAAAAAAAg7zZ8GX41wuJP0rRgYAAAAAAAAAAAAAAAAAD0m2R8ODaXU33tsDSAAAAAAAAAlb9HyWZcnJd9PcBHAAAAAAAAAAAAAAAAAPS7e64Vn+KA0AAAAAAAAAJm+v8Ftf3ewCKAAAAAAAAAAAAAAAAAX9muqeGo9NttP06+0DcAAAAAAAAAjb7dTu2ra+VOT9P8AQCWAAAAAAAAAAAAAAAAAUNmyPt5Ltv4bui/kuAF0AAAAAAADiUlGLlJ0SVW+oDzOXfd/Ind6JPRdS0QHSAAAAAAAAAAAAAAAAAE2nVaNcGB6Lbs6OTao9LsF51z60BrAAAAAABJ3jOVHjW3r/sa9QEgAAAAAAAAAAAAAAAAAAAPu1duWriuW34ZR4MC9hbnZyEoy8l36XwfYBsAAADaSq9EuLAlZ+7xSdrGdW9Hc5dgEdtt1erfFgAAAAAAAAAAAAAAAAADVjbblX6NR8MH80tEBRs7HYivyzlN8lovaBPzduvY0m6eK10TXtAyAarO55lpJK54orolr+4GqO/Xaea1FvqbXvA+Z77kNeW3GPbV+4DJfzcm/pcm3H6Vou5AdAFLC2ed2Pjv1txa8sV8T6wOL+yZEKu1JXFy4MDBOE4ScZxcZLinoB8gAAAAAAAAAAAB242LeyJ+C3GvN9C7QLmJtePYpKS+5c+p8F2IDYAANJqj1T4oCfk7Nj3G5Wn9qXJax7gJ93Z82D8sVNc4v30A6Xg5i42Z+iLfqARwcyT0sz9MWvWBps7LlTf5Grce9/oBTxdtxseklHxT+uWr9AGoAB138ezfj4bsFJdD6V2MCPm7RdtJzs1uW1xXzL3gTgAAAAAAAAADRhYc8q74I6RWs5ckB6GxYtWLat21SK731sDsAAAAAAAAAAAAAAAASt021NO/YjrxuQXT1oCOAAAAAAABzGLlJRSq26JAelwsWONYjbXxcZvmwO8AAAAAAAAAAAAAAAAAAef3TEWPkVivx3NY9T6UBiAAAAAABo2+VmGXblddIJ8eivRUD0oAAAAAAAAAAAAAAAAAAAYt4tKeFKVNYNSXfRgefAAAAAAAAr7VuSSWPedKaW5v1MCsAAAAAAAAAAAAAAAAAAIe6bj96Ts2n+JPzSXzP3ATgAAAAAAAAFbbt1UUrOQ9FpC4/UwK6aaqtU+DAAAAAAAAAAAAAAA4lKMIuUmoxWrb4ARNx3R3q2rLpa4Sl0y/YCcAAAAAAAAAAANmFud7G8r89r6X0dgFvGzLGRGtuWvTF6NAdwAAAAAAAAAAAy5W442PVN+K59EePp5ARMvOv5MvO6QXCC4AZwAAAAAAAAAAAAAcxlKLUotprg1owN+PvORborq+7Hnwl3gUbO74VzRydt8pKn68ANcJwmqwkpLmnUDkAAAAfNy9atqtyagut0AxXt5xIV8Fbj6lRd7Am5G65V6qUvtwfyx94GMAAAAAAAAAAAAAAAAAAAOU2nVOj5gdsc3LiqRvTpyqwOxbnnrhdfpSfrQB7pnv/AGvuS9gHXPMy5/Fem1yq0v0A6W29XqwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAf//Z";const ts=ie({name:"u-avatar",emits:["click"],props:{bgColor:{type:String,default:"transparent"},src:{type:[String,null],default:""},size:{type:[String,Number],default:"default"},mode:{type:String,default:"circle"},text:{type:String,default:""},imgMode:{type:String,default:"aspectFill"},index:{type:[String,Number],default:""},sexIcon:{type:[String,null],default:"man"},levelIcon:{type:String,default:"level"},levelBgColor:{type:String,default:""},sexBgColor:{type:String,default:""},showSex:{type:Boolean,default:!1},showLevel:{type:Boolean,default:!1}},data(){return{error:!1,avatar:this.src?this.src:es}},watch:{src(e){e?(this.avatar=e,this.error=!1):(this.avatar=es,this.error=!0)}},computed:{wrapStyle(){let e={};return e.height="large"==this.size?"120rpx":"default"==this.size?"90rpx":"mini"==this.size?"70rpx":this.size+"rpx",e.width=e.height,e.flex=`0 0 ${e.height}`,e.backgroundColor=this.bgColor,e.borderRadius="circle"==this.mode?"500px":"5px",this.text&&(e.padding="0 6rpx"),e},imgStyle(){let e={};return e.borderRadius="circle"==this.mode?"500px":"5px",e},uText(){return String(this.text)[0]},uSexStyle(){let e={};return this.sexBgColor&&(e.backgroundColor=this.sexBgColor),e},uLevelStyle(){let e={};return this.levelBgColor&&(e.backgroundColor=this.levelBgColor),e}},methods:{loadError(){this.error=!0,this.avatar=es},click(){this.$emit("click",this.index)}}},[["render",function(t,a,n,o,r,s){const l=i(e.resolveDynamicComponent("u-icon"),Po);return e.openBlock(),e.createElementBlock("view",{class:"u-avatar",style:e.normalizeStyle([s.wrapStyle]),onClick:a[1]||(a[1]=(...e)=>s.click&&s.click(...e))},[!s.uText&&r.avatar?(e.openBlock(),e.createElementBlock("image",{key:0,onError:a[0]||(a[0]=(...e)=>s.loadError&&s.loadError(...e)),style:e.normalizeStyle([s.imgStyle]),class:"u-avatar__img",src:r.avatar,mode:n.imgMode},null,44,["src","mode"])):s.uText?(e.openBlock(),e.createElementBlock("text",{key:1,class:"u-line-1",style:{fontSize:"38rpx"}},e.toDisplayString(s.uText),1)):e.renderSlot(t.$slots,"default",{key:2},void 0,!0),n.showSex&&n.sexIcon?(e.openBlock(),e.createElementBlock("view",{key:3,class:e.normalizeClass(["u-avatar__sex",["u-avatar__sex--"+n.sexIcon]]),style:e.normalizeStyle([s.uSexStyle])},[n.sexIcon?(e.openBlock(),e.createBlock(l,{key:0,name:n.sexIcon,size:"20"},null,8,["name"])):e.createCommentVNode("",!0)],6)):e.createCommentVNode("",!0),n.showLevel?(e.openBlock(),e.createElementBlock("view",{key:4,class:"u-avatar__level",style:e.normalizeStyle([s.uLevelStyle])},[e.createVNode(l,{name:n.levelIcon,size:"20"},null,8,["name"])],4)):e.createCommentVNode("",!0)],4)}],["__scopeId","data-v-8a2dacc8"]]),as=ie({__name:"mood-log",setup(t){const a=e.ref(null);e.ref([{id:0,label:"最新"},{id:1,label:"推荐"},{id:2,label:"关注"}]),e.ref(0);const n=e.reactive({listParams:{current:1,size:10,params:{}},list:[]});e.ref([{content:"测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",isZan:0,zanNum:536,isFollow:0},{content:"测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",isZan:1,zanNum:536,isFollow:1},{content:"测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",isZan:0,zanNum:536,isFollow:1},{content:"测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",isZan:0,zanNum:536,isFollow:1},{content:"测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",isZan:0,zanNum:536,isFollow:0},{content:"测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",isZan:0,zanNum:536,isFollow:0},{content:"测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",isZan:0,zanNum:536,isFollow:0},{content:"测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",isZan:0,zanNum:536,isFollow:0},{content:"测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",isZan:0,zanNum:536,isFollow:0},{content:"测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",isZan:0,zanNum:536,isFollow:0}]);const o=()=>{a.value.openShare()};return e.onMounted((()=>{(async()=>{let e=await Ki(n.listParams);n.list=e.data.records})()})),(t,r)=>{const s=i(e.resolveDynamicComponent("uni-icons"),re);return e.openBlock(),e.createElementBlock("view",{class:"forum-index-mood-log-content"},[e.createElementVNode("view",{class:"forum-index-list"},[e.createElementVNode("scroll-view",{"scroll-y":"true",class:"scroll-content","show-scrollbar":!1},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.list,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"forum-index-list-item",key:a},[e.createElementVNode("view",{class:"item-header"},[e.createElementVNode("view",{class:"item-header-left"},[e.createElementVNode("view",{class:"header-pic"},[e.createElementVNode("image",{src:Bi,class:"img"})]),e.createElementVNode("view",{class:"header-info"},[e.createElementVNode("view",{class:"name"},"张三"),e.createElementVNode("view",{class:"time"},"52分钟前")])]),e.createElementVNode("view",{class:"item-header-right"},[e.createElementVNode("view",null,[e.createVNode(s,{type:"more-filled",size:"18",color:"#808080"})])])]),e.createElementVNode("view",{class:"item-content"},[e.createVNode(e.unref(Pi),{line:5,expandText:"展开",foldHint:"收起"},{default:e.withCtx((()=>[e.createTextVNode(e.toDisplayString(t.content),1)])),_:2},1024)]),e.createElementVNode("view",{class:"item-btn"},[0==t.isZan?(e.openBlock(),e.createElementBlock("view",{key:0},[e.createElementVNode("image",{src:Hr,class:"img"}),e.createTextVNode("点赞 ")])):(e.openBlock(),e.createElementBlock("view",{key:1},[e.createElementVNode("image",{src:$r,class:"img"}),e.createTextVNode(e.toDisplayString(t.zanNum),1)])),e.createElementVNode("view",null,[e.createElementVNode("image",{src:jr,class:"img"}),e.createTextVNode("评论 ")]),e.createElementVNode("view",null,[e.createElementVNode("image",{src:Kr,class:"img",onClick:o}),e.createTextVNode("分享 ")])])])))),128))])]),e.createVNode(Wr,{ref_key:"sharePopup",ref:a},null,512)])}}},[["__scopeId","data-v-d070e590"]]),ns=ie({__name:"mail-box",setup(t){const a=e.ref([{title:"写给从前的自己一封信",type:"old",content:"从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前"},{title:"写给现在的自己一封信",type:"new",content:"现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在"},{title:"写给未来的自己一封信",type:"future",content:"未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来"}]);return(t,n)=>(e.openBlock(),e.createElementBlock("view",{class:"mailbox-box"},[e.createElementVNode("scroll-view",{"scroll-y":"true",class:"scroll-content","show-scrollbar":!1},[e.createElementVNode("view",{class:"mailbox-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["mailbox-item",t.type]),key:a,onClick:e=>(e=>{uni.navigateTo({url:`/pages/forum/mailbox/mailbox?type=${e.type}`})})(t)},[e.createElementVNode("view",{class:"content-item"},[e.createElementVNode("view",{class:"title"},e.toDisplayString(t.title),1),e.createElementVNode("view",{class:"content"},[e.createVNode(e.unref(Pi),{line:4,expandText:"展开",foldHint:"收起"},{default:e.withCtx((()=>[e.createTextVNode(e.toDisplayString(t.content),1)])),_:2},1024)])]),e.createElementVNode("image",{src:"old"==t.type?"@/static/forum/old-arrow.png":"new"==t.type?"@/static/forum/new-arrow.png":"@/static/forum/future-arrow.png",class:"img"},null,8,["src"])],10,["onClick"])))),128))])])]))}},[["__scopeId","data-v-3e076d6f"]]),os=ie({__name:"article-box",setup(t){e.ref([{title:"写给从前的自己一封信",type:"old",content:"从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前"},{title:"写给现在的自己一封信",type:"new",content:"现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在"},{title:"写给未来的自己一封信",type:"future",content:"未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来"}]);const a=e.reactive({listParams:{current:1,size:10,params:{}},list:[]}),n=async()=>{let e=await((e,t={})=>A.post("/api/article/article/getArticleByUserId",e,t))(a.listParams);a.list=e.data.records};return e.onMounted((()=>{n()})),(t,n)=>(e.openBlock(),e.createElementBlock("view",{class:"mailbox-box"},[e.createElementVNode("scroll-view",{"scroll-y":"true",class:"scroll-content","show-scrollbar":!1},[e.createElementVNode("view",{class:"mailbox-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.list,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["mailbox-item",t.type]),key:a,onClick:e=>(e=>{uni.navigateTo({url:`/pages/forum/mailbox/mailbox?type=${e.type}`})})(t)},[e.createElementVNode("view",{class:"content-item"},[e.createElementVNode("view",{class:"title"},e.toDisplayString(t.title),1),e.createElementVNode("view",{class:"content"},[e.createVNode(e.unref(Pi),{line:4,expandText:"展开",foldHint:"收起"},{default:e.withCtx((()=>[e.createTextVNode(e.toDisplayString(t.content),1)])),_:2},1024)])]),e.createElementVNode("image",{src:"old"==t.type?"@/static/forum/old-arrow.png":"new"==t.type?"@/static/forum/new-arrow.png":"@/static/forum/future-arrow.png",class:"img"},null,8,["src"])],10,["onClick"])))),128))])])]))}},[["__scopeId","data-v-c31ce33d"]]),is=ie({__name:"my",setup(t){e.useCssVars((e=>({"4123fcec":n.value})));const a=ae(),n=e.ref(a.statusBarHeight+"px");e.ref(0);const r=e.ref([{id:0,label:"心情日志"},{id:1,label:"信箱"},{id:2,label:"文章"}]),s=e.ref({}),l=e.ref(0),c=()=>{uni.navigateTo({url:"/pages/forum/write/write"})},u=()=>{uni.navigateBack({delta:1})},d=()=>{uni.navigateTo({url:"/pages/forum/my/userInfo"})};return e.onMounted((()=>{(async()=>{let e=await R();s.value=e.data,o("log","at pages/forum/my/my.vue:128","userInfo",s.value)})()})),(t,a)=>{const n=i(e.resolveDynamicComponent("uni-icons"),re),o=i(e.resolveDynamicComponent("u-avatar"),ts);return e.openBlock(),e.createElementBlock("view",{class:"forum-my-box"},[e.createElementVNode("view",{class:"navbar"},[e.createElementVNode("view",{class:"header"},[e.createVNode(n,{type:"left",size:"24",color:"#000",onClick:u,class:"left"})]),e.createElementVNode("view",{class:"user-info"},[e.createElementVNode("view",{class:"user-info-content"},[e.createVNode(o,{src:null==s.value.avatar?"@/static/my/profile.png":s.value.avatar,class:"profile"},null,8,["src"]),e.createElementVNode("view",null,[e.createElementVNode("view",{class:"nick-name"},e.toDisplayString(s.value.realName),1),e.createElementVNode("view",{class:"id-num"},[e.createElementVNode("text",null,"ID："+e.toDisplayString(s.value.id),1)])])]),e.createElementVNode("view",{class:"edit-user-box"},[e.createElementVNode("view",{class:"edit-user",onClick:d},"编辑资料")])]),e.createElementVNode("view",{class:"remark"},"倾听师寄语倾听师寄语倾听师寄语倾听师寄"),e.createElementVNode("view",{class:"num-box"},[e.createElementVNode("view",{class:"num-content-box"},[e.createElementVNode("view",{class:"content-item"},[e.createElementVNode("text",{class:"num"},"9999"),e.createElementVNode("text",{class:"txt"},"获赞")]),e.createElementVNode("view",{class:"content-item"},[e.createElementVNode("text",{class:"num"},"9999"),e.createElementVNode("text",{class:"txt"},"关注")]),e.createElementVNode("view",{class:"content-item"},[e.createElementVNode("text",{class:"num"},"9999"),e.createElementVNode("text",{class:"txt"},"粉丝")]),e.createElementVNode("view",{class:"content-item"},[e.createElementVNode("text",{class:"num"},"9999"),e.createElementVNode("text",{class:"txt"},"访客")])])])]),e.createElementVNode("view",{class:"tabs"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{onClick:e=>{return a=t,void(l.value!=a.id&&(l.value=a.id));var a},class:e.normalizeClass(["tab-item",l.value==t.id?"active":""]),key:a},e.toDisplayString(t.label),11,["onClick"])))),128))]),0==l.value?(e.openBlock(),e.createElementBlock("view",{key:0,class:"mood-log-box"},[e.createVNode(as)])):1==l.value?(e.openBlock(),e.createElementBlock("view",{key:1,class:"mood-log-box mailbox-box"},[e.createVNode(ns)])):2==l.value?(e.openBlock(),e.createElementBlock("view",{key:2,class:"mood-log-box mailbox-box"},[e.createVNode(os)])):e.createCommentVNode("",!0),e.createElementVNode("view",{class:"fab-button",onClick:c},[e.createElementVNode("image",{src:zr,class:"img"})])])}}},[["__scopeId","data-v-c6c96685"]]),rs=ie({__name:"dynamics-log",setup(t){const a=e.ref(null);e.ref([{id:0,label:"最新"},{id:1,label:"推荐"},{id:2,label:"关注"}]),e.ref(0);const n=e.ref([{content:"测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",isZan:0,zanNum:536,isFollow:0},{content:"测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",isZan:1,zanNum:536,isFollow:1},{content:"测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",isZan:0,zanNum:536,isFollow:1},{content:"测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",isZan:0,zanNum:536,isFollow:1},{content:"测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",isZan:0,zanNum:536,isFollow:0},{content:"测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",isZan:0,zanNum:536,isFollow:0},{content:"测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",isZan:0,zanNum:536,isFollow:0},{content:"测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",isZan:0,zanNum:536,isFollow:0},{content:"测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",isZan:0,zanNum:536,isFollow:0},{content:"测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",isZan:0,zanNum:536,isFollow:0}]),o=()=>{a.value.openShare()};return(t,r)=>{const s=i(e.resolveDynamicComponent("uni-icons"),re);return e.openBlock(),e.createElementBlock("view",{class:"forum-index-dynamics-log-content"},[e.createElementVNode("view",{class:"forum-index-list"},[e.createElementVNode("scroll-view",{"scroll-y":"true",class:"scroll-content","show-scrollbar":!1},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"forum-index-list-item",key:a},[e.createElementVNode("view",{class:"item-header"},[e.createElementVNode("view",{class:"item-header-left"},[e.createElementVNode("view",{class:"header-pic"},[e.createElementVNode("image",{src:Bi,class:"img"})]),e.createElementVNode("view",{class:"header-info"},[e.createElementVNode("view",{class:"name"},"张三"),e.createElementVNode("view",{class:"time"},"52分钟前")])]),e.createElementVNode("view",{class:"item-header-right"},[e.createElementVNode("view",null,[e.createVNode(s,{type:"more-filled",size:"18",color:"#808080"})])])]),e.createElementVNode("view",{class:"item-content"},[e.createVNode(e.unref(Pi),{line:5,expandText:"展开",foldHint:"收起"},{default:e.withCtx((()=>[e.createTextVNode(e.toDisplayString(t.content),1)])),_:2},1024)]),e.createElementVNode("view",{class:"item-btn"},[0==t.isZan?(e.openBlock(),e.createElementBlock("view",{key:0},[e.createElementVNode("image",{src:Hr,class:"img"}),e.createTextVNode("点赞 ")])):(e.openBlock(),e.createElementBlock("view",{key:1},[e.createElementVNode("image",{src:$r,class:"img"}),e.createTextVNode(e.toDisplayString(t.zanNum),1)])),e.createElementVNode("view",null,[e.createElementVNode("image",{src:jr,class:"img"}),e.createTextVNode("评论 ")]),e.createElementVNode("view",null,[e.createElementVNode("image",{src:Kr,class:"img",onClick:o}),e.createTextVNode("分享 ")])])])))),128))])]),e.createVNode(Wr,{ref_key:"sharePopup",ref:a},null,512)])}}},[["__scopeId","data-v-6d06f8d0"]]),ss=ie({__name:"other",setup(t){e.useCssVars((e=>({"31c723f0":n.value})));const a=ae(),n=e.ref(a.statusBarHeight+"px");e.ref(0);const o=e.ref(!1),r=e.ref([{id:0,label:"动态"}]),s=e.ref(0),l=()=>{uni.navigateBack({delta:1})};return(t,a)=>{const n=i(e.resolveDynamicComponent("uni-icons"),re);return e.openBlock(),e.createElementBlock("view",{class:"forum-other-box"},[e.createElementVNode("view",{class:"navbar"},[e.createElementVNode("view",{class:"header"},[e.createVNode(n,{type:"left",size:"24",color:"#000",onClick:l,class:"left"})]),e.createElementVNode("view",{class:"user-info"},[e.createElementVNode("view",{class:"user-info-content"},[e.createElementVNode("image",{src:Bi,class:"profile"}),e.createElementVNode("view",null,[e.createElementVNode("view",{class:"nick-name"},"大石头"),e.createElementVNode("view",{class:"id-num"},[e.createElementVNode("text",null,"ID：12367263732")])])]),e.createElementVNode("view",{class:"follow-box"},[o.value?(e.openBlock(),e.createElementBlock("view",{key:1,class:"follow isFollow",onClick:a[1]||(a[1]=e=>o.value=!1)},"已关注")):(e.openBlock(),e.createElementBlock("view",{key:0,class:"follow"},[e.createVNode(n,{type:"plusempty",size:"12",color:"#fff",onClick:a[0]||(a[0]=e=>o.value=!0)}),e.createTextVNode("关注")]))])]),e.createElementVNode("view",{class:"remark"},"倾听师寄语倾听师寄语倾听师寄语倾听师寄"),e.createElementVNode("view",{class:"num-box"},[e.createElementVNode("view",{class:"num-content-box"},[e.createElementVNode("view",{class:"content-item"},[e.createElementVNode("text",{class:"num"},"9999"),e.createElementVNode("text",{class:"txt"},"获赞")]),e.createElementVNode("view",{class:"content-item"},[e.createElementVNode("text",{class:"num"},"9999"),e.createElementVNode("text",{class:"txt"},"关注")]),e.createElementVNode("view",{class:"content-item"},[e.createElementVNode("text",{class:"num"},"9999"),e.createElementVNode("text",{class:"txt"},"粉丝")]),e.createElementVNode("view",{class:"content-item"},[e.createElementVNode("text",{class:"num"},"9999"),e.createElementVNode("text",{class:"txt"},"访客")])])])]),e.createElementVNode("view",{class:"tabs"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{onClick:e=>{return a=t,void(s.value!=a.id&&(s.value=a.id));var a},class:e.normalizeClass(["tab-item",s.value==t.id?"active":""]),key:a},e.toDisplayString(t.label),11,["onClick"])))),128))]),0==s.value?(e.openBlock(),e.createElementBlock("view",{key:0,class:"mood-log-box"},[e.createVNode(rs)])):e.createCommentVNode("",!0)])}}},[["__scopeId","data-v-fbbe9edc"]]),ls={__name:"mailbox",setup(t){e.useCssVars((e=>({"0913c310":n.value})));const a=ae(),n=e.ref(a.statusBarHeight+"px");e.ref(0);const o=e.ref(null);l((e=>{o.value=e.type}));const r=()=>{uni.navigateBack({delta:1})};return(t,a)=>{const n=i(e.resolveDynamicComponent("uni-icons"),re);return e.openBlock(),e.createElementBlock("view",{class:"mailbox-contaior"},[e.createElementVNode("view",{class:"navbar",style:e.normalizeStyle({backgroundImage:"old"==o.value?"url(/static/forum/old-bg.png)":"new"==o.value?"url(/static/forum/new-bg.png)":"url(/static/forum/future-bg.png)"})},[e.createElementVNode("view",{class:"header"},[e.createElementVNode("view",{class:"content"},[e.createVNode(n,{type:"left",size:"24",color:"#000",onClick:r,class:"left"}),e.createVNode(n,{type:"more-filled",size:"18",color:"#808080"})]),e.createElementVNode("view",{class:"title"},"写给从前的自己的一封信"),e.createElementVNode("view",{class:"item-header"},[e.createElementVNode("view",{class:"item-header-left"},[e.createElementVNode("view",{class:"header-pic"},[e.createElementVNode("image",{src:Bi,class:"img"})]),e.createElementVNode("view",{class:"header-info"},[e.createElementVNode("view",{class:"name"},"张三"),e.createElementVNode("view",{class:"time"},"咨询师 | 认证作家")])]),e.createElementVNode("view",{class:"item-header-right"},[e.createElementVNode("image",{src:"new"==o.value?"@/static/forum/new-logo.png":"old"==o.value?"@/static/forum/old-logo.png":"@/static/forum/future-logo.png",class:"img"},null,8,["src"])])])])],4),e.createElementVNode("view",{class:"info"},[e.createElementVNode("scroll-view",{"scroll-y":"true",class:"scroll-content","show-scrollbar":!1},[e.createElementVNode("view",{class:"info-box"}," 心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题。 心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题。 心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题。 心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题。 心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题。 心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题。 心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题。 心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题。 心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题。 心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题。 心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题。 心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题。 心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题。 心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题。 心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题。 心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题。 心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题。 心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题。 心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题。 心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题。 ")])])])}}},cs=ie(ls,[["__scopeId","data-v-92757b66"]]),us=ie({__name:"ask-question",setup(t){const a=()=>{uni.navigateBack({delta:1})},n=e.ref({}),r=e.ref(""),s=e.ref({id:null,label:"添加标签"}),l=e.ref(null),c=async()=>{let e=await((e,t={})=>A.post("/api/answer/answer/saveAnswer",e,t))(n.value);o("log","at pages/forum/write/ask-question/ask-question.vue:94",e),0==e.code&&uni.showToast({title:"发布成功",icon:"success",success(e){uni.navigateBack()}})},u=e.ref(1),d=e.ref(1),m=()=>{l.value.open()},p=()=>{l.value.close()},h=()=>{l.value.close(),s.value={id:1,label:"天气不错"}};return(t,o)=>{const v=i(e.resolveDynamicComponent("uni-icons"),re),g=i(e.resolveDynamicComponent("uni-nav-bar"),Di),f=i(e.resolveDynamicComponent("uni-popup"),vi);return e.openBlock(),e.createElementBlock("view",{class:"ask-question-box"},[e.createVNode(g,{backgroundColor:"#F4F6F8",border:!1,title:"提问题",class:"header-bar",statusBar:!0,fixed:""},{left:e.withCtx((()=>[e.createVNode(v,{type:"left",size:"24",onClick:a})])),right:e.withCtx((()=>[e.createElementVNode("view",{class:"right",onClick:c}," 发布 ")])),_:1}),e.createElementVNode("view",{class:"question-content"},[e.createElementVNode("view",{class:"question-title"},[e.withDirectives(e.createElementVNode("input",{class:"uni-input",maxlength:"25",placeholder:"请说出您的问题（5-25字）","placeholder-class":"placeholder-title","onUpdate:modelValue":o[0]||(o[0]=e=>n.value.title=e)},null,512),[[e.vModelText,n.value.title]])]),e.createElementVNode("view",{class:"content"},[e.withDirectives(e.createElementVNode("textarea",{class:"uni-textarea","onUpdate:modelValue":o[1]||(o[1]=e=>n.value.content=e),placeholder:"示例：25岁女孩，近期情绪很焦虑，怎么去缓解？包含年龄、性别信息,明确具体困扰与症状，以便得到更专业解答？","placeholder-class":"placeholder-content",maxlength:"1000"},null,512),[[e.vModelText,n.value.content]]),e.createElementVNode("view",{class:"char-count"},e.toDisplayString(r.value.length)+"/1000",1)])]),e.createElementVNode("view",{class:"question-tag"},[e.createElementVNode("view",{class:"tag-content",onClick:m},[e.createElementVNode("image",{src:"/static/forum/tag.png",class:"img"}),e.createElementVNode("text",{class:"txt"},e.toDisplayString(s.value.label),1)])]),e.createVNode(f,{class:"tag-popup",ref_key:"tagPopupRef",ref:l,type:"bottom","background-color":"#fff","border-radius":"24rpx 24rpx 0rpx 0rpx","is-mask-click":!1},{default:e.withCtx((()=>[e.createElementVNode("view",{class:"tag-header"},[e.createElementVNode("view",{class:"tag-header-content"},[e.createElementVNode("view",{class:"cancel",onClick:p},"取消"),e.createElementVNode("view",{class:"title"},"选择标签"),e.createElementVNode("view",{class:"confirm",onClick:h},"确认")])]),e.createElementVNode("view",{class:"tag-content"},[e.createElementVNode("view",{class:"tag-left"},[e.createElementVNode("scroll-view",{"scroll-y":"true",class:"scroll-content","show-scrollbar":!1},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(20,(t=>e.createElementVNode("view",{class:e.normalizeClass(["tag-item",u.value==t?"active":""]),key:t,onClick:e=>(e=>{u.value!=e&&(u.value=e)})(t)}," 健康 ",10,["onClick"]))),64))])]),e.createElementVNode("view",{class:"tag-right"},[e.createElementVNode("scroll-view",{"scroll-y":"true",class:"scroll-content","show-scrollbar":!1},[e.createElementVNode("view",{class:"tag-right-content"},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(20,(t=>e.createElementVNode("text",{class:e.normalizeClass(["content-item",d.value==t?"active":""]),key:t,onClick:e=>(e=>{d.value!=e&&(d.value=e)})(t)}," 天气很好 ",10,["onClick"]))),64))])])])])])),_:1},512)])}}},[["__scopeId","data-v-62fba6f9"]]),ds="/static/forum/upload-image.svg",ms=ie({__name:"send-dynamics",setup(t){const a=()=>{uni.navigateBack({delta:1})},n=e.ref(""),r=e.ref(""),s=e.ref({id:null,label:"添加话题"}),l=e.ref([]),c=()=>{uni.chooseImage({count:1,success:function(e){l.value.push(e.tempFilePaths[0]),uni.uploadFile({url:"https://ceshi.maimiaoqingsu.com/api/common/upload",filePath:e.tempFilePaths[0],name:"file",header:{token:uni.getStorageSync("token")},success:e=>{o("log","at pages/forum/write/send-dynamics/send-dynamics.vue:78",JSON.parse(e.data)),r.value=JSON.parse(e.data).data.url}})}})},u=()=>{uni.navigateTo({url:"/pages/forum/write/choose-topic/choose-topic"})},d=async()=>{let e=await((e,t={})=>A.post("/api/article/article/saveArticle",e,t))({content:n.value,imageUrl:r.value});uni.showToast({title:"发布成功",icon:"none",duration:2e3}),o("log","at pages/forum/write/send-dynamics/send-dynamics.vue:107",e)};return(t,o)=>{const r=i(e.resolveDynamicComponent("uni-icons"),re),m=i(e.resolveDynamicComponent("uni-nav-bar"),Di);return e.openBlock(),e.createElementBlock("view",{class:"send-dynamics-box"},[e.createVNode(m,{backgroundColor:"#F4F6F8",border:!1,title:"发动态",class:"header-bar",statusBar:!0,fixed:""},{left:e.withCtx((()=>[e.createVNode(r,{type:"left",size:"24",onClick:a})])),right:e.withCtx((()=>[e.createElementVNode("view",{class:"right",onClick:d}," 发布 ")])),_:1}),e.createElementVNode("view",{class:"question-content"},[e.createElementVNode("view",{class:"content"},[e.withDirectives(e.createElementVNode("textarea",{class:"uni-textarea",placeholder:"分享您此刻的心情，随时记录","placeholder-class":"placeholder-content",maxlength:"1000","onUpdate:modelValue":o[0]||(o[0]=e=>n.value=e)},null,512),[[e.vModelText,n.value]])])]),e.createElementVNode("view",{class:"upload-image"},[e.createElementVNode("view",{class:"upload-image-content"},[e.createElementVNode("view",{class:"uploadImageLogo"},[e.createElementVNode("image",{src:ds,class:"image",onClick:c})]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"upload-image-item",key:a},[e.createElementVNode("image",{src:t,class:"image"},null,8,["src"]),e.createElementVNode("view",{class:"del-img",onClick:e=>(e=>{l.value.splice(e,1)})(a)},[e.createVNode(r,{type:"closeempty",size:"12",color:"#fff"})],8,["onClick"])])))),128))])]),e.createElementVNode("view",{class:"question-tag",onClick:u},[e.createElementVNode("view",{class:"tag-content",onClick:o[1]||(o[1]=(...e)=>t.openHandler&&t.openHandler(...e))},[e.createElementVNode("image",{src:"/static/forum/topic.png",class:"img"}),e.createElementVNode("text",{class:"txt"},e.toDisplayString(s.value.label),1)])])])}}},[["__scopeId","data-v-0f05cea5"]]),ps=ie({__name:"write-mailbox",setup(t){const a=()=>{uni.navigateBack({delta:1})},n=e.ref(""),o=e.ref([]),r=()=>{uni.chooseImage({count:1,success:function(e){o.value.push(e.tempFilePaths[0])}})};return(t,s)=>{const l=i(e.resolveDynamicComponent("uni-icons"),re),c=i(e.resolveDynamicComponent("uni-nav-bar"),Di);return e.openBlock(),e.createElementBlock("view",{class:"write-mailbox-box"},[e.createVNode(c,{backgroundColor:"#F4F6F8",border:!1,title:"写给从前的一封信",class:"header-bar",statusBar:!0,fixed:""},{left:e.withCtx((()=>[e.createVNode(l,{type:"left",size:"24",onClick:a})])),right:e.withCtx((()=>[e.createElementVNode("view",{class:"right"}," 发布 ")])),_:1}),e.createElementVNode("view",{class:"question-content"},[e.createElementVNode("view",{class:"content"},[e.withDirectives(e.createElementVNode("textarea",{class:"uni-textarea",placeholder:"给从前的自己写一份信","placeholder-class":"placeholder-content",maxlength:"1000","onUpdate:modelValue":s[0]||(s[0]=e=>n.value=e)},null,512),[[e.vModelText,n.value]]),e.createElementVNode("view",{class:"char-count"},e.toDisplayString(n.value.length)+"/1000",1)])]),e.createElementVNode("view",{class:"upload-image"},[e.createElementVNode("view",{class:"upload-image-content"},[e.createElementVNode("view",{class:"uploadImageLogo"},[e.createElementVNode("image",{src:ds,class:"image",onClick:r})]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"upload-image-item",key:a},[e.createElementVNode("image",{src:t,class:"image"},null,8,["src"]),e.createElementVNode("view",{class:"del-img",onClick:e=>(e=>{o.value.splice(e,1)})(a)},[e.createVNode(l,{type:"closeempty",size:"12",color:"#fff"})],8,["onClick"])])))),128))])])])}}},[["__scopeId","data-v-0aaad16c"]]),hs="/static/auth/tip.svg";const vs=ie({name:"u-mask",emits:["click"],props:{show:{type:Boolean,default:!1},zIndex:{type:[Number,String],default:""},customStyle:{type:Object,default:()=>({})},zoom:{type:Boolean,default:!0},duration:{type:[Number,String],default:300},maskClickAble:{type:Boolean,default:!0},blur:{type:[Number,String],default:0}},data:()=>({zoomStyle:{transform:""},scale:"scale(1.2, 1.2)"}),watch:{show(e){e&&this.zoom?this.zoomStyle.transform="scale(1, 1)":!e&&this.zoom&&(this.zoomStyle.transform=this.scale)}},computed:{maskStyle(){let e={backgroundColor:"rgba(0, 0, 0, 0.6)"};return this.show?e.zIndex=this.zIndex?this.zIndex:this.$u.zIndex.mask:e.zIndex=-1,e.transition=`all ${this.duration/1e3}s ease-in-out`,Object.keys(this.customStyle).length&&(e={...e,...this.customStyle}),e},filterStyle(){let{blur:e}=this,t={};return e&&(t.backdropFilter=`blur(${e}rpx)`),t}},methods:{click(){this.maskClickAble&&this.$emit("click")}}},[["render",function(t,a,n,o,i,r){return e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["u-mask",{"u-mask-zoom":n.zoom,"u-mask-show":n.show}]),"hover-stop-propagation":"",style:e.normalizeStyle([r.maskStyle,i.zoomStyle,r.filterStyle]),onClick:a[0]||(a[0]=(...e)=>r.click&&r.click(...e)),onTouchmove:e.withModifiers((()=>{}),["stop","prevent"])},[e.renderSlot(t.$slots,"default",{},void 0,!0)],38)}],["__scopeId","data-v-005d3602"]]);const gs=ie({name:"u-popup",emits:["update:modelValue","input","open","close"],props:{value:{type:Boolean,default:!1},modelValue:{type:Boolean,default:!1},show:{type:Boolean,default:!1},mode:{type:String,default:"left"},mask:{type:Boolean,default:!0},length:{type:[Number,String],default:"auto"},zoom:{type:Boolean,default:!0},safeAreaInsetBottom:{type:Boolean,default:!1},maskCloseAble:{type:Boolean,default:!0},customStyle:{type:Object,default:()=>({})},popup:{type:Boolean,default:!0},borderRadius:{type:[Number,String],default:0},zIndex:{type:[Number,String],default:""},closeable:{type:Boolean,default:!1},closeIcon:{type:String,default:"close"},closeIconPos:{type:String,default:"top-right"},closeIconColor:{type:String,default:"#909399"},closeIconSize:{type:[String,Number],default:"30"},width:{type:String,default:""},height:{type:String,default:""},negativeTop:{type:[String,Number],default:0},maskCustomStyle:{type:Object,default:()=>({})},duration:{type:[String,Number],default:250},blur:{type:[String,Number],default:0},backgroundColor:{type:String,default:"#ffffff"}},data:()=>({visibleSync:!1,showDrawer:!1,timer:null,closeFromInner:!1}),computed:{valueCom(){return this.modelValue},style(){let e={};if("left"==this.mode||"right"==this.mode?e={width:this.width?this.getUnitValue(this.width):this.getUnitValue(this.length),height:"100%",transform:`translate3D(${"left"==this.mode?"-100%":"100%"},0px,0px)`}:"top"!=this.mode&&"bottom"!=this.mode||(e={width:"100%",height:this.height?this.getUnitValue(this.height):this.getUnitValue(this.length),transform:`translate3D(0px,${"top"==this.mode?"-100%":"100%"},0px)`}),e.zIndex=this.uZindex,this.borderRadius){switch(this.mode){case"left":e.borderRadius=`0 ${this.borderRadius}rpx ${this.borderRadius}rpx 0`;break;case"top":e.borderRadius=`0 0 ${this.borderRadius}rpx ${this.borderRadius}rpx`;break;case"right":e.borderRadius=`${this.borderRadius}rpx 0 0 ${this.borderRadius}rpx`;break;case"bottom":e.borderRadius=`${this.borderRadius}rpx ${this.borderRadius}rpx 0 0`}e.overflow="hidden"}return this.duration&&(e.transition=`all ${this.duration/1e3}s linear`),e},centerStyle(){let e={};return e.width=this.width?this.getUnitValue(this.width):this.getUnitValue(this.length),e.height=this.height?this.getUnitValue(this.height):"auto",e.zIndex=this.uZindex,e.marginTop=`-${this.$u.addUnit(this.negativeTop)}`,this.borderRadius&&(e.borderRadius=`${this.borderRadius}rpx`,e.overflow="hidden"),e},uZindex(){return this.zIndex?this.zIndex:this.$u.zIndex.popup}},watch:{valueCom:{handler(e){e?this.open():this.closeFromInner||this.close(),this.closeFromInner=!1}}},mounted(){this.valueCom&&this.open()},methods:{getUnitValue:e=>/(%|px|rpx|auto)$/.test(e)?e:e+"rpx",maskClick(){this.close()},close(){this.closeFromInner=!0,this.change("showDrawer","visibleSync",!1)},modeCenterClose(e){"center"==e&&this.maskCloseAble&&this.close()},open(){this.change("visibleSync","showDrawer",!0)},change(e,t,a){1==this.popup&&(this.$emit("input",a),this.$emit("update:modelValue",a)),this[e]=a,a?this.$nextTick((()=>{this[t]=a,this.$emit(a?"open":"close")})):this.timer=setTimeout((()=>{this[t]=a,this.$emit(a?"open":"close")}),this.duration)}}},[["render",function(t,a,n,o,r,s){const l=i(e.resolveDynamicComponent("u-mask"),vs),c=i(e.resolveDynamicComponent("u-icon"),Po);return r.visibleSync?(e.openBlock(),e.createElementBlock("view",{key:0,style:e.normalizeStyle([n.customStyle,{zIndex:s.uZindex-1,"--bgcolor":n.backgroundColor}]),class:"u-drawer","hover-stop-propagation":""},[e.createVNode(l,{blur:n.blur,duration:n.duration,"custom-style":n.maskCustomStyle,maskClickAble:n.maskCloseAble,"z-index":s.uZindex-2,show:r.showDrawer&&n.mask,onClick:s.maskClick},null,8,["blur","duration","custom-style","maskClickAble","z-index","show","onClick"]),e.createElementVNode("view",{class:e.normalizeClass(["u-drawer-content",[n.safeAreaInsetBottom?"safe-area-inset-bottom":"","u-drawer-"+n.mode,r.showDrawer?"u-drawer-content-visible":"",n.zoom&&"center"==n.mode?"u-animation-zoom":""]]),onClick:a[3]||(a[3]=e=>s.modeCenterClose(n.mode)),onTouchmove:a[4]||(a[4]=e.withModifiers((()=>{}),["stop","prevent"])),style:e.normalizeStyle([s.style])},["center"==n.mode?(e.openBlock(),e.createElementBlock("view",{key:0,class:"u-mode-center-box",onClick:a[0]||(a[0]=e.withModifiers((()=>{}),["stop","prevent"])),onTouchmove:a[1]||(a[1]=e.withModifiers((()=>{}),["stop","prevent"])),style:e.normalizeStyle([s.centerStyle])},[n.closeable?(e.openBlock(),e.createBlock(c,{key:0,onClick:s.close,class:e.normalizeClass(["u-close",["u-close--"+n.closeIconPos]]),name:n.closeIcon,color:n.closeIconColor,size:n.closeIconSize},null,8,["onClick","class","name","color","size"])):e.createCommentVNode("",!0),e.createElementVNode("scroll-view",{class:"u-drawer__scroll-view","scroll-y":"true"},[e.renderSlot(t.$slots,"default",{},void 0,!0)])],36)):(e.openBlock(),e.createElementBlock("scroll-view",{key:1,class:"u-drawer__scroll-view","scroll-y":"true"},[e.renderSlot(t.$slots,"default",{},void 0,!0)])),e.createElementVNode("view",{onClick:a[2]||(a[2]=(...e)=>s.close&&s.close(...e)),class:e.normalizeClass(["u-close",["u-close--"+n.closeIconPos]])},["center"!=n.mode&&n.closeable?(e.openBlock(),e.createBlock(c,{key:0,name:n.closeIcon,color:n.closeIconColor,size:n.closeIconSize},null,8,["name","color","size"])):e.createCommentVNode("",!0)],2)],38)],4)):e.createCommentVNode("",!0)}],["__scopeId","data-v-7e3f5120"]]),fs=[{code:"110000",name:"北京市"},{code:"120000",name:"天津市"},{code:"130000",name:"河北省"},{code:"140000",name:"山西省"},{code:"150000",name:"内蒙古自治区"},{code:"210000",name:"辽宁省"},{code:"220000",name:"吉林省"},{code:"230000",name:"黑龙江省"},{code:"310000",name:"上海市"},{code:"320000",name:"江苏省"},{code:"330000",name:"浙江省"},{code:"340000",name:"安徽省"},{code:"350000",name:"福建省"},{code:"360000",name:"江西省"},{code:"370000",name:"山东省"},{code:"410000",name:"河南省"},{code:"420000",name:"湖北省"},{code:"430000",name:"湖南省"},{code:"440000",name:"广东省"},{code:"450000",name:"广西壮族自治区"},{code:"460000",name:"海南省"},{code:"500000",name:"重庆市"},{code:"510000",name:"四川省"},{code:"520000",name:"贵州省"},{code:"530000",name:"云南省"},{code:"540000",name:"西藏自治区"},{code:"610000",name:"陕西省"},{code:"620000",name:"甘肃省"},{code:"630000",name:"青海省"},{code:"640000",name:"宁夏回族自治区"},{code:"650000",name:"新疆维吾尔自治区"},{code:"710000",name:"台湾省"},{code:"810000",name:"香港特别行政区"},{code:"820000",name:"澳门特别行政区"}],ys=[[{code:"110100",name:"北京市"}],[{code:"120100",name:"天津市"}],[{code:"130100",name:"石家庄市"},{code:"130200",name:"唐山市"},{code:"130300",name:"秦皇岛市"},{code:"130400",name:"邯郸市"},{code:"130500",name:"邢台市"},{code:"130600",name:"保定市"},{code:"130700",name:"张家口市"},{code:"130800",name:"承德市"},{code:"130900",name:"沧州市"},{code:"131000",name:"廊坊市"},{code:"131100",name:"衡水市"},{code:"133100",name:"雄安新区"}],[{code:"140100",name:"太原市"},{code:"140200",name:"大同市"},{code:"140300",name:"阳泉市"},{code:"140400",name:"长治市"},{code:"140500",name:"晋城市"},{code:"140600",name:"朔州市"},{code:"140700",name:"晋中市"},{code:"140800",name:"运城市"},{code:"140900",name:"忻州市"},{code:"141000",name:"临汾市"},{code:"141100",name:"吕梁市"}],[{code:"150100",name:"呼和浩特市"},{code:"150200",name:"包头市"},{code:"150300",name:"乌海市"},{code:"150400",name:"赤峰市"},{code:"150500",name:"通辽市"},{code:"150600",name:"鄂尔多斯市"},{code:"150700",name:"呼伦贝尔市"},{code:"150800",name:"巴彦淖尔市"},{code:"150900",name:"乌兰察布市"},{code:"152200",name:"兴安盟"},{code:"152500",name:"锡林郭勒盟"},{code:"152900",name:"阿拉善盟"}],[{code:"210100",name:"沈阳市"},{code:"210200",name:"大连市"},{code:"210300",name:"鞍山市"},{code:"210400",name:"抚顺市"},{code:"210500",name:"本溪市"},{code:"210600",name:"丹东市"},{code:"210700",name:"锦州市"},{code:"210800",name:"营口市"},{code:"210900",name:"阜新市"},{code:"211000",name:"辽阳市"},{code:"211100",name:"盘锦市"},{code:"211200",name:"铁岭市"},{code:"211300",name:"朝阳市"},{code:"211400",name:"葫芦岛市"}],[{code:"220100",name:"长春市"},{code:"220200",name:"吉林市"},{code:"220300",name:"四平市"},{code:"220400",name:"辽源市"},{code:"220500",name:"通化市"},{code:"220600",name:"白山市"},{code:"220700",name:"松原市"},{code:"220800",name:"白城市"},{code:"222400",name:"延边朝鲜族自治州"}],[{code:"230100",name:"哈尔滨市"},{code:"230200",name:"齐齐哈尔市"},{code:"230300",name:"鸡西市"},{code:"230400",name:"鹤岗市"},{code:"230500",name:"双鸭山市"},{code:"230600",name:"大庆市"},{code:"230700",name:"伊春市"},{code:"230800",name:"佳木斯市"},{code:"230900",name:"七台河市"},{code:"231000",name:"牡丹江市"},{code:"231100",name:"黑河市"},{code:"231200",name:"绥化市"},{code:"232700",name:"大兴安岭地区"}],[{code:"310100",name:"上海市"}],[{code:"320100",name:"南京市"},{code:"320200",name:"无锡市"},{code:"320300",name:"徐州市"},{code:"320400",name:"常州市"},{code:"320500",name:"苏州市"},{code:"320600",name:"南通市"},{code:"320700",name:"连云港市"},{code:"320800",name:"淮安市"},{code:"320900",name:"盐城市"},{code:"321000",name:"扬州市"},{code:"321100",name:"镇江市"},{code:"321200",name:"泰州市"},{code:"321300",name:"宿迁市"}],[{code:"330100",name:"杭州市"},{code:"330200",name:"宁波市"},{code:"330300",name:"温州市"},{code:"330400",name:"嘉兴市"},{code:"330500",name:"湖州市"},{code:"330600",name:"绍兴市"},{code:"330700",name:"金华市"},{code:"330800",name:"衢州市"},{code:"330900",name:"舟山市"},{code:"331000",name:"台州市"},{code:"331100",name:"丽水市"}],[{code:"340100",name:"合肥市"},{code:"340200",name:"芜湖市"},{code:"340300",name:"蚌埠市"},{code:"340400",name:"淮南市"},{code:"340500",name:"马鞍山市"},{code:"340600",name:"淮北市"},{code:"340700",name:"铜陵市"},{code:"340800",name:"安庆市"},{code:"341000",name:"黄山市"},{code:"341100",name:"滁州市"},{code:"341200",name:"阜阳市"},{code:"341300",name:"宿州市"},{code:"341500",name:"六安市"},{code:"341600",name:"亳州市"},{code:"341700",name:"池州市"},{code:"341800",name:"宣城市"}],[{code:"350100",name:"福州市"},{code:"350200",name:"厦门市"},{code:"350300",name:"莆田市"},{code:"350400",name:"三明市"},{code:"350500",name:"泉州市"},{code:"350600",name:"漳州市"},{code:"350700",name:"南平市"},{code:"350800",name:"龙岩市"},{code:"350900",name:"宁德市"}],[{code:"360100",name:"南昌市"},{code:"360200",name:"景德镇市"},{code:"360300",name:"萍乡市"},{code:"360400",name:"九江市"},{code:"360500",name:"新余市"},{code:"360600",name:"鹰潭市"},{code:"360700",name:"赣州市"},{code:"360800",name:"吉安市"},{code:"360900",name:"宜春市"},{code:"361000",name:"抚州市"},{code:"361100",name:"上饶市"}],[{code:"370100",name:"济南市"},{code:"370200",name:"青岛市"},{code:"370300",name:"淄博市"},{code:"370400",name:"枣庄市"},{code:"370500",name:"东营市"},{code:"370600",name:"烟台市"},{code:"370700",name:"潍坊市"},{code:"370800",name:"济宁市"},{code:"370900",name:"泰安市"},{code:"371000",name:"威海市"},{code:"371100",name:"日照市"},{code:"371300",name:"临沂市"},{code:"371400",name:"德州市"},{code:"371500",name:"聊城市"},{code:"371600",name:"滨州市"},{code:"371700",name:"菏泽市"}],[{code:"410100",name:"郑州市"},{code:"410200",name:"开封市"},{code:"410300",name:"洛阳市"},{code:"410400",name:"平顶山市"},{code:"410500",name:"安阳市"},{code:"410600",name:"鹤壁市"},{code:"410700",name:"新乡市"},{code:"410800",name:"焦作市"},{code:"410900",name:"濮阳市"},{code:"411000",name:"许昌市"},{code:"411100",name:"漯河市"},{code:"411200",name:"三门峡市"},{code:"411300",name:"南阳市"},{code:"411400",name:"商丘市"},{code:"411500",name:"信阳市"},{code:"411600",name:"周口市"},{code:"411700",name:"驻马店市"},{code:"419001",name:"济源市"}],[{code:"420100",name:"武汉市"},{code:"420200",name:"黄石市"},{code:"420300",name:"十堰市"},{code:"420500",name:"宜昌市"},{code:"420600",name:"襄阳市"},{code:"420700",name:"鄂州市"},{code:"420800",name:"荆门市"},{code:"420900",name:"孝感市"},{code:"421000",name:"荆州市"},{code:"421100",name:"黄冈市"},{code:"421200",name:"咸宁市"},{code:"421300",name:"随州市"},{code:"422800",name:"恩施土家族苗族自治州"},{code:"429004",name:"仙桃市"},{code:"429005",name:"潜江市"},{code:"429006",name:"天门市"},{code:"429021",name:"神农架林区"}],[{code:"430100",name:"长沙市"},{code:"430200",name:"株洲市"},{code:"430300",name:"湘潭市"},{code:"430400",name:"衡阳市"},{code:"430500",name:"邵阳市"},{code:"430600",name:"岳阳市"},{code:"430700",name:"常德市"},{code:"430800",name:"张家界市"},{code:"430900",name:"益阳市"},{code:"431000",name:"郴州市"},{code:"431100",name:"永州市"},{code:"431200",name:"怀化市"},{code:"431300",name:"娄底市"},{code:"433100",name:"湘西土家族苗族自治州"}],[{code:"440100",name:"广州市"},{code:"440200",name:"韶关市"},{code:"440300",name:"深圳市"},{code:"440400",name:"珠海市"},{code:"440500",name:"汕头市"},{code:"440600",name:"佛山市"},{code:"440700",name:"江门市"},{code:"440800",name:"湛江市"},{code:"440900",name:"茂名市"},{code:"441200",name:"肇庆市"},{code:"441300",name:"惠州市"},{code:"441400",name:"梅州市"},{code:"441500",name:"汕尾市"},{code:"441600",name:"河源市"},{code:"441700",name:"阳江市"},{code:"441800",name:"清远市"},{code:"441900",name:"东莞市"},{code:"442000",name:"中山市"},{code:"445100",name:"潮州市"},{code:"445200",name:"揭阳市"},{code:"445300",name:"云浮市"}],[{code:"450100",name:"南宁市"},{code:"450200",name:"柳州市"},{code:"450300",name:"桂林市"},{code:"450400",name:"梧州市"},{code:"450500",name:"北海市"},{code:"450600",name:"防城港市"},{code:"450700",name:"钦州市"},{code:"450800",name:"贵港市"},{code:"450900",name:"玉林市"},{code:"451000",name:"百色市"},{code:"451100",name:"贺州市"},{code:"451200",name:"河池市"},{code:"451300",name:"来宾市"},{code:"451400",name:"崇左市"}],[{code:"460100",name:"海口市"},{code:"460200",name:"三亚市"},{code:"460300",name:"三沙市"},{code:"460400",name:"儋州市"},{code:"469001",name:"五指山市"},{code:"469002",name:"琼海市"},{code:"469005",name:"文昌市"},{code:"469006",name:"万宁市"},{code:"469007",name:"东方市"},{code:"469021",name:"定安县"},{code:"469022",name:"屯昌县"},{code:"469023",name:"澄迈县"},{code:"469024",name:"临高县"},{code:"469025",name:"白沙黎族自治县"},{code:"469026",name:"昌江黎族自治县"},{code:"469027",name:"乐东黎族自治县"},{code:"469028",name:"陵水黎族自治县"},{code:"469029",name:"保亭黎族苗族自治县"},{code:"469030",name:"琼中黎族苗族自治县"}],[{code:"500100",name:"重庆市"}],[{code:"510100",name:"成都市"},{code:"510300",name:"自贡市"},{code:"510400",name:"攀枝花市"},{code:"510500",name:"泸州市"},{code:"510600",name:"德阳市"},{code:"510700",name:"绵阳市"},{code:"510800",name:"广元市"},{code:"510900",name:"遂宁市"},{code:"511000",name:"内江市"},{code:"511100",name:"乐山市"},{code:"511300",name:"南充市"},{code:"511400",name:"眉山市"},{code:"511500",name:"宜宾市"},{code:"511600",name:"广安市"},{code:"511700",name:"达州市"},{code:"511800",name:"雅安市"},{code:"511900",name:"巴中市"},{code:"512000",name:"资阳市"},{code:"513200",name:"阿坝藏族羌族自治州"},{code:"513300",name:"甘孜藏族自治州"},{code:"513400",name:"凉山彝族自治州"}],[{code:"520100",name:"贵阳市"},{code:"520200",name:"六盘水市"},{code:"520300",name:"遵义市"},{code:"520400",name:"安顺市"},{code:"520500",name:"毕节市"},{code:"520600",name:"铜仁市"},{code:"522300",name:"黔西南布依族苗族自治州"},{code:"522600",name:"黔东南苗族侗族自治州"},{code:"522700",name:"黔南布依族苗族自治州"}],[{code:"530100",name:"昆明市"},{code:"530300",name:"曲靖市"},{code:"530400",name:"玉溪市"},{code:"530500",name:"保山市"},{code:"530600",name:"昭通市"},{code:"530700",name:"丽江市"},{code:"530800",name:"普洱市"},{code:"530900",name:"临沧市"},{code:"532300",name:"楚雄彝族自治州"},{code:"532500",name:"红河哈尼族彝族自治州"},{code:"532600",name:"文山壮族苗族自治州"},{code:"532800",name:"西双版纳傣族自治州"},{code:"532900",name:"大理白族自治州"},{code:"533100",name:"德宏傣族景颇族自治州"},{code:"533300",name:"怒江傈僳族自治州"},{code:"533400",name:"迪庆藏族自治州"}],[{code:"540100",name:"拉萨市"},{code:"540200",name:"日喀则市"},{code:"540300",name:"昌都市"},{code:"540400",name:"林芝市"},{code:"540500",name:"山南市"},{code:"540600",name:"那曲市"},{code:"542500",name:"阿里地区"}],[{code:"610100",name:"西安市"},{code:"610200",name:"铜川市"},{code:"610300",name:"宝鸡市"},{code:"610400",name:"咸阳市"},{code:"610500",name:"渭南市"},{code:"610600",name:"延安市"},{code:"610700",name:"汉中市"},{code:"610800",name:"榆林市"},{code:"610900",name:"安康市"},{code:"611000",name:"商洛市"}],[{code:"620100",name:"兰州市"},{code:"620200",name:"嘉峪关市"},{code:"620300",name:"金昌市"},{code:"620400",name:"白银市"},{code:"620500",name:"天水市"},{code:"620600",name:"武威市"},{code:"620700",name:"张掖市"},{code:"620800",name:"平凉市"},{code:"620900",name:"酒泉市"},{code:"621000",name:"庆阳市"},{code:"621100",name:"定西市"},{code:"621200",name:"陇南市"},{code:"622900",name:"临夏回族自治州"},{code:"623000",name:"甘南藏族自治州"}],[{code:"630100",name:"西宁市"},{code:"630200",name:"海东市"},{code:"632200",name:"海北藏族自治州"},{code:"632300",name:"黄南藏族自治州"},{code:"632500",name:"海南藏族自治州"},{code:"632600",name:"果洛藏族自治州"},{code:"632700",name:"玉树藏族自治州"},{code:"632800",name:"海西蒙古族藏族自治州"}],[{code:"640100",name:"银川市"},{code:"640200",name:"石嘴山市"},{code:"640300",name:"吴忠市"},{code:"640400",name:"固原市"},{code:"640500",name:"中卫市"}],[{code:"650100",name:"乌鲁木齐市"},{code:"650200",name:"克拉玛依市"},{code:"650400",name:"吐鲁番市"},{code:"650500",name:"哈密市"},{code:"652300",name:"昌吉回族自治州"},{code:"652700",name:"博尔塔拉蒙古自治州"},{code:"652800",name:"巴音郭楞蒙古自治州"},{code:"652900",name:"阿克苏地区"},{code:"653000",name:"克孜勒苏柯尔克孜自治州"},{code:"653100",name:"喀什地区"},{code:"653200",name:"和田地区"},{code:"654000",name:"伊犁哈萨克自治州"},{code:"654200",name:"塔城地区"},{code:"654300",name:"阿勒泰地区"},{code:"659001",name:"石河子市"},{code:"659002",name:"阿拉尔市"},{code:"659003",name:"图木舒克市"},{code:"659004",name:"五家渠市"},{code:"659005",name:"北屯市"},{code:"659006",name:"铁门关市"},{code:"659007",name:"双河市"},{code:"659008",name:"可克达拉市"},{code:"659009",name:"昆玉市"},{code:"659010",name:"胡杨河市"},{code:"659011",name:"新星市"},{code:"659012",name:"白杨市"}],[{code:"711000",name:"台北市"},{code:"711100",name:"台中市"},{code:"711200",name:"基隆市"},{code:"711300",name:"台南市"},{code:"711400",name:"高雄市"},{code:"711500",name:"新北市"},{code:"711600",name:"宜兰县"},{code:"711700",name:"桃园市"},{code:"711800",name:"嘉义市"},{code:"711900",name:"新竹县"},{code:"712000",name:"苗栗县"},{code:"712200",name:"南投县"},{code:"712300",name:"彰化县"},{code:"712400",name:"新竹市"},{code:"712500",name:"云林县"},{code:"712600",name:"嘉义县"},{code:"712900",name:"屏东县"},{code:"713000",name:"花莲县"},{code:"713100",name:"台东县"},{code:"713200",name:"澎湖县"}],[{code:"810100",name:"香港特别行政区"}],[{code:"820001",name:"澳门特别行政区"}]],_s=[[[{code:"110101",name:"东城区"},{code:"110102",name:"西城区"},{code:"110105",name:"朝阳区"},{code:"110106",name:"丰台区"},{code:"110107",name:"石景山区"},{code:"110108",name:"海淀区"},{code:"110109",name:"门头沟区"},{code:"110111",name:"房山区"},{code:"110112",name:"通州区"},{code:"110113",name:"顺义区"},{code:"110114",name:"昌平区"},{code:"110115",name:"大兴区"},{code:"110116",name:"怀柔区"},{code:"110117",name:"平谷区"},{code:"110118",name:"密云区"},{code:"110119",name:"延庆区"}]],[[{code:"120101",name:"和平区"},{code:"120102",name:"河东区"},{code:"120103",name:"河西区"},{code:"120104",name:"南开区"},{code:"120105",name:"河北区"},{code:"120106",name:"红桥区"},{code:"120110",name:"东丽区"},{code:"120111",name:"西青区"},{code:"120112",name:"津南区"},{code:"120113",name:"北辰区"},{code:"120114",name:"武清区"},{code:"120115",name:"宝坻区"},{code:"120116",name:"滨海新区"},{code:"120117",name:"宁河区"},{code:"120118",name:"静海区"},{code:"120119",name:"蓟州区"}]],[[{code:"130102",name:"长安区"},{code:"130104",name:"桥西区"},{code:"130105",name:"新华区"},{code:"130107",name:"井陉矿区"},{code:"130108",name:"裕华区"},{code:"130109",name:"藁城区"},{code:"130110",name:"鹿泉区"},{code:"130111",name:"栾城区"},{code:"130121",name:"井陉县"},{code:"130123",name:"正定县"},{code:"130125",name:"行唐县"},{code:"130126",name:"灵寿县"},{code:"130127",name:"高邑县"},{code:"130128",name:"深泽县"},{code:"130129",name:"赞皇县"},{code:"130130",name:"无极县"},{code:"130131",name:"平山县"},{code:"130132",name:"元氏县"},{code:"130133",name:"赵县"},{code:"130181",name:"辛集市"},{code:"130183",name:"晋州市"},{code:"130184",name:"新乐市"}],[{code:"130202",name:"路南区"},{code:"130203",name:"路北区"},{code:"130204",name:"古冶区"},{code:"130205",name:"开平区"},{code:"130207",name:"丰南区"},{code:"130208",name:"丰润区"},{code:"130209",name:"曹妃甸区"},{code:"130224",name:"滦南县"},{code:"130225",name:"乐亭县"},{code:"130227",name:"迁西县"},{code:"130229",name:"玉田县"},{code:"130271",name:"芦台经济开发区"},{code:"130281",name:"遵化市"},{code:"130283",name:"迁安市"},{code:"130284",name:"滦州市"}],[{code:"130302",name:"海港区"},{code:"130303",name:"山海关区"},{code:"130304",name:"北戴河区"},{code:"130306",name:"抚宁区"},{code:"130321",name:"青龙满族自治县"},{code:"130322",name:"昌黎县"},{code:"130324",name:"卢龙县"}],[{code:"130402",name:"邯山区"},{code:"130403",name:"丛台区"},{code:"130404",name:"复兴区"},{code:"130406",name:"峰峰矿区"},{code:"130407",name:"肥乡区"},{code:"130408",name:"永年区"},{code:"130423",name:"临漳县"},{code:"130424",name:"成安县"},{code:"130425",name:"大名县"},{code:"130426",name:"涉县"},{code:"130427",name:"磁县"},{code:"130430",name:"邱县"},{code:"130431",name:"鸡泽县"},{code:"130432",name:"广平县"},{code:"130433",name:"馆陶县"},{code:"130434",name:"魏县"},{code:"130435",name:"曲周县"},{code:"130481",name:"武安市"}],[{code:"130502",name:"襄都区"},{code:"130503",name:"信都区"},{code:"130505",name:"任泽区"},{code:"130506",name:"南和区"},{code:"130522",name:"临城县"},{code:"130523",name:"内丘县"},{code:"130524",name:"柏乡县"},{code:"130525",name:"隆尧县"},{code:"130528",name:"宁晋县"},{code:"130529",name:"巨鹿县"},{code:"130530",name:"新河县"},{code:"130531",name:"广宗县"},{code:"130532",name:"平乡县"},{code:"130533",name:"威县"},{code:"130534",name:"清河县"},{code:"130535",name:"临西县"},{code:"130581",name:"南宫市"},{code:"130582",name:"沙河市"}],[{code:"130602",name:"竞秀区"},{code:"130606",name:"莲池区"},{code:"130607",name:"满城区"},{code:"130608",name:"清苑区"},{code:"130609",name:"徐水区"},{code:"130623",name:"涞水县"},{code:"130624",name:"阜平县"},{code:"130626",name:"定兴县"},{code:"130627",name:"唐县"},{code:"130628",name:"高阳县"},{code:"130630",name:"涞源县"},{code:"130631",name:"望都县"},{code:"130633",name:"易县"},{code:"130634",name:"曲阳县"},{code:"130635",name:"蠡县"},{code:"130636",name:"顺平县"},{code:"130637",name:"博野县"},{code:"130681",name:"涿州市"},{code:"130682",name:"定州市"},{code:"130683",name:"安国市"},{code:"130684",name:"高碑店市"}],[{code:"130702",name:"桥东区"},{code:"130703",name:"桥西区"},{code:"130705",name:"宣化区"},{code:"130706",name:"下花园区"},{code:"130708",name:"万全区"},{code:"130709",name:"崇礼区"},{code:"130722",name:"张北县"},{code:"130723",name:"康保县"},{code:"130724",name:"沽源县"},{code:"130725",name:"尚义县"},{code:"130726",name:"蔚县"},{code:"130727",name:"阳原县"},{code:"130728",name:"怀安县"},{code:"130730",name:"怀来县"},{code:"130731",name:"涿鹿县"},{code:"130732",name:"赤城县"}],[{code:"130802",name:"双桥区"},{code:"130803",name:"双滦区"},{code:"130804",name:"鹰手营子矿区"},{code:"130821",name:"承德县"},{code:"130822",name:"兴隆县"},{code:"130824",name:"滦平县"},{code:"130825",name:"隆化县"},{code:"130826",name:"丰宁满族自治县"},{code:"130827",name:"宽城满族自治县"},{code:"130828",name:"围场满族蒙古族自治县"},{code:"130881",name:"平泉市"}],[{code:"130902",name:"新华区"},{code:"130903",name:"运河区"},{code:"130921",name:"沧县"},{code:"130922",name:"青县"},{code:"130923",name:"东光县"},{code:"130924",name:"海兴县"},{code:"130925",name:"盐山县"},{code:"130926",name:"肃宁县"},{code:"130927",name:"南皮县"},{code:"130928",name:"吴桥县"},{code:"130929",name:"献县"},{code:"130930",name:"孟村回族自治县"},{code:"130981",name:"泊头市"},{code:"130982",name:"任丘市"},{code:"130983",name:"黄骅市"},{code:"130984",name:"河间市"}],[{code:"131002",name:"安次区"},{code:"131003",name:"广阳区"},{code:"131022",name:"固安县"},{code:"131023",name:"永清县"},{code:"131024",name:"香河县"},{code:"131025",name:"大城县"},{code:"131026",name:"文安县"},{code:"131028",name:"大厂回族自治县"},{code:"131081",name:"霸州市"},{code:"131082",name:"三河市"}],[{code:"131102",name:"桃城区"},{code:"131103",name:"冀州区"},{code:"131121",name:"枣强县"},{code:"131122",name:"武邑县"},{code:"131123",name:"武强县"},{code:"131124",name:"饶阳县"},{code:"131125",name:"安平县"},{code:"131126",name:"故城县"},{code:"131127",name:"景县"},{code:"131128",name:"阜城县"},{code:"131182",name:"深州市"}],[{code:"133101",name:"容城县"},{code:"133102",name:"安新县"},{code:"133103",name:"雄县"}]],[[{code:"140105",name:"小店区"},{code:"140106",name:"迎泽区"},{code:"140107",name:"杏花岭区"},{code:"140108",name:"尖草坪区"},{code:"140109",name:"万柏林区"},{code:"140110",name:"晋源区"},{code:"140121",name:"清徐县"},{code:"140122",name:"阳曲县"},{code:"140123",name:"娄烦县"},{code:"140181",name:"古交市"}],[{code:"140212",name:"新荣区"},{code:"140213",name:"平城区"},{code:"140214",name:"云冈区"},{code:"140215",name:"云州区"},{code:"140221",name:"阳高县"},{code:"140222",name:"天镇县"},{code:"140223",name:"广灵县"},{code:"140224",name:"灵丘县"},{code:"140225",name:"浑源县"},{code:"140226",name:"左云县"}],[{code:"140302",name:"城区"},{code:"140303",name:"矿区"},{code:"140311",name:"郊区"},{code:"140321",name:"平定县"},{code:"140322",name:"盂县"}],[{code:"140403",name:"潞州区"},{code:"140404",name:"上党区"},{code:"140405",name:"屯留区"},{code:"140406",name:"潞城区"},{code:"140423",name:"襄垣县"},{code:"140425",name:"平顺县"},{code:"140426",name:"黎城县"},{code:"140427",name:"壶关县"},{code:"140428",name:"长子县"},{code:"140429",name:"武乡县"},{code:"140430",name:"沁县"},{code:"140431",name:"沁源县"}],[{code:"140502",name:"城区"},{code:"140521",name:"沁水县"},{code:"140522",name:"阳城县"},{code:"140524",name:"陵川县"},{code:"140525",name:"泽州县"},{code:"140581",name:"高平市"}],[{code:"140602",name:"朔城区"},{code:"140603",name:"平鲁区"},{code:"140621",name:"山阴县"},{code:"140622",name:"应县"},{code:"140623",name:"右玉县"},{code:"140681",name:"怀仁市"}],[{code:"140702",name:"榆次区"},{code:"140703",name:"太谷区"},{code:"140721",name:"榆社县"},{code:"140722",name:"左权县"},{code:"140723",name:"和顺县"},{code:"140724",name:"昔阳县"},{code:"140725",name:"寿阳县"},{code:"140727",name:"祁县"},{code:"140728",name:"平遥县"},{code:"140729",name:"灵石县"},{code:"140781",name:"介休市"}],[{code:"140802",name:"盐湖区"},{code:"140821",name:"临猗县"},{code:"140822",name:"万荣县"},{code:"140823",name:"闻喜县"},{code:"140824",name:"稷山县"},{code:"140825",name:"新绛县"},{code:"140826",name:"绛县"},{code:"140827",name:"垣曲县"},{code:"140828",name:"夏县"},{code:"140829",name:"平陆县"},{code:"140830",name:"芮城县"},{code:"140881",name:"永济市"},{code:"140882",name:"河津市"}],[{code:"140902",name:"忻府区"},{code:"140921",name:"定襄县"},{code:"140922",name:"五台县"},{code:"140923",name:"代县"},{code:"140924",name:"繁峙县"},{code:"140925",name:"宁武县"},{code:"140926",name:"静乐县"},{code:"140927",name:"神池县"},{code:"140928",name:"五寨县"},{code:"140929",name:"岢岚县"},{code:"140930",name:"河曲县"},{code:"140931",name:"保德县"},{code:"140932",name:"偏关县"},{code:"140981",name:"原平市"}],[{code:"141002",name:"尧都区"},{code:"141021",name:"曲沃县"},{code:"141022",name:"翼城县"},{code:"141023",name:"襄汾县"},{code:"141024",name:"洪洞县"},{code:"141025",name:"古县"},{code:"141026",name:"安泽县"},{code:"141027",name:"浮山县"},{code:"141028",name:"吉县"},{code:"141029",name:"乡宁县"},{code:"141030",name:"大宁县"},{code:"141031",name:"隰县"},{code:"141032",name:"永和县"},{code:"141033",name:"蒲县"},{code:"141034",name:"汾西县"},{code:"141081",name:"侯马市"},{code:"141082",name:"霍州市"}],[{code:"141102",name:"离石区"},{code:"141121",name:"文水县"},{code:"141122",name:"交城县"},{code:"141123",name:"兴县"},{code:"141124",name:"临县"},{code:"141125",name:"柳林县"},{code:"141126",name:"石楼县"},{code:"141127",name:"岚县"},{code:"141128",name:"方山县"},{code:"141129",name:"中阳县"},{code:"141130",name:"交口县"},{code:"141181",name:"孝义市"},{code:"141182",name:"汾阳市"}]],[[{code:"150102",name:"新城区"},{code:"150103",name:"回民区"},{code:"150104",name:"玉泉区"},{code:"150105",name:"赛罕区"},{code:"150121",name:"土默特左旗"},{code:"150122",name:"托克托县"},{code:"150123",name:"和林格尔县"},{code:"150124",name:"清水河县"},{code:"150125",name:"武川县"}],[{code:"150202",name:"东河区"},{code:"150203",name:"昆都仑区"},{code:"150204",name:"青山区"},{code:"150205",name:"石拐区"},{code:"150206",name:"白云鄂博矿区"},{code:"150207",name:"九原区"},{code:"150221",name:"土默特右旗"},{code:"150222",name:"固阳县"},{code:"150223",name:"达尔罕茂明安联合旗"}],[{code:"150302",name:"海勃湾区"},{code:"150303",name:"海南区"},{code:"150304",name:"乌达区"}],[{code:"150402",name:"红山区"},{code:"150403",name:"元宝山区"},{code:"150404",name:"松山区"},{code:"150421",name:"阿鲁科尔沁旗"},{code:"150422",name:"巴林左旗"},{code:"150423",name:"巴林右旗"},{code:"150424",name:"林西县"},{code:"150425",name:"克什克腾旗"},{code:"150426",name:"翁牛特旗"},{code:"150428",name:"喀喇沁旗"},{code:"150429",name:"宁城县"},{code:"150430",name:"敖汉旗"}],[{code:"150502",name:"科尔沁区"},{code:"150521",name:"科尔沁左翼中旗"},{code:"150522",name:"科尔沁左翼后旗"},{code:"150523",name:"开鲁县"},{code:"150524",name:"库伦旗"},{code:"150525",name:"奈曼旗"},{code:"150526",name:"扎鲁特旗"},{code:"150581",name:"霍林郭勒市"}],[{code:"150602",name:"东胜区"},{code:"150603",name:"康巴什区"},{code:"150621",name:"达拉特旗"},{code:"150622",name:"准格尔旗"},{code:"150623",name:"鄂托克前旗"},{code:"150624",name:"鄂托克旗"},{code:"150625",name:"杭锦旗"},{code:"150626",name:"乌审旗"},{code:"150627",name:"伊金霍洛旗"}],[{code:"150702",name:"海拉尔区"},{code:"150703",name:"扎赉诺尔区"},{code:"150721",name:"阿荣旗"},{code:"150722",name:"莫力达瓦达斡尔族自治旗"},{code:"150723",name:"鄂伦春自治旗"},{code:"150724",name:"鄂温克族自治旗"},{code:"150725",name:"陈巴尔虎旗"},{code:"150726",name:"新巴尔虎左旗"},{code:"150727",name:"新巴尔虎右旗"},{code:"150781",name:"满洲里市"},{code:"150782",name:"牙克石市"},{code:"150783",name:"扎兰屯市"},{code:"150784",name:"额尔古纳市"},{code:"150785",name:"根河市"}],[{code:"150802",name:"临河区"},{code:"150821",name:"五原县"},{code:"150822",name:"磴口县"},{code:"150823",name:"乌拉特前旗"},{code:"150824",name:"乌拉特中旗"},{code:"150825",name:"乌拉特后旗"},{code:"150826",name:"杭锦后旗"}],[{code:"150902",name:"集宁区"},{code:"150921",name:"卓资县"},{code:"150922",name:"化德县"},{code:"150923",name:"商都县"},{code:"150924",name:"兴和县"},{code:"150925",name:"凉城县"},{code:"150926",name:"察哈尔右翼前旗"},{code:"150927",name:"察哈尔右翼中旗"},{code:"150928",name:"察哈尔右翼后旗"},{code:"150929",name:"四子王旗"},{code:"150981",name:"丰镇市"}],[{code:"152201",name:"乌兰浩特市"},{code:"152202",name:"阿尔山市"},{code:"152221",name:"科尔沁右翼前旗"},{code:"152222",name:"科尔沁右翼中旗"},{code:"152223",name:"扎赉特旗"},{code:"152224",name:"突泉县"}],[{code:"152501",name:"二连浩特市"},{code:"152502",name:"锡林浩特市"},{code:"152522",name:"阿巴嘎旗"},{code:"152523",name:"苏尼特左旗"},{code:"152524",name:"苏尼特右旗"},{code:"152525",name:"东乌珠穆沁旗"},{code:"152526",name:"西乌珠穆沁旗"},{code:"152527",name:"太仆寺旗"},{code:"152528",name:"镶黄旗"},{code:"152529",name:"正镶白旗"},{code:"152530",name:"正蓝旗"},{code:"152531",name:"多伦县"}],[{code:"152921",name:"阿拉善左旗"},{code:"152922",name:"阿拉善右旗"},{code:"152923",name:"额济纳旗"}]],[[{code:"210102",name:"和平区"},{code:"210103",name:"沈河区"},{code:"210104",name:"大东区"},{code:"210105",name:"皇姑区"},{code:"210106",name:"铁西区"},{code:"210111",name:"苏家屯区"},{code:"210112",name:"浑南区"},{code:"210113",name:"沈北新区"},{code:"210114",name:"于洪区"},{code:"210115",name:"辽中区"},{code:"210123",name:"康平县"},{code:"210124",name:"法库县"},{code:"210181",name:"新民市"}],[{code:"210202",name:"中山区"},{code:"210203",name:"西岗区"},{code:"210204",name:"沙河口区"},{code:"210211",name:"甘井子区"},{code:"210212",name:"旅顺口区"},{code:"210213",name:"金州区"},{code:"210214",name:"普兰店区"},{code:"210224",name:"长海县"},{code:"210281",name:"瓦房店市"},{code:"210283",name:"庄河市"}],[{code:"210302",name:"铁东区"},{code:"210303",name:"铁西区"},{code:"210304",name:"立山区"},{code:"210311",name:"千山区"},{code:"210321",name:"台安县"},{code:"210323",name:"岫岩满族自治县"},{code:"210381",name:"海城市"}],[{code:"210402",name:"新抚区"},{code:"210403",name:"东洲区"},{code:"210404",name:"望花区"},{code:"210411",name:"顺城区"},{code:"210421",name:"抚顺县"},{code:"210422",name:"新宾满族自治县"},{code:"210423",name:"清原满族自治县"}],[{code:"210502",name:"平山区"},{code:"210503",name:"溪湖区"},{code:"210504",name:"明山区"},{code:"210505",name:"南芬区"},{code:"210521",name:"本溪满族自治县"},{code:"210522",name:"桓仁满族自治县"}],[{code:"210602",name:"元宝区"},{code:"210603",name:"振兴区"},{code:"210604",name:"振安区"},{code:"210624",name:"宽甸满族自治县"},{code:"210681",name:"东港市"},{code:"210682",name:"凤城市"}],[{code:"210702",name:"古塔区"},{code:"210703",name:"凌河区"},{code:"210711",name:"太和区"},{code:"210726",name:"黑山县"},{code:"210727",name:"义县"},{code:"210781",name:"凌海市"},{code:"210782",name:"北镇市"}],[{code:"210802",name:"站前区"},{code:"210803",name:"西市区"},{code:"210804",name:"鲅鱼圈区"},{code:"210811",name:"老边区"},{code:"210881",name:"盖州市"},{code:"210882",name:"大石桥市"}],[{code:"210902",name:"海州区"},{code:"210903",name:"新邱区"},{code:"210904",name:"太平区"},{code:"210905",name:"清河门区"},{code:"210911",name:"细河区"},{code:"210921",name:"阜新蒙古族自治县"},{code:"210922",name:"彰武县"}],[{code:"211002",name:"白塔区"},{code:"211003",name:"文圣区"},{code:"211004",name:"宏伟区"},{code:"211005",name:"弓长岭区"},{code:"211011",name:"太子河区"},{code:"211021",name:"辽阳县"},{code:"211081",name:"灯塔市"}],[{code:"211102",name:"双台子区"},{code:"211103",name:"兴隆台区"},{code:"211104",name:"大洼区"},{code:"211122",name:"盘山县"}],[{code:"211202",name:"银州区"},{code:"211204",name:"清河区"},{code:"211221",name:"铁岭县"},{code:"211223",name:"西丰县"},{code:"211224",name:"昌图县"},{code:"211281",name:"调兵山市"},{code:"211282",name:"开原市"}],[{code:"211302",name:"双塔区"},{code:"211303",name:"龙城区"},{code:"211321",name:"朝阳县"},{code:"211322",name:"建平县"},{code:"211324",name:"喀喇沁左翼蒙古族自治县"},{code:"211381",name:"北票市"},{code:"211382",name:"凌源市"}],[{code:"211402",name:"连山区"},{code:"211403",name:"龙港区"},{code:"211404",name:"南票区"},{code:"211421",name:"绥中县"},{code:"211422",name:"建昌县"},{code:"211481",name:"兴城市"}]],[[{code:"220102",name:"南关区"},{code:"220103",name:"宽城区"},{code:"220104",name:"朝阳区"},{code:"220105",name:"二道区"},{code:"220106",name:"绿园区"},{code:"220112",name:"双阳区"},{code:"220113",name:"九台区"},{code:"220122",name:"农安县"},{code:"220182",name:"榆树市"},{code:"220183",name:"德惠市"},{code:"220184",name:"公主岭市"}],[{code:"220202",name:"昌邑区"},{code:"220203",name:"龙潭区"},{code:"220204",name:"船营区"},{code:"220211",name:"丰满区"},{code:"220221",name:"永吉县"},{code:"220281",name:"蛟河市"},{code:"220282",name:"桦甸市"},{code:"220283",name:"舒兰市"},{code:"220284",name:"磐石市"}],[{code:"220302",name:"铁西区"},{code:"220303",name:"铁东区"},{code:"220322",name:"梨树县"},{code:"220323",name:"伊通满族自治县"},{code:"220382",name:"双辽市"}],[{code:"220402",name:"龙山区"},{code:"220403",name:"西安区"},{code:"220421",name:"东丰县"},{code:"220422",name:"东辽县"}],[{code:"220502",name:"东昌区"},{code:"220503",name:"二道江区"},{code:"220521",name:"通化县"},{code:"220523",name:"辉南县"},{code:"220524",name:"柳河县"},{code:"220581",name:"梅河口市"},{code:"220582",name:"集安市"}],[{code:"220602",name:"浑江区"},{code:"220605",name:"江源区"},{code:"220621",name:"抚松县"},{code:"220622",name:"靖宇县"},{code:"220623",name:"长白朝鲜族自治县"},{code:"220681",name:"临江市"}],[{code:"220702",name:"宁江区"},{code:"220721",name:"前郭尔罗斯蒙古族自治县"},{code:"220722",name:"长岭县"},{code:"220723",name:"乾安县"},{code:"220781",name:"扶余市"}],[{code:"220802",name:"洮北区"},{code:"220821",name:"镇赉县"},{code:"220822",name:"通榆县"},{code:"220881",name:"洮南市"},{code:"220882",name:"大安市"}],[{code:"222401",name:"延吉市"},{code:"222402",name:"图们市"},{code:"222403",name:"敦化市"},{code:"222404",name:"珲春市"},{code:"222405",name:"龙井市"},{code:"222406",name:"和龙市"},{code:"222424",name:"汪清县"},{code:"222426",name:"安图县"}]],[[{code:"230102",name:"道里区"},{code:"230103",name:"南岗区"},{code:"230104",name:"道外区"},{code:"230108",name:"平房区"},{code:"230109",name:"松北区"},{code:"230110",name:"香坊区"},{code:"230111",name:"呼兰区"},{code:"230112",name:"阿城区"},{code:"230113",name:"双城区"},{code:"230123",name:"依兰县"},{code:"230124",name:"方正县"},{code:"230125",name:"宾县"},{code:"230126",name:"巴彦县"},{code:"230127",name:"木兰县"},{code:"230128",name:"通河县"},{code:"230129",name:"延寿县"},{code:"230183",name:"尚志市"},{code:"230184",name:"五常市"}],[{code:"230202",name:"龙沙区"},{code:"230203",name:"建华区"},{code:"230204",name:"铁锋区"},{code:"230205",name:"昂昂溪区"},{code:"230206",name:"富拉尔基区"},{code:"230207",name:"碾子山区"},{code:"230208",name:"梅里斯达斡尔族区"},{code:"230221",name:"龙江县"},{code:"230223",name:"依安县"},{code:"230224",name:"泰来县"},{code:"230225",name:"甘南县"},{code:"230227",name:"富裕县"},{code:"230229",name:"克山县"},{code:"230230",name:"克东县"},{code:"230231",name:"拜泉县"},{code:"230281",name:"讷河市"}],[{code:"230302",name:"鸡冠区"},{code:"230303",name:"恒山区"},{code:"230304",name:"滴道区"},{code:"230305",name:"梨树区"},{code:"230306",name:"城子河区"},{code:"230307",name:"麻山区"},{code:"230321",name:"鸡东县"},{code:"230381",name:"虎林市"},{code:"230382",name:"密山市"}],[{code:"230402",name:"向阳区"},{code:"230403",name:"工农区"},{code:"230404",name:"南山区"},{code:"230405",name:"兴安区"},{code:"230406",name:"东山区"},{code:"230407",name:"兴山区"},{code:"230421",name:"萝北县"},{code:"230422",name:"绥滨县"}],[{code:"230502",name:"尖山区"},{code:"230503",name:"岭东区"},{code:"230505",name:"四方台区"},{code:"230506",name:"宝山区"},{code:"230521",name:"集贤县"},{code:"230522",name:"友谊县"},{code:"230523",name:"宝清县"},{code:"230524",name:"饶河县"}],[{code:"230602",name:"萨尔图区"},{code:"230603",name:"龙凤区"},{code:"230604",name:"让胡路区"},{code:"230605",name:"红岗区"},{code:"230606",name:"大同区"},{code:"230621",name:"肇州县"},{code:"230622",name:"肇源县"},{code:"230623",name:"林甸县"},{code:"230624",name:"杜尔伯特蒙古族自治县"}],[{code:"230717",name:"伊美区"},{code:"230718",name:"乌翠区"},{code:"230719",name:"友好区"},{code:"230722",name:"嘉荫县"},{code:"230723",name:"汤旺县"},{code:"230724",name:"丰林县"},{code:"230725",name:"大箐山县"},{code:"230726",name:"南岔县"},{code:"230751",name:"金林区"},{code:"230781",name:"铁力市"}],[{code:"230803",name:"向阳区"},{code:"230804",name:"前进区"},{code:"230805",name:"东风区"},{code:"230811",name:"郊区"},{code:"230822",name:"桦南县"},{code:"230826",name:"桦川县"},{code:"230828",name:"汤原县"},{code:"230881",name:"同江市"},{code:"230882",name:"富锦市"},{code:"230883",name:"抚远市"}],[{code:"230902",name:"新兴区"},{code:"230903",name:"桃山区"},{code:"230904",name:"茄子河区"},{code:"230921",name:"勃利县"}],[{code:"231002",name:"东安区"},{code:"231003",name:"阳明区"},{code:"231004",name:"爱民区"},{code:"231005",name:"西安区"},{code:"231025",name:"林口县"},{code:"231081",name:"绥芬河市"},{code:"231083",name:"海林市"},{code:"231084",name:"宁安市"},{code:"231085",name:"穆棱市"},{code:"231086",name:"东宁市"}],[{code:"231102",name:"爱辉区"},{code:"231123",name:"逊克县"},{code:"231124",name:"孙吴县"},{code:"231181",name:"北安市"},{code:"231182",name:"五大连池市"},{code:"231183",name:"嫩江市"}],[{code:"231202",name:"北林区"},{code:"231221",name:"望奎县"},{code:"231222",name:"兰西县"},{code:"231223",name:"青冈县"},{code:"231224",name:"庆安县"},{code:"231225",name:"明水县"},{code:"231226",name:"绥棱县"},{code:"231281",name:"安达市"},{code:"231282",name:"肇东市"},{code:"231283",name:"海伦市"}],[{code:"232701",name:"漠河市"},{code:"232721",name:"呼玛县"},{code:"232722",name:"塔河县"},{code:"232761",name:"加格达奇区"},{code:"232763",name:"新林区"},{code:"232764",name:"呼中区"}]],[[{code:"310101",name:"黄浦区"},{code:"310104",name:"徐汇区"},{code:"310105",name:"长宁区"},{code:"310106",name:"静安区"},{code:"310107",name:"普陀区"},{code:"310109",name:"虹口区"},{code:"310110",name:"杨浦区"},{code:"310112",name:"闵行区"},{code:"310113",name:"宝山区"},{code:"310114",name:"嘉定区"},{code:"310115",name:"浦东新区"},{code:"310116",name:"金山区"},{code:"310117",name:"松江区"},{code:"310118",name:"青浦区"},{code:"310120",name:"奉贤区"},{code:"310151",name:"崇明区"}]],[[{code:"320102",name:"玄武区"},{code:"320104",name:"秦淮区"},{code:"320105",name:"建邺区"},{code:"320106",name:"鼓楼区"},{code:"320111",name:"浦口区"},{code:"320113",name:"栖霞区"},{code:"320114",name:"雨花台区"},{code:"320115",name:"江宁区"},{code:"320116",name:"六合区"},{code:"320117",name:"溧水区"},{code:"320118",name:"高淳区"}],[{code:"320205",name:"锡山区"},{code:"320206",name:"惠山区"},{code:"320211",name:"滨湖区"},{code:"320213",name:"梁溪区"},{code:"320214",name:"新吴区"},{code:"320281",name:"江阴市"},{code:"320282",name:"宜兴市"}],[{code:"320302",name:"鼓楼区"},{code:"320303",name:"云龙区"},{code:"320305",name:"贾汪区"},{code:"320311",name:"泉山区"},{code:"320312",name:"铜山区"},{code:"320321",name:"丰县"},{code:"320322",name:"沛县"},{code:"320324",name:"睢宁县"},{code:"320381",name:"新沂市"},{code:"320382",name:"邳州市"}],[{code:"320402",name:"天宁区"},{code:"320404",name:"钟楼区"},{code:"320411",name:"新北区"},{code:"320412",name:"武进区"},{code:"320413",name:"金坛区"},{code:"320481",name:"溧阳市"}],[{code:"320505",name:"虎丘区"},{code:"320506",name:"吴中区"},{code:"320507",name:"相城区"},{code:"320508",name:"姑苏区"},{code:"320509",name:"吴江区"},{code:"320581",name:"常熟市"},{code:"320582",name:"张家港市"},{code:"320583",name:"昆山市"},{code:"320585",name:"太仓市"}],[{code:"320612",name:"通州区"},{code:"320613",name:"崇川区"},{code:"320614",name:"海门区"},{code:"320623",name:"如东县"},{code:"320681",name:"启东市"},{code:"320682",name:"如皋市"},{code:"320685",name:"海安市"}],[{code:"320703",name:"连云区"},{code:"320706",name:"海州区"},{code:"320707",name:"赣榆区"},{code:"320722",name:"东海县"},{code:"320723",name:"灌云县"},{code:"320724",name:"灌南县"}],[{code:"320803",name:"淮安区"},{code:"320804",name:"淮阴区"},{code:"320812",name:"清江浦区"},{code:"320813",name:"洪泽区"},{code:"320826",name:"涟水县"},{code:"320830",name:"盱眙县"},{code:"320831",name:"金湖县"}],[{code:"320902",name:"亭湖区"},{code:"320903",name:"盐都区"},{code:"320904",name:"大丰区"},{code:"320921",name:"响水县"},{code:"320922",name:"滨海县"},{code:"320923",name:"阜宁县"},{code:"320924",name:"射阳县"},{code:"320925",name:"建湖县"},{code:"320981",name:"东台市"}],[{code:"321002",name:"广陵区"},{code:"321003",name:"邗江区"},{code:"321012",name:"江都区"},{code:"321023",name:"宝应县"},{code:"321081",name:"仪征市"},{code:"321084",name:"高邮市"}],[{code:"321102",name:"京口区"},{code:"321111",name:"润州区"},{code:"321112",name:"丹徒区"},{code:"321181",name:"丹阳市"},{code:"321182",name:"扬中市"},{code:"321183",name:"句容市"}],[{code:"321202",name:"海陵区"},{code:"321203",name:"高港区"},{code:"321204",name:"姜堰区"},{code:"321281",name:"兴化市"},{code:"321282",name:"靖江市"},{code:"321283",name:"泰兴市"}],[{code:"321302",name:"宿城区"},{code:"321311",name:"宿豫区"},{code:"321322",name:"沭阳县"},{code:"321323",name:"泗阳县"},{code:"321324",name:"泗洪县"}]],[[{code:"330102",name:"上城区"},{code:"330105",name:"拱墅区"},{code:"330106",name:"西湖区"},{code:"330108",name:"滨江区"},{code:"330109",name:"萧山区"},{code:"330110",name:"余杭区"},{code:"330111",name:"富阳区"},{code:"330112",name:"临安区"},{code:"330113",name:"临平区"},{code:"330114",name:"钱塘区"},{code:"330122",name:"桐庐县"},{code:"330127",name:"淳安县"},{code:"330182",name:"建德市"}],[{code:"330203",name:"海曙区"},{code:"330205",name:"江北区"},{code:"330206",name:"北仑区"},{code:"330211",name:"镇海区"},{code:"330212",name:"鄞州区"},{code:"330213",name:"奉化区"},{code:"330225",name:"象山县"},{code:"330226",name:"宁海县"},{code:"330281",name:"余姚市"},{code:"330282",name:"慈溪市"}],[{code:"330302",name:"鹿城区"},{code:"330303",name:"龙湾区"},{code:"330304",name:"瓯海区"},{code:"330305",name:"洞头区"},{code:"330324",name:"永嘉县"},{code:"330326",name:"平阳县"},{code:"330327",name:"苍南县"},{code:"330328",name:"文成县"},{code:"330329",name:"泰顺县"},{code:"330381",name:"瑞安市"},{code:"330382",name:"乐清市"},{code:"330383",name:"龙港市"}],[{code:"330402",name:"南湖区"},{code:"330411",name:"秀洲区"},{code:"330421",name:"嘉善县"},{code:"330424",name:"海盐县"},{code:"330481",name:"海宁市"},{code:"330482",name:"平湖市"},{code:"330483",name:"桐乡市"}],[{code:"330502",name:"吴兴区"},{code:"330503",name:"南浔区"},{code:"330521",name:"德清县"},{code:"330522",name:"长兴县"},{code:"330523",name:"安吉县"}],[{code:"330602",name:"越城区"},{code:"330603",name:"柯桥区"},{code:"330604",name:"上虞区"},{code:"330624",name:"新昌县"},{code:"330681",name:"诸暨市"},{code:"330683",name:"嵊州市"}],[{code:"330702",name:"婺城区"},{code:"330703",name:"金东区"},{code:"330723",name:"武义县"},{code:"330726",name:"浦江县"},{code:"330727",name:"磐安县"},{code:"330781",name:"兰溪市"},{code:"330782",name:"义乌市"},{code:"330783",name:"东阳市"},{code:"330784",name:"永康市"}],[{code:"330802",name:"柯城区"},{code:"330803",name:"衢江区"},{code:"330822",name:"常山县"},{code:"330824",name:"开化县"},{code:"330825",name:"龙游县"},{code:"330881",name:"江山市"}],[{code:"330902",name:"定海区"},{code:"330903",name:"普陀区"},{code:"330921",name:"岱山县"},{code:"330922",name:"嵊泗县"}],[{code:"331002",name:"椒江区"},{code:"331003",name:"黄岩区"},{code:"331004",name:"路桥区"},{code:"331022",name:"三门县"},{code:"331023",name:"天台县"},{code:"331024",name:"仙居县"},{code:"331081",name:"温岭市"},{code:"331082",name:"临海市"},{code:"331083",name:"玉环市"}],[{code:"331102",name:"莲都区"},{code:"331121",name:"青田县"},{code:"331122",name:"缙云县"},{code:"331123",name:"遂昌县"},{code:"331124",name:"松阳县"},{code:"331125",name:"云和县"},{code:"331126",name:"庆元县"},{code:"331127",name:"景宁畲族自治县"},{code:"331181",name:"龙泉市"}]],[[{code:"340102",name:"瑶海区"},{code:"340103",name:"庐阳区"},{code:"340104",name:"蜀山区"},{code:"340111",name:"包河区"},{code:"340121",name:"长丰县"},{code:"340122",name:"肥东县"},{code:"340123",name:"肥西县"},{code:"340124",name:"庐江县"},{code:"340181",name:"巢湖市"}],[{code:"340202",name:"镜湖区"},{code:"340207",name:"鸠江区"},{code:"340209",name:"弋江区"},{code:"340210",name:"湾沚区"},{code:"340212",name:"繁昌区"},{code:"340223",name:"南陵县"},{code:"340281",name:"无为市"}],[{code:"340302",name:"龙子湖区"},{code:"340303",name:"蚌山区"},{code:"340304",name:"禹会区"},{code:"340311",name:"淮上区"},{code:"340321",name:"怀远县"},{code:"340322",name:"五河县"},{code:"340323",name:"固镇县"}],[{code:"340402",name:"大通区"},{code:"340403",name:"田家庵区"},{code:"340404",name:"谢家集区"},{code:"340405",name:"八公山区"},{code:"340406",name:"潘集区"},{code:"340421",name:"凤台县"},{code:"340422",name:"寿县"}],[{code:"340503",name:"花山区"},{code:"340504",name:"雨山区"},{code:"340506",name:"博望区"},{code:"340521",name:"当涂县"},{code:"340522",name:"含山县"},{code:"340523",name:"和县"}],[{code:"340602",name:"杜集区"},{code:"340603",name:"相山区"},{code:"340604",name:"烈山区"},{code:"340621",name:"濉溪县"}],[{code:"340705",name:"铜官区"},{code:"340706",name:"义安区"},{code:"340711",name:"郊区"},{code:"340722",name:"枞阳县"}],[{code:"340802",name:"迎江区"},{code:"340803",name:"大观区"},{code:"340811",name:"宜秀区"},{code:"340822",name:"怀宁县"},{code:"340825",name:"太湖县"},{code:"340826",name:"宿松县"},{code:"340827",name:"望江县"},{code:"340828",name:"岳西县"},{code:"340881",name:"桐城市"},{code:"340882",name:"潜山市"}],[{code:"341002",name:"屯溪区"},{code:"341003",name:"黄山区"},{code:"341004",name:"徽州区"},{code:"341021",name:"歙县"},{code:"341022",name:"休宁县"},{code:"341023",name:"黟县"},{code:"341024",name:"祁门县"}],[{code:"341102",name:"琅琊区"},{code:"341103",name:"南谯区"},{code:"341122",name:"来安县"},{code:"341124",name:"全椒县"},{code:"341125",name:"定远县"},{code:"341126",name:"凤阳县"},{code:"341181",name:"天长市"},{code:"341182",name:"明光市"}],[{code:"341202",name:"颍州区"},{code:"341203",name:"颍东区"},{code:"341204",name:"颍泉区"},{code:"341221",name:"临泉县"},{code:"341222",name:"太和县"},{code:"341225",name:"阜南县"},{code:"341226",name:"颍上县"},{code:"341282",name:"界首市"}],[{code:"341302",name:"埇桥区"},{code:"341321",name:"砀山县"},{code:"341322",name:"萧县"},{code:"341323",name:"灵璧县"},{code:"341324",name:"泗县"}],[{code:"341502",name:"金安区"},{code:"341503",name:"裕安区"},{code:"341504",name:"叶集区"},{code:"341522",name:"霍邱县"},{code:"341523",name:"舒城县"},{code:"341524",name:"金寨县"},{code:"341525",name:"霍山县"}],[{code:"341602",name:"谯城区"},{code:"341621",name:"涡阳县"},{code:"341622",name:"蒙城县"},{code:"341623",name:"利辛县"}],[{code:"341702",name:"贵池区"},{code:"341721",name:"东至县"},{code:"341722",name:"石台县"},{code:"341723",name:"青阳县"}],[{code:"341802",name:"宣州区"},{code:"341821",name:"郎溪县"},{code:"341823",name:"泾县"},{code:"341824",name:"绩溪县"},{code:"341825",name:"旌德县"},{code:"341881",name:"宁国市"},{code:"341882",name:"广德市"}]],[[{code:"350102",name:"鼓楼区"},{code:"350103",name:"台江区"},{code:"350104",name:"仓山区"},{code:"350105",name:"马尾区"},{code:"350111",name:"晋安区"},{code:"350112",name:"长乐区"},{code:"350121",name:"闽侯县"},{code:"350122",name:"连江县"},{code:"350123",name:"罗源县"},{code:"350124",name:"闽清县"},{code:"350125",name:"永泰县"},{code:"350128",name:"平潭县"},{code:"350181",name:"福清市"}],[{code:"350203",name:"思明区"},{code:"350205",name:"海沧区"},{code:"350206",name:"湖里区"},{code:"350211",name:"集美区"},{code:"350212",name:"同安区"},{code:"350213",name:"翔安区"}],[{code:"350302",name:"城厢区"},{code:"350303",name:"涵江区"},{code:"350304",name:"荔城区"},{code:"350305",name:"秀屿区"},{code:"350322",name:"仙游县"}],[{code:"350404",name:"三元区"},{code:"350405",name:"沙县区"},{code:"350421",name:"明溪县"},{code:"350423",name:"清流县"},{code:"350424",name:"宁化县"},{code:"350425",name:"大田县"},{code:"350426",name:"尤溪县"},{code:"350428",name:"将乐县"},{code:"350429",name:"泰宁县"},{code:"350430",name:"建宁县"},{code:"350481",name:"永安市"}],[{code:"350502",name:"鲤城区"},{code:"350503",name:"丰泽区"},{code:"350504",name:"洛江区"},{code:"350505",name:"泉港区"},{code:"350521",name:"惠安县"},{code:"350524",name:"安溪县"},{code:"350525",name:"永春县"},{code:"350526",name:"德化县"},{code:"350527",name:"金门县"},{code:"350581",name:"石狮市"},{code:"350582",name:"晋江市"},{code:"350583",name:"南安市"}],[{code:"350602",name:"芗城区"},{code:"350603",name:"龙文区"},{code:"350604",name:"龙海区"},{code:"350605",name:"长泰区"},{code:"350622",name:"云霄县"},{code:"350623",name:"漳浦县"},{code:"350624",name:"诏安县"},{code:"350626",name:"东山县"},{code:"350627",name:"南靖县"},{code:"350628",name:"平和县"},{code:"350629",name:"华安县"}],[{code:"350702",name:"延平区"},{code:"350703",name:"建阳区"},{code:"350721",name:"顺昌县"},{code:"350722",name:"浦城县"},{code:"350723",name:"光泽县"},{code:"350724",name:"松溪县"},{code:"350725",name:"政和县"},{code:"350781",name:"邵武市"},{code:"350782",name:"武夷山市"},{code:"350783",name:"建瓯市"}],[{code:"350802",name:"新罗区"},{code:"350803",name:"永定区"},{code:"350821",name:"长汀县"},{code:"350823",name:"上杭县"},{code:"350824",name:"武平县"},{code:"350825",name:"连城县"},{code:"350881",name:"漳平市"}],[{code:"350902",name:"蕉城区"},{code:"350921",name:"霞浦县"},{code:"350922",name:"古田县"},{code:"350923",name:"屏南县"},{code:"350924",name:"寿宁县"},{code:"350925",name:"周宁县"},{code:"350926",name:"柘荣县"},{code:"350981",name:"福安市"},{code:"350982",name:"福鼎市"}]],[[{code:"360102",name:"东湖区"},{code:"360103",name:"西湖区"},{code:"360104",name:"青云谱区"},{code:"360111",name:"青山湖区"},{code:"360112",name:"新建区"},{code:"360113",name:"红谷滩区"},{code:"360121",name:"南昌县"},{code:"360123",name:"安义县"},{code:"360124",name:"进贤县"}],[{code:"360202",name:"昌江区"},{code:"360203",name:"珠山区"},{code:"360222",name:"浮梁县"},{code:"360281",name:"乐平市"}],[{code:"360302",name:"安源区"},{code:"360313",name:"湘东区"},{code:"360321",name:"莲花县"},{code:"360322",name:"上栗县"},{code:"360323",name:"芦溪县"}],[{code:"360402",name:"濂溪区"},{code:"360403",name:"浔阳区"},{code:"360404",name:"柴桑区"},{code:"360423",name:"武宁县"},{code:"360424",name:"修水县"},{code:"360425",name:"永修县"},{code:"360426",name:"德安县"},{code:"360428",name:"都昌县"},{code:"360429",name:"湖口县"},{code:"360430",name:"彭泽县"},{code:"360481",name:"瑞昌市"},{code:"360482",name:"共青城市"},{code:"360483",name:"庐山市"}],[{code:"360502",name:"渝水区"},{code:"360521",name:"分宜县"}],[{code:"360602",name:"月湖区"},{code:"360603",name:"余江区"},{code:"360681",name:"贵溪市"}],[{code:"360702",name:"章贡区"},{code:"360703",name:"南康区"},{code:"360704",name:"赣县区"},{code:"360722",name:"信丰县"},{code:"360723",name:"大余县"},{code:"360724",name:"上犹县"},{code:"360725",name:"崇义县"},{code:"360726",name:"安远县"},{code:"360728",name:"定南县"},{code:"360729",name:"全南县"},{code:"360730",name:"宁都县"},{code:"360731",name:"于都县"},{code:"360732",name:"兴国县"},{code:"360733",name:"会昌县"},{code:"360734",name:"寻乌县"},{code:"360735",name:"石城县"},{code:"360781",name:"瑞金市"},{code:"360783",name:"龙南市"}],[{code:"360802",name:"吉州区"},{code:"360803",name:"青原区"},{code:"360821",name:"吉安县"},{code:"360822",name:"吉水县"},{code:"360823",name:"峡江县"},{code:"360824",name:"新干县"},{code:"360825",name:"永丰县"},{code:"360826",name:"泰和县"},{code:"360827",name:"遂川县"},{code:"360828",name:"万安县"},{code:"360829",name:"安福县"},{code:"360830",name:"永新县"},{code:"360881",name:"井冈山市"}],[{code:"360902",name:"袁州区"},{code:"360921",name:"奉新县"},{code:"360922",name:"万载县"},{code:"360923",name:"上高县"},{code:"360924",name:"宜丰县"},{code:"360925",name:"靖安县"},{code:"360926",name:"铜鼓县"},{code:"360981",name:"丰城市"},{code:"360982",name:"樟树市"},{code:"360983",name:"高安市"}],[{code:"361002",name:"临川区"},{code:"361003",name:"东乡区"},{code:"361021",name:"南城县"},{code:"361022",name:"黎川县"},{code:"361023",name:"南丰县"},{code:"361024",name:"崇仁县"},{code:"361025",name:"乐安县"},{code:"361026",name:"宜黄县"},{code:"361027",name:"金溪县"},{code:"361028",name:"资溪县"},{code:"361030",name:"广昌县"}],[{code:"361102",name:"信州区"},{code:"361103",name:"广丰区"},{code:"361104",name:"广信区"},{code:"361123",name:"玉山县"},{code:"361124",name:"铅山县"},{code:"361125",name:"横峰县"},{code:"361126",name:"弋阳县"},{code:"361127",name:"余干县"},{code:"361128",name:"鄱阳县"},{code:"361129",name:"万年县"},{code:"361130",name:"婺源县"},{code:"361181",name:"德兴市"}]],[[{code:"370102",name:"历下区"},{code:"370103",name:"市中区"},{code:"370104",name:"槐荫区"},{code:"370105",name:"天桥区"},{code:"370112",name:"历城区"},{code:"370113",name:"长清区"},{code:"370114",name:"章丘区"},{code:"370115",name:"济阳区"},{code:"370116",name:"莱芜区"},{code:"370117",name:"钢城区"},{code:"370124",name:"平阴县"},{code:"370126",name:"商河县"}],[{code:"370202",name:"市南区"},{code:"370203",name:"市北区"},{code:"370211",name:"黄岛区"},{code:"370212",name:"崂山区"},{code:"370213",name:"李沧区"},{code:"370214",name:"城阳区"},{code:"370215",name:"即墨区"},{code:"370281",name:"胶州市"},{code:"370283",name:"平度市"},{code:"370285",name:"莱西市"}],[{code:"370302",name:"淄川区"},{code:"370303",name:"张店区"},{code:"370304",name:"博山区"},{code:"370305",name:"临淄区"},{code:"370306",name:"周村区"},{code:"370321",name:"桓台县"},{code:"370322",name:"高青县"},{code:"370323",name:"沂源县"}],[{code:"370402",name:"市中区"},{code:"370403",name:"薛城区"},{code:"370404",name:"峄城区"},{code:"370405",name:"台儿庄区"},{code:"370406",name:"山亭区"},{code:"370481",name:"滕州市"}],[{code:"370502",name:"东营区"},{code:"370503",name:"河口区"},{code:"370505",name:"垦利区"},{code:"370522",name:"利津县"},{code:"370523",name:"广饶县"}],[{code:"370602",name:"芝罘区"},{code:"370611",name:"福山区"},{code:"370612",name:"牟平区"},{code:"370613",name:"莱山区"},{code:"370614",name:"蓬莱区"},{code:"370681",name:"龙口市"},{code:"370682",name:"莱阳市"},{code:"370683",name:"莱州市"},{code:"370685",name:"招远市"},{code:"370686",name:"栖霞市"},{code:"370687",name:"海阳市"}],[{code:"370702",name:"潍城区"},{code:"370703",name:"寒亭区"},{code:"370704",name:"坊子区"},{code:"370705",name:"奎文区"},{code:"370724",name:"临朐县"},{code:"370725",name:"昌乐县"},{code:"370781",name:"青州市"},{code:"370782",name:"诸城市"},{code:"370783",name:"寿光市"},{code:"370784",name:"安丘市"},{code:"370785",name:"高密市"},{code:"370786",name:"昌邑市"}],[{code:"370811",name:"任城区"},{code:"370812",name:"兖州区"},{code:"370826",name:"微山县"},{code:"370827",name:"鱼台县"},{code:"370828",name:"金乡县"},{code:"370829",name:"嘉祥县"},{code:"370830",name:"汶上县"},{code:"370831",name:"泗水县"},{code:"370832",name:"梁山县"},{code:"370881",name:"曲阜市"},{code:"370883",name:"邹城市"}],[{code:"370902",name:"泰山区"},{code:"370911",name:"岱岳区"},{code:"370921",name:"宁阳县"},{code:"370923",name:"东平县"},{code:"370982",name:"新泰市"},{code:"370983",name:"肥城市"}],[{code:"371002",name:"环翠区"},{code:"371003",name:"文登区"},{code:"371082",name:"荣成市"},{code:"371083",name:"乳山市"}],[{code:"371102",name:"东港区"},{code:"371103",name:"岚山区"},{code:"371121",name:"五莲县"},{code:"371122",name:"莒县"}],[{code:"371302",name:"兰山区"},{code:"371311",name:"罗庄区"},{code:"371312",name:"河东区"},{code:"371321",name:"沂南县"},{code:"371322",name:"郯城县"},{code:"371323",name:"沂水县"},{code:"371324",name:"兰陵县"},{code:"371325",name:"费县"},{code:"371326",name:"平邑县"},{code:"371327",name:"莒南县"},{code:"371328",name:"蒙阴县"},{code:"371329",name:"临沭县"}],[{code:"371402",name:"德城区"},{code:"371403",name:"陵城区"},{code:"371422",name:"宁津县"},{code:"371423",name:"庆云县"},{code:"371424",name:"临邑县"},{code:"371425",name:"齐河县"},{code:"371426",name:"平原县"},{code:"371427",name:"夏津县"},{code:"371428",name:"武城县"},{code:"371481",name:"乐陵市"},{code:"371482",name:"禹城市"}],[{code:"371502",name:"东昌府区"},{code:"371503",name:"茌平区"},{code:"371521",name:"阳谷县"},{code:"371522",name:"莘县"},{code:"371524",name:"东阿县"},{code:"371525",name:"冠县"},{code:"371526",name:"高唐县"},{code:"371581",name:"临清市"}],[{code:"371602",name:"滨城区"},{code:"371603",name:"沾化区"},{code:"371621",name:"惠民县"},{code:"371622",name:"阳信县"},{code:"371623",name:"无棣县"},{code:"371625",name:"博兴县"},{code:"371681",name:"邹平市"}],[{code:"371702",name:"牡丹区"},{code:"371703",name:"定陶区"},{code:"371721",name:"曹县"},{code:"371722",name:"单县"},{code:"371723",name:"成武县"},{code:"371724",name:"巨野县"},{code:"371725",name:"郓城县"},{code:"371726",name:"鄄城县"},{code:"371728",name:"东明县"}]],[[{code:"410102",name:"中原区"},{code:"410103",name:"二七区"},{code:"410104",name:"管城回族区"},{code:"410105",name:"金水区"},{code:"410106",name:"上街区"},{code:"410108",name:"惠济区"},{code:"410122",name:"中牟县"},{code:"410181",name:"巩义市"},{code:"410182",name:"荥阳市"},{code:"410183",name:"新密市"},{code:"410184",name:"新郑市"},{code:"410185",name:"登封市"}],[{code:"410202",name:"龙亭区"},{code:"410203",name:"顺河回族区"},{code:"410204",name:"鼓楼区"},{code:"410205",name:"禹王台区"},{code:"410212",name:"祥符区"},{code:"410221",name:"杞县"},{code:"410222",name:"通许县"},{code:"410223",name:"尉氏县"},{code:"410225",name:"兰考县"}],[{code:"410302",name:"老城区"},{code:"410303",name:"西工区"},{code:"410304",name:"瀍河回族区"},{code:"410305",name:"涧西区"},{code:"410307",name:"偃师区"},{code:"410308",name:"孟津区"},{code:"410311",name:"洛龙区"},{code:"410323",name:"新安县"},{code:"410324",name:"栾川县"},{code:"410325",name:"嵩县"},{code:"410326",name:"汝阳县"},{code:"410327",name:"宜阳县"},{code:"410328",name:"洛宁县"},{code:"410329",name:"伊川县"}],[{code:"410402",name:"新华区"},{code:"410403",name:"卫东区"},{code:"410404",name:"石龙区"},{code:"410411",name:"湛河区"},{code:"410421",name:"宝丰县"},{code:"410422",name:"叶县"},{code:"410423",name:"鲁山县"},{code:"410425",name:"郏县"},{code:"410481",name:"舞钢市"},{code:"410482",name:"汝州市"}],[{code:"410502",name:"文峰区"},{code:"410503",name:"北关区"},{code:"410505",name:"殷都区"},{code:"410506",name:"龙安区"},{code:"410522",name:"安阳县"},{code:"410523",name:"汤阴县"},{code:"410526",name:"滑县"},{code:"410527",name:"内黄县"},{code:"410581",name:"林州市"}],[{code:"410602",name:"鹤山区"},{code:"410603",name:"山城区"},{code:"410611",name:"淇滨区"},{code:"410621",name:"浚县"},{code:"410622",name:"淇县"}],[{code:"410702",name:"红旗区"},{code:"410703",name:"卫滨区"},{code:"410704",name:"凤泉区"},{code:"410711",name:"牧野区"},{code:"410721",name:"新乡县"},{code:"410724",name:"获嘉县"},{code:"410725",name:"原阳县"},{code:"410726",name:"延津县"},{code:"410727",name:"封丘县"},{code:"410781",name:"卫辉市"},{code:"410782",name:"辉县市"},{code:"410783",name:"长垣市"}],[{code:"410802",name:"解放区"},{code:"410803",name:"中站区"},{code:"410804",name:"马村区"},{code:"410811",name:"山阳区"},{code:"410821",name:"修武县"},{code:"410822",name:"博爱县"},{code:"410823",name:"武陟县"},{code:"410825",name:"温县"},{code:"410882",name:"沁阳市"},{code:"410883",name:"孟州市"}],[{code:"410902",name:"华龙区"},{code:"410922",name:"清丰县"},{code:"410923",name:"南乐县"},{code:"410926",name:"范县"},{code:"410927",name:"台前县"},{code:"410928",name:"濮阳县"}],[{code:"411002",name:"魏都区"},{code:"411003",name:"建安区"},{code:"411024",name:"鄢陵县"},{code:"411025",name:"襄城县"},{code:"411081",name:"禹州市"},{code:"411082",name:"长葛市"}],[{code:"411102",name:"源汇区"},{code:"411103",name:"郾城区"},{code:"411104",name:"召陵区"},{code:"411121",name:"舞阳县"},{code:"411122",name:"临颍县"}],[{code:"411202",name:"湖滨区"},{code:"411203",name:"陕州区"},{code:"411221",name:"渑池县"},{code:"411224",name:"卢氏县"},{code:"411281",name:"义马市"},{code:"411282",name:"灵宝市"}],[{code:"411302",name:"宛城区"},{code:"411303",name:"卧龙区"},{code:"411321",name:"南召县"},{code:"411322",name:"方城县"},{code:"411323",name:"西峡县"},{code:"411324",name:"镇平县"},{code:"411325",name:"内乡县"},{code:"411326",name:"淅川县"},{code:"411327",name:"社旗县"},{code:"411328",name:"唐河县"},{code:"411329",name:"新野县"},{code:"411330",name:"桐柏县"},{code:"411381",name:"邓州市"}],[{code:"411402",name:"梁园区"},{code:"411403",name:"睢阳区"},{code:"411421",name:"民权县"},{code:"411422",name:"睢县"},{code:"411423",name:"宁陵县"},{code:"411424",name:"柘城县"},{code:"411425",name:"虞城县"},{code:"411426",name:"夏邑县"},{code:"411481",name:"永城市"}],[{code:"411502",name:"浉河区"},{code:"411503",name:"平桥区"},{code:"411521",name:"罗山县"},{code:"411522",name:"光山县"},{code:"411523",name:"新县"},{code:"411524",name:"商城县"},{code:"411525",name:"固始县"},{code:"411526",name:"潢川县"},{code:"411527",name:"淮滨县"},{code:"411528",name:"息县"}],[{code:"411602",name:"川汇区"},{code:"411603",name:"淮阳区"},{code:"411621",name:"扶沟县"},{code:"411622",name:"西华县"},{code:"411623",name:"商水县"},{code:"411624",name:"沈丘县"},{code:"411625",name:"郸城县"},{code:"411627",name:"太康县"},{code:"411628",name:"鹿邑县"},{code:"411681",name:"项城市"}],[{code:"411702",name:"驿城区"},{code:"411721",name:"西平县"},{code:"411722",name:"上蔡县"},{code:"411723",name:"平舆县"},{code:"411724",name:"正阳县"},{code:"411725",name:"确山县"},{code:"411726",name:"泌阳县"},{code:"411727",name:"汝南县"},{code:"411728",name:"遂平县"},{code:"411729",name:"新蔡县"}],[{code:"41900101",name:"济源市"}]],[[{code:"420102",name:"江岸区"},{code:"420103",name:"江汉区"},{code:"420104",name:"硚口区"},{code:"420105",name:"汉阳区"},{code:"420106",name:"武昌区"},{code:"420107",name:"青山区"},{code:"420111",name:"洪山区"},{code:"420112",name:"东西湖区"},{code:"420113",name:"汉南区"},{code:"420114",name:"蔡甸区"},{code:"420115",name:"江夏区"},{code:"420116",name:"黄陂区"},{code:"420117",name:"新洲区"}],[{code:"420202",name:"黄石港区"},{code:"420203",name:"西塞山区"},{code:"420204",name:"下陆区"},{code:"420205",name:"铁山区"},{code:"420222",name:"阳新县"},{code:"420281",name:"大冶市"}],[{code:"420302",name:"茅箭区"},{code:"420303",name:"张湾区"},{code:"420304",name:"郧阳区"},{code:"420322",name:"郧西县"},{code:"420323",name:"竹山县"},{code:"420324",name:"竹溪县"},{code:"420325",name:"房县"},{code:"420381",name:"丹江口市"}],[{code:"420502",name:"西陵区"},{code:"420503",name:"伍家岗区"},{code:"420504",name:"点军区"},{code:"420505",name:"猇亭区"},{code:"420506",name:"夷陵区"},{code:"420525",name:"远安县"},{code:"420526",name:"兴山县"},{code:"420527",name:"秭归县"},{code:"420528",name:"长阳土家族自治县"},{code:"420529",name:"五峰土家族自治县"},{code:"420581",name:"宜都市"},{code:"420582",name:"当阳市"},{code:"420583",name:"枝江市"}],[{code:"420602",name:"襄城区"},{code:"420606",name:"樊城区"},{code:"420607",name:"襄州区"},{code:"420624",name:"南漳县"},{code:"420625",name:"谷城县"},{code:"420626",name:"保康县"},{code:"420682",name:"老河口市"},{code:"420683",name:"枣阳市"},{code:"420684",name:"宜城市"}],[{code:"420702",name:"梁子湖区"},{code:"420703",name:"华容区"},{code:"420704",name:"鄂城区"}],[{code:"420802",name:"东宝区"},{code:"420804",name:"掇刀区"},{code:"420822",name:"沙洋县"},{code:"420881",name:"钟祥市"},{code:"420882",name:"京山市"}],[{code:"420902",name:"孝南区"},{code:"420921",name:"孝昌县"},{code:"420922",name:"大悟县"},{code:"420923",name:"云梦县"},{code:"420981",name:"应城市"},{code:"420982",name:"安陆市"},{code:"420984",name:"汉川市"}],[{code:"421002",name:"沙市区"},{code:"421003",name:"荆州区"},{code:"421022",name:"公安县"},{code:"421024",name:"江陵县"},{code:"421081",name:"石首市"},{code:"421083",name:"洪湖市"},{code:"421087",name:"松滋市"},{code:"421088",name:"监利市"}],[{code:"421102",name:"黄州区"},{code:"421121",name:"团风县"},{code:"421122",name:"红安县"},{code:"421123",name:"罗田县"},{code:"421124",name:"英山县"},{code:"421125",name:"浠水县"},{code:"421126",name:"蕲春县"},{code:"421127",name:"黄梅县"},{code:"421181",name:"麻城市"},{code:"421182",name:"武穴市"}],[{code:"421202",name:"咸安区"},{code:"421221",name:"嘉鱼县"},{code:"421222",name:"通城县"},{code:"421223",name:"崇阳县"},{code:"421224",name:"通山县"},{code:"421281",name:"赤壁市"}],[{code:"421303",name:"曾都区"},{code:"421321",name:"随县"},{code:"421381",name:"广水市"}],[{code:"422801",name:"恩施市"},{code:"422802",name:"利川市"},{code:"422822",name:"建始县"},{code:"422823",name:"巴东县"},{code:"422825",name:"宣恩县"},{code:"422826",name:"咸丰县"},{code:"422827",name:"来凤县"},{code:"422828",name:"鹤峰县"}],[{code:"42900401",name:"仙桃市"}],[{code:"42900501",name:"潜江市"}],[{code:"42900601",name:"天门市"}],[{code:"42902101",name:"神农架林区"}]],[[{code:"430102",name:"芙蓉区"},{code:"430103",name:"天心区"},{code:"430104",name:"岳麓区"},{code:"430105",name:"开福区"},{code:"430111",name:"雨花区"},{code:"430112",name:"望城区"},{code:"430121",name:"长沙县"},{code:"430181",name:"浏阳市"},{code:"430182",name:"宁乡市"}],[{code:"430202",name:"荷塘区"},{code:"430203",name:"芦淞区"},{code:"430204",name:"石峰区"},{code:"430211",name:"天元区"},{code:"430212",name:"渌口区"},{code:"430223",name:"攸县"},{code:"430224",name:"茶陵县"},{code:"430225",name:"炎陵县"},{code:"430281",name:"醴陵市"}],[{code:"430302",name:"雨湖区"},{code:"430304",name:"岳塘区"},{code:"430321",name:"湘潭县"},{code:"430381",name:"湘乡市"},{code:"430382",name:"韶山市"}],[{code:"430405",name:"珠晖区"},{code:"430406",name:"雁峰区"},{code:"430407",name:"石鼓区"},{code:"430408",name:"蒸湘区"},{code:"430412",name:"南岳区"},{code:"430421",name:"衡阳县"},{code:"430422",name:"衡南县"},{code:"430423",name:"衡山县"},{code:"430424",name:"衡东县"},{code:"430426",name:"祁东县"},{code:"430481",name:"耒阳市"},{code:"430482",name:"常宁市"}],[{code:"430502",name:"双清区"},{code:"430503",name:"大祥区"},{code:"430511",name:"北塔区"},{code:"430522",name:"新邵县"},{code:"430523",name:"邵阳县"},{code:"430524",name:"隆回县"},{code:"430525",name:"洞口县"},{code:"430527",name:"绥宁县"},{code:"430528",name:"新宁县"},{code:"430529",name:"城步苗族自治县"},{code:"430581",name:"武冈市"},{code:"430582",name:"邵东市"}],[{code:"430602",name:"岳阳楼区"},{code:"430603",name:"云溪区"},{code:"430611",name:"君山区"},{code:"430621",name:"岳阳县"},{code:"430623",name:"华容县"},{code:"430624",name:"湘阴县"},{code:"430626",name:"平江县"},{code:"430681",name:"汨罗市"},{code:"430682",name:"临湘市"}],[{code:"430702",name:"武陵区"},{code:"430703",name:"鼎城区"},{code:"430721",name:"安乡县"},{code:"430722",name:"汉寿县"},{code:"430723",name:"澧县"},{code:"430724",name:"临澧县"},{code:"430725",name:"桃源县"},{code:"430726",name:"石门县"},{code:"430781",name:"津市市"}],[{code:"430802",name:"永定区"},{code:"430811",name:"武陵源区"},{code:"430821",name:"慈利县"},{code:"430822",name:"桑植县"}],[{code:"430902",name:"资阳区"},{code:"430903",name:"赫山区"},{code:"430921",name:"南县"},{code:"430922",name:"桃江县"},{code:"430923",name:"安化县"},{code:"430981",name:"沅江市"}],[{code:"431002",name:"北湖区"},{code:"431003",name:"苏仙区"},{code:"431021",name:"桂阳县"},{code:"431022",name:"宜章县"},{code:"431023",name:"永兴县"},{code:"431024",name:"嘉禾县"},{code:"431025",name:"临武县"},{code:"431026",name:"汝城县"},{code:"431027",name:"桂东县"},{code:"431028",name:"安仁县"},{code:"431081",name:"资兴市"}],[{code:"431102",name:"零陵区"},{code:"431103",name:"冷水滩区"},{code:"431122",name:"东安县"},{code:"431123",name:"双牌县"},{code:"431124",name:"道县"},{code:"431125",name:"江永县"},{code:"431126",name:"宁远县"},{code:"431127",name:"蓝山县"},{code:"431128",name:"新田县"},{code:"431129",name:"江华瑶族自治县"},{code:"431181",name:"祁阳市"}],[{code:"431202",name:"鹤城区"},{code:"431221",name:"中方县"},{code:"431222",name:"沅陵县"},{code:"431223",name:"辰溪县"},{code:"431224",name:"溆浦县"},{code:"431225",name:"会同县"},{code:"431226",name:"麻阳苗族自治县"},{code:"431227",name:"新晃侗族自治县"},{code:"431228",name:"芷江侗族自治县"},{code:"431229",name:"靖州苗族侗族自治县"},{code:"431230",name:"通道侗族自治县"},{code:"431281",name:"洪江市"}],[{code:"431302",name:"娄星区"},{code:"431321",name:"双峰县"},{code:"431322",name:"新化县"},{code:"431381",name:"冷水江市"},{code:"431382",name:"涟源市"}],[{code:"433101",name:"吉首市"},{code:"433122",name:"泸溪县"},{code:"433123",name:"凤凰县"},{code:"433124",name:"花垣县"},{code:"433125",name:"保靖县"},{code:"433126",name:"古丈县"},{code:"433127",name:"永顺县"},{code:"433130",name:"龙山县"}]],[[{code:"440103",name:"荔湾区"},{code:"440104",name:"越秀区"},{code:"440105",name:"海珠区"},{code:"440106",name:"天河区"},{code:"440111",name:"白云区"},{code:"440112",name:"黄埔区"},{code:"440113",name:"番禺区"},{code:"440114",name:"花都区"},{code:"440115",name:"南沙区"},{code:"440117",name:"从化区"},{code:"440118",name:"增城区"}],[{code:"440203",name:"武江区"},{code:"440204",name:"浈江区"},{code:"440205",name:"曲江区"},{code:"440222",name:"始兴县"},{code:"440224",name:"仁化县"},{code:"440229",name:"翁源县"},{code:"440232",name:"乳源瑶族自治县"},{code:"440233",name:"新丰县"},{code:"440281",name:"乐昌市"},{code:"440282",name:"南雄市"}],[{code:"440303",name:"罗湖区"},{code:"440304",name:"福田区"},{code:"440305",name:"南山区"},{code:"440306",name:"宝安区"},{code:"440307",name:"龙岗区"},{code:"440308",name:"盐田区"},{code:"440309",name:"龙华区"},{code:"440310",name:"坪山区"},{code:"440311",name:"光明区"}],[{code:"440402",name:"香洲区"},{code:"440403",name:"斗门区"},{code:"440404",name:"金湾区"}],[{code:"440507",name:"龙湖区"},{code:"440511",name:"金平区"},{code:"440512",name:"濠江区"},{code:"440513",name:"潮阳区"},{code:"440514",name:"潮南区"},{code:"440515",name:"澄海区"},{code:"440523",name:"南澳县"}],[{code:"440604",name:"禅城区"},{code:"440605",name:"南海区"},{code:"440606",name:"顺德区"},{code:"440607",name:"三水区"},{code:"440608",name:"高明区"}],[{code:"440703",name:"蓬江区"},{code:"440704",name:"江海区"},{code:"440705",name:"新会区"},{code:"440781",name:"台山市"},{code:"440783",name:"开平市"},{code:"440784",name:"鹤山市"},{code:"440785",name:"恩平市"}],[{code:"440802",name:"赤坎区"},{code:"440803",name:"霞山区"},{code:"440804",name:"坡头区"},{code:"440811",name:"麻章区"},{code:"440823",name:"遂溪县"},{code:"440825",name:"徐闻县"},{code:"440881",name:"廉江市"},{code:"440882",name:"雷州市"},{code:"440883",name:"吴川市"}],[{code:"440902",name:"茂南区"},{code:"440904",name:"电白区"},{code:"440981",name:"高州市"},{code:"440982",name:"化州市"},{code:"440983",name:"信宜市"}],[{code:"441202",name:"端州区"},{code:"441203",name:"鼎湖区"},{code:"441204",name:"高要区"},{code:"441223",name:"广宁县"},{code:"441224",name:"怀集县"},{code:"441225",name:"封开县"},{code:"441226",name:"德庆县"},{code:"441284",name:"四会市"}],[{code:"441302",name:"惠城区"},{code:"441303",name:"惠阳区"},{code:"441322",name:"博罗县"},{code:"441323",name:"惠东县"},{code:"441324",name:"龙门县"}],[{code:"441402",name:"梅江区"},{code:"441403",name:"梅县区"},{code:"441422",name:"大埔县"},{code:"441423",name:"丰顺县"},{code:"441424",name:"五华县"},{code:"441426",name:"平远县"},{code:"441427",name:"蕉岭县"},{code:"441481",name:"兴宁市"}],[{code:"441502",name:"城区"},{code:"441521",name:"海丰县"},{code:"441523",name:"陆河县"},{code:"441581",name:"陆丰市"}],[{code:"441602",name:"源城区"},{code:"441621",name:"紫金县"},{code:"441622",name:"龙川县"},{code:"441623",name:"连平县"},{code:"441624",name:"和平县"},{code:"441625",name:"东源县"}],[{code:"441702",name:"江城区"},{code:"441704",name:"阳东区"},{code:"441721",name:"阳西县"},{code:"441781",name:"阳春市"}],[{code:"441802",name:"清城区"},{code:"441803",name:"清新区"},{code:"441821",name:"佛冈县"},{code:"441823",name:"阳山县"},{code:"441825",name:"连山壮族瑶族自治县"},{code:"441826",name:"连南瑶族自治县"},{code:"441881",name:"英德市"},{code:"441882",name:"连州市"}],[{code:"441999",name:"东莞市"}],[{code:"442099",name:"中山市"}],[{code:"445102",name:"湘桥区"},{code:"445103",name:"潮安区"},{code:"445122",name:"饶平县"}],[{code:"445202",name:"榕城区"},{code:"445203",name:"揭东区"},{code:"445222",name:"揭西县"},{code:"445224",name:"惠来县"},{code:"445281",name:"普宁市"}],[{code:"445302",name:"云城区"},{code:"445303",name:"云安区"},{code:"445321",name:"新兴县"},{code:"445322",name:"郁南县"},{code:"445381",name:"罗定市"}]],[[{code:"450102",name:"兴宁区"},{code:"450103",name:"青秀区"},{code:"450105",name:"江南区"},{code:"450107",name:"西乡塘区"},{code:"450108",name:"良庆区"},{code:"450109",name:"邕宁区"},{code:"450110",name:"武鸣区"},{code:"450123",name:"隆安县"},{code:"450124",name:"马山县"},{code:"450125",name:"上林县"},{code:"450126",name:"宾阳县"},{code:"450181",name:"横州市"}],[{code:"450202",name:"城中区"},{code:"450203",name:"鱼峰区"},{code:"450204",name:"柳南区"},{code:"450205",name:"柳北区"},{code:"450206",name:"柳江区"},{code:"450222",name:"柳城县"},{code:"450223",name:"鹿寨县"},{code:"450224",name:"融安县"},{code:"450225",name:"融水苗族自治县"},{code:"450226",name:"三江侗族自治县"}],[{code:"450302",name:"秀峰区"},{code:"450303",name:"叠彩区"},{code:"450304",name:"象山区"},{code:"450305",name:"七星区"},{code:"450311",name:"雁山区"},{code:"450312",name:"临桂区"},{code:"450321",name:"阳朔县"},{code:"450323",name:"灵川县"},{code:"450324",name:"全州县"},{code:"450325",name:"兴安县"},{code:"450326",name:"永福县"},{code:"450327",name:"灌阳县"},{code:"450328",name:"龙胜各族自治县"},{code:"450329",name:"资源县"},{code:"450330",name:"平乐县"},{code:"450332",name:"恭城瑶族自治县"},{code:"450381",name:"荔浦市"}],[{code:"450403",name:"万秀区"},{code:"450405",name:"长洲区"},{code:"450406",name:"龙圩区"},{code:"450421",name:"苍梧县"},{code:"450422",name:"藤县"},{code:"450423",name:"蒙山县"},{code:"450481",name:"岑溪市"}],[{code:"450502",name:"海城区"},{code:"450503",name:"银海区"},{code:"450512",name:"铁山港区"},{code:"450521",name:"合浦县"}],[{code:"450602",name:"港口区"},{code:"450603",name:"防城区"},{code:"450621",name:"上思县"},{code:"450681",name:"东兴市"}],[{code:"450702",name:"钦南区"},{code:"450703",name:"钦北区"},{code:"450721",name:"灵山县"},{code:"450722",name:"浦北县"}],[{code:"450802",name:"港北区"},{code:"450803",name:"港南区"},{code:"450804",name:"覃塘区"},{code:"450821",name:"平南县"},{code:"450881",name:"桂平市"}],[{code:"450902",name:"玉州区"},{code:"450903",name:"福绵区"},{code:"450921",name:"容县"},{code:"450922",name:"陆川县"},{code:"450923",name:"博白县"},{code:"450924",name:"兴业县"},{code:"450981",name:"北流市"}],[{code:"451002",name:"右江区"},{code:"451003",name:"田阳区"},{code:"451022",name:"田东县"},{code:"451024",name:"德保县"},{code:"451026",name:"那坡县"},{code:"451027",name:"凌云县"},{code:"451028",name:"乐业县"},{code:"451029",name:"田林县"},{code:"451030",name:"西林县"},{code:"451031",name:"隆林各族自治县"},{code:"451081",name:"靖西市"},{code:"451082",name:"平果市"}],[{code:"451102",name:"八步区"},{code:"451103",name:"平桂区"},{code:"451121",name:"昭平县"},{code:"451122",name:"钟山县"},{code:"451123",name:"富川瑶族自治县"}],[{code:"451202",name:"金城江区"},{code:"451203",name:"宜州区"},{code:"451221",name:"南丹县"},{code:"451222",name:"天峨县"},{code:"451223",name:"凤山县"},{code:"451224",name:"东兰县"},{code:"451225",name:"罗城仫佬族自治县"},{code:"451226",name:"环江毛南族自治县"},{code:"451227",name:"巴马瑶族自治县"},{code:"451228",name:"都安瑶族自治县"},{code:"451229",name:"大化瑶族自治县"}],[{code:"451302",name:"兴宾区"},{code:"451321",name:"忻城县"},{code:"451322",name:"象州县"},{code:"451323",name:"武宣县"},{code:"451324",name:"金秀瑶族自治县"},{code:"451381",name:"合山市"}],[{code:"451402",name:"江州区"},{code:"451421",name:"扶绥县"},{code:"451422",name:"宁明县"},{code:"451423",name:"龙州县"},{code:"451424",name:"大新县"},{code:"451425",name:"天等县"},{code:"451481",name:"凭祥市"}]],[[{code:"460105",name:"秀英区"},{code:"460106",name:"龙华区"},{code:"460107",name:"琼山区"},{code:"460108",name:"美兰区"}],[{code:"460202",name:"海棠区"},{code:"460203",name:"吉阳区"},{code:"460204",name:"天涯区"},{code:"460205",name:"崖州区"}],[{code:"460321",name:"西沙群岛"},{code:"460322",name:"南沙群岛"},{code:"460323",name:"中沙群岛"}],[{code:"460499",name:"儋州市"}],[{code:"46900101",name:"五指山市"}],[{code:"46900201",name:"琼海市"}],[{code:"46900501",name:"文昌市"}],[{code:"46900601",name:"万宁市"}],[{code:"46900701",name:"东方市"}],[{code:"46902101",name:"定安县"}],[{code:"46902201",name:"屯昌县"}],[{code:"46902301",name:"澄迈县"}],[{code:"46902401",name:"临高县"}],[{code:"46902501",name:"白沙黎族自治县"}],[{code:"46902601",name:"昌江黎族自治县"}],[{code:"46902701",name:"乐东黎族自治县"}],[{code:"46902801",name:"陵水黎族自治县"}],[{code:"46902901",name:"保亭黎族苗族自治县"}],[{code:"46903001",name:"琼中黎族苗族自治县"}]],[[{code:"500101",name:"万州区"},{code:"500102",name:"涪陵区"},{code:"500103",name:"渝中区"},{code:"500104",name:"大渡口区"},{code:"500105",name:"江北区"},{code:"500106",name:"沙坪坝区"},{code:"500107",name:"九龙坡区"},{code:"500108",name:"南岸区"},{code:"500109",name:"北碚区"},{code:"500110",name:"綦江区"},{code:"500111",name:"大足区"},{code:"500112",name:"渝北区"},{code:"500113",name:"巴南区"},{code:"500114",name:"黔江区"},{code:"500115",name:"长寿区"},{code:"500116",name:"江津区"},{code:"500117",name:"合川区"},{code:"500118",name:"永川区"},{code:"500119",name:"南川区"},{code:"500120",name:"璧山区"},{code:"500151",name:"铜梁区"},{code:"500152",name:"潼南区"},{code:"500153",name:"荣昌区"},{code:"500154",name:"开州区"},{code:"500155",name:"梁平区"},{code:"500156",name:"武隆区"},{code:"500229",name:"城口县"},{code:"500230",name:"丰都县"},{code:"500231",name:"垫江县"},{code:"500233",name:"忠县"},{code:"500235",name:"云阳县"},{code:"500236",name:"奉节县"},{code:"500237",name:"巫山县"},{code:"500238",name:"巫溪县"},{code:"500240",name:"石柱土家族自治县"},{code:"500241",name:"秀山土家族苗族自治县"},{code:"500242",name:"酉阳土家族苗族自治县"},{code:"500243",name:"彭水苗族土家族自治县"}]],[[{code:"510104",name:"锦江区"},{code:"510105",name:"青羊区"},{code:"510106",name:"金牛区"},{code:"510107",name:"武侯区"},{code:"510108",name:"成华区"},{code:"510112",name:"龙泉驿区"},{code:"510113",name:"青白江区"},{code:"510114",name:"新都区"},{code:"510115",name:"温江区"},{code:"510116",name:"双流区"},{code:"510117",name:"郫都区"},{code:"510118",name:"新津区"},{code:"510121",name:"金堂县"},{code:"510129",name:"大邑县"},{code:"510131",name:"蒲江县"},{code:"510181",name:"都江堰市"},{code:"510182",name:"彭州市"},{code:"510183",name:"邛崃市"},{code:"510184",name:"崇州市"},{code:"510185",name:"简阳市"}],[{code:"510302",name:"自流井区"},{code:"510303",name:"贡井区"},{code:"510304",name:"大安区"},{code:"510311",name:"沿滩区"},{code:"510321",name:"荣县"},{code:"510322",name:"富顺县"}],[{code:"510402",name:"东区"},{code:"510403",name:"西区"},{code:"510411",name:"仁和区"},{code:"510421",name:"米易县"},{code:"510422",name:"盐边县"}],[{code:"510502",name:"江阳区"},{code:"510503",name:"纳溪区"},{code:"510504",name:"龙马潭区"},{code:"510521",name:"泸县"},{code:"510522",name:"合江县"},{code:"510524",name:"叙永县"},{code:"510525",name:"古蔺县"}],[{code:"510603",name:"旌阳区"},{code:"510604",name:"罗江区"},{code:"510623",name:"中江县"},{code:"510681",name:"广汉市"},{code:"510682",name:"什邡市"},{code:"510683",name:"绵竹市"}],[{code:"510703",name:"涪城区"},{code:"510704",name:"游仙区"},{code:"510705",name:"安州区"},{code:"510722",name:"三台县"},{code:"510723",name:"盐亭县"},{code:"510725",name:"梓潼县"},{code:"510726",name:"北川羌族自治县"},{code:"510727",name:"平武县"},{code:"510781",name:"江油市"}],[{code:"510802",name:"利州区"},{code:"510811",name:"昭化区"},{code:"510812",name:"朝天区"},{code:"510821",name:"旺苍县"},{code:"510822",name:"青川县"},{code:"510823",name:"剑阁县"},{code:"510824",name:"苍溪县"}],[{code:"510903",name:"船山区"},{code:"510904",name:"安居区"},{code:"510921",name:"蓬溪县"},{code:"510923",name:"大英县"},{code:"510981",name:"射洪市"}],[{code:"511002",name:"市中区"},{code:"511011",name:"东兴区"},{code:"511024",name:"威远县"},{code:"511025",name:"资中县"},{code:"511083",name:"隆昌市"}],[{code:"511102",name:"市中区"},{code:"511111",name:"沙湾区"},{code:"511112",name:"五通桥区"},{code:"511113",name:"金口河区"},{code:"511123",name:"犍为县"},{code:"511124",name:"井研县"},{code:"511126",name:"夹江县"},{code:"511129",name:"沐川县"},{code:"511132",name:"峨边彝族自治县"},{code:"511133",name:"马边彝族自治县"},{code:"511181",name:"峨眉山市"}],[{code:"511302",name:"顺庆区"},{code:"511303",name:"高坪区"},{code:"511304",name:"嘉陵区"},{code:"511321",name:"南部县"},{code:"511322",name:"营山县"},{code:"511323",name:"蓬安县"},{code:"511324",name:"仪陇县"},{code:"511325",name:"西充县"},{code:"511381",name:"阆中市"}],[{code:"511402",name:"东坡区"},{code:"511403",name:"彭山区"},{code:"511421",name:"仁寿县"},{code:"511423",name:"洪雅县"},{code:"511424",name:"丹棱县"},{code:"511425",name:"青神县"}],[{code:"511502",name:"翠屏区"},{code:"511503",name:"南溪区"},{code:"511504",name:"叙州区"},{code:"511523",name:"江安县"},{code:"511524",name:"长宁县"},{code:"511525",name:"高县"},{code:"511526",name:"珙县"},{code:"511527",name:"筠连县"},{code:"511528",name:"兴文县"},{code:"511529",name:"屏山县"}],[{code:"511602",name:"广安区"},{code:"511603",name:"前锋区"},{code:"511621",name:"岳池县"},{code:"511622",name:"武胜县"},{code:"511623",name:"邻水县"},{code:"511681",name:"华蓥市"}],[{code:"511702",name:"通川区"},{code:"511703",name:"达川区"},{code:"511722",name:"宣汉县"},{code:"511723",name:"开江县"},{code:"511724",name:"大竹县"},{code:"511725",name:"渠县"},{code:"511781",name:"万源市"}],[{code:"511802",name:"雨城区"},{code:"511803",name:"名山区"},{code:"511822",name:"荥经县"},{code:"511823",name:"汉源县"},{code:"511824",name:"石棉县"},{code:"511825",name:"天全县"},{code:"511826",name:"芦山县"},{code:"511827",name:"宝兴县"}],[{code:"511902",name:"巴州区"},{code:"511903",name:"恩阳区"},{code:"511921",name:"通江县"},{code:"511922",name:"南江县"},{code:"511923",name:"平昌县"}],[{code:"512002",name:"雁江区"},{code:"512021",name:"安岳县"},{code:"512022",name:"乐至县"}],[{code:"513201",name:"马尔康市"},{code:"513221",name:"汶川县"},{code:"513222",name:"理县"},{code:"513223",name:"茂县"},{code:"513224",name:"松潘县"},{code:"513225",name:"九寨沟县"},{code:"513226",name:"金川县"},{code:"513227",name:"小金县"},{code:"513228",name:"黑水县"},{code:"513230",name:"壤塘县"},{code:"513231",name:"阿坝县"},{code:"513232",name:"若尔盖县"},{code:"513233",name:"红原县"}],[{code:"513301",name:"康定市"},{code:"513322",name:"泸定县"},{code:"513323",name:"丹巴县"},{code:"513324",name:"九龙县"},{code:"513325",name:"雅江县"},{code:"513326",name:"道孚县"},{code:"513327",name:"炉霍县"},{code:"513328",name:"甘孜县"},{code:"513329",name:"新龙县"},{code:"513330",name:"德格县"},{code:"513331",name:"白玉县"},{code:"513332",name:"石渠县"},{code:"513333",name:"色达县"},{code:"513334",name:"理塘县"},{code:"513335",name:"巴塘县"},{code:"513336",name:"乡城县"},{code:"513337",name:"稻城县"},{code:"513338",name:"得荣县"}],[{code:"513401",name:"西昌市"},{code:"513402",name:"会理市"},{code:"513422",name:"木里藏族自治县"},{code:"513423",name:"盐源县"},{code:"513424",name:"德昌县"},{code:"513426",name:"会东县"},{code:"513427",name:"宁南县"},{code:"513428",name:"普格县"},{code:"513429",name:"布拖县"},{code:"513430",name:"金阳县"},{code:"513431",name:"昭觉县"},{code:"513432",name:"喜德县"},{code:"513433",name:"冕宁县"},{code:"513434",name:"越西县"},{code:"513435",name:"甘洛县"},{code:"513436",name:"美姑县"},{code:"513437",name:"雷波县"}]],[[{code:"520102",name:"南明区"},{code:"520103",name:"云岩区"},{code:"520111",name:"花溪区"},{code:"520112",name:"乌当区"},{code:"520113",name:"白云区"},{code:"520115",name:"观山湖区"},{code:"520121",name:"开阳县"},{code:"520122",name:"息烽县"},{code:"520123",name:"修文县"},{code:"520181",name:"清镇市"}],[{code:"520201",name:"钟山区"},{code:"520203",name:"六枝特区"},{code:"520204",name:"水城区"},{code:"520281",name:"盘州市"}],[{code:"520302",name:"红花岗区"},{code:"520303",name:"汇川区"},{code:"520304",name:"播州区"},{code:"520322",name:"桐梓县"},{code:"520323",name:"绥阳县"},{code:"520324",name:"正安县"},{code:"520325",name:"道真仡佬族苗族自治县"},{code:"520326",name:"务川仡佬族苗族自治县"},{code:"520327",name:"凤冈县"},{code:"520328",name:"湄潭县"},{code:"520329",name:"余庆县"},{code:"520330",name:"习水县"},{code:"520381",name:"赤水市"},{code:"520382",name:"仁怀市"}],[{code:"520402",name:"西秀区"},{code:"520403",name:"平坝区"},{code:"520422",name:"普定县"},{code:"520423",name:"镇宁布依族苗族自治县"},{code:"520424",name:"关岭布依族苗族自治县"},{code:"520425",name:"紫云苗族布依族自治县"}],[{code:"520502",name:"七星关区"},{code:"520521",name:"大方县"},{code:"520523",name:"金沙县"},{code:"520524",name:"织金县"},{code:"520525",name:"纳雍县"},{code:"520526",name:"威宁彝族回族苗族自治县"},{code:"520527",name:"赫章县"},{code:"520581",name:"黔西市"}],[{code:"520602",name:"碧江区"},{code:"520603",name:"万山区"},{code:"520621",name:"江口县"},{code:"520622",name:"玉屏侗族自治县"},{code:"520623",name:"石阡县"},{code:"520624",name:"思南县"},{code:"520625",name:"印江土家族苗族自治县"},{code:"520626",name:"德江县"},{code:"520627",name:"沿河土家族自治县"},{code:"520628",name:"松桃苗族自治县"}],[{code:"522301",name:"兴义市"},{code:"522302",name:"兴仁市"},{code:"522323",name:"普安县"},{code:"522324",name:"晴隆县"},{code:"522325",name:"贞丰县"},{code:"522326",name:"望谟县"},{code:"522327",name:"册亨县"},{code:"522328",name:"安龙县"}],[{code:"522601",name:"凯里市"},{code:"522622",name:"黄平县"},{code:"522623",name:"施秉县"},{code:"522624",name:"三穗县"},{code:"522625",name:"镇远县"},{code:"522626",name:"岑巩县"},{code:"522627",name:"天柱县"},{code:"522628",name:"锦屏县"},{code:"522629",name:"剑河县"},{code:"522630",name:"台江县"},{code:"522631",name:"黎平县"},{code:"522632",name:"榕江县"},{code:"522633",name:"从江县"},{code:"522634",name:"雷山县"},{code:"522635",name:"麻江县"},{code:"522636",name:"丹寨县"}],[{code:"522701",name:"都匀市"},{code:"522702",name:"福泉市"},{code:"522722",name:"荔波县"},{code:"522723",name:"贵定县"},{code:"522725",name:"瓮安县"},{code:"522726",name:"独山县"},{code:"522727",name:"平塘县"},{code:"522728",name:"罗甸县"},{code:"522729",name:"长顺县"},{code:"522730",name:"龙里县"},{code:"522731",name:"惠水县"},{code:"522732",name:"三都水族自治县"}]],[[{code:"530102",name:"五华区"},{code:"530103",name:"盘龙区"},{code:"530111",name:"官渡区"},{code:"530112",name:"西山区"},{code:"530113",name:"东川区"},{code:"530114",name:"呈贡区"},{code:"530115",name:"晋宁区"},{code:"530124",name:"富民县"},{code:"530125",name:"宜良县"},{code:"530126",name:"石林彝族自治县"},{code:"530127",name:"嵩明县"},{code:"530128",name:"禄劝彝族苗族自治县"},{code:"530129",name:"寻甸回族彝族自治县"},{code:"530181",name:"安宁市"}],[{code:"530302",name:"麒麟区"},{code:"530303",name:"沾益区"},{code:"530304",name:"马龙区"},{code:"530322",name:"陆良县"},{code:"530323",name:"师宗县"},{code:"530324",name:"罗平县"},{code:"530325",name:"富源县"},{code:"530326",name:"会泽县"},{code:"530381",name:"宣威市"}],[{code:"530402",name:"红塔区"},{code:"530403",name:"江川区"},{code:"530423",name:"通海县"},{code:"530424",name:"华宁县"},{code:"530425",name:"易门县"},{code:"530426",name:"峨山彝族自治县"},{code:"530427",name:"新平彝族傣族自治县"},{code:"530428",name:"元江哈尼族彝族傣族自治县"},{code:"530481",name:"澄江市"}],[{code:"530502",name:"隆阳区"},{code:"530521",name:"施甸县"},{code:"530523",name:"龙陵县"},{code:"530524",name:"昌宁县"},{code:"530581",name:"腾冲市"}],[{code:"530602",name:"昭阳区"},{code:"530621",name:"鲁甸县"},{code:"530622",name:"巧家县"},{code:"530623",name:"盐津县"},{code:"530624",name:"大关县"},{code:"530625",name:"永善县"},{code:"530626",name:"绥江县"},{code:"530627",name:"镇雄县"},{code:"530628",name:"彝良县"},{code:"530629",name:"威信县"},{code:"530681",name:"水富市"}],[{code:"530702",name:"古城区"},{code:"530721",name:"玉龙纳西族自治县"},{code:"530722",name:"永胜县"},{code:"530723",name:"华坪县"},{code:"530724",name:"宁蒗彝族自治县"}],[{code:"530802",name:"思茅区"},{code:"530821",name:"宁洱哈尼族彝族自治县"},{code:"530822",name:"墨江哈尼族自治县"},{code:"530823",name:"景东彝族自治县"},{code:"530824",name:"景谷傣族彝族自治县"},{code:"530825",name:"镇沅彝族哈尼族拉祜族自治县"},{code:"530826",name:"江城哈尼族彝族自治县"},{code:"530827",name:"孟连傣族拉祜族佤族自治县"},{code:"530828",name:"澜沧拉祜族自治县"},{code:"530829",name:"西盟佤族自治县"}],[{code:"530902",name:"临翔区"},{code:"530921",name:"凤庆县"},{code:"530922",name:"云县"},{code:"530923",name:"永德县"},{code:"530924",name:"镇康县"},{code:"530925",name:"双江拉祜族佤族布朗族傣族自治县"},{code:"530926",name:"耿马傣族佤族自治县"},{code:"530927",name:"沧源佤族自治县"}],[{code:"532301",name:"楚雄市"},{code:"532302",name:"禄丰市"},{code:"532322",name:"双柏县"},{code:"532323",name:"牟定县"},{code:"532324",name:"南华县"},{code:"532325",name:"姚安县"},{code:"532326",name:"大姚县"},{code:"532327",name:"永仁县"},{code:"532328",name:"元谋县"},{code:"532329",name:"武定县"}],[{code:"532501",name:"个旧市"},{code:"532502",name:"开远市"},{code:"532503",name:"蒙自市"},{code:"532504",name:"弥勒市"},{code:"532523",name:"屏边苗族自治县"},{code:"532524",name:"建水县"},{code:"532525",name:"石屏县"},{code:"532527",name:"泸西县"},{code:"532528",name:"元阳县"},{code:"532529",name:"红河县"},{code:"532530",name:"金平苗族瑶族傣族自治县"},{code:"532531",name:"绿春县"},{code:"532532",name:"河口瑶族自治县"}],[{code:"532601",name:"文山市"},{code:"532622",name:"砚山县"},{code:"532623",name:"西畴县"},{code:"532624",name:"麻栗坡县"},{code:"532625",name:"马关县"},{code:"532626",name:"丘北县"},{code:"532627",name:"广南县"},{code:"532628",name:"富宁县"}],[{code:"532801",name:"景洪市"},{code:"532822",name:"勐海县"},{code:"532823",name:"勐腊县"}],[{code:"532901",name:"大理市"},{code:"532922",name:"漾濞彝族自治县"},{code:"532923",name:"祥云县"},{code:"532924",name:"宾川县"},{code:"532925",name:"弥渡县"},{code:"532926",name:"南涧彝族自治县"},{code:"532927",name:"巍山彝族回族自治县"},{code:"532928",name:"永平县"},{code:"532929",name:"云龙县"},{code:"532930",name:"洱源县"},{code:"532931",name:"剑川县"},{code:"532932",name:"鹤庆县"}],[{code:"533102",name:"瑞丽市"},{code:"533103",name:"芒市"},{code:"533122",name:"梁河县"},{code:"533123",name:"盈江县"},{code:"533124",name:"陇川县"}],[{code:"533301",name:"泸水市"},{code:"533323",name:"福贡县"},{code:"533324",name:"贡山独龙族怒族自治县"},{code:"533325",name:"兰坪白族普米族自治县"}],[{code:"533401",name:"香格里拉市"},{code:"533422",name:"德钦县"},{code:"533423",name:"维西傈僳族自治县"}]],[[{code:"540102",name:"城关区"},{code:"540103",name:"堆龙德庆区"},{code:"540104",name:"达孜区"},{code:"540121",name:"林周县"},{code:"540122",name:"当雄县"},{code:"540123",name:"尼木县"},{code:"540124",name:"曲水县"},{code:"540127",name:"墨竹工卡县"}],[{code:"540202",name:"桑珠孜区"},{code:"540221",name:"南木林县"},{code:"540222",name:"江孜县"},{code:"540223",name:"定日县"},{code:"540224",name:"萨迦县"},{code:"540225",name:"拉孜县"},{code:"540226",name:"昂仁县"},{code:"540227",name:"谢通门县"},{code:"540228",name:"白朗县"},{code:"540229",name:"仁布县"},{code:"540230",name:"康马县"},{code:"540231",name:"定结县"},{code:"540232",name:"仲巴县"},{code:"540233",name:"亚东县"},{code:"540234",name:"吉隆县"},{code:"540235",name:"聂拉木县"},{code:"540236",name:"萨嘎县"},{code:"540237",name:"岗巴县"}],[{code:"540302",name:"卡若区"},{code:"540321",name:"江达县"},{code:"540322",name:"贡觉县"},{code:"540323",name:"类乌齐县"},{code:"540324",name:"丁青县"},{code:"540325",name:"察雅县"},{code:"540326",name:"八宿县"},{code:"540327",name:"左贡县"},{code:"540328",name:"芒康县"},{code:"540329",name:"洛隆县"},{code:"540330",name:"边坝县"}],[{code:"540402",name:"巴宜区"},{code:"540421",name:"工布江达县"},{code:"540422",name:"米林市"},{code:"540423",name:"墨脱县"},{code:"540424",name:"波密县"},{code:"540425",name:"察隅县"},{code:"540426",name:"朗县"}],[{code:"540502",name:"乃东区"},{code:"540521",name:"扎囊县"},{code:"540522",name:"贡嘎县"},{code:"540523",name:"桑日县"},{code:"540524",name:"琼结县"},{code:"540525",name:"曲松县"},{code:"540526",name:"措美县"},{code:"540527",name:"洛扎县"},{code:"540528",name:"加查县"},{code:"540529",name:"隆子县"},{code:"540530",name:"错那市"},{code:"540531",name:"浪卡子县"}],[{code:"540602",name:"色尼区"},{code:"540621",name:"嘉黎县"},{code:"540622",name:"比如县"},{code:"540623",name:"聂荣县"},{code:"540624",name:"安多县"},{code:"540625",name:"申扎县"},{code:"540626",name:"索县"},{code:"540627",name:"班戈县"},{code:"540628",name:"巴青县"},{code:"540629",name:"尼玛县"},{code:"540630",name:"双湖县"}],[{code:"542521",name:"普兰县"},{code:"542522",name:"札达县"},{code:"542523",name:"噶尔县"},{code:"542524",name:"日土县"},{code:"542525",name:"革吉县"},{code:"542526",name:"改则县"},{code:"542527",name:"措勤县"}]],[[{code:"610102",name:"新城区"},{code:"610103",name:"碑林区"},{code:"610104",name:"莲湖区"},{code:"610111",name:"灞桥区"},{code:"610112",name:"未央区"},{code:"610113",name:"雁塔区"},{code:"610114",name:"阎良区"},{code:"610115",name:"临潼区"},{code:"610116",name:"长安区"},{code:"610117",name:"高陵区"},{code:"610118",name:"鄠邑区"},{code:"610122",name:"蓝田县"},{code:"610124",name:"周至县"}],[{code:"610202",name:"王益区"},{code:"610203",name:"印台区"},{code:"610204",name:"耀州区"},{code:"610222",name:"宜君县"}],[{code:"610302",name:"渭滨区"},{code:"610303",name:"金台区"},{code:"610304",name:"陈仓区"},{code:"610305",name:"凤翔区"},{code:"610323",name:"岐山县"},{code:"610324",name:"扶风县"},{code:"610326",name:"眉县"},{code:"610327",name:"陇县"},{code:"610328",name:"千阳县"},{code:"610329",name:"麟游县"},{code:"610330",name:"凤县"},{code:"610331",name:"太白县"}],[{code:"610402",name:"秦都区"},{code:"610403",name:"杨陵区"},{code:"610404",name:"渭城区"},{code:"610422",name:"三原县"},{code:"610423",name:"泾阳县"},{code:"610424",name:"乾县"},{code:"610425",name:"礼泉县"},{code:"610426",name:"永寿县"},{code:"610428",name:"长武县"},{code:"610429",name:"旬邑县"},{code:"610430",name:"淳化县"},{code:"610431",name:"武功县"},{code:"610481",name:"兴平市"},{code:"610482",name:"彬州市"}],[{code:"610502",name:"临渭区"},{code:"610503",name:"华州区"},{code:"610522",name:"潼关县"},{code:"610523",name:"大荔县"},{code:"610524",name:"合阳县"},{code:"610525",name:"澄城县"},{code:"610526",name:"蒲城县"},{code:"610527",name:"白水县"},{code:"610528",name:"富平县"},{code:"610581",name:"韩城市"},{code:"610582",name:"华阴市"}],[{code:"610602",name:"宝塔区"},{code:"610603",name:"安塞区"},{code:"610621",name:"延长县"},{code:"610622",name:"延川县"},{code:"610625",name:"志丹县"},{code:"610626",name:"吴起县"},{code:"610627",name:"甘泉县"},{code:"610628",name:"富县"},{code:"610629",name:"洛川县"},{code:"610630",name:"宜川县"},{code:"610631",name:"黄龙县"},{code:"610632",name:"黄陵县"},{code:"610681",name:"子长市"}],[{code:"610702",name:"汉台区"},{code:"610703",name:"南郑区"},{code:"610722",name:"城固县"},{code:"610723",name:"洋县"},{code:"610724",name:"西乡县"},{code:"610725",name:"勉县"},{code:"610726",name:"宁强县"},{code:"610727",name:"略阳县"},{code:"610728",name:"镇巴县"},{code:"610729",name:"留坝县"},{code:"610730",name:"佛坪县"}],[{code:"610802",name:"榆阳区"},{code:"610803",name:"横山区"},{code:"610822",name:"府谷县"},{code:"610824",name:"靖边县"},{code:"610825",name:"定边县"},{code:"610826",name:"绥德县"},{code:"610827",name:"米脂县"},{code:"610828",name:"佳县"},{code:"610829",name:"吴堡县"},{code:"610830",name:"清涧县"},{code:"610831",name:"子洲县"},{code:"610881",name:"神木市"}],[{code:"610902",name:"汉滨区"},{code:"610921",name:"汉阴县"},{code:"610922",name:"石泉县"},{code:"610923",name:"宁陕县"},{code:"610924",name:"紫阳县"},{code:"610925",name:"岚皋县"},{code:"610926",name:"平利县"},{code:"610927",name:"镇坪县"},{code:"610929",name:"白河县"},{code:"610981",name:"旬阳市"}],[{code:"611002",name:"商州区"},{code:"611021",name:"洛南县"},{code:"611022",name:"丹凤县"},{code:"611023",name:"商南县"},{code:"611024",name:"山阳县"},{code:"611025",name:"镇安县"},{code:"611026",name:"柞水县"}]],[[{code:"620102",name:"城关区"},{code:"620103",name:"七里河区"},{code:"620104",name:"西固区"},{code:"620105",name:"安宁区"},{code:"620111",name:"红古区"},{code:"620121",name:"永登县"},{code:"620122",name:"皋兰县"},{code:"620123",name:"榆中县"}],[{code:"620299",name:"嘉峪关市"}],[{code:"620302",name:"金川区"},{code:"620321",name:"永昌县"}],[{code:"620402",name:"白银区"},{code:"620403",name:"平川区"},{code:"620421",name:"靖远县"},{code:"620422",name:"会宁县"},{code:"620423",name:"景泰县"}],[{code:"620502",name:"秦州区"},{code:"620503",name:"麦积区"},{code:"620521",name:"清水县"},{code:"620522",name:"秦安县"},{code:"620523",name:"甘谷县"},{code:"620524",name:"武山县"},{code:"620525",name:"张家川回族自治县"}],[{code:"620602",name:"凉州区"},{code:"620621",name:"民勤县"},{code:"620622",name:"古浪县"},{code:"620623",name:"天祝藏族自治县"}],[{code:"620702",name:"甘州区"},{code:"620721",name:"肃南裕固族自治县"},{code:"620722",name:"民乐县"},{code:"620723",name:"临泽县"},{code:"620724",name:"高台县"},{code:"620725",name:"山丹县"}],[{code:"620802",name:"崆峒区"},{code:"620821",name:"泾川县"},{code:"620822",name:"灵台县"},{code:"620823",name:"崇信县"},{code:"620825",name:"庄浪县"},{code:"620826",name:"静宁县"},{code:"620881",name:"华亭市"}],[{code:"620902",name:"肃州区"},{code:"620921",name:"金塔县"},{code:"620922",name:"瓜州县"},{code:"620923",name:"肃北蒙古族自治县"},{code:"620924",name:"阿克塞哈萨克族自治县"},{code:"620981",name:"玉门市"},{code:"620982",name:"敦煌市"}],[{code:"621002",name:"西峰区"},{code:"621021",name:"庆城县"},{code:"621022",name:"环县"},{code:"621023",name:"华池县"},{code:"621024",name:"合水县"},{code:"621025",name:"正宁县"},{code:"621026",name:"宁县"},{code:"621027",name:"镇原县"}],[{code:"621102",name:"安定区"},{code:"621121",name:"通渭县"},{code:"621122",name:"陇西县"},{code:"621123",name:"渭源县"},{code:"621124",name:"临洮县"},{code:"621125",name:"漳县"},{code:"621126",name:"岷县"}],[{code:"621202",name:"武都区"},{code:"621221",name:"成县"},{code:"621222",name:"文县"},{code:"621223",name:"宕昌县"},{code:"621224",name:"康县"},{code:"621225",name:"西和县"},{code:"621226",name:"礼县"},{code:"621227",name:"徽县"},{code:"621228",name:"两当县"}],[{code:"622901",name:"临夏市"},{code:"622921",name:"临夏县"},{code:"622922",name:"康乐县"},{code:"622923",name:"永靖县"},{code:"622924",name:"广河县"},{code:"622925",name:"和政县"},{code:"622926",name:"东乡族自治县"},{code:"622927",name:"积石山保安族东乡族撒拉族自治县"}],[{code:"623001",name:"合作市"},{code:"623021",name:"临潭县"},{code:"623022",name:"卓尼县"},{code:"623023",name:"舟曲县"},{code:"623024",name:"迭部县"},{code:"623025",name:"玛曲县"},{code:"623026",name:"碌曲县"},{code:"623027",name:"夏河县"}]],[[{code:"630102",name:"城东区"},{code:"630103",name:"城中区"},{code:"630104",name:"城西区"},{code:"630105",name:"城北区"},{code:"630106",name:"湟中区"},{code:"630121",name:"大通回族土族自治县"},{code:"630123",name:"湟源县"}],[{code:"630202",name:"乐都区"},{code:"630203",name:"平安区"},{code:"630222",name:"民和回族土族自治县"},{code:"630223",name:"互助土族自治县"},{code:"630224",name:"化隆回族自治县"},{code:"630225",name:"循化撒拉族自治县"}],[{code:"632221",name:"门源回族自治县"},{code:"632222",name:"祁连县"},{code:"632223",name:"海晏县"},{code:"632224",name:"刚察县"}],[{code:"632301",name:"同仁市"},{code:"632322",name:"尖扎县"},{code:"632323",name:"泽库县"},{code:"632324",name:"河南蒙古族自治县"}],[{code:"632521",name:"共和县"},{code:"632522",name:"同德县"},{code:"632523",name:"贵德县"},{code:"632524",name:"兴海县"},{code:"632525",name:"贵南县"}],[{code:"632621",name:"玛沁县"},{code:"632622",name:"班玛县"},{code:"632623",name:"甘德县"},{code:"632624",name:"达日县"},{code:"632625",name:"久治县"},{code:"632626",name:"玛多县"}],[{code:"632701",name:"玉树市"},{code:"632722",name:"杂多县"},{code:"632723",name:"称多县"},{code:"632724",name:"治多县"},{code:"632725",name:"囊谦县"},{code:"632726",name:"曲麻莱县"}],[{code:"632801",name:"格尔木市"},{code:"632802",name:"德令哈市"},{code:"632803",name:"茫崖市"},{code:"632821",name:"乌兰县"},{code:"632822",name:"都兰县"},{code:"632823",name:"天峻县"},{code:"632857",name:"大柴旦行政委员会"}]],[[{code:"640104",name:"兴庆区"},{code:"640105",name:"西夏区"},{code:"640106",name:"金凤区"},{code:"640121",name:"永宁县"},{code:"640122",name:"贺兰县"},{code:"640181",name:"灵武市"}],[{code:"640202",name:"大武口区"},{code:"640205",name:"惠农区"},{code:"640221",name:"平罗县"}],[{code:"640302",name:"利通区"},{code:"640303",name:"红寺堡区"},{code:"640323",name:"盐池县"},{code:"640324",name:"同心县"},{code:"640381",name:"青铜峡市"}],[{code:"640402",name:"原州区"},{code:"640422",name:"西吉县"},{code:"640423",name:"隆德县"},{code:"640424",name:"泾源县"},{code:"640425",name:"彭阳县"}],[{code:"640502",name:"沙坡头区"},{code:"640521",name:"中宁县"},{code:"640522",name:"海原县"}]],[[{code:"650102",name:"天山区"},{code:"650103",name:"沙依巴克区"},{code:"650104",name:"新市区"},{code:"650105",name:"水磨沟区"},{code:"650106",name:"头屯河区"},{code:"650107",name:"达坂城区"},{code:"650109",name:"米东区"},{code:"650121",name:"乌鲁木齐县"}],[{code:"650202",name:"独山子区"},{code:"650203",name:"克拉玛依区"},{code:"650204",name:"白碱滩区"},{code:"650205",name:"乌尔禾区"}],[{code:"650402",name:"高昌区"},{code:"650421",name:"鄯善县"},{code:"650422",name:"托克逊县"}],[{code:"650502",name:"伊州区"},{code:"650521",name:"巴里坤哈萨克自治县"},{code:"650522",name:"伊吾县"}],[{code:"652301",name:"昌吉市"},{code:"652302",name:"阜康市"},{code:"652323",name:"呼图壁县"},{code:"652324",name:"玛纳斯县"},{code:"652325",name:"奇台县"},{code:"652327",name:"吉木萨尔县"},{code:"652328",name:"木垒哈萨克自治县"}],[{code:"652701",name:"博乐市"},{code:"652702",name:"阿拉山口市"},{code:"652722",name:"精河县"},{code:"652723",name:"温泉县"}],[{code:"652801",name:"库尔勒市"},{code:"652822",name:"轮台县"},{code:"652823",name:"尉犁县"},{code:"652824",name:"若羌县"},{code:"652825",name:"且末县"},{code:"652826",name:"焉耆回族自治县"},{code:"652827",name:"和静县"},{code:"652828",name:"和硕县"},{code:"652829",name:"博湖县"}],[{code:"652901",name:"阿克苏市"},{code:"652902",name:"库车市"},{code:"652922",name:"温宿县"},{code:"652924",name:"沙雅县"},{code:"652925",name:"新和县"},{code:"652926",name:"拜城县"},{code:"652927",name:"乌什县"},{code:"652928",name:"阿瓦提县"},{code:"652929",name:"柯坪县"}],[{code:"653001",name:"阿图什市"},{code:"653022",name:"阿克陶县"},{code:"653023",name:"阿合奇县"},{code:"653024",name:"乌恰县"}],[{code:"653101",name:"喀什市"},{code:"653121",name:"疏附县"},{code:"653122",name:"疏勒县"},{code:"653123",name:"英吉沙县"},{code:"653124",name:"泽普县"},{code:"653125",name:"莎车县"},{code:"653126",name:"叶城县"},{code:"653127",name:"麦盖提县"},{code:"653128",name:"岳普湖县"},{code:"653129",name:"伽师县"},{code:"653130",name:"巴楚县"},{code:"653131",name:"塔什库尔干塔吉克自治县"}],[{code:"653201",name:"和田市"},{code:"653221",name:"和田县"},{code:"653222",name:"墨玉县"},{code:"653223",name:"皮山县"},{code:"653224",name:"洛浦县"},{code:"653225",name:"策勒县"},{code:"653226",name:"于田县"},{code:"653227",name:"民丰县"}],[{code:"654002",name:"伊宁市"},{code:"654003",name:"奎屯市"},{code:"654004",name:"霍尔果斯市"},{code:"654021",name:"伊宁县"},{code:"654022",name:"察布查尔锡伯自治县"},{code:"654023",name:"霍城县"},{code:"654024",name:"巩留县"},{code:"654025",name:"新源县"},{code:"654026",name:"昭苏县"},{code:"654027",name:"特克斯县"},{code:"654028",name:"尼勒克县"}],[{code:"654201",name:"塔城市"},{code:"654202",name:"乌苏市"},{code:"654203",name:"沙湾市"},{code:"654221",name:"额敏县"},{code:"654224",name:"托里县"},{code:"654225",name:"裕民县"},{code:"654226",name:"和布克赛尔蒙古自治县"}],[{code:"654301",name:"阿勒泰市"},{code:"654321",name:"布尔津县"},{code:"654322",name:"富蕴县"},{code:"654323",name:"福海县"},{code:"654324",name:"哈巴河县"},{code:"654325",name:"青河县"},{code:"654326",name:"吉木乃县"}],[{code:"65900101",name:"石河子市"}],[{code:"65900201",name:"阿拉尔市"}],[{code:"65900301",name:"图木舒克市"}],[{code:"65900401",name:"五家渠市"}],[{code:"65900501",name:"北屯市"}],[{code:"65900601",name:"铁门关市"}],[{code:"65900701",name:"双河市"}],[{code:"65900801",name:"可克达拉市"}],[{code:"65900901",name:"昆玉市"}],[{code:"65901001",name:"胡杨河市"}],[{code:"65901101",name:"新星市"}],[{code:"65901201",name:"白杨市"}]],[[{code:"711001",name:"松山区"},{code:"711002",name:"大安区"},{code:"711003",name:"中正区"},{code:"711005",name:"万华区"},{code:"711009",name:"大同区"},{code:"711010",name:"中山区"},{code:"711011",name:"文山区"},{code:"711013",name:"南港区"},{code:"711014",name:"内湖区"},{code:"711015",name:"士林区"},{code:"711016",name:"北投区"},{code:"711017",name:"信义区"}],[{code:"711101",name:"中区"},{code:"711102",name:"东区"},{code:"711103",name:"西区"},{code:"711104",name:"南区"},{code:"711105",name:"北区"},{code:"711106",name:"西屯区"},{code:"711107",name:"南屯区"},{code:"711108",name:"北屯区"},{code:"711141",name:"丰原区"},{code:"711142",name:"东势区"},{code:"711143",name:"大甲区"},{code:"711144",name:"清水区"},{code:"711145",name:"沙鹿区"},{code:"711146",name:"梧栖区"},{code:"711147",name:"神冈区"},{code:"711148",name:"后里区"},{code:"711149",name:"大雅区"},{code:"711150",name:"潭子区"},{code:"711151",name:"新社区"},{code:"711152",name:"石冈区"},{code:"711153",name:"外埔区"},{code:"711154",name:"大安区"},{code:"711155",name:"乌日区"},{code:"711156",name:"大肚区"},{code:"711157",name:"龙井区"},{code:"711158",name:"雾峰区"},{code:"711159",name:"太平区"},{code:"711160",name:"大里区"},{code:"711161",name:"和平区"}],[{code:"711201",name:"中正区"},{code:"711202",name:"七堵区"},{code:"711203",name:"暖暖区"},{code:"711204",name:"仁爱区"},{code:"711205",name:"中山区"},{code:"711206",name:"安乐区"},{code:"711207",name:"信义区"}],[{code:"711301",name:"东区"},{code:"711302",name:"南区"},{code:"711304",name:"北区"},{code:"711306",name:"安南区"},{code:"711307",name:"安平区"},{code:"711308",name:"中西区"},{code:"711341",name:"新营区"},{code:"711342",name:"盐水区"},{code:"711343",name:"白河区"},{code:"711344",name:"柳营区"},{code:"711345",name:"后壁区"},{code:"711346",name:"东山区"},{code:"711347",name:"麻豆区"},{code:"711348",name:"下营区"},{code:"711349",name:"六甲区"},{code:"711350",name:"官田区"},{code:"711351",name:"大内区"},{code:"711352",name:"佳里区"},{code:"711353",name:"西港区"},{code:"711354",name:"七股区"},{code:"711355",name:"将军区"},{code:"711356",name:"北门区"},{code:"711357",name:"学甲区"},{code:"711358",name:"新化区"},{code:"711359",name:"善化区"},{code:"711360",name:"新市区"},{code:"711361",name:"安定区"},{code:"711362",name:"山上区"},{code:"711363",name:"玉井区"},{code:"711364",name:"楠西区"},{code:"711365",name:"南化区"},{code:"711366",name:"左镇区"},{code:"711367",name:"仁德区"},{code:"711368",name:"归仁区"},{code:"711369",name:"关庙区"},{code:"711370",name:"龙崎区"},{code:"711371",name:"永康区"}],[{code:"711401",name:"盐埕区"},{code:"711402",name:"鼓山区"},{code:"711403",name:"左营区"},{code:"711404",name:"楠梓区"},{code:"711405",name:"三民区"},{code:"711406",name:"新兴区"},{code:"711407",name:"前金区"},{code:"711408",name:"苓雅区"},{code:"711409",name:"前镇区"},{code:"711410",name:"旗津区"},{code:"711411",name:"小港区"},{code:"711441",name:"凤山区"},{code:"711442",name:"鸟松区"},{code:"711443",name:"仁武区"},{code:"711444",name:"大社区"},{code:"711445",name:"大树区"},{code:"711446",name:"大寮区"},{code:"711448",name:"林园区"},{code:"711449",name:"冈山区"},{code:"711450",name:"茄萣区"},{code:"711451",name:"永安区"},{code:"711452",name:"桥头区"},{code:"711453",name:"梓官区"},{code:"711454",name:"田寮区"},{code:"711455",name:"阿莲区"},{code:"711456",name:"路竹区"},{code:"711457",name:"燕巢区"},{code:"711458",name:"弥陀区"},{code:"711459",name:"湖内区"},{code:"711460",name:"旗山区"},{code:"711461",name:"六龟区"},{code:"711462",name:"内门区"},{code:"711463",name:"美浓区"},{code:"711464",name:"杉林区"},{code:"711465",name:"甲仙区"},{code:"711466",name:"茂林区"},{code:"711467",name:"桃源区"},{code:"711468",name:"那玛夏区"}],[{code:"711501",name:"新庄区"},{code:"711502",name:"林口区"},{code:"711503",name:"五股区"},{code:"711504",name:"芦洲区"},{code:"711505",name:"三重区"},{code:"711506",name:"泰山区"},{code:"711507",name:"新店区"},{code:"711508",name:"石碇区"},{code:"711509",name:"深坑区"},{code:"711510",name:"坪林区"},{code:"711511",name:"乌来区"},{code:"711514",name:"板桥区"},{code:"711515",name:"三峡区"},{code:"711516",name:"莺歌区"},{code:"711517",name:"树林区"},{code:"711518",name:"中和区"},{code:"711519",name:"土城区"},{code:"711521",name:"瑞芳区"},{code:"711522",name:"平溪区"},{code:"711523",name:"双溪区"},{code:"711524",name:"贡寮区"},{code:"711525",name:"金山区"},{code:"711526",name:"万里区"},{code:"711527",name:"淡水区"},{code:"711528",name:"汐止区"},{code:"711530",name:"三芝区"},{code:"711531",name:"石门区"},{code:"711532",name:"八里区"},{code:"711533",name:"永和区"}],[{code:"711601",name:"宜兰市"},{code:"711602",name:"头城镇"},{code:"711603",name:"礁溪乡"},{code:"711604",name:"壮围乡"},{code:"711605",name:"员山乡"},{code:"711606",name:"罗东镇"},{code:"711607",name:"五结乡"},{code:"711608",name:"冬山乡"},{code:"711609",name:"苏澳镇"},{code:"711610",name:"三星乡"},{code:"711611",name:"大同乡"},{code:"711612",name:"南澳乡"}],[{code:"711701",name:"桃园区"},{code:"711702",name:"大溪区"},{code:"711703",name:"中坜区"},{code:"711704",name:"杨梅区"},{code:"711705",name:"芦竹区"},{code:"711706",name:"大园区"},{code:"711707",name:"龟山区"},{code:"711708",name:"八德区"},{code:"711709",name:"龙潭区"},{code:"711710",name:"平镇区"},{code:"711711",name:"新屋区"},{code:"711712",name:"观音区"},{code:"711713",name:"复兴区"}],[{code:"711801",name:"东区"},{code:"711802",name:"西区"}],[{code:"711902",name:"竹东镇"},{code:"711903",name:"关西镇"},{code:"711904",name:"新埔镇"},{code:"711905",name:"竹北市"},{code:"711906",name:"湖口乡"},{code:"711908",name:"横山乡"},{code:"711909",name:"新丰乡"},{code:"711910",name:"芎林乡"},{code:"711911",name:"宝山乡"},{code:"711912",name:"北埔乡"},{code:"711913",name:"峨眉乡"},{code:"711914",name:"尖石乡"},{code:"711915",name:"五峰乡"}],[{code:"712001",name:"苗栗市"},{code:"712002",name:"苑里镇"},{code:"712003",name:"通霄镇"},{code:"712004",name:"公馆乡"},{code:"712005",name:"铜锣乡"},{code:"712006",name:"三义乡"},{code:"712007",name:"西湖乡"},{code:"712008",name:"头屋乡"},{code:"712009",name:"竹南镇"},{code:"712010",name:"头份市"},{code:"712011",name:"造桥乡"},{code:"712012",name:"后龙镇"},{code:"712013",name:"三湾乡"},{code:"712014",name:"南庄乡"},{code:"712015",name:"大湖乡"},{code:"712016",name:"卓兰镇"},{code:"712017",name:"狮潭乡"},{code:"712018",name:"泰安乡"}],[{code:"712201",name:"南投市"},{code:"712202",name:"埔里镇"},{code:"712203",name:"草屯镇"},{code:"712204",name:"竹山镇"},{code:"712205",name:"集集镇"},{code:"712206",name:"名间乡"},{code:"712207",name:"鹿谷乡"},{code:"712208",name:"中寮乡"},{code:"712209",name:"鱼池乡"},{code:"712210",name:"国姓乡"},{code:"712211",name:"水里乡"},{code:"712212",name:"信义乡"},{code:"712213",name:"仁爱乡"}],[{code:"712301",name:"彰化市"},{code:"712302",name:"鹿港镇"},{code:"712303",name:"和美镇"},{code:"712304",name:"北斗镇"},{code:"712305",name:"员林市"},{code:"712306",name:"溪湖镇"},{code:"712307",name:"田中镇"},{code:"712308",name:"二林镇"},{code:"712309",name:"线西乡"},{code:"712310",name:"伸港乡"},{code:"712311",name:"福兴乡"},{code:"712312",name:"秀水乡"},{code:"712313",name:"花坛乡"},{code:"712314",name:"芬园乡"},{code:"712315",name:"大村乡"},{code:"712316",name:"埔盐乡"},{code:"712317",name:"埔心乡"},{code:"712318",name:"永靖乡"},{code:"712319",name:"社头乡"},{code:"712320",name:"二水乡"},{code:"712321",name:"田尾乡"},{code:"712322",name:"埤头乡"},{code:"712323",name:"芳苑乡"},{code:"712324",name:"大城乡"},{code:"712325",name:"竹塘乡"},{code:"712326",name:"溪州乡"}],[{code:"712401",name:"东区"},{code:"712402",name:"香山区"},{code:"712403",name:"北区"}],[{code:"712501",name:"斗六市"},{code:"712502",name:"斗南镇"},{code:"712503",name:"虎尾镇"},{code:"712504",name:"西螺镇"},{code:"712505",name:"土库镇"},{code:"712506",name:"北港镇"},{code:"712507",name:"古坑乡"},{code:"712508",name:"大埤乡"},{code:"712509",name:"莿桐乡"},{code:"712510",name:"林内乡"},{code:"712511",name:"二仑乡"},{code:"712512",name:"仑背乡"},{code:"712513",name:"麦寮乡"},{code:"712514",name:"东势乡"},{code:"712515",name:"褒忠乡"},{code:"712516",name:"台西乡"},{code:"712517",name:"元长乡"},{code:"712518",name:"四湖乡"},{code:"712519",name:"口湖乡"},{code:"712520",name:"水林乡"}],[{code:"712602",name:"朴子市"},{code:"712603",name:"布袋镇"},{code:"712604",name:"大林镇"},{code:"712605",name:"民雄乡"},{code:"712606",name:"溪口乡"},{code:"712607",name:"新港乡"},{code:"712608",name:"六脚乡"},{code:"712609",name:"东石乡"},{code:"712610",name:"义竹乡"},{code:"712611",name:"鹿草乡"},{code:"712612",name:"太保市"},{code:"712613",name:"水上乡"},{code:"712614",name:"中埔乡"},{code:"712615",name:"竹崎乡"},{code:"712616",name:"梅山乡"},{code:"712617",name:"番路乡"},{code:"712618",name:"大埔乡"},{code:"712620",name:"阿里山乡"}],[{code:"712901",name:"屏东市"},{code:"712902",name:"潮州镇"},{code:"712903",name:"东港镇"},{code:"712904",name:"恒春镇"},{code:"712905",name:"万丹乡"},{code:"712906",name:"长治乡"},{code:"712907",name:"麟洛乡"},{code:"712908",name:"九如乡"},{code:"712909",name:"里港乡"},{code:"712910",name:"盐埔乡"},{code:"712911",name:"高树乡"},{code:"712912",name:"万峦乡"},{code:"712913",name:"内埔乡"},{code:"712914",name:"竹田乡"},{code:"712915",name:"新埤乡"},{code:"712916",name:"枋寮乡"},{code:"712917",name:"新园乡"},{code:"712918",name:"崁顶乡"},{code:"712919",name:"林边乡"},{code:"712920",name:"南州乡"},{code:"712921",name:"佳冬乡"},{code:"712922",name:"琉球乡"},{code:"712923",name:"车城乡"},{code:"712924",name:"满州乡"},{code:"712925",name:"枋山乡"},{code:"712926",name:"三地门乡"},{code:"712927",name:"雾台乡"},{code:"712928",name:"玛家乡"},{code:"712929",name:"泰武乡"},{code:"712930",name:"来义乡"},{code:"712931",name:"春日乡"},{code:"712932",name:"狮子乡"},{code:"712933",name:"牡丹乡"}],[{code:"713001",name:"花莲市"},{code:"713002",name:"光复乡"},{code:"713003",name:"玉里镇"},{code:"713004",name:"新城乡"},{code:"713005",name:"吉安乡"},{code:"713006",name:"寿丰乡"},{code:"713007",name:"凤林镇"},{code:"713008",name:"丰滨乡"},{code:"713009",name:"瑞穗乡"},{code:"713010",name:"富里乡"},{code:"713011",name:"卓溪乡"},{code:"713012",name:"万荣乡"},{code:"713013",name:"秀林乡"}],[{code:"713101",name:"台东市"},{code:"713102",name:"成功镇"},{code:"713103",name:"关山镇"},{code:"713104",name:"卑南乡"},{code:"713105",name:"大武乡"},{code:"713106",name:"太麻里乡"},{code:"713107",name:"东河乡"},{code:"713108",name:"长滨乡"},{code:"713109",name:"鹿野乡"},{code:"713110",name:"池上乡"},{code:"713111",name:"绿岛乡"},{code:"713112",name:"延平乡"},{code:"713113",name:"海端乡"},{code:"713114",name:"达仁乡"},{code:"713115",name:"金峰乡"},{code:"713116",name:"兰屿乡"}],[{code:"713201",name:"马公市"},{code:"713202",name:"湖西乡"},{code:"713203",name:"白沙乡"},{code:"713204",name:"西屿乡"},{code:"713205",name:"望安乡"},{code:"713206",name:"七美乡"}]],[[{code:"811100",name:"中西区"},{code:"811200",name:"湾仔区"},{code:"811300",name:"东区"},{code:"811400",name:"南区"},{code:"812100",name:"油尖旺区"},{code:"812200",name:"深水埗区"},{code:"812300",name:"九龙城区"},{code:"812400",name:"黄大仙区"},{code:"812500",name:"观塘区"},{code:"813100",name:"葵青区"},{code:"813200",name:"荃湾区"},{code:"813300",name:"屯门区"},{code:"813400",name:"元朗区"},{code:"813500",name:"北区"},{code:"813600",name:"大埔区"},{code:"813700",name:"沙田区"},{code:"813800",name:"西贡区"},{code:"813900",name:"离岛区"}]],[[{code:"820100",name:"澳门半岛"},{code:"820200",name:"氹仔岛"},{code:"820300",name:"路环岛"}]]];function ks(e=null,t="yyyy-mm-dd"){e||(e=Number(new Date)),10==e.toString().length&&(e*=1e3);let a,n=new Date(e),o={"y+":n.getFullYear().toString(),"m+":(n.getMonth()+1).toString(),"d+":n.getDate().toString(),"h+":n.getHours().toString(),"M+":n.getMinutes().toString(),"s+":n.getSeconds().toString()};for(let i in o)a=new RegExp("("+i+")").exec(t),a&&(t=t.replace(a[1],1==a[1].length?o[i]:o[i].padStart(a[1].length,"0")));return t}String.prototype.padStart||(String.prototype.padStart=function(e,t=" "){if("[object String]"!==Object.prototype.toString.call(t))throw new TypeError("fillString must be String");let a=this;if(a.length>=e)return String(a);let n=e-a.length,o=Math.ceil(n/t.length);for(;o>>=1;)t+=t,1===o&&(t+=t);return t.slice(0,n)+a});const Es=new class{constructor(e={}){this.dataSource=e}discern(e){if(!e)return{code:-1,msg:"地址文本不能为空"};e=e.trim();const t=this.regionDiscern(e);if(0!==t.code)return t;const{name:a,mobile:n}=this.nameMobileDiscern(t.not_address_text),o=a&&n&&t.data?1:0;let i="ok";0===o&&(i="未识别：",a||(i+="姓名、"),n||(i+="手机号、"),i=i.slice(0,-1));return{code:0,msg:i,status:o,data:{name:a,mobile:n,position:t.data}}}regionDiscern(e){const{provinces:t,citys:a,areas:n}=this.dataSource,o={},i={},r={};let s="";if(!e)return{code:-1,msg:"地址文本不能为空"};e=e.trim();const l=t=>t.findIndex((({name:t})=>e.includes(t.slice(0,-1)))),c=t=>t.findIndex((({name:t})=>{const a=t.length>2?`${t}|${t.slice(0,-1)}`:t,n=new RegExp(a);return!!n.test(e)&&(s=e.replace(n,"{{~}}").split("{{~}}")[1]||"",s=s.split(new RegExp("[^\\u4e00-\\u9fa5a-zA-Z0-9+-（）()]+","g"))[0],!0)}));let u=t.findIndex((({name:t})=>e.includes(t.substring(0,2)))),d=-1,m=-1;if(-1===u){const e=(()=>{for(let e=0;e<a.length;e++){const t=l(a[e]);if(-1!==t)return{provinceIndex:e,cityIndex:t}}return{provinceIndex:-1,cityIndex:-1}})();u=e.provinceIndex,d=e.cityIndex}if(-1===u){const e=(()=>{for(let e=0;e<n.length;e++)for(let t=0;t<n[e].length;t++){const a=c(n[e][t]);if(-1!==a)return{provinceIndex:e,cityIndex:t,areaIndex:a}}return{provinceIndex:-1,cityIndex:-1,areaIndex:-1}})();u=e.provinceIndex,d=e.cityIndex,m=e.areaIndex}if(-1===u)return{code:-1,msg:"省份没有找到，请输入正确的地址"};Object.assign(o,t[u]);const p=a[u];if(-1===d&&(d=l(p),-1===d))return{code:-1,msg:"地级市没有找到，请输入正确的地址"};Object.assign(i,p[d]);const h=n[u][d];if(-1===m&&(m=c(h),-1===m))return{code:-1,msg:"县级市没有找到，请输入正确的地址"};Object.assign(r,h[m]);const v=`${o.name}${i.name}${r.name}${s}`,g=o.name.substring(0,2),f=(e.substring(0,e.indexOf(g))+e.substring(e.indexOf(s)+s.length)).trim();return{code:0,msg:"ok",data:{province:o,city:i,area:r,address:s,formatted_address:v},not_address_text:f}}nameMobileDiscern(e){if(!e)return{name:"",mobile:""};let t="",a="";const n=[new RegExp("1\\d{2}([\\s-]?\\d{4}){2}","g")];let o;for(const l of n){const t=e.match(l);if(t&&t.length>0){a=t[0].replace(new RegExp("[\\s\\-\\.]","g"),""),o=t[0];break}}let i=e;a&&(i=i.replace(o,""));const r=[new RegExp("^姓名[：:]\\s*"),new RegExp("^收货人[：:]\\s*"),new RegExp("^收件人[：:]\\s*"),new RegExp("^联系人[：:]\\s*"),new RegExp("^name[：:]\\s*","i"),new RegExp("^收[：:]\\s*"),new RegExp("^人[：:]\\s*"),new RegExp("^电话[：:]\\s*"),new RegExp("^手机[：:]\\s*"),new RegExp("^tel[：:]\\s*","i"),new RegExp("^phone[：:]\\s*","i"),new RegExp("^mobile[：:]\\s*","i"),new RegExp("^地址[：:]\\s*"),new RegExp("^address[：:]\\s*","i"),new RegExp("^收货地址[：:]\\s*"),new RegExp("^收件地址[：:]\\s*")];for(const l of r)i=i.replace(l,"");i=i.replace(new RegExp("\\s+","g")," ").trim();const s=[new RegExp("[A-Za-z]+[\\u4e00-\\u9fa5]{1,3}","g"),new RegExp("[\\u4e00-\\u9fa5]{2,6}","g"),new RegExp("[A-Za-z]+(\\s+[A-Za-z]+)*","g")];for(const l of s){const e=i.match(l);if(e&&e.length>0){const a=e.filter((e=>{const t=["省","市","区","县","镇","村","路","街","号","楼","室","单元","栋","层","小区","大厦","广场","花园"].some((t=>e.includes(t))),a=["姓名","收货人","收件人","联系人","收","人","电话","手机","地址","收货","收件","联系"].some((t=>e.includes(t))),n=new RegExp("^\\d+$").test(e),o=e.length<2,i=new RegExp("[\\u4e00-\\u9fa5]").test(e),r=!new RegExp("^[A-Za-z]+[\\u4e00-\\u9fa5]{1,3}$").test(e)&&(i?e.length>8:e.length>25),s=i?new RegExp("[^\\u4e00-\\u9fa5a-zA-Z\\s]").test(e):new RegExp("[^a-zA-Z\\s]").test(e);return!(t||a||n||o||r||s)}));if(a.length>0){t=a.sort(((e,t)=>e.length-t.length))[0];break}}}if(!t){const e=i.trim();if(e){const a=e.split(new RegExp("[\\s，,。.！!？?；;：:]"));for(const e of a){const a=e.trim(),n=new RegExp("^[\\u4e00-\\u9fa5]{2,6}$").test(a),o=new RegExp("^[a-zA-Z]{2,20}$").test(a),i=new RegExp("^[a-zA-Z]+[\\u4e00-\\u9fa5]{1,3}$").test(a);if(n||o||i){const e=["姓名","收货人","收件人","联系人","收","人","电话","手机","地址","收货","收件","联系"],n=["省","市","区","县","镇","村","路","街","号","楼","室","单元","栋","层","小区","大厦","广场","花园"].some((e=>a.includes(e))),o=e.some((e=>a.includes(e)));if(!n&&!o){t=a;break}}}}}return t&&(t=t.replace(new RegExp("\\s+","g"),"").trim()),{name:t,mobile:a}}}({provinces:fs,citys:ys,areas:_s}),xs={name:"u-picker",emits:["update:modelValue","input","confirm","cancel","columnchange"],props:{value:{type:Boolean,default:!1},modelValue:{type:Boolean,default:!1},params:{type:[Object,null],default:()=>({year:!0,month:!0,day:!0,hour:!1,minute:!1,second:!1,province:!0,city:!0,area:!0,timestamp:!0})},range:{type:Array,default:()=>[]},defaultSelector:{type:Array,default:()=>[0]},rangeKey:{type:String,default:""},mode:{type:String,default:"time"},startYear:{type:[String,Number],default:1950},endYear:{type:[String,Number],default:2050},cancelColor:{type:String,default:"#606266"},confirmColor:{type:String,default:"#2979ff"},defaultTime:{type:[String,null],default:""},defaultRegion:{type:[Array,null],default:()=>[]},showTimeTag:{type:Boolean,default:!0},areaCode:{type:[Array,null],default:()=>[]},safeAreaInsetBottom:{type:Boolean,default:!1},maskCloseAble:{type:Boolean,default:!0},zIndex:{type:[String,Number],default:0},title:{type:String,default:""},cancelText:{type:String,default:"取消"},confirmText:{type:String,default:"确认"},blur:{type:[String,Number],default:0}},data:()=>({popupValue:!1,years:[],months:[],days:[],hours:[],minutes:[],seconds:[],year:0,month:0,day:0,hour:0,minute:0,second:0,reset:!1,startDate:"",endDate:"",valueArr:[],provinces:fs,citys:ys[0],areas:_s[0][0],province:0,city:0,area:0,moving:!1}),mounted(){this.init()},computed:{valueCom(){return this.modelValue},propsChange(){let{mode:e,defaultTime:t,startYear:a,endYear:n,defaultRegion:o,areaCode:i,defaultSelector:r}=this;return JSON.stringify({mode:e,defaultTime:t,startYear:a,endYear:n,defaultRegion:o,areaCode:i,defaultSelector:r})},regionChange(){return`${this.province}-${this.city}`},yearAndMonth(){return`${this.year}-${this.month}`},uZIndex(){return this.zIndex?this.zIndex:this.$u.zIndex.popup},showColumnCom:()=>!0},watch:{propsChange(){this.reset=!0,setTimeout((()=>this.init()),10)},regionChange(e){this.citys=ys[this.province],this.areas=_s[this.province][this.city]},yearAndMonth(e){this.params&&this.params.year&&this.setDays()},valueCom:{immediate:!0,handler(e){e&&(this.reset=!0,setTimeout((()=>this.init()),10)),this.popupValue=e}}},methods:{pickstart(){},pickend(){},getItemValue(e,t){if(this.mode==t)return"object"==typeof e?e[this.rangeKey]:e},formatNumber:e=>+e<10?"0"+e:String(e),generateArray:function(e,t){return e=Number(e),t=(t=Number(t))>e?t:e,[...Array(t+1).keys()].slice(e)},getIndex:function(e,t){let a=e.indexOf(t);return~a?a:0},initTimeValue(){let e;e=this.defaultTime?this.defaultTime.replace(/\-/g,"/"):ks(Date.now(),"yyyy/mm/dd hh:MM:ss"),e=e&&-1==e.indexOf("/")?`2020/01/01 ${e}`:e;let t,a=e.split(" "),n=a[0]||"",o=a[1]||"";t=n.indexOf("-")>-1?n.split("-"):n.split("/");let i=o.split(":"),r={year:Number(t[0]),month:Number(t[1])||1,day:Number(t[2])||1,hour:Number(i[0])||0,minute:Number(i[1])||0,second:Number(i[2])||0};for(let l in r)r[l]>=0&&r[l]<10&&(r[l]=`0${r[l]}`);e=`${r.year}/${r.month}/${r.day} ${r.hour}:${r.minute}:${r.second}`;let s=null;s=e?new Date(e):new Date,this.year=s.getFullYear(),this.month=Number(s.getMonth())+1,this.day=s.getDate(),this.hour=s.getHours(),this.minute=s.getMinutes(),this.second=s.getSeconds()},init(){this.valueArr=[],this.reset=!1;let e=this.params||{};"time"==this.mode?(this.initTimeValue(),e.year&&(this.valueArr.push(0),this.setYears()),e.month&&(this.valueArr.push(0),this.setMonths()),e.day&&(this.valueArr.push(0),this.setDays()),e.hour&&(this.valueArr.push(0),this.setHours()),e.minute&&(this.valueArr.push(0),this.setMinutes()),e.second&&(this.valueArr.push(0),this.setSeconds())):"region"==this.mode?(e.province&&(this.valueArr.push(0),this.setProvinces()),e.city&&(this.valueArr.push(0),this.setCitys()),e.area&&(this.valueArr.push(0),this.setAreas())):"selector"==this.mode?this.valueArr=this.defaultSelector:"multiSelector"==this.mode&&(this.valueArr=this.defaultSelector,this.multiSelectorValue=this.defaultSelector),this.$forceUpdate()},setYears(){this.years=this.generateArray(this.startYear,this.endYear),this.valueArr.splice(this.valueArr.length-1,1,this.getIndex(this.years,this.year))},setMonths(){this.months=this.generateArray(1,12),this.valueArr.splice(this.valueArr.length-1,1,this.getIndex(this.months,this.month))},setDays(){let e=this.params||{},t=new Date(this.year,this.month,0).getDate();this.days=this.generateArray(1,t);let a=0;a=e.year&&e.month?2:e.month||e.year?1:0,this.day>this.days.length&&(this.day=this.days.length),this.valueArr.splice(a,1,this.getIndex(this.days,this.day))},setHours(){this.hours=this.generateArray(0,23),this.valueArr.splice(this.valueArr.length-1,1,this.getIndex(this.hours,this.hour))},setMinutes(){this.minutes=this.generateArray(0,59),this.valueArr.splice(this.valueArr.length-1,1,this.getIndex(this.minutes,this.minute))},setSeconds(){this.seconds=this.generateArray(0,59),this.valueArr.splice(this.valueArr.length-1,1,this.getIndex(this.seconds,this.second))},setProvinces(){if(!(this.params||{}).province)return;let e="",t=!1;this.areaCode&&this.areaCode.length?(e=this.areaCode[0],t=!0):e=this.defaultRegion&&this.defaultRegion.length?this.defaultRegion[0]:0,fs.map(((a,n)=>{(t?a.code==e:a.name==e)&&(e=n)})),this.province=e,this.provinces=fs,this.valueArr.splice(0,1,this.province)},setCitys(){if(!(this.params||{}).city)return;let e="",t=!1;this.areaCode&&this.areaCode.length?(e=this.areaCode[1],t=!0):e=this.defaultRegion&&this.defaultRegion.length?this.defaultRegion[1]:0,ys[this.province].map(((a,n)=>{(t?a.code==e:a.name==e)&&(e=n)})),this.city=e,this.citys=ys[this.province],this.valueArr.splice(1,1,this.city)},setAreas(){if(!(this.params||{}).area)return;let e="",t=!1;this.areaCode&&this.areaCode.length?(e=this.areaCode[2],t=!0):e=this.defaultRegion&&this.defaultRegion.length?this.defaultRegion[2]:0,_s[this.province][this.city].map(((a,n)=>{(t?a.code==e:a.name==e)&&(e=n)})),this.area=e,this.areas=_s[this.province][this.city],this.valueArr.splice(2,1,this.area)},close(){this.$emit("input",!1),this.$emit("update:modelValue",!1)},change(e){let t=this.params||{},a=JSON.parse(JSON.stringify(this.valueArr||[]));this.valueArr=e.detail.value;let n=0;if("time"==this.mode)t.year&&(this.year=this.years[this.valueArr[n++]]),t.month&&(this.month=this.months[this.valueArr[n++]]),t.day&&(this.day=this.days[this.valueArr[n++]]),t.hour&&(this.hour=this.hours[this.valueArr[n++]]),t.minute&&(this.minute=this.minutes[this.valueArr[n++]]),t.second&&(this.second=this.seconds[this.valueArr[n++]]);else if("region"==this.mode)t.province&&(this.province=this.valueArr[n++]),t.city&&(this.city=this.valueArr[n++]),t.area&&(this.area=this.valueArr[n++]);else if("multiSelector"==this.mode){let t=null;a.map(((a,n)=>{a!==e.detail.value[n]&&(t=n)})),null!==t&&this.$emit("columnchange",{column:t,index:e.detail.value[t]})}},getResult(e=null){let t=this.params||{},a={};"time"==this.mode?(t.year&&(a.year=this.formatNumber(this.year||0)),t.month&&(a.month=this.formatNumber(this.month||0)),t.day&&(a.day=this.formatNumber(this.day||0)),t.hour&&(a.hour=this.formatNumber(this.hour||0)),t.minute&&(a.minute=this.formatNumber(this.minute||0)),t.second&&(a.second=this.formatNumber(this.second||0)),t.timestamp&&(a.timestamp=this.getTimestamp())):"region"==this.mode?(t.province&&(a.province=fs[this.province]),t.city&&(a.city=ys[this.province][this.city]),t.area&&(a.area=_s[this.province][this.city][this.area])):("selector"==this.mode||"multiSelector"==this.mode)&&(a=this.valueArr),e&&this.$emit(e,a),this.close()},getTimestamp(){let e=this.year+"/"+this.month+"/"+this.day+" "+this.hour+":"+this.minute+":"+this.second;return new Date(e).getTime()/1e3},getDateSource:()=>({provinces:fs,citys:ys,areas:_s}),regionDiscern:e=>Es.regionDiscern(e),addressDiscern:e=>Es.discern(e),stop(){}}};const Ns=ie(xs,[["render",function(t,a,n,o,r,s){const l=i(e.resolveDynamicComponent("u-popup"),gs);return e.openBlock(),e.createBlock(l,{maskCloseAble:n.maskCloseAble,mode:"bottom",popup:!1,modelValue:r.popupValue,"onUpdate:modelValue":a[16]||(a[16]=e=>r.popupValue=e),length:"auto",safeAreaInsetBottom:n.safeAreaInsetBottom,onClose:s.close,"z-index":s.uZIndex,blur:n.blur},{default:e.withCtx((()=>[e.createElementVNode("view",{class:"u-datetime-picker"},[e.createElementVNode("view",{class:"u-picker-header",onTouchmove:a[3]||(a[3]=e.withModifiers(((...e)=>s.stop&&s.stop(...e)),["stop","prevent"]))},[e.createElementVNode("view",{class:"u-btn-picker u-btn-picker--tips",style:e.normalizeStyle({color:n.cancelColor}),"hover-class":"u-opacity","hover-stay-time":150,onClick:a[0]||(a[0]=e=>s.getResult("cancel"))},e.toDisplayString(n.cancelText),5),e.createElementVNode("view",{class:"u-picker__title"},e.toDisplayString(n.title),1),e.createElementVNode("view",{class:"u-btn-picker u-btn-picker--primary",style:e.normalizeStyle({color:r.moving?n.cancelColor:n.confirmColor}),"hover-class":"u-opacity","hover-stay-time":150,onTouchmove:a[1]||(a[1]=e.withModifiers(((...e)=>s.stop&&s.stop(...e)),["stop"])),onClick:a[2]||(a[2]=e.withModifiers((e=>s.getResult("confirm")),["stop"]))},e.toDisplayString(n.confirmText),37)],32),e.createElementVNode("view",{class:"u-picker-body"},["region"==n.mode?(e.openBlock(),e.createElementBlock("picker-view",{key:0,value:r.valueArr,onChange:a[4]||(a[4]=(...e)=>s.change&&s.change(...e)),class:"u-picker-view",onPickstart:a[5]||(a[5]=(...e)=>s.pickstart&&s.pickstart(...e)),onPickend:a[6]||(a[6]=(...e)=>s.pickend&&s.pickend(...e))},[s.showColumnCom&&n.params&&n.params.province?(e.openBlock(),e.createElementBlock("picker-view-column",{key:0},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.provinces,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"u-column-item",key:a},[e.createElementVNode("view",{class:"u-line-1"},e.toDisplayString(t.name),1)])))),128))])):e.createCommentVNode("",!0),s.showColumnCom&&n.params&&n.params.city?(e.openBlock(),e.createElementBlock("picker-view-column",{key:1},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.citys,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"u-column-item",key:a},[e.createElementVNode("view",{class:"u-line-1"},e.toDisplayString(t.name),1)])))),128))])):e.createCommentVNode("",!0),s.showColumnCom&&n.params&&n.params.area?(e.openBlock(),e.createElementBlock("picker-view-column",{key:2},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.areas,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"u-column-item",key:a},[e.createElementVNode("view",{class:"u-line-1"},e.toDisplayString(t.name),1)])))),128))])):e.createCommentVNode("",!0)],40,["value"])):"time"==n.mode?(e.openBlock(),e.createElementBlock("picker-view",{key:1,value:r.valueArr,onChange:a[7]||(a[7]=(...e)=>s.change&&s.change(...e)),class:"u-picker-view",onPickstart:a[8]||(a[8]=(...e)=>s.pickstart&&s.pickstart(...e)),onPickend:a[9]||(a[9]=(...e)=>s.pickend&&s.pickend(...e))},[s.showColumnCom&&n.params&&n.params.year?(e.openBlock(),e.createElementBlock("picker-view-column",{key:0},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.years,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"u-column-item",key:a},[e.createTextVNode(e.toDisplayString(t)+" ",1),n.showTimeTag?(e.openBlock(),e.createElementBlock("text",{key:0,class:"u-text"},"年")):e.createCommentVNode("",!0)])))),128))])):e.createCommentVNode("",!0),s.showColumnCom&&n.params&&n.params.month?(e.openBlock(),e.createElementBlock("picker-view-column",{key:1},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.months,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"u-column-item",key:a},[e.createTextVNode(e.toDisplayString(s.formatNumber(t))+" ",1),n.showTimeTag?(e.openBlock(),e.createElementBlock("text",{key:0,class:"u-text"},"月")):e.createCommentVNode("",!0)])))),128))])):e.createCommentVNode("",!0),s.showColumnCom&&n.params&&n.params.day?(e.openBlock(),e.createElementBlock("picker-view-column",{key:2},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.days,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"u-column-item",key:a},[e.createTextVNode(e.toDisplayString(s.formatNumber(t))+" ",1),n.showTimeTag?(e.openBlock(),e.createElementBlock("text",{key:0,class:"u-text"},"日")):e.createCommentVNode("",!0)])))),128))])):e.createCommentVNode("",!0),s.showColumnCom&&n.params&&n.params.hour?(e.openBlock(),e.createElementBlock("picker-view-column",{key:3},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.hours,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"u-column-item",key:a},[e.createTextVNode(e.toDisplayString(s.formatNumber(t))+" ",1),n.showTimeTag?(e.openBlock(),e.createElementBlock("text",{key:0,class:"u-text"},"时")):e.createCommentVNode("",!0)])))),128))])):e.createCommentVNode("",!0),s.showColumnCom&&n.params&&n.params.minute?(e.openBlock(),e.createElementBlock("picker-view-column",{key:4},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.minutes,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"u-column-item",key:a},[e.createTextVNode(e.toDisplayString(s.formatNumber(t))+" ",1),n.showTimeTag?(e.openBlock(),e.createElementBlock("text",{key:0,class:"u-text"},"分")):e.createCommentVNode("",!0)])))),128))])):e.createCommentVNode("",!0),s.showColumnCom&&n.params&&n.params.second?(e.openBlock(),e.createElementBlock("picker-view-column",{key:5},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.seconds,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"u-column-item",key:a},[e.createTextVNode(e.toDisplayString(s.formatNumber(t))+" ",1),n.showTimeTag?(e.openBlock(),e.createElementBlock("text",{key:0,class:"u-text"},"秒")):e.createCommentVNode("",!0)])))),128))])):e.createCommentVNode("",!0)],40,["value"])):"selector"==n.mode?(e.openBlock(),e.createElementBlock("picker-view",{key:2,value:r.valueArr,onChange:a[10]||(a[10]=(...e)=>s.change&&s.change(...e)),class:"u-picker-view",onPickstart:a[11]||(a[11]=(...e)=>s.pickstart&&s.pickstart(...e)),onPickend:a[12]||(a[12]=(...e)=>s.pickend&&s.pickend(...e))},[s.showColumnCom?(e.openBlock(),e.createElementBlock("picker-view-column",{key:0},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.range,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"u-column-item",key:a},[e.createElementVNode("view",{class:"u-line-1"},e.toDisplayString(s.getItemValue(t,"selector")),1)])))),128))])):e.createCommentVNode("",!0)],40,["value"])):"multiSelector"==n.mode?(e.openBlock(),e.createElementBlock("picker-view",{key:3,value:r.valueArr,onChange:a[13]||(a[13]=(...e)=>s.change&&s.change(...e)),class:"u-picker-view",onPickstart:a[14]||(a[14]=(...e)=>s.pickstart&&s.pickstart(...e)),onPickend:a[15]||(a[15]=(...e)=>s.pickend&&s.pickend(...e))},[s.showColumnCom?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(n.range,((t,a)=>(e.openBlock(),e.createElementBlock("picker-view-column",{key:a},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"u-column-item",key:a},[e.createElementVNode("view",{class:"u-line-1"},e.toDisplayString(s.getItemValue(t,"multiSelector")),1)])))),128))])))),128)):e.createCommentVNode("",!0)],40,["value"])):e.createCommentVNode("",!0)])])])),_:1},8,["maskCloseAble","modelValue","safeAreaInsetBottom","onClose","z-index","blur"])}],["__scopeId","data-v-8bc479c8"]]);const ws=ie({name:"u-line-progress",props:{round:{type:Boolean,default:!0},type:{type:String,default:""},activeColor:{type:String,default:"#19be6b"},inactiveColor:{type:String,default:"#ececec"},percent:{type:Number,default:0},showPercent:{type:Boolean,default:!0},height:{type:[Number,String],default:28},striped:{type:Boolean,default:!1},stripedActive:{type:Boolean,default:!1}},data:()=>({}),computed:{progressStyle(){let e={};return e.width=this.percent+"%",this.activeColor&&(e.backgroundColor=this.activeColor),e}},methods:{}},[["render",function(t,a,n,o,i,r){return e.openBlock(),e.createElementBlock("view",{class:"u-progress",style:e.normalizeStyle({borderRadius:n.round?"100rpx":0,height:n.height+"rpx",backgroundColor:n.inactiveColor})},[e.createElementVNode("view",{class:e.normalizeClass([[n.type?`u-type-${n.type}-bg`:"",n.striped?"u-striped":"",n.striped&&n.stripedActive?"u-striped-active":""],"u-active"]),style:e.normalizeStyle([r.progressStyle])},[t.$slots.default||t.$slots.$default?e.renderSlot(t.$slots,"default",{key:0},void 0,!0):n.showPercent?(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.createTextVNode(e.toDisplayString(n.percent+"%"),1)],64)):e.createCommentVNode("",!0)],6)],4)}],["__scopeId","data-v-7da934da"]]),Cs={name:"u-upload",emits:["update:file-list","on-oversize","on-list-change","on-preview","on-remove","on-success","on-change","on-error","on-progress","on-uploaded","on-choose-complete","on-choose-fail"],props:{showUploadList:{type:Boolean,default:!0},action:{type:String,default:""},maxCount:{type:[String,Number],default:52},showProgress:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},imageMode:{type:String,default:"aspectFill"},header:{type:Object,default:()=>({})},formData:{type:Object,default:()=>({})},name:{type:String,default:"file"},sizeType:{type:Array,default:()=>["original","compressed"]},sourceType:{type:Array,default:()=>["album","camera"]},previewFullImage:{type:Boolean,default:!0},multiple:{type:Boolean,default:!0},deletable:{type:Boolean,default:!0},maxSize:{type:[String,Number],default:Number.MAX_VALUE},fileList:{type:Array,default:()=>[]},uploadText:{type:String,default:"选择图片"},autoUpload:{type:Boolean,default:!0},showTips:{type:Boolean,default:!0},customBtn:{type:Boolean,default:!1},width:{type:[String,Number],default:200},height:{type:[String,Number],default:200},delBgColor:{type:String,default:"#fa3534"},delColor:{type:String,default:"#ffffff"},delIcon:{type:String,default:"close"},successIcon:{type:String,default:"checkbox-mark"},successColor:{type:String,default:"#ffffff"},toJson:{type:Boolean,default:!0},beforeUpload:{type:Function,default:null},beforeRemove:{type:Function,default:null},limitType:{type:Array,default:()=>["png","jpg","jpeg","webp","gif","image"]},index:{type:[Number,String],default:""}},mounted(){},data:()=>({lists:[],isInCount:!0,uploading:!1}),watch:{fileList:{immediate:!0,handler(e){let t=JSON.parse(JSON.stringify(this.lists));e.map((e=>{t.some((t=>t.url==e.url))||t.push({url:e.url,error:!1,progress:100})})),this.lists=JSON.parse(JSON.stringify(t))}},lists:{deep:!0,handler(e){this.$emit("update:file-list",e),this.$emit("on-list-change",e,this.index)}}},methods:{clear(){this.lists=[]},reUpload(){this.uploadFile()},selectFile(){let e=this;if(e.disabled)return;const{name:t="",maxCount:a,multiple:n,maxSize:o,sizeType:i,camera:r,compressed:s,maxDuration:l,sourceType:c}=e;let u=null,d=JSON.parse(JSON.stringify(e.lists));const m=a-d.length;u=new Promise(((e,t)=>{uni.chooseImage({count:n?m>9?9:m:1,sourceType:c,sizeType:i,success:e,fail:t})})),u.then((t=>{let i=e.lists.length;t.tempFiles.map(((t,i)=>{if(e.checkFileExt(t)&&(n||!(i>=1)))if(t.size>o)e.$emit("on-oversize",t,e.lists,e.index),e.showToast("超出允许的文件大小");else{if(a<=d.length)return e.$emit("on-exceed",t,e.lists,e.index),void e.showToast("超出最大允许的文件个数");d.push({url:t.path,progress:0,error:!1,file:t})}})),this.deepClone(d,e.lists),e.$emit("on-choose-complete",e.lists,e.index),e.autoUpload&&e.uploadFile(i)})).catch((t=>{e.$emit("on-choose-fail",t)}))},showToast(e,t=!1){(this.showTips||t)&&uni.showToast({title:e,icon:"none"})},upload(){this.uploadFile()},retry(e){this.lists[e].progress=0,this.lists[e].error=!1,this.lists[e].response=null,uni.showLoading({title:"重新上传"}),this.uploadFile(e)},async uploadFile(e=0){if(this.disabled)return;if(this.uploading)return;if(e>=this.lists.length)return void this.$emit("on-uploaded",this.lists,this.index);if(100==this.lists[e].progress)return void(0==this.autoUpload&&this.uploadFile(e+1));if(this.beforeUpload&&"function"==typeof this.beforeUpload){let t=this.beforeUpload.bind(this.$u.$parent.call(this))(e,this.lists);if(t&&"function"==typeof t.then)await t.then((e=>{})).catch((t=>this.uploadFile(e+1)));else if(!1===t)return this.uploadFile(e+1)}if(!this.action)return void this.showToast("请配置上传地址",!0);this.lists[e].error=!1,this.uploading=!0;const t=uni.uploadFile({url:this.action,filePath:this.lists[e].url,name:this.name,formData:this.formData,header:this.header,success:t=>{let a=this.toJson&&this.$u.test.jsonString(t.data)?JSON.parse(t.data):t.data;[200,201,204].includes(t.statusCode)?(this.lists[e].response=a,this.lists[e].progress=100,this.lists[e].error=!1,this.$emit("on-success",a,e,this.lists,this.index)):this.uploadError(e,a)},fail:t=>{this.uploadError(e,t)},complete:t=>{uni.hideLoading(),this.uploading=!1,this.uploadFile(e+1),this.$emit("on-change",t,e,this.lists,this.index)}});t.onProgressUpdate((t=>{t.progress>0&&(this.lists[e].progress=t.progress,this.$emit("on-progress",t,e,this.lists,this.index))}))},uploadError(e,t){this.lists[e].progress=0,this.lists[e].error=!0,this.lists[e].response=null,this.$emit("on-error",t,e,this.lists,this.index),this.showToast("上传失败，请重试")},deleteItem(e){uni.showModal({title:"提示",content:"您确定要删除此项吗？",success:async t=>{if(t.confirm)if(this.beforeRemove&&"function"==typeof this.beforeRemove){let t=this.beforeRemove.bind(this.$u.$parent.call(this))(e,this.lists);t&&"function"==typeof t.then?await t.then((t=>{this.handlerDeleteItem(e)})).catch((e=>{this.showToast("已终止移除")})):!1===t?this.showToast("已终止移除"):this.handlerDeleteItem(e)}else this.handlerDeleteItem(e)}})},handlerDeleteItem(e){this.lists[e].progress<100&&this.lists[e].progress>0&&void 0!==this.lists[e].uploadTask&&this.lists[e].uploadTask.abort(),this.lists.splice(e,1),this.$forceUpdate(),this.$emit("on-remove",e,this.lists,this.index)},remove(e){e>=0&&e<this.lists.length&&(this.lists.splice(e,1),this.$emit("on-list-change",this.lists,this.index))},doPreviewImage(e,t){if(!this.previewFullImage)return void this.$emit("on-preview",e,this.lists,this.index);const a=this.lists.map((e=>e.url||e.path));uni.previewImage({urls:a,current:e,success:()=>{this.$emit("on-preview",e,this.lists,this.index)},fail:()=>{uni.showToast({title:"预览图片失败",icon:"none"})}})},checkFileExt(e){let t=!1,a="";return a=e.path.replace(/.+\./,"").toLowerCase(),t=this.limitType.some((e=>e.toLowerCase()===a)),t||this.showToast(`不允许选择${a}格式的文件`),t},deepClone(e,t){for(let a in e){const n=e[a];Array.isArray(n)?(t[a]=[],this.deepClone(n,t[a])):null!==n&&"object"==typeof n?(t[a]={},this.deepClone(n,t[a])):t[a]=n}}}};const Ms=ie(Cs,[["render",function(t,a,n,o,r,s){const l=i(e.resolveDynamicComponent("u-icon"),Po),c=i(e.resolveDynamicComponent("u-line-progress"),ws);return n.disabled?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("view",{key:0,class:"u-upload"},[n.showUploadList?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(r.lists,((a,o)=>(e.openBlock(),e.createElementBlock("view",{class:"u-list-item u-preview-wrap",key:o,style:e.normalizeStyle({width:t.$u.addUnit(n.width),height:t.$u.addUnit(n.height)})},[n.deletable?(e.openBlock(),e.createElementBlock("view",{key:0,class:"u-delete-icon",onClick:e.withModifiers((e=>s.deleteItem(o)),["stop"]),style:e.normalizeStyle({background:n.delBgColor})},[e.createVNode(l,{class:"u-icon",name:n.delIcon,size:"20",color:n.delColor},null,8,["name","color"])],12,["onClick"])):e.createCommentVNode("",!0),n.showProgress&&a.progress>0&&100!=a.progress&&!a.error?(e.openBlock(),e.createBlock(c,{key:1,"show-percent":!1,height:"16",class:"u-progress",percent:a.progress},null,8,["percent"])):e.createCommentVNode("",!0),a.error?(e.openBlock(),e.createElementBlock("view",{key:2,onClick:e.withModifiers((e=>s.retry(o)),["stop"]),class:"u-error-btn"},"点击重试",8,["onClick"])):e.createCommentVNode("",!0),a.isImage?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("image",{key:3,onClick:e.withModifiers((e=>s.doPreviewImage(a.url||a.path,o)),["stop"]),class:"u-preview-image",src:a.url||a.path,mode:n.imageMode},null,8,["onClick","src","mode"]))],4)))),128)):e.createCommentVNode("",!0),e.renderSlot(t.$slots,"file",{file:r.lists},void 0,!0),n.maxCount>r.lists.length?(e.openBlock(),e.createElementBlock("view",{key:1,style:{display:"inline-block"},onClick:a[0]||(a[0]=(...e)=>s.selectFile&&s.selectFile(...e))},[e.renderSlot(t.$slots,"addBtn",{},void 0,!0),n.customBtn?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("view",{key:0,class:"u-list-item u-add-wrap","hover-class":"u-add-wrap__hover","hover-stay-time":"150",style:e.normalizeStyle({width:t.$u.addUnit(n.width),height:t.$u.addUnit(n.height)})},[e.createVNode(l,{name:"plus",class:"u-add-btn",size:"40"}),e.createElementVNode("view",{class:"u-add-tips"},e.toDisplayString(n.uploadText),1)],4))])):e.createCommentVNode("",!0)]))}],["__scopeId","data-v-4547c048"]]);function Ss(e,t,a){}const Is={name:"u-input",emits:["update:modelValue","input","change","confirm","clear","blur","focus","click","touchstart"],mixins:[{methods:{dispatch(e,t,a){let n=this.$parent||this.$root,o=n.$options.name;for(;n&&(!o||o!==e);)n=n.$parent,n&&(o=n.$options.name);n&&n[t](a)},broadcast(e,t,a){Ss.call(this,e,t,a)}}}],props:{value:{type:[String,Number],default:""},modelValue:{type:[String,Number],default:""},type:{type:String,default:"text"},inputAlign:{type:String,default:""},placeholder:{type:String,default:"请输入内容"},disabled:{type:Boolean,default:!1},maxlength:{type:[Number,String],default:140},placeholderStyle:{type:String,default:"color: #c0c4cc;"},confirmType:{type:String,default:"done"},customStyle:{type:Object,default:()=>({})},fixed:{type:Boolean,default:!1},focus:{type:Boolean,default:!1},passwordIcon:{type:Boolean,default:!0},border:{type:Boolean,default:!1},borderColor:{type:String,default:"#dcdfe6"},autoHeight:{type:Boolean,default:!0},selectOpen:{type:Boolean,default:!1},height:{type:[Number,String],default:""},clearable:{type:[Boolean,String]},cursorSpacing:{type:[Number,String],default:0},selectionStart:{type:[Number,String],default:-1},selectionEnd:{type:[Number,String],default:-1},trim:{type:Boolean,default:!0},showConfirmbar:{type:Boolean,default:!0},adjustPosition:{type:Boolean,default:!0},backgroundColor:{type:String},padding:{type:String}},data:()=>({defaultValue:"",inputHeight:70,textareaHeight:100,validateState:!1,focused:!1,showPassword:!1,lastValue:"",uForm:{inputAlign:"",clearable:""},showCover:!1}),watch:{valueCom(e,t){this.defaultValue=e,e!=t&&"select"==this.type&&this.handleInput({detail:{value:e}})},defaultValue(e,t){e&&e.length>this.maxlength&&setTimeout((()=>{e=e.substring(0,this.maxlength),this.handleInput({detail:{value:e}})}),0)}},computed:{valueCom(){return this.modelValue},inputAlignCom(){return this.inputAlign||this.uForm.inputAlign||"left"},clearableCom(){return"boolean"==typeof this.clearable?this.clearable:"boolean"!=typeof this.uForm.clearable||this.uForm.clearable},inputMaxlength(){return Number(this.maxlength)},getStyle(){let e={};return e.minHeight=this.height?this.height+"rpx":"textarea"==this.type?this.textareaHeight+"rpx":this.inputHeight+"rpx",e=Object.assign(e,this.customStyle),e},getCursorSpacing(){return Number(this.cursorSpacing)},uSelectionStart(){return String(this.selectionStart)},uSelectionEnd(){return String(this.selectionEnd)}},created(){this.defaultValue=this.valueCom},mounted(){let e=this.$u.$parent.call(this,"u-form");e&&Object.keys(this.uForm).map((t=>{this.uForm[t]=e[t]}))},methods:{handleInput(e){let t=e.detail.value;this.trim&&(t=this.$u.trim(t)),this.$emit("input",t),this.$emit("update:modelValue",t),this.defaultValue=t,setTimeout((()=>{this.dispatch("u-form-item","onFieldChange",t)}),40)},handleBlur(e){setTimeout((()=>{this.focused=!1}),100);let t=e.detail.value;this.$emit("blur",t),setTimeout((()=>{this.dispatch("u-form-item","onFieldBlur",t)}),40)},onFormItemError(e){this.validateState=e},onFocus(e){this.focused=!0,this.$emit("focus")},onConfirm(e){this.$emit("confirm",e.detail.value)},onClear(e){this.$emit("input",""),this.$emit("update:modelValue",""),this.$emit("clear")},inputClick(){this.$emit("click")}}};const Ts=ie(Is,[["render",function(t,a,n,o,r,s){const l=i(e.resolveDynamicComponent("u-icon"),Po);return e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["u-input",{"u-input--border":n.border,"u-input--error":r.validateState}]),style:e.normalizeStyle({padding:n.padding?n.padding:`0 ${n.border?20:0}rpx`,borderColor:n.borderColor,textAlign:s.inputAlignCom,backgroundColor:n.backgroundColor}),onClick:a[11]||(a[11]=e.withModifiers(((...e)=>s.inputClick&&s.inputClick(...e)),["stop"]))},["textarea"==n.type?(e.openBlock(),e.createElementBlock("textarea",{key:0,class:"u-input__input u-input__textarea",style:e.normalizeStyle([s.getStyle]),value:r.defaultValue,placeholder:n.placeholder,placeholderStyle:n.placeholderStyle,disabled:n.disabled,fixed:n.fixed,focus:n.focus,maxlength:-1,autoHeight:n.autoHeight,"selection-end":s.uSelectionEnd,"selection-start":s.uSelectionStart,"cursor-spacing":s.getCursorSpacing,"show-confirm-bar":n.showConfirmbar,"adjust-position":n.adjustPosition,onInput:a[0]||(a[0]=(...e)=>s.handleInput&&s.handleInput(...e)),onBlur:a[1]||(a[1]=(...e)=>s.handleBlur&&s.handleBlur(...e)),onFocus:a[2]||(a[2]=(...e)=>s.onFocus&&s.onFocus(...e)),onConfirm:a[3]||(a[3]=(...e)=>s.onConfirm&&s.onConfirm(...e))},null,44,["value","placeholder","placeholderStyle","disabled","fixed","focus","autoHeight","selection-end","selection-start","cursor-spacing","show-confirm-bar","adjust-position"])):(e.openBlock(),e.createElementBlock("input",{key:1,class:e.normalizeClass(["u-input__input","u-input__"+n.type]),type:"password"==n.type?"text":n.type,style:e.normalizeStyle([s.getStyle]),value:r.defaultValue,maxlength:1e4,password:"password"==n.type&&!r.showPassword,placeholder:n.placeholder,placeholderStyle:n.placeholderStyle,disabled:n.disabled||"select"===n.type&&!r.showCover,focus:n.focus,confirmType:n.confirmType,"cursor-spacing":s.getCursorSpacing,"selection-end":s.uSelectionEnd,"selection-start":s.uSelectionStart,"show-confirm-bar":n.showConfirmbar,"adjust-position":n.adjustPosition,onFocus:a[4]||(a[4]=(...e)=>s.onFocus&&s.onFocus(...e)),onBlur:a[5]||(a[5]=(...e)=>s.handleBlur&&s.handleBlur(...e)),onInput:a[6]||(a[6]=(...e)=>s.handleInput&&s.handleInput(...e)),onConfirm:a[7]||(a[7]=(...e)=>s.onConfirm&&s.onConfirm(...e))},null,46,["type","value","password","placeholder","placeholderStyle","disabled","focus","confirmType","cursor-spacing","selection-end","selection-start","show-confirm-bar","adjust-position"])),"select"===n.type&&r.showCover?(e.openBlock(),e.createElementBlock("view",{key:2,class:"cover-input",onClick:a[8]||(a[8]=e.withModifiers(((...e)=>s.inputClick&&s.inputClick(...e)),["stop"]))})):e.createCommentVNode("",!0),e.createElementVNode("view",{class:"u-input__right-icon u-flex"},[s.clearableCom&&""!=s.valueCom&&r.focused?(e.openBlock(),e.createElementBlock("view",{key:0,class:"u-input__right-icon__clear u-input__right-icon__item",onClick:a[9]||(a[9]=(...e)=>s.onClear&&s.onClear(...e))},[e.createVNode(l,{size:"32",name:"close-circle-fill",color:"#c0c4cc"})])):e.createCommentVNode("",!0),n.passwordIcon&&"password"==n.type?(e.openBlock(),e.createElementBlock("view",{key:1,class:"u-input__right-icon__clear u-input__right-icon__item"},[e.createVNode(l,{size:"32",name:r.showPassword?"eye-fill":"eye",color:"#c0c4cc",onClick:a[10]||(a[10]=e=>r.showPassword=!r.showPassword)},null,8,["name"])])):e.createCommentVNode("",!0),"select"==n.type?(e.openBlock(),e.createElementBlock("view",{key:2,class:e.normalizeClass(["u-input__right-icon--select u-input__right-icon__item",{"u-input__right-icon--select--reverse":n.selectOpen}])},[e.createVNode(l,{name:"arrow-down-fill",size:"26",color:"#c0c4cc"})],2)):e.createCommentVNode("",!0)])],6)}],["__scopeId","data-v-0c2a3dba"]]),Ds="/static/auth/hold-in-hand.png",bs="/static/auth/stars.png";function Vs(e,t,a={},n="file"){return new Promise(((o,i)=>{uni.uploadFile({url:e,filePath:t,name:n,formData:a,header:{token:uni.getStorageSync("token")||""},success:e=>{try{const t=JSON.parse(e.data);o(t)}catch(Ft){o(e.data)}},fail:e=>i(e)})}))}const As={__name:"idCard",props:{consultantType:String,modelValue:{type:Object,default:()=>({})}},emits:["update:modelValue","committed"],setup(t,{expose:a,emit:n}){const r=t;o("log","at pages/forum/my/components/idCard.vue:221",r.modelValue,"props.modelValue - - - - - - - -  - ");const s=n,l=e.computed({get:()=>r.modelValue,set:e=>s("update:modelValue",e)}),c=e.ref(!1),d=e.ref(!1);e.ref(!1);const m=e.ref(150),p=uni.getStorageSync("token"),h=e.ref({token:p}),v=e.ref("https://ceshi.maimiaoqingsu.com/api/common/upload"),g=e.ref({year:!0,month:!0,day:!1,hour:!1,minute:!1,second:!1}),f=e.ref(["白羊座","金牛座","双子座","巨蟹座","狮子座","处女座","天秤座","天蝎座","射手座","摩羯座","水瓶座","双鱼座"]),y=e.ref(["字迹书写规整","模板内容抄写完整","签字、按手印","身份证正面向上合照"]),_=()=>{c.value=!0},k=e=>{l.value.birthdate=`${e.year}-${e.month}`},E=e=>{l.value.address=e.province.name+e.city.name+e.area.name},x=()=>{d.value=!0},N=e=>{l.value.constellation=f.value[e.detail.value]},w=()=>{},C=(e,t,a)=>{var n;a&&a[t]&&(a[t].url=(null==(n=e.data)?void 0:n.url)||"",l.value.masterGallery=[...a])},M=(e,t,a)=>{l.value.holdIdCardImg=e.data.url},S=(e,t,a)=>{l.value.commitmentImg=e.data.url},I=(e,t,a)=>{o("log","at pages/forum/my/components/idCard.vue:303",`删除${e}第${t}张图片`,a),l.value[e]=a},T=async e=>{try{const t=(await uni.chooseImage({count:1})).tempFilePaths[0],a=await Vs("https://ceshi.maimiaoqingsu.com/api/common/upload",t);0===a.code&&(1===e?l.value.idcardFront=a.data.url:l.value.idcardBackend=a.data.url)}catch(t){o("error","at pages/forum/my/components/idCard.vue:324","上传失败:",t),uni.showToast({title:"上传失败",icon:"error"})}};return a({submit:async()=>{var e,t,a;const n=[{field:l.value.idcardFront,message:"请上传身份证人像页"},{field:l.value.idcardBackend,message:"请上传身份证国徽页"},{field:l.value.name,message:"请输入姓名"},{field:l.value.idcardNum,message:"请输入身份证号"},{field:null==(e=l.value.masterGallery)?void 0:e.length,message:"请上传个人形象照"},{field:null==(t=l.value.holdIdCardImg)?void 0:t.length,message:"请上传手持身份证件照"},{field:null==(a=l.value.commitmentImg)?void 0:a.length,message:"请上传手写承诺书照"}];for(const{field:o,message:r}of n)if(!o)return void uni.showToast({title:r,icon:"none"});const{masterGallery:i,commitmentImg:c,holdIdCardImg:u}=l.value;"string"==typeof c&&"string"==typeof u||(l.value.commitmentImg=c[0].url,l.value.holdIdCardImg=u[0].url);const d=Array.isArray(i)?i.map((e=>e.url)).filter((e=>!!e)):[],m={...l.value,masterGallery:JSON.stringify(d),consultantType:r.consultantType,idCardNo:l.value.idcardNum,idCardFrontImg:l.value.idcardFront,idCardBackImg:l.value.idcardBackend};uni.showLoading({title:"提交中"});try{const e=1==r.consultantType?ni:$o,t=await e(m);uni.hideLoading(),l.value=t.data,s("committed","")}catch(p){uni.hideLoading(),o("error","at pages/forum/my/components/idCard.vue:379","提交失败:",p)}}}),e.watch((()=>r.modelValue),(e=>{try{JSON.parse(e.masterGallery||"[]");l.value.masterGallery=Array.isArray(masterGalleryData)?masterGalleryData.map((e=>({url:e}))):[]}catch(Ft){l.value.masterGallery=[]}}),{immediate:!0,deep:!0}),u((()=>{})),(t,a)=>{const n=i(e.resolveDynamicComponent("u-icon"),Po),o=i(e.resolveDynamicComponent("u-picker"),Ns),r=i(e.resolveDynamicComponent("u-upload"),Ms),s=i(e.resolveDynamicComponent("uni-icons"),re),u=i(e.resolveDynamicComponent("uni-easyinput"),Cr),p=i(e.resolveDynamicComponent("u-input"),Ts);return e.openBlock(),e.createElementBlock("view",{class:"id-card-box"},[e.createElementVNode("view",{class:"id-card-content-box"},[e.createElementVNode("view",{class:"id-card-content"},[e.createElementVNode("view",{class:"title"},"身份认证"),e.createElementVNode("view",{class:"remark"},"仅用于身份实名核验，信息会严格保密"),e.createElementVNode("view",{class:"unload-card-box"},[e.createElementVNode("view",{class:"upload-card-item",onClick:a[0]||(a[0]=e=>T(1))},[e.createElementVNode("image",{src:l.value.idcardFront||"@/static/auth/id-card-front.png",class:"img"},null,8,["src"]),e.createElementVNode("view",{class:"txt"},"身份证人像面")]),e.createElementVNode("view",{class:"upload-card-item",onClick:a[1]||(a[1]=e=>T(2))},[e.createElementVNode("image",{src:l.value.idcardBackend||"@/static/auth/id-card-back.png",class:"img"},null,8,["src"]),e.createElementVNode("view",{class:"txt"},"身份证国徽面")])]),e.createElementVNode("view",{class:"id-card-form-content"},[e.createElementVNode("view",{class:"form-item"},[e.createElementVNode("view",{class:"label require"},"姓名"),e.createElementVNode("view",{class:"content"},[e.withDirectives(e.createElementVNode("input",{type:"text","onUpdate:modelValue":a[2]||(a[2]=e=>l.value.name=e),placeholder:"请输入姓名",class:"form-input"},null,512),[[e.vModelText,l.value.name]])])]),e.createElementVNode("view",{class:"form-item"},[e.createElementVNode("view",{class:"label require"},"身份证号"),e.createElementVNode("view",{class:"content"},[e.withDirectives(e.createElementVNode("input",{type:"text","onUpdate:modelValue":a[3]||(a[3]=e=>l.value.idcardNum=e),placeholder:"请输入身份证号",class:"form-input"},null,512),[[e.vModelText,l.value.idcardNum]])])]),e.createElementVNode("view",{class:"form-item"},[e.createElementVNode("view",{class:"label require"},"出生年月"),e.createElementVNode("view",{class:"content",onClick:_},[e.createElementVNode("text",null,e.toDisplayString(l.value.birthdate||"请选择"),1),e.createVNode(n,{name:"arrow-right"}),e.createVNode(o,{type:"text",modelValue:c.value,"onUpdate:modelValue":a[4]||(a[4]=e=>c.value=e),params:g.value,mode:"time",onConfirm:k},null,8,["modelValue","params"])])]),e.createElementVNode("view",{class:"upload-section"},[e.createElementVNode("view",{class:"label require"},[e.createTextVNode(" 个人形象照 "),e.createElementVNode("text",{class:"sub-label"},"（用于个人主页封面，格式jpg/png，大小2M内）")]),e.createVNode(r,{fileList:l.value.masterGallery,"before-upload":w,header:h.value,onOnSuccess:C,onOnRemove:a[5]||(a[5]=(e,t)=>I("masterGallery",e,t)),name:"file",action:v.value,maxCount:5},null,8,["fileList","header","action"])]),e.createElementVNode("view",{class:"form-item upload-with-image"},[e.createElementVNode("view",{class:"upload-content"},[e.createElementVNode("view",{class:"label require",style:{width:"170rpx"}},"手持身份证件"),e.createVNode(r,{fileList:l.value.holdIdCardImg,"before-upload":w,header:h.value,onOnSuccess:M,onOnRemove:a[6]||(a[6]=(e,t)=>I("holdIdCardImg",e,t)),name:"file",action:v.value,maxCount:1},null,8,["fileList","header","action"])]),e.createElementVNode("image",{src:Ds,class:"example-image"})]),e.createElementVNode("view",{class:"form-item upload-with-image"},[e.createElementVNode("view",{class:"upload-content"},[e.createElementVNode("view",{class:"label require",style:{width:"200rpx"}},"手写承诺书照片"),e.createVNode(r,{fileList:l.value.commitmentImg,"before-upload":w,header:h.value,onOnSuccess:S,onOnRemove:a[7]||(a[7]=(e,t)=>I("commitmentImg",e,t)),name:"file",action:v.value,maxCount:1},null,8,["fileList","header","action"])]),e.createElementVNode("view",{class:"promise"},[e.createElementVNode("view",{class:"template",onClick:a[8]||(a[8]=e=>{return t="手写承诺书",void uni.navigateTo({url:`/pages/webview/webview?type=${t}`});var t})},[e.createTextVNode(" 点击查看"),e.createElementVNode("text",null,"《承诺书模板》")]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(y.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"promise-item",key:a},[e.createElementVNode("image",{src:bs}),e.createElementVNode("view",null,e.toDisplayString(t),1)])))),128))])]),e.createElementVNode("view",{class:"form-item"},[e.createElementVNode("view",{class:"label require"},"星座"),e.createElementVNode("picker",{range:f.value,onChange:N},[e.createElementVNode("view",{class:"content picker-content"},[e.createTextVNode(e.toDisplayString(l.value.constellation||"请选择")+" ",1),e.createVNode(s,{type:"right",size:"14",color:"rgba(0, 0, 0, 0.3)"})])],40,["range"])]),e.createElementVNode("view",{class:"form-item"},[e.createElementVNode("view",{class:"label require"},"所在地区"),e.createElementVNode("view",{class:"content",onClick:x},[e.createTextVNode(e.toDisplayString(l.value.address||"请选择")+" ",1),e.createVNode(s,{type:"right",size:"14",color:"rgba(0, 0, 0, 0.3)"})]),e.createVNode(o,{modelValue:d.value,"onUpdate:modelValue":a[9]||(a[9]=e=>d.value=e),onConfirm:E,mode:"region"},null,8,["modelValue"])]),e.createElementVNode("view",{class:"form-item user-sign"},[e.createElementVNode("view",{class:"label"},"个人签名"),e.createElementVNode("view",{class:"content-input"},[e.createVNode(u,{trim:"all",type:"text",placeholder:"请输入个人签名",inputBorder:!1,clearable:!1,modelValue:l.value.signature,"onUpdate:modelValue":a[10]||(a[10]=e=>l.value.signature=e),class:"signature-input"},null,8,["modelValue"])])]),e.createElementVNode("view",{class:"form-item user-introduction"},[e.createElementVNode("view",{class:"label"},"个人简介"),e.createElementVNode("view",{class:"introduction-content"},[e.createVNode(p,{type:"textarea",border:"",modelValue:l.value.profile,"onUpdate:modelValue":a[11]||(a[11]=e=>l.value.profile=e),"auto-height":"",height:m.value,placeholder:"请输入个人简介"},null,8,["modelValue","height"])])])])])])])}}},Ls=ie(As,[["__scopeId","data-v-c7617e86"]]),Rs=ie({__name:"userInfo",setup(t){e.useCssVars((e=>({"3b6bfce0":n.value})));const a=ae(),n=e.ref(a.statusBarHeight+"px"),r=e.ref(Ls),s=e.ref(1),c=e.ref({}),u=e.ref(null),d=e.ref(null),m=e.ref(null),p=e.ref(""),h=e.ref("");l((e=>{p.value=e.type,h.value=JSON.parse(e.userInfo),o("log","at pages/forum/my/userInfo.vue:96",h.value),uni.setNavigationBarTitle({title:"认证"}),v()}));const v=async()=>{if(1==p.value){let e=await oi({userId:h.value});const t={...e.data,idcardNum:e.data.sysUser.idCardNo,idcardFront:e.data.sysUser.idCardFrontImg,idcardBackend:e.data.sysUser.idCardBackImg,occupationId:e.data.sysUser.occupationId};g(t)}else{let e=await jo({userId:h.value});const t={...e.data,occupationId:e.data.sysUser.occupationId};g(t)}},g=e=>{const{masterGallery:t,commitmentImg:a,holdIdCardImg:n}=e,o=t?JSON.parse(t):[],i=f([a]),r=f([n]),s=Object.assign(e,{masterGallery:o,commitmentImg:i,holdIdCardImg:r});c.value=s},f=e=>e.map(((e,t)=>({url:e}))),y=e.ref({idCard:{consultantName:"",idNum:""},career:{profession:"",experience:""},certificate:{files:[]}}),_=()=>{var e,t;1==s.value&&(null==(e=u.value)||e.submit()),2==s.value&&(null==(t=d.value)||t.submit())},k=()=>{s.value=s.value+1};return e.watch(s,((e,t)=>{var a;1==e?r.value=Ls:2==e?r.value=career:3==e&&(null==(a=m.value)||a.refreshData(),r.value=certificate)})),(t,a)=>{const n=i(e.resolveDynamicComponent("uni-icons"),re),o=i(e.resolveDynamicComponent("uni-nav-bar"),Di);return i(e.resolveDynamicComponent("u-icon"),Po),e.openBlock(),e.createElementBlock("view",{class:"auth-box"},[e.createElementVNode("view",{class:"children-component"},[e.createVNode(o,{class:e.normalizeClass([t.scrollTop>15?"scrollClass":"","header-bar"]),backgroundColor:"rgba(255,255,255,0)",border:!1,title:"基本资料"},{left:e.withCtx((()=>[e.createVNode(n,{type:"left",size:"24",onClick:t.backFn},null,8,["onClick"])])),right:e.withCtx((()=>[e.createElementVNode("view",{class:"right"},[e.createElementVNode("image",{src:Ri,style:{width:"40rpx",height:"40rpx"}})])])),_:1},8,["class"]),(e.openBlock(),e.createElementBlock("scroll-view",{key:0,"scroll-y":"true","show-scrollbar":!1,class:"scroll-content"},[e.createElementVNode("view",{class:"children-content"},[e.createElementVNode("view",{class:"top-bg"}),e.createElementVNode("view",{class:"current-component"},[e.createElementVNode("view",{class:"handler-components-box"},[e.withDirectives(e.createVNode(Ls,{modelValue:c.value,consultantType:p.value,onCommitted:k,ref_key:"idCardRef",ref:u,"onUpdate:modelValue":a[0]||(a[0]=e=>y.value.idCard=e)},null,8,["modelValue","consultantType"]),[[e.vShow,1==s.value]]),e.createElementVNode("view",{class:"footer"},[e.createElementVNode("view",{class:"tip"},[e.createElementVNode("image",{src:hs,class:"img"}),e.createTextVNode("个人信息安全保障中 ")]),e.createElementVNode("view",{class:"btn"},[e.createElementVNode("view",{class:"next",onClick:_},"提交审核")])])])])])]))])])}}},[["__scopeId","data-v-d51ce12e"]]);function Os(e,t){return`${Bs(e)} ${Ps(e,t)}`}function Bs(e){e=Hs(e);const t=(e=new Date(e)).getFullYear(),a=e.getMonth()+1,n=e.getDate();return`${t}-${Us(a)}-${Us(n)}`}function Ps(e,t){e=Hs(e);const a=(e=new Date(e)).getHours(),n=e.getMinutes(),o=e.getSeconds();return t?`${Us(a)}:${Us(n)}`:`${Us(a)}:${Us(n)}:${Us(o)}`}function Us(e){return e<10&&(e=`0${e}`),e}function Gs(e){return e?"00:00":"00:00:00"}function Fs(e,t){return(e=new Date(Hs(e)))<=(t=new Date(Hs(t)))}function qs(e){return e.match(/((19|20)\d{2})(-|\/)\d{1,2}(-|\/)\d{1,2}/g)}const zs=/^\d{4}-(0?[1-9]|1[012])-(0?[1-9]|[12][0-9]|3[01])( [0-5]?[0-9]:[0-5]?[0-9](:[0-5]?[0-9])?)?$/;function Hs(e){return"string"==typeof e&&zs.test(e)&&(e=e.replace(/-/g,"/")),e}const $s=ie({props:{weeks:{type:Object,default:()=>({})},calendar:{type:Object,default:()=>({})},selected:{type:Array,default:()=>[]},checkHover:{type:Boolean,default:!1}},methods:{choiceDate(e){this.$emit("change",e)},handleMousemove(e){this.$emit("handleMouse",e)}}},[["render",function(t,a,n,o,i,r){return e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["uni-calendar-item__weeks-box",{"uni-calendar-item--disable":n.weeks.disable,"uni-calendar-item--before-checked-x":n.weeks.beforeMultiple,"uni-calendar-item--multiple":n.weeks.multiple,"uni-calendar-item--after-checked-x":n.weeks.afterMultiple}]),onClick:a[0]||(a[0]=e=>r.choiceDate(n.weeks)),onMouseenter:a[1]||(a[1]=e=>r.handleMousemove(n.weeks))},[e.createElementVNode("view",{class:e.normalizeClass(["uni-calendar-item__weeks-box-item",{"uni-calendar-item--checked":n.calendar.fullDate===n.weeks.fullDate&&(n.calendar.userChecked||!n.checkHover),"uni-calendar-item--checked-range-text":n.checkHover,"uni-calendar-item--before-checked":n.weeks.beforeMultiple,"uni-calendar-item--multiple":n.weeks.multiple,"uni-calendar-item--after-checked":n.weeks.afterMultiple,"uni-calendar-item--disable":n.weeks.disable}])},[n.selected&&n.weeks.extraInfo?(e.openBlock(),e.createElementBlock("text",{key:0,class:"uni-calendar-item__weeks-box-circle"})):e.createCommentVNode("",!0),e.createElementVNode("text",{class:"uni-calendar-item__weeks-box-text uni-calendar-item__weeks-box-text-disable uni-calendar-item--checked-text"},e.toDisplayString(n.weeks.date),1)],2),e.createElementVNode("view",{class:e.normalizeClass({"uni-calendar-item--today":n.weeks.isToday})},null,2)],34)}],["__scopeId","data-v-cf8cb4f2"]]),js={en:{"uni-datetime-picker.selectDate":"select date","uni-datetime-picker.selectTime":"select time","uni-datetime-picker.selectDateTime":"select date and time","uni-datetime-picker.startDate":"start date","uni-datetime-picker.endDate":"end date","uni-datetime-picker.startTime":"start time","uni-datetime-picker.endTime":"end time","uni-datetime-picker.ok":"ok","uni-datetime-picker.clear":"clear","uni-datetime-picker.cancel":"cancel","uni-datetime-picker.year":"-","uni-datetime-picker.month":"","uni-calender.MON":"MON","uni-calender.TUE":"TUE","uni-calender.WED":"WED","uni-calender.THU":"THU","uni-calender.FRI":"FRI","uni-calender.SAT":"SAT","uni-calender.SUN":"SUN","uni-calender.confirm":"confirm"},"zh-Hans":{"uni-datetime-picker.selectDate":"选择日期","uni-datetime-picker.selectTime":"选择时间","uni-datetime-picker.selectDateTime":"选择日期时间","uni-datetime-picker.startDate":"开始日期","uni-datetime-picker.endDate":"结束日期","uni-datetime-picker.startTime":"开始时间","uni-datetime-picker.endTime":"结束时间","uni-datetime-picker.ok":"确定","uni-datetime-picker.clear":"清除","uni-datetime-picker.cancel":"取消","uni-datetime-picker.year":"年","uni-datetime-picker.month":"月","uni-calender.SUN":"日","uni-calender.MON":"一","uni-calender.TUE":"二","uni-calender.WED":"三","uni-calender.THU":"四","uni-calender.FRI":"五","uni-calender.SAT":"六","uni-calender.confirm":"确认"},"zh-Hant":{"uni-datetime-picker.selectDate":"選擇日期","uni-datetime-picker.selectTime":"選擇時間","uni-datetime-picker.selectDateTime":"選擇日期時間","uni-datetime-picker.startDate":"開始日期","uni-datetime-picker.endDate":"結束日期","uni-datetime-picker.startTime":"開始时间","uni-datetime-picker.endTime":"結束时间","uni-datetime-picker.ok":"確定","uni-datetime-picker.clear":"清除","uni-datetime-picker.cancel":"取消","uni-datetime-picker.year":"年","uni-datetime-picker.month":"月","uni-calender.SUN":"日","uni-calender.MON":"一","uni-calender.TUE":"二","uni-calender.WED":"三","uni-calender.THU":"四","uni-calender.FRI":"五","uni-calender.SAT":"六","uni-calender.confirm":"確認"}},{t:Ks}=ye(js),Ys={name:"UniDatetimePicker",data:()=>({indicatorStyle:"height: 50px;",visible:!1,fixNvueBug:{},dateShow:!0,timeShow:!0,title:"日期和时间",time:"",year:1920,month:0,day:0,hour:0,minute:0,second:0,startYear:1920,startMonth:1,startDay:1,startHour:0,startMinute:0,startSecond:0,endYear:2120,endMonth:12,endDay:31,endHour:23,endMinute:59,endSecond:59}),options:{virtualHost:!0},props:{type:{type:String,default:"datetime"},value:{type:[String,Number],default:""},modelValue:{type:[String,Number],default:""},start:{type:[Number,String],default:""},end:{type:[Number,String],default:""},returnType:{type:String,default:"string"},disabled:{type:[Boolean,String],default:!1},border:{type:[Boolean,String],default:!0},hideSecond:{type:[Boolean,String],default:!1}},watch:{modelValue:{handler(e){e?(this.parseValue(Hs(e)),this.initTime(!1)):(this.time="",this.parseValue(Date.now()))},immediate:!0},type:{handler(e){"date"===e?(this.dateShow=!0,this.timeShow=!1,this.title="日期"):"time"===e?(this.dateShow=!1,this.timeShow=!0,this.title="时间"):(this.dateShow=!0,this.timeShow=!0,this.title="日期和时间")},immediate:!0},start:{handler(e){this.parseDatetimeRange(Hs(e),"start")},immediate:!0},end:{handler(e){this.parseDatetimeRange(Hs(e),"end")},immediate:!0},months(e){this.checkValue("month",this.month,e)},days(e){this.checkValue("day",this.day,e)},hours(e){this.checkValue("hour",this.hour,e)},minutes(e){this.checkValue("minute",this.minute,e)},seconds(e){this.checkValue("second",this.second,e)}},computed:{years(){return this.getCurrentRange("year")},months(){return this.getCurrentRange("month")},days(){return this.getCurrentRange("day")},hours(){return this.getCurrentRange("hour")},minutes(){return this.getCurrentRange("minute")},seconds(){return this.getCurrentRange("second")},ymd(){return[this.year-this.minYear,this.month-this.minMonth,this.day-this.minDay]},hms(){return[this.hour-this.minHour,this.minute-this.minMinute,this.second-this.minSecond]},currentDateIsStart(){return this.year===this.startYear&&this.month===this.startMonth&&this.day===this.startDay},currentDateIsEnd(){return this.year===this.endYear&&this.month===this.endMonth&&this.day===this.endDay},minYear(){return this.startYear},maxYear(){return this.endYear},minMonth(){return this.year===this.startYear?this.startMonth:1},maxMonth(){return this.year===this.endYear?this.endMonth:12},minDay(){return this.year===this.startYear&&this.month===this.startMonth?this.startDay:1},maxDay(){return this.year===this.endYear&&this.month===this.endMonth?this.endDay:this.daysInMonth(this.year,this.month)},minHour(){return"datetime"===this.type?this.currentDateIsStart?this.startHour:0:"time"===this.type?this.startHour:void 0},maxHour(){return"datetime"===this.type?this.currentDateIsEnd?this.endHour:23:"time"===this.type?this.endHour:void 0},minMinute(){return"datetime"===this.type?this.currentDateIsStart&&this.hour===this.startHour?this.startMinute:0:"time"===this.type?this.hour===this.startHour?this.startMinute:0:void 0},maxMinute(){return"datetime"===this.type?this.currentDateIsEnd&&this.hour===this.endHour?this.endMinute:59:"time"===this.type?this.hour===this.endHour?this.endMinute:59:void 0},minSecond(){return"datetime"===this.type?this.currentDateIsStart&&this.hour===this.startHour&&this.minute===this.startMinute?this.startSecond:0:"time"===this.type?this.hour===this.startHour&&this.minute===this.startMinute?this.startSecond:0:void 0},maxSecond(){return"datetime"===this.type?this.currentDateIsEnd&&this.hour===this.endHour&&this.minute===this.endMinute?this.endSecond:59:"time"===this.type?this.hour===this.endHour&&this.minute===this.endMinute?this.endSecond:59:void 0},selectTimeText:()=>Ks("uni-datetime-picker.selectTime"),okText:()=>Ks("uni-datetime-picker.ok"),clearText:()=>Ks("uni-datetime-picker.clear"),cancelText:()=>Ks("uni-datetime-picker.cancel")},mounted(){},methods:{lessThanTen:e=>e<10?"0"+e:e,parseTimeType(e){if(e){let t=e.split(":");this.hour=Number(t[0]),this.minute=Number(t[1]),this.second=Number(t[2])}},initPickerValue(e){let t=null;e?t=this.compareValueWithStartAndEnd(e,this.start,this.end):(t=Date.now(),t=this.compareValueWithStartAndEnd(t,this.start,this.end)),this.parseValue(t)},compareValueWithStartAndEnd(e,t,a){let n=null;return e=this.superTimeStamp(e),t=this.superTimeStamp(t),a=this.superTimeStamp(a),n=t&&a?e<t?new Date(t):e>a?new Date(a):new Date(e):t&&!a?t<=e?new Date(e):new Date(t):!t&&a?e<=a?new Date(e):new Date(a):new Date(e),n},superTimeStamp(e){let t="";if("time"===this.type&&e&&"string"==typeof e){const e=new Date;t=e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate()+" "}return Number(e)&&(e=parseInt(e),t=0),this.createTimeStamp(t+e)},parseValue(e){if(e){if("time"===this.type&&"string"==typeof e)this.parseTimeType(e);else{let t=null;t=new Date(e),"time"!==this.type&&(this.year=t.getFullYear(),this.month=t.getMonth()+1,this.day=t.getDate()),"date"!==this.type&&(this.hour=t.getHours(),this.minute=t.getMinutes(),this.second=t.getSeconds())}this.hideSecond&&(this.second=0)}},parseDatetimeRange(e,t){if(!e)return"start"===t&&(this.startYear=1920,this.startMonth=1,this.startDay=1,this.startHour=0,this.startMinute=0,this.startSecond=0),void("end"===t&&(this.endYear=2120,this.endMonth=12,this.endDay=31,this.endHour=23,this.endMinute=59,this.endSecond=59));if("time"===this.type){const a=e.split(":");this[t+"Hour"]=Number(a[0]),this[t+"Minute"]=Number(a[1]),this[t+"Second"]=Number(a[2])}else{if(!e)return void("start"===t?this.startYear=this.year-60:this.endYear=this.year+60);Number(e)&&(e=parseInt(e));const a=/[0-9]:[0-9]/;"datetime"!==this.type||"end"!==t||"string"!=typeof e||a.test(e)||(e+=" 23:59:59");const n=new Date(e);this[t+"Year"]=n.getFullYear(),this[t+"Month"]=n.getMonth()+1,this[t+"Day"]=n.getDate(),"datetime"===this.type&&(this[t+"Hour"]=n.getHours(),this[t+"Minute"]=n.getMinutes(),this[t+"Second"]=n.getSeconds())}},getCurrentRange(e){const t=[];for(let a=this["min"+this.capitalize(e)];a<=this["max"+this.capitalize(e)];a++)t.push(a);return t},capitalize:e=>e.charAt(0).toUpperCase()+e.slice(1),checkValue(e,t,a){-1===a.indexOf(t)&&(this[e]=a[0])},daysInMonth:(e,t)=>new Date(e,t,0).getDate(),createTimeStamp(e){if(e)return"number"==typeof e?e:(e=e.replace(/-/g,"/"),"date"===this.type&&(e+=" 00:00:00"),Date.parse(e))},createDomSting(){const e=this.year+"-"+this.lessThanTen(this.month)+"-"+this.lessThanTen(this.day);let t=this.lessThanTen(this.hour)+":"+this.lessThanTen(this.minute);return this.hideSecond||(t=t+":"+this.lessThanTen(this.second)),"date"===this.type?e:"time"===this.type?t:e+" "+t},initTime(e=!0){this.time=this.createDomSting(),e&&("timestamp"===this.returnType&&"time"!==this.type?(this.$emit("change",this.createTimeStamp(this.time)),this.$emit("input",this.createTimeStamp(this.time)),this.$emit("update:modelValue",this.createTimeStamp(this.time))):(this.$emit("change",this.time),this.$emit("input",this.time),this.$emit("update:modelValue",this.time)))},bindDateChange(e){const t=e.detail.value;this.year=this.years[t[0]],this.month=this.months[t[1]],this.day=this.days[t[2]]},bindTimeChange(e){const t=e.detail.value;this.hour=this.hours[t[0]],this.minute=this.minutes[t[1]],this.second=this.seconds[t[2]]},initTimePicker(){if(this.disabled)return;const e=Hs(this.time);this.initPickerValue(e),this.visible=!this.visible},tiggerTimePicker(e){this.visible=!this.visible},clearTime(){this.time="",this.$emit("change",this.time),this.$emit("input",this.time),this.$emit("update:modelValue",this.time),this.tiggerTimePicker()},setTime(){this.initTime(),this.tiggerTimePicker()}}};const Ws=ie(Ys,[["render",function(t,a,n,o,i,r){return e.openBlock(),e.createElementBlock("view",{class:"uni-datetime-picker"},[e.createElementVNode("view",{onClick:a[0]||(a[0]=(...e)=>r.initTimePicker&&r.initTimePicker(...e))},[e.renderSlot(t.$slots,"default",{},(()=>[e.createElementVNode("view",{class:e.normalizeClass(["uni-datetime-picker-timebox-pointer",{"uni-datetime-picker-disabled":n.disabled,"uni-datetime-picker-timebox":n.border}])},[e.createElementVNode("text",{class:"uni-datetime-picker-text"},e.toDisplayString(i.time),1),i.time?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-datetime-picker-time"},[e.createElementVNode("text",{class:"uni-datetime-picker-text"},e.toDisplayString(r.selectTimeText),1)]))],2)]),!0)]),i.visible?(e.openBlock(),e.createElementBlock("view",{key:0,id:"mask",class:"uni-datetime-picker-mask",onClick:a[1]||(a[1]=(...e)=>r.tiggerTimePicker&&r.tiggerTimePicker(...e))})):e.createCommentVNode("",!0),i.visible?(e.openBlock(),e.createElementBlock("view",{key:1,class:e.normalizeClass(["uni-datetime-picker-popup",[i.dateShow&&i.timeShow?"":"fix-nvue-height"]]),style:e.normalizeStyle(i.fixNvueBug)},[e.createElementVNode("view",{class:"uni-title"},[e.createElementVNode("text",{class:"uni-datetime-picker-text"},e.toDisplayString(r.selectTimeText),1)]),i.dateShow?(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-datetime-picker__container-box"},[e.createElementVNode("picker-view",{class:"uni-datetime-picker-view","indicator-style":i.indicatorStyle,value:r.ymd,onChange:a[2]||(a[2]=(...e)=>r.bindDateChange&&r.bindDateChange(...e))},[e.createElementVNode("picker-view-column",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.years,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"uni-datetime-picker-item",key:a},[e.createElementVNode("text",{class:"uni-datetime-picker-item"},e.toDisplayString(r.lessThanTen(t)),1)])))),128))]),e.createElementVNode("picker-view-column",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.months,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"uni-datetime-picker-item",key:a},[e.createElementVNode("text",{class:"uni-datetime-picker-item"},e.toDisplayString(r.lessThanTen(t)),1)])))),128))]),e.createElementVNode("picker-view-column",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.days,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"uni-datetime-picker-item",key:a},[e.createElementVNode("text",{class:"uni-datetime-picker-item"},e.toDisplayString(r.lessThanTen(t)),1)])))),128))])],40,["indicator-style","value"]),e.createElementVNode("text",{class:"uni-datetime-picker-sign sign-left"},"-"),e.createElementVNode("text",{class:"uni-datetime-picker-sign sign-right"},"-")])):e.createCommentVNode("",!0),i.timeShow?(e.openBlock(),e.createElementBlock("view",{key:1,class:"uni-datetime-picker__container-box"},[e.createElementVNode("picker-view",{class:e.normalizeClass(["uni-datetime-picker-view",[n.hideSecond?"time-hide-second":""]]),"indicator-style":i.indicatorStyle,value:r.hms,onChange:a[3]||(a[3]=(...e)=>r.bindTimeChange&&r.bindTimeChange(...e))},[e.createElementVNode("picker-view-column",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.hours,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"uni-datetime-picker-item",key:a},[e.createElementVNode("text",{class:"uni-datetime-picker-item"},e.toDisplayString(r.lessThanTen(t)),1)])))),128))]),e.createElementVNode("picker-view-column",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.minutes,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"uni-datetime-picker-item",key:a},[e.createElementVNode("text",{class:"uni-datetime-picker-item"},e.toDisplayString(r.lessThanTen(t)),1)])))),128))]),n.hideSecond?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("picker-view-column",{key:0},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.seconds,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"uni-datetime-picker-item",key:a},[e.createElementVNode("text",{class:"uni-datetime-picker-item"},e.toDisplayString(r.lessThanTen(t)),1)])))),128))]))],42,["indicator-style","value"]),e.createElementVNode("text",{class:e.normalizeClass(["uni-datetime-picker-sign",[n.hideSecond?"sign-center":"sign-left"]])},":",2),n.hideSecond?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("text",{key:0,class:"uni-datetime-picker-sign sign-right"},":"))])):e.createCommentVNode("",!0),e.createElementVNode("view",{class:"uni-datetime-picker-btn"},[e.createElementVNode("view",{onClick:a[4]||(a[4]=(...e)=>r.clearTime&&r.clearTime(...e))},[e.createElementVNode("text",{class:"uni-datetime-picker-btn-text"},e.toDisplayString(r.clearText),1)]),e.createElementVNode("view",{class:"uni-datetime-picker-btn-group"},[e.createElementVNode("view",{class:"uni-datetime-picker-cancel",onClick:a[5]||(a[5]=(...e)=>r.tiggerTimePicker&&r.tiggerTimePicker(...e))},[e.createElementVNode("text",{class:"uni-datetime-picker-btn-text"},e.toDisplayString(r.cancelText),1)]),e.createElementVNode("view",{onClick:a[6]||(a[6]=(...e)=>r.setTime&&r.setTime(...e))},[e.createElementVNode("text",{class:"uni-datetime-picker-btn-text"},e.toDisplayString(r.okText),1)])])])],6)):e.createCommentVNode("",!0)])}],["__scopeId","data-v-4032e438"]]),{t:Js}=ye(js),Zs={components:{calendarItem:$s,timePicker:Ws},options:{virtualHost:!0},props:{date:{type:String,default:""},defTime:{type:[String,Object],default:""},selectableTimes:{type:[Object],default:()=>({})},selected:{type:Array,default:()=>[]},startDate:{type:String,default:""},endDate:{type:String,default:""},startPlaceholder:{type:String,default:""},endPlaceholder:{type:String,default:""},range:{type:Boolean,default:!1},hasTime:{type:Boolean,default:!1},insert:{type:Boolean,default:!0},showMonth:{type:Boolean,default:!0},clearDate:{type:Boolean,default:!0},checkHover:{type:Boolean,default:!0},hideSecond:{type:[Boolean],default:!1},pleStatus:{type:Object,default:()=>({before:"",after:"",data:[],fulldate:""})},defaultValue:{type:[String,Object,Array],default:""}},data:()=>({show:!1,weeks:[],calendar:{},nowDate:{},aniMaskShow:!1,firstEnter:!0,time:"",timeRange:{startTime:"",endTime:""},tempSingleDate:"",tempRange:{before:"",after:""}}),watch:{date:{immediate:!0,handler(e){this.range||(this.tempSingleDate=e,setTimeout((()=>{this.init(e)}),100))}},defTime:{immediate:!0,handler(e){this.range?(this.timeRange.startTime=e.start,this.timeRange.endTime=e.end):this.time=e}},startDate(e){this.cale&&(this.cale.setStartDate(e),this.cale.setDate(this.nowDate.fullDate),this.weeks=this.cale.weeks)},endDate(e){this.cale&&(this.cale.setEndDate(e),this.cale.setDate(this.nowDate.fullDate),this.weeks=this.cale.weeks)},selected(e){this.cale&&(this.cale.setSelectInfo(this.nowDate.fullDate,e),this.weeks=this.cale.weeks)},pleStatus:{immediate:!0,handler(e){const{before:t,after:a,fulldate:n,which:o}=e;this.tempRange.before=t,this.tempRange.after=a,setTimeout((()=>{if(n)if(this.cale.setHoverMultiple(n),t&&a){if(this.cale.lastHover=!0,this.rangeWithinMonth(a,t))return;this.setDate(t)}else this.cale.setMultiple(n),this.setDate(this.nowDate.fullDate),this.calendar.fullDate="",this.cale.lastHover=!1;else{if(!this.cale)return;this.cale.setDefaultMultiple(t,a),"left"===o&&t?(this.setDate(t),this.weeks=this.cale.weeks):a&&(this.setDate(a),this.weeks=this.cale.weeks),this.cale.lastHover=!0}}),16)}}},computed:{timepickerStartTime(){return(this.range?this.tempRange.before:this.calendar.fullDate)===this.startDate?this.selectableTimes.start:""},timepickerEndTime(){return(this.range?this.tempRange.after:this.calendar.fullDate)===this.endDate?this.selectableTimes.end:""},selectDateText:()=>Js("uni-datetime-picker.selectDate"),startDateText(){return this.startPlaceholder||Js("uni-datetime-picker.startDate")},endDateText(){return this.endPlaceholder||Js("uni-datetime-picker.endDate")},okText:()=>Js("uni-datetime-picker.ok"),yearText:()=>Js("uni-datetime-picker.year"),monthText:()=>Js("uni-datetime-picker.month"),MONText:()=>Js("uni-calender.MON"),TUEText:()=>Js("uni-calender.TUE"),WEDText:()=>Js("uni-calender.WED"),THUText:()=>Js("uni-calender.THU"),FRIText:()=>Js("uni-calender.FRI"),SATText:()=>Js("uni-calender.SAT"),SUNText:()=>Js("uni-calender.SUN"),confirmText:()=>Js("uni-calender.confirm")},created(){this.cale=new class{constructor({selected:e,startDate:t,endDate:a,range:n}={}){this.date=this.getDateObj(new Date),this.selected=e||[],this.startDate=t,this.endDate=a,this.range=n,this.cleanMultipleStatus(),this.weeks={},this.lastHover=!1}setDate(e){const t=this.getDateObj(e);this.getWeeks(t.fullDate)}cleanMultipleStatus(){this.multipleStatus={before:"",after:"",data:[]}}setStartDate(e){this.startDate=e}setEndDate(e){this.endDate=e}getPreMonthObj(e){e=Hs(e);const t=(e=new Date(e)).getMonth();e.setMonth(t-1);const a=e.getMonth();return 0!==t&&a-t==0&&e.setMonth(a-1),this.getDateObj(e)}getNextMonthObj(e){e=Hs(e);const t=(e=new Date(e)).getMonth();e.setMonth(t+1);const a=e.getMonth();return a-t>1&&e.setMonth(a-1),this.getDateObj(e)}getDateObj(e){return e=Hs(e),{fullDate:Bs(e=new Date(e)),year:e.getFullYear(),month:Us(e.getMonth()+1),date:Us(e.getDate()),day:e.getDay()}}getPreMonthDays(e,t){const a=[];for(let n=e-1;n>=0;n--){const e=t.month-1;a.push({date:new Date(t.year,e,-n).getDate(),month:e,disable:!0})}return a}getCurrentMonthDays(e,t){const a=[],n=this.date.fullDate;for(let o=1;o<=e;o++){const e=`${t.year}-${t.month}-${Us(o)}`,i=n===e,r=this.selected&&this.selected.find((t=>{if(this.dateEqual(e,t.date))return t}));this.startDate&&Fs(this.startDate,e),this.endDate&&Fs(e,this.endDate);let s=this.multipleStatus.data,l=-1;this.range&&s&&(l=s.findIndex((t=>this.dateEqual(t,e))));const c=-1!==l;a.push({fullDate:e,year:t.year,date:o,multiple:!!this.range&&c,beforeMultiple:this.isLogicBefore(e,this.multipleStatus.before,this.multipleStatus.after),afterMultiple:this.isLogicAfter(e,this.multipleStatus.before,this.multipleStatus.after),month:t.month,disable:this.startDate&&!Fs(this.startDate,e)||this.endDate&&!Fs(e,this.endDate),isToday:i,userChecked:!1,extraInfo:r})}return a}_getNextMonthDays(e,t){const a=[],n=t.month+1;for(let o=1;o<=e;o++)a.push({date:o,month:n,disable:!0});return a}getInfo(e){e||(e=new Date);return this.calendar.find((t=>t.fullDate===this.getDateObj(e).fullDate))||this.getDateObj(e)}dateEqual(e,t){return e=new Date(Hs(e)),t=new Date(Hs(t)),e.valueOf()===t.valueOf()}isLogicBefore(e,t,a){let n=t;return t&&a&&(n=Fs(t,a)?t:a),this.dateEqual(n,e)}isLogicAfter(e,t,a){let n=a;return t&&a&&(n=Fs(t,a)?a:t),this.dateEqual(n,e)}geDateAll(e,t){var a=[],n=e.split("-"),o=t.split("-"),i=new Date;i.setFullYear(n[0],n[1]-1,n[2]);var r=new Date;r.setFullYear(o[0],o[1]-1,o[2]);for(var s=i.getTime()-864e5,l=r.getTime()-864e5,c=s;c<=l;)c+=864e5,a.push(this.getDateObj(new Date(parseInt(c))).fullDate);return a}setMultiple(e){if(!this.range)return;let{before:t,after:a}=this.multipleStatus;if(t&&a){if(!this.lastHover)return void(this.lastHover=!0);this.multipleStatus.before=e,this.multipleStatus.after="",this.multipleStatus.data=[],this.multipleStatus.fulldate="",this.lastHover=!1}else t?(this.multipleStatus.after=e,Fs(this.multipleStatus.before,this.multipleStatus.after)?this.multipleStatus.data=this.geDateAll(this.multipleStatus.before,this.multipleStatus.after):this.multipleStatus.data=this.geDateAll(this.multipleStatus.after,this.multipleStatus.before),this.lastHover=!0):(this.multipleStatus.before=e,this.multipleStatus.after=void 0,this.lastHover=!1);this.getWeeks(e)}setHoverMultiple(e){if(!this.range||this.lastHover)return;const{before:t}=this.multipleStatus;t?(this.multipleStatus.after=e,Fs(this.multipleStatus.before,this.multipleStatus.after)?this.multipleStatus.data=this.geDateAll(this.multipleStatus.before,this.multipleStatus.after):this.multipleStatus.data=this.geDateAll(this.multipleStatus.after,this.multipleStatus.before)):this.multipleStatus.before=e,this.getWeeks(e)}setDefaultMultiple(e,t){this.multipleStatus.before=e,this.multipleStatus.after=t,e&&t&&(Fs(e,t)?(this.multipleStatus.data=this.geDateAll(e,t),this.getWeeks(t)):(this.multipleStatus.data=this.geDateAll(t,e),this.getWeeks(e)))}getWeeks(e){const{year:t,month:a}=this.getDateObj(e),n=new Date(t,a-1,1).getDay(),o=this.getPreMonthDays(n,this.getDateObj(e)),i=new Date(t,a,0).getDate(),r=42-n-i,s=[...o,...this.getCurrentMonthDays(i,this.getDateObj(e)),...this._getNextMonthDays(r,this.getDateObj(e))],l=new Array(6);for(let c=0;c<s.length;c++){const e=Math.floor(c/7);l[e]||(l[e]=new Array(7)),l[e][c%7]=s[c]}this.calendar=s,this.weeks=l}}({selected:this.selected,startDate:this.startDate,endDate:this.endDate,range:this.range}),this.init(this.date)},methods:{leaveCale(){this.firstEnter=!0},handleMouse(e){if(e.disable)return;if(this.cale.lastHover)return;let{before:t,after:a}=this.cale.multipleStatus;t&&(this.calendar=e,this.cale.setHoverMultiple(this.calendar.fullDate),this.weeks=this.cale.weeks,this.firstEnter&&(this.$emit("firstEnterCale",this.cale.multipleStatus),this.firstEnter=!1))},rangeWithinMonth(e,t){const[a,n]=e.split("-"),[o,i]=t.split("-");return a===o&&n===i},maskClick(){this.close(),this.$emit("maskClose")},clearCalender(){this.range?(this.timeRange.startTime="",this.timeRange.endTime="",this.tempRange.before="",this.tempRange.after="",this.cale.multipleStatus.before="",this.cale.multipleStatus.after="",this.cale.multipleStatus.data=[],this.cale.lastHover=!1):(this.time="",this.tempSingleDate=""),this.calendar.fullDate="",this.setDate(new Date)},bindDateChange(e){const t=e.detail.value+"-1";this.setDate(t)},init(e){if(this.cale&&(this.cale.setDate(e||new Date),this.weeks=this.cale.weeks,this.nowDate=this.cale.getInfo(e),this.calendar={...this.nowDate},!e&&(this.calendar.fullDate="",this.defaultValue&&!this.range))){const e=new Date(this.defaultValue),t=Bs(e),a=e.getFullYear(),n=e.getMonth()+1,o=e.getDate(),i=e.getDay();this.calendar={fullDate:t,year:a,month:n,date:o,day:i},this.tempSingleDate=t,this.time=Ps(e,this.hideSecond)}},open(){this.clearDate&&!this.insert&&(this.cale.cleanMultipleStatus(),this.init(this.date)),this.show=!0,this.$nextTick((()=>{setTimeout((()=>{this.aniMaskShow=!0}),50)}))},close(){this.aniMaskShow=!1,this.$nextTick((()=>{setTimeout((()=>{this.show=!1,this.$emit("close")}),300)}))},confirm(){this.setEmit("confirm"),this.close()},change(e){(this.insert||e)&&this.setEmit("change")},monthSwitch(){let{year:e,month:t}=this.nowDate;this.$emit("monthSwitch",{year:e,month:Number(t)})},setEmit(e){this.range||(this.calendar.fullDate||(this.calendar=this.cale.getInfo(new Date),this.tempSingleDate=this.calendar.fullDate),this.hasTime&&!this.time&&(this.time=Ps(new Date,this.hideSecond)));let{year:t,month:a,date:n,fullDate:o,extraInfo:i}=this.calendar;this.$emit(e,{range:this.cale.multipleStatus,year:t,month:a,date:n,time:this.time,timeRange:this.timeRange,fulldate:o,extraInfo:i||{}})},choiceDate(e){if(e.disable)return;this.calendar=e,this.calendar.userChecked=!0,this.cale.setMultiple(this.calendar.fullDate,!0),this.weeks=this.cale.weeks,this.tempSingleDate=this.calendar.fullDate;const t=new Date(this.cale.multipleStatus.before).getTime(),a=new Date(this.cale.multipleStatus.after).getTime();t>a&&a?(this.tempRange.before=this.cale.multipleStatus.after,this.tempRange.after=this.cale.multipleStatus.before):(this.tempRange.before=this.cale.multipleStatus.before,this.tempRange.after=this.cale.multipleStatus.after),this.change(!0)},changeMonth(e){let t;"pre"===e?t=this.cale.getPreMonthObj(this.nowDate.fullDate).fullDate:"next"===e&&(t=this.cale.getNextMonthObj(this.nowDate.fullDate).fullDate),this.setDate(t),this.monthSwitch()},setDate(e){this.cale.setDate(e),this.weeks=this.cale.weeks,this.nowDate=this.cale.getInfo(e)}}};const Xs={name:"UniDatetimePicker",options:{virtualHost:!0},components:{Calendar:ie(Zs,[["render",function(t,a,n,o,r,s){const l=e.resolveComponent("calendar-item"),c=e.resolveComponent("time-picker"),u=i(e.resolveDynamicComponent("uni-icons"),re);return e.openBlock(),e.createElementBlock("view",{class:"uni-calendar",onMouseleave:a[9]||(a[9]=(...e)=>s.leaveCale&&s.leaveCale(...e))},[!n.insert&&r.show?(e.openBlock(),e.createElementBlock("view",{key:0,class:e.normalizeClass(["uni-calendar__mask",{"uni-calendar--mask-show":r.aniMaskShow}]),onClick:a[0]||(a[0]=(...e)=>s.maskClick&&s.maskClick(...e))},null,2)):e.createCommentVNode("",!0),n.insert||r.show?(e.openBlock(),e.createElementBlock("view",{key:1,class:e.normalizeClass(["uni-calendar__content",{"uni-calendar--fixed":!n.insert,"uni-calendar--ani-show":r.aniMaskShow,"uni-calendar__content-mobile":r.aniMaskShow}])},[e.createElementVNode("view",{class:e.normalizeClass(["uni-calendar__header",{"uni-calendar__header-mobile":!n.insert}])},[e.createElementVNode("view",{class:"uni-calendar__header-btn-box",onClick:a[1]||(a[1]=e.withModifiers((e=>s.changeMonth("pre")),["stop"]))},[e.createElementVNode("view",{class:"uni-calendar__header-btn uni-calendar--left"})]),e.createElementVNode("picker",{mode:"date",value:n.date,fields:"month",onChange:a[2]||(a[2]=(...e)=>s.bindDateChange&&s.bindDateChange(...e))},[e.createElementVNode("text",{class:"uni-calendar__header-text"},e.toDisplayString((r.nowDate.year||"")+s.yearText+(r.nowDate.month||"")+s.monthText),1)],40,["value"]),e.createElementVNode("view",{class:"uni-calendar__header-btn-box",onClick:a[3]||(a[3]=e.withModifiers((e=>s.changeMonth("next")),["stop"]))},[e.createElementVNode("view",{class:"uni-calendar__header-btn uni-calendar--right"})]),n.insert?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("view",{key:0,class:"dialog-close",onClick:a[4]||(a[4]=(...e)=>s.maskClick&&s.maskClick(...e))},[e.createElementVNode("view",{class:"dialog-close-plus","data-id":"close"}),e.createElementVNode("view",{class:"dialog-close-plus dialog-close-rotate","data-id":"close"})]))],2),e.createElementVNode("view",{class:"uni-calendar__box"},[n.showMonth?(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-calendar__box-bg"},[e.createElementVNode("text",{class:"uni-calendar__box-bg-text"},e.toDisplayString(r.nowDate.month),1)])):e.createCommentVNode("",!0),e.createElementVNode("view",{class:"uni-calendar__weeks",style:{"padding-bottom":"7px"}},[e.createElementVNode("view",{class:"uni-calendar__weeks-day"},[e.createElementVNode("text",{class:"uni-calendar__weeks-day-text"},e.toDisplayString(s.SUNText),1)]),e.createElementVNode("view",{class:"uni-calendar__weeks-day"},[e.createElementVNode("text",{class:"uni-calendar__weeks-day-text"},e.toDisplayString(s.MONText),1)]),e.createElementVNode("view",{class:"uni-calendar__weeks-day"},[e.createElementVNode("text",{class:"uni-calendar__weeks-day-text"},e.toDisplayString(s.TUEText),1)]),e.createElementVNode("view",{class:"uni-calendar__weeks-day"},[e.createElementVNode("text",{class:"uni-calendar__weeks-day-text"},e.toDisplayString(s.WEDText),1)]),e.createElementVNode("view",{class:"uni-calendar__weeks-day"},[e.createElementVNode("text",{class:"uni-calendar__weeks-day-text"},e.toDisplayString(s.THUText),1)]),e.createElementVNode("view",{class:"uni-calendar__weeks-day"},[e.createElementVNode("text",{class:"uni-calendar__weeks-day-text"},e.toDisplayString(s.FRIText),1)]),e.createElementVNode("view",{class:"uni-calendar__weeks-day"},[e.createElementVNode("text",{class:"uni-calendar__weeks-day-text"},e.toDisplayString(s.SATText),1)])]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.weeks,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"uni-calendar__weeks",key:a},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"uni-calendar__weeks-item",key:a},[e.createVNode(l,{class:"uni-calendar-item--hook",weeks:t,calendar:r.calendar,selected:n.selected,checkHover:n.range,onChange:s.choiceDate,onHandleMouse:s.handleMouse},null,8,["weeks","calendar","selected","checkHover","onChange","onHandleMouse"])])))),128))])))),128))]),n.insert||n.range||!n.hasTime?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-date-changed uni-calendar--fixed-top",style:{padding:"0 80px"}},[e.createElementVNode("view",{class:"uni-date-changed--time-date"},e.toDisplayString(r.tempSingleDate?r.tempSingleDate:s.selectDateText),1),e.createVNode(c,{type:"time",start:s.timepickerStartTime,end:s.timepickerEndTime,modelValue:r.time,"onUpdate:modelValue":a[5]||(a[5]=e=>r.time=e),disabled:!r.tempSingleDate,border:!1,"hide-second":n.hideSecond,class:"time-picker-style"},null,8,["start","end","modelValue","disabled","hide-second"])])),!n.insert&&n.range&&n.hasTime?(e.openBlock(),e.createElementBlock("view",{key:1,class:"uni-date-changed uni-calendar--fixed-top"},[e.createElementVNode("view",{class:"uni-date-changed--time-start"},[e.createElementVNode("view",{class:"uni-date-changed--time-date"},e.toDisplayString(r.tempRange.before?r.tempRange.before:s.startDateText),1),e.createVNode(c,{type:"time",start:s.timepickerStartTime,modelValue:r.timeRange.startTime,"onUpdate:modelValue":a[6]||(a[6]=e=>r.timeRange.startTime=e),border:!1,"hide-second":n.hideSecond,disabled:!r.tempRange.before,class:"time-picker-style"},null,8,["start","modelValue","hide-second","disabled"])]),e.createElementVNode("view",{style:{"line-height":"50px"}},[e.createVNode(u,{type:"arrowthinright",color:"#999"})]),e.createElementVNode("view",{class:"uni-date-changed--time-end"},[e.createElementVNode("view",{class:"uni-date-changed--time-date"},e.toDisplayString(r.tempRange.after?r.tempRange.after:s.endDateText),1),e.createVNode(c,{type:"time",end:s.timepickerEndTime,modelValue:r.timeRange.endTime,"onUpdate:modelValue":a[7]||(a[7]=e=>r.timeRange.endTime=e),border:!1,"hide-second":n.hideSecond,disabled:!r.tempRange.after,class:"time-picker-style"},null,8,["end","modelValue","hide-second","disabled"])])])):e.createCommentVNode("",!0),n.insert?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("view",{key:2,class:"uni-date-changed uni-date-btn--ok"},[e.createElementVNode("view",{class:"uni-datetime-picker--btn",onClick:a[8]||(a[8]=(...e)=>s.confirm&&s.confirm(...e))},e.toDisplayString(s.confirmText),1)]))],2)):e.createCommentVNode("",!0)],32)}],["__scopeId","data-v-f219fc6e"]]),TimePicker:Ws},data:()=>({isRange:!1,hasTime:!1,displayValue:"",inputDate:"",calendarDate:"",pickerTime:"",calendarRange:{startDate:"",startTime:"",endDate:"",endTime:""},displayRangeValue:{startDate:"",endDate:""},tempRange:{startDate:"",startTime:"",endDate:"",endTime:""},startMultipleStatus:{before:"",after:"",data:[],fulldate:""},endMultipleStatus:{before:"",after:"",data:[],fulldate:""},pickerVisible:!1,pickerPositionStyle:null,isEmitValue:!1,isPhone:!1,isFirstShow:!0,i18nT:()=>{}}),props:{type:{type:String,default:"datetime"},value:{type:[String,Number,Array,Date],default:""},modelValue:{type:[String,Number,Array,Date],default:""},start:{type:[Number,String],default:""},end:{type:[Number,String],default:""},returnType:{type:String,default:"string"},placeholder:{type:String,default:""},startPlaceholder:{type:String,default:""},endPlaceholder:{type:String,default:""},rangeSeparator:{type:String,default:"-"},border:{type:[Boolean],default:!0},disabled:{type:[Boolean],default:!1},clearIcon:{type:[Boolean],default:!0},hideSecond:{type:[Boolean],default:!1},defaultValue:{type:[String,Object,Array],default:""}},watch:{type:{immediate:!0,handler(e){this.hasTime=-1!==e.indexOf("time"),this.isRange=-1!==e.indexOf("range")}},modelValue:{immediate:!0,handler(e){this.isEmitValue?this.isEmitValue=!1:this.initPicker(e)}},start:{immediate:!0,handler(e){e&&(this.calendarRange.startDate=Bs(e),this.hasTime&&(this.calendarRange.startTime=Ps(e)))}},end:{immediate:!0,handler(e){e&&(this.calendarRange.endDate=Bs(e),this.hasTime&&(this.calendarRange.endTime=Ps(e,this.hideSecond)))}}},computed:{timepickerStartTime(){return(this.isRange?this.tempRange.startDate:this.inputDate)===this.calendarRange.startDate?this.calendarRange.startTime:""},timepickerEndTime(){return(this.isRange?this.tempRange.endDate:this.inputDate)===this.calendarRange.endDate?this.calendarRange.endTime:""},mobileCalendarTime(){const e={start:this.tempRange.startTime,end:this.tempRange.endTime};return this.isRange?e:this.pickerTime},mobSelectableTime(){return{start:this.calendarRange.startTime,end:this.calendarRange.endTime}},datePopupWidth(){return this.isRange?653:301},singlePlaceholderText(){return this.placeholder||("date"===this.type?this.selectDateText:this.selectDateTimeText)},startPlaceholderText(){return this.startPlaceholder||this.startDateText},endPlaceholderText(){return this.endPlaceholder||this.endDateText},selectDateText(){return this.i18nT("uni-datetime-picker.selectDate")},selectDateTimeText(){return this.i18nT("uni-datetime-picker.selectDateTime")},selectTimeText(){return this.i18nT("uni-datetime-picker.selectTime")},startDateText(){return this.startPlaceholder||this.i18nT("uni-datetime-picker.startDate")},startTimeText(){return this.i18nT("uni-datetime-picker.startTime")},endDateText(){return this.endPlaceholder||this.i18nT("uni-datetime-picker.endDate")},endTimeText(){return this.i18nT("uni-datetime-picker.endTime")},okText(){return this.i18nT("uni-datetime-picker.ok")},clearText(){return this.i18nT("uni-datetime-picker.clear")},showClearIcon(){return this.clearIcon&&!this.disabled&&(this.displayValue||this.displayRangeValue.startDate&&this.displayRangeValue.endDate)}},created(){this.initI18nT(),this.platform()},methods:{initI18nT(){const e=ye(js);this.i18nT=e.t},initPicker(e){if(!e&&!this.defaultValue||Array.isArray(e)&&!e.length)this.$nextTick((()=>{this.clear(!1)}));else if(Array.isArray(e)||this.isRange){const[t,a]=e;if(!t&&!a)return;const n=Bs(t),o=Ps(t,this.hideSecond),i=Bs(a),r=Ps(a,this.hideSecond),s=n,l=i;this.displayRangeValue.startDate=this.tempRange.startDate=s,this.displayRangeValue.endDate=this.tempRange.endDate=l,this.hasTime&&(this.displayRangeValue.startDate=`${n} ${o}`,this.displayRangeValue.endDate=`${i} ${r}`,this.tempRange.startTime=o,this.tempRange.endTime=r);const c={before:n,after:i};this.startMultipleStatus=Object.assign({},this.startMultipleStatus,c,{which:"right"}),this.endMultipleStatus=Object.assign({},this.endMultipleStatus,c,{which:"left"})}else e?(this.displayValue=this.inputDate=this.calendarDate=Bs(e),this.hasTime&&(this.pickerTime=Ps(e,this.hideSecond),this.displayValue=`${this.displayValue} ${this.pickerTime}`)):this.defaultValue&&(this.inputDate=this.calendarDate=Bs(this.defaultValue),this.hasTime&&(this.pickerTime=Ps(this.defaultValue,this.hideSecond)))},updateLeftCale(e){const t=this.$refs.left;t.cale.setHoverMultiple(e.after),t.setDate(this.$refs.left.nowDate.fullDate)},updateRightCale(e){const t=this.$refs.right;t.cale.setHoverMultiple(e.after),t.setDate(this.$refs.right.nowDate.fullDate)},platform(){if("undefined"!=typeof navigator)return void(this.isPhone=-1!==navigator.userAgent.toLowerCase().indexOf("mobile"));const{windowWidth:e}=uni.getSystemInfoSync();this.isPhone=e<=500,this.windowWidth=e},show(){if(this.$emit("show"),this.disabled)return;if(this.platform(),this.isPhone)return void setTimeout((()=>{this.$refs.mobile.open()}),0);this.pickerPositionStyle={top:"10px"};uni.createSelectorQuery().in(this).select(".uni-date-editor").boundingClientRect((e=>{this.windowWidth-e.left<this.datePopupWidth&&(this.pickerPositionStyle.right=0)})).exec(),setTimeout((()=>{if(this.pickerVisible=!this.pickerVisible,!this.isPhone&&this.isRange&&this.isFirstShow){this.isFirstShow=!1;const{startDate:e,endDate:t}=this.calendarRange;e&&t?this.diffDate(e,t)<30&&this.$refs.right.changeMonth("pre"):this.isPhone&&(this.$refs.right.cale.lastHover=!1)}}),50)},close(){setTimeout((()=>{this.pickerVisible=!1,this.$emit("maskClick",this.value),this.$refs.mobile&&this.$refs.mobile.close()}),20)},setEmit(e){"timestamp"!==this.returnType&&"date"!==this.returnType||(Array.isArray(e)?(this.hasTime||(e[0]=e[0]+" 00:00:00",e[1]=e[1]+" 00:00:00"),e[0]=this.createTimestamp(e[0]),e[1]=this.createTimestamp(e[1]),"date"===this.returnType&&(e[0]=new Date(e[0]),e[1]=new Date(e[1]))):(this.hasTime||(e+=" 00:00:00"),e=this.createTimestamp(e),"date"===this.returnType&&(e=new Date(e)))),this.$emit("update:modelValue",e),this.$emit("input",e),this.$emit("change",e),this.isEmitValue=!0},createTimestamp:e=>(e=Hs(e),Date.parse(new Date(e))),singleChange(e){this.calendarDate=this.inputDate=e.fulldate,this.hasTime||this.confirmSingleChange()},confirmSingleChange(){if(!qs(this.inputDate)){const e=new Date;this.calendarDate=this.inputDate=Bs(e),this.pickerTime=Ps(e,this.hideSecond)}let e,t,a=!1;if(this.start){let n=this.start;"number"==typeof this.start&&(n=Os(this.start,this.hideSecond)),[e,t]=n.split(" "),this.start&&!Fs(e,this.inputDate)&&(a=!0,this.inputDate=e)}let n,o,i=!1;if(this.end){let e=this.end;"number"==typeof this.end&&(e=Os(this.end,this.hideSecond)),[n,o]=e.split(" "),this.end&&!Fs(this.inputDate,n)&&(i=!0,this.inputDate=n)}this.hasTime?(a&&(this.pickerTime=t||Gs(this.hideSecond)),i&&(this.pickerTime=o||Gs(this.hideSecond)),this.pickerTime||(this.pickerTime=Ps(Date.now(),this.hideSecond)),this.displayValue=`${this.inputDate} ${this.pickerTime}`):this.displayValue=this.inputDate,this.setEmit(this.displayValue),this.pickerVisible=!1},leftChange(e){const{before:t,after:a}=e.range;this.rangeChange(t,a);const n={before:e.range.before,after:e.range.after,data:e.range.data,fulldate:e.fulldate};this.startMultipleStatus=Object.assign({},this.startMultipleStatus,n),this.$emit("calendarClick",e)},rightChange(e){const{before:t,after:a}=e.range;this.rangeChange(t,a);const n={before:e.range.before,after:e.range.after,data:e.range.data,fulldate:e.fulldate};this.endMultipleStatus=Object.assign({},this.endMultipleStatus,n),this.$emit("calendarClick",e)},mobileChange(e){if(this.isRange){const{before:t,after:a}=e.range;if(!t)return;if(this.handleStartAndEnd(t,a,!0),this.hasTime){const{startTime:t,endTime:a}=e.timeRange;this.tempRange.startTime=t,this.tempRange.endTime=a}this.confirmRangeChange()}else this.hasTime?this.displayValue=e.fulldate+" "+e.time:this.displayValue=e.fulldate,this.setEmit(this.displayValue),this.calendarDate=this.displayValue;this.$refs.mobile.close()},rangeChange(e,t){e&&t&&(this.handleStartAndEnd(e,t,!0),this.hasTime||this.confirmRangeChange())},confirmRangeChange(){if(!this.tempRange.startDate||!this.tempRange.endDate)return void(this.pickerVisible=!1);let e,t;qs(this.tempRange.startDate)||(this.tempRange.startDate=Bs(Date.now())),qs(this.tempRange.endDate)||(this.tempRange.endDate=Bs(Date.now()));let a,n,o=!1,i=!1,r=this.tempRange.startDate,s=this.tempRange.endDate;if(this.hasTime&&(r=`${this.tempRange.startDate} ${this.tempRange.startTime}`,s=`${this.tempRange.endDate} ${this.tempRange.endTime}`),this.start){let e=this.start;"number"==typeof this.start&&(e=Os(this.start,this.hideSecond)),[a,n]=e.split(" "),this.start&&!Fs(this.start,r)&&(o=!0,this.tempRange.startDate=a),this.start&&!Fs(this.start,s)&&(i=!0,this.tempRange.endDate=a)}let l,c,u=!1,d=!1;if(this.end){let e=this.end;"number"==typeof this.end&&(e=Os(this.end,this.hideSecond)),[l,c]=e.split(" "),this.end&&!Fs(r,this.end)&&(u=!0,this.tempRange.startDate=l),this.end&&!Fs(s,this.end)&&(d=!0,this.tempRange.endDate=l)}this.hasTime?(o?this.tempRange.startTime=n||Gs(this.hideSecond):u&&(this.tempRange.startTime=c||Gs(this.hideSecond)),this.tempRange.startTime||(this.tempRange.startTime=Ps(Date.now(),this.hideSecond)),i?this.tempRange.endTime=n||Gs(this.hideSecond):d&&(this.tempRange.endTime=c||Gs(this.hideSecond)),this.tempRange.endTime||(this.tempRange.endTime=Ps(Date.now(),this.hideSecond)),e=this.displayRangeValue.startDate=`${this.tempRange.startDate} ${this.tempRange.startTime}`,t=this.displayRangeValue.endDate=`${this.tempRange.endDate} ${this.tempRange.endTime}`):(e=this.displayRangeValue.startDate=this.tempRange.startDate,t=this.displayRangeValue.endDate=this.tempRange.endDate),Fs(e,t)||([e,t]=[t,e]),this.displayRangeValue.startDate=e,this.displayRangeValue.endDate=t;const m=[e,t];this.setEmit(m),this.pickerVisible=!1},handleStartAndEnd(e,t,a=!1){if(!e)return;t||(t=e);const n=a?"tempRange":"range",o=Fs(e,t);this[n].startDate=o?e:t,this[n].endDate=o?t:e},dateCompare:(e,t)=>(e=new Date(e.replace("-","/").replace("-","/")))<=(t=new Date(t.replace("-","/").replace("-","/"))),diffDate(e,t){e=new Date(e.replace("-","/").replace("-","/"));const a=((t=new Date(t.replace("-","/").replace("-","/")))-e)/864e5;return Math.abs(a)},clear(e=!0){this.isRange?(this.displayRangeValue.startDate="",this.displayRangeValue.endDate="",this.tempRange.startDate="",this.tempRange.startTime="",this.tempRange.endDate="",this.tempRange.endTime="",this.isPhone?this.$refs.mobile&&this.$refs.mobile.clearCalender():(this.$refs.left&&this.$refs.left.clearCalender(),this.$refs.right&&this.$refs.right.clearCalender(),this.$refs.right&&this.$refs.right.changeMonth("next")),e&&(this.$emit("change",[]),this.$emit("input",[]),this.$emit("update:modelValue",[]))):(this.displayValue="",this.inputDate="",this.pickerTime="",this.isPhone?this.$refs.mobile&&this.$refs.mobile.clearCalender():this.$refs.pcSingle&&this.$refs.pcSingle.clearCalender(),e&&(this.$emit("change",""),this.$emit("input",""),this.$emit("update:modelValue","")))},calendarClick(e){this.$emit("calendarClick",e)}}};const Qs=ie(Xs,[["render",function(t,a,n,o,r,s){const l=i(e.resolveDynamicComponent("uni-icons"),re),c=e.resolveComponent("time-picker"),u=e.resolveComponent("Calendar");return e.openBlock(),e.createElementBlock("view",{class:"uni-date"},[e.createElementVNode("view",{class:"uni-date-editor",onClick:a[1]||(a[1]=(...e)=>s.show&&s.show(...e))},[e.renderSlot(t.$slots,"default",{},(()=>[e.createElementVNode("view",{class:e.normalizeClass(["uni-date-editor--x",{"uni-date-editor--x__disabled":n.disabled,"uni-date-x--border":n.border}])},[r.isRange?(e.openBlock(),e.createElementBlock("view",{key:1,class:"uni-date-x uni-date-range"},[e.createVNode(l,{class:"icon-calendar",type:"calendar",color:"#c0c4cc",size:"22"}),e.createElementVNode("view",{class:"uni-date__x-input text-center"},e.toDisplayString(r.displayRangeValue.startDate||s.startPlaceholderText),1),e.createElementVNode("view",{class:"range-separator"},e.toDisplayString(n.rangeSeparator),1),e.createElementVNode("view",{class:"uni-date__x-input text-center"},e.toDisplayString(r.displayRangeValue.endDate||s.endPlaceholderText),1)])):(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-date-x uni-date-single"},[e.createVNode(l,{class:"icon-calendar",type:"calendar",color:"#c0c4cc",size:"22"}),e.createElementVNode("view",{class:"uni-date__x-input"},e.toDisplayString(r.displayValue||s.singlePlaceholderText),1)])),s.showClearIcon?(e.openBlock(),e.createElementBlock("view",{key:2,class:"uni-date__icon-clear",onClick:a[0]||(a[0]=e.withModifiers(((...e)=>s.clear&&s.clear(...e)),["stop"]))},[e.createVNode(l,{type:"clear",color:"#c0c4cc",size:"22"})])):e.createCommentVNode("",!0)],2)]),!0)]),e.withDirectives(e.createElementVNode("view",{class:"uni-date-mask--pc",onClick:a[2]||(a[2]=(...e)=>s.close&&s.close(...e))},null,512),[[e.vShow,r.pickerVisible]]),r.isPhone?e.createCommentVNode("",!0):e.withDirectives((e.openBlock(),e.createElementBlock("view",{key:0,ref:"datePicker",class:"uni-date-picker__container"},[r.isRange?(e.openBlock(),e.createElementBlock("view",{key:1,class:"uni-date-range--x",style:e.normalizeStyle(r.pickerPositionStyle)},[e.createElementVNode("view",{class:"uni-popper__arrow"}),r.hasTime?(e.openBlock(),e.createElementBlock("view",{key:0,class:"popup-x-header uni-date-changed"},[e.createElementVNode("view",{class:"popup-x-header--datetime"},[e.withDirectives(e.createElementVNode("input",{class:"uni-date__input uni-date-range__input",type:"text","onUpdate:modelValue":a[7]||(a[7]=e=>r.tempRange.startDate=e),placeholder:s.startDateText},null,8,["placeholder"]),[[e.vModelText,r.tempRange.startDate]]),e.createVNode(c,{type:"time",modelValue:r.tempRange.startTime,"onUpdate:modelValue":a[9]||(a[9]=e=>r.tempRange.startTime=e),start:s.timepickerStartTime,border:!1,disabled:!r.tempRange.startDate,hideSecond:n.hideSecond},{default:e.withCtx((()=>[e.withDirectives(e.createElementVNode("input",{class:"uni-date__input uni-date-range__input",type:"text","onUpdate:modelValue":a[8]||(a[8]=e=>r.tempRange.startTime=e),placeholder:s.startTimeText,disabled:!r.tempRange.startDate},null,8,["placeholder","disabled"]),[[e.vModelText,r.tempRange.startTime]])])),_:1},8,["modelValue","start","disabled","hideSecond"])]),e.createVNode(l,{type:"arrowthinright",color:"#999",style:{"line-height":"40px"}}),e.createElementVNode("view",{class:"popup-x-header--datetime"},[e.withDirectives(e.createElementVNode("input",{class:"uni-date__input uni-date-range__input",type:"text","onUpdate:modelValue":a[10]||(a[10]=e=>r.tempRange.endDate=e),placeholder:s.endDateText},null,8,["placeholder"]),[[e.vModelText,r.tempRange.endDate]]),e.createVNode(c,{type:"time",modelValue:r.tempRange.endTime,"onUpdate:modelValue":a[12]||(a[12]=e=>r.tempRange.endTime=e),end:s.timepickerEndTime,border:!1,disabled:!r.tempRange.endDate,hideSecond:n.hideSecond},{default:e.withCtx((()=>[e.withDirectives(e.createElementVNode("input",{class:"uni-date__input uni-date-range__input",type:"text","onUpdate:modelValue":a[11]||(a[11]=e=>r.tempRange.endTime=e),placeholder:s.endTimeText,disabled:!r.tempRange.endDate},null,8,["placeholder","disabled"]),[[e.vModelText,r.tempRange.endTime]])])),_:1},8,["modelValue","end","disabled","hideSecond"])])])):e.createCommentVNode("",!0),e.createElementVNode("view",{class:"popup-x-body"},[e.createVNode(u,{ref:"left",showMonth:!1,"start-date":r.calendarRange.startDate,"end-date":r.calendarRange.endDate,range:!0,pleStatus:r.endMultipleStatus,onChange:s.leftChange,onFirstEnterCale:s.updateRightCale,style:{padding:"0 8px"}},null,8,["start-date","end-date","pleStatus","onChange","onFirstEnterCale"]),e.createVNode(u,{ref:"right",showMonth:!1,"start-date":r.calendarRange.startDate,"end-date":r.calendarRange.endDate,range:!0,onChange:s.rightChange,pleStatus:r.startMultipleStatus,onFirstEnterCale:s.updateLeftCale,style:{padding:"0 8px","border-left":"1px solid #F1F1F1"}},null,8,["start-date","end-date","onChange","pleStatus","onFirstEnterCale"])]),r.hasTime?(e.openBlock(),e.createElementBlock("view",{key:1,class:"popup-x-footer"},[e.createElementVNode("text",{onClick:a[13]||(a[13]=(...e)=>s.clear&&s.clear(...e))},e.toDisplayString(s.clearText),1),e.createElementVNode("text",{class:"confirm-text",onClick:a[14]||(a[14]=(...e)=>s.confirmRangeChange&&s.confirmRangeChange(...e))},e.toDisplayString(s.okText),1)])):e.createCommentVNode("",!0)],4)):(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-date-single--x",style:e.normalizeStyle(r.pickerPositionStyle)},[e.createElementVNode("view",{class:"uni-popper__arrow"}),r.hasTime?(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-date-changed popup-x-header"},[e.withDirectives(e.createElementVNode("input",{class:"uni-date__input text-center",type:"text","onUpdate:modelValue":a[3]||(a[3]=e=>r.inputDate=e),placeholder:s.selectDateText},null,8,["placeholder"]),[[e.vModelText,r.inputDate]]),e.createVNode(c,{type:"time",modelValue:r.pickerTime,"onUpdate:modelValue":a[5]||(a[5]=e=>r.pickerTime=e),border:!1,disabled:!r.inputDate,start:s.timepickerStartTime,end:s.timepickerEndTime,hideSecond:n.hideSecond,style:{width:"100%"}},{default:e.withCtx((()=>[e.withDirectives(e.createElementVNode("input",{class:"uni-date__input text-center",type:"text","onUpdate:modelValue":a[4]||(a[4]=e=>r.pickerTime=e),placeholder:s.selectTimeText,disabled:!r.inputDate},null,8,["placeholder","disabled"]),[[e.vModelText,r.pickerTime]])])),_:1},8,["modelValue","disabled","start","end","hideSecond"])])):e.createCommentVNode("",!0),e.createVNode(u,{ref:"pcSingle",showMonth:!1,"start-date":r.calendarRange.startDate,"end-date":r.calendarRange.endDate,date:r.calendarDate,onChange:s.singleChange,"default-value":n.defaultValue,style:{padding:"0 8px"}},null,8,["start-date","end-date","date","onChange","default-value"]),r.hasTime?(e.openBlock(),e.createElementBlock("view",{key:1,class:"popup-x-footer"},[e.createElementVNode("text",{class:"confirm-text",onClick:a[6]||(a[6]=(...e)=>s.confirmSingleChange&&s.confirmSingleChange(...e))},e.toDisplayString(s.okText),1)])):e.createCommentVNode("",!0)],4))],512)),[[e.vShow,r.pickerVisible]]),r.isPhone?(e.openBlock(),e.createBlock(u,{key:1,ref:"mobile",clearDate:!1,date:r.calendarDate,defTime:s.mobileCalendarTime,"start-date":r.calendarRange.startDate,"end-date":r.calendarRange.endDate,selectableTimes:s.mobSelectableTime,startPlaceholder:n.startPlaceholder,endPlaceholder:n.endPlaceholder,"default-value":n.defaultValue,pleStatus:r.endMultipleStatus,showMonth:!1,range:r.isRange,hasTime:r.hasTime,insert:!1,hideSecond:n.hideSecond,onConfirm:s.mobileChange,onMaskClose:s.close,onChange:s.calendarClick},null,8,["date","defTime","start-date","end-date","selectableTimes","startPlaceholder","endPlaceholder","default-value","pleStatus","range","hasTime","hideSecond","onConfirm","onMaskClose","onChange"])):e.createCommentVNode("",!0)])}],["__scopeId","data-v-1d8b7c51"]]),el={__name:"info",setup(t){e.ref(""),e.ref("");const a=e.ref({});e.ref("");const n=e.ref(["男","女"]);e.ref("");const r=e.ref(["已婚","未婚","离异"]);e.ref(null),e.ref(null);const s=()=>{uni.chooseImage({count:1,success:function(e){Vs(baseURL+"/api/common/upload",e.tempFilePaths[0]).then((e=>{o("log","at pages/forum/my/info.vue:132",e),a.value.avatar=e.data.url}))}})},l=()=>{uni.navigateBack({delta:1})},c=e=>{a.value.marriage=r.value[e.detail.value]},u=e=>{o("log","at pages/forum/my/info.vue:153",e),a.value.gender=n.value[e.detail.value]},d=async()=>{o("log","at pages/forum/my/info.vue:173",a.value.avatar);let e=await kr(a.value);uni.showToast({title:"修改成功",icon:"none",duration:2e3}),uni.navigateBack(),o("log","at pages/forum/my/info.vue:183",e)};return e.onMounted((()=>{(async()=>{let e=await R();a.value=e.data})()})),(t,o)=>{const m=i(e.resolveDynamicComponent("uni-icons"),re),p=i(e.resolveDynamicComponent("uni-nav-bar"),Di),h=i(e.resolveDynamicComponent("uni-datetime-picker"),Qs);return e.openBlock(),e.createElementBlock("view",{class:"user-info-box"},[e.createVNode(p,{backgroundColor:"#F4F6F8",border:!1,title:"个人信息",class:"header-bar",statusBar:!0,fixed:""},{left:e.withCtx((()=>[e.createVNode(m,{type:"left",size:"24",onClick:l})])),right:e.withCtx((()=>[])),_:1}),e.createElementVNode("view",{class:"user-info-content"},[e.createElementVNode("view",{class:"info-content-1"},[e.createElementVNode("view",{class:"info-content-list"},[e.createElementVNode("view",{class:"content-item auture",onClick:s},[e.createElementVNode("view",{class:"label"},"头像"),e.createElementVNode("view",{class:"content"},[a.value.avatar?(e.openBlock(),e.createElementBlock("image",{key:0,src:a.value.avatar,class:"pic"},null,8,["src"])):(e.openBlock(),e.createElementBlock("text",{key:1,class:"txt"},[e.createTextVNode("请选择"),e.createVNode(m,{type:"right",size:"14",color:"rgba(0,0,0,0.3)",class:"icon"})]))])]),e.createElementVNode("view",{class:"content-item"},[e.createElementVNode("view",{class:"label"},"昵称"),e.createElementVNode("view",{class:"content"},[e.createElementVNode("text",{class:"txt"},[e.withDirectives(e.createElementVNode("input",{type:"text",style:{"text-align":"end","font-size":"28rpx"},"onUpdate:modelValue":o[0]||(o[0]=e=>a.value.realName=e)},null,512),[[e.vModelText,a.value.realName]])])])]),e.createElementVNode("view",{class:"content-item"},[e.createElementVNode("view",{class:"label"},"生日"),e.createElementVNode("view",{class:"content"},[e.createVNode(h,{type:"date","clear-icon":!1,modelValue:a.value.birthday,"onUpdate:modelValue":o[1]||(o[1]=e=>a.value.birthday=e)},{default:e.withCtx((()=>[e.createElementVNode("text",{class:"txt"},[e.createTextVNode(e.toDisplayString(a.value.birthday||"请选择"),1),e.createVNode(m,{type:"right",size:"14",color:"rgba(0,0,0,0.3)",class:"icon"})])])),_:1},8,["modelValue"])])]),e.createElementVNode("view",{class:"content-item"},[e.createElementVNode("view",{class:"label"},"性别"),e.createElementVNode("view",{class:"content"},[e.createElementVNode("picker",{range:n.value,onChange:u,mode:"selector"},[e.createElementVNode("text",{class:"txt"},[e.createTextVNode(e.toDisplayString(a.value.gender),1),e.createVNode(m,{type:"right",size:"14",color:"rgba(0,0,0,0.3)",class:"icon"})])],40,["range"])])])])]),e.createElementVNode("view",{class:"info-content-2"},[e.createElementVNode("view",{class:"info-content-list"},[e.createElementVNode("view",{class:"content-item"},[e.createElementVNode("view",{class:"label"},"婚姻状态"),e.createElementVNode("view",{class:"content"},[e.createElementVNode("picker",{range:r.value,onChange:c},[e.createElementVNode("text",{class:"txt"},[e.createTextVNode(e.toDisplayString(null==a.value.marriage?"请选择":a.value.marriage),1),e.createVNode(m,{type:"right",size:"14",color:"rgba(0,0,0,0.3)",class:"icon"})])],40,["range"])])]),e.createElementVNode("view",{class:"content-item profile"},[e.createElementVNode("view",{class:"label"},"简介"),e.createElementVNode("view",{class:"content"},[e.withDirectives(e.createElementVNode("textarea",{placeholder:"请简单介绍一下自己",style:{"text-align":"end","font-size":"28rpx"},"onUpdate:modelValue":o[2]||(o[2]=e=>a.value.introduce=e),class:"profile-content","placeholder-class":"profile-placeholder-content"},null,512),[[e.vModelText,a.value.introduce]])])])])]),e.createElementVNode("view",{style:{margin:"30rpx"}},[e.createElementVNode("button",{type:"primary",onClick:d},"提交")])])])}}},tl=ie(el,[["__scopeId","data-v-8a0a828c"]]),al=ie({__name:"choose-topic",setup(t){e.useCssVars((e=>({"6f9262a0":n.value})));const a=ae(),n=e.ref(a.statusBarHeight+"px"),o=()=>{uni.navigateBack({delta:1})},r=e.ref(1),s=e.ref(1);return(t,a)=>{const n=i(e.resolveDynamicComponent("uni-icons"),re),l=i(e.resolveDynamicComponent("uni-nav-bar"),Di);return e.openBlock(),e.createElementBlock("view",{class:"choose-topic-box"},[e.createVNode(l,{backgroundColor:"#F4F6F8",border:!1,title:"选择话题",class:"header-bar",statusBar:!0,fixed:""},{left:e.withCtx((()=>[e.createVNode(n,{type:"left",size:"24",onClick:o})])),_:1}),e.createElementVNode("view",{class:"choose-topic-content"},[e.createElementVNode("view",{class:"tag-content"},[e.createElementVNode("view",{class:"tag-left"},[e.createElementVNode("scroll-view",{"scroll-y":"true",class:"scroll-content","show-scrollbar":!1},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(20,(t=>e.createElementVNode("view",{class:e.normalizeClass(["tag-item",r.value==t?"active":""]),key:t,onClick:e=>(e=>{r.value!=e&&(r.value=e)})(t)}," 健康 ",10,["onClick"]))),64))])]),e.createElementVNode("view",{class:"tag-right"},[e.createElementVNode("scroll-view",{"scroll-y":"true",class:"scroll-content","show-scrollbar":!1},[e.createElementVNode("view",{class:"tag-right-content"},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(20,(t=>e.createElementVNode("view",{class:e.normalizeClass(["content-item",s.value==t?"active":""]),key:t,onClick:e=>(e=>{s.value!=e&&(s.value=e)})(t)},[e.createElementVNode("view",{class:"topic-image"},[e.createElementVNode("image",{src:"/static/forum/topic-b.png",class:"img"})]),e.createElementVNode("view",{class:"content"},[e.createElementVNode("view",{class:"title"},"潜意识投射测试"),e.createElementVNode("view",{class:"remark"},[e.createElementVNode("text",{class:"num"},"234"),e.createTextVNode("篇内容")])])],10,["onClick"]))),64))])])])])])])}}},[["__scopeId","data-v-21ce20f9"]]),nl=ie({__name:"qaDetail",setup(t){e.useCssVars((e=>({eb79a15e:n.value})));const a=ae(),n=e.ref(a.statusBarHeight+"px");Ar(),e.ref(0);const r=e.ref("");let s=e.ref();const c=e.reactive({listParams:{current:1,size:10,params:{}},list:[]});e.ref([{txt:"推荐",id:1},{txt:"情感",id:2},{txt:"文化",id:3},{txt:"职场",id:4},{txt:"职场",id:5},{txt:"职场",id:6},{txt:"职场",id:7},{txt:"职场",id:7}]);const u=e.ref(),d=e.ref([]),m=()=>{uni.navigateBack({delta:1})},p=e=>{1==e?uni.switchTab({url:"/pages/consult/index"}):uni.navigateTo({url:"/pages/consult/detail"})},h=async()=>{o("log","at pages/forum/index/qaDetail.vue:202","=============================="+s.value);let e=await((e,t={})=>A.post("/api/answer/answer/getAnswerDetail",e,t))({id:s.value});u.value=e.data},v=async()=>{c.listParams.params.articleId=s.value;let e=await((e,t={})=>A.post("/api/comment/comment/getCommentById",e,t))(c.listParams);d.value=e.data.records},g=async()=>{let e=await((e,t={})=>A.post("/api/comment/comment/saveComment",e,t))({content:r.value,articleId:s.value,type:2});r.value="",uni.showToast({title:"发布成功",icon:"none",duration:2e3}),o("log","at pages/forum/index/qaDetail.vue:227",e)};return l((e=>{s.value=e.id,h(),v()})),e.onMounted((()=>{})),(t,a)=>{var n,o;const s=i(e.resolveDynamicComponent("uni-icons"),re),l=i(e.resolveDynamicComponent("uni-nav-bar"),Di),c=i(e.resolveDynamicComponent("uni-easyinput"),Cr);return e.openBlock(),e.createElementBlock("view",{class:"read-article-box"},[e.createElementVNode("view",{class:"header"},[e.createVNode(l,{backgroundColor:"#F4F6F8",border:!1,title:"",class:"header-bar",statusBar:!0,fixed:""},{left:e.withCtx((()=>[e.createVNode(s,{type:"left",size:"24",onClick:m})])),right:e.withCtx((()=>[e.createElementVNode("view",{class:"right"},[e.createVNode(s,{type:"more-filled",size:"24",onClick:m})])])),_:1})]),e.createElementVNode("view",{class:"article-content"},[e.createElementVNode("view",{class:"detail-box"},[e.createElementVNode("view",{class:"title"},e.toDisplayString(null==(n=u.value)?void 0:n.title),1),e.createElementVNode("view",{class:"article-user"},[e.createElementVNode("view",{class:"user"},[e.createElementVNode("view",null,[e.createElementVNode("image",{src:null==u.value.avatar?"@/static/my/profile.png":u.value.avatar,class:"picture"},null,8,["src"])]),e.createElementVNode("view",{class:"name-box"},[e.createElementVNode("view",{class:"name"},e.toDisplayString(u.value.realName),1),e.createElementVNode("view",{class:"auth"},"咨询师 | 认证作家")])]),e.createElementVNode("view",{class:"follow"},[e.createVNode(s,{type:"plusempty",size:"12",color:"#35CA95"}),e.createElementVNode("text",{class:"txt"},"关注")])]),e.createElementVNode("view",{class:"content"},e.toDisplayString(null==(o=u.value)?void 0:o.content),1),e.createElementVNode("view",{class:"date-num"},[e.createElementVNode("view",null,"2025-05-06"),e.createElementVNode("view",{style:{"padding-left":"20rpx"}},"阅读 7876")]),e.createElementVNode("view",{class:"contact"},[e.createTextVNode("文章转载/侵权，请联系邮箱："),e.createElementVNode("text",{class:"txt"},"6757567@163.com")])]),e.createElementVNode("view",{style:{"background-color":"white",margin:"20rpx 30rpx","border-radius":"20rpx",padding:"20rpx"}},[e.createElementVNode("view",{style:{"margin-bottom":"30rpx"}},[e.createElementVNode("text",{style:{"font-size":"42rpx","font-weight":"bold"}},"热门评论")]),d.value.length>0?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(d.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{key:a,style:{"margin-bottom":"20rpx"}},[e.createElementVNode("view",{style:{display:"flex","flex-direction":"row"}},[e.createElementVNode("image",{style:{width:"48rpx",height:"48rpx","border-radius":"24rpx"},src:null==t.avatar?"@/static/my/profile.png":t.avatar},null,8,["src"]),e.createElementVNode("view",{style:{"margin-left":"20rpx",display:"flex","flex-direction":"column"}},[e.createElementVNode("text",{style:{"font-size":"26rpx"}},e.toDisplayString(t.nickname),1),e.createElementVNode("text",{style:{"margin-top":"10rpx","font-size":"28rpx",color:"#666666"}},e.toDisplayString(t.content),1)])])])))),128)):(e.openBlock(),e.createElementBlock("view",{key:1},[e.createElementVNode("view",{style:{"text-align":"center"}},[e.createElementVNode("text",null,"暂无数据")])]))]),e.createElementVNode("view",{class:"hot-psychological-box"},[e.createElementVNode("view",{class:"hot-psychological-header"},[e.createElementVNode("view",{class:"title"},"热门咨询师"),e.createElementVNode("view",{class:"more",onClick:a[0]||(a[0]=e=>p(1))},[e.createTextVNode("更多"),e.createVNode(s,{type:"right",size:"12",color:"rgba(0, 0, 0, 0.5)"})])]),e.createElementVNode("scroll-view",{class:"scroll-view_H","scroll-x":"true","scroll-left":"0","show-scrollbar":!1},[e.createElementVNode("view",{class:"list"},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(10,(t=>e.createVNode(Ji,{class:"list-item",onClick:a[1]||(a[1]=e=>p(2))}))),64))])])]),e.createElementVNode("view",{class:"recommend-article-box"},[e.createElementVNode("view",{class:"recommend-article-header"},[e.createElementVNode("view",{class:"title"},[e.createElementVNode("view",null,"相关阅读")]),e.createElementVNode("view",{class:"more",onClick:a[2]||(a[2]=e=>(e=>{let t="1"==e?"/pages/readArticle/readArticle":"";uni.navigateTo({url:t})})(1))},[e.createTextVNode("更多"),e.createVNode(s,{type:"right",size:"12",color:"rgba(0, 0, 0, 0.5)"})])]),e.createElementVNode("view",{class:"article-list"})])]),e.createElementVNode("view",{class:"reply-box"},[e.createElementVNode("view",{class:"reply-contaior"},[e.createElementVNode("view",{class:"reply-content"},[e.createVNode(c,{onChange:g,"prefix-icon":"chat",clearable:!1,modelValue:r.value,"onUpdate:modelValue":a[3]||(a[3]=e=>r.value=e),placeholder:"写点什么",trim:!0,class:"reply-input"},null,8,["modelValue"])]),e.createElementVNode("view",{class:"reply-icons"},[e.createVNode(s,{type:"star",size:"24",color:"rgba(0, 0, 0, 0.35)"}),e.createVNode(s,{type:"hand-up",size:"24",color:"rgba(0, 0, 0, 0.35)"}),e.createVNode(s,{type:"redo",size:"24",color:"rgba(0, 0, 0, 0.35)"})])])])])}}},[["__scopeId","data-v-5186803b"]]),ol=ie(e.defineComponent({__name:"gp-danmu",props:{danmuList:{type:Array,default:()=>[]},config:{type:Object,default:()=>({})},autoplay:{type:Boolean,default:!0},maxNumber:{type:Number,default:100},zIndex:{type:Number,default:10}},emits:["send","click","enter","leave","play","pause","clear"],setup(t,{expose:a,emit:n}){e.useCssVars((e=>({d31e9334:c.value.allowLineBreak?"normal":"nowrap","6e63b384":c.value.allowLineBreak?.6*d.value+"px":"none","55f1126e":c.value.allowLineBreak?"break-word":"keep-all","6b958ac6":c.value.allowLineBreak?"100%":"none"})));const i=t,r=n,s=e.getCurrentInstance(),l={trackHeight:40,trackNumber:5,speed:100,fontSize:16,fontColor:"#ffffff",backgroundColor:"transparent",trackMode:"overlap",looping:!1,direction:"rtl",duration:8e3,density:.5,randomTrack:!0,blockEnabled:!1,blockWords:[],blockUsers:[],clickable:!0,opacity:1,hoverPause:!1,maxTextLength:50,allowLineBreak:!1},c=e.computed((()=>Object.assign({},l,i.config))),u=e.ref(null),d=e.ref(0),m=e.ref(0),p=e.ref([]),h=e.ref(!1),v=e.ref([]),g=e.reactive({}),f=e.reactive({mergedConfig:c,containerWidth:d,containerHeight:m}),y=e.ref(null),_=e.ref(0),k=()=>{v.value=Array.from({length:c.value.trackNumber||5},((e,t)=>({id:t,height:c.value.trackHeight||40,danmus:[]})))},E=()=>{if(!u.value)return;uni.createSelectorQuery().in(null==s?void 0:s.proxy).select(".gp-danmu-container").boundingClientRect((e=>{e&&(d.value=e.width,m.value=e.height,f&&(f.containerWidth=d.value,f.containerHeight=m.value))})).exec()},x=(e,t)=>{g[e]=t},N=e=>{const t=c.value.maxTextLength||50;let a=e.text||"";!c.value.allowLineBreak&&a.length>t&&(a=a.substring(0,t)+"...",e.text=a);const n=e.fontSize||c.value.fontSize||16;if(c.value.allowLineBreak){const e=.6*d.value;let t=0;for(let o=0;o<a.length;o++)/[\u4e00-\u9fa5]|[^\x00-\xff]/.test(a[o])?t+=n:t+=.6*n;return Math.min(t+20,e)}let o=0;for(let i=0;i<a.length;i++)/[\u4e00-\u9fa5]|[^\x00-\xff]/.test(a[i])?o+=n:o+=.6*n;return o+20},w=e=>{if(e.duration)return e.duration;const t=c.value.speed||100;return(d.value+N(e))/t*1e3},C=e=>{if(!e||!e.id||!e.text)return void o("error","at uni_modules/gp-danmu/components/gp-danmu/gp-danmu.vue:349","添加弹幕失败: 无效的弹幕数据");if(p.value.length>=i.maxNumber)return;if((e=>{var t;if(!c.value.blockEnabled)return!1;if(e.userId&&(null==(t=c.value.blockUsers)?void 0:t.includes(e.userId)))return!0;if(e.text&&c.value.blockWords)for(const a of c.value.blockWords)if(e.text.includes(a))return!0;return!1})(e))return;const t={...e,type:e.type||"scroll",color:e.color||c.value.fontColor,fontSize:e.fontSize||c.value.fontSize,createTime:Date.now(),visible:!0,animationEnded:!1},a=(e=>"top"===e.type?v.value[0]:"bottom"===e.type?v.value[v.value.length-1]:void 0!==e.trackId&&e.trackId>=0&&e.trackId<v.value.length?v.value[e.trackId]:c.value.randomTrack?v.value[Math.floor(Math.random()*v.value.length)]:v.value.sort(((e,t)=>e.danmus.length-t.danmus.length))[0])(t);t.trackId=a.id,t.top=a.id*(a.height||40);const n=g[t.type||"scroll"];if(!n)return void o("error","at uni_modules/gp-danmu/components/gp-danmu/gp-danmu.vue:382",`未知的弹幕类型: ${t.type}`);const s=n.createAnimation(t,a);return t.animation=s,M(t),p.value.push(t),a.danmus.push(t),r("send",t),t},M=e=>{if(!e.animation||!e.animation.keyframes)return;const t=`danmu-${e.type}-${e.id}`;if("undefined"!=typeof document){const a=`gp-danmu-style-${e.id}`;let n=document.getElementById(a);n&&n.remove(),n=document.createElement("style"),n.id=a;let o=`@keyframes ${t} {`;e.animation.keyframes.forEach((e=>{const t=[];let a=100*e.offset;Object.keys(e).forEach((a=>{"offset"!==a&&t.push(`${a}: ${e[a]}`)})),o+=`${a}% { ${t.join("; ")}; }`})),o+="}",n.textContent=o,document.head.appendChild(n)}e.customAnimationName=t},S=e=>{Array.isArray(e)&&e.forEach((e=>{C(e)}))},I=e=>{const t=p.value.findIndex((t=>t.id===e));if(-1!==t){const a=p.value[t],n=v.value.findIndex((e=>e.id===a.trackId));if(-1!==n){const t=v.value[n].danmus.findIndex((t=>t.id===e));-1!==t&&v.value[n].danmus.splice(t,1)}if("undefined"!=typeof document){const t=`gp-danmu-style-${e}`,a=document.getElementById(t);a&&a.remove()}p.value.splice(t,1),r("leave",a)}},T=()=>{h.value||(h.value=!0,_.value=performance.now(),y.value=requestAnimationFrame(b),r("play"))},D=()=>{h.value&&(h.value=!1,y.value&&(cancelAnimationFrame(y.value),y.value=null),r("pause"))},b=e=>{if(!h.value)return;_.value,_.value=e;const t=[];p.value.forEach((a=>{if(a.animationEnded)return void t.push(a.id);const n=e-(a.createTime||0);a.animation&&n>=a.animation.duration+200&&(a.animationEnded=!0,t.push(a.id))})),t.forEach((e=>{I(e)})),c.value.looping&&0===p.value.length&&i.danmuList.length>0&&S(i.danmuList),y.value=requestAnimationFrame(b)};return e.onMounted((()=>{E(),k(),x("scroll",{createAnimation(e,t){const a=c.value.direction,n=w(e),o=N(e);return{duration:n,timingFunction:"linear",keyframes:[{transform:`translateX(${"rtl"===a?d.value:-o}px)`,offset:0},{transform:`translateX(${"rtl"===a?-o-.2*o:d.value+.2*o}px)`,offset:1}]}}}),x("top",{createAnimation:e=>({duration:e.duration||c.value.duration||8e3,timingFunction:"ease",keyframes:[{opacity:0,transform:"translateY(-20px)",offset:0},{opacity:1,transform:"translateY(0)",offset:.1},{opacity:1,transform:"translateY(0)",offset:.9},{opacity:0,transform:"translateY(-20px)",offset:1}]})}),x("bottom",{createAnimation:e=>({duration:e.duration||c.value.duration||8e3,timingFunction:"ease",keyframes:[{opacity:0,transform:"translateY(20px)",offset:0},{opacity:1,transform:"translateY(0)",offset:.1},{opacity:1,transform:"translateY(0)",offset:.9},{opacity:0,transform:"translateY(20px)",offset:1}]})}),window.addEventListener("resize",E),i.danmuList.length>0&&i.autoplay&&e.nextTick((()=>{S(i.danmuList),T()}))})),e.onBeforeUnmount((()=>{D(),window.removeEventListener("resize",E)})),e.watch((()=>i.danmuList),((e,t)=>{if(e!==t&&h.value){const a=new Set(t.map((e=>e.id))),n=e.filter((e=>!a.has(e.id)));n.length>0&&S(n)}}),{deep:!0}),e.watch((()=>i.config),(()=>{k()}),{deep:!0}),a({add:C,addBatch:S,play:T,pause:D,clear:()=>{p.value=[],v.value.forEach((e=>{e.danmus=[]})),r("clear")},setConfig:e=>{Object.assign(i.config,e)},getDanmu:e=>p.value.find((t=>t.id===e)),blockUser:e=>{c.value.blockUsers&&!c.value.blockUsers.includes(e)&&(c.value.blockUsers.push(e),p.value.forEach((t=>{t.userId===e&&I(t.id)})))},blockWord:e=>{c.value.blockWords&&!c.value.blockWords.includes(e)&&(c.value.blockWords.push(e),p.value.forEach((t=>{t.text&&t.text.includes(e)&&I(t.id)})))},use:e=>{if(e&&"function"==typeof e.install)try{e.install({registerDanmuType:x,pluginContext:f,mergedConfig:c.value,containerWidth:d.value,containerHeight:m.value}),o("log","at uni_modules/gp-danmu/components/gp-danmu/gp-danmu.vue:630",`插件 ${e.name||"未命名"} 已安装`)}catch(t){o("error","at uni_modules/gp-danmu/components/gp-danmu/gp-danmu.vue:632","安装插件时出错:",t)}else o("error","at uni_modules/gp-danmu/components/gp-danmu/gp-danmu.vue:618","无效的插件：插件必须提供 install 方法")}}),(a,n)=>(e.openBlock(),e.createElementBlock("view",{class:"gp-danmu-container",ref_key:"containerRef",ref:u,style:e.normalizeStyle({zIndex:t.zIndex,height:c.value.trackNumber*c.value.trackHeight+"px"})},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(p.value,(t=>{var n,o,i,s;return e.openBlock(),e.createElementBlock("view",{key:t.id,class:e.normalizeClass(["gp-danmu-item",[`gp-danmu-${t.type}`,{"gp-danmu-clickable":c.value.clickable}]]),style:e.normalizeStyle({top:`${t.top}px`,color:t.color,fontSize:`${t.fontSize}px`,opacity:c.value.opacity,backgroundColor:c.value.backgroundColor,animation:t.customAnimationName?`${t.customAnimationName} ${null==(n=t.animation)?void 0:n.duration}ms ${null==(o=t.animation)?void 0:o.timingFunction} 0s 1 normal forwards`:`danmu-${t.type} ${null==(i=t.animation)?void 0:i.duration}ms ${null==(s=t.animation)?void 0:s.timingFunction} 0s 1 normal forwards`,animationPlayState:h.value?"running":"paused"}),onClick:e=>((e,t)=>{c.value.clickable&&r("click",e,t)})(t,e),onAnimationend:()=>{t.animationEnded=!0}},[e.renderSlot(a.$slots,"danmu",{danmu:t},(()=>[e.createElementVNode("text",{class:"gp-danmu-text"},e.toDisplayString(t.text),1)]),!0)],46,["onClick","onAnimationend"])})),128)),e.renderSlot(a.$slots,"controls",{},void 0,!0)],4))}}),[["__scopeId","data-v-19ad43fc"]]),il="/static/psychological-test/logo.svg",rl=(e,t={})=>A.get("/api/psychology/exam/dailyRecommend",e,t),sl=ie({__name:"index",setup(t){e.useCssVars((e=>({"5c330ad2":r.value})));const a=ae(),n=e.ref(null),r=e.ref(a.statusBarHeight+"px"),s=e.reactive({trackHeight:40,trackNumber:3,speed:100,fontSize:16,fontColor:"#000000",backgroundColor:"white",trackMode:"separate",looping:!0,direction:"rtl",duration:1e3,density:.5,randomTrack:!0,opacity:1,hoverPause:!0}),c=e=>{uni.navigateTo({url:"/pages/psychological-test/charge-test/charge-test?id="+e.id})},u=()=>{uni.navigateBack({delta:1})},d=e.ref([]),m=()=>{},p=e.ref([{id:1,text:"性格",url:"/static/login/logo.png"},{id:2,text:"情感",url:"/static/login/logo.png"},{id:3,text:"健康",url:"/static/login/logo.png"},{id:4,text:"职业",url:"/static/login/logo.png"},{id:5,text:"全部",url:"/static/login/logo.png"}]),h=e.ref([{id:1,txt:"免费测试"},{id:2,txt:"付费测试"}]),v=e.ref([]),g=e.ref(0),f=async()=>{let e=await((e,t={})=>A.get("/api/psychology/exam/recommendExams",e,t))();v.value=e.data},y=async()=>{let e=await rl();o("log","at pages/psychological-test/index/index.vue:259",e),d.value=e.data},_=e.ref(1),k=e.ref(10),E=e.ref(1),x=e.ref([]),N=e.ref([]),w=e.ref([]),C=e.ref(!1),M=e.ref(!1),S=async()=>{let e=0==g.value?_.value:E.value,t=await((e,t={})=>A.get("/api/psychology/exam/list",e,t))({payType:g.value,page:e,size:k.value});o("log","at pages/psychological-test/index/index.vue:285",t),0==g.value?(1==_.value?N.value=t.data.records:N.value=N.value.concat(t.data.records),o("log","at pages/psychological-test/index/index.vue:292",N.value.length),t.data.total<=N.value.length?C.value=!1:C.value=!0,x.value=N.value):(1==E.value?w.value=t.data.records:w.value=w.value.concat(t.data.records),t.data.total<=w.value.length?M.value=!1:M.value=!0,x.value=w.value)};l((()=>{f(),y(),S()}));const I=()=>{o("log","at pages/psychological-test/index/index.vue:323","reach bottom"),0==g.value?C.value&&(_.value++,S()):M.value&&(E++,S())},T=()=>{uni.navigateTo({url:"/pages/psychological-test/order/order"})},D=e.ref([{id:1,text:"这是一条普通弹幕",color:"#000000"},{id:2,text:"这是一条彩色弹幕",color:"#FF6600"},{id:3,text:"这是一条顶部弹幕",color:"#00FFFF"},{id:4,text:"这是一条底部弹幕",color:"#FFFF00"}]);e.onMounted((()=>{}));return(t,a)=>{const o=i(e.resolveDynamicComponent("uni-icons"),re),r=i(e.resolveDynamicComponent("uni-search-bar"),xe),l=i(e.resolveDynamicComponent("gp-danmu"),ol);return e.openBlock(),e.createElementBlock("view",{class:"psychological-box"},[e.createElementVNode("scroll-view",{"scroll-y":"true",class:"scroll-y","show-scrollbar":!1,onScrolltolower:I},[e.createElementVNode("view",{class:"psychological-header"},[e.createElementVNode("view",{class:"header-nav-bar"},[e.createElementVNode("view",{class:"header-left"},[e.createVNode(o,{type:"left",size:"24",onClick:u}),e.createElementVNode("text",null,"心理测试")]),e.createElementVNode("view",{class:"header-title"},[e.createVNode(r,{class:"uni-mt-10",radius:"90",placeholder:"抑郁测试",clearButton:"auto",cancelButton:"none",onConfirm:m})]),e.createElementVNode("view",{class:"header-right",onClick:T},[e.createElementVNode("image",{src:il,class:"logo-svg"}),e.createElementVNode("text",{class:"txt"},"我的测评")])]),e.createElementVNode("view",{class:"scroll-content"},[e.createElementVNode("scroll-view",{"scroll-x":"true",class:"scroll-x","show-scrollbar":!1},[e.createElementVNode("view",{class:"test-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(v.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"test-item",key:a,onClick:e=>c(t)},[e.createElementVNode("image",{src:t.icon?t.icon:"@/static/forum/bg.png",mode:"aspectFill",class:"img"},null,8,["src"]),e.createElementVNode("view",{class:"test-title"},e.toDisplayString(t.title),1),e.createElementVNode("view",{class:"use-test"},e.toDisplayString(t.examNum)+"人已测",1),e.createElementVNode("view",{class:"start-test"},[e.createTextVNode("开始测试"),e.createVNode(o,{type:"right",size:"12",color:"#35CA95"})])],8,["onClick"])))),128))])])]),e.createElementVNode("view",{class:"emotion-room"},[e.createElementVNode("view",{class:"emotion-room-header"},[e.createElementVNode("text",{class:"room-title"},"情绪小房间"),e.createElementVNode("text",{class:"room-remark"},"500+倾听师深度解读情绪困惑")]),e.createElementVNode("view",{class:"emotion-room-content"},[e.createElementVNode("div",{class:"danmu-container"},[e.createVNode(l,{ref_key:"danmuRef",ref:n,danmuList:D.value,config:s},{danmu:e.withCtx((({danmu:t})=>[e.createElementVNode("view",{class:"custom-danmu"},[t.avatar?(e.openBlock(),e.createElementBlock("image",{key:0,src:t.avatar,class:"avatar"},null,8,["src"])):e.createCommentVNode("",!0),e.createElementVNode("text",{class:"username"},e.toDisplayString(t.username),1),e.createElementVNode("text",{class:"content"},e.toDisplayString(t.text),1)])])),_:1},8,["danmuList","config"])])]),e.createElementVNode("view",{class:"send-msg"})]),e.createElementVNode("view",{class:"bg1"}),e.createElementVNode("view",{class:"bg2"})]),e.createElementVNode("view",{class:"tabs"},[e.createElementVNode("view",{class:"tabs-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(p.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"tab-item",key:a,onClick:e=>(e=>{e.id<5?uni.navigateTo({url:`/pages/psychological-test/test-type/test-type?type=${e.text}`}):uni.navigateTo({url:"/pages/psychological-test/test-type/test-type"})})(t)},[e.createElementVNode("image",{src:t.url,class:"img"},null,8,["src"]),e.createElementVNode("text",{class:"txt"},e.toDisplayString(t.text),1)],8,["onClick"])))),128))])]),e.createElementVNode("view",{class:"day-recommend-box"},[e.createElementVNode("view",{class:"day-recommend-content"},[e.createElementVNode("view",{class:"recommend-heaader"},[e.createElementVNode("view",{class:"title"},"每日推荐"),e.createElementVNode("view",{class:"label",onClick:y},[e.createTextVNode("换一换"),e.createVNode(o,{type:"reload",size:"12",color:"#38CC98"})])]),e.createElementVNode("view",{class:"content-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(d.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"content-item",key:a,onClick:e=>c(t)},[e.createElementVNode("image",{src:t.icon?t.icon:"@/static/forum/bg.png",mode:"aspectFill",class:"img"},null,8,["src"]),e.createElementVNode("view",null,[e.createElementVNode("view",{class:"title"},e.toDisplayString(t.title),1),e.createElementVNode("view",{class:"price-box"},[e.createElementVNode("view",{class:"price"},e.toDisplayString(0==t.payType?"免费":"￥"+t.discountPrice),1),e.createElementVNode("view",{class:"use-test"},[e.createVNode(o,{type:"fire-filled",size:"18",color:"#FA5151"}),e.createElementVNode("text",{class:"num"},e.toDisplayString(t.examNum),1),e.createTextVNode("人已测 ")])])])],8,["onClick"])))),128))])])]),e.createElementVNode("view",{class:"menu-tabs"},[e.createElementVNode("view",{class:"menu-tabs-conetnt"},[e.createElementVNode("view",{class:"menu-tabs-header"},[e.createElementVNode("view",{class:"title"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(h.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["title-item",g.value==a?"active":""]),key:a,onClick:e=>{return t=a,g.value!=t&&(g.value=t),x.value=[],void S();var t}},e.toDisplayString(t.txt),11,["onClick"])))),128))]),e.createElementVNode("view",{class:"label",onClick:a[0]||(a[0]=e=>{uni.navigateTo({url:"/pages/psychological-test/test-type/test-type"})})},[e.createTextVNode("更多"),e.createVNode(o,{type:"right",size:"12"})])]),e.createElementVNode("view",{class:"content-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(x.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"content-item",key:a,onClick:e=>c(t)},[e.createElementVNode("view",{class:"content-item-content"},[e.createElementVNode("view",null,[e.createElementVNode("view",{class:"title"},e.toDisplayString(t.title),1),e.createElementVNode("view",{class:"remark"},e.toDisplayString(t.oneWord),1),1==t.payType?(e.openBlock(),e.createElementBlock("view",{key:0,class:"price-box"},[e.createElementVNode("text",{class:"price"},"￥"+e.toDisplayString(t.discountPrice),1),e.createElementVNode("text",{class:"under-price"},"￥"+e.toDisplayString(t.price),1)])):e.createCommentVNode("",!0),e.createElementVNode("view",{class:"price-box"},[e.createElementVNode("text",{class:"price"}),e.createTextVNode("免费")]),e.createElementVNode("view",{class:"test-handler"},[e.createElementVNode("view",{class:"handler-btn"},"去测试"),e.createElementVNode("view",{class:"use-test"},[e.createElementVNode("text",{class:"num"},e.toDisplayString(t.examNum),1),e.createTextVNode("人已测")])])]),e.createElementVNode("view",{class:"img-box"},[e.createElementVNode("image",{src:t.icon?t.icon:"@/static/consult/user.png",mode:"aspectFill",class:"img"},null,8,["src"])])])],8,["onClick"])))),128))])])])],32)])}}},[["__scopeId","data-v-3b99990a"]]);function ll(e,t=2){for(e+="";e.length<t;)e="0"+e;return e.slice(-t)}const cl={yyyy:e=>ll(e.year,4),yy:e=>ll(e.year),MM:e=>ll(e.month),M:e=>e.month,dd:e=>ll(e.day),d:e=>e.day,hh:e=>ll(e.hour),h:e=>e.hour,mm:e=>ll(e.minute),m:e=>e.minute,ss:e=>ll(e.second),s:e=>e.second,SSS:e=>ll(e.millisecond,3),S:e=>e.millisecond};function ul(e){return e instanceof Date?e:"string"==typeof e?e.indexOf("T")>-1?new Date(e):new Date(e.replace(/-/g,"/")):new Date(e)}function dl(e,{locale:t="zh",threshold:a=[6e4,36e5],format:n="yyyy/MM/dd hh:mm:ss"}){if("-"===e)return e;if(!e&&0!==e)return"";const o={zh:{year:"年",month:"月",day:"天",hour:"小时",minute:"分钟",second:"秒",ago:"前",later:"后",justNow:"刚刚",soon:"马上",template:"{num}{unit}{suffix}"},en:{year:"year",month:"month",day:"day",hour:"hour",minute:"minute",second:"second",ago:"ago",later:"later",justNow:"just now",soon:"soon",template:"{num} {unit} {suffix}"}},i=o[t]||o.zh;let r,s,l=ul(e),c=l.getTime()-Date.now(),u=Math.abs(c);if(u<a[0])return c<0?i.justNow:i.soon;if(u>=a[1])return function(e,t="yyyy/MM/dd hh:mm:ss"){if(!e&&0!==e)return"";const a={year:(e=ul(e)).getFullYear(),month:e.getMonth()+1,day:e.getDate(),hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds(),millisecond:e.getMilliseconds()},n=/yyyy|yy|MM|M|dd|d|hh|h|mm|m|ss|s|SSS|SS|S/;let o=!0,i=t;for(;o;)o=!1,i=i.replace(n,(function(e){return o=!0,cl[e](a)}));return i}(l,n);let d=i.later;c<0&&(d=i.ago,c=-c);const m=Math.floor(c/1e3),p=Math.floor(m/60),h=Math.floor(p/60),v=Math.floor(h/24),g=Math.floor(v/30),f=Math.floor(g/12);switch(!0){case f>0:r=f,s=i.year;break;case g>0:r=g,s=i.month;break;case v>0:r=v,s=i.day;break;case h>0:r=h,s=i.hour;break;case p>0:r=p,s=i.minute;break;default:r=m,s=i.second}return"en"===t&&(1===r?r="a":s+="s"),i.template.replace(/{\s*num\s*}/g,r+"").replace(/{\s*unit\s*}/g,s).replace(/{\s*suffix\s*}/g,d)}const ml=ie({name:"uniDateformat",props:{date:{type:[Object,String,Number],default:()=>"-"},locale:{type:String,default:"zh"},threshold:{type:Array,default:()=>[0,0]},format:{type:String,default:"yyyy/MM/dd hh:mm:ss"},refreshRate:{type:[Number,String],default:0}},data:()=>({refreshMark:0}),computed:{dateShow(){return this.refreshMark,dl(this.date,{locale:this.locale,threshold:this.threshold,format:this.format})}},watch:{refreshRate:{handler(){this.setAutoRefresh()},immediate:!0}},methods:{refresh(){this.refreshMark++},setAutoRefresh(){clearInterval(this.refreshInterval),this.refreshRate&&(this.refreshInterval=setInterval((()=>{this.refresh()}),parseInt(this.refreshRate)))}}},[["render",function(t,a,n,o,i,r){return e.openBlock(),e.createElementBlock("text",null,e.toDisplayString(r.dateShow),1)}]]),pl=ie({__name:"order",setup(t){e.useCssVars((e=>({"348cc84b":n.value})));const a=ae(),n=e.ref(a.statusBarHeight+"px"),r=()=>{uni.navigateBack({delta:1})},l=e.ref([]);s((()=>{u()}));const c=e=>{uni.navigateTo({url:`/pages/psychological-test/start-test/start-test?id=${e.id}&examId=${e.examId}&currentIndex=${e.currentIndex}`})},u=async()=>{let e=await((e,t={})=>A.get("/api/psychology/examRecord/listMyRecord",e,t))({type:p.value});o("log","at pages/psychological-test/order/order.vue:102",e),l.value=e.data},d=e=>{uni.navigateTo({url:`/pages/psychological-test/test-result/test-result?title=${e.title}&examId=${e.examId}&result=${e.result}&icon=${e.icon}&id=${e.id}`})},m=e.ref([{id:1,label:"未完成",isDot:!1},{id:2,label:"已完成",isDot:!1},{id:3,label:"待支付",isDot:!0}]),p=e.ref(1);return(t,a)=>{const n=i(e.resolveDynamicComponent("uni-icons"),re),o=i(e.resolveDynamicComponent("uni-nav-bar"),Di),s=i(e.resolveDynamicComponent("uni-dateformat"),ml);return e.openBlock(),e.createElementBlock("view",{class:"my-order-box"},[e.createVNode(o,{backgroundColor:"#F4F6F8",border:!1,title:"我的评测",class:"header-bar",statusBar:!0,fixed:""},{left:e.withCtx((()=>[e.createVNode(n,{type:"left",size:"24",onClick:r})])),_:1}),e.createElementVNode("view",{class:"tab-list-box"},[e.createElementVNode("view",{class:"tab-list-content"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(m.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["tab-item",p.value==t.id?"active":""]),key:t.id,onClick:e=>(e=>{uni.showLoading({title:"加载中..."}),l.value=[],e.id!=p.value&&(p.value=e.id),u(),uni.hideLoading()})(t)},[e.createTextVNode(e.toDisplayString(t.label)+" ",1),t.isDot?(e.openBlock(),e.createElementBlock("view",{key:0,class:"is-dot"})):e.createCommentVNode("",!0)],10,["onClick"])))),128))])]),e.createElementVNode("view",{class:"order-content-box"},[e.createElementVNode("scroll-view",{"scroll-y":"true",class:"scroll-content","show-scrollbar":!1},[e.createElementVNode("view",{class:"order-content-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"order-content-item",key:a,onClick:e=>(e=>{uni.navigateTo({url:`/pages/psychological-test/charge-test/charge-test?id=${e.examId}`})})(t)},[e.createElementVNode("view",{class:"item-box"},[e.createElementVNode("view",{class:"image-item"},[e.createElementVNode("image",{src:Xi,class:"img"})]),e.createElementVNode("view",{class:"text-content"},[e.createElementVNode("view",{class:"header"},[e.createElementVNode("view",{class:"title"},e.toDisplayString(t.title),1),e.createElementVNode("view",{class:"date"},[e.createVNode(s,{format:"yyyy/MM/dd",date:t.time},null,8,["date"])])]),e.createElementVNode("view",{class:"content"},e.toDisplayString(t.oneWord),1),0==t.payType?(e.openBlock(),e.createElementBlock("view",{key:0,class:"footer"},[e.createElementVNode("view",{class:"free"},"免费"),1==p.value?(e.openBlock(),e.createElementBlock("view",{key:0,class:"test",onClick:e.withModifiers((e=>c(t)),["stop"])},"继续评测",8,["onClick"])):e.createCommentVNode("",!0),2==p.value?(e.openBlock(),e.createElementBlock("view",{key:1,class:"btns"},[e.createElementVNode("view",{class:"test",style:{"margin-right":"15rpx"},onClick:e.withModifiers((e=>d(t)),["stop"])},"查看结果",8,["onClick"]),e.createElementVNode("view",{class:"test"},"再次测试")])):e.createCommentVNode("",!0)])):(e.openBlock(),e.createElementBlock("view",{key:1,class:"footer"},[e.createElementVNode("view",{class:"price"},"￥"+e.toDisplayString(t.price),1),3==p.value?(e.openBlock(),e.createElementBlock("view",{key:0,class:"test"},"立即支付")):e.createCommentVNode("",!0),1==p.value?(e.openBlock(),e.createElementBlock("view",{key:1,class:"test",onClick:e.withModifiers((e=>c(t)),["stop"])},"继续评测",8,["onClick"])):e.createCommentVNode("",!0),2==p.value?(e.openBlock(),e.createElementBlock("view",{key:2,class:"btns"},[e.createElementVNode("view",{class:"test",style:{"margin-right":"15rpx"},onClick:e.withModifiers((e=>d(t)),["stop"])},"查看结果",8,["onClick"]),e.createElementVNode("view",{class:"test"},"再次测试")])):e.createCommentVNode("",!0)]))])])],8,["onClick"])))),128))])])])])}}},[["__scopeId","data-v-5236109a"]]),hl={__name:"test-type",setup(t){e.useCssVars((e=>({"0f98ac30":n.value})));const a=ae(),n=e.ref(a.statusBarHeight+"px"),r=()=>{uni.navigateBack({delta:1})},s=e.ref(!1),c=e.ref(1),u=e.ref(-1),d=e.ref(12),p=e.ref(["情感","性格","健康","家庭","人际","职业"]),h=()=>{x()},v=()=>{x()},g=()=>{uni.navigateTo({url:"/pages/psychological-test/order/order"})},f=e.ref(1),y=e.ref([]);l((e=>{let t=e.type;if(t){const e=p.value.findIndex((e=>e==t));w.value=e}x()})),m((()=>{s&&(c.value++,x())}));const _=e.ref(""),k=e=>{o("log","at pages/psychological-test/test-type/test-type.vue:141",e),_.value=e},E=e.ref(0),x=async()=>{let e=await((e,t={})=>A.get("/api/psychology/exam/listByType",e,t))({type:p.value[w.value],page:c.value,count:d.value,payType:u.value,keyword:_.value});o("log","at pages/psychological-test/test-type/test-type.vue:148",e),E.value=e.data.total,y.value=e.data.records,y.value.length>=E.value?s.value=!1:s.value=!0},N=e.ref([{id:1,label:"全部"},{id:2,label:"付费"},{id:3,label:"免费"}]),w=e.ref(0);return(t,a)=>{const n=i(e.resolveDynamicComponent("uni-icons"),re),o=i(e.resolveDynamicComponent("uni-search-bar"),xe);return e.openBlock(),e.createElementBlock("view",{class:"psychological-box"},[e.createElementVNode("view",{class:"psychological-header"},[e.createElementVNode("view",{class:"header-nav-bar"},[e.createElementVNode("view",{class:"header-left"},[e.createVNode(n,{type:"left",size:"24",onClick:r})]),e.createElementVNode("view",{class:"header-title"},[e.createVNode(o,{class:"uni-mt-10",onInput:k,onClear:v,radius:"90",placeholder:"请输入搜索内容",clearButton:"auto",cancelButton:"none",onConfirm:h})]),e.createElementVNode("view",{class:"header-right",onClick:g},[e.createElementVNode("image",{src:il,class:"logo-svg"}),e.createElementVNode("text",{class:"txt"},"我的测评")])])]),e.createElementVNode("view",{class:"tab-list-box"},[e.createElementVNode("view",{class:"tab-list-content"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(N.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["tab-item",f.value==t.id?"active":""]),key:t.id,onClick:e=>(e=>{e.id!=f.value&&(f.value=e.id),1==e.id?u.value=-1:2==e.id?u.value=1:u.value=0,x()})(t)},e.toDisplayString(t.label),11,["onClick"])))),128))])]),e.createElementVNode("view",{class:"choose-topic-content"},[e.createElementVNode("view",{class:"tag-content"},[e.createElementVNode("view",{class:"tag-left"},[e.createElementVNode("scroll-view",{"scroll-y":"true",class:"scroll-content","show-scrollbar":!1},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(p.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["tag-item",w.value==a?"active":""]),key:a,onClick:e=>(e=>{w.value!=e&&(w.value=e),c.value=1,x()})(a)},e.toDisplayString(t),11,["onClick"])))),128))])]),e.createElementVNode("view",{class:"tag-right"},[e.createElementVNode("scroll-view",{"scroll-y":"true",class:"scroll-content","show-scrollbar":!1},[e.createElementVNode("view",{class:"tag-right-content"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(y.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"content-item",key:a,onClick:e=>(e=>{let t=`/pages/psychological-test/charge-test/charge-test?id=${e.id}`;uni.navigateTo({url:t})})(t)},[e.createElementVNode("view",{class:"content-item-content"},[e.createElementVNode("view",{class:"content-txt"},[e.createElementVNode("view",{class:"title"},e.toDisplayString(t.title),1),e.createElementVNode("view",{class:"remark"},e.toDisplayString(t.oneWord),1),e.createElementVNode("view",{class:"price-box"},[1==t.payType?(e.openBlock(),e.createElementBlock("view",{key:0},[e.createElementVNode("text",{class:"price"},"￥"+e.toDisplayString(t.discountPrice),1),e.createElementVNode("text",{class:"under-price"},"￥"+e.toDisplayString(t.price),1)])):(e.openBlock(),e.createElementBlock("view",{key:1},[e.createElementVNode("text",{class:"price"},"免费")])),e.createElementVNode("view",{class:"use-test"},[e.createElementVNode("text",{class:"use-num"},e.toDisplayString(t.examNum),1),e.createTextVNode("人已测 ")])])]),e.createElementVNode("view",{class:"img-box"},[e.createElementVNode("image",{src:t.icon?t.icon:"@/static/consult/user.png",class:"img"},null,8,["src"])])])],8,["onClick"])))),128))])])])])])])}}},vl=ie(hl,[["__scopeId","data-v-cf45ad50"]]),gl={__name:"start-test",setup(t){const a=()=>{uni.navigateBack()},n=e.ref(""),r=e.ref(0),s=e.ref([]),c=e.ref(0),u=e.ref(0),d=e.ref([]),m=e.ref(0);l((e=>{n.value=e.title,u.value=e.examId,u.value?(m.value=e.id,r.value=e.examId,N.value=-1,_(),c.value=parseInt(e.currentIndex)+1):(r.value=e.id,p(),k())}));const p=async()=>{let e=await((e,t={})=>A.post("/api/psychology/examRecord/save",e,t))({examId:r.value});o("log","at pages/psychological-test/start-test/start-test.vue:113",e),m.value=e.data},h=()=>{if(-1===N.value||void 0===N.value)return void uni.showToast({title:"请选择选项",icon:"error"});o("log","at pages/psychological-test/start-test/start-test.vue:140",d.value);const e=d.value.findIndex((e=>parseInt(e.optionIndex)===parseInt(c.value)));if(o("log","at pages/psychological-test/start-test/start-test.vue:144",e),-1!==e?d.value[e].result=N.value:d.value.push({optionIndex:c.value,result:N.value}),v(),c.value=c.value+1,o("log","at pages/psychological-test/start-test/start-test.vue:156",c.value),o("log","at pages/psychological-test/start-test/start-test.vue:157",d.value),d.value[c.value]){let e=d.value[c.value];N.value=e.result}else N.value=-1},v=async()=>{await((e,t={})=>A.post("/api/psychology/examRecord/update",e,t))({id:m.value,options:JSON.stringify(d.value),currentIndex:c.value})},g=async()=>{if(-1===N.value||void 0===N.value)return void uni.showToast({title:"请先选择选项",icon:"error"});const e=d.value.findIndex((e=>e.optionIndex===c.value));-1!==e?d.value[e].result=N.value:d.value.push({optionIndex:c.value,result:N.value}),uni.showLoading({title:"正在获取结果，请稍后..."}),v(),f()},f=async()=>{let e=await((e,t={})=>A.get("/api/psychology/examRecord/getExamResult",e,t))({id:m.value});o("log","at pages/psychological-test/start-test/start-test.vue:203",e),uni.hideLoading(),uni.navigateTo({url:`/pages/psychological-test/test-result/test-result?title=${n.value}&examId=${r.value}&result=${e.data.examResult}`})},y=()=>{c.value=c.value-1;let e=d.value[c.value];N.value=e.result},_=async()=>{let e=await((e,t={})=>A.get("/api/psychology/examRecord/userRecordDetail",e,t))({id:m.value});if(o("log","at pages/psychological-test/start-test/start-test.vue:218",e),s.value=e.data.options,e.data.result){let t=JSON.parse(e.data.result);d.value=t}},k=async()=>{let e=await((e,t={})=>A.get("/api/psychology/exam/options",e,t))({id:r.value});o("log","at pages/psychological-test/start-test/start-test.vue:230",e),s.value=e.data},E=e.ref(0);e.onMounted((()=>{E.value=436/13*2}));const x=e.computed((()=>Math.round((c.value+1)/s.value.length*100)));e.watch(x,((e,t)=>{o("log","at pages/psychological-test/start-test/start-test.vue:250",`进度从 ${t}% → ${e}%`)}));const N=e.ref(-1);return(t,o)=>{const r=i(e.resolveDynamicComponent("uni-icons"),re),l=i(e.resolveDynamicComponent("uni-nav-bar"),Di),u=i(e.resolveDynamicComponent("u-line-progress"),ws);return e.openBlock(),e.createElementBlock("view",{class:"start-test-box"},[e.createVNode(l,{backgroundColor:"#F4F6F8",border:!1,title:n.value,class:"header-bar",statusBar:!0,fixed:""},{left:e.withCtx((()=>[e.createVNode(r,{type:"left",size:"24",onClick:a})])),right:e.withCtx((()=>[e.createElementVNode("view",{class:"right"},[e.createElementVNode("image",{src:Ri,class:"img"})])])),_:1},8,["title"]),e.createElementVNode("view",{class:"content-box"},[e.createElementVNode("view",{class:"process-box"},[e.createElementVNode("view",{class:"process-content"},[e.createElementVNode("view",{class:"process-txt"},"评测进度"),e.createVNode(u,{"active-color":"#38CC98","inactive-color":"#ffffff",percent:x.value,"show-percent":!1},null,8,["percent"]),e.createElementVNode("view",{class:"process-num"},[e.createElementVNode("text",{class:"use-num"},e.toDisplayString(c.value+1),1),e.createTextVNode("/"+e.toDisplayString(s.value.length),1)])])]),e.createElementVNode("view",{class:"question-box"},[e.createElementVNode("view",{class:"q-logo"},[e.createElementVNode("image",{src:"/static/psychological-test/q-logo.svg",class:"img"})]),e.createElementVNode("view",{class:"q-content"},[e.createElementVNode("view",{class:"content"},e.toDisplayString(s.value[c.value].question),1)])]),e.createElementVNode("view",{class:"answer-box"},[e.createElementVNode("view",{class:"answer-content"},[e.createElementVNode("view",{class:"answer-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(JSON.parse(s.value[c.value].options),((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["answer-item",N.value==a?"active":""]),key:a,onClick:e=>{return t=a,void(N.value!=t&&(N.value=t));var t}},[e.createElementVNode("view",{class:"dot"}),e.createElementVNode("view",{class:"txt"},e.toDisplayString(t.text),1)],10,["onClick"])))),128))])])]),e.createElementVNode("view",{class:"pre-btn-box"},[c.value>0?(e.openBlock(),e.createElementBlock("view",{key:0,class:"pre",onClick:y},"上一题")):e.createCommentVNode("",!0),c.value<s.value.length-1?(e.openBlock(),e.createElementBlock("view",{key:1,class:"pre",onClick:h},"下一题")):e.createCommentVNode("",!0),c.value==s.value.length-1?(e.openBlock(),e.createElementBlock("view",{key:2,class:"pre",onClick:g},"查看结果")):e.createCommentVNode("",!0)])])])}}},fl=ie(gl,[["__scopeId","data-v-69409640"]]),yl={__name:"comment",setup(t){const a=()=>{uni.navigateBack({delta:1})},n=e.ref(""),r=e.ref(0),s=e.ref(0),c=e.ref(0);l((e=>{r.value=e.examId,s.value=e.id}));const u=e=>{o("log","at pages/psychological-test/comment/comment.vue:52",e),c.value=e.value},d=async()=>{0!=c.value?(await((e,t={})=>A.post("/api/comment/comment/saveComment",e,t))({type:3,content:n.value,articleId:r.value,star:c.value,referenceId:s.value}),uni.showToast({title:"发布成功",icon:"success"}),uni.navigateBack()):uni.showToast({title:"请选择星级",icon:"error"})};return(t,o)=>{const r=i(e.resolveDynamicComponent("uni-icons"),re),s=i(e.resolveDynamicComponent("uni-nav-bar"),Di),l=i(e.resolveDynamicComponent("uni-rate"),Ai);return e.openBlock(),e.createElementBlock("view",{class:"write-mailbox-box"},[e.createVNode(s,{backgroundColor:"#F4F6F8",border:!1,title:"评论",class:"header-bar",statusBar:!0,fixed:""},{left:e.withCtx((()=>[e.createVNode(r,{type:"left",size:"24",onClick:a})])),_:1}),e.createElementVNode("view",{class:"question-content-box"},[e.createElementVNode("view",{class:"question-content"},[e.createElementVNode("view",{class:"content"},[e.withDirectives(e.createElementVNode("textarea",{class:"uni-textarea",placeholder:"写下您的真实评价有机会获得红包哦~(1000字以内)","placeholder-class":"placeholder-content",maxlength:"1000","onUpdate:modelValue":o[0]||(o[0]=e=>n.value=e)},null,512),[[e.vModelText,n.value]]),e.createElementVNode("view",{class:"char-count"},e.toDisplayString(n.value.length)+"/1000",1)])]),e.createElementVNode("view",{class:"upload-image"},[e.createElementVNode("view",{class:"upload-image-content"},[e.createElementVNode("text",{class:"txt"},"满意度打分"),e.createElementVNode("view",null,[e.createVNode(l,{value:c.value,onChange:u,activeColor:"#38CC98",size:"16"},null,8,["value"])])])])]),e.createElementVNode("view",{class:"send-content-box"},[e.createElementVNode("view",{class:"send-content-btn",onClick:d},"发布")])])}}},_l=ie(yl,[["__scopeId","data-v-3906fec8"]]),kl=ie({__name:"contact-consult",setup(t){const a=()=>{uni.navigateBack({delta:1})};return(t,n)=>{const o=i(e.resolveDynamicComponent("uni-icons"),re),r=i(e.resolveDynamicComponent("uni-nav-bar"),Di);return e.openBlock(),e.createElementBlock("view",{class:"contact-consult-box"},[e.createVNode(r,{backgroundColor:"#F4F6F8",border:!1,title:"联系咨询师",class:"header-bar",statusBar:!0,fixed:""},{left:e.withCtx((()=>[e.createVNode(o,{type:"left",size:"24",onClick:a})])),_:1}),e.createElementVNode("view",{class:"contact-consult-content"},[e.createElementVNode("view",{class:"contact-consult-list"},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(20,(t=>e.createElementVNode("view",{class:"contact-consult-item",key:t},[e.createElementVNode("view",{class:"item-content"},[e.createElementVNode("image",{src:Xi,class:"img"}),e.createElementVNode("view",{class:"content"},[e.createElementVNode("view",{class:"name"},"张三"),e.createElementVNode("view",{class:"desc"},"北京 | 二级心理咨询师")])])]))),64))])])])}}},[["__scopeId","data-v-6f1d9027"]]),El={__name:"test-result",setup(t){const a=()=>{uni.navigateBack()},n=e.ref(0),r=e.ref(""),c=e.ref(""),u=e.ref(0),d=e.ref(0);l((e=>{p.value=e.title,n.value=e.examId,r.value=e.result,c.value=e.icon,u.value=e.id})),s((()=>{o("log","at pages/psychological-test/test-result/test-result.vue:101",u.value),m()}));const m=async()=>{let e=await((e,t={})=>A.get("/api/psychology/examRecord/commentStatus",e,t))({id:u.value,type:3});d.value=e.data},p=e.ref(""),h=e=>{uni.navigateTo({url:e})},v=e.ref(null),g=()=>{v.value.open()},f=e.ref([{type:"wechat",img:"/static/share/wechat.svg",backgroundColor:"#00B578",text:"微信",imgWidth:"57rpx",imgHeight:"57rpx",fn:()=>new Function},{type:"friend",img:"/static/share/friend.svg",backgroundColor:"#41B7FF",text:"朋友圈",imgWidth:"57rpx",imgHeight:"57rpx",fn:()=>new Function}]),y=()=>{v.value.close()};return(t,o)=>{const s=i(e.resolveDynamicComponent("uni-icons"),re),l=i(e.resolveDynamicComponent("uni-nav-bar"),Di),m=i(e.resolveDynamicComponent("uni-popup"),vi);return e.openBlock(),e.createElementBlock("view",{class:"test-result-box"},[e.createVNode(l,{backgroundColor:"#F4F6F8",border:!1,title:"测试结果",class:"header-bar",statusBar:!0,fixed:""},{left:e.withCtx((()=>[e.createVNode(s,{type:"left",size:"24",onClick:a})])),_:1}),e.createElementVNode("view",{class:"test-result-content-box"},[e.createElementVNode("view",{class:"test-result-content"},[e.createElementVNode("view",{class:"content"},[e.createElementVNode("view",{class:"banner"},[e.createElementVNode("image",{src:c.value?c.value:"@/static/forum/bg.png",mode:"aspectFill",class:"img"},null,8,["src"])]),e.createElementVNode("view",{class:"result-analysis-box"},[e.createElementVNode("view",{class:"tip"},"结果分析"),e.createElementVNode("view",{class:"title"},e.toDisplayString(p.value),1),e.createElementVNode("view",{class:"result"},e.toDisplayString(r.value),1)])])])]),e.createElementVNode("view",{class:"footer-box"},[e.createElementVNode("view",{class:"footer-content"},[e.createElementVNode("view",{onClick:o[0]||(o[0]=e=>h(`/pages/psychological-test/comment/comment?examId=${n.value}&id=${u.value}`))},[e.createElementVNode("image",{src:"/static/psychological-test/comment.svg"}),e.createElementVNode("text",null,e.toDisplayString(0==d.value?"去评价":"已评价"),1)]),e.createElementVNode("view",{onClick:g},[e.createElementVNode("image",{src:"/static/psychological-test/save-share.svg"}),e.createElementVNode("text",null,"保存分享")]),e.createElementVNode("view",{onClick:o[1]||(o[1]=e=>h("/pages/psychological-test/contact-consult/contact-consult"))},[e.createElementVNode("image",{src:"/static/psychological-test/send-consult.svg"}),e.createElementVNode("text",null,"发送咨询师 ")]),e.createElementVNode("view",{class:"new-consult-btn"},"新人0元倾诉")])]),e.createVNode(m,{ref_key:"share",ref:v,"background-color":"#fff","is-mask-click":!1,borderRadius:"24rpx 24rpx 0rpx 0rpx",type:"bottom"},{default:e.withCtx((()=>[e.createElementVNode("view",{class:"share-popup-box"},[e.createElementVNode("view",{class:"share-content"},[e.createElementVNode("view",{class:"title"},"分享到"),e.createElementVNode("view",{class:"share-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(f.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"share-item",key:a,onClick:t.fn},[e.createElementVNode("view",{class:"share-item-img",style:e.normalizeStyle({backgroundColor:t.backgroundColor})},[e.createElementVNode("image",{src:t.img,class:"img",style:e.normalizeStyle({width:t.imgWidth,height:t.imgHeight}),mode:"widthFix"},null,12,["src"])],4),e.createElementVNode("view",{class:"txt"},e.toDisplayString(t.text),1)],8,["onClick"])))),128))]),e.createElementVNode("view",{class:"cancel",onClick:y}," 取消 ")])])])),_:1},512)])}}},xl=ie(El,[["__scopeId","data-v-064043c5"]]),Nl={__name:"charge-test",setup(t){const a=e.ref(0),n=e.ref(""),r=e.ref([]),s=e.ref({}),c=e.ref({rating:1,ratio:80,num:100}),u=e.ref([]);l((e=>{a.value=e.id,k(),_(),g(),d(),v()}));const d=async()=>{let e=await((e,t={})=>A.get("/api/psychology/exam/commentInfo",e,t))({id:a.value});c.value=e.data},m=e.ref(1),p=e.ref(20),h=e.ref(!0),v=async()=>{let e=await((e,t={})=>A.get("/api/psychology/exam/commentList",e,t))({id:a.value,page:m.value,count:p.value});o("log","at pages/psychological-test/charge-test/charge-test.vue:190",e),u.value=e.data.records,e.total<=u.value.length?h.value=!1:h.value=!0},g=async()=>{let e=await rl({size:2});r.value=e.data},f=()=>{uni.navigateTo({url:"/pages/psychological-test/test-type/test-type"})},y=()=>{o("log","at pages/psychological-test/charge-test/charge-test.vue:212","reach bottom"),h.value&&(m.value++,v())},_=async()=>{let e=await((e,t={})=>A.get("/api/config/examRuleDescription",e,t))();n.value=e.data},k=async()=>{let e=await((e,t={})=>A.get("/api/psychology/exam/paperDetail",e,t))({id:a.value});o("log","at pages/psychological-test/charge-test/charge-test.vue:228",e),s.value=e.data},E=()=>{uni.navigateBack({delta:1})},x=()=>{0==s.value.payType&&uni.navigateTo({url:"/pages/psychological-test/start-test/start-test?title="+s.value.title+"&id="+s.value.id})};return(t,a)=>{const o=i(e.resolveDynamicComponent("uni-icons"),re),l=i(e.resolveDynamicComponent("uni-nav-bar"),Di),d=i(e.resolveDynamicComponent("uni-rate"),Ai),m=i(e.resolveDynamicComponent("uni-dateformat"),ml);return e.openBlock(),e.createElementBlock("view",{class:"charge-test-box"},[e.createElementVNode("scroll-view",{"scroll-y":"true",class:"scroll-content","show-scrollbar":!1,onScrolltolower:y},[e.createVNode(l,{backgroundColor:"#9DDDC7",border:!1,title:"",class:"header-bar",statusBar:!0,fixed:""},{left:e.withCtx((()=>[e.createVNode(o,{type:"left",size:"24",onClick:E})])),right:e.withCtx((()=>[e.createElementVNode("view",{class:"right"},[e.createElementVNode("image",{src:Ri,class:"img",style:{width:"40rpx",height:"40rpx"}})])])),_:1}),e.createElementVNode("view",{class:"charge-test-content-box"},[e.createElementVNode("view",{class:"content-box"},[e.createElementVNode("view",{class:"content-banner"},[e.createElementVNode("image",{src:null==s.value.icon?"@/static/forum/bg.png":s.value.icon,mode:"aspectFill",class:"img"},null,8,["src"]),e.createElementVNode("view",{class:"banner-text"},[e.createElementVNode("text",{style:{color:"white","font-size":"42rpx"}},e.toDisplayString(s.value.title),1),e.createElementVNode("text",{style:{color:"white","font-size":"28rpx"}},e.toDisplayString(s.value.oneWord),1)])]),e.createElementVNode("view",{class:"charge-test-options"},[e.createElementVNode("view",{class:"option-item"},[e.createElementVNode("text",{class:"weight"},e.toDisplayString(s.value.examNum),1),e.createTextVNode("人已测 ")]),e.createElementVNode("view",{class:"option-item"},[e.createElementVNode("text",{class:"weight"},e.toDisplayString(s.value.examOptionNum)+"道",1),e.createTextVNode("精选问题 ")]),e.createElementVNode("view",{class:"option-item"},[e.createElementVNode("text",{class:"weight"},"16页"),e.createTextVNode("专业报告 ")])]),e.createElementVNode("view",{class:"content-info"},e.toDisplayString(s.value.description),1)]),e.createElementVNode("view",{class:"test-notice"},[e.createElementVNode("view",{class:"test-notice-content"},[e.createElementVNode("view",{class:"title"},"评测须知"),e.createElementVNode("view",{class:"info"},[e.createElementVNode("rich-text",{nodes:n.value},null,8,["nodes"])])])]),e.createElementVNode("view",{class:"recommend-content-box"},[e.createElementVNode("view",{class:"recommend-content"},[e.createElementVNode("view",{class:"recommend-content-header"},[e.createElementVNode("view",{class:"title"}," 相关推荐 "),e.createElementVNode("view",{class:"label",onClick:f},[e.createTextVNode("更多"),e.createVNode(o,{type:"right",size:"12"})])]),e.createElementVNode("view",{class:"content-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"content-item",key:a},[e.createElementVNode("view",{class:"content-item-content"},[e.createElementVNode("view",null,[e.createElementVNode("view",{class:"title"},e.toDisplayString(t.title),1),e.createElementVNode("view",{class:"remark"},e.toDisplayString(t.oneWord),1),1==t.payType?(e.openBlock(),e.createElementBlock("view",{key:0,class:"price-box"},[e.createElementVNode("text",{class:"price"},"￥"+e.toDisplayString(t.discountPrice),1),e.createElementVNode("text",{class:"under-price"},"￥"+e.toDisplayString(t.price),1)])):e.createCommentVNode("",!0),e.createElementVNode("view",{class:"test-handler"},[e.createElementVNode("view",{class:"handler-btn"},"去测试"),e.createElementVNode("view",{class:"use-test"},[e.createElementVNode("text",{class:"num"},e.toDisplayString(t.examNum),1),e.createTextVNode("人已测")])])]),e.createElementVNode("view",{class:"img-box"},[e.createElementVNode("image",{src:t.icon?t.icon:"@/static/consult/user.png",mode:"aspectFill",class:"img"},null,8,["src"])])])])))),128))])])]),e.createElementVNode("view",{class:"user-comment-content-box"},[e.createElementVNode("view",{class:"user-comment-content"},[e.createElementVNode("view",{class:"user-comment-content-header"},[e.createElementVNode("view",{class:"title"}," 用户评价 ")]),e.createElementVNode("view",{class:"comment-content-list"},[e.createElementVNode("view",{class:"comment-list-header"},[e.createElementVNode("view",{class:"left"},[e.createElementVNode("view",{class:"star"},[e.createElementVNode("text",null,e.toDisplayString(c.value.rating),1),e.createVNode(d,{readonly:!0,value:c.value.rating,size:"12"},null,8,["value"])]),e.createElementVNode("view",{class:"txt"},"评分")]),e.createElementVNode("view",{class:"right"},[e.createElementVNode("view",{class:"comment-num"},[e.createElementVNode("view",{class:"num"},e.toDisplayString(c.value.num>2e3?"2000+":c.value.num),1),e.createElementVNode("view",{class:"txt"},"真实评价")]),e.createElementVNode("view",{class:"percent"},[e.createElementVNode("view",{class:"num"},e.toDisplayString(c.value.ratio)+"%",1),e.createElementVNode("view",{class:"txt"},"满意度")])])]),u.value.length>0?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(u.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"comment-content-item",key:a},[e.createElementVNode("view",{class:"content-item-header"},[e.createElementVNode("view",{class:"left"},[e.createElementVNode("view",null,[e.createElementVNode("image",{src:t.avatar?t.avatar:"@/static/my/profile.png",mode:"aspectFill",class:"img"},null,8,["src"])]),e.createElementVNode("view",null,e.toDisplayString(t.real_name),1)]),e.createElementVNode("view",{class:"right"},[e.createVNode(m,{format:"yyyy-MM-dd hh:mm:ss",date:t.create_time},null,8,["date"])])]),e.createElementVNode("view",{class:"content"},e.toDisplayString(t.content),1)])))),128)):(e.openBlock(),e.createElementBlock("view",{key:1,style:{height:"200rpx",display:"flex","justify-content":"center","align-items":"center"}},[e.createElementVNode("text",null,"暂无数据~")]))])])])])],32),e.createElementVNode("view",{class:"footer"},[e.createElementVNode("view",{class:"price-box"},[1==s.value.payType?(e.openBlock(),e.createElementBlock("view",{key:0,class:"price"},[e.createElementVNode("text",{class:"use-price"},"¥"+e.toDisplayString(s.value.discountPrice),1),e.createElementVNode("text",{class:"under-price"},"¥"+e.toDisplayString(s.value.price),1)])):(e.openBlock(),e.createElementBlock("view",{key:1,class:"price"},"免费")),e.createElementVNode("view",{class:"txt"},"开通会员享受免费测试")]),e.createElementVNode("view",{class:"member"},"会员免费"),e.createElementVNode("view",{class:"start-test",onClick:x},"立即测试")])])}}},wl=ie(Nl,[["__scopeId","data-v-e2686b4f"]]),Cl=ie({__name:"free-test",setup(t){const a=()=>{uni.navigateBack({delta:1})},n=()=>{uni.navigateTo({url:"/pages/psychological-test/start-test/start-test"})};return(t,o)=>{const r=i(e.resolveDynamicComponent("uni-icons"),re),s=i(e.resolveDynamicComponent("uni-nav-bar"),Di);return e.openBlock(),e.createElementBlock("view",{class:"free-test-box"},[e.createElementVNode("scroll-view",{"scroll-y":"true",class:"scroll-content","show-scrollbar":!1},[e.createVNode(s,{backgroundColor:"#f4f6f8",border:!1,title:"心理测试",class:"header-bar",statusBar:!0,fixed:""},{left:e.withCtx((()=>[e.createVNode(r,{type:"left",size:"24",onClick:a})])),right:e.withCtx((()=>[e.createElementVNode("view",{class:"right"},[e.createElementVNode("image",{src:Ri,class:"img",style:{width:"40rpx",height:"40rpx"}})])])),_:1}),e.createElementVNode("view",{class:"free-test-content-box"},[e.createElementVNode("view",{class:"content-box"},[e.createElementVNode("view",{class:"content-banner"},[e.createElementVNode("image",{src:"/static/forum/bg.png",class:"img"})]),e.createElementVNode("view",{class:"free-test-options"},[e.createElementVNode("view",{class:"option-item"},[e.createElementVNode("text",{class:"weight"},"23.4W"),e.createTextVNode("人已测 ")]),e.createElementVNode("view",{class:"option-item"},[e.createElementVNode("text",{class:"weight"},"49道"),e.createTextVNode("精选问题 ")]),e.createElementVNode("view",{class:"option-item"},[e.createElementVNode("text",{class:"weight"},"16页"),e.createTextVNode("专业报告 ")])]),e.createElementVNode("view",{class:"content-info"}," 很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人 很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人 很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人 很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人 很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人 "),e.createElementVNode("view",{class:"start-test",onClick:n},"开始测试")]),e.createElementVNode("view",{class:"recommend-content-box"},[e.createElementVNode("view",{class:"recommend-content"},[e.createElementVNode("view",{class:"recommend-content-header"},[e.createElementVNode("view",{class:"title"}," 相关推荐 "),e.createElementVNode("view",{class:"label"},[e.createTextVNode("更多"),e.createVNode(r,{type:"right",size:"12"})])]),e.createElementVNode("view",{class:"content-list"},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(2,(t=>e.createElementVNode("view",{class:"content-item",key:t},[e.createElementVNode("view",{class:"content-item-content"},[e.createElementVNode("view",null,[e.createElementVNode("view",{class:"title"},"潜意识投射测试"),e.createElementVNode("view",{class:"remark"},"14张图片，揭露你的潜意识"),e.createElementVNode("view",{class:"price-box"},[e.createElementVNode("text",{class:"price"},"￥19.9"),e.createElementVNode("text",{class:"under-price"},"￥59.9")]),e.createElementVNode("view",{class:"test-handler"},[e.createElementVNode("view",{class:"handler-btn"},"去测试"),e.createElementVNode("view",{class:"use-test"},[e.createElementVNode("text",{class:"num"},"23.4W"),e.createTextVNode("人已测")])])]),e.createElementVNode("view",{class:"img-box"},[e.createElementVNode("image",{src:Xi,class:"img"})])])]))),64))])])])])])])}}},[["__scopeId","data-v-9b9b6688"]]),Ml="/static/message/jianpan.png";class Sl{constructor(e,t){__publicField(this,"emojiMap",null),__publicField(this,"url",""),__publicField(this,"patterns",[]),__publicField(this,"metaChars",/[[\]{}()*+?.\\|^$\-,&#\s]/g),this.url=e||"",this.emojiMap=t||{};for(let a in this.emojiMap)this.emojiMap.hasOwnProperty(a)&&this.patterns.push("("+a.replace(this.metaChars,"\\$&")+")")}decode(e){return e.replace(new RegExp(this.patterns.join("|"),"g"),(e=>void 0!==this.emojiMap[e]?'<img height="20rpx" width="20rpx" src="'+this.url+this.emojiMap[e]+'" />':e))}}class Il{constructor(){__publicField(this,"recorder",null),__publicField(this,"uniStartTime",null),__publicField(this,"recording",!1),__publicField(this,"onRecordingComplete",null),this.recorder=uni.getRecorderManager()}onRecordComplete(e){this.onRecordingComplete=e,this.initUniRecorder()}initUniRecorder(){this.recorder.onStop((e=>{const t=Date.now()-this.uniStartTime;e.duration=t,this.onRecordingComplete(e,t)}))}authorize(){return new Promise(((e,t)=>{if("iOS"===plus.os.name){var a=plus.ios.import("AVAudioSession"),n=a.sharedInstance().recordPermission();1684369017!==n&&1970168948!==n||o("log","at lib/RecorderManager.js:66","麦克风权限没有开启"),plus.ios.deleteObject(a),e()}else plus.android.requestPermissions(["android.permission.RECORD_AUDIO"],(a=>{a.granted.length?e():t("已拒绝")}),(e=>{o("error","at lib/RecorderManager.js:77",`申请权限错误：${e.code} = ${e.message}`),t()}))}))}start(){this.recording=!0;try{this.recorder.start({duration:6e5}),this.uniStartTime=Date.now()}catch(Ft){o("log","at lib/RecorderManager.js:115",Ft)}}stop(){this.recording=!1;try{this.recorder.stop()}catch(Ft){o("log","at lib/RecorderManager.js:138",Ft)}}}const Tl=(e=new Date)=>{e instanceof Date&&!isNaN(e.getTime())||(e=new Date);const t=e.getFullYear(),a=e.getMonth(),n=e.getDate();return new Date(t,a,n).getTime()},Dl=e=>{if(!e||isNaN(Number(e)))return"未知时间";const t=1e3*Number(e),a=new Date(t);if(isNaN(a.getTime()))return"未知时间";const n=e=>`${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`,o=Tl(),i=o-864e5;if(t>=o)return n(a);if(t>=i&&t<o)return`昨天 ${n(a)}`;return`${(a.getMonth()+1).toString().padStart(2,"0")}-${a.getDate().toString().padStart(2,"0")} ${n(a)}`},bl=(e,t)=>{if(!Array.isArray(t)||0===t.length)return!1;if(e<0||e>=t.length)return!1;if(0===e)return!0;const a=t[e],n=t[e-1];if(!(a&&n&&a.time&&n.time))return!0;const o=1e3*Number(a.time),i=1e3*Number(n.time);return(o-i)/6e4>5||(r=o,s=i,!(!isNaN(r)&&!isNaN(s)&&Tl(new Date(r))===Tl(new Date(s))));var r,s};function Vl(){const t=e.reactive({SDKAppID:"",userID:"",userSig:"",calleeUserID:"",callMediaType:2,tuiCallKit:null,expireSeconds:86400,eventCallback:null}),a=()=>{t.tuiCallKit&&t.eventCallback&&t.tuiCallKit.callTUICallKit({action:"offCallEvent",params:{callback:t.eventCallback}}),t.tuiCallKit=null,t.userSig="",t.calleeUserID="",t.eventCallback=null,o("log","at utils/tencentCallKit.js:167","✅ 通话资源已全部销毁，状态重置完成")};return{startCall:async e=>{try{a();const{SDKAppID:i,userID:r,calleeUserID:s,callMediaType:l,expireSeconds:c}=e;return t.SDKAppID=i,t.userID=r,t.calleeUserID=s,t.callMediaType=l||2,t.expireSeconds=c||t.expireSeconds,o("log","at utils/tencentCallKit.js:101","📤 开始发起通话参数：",e),(()=>{const e=n("TencentCloud-TUICallKit");if(!e)throw new Error("加载腾讯云插件失败，请检查是否已在uniapp后台安装9035云端插件");if("function"!=typeof e.callTUICallKit)throw new Error("当前插件非新版9035，或插件加载异常，请重新打包真机测试");t.tuiCallKit=e,o("log","at utils/tencentCallKit.js:34","✅ 新版TUICallKit插件加载成功")})(),await(async()=>{var e;try{const a=await ri({expireSeconds:t.expireSeconds,userId:t.userID});if(null==(e=a.data)?void 0:e.userSig)return t.userSig=a.data.userSig,o("log","at utils/tencentCallKit.js:47","✅ UserSig签名获取成功",t.userSig),Promise.resolve();throw new Error("UserSig获取失败："+(a.msg||"接口返回数据异常"))}catch(a){throw new Error("签名接口请求失败："+(a.message||"网络异常，请重试"))}})(),(()=>{t.eventCallback&&t.tuiCallKit.callTUICallKit({action:"offCallEvent",params:{callback:t.eventCallback}});const e=e=>{o("log","at utils/tencentCallKit.js:68","📞 通话状态回调：",e);const{type:t,message:n}=e;switch(t){case 1001:uni.showToast({title:"对方正在通话中",icon:"none",duration:3e3});break;case 1002:uni.showToast({title:"对方无人接听",icon:"none",duration:3e3});break;case 1003:uni.showToast({title:"对方拒绝接听通话",icon:"none",duration:3e3});break;case 2001:uni.showToast({title:"通话已接通",icon:"none",duration:2e3});break;case 2002:uni.showToast({title:"通话已挂断",icon:"none"}),a();break;case 3001:uni.showToast({title:"通话异常："+n,icon:"none"}),a()}};t.eventCallback=e,t.tuiCallKit.callTUICallKit({action:"onCallEvent",params:{callback:e}})})(),t.tuiCallKit.callTUICallKit({action:"call",params:{SDKAppID:Number(t.SDKAppID),userID:t.userID,userSig:t.userSig,calleeUserID:t.calleeUserID,callMediaType:t.callMediaType,isFromGroup:!1},callback:e=>{0===e.code?o("log","at utils/tencentCallKit.js:122","✅ 通话已发起，等待对方接听"):(uni.showToast({title:"拨打失败："+e.message,icon:"none",duration:3e3}),a())}}),Promise.resolve("发起通话成功")}catch(i){return o("error","at utils/tencentCallKit.js:131","❌ 发起通话失败",i),uni.showToast({title:i.message,icon:"none",duration:3500}),a(),Promise.reject(i)}},hangupCall:()=>{t.tuiCallKit&&(t.tuiCallKit.callTUICallKit({action:"hangup",params:{},callback:e=>{0===e.code&&o("log","at utils/tencentCallKit.js:146","✅ 已主动挂断通话")}}),a())},destroy:a}}const Al="https://imgcache.qq.com/open/qcloud/tim/assets/emoji/",Ll={__name:"private-chat",setup(t){e.useCssVars((e=>({"140835bc":d.value})));const a=n("TencentCloud-TUICallKit");uni.showToast({title:a,icon:"none"});const r=ae(),d=e.ref(r.statusBarHeight+"px"),m=()=>{uni.navigateBack({delta:1})},h=e.ref("");let v=null,g="";const{tim:f,isLogin:y,userId:_,sdkReady:k,checkLoginStatus:E,waitSDKReady:x,onTIMEvent:N}=lr("1600116083"),w=e.ref();let{avatar:C}=uni.getStorageSync("currentUser");w.value=C;const M=e.getCurrentInstance(),S={"[么么哒]":"emoji_3@2x.png","[乒乓]":"emoji_4@2x.png","[便便]":"emoji_5@2x.png","[信封]":"emoji_6@2x.png","[偷笑]":"emoji_7@2x.png","[傲慢]":"emoji_8@2x.png","[咪咪]":"emoji_9@2x.png","[咖啡]":"emoji_10@2x.png"},I=e.reactive(new Il),T=e.reactive({url:Al,map:S,visible:!1,decoder:new Sl(Al,S)}),D=e.ref(!1),b=e.reactive({orders:[],visible:!1}),V=e.reactive({messages:[],allLoaded:!1,loading:!0,nextReqMessageID:""}),L=e.ref(!1),R=uni.createInnerAudioContext(),O=e.reactive({audio:{},playingMessage:null}),B=e.reactive({visible:!1,url:"",context:null}),P=e.reactive({visible:!1,message:null,recallable:!1}),U=e.reactive({messages:[],visible:!1,ids:[]});l((e=>{let t=e.to,a=e.name;v={id:t,name:a,avatar:e.avatar},g=`C2C${t}`,E().then((e=>{e&&(z(),R.onEnded((()=>{O.playingMessage=null})),R.onStop((()=>{O.playingMessage=null})),Y(),xe())})),se(!0),H()})),s((()=>{D.value=!1,T.visible=!1,y.value&&k.value&&z()})),c((async()=>{y.value&&k.value&&se(!0),B.context=uni.createVideoContext("videoPlayer",M)}));const G=e.ref(!1);function F(e){return"<span>"+T.decoder.decode(e.payload.text)+"</span>"}p((()=>{o("log","at pages/message/private-chat.vue:387",12312312312312312e11),G.value?uni.stopPullDownRefresh():se(!0)}));const{EVENT:q}=tr,z=()=>{if(!f.value)return void o("warn","at pages/message/private-chat.vue:418","TIM 实例未初始化，跳过事件监听注册");const{MESSAGE_RECEIVED:e,MESSAGE_REVOKED:t,MESSAGE_READ_BY_PEER:a}=q;f.value.off(e,$),f.value.off(t,j),f.value.off(a,K),N(e,$),N(t,j),N(a,K),N(q.SDK_READY,(()=>{o("log","at pages/message/private-chat.vue:437","SDK 就绪，加载历史消息 + 确保事件监听生效"),se(!0)}))},H=()=>{f.value.getUserStatus({userIDList:[v.id]})},$=e=>{if(o("log","at pages/message/private-chat.vue:447","[实时消息事件触发]",e.data,"当前会话ID：",g),!e.data||!Array.isArray(e.data))return void o("warn","at pages/message/private-chat.vue:449","消息数据格式异常",e);e.data.forEach((e=>{if(e.conversationID===g){o("log","at pages/message/private-chat.vue:456","[收到当前会话消息]",e);V.messages.some((t=>t.ID===e.ID))||(V.messages.push(e),fe(),async function(e){if(e.from!==_)try{await x(),await f.value.setMessageRead({conversationID:g,messageID:e.ID})}catch(t){o("warn","at pages/message/private-chat.vue:1081","标记消息已读失败:",t)}}(e))}}))};function j(e){const t=e.data[0],a=V.messages.findIndex((e=>e.ID===t.ID));-1!==a&&V.messages.splice(a,1,t)}function K(e){const{conversationID:t,readTime:a}=e.data;t===g&&V.messages.forEach((e=>{e.from===_&&e.time<=a&&(e.read=!0)}))}const Y=()=>{I.onRecordComplete(((e,t)=>{t<1e3?uni.showToast({icon:"none",title:"录音时间太短",duration:500}):W(e,t)}))},W=async(e,t)=>{if(await ye())try{await x();J(f.value.createSoundMessage({to:v.id,soundBase64:e.base64,fileSize:e.size,duration:Math.round(t)}))}catch(a){o("error","at pages/message/private-chat.vue:533","创建语音消息失败:",a)}};async function J(e){try{await x(),e.status="sending",V.messages.push(e),fe();const{data:{message:t}}=await f.value.sendMessage(e),a=V.messages.findIndex((e=>e.ID===t.ID));-1!==a&&V.messages.splice(a,1,t)}catch(t){o("warn","at pages/message/private-chat.vue:572","sendMessage error:",t);const a=V.messages.findIndex((t=>t.ID===e.ID));-1!==a&&(V.messages[a].status="fail")}}const Z=async()=>{try{const e=f.value.createTextMessage({to:v.id,conversationType:tr.TYPES.CONV_C2C,payload:{text:h.value}});await J(e),h.value=""}catch(e){o("error","at pages/message/private-chat.vue:602","发送文本消息失败:",e)}};function X(){P.visible=!1,P.message=null}function Q(){uni.showModal({content:"确认删除？",success:e=>{P.visible=!1,e.confirm&&te()}})}function ee(){U.messages.length>0&&uni.showModal({content:"确认删除？",success:e=>{U.visible=!1,e.confirm&&te()}})}async function te(){try{await x();const e=U.messages.map((e=>e.ID));await f.value.deleteMessage(e),U.messages.forEach((e=>{const t=V.messages.findIndex((t=>t.ID===e.ID));t>-1&&V.messages.splice(t,1)})),U.messages=[]}catch(e){o("warn","at pages/message/private-chat.vue:751","deleteMessage error:",e)}}async function ne(){P.visible=!1;try{await x(),await f.value.revokeMessage(P.message.ID),o("log","at pages/message/private-chat.vue:766","撤回成功")}catch(e){o("warn","at pages/message/private-chat.vue:768","撤回失败:",e),uni.showToast({title:"撤回失败",icon:"none"})}}function oe(){U.messages=[],U.visible=!0,P.visible=!1}function ie(e){const t=e.detail.value;let a=[];V.messages.forEach((e=>{t.includes(e.ID)&&a.push(e)})),U.messages=a}const se=async e=>{V.loading=!0;try{await x();const t=10,a={conversationID:g,count:t};V.nextReqMessageID&&(a.nextReqMessageID=V.nextReqMessageID);const{data:n}=await f.value.getMessageList(a);uni.stopPullDownRefresh(),V.loading=!1;const{messageList:i,nextReqMessageID:r,isCompleted:s}=n;if(G.value=s,0===i.length)return void(V.allLoaded=!0);V.nextReqMessageID?V.messages=[...i,...V.messages]:V.messages=i,V.nextReqMessageID=r,i.length<t&&(V.allLoaded=!0),e&&(fe(),async function(){try{await x(),await f.value.setMessageRead({conversationID:g}),o("log","at pages/message/private-chat.vue:1061","标记会话已读成功")}catch(e){o("warn","at pages/message/private-chat.vue:1063","标记会话已读失败:",e)}}())}catch(t){o("warn","at pages/message/private-chat.vue:859","getMessageList error:",t),uni.stopPullDownRefresh(),V.loading=!1}};function le(){L.value=!L.value,L.value&&I.authorize().then((()=>{o("log","at pages/message/private-chat.vue:874","录音权限获取成功")})).catch((e=>{o("log","at pages/message/private-chat.vue:877","err:",e),uni.showModal({title:"获取录音权限失败",content:"请先授权才能发送语音消息！"})}))}function ce(){I.start()}function ue(){I.stop()}function de(e){B.visible&&!e.detail.fullScreen&&(B.visible=!1,B.context.stop())}function me(){T.visible=!T.visible,D.value=!1}const{startCall:pe,hangupCall:he,destroy:ve}=Vl(),ge=async e=>{o("log","at pages/message/private-chat.vue:1018",{SDKAppID:"1600116083",userID:uni.getStorageSync("currentUser").id,calleeUserID:v.id,callMediaType:e});try{const t=uni.getStorageSync("currentUser");await pe({SDKAppID:"1600116083",userID:t.id,calleeUserID:v.id,callMediaType:e})}catch(t){o("error","at pages/message/private-chat.vue:1034","发起通话失败",t)}};function fe(){e.nextTick((()=>{uni.pageScrollTo({scrollTop:2e6,duration:0})}))}async function ye(e=""){try{const t=uni.getStorageSync("currentUser");if(!(t&&t.id&&v&&v.id))return uni.showToast({title:"用户信息不完整",icon:"none"}),!1;const a={fromUserId:t.id,toUserId:v.id,content:e,ordered:!1},{data:n,code:o}=await((e,t={})=>A.post("/api/chat/policy/check",e,t))(a);if(0!==o)return uni.showToast({title:n.msg||"检查失败",icon:"none"}),!1;if(!n.allowed){let e=n.message||"发送消息失败";if(!e)switch(n.limitType){case"SENSITIVE":e="消息包含敏感词，请修改后重试";break;case"FREE_LIMIT":e=`未下单，剩余免费条数: ${n.remainFreeMessages}`;break;case"RATE_LIMIT":e="发送频率过高，请稍后再试";break;case"COMPLAINT_RESTRICT":e="因被投诉，您的消息发送受到限制";break;case"BANNED":e="您已被封禁，无法发送消息";break;default:e="不允许发送消息"}return uni.showToast({title:e,icon:"none"}),!1}return!0}catch(t){return o("error","at pages/message/private-chat.vue:1147","检查消息发送权限失败:",t),uni.showToast({title:"检查权限失败",icon:"none"}),!1}}const _e=e.reactive([{name:"备注",type:"remark"},{name:"关注",type:"attention"},{name:"置顶",type:"top"},{name:"举报/投诉",type:"report"},{name:"取消",type:"cancel"}]),ke=e.ref(null),Ee=()=>{ke.value.open("bottom")},xe=async()=>{if(a)try{const e=await(async()=>new Promise(((e,t)=>{plus.android.requestPermissions(["android.permission.CAMERA","android.permission.RECORD_AUDIO"],(a=>{a.every((e=>e.granted))?e(!0):(uni.showToast({title:"请授予相机和麦克风权限，否则无法使用通话功能",icon:"none",duration:3e3}),t(!1))}),(e=>{uni.showToast({title:"权限申请失败："+e.message,icon:"none"}),t(!1)}))})))();if(!e)return;const t=uni.getStorageSync("currentUser");if(!t||!t.id)return uni.showToast({title:"请先登录",icon:"none"}),!1;const{data:n}=await ri({userId:t.id});if(!n.userSig)return uni.showToast({title:"获取通话签名失败",icon:"none"}),!1;const i=a.init({sdkAppID:1600116083,userId:t.id,userSig:n.userSig});return 0===i.code?(o("log","at pages/message/private-chat.vue:1264","TUICallKit初始化成功"),Ne(),!0):(o("error","at pages/message/private-chat.vue:1268","TUICallKit初始化失败:",i.msg),uni.showToast({title:"初始化通话失败",icon:"none"}),!1)}catch(e){return o("error","at pages/message/private-chat.vue:1273","初始化通话异常:",e),uni.showToast({title:"初始化通话异常",icon:"none"}),!1}},Ne=()=>{a&&a.setListener((e=>{switch(e.type){case"callReceived":we(e.data);break;case"callBegin":uni.showToast({title:"通话开始",icon:"none"});break;case"callEnd":uni.showToast({title:`通话结束，时长${e.data.duration}秒`,icon:"none"});break;case"callFailed":uni.showToast({title:`通话失败: ${e.data.message}`,icon:"none"})}}))},we=e=>{a&&uni.showModal({title:`收到${1===e.callType?"视频":"语音"}通话`,content:`来自 ${e.caller} 的通话`,showCancel:!0,confirmText:"接听",cancelText:"挂断",success:t=>{t.confirm?a.accept({callID:e.callID}):t.cancel&&a.reject({callID:e.callID})}})};return u((()=>{R.stop(),a&&(a.hangupAll(),a.removeListener()),f.value&&(f.value.off(f.value.EVENT.MESSAGE_RECEIVED,$),f.value.off(f.value.EVENT.MESSAGE_REVOKED,j),f.value.off(f.value.EVENT.MESSAGE_READ_BY_PEER,K)),ve()})),(t,a)=>{const n=i(e.resolveDynamicComponent("uni-icons"),re),r=i(e.resolveDynamicComponent("uni-nav-bar"),Di),s=i(e.resolveDynamicComponent("uni-popup"),vi);return e.openBlock(),e.createElementBlock("view",{class:"settled-box"},[e.createElementVNode("view",{class:"header"},[e.createVNode(r,{class:e.normalizeClass([t.scrollTop>15?"scrollClass":"","header-bar"]),backgroundColor:"rgba(255,255,255,0)",border:!1,leftWidth:"300rpx"},{left:e.withCtx((()=>[e.createVNode(n,{type:"left",size:"24",onClick:m}),e.createElementVNode("image",{src:e.unref(v).avatar,style:{width:"50rpx",height:"50rpx","border-radius":"50%",margin:"0 10rpx"}},null,8,["src"]),e.createElementVNode("view",null,e.toDisplayString(e.unref(v).name),1)])),container:e.withCtx((()=>[])),right:e.withCtx((()=>[e.createElementVNode("view",{class:"right",onClick:Ee},[e.createVNode(n,{type:"more-filled",size:"30",onClick:t.moreFn},null,8,["onClick"])])])),_:1},8,["class"]),e.createElementVNode("view",{class:"uni-padding-wrap"},[e.createVNode(n,{type:"info",size:"15",color:"#FF8F1F"}),e.createElementVNode("view",null,"为了保障您的合法权益，请不要脱离平台与老师私下联系、缴费。")])]),e.createElementVNode("view",{class:"scroll-view"},[e.createElementVNode("view",{class:e.normalizeClass(G.value?"history-loaded":"")},[e.createElementVNode("view",null,e.toDisplayString(G.value?"已经没有更多的历史消息":""),1)],2),e.createElementVNode("checkbox-group",{onChange:ie},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(V.messages,((t,a)=>(e.openBlock(),e.createElementBlock("view",{key:t.ID},[e.unref(bl)(a,V.messages)?(e.openBlock(),e.createElementBlock("view",{key:0,class:"message-time"},e.toDisplayString(e.unref(Dl)(t.time)),1)):e.createCommentVNode("",!0),e.createElementVNode("view",{class:"message-item"},["in"===t.flow?(e.openBlock(),e.createElementBlock("view",{key:0,class:"message-item-right"},[e.createElementVNode("view",{class:"right-content"},[e.createElementVNode("image",{src:e.unref(v).avatar},null,8,["src"]),"TIMTextElem"===t.type?(e.openBlock(),e.createElementBlock("view",{key:0,class:"text-content",innerHTML:F(t)},null,8,["innerHTML"])):e.createCommentVNode("",!0)])])):(e.openBlock(),e.createElementBlock("view",{key:1,class:"message-item-left"},[e.createElementVNode("view",{class:"left-content"},["TIMTextElem"===t.type?(e.openBlock(),e.createElementBlock("view",{key:0,class:"text-content",innerHTML:F(t)},null,8,["innerHTML"])):e.createCommentVNode("",!0),e.createElementVNode("image",{src:w.value},null,8,["src"])])]))])])))),128))],32)]),B.visible||U.visible?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("view",{key:0,class:"action-box"},[e.createElementVNode("view",{class:"action-top"},[e.createElementVNode("view",{class:"action-middle"},[e.createElementVNode("view",{class:"action-item"},"立即倾诉"),e.createElementVNode("view",{class:"action-item"},"老师简介"),e.createElementVNode("view",{class:"action-item"},"查看评论")]),e.createElementVNode("view",{class:"action-bottom-box"},[e.createElementVNode("view",{onClick:le},[L.value?(e.openBlock(),e.createElementBlock("image",{key:0,class:"more",src:Ml})):(e.openBlock(),e.createElementBlock("image",{key:1,class:"more",src:"/static/message/audio.png"}))]),L.value?(e.openBlock(),e.createElementBlock("view",{key:0,class:"record-input",onTouchend:e.withModifiers(ue,["stop"]),onTouchstart:e.withModifiers(ce,["stop"])},e.toDisplayString(I.recording?"松开发送":"按住说话"),33)):e.withDirectives((e.openBlock(),e.createElementBlock("input",{key:1,"onUpdate:modelValue":a[0]||(a[0]=e=>h.value=e),onConfirm:Z,class:"consult-input",maxlength:"700",placeholder:"发送消息",type:"text"},null,544)),[[e.vModelText,h.value]]),e.createElementVNode("view",{onClick:me},[T.visible?(e.openBlock(),e.createElementBlock("image",{key:0,class:"more",src:Ml})):(e.openBlock(),e.createElementBlock("image",{key:1,class:"more",src:"/static/message/emoji.png"}))]),e.createElementVNode("view",null,[e.createElementVNode("image",{onClick:a[1]||(a[1]=e=>(D.value=!D.value,void(T.visible=!1))),class:"more",src:"/static/message/more.png"})]),h.value?(e.openBlock(),e.createElementBlock("view",{key:2,class:"send-btn-box"},[e.createElementVNode("text",{class:"btn",onClick:a[2]||(a[2]=e=>Z())},"发送")])):e.createCommentVNode("",!0)])]),T.visible?(e.openBlock(),e.createElementBlock("view",{key:0,class:"action-bottom action-bottom-emoji"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(T.map,((t,a,n)=>(e.openBlock(),e.createElementBlock("image",{class:"emoji-item",key:n,src:T.url+t,onClick:e=>function(e){h.value+=e}(a)},null,8,["src","onClick"])))),128))])):e.createCommentVNode("",!0),D.value?(e.openBlock(),e.createElementBlock("view",{key:1,class:"action-bottom"},[e.createElementVNode("view",{class:"more-icon"},[e.createElementVNode("image",{onClick:a[3]||(a[3]=e=>(async()=>{try{if(!(await ye()))return;await x(),uni.chooseImage({count:9,success:e=>{e.tempFiles.forEach((e=>{uni.getFileSystemManager().readFile({filePath:e.path,encoding:"base64",success:async t=>{const a=f.value.createImageMessage({to:v.id,imageBase64:t.data,fileName:e.name,fileSize:e.size});await J(a),D.value=!1}})}))}})}catch(e){o("error","at pages/message/private-chat.vue:639","发送图片消息失败:",e)}})()),class:"operation-icon",src:"/static/message/picture.png"}),e.createElementVNode("view",{class:"operation-title"},"图片")]),e.createElementVNode("view",{class:"more-icon"},[e.createElementVNode("image",{onClick:a[4]||(a[4]=e=>{uni.showActionSheet({itemList:["视频通话","音频通话"],success:e=>{0===e.tapIndex?ge(2):1===e.tapIndex&&ge(1)},fail:e=>{o("log","at pages/message/private-chat.vue:996",e.errMsg)}})}),class:"operation-icon",src:"/static/message/rtc.png"}),e.createElementVNode("view",{class:"operation-title"},"视频通话")])])):e.createCommentVNode("",!0)])),P.visible?(e.openBlock(),e.createElementBlock("view",{key:1,class:"action-popup",onTouchmove:a[5]||(a[5]=e.withModifiers((()=>{}),["stop","prevent"]))},[e.createElementVNode("view",{class:"layer"}),e.createElementVNode("view",{class:"action-list"},[e.createElementVNode("view",{class:"action-item",onClick:Q},"删除"),P.recallable?(e.openBlock(),e.createElementBlock("view",{key:0,class:"action-item",onClick:ne},"撤回")):e.createCommentVNode("",!0),e.createElementVNode("view",{class:"action-item",onClick:oe},"多选"),e.createElementVNode("view",{class:"action-item",onClick:X},"取消")])],32)):e.createCommentVNode("",!0),U.visible?(e.openBlock(),e.createElementBlock("view",{key:2,class:"messageSelector-box"},[e.createElementVNode("image",{class:"messageSelector-btn",onClick:ee,src:"/static/message/delete.png"})])):e.createCommentVNode("",!0),I.recording?(e.openBlock(),e.createElementBlock("view",{key:3,class:"record-loading"})):e.createCommentVNode("",!0),B.visible?(e.openBlock(),e.createElementBlock("video",{key:4,src:B.url,id:"videoPlayer",onFullscreenchange:de},null,40,["src"])):e.createCommentVNode("",!0),b.visible?(e.openBlock(),e.createElementBlock("view",{key:5,class:"order-list"},[e.createElementVNode("view",{class:"orders-content"},[e.createElementVNode("view",{class:"title"},[e.createElementVNode("view",null,"请选择一个订单"),e.createElementVNode("view",{class:"close",onClick:a[6]||(a[6]=(...e)=>t.hideOrderMessageList&&t.hideOrderMessageList(...e))},"×")]),e.createElementVNode("view",{class:"orders"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(b.orders,((t,a)=>(e.openBlock(),e.createElementBlock("view",{key:a,class:"order-item",onClick:e=>async function(e){try{await x();const t=f.value.createCustomMessage({to:v.id,data:JSON.stringify({type:"order",...e}),description:"订单消息",extension:""});await J(t),b.visible=!1,D.value=!1}catch(t){o("error","at pages/message/private-chat.vue:665","发送订单消息失败:",t)}}(t)},[e.createElementVNode("view",{class:"order-id"},"订单号："+e.toDisplayString(t.id),1),e.createElementVNode("view",{class:"order-body"},[e.createElementVNode("image",{src:t.url,class:"order-img"},null,8,["src"]),e.createElementVNode("view",{class:"order-name"},e.toDisplayString(t.name),1),e.createElementVNode("view",{class:"order-right"},[e.createElementVNode("view",{class:"order-price"},e.toDisplayString(t.price),1),e.createElementVNode("view",{class:"order-count"},"共"+e.toDisplayString(t.count)+"件",1)])])],8,["onClick"])))),128))])])])):e.createCommentVNode("",!0),e.createVNode(s,{ref_key:"popup",ref:ke,type:"message"},{default:e.withCtx((()=>[e.createElementVNode("view",{class:"popup-content"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(_e,((t,a)=>(e.openBlock(),e.createElementBlock("view",{key:a,onClick:e=>(e=>{switch(e){case"remark":o("log","at pages/message/private-chat.vue:1168","remark");break;case"attention":o("log","at pages/message/private-chat.vue:1171","attention");break;case"top":f.value.pinConversation({conversationID:g,isPinned:!0}).then((()=>{uni.showToast({title:"置顶成功",icon:"none"})}));break;case"report":uni.navigateTo({url:`/pages/settings/complaint?id=${v.id}`});break;case"cancel":ke.value.close()}ke.value.close()})(t.type),class:"popup-item"},e.toDisplayString(t.name),9,["onClick"])))),128))])])),_:1},512)])}}},Rl=ie(Ll,[["__scopeId","data-v-4a3949db"]]),Ol={name:"u-button",emits:["click","getphonenumber","getuserinfo","error","opensetting","launchapp","chooseavatar"],props:{hairLine:{type:Boolean,default:!0},type:{type:String,default:"default"},size:{type:String,default:"default"},shape:{type:String,default:"square"},plain:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},openType:{type:String,default:""},formType:{type:String,default:""},appParameter:{type:String,default:""},hoverStopPropagation:{type:Boolean,default:!1},lang:{type:String,default:"en"},sessionFrom:{type:String,default:""},sendMessageTitle:{type:String,default:""},sendMessagePath:{type:String,default:""},sendMessageImg:{type:String,default:""},showMessageCard:{type:Boolean,default:!1},hoverBgColor:{type:String,default:""},rippleBgColor:{type:String,default:""},ripple:{type:Boolean,default:!1},hoverClass:{type:String,default:""},customStyle:{type:Object,default:()=>({})},dataName:{type:String,default:""},throttleTime:{type:[String,Number],default:500},hoverStartTime:{type:[String,Number],default:20},hoverStayTime:{type:[String,Number],default:150},timerId:{type:[String,Number]}},computed:{getHoverClass(){if(this.loading||this.disabled||this.ripple||this.hoverClass)return"";let e="";return e=this.plain?"u-"+this.type+"-plain-hover":"u-"+this.type+"-hover",e},showHairLineBorder(){return["primary","success","error","warning"].indexOf(this.type)>=0&&!this.plain?"":"u-hairline-border"}},data(){return{btnTimerId:this.timerId||"button_"+Math.floor(1e8*Math.random()+0),rippleTop:0,rippleLeft:0,fields:{},waveActive:!1}},methods:{click(e){this.$u.throttle((()=>{!0!==this.loading&&!0!==this.disabled&&(this.ripple&&(this.waveActive=!1,this.$nextTick((function(){this.getWaveQuery(e)}))),this.$emit("click",e))}),this.throttleTime,!0,this.btnTimerId)},getWaveQuery(e){this.getElQuery().then((t=>{let a=t[0];if(!a.width||!a.width)return;if(a.targetWidth=a.height>a.width?a.height:a.width,!a.targetWidth)return;this.fields=a;let n="",o="";n=e.touches[0].clientX,o=e.touches[0].clientY,this.rippleTop=o-a.top-a.targetWidth/2,this.rippleLeft=n-a.left-a.targetWidth/2,this.$nextTick((()=>{this.waveActive=!0}))}))},getElQuery(){return new Promise((e=>{let t="";t=uni.createSelectorQuery().in(this),t.select(".u-btn").boundingClientRect(),t.exec((t=>{e(t)}))}))},getphonenumber(e){this.$emit("getphonenumber",e)},getuserinfo(e){this.$emit("getuserinfo",e)},error(e){this.$emit("error",e)},opensetting(e){this.$emit("opensetting",e)},launchapp(e){this.$emit("launchapp",e)},chooseavatar(e){this.$emit("chooseavatar",e)}}};const Bl=ie(Ol,[["render",function(t,a,n,o,i,r){return e.openBlock(),e.createElementBlock("button",{id:"u-wave-btn",class:e.normalizeClass(["u-btn u-line-1 u-fix-ios-appearance",["u-size-"+n.size,n.plain?"u-btn--"+n.type+"--plain":"",n.loading?"u-loading":"","circle"==n.shape?"u-round-circle":"",n.hairLine?r.showHairLineBorder:"u-btn--bold-border","u-btn--"+n.type,n.disabled?`u-btn--${n.type}--disabled`:""]]),"hover-start-time":Number(n.hoverStartTime),"hover-stay-time":Number(n.hoverStayTime),disabled:n.disabled,"form-type":n.formType,"open-type":n.openType,"app-parameter":n.appParameter,"hover-stop-propagation":n.hoverStopPropagation,"send-message-title":n.sendMessageTitle,"send-message-path":"sendMessagePath",lang:n.lang,"data-name":n.dataName,"session-from":n.sessionFrom,"send-message-img":n.sendMessageImg,"show-message-card":n.showMessageCard,onGetphonenumber:a[0]||(a[0]=(...e)=>r.getphonenumber&&r.getphonenumber(...e)),onGetuserinfo:a[1]||(a[1]=(...e)=>r.getuserinfo&&r.getuserinfo(...e)),onError:a[2]||(a[2]=(...e)=>r.error&&r.error(...e)),onOpensetting:a[3]||(a[3]=(...e)=>r.opensetting&&r.opensetting(...e)),onLaunchapp:a[4]||(a[4]=(...e)=>r.launchapp&&r.launchapp(...e)),onChooseavatar:a[5]||(a[5]=(...e)=>r.chooseavatar&&r.chooseavatar(...e)),style:e.normalizeStyle([n.customStyle,{overflow:n.ripple?"hidden":"visible"}]),onClick:a[6]||(a[6]=e.withModifiers((e=>r.click(e)),["stop"])),"hover-class":r.getHoverClass,loading:n.loading},[e.renderSlot(t.$slots,"default",{},void 0,!0),n.ripple?(e.openBlock(),e.createElementBlock("view",{key:0,class:e.normalizeClass(["u-wave-ripple",[i.waveActive?"u-wave-active":""]]),style:e.normalizeStyle({top:i.rippleTop+"px",left:i.rippleLeft+"px",width:i.fields.targetWidth+"px",height:i.fields.targetWidth+"px","background-color":n.rippleBgColor||"rgba(0, 0, 0, 0.15)"})},null,6)):e.createCommentVNode("",!0)],46,["hover-start-time","hover-stay-time","disabled","form-type","open-type","app-parameter","hover-stop-propagation","send-message-title","lang","data-name","session-from","send-message-img","show-message-card","hover-class","loading"])}],["__scopeId","data-v-942515d8"]]);function Pl(){return uni.getSystemInfoSync()}let Ul=Pl(),Gl={};const Fl=ie({name:"u-navbar",props:{height:{type:[String,Number],default:""},backIconColor:{type:String,default:"#606266"},backIconName:{type:String,default:"nav-back"},backIconSize:{type:[String,Number],default:"44"},backText:{type:String,default:""},backTextStyle:{type:Object,default:()=>({color:"#606266"})},title:{type:String,default:""},titleWidth:{type:[String,Number],default:"250"},titleColor:{type:String,default:"#606266"},titleBold:{type:Boolean,default:!1},titleSize:{type:[String,Number],default:32},isBack:{type:[Boolean,String],default:!0},background:{type:Object,default:()=>({background:"#ffffff"})},isFixed:{type:Boolean,default:!0},immersive:{type:Boolean,default:!1},borderBottom:{type:Boolean,default:!0},zIndex:{type:[String,Number],default:""},customBack:{type:Function,default:null}},data:()=>({menuButtonInfo:Gl,statusBarHeight:Ul.statusBarHeight}),computed:{navbarInnerStyle(){let e={};return e.height=this.navbarHeight+"px",e},navbarStyle(){let e={};return e.zIndex=this.zIndex?this.zIndex:this.$u.zIndex.navbar,Object.assign(e,this.background),e},titleStyle(){let e={};return e.left=(Ul.windowWidth-uni.upx2px(this.titleWidth))/2+"px",e.right=(Ul.windowWidth-uni.upx2px(this.titleWidth))/2+"px",e.width=uni.upx2px(this.titleWidth)+"px",e},navbarHeight(){return this.height?this.height:44}},created(){},methods:{goBack(){"function"==typeof this.customBack?this.customBack.bind(this.$u.$parent.call(this))():uni.navigateBack()}}},[["render",function(t,a,n,o,r,s){const l=i(e.resolveDynamicComponent("u-icon"),Po);return e.openBlock(),e.createElementBlock("view",{class:""},[e.createElementVNode("view",{class:e.normalizeClass(["u-navbar",{"u-navbar-fixed":n.isFixed,"u-border-bottom":n.borderBottom}]),style:e.normalizeStyle([s.navbarStyle])},[e.createElementVNode("view",{class:"u-status-bar",style:e.normalizeStyle({height:r.statusBarHeight+"px"})},null,4),e.createElementVNode("view",{class:"u-navbar-inner",style:e.normalizeStyle([s.navbarInnerStyle])},[n.isBack?(e.openBlock(),e.createElementBlock("view",{key:0,class:"u-back-wrap",onClick:a[0]||(a[0]=(...e)=>s.goBack&&s.goBack(...e))},[e.createElementVNode("view",{class:"u-icon-wrap"},[e.createVNode(l,{name:n.backIconName,color:n.backIconColor,size:n.backIconSize},null,8,["name","color","size"])]),n.backText?(e.openBlock(),e.createElementBlock("view",{key:0,class:"u-icon-wrap u-back-text u-line-1",style:e.normalizeStyle([n.backTextStyle])},e.toDisplayString(n.backText),5)):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0),n.title?(e.openBlock(),e.createElementBlock("view",{key:1,class:"u-navbar-content-title",style:e.normalizeStyle([s.titleStyle])},[e.createElementVNode("view",{class:"u-title u-line-1",style:e.normalizeStyle({color:n.titleColor,fontSize:n.titleSize+"rpx",fontWeight:n.titleBold?"bold":"normal"})},e.toDisplayString(n.title),5)],4)):e.createCommentVNode("",!0),e.createElementVNode("view",{class:"u-slot-content"},[e.renderSlot(t.$slots,"default",{},void 0,!0)]),e.createElementVNode("view",{class:"u-slot-right"},[e.renderSlot(t.$slots,"right",{},void 0,!0)])],4)],6),n.isFixed&&!n.immersive?(e.openBlock(),e.createElementBlock("view",{key:0,class:"u-navbar-placeholder",style:e.normalizeStyle({width:"100%",height:Number(s.navbarHeight)+r.statusBarHeight+"px"})},null,4)):e.createCommentVNode("",!0)])}],["__scopeId","data-v-8ac31297"]]),ql={emits:["update:modelValue","input","confirm","cancel"],props:{value:{type:Boolean,default:!1},modelValue:{type:Boolean,default:!1},list:{type:Array,default:()=>[]},border:{type:Boolean,default:!0},cancelColor:{type:String,default:"#606266"},confirmColor:{type:String,default:"#2979ff"},zIndex:{type:[String,Number],default:0},safeAreaInsetBottom:{type:Boolean,default:!1},maskCloseAble:{type:Boolean,default:!0},defaultValue:{type:Array,default:()=>[0]},mode:{type:String,default:"single-column"},valueName:{type:String,default:"value"},labelName:{type:String,default:"label"},childName:{type:String,default:"children"},title:{type:String,default:""},cancelText:{type:String,default:"取消"},confirmText:{type:String,default:"确认"},blur:{type:[Number,String],default:0}},data:()=>({popupValue:!1,defaultSelector:[0],columnData:[],selectValue:[],lastSelectIndex:[],columnNum:0,moving:!1,reset:!1}),watch:{valueCom:{immediate:!0,handler(e){e&&(this.reset=!0,setTimeout((()=>this.init()),10)),this.popupValue=e}}},computed:{uZIndex(){return this.zIndex?this.zIndex:this.$u.zIndex.popup},valueCom(){return this.modelValue},showColumnCom:()=>!0},methods:{pickstart(){},pickend(){},init(){this.reset=!1,this.setColumnNum(),this.setDefaultSelector(),this.setColumnData(),this.setSelectValue()},setDefaultSelector(){this.defaultSelector=this.defaultValue.length==this.columnNum?this.defaultValue:Array(this.columnNum).fill(0),this.lastSelectIndex=this.$u.deepClone(this.defaultSelector)},setColumnNum(){if("single-column"==this.mode)this.columnNum=1;else if("mutil-column"==this.mode)this.columnNum=this.list.length;else if("mutil-column-auto"==this.mode){let e=1,t=this.list;for(;t[0][this.childName];)t=t[0]?t[0][this.childName]:{},e++;this.columnNum=e}},setColumnData(){let e=[];if(this.selectValue=[],"mutil-column-auto"==this.mode){let t=this.list[this.defaultSelector.length?this.defaultSelector[0]:0];for(let a=0;a<this.columnNum;a++)0==a?(e[a]=this.list,t=t[this.childName]):(e[a]=t,t=t[this.defaultSelector[a]][this.childName])}else"single-column"==this.mode?e[0]=this.list:e=this.list;this.columnData=e},setSelectValue(){let e=null;for(let t=0;t<this.columnNum;t++){e=this.columnData[t][this.defaultSelector[t]];let a={index:this.defaultSelector[t],value:e?e[this.valueName]:null,label:e?e[this.labelName]:null};e&&void 0!==e.extra&&(a.extra=e.extra),this.selectValue.push(a)}},columnChange(e){let t=null,a=e.detail.value;if(this.selectValue=[],"mutil-column-auto"==this.mode){this.lastSelectIndex.map(((e,n)=>{e!=a[n]&&(t=n)})),this.defaultSelector=a;for(let e=t+1;e<this.columnNum;e++)this.columnData[e]=this.columnData[e-1][e-1==t?a[t]:0][this.childName],this.defaultSelector[e]=0;a.map(((e,t)=>{let n=this.columnData[t][a[t]],o={index:a[t],value:n?n[this.valueName]:null,label:n?n[this.labelName]:null};n&&void 0!==n.extra&&(o.extra=n.extra),this.selectValue.push(o)})),this.lastSelectIndex=a}else if("single-column"==this.mode){let e=this.columnData[0][a[0]],t={index:a[0],value:e?e[this.valueName]:null,label:e?e[this.labelName]:null};e&&void 0!==e.extra&&(t.extra=e.extra),this.selectValue.push(t),this.lastSelectIndex=a}else"mutil-column"==this.mode&&(a.map(((e,t)=>{let n=this.columnData[t][a[t]],o={index:a[t],value:n?n[this.valueName]:null,label:n?n[this.labelName]:null};n&&void 0!==n.extra&&(o.extra=n.extra),this.selectValue.push(o)})),this.lastSelectIndex=a)},close(){this.$emit("input",!1),this.$emit("update:modelValue",!1)},getResult(e=null){e&&this.$emit(e,this.selectValue),this.close()},selectHandler(){this.$emit("click")}}};const zl=ie(ql,[["render",function(t,a,n,o,r,s){const l=i(e.resolveDynamicComponent("u-popup"),gs);return e.openBlock(),e.createElementBlock("view",{class:"u-select"},[e.createVNode(l,{blur:n.blur,maskCloseAble:n.maskCloseAble,mode:"bottom",popup:!1,modelValue:r.popupValue,"onUpdate:modelValue":a[7]||(a[7]=e=>r.popupValue=e),length:"auto",safeAreaInsetBottom:n.safeAreaInsetBottom,onClose:s.close,"z-index":s.uZIndex},{default:e.withCtx((()=>[e.createElementVNode("view",{class:"u-select"},[e.createElementVNode("view",{class:"u-select__header",onTouchmove:a[3]||(a[3]=e.withModifiers((()=>{}),["stop","prevent"]))},[e.createElementVNode("view",{class:"u-select__header__cancel u-select__header__btn",style:e.normalizeStyle({color:n.cancelColor}),"hover-class":"u-hover-class","hover-stay-time":150,onClick:a[0]||(a[0]=e=>s.getResult("cancel"))},e.toDisplayString(n.cancelText),5),e.createElementVNode("view",{class:"u-select__header__title"},e.toDisplayString(n.title),1),e.createElementVNode("view",{class:"u-select__header__confirm u-select__header__btn",style:e.normalizeStyle({color:r.moving?n.cancelColor:n.confirmColor}),"hover-class":"u-hover-class","hover-stay-time":150,onTouchmove:a[1]||(a[1]=e.withModifiers((()=>{}),["stop"])),onClick:a[2]||(a[2]=e.withModifiers((e=>s.getResult("confirm")),["stop"]))},e.toDisplayString(n.confirmText),37)],32),e.createElementVNode("view",{class:"u-select__body"},[r.columnData&&r.columnData.length>0?(e.openBlock(),e.createElementBlock("picker-view",{key:0,onChange:a[4]||(a[4]=(...e)=>s.columnChange&&s.columnChange(...e)),class:"u-select__body__picker-view",value:r.defaultSelector,onPickstart:a[5]||(a[5]=(...e)=>s.pickstart&&s.pickstart(...e)),onPickend:a[6]||(a[6]=(...e)=>s.pickend&&s.pickend(...e))},[s.showColumnCom?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(r.columnData,((t,a)=>(e.openBlock(),e.createElementBlock("picker-view-column",{key:a},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"u-select__body__picker-view__item",key:a},[e.createElementVNode("view",{class:"u-line-1"},e.toDisplayString(t[n.labelName]),1)])))),128))])))),128)):e.createCommentVNode("",!0)],40,["value"])):e.createCommentVNode("",!0)])])])),_:1},8,["blur","maskCloseAble","modelValue","safeAreaInsetBottom","onClose","z-index"])])}],["__scopeId","data-v-e4d7200a"]]),Hl=ie({__name:"supplementInfo",setup(t){e.ref(!1);const a=e.ref(""),n=e.ref(""),r=e.ref(null);e.ref(["男","女"]);const s=e.computed((()=>"male"===r.value?"男":"女")),l=()=>{o("log","at pages/supplementInfo/supplementInfo.vue:68","选择头像"),uni.chooseImage({count:1,success:e=>{a.value=e.tempFilePaths[0]}})},c=()=>{uni.showActionSheet({itemList:["男","女"],success:e=>{r.value=0===e.tapIndex?"male":"female"}})},u=async()=>{if(""==n.value)return void uni.showToast({title:"请输入昵称",icon:"error"});if(null==s)return void uni.showToast({title:"请选择性别",icon:"error"});if(""==a.value)return void uni.showToast({title:"请选择头像",icon:"error"});let e=await Vs(D+"/api/common/upload",a.value),t=uni.getStorageSync("currentUser");t.avatar=e.data.url,o("log","at pages/supplementInfo/supplementInfo.vue:118",e.data.url),t.realName=n.value,t.gender=s.value,o("log","at pages/supplementInfo/supplementInfo.vue:121",t),0==(await kr(t)).code&&uni.reLaunch({url:"/pages/index/index"}),uni.showToast({title:"保存成功",icon:"success"})};return(t,o)=>{const r=i(e.resolveDynamicComponent("u-button"),Bl),d=i(e.resolveDynamicComponent("u-navbar"),Fl),m=i(e.resolveDynamicComponent("u-avatar"),ts),p=i(e.resolveDynamicComponent("u-select"),zl),h=i(e.resolveDynamicComponent("u-icon"),Po);return e.openBlock(),e.createElementBlock("view",{class:"profile-page"},[e.createVNode(d,{title:"个人资料"},{right:e.withCtx((()=>[e.createVNode(r,{size:"mini",type:"success",onClick:u,style:{"margin-right":"30rpx"}},{default:e.withCtx((()=>[e.createTextVNode("保存")])),_:1})])),_:1}),e.createElementVNode("view",{class:"avatar-section"},[e.createElementVNode("view",{class:"avatar-box"},[e.createVNode(m,{src:a.value,size:"128",onClick:l},null,8,["src"])])]),e.createElementVNode("view",{class:"info-list"},[e.createElementVNode("view",{class:"info-item"},[e.createElementVNode("text",{class:"label"},"昵称"),e.withDirectives(e.createElementVNode("input",{class:"input",type:"text","onUpdate:modelValue":o[0]||(o[0]=e=>n.value=e),placeholder:"请输入","placeholder-style":"color:#ccc;"},null,512),[[e.vModelText,n.value]])]),e.createElementVNode("view",{class:"info-item",onClick:c},[e.createElementVNode("text",{class:"label"},"性别"),e.createElementVNode("view",{class:"right"},[e.createElementVNode("text",{class:"value"},e.toDisplayString(s.value),1),e.createVNode(p),null==s.value?(e.openBlock(),e.createElementBlock("text",{key:0,class:"arrow"},"请选择")):e.createCommentVNode("",!0),e.createVNode(h,{name:"arrow-right"})])])])])}}},[["__scopeId","data-v-48a68c0e"]]),$l={__name:"serviceSettings",setup(t){const a=e.ref(null);l((e=>{a.value=JSON.parse(e.type)}));const n=()=>{uni.navigateTo({url:`/pages/forum/my/userInfo?userInfo=${a.value.id}&type=${a.value.userRole}`})},o=()=>{uni.navigateTo({url:`/pages/settings/services?userInfo=${a.value}`})};return(t,a)=>{const r=i(e.resolveDynamicComponent("u-icon"),Po);return e.openBlock(),e.createElementBlock("view",{style:{padding:"30rpx"}},[e.createElementVNode("text",null,"个人设置"),e.createElementVNode("view",{class:"menu"},[e.createElementVNode("view",{class:"menu-item",style:{"border-bottom":"1rpx solid #e6e6e6"},onClick:n},[e.createElementVNode("text",null,"基本资料"),e.createVNode(r,{name:"arrow-right"})]),e.createElementVNode("view",{class:"menu-item",onClick:o},[e.createElementVNode("text",null,"服务资料"),e.createElementVNode("view",null,[e.createElementVNode("text",{style:{"font-size":"26rpx",color:"#868686"}},"服务类型，资质证书"),e.createVNode(r,{name:"arrow-right"})])])])])}}},jl={__name:"help-center",setup(t){e.useCssVars((e=>({"60188f22":n.value})));const a=ae(),n=e.ref(a.statusBarHeight+"px"),o=e.ref(0);d((e=>{o.value=e.scrollTop}));const r=()=>{uni.navigateBack({delta:1})},l=e.ref([]),c=async()=>{const{data:e}=await((e,t={})=>A.get("/api/agreement/page",e,t))({current:1,size:100,type:"5"});l.value=e.records.filter((e=>"5"===e.type))};s((()=>{c()}));return(t,a)=>{const n=i(e.resolveDynamicComponent("uni-icons"),re),s=i(e.resolveDynamicComponent("uni-nav-bar"),Di);return e.openBlock(),e.createElementBlock("view",{class:"settled-box"},[e.createElementVNode("view",{class:"header"},[e.createVNode(s,{class:e.normalizeClass([o.value>15?"scrollClass":"","header-bar"]),backgroundColor:"rgba(255,255,255,0)",border:!1,title:"帮助中心"},{left:e.withCtx((()=>[e.createVNode(n,{type:"left",size:"24",onClick:r})])),right:e.withCtx((()=>[e.createElementVNode("view",{class:"right"},[e.createElementVNode("image",{src:Ri,style:{width:"40rpx",height:"40rpx"}})])])),_:1},8,["class"])]),e.createElementVNode("view",{class:"content"},[e.createElementVNode("view",{class:"clause"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"clause-item"},[e.createElementVNode("view",{onClick:e=>(e=>{l.value[e].expanded=!l.value[e].expanded})(a),class:"item-title"},[e.createElementVNode("view",null,e.toDisplayString(t.title),1),e.createVNode(n,{type:t.expanded?"up":"down",size:"15",color:t.expanded?"#eea84c":"#57b584"},null,8,["type","color"])],8,["onClick"]),e.createElementVNode("view",{class:e.normalizeClass(["item-desc",{expanded:t.expanded}])},[e.createElementVNode("view",{innerHTML:t.content},null,8,["innerHTML"])],2)])))),256))])])])}}},Kl=ie(jl,[["__scopeId","data-v-96fa2838"]]);var Yl={exports:{}};!function(e,t){e.exports=function(){var e=1e3,t=6e4,a=36e5,n="millisecond",o="second",i="minute",r="hour",s="day",l="week",c="month",u="quarter",d="year",m="date",p="Invalid Date",h=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,v=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,g={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],a=e%100;return"["+e+(t[(a-20)%10]||t[a]||t[0])+"]"}},f=function(e,t,a){var n=String(e);return!n||n.length>=t?e:""+Array(t+1-n.length).join(a)+e},y={s:f,z:function(e){var t=-e.utcOffset(),a=Math.abs(t),n=Math.floor(a/60),o=a%60;return(t<=0?"+":"-")+f(n,2,"0")+":"+f(o,2,"0")},m:function e(t,a){if(t.date()<a.date())return-e(a,t);var n=12*(a.year()-t.year())+(a.month()-t.month()),o=t.clone().add(n,c),i=a-o<0,r=t.clone().add(n+(i?-1:1),c);return+(-(n+(a-o)/(i?o-r:r-o))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:c,y:d,w:l,d:s,D:m,h:r,m:i,s:o,ms:n,Q:u}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},_="en",k={};k[_]=g;var E="$isDayjsObject",x=function(e){return e instanceof M||!(!e||!e[E])},N=function e(t,a,n){var o;if(!t)return _;if("string"==typeof t){var i=t.toLowerCase();k[i]&&(o=i),a&&(k[i]=a,o=i);var r=t.split("-");if(!o&&r.length>1)return e(r[0])}else{var s=t.name;k[s]=t,o=s}return!n&&o&&(_=o),o||!n&&_},w=function(e,t){if(x(e))return e.clone();var a="object"==typeof t?t:{};return a.date=e,a.args=arguments,new M(a)},C=y;C.l=N,C.i=x,C.w=function(e,t){return w(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var M=function(){function g(e){this.$L=N(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[E]=!0}var f=g.prototype;return f.parse=function(e){this.$d=function(e){var t=e.date,a=e.utc;if(null===t)return new Date(NaN);if(C.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var n=t.match(h);if(n){var o=n[2]-1||0,i=(n[7]||"0").substring(0,3);return a?new Date(Date.UTC(n[1],o,n[3]||1,n[4]||0,n[5]||0,n[6]||0,i)):new Date(n[1],o,n[3]||1,n[4]||0,n[5]||0,n[6]||0,i)}}return new Date(t)}(e),this.init()},f.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},f.$utils=function(){return C},f.isValid=function(){return!(this.$d.toString()===p)},f.isSame=function(e,t){var a=w(e);return this.startOf(t)<=a&&a<=this.endOf(t)},f.isAfter=function(e,t){return w(e)<this.startOf(t)},f.isBefore=function(e,t){return this.endOf(t)<w(e)},f.$g=function(e,t,a){return C.u(e)?this[t]:this.set(a,e)},f.unix=function(){return Math.floor(this.valueOf()/1e3)},f.valueOf=function(){return this.$d.getTime()},f.startOf=function(e,t){var a=this,n=!!C.u(t)||t,u=C.p(e),p=function(e,t){var o=C.w(a.$u?Date.UTC(a.$y,t,e):new Date(a.$y,t,e),a);return n?o:o.endOf(s)},h=function(e,t){return C.w(a.toDate()[e].apply(a.toDate("s"),(n?[0,0,0,0]:[23,59,59,999]).slice(t)),a)},v=this.$W,g=this.$M,f=this.$D,y="set"+(this.$u?"UTC":"");switch(u){case d:return n?p(1,0):p(31,11);case c:return n?p(1,g):p(0,g+1);case l:var _=this.$locale().weekStart||0,k=(v<_?v+7:v)-_;return p(n?f-k:f+(6-k),g);case s:case m:return h(y+"Hours",0);case r:return h(y+"Minutes",1);case i:return h(y+"Seconds",2);case o:return h(y+"Milliseconds",3);default:return this.clone()}},f.endOf=function(e){return this.startOf(e,!1)},f.$set=function(e,t){var a,l=C.p(e),u="set"+(this.$u?"UTC":""),p=(a={},a[s]=u+"Date",a[m]=u+"Date",a[c]=u+"Month",a[d]=u+"FullYear",a[r]=u+"Hours",a[i]=u+"Minutes",a[o]=u+"Seconds",a[n]=u+"Milliseconds",a)[l],h=l===s?this.$D+(t-this.$W):t;if(l===c||l===d){var v=this.clone().set(m,1);v.$d[p](h),v.init(),this.$d=v.set(m,Math.min(this.$D,v.daysInMonth())).$d}else p&&this.$d[p](h);return this.init(),this},f.set=function(e,t){return this.clone().$set(e,t)},f.get=function(e){return this[C.p(e)]()},f.add=function(n,u){var m,p=this;n=Number(n);var h=C.p(u),v=function(e){var t=w(p);return C.w(t.date(t.date()+Math.round(e*n)),p)};if(h===c)return this.set(c,this.$M+n);if(h===d)return this.set(d,this.$y+n);if(h===s)return v(1);if(h===l)return v(7);var g=(m={},m[i]=t,m[r]=a,m[o]=e,m)[h]||1,f=this.$d.getTime()+n*g;return C.w(f,this)},f.subtract=function(e,t){return this.add(-1*e,t)},f.format=function(e){var t=this,a=this.$locale();if(!this.isValid())return a.invalidDate||p;var n=e||"YYYY-MM-DDTHH:mm:ssZ",o=C.z(this),i=this.$H,r=this.$m,s=this.$M,l=a.weekdays,c=a.months,u=a.meridiem,d=function(e,a,o,i){return e&&(e[a]||e(t,n))||o[a].slice(0,i)},m=function(e){return C.s(i%12||12,e,"0")},h=u||function(e,t,a){var n=e<12?"AM":"PM";return a?n.toLowerCase():n};return n.replace(v,(function(e,n){return n||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return C.s(t.$y,4,"0");case"M":return s+1;case"MM":return C.s(s+1,2,"0");case"MMM":return d(a.monthsShort,s,c,3);case"MMMM":return d(c,s);case"D":return t.$D;case"DD":return C.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return d(a.weekdaysMin,t.$W,l,2);case"ddd":return d(a.weekdaysShort,t.$W,l,3);case"dddd":return l[t.$W];case"H":return String(i);case"HH":return C.s(i,2,"0");case"h":return m(1);case"hh":return m(2);case"a":return h(i,r,!0);case"A":return h(i,r,!1);case"m":return String(r);case"mm":return C.s(r,2,"0");case"s":return String(t.$s);case"ss":return C.s(t.$s,2,"0");case"SSS":return C.s(t.$ms,3,"0");case"Z":return o}return null}(e)||o.replace(":","")}))},f.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},f.diff=function(n,m,p){var h,v=this,g=C.p(m),f=w(n),y=(f.utcOffset()-this.utcOffset())*t,_=this-f,k=function(){return C.m(v,f)};switch(g){case d:h=k()/12;break;case c:h=k();break;case u:h=k()/3;break;case l:h=(_-y)/6048e5;break;case s:h=(_-y)/864e5;break;case r:h=_/a;break;case i:h=_/t;break;case o:h=_/e;break;default:h=_}return p?h:C.a(h)},f.daysInMonth=function(){return this.endOf(c).$D},f.$locale=function(){return k[this.$L]},f.locale=function(e,t){if(!e)return this.$L;var a=this.clone(),n=N(e,t,!0);return n&&(a.$L=n),a},f.clone=function(){return C.w(this.$d,this)},f.toDate=function(){return new Date(this.valueOf())},f.toJSON=function(){return this.isValid()?this.toISOString():null},f.toISOString=function(){return this.$d.toISOString()},f.toString=function(){return this.$d.toUTCString()},g}(),S=M.prototype;return w.prototype=S,[["$ms",n],["$s",o],["$m",i],["$H",r],["$W",s],["$M",c],["$y",d],["$D",m]].forEach((function(e){S[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),w.extend=function(e,t){return e.$i||(e(t,M,w),e.$i=!0),w},w.locale=N,w.isDayjs=x,w.unix=function(e){return w(1e3*e)},w.en=k[_],w.Ls=k,w.p={},w}()}(Yl);var Wl=Yl.exports;const Jl=v(Wl);!function(e,t){e.exports=function(e){function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var a=t(e),n={name:"zh-cn",weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),ordinal:function(e,t){return"W"===t?e+"周":e+"日"},weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日Ah点mm分",LLLL:"YYYY年M月D日ddddAh点mm分",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},relativeTime:{future:"%s内",past:"%s前",s:"几秒",m:"1 分钟",mm:"%d 分钟",h:"1 小时",hh:"%d 小时",d:"1 天",dd:"%d 天",M:"1 个月",MM:"%d 个月",y:"1 年",yy:"%d 年"},meridiem:function(e,t){var a=100*e+t;return a<600?"凌晨":a<900?"早上":a<1100?"上午":a<1300?"中午":a<1800?"下午":"晚上"}};return a.default.locale(n,null,!0),n}(Wl)}({exports:{}});const Zl=(e,t={})=>A.post("/api/admin/order/manage/paging",e,t),Xl=(e,t={})=>A.post("/api/order/order/cancel",e,t),Ql={__name:"service-setup",setup(t){e.useCssVars((e=>({"7f7ca3c0":n.value})));const a=ae(),n=e.ref(a.statusBarHeight+"px"),r=e.ref({}),c=e.ref("select-green"),u=e.ref("#34A76F");l((e=>{r.value=JSON.parse(e.type),u.value="1"==r.value.userRole?"#34A76F":"#eb9516",c.value="1"==r.value.userRole?"select-green":"select-yellow"}));const m=e.ref([]),p=async()=>{try{const e="1"==r.value.userRole?yi:_i,t=await e(r.value.id);m.value=t.data.map((e=>({...e,selected:!1})))}catch(e){o("error","at pages/settings/service-setup.vue:262","Failed to fetch quote list:",e)}};s((()=>{p()}));const h=e.ref(1),v=e=>{h.value=e},g=()=>{uni.navigateBack({delta:1})},f=e.ref(0);d((e=>{f.value=e.scrollTop}));const y=e.ref([{id:1,type:"img",icon:"/static/my/consulting-video.png",title:"视频",width:"70rpx",height:"50rpx"},{id:2,type:"img",icon:"/static/my/consulting-speech.png",title:"语音",width:"60rpx",height:"70rpx"},{id:3,type:"icon",title:"文字",width:"0",height:"0"}]),_=e.computed((()=>{const{userRole:e}=r.value;return 1==e?y.value.filter((e=>3!==e.id)):2==e?y.value.filter((e=>1!==e.id)):y})),k=e.ref(null),E=()=>{k.value.open("bottom")},x=()=>{k.value.close()},N=e.ref({}),w=()=>{if(null==N.value.id)return uni.showToast({title:"请选择要编辑的服务",icon:"none"});uni.navigateTo({url:`/pages/settings/service-price?type=${N.value.serviceQuoteType}&point=${JSON.stringify(r.value)}&update=${JSON.stringify(N.value)}`})},C=async()=>{if(null==N.value.id)return uni.showToast({title:"请选择要删除的服务",icon:"none"});try{const e="1"==r.value.userRole?Ei:ki;await e(N.value.id);uni.showToast({title:"删除成功",icon:"none"}),p()}catch(e){o("log","at pages/settings/service-setup.vue:381",e)}};Jl.locale("zh-cn");const M=e.ref((()=>{const e=[],t=Jl().format("YYYY-MM-DD");for(let a=0;a<7;a++){const n=Jl().add(a,"day"),o=n.format("YYYY-MM-DD");e.push({dateStr:o,week:o===t?"今天":n.format("ddd"),isAvailable:!0})}return e})()),S=e.ref(M.value[0].dateStr),I=(e,t,a)=>{const n=[];let o=Jl().hour(e).minute(0);const i=Jl().hour(t).minute(0);for(;o.isBefore(i);){const e=o.format("HH:mm");o=o.add(a,"minute");const t=o.format("HH:mm");n.push({startTime:e,endTime:t})}return n},T=e.ref(I(9,12,30)),D=e.ref(I(13,18,30)),b=e.ref({}),V=e=>{b.value[S.value]||(b.value[S.value]=[]);const t=b.value[S.value].findIndex((t=>t.startTime===e.startTime&&t.endTime===e.endTime));t>-1?b.value[S.value].splice(t,1):b.value[S.value].push({...e}),b.value={...b.value}},L=e=>{var t;return(null==(t=b.value[S.value])?void 0:t.some((t=>t.startTime===e.startTime&&t.endTime===e.endTime)))||!1},R=()=>{const e=[];Object.entries(b.value).forEach((([t,a])=>{a.forEach((a=>{e.push({consultantId:24,date:`${t} ${a.startTime}:00`,isEnable:1,startTime:a.startTime,endTime:a.endTime})}))})),O(e)},O=async e=>{try{await((e,t={})=>A.post("/api/consultant/schedule/setBatch",e,t))(e);uni.showToast({title:"保存成功",icon:"success"})}catch(t){o("log","at pages/settings/service-setup.vue:477",t)}};return(t,a)=>{const n=i(e.resolveDynamicComponent("uni-icons"),re),o=i(e.resolveDynamicComponent("uni-nav-bar"),Di),s=i(e.resolveDynamicComponent("uni-popup"),vi);return e.openBlock(),e.createElementBlock("view",{class:"settled-box"},[e.createElementVNode("view",{class:"header"},[e.createVNode(o,{class:e.normalizeClass([f.value>15?"scrollClass":"","header-bar"]),backgroundColor:"#fff",border:!1,title:"服务设置"},{left:e.withCtx((()=>[e.createVNode(n,{type:"left",size:"24",onClick:g})])),right:e.withCtx((()=>[1==h.value?(e.openBlock(),e.createElementBlock("view",{key:0,class:e.normalizeClass(["right",`right-${r.value.userRole}`]),onClick:E},"添加",2)):e.createCommentVNode("",!0)])),_:1},8,["class"])]),e.createElementVNode("view",{class:"content"},[2==h.value?(e.openBlock(),e.createElementBlock("view",{key:0,class:"content-list",style:{margin:"30rpx 0 20rpx"}},[e.createElementVNode("view",{class:"content-list-item",onClick:a[0]||(a[0]=e=>v(1))},[e.createElementVNode("view",{style:e.normalizeStyle({color:1==h.value?u.value:"#959596"})},"服务列表",4),1==h.value&&1==r.value.userRole?(e.openBlock(),e.createElementBlock("image",{key:0,src:$i,style:{left:"45rpx"}})):e.createCommentVNode("",!0)]),1==r.value.userRole?(e.openBlock(),e.createElementBlock("view",{key:0,class:"content-list-item",onClick:a[1]||(a[1]=e=>v(2))},[e.createElementVNode("view",{style:e.normalizeStyle({color:2==h.value?u.value:"#959596"})},"时间列表",4),2==h.value?(e.openBlock(),e.createElementBlock("image",{key:0,src:$i,style:{right:"45rpx"}})):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0),1==h.value?(e.openBlock(),e.createElementBlock("view",{key:1,class:e.normalizeClass(["content-details",`content-details-${r.value.userRole}`])},[e.createElementVNode("view",{class:"content-list"},[e.createElementVNode("view",{class:"content-list-item",onClick:a[2]||(a[2]=e=>v(1))},[e.createElementVNode("view",{style:e.normalizeStyle({color:1==h.value?u.value:"#959596"})},"服务列表",4),1==h.value&&1==r.value.userRole?(e.openBlock(),e.createElementBlock("image",{key:0,src:$i,style:{left:"45rpx"}})):e.createCommentVNode("",!0)]),1==r.value.userRole?(e.openBlock(),e.createElementBlock("view",{key:0,class:"content-list-item",onClick:a[3]||(a[3]=e=>v(2))},[e.createElementVNode("view",{style:e.normalizeStyle({color:2==h.value?u.value:"#959596"})},"时间列表",4),2==h.value?(e.openBlock(),e.createElementBlock("image",{key:0,src:$i,style:{right:"45rpx"}})):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)]),e.createElementVNode("view",{class:"content-header"},[e.createElementVNode("view",{class:"content-header-item"},[e.createElementVNode("view",{style:{width:"35%","text-align":"center"}},"名称"),e.createElementVNode("view",null,"咨询方式"),e.createElementVNode("view",null,"时长"),e.createElementVNode("view",null,"价格")]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(m.value,((a,n)=>(e.openBlock(),e.createElementBlock("view",{class:"content-header-item",key:n,onClick:e=>t.serviceDetail(a),style:{margin:"20rpx 0"}},[e.createElementVNode("view",{style:{display:"flex","align-items":"center",width:"35%"}},[e.createElementVNode("image",{src:`/static/auth/${a.selected?c.value:"not-selected"}.png`,onClick:e.withModifiers((e=>(e=>{e.selected=!e.selected,N.value=e,m.value.forEach((t=>{t!==e&&(t.selected=!1)}))})(a)),["stop"]),style:{width:"30rpx",height:"30rpx","margin-right":"10rpx"}},null,8,["src","onClick"]),e.createElementVNode("view",null,e.toDisplayString(a.title),1)]),e.createElementVNode("view",{style:{width:"110rpx","text-align":"center"}},e.toDisplayString(1==a.serviceQuoteType?"语音":2==a.serviceQuoteType?"视频":"图文"),1),e.createElementVNode("view",null,e.toDisplayString(a.serviceDuration)+"分钟",1),e.createElementVNode("view",null,"¥ "+e.toDisplayString(a.quoteAmount),1)],8,["onClick"])))),128))]),e.createElementVNode("view",{class:"header-operation"},[e.createElementVNode("view",{onClick:w},"编辑"),e.createElementVNode("view",{class:"line"},"|"),e.createElementVNode("view",{onClick:C},"删除")])],2)):e.createCommentVNode("",!0)]),2==h.value&&1==r.value.userRole?(e.openBlock(),e.createElementBlock("view",{key:0,class:"container"},[e.createElementVNode("scroll-view",{"scroll-x":"",class:"date-nav"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(M.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{key:a,class:e.normalizeClass(["date-item",{active:t.dateStr===S.value,available:t.isAvailable}]),onClick:e=>S.value=t.dateStr},[e.createElementVNode("view",{class:"week"},e.toDisplayString(t.week),1),e.createElementVNode("view",{class:"date"},e.toDisplayString(t.dateStr.split("-").slice(1).join("-")),1),t.isAvailable?(e.openBlock(),e.createElementBlock("view",{key:0,class:"status"},"可约")):e.createCommentVNode("",!0)],10,["onClick"])))),128))]),e.createElementVNode("view",{class:"time-section"},[e.createElementVNode("view",{class:"section-title"},"上午"),e.createElementVNode("view",{class:"slots-wrap"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(T.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{key:a,class:e.normalizeClass(["slot-item",{selected:L(t)}]),onClick:e=>V(t)},e.toDisplayString(t.startTime)+"-"+e.toDisplayString(t.endTime),11,["onClick"])))),128))]),e.createElementVNode("view",{class:"section-title"},"下午"),e.createElementVNode("view",{class:"slots-wrap"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(D.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{key:a,class:e.normalizeClass(["slot-item",{selected:L(t)}]),onClick:e=>V(t)},e.toDisplayString(t.startTime)+"-"+e.toDisplayString(t.endTime),11,["onClick"])))),128))])]),e.createElementVNode("view",{class:"btn-group"},[e.createElementVNode("view",{class:"save-btn",onClick:R},"保存设置")])])):e.createCommentVNode("",!0),e.createVNode(s,{ref_key:"popup",ref:k},{default:e.withCtx((()=>[e.createElementVNode("view",{class:"popup-content"},[e.createElementVNode("view",{class:"popup-header"},[e.createElementVNode("view",null,"选择"+e.toDisplayString(1==r.value.userRole?"咨询":"倾听")+"方式",1),e.createVNode(n,{type:"closeempty",size:"20",class:"close-icon",color:"#A6A6A6",onClick:x})]),e.createElementVNode("view",{class:"popup-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(_.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{key:a,onClick:e=>(e=>{k.value.close(),uni.navigateTo({url:`/pages/settings/service-price?type=${e.id}&point=${JSON.stringify(r.value)}`})})(t),class:"popup-list-item"},["img"==t.type?(e.openBlock(),e.createElementBlock("image",{key:0,src:t.icon,style:e.normalizeStyle({width:t.width,height:t.height})},null,12,["src"])):(e.openBlock(),e.createBlock(n,{key:1,type:"wallet",size:"35",color:"#38CC98",class:"popup-list-icon"})),e.createElementVNode("view",null,e.toDisplayString(t.title),1)],8,["onClick"])))),128))])])])),_:1},512)])}}},ec=ie(Ql,[["__scopeId","data-v-5c37a1a1"]]),tc={__name:"service-price",setup(t){e.useCssVars((e=>({"789a93a8":n.value})));const a=ae(),n=e.ref(a.statusBarHeight+"px"),r=e.ref(["15分钟","30分钟","60分钟","90分钟"]),c=e.ref(0),u=e.ref(""),m=e.ref(""),p=e.ref({}),h=e.ref(0);s((()=>{(async()=>{try{const{data:e}=await xi(),{consultantCommissionPercent:t,listenerCommissionPercent:a}=e.records[0];h.value="1"==E.value.userRole?t:a}catch(e){o("error","at pages/settings/service-price.vue:153","Failed to fetch user info:",e)}})(),(async()=>{try{const e=await R();p.value=e.data}catch(e){o("error","at pages/settings/service-price.vue:138","Failed to fetch user info:",e)}})()}));const v=(e,t)=>{if(isNaN(e)||isNaN(t))return o("error","at pages/settings/service-price.vue:166","基数或提成比例必须是数字"),0;const a=e*(1-t/100),n=(Math.round(100*a)/100).toFixed(2);return Number(n)},g=e=>{c.value=e.detail.value},f=()=>{uni.navigateBack({delta:1})},y=e.ref(0);d((e=>{y.value=e.scrollTop}));const _=e.ref("语音服务"),k=e.ref(""),E=e.ref({}),x=e.ref({});l((e=>{if(E.value=JSON.parse(e.point),k.value=e.type,e.update){x.value=JSON.parse(e.update);const{userId:t,serviceQuoteType:a,quoteAmount:n,serviceDuration:o,title:i}=x.value;p.value.id=t,k.value=a,u.value=n,m.value=i,c.value=15==o?0:30==o?1:60==o?2:3}1==e.type?_.value="视频服务":2==e.type?_.value="语音服务":_.value="文字服务"}));const N=()=>{if(""==m.value)return void uni.showToast({title:"请输入名称",icon:"none"});if(""==u.value)return void uni.showToast({title:"建议报价金额",icon:"none"});const e={userId:p.value.id,serviceQuoteType:k.value,quoteAmount:u.value,title:m.value,serviceDuration:0==c.value?15:1==c.value?30:2==c.value?60:90};if(null!=x.value.id){("1"==E.value.userRole?wi:Ni)({id:x.value.id,...e}).then((e=>{uni.showToast({title:"报价成功",icon:"none"}),setTimeout((()=>{uni.navigateBack({delta:1})}),1500),x.value={}})).catch((e=>{uni.showToast({title:e.message,icon:"none"})}))}else{("1"==E.value.userRole?gi:fi)(e).then((e=>{uni.showToast({title:"报价成功",icon:"none"}),setTimeout((()=>{uni.navigateBack({delta:1})}),1500)})).catch((e=>{uni.showToast({title:e.message,icon:"none"})}))}};return(t,a)=>{const n=i(e.resolveDynamicComponent("uni-icons"),re),o=i(e.resolveDynamicComponent("uni-nav-bar"),Di);return e.openBlock(),e.createElementBlock("view",{class:"settled-box"},[e.createElementVNode("view",{class:"header"},[e.createVNode(o,{class:e.normalizeClass([y.value>15?"scrollClass":"","header-bar"]),backgroundColor:"#f4f6f8",border:!1,title:_.value},{left:e.withCtx((()=>[e.createVNode(n,{type:"left",size:"24",onClick:f})])),right:e.withCtx((()=>[e.createElementVNode("view",{class:e.normalizeClass(["right",`right-${E.value.userRole}`]),onClick:N},"提交",2)])),_:1},8,["class","title"])]),e.createElementVNode("view",{class:"content"},[e.createElementVNode("view",{class:"content-details"},[e.createElementVNode("view",{class:"tips"},"修改价格需平台审核，每个月份可修改 2次"),e.createElementVNode("view",{class:"uni-list-cell"},[e.createElementVNode("view",{class:"uni-list-cell-left"},"名称"),e.createElementVNode("view",{class:e.normalizeClass(["uni-list-cell-db",`uni-list-cell-db-${E.value.userRole}`])},[e.withDirectives(e.createElementVNode("input",{class:"uni-input","onUpdate:modelValue":a[0]||(a[0]=e=>m.value=e),style:{"text-align":"right"}},null,512),[[e.vModelText,m.value]])],2)]),e.createElementVNode("view",{class:"uni-list-cell"},[e.createElementVNode("view",{class:"uni-list-cell-left"},[e.createTextVNode(" 价格"),e.createElementVNode("text",{style:{color:"#a9a9a9"}},"（含服务费）")]),e.createElementVNode("view",{class:e.normalizeClass(["uni-list-cell-db",`uni-list-cell-db-${E.value.userRole}`])},[e.createElementVNode("image",{src:`@/static/my/${"1"==E.value.userRole?"pen":"yen"}.png`,style:{width:"30rpx",height:"30rpx"}},null,8,["src"]),e.withDirectives(e.createElementVNode("input",{class:"uni-input","onUpdate:modelValue":a[1]||(a[1]=e=>u.value=e),style:{"text-align":"right","max-width":"65rpx"}},null,512),[[e.vModelText,u.value]]),e.createElementVNode("text",{style:{"margin-left":"10rpx"}},"元")],2)]),e.createElementVNode("view",{class:"text-tips"},e.toDisplayString((s=u.value,l=0==c.value?15:1==c.value?30:2==c.value?60:90,(s/l).toFixed(2)))+" 元/分钟",1),e.createElementVNode("view",{class:"text-tips",style:{"padding-bottom":"20rpx"}},"不含服务费价："+e.toDisplayString(v(u.value,h.value))+" 元",1),e.createElementVNode("view",{class:"uni-list-cell",style:{"margin-top":"20rpx"}},[e.createElementVNode("view",{class:"uni-list-cell-left"}," 最低服务时长 "),e.createElementVNode("view",{class:e.normalizeClass(["uni-list-cell-db",`uni-list-cell-db-${E.value.userRole}`])},[e.createElementVNode("image",{src:`@/static/my/${"1"==E.value.userRole?"pen":"yen"}.png`,style:{width:"30rpx",height:"30rpx"}},null,8,["src"]),e.createElementVNode("picker",{onChange:g,value:c.value,range:r.value},[e.createElementVNode("view",{class:"uni-input"},e.toDisplayString(r.value[c.value]),1)],40,["value","range"])],2)])]),e.createElementVNode("view",{class:"protocol"},[e.createElementVNode("view",null,"温馨提示："),e.createElementVNode("text",null,"1."+e.toDisplayString(_.value)+"为预约服务，为保证服务质量，请您提前做好预约服务准备。\\n",1),e.createElementVNode("text",null,"2.平台将按最低15分钟展示含服务费的价格，服务费为订单金额的"+e.toDisplayString(h.value)+"%，订单收益按不含服务费交易额计算。\\n",1),e.createElementVNode("text",null,"3.请您根据自身经验合理填写价格，平台后续也会依据您的评价率、响应率等标准进行审核。\\n")])])]);var s,l}}},ac=ie(tc,[["__scopeId","data-v-f0e6711b"]]),nc={__name:"feedback",props:{titlePage:{type:String,default:"意见反馈"}},setup(t){e.useCssVars((e=>({"9d4cf3da":n.value})));const a=ae(),n=e.ref(a.statusBarHeight+"px"),r=e.ref(0);d((e=>{r.value=e.scrollTop}));const l=()=>{uni.navigateBack({delta:1})},c=e.ref(null),u=e.ref({complaintTypeId:null,content:""}),m=e.ref([{id:1,typeName:"使用便捷问题"},{id:2,typeName:"登陆问题"},{id:3,typeName:"安全问题"},{id:4,typeName:"支付问题"},{id:5,typeName:"订单问题"},{id:6,typeName:"账号问题"},{id:7,typeName:"退款问题"}]),p=async()=>{try{const{content:e,complaintTypeId:t}=u.value,a={content:e,types:[t]};await((e,t={})=>A.post("/api/feedback/submit",e,t))(a);c.value.open("center")}catch{o("log","at pages/settings/feedback.vue:141","err")}},h=()=>{c.value.close()},v=e=>{u.value.complaintTypeId=e.detail.value},g=()=>{uni.navigateTo({url:"/pages/settings/record"})};return s((()=>{})),(a,n)=>{const o=i(e.resolveDynamicComponent("uni-icons"),re),s=i(e.resolveDynamicComponent("uni-nav-bar"),Di),d=i(e.resolveDynamicComponent("u-button"),Bl),f=i(e.resolveDynamicComponent("uni-popup"),vi);return e.openBlock(),e.createElementBlock("view",{class:"settled-box"},[e.createElementVNode("view",{class:"header"},[e.createVNode(s,{backgroundColor:"rgba(255,255,255,0)",border:!1,title:t.titlePage,class:e.normalizeClass(["header-bar",r.value>15?"scrollClass":""])},{left:e.withCtx((()=>[e.createVNode(o,{type:"left",size:"24",onClick:l})])),right:e.withCtx((()=>[e.createElementVNode("view",{class:"right"},[e.createElementVNode("image",{src:Ri,style:{width:"40rpx",height:"40rpx"}})])])),_:1},8,["title","class"])]),e.createElementVNode("view",{class:"content"},[e.createElementVNode("view",{class:"clause"},[e.createElementVNode("view",{class:"clause-type"},[e.createElementVNode("view",null,"请选择您需要反馈的问题类型："),e.createElementVNode("radio-group",{onChange:v,class:"clause-group"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(m.value,(t=>(e.openBlock(),e.createElementBlock("label",{class:"uni-list-cell uni-list-cell-pd",key:t.id},[e.createElementVNode("view",{class:"cell-item"},[e.createElementVNode("radio",{value:t.id,checked:u.value.complaintTypeId==t.id,color:"#FFCC33",style:{transform:"scale(0.7)"}},null,8,["value","checked"]),e.createElementVNode("text",{style:e.normalizeStyle({color:u.value.complaintTypeId==t.id?"#FFCC33":""})},e.toDisplayString(t.typeName),5)])])))),128))],32)]),e.createElementVNode("view",null,[e.createElementVNode("view",{style:{"margin-bottom":"20rpx"}},"请在下方文本框内详情描述："),e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":n[0]||(n[0]=e=>u.value.content=e),"placeholder-style":"color:#9E9E9E;padding: 20rpx",placeholder:"请输入详情描述"},null,512),[[e.vModelText,u.value.content]])]),e.createElementVNode("view",{style:{"margin-top":"300rpx"}},[e.createVNode(d,{type:"primary",size:"large",shape:"circle",block:"",onClick:p},{default:e.withCtx((()=>[e.createTextVNode("确认提交")])),_:1})]),e.createElementVNode("view",{style:{"margin-top":"50rpx","text-align":"center",color:"#9e9e9e"},onClick:g},"反馈记录")])]),e.createVNode(f,{ref_key:"popup",ref:c,"background-color":"#fff",class:"unipopup"},{default:e.withCtx((()=>[e.createElementVNode("view",{class:"shutdown",onClick:h},[e.createVNode(o,{type:"closeempty",size:"20",color:"#A6A6A6"})]),e.createElementVNode("view",{class:"title"},"您的反馈已提交！"),e.createElementVNode("view",{class:"text"},"可在“反馈记录”查看审核进度"),e.createElementVNode("view",{class:"but",onClick:g},"反馈记录")])),_:1},512)])}}},oc=ie(nc,[["__scopeId","data-v-9e29229e"]]),ic={__name:"complaint",props:{titlePage:{type:String,default:"投诉"}},setup(t){e.useCssVars((e=>({c7070d24:n.value})));const a=ae(),n=e.ref(a.statusBarHeight+"px"),r=e.ref(0);d((e=>{r.value=e.scrollTop}));const c=()=>{uni.navigateBack({delta:1})},u=e.ref([]),m=e.ref(null),p=e.ref({complaintTypeId:null,description:"",accusedUserId:null});l((e=>{p.value.accusedUserId=e.id}));const h=async()=>{let{data:e}=await((e,t={})=>A.post("/api/admin/complaint/type/page",e,t))();u.value=e.records},v=async()=>{try{const e=Object.assign(p.value);await((e,t={})=>A.post("/api/complaint/submit",e,t))(e);m.value.open("center")}catch{o("log","at pages/settings/complaint.vue:112","err")}},g=()=>{m.value.close()},f=e=>{p.value.complaintTypeId=e.detail.value},y=()=>{uni.navigateTo({url:"/pages/settings/record"})};return s((()=>{})),e.onMounted((()=>{h()})),(a,n)=>{const o=i(e.resolveDynamicComponent("uni-icons"),re),s=i(e.resolveDynamicComponent("uni-nav-bar"),Di),l=i(e.resolveDynamicComponent("u-button"),Bl),d=i(e.resolveDynamicComponent("uni-popup"),vi);return e.openBlock(),e.createElementBlock("view",{class:"settled-box"},[e.createElementVNode("view",{class:"header"},[e.createVNode(s,{backgroundColor:"rgba(255,255,255,0)",border:!1,title:t.titlePage,class:e.normalizeClass(["header-bar",r.value>15?"scrollClass":""])},{left:e.withCtx((()=>[e.createVNode(o,{type:"left",size:"24",onClick:c})])),right:e.withCtx((()=>[e.createElementVNode("view",{class:"right"},[e.createElementVNode("image",{src:Ri,style:{width:"40rpx",height:"40rpx"}})])])),_:1},8,["title","class"])]),e.createElementVNode("view",{class:"content"},[e.createElementVNode("view",{class:"clause"},[e.createElementVNode("view",{class:"clause-type"},[e.createElementVNode("view",null,"请选择您需要投诉的问题类型："),e.createElementVNode("radio-group",{onChange:f,class:"clause-group"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(u.value,(t=>(e.openBlock(),e.createElementBlock("label",{class:"uni-list-cell uni-list-cell-pd",key:t.id},[e.createElementVNode("view",{class:"cell-item"},[e.createElementVNode("radio",{value:t.id,checked:p.value.complaintTypeId==t.id,color:"#FFCC33",style:{transform:"scale(0.7)"}},null,8,["value","checked"]),e.createElementVNode("text",{style:e.normalizeStyle({color:p.value.complaintTypeId==t.id?"#FFCC33":""})},e.toDisplayString(t.typeName),5)])])))),128))],32)]),e.createElementVNode("view",null,[e.createElementVNode("view",{style:{"margin-bottom":"20rpx"}},"请在下方文本框内详情描述："),e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":n[0]||(n[0]=e=>p.value.description=e),"placeholder-style":"color:#9E9E9E;padding: 20rpx",placeholder:"请输入详情描述"},null,512),[[e.vModelText,p.value.description]])]),e.createElementVNode("view",{style:{"margin-top":"300rpx"}},[e.createVNode(l,{type:"primary",size:"large",shape:"circle",block:"",onClick:v},{default:e.withCtx((()=>[e.createTextVNode("确认提交")])),_:1})]),e.createElementVNode("view",{style:{"margin-top":"50rpx","text-align":"center",color:"#9E9E9E"},onClick:y},"投诉记录")])]),e.createVNode(d,{ref_key:"popup",ref:m,"background-color":"#fff",class:"unipopup"},{default:e.withCtx((()=>[e.createElementVNode("view",{class:"shutdown",onClick:g},[e.createVNode(o,{type:"closeempty",size:"20",color:"#A6A6A6"})]),e.createElementVNode("view",{class:"title"},"您的投诉已提交！"),e.createElementVNode("view",{class:"text"},"可在“投诉记录”查看审核进度"),e.createElementVNode("view",{class:"but"},"投诉记录")])),_:1},512)])}}},rc=ie(ic,[["__scopeId","data-v-0c4469c1"]]);const sc=ie({name:"uni-data-select",mixins:[Io.mixinDatacom||{}],props:{localdata:{type:Array,default:()=>[]},value:{type:[String,Number],default:""},modelValue:{type:[String,Number],default:""},label:{type:String,default:""},placeholder:{type:String,default:"请选择"},emptyTips:{type:String,default:"无选项"},clear:{type:Boolean,default:!0},defItem:{type:Number,default:0},disabled:{type:Boolean,default:!1},format:{type:String,default:""},placement:{type:String,default:"bottom"}},data:()=>({showSelector:!1,current:"",mixinDatacomResData:[],apps:[],channels:[],cacheKey:"uni-data-select-lastSelectedValue"}),created(){this.debounceGet=this.debounce((()=>{this.query()}),300),this.collection&&!this.localdata.length&&this.debounceGet()},computed:{typePlaceholder(){const e=this.placeholder,t={"opendb-stat-app-versions":"版本","opendb-app-channels":"渠道","opendb-app-list":"应用"}[this.collection];return t?e+t:e},valueCom(){return this.modelValue},textShow(){return this.current},getOffsetByPlacement(){switch(this.placement){case"top":return"bottom:calc(100% + 12px);";case"bottom":return"top:calc(100% + 12px);"}}},watch:{localdata:{immediate:!0,handler(e,t){Array.isArray(e)&&t!==e&&(this.mixinDatacomResData=e)}},valueCom(e,t){this.initDefVal()},mixinDatacomResData:{immediate:!0,handler(e){e.length&&this.initDefVal()}}},methods:{debounce(e,t=100){let a=null;return function(...n){a&&clearTimeout(a),a=setTimeout((()=>{e.apply(this,n)}),t)}},query(){this.mixinDatacomEasyGet()},onMixinDatacomPropsChange(){this.collection&&this.debounceGet()},initDefVal(){let e="";if(!this.valueCom&&0!==this.valueCom||this.isDisabled(this.valueCom)){let t;if(this.collection&&(t=this.getCache()),t||0===t)e=t;else{let t="";this.defItem>0&&this.defItem<=this.mixinDatacomResData.length&&(t=this.mixinDatacomResData[this.defItem-1].value),e=t}(e||0===e)&&this.emit(e)}else e=this.valueCom;const t=this.mixinDatacomResData.find((t=>t.value===e));this.current=t?this.formatItemName(t):""},isDisabled(e){let t=!1;return this.mixinDatacomResData.forEach((a=>{a.value===e&&(t=a.disable)})),t},clearVal(){this.emit(""),this.current="",this.collection&&this.removeCache()},change(e){e.disable||(this.showSelector=!1,this.current=this.formatItemName(e),this.emit(e.value))},emit(e){this.$emit("input",e),this.$emit("update:modelValue",e),this.$emit("change",e),this.collection&&this.setCache(e)},toggleSelector(){this.disabled||(this.showSelector=!this.showSelector)},formatItemName(e){let{text:t,value:a,channel_code:n}=e;if(n=n?`(${n})`:"",this.format){let t="";t=this.format;for(let a in e)t=t.replace(new RegExp(`{${a}}`,"g"),e[a]);return t}return this.collection.indexOf("app-list")>0?`${t}(${a})`:t||`未命名${n}`},getLoadData(){return this.mixinDatacomResData},getCurrentCacheKey(){return this.collection},getCache(e=this.getCurrentCacheKey()){return(uni.getStorageSync(this.cacheKey)||{})[e]},setCache(e,t=this.getCurrentCacheKey()){let a=uni.getStorageSync(this.cacheKey)||{};a[t]=e,uni.setStorageSync(this.cacheKey,a)},removeCache(e=this.getCurrentCacheKey()){let t=uni.getStorageSync(this.cacheKey)||{};delete t[e],uni.setStorageSync(this.cacheKey,t)}}},[["render",function(t,a,n,o,r,s){const l=i(e.resolveDynamicComponent("uni-icons"),re);return e.openBlock(),e.createElementBlock("view",{class:"uni-stat__select"},[n.label?(e.openBlock(),e.createElementBlock("span",{key:0,class:"uni-label-text hide-on-phone"},e.toDisplayString(n.label+"："),1)):e.createCommentVNode("",!0),e.createElementVNode("view",{class:e.normalizeClass(["uni-stat-box",{"uni-stat__actived":r.current}])},[e.createElementVNode("view",{class:e.normalizeClass(["uni-select",{"uni-select--disabled":n.disabled}])},[e.createElementVNode("view",{class:"uni-select__input-box",onClick:a[1]||(a[1]=(...e)=>s.toggleSelector&&s.toggleSelector(...e))},[r.current?(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-select__input-text"},e.toDisplayString(s.textShow),1)):(e.openBlock(),e.createElementBlock("view",{key:1,class:"uni-select__input-text uni-select__input-placeholder"},e.toDisplayString(s.typePlaceholder),1)),r.current&&n.clear&&!n.disabled?(e.openBlock(),e.createElementBlock("view",{key:"clear-button",onClick:a[0]||(a[0]=e.withModifiers(((...e)=>s.clearVal&&s.clearVal(...e)),["stop"]))},[e.createVNode(l,{type:"clear",color:"#c0c4cc",size:"24"})])):(e.openBlock(),e.createElementBlock("view",{key:"arrow-button"},[e.createVNode(l,{type:r.showSelector?"top":"bottom",size:"14",color:"#999"},null,8,["type"])]))]),r.showSelector?(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-select--mask",onClick:a[2]||(a[2]=(...e)=>s.toggleSelector&&s.toggleSelector(...e))})):e.createCommentVNode("",!0),r.showSelector?(e.openBlock(),e.createElementBlock("view",{key:1,class:"uni-select__selector",style:e.normalizeStyle(s.getOffsetByPlacement)},[e.createElementVNode("view",{class:e.normalizeClass("bottom"==n.placement?"uni-popper__arrow_bottom":"uni-popper__arrow_top")},null,2),e.createElementVNode("scroll-view",{"scroll-y":"true",class:"uni-select__selector-scroll"},[0===r.mixinDatacomResData.length?(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-select__selector-empty"},[e.createElementVNode("text",null,e.toDisplayString(n.emptyTips),1)])):(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:1},e.renderList(r.mixinDatacomResData,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"uni-select__selector-item",key:a,onClick:e=>s.change(t)},[e.createElementVNode("text",{class:e.normalizeClass({"uni-select__selector__disabled":t.disable})},e.toDisplayString(s.formatItemName(t)),3)],8,["onClick"])))),128))])],4)):e.createCommentVNode("",!0)],2)],2)])}],["__scopeId","data-v-5ba1e409"]]),lc="/static/order/ic-copy.png",cc=(e,t={})=>A.post("/api/order/order/wxPay",e,t),uc=(e,t={})=>A.post("/api/order/order/aliPay",e,t),dc=(e,t={})=>A.get("/api/wallet/summary",e,t),mc=(e,t={})=>A.post("/api/wallet/income/page",e,t),pc=(e,t={})=>A.post("/api/wallet/withdraw/page",e,t),hc=(e,t={})=>A.get("/api/order/order/payResult",e,t),vc=(e,t={})=>A.post("/api/order/order/createConsult",e,t),gc={__name:"refund-order",setup(t){e.useCssVars((e=>({b754d870:n.value})));const a=ae(),n=e.ref(a.statusBarHeight+"px"),o=e.ref(0),r=e.ref({}),s=e.ref("continue"),c=e.ref({orderSn:"",refundType:"",refundReason:"",refundDesc:""});d((e=>{o.value=e.scrollTop}));const u=()=>{uni.navigateBack({delta:1})},m=e.ref([{value:"老师原因",text:"老师原因"},{value:"个人原因",text:"个人原因"},{value:"其他原因",text:"其他原因"}]),p=e=>{c.value.refundType=e},h=e.ref([{value:"暂不需要"},{value:"协商一致"},{value:"联系不上"},{value:"时间冲突"},{value:"期望落差"},{value:"老师原因"},{value:"其他原因"},{value:"服务太多不好",checked:"true"}]);l((e=>{r.value=JSON.parse(e.order),c.value.orderSn=r.value.orderSn}));const v=e=>{c.value.refundReason=e.detail.value},g=e.ref(null),f=async()=>{""!=c.value.refundType&&""!=c.value.refundReason?g.value.open("center"):uni.showToast({title:"请填写完整信息",icon:"none"})},y=async()=>{try{await((e,t={})=>A.post("/api/order/order/applyRefund",e,t))(c.value);uni.showToast({title:"申请退款成功",icon:"success"}),s.value="success"}catch(Ft){}},_=()=>{g.value.close(),u()};return(t,a)=>{const n=i(e.resolveDynamicComponent("uni-icons"),re),l=i(e.resolveDynamicComponent("uni-nav-bar"),Di),d=i(e.resolveDynamicComponent("uni-data-select"),sc),k=i(e.resolveDynamicComponent("uni-popup"),vi);return e.openBlock(),e.createElementBlock("view",{class:"settled-box"},[e.createElementVNode("view",{class:"header"},[e.createVNode(l,{class:e.normalizeClass([o.value>15?"scrollClass":"","header-bar"]),backgroundColor:"rgba(255,255,255,0)",border:!1,title:"申请退款"},{left:e.withCtx((()=>[e.createVNode(n,{type:"left",size:"24",onClick:u})])),right:e.withCtx((()=>[e.createElementVNode("view",{class:"right"},[e.createElementVNode("image",{src:Ri,style:{width:"40rpx",height:"40rpx"}})])])),_:1},8,["class"])]),e.createElementVNode("view",{class:"content"},[e.createElementVNode("view",{class:"clause"},[e.createElementVNode("view",{class:"user-info"},[e.createElementVNode("view",{class:"user-name"},[e.createElementVNode("image",{src:r.value.teacherAvatar,class:"user-avatar"},null,8,["src"]),e.createElementVNode("view",null,e.toDisplayString(r.value.teacherName),1)]),e.createElementVNode("view",{class:"order-info"},[e.createElementVNode("view",null,"订单号："+e.toDisplayString(r.value.orderSn),1),e.createElementVNode("image",{src:lc,style:{width:"22rpx",height:"22rpx","margin-left":"10rpx"},onClick:a[0]||(a[0]=e=>{return t="Z20251119874653",void uni.setClipboardData({data:t,success(e){uni.showToast({title:"已复制"})}});var t})})])]),e.createElementVNode("view",{style:{"margin-top":"10rpx"}},e.toDisplayString(r.value.serviceInfo),1),e.createElementVNode("view",{class:"time"},[e.createTextVNode("购买时长："),e.createElementVNode("text",null,e.toDisplayString(r.value.buyDuration),1)]),e.createElementVNode("view",{class:"time"},[e.createTextVNode("服务方式："),e.createElementVNode("text",null,e.toDisplayString(r.value.consultTypeDesc),1)]),e.createElementVNode("view",{class:"time"},[e.createTextVNode("剩余时长："),e.createElementVNode("text",null,e.toDisplayString(r.value.remainingDuration),1)]),e.createElementVNode("view",{class:"time"},[e.createTextVNode("下单时间："),e.createElementVNode("text",null,e.toDisplayString(r.value.createTime),1)]),e.createElementVNode("view",{class:"time"},[e.createTextVNode("到期时间："),e.createElementVNode("text",null,e.toDisplayString(r.value.expireTime),1),e.createElementVNode("view",{class:"time-money"},"¥ "+e.toDisplayString(r.value.orderMoney),1)])])]),e.createElementVNode("view",{class:"refund-reason"},[e.createElementVNode("view",{class:"reason-title"},[e.createTextVNode("请选择退款类型:"),e.createElementVNode("text",null,"*")]),e.createElementVNode("view",null,[e.createVNode(d,{modelValue:c.value.refundType,"onUpdate:modelValue":a[1]||(a[1]=e=>c.value.refundType=e),localdata:m.value,onChange:p,placeholder:"请选择退款原因"},null,8,["modelValue","localdata"])])]),e.createElementVNode("view",{class:"refund-reason"},[e.createElementVNode("view",{class:"reason-title"},[e.createTextVNode("请选择退款原因:"),e.createElementVNode("text",null,"*")]),e.createElementVNode("view",{class:"radio-group"},[e.createElementVNode("radio-group",{onChange:v},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(h.value,((t,a)=>(e.openBlock(),e.createElementBlock("radio",{value:t.value,key:a,activeBackgroundColor:"#35CA95",style:{margin:"0 20rpx 30rpx 0"}},[e.createElementVNode("text",null,e.toDisplayString(t.value),1)],8,["value"])))),128))],32)])]),e.createElementVNode("view",{class:"refund-description"},[e.createElementVNode("view",{class:"radio-group"},[e.createElementVNode("view",{style:{"margin-bottom":"20rpx"}},"请在下方文本框内详情描述:"),e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":a[2]||(a[2]=e=>c.value.refundDesc=e),"placeholder-style":"color:#9E9E9E;padding: 20rpx",placeholder:"请输入详情描述"},null,512),[[e.vModelText,c.value.refundDesc]])])]),e.createElementVNode("view",{class:"refund-btn-container"},[e.createElementVNode("view",{class:"refund-btn",onClick:f},"确认退款")]),e.createVNode(k,{ref_key:"popup",ref:g,type:"center",animation:!1},{default:e.withCtx((()=>[e.createElementVNode("view",{class:"popup-container"},[e.createElementVNode("image",{src:"/static/auth/refund.png"}),"continue"==s.value?(e.openBlock(),e.createElementBlock("view",{key:0,class:"popup-title"},"很遗憾")):e.createCommentVNode("",!0),"continue"==s.value?(e.openBlock(),e.createElementBlock("view",{key:1,class:"popup-content"},"未能给你一个满意的服务体验")):e.createCommentVNode("",!0),"continue"==s.value?(e.openBlock(),e.createElementBlock("view",{key:2,class:"popup-btn"},[e.createElementVNode("view",{class:"popup-btn-text",onClick:y},"继续退款"),e.createElementVNode("view",{class:"popup-btn-text"},"|"),e.createElementVNode("view",{class:"popup-btn-text",onClick:y},"换一位老师")])):e.createCommentVNode("",!0),"success"==s.value?(e.openBlock(),e.createElementBlock("view",{key:3,class:"popup-content",style:{"margin-top":"50rpx"}},"退款成功")):e.createCommentVNode("",!0),"success"==s.value?(e.openBlock(),e.createElementBlock("view",{key:4,class:"popup-title",style:{margin:"0"}},"期待与您更好的重逢")):e.createCommentVNode("",!0),"success"==s.value?(e.openBlock(),e.createElementBlock("view",{key:5,class:"popup-btn"},[e.createElementVNode("view",{class:"popup-btn-text",onClick:_},"关闭"),e.createElementVNode("view",{class:"popup-btn-text"},"|"),e.createElementVNode("view",{class:"popup-btn-text",onClick:y},"看看其他老师")])):e.createCommentVNode("",!0)])])),_:1},512)])}}},fc=ie(gc,[["__scopeId","data-v-0db7e5d5"]]),yc={__name:"record",props:{titlePage:{type:String,default:"反馈记录"}},setup(t){e.useCssVars((e=>({"53dd465e":n.value})));const a=ae(),n=e.ref(a.statusBarHeight+"px"),r=e.ref([{id:1,typeName:"使用便捷问题"},{id:2,typeName:"登陆问题"},{id:3,typeName:"安全问题"},{id:4,typeName:"支付问题"},{id:5,typeName:"订单问题"},{id:6,typeName:"账号问题"},{id:7,typeName:"退款问题"}]),l=e.ref(0);d((e=>{l.value=e.scrollTop}));const c=()=>{uni.navigateBack({delta:1})};s((()=>{m()}));const u=e.ref([]),m=async()=>{let{data:e}=await((e,t={})=>A.post("/api/admin/feedback/page",e,t))({current:1,size:10,userId:a.userInfo.id});const t=e.records.map((e=>{const{type:t,detail:a}=(e=>{var t,a;let n="",o="";if(e&&e.trim()){const i=/类型：([^\n]+)/,r=/详情：([\s\S]*)/;n=(null==(t=e.match(i))?void 0:t[1])||"",o=(null==(a=e.match(r))?void 0:a[1])||""}return{type:Number(n)||"",detail:o}})(e.content);return{...e,type:t,detail:a,isShowDetail:!1}}));o("log","at pages/settings/record.vue:153",t),u.value=t};return m(),(a,n)=>{const o=i(e.resolveDynamicComponent("uni-icons"),re),s=i(e.resolveDynamicComponent("uni-nav-bar"),Di);return e.openBlock(),e.createElementBlock("view",{class:"settled-box"},[e.createElementVNode("view",{class:"header"},[e.createVNode(s,{backgroundColor:"rgba(255,255,255,0)",border:!1,title:t.titlePage,class:e.normalizeClass(["header-bar",l.value>15?"scrollClass":""])},{left:e.withCtx((()=>[e.createVNode(o,{type:"left",size:"24",onClick:c})])),right:e.withCtx((()=>[e.createElementVNode("view",{class:"right"},[e.createElementVNode("image",{src:Ri,style:{width:"40rpx",height:"40rpx"}})])])),_:1},8,["title","class"])]),e.createElementVNode("view",{class:"content"},[e.createElementVNode("view",{class:"feedback-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(u.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"feedback-item",key:t.id},[e.createElementVNode("view",{class:"time-item",onClick:e=>(e=>{u.value[e].isShowDetail=!u.value[e].isShowDetail})(a)},[e.createElementVNode("text",{class:"time-text"},e.toDisplayString(t.createdTime),1),e.createElementVNode("text",{class:"icon"},e.toDisplayString(t.isShowDetail?"▲":"▼"),1)],8,["onClick"]),e.withDirectives(e.createElementVNode("view",{class:"detail-box"},[e.createElementVNode("radio-group",{class:"clause-group"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.value,((a,n)=>(e.openBlock(),e.createElementBlock("label",{class:"uni-list-cell uni-list-cell-pd",key:a.id},[e.createElementVNode("view",{class:"cell-item"},[e.createElementVNode("radio",{value:a.id,checked:t.type==a.id,color:"#FFCC33",style:{transform:"scale(0.7)"},disabled:""},null,8,["value","checked"]),e.createElementVNode("text",{style:e.normalizeStyle({color:t.type==a.id?"#FFCC33":""})},e.toDisplayString(a.typeName),5)])])))),128))]),t.detail?(e.openBlock(),e.createElementBlock("view",{key:0,class:"content-item"},[e.createElementVNode("view",{style:{"margin-bottom":"10rpx"}},"您填写的详情描述："),e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":e=>t.detail=e,"placeholder-style":"color:#b0b2b4;padding: 20rpx",disabled:""},null,8,["onUpdate:modelValue"]),[[e.vModelText,t.detail]])])):e.createCommentVNode("",!0),t.detail?(e.openBlock(),e.createElementBlock("view",{key:1,style:{margin:"20rpx 0",display:"flex","align-items":"center","justify-content":"flex-end"}},[e.createElementVNode("view",{style:{color:"#5a5c5d"}},"提交时间："),e.createElementVNode("view",{style:{color:"#b0b2b4"}},e.toDisplayString(t.createdTime),1)])):e.createCommentVNode("",!0),t.replyContent?(e.openBlock(),e.createElementBlock("view",{key:2,class:"content-item"},[e.createElementVNode("view",{style:{"margin-bottom":"10rpx"}},"平台受理意见:"),e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":e=>t.replyContent=e,"placeholder-style":"color:#b0b2b4;padding: 20rpx",disabled:""},null,8,["onUpdate:modelValue"]),[[e.vModelText,t.replyContent]])])):e.createCommentVNode("",!0),t.replyContent?(e.openBlock(),e.createElementBlock("view",{key:3,style:{margin:"20rpx 0",display:"flex","align-items":"center","justify-content":"flex-end"}},[e.createElementVNode("view",{style:{color:"#5a5c5d"}},"回复时间："),e.createElementVNode("view",{style:{color:"#b0b2b4"}},e.toDisplayString(t.createdTime),1)])):e.createCommentVNode("",!0)],512),[[e.vShow,t.isShowDetail]])])))),128))])])])}}},_c=ie(yc,[["__scopeId","data-v-2a54772e"]]);const kc=ie({name:"u-badge",props:{type:{type:String,default:"error"},size:{type:String,default:"default"},isDot:{type:Boolean,default:!1},count:{type:[Number,String]},overflowCount:{type:Number,default:99},showZero:{type:Boolean,default:!1},offset:{type:Array,default:()=>[10,10]},absolute:{type:Boolean,default:!0},fontSize:{type:[String,Number],default:"12"},color:{type:String,default:"#ffffff"},bgColor:{type:String,default:""},isCenter:{type:Boolean,default:!1}},computed:{boxStyle(){let e={};return this.isCenter?(e.top=0,e.right=0,e.transform="translateY(-50%) translateX(50%)"):(e.top=this.offset[0]+"px",e.right=this.offset[1]+"px",e.transform="translateY(0) translateX(0)"),"mini"==this.size&&(e.transform=e.transform+" scale(0.8)"),e},showText(){return this.isDot?"":this.count>this.overflowCount?`${this.overflowCount}+`:this.count},show(){return 0!=this.count||0!=this.showZero}}},[["render",function(t,a,n,o,i,r){return r.show?(e.openBlock(),e.createElementBlock("view",{key:0,class:e.normalizeClass(["u-badge",[n.isDot?"u-badge-dot":"","mini"==n.size?"u-badge-mini":"",n.type?"u-badge--bg--"+n.type:""]]),style:e.normalizeStyle([{top:n.offset[0]+"px",right:n.offset[1]+"px",fontSize:n.fontSize+"px",position:n.absolute?"absolute":"static",color:n.color,backgroundColor:n.bgColor},r.boxStyle])},e.toDisplayString(r.showText),7)):e.createCommentVNode("",!0)}],["__scopeId","data-v-0bfee4b6"]]);const Ec=ie({name:"u-tabs",emits:["update:modelValue","input","change"],props:{value:{type:[Number,String],default:0},modelValue:{type:[Number,String],default:0},current:{type:[Number,String],default:0},isScroll:{type:Boolean,default:!0},list:{type:Array,default:()=>[]},height:{type:[String,Number],default:80},fontSize:{type:[String,Number],default:30},duration:{type:[String,Number],default:.5},activeColor:{type:String,default:"#2979ff"},inactiveColor:{type:String,default:"#303133"},barWidth:{type:[String,Number],default:40},barHeight:{type:[String,Number],default:6},gutter:{type:[String,Number],default:30},bgColor:{type:String,default:"#ffffff"},name:{type:String,default:"name"},count:{type:String,default:"count"},offset:{type:Array,default:()=>[5,20]},bold:{type:Boolean,default:!0},activeItemStyle:{type:Object,default:()=>({})},showBar:{type:Boolean,default:!0},barStyle:{type:Object,default:()=>({})},itemWidth:{type:[Number,String],default:"auto"}},data(){return{scrollLeft:0,tabQueryInfo:[],componentWidth:0,scrollBarLeft:0,parentLeft:0,id:this.$u.guid(),currentIndex:this.current,barFirstTimeMove:!0}},watch:{list(e,t){e.length!==t.length&&(this.currentIndex=0),this.$nextTick((()=>{this.init()}))},current:{immediate:!0,handler(e,t){this.$nextTick((()=>{this.currentIndex=e,this.scrollByIndex()}))}},valueCom:{immediate:!0,handler(e,t){this.$nextTick((()=>{this.currentIndex=e,this.scrollByIndex()}))}}},computed:{valueCom(){return this.modelValue},tabBarStyle(){let e={width:this.barWidth+"rpx",transform:`translate(${this.scrollBarLeft}px, -100%)`,"transition-duration":`${this.barFirstTimeMove?0:this.duration}s`,"background-color":this.activeColor,height:this.barHeight+"rpx","border-radius":this.barHeight/2+"px"};return Object.assign(e,this.barStyle),e},tabItemStyle(){return e=>{let t={height:this.height+"rpx","line-height":this.height+"rpx","font-size":this.fontSize+"rpx","transition-duration":`${this.duration}s`,padding:this.isScroll?`0 ${this.gutter}rpx`:"",flex:this.isScroll?"auto":"1",width:this.$u.addUnit(this.itemWidth)};return e==this.currentIndex&&this.bold&&(t.fontWeight="bold"),e==this.currentIndex?(t.color=this.activeColor,t=Object.assign(t,this.activeItemStyle)):t.color=this.inactiveColor,t}}},methods:{async init(){let e=await this.$uGetRect("#"+this.id);this.parentLeft=e.left,this.componentWidth=e.width,this.getTabRect()},clickTab(e){e!=this.currentIndex&&(this.$emit("change",e),this.$emit("input",e),this.$emit("update:modelValue",e))},getTabRect(){let e=uni.createSelectorQuery().in(this);for(let t=0;t<this.list.length;t++)e.select(`#u-tab-item-${t}`).fields({size:!0,rect:!0});e.exec(function(e){this.tabQueryInfo=e,this.scrollByIndex()}.bind(this))},scrollByIndex(){let e=this.tabQueryInfo[this.currentIndex];if(!e)return;let t=e.width,a=e.left-this.parentLeft-(this.componentWidth-t)/2;this.scrollLeft=a<0?0:a;let n=e.left+e.width/2-this.parentLeft;this.scrollBarLeft=n-uni.upx2px(this.barWidth)/2,1==this.barFirstTimeMove&&setTimeout((()=>{this.barFirstTimeMove=!1}),100)}},mounted(){this.init()}},[["render",function(t,a,n,o,r,s){const l=i(e.resolveDynamicComponent("u-badge"),kc);return e.openBlock(),e.createElementBlock("view",{class:"u-tabs",style:e.normalizeStyle({background:n.bgColor})},[e.createElementVNode("view",{id:r.id},[e.createElementVNode("scroll-view",{"scroll-x":"",class:"u-scroll-view","scroll-left":r.scrollLeft,"scroll-with-animation":""},[e.createElementVNode("view",{class:e.normalizeClass(["u-scroll-box",{"u-tabs-scroll-flex":!n.isScroll}]),id:r.id},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.list,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"u-tab-item u-line-1",id:"u-tab-item-"+a,key:a,onClick:e=>s.clickTab(a),style:e.normalizeStyle([s.tabItemStyle(a)])},[e.createVNode(l,{count:t[n.count]||t.count||0,offset:n.offset,size:"mini"},null,8,["count","offset"]),e.createTextVNode(" "+e.toDisplayString(t[n.name]||t.name),1)],12,["id","onClick"])))),128)),n.showBar?(e.openBlock(),e.createElementBlock("view",{key:0,class:"u-tab-bar",style:e.normalizeStyle([s.tabBarStyle])},null,4)):e.createCommentVNode("",!0)],10,["id"])],8,["scroll-left"])],8,["id"])],4)}],["__scopeId","data-v-def35b9a"]]),xc={__name:"consult-order",setup(t){const a=e.ref([{name:"全部"},{name:"待付款"},{name:"待咨询"},{name:"待评价"},{name:"交易完成"}]),n=e.ref({current:1,params:{orderType:9,current:1,size:10},size:10}),r=e.ref(0),s=e.ref([]),c=e=>{n.value.current=1,n.value.params.status=e,r.value=e,s.value=[],0==e&&delete n.value.params.status,d()},u=e.ref(!1);m((()=>{u.value||(n.value.current+=1,d())}));const d=async()=>{try{const{data:e}=await Zl(n.value);s.value=[...s.value,...e.records],u.value=0===res.data.records.length}catch(Ft){o("log","at pages/payment/order/consult-order.vue:172",Ft)}},p=e=>{switch(e){case 1:return"待付款";case 2:return"待咨询";case 3:return"待评价";case 4:return"已完成";case 5:return"交易关闭";case 6:return"退款";default:return""}},h=e.ref({});l((e=>{h.value=JSON.parse(e.type),"consult-order"==e.identity?n.value.params.consultantId=h.value.id:"listener-order"==e.identity?n.value.params.listenerId=h.value.id:n.value.params.userId=h.value.id}));return e.onMounted((()=>{d()})),(t,n)=>{const l=i(e.resolveDynamicComponent("u-navbar"),Fl),u=i(e.resolveDynamicComponent("u-tabs"),Ec),m=i(e.resolveDynamicComponent("u-button"),Bl);return e.openBlock(),e.createElementBlock("view",{class:"order-page"},[e.createVNode(l,{title:"咨询订单",autoBack:!0}),e.createVNode(u,{list:a.value,onChange:c,current:r.value,lineColor:"#00C28A",activeStyle:"color:#000;font-weight:600",inactiveStyle:"color:#666"},null,8,["list","current"]),e.createElementVNode("scroll-view",{"scroll-y":"",class:"order-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.value,((t,a)=>{return e.openBlock(),e.createElementBlock("view",{key:a,class:e.normalizeClass(["order-card",(n=t.status,{"待支付":"","待咨询":"","待评价":"","已完成":"","未完成":""}[n])])},[e.createElementVNode("view",{class:"order-header"},[e.createElementVNode("text",{class:"order-no"},[e.createTextVNode("订单号："+e.toDisplayString(t.orderSn)+" ",1),e.createElementVNode("image",{src:lc,style:{width:"28rpx",height:"28rpx","margin-left":"15rpx"},onClick:e=>{return a=t.orderSn,void uni.setClipboardData({data:a,success(e){uni.showToast({title:"已复制"})}});var a}},null,8,["onClick"])]),e.createElementVNode("text",{class:"status green"},e.toDisplayString(p(t.status)),1)]),e.createElementVNode("view",{class:"user-info"},[e.createElementVNode("image",{src:t.teacherAvatar,class:"avatar"},null,8,["src"]),e.createElementVNode("text",{class:"username"},e.toDisplayString(t.teacherName),1)]),e.createElementVNode("view",{class:"order-body",onClick:e=>(e=>{uni.navigateTo({url:`/pages/payment/order-details?status=${JSON.stringify(e)}&type=${JSON.stringify(h.value)}&colorType=1`})})(t)},[e.createElementVNode("view",{class:"desc"},[e.createElementVNode("text",null,"购买时长："),e.createTextVNode(e.toDisplayString(t.buyDuration),1)]),e.createElementVNode("view",{class:"desc"},[e.createElementVNode("text",null,"服务方式："),e.createTextVNode(e.toDisplayString(t.consultTypeDesc),1)]),e.createElementVNode("view",{class:"desc"},[e.createElementVNode("text",null,"剩余时间："),e.createTextVNode(e.toDisplayString(t.remainingDuration),1)]),e.createElementVNode("view",{class:"desc"},[e.createElementVNode("text",null,"到期时间："),e.createTextVNode(e.toDisplayString(t.expireTime),1)]),e.createElementVNode("view",{class:"desc"},[e.createElementVNode("text",null,"下单时间："),e.createTextVNode(e.toDisplayString(t.createTime),1)])],8,["onClick"]),e.createElementVNode("view",{class:"order-footer"},[e.createElementVNode("view",{class:"price"},"￥"+e.toDisplayString(t.orderMoney),1)]),e.createElementVNode("view",{class:"btn-group"},[e.createElementVNode("view",{style:{display:"flex","flex-direction":"row",gap:"20rpx"}},[1==t.status?(e.openBlock(),e.createBlock(m,{key:0,class:"btn",size:"small",shape:"circle",plain:"",type:"info",onClick:e=>(async e=>{try{await Xl({orderSn:e.orderSn}),uni.showToast({title:"取消成功",icon:"none"}),d()}catch(Ft){o("log","at pages/payment/order/consult-order.vue:262",Ft)}})(t)},{default:e.withCtx((()=>[e.createTextVNode("取消订单")])),_:2},1032,["onClick"])):e.createCommentVNode("",!0),1==t.status?(e.openBlock(),e.createBlock(m,{key:1,class:"btn",size:"small",shape:"circle",type:"success"},{default:e.withCtx((()=>[e.createTextVNode("立即支付")])),_:1})):e.createCommentVNode("",!0),2==t.status?(e.openBlock(),e.createBlock(m,{key:2,class:"btn",size:"small",shape:"circle",plain:"",type:"info"},{default:e.withCtx((()=>[e.createTextVNode("退款")])),_:1})):e.createCommentVNode("",!0),2==t.status?(e.openBlock(),e.createBlock(m,{key:3,class:"btn",size:"small",shape:"circle",type:"success",onClick:e=>{o("log","at pages/payment/order/consult-order.vue:245",t)}},{default:e.withCtx((()=>[e.createTextVNode("立即咨询")])),_:2},1032,["onClick"])):e.createCommentVNode("",!0),3==t.status?(e.openBlock(),e.createBlock(m,{key:4,class:"btn",size:"small",shape:"circle",type:"success",onClick:e=>{uni.navigateTo({url:`/pages/payment/order/evaluation-order?type=${JSON.stringify(h.value)}&colorType=2`})}},{default:e.withCtx((()=>[e.createTextVNode("去评价")])),_:2},1032,["onClick"])):e.createCommentVNode("",!0)])])],2);var n})),128))])])}}},Nc=ie(xc,[["__scopeId","data-v-19ade611"]]),wc={__name:"exam-order",setup(t){const a=e.ref([{name:"已付款"},{name:"待支付"}]),n=e.ref(0),o=e.ref([{orderNo:"78567564565",status:"未完成",name:"张三",avatar:"/static/avatar.png",image:"/static/test.png",title:"谈一段好的爱情",desc:"现在社会压力越来越大现在社会压力越来越大现在社会压力越来越大",price:66,time:"2025-11-02 09:25"},{orderNo:"78567564565",status:"已完成",name:"张三",avatar:"/static/avatar.png",image:"/static/test.png",title:"谈一段好的爱情",desc:"现在社会压力越来越大现在社会压力越来越大现在社会压力越来越大",price:66,time:"2025-11-02 09:25"},{orderNo:"78567564565",status:"待支付",name:"张三",avatar:"/static/avatar.png",image:"/static/test.png",title:"谈一段好的爱情",desc:"现在社会压力越来越大现在社会压力越来越大现在社会压力越来越大",price:66,time:"2025-11-02 09:25"}]),r=e=>{n.value=e.index};return(t,s)=>{const l=i(e.resolveDynamicComponent("u-navbar"),Fl),c=i(e.resolveDynamicComponent("u-tabs"),Ec),u=i(e.resolveDynamicComponent("u-button"),Bl);return e.openBlock(),e.createElementBlock("view",{class:"evaluate-page"},[e.createVNode(l,{title:"评测记录",autoBack:!0}),e.createVNode(c,{list:a.value,onClick:r,current:n.value,lineColor:"#00C28A",activeStyle:"color:#000;font-weight:600",inactiveStyle:"color:#666"},null,8,["list","current"]),e.createElementVNode("scroll-view",{"scroll-y":"",class:"record-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.value,((t,a)=>{return e.openBlock(),e.createElementBlock("view",{key:a,class:"record-card"},[e.createElementVNode("view",{class:"order-header"},[e.createElementVNode("text",{class:"order-no"},"订单号："+e.toDisplayString(t.orderNo),1),e.createElementVNode("text",{class:e.normalizeClass(["status",(n=t.status,{"未完成":"red","已完成":"green","待支付":"orange"}[n])])},e.toDisplayString(t.status),3)]),e.createElementVNode("view",{class:"user-info"},[e.createElementVNode("image",{src:t.avatar,class:"avatar"},null,8,["src"]),e.createElementVNode("text",{class:"name"},e.toDisplayString(t.name),1)]),e.createElementVNode("view",{class:"record-content"},[e.createElementVNode("image",{src:t.image,class:"cover"},null,8,["src"]),e.createElementVNode("view",{class:"info"},[e.createElementVNode("view",{class:"title"},e.toDisplayString(t.title),1),e.createElementVNode("view",{class:"desc"},e.toDisplayString(t.desc),1)])]),e.createElementVNode("view",{class:"record-footer"},[e.createElementVNode("text",{class:"time"},"下单时间："+e.toDisplayString(t.time),1),e.createElementVNode("text",{class:"price"},"￥"+e.toDisplayString(t.price),1)]),e.createElementVNode("view",{class:"btn-group"},[e.createElementVNode("view",{style:{display:"flex","flex-direction":"row",gap:"10rpx"}},["未完成"===t.status?(e.openBlock(),e.createBlock(u,{key:0,class:"btn",size:"small",shape:"circle",type:"success"},{default:e.withCtx((()=>[e.createTextVNode("继续评测")])),_:1})):e.createCommentVNode("",!0),"已完成"===t.status?(e.openBlock(),e.createBlock(u,{key:1,class:"btn",size:"small",shape:"circle",type:"success"},{default:e.withCtx((()=>[e.createTextVNode("查看报告")])),_:1})):e.createCommentVNode("",!0),"待支付"===t.status?(e.openBlock(),e.createBlock(u,{key:2,class:"btn",size:"small",shape:"circle",plain:"",type:"info"},{default:e.withCtx((()=>[e.createTextVNode("取消订单")])),_:1})):e.createCommentVNode("",!0),"待支付"===t.status?(e.openBlock(),e.createBlock(u,{key:3,class:"btn",size:"small",shape:"circle",type:"success"},{default:e.withCtx((()=>[e.createTextVNode("立即支付")])),_:1})):e.createCommentVNode("",!0)])])]);var n})),128))])])}}},Cc=ie(wc,[["__scopeId","data-v-adf6bc26"]]),Mc={__name:"listener-order",setup(t){const a=e.ref([{name:"全部"},{name:"待付款"},{name:"待咨询"},{name:"待评价"},{name:"交易完成"}]),n=e.ref(!1),r=e.ref(0),s=e.ref([]),c=e=>{u.value.current=1,u.value.params.status=e,r.value=e,s.value=[],0==e&&delete u.value.params.status,p()},u=e.ref({current:1,params:{current:1,size:10,orderType:10},size:10}),d=e.ref(!1);m((()=>{d.value||(u.value.current+=1,p())}));const p=async()=>{try{const e=await Zl(u.value);s.value=[...s.value,...e.data.records],d.value=0===e.data.records.length}catch(Ft){o("log","at pages/payment/order/listener-order.vue:184",Ft)}},h=e=>{switch(e){case 1:return"待付款";case 2:return"待咨询";case 3:return"待评价";case 4:return"已完成";case 5:return"交易关闭";case 6:return"退款";default:return""}},v=e.ref({});l((e=>{n.value=e.service,v.value=JSON.parse(e.type),"consult-order"==e.identity?u.value.params.consultantId=v.value.id:"listener-order"==e.identity?u.value.params.listenerId=v.value.id:u.value.params.userId=v.value.id}));return e.onMounted((()=>{p()})),(t,l)=>{const u=i(e.resolveDynamicComponent("u-navbar"),Fl),d=i(e.resolveDynamicComponent("u-tabs"),Ec),m=i(e.resolveDynamicComponent("u-button"),Bl);return e.openBlock(),e.createElementBlock("view",{class:"order-page"},[e.createVNode(u,{title:"倾诉订单",autoBack:!0}),e.createVNode(d,{list:a.value,onChange:c,current:r.value,lineColor:"#00C28A",activeStyle:"color:#000;font-weight:600",inactiveStyle:"color:#666"},null,8,["list","current"]),e.createElementVNode("scroll-view",{"scroll-y":"",class:"order-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.value,((t,a)=>{return e.openBlock(),e.createElementBlock("view",{key:a,class:e.normalizeClass(["order-card",(i=t.status,{"待支付":"","待咨询":"","待评价":"","已完成":"","未完成":""}[i])])},[e.createElementVNode("view",{class:"order-header"},[e.createElementVNode("text",{class:"order-no"},[e.createTextVNode("订单号："+e.toDisplayString(t.orderSn)+" ",1),e.createElementVNode("image",{src:lc,style:{width:"28rpx",height:"28rpx","margin-left":"15rpx"},onClick:e=>{return a=t.orderSn,void uni.setClipboardData({data:a,success(e){uni.showToast({title:"已复制"})}});var a}},null,8,["onClick"])]),e.createElementVNode("text",{class:"status orange"},e.toDisplayString(h(t.status)),1)]),e.createElementVNode("view",{class:"user-info"},[e.createElementVNode("image",{src:t.teacherAvatar,class:"avatar"},null,8,["src"]),e.createElementVNode("text",{class:"username"},e.toDisplayString(t.teacherName),1)]),e.createElementVNode("view",{class:"order-body",onClick:e=>(e=>{uni.navigateTo({url:`/pages/payment/order-details?status=${JSON.stringify(e)}&type=${JSON.stringify(v.value)}&colorType=2`})})(t)},[e.createElementVNode("view",{class:"desc"},[e.createElementVNode("text",null,"购买时长："),e.createTextVNode(e.toDisplayString(t.buyDuration),1)]),e.createElementVNode("view",{class:"desc"},[e.createElementVNode("text",null,"服务方式："),e.createTextVNode(e.toDisplayString(t.consultTypeDesc),1)]),e.createElementVNode("view",{class:"desc"},[e.createElementVNode("text",null,"剩余时间："),e.createTextVNode(e.toDisplayString(t.remainingDuration),1)]),e.createElementVNode("view",{class:"desc"},[e.createElementVNode("text",null,"到期时间："),e.createTextVNode(e.toDisplayString(t.expirationTime),1)]),e.createElementVNode("view",{class:"desc"},[e.createElementVNode("text",null,"下单时间："),e.createTextVNode(e.toDisplayString(t.createTime),1)])],8,["onClick"]),e.createElementVNode("view",{class:"order-footer"},[e.createElementVNode("view",{class:"price"},"￥"+e.toDisplayString(t.orderMoney),1)]),e.createElementVNode("view",{class:"btn-group"},[e.createElementVNode("view",{style:{display:"flex","flex-direction":"row",gap:"20rpx"}},[1==t.status?(e.openBlock(),e.createBlock(m,{key:0,class:"btn",size:"small",shape:"circle",plain:"",type:"info",onClick:e=>(async e=>{try{await Xl({orderSn:e.orderSn}),uni.showToast({title:"取消成功",icon:"none"}),p()}catch(Ft){o("log","at pages/payment/order/listener-order.vue:273",Ft)}})(t)},{default:e.withCtx((()=>[e.createTextVNode("取消订单")])),_:2},1032,["onClick"])):e.createCommentVNode("",!0),1==t.status&&n.value?(e.openBlock(),e.createBlock(m,{key:1,class:"btn",size:"small",shape:"circle",type:"warning"},{default:e.withCtx((()=>[e.createTextVNode("立即支付")])),_:1})):e.createCommentVNode("",!0),2==t.status?(e.openBlock(),e.createBlock(m,{key:2,class:"btn",size:"small",shape:"circle",plain:"",type:"info",onClick:e=>(e=>{uni.navigateTo({url:`/pages/payment/order/refund-order?order=${JSON.stringify(e)}`})})(t)},{default:e.withCtx((()=>[e.createTextVNode("退款")])),_:2},1032,["onClick"])):e.createCommentVNode("",!0),2==t.status?(e.openBlock(),e.createBlock(m,{key:3,class:"btn",size:"small",shape:"circle",type:"warning",onClick:e=>(e=>{const{teacherUserId:t,teacherName:a,teacherAvatar:n}=e;uni.navigateTo({url:`/pages/message/private-chat?to=${t}&name=${a}&avatar=${n}`})})(t)},{default:e.withCtx((()=>[e.createTextVNode("立即咨询")])),_:2},1032,["onClick"])):e.createCommentVNode("",!0),3==t.status?(e.openBlock(),e.createBlock(m,{key:4,class:"btn",size:"small",shape:"circle",type:"warning",onClick:e=>{uni.navigateTo({url:`/pages/payment/order/evaluation-order?type=${JSON.stringify(v.value)}&colorType=1`})}},{default:e.withCtx((()=>[e.createTextVNode("去评价")])),_:2},1032,["onClick"])):e.createCommentVNode("",!0)])])],2);var i})),128))])])}}},Sc=ie(Mc,[["__scopeId","data-v-59a107f3"]]),Ic={__name:"bill-order",setup(t){e.useCssVars((e=>({84108992:n.value})));const a=ae(),n=e.ref(a.statusBarHeight+"px");s((()=>{}));const o=()=>{uni.navigateBack({delta:1})},r=e.ref(0);d((e=>{r.value=e.scrollTop}));const l=e.ref([{orderNumber:78567564565,title:"婚姻关系咨询",time:"10分钟",service:"语音咨询",remainingTime:"10:00",timeOrder:"2024-06-01 14:30",timeExpiration:"2024-06-01 15:30",amountOrder:"￥200"},{orderNumber:78567564565,title:"婚姻关系咨询",time:"10分钟",service:"语音咨询",remainingTime:"10:00",timeOrder:"2024-06-01 14:30",timeExpiration:"2024-06-01 15:30",amountOrder:"￥200"},{orderNumber:78567564565,title:"婚姻关系咨询",time:"10分钟",service:"语音咨询",remainingTime:"10:00",timeOrder:"2024-06-01 14:30",timeExpiration:"2024-06-01 15:30",amountOrder:"￥200"}]);return(t,a)=>{const n=i(e.resolveDynamicComponent("uni-icons"),re),s=i(e.resolveDynamicComponent("uni-nav-bar"),Di),c=i(e.resolveDynamicComponent("uni-datetime-picker"),Qs);return e.openBlock(),e.createElementBlock("view",{class:"settled-box"},[e.createElementVNode("view",{class:"header"},[e.createVNode(s,{class:e.normalizeClass([r.value>15?"scrollClass":"","header-bar"]),backgroundColor:"rgba(255,255,255,0)",border:!1,title:"账单"},{left:e.withCtx((()=>[e.createVNode(n,{type:"left",size:"24",onClick:o})])),right:e.withCtx((()=>[e.createElementVNode("view",{class:"right"},[e.createElementVNode("image",{src:Ri,style:{width:"40rpx",height:"40rpx"}})])])),_:1},8,["class"])]),e.createElementVNode("view",{class:"content"},[e.createElementVNode("view",{class:"content-details"},[e.createElementVNode("view",{class:"detail-item"},[e.createElementVNode("view",null,"支出"),e.createElementVNode("view",null,"158 元")]),e.createElementVNode("view",null,"｜"),e.createElementVNode("view",{class:"detail-item"},[e.createElementVNode("view",null,"退款"),e.createElementVNode("view",null,"56 元")])]),e.createElementVNode("view",{class:"content-tiem"},[e.createVNode(c,{type:"date",placeholder:"选择开始日期",value:t.single,onChange:t.change},null,8,["value","onChange"]),e.createElementVNode("view",null,"——"),e.createVNode(c,{type:"date",placeholder:"选择结束日期",value:t.single,onChange:t.change},null,8,["value","onChange"])]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"clause"},[e.createElementVNode("view",{class:"clause-item"},[e.createElementVNode("view",{class:"item-head"},[e.createElementVNode("view",{class:"head-left"},[e.createElementVNode("view",null,"头像"),e.createElementVNode("view",null,"张三")]),e.createElementVNode("view",{class:"head-right"},[e.createElementVNode("view",null,"订单号："+e.toDisplayString(t.orderNumber),1),e.createElementVNode("image",{src:lc,style:{width:"28rpx",height:"28rpx","margin-left":"15rpx"},onClick:e=>{return a=t.orderNo,void uni.setClipboardData({data:a,success(e){uni.showToast({title:"已复制"})}});var a}},null,8,["onClick"])])]),e.createElementVNode("view",{class:"item-content"},[e.createElementVNode("view",{class:"content-left"},[e.createElementVNode("view",null,e.toDisplayString(t.title),1),e.createElementVNode("view",null,[e.createElementVNode("text",null,"购买时长："),e.createTextVNode(e.toDisplayString(t.time),1)]),e.createElementVNode("view",null,[e.createElementVNode("text",null,"服务方式："),e.createTextVNode(e.toDisplayString(t.service),1)]),e.createElementVNode("view",null,[e.createElementVNode("text",null,"剩余时间："),e.createTextVNode(e.toDisplayString(t.remainingTime),1)]),e.createElementVNode("view",null,[e.createElementVNode("text",null,"下单时间："),e.createTextVNode(e.toDisplayString(t.timeOrder),1)]),e.createElementVNode("view",null,[e.createElementVNode("text",null,"到期时间："),e.createTextVNode(e.toDisplayString(t.timeExpiration),1)]),e.createElementVNode("view",null,[e.createElementVNode("text",null,"订单金额："),e.createTextVNode(e.toDisplayString(t.amountOrder),1)])]),e.createElementVNode("view",{class:"content-right"},[e.createElementVNode("view",null,e.toDisplayString(t.amountOrder),1),e.createElementVNode("text",null,"支出")])])])])))),256))])])}}},Tc=ie(Ic,[["__scopeId","data-v-d564c461"]]),Dc=ie({__name:"Tags-Container",props:{modelValue:{type:String,default:""},inputName:{type:String,default:"evaluation_tags"},debug:{type:Boolean,default:!1},colorType:{type:String,default:"#34A76F"}},emits:["update:modelValue"],setup(t,{expose:a,emit:n}){e.useCssVars((e=>({"3e452e92":t.colorType})));const o=t,i=e.ref(["咨询师专业性","共情与倾听能力","沟通与引导技巧","咨询效果满意度","响应及时性","隐私保护措施","平台操作体验","性价比感知"]),r=e.ref([]);o.modelValue&&(r.value=o.modelValue.split(",").filter((e=>e))),e.watch((()=>o.modelValue),(e=>{r.value=e?e.split(",").filter((e=>e)):[]}));const s=e=>{const t=r.value.indexOf(e);t>-1?r.value.splice(t,1):r.value.push(e)},l=e=>r.value.includes(e),c=e.computed({get:()=>r.value.join(","),set(e){r.value=e.split(",").filter((e=>e))}}),u=n;return e.watch(c,(e=>{u("update:modelValue",e)})),a({selectedTags:r,selectedTagsStr:c,toggleTag:s}),(t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"tags-container"},[e.createElementVNode("view",{class:"tags-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{key:a,class:e.normalizeClass(["tag-item",{active:l(t)}]),onClick:e=>s(t)},e.toDisplayString(t),11,["onClick"])))),128))])]))}},[["__scopeId","data-v-9930f944"]]),bc={__name:"evaluation-order",setup(t){e.useCssVars((e=>({"95bc2720":r.value,"902c3c0e":s.value,"7db59736":p.value})));const a=e.ref(0),n=ae(),r=e.ref(n.statusBarHeight+"px"),s=e.ref("#35ca955c"),c=e.ref({type:1,tags:"",star:0,recommendStar:0,isAnonymous:0,targetUserId:"1998631440393773058",content:""}),u=e=>{a.value=e.detail.scrollTop},d=()=>{uni.navigateBack({delta:1})},m=e.ref({}),p=e.ref("#34A76F");l((e=>{m.value=JSON.parse(e.order),o("log","at pages/payment/order/evaluation-order.vue:120",m.value,p.value,s.value),p.value=1==e.colorType?"#eb9516":"#35CA95",1==e.colorType?s.value="#ffbb4166":s.value="#35ca955c"}));const h=e.ref(null),v=()=>{h.value.close()},g=e=>{c.value.isAnonymous=e.detail.value[0]?1:0},f=async()=>{if(c.value.tags)try{await((e,t={})=>A.post("/api/comment/comment/saveComment",e,t))(c.value);uni.showToast({title:"评价提交成功",icon:"success"})}catch(Ft){}else uni.showToast({title:"请至少选择一个评价维度",icon:"none"})},y=()=>{const{userId:e,teacherName:t,teacherAvatar:a}=m.value;uni.navigateTo({url:`/pages/message/private-chat?to=${e}&name=${t}&avatar=${a}`})};return(t,n)=>{const o=i(e.resolveDynamicComponent("uni-icons"),re),r=i(e.resolveDynamicComponent("uni-nav-bar"),Di),l=i(e.resolveDynamicComponent("uni-rate"),Ai),_=i(e.resolveDynamicComponent("uni-popup"),vi);return e.openBlock(),e.createElementBlock("view",{class:"settled-box"},[e.createElementVNode("view",{class:"header"},[e.createVNode(r,{class:e.normalizeClass([a.value>15?"scrollClass":"","header-bar"]),backgroundColor:"rgba(255,255,255,0)",border:!1,title:"评价"},{left:e.withCtx((()=>[e.createVNode(o,{type:"left",size:"24",onClick:d})])),_:1},8,["class"])]),e.createElementVNode("scroll-view",{"scroll-y":"",onScroll:u,style:{height:"100vh"},"show-scrollbar":!1},[e.createElementVNode("view",{class:"consultation-content"},[e.createElementVNode("view",{class:"user-info-section"},[e.createElementVNode("view",{class:"user-info"},[e.createElementVNode("image",{src:m.value.teacherAvatar,class:"user-avatar"},null,8,["src"]),e.createElementVNode("view",{class:"user-details"},[e.createElementVNode("view",{class:"user-name"},e.toDisplayString(m.value.teacherName),1)])]),e.createElementVNode("view",{style:e.normalizeStyle({color:p.value}),onClick:y}," 私聊ta ",4)]),e.createElementVNode("view",{class:"evaluation-content"},[e.createElementVNode("view",{class:"evaluation-item"},[e.createElementVNode("view",null,"满意程度"),e.createVNode(l,{modelValue:c.value.star,"onUpdate:modelValue":n[0]||(n[0]=e=>c.value.star=e),size:"18",value:5},null,8,["modelValue"])]),e.createElementVNode("view",{class:"evaluation-item"},[e.createElementVNode("view",null,"值得推荐"),e.createVNode(l,{modelValue:c.value.recommendStar,"onUpdate:modelValue":n[1]||(n[1]=e=>c.value.recommendStar=e),size:"18",value:5},null,8,["modelValue"])]),e.createElementVNode("view",null,[e.createElementVNode("view",null,"对Ta的印象"),e.createVNode(Dc,{modelValue:c.value.tags,"onUpdate:modelValue":n[2]||(n[2]=e=>c.value.tags=e),debug:!0,colorType:p.value,style:e.normalizeStyle({backgroundColor:"#ffbb4166"==s.value?"#FFFAF1":"#F3F9F7"}),class:"tags-select"},null,8,["modelValue","colorType","style"])]),e.createElementVNode("view",null,[e.createElementVNode("view",null,"评价描述"),e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":n[3]||(n[3]=e=>c.value.content=e),"placeholder-style":"\n\t\t\t\t\t\t\tbackground-color: #F6F6F6;\n\t\t\t\t\t\t\twidth: 100%; color:#9E9E9E;\n\t\t\t\t\t\t\tpadding: 20rpx;",placeholder:"请输入详情描述"},null,512),[[e.vModelText,c.value.content]]),e.createElementVNode("view",{class:"anonymous"},[e.createElementVNode("checkbox-group",{onChange:g},[e.createElementVNode("checkbox",{value:1,checked:!1})],32),e.createElementVNode("view",null,"匿名评价")])]),e.createElementVNode("view",{class:"evaluation-btn"},[e.createElementVNode("view",{class:"evaluation-btn-text",onClick:f},"提交")])])])],32),e.createVNode(_,{ref_key:"popup",ref:h,type:"center",animation:!1},{default:e.withCtx((()=>[e.createElementVNode("view",{class:"popup-container"},[e.createElementVNode("view",{class:"popup-title"},[e.createVNode(o,{type:"notification-filled",size:"40",color:"#35CA95"})]),e.createElementVNode("view",{class:"popup-content"}," 抱歉，您存在的情况不适于咨询， 建议您选择更专业治疗，以便于给您提 供更好的服务。 "),e.createElementVNode("view",{class:"popup-btn"},[e.createElementVNode("view",{class:"popup-btn-text",onClick:v},"知道了")])])])),_:1},512)])}}},Vc=ie(bc,[["__scopeId","data-v-d62a9fb6"]]),Ac={__name:"services",setup(t){const a=e.ref([]),n=e.ref("");n.value=D+"/api/common/upload";const r=uni.getStorageSync("token"),s=e.ref({token:r}),c=()=>{d.value=!1},u=()=>{},d=e.ref(!1),m=e.ref(!1),p=async()=>{let e=await A.get("/api/appMenu/allServices");k.value=e.data,o("log","at pages/settings/services.vue:199",e.data),k.value.forEach((e=>{e.children=JSON.parse(e.children||"[]"),N.value.includes(String(e.id))?e.checked=!0:e.checked=!1,e.children.forEach((t=>{N.value.includes(String(t.id))?(e.selectedList||(e.selectedList=[]),e.selectedList.push(t),t.selected=!0,e.checked=!0):t.selected=!1}))}))},h=e.ref(["白羊座","金牛座","双子座","巨蟹座","狮子座","处女座","天秤座","天蝎座","射手座","摩羯座","水瓶座","双鱼座"]);l((()=>{w()}));const v=e.ref(!1),g=()=>{v.value=!0},f=()=>{let e=k.value,t=[],a=[];e.forEach((e=>{e.checked&&(e.selectedList?e.selectedList.forEach((e=>{t.push(e.name),a.push(e.id)})):(t.push(e.name),a.push(e.id)))})),C.value.serviceType=a.join(","),C.value.serviceTypeDesc=t.join(","),m.value=!1},y=e=>{C.value.address=e.province.name+e.city.name+e.area.name},_=(e,t,a,n)=>{var i;(null==(i=null==e?void 0:e.data)?void 0:i.url)&&(a[t].url=e.data.url),C.value.gallery=JSON.stringify(a.map((e=>{var t,a;return e.url||(null==(a=null==(t=e.response)?void 0:t.data)?void 0:a.url)||""})).filter((e=>e))),o("log","at pages/settings/services.vue:278",C.value.gallery)},k=e.ref([]),E=e=>e.children?e.expanded?e.children:e.children.slice(0,6):[],x=e=>{C.value.constellation=h.value[e.detail.value]},N=e.ref([]),w=async()=>{let e=await((e,t={})=>A.get("/api/user/roleInfo",e,t))();C.value=e.data;let t=C.value.serviceType;if(N.value=t.split(","),p(),o("log","at pages/settings/services.vue:370",N.value),C.value.gallery){let e=JSON.parse(C.value.gallery);a.value=e.map((e=>({url:e})))}},C=e.ref({}),M=()=>uni.showToast({title:"选择星座",icon:"none"}),S=(e,t,n,i)=>{o("log","at pages/settings/services.vue:402","图片已被移除 index:",t),o("log","at pages/settings/services.vue:406",a),a.value.splice(t,1),a.value?(o("log","at pages/settings/services.vue:410",a.value),C.value.gallery=JSON.stringify(a.value.map((e=>{var t,a;return e.url||(null==(a=null==(t=e.response)?void 0:t.data)?void 0:a.url)||""})).filter((e=>e))),o("log","at pages/settings/services.vue:416",C.value.gallery)):C.value.gallery=""},I=()=>uni.showToast({title:"选择地区",icon:"none"}),T=()=>{m.value=!0},b=async()=>{0==(await((e,t={})=>A.post("/api/user/saveRoleInfo",e,t))(C.value)).code&&(uni.showToast({title:"修改成功"}),uni.navigateBack())},V=()=>{d.value=!0},L=(e,t)=>{};return(t,r)=>{const l=i(e.resolveDynamicComponent("u-button"),Bl),p=i(e.resolveDynamicComponent("u-navbar"),Fl),N=i(e.resolveDynamicComponent("u-icon"),Po),w=i(e.resolveDynamicComponent("u-popup"),gs),D=i(e.resolveDynamicComponent("u-upload"),Ms),A=i(e.resolveDynamicComponent("uni-icons"),re),R=i(e.resolveDynamicComponent("u-picker"),Ns),O=i(e.resolveDynamicComponent("u-input"),Ts);return e.openBlock(),e.createElementBlock("view",{class:"page"},[e.createVNode(p,{title:"服务资料",border:!1},{right:e.withCtx((()=>[e.createElementVNode("view",{class:"nav-right"},[e.createVNode(l,{size:"mini",type:"success",onClick:b},{default:e.withCtx((()=>[e.createTextVNode("保存")])),_:1})])])),_:1}),e.createVNode(w,{mode:"bottom",modelValue:m.value,"onUpdate:modelValue":r[0]||(r[0]=e=>m.value=e),"border-radius":10},{default:e.withCtx((()=>[e.createElementVNode("view",{class:"popup-container"},[e.createElementVNode("view",{class:"popup-header"},[e.createElementVNode("text",{onClick:u},"取消"),e.createElementVNode("text",{class:"popup-title"},"服务类型"),e.createElementVNode("text",{onClick:f,style:{color:"#00C38D"}},"确认")]),e.createElementVNode("scroll-view",{style:{height:"800rpx"},"scroll-y":""},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(k.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{key:t.id,class:"service-group"},[e.createElementVNode("view",{class:"group-header"},[e.createElementVNode("view",{onClick:e=>(e=>{e.checked?(e.checked=!1,e.selectedList=[],e.children.forEach((e=>{e.selected=!1}))):e.checked=!0})(t)},[e.createElementVNode("text",{style:e.normalizeStyle({color:t.checked?"red":"black"})},e.toDisplayString(t.name),5),t.checked?(e.openBlock(),e.createElementBlock("text",{key:0,style:{"font-size":"26rpx",color:"grey"}},"(已选"+e.toDisplayString(t.selectedList?t.selectedList.length:0)+"项)",1)):e.createCommentVNode("",!0)],8,["onClick"]),t.children.length>6?(e.openBlock(),e.createElementBlock("view",{key:0,class:"expand-toggle",onClick:e=>(e=>{k.value[e].expanded=!k.value[e].expanded})(a)},[e.createElementVNode("text",null,e.toDisplayString(t.expanded?"收起":"展开"),1),e.createVNode(N,{name:t.expanded?"arrow-up":"arrow-down",size:"14"},null,8,["name"])],8,["onClick"])):e.createCommentVNode("",!0)]),t.children?(e.openBlock(),e.createElementBlock("view",{key:0,class:"tag-container"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(E(t),((t,n)=>(e.openBlock(),e.createElementBlock("view",{key:t.id,class:e.normalizeClass(["tag-item",{active:t.selected}]),onClick:e.withModifiers((e=>((e,t)=>{const a=k.value[e],n=a.children[t];if(a.selectedList||(a.selectedList=[]),!a.checked&&k.value.filter((e=>e.checked)).length>=5)return void uni.showToast({title:"您最多可以选择5个分类",icon:"none"});if(n.selected){n.selected=!1;const e=a.selectedList.findIndex((e=>e.id===n.id));-1!==e&&a.selectedList.splice(e,1)}else{let e=a.selectedList;if(e&&e.length>=5)return void uni.showToast({title:"您最多可以选择5个标签",icon:"none"});n.selected=!0,a.selectedList.push(n),a.checked=!0}o("log","at pages/settings/services.vue:354",a.selectedList)})(a,n)),["stop"])},e.toDisplayString(t.name),11,["onClick"])))),128))])):e.createCommentVNode("",!0)])))),128))])])])),_:1},8,["modelValue"]),e.createElementVNode("view",{class:"form-box"},[e.createElementVNode("view",{class:"form-item upload-section"},[e.createElementVNode("view",{class:"label"},[e.createTextVNode(" 个人形象照 "),e.createElementVNode("text",{class:"desc"},"（用于个人主页封面，格式jpg/png，大小2M内）")]),e.createVNode(D,{fileList:a.value,"before-upload":L,header:s.value,onOnSuccess:_,onOnRemove:S,name:"file",action:n.value,multiple:"",maxCount:5},null,8,["fileList","header","action"])]),e.createElementVNode("view",{class:"info-list"},[e.createElementVNode("view",{class:"info-item",onClick:M},[e.createElementVNode("view",{class:"label required"},"星座"),e.createElementVNode("picker",{range:h.value,onChange:x},[e.createElementVNode("view",{class:"content"},[e.createTextVNode(e.toDisplayString(null==C.value.constellation?"请选择":C.value.constellation),1),e.createVNode(A,{type:"right",size:"14",color:"rgba(0, 0, 0, 0.3)"})])],40,["range"])]),e.createElementVNode("view",{class:"info-item",onClick:I},[e.createElementVNode("view",{class:"label required"},"所在地区"),e.createElementVNode("view",{onClick:g},[e.createTextVNode(e.toDisplayString(C.value.address?C.value.address:"请选择"),1),e.createVNode(A,{type:"right",size:"14",color:"rgba(0, 0, 0, 0.3)"})]),e.createVNode(R,{modelValue:v.value,"onUpdate:modelValue":r[1]||(r[1]=e=>v.value=e),onConfirm:y,mode:"region"},null,8,["modelValue"])]),e.createElementVNode("view",{class:"info-item",onClick:T},[e.createElementVNode("view",{class:"label required"},"服务类型"),e.createElementVNode("view",{class:"value service-type"},e.toDisplayString(C.value.serviceTypeDesc),1),e.createVNode(N,{name:"arrow-right",size:"18",color:"#999"})]),e.createElementVNode("view",{class:"info-item",onClick:V},[e.createElementVNode("view",{class:"label"},"个人签名"),e.createElementVNode("view",{class:"value text-gray"},e.toDisplayString(C.value.signature||"一句话个人签名文字"),1),e.createVNode(N,{name:"arrow-right",size:"18",color:"#999"})])]),e.createElementVNode("view",{class:"textarea-box"},[e.createElementVNode("view",{class:"label"},"个人简介"),e.createVNode(O,{type:"textarea",modelValue:C.value.profile,"onUpdate:modelValue":r[2]||(r[2]=e=>C.value.profile=e),placeholder:"请输入个人简介",height:300,"auto-height":!0},null,8,["modelValue"])])]),e.createVNode(w,{modelValue:d.value,"onUpdate:modelValue":r[4]||(r[4]=e=>d.value=e),mode:"center","border-radius":15},{default:e.withCtx((()=>[e.createElementVNode("view",{style:{width:"600rpx","border-radius":"30rpx",padding:"10rpx"}},[e.createElementVNode("view",{style:{"text-align":"center","font-size":"36rpx","margin-top":"30rpx"}},"编辑签名"),e.createElementVNode("view",null,[e.createVNode(O,{placeholder:"请输入签名",type:"textarea",modelValue:C.value.signature,"onUpdate:modelValue":r[3]||(r[3]=e=>C.value.signature=e),height:200},null,8,["modelValue"])]),e.createElementVNode("view",null,[e.createElementVNode("button",{type:"primary",onClick:c},"保存")])])])),_:1},8,["modelValue"])])}}},Lc=ie(Ac,[["__scopeId","data-v-e014c148"]]),Rc={__name:"idCard",props:{consultantType:String,modelValue:{type:Object,default:()=>({})}},emits:["update:modelValue","committed"],setup(t,{expose:a,emit:n}){const r=t,s=n,l=e.ref({...r.modelValue,masterGallery:(()=>{try{const e=JSON.parse(r.modelValue.masterGallery||"[]");return Array.isArray(e)?e.map((e=>({url:e}))):[]}catch(Ft){return[]}})(),holdIdCardImg:r.modelValue.holdIdCardImg||[],commitmentImg:r.modelValue.commitmentImg||[]});e.watch((()=>r.modelValue),(t=>{e.nextTick((()=>{l.value={...t,masterGallery:(()=>{try{const e=JSON.parse(t.masterGallery||"[]");return Array.isArray(e)?e.map((e=>({url:e}))):[]}catch(Ft){return[]}})(),holdIdCardImg:t.holdIdCardImg||[],commitmentImg:t.commitmentImg||[]}}))}),{immediate:!0,deep:!0}),e.watch(l,(t=>{e.nextTick((()=>{s("update:modelValue",{...t})}))}),{deep:!0});const c=e.ref(!1),d=e.ref(!1),m=e.ref(150),p=uni.getStorageSync("token"),h=e.ref({token:p}),v=e.ref("https://ceshi.maimiaoqingsu.com/api/common/upload"),g=e.ref({year:!0,month:!0,day:!1,hour:!1,minute:!1,second:!1}),f=e.ref(["白羊座","金牛座","双子座","巨蟹座","狮子座","处女座","天秤座","天蝎座","射手座","摩羯座","水瓶座","双鱼座"]),y=e.ref(["字迹书写规整","模板内容抄写完整","签字、按手印","身份证正面向上合照"]),_=()=>{c.value=!0},k=e=>{l.value.birthdate=`${e.year}-${e.month}`},E=()=>{d.value=!0},x=e=>{l.value.address=e.province.name+e.city.name+e.area.name},N=e=>{l.value.constellation=f.value[e.detail.value]},w=()=>{},C=(e,t,a)=>{var n;a&&a[t]&&(a[t].url=(null==(n=e.data)?void 0:n.url)||"",l.value.masterGallery=a.map((e=>({url:e.url}))))},M=(e,t,a)=>{var n;a[t].url=(null==(n=e.data)?void 0:n.url)||"",l.value.holdIdCardImg=a},S=(e,t,a)=>{var n;a[t].url=(null==(n=e.data)?void 0:n.url)||"",l.value.commitmentImg=a},I=(e,t,a)=>{l.value[e]=a},T=async e=>{try{const t=(await uni.chooseImage({count:1})).tempFilePaths[0],a=await Vs(v.value,t);0===a.code&&(1===e?l.value.idcardFront=a.data.url:l.value.idcardBackend=a.data.url)}catch(t){o("error","at pages/auth/components/idCard.vue:359","上传失败:",t),uni.showToast({title:"上传失败",icon:"error"})}};return a({submit:async()=>{var e,t,a,n,i;const c=[{field:l.value.idcardFront,message:"请上传身份证人像页"},{field:l.value.idcardBackend,message:"请上传身份证国徽页"},{field:l.value.name,message:"请输入姓名"},{field:l.value.idcardNum,message:"请输入身份证号"},{field:l.value.birthdate,message:"请选择出生年月"},{field:null==(e=l.value.masterGallery)?void 0:e.length,message:"请上传个人形象照"},{field:null==(t=l.value.holdIdCardImg)?void 0:t.length,message:"请上传手持身份证件照"},{field:null==(a=l.value.commitmentImg)?void 0:a.length,message:"请上传手写承诺书照"},{field:l.value.constellation,message:"请选择星座"},{field:l.value.address,message:"请选择所在地区"}];for(const{field:o,message:r}of c)if(!o)return void uni.showToast({title:r,icon:"none"});const u={...l.value,masterGallery:JSON.stringify(l.value.masterGallery.map((e=>e.url))),consultantType:r.consultantType,idCardNo:l.value.idcardNum,idCardFrontImg:l.value.idcardFront,idCardBackImg:l.value.idcardBackend,holdIdCardImg:(null==(n=l.value.holdIdCardImg[0])?void 0:n.url)||"",commitmentImg:(null==(i=l.value.commitmentImg[0])?void 0:i.url)||""};delete u.masterGallery,delete u.holdIdCardImg,delete u.commitmentImg,uni.showLoading({title:"提交中"});try{const e=1==r.consultantType?ni:$o,t=await e(u);uni.hideLoading(),l.value={...l.value,...t.data},s("committed",""),uni.showToast({title:"提交成功",icon:"success"})}catch(d){uni.hideLoading(),o("error","at pages/auth/components/idCard.vue:420","提交失败:",d),uni.showToast({title:"提交失败，请重试",icon:"error"})}}}),u((()=>{})),(t,a)=>{const n=i(e.resolveDynamicComponent("u-icon"),Po),o=i(e.resolveDynamicComponent("u-picker"),Ns),r=i(e.resolveDynamicComponent("u-upload"),Ms),s=i(e.resolveDynamicComponent("uni-icons"),re),u=i(e.resolveDynamicComponent("uni-easyinput"),Cr),p=i(e.resolveDynamicComponent("u-input"),Ts);return e.openBlock(),e.createElementBlock("view",{class:"id-card-box"},[e.createElementVNode("view",{class:"id-card-content-box"},[e.createElementVNode("view",{class:"id-card-content"},[e.createElementVNode("view",{class:"title"},"身份认证"),e.createElementVNode("view",{class:"remark"},"仅用于身份实名核验，信息会严格保密"),e.createElementVNode("view",{class:"unload-card-box"},[e.createElementVNode("view",{class:"upload-card-item",onClick:a[0]||(a[0]=e=>T(1))},[e.createElementVNode("image",{src:l.value.idcardFront||"/static/auth/id-card-front.png",class:"img"},null,8,["src"]),e.createElementVNode("view",{class:"txt"},"身份证人像面")]),e.createElementVNode("view",{class:"upload-card-item",onClick:a[1]||(a[1]=e=>T(2))},[e.createElementVNode("image",{src:l.value.idcardBackend||"/static/auth/id-card-back.png",class:"img"},null,8,["src"]),e.createElementVNode("view",{class:"txt"},"身份证国徽面")])]),e.createElementVNode("view",{class:"id-card-form-content"},[e.createElementVNode("view",{class:"form-item"},[e.createElementVNode("view",{class:"label require"},"姓名"),e.createElementVNode("view",{class:"content"},[e.withDirectives(e.createElementVNode("input",{type:"text","onUpdate:modelValue":a[2]||(a[2]=e=>l.value.name=e),placeholder:"请输入姓名",class:"form-input"},null,512),[[e.vModelText,l.value.name]])])]),e.createElementVNode("view",{class:"form-item"},[e.createElementVNode("view",{class:"label require"},"身份证号"),e.createElementVNode("view",{class:"content"},[e.withDirectives(e.createElementVNode("input",{type:"text","onUpdate:modelValue":a[3]||(a[3]=e=>l.value.idcardNum=e),placeholder:"请输入身份证号",class:"form-input"},null,512),[[e.vModelText,l.value.idcardNum]])])]),e.createElementVNode("view",{class:"form-item"},[e.createElementVNode("view",{class:"label require"},"出生年月"),e.createElementVNode("view",{class:"content",onClick:_},[e.createElementVNode("text",null,e.toDisplayString(l.value.birthdate||"请选择"),1),e.createVNode(n,{name:"arrow-right"}),e.createVNode(o,{type:"text",modelValue:c.value,"onUpdate:modelValue":a[4]||(a[4]=e=>c.value=e),params:g.value,mode:"time",onConfirm:k},null,8,["modelValue","params"])])]),e.createElementVNode("view",{class:"upload-section"},[e.createElementVNode("view",{class:"label require"},[e.createTextVNode(" 个人形象照 "),e.createElementVNode("text",{class:"sub-label"},"（用于个人主页封面，格式jpg/png，大小2M内）")]),e.createVNode(r,{fileList:l.value.masterGallery,"before-upload":w,header:h.value,onOnSuccess:C,onOnRemove:a[5]||(a[5]=(e,t)=>I("masterGallery",0,t)),name:"file",action:v.value,maxCount:5},null,8,["fileList","header","action"])]),e.createElementVNode("view",{class:"form-item upload-with-image"},[e.createElementVNode("view",{class:"upload-content"},[e.createElementVNode("view",{class:"label require",style:{width:"170rpx"}},"手持身份证件"),e.createVNode(r,{fileList:l.value.holdIdCardImg,"before-upload":w,header:h.value,onOnSuccess:M,onOnRemove:a[6]||(a[6]=(e,t)=>I("holdIdCardImg",0,t)),name:"file",action:v.value,maxCount:1},null,8,["fileList","header","action"])]),e.createElementVNode("image",{src:Ds,class:"example-image"})]),e.createElementVNode("view",{class:"form-item upload-with-image"},[e.createElementVNode("view",{class:"upload-content"},[e.createElementVNode("view",{class:"label require",style:{width:"200rpx"}},"手写承诺书照片"),e.createVNode(r,{fileList:l.value.commitmentImg,"before-upload":w,header:h.value,onOnSuccess:S,onOnRemove:a[7]||(a[7]=(e,t)=>I("commitmentImg",0,t)),name:"file",action:v.value,maxCount:1},null,8,["fileList","header","action"])]),e.createElementVNode("view",{class:"promise"},[e.createElementVNode("view",{class:"template",onClick:a[8]||(a[8]=e=>{return t="手写承诺书",void uni.navigateTo({url:`/pages/webview/webview?type=${t}`});var t})},[e.createTextVNode(" 点击查看"),e.createElementVNode("text",null,"《承诺书模板》")]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(y.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"promise-item",key:a},[e.createElementVNode("image",{src:bs}),e.createElementVNode("view",null,e.toDisplayString(t),1)])))),128))])]),e.createElementVNode("view",{class:"form-item"},[e.createElementVNode("view",{class:"label require"},"星座"),e.createElementVNode("picker",{range:f.value,onChange:N},[e.createElementVNode("view",{class:"content picker-content"},[e.createTextVNode(e.toDisplayString(l.value.constellation||"请选择")+" ",1),e.createVNode(s,{type:"right",size:"14",color:"rgba(0, 0, 0, 0.3)"})])],40,["range"])]),e.createElementVNode("view",{class:"form-item"},[e.createElementVNode("view",{class:"label require"},"所在地区"),e.createElementVNode("view",{class:"content",onClick:E},[e.createTextVNode(e.toDisplayString(l.value.address||"请选择")+" ",1),e.createVNode(s,{type:"right",size:"14",color:"rgba(0, 0, 0, 0.3)"})]),e.createVNode(o,{modelValue:d.value,"onUpdate:modelValue":a[9]||(a[9]=e=>d.value=e),onConfirm:x,mode:"region"},null,8,["modelValue"])]),e.createElementVNode("view",{class:"form-item user-sign"},[e.createElementVNode("view",{class:"label"},"个人签名"),e.createElementVNode("view",{class:"content-input"},[e.createVNode(u,{trim:"all",type:"text",placeholder:"请输入个人签名",inputBorder:!1,clearable:!1,modelValue:l.value.signature,"onUpdate:modelValue":a[10]||(a[10]=e=>l.value.signature=e),class:"signature-input"},null,8,["modelValue"])])]),e.createElementVNode("view",{class:"form-item user-introduction"},[e.createElementVNode("view",{class:"label"},"个人简介"),e.createElementVNode("view",{class:"introduction-content"},[e.createVNode(p,{type:"textarea",border:"",modelValue:l.value.profile,"onUpdate:modelValue":a[11]||(a[11]=e=>l.value.profile=e),"auto-height":"",height:m.value,placeholder:"请输入个人简介"},null,8,["modelValue","height"])])])])])])])}}},Oc=ie(Rc,[["__scopeId","data-v-cfac9dd2"]]);const Bc=ie({name:"uniCollapseItem",props:{title:{type:String,default:""},name:{type:[Number,String],default:""},disabled:{type:Boolean,default:!1},showAnimation:{type:Boolean,default:!1},open:{type:Boolean,default:!1},thumb:{type:String,default:""},titleBorder:{type:String,default:"auto"},border:{type:Boolean,default:!0},showArrow:{type:Boolean,default:!0}},data:()=>({isOpen:!1,isheight:null,height:0,elId:`Uni_${Math.ceil(1e6*Math.random()).toString(36)}`,nameSync:0}),watch:{open(e){this.isOpen=e,this.onClick(e,"init")}},updated(e){this.$nextTick((()=>{this.init(!0)}))},created(){this.collapse=this.getCollapse(),this.oldHeight=0,this.onClick(this.open,"init")},unmounted(){this.__isUnmounted=!0,this.uninstall()},mounted(){this.collapse&&(""!==this.name?this.nameSync=this.name:this.nameSync=this.collapse.childrens.length+"",-1===this.collapse.names.indexOf(this.nameSync)?this.collapse.names.push(this.nameSync):o("warn","at uni_modules/uni-collapse/components/uni-collapse-item/uni-collapse-item.vue:154",`name 值 ${this.nameSync} 重复`),-1===this.collapse.childrens.indexOf(this)&&this.collapse.childrens.push(this),this.init())},methods:{init(e){this.getCollapseHeight(e)},uninstall(){this.collapse&&(this.collapse.childrens.forEach(((e,t)=>{e===this&&this.collapse.childrens.splice(t,1)})),this.collapse.names.forEach(((e,t)=>{e===this.nameSync&&this.collapse.names.splice(t,1)})))},onClick(e,t){this.disabled||(this.isOpen=e,this.isOpen&&this.collapse&&this.collapse.setAccordion(this),"init"!==t&&this.collapse.onChange(e,this))},getCollapseHeight(e,t=0){uni.createSelectorQuery().in(this).select(`#${this.elId}`).fields({size:!0},(a=>{if(!(t>=10)){if(!a)return t++,void this.getCollapseHeight(!1,t);this.height=a.height,this.isheight=!0,e||this.onClick(this.isOpen,"init")}})).exec()},getNvueHwight(e){dom.getComponentRect(this.$refs["collapse--hook"],(t=>{if(t&&t.result&&t.size){if(this.height=t.size.height,this.isheight=!0,e)return;this.onClick(this.open,"init")}}))},getCollapse(e="uniCollapse"){let t=this.$parent,a=t.$options.name;for(;a!==e;){if(t=t.$parent,!t)return!1;a=t.$options.name}return t}}},[["render",function(t,a,n,o,r,s){const l=i(e.resolveDynamicComponent("uni-icons"),re);return e.openBlock(),e.createElementBlock("view",{class:"uni-collapse-item"},[e.createElementVNode("view",{onClick:a[0]||(a[0]=e=>s.onClick(!r.isOpen)),class:e.normalizeClass(["uni-collapse-item__title",{"is-open":r.isOpen&&"auto"===n.titleBorder,"uni-collapse-item-border":"none"!==n.titleBorder}])},[e.createElementVNode("view",{class:"uni-collapse-item__title-wrap"},[e.renderSlot(t.$slots,"title",{},(()=>[e.createElementVNode("view",{class:e.normalizeClass(["uni-collapse-item__title-box",{"is-disabled":n.disabled}])},[n.thumb?(e.openBlock(),e.createElementBlock("image",{key:0,src:n.thumb,class:"uni-collapse-item__title-img"},null,8,["src"])):e.createCommentVNode("",!0),e.createElementVNode("text",{class:"uni-collapse-item__title-text"},e.toDisplayString(n.title),1)],2)]),!0)]),n.showArrow?(e.openBlock(),e.createElementBlock("view",{key:0,class:e.normalizeClass([{"uni-collapse-item__title-arrow-active":r.isOpen,"uni-collapse-item--animation":!0===n.showAnimation},"uni-collapse-item__title-arrow"])},[e.createVNode(l,{color:n.disabled?"#ddd":"#bbb",size:"14",type:"bottom"},null,8,["color"])],2)):e.createCommentVNode("",!0)],2),e.createElementVNode("view",{class:e.normalizeClass(["uni-collapse-item__wrap",{"is--transition":n.showAnimation}]),style:e.normalizeStyle({height:(r.isOpen?r.height:0)+"px"})},[e.createElementVNode("view",{id:r.elId,ref:"collapse--hook",class:e.normalizeClass(["uni-collapse-item__wrap-content",{open:r.isheight,"uni-collapse-item--border":n.border&&r.isOpen}])},[e.renderSlot(t.$slots,"default",{},void 0,!0)],10,["id"])],6)])}],["__scopeId","data-v-a059c6b0"]]);const Pc=ie({name:"uniCollapse",emits:["change","activeItem","input","update:modelValue"],props:{value:{type:[String,Array],default:""},modelValue:{type:[String,Array],default:""},accordion:{type:[Boolean,String],default:!1}},data:()=>({}),computed:{dataValue(){let e="string"==typeof this.value&&""===this.value||Array.isArray(this.value)&&0===this.value.length;"string"==typeof this.modelValue&&""===this.modelValue||Array.isArray(this.modelValue)&&this.modelValue.length;return e?this.modelValue:this.value}},watch:{dataValue(e){this.setOpen(e)}},created(){this.childrens=[],this.names=[]},mounted(){this.$nextTick((()=>{this.setOpen(this.dataValue)}))},methods:{setOpen(e){let t="string"==typeof e,a=Array.isArray(e);this.childrens.forEach(((n,i)=>{if(t&&e===n.nameSync){if(!this.accordion)return void o("warn","at uni_modules/uni-collapse/components/uni-collapse/uni-collapse.vue:75","accordion 属性为 false ,v-model 类型应该为 array");n.isOpen=!0}a&&e.forEach((e=>{if(e===n.nameSync){if(this.accordion)return void o("warn","at uni_modules/uni-collapse/components/uni-collapse/uni-collapse.vue:85","accordion 属性为 true ,v-model 类型应该为 string");n.isOpen=!0}}))})),this.emit(e)},setAccordion(e){this.accordion&&this.childrens.forEach(((t,a)=>{e!==t&&(t.isOpen=!1)}))},resize(){this.childrens.forEach(((e,t)=>{e.getCollapseHeight()}))},onChange(e,t){let a=[];this.accordion?a=e?t.nameSync:"":this.childrens.forEach(((e,t)=>{e.isOpen&&a.push(e.nameSync)})),this.$emit("change",a),this.emit(a)},emit(e){this.$emit("input",e),this.$emit("update:modelValue",e)}}},[["render",function(t,a,n,o,i,r){return e.openBlock(),e.createElementBlock("view",{class:"uni-collapse"},[e.renderSlot(t.$slots,"default",{},void 0,!0)])}],["__scopeId","data-v-b8d7fc3e"]]),Uc={__name:"career",props:{modelValue:Object,consultantType:String},emits:["update:modelValue","committed"],setup(t,{expose:a,emit:n}){const o=e.ref([]),r=e.ref(),l=e.ref(),c=e.ref(0),u=e.ref("name"),d=e.ref({year:!0,month:!0,day:!1,hour:!1,minute:!1,second:!1,timestamp:!0}),m=e.ref([]),p=e.ref([]),h=e.ref([]),v=e.ref([]),g=e.ref(!1),f=e.ref([]),y=n,_=e.ref([]),k=async()=>{let{data:e}=await((e,t={})=>A.get("/api/admin/occupation/list",e,t))();_.value=e},E=e=>{var t;r.value=null==(t=_.value[e.detail.value])?void 0:t.name,x.modelValue.occupationId=_.value[e.detail.value].id};a({submit:async()=>{const e=[{field:r.value,message:"请选择职业"},{field:l.value,message:"请选择工作时间"},{field:h.value,message:"请选择服务类型"}];for(const{field:t,message:a}of e)if(!t)return void uni.showToast({title:a,icon:"none"});x.modelValue.serviceType=h.value.join(","),1==x.consultantType?(await((e,t={})=>A.post("/api/consultant/consultant/step2",e,t))(x.modelValue),y("committed","")):(await((e,t={})=>A.post("/api/listener/step2",e,t))(x.modelValue),y("committed",""))}});const x=t,N=()=>{if(l.value=x.modelValue.workTime,0===_.value.length)return;const e=x.modelValue.occupationId;if(!e)return;const t=_.value.find((t=>t.id==e));t?(r.value=t.name,c.value=_.value.indexOf(t)):(r.value="",c.value=0)};e.watch((()=>x.modelValue),((t,a)=>{if(t.serviceType){const a=t.serviceType.split(",").map((e=>parseInt(e)));e.nextTick((()=>{h.value=a}))}}),{immediate:!0,deep:!0}),e.watch((()=>_.value),(()=>{N()})),e.watch(v,(e=>{const t=e.join(",");y("update:modelValue",{...x.modelValue,serviceType:t})})),s((async()=>{if("1"==x.consultantType){if(!uni.getStorageSync("consultantMenu")){let e=await li({type:0});uni.setStorageSync("consultantMenu",JSON.stringify(e.data))}o.value=JSON.parse(uni.getStorageSync("consultantMenu"))}else{let e=uni.getStorageSync("listenerMenu");if(ci().then((e=>{f.value=e.data})),!e){let e=await li({type:1});uni.setStorageSync("listenerMenu",JSON.stringify(e.data))}o.value=JSON.parse(uni.getStorageSync("listenerMenu"))}o.value=o.value.map((e=>({...e,checked:!1})))}));const w=async()=>{const e=await ci();m.value=e.data.map((e=>{const t=(e=>{if(!e||"[]"===e)return[];try{let t=e.replace(/[“”‘’]/g,'"').replace(/\s+/g,"").replace(/\\+/g,"\\").replace(/,}/g,"}").replace(/,\]/g,"]").replace(/([{,])\s*(\w+)\s*:/g,'$1"$2":').replace(/:\s*([^"'\d][^,}]*)([,}])/g,':"$1"$2');const a=JSON.parse(t);return Array.isArray(a)?a:[]}catch(Ft){return[]}})(e.children).map((e=>({...e,id:Number(e.id)||0}))).filter((e=>0!==e.id));return{...e,id:Number(e.id)||0,children:t}}))};return e.onMounted((()=>{w(),k(),N()})),(t,a)=>{const n=i(e.resolveDynamicComponent("u-picker"),Ns),o=i(e.resolveDynamicComponent("uni-collapse-item"),Bc),s=i(e.resolveDynamicComponent("uni-collapse"),Pc);return e.openBlock(),e.createElementBlock("view",{class:"career-box"},[e.createElementVNode("view",{class:"career-content-box"},[e.createElementVNode("view",{class:"career-content"},[e.createElementVNode("view",{class:"career-collapse-box"},[e.createElementVNode("picker",{onChange:E,value:c.value,range:_.value,"range-key":u.value},[e.createElementVNode("view",{class:"career-collapse-item"},[e.createElementVNode("view",{style:{display:"flex","align-items":"center","justify-content":"space-between",margin:"40rpx 0"}},[e.createElementVNode("view",null,[e.createTextVNode("职业"),e.createElementVNode("text",{style:{color:"red"}},"*")]),e.createElementVNode("view",{style:{color:"#595959","font-size":"25rpx"}},e.toDisplayString(r.value?r.value:"请选择"),1)])])],40,["value","range","range-key"]),e.createElementVNode("view",{class:"career-collapse-item"},[e.createElementVNode("view",{style:{display:"flex","align-items":"center","justify-content":"space-between",margin:"40rpx 0"}},[e.createElementVNode("view",null,[e.createTextVNode("工作开始时间"),e.createElementVNode("text",{style:{color:"red"}},"*")]),e.createElementVNode("view",{style:{color:"#595959","font-size":"25rpx"},onClick:a[0]||(a[0]=e=>g.value=!0)},e.toDisplayString(l.value?l.value:"请选择"),1)])]),e.createVNode(n,{mode:"time",modelValue:g.value,"onUpdate:modelValue":a[1]||(a[1]=e=>g.value=e),onConfirm:a[2]||(a[2]=e=>((e,t)=>{x.modelValue.workTime=t.year+"-"+t.month,l.value=t.year+"-"+t.month})(t.item,e)),params:d.value},null,8,["modelValue","params"])])]),e.createElementVNode("view",{class:"career-content"},[e.createElementVNode("view",{class:"title"},[e.createTextVNode("服务类型"),e.createElementVNode("text",null,"*")]),e.createElementVNode("view",{class:"remark"},"专业信息展示在个人资料（多选）"),e.createElementVNode("view",{class:"career-collapse-box"},[e.createElementVNode("view",{class:"career-collapse-item"},[e.createElementVNode("view",{class:"container"},[e.createVNode(s,{modelValue:p.value,"onUpdate:modelValue":a[3]||(a[3]=e=>p.value=e),accordion:"false"},{default:e.withCtx((()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(m.value,(t=>(e.openBlock(),e.createBlock(o,{key:t.id,name:t.id},{title:e.withCtx((()=>[e.createElementVNode("view",{class:"parent-title"},[e.createElementVNode("view",{class:e.normalizeClass(["custom-checkbox",{checked:h.value.includes(t.id)}]),onClick:e.withModifiers((a=>(async t=>{const a=t.id,n=h.value.includes(a);if(await e.nextTick(),n){const e=[a,...t.children.map((e=>e.id))];h.value=h.value.filter((t=>!e.includes(t)))}else[a,...t.children.map((e=>e.id))].forEach((e=>{h.value.includes(e)||h.value.push(e)}));h.value=[...h.value]})(t)),["stop"])},[h.value.includes(t.id)?(e.openBlock(),e.createElementBlock("text",{key:0,class:"check-icon"},"✓")):e.createCommentVNode("",!0)],10,["onClick"]),e.createElementVNode("text",{class:"parent-name"},e.toDisplayString(t.name),1)])])),default:e.withCtx((()=>[t.children.length?(e.openBlock(),e.createElementBlock("view",{key:0,class:"children-list"},[e.createElementVNode("checkbox-group",{onChange:e=>((e,t)=>{const a=t.detail.value.map((e=>Number(e))),n=e.children.map((e=>e.id));h.value=h.value.filter((e=>!(n.includes(e)&&!a.includes(e)))),a.forEach((e=>{h.value.includes(e)||h.value.push(e)}));const o=e.id,i=n.every((e=>a.includes(e)));i&&!h.value.includes(o)?h.value.push(o):!i&&h.value.includes(o)&&(h.value=h.value.filter((e=>e!==o))),h.value=[...h.value]})(t,e)},[e.createElementVNode("view",{class:"children-grid"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.children,(t=>(e.openBlock(),e.createElementBlock("view",{class:"child-item",key:t.id},[e.createElementVNode("checkbox",{value:t.id.toString(),checked:h.value.includes(t.id),color:"#fff",style:{transform:"scale(0.7)"},activeBackgroundColor:"#35CA95"},null,8,["value","checked"]),e.createElementVNode("text",{class:"child-name"},e.toDisplayString(t.name),1)])))),128))])],40,["onChange"])])):(e.openBlock(),e.createElementBlock("view",{key:1,class:"no-children"}," 暂无子分类 "))])),_:2},1032,["name"])))),128))])),_:1},8,["modelValue"])])])])])])])}}},Gc=ie(Uc,[["__scopeId","data-v-477fb761"]]),Fc="/static/auth/remark.png",qc="/static/auth/edit.png",zc={__name:"certificate",props:{consultantType:Number,modelValue:Object},emits:["commited"],setup(t,{expose:a,emit:n}){const r=e.ref(!1),s=e.ref([{name:null,date:null,photoList:[],authority:null,number:null,listenerId:null}]),l=e.ref([]),c=e.ref([]),u=e.ref([]),d=e.ref(D+"/api/common/upload"),m=e.ref(!1),p=e.ref(-1),h=e.ref(0),v=uni.getStorageSync("token"),g=e.ref({token:v}),f=e.ref({year:!0,month:!0,day:!1,hour:!1,minute:!1,second:!1,timestamp:!0}),y=e.ref({year:!0,month:!0,day:!0,hour:!1,minute:!1,second:!1,timestamp:!0}),_=e=>{s.value.length=0;(Array.isArray(e)?e:[]).forEach((e=>{s.value.push({...e,selectIndex:-1,qualificationValue:"",photoList:e.photoList||[]})}))},k=async()=>{try{const{data:e}=await((e,t={})=>A.get("/api/admin/qualification/list",e,t))();u.value=Array.isArray(e)?e:[],_(u.value)}catch(e){o("error","at pages/auth/components/certificate.vue:1292","获取资质类别失败：",e),u.value=[],_([])}},E=(e,t)=>{if(-1===p.value)return;const a=String(t.month).padStart(2,"0"),n=`${t.year}-${a}-01 00:00:00`;1===h.value?e.startTime=n:e.endTime=n,m.value=!1},x=e=>{if(!e||""===e||"[]"===e)return[];try{const t=JSON.parse(e);return Array.isArray(t)?t.map((e=>"string"==typeof e?{url:e}:{url:e.url||""})):[]}catch(t){return[]}},N=e=>{if(0===e.length)return"[]";const t=e.map((e=>({url:e})));return JSON.stringify(t)},w=()=>{r.value=!0},C=(e,t,a)=>{h.value=a,p.value=t,m.value=!0},M=()=>{},S=()=>{s.value.push({name:"",date:"",photoList:[],authority:"",number:"",listenerId:null})},I=()=>{l.value.push({startTime:null,endTime:null,schoolName:null,idNumber:null,photoList:[],code:null,degree:null})},T=()=>{c.value.push({startTime:null,endTime:null,schoolName:null,idNumber:null,photoList:[],code:null,career:""})},b=n,V=t,L=()=>{var e,t,a,n,o,i;(null==(t=null==(e=V.modelValue)?void 0:e.certificateList)?void 0:t.length)?s.value=V.modelValue.certificateList.map((e=>({...e,photoList:x(e.photos),selectIndex:-1,qualificationValue:""}))):s.value=[{name:null,date:null,photoList:[],authority:null,number:null,listenerId:null}],(null==(n=null==(a=V.modelValue)?void 0:a.educationList)?void 0:n.length)?l.value=V.modelValue.educationList.map((e=>({...e,photoList:x(e.photo)}))):l.value=[],(null==(i=null==(o=V.modelValue)?void 0:o.careerList)?void 0:i.length)?c.value=V.modelValue.careerList.map((e=>({...e,photoList:x(e.photos)}))):c.value=[]},R=e.ref({});return e.onMounted((()=>{L(),k()})),a({submit:async()=>{if(1===V.consultantType&&0===s.value.length)return void uni.showToast({title:"请上传至少一张资质证书",icon:"error"});s.value.forEach((e=>e.photos=N(e.photoList))),l.value.forEach((e=>e.photo=N(e.photoList))),c.value.forEach((e=>e.photos=N(e.photoList)));const e={certificateList:s.value,educationList:l.value,careerList:c.value,consultantType:V.consultantType};R.value=e;try{0==(1===V.consultantType?await((e,t={})=>A.post("/api/consultant/consultant/step3",e,t))({...V.modelValue,...e}):await((e,t={})=>A.post("/api/listener/step3",e,t))({...V.modelValue,...e})).code&&(uni.showToast({title:"提交成功"}),b("commited",""))}catch(t){o("error","at pages/auth/components/certificate.vue:1476","提交失败：",t),uni.showToast({title:"提交失败",icon:"error"})}},refreshData:L,fromDataCertificate:R}),(t,a)=>{const n=i(e.resolveDynamicComponent("u-icon"),Po),o=i(e.resolveDynamicComponent("u-picker"),Ns),p=i(e.resolveDynamicComponent("uni-easyinput"),Cr),h=i(e.resolveDynamicComponent("u-upload"),Ms),v=i(e.resolveDynamicComponent("uni-icons"),re);return e.openBlock(),e.createElementBlock("view",{class:"certificate-box"},[e.createElementVNode("view",{class:"certificate-content-box"},[e.createElementVNode("view",{class:"certificate-content"},[e.createElementVNode("view",{class:"title"},[e.createElementVNode("view",null,[e.createTextVNode(" 资质信息"),e.createElementVNode("text",{class:"require"},"(必填)")]),e.createElementVNode("view",{class:"tips"},[e.createElementVNode("image",{src:Fc,class:"img"}),e.createTextVNode("说明 ")])]),e.createElementVNode("view",{class:"remark"},"此项信息正式上线后会公开展示在个人资料"),e.createElementVNode("view",{class:"id-card-form-box"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.value,((i,l)=>(e.openBlock(),e.createElementBlock("view",{class:"id-card-form-content",key:l},[e.createElementVNode("picker",{onChange:e=>((e,t)=>{const a=Number(e.detail.value),n=u.value[a];s.value[t].listenerId=(null==n?void 0:n.id)||"",s.value[t].name=(null==n?void 0:n.name)||""})(e,l),value:i.selectIndex,range:u.value,"range-key":"name"},[e.createElementVNode("view",{class:"form-item"},[e.createElementVNode("view",{class:"label require"},"资质类别"),e.createElementVNode("view",{class:e.normalizeClass(["content",t.value?"":"weight"])},null,2),e.createElementVNode("view",{class:"content",style:{"font-size":"24rpx"}},[e.createTextVNode(e.toDisplayString(i.name||"请选择"),1),e.createVNode(n,{name:"arrow-right"})])])],40,["onChange","value","range"]),e.createElementVNode("view",{class:"form-item"},[e.createElementVNode("view",{class:"label require"},"发证时间"),e.createElementVNode("view",{class:"content"},[e.createElementVNode("view",{onClick:w},[e.createElementVNode("text",{style:{"font-size":"24rpx"}},[e.createTextVNode(e.toDisplayString(i.date?i.date:"请选择")+" ",1),e.createVNode(n,{name:"arrow-right"})])])])]),e.createVNode(o,{mode:"time",modelValue:r.value,"onUpdate:modelValue":a[0]||(a[0]=e=>r.value=e),onConfirm:e=>((e,t)=>{e.date=`${t.year}-${t.month}-${t.day}`})(i,e),params:y.value},null,8,["modelValue","onConfirm","params"]),e.createElementVNode("view",{class:"form-item user-sign"},[e.createElementVNode("view",{class:"label require"},"证书编号"),e.createElementVNode("view",{class:"content-input",style:{width:"400rpx"}},[e.createVNode(p,{trim:"all",type:"text",placeholder:"请输入证书编号",inputBorder:!1,clearable:!1,modelValue:i.number,"onUpdate:modelValue":e=>i.number=e,style:{"text-align":"end"}},null,8,["modelValue","onUpdate:modelValue"])])]),e.createElementVNode("view",{class:"form-item user-introduction"},[e.createElementVNode("view",{class:"label require"},"证件照片"),e.createElementVNode("view",{class:"introduction-content"},[e.createVNode(h,{fileList:s.value[l].photoList,"before-upload":M,header:g.value,onOnSuccess:e=>{return(t=e,e=>{if(!s.value[e])return;const a=s.value[e];a.photoList=a.photoList||[],a.photoList.push(t.data.url),s.value=[...s.value]})(l);var t},onOnRemove:e=>{return(e=>{s.value[e]&&(s.value[e].photoList=t.map((e=>e.url)).filter(Boolean),s.value=[...s.value])})(l);var t},name:"file",action:d.value},null,8,["fileList","header","onOnSuccess","onOnRemove","action"])])]),e.createElementVNode("view",{class:"line-box"},[e.createElementVNode("view",{class:e.normalizeClass(["line",l>0?"line-delete":""])},null,2),l>0?(e.openBlock(),e.createElementBlock("view",{key:0,class:"delete-item",onClick:e=>(e=>{s.value.splice(e,1)})(l)},[e.createVNode(v,{type:"minus-filled",size:"30",color:"#FA5151"}),e.createTextVNode(" 移除 ")],8,["onClick"])):e.createCommentVNode("",!0)])])))),128)),e.createElementVNode("view",{class:"add-certificate-btn",onClick:S},[e.createElementVNode("view",{class:"btn"},[e.createVNode(v,{type:"plus-filled",size:"18",color:"rgba(0,0,0,.85)"}),e.createTextVNode("增加一项")])])])]),e.createElementVNode("view",{class:"certificate-content"},[e.createElementVNode("view",{class:"title"},[e.createElementVNode("view",null,[e.createTextVNode("教育背景"),e.createElementVNode("text",{class:"require"},"(选填)")]),e.createElementVNode("view",{class:"tips"},[e.createElementVNode("image",{src:Fc,class:"img"}),e.createTextVNode("说明 ")])]),e.createElementVNode("view",{class:"remark"},"此项信息正式上线后会公开展示在个人资料"),e.createElementVNode("view",{class:"id-card-form-box"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.value,((t,n)=>(e.openBlock(),e.createElementBlock("view",{class:"id-card-form-content",key:n},[e.createElementVNode("view",{class:"form-item"},[e.createElementVNode("view",{class:"label"},"起始时间"),e.createElementVNode("view",{class:"content",onClick:e=>C(0,n,1)},[e.createTextVNode(e.toDisplayString(null==t.startTime?"请选择":t.startTime)+" ",1),e.createVNode(v,{type:"right",size:"14",color:"rgba(0, 0, 0, 0.3)"})],8,["onClick"])]),e.createElementVNode("view",{class:"form-item"},[e.createElementVNode("view",{class:"label"},"截止时间"),e.createElementVNode("view",{class:"content",onClick:e=>C(0,n,2)},[e.createTextVNode(e.toDisplayString(null==t.endTime?"请选择":t.endTime)+" ",1),e.createVNode(v,{type:"right",size:"14",color:"rgba(0, 0, 0, 0.3)"})],8,["onClick"])]),e.createVNode(o,{mode:"time",modelValue:m.value,"onUpdate:modelValue":a[1]||(a[1]=e=>m.value=e),onConfirm:e=>E(t,e),params:f.value},null,8,["modelValue","onConfirm","params"]),e.createElementVNode("view",{class:"form-item user-sign"},[e.createElementVNode("view",{class:"label"},"毕业院校"),e.createElementVNode("view",{class:"content-input",style:{width:"400rpx"}},[e.createVNode(p,{trim:"all",type:"text",placeholder:"请输入毕业院校",modelValue:t.schoolName,"onUpdate:modelValue":e=>t.schoolName=e,inputBorder:!1,clearable:!1},null,8,["modelValue","onUpdate:modelValue"])])]),e.createElementVNode("view",{class:"form-item user-sign"},[e.createElementVNode("view",{class:"label"},"证书编号"),e.createElementVNode("view",{class:"content-input",style:{width:"400rpx"}},[e.createVNode(p,{trim:"all",style:{"text-align":"end"},type:"text",placeholder:"请输入证书编号",modelValue:t.code,"onUpdate:modelValue":e=>t.code=e,inputBorder:!1,clearable:!1},null,8,["modelValue","onUpdate:modelValue"])])]),e.createElementVNode("view",{class:"form-item user-sign"},[e.createElementVNode("view",{class:"label"},"学历"),e.createElementVNode("view",{class:"content-input",style:{width:"400rpx"}},[e.createVNode(p,{trim:"all",style:{"text-align":"end"},type:"text",placeholder:"请输入学历",modelValue:t.degree,"onUpdate:modelValue":e=>t.degree=e,inputBorder:!1,clearable:!1},null,8,["modelValue","onUpdate:modelValue"])])]),e.createElementVNode("view",{class:"form-item user-introduction"},[e.createElementVNode("view",{class:"label"},"证件照片"),e.createElementVNode("view",{class:"introduction-content"},[e.createVNode(h,{fileList:l.value[n].photoList,"before-upload":M,header:g.value,onOnSuccess:e=>{return(t=e,e=>{if(!l.value[e])return;const a=l.value[e];a.photoList=a.photoList||[],a.photoList.push(t.data.url),l.value=[...l.value]})(n);var t},onOnRemove:e=>{return(e=>{l.value[e]&&(l.value[e].photoList=t.map((e=>e.url)).filter(Boolean),l.value=[...l.value])})(n);var t},name:"file",action:d.value},null,8,["fileList","header","onOnSuccess","onOnRemove","action"])])]),e.createElementVNode("view",{class:"line-box"},[e.createElementVNode("view",{class:"line line-delete"}),e.createElementVNode("view",{class:"delete-item",onClick:e=>(e=>{l.value.splice(e,1)})(n)},[e.createVNode(v,{type:"minus-filled",size:"30",color:"#FA5151"}),e.createTextVNode(" 移除 ")],8,["onClick"])])])))),128))]),e.createElementVNode("view",{class:"add-certificate-btn",onClick:I},[l.value.length>0?(e.openBlock(),e.createElementBlock("view",{key:0,class:"btn"},[e.createVNode(v,{type:"plus-filled",size:"18",color:"rgba(0,0,0,.85)"}),e.createTextVNode("增加一项")])):(e.openBlock(),e.createElementBlock("view",{key:1,class:"btn edit-btn"},[e.createElementVNode("image",{src:qc,class:"img"}),e.createTextVNode("编辑 ")]))])]),e.createElementVNode("view",{class:"certificate-content"},[e.createElementVNode("view",{class:"title"},[e.createElementVNode("view",null,[e.createTextVNode("伦理培训"),e.createElementVNode("text",{class:"require"},"(选填)")]),e.createElementVNode("view",{class:"tips"},[e.createElementVNode("image",{src:Fc,class:"img"}),e.createTextVNode("说明 ")])]),e.createElementVNode("view",{class:"remark"},"此项信息正式上线后会公开展示在个人资料"),e.createElementVNode("view",{class:"id-card-form-box"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.value,((t,n)=>(e.openBlock(),e.createElementBlock("view",{class:"id-card-form-content",key:n},[e.createElementVNode("view",{class:"form-item"},[e.createElementVNode("view",{class:"label"},"起始时间"),e.createElementVNode("view",{class:"content",onClick:e=>C(0,n,1)},[e.createTextVNode(e.toDisplayString(null==t.startTime?"请选择":t.startTime)+" ",1),e.createVNode(v,{type:"right",size:"14",color:"rgba(0, 0, 0, 0.3)"})],8,["onClick"])]),e.createElementVNode("view",{class:"form-item"},[e.createElementVNode("view",{class:"label"},"截止时间"),e.createElementVNode("view",{class:"content",onClick:e=>C(0,n,2)},[e.createTextVNode(e.toDisplayString(null==t.endTime?"请选择":t.endTime)+" ",1),e.createVNode(v,{type:"right",size:"14",color:"rgba(0, 0, 0, 0.3)"})],8,["onClick"])]),e.createVNode(o,{mode:"time",modelValue:m.value,"onUpdate:modelValue":a[2]||(a[2]=e=>m.value=e),onConfirm:e=>E(t,e),params:f.value},null,8,["modelValue","onConfirm","params"]),e.createElementVNode("view",{class:"form-item user-sign"},[e.createElementVNode("view",{class:"label"},"培训课程"),e.createElementVNode("view",{class:"content-input",style:{width:"400rpx"}},[e.createVNode(p,{trim:"all",type:"text",placeholder:"请输入培训课程",modelValue:t.career,"onUpdate:modelValue":e=>t.career=e,inputBorder:!1,clearable:!1,placeholderStyle:{"text-align":"right"}},null,8,["modelValue","onUpdate:modelValue"])])]),e.createElementVNode("view",{class:"form-item user-introduction"},[e.createElementVNode("view",{class:"label"},"证件照片"),e.createElementVNode("view",{class:"introduction-content"},[e.createVNode(h,{fileList:c.value[n].photoList,"before-upload":M,header:g.value,onOnSuccess:e=>{return(t=e,e=>{if(!c.value[e])return;const a=c.value[e];a.photoList=a.photoList||[],a.photoList.push(t.data.url),c.value=[...c.value]})(n);var t},onOnRemove:e=>{return(e=>{c.value[e]&&(c.value[e].photoList=t.map((e=>e.url)).filter(Boolean),c.value=[...c.value])})(n);var t},name:"file",action:d.value},null,8,["fileList","header","onOnSuccess","onOnRemove","action"])])]),e.createElementVNode("view",{class:"line-box"},[e.createElementVNode("view",{class:"line line-delete"}),e.createElementVNode("view",{class:"delete-item",onClick:e=>(e=>{c.value.splice(e,1)})(n)},[e.createVNode(v,{type:"minus-filled",size:"30",color:"#FA5151"}),e.createTextVNode(" 移除 ")],8,["onClick"])])])))),128)),e.createElementVNode("view",{class:"add-certificate-btn",onClick:T},[c.value.length>0?(e.openBlock(),e.createElementBlock("view",{key:0,class:"btn"},[e.createVNode(v,{type:"plus-filled",size:"18",color:"rgba(0,0,0,.85)"}),e.createTextVNode("增加一项")])):(e.openBlock(),e.createElementBlock("view",{key:1,class:"btn edit-btn"},[e.createElementVNode("image",{src:qc,class:"img"}),e.createTextVNode("编辑 ")]))])])])])])}}},Hc=ie(zc,[["__scopeId","data-v-69274c6c"]]),$c=ie({__name:"auth",setup(t){e.useCssVars((e=>({"047fac97":n.value})));const a=ae(),n=e.ref(a.statusBarHeight+"px"),r=e.ref(Oc),s=e.ref(1),c=e.ref({}),u=e.ref(null),d=e.ref(null),m=e.ref(null),p=e.ref(""),h=e.ref("");l((e=>{p.value=e.type,h.value=JSON.parse(e.userInfo),o("log","at pages/auth/auth.vue:147",h.value),uni.setNavigationBarTitle({title:"认证"}),v()}));const v=async()=>{if(1==p.value){let e=await oi({userId:h.value});const t={...e.data,idcardNum:e.data.sysUser.idCardNo,idcardFront:e.data.sysUser.idCardFrontImg,idcardBackend:e.data.sysUser.idCardBackImg,occupationId:e.data.sysUser.occupationId};g(t)}else{let e=await jo({userId:h.value});const t={...e.data,occupationId:e.data.sysUser.occupationId};g(t)}},g=e=>{const{masterGallery:t,commitmentImg:a,holdIdCardImg:n}=e,o=t?JSON.parse(t):[],i=f([a]),r=f([n]),s=Object.assign(e,{masterGallery:o,commitmentImg:i,holdIdCardImg:r});c.value=s},f=e=>e.map(((e,t)=>({url:e}))),y=e.ref({idCard:{consultantName:"",idNum:""},career:{profession:"",experience:""},certificate:{files:[]}}),_=()=>{var e,t;1==s.value&&(null==(e=u.value)||e.submit()),2==s.value&&(null==(t=d.value)||t.submit())},k=()=>{s.value=s.value+1},E=()=>{s.value=s.value+1},x=()=>{uni.showToast({title:"资料已提交，请等待审核"}),uni.navigateBack()},N=()=>{s.value=s.value-1};e.watch(s,((e,t)=>{var a;1==e?r.value=Oc:2==e?r.value=Gc:3==e&&(null==(a=m.value)||a.refreshData(),r.value=Hc)}));const w=async()=>{var e;null==(e=m.value)||e.submit();const{certificateList:t,educationList:a,careerList:n,consultantType:i}=m.value.fromDataCertificate,r={...y.value.idCard,...y.value.career,certificateList:t,educationList:a,careerList:n,consultantType:i,certificates:y.value.certificate.files};try{await((e,t={})=>A.post("/api/consultant/consultant/saveConsultant",e,t))(r)}catch(s){o("error","at pages/auth/auth.vue:265","提交失败：",s),uni.showToast({title:"提交失败",icon:"error"})}};return(t,a)=>{const n=i(e.resolveDynamicComponent("u-icon"),Po);return e.openBlock(),e.createElementBlock("view",{class:"auth-box"},[e.createElementVNode("view",{class:"children-component"},[null==Hc.verifyStatus||0==Hc.verifyStatus?(e.openBlock(),e.createElementBlock("scroll-view",{key:0,"scroll-y":"true","show-scrollbar":!1,class:"scroll-content"},[e.createElementVNode("view",{class:"children-content"},[e.createElementVNode("view",{class:"top-bg"}),e.createElementVNode("view",{class:"current-component"},[e.createElementVNode("view",{class:"step-box"},[e.createElementVNode("view",{class:"step-content"},[e.createElementVNode("view",{class:e.normalizeClass(["step-item",1==s.value?"step-item-active":""])},[e.createElementVNode("view",{class:"step-num"},"1"),e.createElementVNode("view",{class:"step-txt"},"基本信息")],2),e.createElementVNode("view",{class:"step-line"}),e.createElementVNode("view",{class:e.normalizeClass(["step-item",2==s.value?"step-item-active":""])},[e.createElementVNode("view",{class:"step-num"},"2"),e.createElementVNode("view",{class:"step-txt"},"职业信息")],2),e.createElementVNode("view",{class:"step-line"}),e.createElementVNode("view",{class:e.normalizeClass(["step-item",3==s.value?"step-item-active":""])},[e.createElementVNode("view",{class:"step-num"},"3"),e.createElementVNode("view",{class:"step-txt"},"证书资料")],2)])]),e.createElementVNode("view",{class:"handler-components-box"},[e.withDirectives(e.createVNode(Oc,{modelValue:c.value,consultantType:p.value,onCommitted:k,ref_key:"idCardRef",ref:u,"onUpdate:modelValue":a[0]||(a[0]=e=>y.value.idCard=e)},null,8,["modelValue","consultantType"]),[[e.vShow,1==s.value]]),e.withDirectives(e.createVNode(Gc,{ref_key:"careerRef",ref:d,modelValue:c.value,consultantType:p.value,onCommitted:E},null,8,["modelValue","consultantType"]),[[e.vShow,2==s.value]]),e.withDirectives(e.createVNode(Hc,{ref_key:"finalStep",ref:m,onCommited:x,modelValue:c.value,consultantType:p.value},null,8,["modelValue","consultantType"]),[[e.vShow,3==s.value]]),e.createElementVNode("view",{class:"footer"},[e.createElementVNode("view",{class:"tip"},[e.createElementVNode("image",{src:hs,class:"img"}),e.createTextVNode("个人信息安全保障中 ")]),1==s.value?(e.openBlock(),e.createElementBlock("view",{key:0,class:"btn"},[e.createElementVNode("view",{class:e.normalizeClass(["next",1==p.value?"next-ba1":"next-ba2"]),onClick:_},"填好了，下一步",2)])):e.createCommentVNode("",!0),2==s.value?(e.openBlock(),e.createElementBlock("view",{key:1,class:"btn step-2"},[e.createElementVNode("view",{class:"next prev",onClick:N},"上一步"),e.createElementVNode("view",{class:e.normalizeClass(["next",1==p.value?"next-ba1":"next-ba2"]),onClick:_},"填好了，下一步",2)])):e.createCommentVNode("",!0),3==s.value?(e.openBlock(),e.createElementBlock("view",{key:2,class:"btn step-2"},[e.createElementVNode("view",{class:"next prev",onClick:N},"上一步"),e.createElementVNode("view",{class:e.normalizeClass(["next",1==p.value?"next-ba1":"next-ba2"]),onClick:w},"提交审核",2)])):e.createCommentVNode("",!0)])])])])])):1==c.value.verifyStatus?(e.openBlock(),e.createElementBlock("view",{key:1},[e.createElementVNode("view",null,[e.createVNode(n,{name:"info-circle-fill"})]),e.createElementVNode("view",null,[e.createElementVNode("text",null,"认证审核中，请稍后查看")]),e.createElementVNode("view",null,[e.createElementVNode("text",{onClick:a[1]||(a[1]=(...e)=>t.recheck&&t.recheck(...e)),style:{color:"red"}},"重新审核")])])):2==c.value.verifyStatus?(e.openBlock(),e.createElementBlock("view",{key:2},[e.createElementVNode("view",null,[e.createElementVNode("text",null,"您已认证成为心理咨询师")])])):(e.openBlock(),e.createElementBlock("view",{key:3},[e.createElementVNode("view",null,[e.createElementVNode("text",null,"您的资料未通过审核~")])]))])])}}},[["__scopeId","data-v-67b70fd3"]]),jc=[{letter:"A",city:"阿坝县"},{letter:"A",city:"阿巴嘎旗"},{letter:"A",city:"阿坝藏族羌族自治州"},{letter:"A",city:"阿尔山市"},{letter:"A",city:"阿合奇县"},{letter:"A",city:"阿克塞哈萨克族自治县"},{letter:"A",city:"阿克苏市"},{letter:"A",city:"阿克苏地区"},{letter:"A",city:"阿克陶县"},{letter:"A",city:"阿拉尔市"},{letter:"A",city:"阿拉山口市"},{letter:"A",city:"阿拉善盟"},{letter:"A",city:"阿拉善右旗"},{letter:"A",city:"阿拉善左旗"},{letter:"A",city:"阿勒泰市"},{letter:"A",city:"阿勒泰地区"},{letter:"A",city:"阿里地区"},{letter:"A",city:"阿鲁科尔沁旗"},{letter:"A",city:"安达市"},{letter:"A",city:"安多县"},{letter:"A",city:"安福县"},{letter:"A",city:"昂仁县"},{letter:"A",city:"安国市"},{letter:"A",city:"安化县"},{letter:"A",city:"安吉县"},{letter:"A",city:"安康市"},{letter:"A",city:"安龙县"},{letter:"A",city:"安陆市"},{letter:"A",city:"安宁市"},{letter:"A",city:"安平县"},{letter:"A",city:"安庆市"},{letter:"A",city:"安丘市"},{letter:"A",city:"安仁县"},{letter:"A",city:"安塞区"},{letter:"A",city:"鞍山市"},{letter:"A",city:"安顺市"},{letter:"A",city:"安图县"},{letter:"A",city:"安溪县"},{letter:"A",city:"安乡县"},{letter:"A",city:"安新县"},{letter:"A",city:"安阳市"},{letter:"A",city:"安阳县"},{letter:"A",city:"安义县"},{letter:"A",city:"安远县"},{letter:"A",city:"安岳县"},{letter:"A",city:"安泽县"},{letter:"A",city:"敖汉旗"},{letter:"A",city:"澳门特别行政区"},{letter:"A",city:"阿荣旗"},{letter:"A",city:"阿图什市"},{letter:"A",city:"阿瓦提县"},{letter:"B",city:"巴楚县"},{letter:"B",city:"巴东县"},{letter:"B",city:"白城市"},{letter:"B",city:"拜城县"},{letter:"B",city:"白河县"},{letter:"B",city:"白朗县"},{letter:"B",city:"拜泉县"},{letter:"B",city:"百色市"},{letter:"B",city:"白沙黎族自治县"},{letter:"B",city:"白山市"},{letter:"B",city:"白水县"},{letter:"B",city:"柏乡县"},{letter:"B",city:"白银市"},{letter:"B",city:"白玉县"},{letter:"B",city:"巴里坤哈萨克自治县"},{letter:"B",city:"巴林右旗"},{letter:"B",city:"巴林左旗"},{letter:"B",city:"巴马瑶族自治县"},{letter:"B",city:"班戈县"},{letter:"B",city:"班玛县"},{letter:"B",city:"保德县"},{letter:"B",city:"保定市"},{letter:"B",city:"宝丰县"},{letter:"B",city:"宝鸡市"},{letter:"B",city:"保靖县"},{letter:"B",city:"保康县"},{letter:"B",city:"宝清县"},{letter:"B",city:"保山市"},{letter:"B",city:"保亭黎族苗族自治县"},{letter:"B",city:"包头市"},{letter:"B",city:"宝兴县"},{letter:"B",city:"宝应县"},{letter:"B",city:"巴青县"},{letter:"B",city:"八宿县"},{letter:"B",city:"巴塘县"},{letter:"B",city:"巴彦县"},{letter:"B",city:"巴彦淖尔市"},{letter:"B",city:"巴音郭楞蒙古自治州"},{letter:"B",city:"巴中市"},{letter:"B",city:"霸州市"},{letter:"B",city:"北安市"},{letter:"B",city:"北川羌族自治县"},{letter:"B",city:"北海市"},{letter:"B",city:"北京市"},{letter:"B",city:"北流市"},{letter:"B",city:"北票市"},{letter:"B",city:"北屯市"},{letter:"B",city:"北镇市"},{letter:"B",city:"蚌埠市"},{letter:"B",city:"本溪市"},{letter:"B",city:"本溪满族自治县"},{letter:"B",city:"边坝县"},{letter:"B",city:"毕节市"},{letter:"B",city:"宾川县"},{letter:"B",city:"滨海县"},{letter:"B",city:"宾县"},{letter:"B",city:"彬县"},{letter:"B",city:"宾阳县"},{letter:"B",city:"滨州市"},{letter:"B",city:"比如县"},{letter:"B",city:"泌阳县"},{letter:"B",city:"博爱县"},{letter:"B",city:"博白县"},{letter:"B",city:"博尔塔拉蒙古自治州"},{letter:"B",city:"博湖县"},{letter:"B",city:"博乐市"},{letter:"B",city:"勃利县"},{letter:"B",city:"博罗县"},{letter:"B",city:"波密县"},{letter:"B",city:"泊头市"},{letter:"B",city:"博兴县"},{letter:"B",city:"博野县"},{letter:"B",city:"亳州市"},{letter:"B",city:"布尔津县"},{letter:"B",city:"布拖县"},{letter:"C",city:"苍南县"},{letter:"C",city:"苍梧县"},{letter:"C",city:"苍溪县"},{letter:"C",city:"沧县"},{letter:"C",city:"沧源佤族自治县"},{letter:"C",city:"沧州市"},{letter:"C",city:"曹县"},{letter:"C",city:"册亨县"},{letter:"C",city:"策勒县"},{letter:"C",city:"岑巩县"},{letter:"C",city:"岑溪市"},{letter:"C",city:"察布查尔锡伯自治县"},{letter:"C",city:"察哈尔右翼后旗"},{letter:"C",city:"察哈尔右翼前旗"},{letter:"C",city:"察哈尔右翼中旗"},{letter:"C",city:"柴桑区"},{letter:"C",city:"茶陵县"},{letter:"C",city:"长白朝鲜族自治县"},{letter:"C",city:"长春市"},{letter:"C",city:"长岛县"},{letter:"C",city:"常德市"},{letter:"C",city:"昌都市"},{letter:"C",city:"长丰县"},{letter:"C",city:"长葛市"},{letter:"C",city:"长海县"},{letter:"C",city:"昌吉市"},{letter:"C",city:"昌江黎族自治县"},{letter:"C",city:"昌吉回族自治州"},{letter:"C",city:"昌乐县"},{letter:"C",city:"昌黎县"},{letter:"C",city:"长岭县"},{letter:"C",city:"常宁市"},{letter:"C",city:"长宁县"},{letter:"C",city:"昌宁县"},{letter:"C",city:"长沙市"},{letter:"C",city:"长沙县"},{letter:"C",city:"常山县"},{letter:"C",city:"常熟市"},{letter:"C",city:"长顺县"},{letter:"C",city:"长泰县"},{letter:"C",city:"长汀县"},{letter:"C",city:"昌图县"},{letter:"C",city:"长武县"},{letter:"C",city:"长兴县"},{letter:"C",city:"长阳土家族自治县"},{letter:"C",city:"昌邑市"},{letter:"C",city:"长垣县"},{letter:"C",city:"长治市"},{letter:"C",city:"长治县"},{letter:"C",city:"常州市"},{letter:"C",city:"巢湖市"},{letter:"C",city:"朝阳市"},{letter:"C",city:"朝阳县"},{letter:"C",city:"潮州市"},{letter:"C",city:"察雅县"},{letter:"C",city:"察隅县"},{letter:"C",city:"陈巴尔虎旗"},{letter:"C",city:"成安县"},{letter:"C",city:"城步苗族自治县"},{letter:"C",city:"澄城县"},{letter:"C",city:"承德市"},{letter:"C",city:"承德县"},{letter:"C",city:"成都市"},{letter:"C",city:"称多县"},{letter:"C",city:"城固县"},{letter:"C",city:"澄江县"},{letter:"C",city:"城口县"},{letter:"C",city:"澄迈县"},{letter:"C",city:"成武县"},{letter:"C",city:"成县"},{letter:"C",city:"辰溪县"},{letter:"C",city:"郴州市"},{letter:"C",city:"赤壁市"},{letter:"C",city:"赤城县"},{letter:"C",city:"赤峰市"},{letter:"C",city:"茌平县"},{letter:"C",city:"赤水市"},{letter:"C",city:"池州市"},{letter:"C",city:"崇明区"},{letter:"C",city:"重庆市"},{letter:"C",city:"崇仁县"},{letter:"C",city:"崇信县"},{letter:"C",city:"崇阳县"},{letter:"C",city:"崇义县"},{letter:"C",city:"崇州市"},{letter:"C",city:"崇左市"},{letter:"C",city:"淳安县"},{letter:"C",city:"淳化县"},{letter:"C",city:"楚雄市"},{letter:"C",city:"楚雄彝族自治州"},{letter:"C",city:"滁州市"},{letter:"C",city:"慈利县"},{letter:"C",city:"慈溪市"},{letter:"C",city:"磁县"},{letter:"C",city:"从江县"},{letter:"C",city:"措美县"},{letter:"C",city:"错那县"},{letter:"C",city:"措勤县"},{letter:"D",city:"大安市"},{letter:"D",city:"大柴旦行政委员会"},{letter:"D",city:"大厂回族自治县"},{letter:"D",city:"达尔罕茂明安联合旗"},{letter:"D",city:"大方县"},{letter:"D",city:"大关县"},{letter:"D",city:"大化瑶族自治县"},{letter:"D",city:"大城县"},{letter:"D",city:"岱山县"},{letter:"D",city:"代县"},{letter:"D",city:"达拉特旗"},{letter:"D",city:"大理市"},{letter:"D",city:"大荔县"},{letter:"D",city:"大连市"},{letter:"D",city:"大理白族自治州"},{letter:"D",city:"大名县"},{letter:"D",city:"丹巴县"},{letter:"D",city:"郸城县"},{letter:"D",city:"丹东市"},{letter:"D",city:"丹凤县"},{letter:"D",city:"宕昌县"},{letter:"D",city:"砀山县"},{letter:"D",city:"当涂县"},{letter:"D",city:"当雄县"},{letter:"D",city:"当阳市"},{letter:"D",city:"大宁县"},{letter:"D",city:"丹江口市"},{letter:"D",city:"丹棱县"},{letter:"D",city:"丹阳市"},{letter:"D",city:"丹寨县"},{letter:"D",city:"儋州市"},{letter:"D",city:"稻城县"},{letter:"D",city:"道孚县"},{letter:"D",city:"道县"},{letter:"D",city:"道真仡佬族苗族自治县"},{letter:"D",city:"大埔县"},{letter:"D",city:"大庆市"},{letter:"D",city:"达日县"},{letter:"D",city:"大石桥市"},{letter:"D",city:"大田县"},{letter:"D",city:"大同市"},{letter:"D",city:"大同县"},{letter:"D",city:"大通回族土族自治县"},{letter:"D",city:"大悟县"},{letter:"D",city:"大新县"},{letter:"D",city:"大兴安岭地区"},{letter:"D",city:"大姚县"},{letter:"D",city:"大冶市"},{letter:"D",city:"大邑县"},{letter:"D",city:"大英县"},{letter:"D",city:"大余县"},{letter:"D",city:"达州市"},{letter:"D",city:"大竹县"},{letter:"D",city:"德安县"},{letter:"D",city:"德保县"},{letter:"D",city:"德昌县"},{letter:"D",city:"德格县"},{letter:"D",city:"德宏傣族景颇族自治州"},{letter:"D",city:"德化县"},{letter:"D",city:"德惠市"},{letter:"D",city:"德江县"},{letter:"D",city:"德令哈市"},{letter:"D",city:"登封市"},{letter:"D",city:"磴口县"},{letter:"D",city:"灯塔市"},{letter:"D",city:"邓州市"},{letter:"D",city:"德钦县"},{letter:"D",city:"德清县"},{letter:"D",city:"德庆县"},{letter:"D",city:"得荣县"},{letter:"D",city:"德兴市"},{letter:"D",city:"德阳市"},{letter:"D",city:"德州市"},{letter:"D",city:"垫江县"},{letter:"D",city:"调兵山市"},{letter:"D",city:"迭部县"},{letter:"D",city:"定安县"},{letter:"D",city:"定边县"},{letter:"D",city:"定结县"},{letter:"D",city:"定南县"},{letter:"D",city:"丁青县"},{letter:"D",city:"定日县"},{letter:"D",city:"定西市"},{letter:"D",city:"定襄县"},{letter:"D",city:"定兴县"},{letter:"D",city:"定远县"},{letter:"D",city:"定州市"},{letter:"D",city:"迪庆藏族自治州"},{letter:"D",city:"东安县"},{letter:"D",city:"东阿县"},{letter:"D",city:"东方市"},{letter:"D",city:"东丰县"},{letter:"D",city:"东港市"},{letter:"D",city:"东莞市"},{letter:"D",city:"东光县"},{letter:"D",city:"东海县"},{letter:"D",city:"洞口县"},{letter:"D",city:"东兰县"},{letter:"D",city:"东辽县"},{letter:"D",city:"东明县"},{letter:"D",city:"东宁市"},{letter:"D",city:"东平县"},{letter:"D",city:"东山县"},{letter:"D",city:"东台市"},{letter:"D",city:"东乌珠穆沁旗"},{letter:"D",city:"东乡族自治县"},{letter:"D",city:"东兴市"},{letter:"D",city:"东阳市"},{letter:"D",city:"东营市"},{letter:"D",city:"东源县"},{letter:"D",city:"东至县"},{letter:"D",city:"都安瑶族自治县"},{letter:"D",city:"都昌县"},{letter:"D",city:"杜尔伯特蒙古族自治县"},{letter:"D",city:"都江堰市"},{letter:"D",city:"都兰县"},{letter:"D",city:"敦化市"},{letter:"D",city:"敦煌市"},{letter:"D",city:"多伦县"},{letter:"D",city:"独山县"},{letter:"D",city:"都匀市"},{letter:"E",city:"峨边彝族自治县"},{letter:"E",city:"鄂尔多斯市"},{letter:"E",city:"额尔古纳市"},{letter:"E",city:"额济纳旗"},{letter:"E",city:"鄂伦春自治旗"},{letter:"E",city:"峨眉山市"},{letter:"E",city:"额敏县"},{letter:"E",city:"恩平市"},{letter:"E",city:"恩施市"},{letter:"E",city:"恩施土家族苗族自治州"},{letter:"E",city:"二连浩特市"},{letter:"E",city:"洱源县"},{letter:"E",city:"峨山彝族自治县"},{letter:"E",city:"鄂托克旗"},{letter:"E",city:"鄂托克前旗"},{letter:"E",city:"鄂温克族自治旗"},{letter:"E",city:"鄂州市"},{letter:"F",city:"法库县"},{letter:"F",city:"繁昌县"},{letter:"F",city:"方城县"},{letter:"F",city:"防城港市"},{letter:"F",city:"方山县"},{letter:"F",city:"房县"},{letter:"F",city:"方正县"},{letter:"F",city:"范县"},{letter:"F",city:"繁峙县"},{letter:"F",city:"肥城市"},{letter:"F",city:"肥东县"},{letter:"F",city:"肥西县"},{letter:"F",city:"费县"},{letter:"F",city:"肥乡县"},{letter:"F",city:"丰城市"},{letter:"F",city:"凤城市"},{letter:"F",city:"丰都县"},{letter:"F",city:"凤冈县"},{letter:"F",city:"凤凰县"},{letter:"F",city:"奉节县"},{letter:"F",city:"封开县"},{letter:"F",city:"丰宁满族自治县"},{letter:"F",city:"凤庆县"},{letter:"F",city:"封丘县"},{letter:"F",city:"凤山县"},{letter:"F",city:"丰顺县"},{letter:"F",city:"凤台县"},{letter:"F",city:"丰县"},{letter:"F",city:"凤县"},{letter:"F",city:"凤翔县"},{letter:"F",city:"奉新县"},{letter:"F",city:"凤阳县"},{letter:"F",city:"丰镇市"},{letter:"F",city:"汾西县"},{letter:"F",city:"汾阳市"},{letter:"F",city:"分宜县"},{letter:"F",city:"佛冈县"},{letter:"F",city:"佛坪县"},{letter:"F",city:"佛山市"},{letter:"F",city:"福安市"},{letter:"F",city:"阜城县"},{letter:"F",city:"富川瑶族自治县"},{letter:"F",city:"福鼎市"},{letter:"F",city:"扶风县"},{letter:"F",city:"福贡县"},{letter:"F",city:"扶沟县"},{letter:"F",city:"府谷县"},{letter:"F",city:"福海县"},{letter:"F",city:"富锦市"},{letter:"F",city:"阜康市"},{letter:"F",city:"浮梁县"},{letter:"F",city:"富民县"},{letter:"F",city:"阜南县"},{letter:"F",city:"阜宁县"},{letter:"F",city:"富宁县"},{letter:"F",city:"阜平县"},{letter:"F",city:"富平县"},{letter:"F",city:"福清市"},{letter:"F",city:"福泉市"},{letter:"F",city:"浮山县"},{letter:"F",city:"抚顺市"},{letter:"F",city:"富顺县"},{letter:"F",city:"抚顺县"},{letter:"F",city:"抚松县"},{letter:"F",city:"扶绥县"},{letter:"F",city:"富县"},{letter:"F",city:"阜新市"},{letter:"F",city:"阜新蒙古族自治县"},{letter:"F",city:"阜阳市"},{letter:"F",city:"扶余市"},{letter:"F",city:"富裕县"},{letter:"F",city:"富源县"},{letter:"F",city:"抚远市"},{letter:"F",city:"富蕴县"},{letter:"F",city:"福州市"},{letter:"F",city:"抚州市"},{letter:"G",city:"噶尔县"},{letter:"G",city:"改则县"},{letter:"G",city:"盖州市"},{letter:"G",city:"甘德县"},{letter:"G",city:"岗巴县"},{letter:"G",city:"刚察县"},{letter:"G",city:"甘谷县"},{letter:"G",city:"甘洛县"},{letter:"G",city:"甘南县"},{letter:"G",city:"甘南藏族自治州"},{letter:"G",city:"甘泉县"},{letter:"G",city:"赣州市"},{letter:"G",city:"甘孜县"},{letter:"G",city:"甘孜藏族自治州"},{letter:"G",city:"高安市"},{letter:"G",city:"高碑店市"},{letter:"G",city:"皋兰县"},{letter:"G",city:"高密市"},{letter:"G",city:"高平市"},{letter:"G",city:"高青县"},{letter:"G",city:"高台县"},{letter:"G",city:"高唐县"},{letter:"G",city:"高县"},{letter:"G",city:"高阳县"},{letter:"G",city:"高邑县"},{letter:"G",city:"高邮市"},{letter:"G",city:"高州市"},{letter:"G",city:"格尔木市"},{letter:"G",city:"革吉县"},{letter:"G",city:"个旧市"},{letter:"G",city:"耿马傣族佤族自治县"},{letter:"G",city:"根河市"},{letter:"G",city:"公安县"},{letter:"G",city:"工布江达县"},{letter:"G",city:"恭城瑶族自治县"},{letter:"G",city:"贡嘎县"},{letter:"G",city:"共和县"},{letter:"G",city:"贡觉县"},{letter:"G",city:"巩留县"},{letter:"G",city:"共青城市"},{letter:"G",city:"贡山独龙族怒族自治县"},{letter:"G",city:"珙县"},{letter:"G",city:"巩义市"},{letter:"G",city:"公主岭市"},{letter:"G",city:"固安县"},{letter:"G",city:"广安市"},{letter:"G",city:"广昌县"},{letter:"G",city:"广德县"},{letter:"G",city:"广汉市"},{letter:"G",city:"广河县"},{letter:"G",city:"广灵县"},{letter:"G",city:"广南县"},{letter:"G",city:"广宁县"},{letter:"G",city:"广平县"},{letter:"G",city:"广饶县"},{letter:"G",city:"光山县"},{letter:"G",city:"广水市"},{letter:"G",city:"广元市"},{letter:"G",city:"光泽县"},{letter:"G",city:"广州市"},{letter:"G",city:"广宗县"},{letter:"G",city:"关岭布依族苗族自治县"},{letter:"G",city:"灌南县"},{letter:"G",city:"馆陶县"},{letter:"G",city:"冠县"},{letter:"G",city:"灌阳县"},{letter:"G",city:"灌云县"},{letter:"G",city:"瓜州县"},{letter:"G",city:"谷城县"},{letter:"G",city:"故城县"},{letter:"G",city:"贵德县"},{letter:"G",city:"贵定县"},{letter:"G",city:"桂东县"},{letter:"G",city:"贵港市"},{letter:"G",city:"桂林市"},{letter:"G",city:"贵南县"},{letter:"G",city:"桂平市"},{letter:"G",city:"贵溪市"},{letter:"G",city:"贵阳市"},{letter:"G",city:"桂阳县"},{letter:"G",city:"古交市"},{letter:"G",city:"古浪县"},{letter:"G",city:"古蔺县"},{letter:"G",city:"果洛藏族自治州"},{letter:"G",city:"固始县"},{letter:"G",city:"古田县"},{letter:"G",city:"古县"},{letter:"G",city:"固阳县"},{letter:"G",city:"沽源县"},{letter:"G",city:"固原市"},{letter:"G",city:"古丈县"},{letter:"G",city:"固镇县"},{letter:"H",city:"哈巴河县"},{letter:"H",city:"哈尔滨市"},{letter:"H",city:"海安县"},{letter:"H",city:"海北藏族自治州"},{letter:"H",city:"海城市"},{letter:"H",city:"海东市"},{letter:"H",city:"海丰县"},{letter:"H",city:"海口市"},{letter:"H",city:"海林市"},{letter:"H",city:"海伦市"},{letter:"H",city:"海门市"},{letter:"H",city:"海南藏族自治州"},{letter:"H",city:"海宁市"},{letter:"H",city:"海西蒙古族藏族自治州"},{letter:"H",city:"海兴县"},{letter:"H",city:"海盐县"},{letter:"H",city:"海晏县"},{letter:"H",city:"海阳市"},{letter:"H",city:"海原县"},{letter:"H",city:"哈密市"},{letter:"H",city:"韩城市"},{letter:"H",city:"汉川市"},{letter:"H",city:"邯郸市"},{letter:"H",city:"邯郸县"},{letter:"H",city:"杭锦后旗"},{letter:"H",city:"杭锦旗"},{letter:"H",city:"杭州市"},{letter:"H",city:"含山县"},{letter:"H",city:"汉寿县"},{letter:"H",city:"汉阴县"},{letter:"H",city:"汉源县"},{letter:"H",city:"汉中市"},{letter:"H",city:"鹤壁市"},{letter:"H",city:"和布克赛尔蒙古自治县"},{letter:"H",city:"河池市"},{letter:"H",city:"合肥市"},{letter:"H",city:"鹤峰县"},{letter:"H",city:"鹤岗市"},{letter:"H",city:"黑河市"},{letter:"H",city:"黑山县"},{letter:"H",city:"黑水县"},{letter:"H",city:"河间市"},{letter:"H",city:"合江县"},{letter:"H",city:"河津市"},{letter:"H",city:"和静县"},{letter:"H",city:"河口瑶族自治县"},{letter:"H",city:"贺兰县"},{letter:"H",city:"和林格尔县"},{letter:"H",city:"和龙市"},{letter:"H",city:"河南蒙古族自治县"},{letter:"H",city:"衡东县"},{letter:"H",city:"横峰县"},{letter:"H",city:"衡南县"},{letter:"H",city:"衡山县"},{letter:"H",city:"衡水市"},{letter:"H",city:"横县"},{letter:"H",city:"衡阳市"},{letter:"H",city:"衡阳县"},{letter:"H",city:"和平县"},{letter:"H",city:"合浦县"},{letter:"H",city:"鹤庆县"},{letter:"H",city:"河曲县"},{letter:"H",city:"鹤山市"},{letter:"H",city:"合山市"},{letter:"H",city:"合水县"},{letter:"H",city:"和顺县"},{letter:"H",city:"和硕县"},{letter:"H",city:"和田市"},{letter:"H",city:"和田县"},{letter:"H",city:"和田地区"},{letter:"H",city:"和县"},{letter:"H",city:"合阳县"},{letter:"H",city:"河源市"},{letter:"H",city:"菏泽市"},{letter:"H",city:"赫章县"},{letter:"H",city:"和政县"},{letter:"H",city:"贺州市"},{letter:"H",city:"合作市"},{letter:"H",city:"红安县"},{letter:"H",city:"洪洞县"},{letter:"H",city:"红河县"},{letter:"H",city:"红河哈尼族彝族自治州"},{letter:"H",city:"洪湖市"},{letter:"H",city:"洪江市"},{letter:"H",city:"洪雅县"},{letter:"H",city:"红原县"},{letter:"H",city:"洪泽区"},{letter:"H",city:"侯马市"},{letter:"H",city:"华安县"},{letter:"H",city:"华池县"},{letter:"H",city:"桦川县"},{letter:"H",city:"化德县"},{letter:"H",city:"桦甸市"},{letter:"H",city:"淮安市"},{letter:"H",city:"怀安县"},{letter:"H",city:"淮北市"},{letter:"H",city:"淮滨县"},{letter:"H",city:"怀化市"},{letter:"H",city:"怀集县"},{letter:"H",city:"怀来县"},{letter:"H",city:"淮南市"},{letter:"H",city:"怀宁县"},{letter:"H",city:"怀仁县"},{letter:"H",city:"淮阳县"},{letter:"H",city:"怀远县"},{letter:"H",city:"化隆回族自治县"},{letter:"H",city:"桦南县"},{letter:"H",city:"潢川县"},{letter:"H",city:"黄冈市"},{letter:"H",city:"黄骅市"},{letter:"H",city:"黄陵县"},{letter:"H",city:"黄龙县"},{letter:"H",city:"黄梅县"},{letter:"H",city:"黄南藏族自治州"},{letter:"H",city:"黄平县"},{letter:"H",city:"黄山市"},{letter:"H",city:"黄石市"},{letter:"H",city:"湟源县"},{letter:"H",city:"湟中县"},{letter:"H",city:"华宁县"},{letter:"H",city:"环江毛南族自治县"},{letter:"H",city:"桓仁满族自治县"},{letter:"H",city:"桓台县"},{letter:"H",city:"环县"},{letter:"H",city:"华坪县"},{letter:"H",city:"华容县"},{letter:"H",city:"华亭县"},{letter:"H",city:"滑县"},{letter:"H",city:"华阴市"},{letter:"H",city:"华蓥市"},{letter:"H",city:"花垣县"},{letter:"H",city:"化州市"},{letter:"H",city:"壶关县"},{letter:"H",city:"呼和浩特市"},{letter:"H",city:"惠安县"},{letter:"H",city:"会昌县"},{letter:"H",city:"惠东县"},{letter:"H",city:"会东县"},{letter:"H",city:"惠来县"},{letter:"H",city:"会理县"},{letter:"H",city:"惠民县"},{letter:"H",city:"辉南县"},{letter:"H",city:"睢宁县"},{letter:"H",city:"会宁县"},{letter:"H",city:"惠水县"},{letter:"H",city:"会同县"},{letter:"H",city:"辉县市"},{letter:"H",city:"睢县"},{letter:"H",city:"徽县"},{letter:"H",city:"会泽县"},{letter:"H",city:"惠州市"},{letter:"H",city:"湖口县"},{letter:"H",city:"虎林市"},{letter:"H",city:"葫芦岛市"},{letter:"H",city:"呼伦贝尔市"},{letter:"H",city:"呼玛县"},{letter:"H",city:"珲春市"},{letter:"H",city:"浑源县"},{letter:"H",city:"霍城县"},{letter:"H",city:"霍尔果斯市"},{letter:"H",city:"获嘉县"},{letter:"H",city:"霍林郭勒市"},{letter:"H",city:"霍邱县"},{letter:"H",city:"霍山县"},{letter:"H",city:"霍州市"},{letter:"H",city:"呼图壁县"},{letter:"H",city:"湖州市"},{letter:"H",city:"互助土族自治县"},{letter:"J",city:"加查县"},{letter:"J",city:"嘉禾县"},{letter:"J",city:"夹江县"},{letter:"J",city:"嘉黎县"},{letter:"J",city:"佳木斯市"},{letter:"J",city:"吉安市"},{letter:"J",city:"集安市"},{letter:"J",city:"吉安县"},{letter:"J",city:"建昌县"},{letter:"J",city:"剑川县"},{letter:"J",city:"建德市"},{letter:"J",city:"江安县"},{letter:"J",city:"江城哈尼族彝族自治县"},{letter:"J",city:"江达县"},{letter:"J",city:"剑阁县"},{letter:"J",city:"江华瑶族自治县"},{letter:"J",city:"江口县"},{letter:"J",city:"将乐县"},{letter:"J",city:"江陵县"},{letter:"J",city:"江门市"},{letter:"J",city:"江山市"},{letter:"J",city:"绛县"},{letter:"J",city:"江阴市"},{letter:"J",city:"江永县"},{letter:"J",city:"江油市"},{letter:"J",city:"江孜县"},{letter:"J",city:"剑河县"},{letter:"J",city:"建湖县"},{letter:"J",city:"监利县"},{letter:"J",city:"建宁县"},{letter:"J",city:"建瓯市"},{letter:"J",city:"建平县"},{letter:"J",city:"建始县"},{letter:"J",city:"建水县"},{letter:"J",city:"犍为县"},{letter:"J",city:"简阳市"},{letter:"J",city:"尖扎县"},{letter:"J",city:"交城县"},{letter:"J",city:"蛟河市"},{letter:"J",city:"交口县"},{letter:"J",city:"蕉岭县"},{letter:"J",city:"胶州市"},{letter:"J",city:"焦作市"},{letter:"J",city:"嘉善县"},{letter:"J",city:"伽师县"},{letter:"J",city:"郏县"},{letter:"J",city:"佳县"},{letter:"J",city:"嘉祥县"},{letter:"J",city:"嘉兴市"},{letter:"J",city:"嘉荫县"},{letter:"J",city:"嘉鱼县"},{letter:"J",city:"嘉峪关市"},{letter:"J",city:"鸡东县"},{letter:"J",city:"界首市"},{letter:"J",city:"揭西县"},{letter:"J",city:"介休市"},{letter:"J",city:"揭阳市"},{letter:"J",city:"吉林市"},{letter:"J",city:"吉隆县"},{letter:"J",city:"吉木乃县"},{letter:"J",city:"吉木萨尔县"},{letter:"J",city:"济南市"},{letter:"J",city:"金昌市"},{letter:"J",city:"晋城市"},{letter:"J",city:"金川县"},{letter:"J",city:"靖安县"},{letter:"J",city:"靖边县"},{letter:"J",city:"泾川县"},{letter:"J",city:"旌德县"},{letter:"J",city:"景德镇市"},{letter:"J",city:"景东彝族自治县"},{letter:"J",city:"井冈山市"},{letter:"J",city:"景谷傣族彝族自治县"},{letter:"J",city:"精河县"},{letter:"J",city:"景洪市"},{letter:"J",city:"靖江市"},{letter:"J",city:"静乐县"},{letter:"J",city:"荆门市"},{letter:"J",city:"静宁县"},{letter:"J",city:"景宁畲族自治县"},{letter:"J",city:"京山县"},{letter:"J",city:"景泰县"},{letter:"J",city:"靖西市"},{letter:"J",city:"景县"},{letter:"J",city:"泾县"},{letter:"J",city:"井陉县"},{letter:"J",city:"井研县"},{letter:"J",city:"泾阳县"},{letter:"J",city:"靖宇县"},{letter:"J",city:"靖远县"},{letter:"J",city:"泾源县"},{letter:"J",city:"荆州市"},{letter:"J",city:"靖州苗族侗族自治县"},{letter:"J",city:"金湖县"},{letter:"J",city:"金华市"},{letter:"J",city:"济宁市"},{letter:"J",city:"晋江市"},{letter:"J",city:"金门县"},{letter:"J",city:"锦屏县"},{letter:"J",city:"金平苗族瑶族傣族自治县"},{letter:"J",city:"金沙县"},{letter:"J",city:"津市市"},{letter:"J",city:"金塔县"},{letter:"J",city:"金堂县"},{letter:"J",city:"金溪县"},{letter:"J",city:"进贤县"},{letter:"J",city:"金乡县"},{letter:"J",city:"金秀瑶族自治县"},{letter:"J",city:"金阳县"},{letter:"J",city:"缙云县"},{letter:"J",city:"金寨县"},{letter:"J",city:"晋中市"},{letter:"J",city:"锦州市"},{letter:"J",city:"晋州市"},{letter:"J",city:"稷山县"},{letter:"J",city:"积石山保安族东乡族撒拉族自治县"},{letter:"J",city:"吉首市"},{letter:"J",city:"吉水县"},{letter:"J",city:"九江市"},{letter:"J",city:"九龙县"},{letter:"J",city:"酒泉市"},{letter:"J",city:"九寨沟县"},{letter:"J",city:"久治县"},{letter:"J",city:"鸡西市"},{letter:"J",city:"绩溪县"},{letter:"J",city:"蓟县"},{letter:"J",city:"吉县"},{letter:"J",city:"集贤县"},{letter:"J",city:"济阳县"},{letter:"J",city:"济源市"},{letter:"J",city:"鸡泽县"},{letter:"J",city:"冀州区"},{letter:"J",city:"鄄城县"},{letter:"J",city:"巨鹿县"},{letter:"J",city:"莒南县"},{letter:"J",city:"句容市"},{letter:"J",city:"莒县"},{letter:"J",city:"巨野县"},{letter:"K",city:"开封市"},{letter:"K",city:"开化县"},{letter:"K",city:"开江县"},{letter:"K",city:"凯里市"},{letter:"K",city:"开鲁县"},{letter:"K",city:"开平市"},{letter:"K",city:"开阳县"},{letter:"K",city:"开原市"},{letter:"K",city:"开远市"},{letter:"K",city:"开州区"},{letter:"K",city:"喀喇沁旗"},{letter:"K",city:"喀喇沁左翼蒙古族自治县"},{letter:"K",city:"康保县"},{letter:"K",city:"康定市"},{letter:"K",city:"康乐县"},{letter:"K",city:"康马县"},{letter:"K",city:"康平县"},{letter:"K",city:"康县"},{letter:"K",city:"喀什市"},{letter:"K",city:"喀什地区"},{letter:"K",city:"克东县"},{letter:"K",city:"科尔沁右翼前旗"},{letter:"K",city:"科尔沁右翼中旗"},{letter:"K",city:"科尔沁左翼后旗"},{letter:"K",city:"科尔沁左翼中旗"},{letter:"K",city:"可克达拉市"},{letter:"K",city:"克拉玛依市"},{letter:"K",city:"岢岚县"},{letter:"K",city:"垦利区"},{letter:"K",city:"柯坪县"},{letter:"K",city:"克山县"},{letter:"K",city:"克什克腾旗"},{letter:"K",city:"克孜勒苏柯尔克孜自治州"},{letter:"K",city:"宽城满族自治县"},{letter:"K",city:"宽甸满族自治县"},{letter:"K",city:"库车县"},{letter:"K",city:"库尔勒市"},{letter:"K",city:"奎屯市"},{letter:"K",city:"库伦旗"},{letter:"K",city:"昆明市"},{letter:"K",city:"昆山市"},{letter:"K",city:"昆玉市"},{letter:"L",city:"来安县"},{letter:"L",city:"来宾市"},{letter:"L",city:"来凤县"},{letter:"L",city:"涞水县"},{letter:"L",city:"莱芜市"},{letter:"L",city:"莱西市"},{letter:"L",city:"莱阳市"},{letter:"L",city:"涞源县"},{letter:"L",city:"莱州市"},{letter:"L",city:"澜沧拉祜族自治县"},{letter:"L",city:"岚皋县"},{letter:"L",city:"廊坊市"},{letter:"L",city:"浪卡子县"},{letter:"L",city:"郎溪县"},{letter:"L",city:"朗县"},{letter:"L",city:"阆中市"},{letter:"L",city:"兰考县"},{letter:"L",city:"兰陵县"},{letter:"L",city:"兰坪白族普米族自治县"},{letter:"L",city:"蓝山县"},{letter:"L",city:"蓝田县"},{letter:"L",city:"兰溪市"},{letter:"L",city:"兰西县"},{letter:"L",city:"岚县"},{letter:"L",city:"兰州市"},{letter:"L",city:"老河口市"},{letter:"L",city:"乐陵市"},{letter:"L",city:"乐亭县"},{letter:"L",city:"拉萨市"},{letter:"L",city:"拉孜县"},{letter:"L",city:"乐安县"},{letter:"L",city:"乐昌市"},{letter:"L",city:"乐东黎族自治县"},{letter:"L",city:"雷波县"},{letter:"L",city:"雷山县"},{letter:"L",city:"类乌齐县"},{letter:"L",city:"耒阳市"},{letter:"L",city:"雷州市"},{letter:"L",city:"冷湖行政委员会"},{letter:"L",city:"冷水江市"},{letter:"L",city:"乐平市"},{letter:"L",city:"乐山市"},{letter:"L",city:"乐业县"},{letter:"L",city:"乐至县"},{letter:"L",city:"连城县"},{letter:"L",city:"凉城县"},{letter:"L",city:"两当县"},{letter:"L",city:"梁河县"},{letter:"L",city:"梁山县"},{letter:"L",city:"凉山彝族自治州"},{letter:"L",city:"莲花县"},{letter:"L",city:"连江县"},{letter:"L",city:"廉江市"},{letter:"L",city:"连南瑶族自治县"},{letter:"L",city:"连平县"},{letter:"L",city:"连山壮族瑶族自治县"},{letter:"L",city:"涟水县"},{letter:"L",city:"涟源市"},{letter:"L",city:"连云港市"},{letter:"L",city:"连州市"},{letter:"L",city:"聊城市"},{letter:"L",city:"辽阳市"},{letter:"L",city:"辽阳县"},{letter:"L",city:"辽源市"},{letter:"L",city:"荔波县"},{letter:"L",city:"黎城县"},{letter:"L",city:"利川市"},{letter:"L",city:"黎川县"},{letter:"L",city:"丽江市"},{letter:"L",city:"利津县"},{letter:"L",city:"醴陵市"},{letter:"L",city:"临沧市"},{letter:"L",city:"临城县"},{letter:"L",city:"林甸县"},{letter:"L",city:"临汾市"},{letter:"L",city:"临高县"},{letter:"L",city:"灵宝市"},{letter:"L",city:"灵璧县"},{letter:"L",city:"陵川县"},{letter:"L",city:"灵川县"},{letter:"L",city:"凌海市"},{letter:"L",city:"灵丘县"},{letter:"L",city:"灵山县"},{letter:"L",city:"灵石县"},{letter:"L",city:"灵寿县"},{letter:"L",city:"陵水黎族自治县"},{letter:"L",city:"灵台县"},{letter:"L",city:"灵武市"},{letter:"L",city:"陵县"},{letter:"L",city:"凌源市"},{letter:"L",city:"凌云县"},{letter:"L",city:"临海市"},{letter:"L",city:"临江市"},{letter:"L",city:"林口县"},{letter:"L",city:"临澧县"},{letter:"L",city:"临清市"},{letter:"L",city:"临朐县"},{letter:"L",city:"临泉县"},{letter:"L",city:"临沭县"},{letter:"L",city:"邻水县"},{letter:"L",city:"临潭县"},{letter:"L",city:"临洮县"},{letter:"L",city:"临武县"},{letter:"L",city:"临西县"},{letter:"L",city:"林西县"},{letter:"L",city:"临夏市"},{letter:"L",city:"临夏县"},{letter:"L",city:"临夏回族自治州"},{letter:"L",city:"临县"},{letter:"L",city:"临湘市"},{letter:"L",city:"临沂市"},{letter:"L",city:"临邑县"},{letter:"L",city:"临猗县"},{letter:"L",city:"临颍县"},{letter:"L",city:"麟游县"},{letter:"L",city:"临泽县"},{letter:"L",city:"临漳县"},{letter:"L",city:"林芝市"},{letter:"L",city:"林州市"},{letter:"L",city:"林周县"},{letter:"L",city:"黎平县"},{letter:"L",city:"荔浦县"},{letter:"L",city:"礼泉县"},{letter:"L",city:"梨树县"},{letter:"L",city:"丽水市"},{letter:"L",city:"理塘县"},{letter:"L",city:"六安市"},{letter:"L",city:"留坝县"},{letter:"L",city:"柳城县"},{letter:"L",city:"柳河县"},{letter:"L",city:"柳林县"},{letter:"L",city:"六盘水市"},{letter:"L",city:"浏阳市"},{letter:"L",city:"柳州市"},{letter:"L",city:"澧县"},{letter:"L",city:"蠡县"},{letter:"L",city:"理县"},{letter:"L",city:"礼县"},{letter:"L",city:"利辛县"},{letter:"L",city:"溧阳市"},{letter:"L",city:"隆安县"},{letter:"L",city:"隆昌市"},{letter:"L",city:"龙川县"},{letter:"L",city:"陇川县"},{letter:"L",city:"隆德县"},{letter:"L",city:"龙海市"},{letter:"L",city:"隆化县"},{letter:"L",city:"隆回县"},{letter:"L",city:"龙江县"},{letter:"L",city:"龙井市"},{letter:"L",city:"龙口市"},{letter:"L",city:"龙里县"},{letter:"L",city:"龙陵县"},{letter:"L",city:"隆林各族自治县"},{letter:"L",city:"龙门县"},{letter:"L",city:"龙南县"},{letter:"L",city:"陇南市"},{letter:"L",city:"龙泉市"},{letter:"L",city:"龙山县"},{letter:"L",city:"龙胜各族自治县"},{letter:"L",city:"陇西县"},{letter:"L",city:"陇县"},{letter:"L",city:"龙岩市"},{letter:"L",city:"隆尧县"},{letter:"L",city:"龙游县"},{letter:"L",city:"龙州县"},{letter:"L",city:"隆子县"},{letter:"L",city:"娄底市"},{letter:"L",city:"娄烦县"},{letter:"L",city:"栾川县"},{letter:"L",city:"滦南县"},{letter:"L",city:"滦平县"},{letter:"L",city:"滦县"},{letter:"L",city:"潞城市"},{letter:"L",city:"陆川县"},{letter:"L",city:"鲁甸县"},{letter:"L",city:"泸定县"},{letter:"L",city:"略阳县"},{letter:"L",city:"陆丰市"},{letter:"L",city:"禄丰县"},{letter:"L",city:"陆河县"},{letter:"L",city:"炉霍县"},{letter:"L",city:"庐江县"},{letter:"L",city:"陆良县"},{letter:"L",city:"卢龙县"},{letter:"L",city:"轮台县"},{letter:"L",city:"萝北县"},{letter:"L",city:"罗城仫佬族自治县"},{letter:"L",city:"洛川县"},{letter:"L",city:"罗甸县"},{letter:"L",city:"罗定市"},{letter:"L",city:"漯河市"},{letter:"L",city:"罗江县"},{letter:"L",city:"洛隆县"},{letter:"L",city:"洛南县"},{letter:"L",city:"洛宁县"},{letter:"L",city:"罗平县"},{letter:"L",city:"洛浦县"},{letter:"L",city:"罗山县"},{letter:"L",city:"罗田县"},{letter:"L",city:"洛阳市"},{letter:"L",city:"罗源县"},{letter:"L",city:"洛扎县"},{letter:"L",city:"碌曲县"},{letter:"L",city:"禄劝彝族苗族自治县"},{letter:"L",city:"鲁山县"},{letter:"L",city:"庐山市"},{letter:"L",city:"芦山县"},{letter:"L",city:"卢氏县"},{letter:"L",city:"泸水市"},{letter:"L",city:"芦溪县"},{letter:"L",city:"泸溪县"},{letter:"L",city:"泸西县"},{letter:"L",city:"泸县"},{letter:"L",city:"鹿邑县"},{letter:"L",city:"鹿寨县"},{letter:"L",city:"泸州市"},{letter:"L",city:"绿春县"},{letter:"L",city:"吕梁市"},{letter:"M",city:"马鞍山市"},{letter:"M",city:"马边彝族自治县"},{letter:"M",city:"麻城市"},{letter:"M",city:"玛多县"},{letter:"M",city:"马尔康市"},{letter:"M",city:"马关县"},{letter:"M",city:"麦盖提县"},{letter:"M",city:"麻江县"},{letter:"M",city:"麻栗坡县"},{letter:"M",city:"马龙县"},{letter:"M",city:"玛纳斯县"},{letter:"M",city:"芒康县"},{letter:"M",city:"芒市"},{letter:"M",city:"茫崖行政委员会"},{letter:"M",city:"满洲里市"},{letter:"M",city:"茂名市"},{letter:"M",city:"茂县"},{letter:"M",city:"玛沁县"},{letter:"M",city:"玛曲县"},{letter:"M",city:"马山县"},{letter:"M",city:"麻阳苗族自治县"},{letter:"M",city:"美姑县"},{letter:"M",city:"梅河口市"},{letter:"M",city:"眉山市"},{letter:"M",city:"湄潭县"},{letter:"M",city:"眉县"},{letter:"M",city:"梅州市"},{letter:"M",city:"蒙城县"},{letter:"M",city:"孟村回族自治县"},{letter:"M",city:"勐海县"},{letter:"M",city:"孟津县"},{letter:"M",city:"勐腊县"},{letter:"M",city:"孟连傣族拉祜族佤族自治县"},{letter:"M",city:"蒙山县"},{letter:"M",city:"蒙阴县"},{letter:"M",city:"孟州市"},{letter:"M",city:"蒙自市"},{letter:"M",city:"门源回族自治县"},{letter:"M",city:"渑池县"},{letter:"M",city:"冕宁县"},{letter:"M",city:"勉县"},{letter:"M",city:"绵阳市"},{letter:"M",city:"绵竹市"},{letter:"M",city:"弥渡县"},{letter:"M",city:"弥勒市"},{letter:"M",city:"米林县"},{letter:"M",city:"汨罗市"},{letter:"M",city:"民丰县"},{letter:"M",city:"明光市"},{letter:"M",city:"明水县"},{letter:"M",city:"明溪县"},{letter:"M",city:"民和回族土族自治县"},{letter:"M",city:"闽侯县"},{letter:"M",city:"民乐县"},{letter:"M",city:"民勤县"},{letter:"M",city:"闽清县"},{letter:"M",city:"民权县"},{letter:"M",city:"岷县"},{letter:"M",city:"密山市"},{letter:"M",city:"米易县"},{letter:"M",city:"米脂县"},{letter:"M",city:"漠河县"},{letter:"M",city:"墨江哈尼族自治县"},{letter:"M",city:"莫力达瓦达斡尔族自治旗"},{letter:"M",city:"墨脱县"},{letter:"M",city:"牟定县"},{letter:"M",city:"墨玉县"},{letter:"M",city:"墨竹工卡县"},{letter:"M",city:"沐川县"},{letter:"M",city:"牡丹江市"},{letter:"M",city:"木兰县"},{letter:"M",city:"木垒哈萨克自治县"},{letter:"M",city:"穆棱市"},{letter:"M",city:"木里藏族自治县"},{letter:"N",city:"乃东区"},{letter:"N",city:"奈曼旗"},{letter:"N",city:"南安市"},{letter:"N",city:"南澳县"},{letter:"N",city:"南部县"},{letter:"N",city:"南昌市"},{letter:"N",city:"南昌县"},{letter:"N",city:"南城县"},{letter:"N",city:"南充市"},{letter:"N",city:"南丹县"},{letter:"N",city:"南丰县"},{letter:"N",city:"南宫市"},{letter:"N",city:"囊谦县"},{letter:"N",city:"南和县"},{letter:"N",city:"南华县"},{letter:"N",city:"南江县"},{letter:"N",city:"南涧彝族自治县"},{letter:"N",city:"南京市"},{letter:"N",city:"南靖县"},{letter:"N",city:"南乐县"},{letter:"N",city:"南陵县"},{letter:"N",city:"南木林县"},{letter:"N",city:"南宁市"},{letter:"N",city:"南皮县"},{letter:"N",city:"南平市"},{letter:"N",city:"南沙群岛"},{letter:"N",city:"南通市"},{letter:"N",city:"南县"},{letter:"N",city:"南雄市"},{letter:"N",city:"南阳市"},{letter:"N",city:"南漳县"},{letter:"N",city:"南召县"},{letter:"N",city:"那坡县"},{letter:"N",city:"那曲市"},{letter:"N",city:"那曲县"},{letter:"N",city:"纳雍县"},{letter:"N",city:"讷河市"},{letter:"N",city:"内黄县"},{letter:"N",city:"内江市"},{letter:"N",city:"内丘县"},{letter:"N",city:"内乡县"},{letter:"N",city:"嫩江县"},{letter:"N",city:"聂拉木县"},{letter:"N",city:"聂荣县"},{letter:"N",city:"尼勒克县"},{letter:"N",city:"尼玛县"},{letter:"N",city:"尼木县"},{letter:"N",city:"宁安市"},{letter:"N",city:"宁波市"},{letter:"N",city:"宁城县"},{letter:"N",city:"宁德市"},{letter:"N",city:"宁都县"},{letter:"N",city:"宁洱哈尼族彝族自治县"},{letter:"N",city:"宁国市"},{letter:"N",city:"宁海县"},{letter:"N",city:"宁化县"},{letter:"N",city:"宁晋县"},{letter:"N",city:"宁津县"},{letter:"N",city:"宁蒗彝族自治县"},{letter:"N",city:"宁陵县"},{letter:"N",city:"宁明县"},{letter:"N",city:"宁南县"},{letter:"N",city:"宁强县"},{letter:"N",city:"宁陕县"},{letter:"N",city:"宁武县"},{letter:"N",city:"宁县"},{letter:"N",city:"宁阳县"},{letter:"N",city:"宁远县"},{letter:"N",city:"农安县"},{letter:"N",city:"怒江傈僳族自治州"},{letter:"P",city:"磐安县"},{letter:"P",city:"盘锦市"},{letter:"P",city:"盘山县"},{letter:"P",city:"磐石市"},{letter:"P",city:"盘州市"},{letter:"P",city:"攀枝花市"},{letter:"P",city:"沛县"},{letter:"P",city:"蓬安县"},{letter:"P",city:"蓬莱市"},{letter:"P",city:"彭水苗族土家族自治县"},{letter:"P",city:"蓬溪县"},{letter:"P",city:"彭阳县"},{letter:"P",city:"彭泽县"},{letter:"P",city:"彭州市"},{letter:"P",city:"偏关县"},{letter:"P",city:"屏边苗族自治县"},{letter:"P",city:"平昌县"},{letter:"P",city:"平定县"},{letter:"P",city:"平顶山市"},{letter:"P",city:"平度市"},{letter:"P",city:"平果县"},{letter:"P",city:"平和县"},{letter:"P",city:"平湖市"},{letter:"P",city:"平江县"},{letter:"P",city:"平乐县"},{letter:"P",city:"平利县"},{letter:"P",city:"平凉市"},{letter:"P",city:"平陆县"},{letter:"P",city:"平罗县"},{letter:"P",city:"平南县"},{letter:"P",city:"屏南县"},{letter:"P",city:"平泉市"},{letter:"P",city:"屏山县"},{letter:"P",city:"平山县"},{letter:"P",city:"平顺县"},{letter:"P",city:"平潭县"},{letter:"P",city:"平塘县"},{letter:"P",city:"平武县"},{letter:"P",city:"萍乡市"},{letter:"P",city:"平乡县"},{letter:"P",city:"凭祥市"},{letter:"P",city:"平阳县"},{letter:"P",city:"平遥县"},{letter:"P",city:"平邑县"},{letter:"P",city:"平阴县"},{letter:"P",city:"平舆县"},{letter:"P",city:"平原县"},{letter:"P",city:"平远县"},{letter:"P",city:"皮山县"},{letter:"P",city:"邳州市"},{letter:"P",city:"鄱阳县"},{letter:"P",city:"普安县"},{letter:"P",city:"浦北县"},{letter:"P",city:"浦城县"},{letter:"P",city:"蒲城县"},{letter:"P",city:"普定县"},{letter:"P",city:"普洱市"},{letter:"P",city:"普格县"},{letter:"P",city:"浦江县"},{letter:"P",city:"蒲江县"},{letter:"P",city:"普兰县"},{letter:"P",city:"普宁市"},{letter:"P",city:"莆田市"},{letter:"P",city:"蒲县"},{letter:"P",city:"濮阳市"},{letter:"P",city:"濮阳县"},{letter:"Q",city:"迁安市"},{letter:"Q",city:"乾安县"},{letter:"Q",city:"黔东南苗族侗族自治州"},{letter:"Q",city:"前郭尔罗斯蒙古族自治县"},{letter:"Q",city:"潜江市"},{letter:"Q",city:"黔南布依族苗族自治州"},{letter:"Q",city:"潜山县"},{letter:"Q",city:"黔西县"},{letter:"Q",city:"迁西县"},{letter:"Q",city:"乾县"},{letter:"Q",city:"黔西南布依族苗族自治州"},{letter:"Q",city:"千阳县"},{letter:"Q",city:"巧家县"},{letter:"Q",city:"蕲春县"},{letter:"Q",city:"祁东县"},{letter:"Q",city:"启东市"},{letter:"Q",city:"且末县"},{letter:"Q",city:"齐河县"},{letter:"Q",city:"祁连县"},{letter:"Q",city:"祁门县"},{letter:"Q",city:"秦安县"},{letter:"Q",city:"庆安县"},{letter:"Q",city:"庆城县"},{letter:"Q",city:"青川县"},{letter:"Q",city:"青岛市"},{letter:"Q",city:"清丰县"},{letter:"Q",city:"青冈县"},{letter:"Q",city:"清河县"},{letter:"Q",city:"青河县"},{letter:"Q",city:"清涧县"},{letter:"Q",city:"清流县"},{letter:"Q",city:"晴隆县"},{letter:"Q",city:"青龙满族自治县"},{letter:"Q",city:"青神县"},{letter:"Q",city:"清水县"},{letter:"Q",city:"清水河县"},{letter:"Q",city:"青田县"},{letter:"Q",city:"青铜峡市"},{letter:"Q",city:"青县"},{letter:"Q",city:"清徐县"},{letter:"Q",city:"庆阳市"},{letter:"Q",city:"青阳县"},{letter:"Q",city:"清远市"},{letter:"Q",city:"庆元县"},{letter:"Q",city:"清原满族自治县"},{letter:"Q",city:"庆云县"},{letter:"Q",city:"清镇市"},{letter:"Q",city:"青州市"},{letter:"Q",city:"秦皇岛市"},{letter:"Q",city:"沁水县"},{letter:"Q",city:"沁县"},{letter:"Q",city:"沁阳市"},{letter:"Q",city:"沁源县"},{letter:"Q",city:"钦州市"},{letter:"Q",city:"琼海市"},{letter:"Q",city:"琼结县"},{letter:"Q",city:"邛崃市"},{letter:"Q",city:"琼中黎族苗族自治县"},{letter:"Q",city:"齐齐哈尔市"},{letter:"Q",city:"岐山县"},{letter:"Q",city:"奇台县"},{letter:"Q",city:"七台河市"},{letter:"Q",city:"丘北县"},{letter:"Q",city:"邱县"},{letter:"Q",city:"栖霞市"},{letter:"Q",city:"杞县"},{letter:"Q",city:"祁县"},{letter:"Q",city:"淇县"},{letter:"Q",city:"祁阳县"},{letter:"Q",city:"全椒县"},{letter:"Q",city:"全南县"},{letter:"Q",city:"泉州市"},{letter:"Q",city:"全州县"},{letter:"Q",city:"确山县"},{letter:"Q",city:"曲阜市"},{letter:"Q",city:"曲靖市"},{letter:"Q",city:"曲麻莱县"},{letter:"Q",city:"曲水县"},{letter:"Q",city:"曲松县"},{letter:"Q",city:"曲沃县"},{letter:"Q",city:"渠县"},{letter:"Q",city:"曲阳县"},{letter:"Q",city:"衢州市"},{letter:"Q",city:"曲周县"},{letter:"R",city:"壤塘县"},{letter:"R",city:"饶河县"},{letter:"R",city:"饶平县"},{letter:"R",city:"饶阳县"},{letter:"R",city:"仁布县"},{letter:"R",city:"仁化县"},{letter:"R",city:"仁怀市"},{letter:"R",city:"任丘市"},{letter:"R",city:"仁寿县"},{letter:"R",city:"任县"},{letter:"R",city:"日喀则市"},{letter:"R",city:"日土县"},{letter:"R",city:"日照市"},{letter:"R",city:"融安县"},{letter:"R",city:"荣成市"},{letter:"R",city:"容城县"},{letter:"R",city:"榕江县"},{letter:"R",city:"融水苗族自治县"},{letter:"R",city:"荣县"},{letter:"R",city:"容县"},{letter:"R",city:"汝城县"},{letter:"R",city:"如东县"},{letter:"R",city:"如皋市"},{letter:"R",city:"瑞安市"},{letter:"R",city:"瑞昌市"},{letter:"R",city:"芮城县"},{letter:"R",city:"瑞金市"},{letter:"R",city:"瑞丽市"},{letter:"R",city:"汝南县"},{letter:"R",city:"若尔盖县"},{letter:"R",city:"若羌县"},{letter:"R",city:"乳山市"},{letter:"R",city:"汝阳县"},{letter:"R",city:"乳源瑶族自治县"},{letter:"R",city:"汝州市"},{letter:"S",city:"萨嘎县"},{letter:"S",city:"萨迦县"},{letter:"S",city:"三都水族自治县"},{letter:"S",city:"桑日县"},{letter:"S",city:"桑植县"},{letter:"S",city:"三河市"},{letter:"S",city:"三江侗族自治县"},{letter:"S",city:"三门县"},{letter:"S",city:"三门峡市"},{letter:"S",city:"三明市"},{letter:"S",city:"三沙市"},{letter:"S",city:"三穗县"},{letter:"S",city:"三台县"},{letter:"S",city:"三亚市"},{letter:"S",city:"三原县"},{letter:"S",city:"色达县"},{letter:"S",city:"莎车县"},{letter:"S",city:"沙河市"},{letter:"S",city:"山丹县"},{letter:"S",city:"上蔡县"},{letter:"S",city:"商城县"},{letter:"S",city:"商都县"},{letter:"S",city:"上高县"},{letter:"S",city:"上海市"},{letter:"S",city:"上杭县"},{letter:"S",city:"商河县"},{letter:"S",city:"上栗县"},{letter:"S",city:"上林县"},{letter:"S",city:"商洛市"},{letter:"S",city:"商南县"},{letter:"S",city:"商丘市"},{letter:"S",city:"上饶市"},{letter:"S",city:"上饶县"},{letter:"S",city:"商水县"},{letter:"S",city:"上思县"},{letter:"S",city:"尚义县"},{letter:"S",city:"上犹县"},{letter:"S",city:"尚志市"},{letter:"S",city:"山南市"},{letter:"S",city:"鄯善县"},{letter:"S",city:"汕头市"},{letter:"S",city:"汕尾市"},{letter:"S",city:"单县"},{letter:"S",city:"山阳县"},{letter:"S",city:"山阴县"},{letter:"S",city:"邵东县"},{letter:"S",city:"韶关市"},{letter:"S",city:"韶山市"},{letter:"S",city:"邵武市"},{letter:"S",city:"绍兴市"},{letter:"S",city:"邵阳市"},{letter:"S",city:"邵阳县"},{letter:"S",city:"沙湾县"},{letter:"S",city:"沙县"},{letter:"S",city:"沙雅县"},{letter:"S",city:"沙洋县"},{letter:"S",city:"射洪县"},{letter:"S",city:"神池县"},{letter:"S",city:"嵊泗县"},{letter:"S",city:"嵊州市"},{letter:"S",city:"神木市"},{letter:"S",city:"神农架林区"},{letter:"S",city:"沈丘县"},{letter:"S",city:"莘县"},{letter:"S",city:"沈阳市"},{letter:"S",city:"深泽县"},{letter:"S",city:"申扎县"},{letter:"S",city:"深圳市"},{letter:"S",city:"深州市"},{letter:"S",city:"社旗县"},{letter:"S",city:"涉县"},{letter:"S",city:"歙县"},{letter:"S",city:"射阳县"},{letter:"S",city:"施秉县"},{letter:"S",city:"石城县"},{letter:"S",city:"施甸县"},{letter:"S",city:"什邡市"},{letter:"S",city:"石河子市"},{letter:"S",city:"石家庄市"},{letter:"S",city:"石林彝族自治县"},{letter:"S",city:"石楼县"},{letter:"S",city:"石门县"},{letter:"S",city:"石棉县"},{letter:"S",city:"石屏县"},{letter:"S",city:"石阡县"},{letter:"S",city:"石渠县"},{letter:"S",city:"石泉县"},{letter:"S",city:"石狮市"},{letter:"S",city:"石首市"},{letter:"S",city:"石台县"},{letter:"S",city:"始兴县"},{letter:"S",city:"十堰市"},{letter:"S",city:"石柱土家族自治县"},{letter:"S",city:"师宗县"},{letter:"S",city:"石嘴山市"},{letter:"S",city:"寿光市"},{letter:"S",city:"寿宁县"},{letter:"S",city:"寿县"},{letter:"S",city:"寿阳县"},{letter:"S",city:"双柏县"},{letter:"S",city:"双峰县"},{letter:"S",city:"双河市"},{letter:"S",city:"双湖县"},{letter:"S",city:"双江拉祜族佤族布朗族傣族自治县"},{letter:"S",city:"双辽市"},{letter:"S",city:"双牌县"},{letter:"S",city:"双鸭山市"},{letter:"S",city:"舒城县"},{letter:"S",city:"疏附县"},{letter:"S",city:"水城县"},{letter:"S",city:"水富县"},{letter:"S",city:"舒兰市"},{letter:"S",city:"疏勒县"},{letter:"S",city:"顺昌县"},{letter:"S",city:"顺平县"},{letter:"S",city:"朔州市"},{letter:"S",city:"沭阳县"},{letter:"S",city:"泗洪县"},{letter:"S",city:"四会市"},{letter:"S",city:"思南县"},{letter:"S",city:"四平市"},{letter:"S",city:"泗水县"},{letter:"S",city:"泗县"},{letter:"S",city:"泗阳县"},{letter:"S",city:"四子王旗"},{letter:"S",city:"嵩明县"},{letter:"S",city:"松潘县"},{letter:"S",city:"松桃苗族自治县"},{letter:"S",city:"松溪县"},{letter:"S",city:"嵩县"},{letter:"S",city:"松阳县"},{letter:"S",city:"松原市"},{letter:"S",city:"松滋市"},{letter:"S",city:"肃北蒙古族自治县"},{letter:"S",city:"绥滨县"},{letter:"S",city:"遂昌县"},{letter:"S",city:"遂川县"},{letter:"S",city:"绥德县"},{letter:"S",city:"绥芬河市"},{letter:"S",city:"绥化市"},{letter:"S",city:"绥江县"},{letter:"S",city:"绥棱县"},{letter:"S",city:"遂宁市"},{letter:"S",city:"绥宁县"},{letter:"S",city:"遂平县"},{letter:"S",city:"濉溪县"},{letter:"S",city:"遂溪县"},{letter:"S",city:"随县"},{letter:"S",city:"绥阳县"},{letter:"S",city:"绥中县"},{letter:"S",city:"随州市"},{letter:"S",city:"肃南裕固族自治县"},{letter:"S",city:"肃宁县"},{letter:"S",city:"苏尼特右旗"},{letter:"S",city:"苏尼特左旗"},{letter:"S",city:"孙吴县"},{letter:"S",city:"索县"},{letter:"S",city:"宿迁市"},{letter:"S",city:"宿松县"},{letter:"S",city:"苏州市"},{letter:"S",city:"宿州市"},{letter:"T",city:"塔城市"},{letter:"T",city:"塔城地区"},{letter:"T",city:"塔河县"},{letter:"T",city:"泰安市"},{letter:"T",city:"台安县"},{letter:"T",city:"太白县"},{letter:"T",city:"台北市"},{letter:"T",city:"太仓市"},{letter:"T",city:"太谷县"},{letter:"T",city:"太和县"},{letter:"T",city:"泰和县"},{letter:"T",city:"太湖县"},{letter:"T",city:"台江县"},{letter:"T",city:"太康县"},{letter:"T",city:"泰来县"},{letter:"T",city:"泰宁县"},{letter:"T",city:"太仆寺旗"},{letter:"T",city:"台前县"},{letter:"T",city:"台山市"},{letter:"T",city:"泰顺县"},{letter:"T",city:"泰兴市"},{letter:"T",city:"太原市"},{letter:"T",city:"台州市"},{letter:"T",city:"泰州市"},{letter:"T",city:"郯城县"},{letter:"T",city:"唐河县"},{letter:"T",city:"唐山市"},{letter:"T",city:"唐县"},{letter:"T",city:"汤阴县"},{letter:"T",city:"汤原县"},{letter:"T",city:"桃江县"},{letter:"T",city:"洮南市"},{letter:"T",city:"桃源县"},{letter:"T",city:"塔什库尔干塔吉克自治县"},{letter:"T",city:"特克斯县"},{letter:"T",city:"腾冲市"},{letter:"T",city:"藤县"},{letter:"T",city:"滕州市"},{letter:"T",city:"天长市"},{letter:"T",city:"天等县"},{letter:"T",city:"田东县"},{letter:"T",city:"天峨县"},{letter:"T",city:"天津市"},{letter:"T",city:"天峻县"},{letter:"T",city:"田林县"},{letter:"T",city:"天门市"},{letter:"T",city:"天全县"},{letter:"T",city:"天水市"},{letter:"T",city:"天台县"},{letter:"T",city:"田阳县"},{letter:"T",city:"天镇县"},{letter:"T",city:"天柱县"},{letter:"T",city:"天祝藏族自治县"},{letter:"T",city:"铁力市"},{letter:"T",city:"铁岭市"},{letter:"T",city:"铁岭县"},{letter:"T",city:"铁门关市"},{letter:"T",city:"桐柏县"},{letter:"T",city:"桐城市"},{letter:"T",city:"通城县"},{letter:"T",city:"铜川市"},{letter:"T",city:"通道侗族自治县"},{letter:"T",city:"同德县"},{letter:"T",city:"铜鼓县"},{letter:"T",city:"潼关县"},{letter:"T",city:"通海县"},{letter:"T",city:"通河县"},{letter:"T",city:"通化市"},{letter:"T",city:"通化县"},{letter:"T",city:"同江市"},{letter:"T",city:"通江县"},{letter:"T",city:"通辽市"},{letter:"T",city:"铜陵市"},{letter:"T",city:"铜陵县"},{letter:"T",city:"桐庐县"},{letter:"T",city:"铜仁市"},{letter:"T",city:"同仁县"},{letter:"T",city:"通山县"},{letter:"T",city:"通渭县"},{letter:"T",city:"桐乡市"},{letter:"T",city:"同心县"},{letter:"T",city:"通许县"},{letter:"T",city:"通榆县"},{letter:"T",city:"桐梓县"},{letter:"T",city:"团风县"},{letter:"T",city:"吐鲁番市"},{letter:"T",city:"图们市"},{letter:"T",city:"土默特右旗"},{letter:"T",city:"土默特左旗"},{letter:"T",city:"图木舒克市"},{letter:"T",city:"屯昌县"},{letter:"T",city:"屯留县"},{letter:"T",city:"托克托县"},{letter:"T",city:"托克逊县"},{letter:"T",city:"托里县"},{letter:"T",city:"突泉县"},{letter:"W",city:"瓦房店市"},{letter:"W",city:"万安县"},{letter:"W",city:"旺苍县"},{letter:"W",city:"望都县"},{letter:"W",city:"望江县"},{letter:"W",city:"望奎县"},{letter:"W",city:"望谟县"},{letter:"W",city:"汪清县"},{letter:"W",city:"万年县"},{letter:"W",city:"万宁市"},{letter:"W",city:"万荣县"},{letter:"W",city:"万源市"},{letter:"W",city:"万载县"},{letter:"W",city:"围场满族蒙古族自治县"},{letter:"W",city:"潍坊市"},{letter:"W",city:"威海市"},{letter:"W",city:"卫辉市"},{letter:"W",city:"尉犁县"},{letter:"W",city:"渭南市"},{letter:"W",city:"威宁彝族回族苗族自治县"},{letter:"W",city:"微山县"},{letter:"W",city:"巍山彝族回族自治县"},{letter:"W",city:"尉氏县"},{letter:"W",city:"魏县"},{letter:"W",city:"威县"},{letter:"W",city:"维西傈僳族自治县"},{letter:"W",city:"威信县"},{letter:"W",city:"威远县"},{letter:"W",city:"渭源县"},{letter:"W",city:"文安县"},{letter:"W",city:"文昌市"},{letter:"W",city:"文成县"},{letter:"W",city:"汶川县"},{letter:"W",city:"瓮安县"},{letter:"W",city:"翁牛特旗"},{letter:"W",city:"翁源县"},{letter:"W",city:"温岭市"},{letter:"W",city:"温泉县"},{letter:"W",city:"文山市"},{letter:"W",city:"汶上县"},{letter:"W",city:"文山壮族苗族自治州"},{letter:"W",city:"文水县"},{letter:"W",city:"温宿县"},{letter:"W",city:"闻喜县"},{letter:"W",city:"温县"},{letter:"W",city:"文县"},{letter:"W",city:"温州市"},{letter:"W",city:"涡阳县"},{letter:"W",city:"武安市"},{letter:"W",city:"吴堡县"},{letter:"W",city:"五常市"},{letter:"W",city:"武城县"},{letter:"W",city:"吴川市"},{letter:"W",city:"武川县"},{letter:"W",city:"务川仡佬族苗族自治县"},{letter:"W",city:"五大连池市"},{letter:"W",city:"无棣县"},{letter:"W",city:"武定县"},{letter:"W",city:"五峰土家族自治县"},{letter:"W",city:"武冈市"},{letter:"W",city:"舞钢市"},{letter:"W",city:"武功县"},{letter:"W",city:"乌海市"},{letter:"W",city:"武汉市"},{letter:"W",city:"五河县"},{letter:"W",city:"芜湖市"},{letter:"W",city:"芜湖县"},{letter:"W",city:"五华县"},{letter:"W",city:"无极县"},{letter:"W",city:"五家渠市"},{letter:"W",city:"乌兰县"},{letter:"W",city:"乌兰察布市"},{letter:"W",city:"乌兰浩特市"},{letter:"W",city:"乌拉特后旗"},{letter:"W",city:"乌拉特前旗"},{letter:"W",city:"乌拉特中旗"},{letter:"W",city:"五莲县"},{letter:"W",city:"乌鲁木齐市"},{letter:"W",city:"乌鲁木齐县"},{letter:"W",city:"武宁县"},{letter:"W",city:"武平县"},{letter:"W",city:"吴起县"},{letter:"W",city:"乌恰县"},{letter:"W",city:"武强县"},{letter:"W",city:"吴桥县"},{letter:"W",city:"巫山县"},{letter:"W",city:"武山县"},{letter:"W",city:"武胜县"},{letter:"W",city:"乌审旗"},{letter:"W",city:"乌什县"},{letter:"W",city:"乌苏市"},{letter:"W",city:"五台县"},{letter:"W",city:"无为县"},{letter:"W",city:"武威市"},{letter:"W",city:"无锡市"},{letter:"W",city:"巫溪县"},{letter:"W",city:"武乡县"},{letter:"W",city:"武宣县"},{letter:"W",city:"武穴市"},{letter:"W",city:"舞阳县"},{letter:"W",city:"武义县"},{letter:"W",city:"武邑县"},{letter:"W",city:"武夷山市"},{letter:"W",city:"五原县"},{letter:"W",city:"婺源县"},{letter:"W",city:"五寨县"},{letter:"W",city:"武陟县"},{letter:"W",city:"五指山市"},{letter:"W",city:"吴忠市"},{letter:"W",city:"梧州市"},{letter:"X",city:"夏河县"},{letter:"X",city:"峡江县"},{letter:"X",city:"夏津县"},{letter:"X",city:"厦门市"},{letter:"X",city:"西安市"},{letter:"X",city:"咸丰县"},{letter:"X",city:"项城市"},{letter:"X",city:"襄城县"},{letter:"X",city:"乡城县"},{letter:"X",city:"襄汾县"},{letter:"X",city:"香港特别行政区"},{letter:"X",city:"香格里拉市"},{letter:"X",city:"香河县"},{letter:"X",city:"镶黄旗"},{letter:"X",city:"乡宁县"},{letter:"X",city:"象山县"},{letter:"X",city:"响水县"},{letter:"X",city:"湘潭市"},{letter:"X",city:"湘潭县"},{letter:"X",city:"湘乡市"},{letter:"X",city:"湘西土家族苗族自治州"},{letter:"X",city:"襄阳市"},{letter:"X",city:"湘阴县"},{letter:"X",city:"襄垣县"},{letter:"X",city:"祥云县"},{letter:"X",city:"象州县"},{letter:"X",city:"仙居县"},{letter:"X",city:"咸宁市"},{letter:"X",city:"仙桃市"},{letter:"X",city:"献县"},{letter:"X",city:"咸阳市"},{letter:"X",city:"仙游县"},{letter:"X",city:"孝昌县"},{letter:"X",city:"孝感市"},{letter:"X",city:"小金县"},{letter:"X",city:"萧县"},{letter:"X",city:"孝义市"},{letter:"X",city:"霞浦县"},{letter:"X",city:"夏县"},{letter:"X",city:"夏邑县"},{letter:"X",city:"西昌市"},{letter:"X",city:"西充县"},{letter:"X",city:"西畴县"},{letter:"X",city:"淅川县"},{letter:"X",city:"喜德县"},{letter:"X",city:"谢通门县"},{letter:"X",city:"西丰县"},{letter:"X",city:"息烽县"},{letter:"X",city:"西和县"},{letter:"X",city:"西华县"},{letter:"X",city:"西吉县"},{letter:"X",city:"西林县"},{letter:"X",city:"锡林郭勒盟"},{letter:"X",city:"锡林浩特市"},{letter:"X",city:"西盟佤族自治县"},{letter:"X",city:"新安县"},{letter:"X",city:"新巴尔虎右旗"},{letter:"X",city:"新巴尔虎左旗"},{letter:"X",city:"新宾满族自治县"},{letter:"X",city:"新蔡县"},{letter:"X",city:"新昌县"},{letter:"X",city:"忻城县"},{letter:"X",city:"信丰县"},{letter:"X",city:"新丰县"},{letter:"X",city:"兴安盟"},{letter:"X",city:"新干县"},{letter:"X",city:"兴安县"},{letter:"X",city:"兴城市"},{letter:"X",city:"兴国县"},{letter:"X",city:"兴海县"},{letter:"X",city:"兴和县"},{letter:"X",city:"兴化市"},{letter:"X",city:"兴隆县"},{letter:"X",city:"兴宁市"},{letter:"X",city:"兴平市"},{letter:"X",city:"兴仁县"},{letter:"X",city:"兴山县"},{letter:"X",city:"邢台市"},{letter:"X",city:"邢台县"},{letter:"X",city:"行唐县"},{letter:"X",city:"兴文县"},{letter:"X",city:"兴县"},{letter:"X",city:"荥阳市"},{letter:"X",city:"兴业县"},{letter:"X",city:"兴义市"},{letter:"X",city:"新河县"},{letter:"X",city:"新和县"},{letter:"X",city:"新化县"},{letter:"X",city:"新晃侗族自治县"},{letter:"X",city:"西宁市"},{letter:"X",city:"辛集市"},{letter:"X",city:"新绛县"},{letter:"X",city:"新津县"},{letter:"X",city:"新乐市"},{letter:"X",city:"新龙县"},{letter:"X",city:"新密市"},{letter:"X",city:"新民市"},{letter:"X",city:"新宁县"},{letter:"X",city:"新平彝族傣族自治县"},{letter:"X",city:"新邵县"},{letter:"X",city:"新泰市"},{letter:"X",city:"新田县"},{letter:"X",city:"新县"},{letter:"X",city:"新乡市"},{letter:"X",city:"新乡县"},{letter:"X",city:"新兴县"},{letter:"X",city:"信阳市"},{letter:"X",city:"新野县"},{letter:"X",city:"信宜市"},{letter:"X",city:"新沂市"},{letter:"X",city:"新余市"},{letter:"X",city:"新源县"},{letter:"X",city:"新郑市"},{letter:"X",city:"忻州市"},{letter:"X",city:"雄县"},{letter:"X",city:"西平县"},{letter:"X",city:"西沙群岛"},{letter:"X",city:"西双版纳傣族自治州"},{letter:"X",city:"浠水县"},{letter:"X",city:"习水县"},{letter:"X",city:"休宁县"},{letter:"X",city:"秀山土家族苗族自治县"},{letter:"X",city:"修水县"},{letter:"X",city:"修文县"},{letter:"X",city:"修武县"},{letter:"X",city:"岫岩满族自治县"},{letter:"X",city:"西乌珠穆沁旗"},{letter:"X",city:"西峡县"},{letter:"X",city:"息县"},{letter:"X",city:"隰县"},{letter:"X",city:"西乡县"},{letter:"X",city:"昔阳县"},{letter:"X",city:"宣城市"},{letter:"X",city:"宣恩县"},{letter:"X",city:"宣汉县"},{letter:"X",city:"宣化县"},{letter:"X",city:"宣威市"},{letter:"X",city:"许昌市"},{letter:"X",city:"寻甸回族彝族自治县"},{letter:"X",city:"循化撒拉族自治县"},{letter:"X",city:"逊克县"},{letter:"X",city:"寻乌县"},{letter:"X",city:"浚县"},{letter:"X",city:"旬阳县"},{letter:"X",city:"旬邑县"},{letter:"X",city:"溆浦县"},{letter:"X",city:"徐闻县"},{letter:"X",city:"盱眙县"},{letter:"X",city:"叙永县"},{letter:"X",city:"徐州市"},{letter:"Y",city:"雅安市"},{letter:"Y",city:"亚东县"},{letter:"Y",city:"雅江县"},{letter:"Y",city:"牙克石市"},{letter:"Y",city:"延安市"},{letter:"Y",city:"延边朝鲜族自治州"},{letter:"Y",city:"盐边县"},{letter:"Y",city:"延长县"},{letter:"Y",city:"盐城市"},{letter:"Y",city:"盐池县"},{letter:"Y",city:"延川县"},{letter:"Y",city:"漾濞彝族自治县"},{letter:"Y",city:"阳城县"},{letter:"Y",city:"阳春市"},{letter:"Y",city:"阳高县"},{letter:"Y",city:"阳谷县"},{letter:"Y",city:"阳江市"},{letter:"Y",city:"阳曲县"},{letter:"Y",city:"阳泉市"},{letter:"Y",city:"阳山县"},{letter:"Y",city:"阳朔县"},{letter:"Y",city:"阳西县"},{letter:"Y",city:"洋县"},{letter:"Y",city:"阳新县"},{letter:"Y",city:"阳信县"},{letter:"Y",city:"阳原县"},{letter:"Y",city:"扬中市"},{letter:"Y",city:"扬州市"},{letter:"Y",city:"沿河土家族自治县"},{letter:"Y",city:"延吉市"},{letter:"Y",city:"延津县"},{letter:"Y",city:"盐津县"},{letter:"Y",city:"鄢陵县"},{letter:"Y",city:"炎陵县"},{letter:"Y",city:"焉耆回族自治县"},{letter:"Y",city:"盐山县"},{letter:"Y",city:"铅山县"},{letter:"Y",city:"砚山县"},{letter:"Y",city:"偃师市"},{letter:"Y",city:"延寿县"},{letter:"Y",city:"烟台市"},{letter:"Y",city:"盐亭县"},{letter:"Y",city:"盐源县"},{letter:"Y",city:"姚安县"},{letter:"Y",city:"叶城县"},{letter:"Y",city:"叶县"},{letter:"Y",city:"依安县"},{letter:"Y",city:"宜宾市"},{letter:"Y",city:"宜宾县"},{letter:"Y",city:"宜昌市"},{letter:"Y",city:"宜城市"},{letter:"Y",city:"翼城县"},{letter:"Y",city:"伊川县"},{letter:"Y",city:"宜川县"},{letter:"Y",city:"宜春市"},{letter:"Y",city:"伊春市"},{letter:"Y",city:"宜都市"},{letter:"Y",city:"宜丰县"},{letter:"Y",city:"宜黄县"},{letter:"Y",city:"伊金霍洛旗"},{letter:"Y",city:"宜君县"},{letter:"Y",city:"依兰县"},{letter:"Y",city:"宜良县"},{letter:"Y",city:"彝良县"},{letter:"Y",city:"伊犁哈萨克自治州"},{letter:"Y",city:"仪陇县"},{letter:"Y",city:"义马市"},{letter:"Y",city:"易门县"},{letter:"Y",city:"沂南县"},{letter:"Y",city:"银川市"},{letter:"Y",city:"应城市"},{letter:"Y",city:"英德市"},{letter:"Y",city:"盈江县"},{letter:"Y",city:"荥经县"},{letter:"Y",city:"英吉沙县"},{letter:"Y",city:"营口市"},{letter:"Y",city:"营山县"},{letter:"Y",city:"英山县"},{letter:"Y",city:"颍上县"},{letter:"Y",city:"鹰潭市"},{letter:"Y",city:"应县"},{letter:"Y",city:"伊宁市"},{letter:"Y",city:"伊宁县"},{letter:"Y",city:"印江土家族苗族自治县"},{letter:"Y",city:"沂水县"},{letter:"Y",city:"伊通满族自治县"},{letter:"Y",city:"义乌市"},{letter:"Y",city:"伊吾县"},{letter:"Y",city:"易县"},{letter:"Y",city:"义县"},{letter:"Y",city:"黟县"},{letter:"Y",city:"宜兴市"},{letter:"Y",city:"益阳市"},{letter:"Y",city:"弋阳县"},{letter:"Y",city:"宜阳县"},{letter:"Y",city:"沂源县"},{letter:"Y",city:"宜章县"},{letter:"Y",city:"仪征市"},{letter:"Y",city:"永安市"},{letter:"Y",city:"永昌县"},{letter:"Y",city:"永城市"},{letter:"Y",city:"永春县"},{letter:"Y",city:"永德县"},{letter:"Y",city:"永登县"},{letter:"Y",city:"永丰县"},{letter:"Y",city:"永福县"},{letter:"Y",city:"永和县"},{letter:"Y",city:"永济市"},{letter:"Y",city:"永吉县"},{letter:"Y",city:"永嘉县"},{letter:"Y",city:"永靖县"},{letter:"Y",city:"永康市"},{letter:"Y",city:"永年县"},{letter:"Y",city:"永宁县"},{letter:"Y",city:"永平县"},{letter:"Y",city:"永清县"},{letter:"Y",city:"永仁县"},{letter:"Y",city:"永善县"},{letter:"Y",city:"永胜县"},{letter:"Y",city:"永寿县"},{letter:"Y",city:"永顺县"},{letter:"Y",city:"永泰县"},{letter:"Y",city:"永新县"},{letter:"Y",city:"永兴县"},{letter:"Y",city:"永修县"},{letter:"Y",city:"永州市"},{letter:"Y",city:"尤溪县"},{letter:"Y",city:"攸县"},{letter:"Y",city:"酉阳土家族苗族自治县"},{letter:"Y",city:"友谊县"},{letter:"Y",city:"右玉县"},{letter:"Y",city:"远安县"},{letter:"Y",city:"沅江市"},{letter:"Y",city:"元江哈尼族彝族傣族自治县"},{letter:"Y",city:"沅陵县"},{letter:"Y",city:"元谋县"},{letter:"Y",city:"原平市"},{letter:"Y",city:"垣曲县"},{letter:"Y",city:"元氏县"},{letter:"Y",city:"原阳县"},{letter:"Y",city:"元阳县"},{letter:"Y",city:"虞城县"},{letter:"Y",city:"禹城市"},{letter:"Y",city:"于都县"},{letter:"Y",city:"岳池县"},{letter:"Y",city:"岳普湖县"},{letter:"Y",city:"乐清市"},{letter:"Y",city:"岳西县"},{letter:"Y",city:"越西县"},{letter:"Y",city:"岳阳市"},{letter:"Y",city:"岳阳县"},{letter:"Y",city:"余干县"},{letter:"Y",city:"玉环市"},{letter:"Y",city:"余江县"},{letter:"Y",city:"玉林市"},{letter:"Y",city:"榆林市"},{letter:"Y",city:"玉龙纳西族自治县"},{letter:"Y",city:"玉门市"},{letter:"Y",city:"裕民县"},{letter:"Y",city:"郁南县"},{letter:"Y",city:"运城市"},{letter:"Y",city:"郓城县"},{letter:"Y",city:"云浮市"},{letter:"Y",city:"云和县"},{letter:"Y",city:"筠连县"},{letter:"Y",city:"云龙县"},{letter:"Y",city:"云梦县"},{letter:"Y",city:"郧西县"},{letter:"Y",city:"勋县"},{letter:"Y",city:"云县"},{letter:"Y",city:"云霄县"},{letter:"Y",city:"云阳县"},{letter:"Y",city:"玉屏侗族自治县"},{letter:"Y",city:"余庆县"},{letter:"Y",city:"玉山县"},{letter:"Y",city:"榆社县"},{letter:"Y",city:"榆树市"},{letter:"Y",city:"玉树市"},{letter:"Y",city:"玉树藏族自治州"},{letter:"Y",city:"鱼台县"},{letter:"Y",city:"玉田县"},{letter:"Y",city:"于田县"},{letter:"Y",city:"玉溪市"},{letter:"Y",city:"蔚县"},{letter:"Y",city:"盂县"},{letter:"Y",city:"余姚市"},{letter:"Y",city:"榆中县"},{letter:"Y",city:"禹州市"},{letter:"Z",city:"杂多县"},{letter:"Z",city:"赞皇县"},{letter:"Z",city:"枣强县"},{letter:"Z",city:"枣阳市"},{letter:"Z",city:"枣庄市"},{letter:"Z",city:"泽库县"},{letter:"Z",city:"泽普县"},{letter:"Z",city:"泽州县"},{letter:"Z",city:"札达县"},{letter:"Z",city:"扎赉特旗"},{letter:"Z",city:"扎兰屯市"},{letter:"Z",city:"扎鲁特旗"},{letter:"Z",city:"扎囊县"},{letter:"Z",city:"张北县"},{letter:"Z",city:"张家川回族自治县"},{letter:"Z",city:"张家港市"},{letter:"Z",city:"张家界市"},{letter:"Z",city:"张家口市"},{letter:"Z",city:"漳平市"},{letter:"Z",city:"漳浦县"},{letter:"Z",city:"樟树市"},{letter:"Z",city:"彰武县"},{letter:"Z",city:"漳县"},{letter:"Z",city:"张掖市"},{letter:"Z",city:"漳州市"},{letter:"Z",city:"长子县"},{letter:"Z",city:"湛江市"},{letter:"Z",city:"诏安县"},{letter:"Z",city:"肇东市"},{letter:"Z",city:"昭觉县"},{letter:"Z",city:"昭平县"},{letter:"Z",city:"肇庆市"},{letter:"Z",city:"昭苏县"},{letter:"Z",city:"昭通市"},{letter:"Z",city:"赵县"},{letter:"Z",city:"招远市"},{letter:"Z",city:"肇源县"},{letter:"Z",city:"肇州县"},{letter:"Z",city:"柘城县"},{letter:"Z",city:"镇安县"},{letter:"Z",city:"镇巴县"},{letter:"Z",city:"贞丰县"},{letter:"Z",city:"正安县"},{letter:"Z",city:"正定县"},{letter:"Z",city:"政和县"},{letter:"Z",city:"正蓝旗"},{letter:"Z",city:"正宁县"},{letter:"Z",city:"正镶白旗"},{letter:"Z",city:"正阳县"},{letter:"Z",city:"郑州市"},{letter:"Z",city:"镇江市"},{letter:"Z",city:"镇康县"},{letter:"Z",city:"镇赉县"},{letter:"Z",city:"镇宁布依族苗族自治县"},{letter:"Z",city:"镇平县"},{letter:"Z",city:"镇坪县"},{letter:"Z",city:"镇雄县"},{letter:"Z",city:"镇远县"},{letter:"Z",city:"镇原县"},{letter:"Z",city:"镇沅彝族哈尼族拉祜族自治县"},{letter:"Z",city:"柘荣县"},{letter:"Z",city:"志丹县"},{letter:"Z",city:"治多县"},{letter:"Z",city:"枝江市"},{letter:"Z",city:"芷江侗族自治县"},{letter:"Z",city:"织金县"},{letter:"Z",city:"仲巴县"},{letter:"Z",city:"中方县"},{letter:"Z",city:"中江县"},{letter:"Z",city:"中牟县"},{letter:"Z",city:"中宁县"},{letter:"Z",city:"中山市"},{letter:"Z",city:"钟山县"},{letter:"Z",city:"中沙群岛的岛礁及其海域"},{letter:"Z",city:"中卫市"},{letter:"Z",city:"忠县"},{letter:"Z",city:"钟祥市"},{letter:"Z",city:"中阳县"},{letter:"Z",city:"周口市"},{letter:"Z",city:"周宁县"},{letter:"Z",city:"舟曲县"},{letter:"Z",city:"舟山市"},{letter:"Z",city:"周至县"},{letter:"Z",city:"庄河市"},{letter:"Z",city:"庄浪县"},{letter:"Z",city:"诸城市"},{letter:"Z",city:"珠海市"},{letter:"Z",city:"诸暨市"},{letter:"Z",city:"驻马店市"},{letter:"Z",city:"准格尔旗"},{letter:"Z",city:"涿鹿县"},{letter:"Z",city:"卓尼县"},{letter:"Z",city:"涿州市"},{letter:"Z",city:"卓资县"},{letter:"Z",city:"竹山县"},{letter:"Z",city:"竹溪县"},{letter:"Z",city:"株洲市"},{letter:"Z",city:"株洲县"},{letter:"Z",city:"淄博市"},{letter:"Z",city:"子长县"},{letter:"Z",city:"自贡市"},{letter:"Z",city:"秭归县"},{letter:"Z",city:"紫金县"},{letter:"Z",city:"梓潼县"},{letter:"Z",city:"资溪县"},{letter:"Z",city:"资兴市"},{letter:"Z",city:"资阳市"},{letter:"Z",city:"紫阳县"},{letter:"Z",city:"资源县"},{letter:"Z",city:"紫云苗族布依族自治县"},{letter:"Z",city:"资中县"},{letter:"Z",city:"子洲县"},{letter:"Z",city:"枞阳县"},{letter:"Z",city:"邹城市"},{letter:"Z",city:"邹平县"},{letter:"Z",city:"遵化市"},{letter:"Z",city:"遵义市"},{letter:"Z",city:"左贡县"},{letter:"Z",city:"左权县"},{letter:"Z",city:"柞水县"},{letter:"Z",city:"左云县"}],Kc={data:()=>({nowCity:"",locationStatus:"定位成功",letter:["A","B","C","D","E","F","G","H","J","K","L","M","N","P","Q","R","S","T","W","X","Y","Z"],hotCityList:[],allCityList:[],scrollId:"",animation:{},cityList:[]}),onLoad(e){this.nowCity="北京",this.getCityList()},methods:{letterTap(e){o("log","at pages/auth/cityChoose.vue:80",e),"热"==this.letter[e]?this.scrollId="re":this.scrollId=this.letter[e]},cityInputListener(e){let t=e.detail.value,a=this.allCityList,n=[];for(let o=0;o<a.length;o++)-1==a[o].city.indexOf(t)&&a[o].letter!=t.toUpperCase()||n.push(a[o]);""==t?this.formatCityData(this.cityList):this.formatCityData(n)},locationImageClick(){var e=this;this.animation=uni.createAnimation(),this.animation.rotate(360).step(),this.animation=this.animation.export(),this.locationStatus="定位中...",uni.getLocation({geocode:!0,success:t=>{null!=t.address&&(e.nowCity=t.address.city,e.locationStatus="定位成功")},fail:t=>{e.nowCity="获取定位信息失败",o("log","at pages/auth/cityChoose.vue:123","获取定位信息失败")}})},getCityList(){this.cityList=jc,this.formatCityData(jc)},formatCityData:function(e){for(let t=0;t<e.length;t++)0==t?e[t].show=!0:e[t].letter!=e[t-1].letter&&(e[t].show=!0,e[t-1].last=!0),1==e.length&&(e[0].last=!0),e.show=!1;this.allCityList=e},cityItemClick(e){var t=this.allCityList[e];o("log","at pages/auth/cityChoose.vue:156",t),uni.setStorageSync("verifyAddress",t.city),uni.navigateBack({delta:1})}}};const Yc=ie(Kc,[["render",function(t,a,n,o,i,r){return e.openBlock(),e.createElementBlock("view",{class:"introScroll"},[e.createElementVNode("view",{class:"topView"},[e.createElementVNode("view",{class:"nowCityTextTipsView"},[e.createElementVNode("view",{class:"nowLocationCity"},[e.createTextVNode("当前地区："),e.createElementVNode("text",null,"北京市")]),e.createElementVNode("view",{class:"address"},[e.createElementVNode("image",{src:Ro,class:"img"}),e.createTextVNode("自动定位 ")])])]),e.createElementVNode("view",{class:"city_right"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.letter,((t,a)=>(e.openBlock(),e.createElementBlock("text",{class:"letter_item",key:a,onClick:e.withModifiers((e=>r.letterTap(a)),["stop"])},e.toDisplayString(t),9,["onClick"])))),128))]),e.createElementVNode("scroll-view",{"scroll-with-animation":"true",class:"cityListView","scroll-y":"true","scroll-into-view":i.scrollId,"show-scrollbar":!1},[e.createElementVNode("view",{class:"forCityView"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.allCityList,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"forCityItem",key:a},[t.show?(e.openBlock(),e.createElementBlock("view",{key:0,id:t.letter,class:"letterItemFirst"},e.toDisplayString(t.letter),9,["id"])):e.createCommentVNode("",!0),e.createElementVNode("text",{onClick:e=>r.cityItemClick(a),class:"itemCityContent"},e.toDisplayString(t.city),9,["onClick"]),t.last?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("view",{key:1,class:"line"}))])))),128))])],8,["scroll-into-view"])])}]]),Wc={WECHAT:"wxpay",ALIPAY:"alipay"},Jc={SUCCESS:"success",FAILED:"failed",CANCELED:"canceled",UNKNOWN:"unknown"};function Zc(){const t=e.ref({}),a=e.ref(!1),n=e.ref(Jc.UNKNOWN),i=()=>new Promise(((e,a)=>{Object.keys(t.value).length?e(t.value):plus.payment.getChannels((a=>{const n={};a.forEach((e=>{n[e.id]=e})),t.value=n,e(n)}),(e=>{o("error","at utils/usePayment.js:62","获取支付渠道失败:",e),a(new Error(`获取支付渠道失败: ${e.message||e.code}`))}))})),r=e=>t.value[e]||null,s=(e,t)=>{var a;const{code:n,message:o}=e,i={[-1]:"支付失败，请重试",[-2]:"用户取消支付",[-3]:"支付操作未完成",[-4]:"支付渠道不可用",[-5]:"网络异常，请检查网络"};return(null==(a={[Wc.WECHAT]:{[-100]:"微信未安装",[-101]:"微信版本不支持",[-102]:"微信支付参数错误",[-103]:"微信登录授权失败"},[Wc.ALIPAY]:{[-100]:"支付宝未安装",[-101]:"支付宝版本不支持",[-102]:"支付宝支付参数错误",[-103]:"支付宝账号未登录"}}[t])?void 0:a[n])||i[n]||o||`支付错误: 错误码=${n}`},l=(e,t)=>new Promise(((a,i)=>{if(!t)return void i(new Error("订单信息不能为空"));const l=r(e);l?plus.payment.request(l,t,(e=>{let t=e.rawdata;try{t="string"==typeof t?JSON.parse(t):t}catch(Ft){o("warn","at utils/usePayment.js:142","支付返回数据解析失败:",Ft)}n.value=Jc.SUCCESS,a({status:Jc.SUCCESS,data:t,originalResult:e})}),(t=>{o("error","at utils/usePayment.js:152",`[${e}]支付失败:`,t);let a=Jc.FAILED;-2===t.code&&(a=Jc.CANCELED),n.value=a,i({status:a,error:t,message:s(t,e)})})):i(new Error(`未找到支付渠道: ${e}，请先初始化渠道`))}));return{isLoading:a,paymentStatus:n,paymentChannels:t,pay:async(e,t)=>{if(a.value)o("warn","at utils/usePayment.js:221","有正在进行的支付，请稍后再试");else{a.value=!0;try{return n.value=Jc.UNKNOWN,r(e)||await i(),await l(e,t)}catch(s){throw s}finally{a.value=!1}}},wechatPay:async e=>{if(a.value)o("warn","at utils/usePayment.js:176","有正在进行的支付，请稍后再试");else{a.value=!0;try{return r(Wc.WECHAT)||await i(),await l(Wc.WECHAT,e)}finally{a.value=!1}}},alipay:async e=>{if(o("log","at utils/usePayment.js:196",e,"196 - - - - - "),a.value)o("warn","at utils/usePayment.js:199","有正在进行的支付，请稍后再试");else{a.value=!0;try{return r(Wc.ALIPAY)||await i(),await l(Wc.ALIPAY,e)}finally{a.value=!1}}},initPaymentChannels:async()=>{try{await i(),o("log","at utils/usePayment.js:247","支付渠道初始化成功:",Object.keys(t.value))}catch(e){throw o("error","at utils/usePayment.js:249","支付渠道初始化失败:",e),e}},isChannelAvailable:e=>!!r(e),getAvailableChannels:()=>Object.keys(t.value),PAYMENT_CHANNELS:Wc,PAYMENT_STATUS:Jc}}const Xc={__name:"payment",props:{distinguish:{type:String,default:"consultation"}},setup(t){e.useCssVars((e=>({"69b2c3c1":n.value,"3ff1fc08":c.value,"537afd22":d.value})));const a=ae(),n=e.ref(a.statusBarHeight+"px"),r=e.ref(1),c=e.ref("#35ca955c"),u=e.ref("select-green"),d=e.ref("#34a76f"),m=e.ref(!1),p=e.ref(""),h=e.ref(""),v=e.ref({counselorId:"",consultType:null,date:null,serveCategoryId:3,startTime:null,endTime:null,duration:null,price:null}),g=t;e.watch((()=>g.distinguish),(e=>{"consultation"==e?(c.value="#35ca955c",u.value="select-green",d.value="#34a76f"):(c.value="#ffbb4166",u.value="select-yellow",d.value="#EB9516")}),{immediate:!0,deep:!0}),s((()=>{}));const f=e.ref(0),y=e=>{f.value=e.detail.scrollTop},_=()=>{uni.navigateBack({delta:1})},k=e.ref(""),E=e.ref([]),x=e.ref(""),N=e.ref("agree"),w=e.ref("service"),C=e.ref(null),M=e=>{w.value="service","disagree"==e&&C.value.open("center"),N.value=e},S=()=>{C.value.close()},I=e.ref("weixin"),T=e=>{I.value=e},D=()=>{uni.navigateTo({url:"/pages/payment/order/listener-order"})},b=()=>{uni.switchTab({url:"/pages/index/index"})},{isLoading:V,paymentStatus:A,initPaymentChannels:L,wechatPay:R,alipay:O,PAYMENT_STATUS:B}=Zc(),U=async e=>{try{const e="weixin"==I.value?cc:uc,t="weixin"==I.value?"wxPay":"aliPay",a=await vc(v.value),{data:n}=await e({orderId:a.data.orderSn,amount:a.data.amount,type:t,status:1});"weixin"==I.value?F(n.orderString):G(n.orderString,a.data.orderSn)}catch(t){message.value=t.message||"支付宝支付失败"}},G=async(e,t)=>{try{await O(e);q(t)}catch(a){message.value=a.message||"支付宝支付失败"}},F=async e=>{try{(await R(e)).status===B.SUCCESS&&(message.value="微信支付成功")}catch(t){message.value=t.message||"微信支付失败"}},q=async e=>{try{2==(await hc({orderSn:e})).data.status&&(w.value="success",C.value.open("center"))}catch(t){message.value=t.message||"支付失败"}};return l((e=>{const{date:t,startTime:a,endTime:n}=JSON.parse(e.time);v.value.date=Xo(`${t} ${n}`),v.value.startTime=Xo(`${t} ${a}`),v.value.endTime=Xo(`${t} ${n}`);const{to:i,avatar:r,name:s,id:l}=e;p.value=r,h.value=s,v.value.counselorId=l,o("log","at pages/payment/payment.vue:391",v.value),(async()=>{try{const e={current:1,size:10,title:"咨询服务须知"};let{data:t}=await P(e);k.value=t.records[0].content}catch(e){o("log","at pages/payment/payment.vue:248",e)}})(),(async e=>{let{data:t}=await yi(e);t.map(((e,t)=>{e.selected=0===t}));const{quoteAmount:a,serviceDuration:n,serviceQuoteType:o}=t[0];v.value.consultType=o,v.value.price=a,v.value.serveCategoryId=t[0].id,v.value.duration=n,E.value=t,x.value=t[0].title})(i)})),(t,a)=>{const n=i(e.resolveDynamicComponent("uni-icons"),re),o=i(e.resolveDynamicComponent("uni-nav-bar"),Di),s=i(e.resolveDynamicComponent("uni-popup"),vi);return e.openBlock(),e.createElementBlock("view",{class:"settled-box"},[e.createElementVNode("view",{class:"header"},[e.createVNode(o,{class:e.normalizeClass([f.value>15?"scrollClass":"","header-bar"]),backgroundColor:"rgba(255,255,255,0)",border:!1,title:"确认订单"},{left:e.withCtx((()=>[e.createVNode(n,{type:"left",size:"24",onClick:_})])),_:1},8,["class"])]),e.createElementVNode("scroll-view",{"scroll-y":"",onScroll:y,style:{height:"100vh"},"show-scrollbar":!1},[e.createElementVNode("view",{class:"consultation-content"},[e.createElementVNode("view",{class:"notice-bar"},[e.createVNode(n,{type:"sound",size:"20",color:"#F87171"}),e.createElementVNode("view",{class:"notice-text"}," 为确保沟通顺畅，请提前确认设备是否开启对应麦克风权限>> ")]),e.createElementVNode("view",{class:"user-info-section"},[e.createElementVNode("image",{src:p.value,class:"user-avatar"},null,8,["src"]),e.createElementVNode("view",{class:"user-details"},[e.createElementVNode("view",{class:"user-name"},e.toDisplayString(h.value),1),e.createElementVNode("view",{class:"user-expertise"},e.toDisplayString(x.value),1)])]),e.createElementVNode("view",{class:"appointment-info"},[e.createElementVNode("view",{class:"info-item"},[e.createElementVNode("view",{class:"info-label"},"预约时间"),e.createElementVNode("view",{class:"info-value"},e.toDisplayString(e.unref(Qo)(v.value.date)),1)]),e.createElementVNode("view",{class:"info-item"},[e.createElementVNode("view",{class:"info-label"},"咨询方式"),e.createElementVNode("view",{class:"consultation-methods"},[e.createElementVNode("view",{class:"method-item"},[e.createVNode(n,{type:"videocam",size:"20",color:1==r.value?"#34A76F":"#959596"},null,8,["color"]),e.createElementVNode("text",{class:"method-text",style:e.normalizeStyle({color:1==r.value?"":"#666"})},"视频",4),e.withDirectives(e.createElementVNode("image",{style:{left:"60rpx"},src:$i},null,512),[[e.vShow,1==r.value]])]),e.createElementVNode("view",{class:"method-item"},[e.createVNode(n,{type:"mic",size:"20",color:2==r.value?"#34A76F":"#959596"},null,8,["color"]),e.createElementVNode("text",{class:"method-text",style:e.normalizeStyle({color:2==r.value?"":"#666"})},"语音",4),e.withDirectives(e.createElementVNode("image",{style:{right:"160rpx"},src:$i},null,512),[[e.vShow,2==r.value]])]),e.createElementVNode("view",{class:"method-item"},[e.createVNode(n,{type:"compose",size:"20",color:3==r.value?"#34A76F":"#959596"},null,8,["color"]),e.createElementVNode("text",{class:"method-text",style:e.normalizeStyle({color:3==r.value?"":"#666"})},"文字",4),e.withDirectives(e.createElementVNode("image",{style:{right:"10rpx"},src:$i},null,512),[[e.vShow,3==r.value]])])])])]),e.createElementVNode("view",{class:"consultation-plan-section"},[e.createElementVNode("view",{class:"plan-title"},"咨询方案"),e.createElementVNode("view",{class:"plan-list-container"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(E.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["plan-item",{"plan-item--active":t.selected}]),key:a,onClick:e=>((e,t)=>{x.value=e.title,E.value.forEach(((e,a)=>{e.selected=a===t})),r.value=e.serviceQuoteType;const{createTime:a,quoteAmount:n,serviceDuration:o,serviceQuoteType:i}=e;v.value.consultType=i,v.value.price=n,v.value.duration=o})(t,a)},[e.createElementVNode("view",{class:"plan-item-content"},[e.createElementVNode("view",{class:"plan-info"},[e.createElementVNode("image",{src:t.selected?`/static/auth/${u.value}.png`:"/static/auth/not-selected.png",class:"plan-select-icon"},null,8,["src"]),e.createElementVNode("view",{class:"plan-name"},"【"+e.toDisplayString(t.title)+"】"+e.toDisplayString(t.serviceDuration)+"分钟",1)]),e.createElementVNode("view",{class:"plan-price"},"￥"+e.toDisplayString(t.quoteAmount),1)])],10,["onClick"])))),128))])]),e.createElementVNode("view",{class:"consultation-plan-section"},[e.createElementVNode("view",{class:"plan-title"},"服务须知"),e.createElementVNode("view",{class:"please-note"},[e.createElementVNode("view",{class:"note"},[e.createElementVNode("view",null,"这里是内容，请仔细阅读了解是否存在以下描述的情况"),e.createElementVNode("view",{class:"note-text",style:e.normalizeStyle({"max-height":m.value?"none":"200rpx"})},[e.createElementVNode("view",{innerHTML:k.value},null,8,["innerHTML"])],4),e.createElementVNode("view",{class:"text-display",onClick:a[0]||(a[0]=e=>m.value=!m.value)},[e.createVNode(n,{type:m.value?"up":"down",size:"20",color:"#959596"},null,8,["type"])]),e.createElementVNode("view",{class:"clause"},[e.createElementVNode("view",{class:"clause-text disagree",onClick:a[1]||(a[1]=e=>M("disagree"))},[e.createElementVNode("image",{src:`/static/auth/${"disagree"==N.value?u.value:"not-selected"}.png`,class:"plan-select-icon"},null,8,["src"]),e.createElementVNode("view",{class:e.normalizeClass("disagree"==N.value?"clause-txt":"")},"存在以上情况",2)]),e.createElementVNode("view",{class:"clause-text agree",onClick:a[3]||(a[3]=e=>M("agree"))},[e.createElementVNode("image",{src:`/static/auth/${"agree"==N.value?u.value:"not-selected"}.png`,class:"plan-select-icon"},null,8,["src"]),e.createElementVNode("view",{class:e.normalizeClass("agree"==N.value?"clause-txt":"")},[e.createTextVNode("不存在以上情况，且同意"),e.createElementVNode("text",{style:e.normalizeStyle({color:d.value}),onClick:a[2]||(a[2]=e=>{return t="用户下单服务协议",void uni.navigateTo({url:`/pages/webview/webview?type=${t}`});var t})},"《用户下单服务协议》",4)],2)])])])])]),e.createElementVNode("view",{class:"consultation-plan-section"},[e.createElementVNode("view",{class:"plan-title"},"支付方式"),e.createElementVNode("view",{class:"please-note"},[e.createElementVNode("view",{class:"note-pay",onClick:a[4]||(a[4]=e=>T("weixin"))},[e.createElementVNode("view",{class:"pay-item"},[e.createElementVNode("image",{src:"http://cdn.yupao.com/pc/images/zgp/recharge-pay-wechatimg.png"}),e.createElementVNode("view",null,"微信支付")]),e.createElementVNode("image",{src:`/static/auth/${"weixin"==I.value?u.value:"not-selected"}.png`,style:{width:"25rpx",height:"25rpx"}},null,8,["src"])]),e.createElementVNode("view",{class:"note-pay",onClick:a[5]||(a[5]=e=>T("alipay"))},[e.createElementVNode("view",{class:"pay-item"},[e.createElementVNode("image",{src:"http://cdn.yupao.com/pc/images/zgp/recharge-pay-alipayimg.png"}),e.createElementVNode("view",null,"支付宝支付")]),e.createElementVNode("image",{src:`/static/auth/${"alipay"==I.value?u.value:"not-selected"}.png`,style:{width:"25rpx",height:"25rpx"}},null,8,["src"])])])])])],32),e.createElementVNode("view",{class:"recharge-pay-footer"},[e.createElementVNode("view",{style:{display:"flex","margin-left":"20rpx"}},[e.createElementVNode("view",{class:"recharge-pay-price"},[e.createTextVNode("¥"+e.toDisplayString(v.value.price),1),e.createElementVNode("text",null,"元/"+e.toDisplayString(v.value.duration)+"分钟",1)])]),e.createElementVNode("view",{style:{display:"flex","margin-right":"20rpx"}},[e.createElementVNode("button",{disabled:"disagree"==N.value,class:"recharge-sure-price",onClick:U},"提交订单",8,["disabled"])])]),e.createVNode(s,{ref_key:"popup",ref:C,type:"center",animation:!1},{default:e.withCtx((()=>["service"==w.value?(e.openBlock(),e.createElementBlock("view",{key:0,class:"popup-container"},[e.createElementVNode("view",{class:"popup-title"},[e.createVNode(n,{type:"notification-filled",size:"40",color:"#35CA95"})]),e.createElementVNode("view",{class:"popup-content"}," 抱歉，您存在的情况不适于咨询， 建议您选择更专业治疗，以便于给您提 供更好的服务。 "),e.createElementVNode("view",{class:"popup-btn"},[e.createElementVNode("view",{class:"popup-btn-text",onClick:S},"知道了")])])):e.createCommentVNode("",!0),"success"==w.value?(e.openBlock(),e.createElementBlock("view",{key:1,class:"popup-order"},[e.createElementVNode("view",{class:"popup-order-header"},[e.createVNode(n,{"custom-prefix":"iconfont",type:"icon-smile-full",size:"30",color:"#f7db79",class:"icon"}),e.createElementVNode("view",{class:"popup-order-title"},[e.createElementVNode("view",null,"恭喜您"),e.createElementVNode("view",null,"订单已成功支付！")])]),e.createElementVNode("view",{class:"popup-order-btn"},[e.createElementVNode("view",{onClick:D},"查看订单"),e.createElementVNode("view",null,"|"),e.createElementVNode("view",{onClick:b},"返回首页")])])):e.createCommentVNode("",!0)])),_:1},512)])}}},Qc=ie(Xc,[["__scopeId","data-v-7df956a1"]]),eu={__name:"payment-records",props:{distinguish:{type:String,default:"1"}},setup(t){e.useCssVars((e=>({"6203d1de":n.value,"28e8ad68":d.value})));const a=ae(),n=e.ref(a.statusBarHeight+"px"),r=e.ref(1),c=e.ref("#35ca955c"),u=e.ref("select-green"),d=e.ref("#34a76f"),m=e.ref(!1),p=e.ref(""),h=e.ref(""),v=e.ref({listenerId:null,consultType:null,voiceStartTime:null,duration:null,price:null}),g=t;l((e=>{const{id:t,userId:a,avatar:n,name:o}=e;p.value=n,h.value=o,v.value.listenerId=t,_(a)}));const f=e.ref([]),y=e.ref(""),_=async e=>{let{data:t}=await _i(e);t.map(((e,t)=>{e.selected=0===t}));const{createTime:a,quoteAmount:n,serviceDuration:o,serviceQuoteType:i}=t[0];v.value.consultType=i,v.value.price=n,v.value.voiceStartTime=Xo(a),v.value.duration=o,f.value=t,y.value=t[0].title};e.watch((()=>g.distinguish),(e=>{"consultation"==e?(c.value="#35ca955c",u.value="select-green",d.value="#34a76f"):(c.value="#ffbb4166",u.value="select-yellow",d.value="#EB9516")}),{immediate:!0,deep:!0}),s((()=>{}));const k=e.ref(0),E=e=>{k.value=e.detail.scrollTop},x=()=>{uni.navigateBack({delta:1})},N=e.ref(""),w=e.ref("agree"),C=e.ref("service"),M=e.ref(null),S=e=>{C.value="service","disagree"==e&&M.value.open("center"),w.value=e},I=()=>{M.value.close()},T=()=>{uni.navigateTo({url:"/pages/payment/order/listener-order"})},D=()=>{uni.switchTab({url:"/pages/index/index"})},b=e.ref("weixin"),V=e=>{b.value=e},{isLoading:L,paymentStatus:R,initPaymentChannels:O,wechatPay:B,alipay:U,PAYMENT_STATUS:G}=Zc(),F=async e=>{try{const e="weixin"==b.value?cc:uc,t="weixin"==b.value?"wxPay":"aliPay",a=await((e,t={})=>A.post("/api/order/order/createListen",e,t))(v.value),{data:n}=await e({orderId:a.data.orderSn,amount:a.data.amount,type:t,status:1});"weixin"==b.value?z(n.orderString):q(n.orderString,a.data.orderSn)}catch(t){o("log","at pages/payment/payment-records.vue:336",t)}},q=async(e,t)=>{try{await U(e);H(t)}catch(a){message.value=a.message||"支付宝支付失败"}},z=async e=>{try{(await B(e)).status===G.SUCCESS&&(message.value="微信支付成功")}catch(t){message.value=t.message||"微信支付失败"}},H=async e=>{try{2==(await hc({orderSn:e})).data.status&&(C.value="success",M.value.open("center"))}catch(t){message.value=t.message||"支付失败"}};return e.onMounted((()=>{(async()=>{try{const e={current:1,size:10,title:"倾听服务须知"};let{data:t}=await P(e);N.value=t.records[0].content}catch(e){o("log","at pages/payment/payment-records.vue:258",e)}})()})),(t,a)=>{const n=i(e.resolveDynamicComponent("uni-icons"),re),o=i(e.resolveDynamicComponent("uni-nav-bar"),Di),s=i(e.resolveDynamicComponent("uni-popup"),vi);return e.openBlock(),e.createElementBlock("view",{class:"settled-box"},[e.createElementVNode("view",{class:"header"},[e.createVNode(o,{class:e.normalizeClass([k.value>15?"scrollClass":"","header-bar"]),backgroundColor:"rgba(255,255,255,0)",border:!1,title:"确认订单"},{left:e.withCtx((()=>[e.createVNode(n,{type:"left",size:"24",onClick:x})])),_:1},8,["class"])]),e.createElementVNode("scroll-view",{"scroll-y":"",onScroll:E,style:{height:"100vh"},"show-scrollbar":!1},[e.createElementVNode("view",{class:"consultation-content"},[e.createElementVNode("view",{class:"notice-bar"},[e.createVNode(n,{type:"sound",size:"20",color:"#F87171"}),e.createElementVNode("view",{class:"notice-text"}," 为确保沟通顺畅，请提前确认设备是否开启对应麦克风权限>> ")]),e.createElementVNode("view",{class:"user-info-section"},[e.createElementVNode("image",{src:p.value,class:"user-avatar"},null,8,["src"]),e.createElementVNode("view",{class:"user-details"},[e.createElementVNode("view",{class:"user-name"},e.toDisplayString(h.value),1),e.createElementVNode("view",{class:"user-expertise"},e.toDisplayString(y.value),1)])]),e.createElementVNode("view",{class:"appointment-info"},[e.createElementVNode("view",{class:"info-item"},[e.createElementVNode("view",{class:"info-label"},"咨询方式"),e.createElementVNode("view",{class:"consultation-methods"},[e.createElementVNode("view",{class:e.normalizeClass(["method-item",1==r.value?"method-item-active":""])},[e.createVNode(n,{type:"compose",size:"20",color:1==r.value?"#EB9516":"#959596"},null,8,["color"]),e.createElementVNode("text",{class:"method-text"},"视频")],2),e.createElementVNode("view",{class:e.normalizeClass(["method-item",2==r.value?"method-item-active":""])},[e.createVNode(n,{type:"mic",size:"20",color:2==r.value?"#EB9516":"#959596"},null,8,["color"]),e.createElementVNode("text",{class:"method-text"},"语音")],2),e.createElementVNode("view",{class:e.normalizeClass(["method-item",3==r.value?"method-item-active":""])},[e.createVNode(n,{type:"compose",size:"20",color:3==r.value?"#EB9516":"#959596"},null,8,["color"]),e.createElementVNode("text",{class:"method-text"},"文字")],2)])])]),e.createElementVNode("view",{class:"consultation-plan-section"},[e.createElementVNode("view",{class:"plan-title"},"咨询方案"),e.createElementVNode("view",{class:"plan-list-container"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(f.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["plan-item",{"plan-item--active":t.selected}]),key:a,onClick:e=>((e,t)=>{f.value.forEach(((e,a)=>{e.selected=a===t})),r.value=e.serviceQuoteType;const{createTime:a,quoteAmount:n,serviceDuration:o,serviceQuoteType:i}=e;v.value.consultType=i,v.value.price=n,v.value.voiceStartTime=Xo(a),v.value.duration=o,y.value=e.title})(t,a)},[e.createElementVNode("view",{class:"plan-item-content"},[e.createElementVNode("view",{class:"plan-info"},[e.createElementVNode("image",{src:t.selected?`/static/auth/${u.value}.png`:"/static/auth/not-selected.png",class:"plan-select-icon"},null,8,["src"]),e.createElementVNode("view",{class:"plan-name"},"【"+e.toDisplayString(t.title)+"】"+e.toDisplayString(t.serviceDuration)+"分钟",1)]),e.createElementVNode("view",{class:"plan-price"},"￥"+e.toDisplayString(t.quoteAmount),1)])],10,["onClick"])))),128))])]),e.createElementVNode("view",{class:"consultation-plan-section"},[e.createElementVNode("view",{class:"plan-title"},"服务须知"),e.createElementVNode("view",{class:"please-note"},[e.createElementVNode("view",{class:"note"},[e.createElementVNode("view",null,"这里是内容，请仔细阅读了解是否存在以下描述的情况"),e.createElementVNode("view",{class:"note-text",style:e.normalizeStyle({"max-height":m.value?"none":"200rpx"})},[e.createElementVNode("view",{innerHTML:N.value},null,8,["innerHTML"])],4),e.createElementVNode("view",{class:"text-display",onClick:a[0]||(a[0]=e=>m.value=!m.value)},[e.createVNode(n,{type:m.value?"up":"down",size:"20",color:"#959596"},null,8,["type"])]),e.createElementVNode("view",{class:"clause"},[e.createElementVNode("view",{class:"clause-text disagree",onClick:a[1]||(a[1]=e=>S("disagree"))},[e.createElementVNode("image",{src:`/static/auth/${"disagree"==w.value?u.value:"not-selected"}.png`,class:"plan-select-icon"},null,8,["src"]),e.createElementVNode("view",{class:e.normalizeClass("disagree"==w.value?"clause-txt":"")},"存在以上情况",2)]),e.createElementVNode("view",{class:"clause-text agree",onClick:a[3]||(a[3]=e=>S("agree"))},[e.createElementVNode("image",{src:`/static/auth/${"agree"==w.value?u.value:"not-selected"}.png`,class:"plan-select-icon"},null,8,["src"]),e.createElementVNode("view",{class:e.normalizeClass("agree"==w.value?"clause-txt":"")},[e.createTextVNode("不存在以上情况，且同意"),e.createElementVNode("text",{style:e.normalizeStyle({color:d.value}),onClick:a[2]||(a[2]=e=>{return t="用户下单服务协议",void uni.navigateTo({url:`/pages/webview/webview?type=${t}`});var t})},"《用户下单服务协议》",4)],2)])])])])]),e.createElementVNode("view",{class:"consultation-plan-section",style:{"margin-bottom":"100rpx"}},[e.createElementVNode("view",{class:"plan-title"},"支付方式"),e.createElementVNode("view",{class:"please-note"},[e.createElementVNode("view",{class:"note-pay",onClick:a[4]||(a[4]=e=>V("weixin"))},[e.createElementVNode("view",{class:"pay-item"},[e.createElementVNode("image",{src:"http://cdn.yupao.com/pc/images/zgp/recharge-pay-wechatimg.png"}),e.createElementVNode("view",null,"微信支付")]),e.createElementVNode("image",{src:`/static/auth/${"weixin"==b.value?u.value:"not-selected"}.png`,style:{width:"25rpx",height:"25rpx"}},null,8,["src"])]),e.createElementVNode("view",{class:"note-pay",onClick:a[5]||(a[5]=e=>V("alipay"))},[e.createElementVNode("view",{class:"pay-item"},[e.createElementVNode("image",{src:"http://cdn.yupao.com/pc/images/zgp/recharge-pay-alipayimg.png"}),e.createElementVNode("view",null,"支付宝支付")]),e.createElementVNode("image",{src:`/static/auth/${"alipay"==b.value?u.value:"not-selected"}.png`,style:{width:"25rpx",height:"25rpx"}},null,8,["src"])])])])])],32),e.createElementVNode("view",{class:"recharge-pay-footer"},[e.createElementVNode("view",{style:{display:"flex","margin-left":"20rpx"}},[e.createElementVNode("view",{class:"recharge-pay-price"},[e.createTextVNode("¥"+e.toDisplayString(v.value.price),1),e.createElementVNode("text",null,"元/分钟")])]),e.createElementVNode("view",{style:{display:"flex","margin-right":"20rpx"}},[e.createElementVNode("button",{disabled:"disagree"==w.value,class:"recharge-sure-price",onClick:F},"提交订单",8,["disabled"])])]),e.createVNode(s,{ref_key:"popup",ref:M,type:"center",animation:!1},{default:e.withCtx((()=>["service"==C.value?(e.openBlock(),e.createElementBlock("view",{key:0,class:"popup-container"},[e.createElementVNode("view",{class:"popup-title"},[e.createVNode(n,{type:"notification-filled",size:"40",color:"#35CA95"})]),e.createElementVNode("view",{class:"popup-content"}," 抱歉，您存在的情况不适于咨询， 建议您选择更专业治疗，以便于给您提 供更好的服务。 "),e.createElementVNode("view",{class:"popup-btn"},[e.createElementVNode("view",{class:"popup-btn-text",onClick:I},"知道了")])])):e.createCommentVNode("",!0),"success"==C.value?(e.openBlock(),e.createElementBlock("view",{key:1,class:"popup-order"},[e.createElementVNode("view",{class:"popup-order-header"},[e.createVNode(n,{"custom-prefix":"iconfont",type:"icon-smile-full",size:"30",color:"#f7db79",class:"icon"}),e.createElementVNode("view",{class:"popup-order-title"},[e.createElementVNode("view",null,"恭喜您"),e.createElementVNode("view",null,"订单已成功支付！")])]),e.createElementVNode("view",{class:"popup-order-btn"},[e.createElementVNode("view",{onClick:T},"查看订单"),e.createElementVNode("view",null,"|"),e.createElementVNode("view",{onClick:D},"返回首页")])])):e.createCommentVNode("",!0)])),_:1},512)])}}},tu=ie(eu,[["__scopeId","data-v-87b77821"]]),au="/static/index/warnings.png",nu={__name:"order-details",setup(t){e.useCssVars((e=>({"5d8dcf1e":n.value})));const a=ae(),n=e.ref(a.statusBarHeight+"px"),r=e.ref({}),c=e.ref({}),u=e.ref({}),d=e=>{switch(e){case 1:return"待付款";case 2:return"待咨询";case 3:return"待评价";case 4:return"已完成";case 5:return"交易关闭";case 6:return"退款";default:return""}};l((e=>{c.value=JSON.parse(e.type),r.value=JSON.parse(e.status),o("log","at pages/payment/order-details.vue:204",c.value,r.value),m(r.value.orderSn);(1==e.colorType?ai:Ko)({id:id}).then((e=>{u.value=e.data}))}));const m=async e=>{try{const{data:t}=await((e,t={})=>A.get(`/api/order/order/detail?orderSn=${e}`,t))(e);o("log","at pages/payment/order-details.vue:216",t)}catch(t){o("log","at pages/payment/order-details.vue:219",t)}};s((()=>{}));const p=e.ref(0),h=e=>{p.value=e.detail.scrollTop},v=()=>{uni.navigateBack({delta:1})},g=()=>{uni.navigateTo({url:"/pages/settings/complaint?id="+r.value.teacherUserId})},f=()=>{uni.navigateTo({url:`/pages/payment/order/evaluation-order?order=${JSON.stringify(r.value)}&colorType=1`})},y=()=>{const{teacherUserId:e,teacherName:t,teacherAvatar:a}=r.value;uni.navigateTo({url:`/pages/message/private-chat?to=${e}&name=${t}&avatar=${a}&purchase=true`})},_=e.ref("");(async()=>{try{const e={current:1,size:10,title:"咨询服务须知"};let{data:t}=await articleByType(e);_.value=t.records[0].content}catch(e){o("log","at pages/payment/order-details.vue:274",e)}})();const k=e.ref(null),E=e=>{k.value.open("center")},x=()=>{uni.navigateTo({url:`/pages/payment/order/refund-order?order=${JSON.stringify(r.value)}`}),k.value.close()},N=e.ref("weixin"),{isLoading:w,paymentStatus:C,initPaymentChannels:M,wechatPay:S,alipay:I,PAYMENT_STATUS:T}=Zc(),D=async e=>{try{const e="weixin"==N.value?cc:uc,t="weixin"==N.value?"wxPay":"aliPay",a=await vc(orderData.value),{data:n}=await e({orderId:a.data.orderSn,amount:a.data.amount,type:t,status:1});"weixin"==N.value?V(n.orderString):b(n.orderString,a.data.orderSn)}catch(t){message.value=t.message||"支付宝支付失败"}},b=async(e,t)=>{try{await I(e);L(t)}catch(a){message.value=a.message||"支付宝支付失败"}},V=async e=>{try{(await S(e)).status===T.SUCCESS&&(message.value="微信支付成功")}catch(t){message.value=t.message||"微信支付失败"}},L=async e=>{try{2==(await hc({orderSn:e})).data.status&&(popupType.value="success",k.value.open("center"))}catch(t){message.value=t.message||"支付失败"}};return(t,a)=>{const n=i(e.resolveDynamicComponent("uni-icons"),re),o=i(e.resolveDynamicComponent("uni-nav-bar"),Di),s=i(e.resolveDynamicComponent("uni-popup"),vi);return e.openBlock(),e.createElementBlock("view",{class:"settled-box"},[e.createElementVNode("view",{class:"header"},[e.createVNode(o,{class:e.normalizeClass([p.value>15?"scrollClass":"","header-bar"]),backgroundColor:"rgba(255,255,255,0)",border:!1,title:"订单详情"},{left:e.withCtx((()=>[e.createVNode(n,{type:"left",size:"24",onClick:v})])),_:1},8,["class"])]),e.createElementVNode("scroll-view",{"scroll-y":"",onScroll:h,style:{height:"100vh"},"show-scrollbar":!1},[e.createElementVNode("view",{class:"consultation-content"},[e.createElementVNode("view",{class:"notice-bar"},[e.createVNode(n,{type:"sound",size:"20",color:"#F87171"}),e.createElementVNode("view",{class:"notice-text"}," 为确保沟通顺畅，请提前确认设备是否开启对应麦克风权限>> ")]),1==r.value.status||2==r.value.status?(e.openBlock(),e.createElementBlock("view",{key:0,class:"appointment-info"},[e.createElementVNode("view",{class:"info-item",style:{"margin-top":"0"}},[e.createElementVNode("view",{class:"info-label",style:{color:"#FF8F1F"}},[e.createVNode(n,{"custom-prefix":"iconfont",type:"icon-deng",size:"18",color:"#FF8F1F",class:"icon"}),e.createTextVNode(" "+e.toDisplayString(d(r.value.status)),1)])]),e.createElementVNode("view",{class:"info-item"},[1==r.value.status?(e.openBlock(),e.createElementBlock("view",{key:0,class:"info-label info-text"},[e.createTextVNode("订单自动释放剩余 "),e.createElementVNode("text",null,e.toDisplayString(r.value.remainingDuration),1)])):e.createCommentVNode("",!0),2==r.value.status?(e.openBlock(),e.createElementBlock("view",{key:1,class:"info-label info-text"},[e.createTextVNode("订单服务时长剩余 "),e.createElementVNode("text",null,e.toDisplayString(r.value.remainingDuration),1)])):e.createCommentVNode("",!0)])])):e.createCommentVNode("",!0),e.createElementVNode("view",{class:"user-info-section"},[e.createElementVNode("view",{class:"user-details"},[e.createElementVNode("view",{class:"user-name"},[e.createElementVNode("image",{src:r.value.teacherAvatar,class:"user-avatar"},null,8,["src"]),e.createElementVNode("view",{class:"user-info"},[e.createElementVNode("view",null,e.toDisplayString(r.value.teacherName),1),e.createElementVNode("view",{class:"user-expertise"},[e.createElementVNode("text",null,"123"+e.toDisplayString(u.value.platformHours)+"+",1),e.createTextVNode(" 小时经验 "),e.createElementVNode("text",null,"13"+e.toDisplayString(u.value.years)+"年",1),e.createTextVNode(" 从业 "),e.createElementVNode("text",null,"2"+e.toDisplayString(u.value.commentCount)+"+",1),e.createTextVNode(" 评价 ")])])]),e.createElementVNode("view",{class:"user-but",onClick:y},"咨询历史")]),e.createVNode(n,{type:"chatboxes",color:"#35ca95",size:"30",onClick:y})]),e.createElementVNode("view",{class:"appointment-info"},[e.createElementVNode("view",{class:"info-title"},"服务信息"),e.createElementVNode("view",{class:"info-item"},[e.createElementVNode("view",{class:"info-label"},"购买时长："),e.createElementVNode("view",{class:"consultation-methods"},[e.createElementVNode("text",{class:"method-text"},e.toDisplayString(r.value.buyDuration),1)])]),e.createElementVNode("view",{class:"info-item"},[e.createElementVNode("view",{class:"info-label"},"服务方式："),e.createElementVNode("view",{class:"consultation-methods"},["视频"==r.value.consultTypeDesc?(e.openBlock(),e.createElementBlock("view",{key:0,class:"method-item"},[e.createVNode(n,{type:"videocam",size:"20",color:"#34A76F"}),e.createElementVNode("text",{class:"method-text"},"视频")])):e.createCommentVNode("",!0),"语音"==r.value.consultTypeDesc?(e.openBlock(),e.createElementBlock("view",{key:1,class:"method-item"},[e.createVNode(n,{type:"mic",size:"20",color:"#34A76F"}),e.createElementVNode("text",{class:"method-text"},"语音")])):e.createCommentVNode("",!0),"文本"==r.value.consultTypeDesc?(e.openBlock(),e.createElementBlock("view",{key:2,class:"method-item"},[e.createVNode(n,{type:"mic",size:"20",color:"#34A76F"}),e.createElementVNode("text",{class:"method-text"},"文本")])):e.createCommentVNode("",!0)])]),e.createElementVNode("view",{class:"info-item"},[e.createElementVNode("view",{class:"info-label"},"预约时间："),e.createElementVNode("view",{class:"info-value"},e.toDisplayString(r.value.reserveDate),1)])]),e.createElementVNode("view",{class:"appointment-info"},[e.createElementVNode("view",{class:"info-title"},[e.createElementVNode("view",null,"订单信息"),2==r.value.status?(e.openBlock(),e.createElementBlock("view",{key:0,class:"info-refund",onClick:E},"我要退款")):e.createCommentVNode("",!0)]),e.createElementVNode("view",{class:"info-item"},[e.createElementVNode("view",{class:"info-label"},"订单编号"),e.createElementVNode("view",{class:"consultation-methods",style:{display:"block"}},[e.createElementVNode("image",{src:lc,style:{width:"22rpx",height:"22rpx","margin-right":"10rpx"},onClick:a[0]||(a[0]=e=>{return t=r.value.orderSn,void uni.setClipboardData({data:t,success(e){uni.showToast({title:"已复制"})}});var t})}),e.createElementVNode("text",{class:"method-text"},e.toDisplayString(r.value.orderSn),1)])]),e.createElementVNode("view",{class:"info-item"},[e.createElementVNode("view",{class:"info-label"},"创建时间"),e.createElementVNode("view",{class:"info-value"},e.toDisplayString(r.value.createTime),1)]),e.createElementVNode("view",{class:"info-item"},[e.createElementVNode("view",{class:"info-label"},"订单金额"),e.createElementVNode("view",{class:"info-value"},"￥"+e.toDisplayString(r.value.orderMoney),1)]),e.createElementVNode("view",{class:"info-item"},[e.createElementVNode("view",{class:"info-label"},"支付方式"),e.createElementVNode("view",{class:"consultation-methods"},["wxpay"==r.value.payType?(e.openBlock(),e.createElementBlock("view",{key:0,class:"method-item"},[e.createElementVNode("image",{src:"http://cdn.yupao.com/pc/images/zgp/recharge-pay-wechatimg.png"}),e.createElementVNode("text",{class:"method-text"},"微信支付")])):(e.openBlock(),e.createElementBlock("view",{key:1,class:"method-item"},[e.createElementVNode("image",{src:"http://cdn.yupao.com/pc/images/zgp/recharge-pay-alipayimg.png"}),e.createElementVNode("text",{class:"method-text"},"支付宝支付")]))])])]),e.createElementVNode("view",{class:"appointment-info"},[e.createElementVNode("view",{class:"info-protocol"},[e.createElementVNode("view",null,[e.createTextVNode("查看"),e.createElementVNode("text",{style:{color:"#34a76f"},onClick:a[1]||(a[1]=e=>{return t="用户下单服务协议",void uni.navigateTo({url:`/pages/webview/webview?type=${t}`});var t})},"《用户下单服务协议》")]),e.createElementVNode("view",{style:{color:"#898686"},onClick:g},"投诉")])]),1==r.value.status?(e.openBlock(),e.createElementBlock("view",{key:1,onClick:D,class:"appointment-but"},"立即支付")):e.createCommentVNode("",!0),2==r.value.status?(e.openBlock(),e.createElementBlock("view",{key:2,onClick:y,class:"appointment-but"},"立即联系")):e.createCommentVNode("",!0),3==r.value.status?(e.openBlock(),e.createElementBlock("view",{key:3,onClick:f,class:"appointment-but"},"立即评价")):e.createCommentVNode("",!0)])],32),e.createVNode(s,{ref_key:"popup",ref:k,type:"center",animation:!1},{default:e.withCtx((()=>[e.createElementVNode("view",{class:"popup-container"},[e.createElementVNode("view",{class:"popup-title"},[e.createElementVNode("view",null,"退款须知"),e.createElementVNode("image",{src:au,style:{width:"33rpx",height:"33rpx","margin-right":"10rpx"}})]),e.createElementVNode("view",{class:"popup-content"},[e.createElementVNode("view",{class:"list-item"},"订单剩余未服务时长在有效期内可退"),e.createElementVNode("view",{class:"list-item"},"如拨打过且通话时长>3分钟，根据实际使用时长，按照原价进行扣减后退费;"),e.createElementVNode("view",{class:"list-item"},"文字倾诉订单下单后未回复的，自动退款;")]),e.createElementVNode("view",{class:"popup-btn"},[e.createElementVNode("view",{class:"popup-btn-text",onClick:x},"我知道了")])])])),_:1},512)])}}},ou=ie(nu,[["__scopeId","data-v-fb2fb0c9"]]);const iu=ie({name:"u-checkbox",emits:["update:modelValue","input","change"],props:{value:{type:Boolean,default:!1},modelValue:{type:Boolean,default:!1},name:{type:[String,Number],default:""},shape:{type:String,default:""},disabled:{type:[String,Boolean],default:""},labelDisabled:{type:[String,Boolean],default:""},activeColor:{type:String,default:""},iconSize:{type:[String,Number],default:""},labelSize:{type:[String,Number],default:""},size:{type:[String,Number],default:""},indeterminate:{type:Boolean,default:!1}},data:()=>({parentDisabled:!1,newParams:{},parent:null}),created(){this.parent=this.$u.$parent.call(this,"u-checkbox-group"),this.parent&&this.parent.children.push(this)},computed:{valueCom(){return this.modelValue},isDisabled(){return""!==this.disabled?this.disabled:!!this.parent&&this.parent.disabled},isLabelDisabled(){return""!==this.labelDisabled?this.labelDisabled:!!this.parent&&this.parent.labelDisabled},checkboxSize(){return this.size?this.size:this.parent?this.parent.size:34},checkboxIconSize(){return this.iconSize?this.iconSize:this.parent?this.parent.iconSize:20},elActiveColor(){return this.activeColor?this.activeColor:this.parent?this.parent.activeColor:"primary"},elShape(){return this.shape?this.shape:this.parent?this.parent.shape:"square"},iconStyle(){let e={};return this.elActiveColor&&this.valueCom&&!this.isDisabled&&(e.borderColor=this.elActiveColor,e.backgroundColor=this.elActiveColor),e.width=this.$u.addUnit(this.checkboxSize),e.height=this.$u.addUnit(this.checkboxSize),e},iconColor(){return this.indeterminate||this.valueCom?"#ffffff":"transparent"},iconClass(){let e=[];return e.push("u-checkbox__icon-wrap--"+this.elShape),1==this.valueCom&&e.push("u-checkbox__icon-wrap--checked"),this.isDisabled&&e.push("u-checkbox__icon-wrap--disabled"),this.valueCom&&this.isDisabled&&e.push("u-checkbox__icon-wrap--disabled--checked"),!0===this.indeterminate&&e.push("u-checkbox__icon-wrap--indeterminate"),e.join(" ")},checkboxStyle(){let e={};return this.parent&&this.parent.width&&(e.width=this.parent.width,e.flex=`0 0 ${this.parent.width}`),this.parent&&this.parent.wrap&&(e.width="100%",e.flex="0 0 100%"),e}},mounted(){this._emitEvent()},watch:{valueCom:{handler:function(e,t){this._emitEvent()}}},methods:{_emitEvent(){let e={value:this.valueCom,name:this.name};this.parent&&this.parent.emitEvent&&this.parent.emitEvent(e)},onClickLabel(){this.isLabelDisabled||this.isDisabled||this.setValue()},toggle(){this.isDisabled||this.setValue()},emitEvent(){let e={value:!this.valueCom,name:this.name};this.$emit("change",e),this.parent&&this.parent.emitEvent&&this.parent.emitEvent(e)},setValue(){let e=this.valueCom,t=0;if(this.parent&&this.parent.children&&this.parent.children.map((e=>{(e.valueCom||e.value)&&t++})),1==e)this.emitEvent(),this.$emit("input",!e),this.$emit("update:modelValue",!e);else{if(this.parent&&t>=this.parent.max)return this.$u.toast(`最多可选${this.parent.max}项`);this.emitEvent(),this.$emit("input",!e),this.$emit("update:modelValue",!e)}}}},[["render",function(t,a,n,o,r,s){const l=i(e.resolveDynamicComponent("u-icon"),Po);return e.openBlock(),e.createElementBlock("view",{class:"u-checkbox",style:e.normalizeStyle([s.checkboxStyle])},[e.createElementVNode("view",{class:e.normalizeClass(["u-checkbox__icon-wrap",[s.iconClass]]),onClick:a[0]||(a[0]=(...e)=>s.toggle&&s.toggle(...e)),style:e.normalizeStyle([s.iconStyle])},[n.indeterminate?(e.openBlock(),e.createBlock(l,{key:0,class:"u-checkbox__icon-wrap__icon",name:"minus",size:s.checkboxIconSize,color:s.iconColor},null,8,["size","color"])):(e.openBlock(),e.createBlock(l,{key:1,class:"u-checkbox__icon-wrap__icon",name:"checkbox-mark",size:s.checkboxIconSize,color:s.iconColor},null,8,["size","color"]))],6),e.createElementVNode("view",{class:"u-checkbox__label",onClick:a[1]||(a[1]=(...e)=>s.onClickLabel&&s.onClickLabel(...e)),style:e.normalizeStyle({fontSize:t.$u.addUnit(n.labelSize)})},[e.renderSlot(t.$slots,"default",{},void 0,!0)],4)],4)}],["__scopeId","data-v-a9e123ed"]]),ru={__name:"register",setup(t){e.ref(!0);const a=e.ref(!0);e.ref("获取验证码");const n=e.ref({userName:null,code:null,password:null});e.ref(null);const r=e.ref(0),s=()=>{uni.navigateBack()},l=()=>{uni.switchTab({url:"/pages/index/index"})},c=async()=>{if(r.value>0)return;if(!n.value.userName)return void uni.showToast({title:"请输入手机号",icon:"none"});if(e=n.value.userName,!/^1[3-9]\d{9}$/.test(e))return void uni.showToast({title:"手机号格式不正确",icon:"none"});var e;if(0==(await O({phone:n.value.userName,type:2})).code){uni.showToast({title:"验证码已发送",icon:"none"}),r.value=60;const e=setInterval((()=>{r.value--,r.value<=0&&clearInterval(e)}),1e3)}},u=async()=>{if(!n.value.userName)return void uni.showToast({title:"请输入手机号",icon:"error"});if(!n.value.code)return void uni.showToast({title:"请输入验证码",icon:"error"});if(!n.value.password)return void uni.showToast({title:"请输入密码",icon:"error"});a.value||uni.showToast({title:"请同意协议",icon:"error"});let e=await((e,t={})=>A.post("/api/user/register",e,t))(n.value),t=e.data;o("log","at pages/register/register.vue:145",e),uni.setStorageSync("token",e.data.token),uni.setStorageSync("currentUser",t),0==e.code&&uni.navigateTo({url:"/pages/supplementInfo/supplementInfo"})};return(t,o)=>{const d=i(e.resolveDynamicComponent("u-icon"),Po),m=i(e.resolveDynamicComponent("u-button"),Bl),p=i(e.resolveDynamicComponent("u-checkbox"),iu);return e.openBlock(),e.createElementBlock("view",{class:"login-box"},[e.createElementVNode("view",{class:"login-bg"},[e.createElementVNode("view",{class:"bg-top"}),e.createElementVNode("view",{class:"bg-top-content"},[e.createVNode(d,{name:"arrow-left",size:"42",onClick:s}),e.createElementVNode("view",{style:{"margin-left":"30rpx","margin-right":"30rpx"}},[e.createElementVNode("view",{class:"welcome"},[e.createElementVNode("text",null,"欢迎注册"),e.createTextVNode(),e.createElementVNode("text",{class:"txt"},"「麦苗倾诉」")]),e.createElementVNode("view",{class:"msg"},"注册账号发现更多精彩"),e.createElementVNode("view",{style:{}},[e.createElementVNode("view",{class:"login-form"},[e.createElementVNode("view",{class:"input-box"},[e.withDirectives(e.createElementVNode("input",{class:"input",type:"number","onUpdate:modelValue":o[0]||(o[0]=e=>n.value.userName=e),placeholder:"请输入手机号"},null,512),[[e.vModelText,n.value.userName]])]),e.createElementVNode("view",{class:"input-box code-box"},[e.withDirectives(e.createElementVNode("input",{class:"input",type:"number","onUpdate:modelValue":o[1]||(o[1]=e=>n.value.code=e),placeholder:"请输入验证码"},null,512),[[e.vModelText,n.value.code]]),e.createElementVNode("view",{class:"divider"}),e.createElementVNode("text",{class:"get-code",onClick:c},e.toDisplayString(r.value>0?r.value+"s":"获取验证码"),1)]),e.createElementVNode("view",{class:"input-box"},[e.withDirectives(e.createElementVNode("input",{class:"input",type:"password","onUpdate:modelValue":o[2]||(o[2]=e=>n.value.password=e),placeholder:"请输入密码"},null,512),[[e.vModelText,n.value.password]])]),e.createElementVNode("view",{style:{"margin-top":"80rpx"}},[e.createVNode(m,{type:"success",shape:"circle",onClick:u},{default:e.withCtx((()=>[e.createTextVNode("确定注册")])),_:1})]),e.createElementVNode("view",{style:{"text-align":"center","margin-top":"20rpx"}},[e.createElementVNode("text",null,"已有账号，现在去"),e.createElementVNode("text",{style:{color:"#34A755"},onClick:s},"登录>>")])])])])])]),e.createElementVNode("view",{class:"agree"},[e.createVNode(p,{shape:"circle","active-color":"#1EBC80",modelValue:a.value,"onUpdate:modelValue":o[5]||(o[5]=e=>a.value=e),"label-size":"24"},{default:e.withCtx((()=>[e.createTextVNode("注册即代表同意 "),e.createElementVNode("text",{class:"txt",onClick:o[3]||(o[3]=e=>l())},"《用户注册协议》"),e.createTextVNode("和"),e.createElementVNode("text",{class:"txt",onClick:o[4]||(o[4]=e=>l())},"《隐私协议》")])),_:1},8,["modelValue"])])])}}},su={__name:"settings",setup(t){const a=e.ref([{title:"账号与安全",value:"",route:"/pages/account/security"},{title:"隐私政策",value:"",route:"/pages/webview/webview?type=隐私政策"},{title:"用户协议",value:"",route:"/pages/webview/webview?type=用户协议"},{title:"关于麦苗倾诉",value:"",route:"/pages/webview/webview?type=关于麦苗倾诉"},{title:"帮助中心",value:"",route:"/pages/settings/help-center"}]),n=()=>{uni.showModal({title:"退出登录",content:"确定退出登录？",confirmText:"确定",cancelText:"取消",success(e){e.confirm&&(uni.clearStorageSync(),uni.navigateTo({url:"/pages/login/login"}))}})};return(t,o)=>{const r=i(e.resolveDynamicComponent("u-icon"),Po),s=i(e.resolveDynamicComponent("u-button"),Bl);return e.openBlock(),e.createElementBlock("view",{class:"page"},[e.createElementVNode("view",{class:"setting-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{key:a,class:"setting-item",onClick:e=>(e=>{e.route?uni.navigateTo({url:e.route}):uni.showToast({title:"未配置跳转",icon:"none"})})(t)},[e.createElementVNode("view",{class:"left"},[e.createElementVNode("text",{class:"title"},e.toDisplayString(t.title),1),t.sub?(e.openBlock(),e.createElementBlock("text",{key:0,class:"sub"},e.toDisplayString(t.sub),1)):e.createCommentVNode("",!0)]),e.createElementVNode("view",{class:"right"},[t.value?(e.openBlock(),e.createElementBlock("text",{key:0,class:"value"},e.toDisplayString(t.value),1)):e.createCommentVNode("",!0),e.createVNode(r,{name:"arrow-right",size:"28",color:"#CFCFCF"})])],8,["onClick"])))),128))]),e.createElementVNode("view",{class:"bottom-space"}),e.createElementVNode("view",{style:{margin:"30rpx"}},[e.createVNode(s,{type:"error",onClick:n},{default:e.withCtx((()=>[e.createTextVNode("退出登录")])),_:1})])])}}},lu=ie(su,[["__scopeId","data-v-9294198f"]]),cu=ie({__name:"security",setup(t){const a=e.ref([{title:"手机号",value:(e=>{if(!e)return"";const t=String(e);return t.length>=7?t.slice(0,3)+"****"+t.slice(-4):t})("19512348441"),route:"/pages/account/phone"},{title:"登录密码设置 / 修改",value:"未设置",route:"/pages/account/password"},{title:"安全锁设置",value:"未设置",route:"/pages/account/safelock"},{title:"微信绑定",value:"未绑定",route:"/pages/account/wechat"},{title:"微博绑定",value:"未绑定",route:"/pages/account/weibo"},{title:"QQ 绑定",value:"未绑定",route:"/pages/account/qq"},{title:"账号注销",value:"",route:"/pages/account/delete"}]);return(t,n)=>{const o=i(e.resolveDynamicComponent("u-icon"),Po);return e.openBlock(),e.createElementBlock("view",{class:"page"},[e.createElementVNode("view",{class:"setting-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{key:a,class:"setting-item",onClick:e=>(e=>{e.route?uni.navigateTo({url:e.route}):uni.showToast({title:"未配置跳转",icon:"none"})})(t)},[e.createElementVNode("view",{class:"left"},[e.createElementVNode("text",{class:"title"},e.toDisplayString(t.title),1),t.sub?(e.openBlock(),e.createElementBlock("text",{key:0,class:"sub"},e.toDisplayString(t.sub),1)):e.createCommentVNode("",!0)]),e.createElementVNode("view",{class:"right"},[t.value?(e.openBlock(),e.createElementBlock("text",{key:0,class:"value"},e.toDisplayString(t.value),1)):e.createCommentVNode("",!0),e.createVNode(o,{name:"arrow-right",size:"28",color:"#CFCFCF"})])],8,["onClick"])))),128))]),e.createElementVNode("view",{class:"bottom-space"})])}}},[["__scopeId","data-v-46236ae4"]]),uu={__name:"webview",setup(t){const a=e.ref(""),n=e.ref("");l((e=>{a.value=e.type,i()}));const i=async()=>{uni.setNavigationBarTitle({title:a.value});try{const e={current:1,size:10,title:a.value};let{data:t}=await P(e);n.value=t.records[0].content}catch(e){o("log","at pages/webview/webview.vue:29",e)}};return(t,a)=>(e.openBlock(),e.createElementBlock("view",{style:{padding:"30rpx"}},[e.createElementVNode("rich-text",{nodes:n.value},null,8,["nodes"])]))}},du={__name:"bill",setup(t){e.useCssVars((e=>({e1af096e:n.value})));const a=ae(),n=e.ref(a.statusBarHeight+"px"),r=e.ref({current:1,size:10,params:{startTime:""}}),s=e.ref({year:!0,month:!0,day:!0,hour:!1,minute:!1,second:!1}),c=e.ref(1),u=e.ref(!1),m=e.ref("请选择时间"),p=e=>{m.value=`${e.year}-${e.month}-${e.day}`,r.value.params.startTime=`${e.year}-${e.month}-${e.day}`,_(c.value)},h=e.ref({});l((e=>{h.value=JSON.parse(e.type)}));const v=()=>{u.value=!0},g=e.ref({monthlyIncome:0,unsettledAmount:1,withdrawableAmount:0,totalAssets:0}),f=e=>{c.value=e,_(e)},y=e.ref([]),_=async e=>{try{const t=1==e?mc:pc,{data:a}=await t(r.value);y.value=a.records}catch(t){o("log","at pages/my/wallet/bill.vue:153",t)}};e.onMounted((()=>{_(1),(async()=>{try{const{data:e}=await dc();g.value=e}catch(e){o("log","at pages/my/wallet/bill.vue:161",e)}})()}));const k=()=>{uni.navigateBack({delta:1})},E=e.ref(0);d((e=>{E.value=e.scrollTop}));return(t,a)=>{const n=i(e.resolveDynamicComponent("uni-icons"),re),r=i(e.resolveDynamicComponent("uni-nav-bar"),Di),l=i(e.resolveDynamicComponent("u-picker"),Ns);return e.openBlock(),e.createElementBlock("view",{class:"settled-box"},[e.createElementVNode("view",{class:"header"},[e.createVNode(r,{class:e.normalizeClass([E.value>15?"scrollClass":"","header-bar"]),backgroundColor:"rgba(255,255,255,0)",border:!1,title:"账单"},{left:e.withCtx((()=>[e.createVNode(n,{type:"left",size:"24",onClick:k})])),_:1},8,["class"])]),e.createElementVNode("view",{class:"content"},[e.createElementVNode("view",{class:"content-title"},[e.createElementVNode("view",{class:e.normalizeClass(1==c.value?"hove-view":"view"),onClick:a[0]||(a[0]=e=>f(1))},"收入记录",2),e.createElementVNode("view",{class:e.normalizeClass(2==c.value?"hove-view":"view"),onClick:a[1]||(a[1]=e=>f(2))},"提现记录",2)]),e.createElementVNode("view",{class:"content-details"},[e.createElementVNode("view",{class:"detail-item"},[e.createElementVNode("view",null,e.toDisplayString(1==c.value?"当前收益":"累计提现"),1),e.createElementVNode("text",null,e.toDisplayString(1==c.value?g.value.monthlyIncome:g.value.unsettledAmount),1)]),e.createElementVNode("view",{class:"uni-list-cell",onClick:v},[e.createElementVNode("view",{class:"uni-list-cell-left"},[e.createVNode(n,{type:"calendar",size:"20",color:"#fff"}),e.createElementVNode("text",null,e.toDisplayString(m.value),1)]),e.createElementVNode("view",{class:"uni-list-cell-db"},[e.createVNode(l,{type:"text",modelValue:u.value,"onUpdate:modelValue":a[2]||(a[2]=e=>u.value=e),params:s.value,mode:"time",onConfirm:p},null,8,["modelValue","params"])])])]),1==c.value?(e.openBlock(),e.createElementBlock("view",{key:0,class:"clause"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(y.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"clause-item",key:a},[e.createElementVNode("view",{class:"item-head"},[e.createElementVNode("view",{class:"head-left"},[e.createElementVNode("view",null,"订单编号"),e.createElementVNode("view",{class:"order-number"},e.toDisplayString(t.orderSn),1),e.createElementVNode("image",{src:lc,onClick:e=>{return o("log","at pages/my/wallet/bill.vue:183",a=t.orderSn),uni.setClipboardData({data:a}),void uni.showToast({title:"复制成功",icon:"none"});var a}},null,8,["onClick"])]),e.createElementVNode("view",{class:"head-right"},e.toDisplayString(t.createTime),1)]),e.createElementVNode("view",{class:"item-content"},[e.createElementVNode("view",{class:"content-left"},[e.createElementVNode("view",{class:"left-top"},[e.createElementVNode("image",{src:h.value.avatar},null,8,["src"]),e.createElementVNode("view",null,e.toDisplayString(h.value.realName),1)]),e.createElementVNode("view",{class:"left-bottom"},[e.createElementVNode("view",null,[e.createElementVNode("text",null,"服务方式："),e.createTextVNode(e.toDisplayString(t.consultTypeDesc),1)]),e.createElementVNode("view",null,[e.createElementVNode("text",null,"购买时长："),e.createTextVNode(e.toDisplayString(t.serviceInfo),1)])])]),e.createElementVNode("view",{class:"content-right"},[e.createElementVNode("view",null,"+"+e.toDisplayString(t.amount),1),e.createElementVNode("text",null,e.toDisplayString(t.statusDesc),1)])])])))),128))])):e.createCommentVNode("",!0),2==c.value?(e.openBlock(),e.createElementBlock("view",{key:1,class:"clause"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(y.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"clause-item",style:{"flex-direction":"row"},key:a},[e.createElementVNode("view",{class:"item-gold"},[e.createElementVNode("view",{class:"gold-icon"},[e.createElementVNode("image",{src:"/static/order/gold-coin.png"})]),e.createElementVNode("view",{class:"gold-content"},[e.createElementVNode("view",null,"提现"),e.createElementVNode("view",{class:"gold-time"},e.toDisplayString(t.applyTime),1)])]),e.createElementVNode("view",{class:"item-coin"},[e.createElementVNode("view",{class:"gold-num"},"-"+e.toDisplayString(t.amount),1),e.createElementVNode("view",{class:"gold-status"},"(审核中)")])])))),128))])):e.createCommentVNode("",!0)])])}}},mu=ie(du,[["__scopeId","data-v-45b4d9bc"]]),pu="/static/my/withdrawal.png",hu={__name:"withdrawal",setup(t){e.useCssVars((e=>({bedb86b6:n.value})));const a=ae(),n=e.ref(a.statusBarHeight+"px"),r=e.ref(),c=e.ref([]),u=e.ref(0),m=e.ref(),p=e.ref(!1),h=e.ref("绑定银行卡"),v=async()=>{try{const{data:e}=await((e,t={})=>A.get("/api/wallet/bank-cards",e,t))();c.value=e,_()}catch(Ft){o("log","at pages/my/wallet/withdrawal.vue:86",Ft)}};s((()=>{v(),_()}));const g=()=>{uni.navigateBack({delta:1})},f=e.ref(0);d((e=>{f.value=e.scrollTop})),l((e=>{u.value=e.amount}));const y=e=>e.slice(-4),_=()=>0==c.value.length?h.value="绑定银行卡":c.value.length>=1?(m.value=c.value[0].id,h.value=c.value[0].bankName+"（"+y(c.value[0].cardNo)+"）"):void 0;e.watch(m,((e,t)=>{m.value&&c.value.map((e=>{if(e.id==m.value)return h.value=e.bankName+"（"+y(e.cardNo)+"）"}))}));const k=async()=>{if(0!=c.value.length)try{const{data:e}=await((e,t={})=>A.post("/api/wallet/apply",e,t))({amount:r.value,bankCardId:m.value});o("log","at pages/my/wallet/withdrawal.vue:149",e)}catch(Ft){o("log","at pages/my/wallet/withdrawal.vue:151",Ft)}else uni.showToast({title:"请先绑定银行卡",icon:"none",duration:2e3})};return(t,a)=>{const n=i(e.resolveDynamicComponent("uni-icons"),re),o=i(e.resolveDynamicComponent("uni-nav-bar"),Di),s=i(e.resolveDynamicComponent("uni-easyinput"),Cr);return e.openBlock(),e.createElementBlock("view",{class:"settled-box"},[e.createElementVNode("view",{class:"header"},[e.createVNode(o,{class:e.normalizeClass([f.value>15?"scrollClass":"","header-bar"]),backgroundColor:"rgba(255,255,255,0)",border:!1,title:"我的钱包"},{left:e.withCtx((()=>[e.createVNode(n,{type:"left",size:"24",onClick:g})])),_:1},8,["class"])]),e.createElementVNode("view",{class:"content"},[e.createElementVNode("view",{class:"content-details"},[e.createElementVNode("view",{class:"detail-item"},[e.createElementVNode("view",null,"提现金额"),e.createElementVNode("text",null,"满50元即可申请提现")]),e.createElementVNode("view",{class:"detail-item"},[e.createElementVNode("view",{style:{display:"flex"}},[e.createElementVNode("view",{style:{"font-size":"50rpx"}},"¥"),e.createVNode(s,{modelValue:r.value,"onUpdate:modelValue":a[0]||(a[0]=e=>r.value=e),placeholder:"输入自定义金额"},null,8,["modelValue"])]),e.createElementVNode("text",null,"可用余额￥"+e.toDisplayString(u.value),1)])]),e.createElementVNode("view",{class:"clause"},[e.createElementVNode("view",{style:{"padding-left":"15rpx"}},"提现至银行卡"),e.createElementVNode("view",{class:"bank-card"},[e.createElementVNode("view",{style:{display:"flex","align-items":"center"},onClick:a[1]||(a[1]=e=>{c.value.length>2&&(p.value=!0)})},[e.createElementVNode("image",{src:pu,class:"bank-img"}),e.createElementVNode("view",null,e.toDisplayString(h.value),1)]),e.createElementVNode("view",{class:"card",onClick:a[2]||(a[2]=e=>{return t="/pages/my/wallet/bank-card",void uni.navigateTo({url:t});var t})},[0==c.value.length?(e.openBlock(),e.createElementBlock("view",{key:0},[e.createElementVNode("view",{style:{color:"#9e9e9e","font-size":"20rpx","padding-right":"10rpx"}},"去绑定")])):e.createCommentVNode("",!0),e.createElementVNode("view",{style:{color:"#9e9e9e"}}," > ")])]),0!=c.value.length&&p.value?(e.openBlock(),e.createElementBlock("view",{key:0,class:"bank-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{key:a,class:e.normalizeClass(a%2!=0?"card-item1":""),onClick:e=>(e=>{m.value=e.id,p.value=!1})(t)},[e.createElementVNode("view",{class:"card-item"},[e.createElementVNode("image",{src:pu,class:"bank-img"}),e.createElementVNode("view",null,e.toDisplayString(t.bankName)+"（"+e.toDisplayString(y(t.cardNo))+"）",1)])],10,["onClick"])))),128))])):e.createCommentVNode("",!0),e.createElementVNode("view",{style:{margin:"50rpx 0 10rpx",color:"#9e9e9e"}},"提现说明："),e.createElementVNode("view",{style:{"font-size":"25rpx",color:"#9e9e9e"}},"1.本次提现仅若遇未到账，请联系客服。"),e.createElementVNode("view",{style:{"font-size":"25rpx",color:"#9e9e9e"}},"2.多张银行卡时，点击银行卡可切换。")]),e.createElementVNode("button",{onClick:k,class:"but"},"确定")])])}}},vu=ie(hu,[["__scopeId","data-v-1f112071"]]);const gu=ie({name:"uniFormsItem",options:{virtualHost:!0},provide(){return{uniFormItem:this}},inject:{form:{from:"uniForm",default:null}},props:{rules:{type:Array,default:()=>null},name:{type:[String,Array],default:""},required:{type:Boolean,default:!1},label:{type:String,default:""},labelWidth:{type:[String,Number],default:""},labelAlign:{type:String,default:""},errorMessage:{type:[String,Boolean],default:""},leftIcon:String,iconColor:{type:String,default:"#606266"}},data:()=>({errMsg:"",userRules:null,localLabelAlign:"left",localLabelWidth:"70px",localLabelPos:"left",border:!1,isFirstBorder:!1}),computed:{msg(){return this.errorMessage||this.errMsg}},watch:{"form.formRules"(e){this.init()},"form.labelWidth"(e){this.localLabelWidth=this._labelWidthUnit(e)},"form.labelPosition"(e){this.localLabelPos=this._labelPosition()},"form.labelAlign"(e){}},created(){this.init(!0),this.name&&this.form&&this.$watch((()=>this.form._getDataValue(this.name,this.form.localData)),((e,t)=>{if(!this.form._isEqual(e,t)){const t=this.itemSetValue(e);this.onFieldChange(t,!1)}}),{immediate:!1})},unmounted(){this.__isUnmounted=!0,this.unInit()},methods:{setRules(e=null){this.userRules=e,this.init(!1)},setValue(){},async onFieldChange(e,t=!0){const{formData:a,localData:n,errShowType:o,validateCheck:i,validateTrigger:r,_isRequiredField:s,_realName:l}=this.form,c=l(this.name);e||(e=this.form.formData[c]);const u=this.itemRules.rules&&this.itemRules.rules.length;if(!this.validator||!u||0===u)return;const d=s(this.itemRules.rules||[]);let m=null;return"bind"===r||t?(m=await this.validator.validateUpdate({[c]:e},a),d||void 0!==e&&""!==e||(m=null),m&&m.errorMessage?("undertext"===o&&(this.errMsg=m?m.errorMessage:""),"toast"===o&&uni.showToast({title:m.errorMessage||"校验错误",icon:"none"}),"modal"===o&&uni.showModal({title:"提示",content:m.errorMessage||"校验错误"})):this.errMsg="",i(m||null)):this.errMsg="",m||null},init(e=!1){const{validator:t,formRules:a,childrens:n,formData:o,localData:i,_realName:r,labelWidth:s,_getDataValue:l,_setDataValue:c}=this.form||{};if(this.localLabelAlign=this._justifyContent(),this.localLabelWidth=this._labelWidthUnit(s),this.localLabelPos=this._labelPosition(),this.form&&e&&n.push(this),!t||!a)return;this.form.isFirstBorder||(this.form.isFirstBorder=!0,this.isFirstBorder=!0),this.group&&(this.group.isFirstBorder||(this.group.isFirstBorder=!0,this.isFirstBorder=!0)),this.border=this.form.border;const u=r(this.name),d=this.userRules||this.rules;"object"==typeof a&&d&&(a[u]={rules:d},t.updateSchema(a));const m=a[u]||{};this.itemRules=m,this.validator=t,this.itemSetValue(l(this.name,i))},unInit(){if(this.form){const{childrens:e,formData:t,_realName:a}=this.form;e.forEach(((e,n)=>{e===this&&(this.form.childrens.splice(n,1),delete t[a(e.name)])}))}},itemSetValue(e){const t=this.form._realName(this.name),a=this.itemRules.rules||[],n=this.form._getValue(t,e,a);return this.form._setDataValue(t,this.form.formData,n),n},clearValidate(){this.errMsg=""},_isRequired(){return this.required},_justifyContent(){if(this.form){const{labelAlign:e}=this.form;let t=this.labelAlign?this.labelAlign:e;if("left"===t)return"flex-start";if("center"===t)return"center";if("right"===t)return"flex-end"}return"flex-start"},_labelWidthUnit(e){return this.num2px(this.labelWidth?this.labelWidth:e||(this.label?70:"auto"))},_labelPosition(){return this.form&&this.form.labelPosition||"left"},isTrigger:(e,t,a)=>"submit"!==e&&e?"bind":void 0===e?"bind"!==t?t?"submit":""===a?"bind":"submit":"bind":"submit",num2px:e=>"number"==typeof e?`${e}px`:e}},[["render",function(t,a,n,o,i,r){return e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["uni-forms-item",["is-direction-"+i.localLabelPos,i.border?"uni-forms-item--border":"",i.border&&i.isFirstBorder?"is-first-border":""]])},[e.renderSlot(t.$slots,"label",{},(()=>[e.createElementVNode("view",{class:e.normalizeClass(["uni-forms-item__label",{"no-label":!n.label&&!n.required}]),style:e.normalizeStyle({width:i.localLabelWidth,justifyContent:i.localLabelAlign})},[n.required?(e.openBlock(),e.createElementBlock("text",{key:0,class:"is-required"},"*")):e.createCommentVNode("",!0),e.createElementVNode("text",null,e.toDisplayString(n.label),1)],6)]),!0),e.createElementVNode("view",{class:"uni-forms-item__content"},[e.renderSlot(t.$slots,"default",{},void 0,!0),e.createElementVNode("view",{class:e.normalizeClass(["uni-forms-item__error",{"msg--active":r.msg}])},[e.createElementVNode("text",null,e.toDisplayString(r.msg),1)],2)])],2)}],["__scopeId","data-v-45113fbc"]]);var fu={email:/^\S+?@\S+?\.\S+?$/,idcard:/^[1-9]\d{5}(18|19|([23]\d))\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/,url:new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i")};const yu={int:"integer",bool:"boolean",double:"number",long:"number",password:"string"};function _u(e,t=""){["label"].forEach((t=>{void 0===e[t]&&(e[t]="")}));let a=t;for(let n in e){let t=new RegExp("{"+n+"}");a=a.replace(t,e[n])}return a}const ku={integer:e=>ku.number(e)&&parseInt(e,10)===e,string:e=>"string"==typeof e,number:e=>!isNaN(e)&&"number"==typeof e,boolean:function(e){return"boolean"==typeof e},float:function(e){return ku.number(e)&&!ku.integer(e)},array:e=>Array.isArray(e),object:e=>"object"==typeof e&&!ku.array(e),date:e=>e instanceof Date,timestamp(e){return!(!this.integer(e)||Math.abs(e).toString().length>16)},file:e=>"string"==typeof e.url,email:e=>"string"==typeof e&&!!e.match(fu.email)&&e.length<255,url:e=>"string"==typeof e&&!!e.match(fu.url),pattern(e,t){try{return new RegExp(e).test(t)}catch(Ft){return!1}},method:e=>"function"==typeof e,idcard:e=>"string"==typeof e&&!!e.match(fu.idcard),"url-https"(e){return this.url(e)&&e.startsWith("https://")},"url-scheme":e=>e.startsWith("://"),"url-web":e=>!1};const Eu={required:(e,t,a)=>e.required&&function(e,t){return null==e||"string"==typeof e&&!e||!(!Array.isArray(e)||e.length)||"object"===t&&!Object.keys(e).length}(t,e.format||typeof t)?_u(e,e.errorMessage||a.required):null,range(e,t,a){const{range:n,errorMessage:o}=e;let i=new Array(n.length);for(let s=0;s<n.length;s++){const e=n[s];ku.object(e)&&void 0!==e.value?i[s]=e.value:i[s]=e}let r=!1;return Array.isArray(t)?r=new Set(t.concat(i)).size===i.length:i.indexOf(t)>-1&&(r=!0),r?null:_u(e,o||a.enum)},rangeNumber(e,t,a){if(!ku.number(t))return _u(e,e.errorMessage||a.pattern.mismatch);let{minimum:n,maximum:o,exclusiveMinimum:i,exclusiveMaximum:r}=e,s=i?t<=n:t<n,l=r?t>=o:t>o;return void 0!==n&&s?_u(e,e.errorMessage||a.number[i?"exclusiveMinimum":"minimum"]):void 0!==o&&l?_u(e,e.errorMessage||a.number[r?"exclusiveMaximum":"maximum"]):void 0!==n&&void 0!==o&&(s||l)?_u(e,e.errorMessage||a.number.range):null},rangeLength(e,t,a){if(!ku.string(t)&&!ku.array(t))return _u(e,e.errorMessage||a.pattern.mismatch);let n=e.minLength,o=e.maxLength,i=t.length;return void 0!==n&&i<n?_u(e,e.errorMessage||a.length.minLength):void 0!==o&&i>o?_u(e,e.errorMessage||a.length.maxLength):void 0!==n&&void 0!==o&&(i<n||i>o)?_u(e,e.errorMessage||a.length.range):null},pattern:(e,t,a)=>ku.pattern(e.pattern,t)?null:_u(e,e.errorMessage||a.pattern.mismatch),format(e,t,a){var n=Object.keys(ku),o=yu[e.format]?yu[e.format]:e.format||e.arrayType;return n.indexOf(o)>-1&&!ku[o](t)?_u(e,e.errorMessage||a.typeError):null},arrayTypeFormat(e,t,a){if(!Array.isArray(t))return _u(e,e.errorMessage||a.typeError);for(let n=0;n<t.length;n++){const o=t[n];let i=this.format(e,o,a);if(null!==i)return i}return null}};class xu extends class{constructor(e){this._message=e}async validateRule(e,t,a,n,o){var i=null;let r=t.rules;if(r.findIndex((e=>e.required))<0){if(null==a)return i;if("string"==typeof a&&!a.length)return i}var s=this._message;if(void 0===r)return s.default;for(var l=0;l<r.length;l++){let c=r[l],u=this._getValidateType(c);if(Object.assign(c,{label:t.label||`["${e}"]`}),Eu[u]&&null!=(i=Eu[u](c,a,s)))break;if(c.validateExpr){let e=Date.now();if(!1===c.validateExpr(a,o,e)){i=this._getMessage(c,c.errorMessage||this._message.default);break}}if(c.validateFunction&&null!==(i=await this.validateFunction(c,a,n,o,u)))break}return null!==i&&(i=s.TAG+i),i}async validateFunction(e,t,a,n,o){let i=null;try{let r=null;const s=await e.validateFunction(e,t,n||a,(e=>{r=e}));(r||"string"==typeof s&&s||!1===s)&&(i=this._getMessage(e,r||s,o))}catch(Ft){i=this._getMessage(e,Ft.message,o)}return i}_getMessage(e,t,a){return _u(e,t||e.errorMessage||this._message[a]||t.default)}_getValidateType(e){var t="";return e.required?t="required":e.format?t="format":e.arrayType?t="arrayTypeFormat":e.range?t="range":void 0!==e.maximum||void 0!==e.minimum?t="rangeNumber":void 0!==e.maxLength||void 0!==e.minLength?t="rangeLength":e.pattern?t="pattern":e.validateFunction&&(t="validateFunction"),t}}{constructor(e,t){super(xu.message),this._schema=e,this._options=t||null}updateSchema(e){this._schema=e}async validate(e,t){let a=this._checkFieldInSchema(e);return a||(a=await this.invokeValidate(e,!1,t)),a.length?a[0]:null}async validateAll(e,t){let a=this._checkFieldInSchema(e);return a||(a=await this.invokeValidate(e,!0,t)),a}async validateUpdate(e,t){let a=this._checkFieldInSchema(e);return a||(a=await this.invokeValidateUpdate(e,!1,t)),a.length?a[0]:null}async invokeValidate(e,t,a){let n=[],o=this._schema;for(let i in o){let r=o[i],s=await this.validateRule(i,r,e[i],e,a);if(null!=s&&(n.push({key:i,errorMessage:s}),!t))break}return n}async invokeValidateUpdate(e,t,a){let n=[];for(let o in e){let i=await this.validateRule(o,this._schema[o],e[o],e,a);if(null!=i&&(n.push({key:o,errorMessage:i}),!t))break}return n}_checkFieldInSchema(e){var t=Object.keys(e),a=Object.keys(this._schema);if(new Set(t.concat(a)).size===a.length)return"";var n=t.filter((e=>a.indexOf(e)<0));return[{key:"invalid",errorMessage:_u({field:JSON.stringify(n)},xu.message.TAG+xu.message.defaultInvalid)}]}}xu.message=new function(){return{TAG:"",default:"验证错误",defaultInvalid:"提交的字段{field}在数据库中并不存在",validateFunction:"验证无效",required:"{label}必填",enum:"{label}超出范围",timestamp:"{label}格式无效",whitespace:"{label}不能为空",typeError:"{label}类型无效",date:{format:"{label}日期{value}格式无效",parse:"{label}日期无法解析,{value}无效",invalid:"{label}日期{value}无效"},length:{minLength:"{label}长度不能少于{minLength}",maxLength:"{label}长度不能超过{maxLength}",range:"{label}必须介于{minLength}和{maxLength}之间"},number:{minimum:"{label}不能小于{minimum}",maximum:"{label}不能大于{maximum}",exclusiveMinimum:"{label}不能小于等于{minimum}",exclusiveMaximum:"{label}不能大于等于{maximum}",range:"{label}必须介于{minimum}and{maximum}之间"},pattern:{mismatch:"{label}格式不匹配"}}};const Nu=(e,t,a)=>{const n=a.find((e=>{return e.format&&("int"===(t=e.format)||"double"===t||"number"===t||"timestamp"===t);var t})),o=a.find((e=>e.format&&"boolean"===e.format||"bool"===e.format));return n&&(t=t||0===t?Du(Number(t))?Number(t):t:null),o&&(t=!!bu(t)&&t),t},wu=(e,t)=>Tu(t,e),Cu=(e,t={})=>{const a=Iu(e);if("object"==typeof a&&Array.isArray(a)&&a.length>1){return a.reduce(((e,t)=>e+`#${t}`),"_formdata_")}return a[0]||e},Mu=e=>{let t=e.replace("_formdata_#","");return t=t.split("#").map((e=>Du(e)?Number(e):e)),t},Su=(e,t,a)=>("object"!=typeof e||Iu(t).reduce(((e,t,n,o)=>n===o.length-1?(e[t]=a,null):(t in e||(e[t]=/^[0-9]{1,}$/.test(o[n+1])?[]:{}),e[t])),e),e);function Iu(e){return Array.isArray(e)?e:e.replace(/\[/g,".").replace(/\]/g,"").split(".")}const Tu=(e,t,a="undefined")=>{let n=Iu(t).reduce(((e,t)=>(e||{})[t]),e);return n&&void 0===n?a:n},Du=e=>!isNaN(Number(e)),bu=e=>"boolean"==typeof e;const Vu=ie({name:"uniForms",emits:["validate","submit"],options:{virtualHost:!0},props:{value:{type:Object,default:()=>null},modelValue:{type:Object,default:()=>null},model:{type:Object,default:()=>null},rules:{type:Object,default:()=>({})},errShowType:{type:String,default:"undertext"},validateTrigger:{type:String,default:"submit"},labelPosition:{type:String,default:"left"},labelWidth:{type:[String,Number],default:""},labelAlign:{type:String,default:"left"},border:{type:Boolean,default:!1}},provide(){return{uniForm:this}},data:()=>({formData:{},formRules:{}}),computed:{localData(){const e=this.model||this.modelValue||this.value;return e?(t=e,JSON.parse(JSON.stringify(t))):{};var t}},watch:{rules:{handler:function(e,t){this.setRules(e)},deep:!0,immediate:!0}},created(){getApp().$vm.$.appContext.config.globalProperties.binddata||(getApp().$vm.$.appContext.config.globalProperties.binddata=function(e,t,a){if(a)this.$refs[a].setValue(e,t);else{let a;for(let e in this.$refs){const t=this.$refs[e];if(t&&t.$options&&"uniForms"===t.$options.name){a=t;break}}if(!a)return o("error","at uni_modules/uni-forms/components/uni-forms/uni-forms.vue:187","当前 uni-froms 组件缺少 ref 属性");a.model&&(a.model[e]=t),a.modelValue&&(a.modelValue[e]=t),a.value&&(a.value[e]=t)}}),this.childrens=[],this.inputChildrens=[],this.setRules(this.rules)},methods:{setRules(e){this.formRules=Object.assign({},this.formRules,e),this.validator=new xu(e)},setValue(e,t){let a=this.childrens.find((t=>t.name===e));return a?(this.formData[e]=Nu(0,t,this.formRules[e]&&this.formRules[e].rules||[]),a.onFieldChange(this.formData[e])):null},validate(e,t){return this.checkAll(this.formData,e,t)},validateField(e=[],t){e=[].concat(e);let a={};return this.childrens.forEach((t=>{const n=Cu(t.name);-1!==e.indexOf(n)&&(a=Object.assign({},a,{[n]:this.formData[n]}))})),this.checkAll(a,[],t)},clearValidate(e=[]){e=[].concat(e),this.childrens.forEach((t=>{if(0===e.length)t.errMsg="";else{const a=Cu(t.name);-1!==e.indexOf(a)&&(t.errMsg="")}}))},submit(e,t,a){for(let n in this.dataValue){this.childrens.find((e=>e.name===n))&&void 0===this.formData[n]&&(this.formData[n]=this._getValue(n,this.dataValue[n]))}return a||o("warn","at uni_modules/uni-forms/components/uni-forms/uni-forms.vue:296","submit 方法即将废弃，请使用validate方法代替！"),this.checkAll(this.formData,e,t,"submit")},async checkAll(e,t,a,n){if(!this.validator)return;let o,i=[];for(let c in e){const e=this.childrens.find((e=>Cu(e.name)===c));e&&i.push(e)}a||"function"!=typeof t||(a=t),!a&&"function"!=typeof a&&Promise&&(o=new Promise(((e,t)=>{a=function(a,n){a?t(a):e(n)}})));let r=[],s=JSON.parse(JSON.stringify(e));for(let c in i){const e=i[c];let t=Cu(e.name);const a=await e.onFieldChange(s[t]);if(a&&(r.push(a),"toast"===this.errShowType||"modal"===this.errShowType))break}Array.isArray(r)&&0===r.length&&(r=null),Array.isArray(t)&&t.forEach((e=>{let t=Cu(e),a=wu(e,this.localData);void 0!==a&&(s[t]=a)})),"submit"===n?this.$emit("submit",{detail:{value:s,errors:r}}):this.$emit("validate",r);let l={};return l=((e={},t)=>{let a=JSON.parse(JSON.stringify(e)),n={};for(let o in a){let e=Mu(o);Su(n,e,a[o])}return n})(s,this.name),a&&"function"==typeof a&&a(r,l),o&&a?o:null},validateCheck(e){this.$emit("validate",e)},_getValue:Nu,_isRequiredField:e=>{let t=!1;for(let a=0;a<e.length;a++){if(e[a].required){t=!0;break}}return t},_setDataValue:(e,t,a)=>(t[e]=a,a||""),_getDataValue:wu,_realName:Cu,_isRealName:e=>/^_formdata_#*/.test(e),_isEqual:(e,t)=>{if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;var a=toString.call(e);if(a!==toString.call(t))return!1;switch(a){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t}if("[object Object]"==a){var n=Object.getOwnPropertyNames(e),o=Object.getOwnPropertyNames(t);if(n.length!=o.length)return!1;for(var i=0;i<n.length;i++){var r=n[i];if(e[r]!==t[r])return!1}return!0}return"[object Array]"==a?e.toString()==t.toString():void 0}}},[["render",function(t,a,n,o,i,r){return e.openBlock(),e.createElementBlock("view",{class:"uni-forms"},[e.createElementVNode("form",null,[e.renderSlot(t.$slots,"default",{},void 0,!0)])])}],["__scopeId","data-v-1a2678ef"]]),Au={__name:"bank-card",setup(t){e.useCssVars((e=>({efdbe5ce:n.value})));const a=ae(),n=e.ref(a.statusBarHeight+"px"),r=e.ref({realName:"",cardNo:"",bankName:""}),l=e.reactive({realName:{rules:[{required:!0,errorMessage:"请输入真实姓名"}]},cardNo:{rules:[{required:!0,errorMessage:"请输入银行卡卡号"}]},bankName:{rules:[{required:!0,errorMessage:"请输入开户行"}]}});s((()=>{}));const c=()=>{uni.navigateBack({delta:1})},u=e.ref(0);d((e=>{u.value=e.scrollTop}));const m=async()=>{try{(await((e,t={})=>A.post("/api/wallet/bank-card/add",e,t))(r.value)).success&&(uni.showToast({title:"添加成功",icon:"none",duration:2e3}),c())}catch(e){o("log","at pages/my/wallet/bank-card.vue:106",e)}};return(t,a)=>{const n=i(e.resolveDynamicComponent("uni-icons"),re),o=i(e.resolveDynamicComponent("uni-nav-bar"),Di),s=i(e.resolveDynamicComponent("uni-easyinput"),Cr),d=i(e.resolveDynamicComponent("uni-forms-item"),gu),p=i(e.resolveDynamicComponent("uni-forms"),Vu);return e.openBlock(),e.createElementBlock("view",{class:"settled-box"},[e.createElementVNode("view",{class:"header"},[e.createVNode(o,{class:e.normalizeClass([u.value>15?"scrollClass":"","header-bar"]),backgroundColor:"rgba(255,255,255,0)",border:!1,title:"绑定银行卡"},{left:e.withCtx((()=>[e.createVNode(n,{type:"left",size:"24",onClick:c})])),_:1},8,["class"])]),e.createElementVNode("view",{class:"content"},[e.createVNode(p,{ref:"formRef",rules:l,modelValue:r.value},{default:e.withCtx((()=>[e.createElementVNode("view",{class:"content-details"},[e.createElementVNode("view",{class:"detail-item"},[e.createElementVNode("view",null,"姓名"),e.createVNode(d,{name:"realName"},{default:e.withCtx((()=>[e.createVNode(s,{modelValue:r.value.realName,"onUpdate:modelValue":a[0]||(a[0]=e=>r.value.realName=e),placeholder:"请输入真实姓名"},null,8,["modelValue"])])),_:1})]),e.createElementVNode("view",{class:"detail-item"},[e.createElementVNode("view",null,"银行卡卡号"),e.createVNode(d,{name:"cardNo"},{default:e.withCtx((()=>[e.createVNode(s,{modelValue:r.value.cardNo,"onUpdate:modelValue":a[1]||(a[1]=e=>r.value.cardNo=e),placeholder:"请输入银行卡卡号"},null,8,["modelValue"])])),_:1})]),e.createElementVNode("view",{class:"detail-item"},[e.createElementVNode("view",null,"开户银行"),e.createVNode(d,{name:"bankName"},{default:e.withCtx((()=>[e.createVNode(s,{modelValue:r.value.bankName,"onUpdate:modelValue":a[2]||(a[2]=e=>r.value.bankName=e),placeholder:"请输入开户行"},null,8,["modelValue"])])),_:1})])]),e.createElementVNode("view",{class:"clause"},[e.createElementVNode("view",{style:{margin:"50rpx 0 10rpx",color:"#9E9E9E"}},"提现说明："),e.createElementVNode("view",{style:{"font-size":"25rpx",color:"#9E9E9E"}},"1、在交易过程中，会向麦苗倾诉显示添加的付款方式的详细信息以进行付款，将看到您的真实姓名。请确保信息正确、真实。")]),e.createElementVNode("button",{onClick:m,class:"but"},"确定")])),_:1},8,["rules","modelValue"])])])}}},Lu=ie(Au,[["__scopeId","data-v-f80877cb"]]),Ru={__name:"mine",setup(t){e.useCssVars((e=>({"4bf41c40":n.value})));const a=ae(),n=e.ref(a.statusBarHeight+"px"),r=e.ref({monthlyIncome:0,unsettledAmount:0,withdrawableAmount:0,totalAssets:0}),s=e.ref({});l((e=>{s.value=JSON.parse(e.type)}));const c=e.ref(!0),u=()=>{c.value=!c.value};e.onMounted((()=>{(async()=>{try{const{data:e}=await dc();r.value=e}catch(e){o("log","at pages/my/wallet/mine.vue:77",e)}})()}));const m=()=>{uni.navigateBack({delta:1})},p=e.ref(0);d((e=>{p.value=e.scrollTop}));const h=e=>{uni.navigateTo({url:`${e}&type=${JSON.stringify(s.value)}`})};return(t,a)=>{const n=i(e.resolveDynamicComponent("uni-icons"),re),o=i(e.resolveDynamicComponent("uni-nav-bar"),Di);return e.openBlock(),e.createElementBlock("view",{class:"settled-box"},[e.createElementVNode("view",{class:"header"},[e.createVNode(o,{class:e.normalizeClass([p.value>15?"scrollClass":"","header-bar"]),backgroundColor:"rgba(255,255,255,0)",border:!1,title:"我的钱包"},{left:e.withCtx((()=>[e.createVNode(n,{type:"left",size:"24",onClick:m})])),_:1},8,["class"])]),e.createElementVNode("view",{class:"content"},[e.createElementVNode("view",{class:"content-details"},[e.createElementVNode("view",{class:"detail-item"},[e.createElementVNode("view",null,"本月收益"),e.createElementVNode("text",null,e.toDisplayString(r.value.monthlyIncome),1)]),e.createElementVNode("view",{class:"detail-item"},[e.createElementVNode("view",null,"未结算金额"),e.createElementVNode("text",null,e.toDisplayString(r.value.unsettledAmount),1)]),e.createElementVNode("view",{class:"detail-item"},[e.createElementVNode("view",null,"可提现金额"),e.createElementVNode("text",null,e.toDisplayString(r.value.withdrawableAmount),1)])]),e.createElementVNode("view",{class:"clause"},[e.createElementVNode("view",{class:"clause-item"},[e.createElementVNode("view",{class:"money"},[e.createElementVNode("view",{class:"money-tilte"},[e.createElementVNode("view",null,"我的资产(元)"),e.createElementVNode("view",{class:"icons",onClick:u},[e.createVNode(n,{type:c.value?"eye-filled":"eye-slash-filled",color:"#fff",size:"20"},null,8,["type"])])]),c.value?(e.openBlock(),e.createElementBlock("view",{key:0,class:"money-num"},e.toDisplayString(r.value.totalAssets),1)):(e.openBlock(),e.createElementBlock("view",{key:1,class:"money-num"},"*****"))]),e.createElementVNode("view",{class:"but",onClick:a[0]||(a[0]=e=>h(`/pages/my/wallet/withdrawal?amount=${r.value.withdrawableAmount}`))},"提现")]),e.createElementVNode("view",{class:"clause-bill",onClick:a[1]||(a[1]=e=>h("/pages/my/wallet/bill"))},[e.createElementVNode("image",{src:"/static/my/mine-bill.png"}),e.createElementVNode("view",null,"账单")])])])])}}},Ou=ie(Ru,[["__scopeId","data-v-eb47bd5e"]]),Bu={__name:"mall-home",setup(t){e.useCssVars((e=>({"1298b08a":n.value})));const a=ae(),n=e.ref(a.statusBarHeight+"px"),r=e.ref(0);d((e=>{r.value=e.scrollTop}));const s=()=>{uni.navigateBack({delta:1})},c=e=>{o("log","at pages/shopping-mall/mall-home.vue:145","搜索关键词:",e.value)},u=e.ref([]),m=e.ref(""),p=e.ref([]),h=e.ref({}),v=e.ref({}),g=e.ref({}),f=e.computed((()=>{const e=u.value.find((e=>e.id===m.value));return e?e.children:[]})),y=e=>p.value.includes(e),_=e=>h.value[e]||[],k=e=>v.value[e]||[],E=async(e,t="second")=>{try{const a=`${t}-${e}`;g.value[a]=!0;const{data:n}=await ur({categoryId:e,level:t});"first"===t?v.value[e]=n.records||[]:h.value[e]=n.records||[]}catch(a){o("error","at pages/shopping-mall/mall-home.vue:236",`获取${t}分类${e}商品失败:`,a),"first"===t?v.value[e]=[]:h.value[e]=[]}finally{const a=`${t}-${e}`;g.value[a]=!1}},x=()=>{uni.navigateTo({url:"/pages/shopping-mall/order-list"})},N=e=>{uni.navigateTo({url:`/pages/shopping-mall/product-details?id=${e}`})};return l((async()=>{await(async()=>{try{const{data:e}=await cr();u.value=e}catch(e){o("error","at pages/shopping-mall/mall-home.vue:155","获取商品分类列表失败:",e)}})(),u.value.length&&(m.value=u.value[0].id,await E(u.value[0].id,"first"))})),(t,a)=>{const n=i(e.resolveDynamicComponent("uni-icons"),re),o=i(e.resolveDynamicComponent("uni-nav-bar"),Di),l=i(e.resolveDynamicComponent("uni-search-bar"),xe);return e.openBlock(),e.createElementBlock("view",{class:"settled-box"},[e.createElementVNode("scroll-view",{"scroll-y":"",class:"scroll-content","scroll-top":t.top,"show-scrollbar":!1,"scroll-with-animation":"",id:"scrollView"},[e.createElementVNode("view",{class:"header"},[e.createVNode(o,{class:e.normalizeClass([r.value>15?"scrollClass":"","header-bar"]),backgroundColor:"rgba(255,255,255,0)",border:!1,title:"健康商城"},{left:e.withCtx((()=>[e.createVNode(n,{type:"left",size:"24",onClick:s})])),_:1},8,["class"])]),e.createElementVNode("view",{class:"content"},[e.createElementVNode("view",{class:"features"},[e.createVNode(l,{class:"uni-mt-10",radius:"100",placeholder:"请输入商品名称搜索",clearButton:"auto",cancelButton:"none",onConfirm:c}),e.createElementVNode("view",{class:"function-icon",onClick:x},[e.createVNode(n,{"custom-prefix":"iconfont",type:"icon-wenjianjia",size:"15",color:"#434746"}),e.createElementVNode("view",{style:{"margin-left":"10rpx"}},"商品订单")])]),e.createElementVNode("view",{class:"category-container"},[e.createElementVNode("scroll-view",{class:"left-category","scroll-y":""},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(u.value,(t=>(e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["first-item",{active:t.id===m.value}]),key:t.id,onClick:e=>(async e=>{m.value=e.id,p.value=[],await E(e.id,"first")})(t)},[e.createElementVNode("view",{class:"first-title"},[e.createElementVNode("view",null,e.toDisplayString(t.name),1),t.id===m.value?(e.openBlock(),e.createElementBlock("image",{key:0,src:ji})):e.createCommentVNode("",!0)]),e.withDirectives(e.createElementVNode("view",{class:"first-line"},null,512),[[e.vShow,t.id==m.value]])],10,["onClick"])))),128))]),e.createElementVNode("scroll-view",{class:"right-content","scroll-y":""},[k(m.value).length?(e.openBlock(),e.createElementBlock("view",{key:0,class:"first-goods-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(k(m.value),(t=>(e.openBlock(),e.createElementBlock("view",{class:"goods-item",key:t.id,onClick:e=>N(t.id)},[e.createElementVNode("image",{src:t.thumbnail,class:"goods-img"},null,8,["src"]),e.createElementVNode("view",{class:"goods-info"},[e.createElementVNode("text",{class:"goods-name"},e.toDisplayString(t.name),1),e.createElementVNode("view",{class:"goods-tag"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.tags,(t=>(e.openBlock(),e.createElementBlock("text",{key:t,class:"tag-text"},e.toDisplayString(t),1)))),128))]),e.createElementVNode("view",{class:"goods-action"},[e.createElementVNode("text",{class:"goods-price"},"¥"+e.toDisplayString(t.minPrice),1),e.createVNode(n,{type:"plus-filled",size:"30",color:"#EB9516",class:"add-btn"})])])],8,["onClick"])))),128))])):e.createCommentVNode("",!0),f.value.length?(e.openBlock(),e.createElementBlock("view",{key:1},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(f.value,(t=>(e.openBlock(),e.createElementBlock("view",{class:"second-item",key:t.id,onClick:e=>(async e=>{const t=e.id,a=p.value.indexOf(t);a>-1?p.value.splice(a,1):(p.value.push(t),h.value[t]||g.value[`second-${t}`]||await E(t,"second"))})(t)},[e.createElementVNode("view",{class:"second-title"},[e.createElementVNode("text",{class:"title-text"},e.toDisplayString(t.name),1),e.createVNode(n,{"custom-prefix":"iconfont",type:y(t.id)?"icon-chevronsdownshuangxiajiantou":"icon-chevronsup-top",size:"18",color:"#A09797"},null,8,["type"])]),y(t.id)?(e.openBlock(),e.createElementBlock("view",{key:0,class:"goods-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(_(t.id),(t=>(e.openBlock(),e.createElementBlock("view",{class:"goods-item",key:t.id,onClick:e=>N(t.id)},[e.createElementVNode("image",{src:t.thumbnail,class:"goods-img"},null,8,["src"]),e.createElementVNode("view",{class:"goods-info"},[e.createElementVNode("text",{class:"goods-name"},e.toDisplayString(t.name),1),e.createElementVNode("view",{class:"goods-tag"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.tags,(t=>(e.openBlock(),e.createElementBlock("text",{key:t,class:"tag-text"},e.toDisplayString(t),1)))),128))]),e.createElementVNode("view",{class:"goods-action"},[e.createElementVNode("text",{class:"goods-price"},"¥"+e.toDisplayString(t.minPrice),1),e.createVNode(n,{type:"plus-filled",size:"30",color:"#EB9516",class:"add-btn"})])])],8,["onClick"])))),128)),0==_(t.id).length?(e.openBlock(),e.createElementBlock("view",{key:0,class:"empty-tip"},"暂无商品")):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)],8,["onClick"])))),128))])):k(m.value).length?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("view",{key:2,class:"empty-tip"},"暂无商品"))])])])],8,["scroll-top"]),e.createElementVNode("view",{class:"footer",onClick:a[0]||(a[0]=e=>uni.navigateTo({url:"/pages/shopping-mall/shopping-cart"}))},[e.createVNode(n,{type:"cart",size:"35",color:"#FF9800"})])])}}},Pu=ie(Bu,[["__scopeId","data-v-267c2fc6"]]),Uu=ie({__name:"product-details",setup(t){e.useCssVars((e=>({"7d169852":n.value})));const a=ae(),n=e.ref(a.statusBarHeight+"px"),r=e.ref(0),s=e.ref(0),c=e.ref(""),u=e.ref({});l((e=>{m(e.id),g(e.id)}));const d=()=>{uni.navigateBack({delta:1})},m=async e=>{try{const t=await((e,t={})=>A.get(`api/mall/product/detail?id=${e}`,t))(e);u.value=t.data,D(),b()}catch(t){o("log","at pages/shopping-mall/product-details.vue:279","获取商品详情失败:",t)}},p=e.ref(null),h=()=>{p.value.open()},v=e.ref([]),g=async e=>{let{data:t}=await Ci({targetUserId:e,page:1,pageSize:2});v.value=t.records},f=e.ref("purchase"),y=()=>{f.value="standard",_.value.open()},_=e.ref(null),k=()=>{_.value.open(),f.value="buy"},E=()=>{_.value.open(),f.value="cart"},x=()=>{uni.navigateTo({url:`/pages/consult-feel/consult-feel?userId=${c.value}&userInfo=${JSON.stringify(consultantInfo.value)}`})},N=e.ref({"颜色":"","尺寸":""}),w=e.ref([]),C=e.ref([]),M=e.ref([]),S=e.ref({}),I=e.ref(null),T=e.ref(1),D=()=>{const e={};u.value.skuList.forEach((t=>{const{"颜色":a,"尺寸":n}=t.specValues;e[a]||(e[a]=new Set),e[a].add(n)})),S.value=e,w.value=Object.keys(e);const t=new Set;u.value.skuList.forEach((e=>t.add(e.specValues.尺寸))),C.value=Array.from(t),w.value.length&&(N.value.颜色=w.value[0],M.value=Array.from(e[N.value.颜色]),M.value.length&&(N.value.尺寸=M.value[0]))},b=()=>{const{"颜色":e,"尺寸":t}=N.value;I.value=e&&t?u.value.skuList.find((a=>a.specValues.颜色===e&&a.specValues.尺寸===t)):null},V=()=>{T.value>1&&T.value--},L=()=>{T.value++},R=async()=>{if(!I.value)return showToast({title:"请选择商品规格",icon:"none"});try{await((e,t={})=>A.post("/api/mall/cart/add",e,t))({productId:u.value.id,quantity:T.value,skuId:I.value.id});uni.showToast({title:"加入购物车成功",icon:"success"}),_.value.close()}catch(e){o("log","at pages/shopping-mall/product-details.vue:434",e)}},O=()=>{if(!I.value)return showToast({title:"请选择商品规格",icon:"none"});o("log","at pages/shopping-mall/product-details.vue:451",{...u.value,currentSku:{...I.value,quantity:T.value},detailImages:null})};return(t,a)=>{const n=i(e.resolveDynamicComponent("uni-icons"),re),o=i(e.resolveDynamicComponent("uni-nav-bar"),Di),l=i(e.resolveDynamicComponent("uni-popup"),vi);return e.openBlock(),e.createElementBlock("view",{class:"consult-detail-box"},[e.createElementVNode("scroll-view",{"scroll-y":"",class:"scroll-content","scroll-top":s.value,"show-scrollbar":!1,"scroll-with-animation":"",id:"scrollView"},[e.createVNode(o,{backgroundColor:r.value>15?"#fff":"transparent",border:!1,title:r.value>15?t.consultantInfo.consultantName:"",class:"header-bar",statusBar:!0,fixed:""},{left:e.withCtx((()=>[e.createElementVNode("view",{class:"right"},[r.value>15?(e.openBlock(),e.createBlock(n,{key:0,type:"left",size:"24",onClick:d})):(e.openBlock(),e.createElementBlock("image",{key:1,src:Li,style:{width:"56rpx",height:"56rpx"},onClick:d}))])])),_:1},8,["backgroundColor","title"]),e.createElementVNode("view",{class:"consult-detail-content"},[e.createElementVNode("view",{class:"swiper-content"},[e.createElementVNode("view",{class:"uni-margin-wrap"},[e.createElementVNode("swiper",{class:"swiper",circular:"","indicator-dots":!0,autoplay:!0,interval:5e3,duration:500},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(u.value.mainImages,((t,a)=>(e.openBlock(),e.createElementBlock("swiper-item",{key:a,class:"swiper-item"},[e.createElementVNode("image",{src:JSON.parse(t).url,style:{height:"100%",width:"100%"}},null,8,["src"])])))),128))])])]),e.createElementVNode("view",{class:"consult-detail-info"},[e.createElementVNode("view",{class:"detail-item-line-1"},e.toDisplayString(u.value.name),1),e.createElementVNode("view",{class:"detail-item-line-2"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(u.value.tags,(t=>(e.openBlock(),e.createElementBlock("text",null,[e.createElementVNode("text",null,e.toDisplayString(t),1),t!==u.value.tags[u.value.tags.length-1]?(e.openBlock(),e.createElementBlock("text",{key:0}," | ")):e.createCommentVNode("",!0)])))),256))]),e.createElementVNode("view",{class:"detail-item-line-3"},[e.createElementVNode("view",{class:"content"},[e.createVNode(n,{"custom-prefix":"iconfont",type:"icon-xiaohuoche",size:"20",color:"#B5B5B5",class:"icon"}),e.createElementVNode("view",{class:"express"},[e.createElementVNode("text",null,"48小时发货"),e.createElementVNode("view",{class:"txt"},"快递费：包邮")])]),e.createElementVNode("view",{class:"content"},[e.createVNode(n,{"custom-prefix":"iconfont",type:"icon-dunpai",size:"20",color:"#B5B5B5",class:"icon"}),e.createElementVNode("view",{class:"guarantee"},[e.createElementVNode("view",null,"严选好物"),e.createElementVNode("view",null,"售后无忧"),e.createElementVNode("view",null,"诚信为本"),e.createElementVNode("view",null,"货真价实")])]),e.createElementVNode("view",{class:"content",onClick:y},[e.createVNode(n,{"custom-prefix":"iconfont",type:"icon-yingyongAPP_o",size:"20",color:"#B5B5B5",class:"icon"}),e.createElementVNode("view",{class:"standard"},[e.createElementVNode("view",{class:"txt"},"选择规格"),e.createVNode(n,{type:"down",size:"10",class:"icon"})])])]),e.createElementVNode("view",{class:"product-details"},[e.createElementVNode("view",{class:"content"},[e.createElementVNode("view",{class:"title"},[e.createElementVNode("text",null,"商品评价"),e.createElementVNode("text",{class:"line"})]),e.createElementVNode("view",{class:"comment",onClick:x},"全部评论 > ")]),0===v.value.length?(e.openBlock(),e.createElementBlock("view",{key:0,class:"no-evaluation"}," 暂无评价 ")):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(v.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"comment-item",key:a},[e.createElementVNode("view",{class:"item-header"},[e.createElementVNode("view",{class:"user"},[e.createElementVNode("image",{src:t.avatar,style:{"border-radius":"50%"}},null,8,["src"]),e.createElementVNode("text",null,e.toDisplayString(t.nickname),1)]),e.createElementVNode("view",{class:"date"},e.toDisplayString(t.createTime),1)]),e.createElementVNode("view",{class:"comment-item-content"},[e.createVNode(e.unref(Pi),{line:3,expandText:"展开",foldHint:"收起"},{default:e.withCtx((()=>[e.createTextVNode(e.toDisplayString(t.content),1)])),_:2},1024)])])))),128))]),e.createElementVNode("view",{class:"product-details"},[e.createElementVNode("view",{class:"content"},[e.createElementVNode("view",{class:"title"},[e.createElementVNode("text",null,"商品详情"),e.createElementVNode("text",{class:"line"})])]),0==u.value.detailImages?(e.openBlock(),e.createElementBlock("view",{key:0,class:"no-evaluation"}," 暂无商品详情 ")):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(u.value.detailImages,(t=>(e.openBlock(),e.createElementBlock("image",{key:t,src:JSON.parse(t).url,mode:"widthFix",style:{width:"100%"}},null,8,["src"])))),128))]),e.createElementVNode("view",{class:"anyway"},[e.createElementVNode("view",{class:"content"},[e.createElementVNode("view",{class:"wire"},"这里到底啦")])])])])],8,["scroll-top"]),e.createElementVNode("view",{class:"footer"},[e.createElementVNode("view",{class:"follow"},[e.createElementVNode("image",{src:qi}),e.createElementVNode("text",null,"关注")]),e.createElementVNode("view",{class:"contact",onClick:h},[e.createElementVNode("image",{src:zi}),e.createElementVNode("text",null,"客服")]),e.createElementVNode("view",{class:"message-but"},[e.createElementVNode("view",{class:"btn-cart",onClick:E},"加入购物车"),e.createElementVNode("view",{class:"btn-buy",onClick:k},"立即购买")])]),e.createVNode(l,{ref_key:"popup",ref:_,type:"bottom","border-radius":"20rpx 20rpx 0 0"},{default:e.withCtx((()=>{var t;return[e.createElementVNode("view",{class:"goods-container"},[e.createElementVNode("view",{class:"goods-header"},[e.createElementVNode("image",{class:"goods-img",src:u.value.thumbnail,mode:"widthFix"},null,8,["src"]),e.createElementVNode("view",{class:"goods-info"},[e.createElementVNode("text",{class:"goods-title"},"温馨坐凳居家必备首选"),e.createElementVNode("text",{class:"goods-price"},"¥"+e.toDisplayString((null==(t=I.value)?void 0:t.price)||0),1),e.createElementVNode("view",{class:"count-group"},[e.createElementVNode("view",{class:"count-btn",onClick:V,disabled:T.value<=1},"-",8,["disabled"]),e.createElementVNode("view",{class:"count"},e.toDisplayString(T.value),1),e.createElementVNode("view",{class:"count-btn",onClick:L},"+")])])]),e.createElementVNode("view",{class:"spec-group"},[e.createElementVNode("view",{class:"spec-item"},[e.createElementVNode("text",{class:"spec-label"},"颜色"),e.createElementVNode("view",{class:"spec-options"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(w.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["spec-option",{active:N.value.颜色===t}]),key:a,onClick:e=>(e=>{N.value.颜色=e,M.value=Array.from(S.value[e]||[]),M.value.length?N.value.尺寸=M.value[0]:N.value.尺寸="",b()})(t)},e.toDisplayString(t),11,["onClick"])))),128))])]),e.createElementVNode("view",{class:"spec-item"},[e.createElementVNode("text",{class:"spec-label"},"尺寸"),e.createElementVNode("view",{class:"spec-options"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(M.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["spec-option",{active:N.value.尺寸===t}]),key:a,onClick:e=>(e=>{N.value.尺寸=e,b()})(t)},e.toDisplayString(t),11,["onClick"])))),128))])])]),e.createElementVNode("view",{class:"btn-group"},[e.withDirectives(e.createElementVNode("view",{class:e.normalizeClass(["cart-btn","cart"==f.value?"actives":""]),onClick:R},"加入购物车",2),[[e.vShow,"cart"==f.value||"standard"==f.value]]),e.withDirectives(e.createElementVNode("view",{class:e.normalizeClass(["buy-btn","buy"==f.value?"actives":""]),onClick:O},"立即购买",2),[[e.vShow,"buy"==f.value||"standard"==f.value]])])])]})),_:1},512),e.createVNode(Mi,{ref_key:"serviceRef",ref:p},null,512)])}}},[["__scopeId","data-v-6989e55a"]]),Gu=ee("order",(()=>{const t=e.ref([]);return{orderList:t,setOrderList:e=>{t.value=e},clearOrderList:()=>{t.value=[]}}})),Fu=ie({__name:"Recommended-Product",setup(t){const a=e.ref([]);return e.onMounted((()=>{(async()=>{try{const{data:e}=await dr();a.value=e}catch(e){o("error","at components/Recommended-Product.vue:25","获取推荐商品失败:",e)}})()})),(t,n)=>(e.openBlock(),e.createElementBlock("view",{class:"recommend"},[e.createElementVNode("view",{class:"title"},"更多推荐"),e.createElementVNode("view",{class:"products"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.value,(t=>(e.openBlock(),e.createElementBlock("view",{key:t.id,onClick:e=>((e,t)=>{uni.navigateTo({url:`/pages/shopping-mall/product-details?id=${e.id}`})})(t),class:"product-item"},[e.createElementVNode("image",{src:t.thumbnail,alt:t.productName,class:"products-img"},null,8,["src","alt"]),e.createElementVNode("view",{class:"products-name"},e.toDisplayString(t.name),1)],8,["onClick"])))),128))])]))}},[["__scopeId","data-v-878e676b"]]),qu=120,zu={__name:"shopping-cart",setup(t){e.useCssVars((e=>({"15985fc9":n.value})));const a=ae(),n=e.ref(a.statusBarHeight+"px"),r=e.ref(0);d((e=>{r.value=e.scrollTop}));const l=()=>{uni.navigateBack({delta:1})},c=e.ref([]),u=e=>{o("log","at pages/shopping-mall/shopping-cart.vue:156","搜索关键词:",e.value)},m=async()=>{try{const{data:e}=await((e,t={})=>A.get("/api/mall/cart/list",e,t))();e.forEach((e=>{e.checked=!1})),c.value=e}catch(e){o("error","at pages/shopping-mall/shopping-cart.vue:168","获取购物车列表失败:",e)}},p=e.ref([]),h=e.computed((()=>c.value.every((e=>e.checked)))),v=e.computed((()=>c.value.filter((e=>e.checked)).reduce(((e,t)=>e+t.price*t.quantity),0).toFixed(2))),g=e.ref(!1),f=async(e,t)=>{try{await((e,t={})=>A.post("/api/mall/cart/update",e,t))({id:e,quantity:t})}catch(a){o("error","at pages/shopping-mall/shopping-cart.vue:240","更新购物车失败:",a)}},y=async e=>{try{await((e,t={})=>A.post("/api/mall/cart/delete",e,t))({id:e.id}),m(),E(),showToast({title:"删除成功",icon:"success"})}catch(t){o("error","at pages/shopping-mall/shopping-cart.vue:252","删除购物车商品失败:",t)}};let _=0;const k=()=>{c.value.forEach((e=>{e.slideX=0,e.isSliding=!1}))},E=()=>{},x=async()=>{const e=c.value.filter((e=>e.checked)).map((e=>e.id));0!==e.length?uni.showModal({title:"确认删除",content:"是否删除选中的商品？",async success(t){if(t.confirm)try{await mr({ids:e}),await m(),uni.showToast({title:"删除成功",icon:"success"})}catch(a){o("error","at pages/shopping-mall/shopping-cart.vue:329","批量删除失败:",a),uni.showToast({title:"删除失败",icon:"none"})}}}):uni.showToast({title:"请选择要删除的商品",icon:"none"})},N=async()=>{const e=c.value.map((e=>e.id));0!==e.length?uni.showModal({title:"确认清空",content:"是否清空整个购物车？",async success(t){if(t.confirm)try{await mr({ids:e}),c.value=[],uni.showToast({title:"清空成功",icon:"success"})}catch(a){o("error","at pages/shopping-mall/shopping-cart.vue:356","清空购物车失败:",a),uni.showToast({title:"清空失败",icon:"none"})}}}):uni.showToast({title:"购物车已为空",icon:"none"})},w=e=>{uni.navigateTo({url:`/pages/shopping-mall/product-details?id=${e.productId}`}),o("log","at pages/shopping-mall/shopping-cart.vue:369","添加到购物车:",e)},C=Gu(),M=()=>{const e=c.value.filter((e=>e.checked));0!==e.length?(C.setOrderList(e),uni.navigateTo({url:"/pages/shopping-mall/order-confirmation"})):uni.showToast({title:"请选择要购买的商品",icon:"none"})};return s((()=>{m(),(async()=>{try{const{data:e}=await dr();p.value=e}catch(e){o("error","at pages/shopping-mall/shopping-cart.vue:179","获取推荐商品失败:",e)}})()})),(t,a)=>{const n=i(e.resolveDynamicComponent("uni-icons"),re),o=i(e.resolveDynamicComponent("uni-nav-bar"),Di),s=i(e.resolveDynamicComponent("uni-search-bar"),xe);return e.openBlock(),e.createElementBlock("view",{class:"settled-box"},[e.createElementVNode("scroll-view",{"scroll-y":"",class:"scroll-content","scroll-top":t.top,"show-scrollbar":!1,"scroll-with-animation":"",id:"scrollView"},[e.createElementVNode("view",{class:"header"},[e.createVNode(o,{class:e.normalizeClass([r.value>15?"scrollClass":"","header-bar"]),backgroundColor:"rgba(255,255,255,0)",border:!1,title:"购物车"},{left:e.withCtx((()=>[e.createVNode(n,{type:"left",size:"24",onClick:l})])),_:1},8,["class"])]),e.createElementVNode("view",{class:"content"},[e.createElementVNode("view",{class:"features"},[e.createVNode(s,{class:"uni-mt-10",radius:"100",placeholder:"请输入商品名称搜索",clearButton:"auto",cancelButton:"none",onConfirm:u}),e.createElementVNode("view",{class:"function-icon",onClick:x},[e.createVNode(n,{type:"trash-filled",size:"20",color:"#ff0000"}),e.createElementVNode("view",null,"删除")]),e.createElementVNode("view",{class:"boundary"}),e.createElementVNode("view",{class:"function-icon clear",onClick:N},[e.createVNode(n,{type:"clear",color:"#34C759",size:"20"}),e.createElementVNode("view",null,"清空")])]),e.createElementVNode("view",{class:"lists"},[0==c.value.length?(e.openBlock(),e.createElementBlock("view",{key:0,class:"empty-cart"},[e.createElementVNode("image",{src:"/static/settled/shopping-cart.png"}),e.createElementVNode("view",null,"小车空空啦，快去加购吧")])):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"cart-item",key:t.id},[e.createElementVNode("movable-area",{class:"movable-area"},[e.createElementVNode("movable-view",{class:"movable-view",direction:"horizontal",x:t.slideX,onTouchstart:e=>((e,t)=>{k(),_=t.touches[0].clientX,c.value[e].isSliding=!0})(a,e),onTouchmove:e=>((e,t)=>{const a=c.value[e];if(!a.isSliding)return;const n=t.touches[0].clientX,o=_-n;a.slideX=o<=0?0:o>=qu?-120:-o})(a,e),onTouchend:e=>(e=>{const t=c.value[e];t.isSliding=!1,Math.abs(t.slideX)>60?t.slideX=-120:t.slideX=0})(a)},[e.createElementVNode("view",{class:"cart-item-content"},[e.createElementVNode("view",{class:e.normalizeClass({"cart-item-show":Math.abs(t.slideX)>0})},null,2),e.createElementVNode("view",{class:"cart-radio-wrap",onClick:e=>(e=>{k(),c.value[e].checked=!c.value[e].checked})(a)},[e.createVNode(n,{type:t.checked?"checkbox-filled":"circle",size:"25",color:t.checked?"#ff9900":"#ccc"},null,8,["type","color"])],8,["onClick"]),e.createElementVNode("view",{class:"cart-item-info"},[e.createElementVNode("image",{class:"cart-item-img",src:t.thumbnail,mode:"widthFix",onClick:e=>w(t)},null,8,["src","onClick"]),e.createElementVNode("view",{class:"cart-item-detail"},[e.createElementVNode("text",{class:"cart-item-title",onClick:e=>w(t)},e.toDisplayString(t.productName),9,["onClick"]),e.createElementVNode("view",{class:"cart-item-spec",onClick:e=>w(t)},[e.createElementVNode("text",null,e.toDisplayString(Object.values(t.specValues).join(";")),1),e.createElementVNode("text",{class:"cart-item-price"},"¥"+e.toDisplayString(t.price),1)],8,["onClick"]),e.createElementVNode("view",{class:"count-group"},[e.createElementVNode("view",{class:"count-btn minus-btn",onClick:e=>(e=>{k(),c.value[e].quantity>1?(c.value[e].quantity--,f(c.value[e].id,c.value[e].quantity)):showToast({title:"数量不能少于1",icon:"none"})})(a),disabled:t.quantity<=1},[e.createElementVNode("view",null,"-"),e.createElementVNode("view",{class:"line"})],8,["onClick","disabled"]),e.createElementVNode("view",{class:"count"},e.toDisplayString(t.quantity),1),e.createElementVNode("view",{class:"count-btn plus-btn",onClick:e=>(e=>{k(),c.value[e].quantity++,f(c.value[e].id,c.value[e].quantity)})(a)},[e.createElementVNode("view",{class:"line"}),e.createElementVNode("view",null,"+")],8,["onClick"])])])])]),e.createElementVNode("view",{class:"cart-item-delete",onClick:e=>y(t)},[e.createVNode(n,{type:"trash-filled",size:"25",color:"#fff"}),e.createElementVNode("text",{class:"delete-text"},"删除")],8,["onClick"])],40,["x","onTouchstart","onTouchmove","onTouchend"])])])))),128))]),e.createVNode(Fu)])],8,["scroll-top"]),e.createElementVNode("view",{class:"footer"},[e.createElementVNode("view",{class:"all-check",onClick:a[0]||(a[0]=e=>(e=>{k();const t=!h.value;g.value=t,c.value.forEach((e=>{e.checked=t}))})())},[e.createVNode(n,{type:g.value?"checkbox-filled":"circle",size:"25",color:g.value?"#ff9900":"#ccc"},null,8,["type","color"]),e.createTextVNode(" 全选 ")]),e.createElementVNode("view",{class:"message-but"},[e.createElementVNode("view",{class:"btn-cart",onClick:a[1]||(a[1]=(...e)=>t.addToCart&&t.addToCart(...e))},[e.createElementVNode("view",null,"合计："),e.createElementVNode("view",{class:"total-price"},"¥"+e.toDisplayString(v.value),1)]),e.createElementVNode("view",{class:"btn-buy",onClick:M},"结算")])])])}}},Hu=ie(zu,[["__scopeId","data-v-238d3351"]]),$u={__name:"delivery-address",setup(t){e.useCssVars((e=>({"361c1fd4":n.value})));const a=ae(),n=e.ref(a.statusBarHeight+"px"),r=e.ref(0);d((e=>{r.value=e.scrollTop}));const l=()=>{uni.navigateBack({delta:1})},c=e.ref([]),u=async()=>{try{const e=await((e,t={})=>A.get("/api/mall/address/list",e,t))();c.value=e.data.map((e=>({...e,checked:!1})))}catch(e){o("error","at pages/shopping-mall/delivery-address.vue:96","获取地址列表失败:",e)}},m=()=>{uni.navigateTo({url:"/pages/shopping-mall/operation-address"})},p=e.ref(null),h=async()=>{if(p.value)try{await((e,t={})=>A.post("/api/mall/address/delete",e,t))(p.value),uni.showToast({title:"删除成功",icon:"none"}),u()}catch(e){o("error","at pages/shopping-mall/delivery-address.vue:135","删除地址失败:",e)}else uni.showToast({title:"请选择要删除的地址",icon:"none"})};return s((()=>{u()})),(t,a)=>{const n=i(e.resolveDynamicComponent("uni-icons"),re),o=i(e.resolveDynamicComponent("uni-nav-bar"),Di);return e.openBlock(),e.createElementBlock("view",{class:"settled-box"},[e.createElementVNode("scroll-view",{"scroll-y":"",class:"scroll-content","scroll-top":t.top,"show-scrollbar":!1,"scroll-with-animation":"",id:"scrollView"},[e.createElementVNode("view",{class:"header"},[e.createVNode(o,{class:e.normalizeClass([r.value>15?"scrollClass":"","header-bar"]),backgroundColor:"rgba(255,255,255,0)",border:!1,title:"收货地址"},{left:e.withCtx((()=>[e.createVNode(n,{type:"left",size:"24",onClick:l})])),right:e.withCtx((()=>[e.createElementVNode("view",{class:"function-icon",onClick:h},[e.createVNode(n,{type:"trash-filled",size:"20",color:"#ff0000"}),e.createElementVNode("view",null,"删除")])])),_:1},8,["class"])]),e.createElementVNode("view",{class:"content"},[e.createElementVNode("view",{class:"content-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.value,(t=>(e.openBlock(),e.createElementBlock("view",{class:"content-item"},[1==t.isDefault?(e.openBlock(),e.createElementBlock("image",{key:0,src:"/static/register/default.png",class:"content-tag"})):e.createCommentVNode("",!0),e.createVNode(n,{type:t.checked?"checkbox-filled":"circle",color:t.checked?"#ff9900":"#ccc",size:"25",onClick:e=>(e=>{c.value=c.value.map((t=>({...t,checked:t.id===e.id}))),p.value=e})(t)},null,8,["type","color","onClick"]),e.createElementVNode("view",{class:"item-info"},[e.createElementVNode("view",{class:"item-address"},[e.createElementVNode("view",null,e.toDisplayString(t.province),1),e.createElementVNode("view",null,e.toDisplayString(t.city),1),e.createElementVNode("view",null,e.toDisplayString(t.district),1)]),e.createElementVNode("view",{class:"item-detail"},e.toDisplayString(t.detailAddress),1),e.createElementVNode("view",{class:"item-receiver"},[e.createElementVNode("view",null,e.toDisplayString(t.receiverName),1),e.createElementVNode("view",null,e.toDisplayString(t.receiverPhone),1)])]),e.createVNode(n,{type:"compose",size:"30",color:"#a7a7a7",onClick:e=>(e=>{uni.navigateTo({url:`/pages/shopping-mall/operation-address?info=${JSON.stringify(e)}`})})(t)},null,8,["onClick"])])))),256))])]),e.createElementVNode("view",{class:"boundary"},"删除地址，需在列表框选中对应地址再点击删除")],8,["scroll-top"]),e.createElementVNode("view",{class:"footer"},[e.createElementVNode("view",{class:"btn-buy",onClick:m},"新增收货地址")])])}}},ju=ie($u,[["__scopeId","data-v-28cec999"]]),Ku={props:{localdata:{type:[Array,Object],default:()=>[]},spaceInfo:{type:Object,default:()=>({})},collection:{type:String,default:""},action:{type:String,default:""},field:{type:String,default:""},orderby:{type:String,default:""},where:{type:[String,Object],default:""},pageData:{type:String,default:"add"},pageCurrent:{type:Number,default:1},pageSize:{type:Number,default:500},getcount:{type:[Boolean,String],default:!1},getone:{type:[Boolean,String],default:!1},gettree:{type:[Boolean,String],default:!1},manual:{type:Boolean,default:!1},value:{type:[Array,String,Number],default:()=>[]},modelValue:{type:[Array,String,Number],default:()=>[]},preload:{type:Boolean,default:!1},stepSearh:{type:Boolean,default:!0},selfField:{type:String,default:""},parentField:{type:String,default:""},multiple:{type:Boolean,default:!1},map:{type:Object,default:()=>({text:"text",value:"value"})}},data(){return{loading:!1,errorMessage:"",loadMore:{contentdown:"",contentrefresh:"",contentnomore:""},dataList:[],selected:[],selectedIndex:0,page:{current:this.pageCurrent,size:this.pageSize,count:0}}},computed:{isLocalData(){return!this.collection.length},isCloudData(){return this.collection.length>0},isCloudDataList(){return this.isCloudData&&!this.parentField&&!this.selfField},isCloudDataTree(){return this.isCloudData&&this.parentField&&this.selfField},dataValue(){return(Array.isArray(this.modelValue)?this.modelValue.length>0:null!==this.modelValue||void 0!==this.modelValue)?this.modelValue:this.value},hasValue(){return"number"==typeof this.dataValue||null!=this.dataValue&&this.dataValue.length>0}},created(){this.$watch((()=>{var e=[];return["pageCurrent","pageSize","spaceInfo","value","modelValue","localdata","collection","action","field","orderby","where","getont","getcount","gettree"].forEach((t=>{e.push(this[t])})),e}),((e,t)=>{for(let a=2;a<e.length&&e[a]==t[a];a++);e[0]!=t[0]&&(this.page.current=this.pageCurrent),this.page.size=this.pageSize,this.onPropsChange()})),this._treeData=[]},methods:{onPropsChange(){this._treeData=[]},async loadData(){this.isLocalData?this.loadLocalData():this.isCloudDataList?this.loadCloudDataList():this.isCloudDataTree&&this.loadCloudDataTree()},async loadLocalData(){this._treeData=[],this._extractTree(this.localdata,this._treeData);let e=this.dataValue;void 0!==e&&(Array.isArray(e)&&(e=e[e.length-1],"object"==typeof e&&e[this.map.value]&&(e=e[this.map.value])),this.selected=this._findNodePath(e,this.localdata))},async loadCloudDataList(){if(!this.loading){this.loading=!0;try{let e=(await this.getCommand()).result.data;this._treeData=e,this._updateBindData(),this._updateSelected(),this.onDataChange()}catch(Ft){this.errorMessage=Ft}finally{this.loading=!1}}},async loadCloudDataTree(){if(!this.loading){this.loading=!0;try{let e={field:this._cloudDataPostField(),where:this._cloudDataTreeWhere()};this.gettree&&(e.startwith=`${this.selfField}=='${this.dataValue}'`);let t=(await this.getCommand(e)).result.data;this._treeData=t,this._updateBindData(),this._updateSelected(),this.onDataChange()}catch(Ft){this.errorMessage=Ft}finally{this.loading=!1}}},async loadCloudDataNode(e){if(!this.loading){this.loading=!0;try{let t={field:this._cloudDataPostField(),where:this._cloudDataNodeWhere()};e((await this.getCommand(t)).result.data)}catch(Ft){this.errorMessage=Ft}finally{this.loading=!1}}},getCloudDataValue(){return this.isCloudDataList?this.getCloudDataListValue():this.isCloudDataTree?this.getCloudDataTreeValue():void 0},getCloudDataListValue(){let e=[],t=this._getForeignKeyByField();return t&&e.push(`${t} == '${this.dataValue}'`),e=e.join(" || "),this.where&&(e=`(${this.where}) && (${e})`),this.getCommand({field:this._cloudDataPostField(),where:e}).then((e=>(this.selected=e.result.data,e.result.data)))},getCloudDataTreeValue(){return this.getCommand({field:this._cloudDataPostField(),getTreePath:{startWith:`${this.selfField}=='${this.dataValue}'`}}).then((e=>{let t=[];return this._extractTreePath(e.result.data,t),this.selected=t,t}))},getCommand(e={}){let t=Io.database(this.spaceInfo);const a=e.action||this.action;a&&(t=t.action(a));const n=e.collection||this.collection;t=t.collection(n);const o=e.where||this.where;o&&Object.keys(o).length&&(t=t.where(o));const i=e.field||this.field;i&&(t=t.field(i));const r=e.orderby||this.orderby;r&&(t=t.orderBy(r));const s=void 0!==e.pageCurrent?e.pageCurrent:this.page.current,l=void 0!==e.pageSize?e.pageSize:this.page.size,c={getCount:void 0!==e.getcount?e.getcount:this.getcount,getTree:void 0!==e.gettree?e.gettree:this.gettree};return e.getTreePath&&(c.getTreePath=e.getTreePath),t=t.skip(l*(s-1)).limit(l).get(c),t},_cloudDataPostField(){let e=[this.field];return this.parentField&&e.push(`${this.parentField} as parent_value`),e.join(",")},_cloudDataTreeWhere(){let e=[],t=this.selected,a=this.parentField;if(a&&e.push(`${a} == null || ${a} == ""`),t.length)for(var n=0;n<t.length-1;n++)e.push(`${a} == '${t[n].value}'`);let o=[];return this.where&&o.push(`(${this.where})`),e.length&&o.push(`(${e.join(" || ")})`),o.join(" && ")},_cloudDataNodeWhere(){let e=[],t=this.selected;return t.length&&e.push(`${this.parentField} == '${t[t.length-1].value}'`),e=e.join(" || "),this.where?`(${this.where}) && (${e})`:e},_getWhereByForeignKey(){let e=[],t=this._getForeignKeyByField();return t&&e.push(`${t} == '${this.dataValue}'`),this.where?`(${this.where}) && (${e.join(" || ")})`:e.join(" || ")},_getForeignKeyByField(){let e=this.field.split(","),t=null;for(let a=0;a<e.length;a++){const n=e[a].split("as");if(!(n.length<2)&&"value"===n[1].trim()){t=n[0].trim();break}}return t},_updateBindData(e){const{dataList:t,hasNodes:a}=this._filterData(this._treeData,this.selected);let n=!1===this._stepSearh&&!a;return e&&(e.isleaf=n),this.dataList=t,this.selectedIndex=t.length-1,!n&&this.selected.length<t.length&&this.selected.push({value:null,text:"请选择"}),{isleaf:n,hasNodes:a}},_updateSelected(){let e=this.dataList,t=this.selected,a=this.map.text,n=this.map.value;for(let o=0;o<t.length;o++){let i=t[o].value,r=e[o];for(let e=0;e<r.length;e++){let s=r[e];if(s[n]===i){t[o].text=s[a];break}}}},_filterData(e,t){let a=[],n=!0;a.push(e.filter((e=>null===e.parent_value||void 0===e.parent_value||""===e.parent_value)));for(let o=0;o<t.length;o++){let i=t[o].value,r=e.filter((e=>e.parent_value===i));r.length?a.push(r):n=!1}return{dataList:a,hasNodes:n}},_extractTree(e,t,a){let n=this.map.value;for(let o=0;o<e.length;o++){let i=e[o],r={};for(let e in i)"children"!==e&&(r[e]=i[e]);null!=a&&""!==a&&(r.parent_value=a),t.push(r);let s=i.children;s&&this._extractTree(s,t,i[n])}},_extractTreePath(e,t){for(let a=0;a<e.length;a++){let n=e[a],o={};for(let e in n)"children"!==e&&(o[e]=n[e]);t.push(o);let i=n.children;i&&this._extractTreePath(i,t)}},_findNodePath(e,t,a=[]){let n=this.map.text,o=this.map.value;for(let i=0;i<t.length;i++){let r=t[i],s=r.children,l=r[n],c=r[o];if(a.push({value:c,text:l}),c===e)return a;if(s){const t=this._findNodePath(e,s,a);if(t.length)return t}a.pop()}return[]}}};const Yu={name:"UniDataPicker",emits:["popupopened","popupclosed","nodeclick","input","change","update:modelValue","inputclick"],mixins:[Ku],components:{DataPickerView:ie({name:"UniDataPickerView",emits:["nodeclick","change","datachange","update:modelValue"],mixins:[Ku],props:{managedMode:{type:Boolean,default:!1},ellipsis:{type:Boolean,default:!0}},created(){this.managedMode||this.$nextTick((()=>{this.loadData()}))},methods:{onPropsChange(){this._treeData=[],this.selectedIndex=0,this.$nextTick((()=>{this.loadData()}))},handleSelect(e){this.selectedIndex=e},handleNodeClick(e,t,a){if(e.disable)return;const n=this.dataList[t][a],o=n[this.map.text],i=n[this.map.value];if(t<this.selected.length-1?(this.selected.splice(t,this.selected.length-t),this.selected.push({text:o,value:i})):t===this.selected.length-1&&this.selected.splice(t,1,{text:o,value:i}),n.isleaf)return void this.onSelectedChange(n,n.isleaf);const{isleaf:r,hasNodes:s}=this._updateBindData();this.isLocalData?this.onSelectedChange(n,!s||r):this.isCloudDataList?this.onSelectedChange(n,!0):this.isCloudDataTree&&(r?this.onSelectedChange(n,n.isleaf):s||this.loadCloudDataNode((e=>{e.length?(this._treeData.push(...e),this._updateBindData(n)):n.isleaf=!0,this.onSelectedChange(n,n.isleaf)})))},updateData(e){this._treeData=e.treeData,this.selected=e.selected,this._treeData.length?this._updateBindData():this.loadData()},onDataChange(){this.$emit("datachange")},onSelectedChange(e,t){t&&this._dispatchEvent(),e&&this.$emit("nodeclick",e)},_dispatchEvent(){this.$emit("change",this.selected.slice(0))}}},[["render",function(t,a,n,o,r,s){const l=i(e.resolveDynamicComponent("uni-load-more"),Vo);return e.openBlock(),e.createElementBlock("view",{class:"uni-data-pickerview"},[t.isCloudDataList?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("scroll-view",{key:0,class:"selected-area","scroll-x":"true"},[e.createElementVNode("view",{class:"selected-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.selected,((a,n)=>(e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["selected-item",{"selected-item-active":n==t.selectedIndex}]),key:n,onClick:e=>s.handleSelect(n)},[e.createElementVNode("text",null,e.toDisplayString(a.text||""),1)],10,["onClick"])))),128))])])),e.createElementVNode("view",{class:"tab-c"},[e.createElementVNode("scroll-view",{class:"list","scroll-y":!0},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.dataList[t.selectedIndex],((a,n)=>(e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["item",{"is-disabled":!!a.disable}]),key:n,onClick:e=>s.handleNodeClick(a,t.selectedIndex,n)},[e.createElementVNode("text",{class:"item-text"},e.toDisplayString(a[t.map.text]),1),t.selected.length>t.selectedIndex&&a[t.map.value]==t.selected[t.selectedIndex].value?(e.openBlock(),e.createElementBlock("view",{key:0,class:"check"})):e.createCommentVNode("",!0)],10,["onClick"])))),128))]),t.loading?(e.openBlock(),e.createElementBlock("view",{key:0,class:"loading-cover"},[e.createVNode(l,{class:"load-more",contentText:t.loadMore,status:"loading"},null,8,["contentText"])])):e.createCommentVNode("",!0),t.errorMessage?(e.openBlock(),e.createElementBlock("view",{key:1,class:"error-message"},[e.createElementVNode("text",{class:"error-text"},e.toDisplayString(t.errorMessage),1)])):e.createCommentVNode("",!0)])])}],["__scopeId","data-v-ba9f1084"]])},props:{options:{type:[Object,Array],default:()=>({})},popupTitle:{type:String,default:"请选择"},placeholder:{type:String,default:"请选择"},heightMobile:{type:String,default:""},readonly:{type:Boolean,default:!1},clearIcon:{type:Boolean,default:!0},border:{type:Boolean,default:!0},split:{type:String,default:"/"},ellipsis:{type:Boolean,default:!0}},data:()=>({isOpened:!1,inputSelected:[]}),created(){this.$nextTick((()=>{this.load()}))},watch:{localdata:{handler(){this.load()},deep:!0}},methods:{clear(){this._dispatchEvent([])},onPropsChange(){this._treeData=[],this.selectedIndex=0,this.load()},load(){this.readonly?this._processReadonly(this.localdata,this.dataValue):this.isLocalData?(this.loadData(),this.inputSelected=this.selected.slice(0)):(this.isCloudDataList||this.isCloudDataTree)&&(this.loading=!0,this.getCloudDataValue().then((e=>{this.loading=!1,this.inputSelected=e})).catch((e=>{this.loading=!1,this.errorMessage=e})))},show(){this.isOpened=!0,setTimeout((()=>{this.$refs.pickerView.updateData({treeData:this._treeData,selected:this.selected,selectedIndex:this.selectedIndex})}),200),this.$emit("popupopened")},hide(){this.isOpened=!1,this.$emit("popupclosed")},handleInput(){this.readonly?this.$emit("inputclick"):this.show()},handleClose(e){this.hide()},onnodeclick(e){this.$emit("nodeclick",e)},ondatachange(e){this._treeData=this.$refs.pickerView._treeData},onchange(e){this.hide(),this.$nextTick((()=>{this.inputSelected=e})),this._dispatchEvent(e)},_processReadonly(e,t){if(e.findIndex((e=>e.children))>-1){let e;return Array.isArray(t)?(e=t[t.length-1],"object"==typeof e&&e.value&&(e=e.value)):e=t,void(this.inputSelected=this._findNodePath(e,this.localdata))}if(!this.hasValue)return void(this.inputSelected=[]);let a=[];if(Array.isArray(t))for(let i=0;i<t.length;i++){var n=t[i],o=e.find((e=>e.value==n));o&&a.push(o)}else{let n=e.find((e=>e.value==t));n&&a.push(n)}a.length&&(this.inputSelected=a)},_filterForArray(e,t){var a=[];for(let i=0;i<t.length;i++){var n=t[i],o=e.find((e=>e.value==n));o&&a.push(o)}return a},_dispatchEvent(e){let t={};if(e.length){for(var a=new Array(e.length),n=0;n<e.length;n++)a[n]=e[n].value;t=e[e.length-1]}else t.value="";this.formItem&&this.formItem.setValue(t.value),this.$emit("input",t.value),this.$emit("update:modelValue",t.value),this.$emit("change",{detail:{value:e}})}}};const Wu=ie(Yu,[["render",function(t,a,n,o,r,s){const l=i(e.resolveDynamicComponent("uni-load-more"),Vo),c=i(e.resolveDynamicComponent("uni-icons"),re),u=e.resolveComponent("data-picker-view");return e.openBlock(),e.createElementBlock("view",{class:"uni-data-tree"},[e.createElementVNode("view",{class:"uni-data-tree-input",onClick:a[1]||(a[1]=(...e)=>s.handleInput&&s.handleInput(...e))},[e.renderSlot(t.$slots,"default",{options:n.options,data:r.inputSelected,error:t.errorMessage},(()=>[e.createElementVNode("view",{class:e.normalizeClass(["input-value",{"input-value-border":n.border}])},[t.errorMessage?(e.openBlock(),e.createElementBlock("text",{key:0,class:"selected-area error-text"},e.toDisplayString(t.errorMessage),1)):t.loading&&!r.isOpened?(e.openBlock(),e.createElementBlock("view",{key:1,class:"selected-area"},[e.createVNode(l,{class:"load-more",contentText:t.loadMore,status:"loading"},null,8,["contentText"])])):r.inputSelected.length?(e.openBlock(),e.createElementBlock("scroll-view",{key:2,class:"selected-area","scroll-x":"true"},[e.createElementVNode("view",{class:"selected-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.inputSelected,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"selected-item",key:a},[e.createElementVNode("text",{class:"text-color"},e.toDisplayString(t.text),1),a<r.inputSelected.length-1?(e.openBlock(),e.createElementBlock("text",{key:0,class:"input-split-line"},e.toDisplayString(n.split),1)):e.createCommentVNode("",!0)])))),128))])])):(e.openBlock(),e.createElementBlock("text",{key:3,class:"selected-area placeholder"},e.toDisplayString(n.placeholder),1)),n.clearIcon&&!n.readonly&&r.inputSelected.length?(e.openBlock(),e.createElementBlock("view",{key:4,class:"icon-clear",onClick:a[0]||(a[0]=e.withModifiers(((...e)=>s.clear&&s.clear(...e)),["stop"]))},[e.createVNode(c,{type:"clear",color:"#c0c4cc",size:"24"})])):e.createCommentVNode("",!0),n.clearIcon&&r.inputSelected.length||n.readonly?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("view",{key:5,class:"arrow-area"},[e.createElementVNode("view",{class:"input-arrow"})]))],2)]),!0)]),r.isOpened?(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-data-tree-cover",onClick:a[2]||(a[2]=(...e)=>s.handleClose&&s.handleClose(...e))})):e.createCommentVNode("",!0),r.isOpened?(e.openBlock(),e.createElementBlock("view",{key:1,class:"uni-data-tree-dialog"},[e.createElementVNode("view",{class:"uni-popper__arrow"}),e.createElementVNode("view",{class:"dialog-caption"},[e.createElementVNode("view",{class:"title-area"},[e.createElementVNode("text",{class:"dialog-title"},e.toDisplayString(n.popupTitle),1)]),e.createElementVNode("view",{class:"dialog-close",onClick:a[3]||(a[3]=(...e)=>s.handleClose&&s.handleClose(...e))},[e.createElementVNode("view",{class:"dialog-close-plus","data-id":"close"}),e.createElementVNode("view",{class:"dialog-close-plus dialog-close-rotate","data-id":"close"})])]),e.createVNode(u,{class:"picker-view",ref:"pickerView",modelValue:t.dataValue,"onUpdate:modelValue":a[4]||(a[4]=e=>t.dataValue=e),localdata:t.localdata,preload:t.preload,collection:t.collection,field:t.field,orderby:t.orderby,where:t.where,"step-searh":t.stepSearh,"self-field":t.selfField,"parent-field":t.parentField,"managed-mode":!0,map:t.map,ellipsis:n.ellipsis,onChange:s.onchange,onDatachange:s.ondatachange,onNodeclick:s.onnodeclick},null,8,["modelValue","localdata","preload","collection","field","orderby","where","step-searh","self-field","parent-field","map","ellipsis","onChange","onDatachange","onNodeclick"])])):e.createCommentVNode("",!0)])}],["__scopeId","data-v-b2189aa4"]]),Ju=[{value:"11",text:"北京市",children:[{value:"1101",text:"市辖区",children:[{value:"110101",text:"东城区"},{value:"110102",text:"西城区"},{value:"110105",text:"朝阳区"},{value:"110106",text:"丰台区"},{value:"110107",text:"石景山区"},{value:"110108",text:"海淀区"},{value:"110109",text:"门头沟区"},{value:"110111",text:"房山区"},{value:"110112",text:"通州区"},{value:"110113",text:"顺义区"},{value:"110114",text:"昌平区"},{value:"110115",text:"大兴区"},{value:"110116",text:"怀柔区"},{value:"110117",text:"平谷区"},{value:"110118",text:"密云区"},{value:"110119",text:"延庆区"}]}]},{value:"12",text:"天津市",children:[{value:"1201",text:"市辖区",children:[{value:"120101",text:"和平区"},{value:"120102",text:"河东区"},{value:"120103",text:"河西区"},{value:"120104",text:"南开区"},{value:"120105",text:"河北区"},{value:"120106",text:"红桥区"},{value:"120110",text:"东丽区"},{value:"120111",text:"西青区"},{value:"120112",text:"津南区"},{value:"120113",text:"北辰区"},{value:"120114",text:"武清区"},{value:"120115",text:"宝坻区"},{value:"120116",text:"滨海新区"},{value:"120117",text:"宁河区"},{value:"120118",text:"静海区"},{value:"120119",text:"蓟州区"}]}]},{value:"13",text:"河北省",children:[{value:"1301",text:"石家庄市",children:[{value:"130102",text:"长安区"},{value:"130104",text:"桥西区"},{value:"130105",text:"新华区"},{value:"130107",text:"井陉矿区"},{value:"130108",text:"裕华区"},{value:"130109",text:"藁城区"},{value:"130110",text:"鹿泉区"},{value:"130111",text:"栾城区"},{value:"130121",text:"井陉县"},{value:"130123",text:"正定县"},{value:"130125",text:"行唐县"},{value:"130126",text:"灵寿县"},{value:"130127",text:"高邑县"},{value:"130128",text:"深泽县"},{value:"130129",text:"赞皇县"},{value:"130130",text:"无极县"},{value:"130131",text:"平山县"},{value:"130132",text:"元氏县"},{value:"130133",text:"赵县"},{value:"130171",text:"石家庄高新技术产业开发区"},{value:"130172",text:"石家庄循环化工园区"},{value:"130181",text:"辛集市"},{value:"130183",text:"晋州市"},{value:"130184",text:"新乐市"}]},{value:"1302",text:"唐山市",children:[{value:"130202",text:"路南区"},{value:"130203",text:"路北区"},{value:"130204",text:"古冶区"},{value:"130205",text:"开平区"},{value:"130207",text:"丰南区"},{value:"130208",text:"丰润区"},{value:"130209",text:"曹妃甸区"},{value:"130224",text:"滦南县"},{value:"130225",text:"乐亭县"},{value:"130227",text:"迁西县"},{value:"130229",text:"玉田县"},{value:"130271",text:"河北唐山芦台经济开发区"},{value:"130272",text:"唐山市汉沽管理区"},{value:"130273",text:"唐山高新技术产业开发区"},{value:"130274",text:"河北唐山海港经济开发区"},{value:"130281",text:"遵化市"},{value:"130283",text:"迁安市"},{value:"130284",text:"滦州市"}]},{value:"1303",text:"秦皇岛市",children:[{value:"130302",text:"海港区"},{value:"130303",text:"山海关区"},{value:"130304",text:"北戴河区"},{value:"130306",text:"抚宁区"},{value:"130321",text:"青龙满族自治县"},{value:"130322",text:"昌黎县"},{value:"130324",text:"卢龙县"},{value:"130371",text:"秦皇岛市经济技术开发区"},{value:"130372",text:"北戴河新区"}]},{value:"1304",text:"邯郸市",children:[{value:"130402",text:"邯山区"},{value:"130403",text:"丛台区"},{value:"130404",text:"复兴区"},{value:"130406",text:"峰峰矿区"},{value:"130407",text:"肥乡区"},{value:"130408",text:"永年区"},{value:"130423",text:"临漳县"},{value:"130424",text:"成安县"},{value:"130425",text:"大名县"},{value:"130426",text:"涉县"},{value:"130427",text:"磁县"},{value:"130430",text:"邱县"},{value:"130431",text:"鸡泽县"},{value:"130432",text:"广平县"},{value:"130433",text:"馆陶县"},{value:"130434",text:"魏县"},{value:"130435",text:"曲周县"},{value:"130471",text:"邯郸经济技术开发区"},{value:"130473",text:"邯郸冀南新区"},{value:"130481",text:"武安市"}]},{value:"1305",text:"邢台市",children:[{value:"130502",text:"襄都区"},{value:"130503",text:"信都区"},{value:"130505",text:"任泽区"},{value:"130506",text:"南和区"},{value:"130522",text:"临城县"},{value:"130523",text:"内丘县"},{value:"130524",text:"柏乡县"},{value:"130525",text:"隆尧县"},{value:"130528",text:"宁晋县"},{value:"130529",text:"巨鹿县"},{value:"130530",text:"新河县"},{value:"130531",text:"广宗县"},{value:"130532",text:"平乡县"},{value:"130533",text:"威县"},{value:"130534",text:"清河县"},{value:"130535",text:"临西县"},{value:"130571",text:"河北邢台经济开发区"},{value:"130581",text:"南宫市"},{value:"130582",text:"沙河市"}]},{value:"1306",text:"保定市",children:[{value:"130602",text:"竞秀区"},{value:"130606",text:"莲池区"},{value:"130607",text:"满城区"},{value:"130608",text:"清苑区"},{value:"130609",text:"徐水区"},{value:"130623",text:"涞水县"},{value:"130624",text:"阜平县"},{value:"130626",text:"定兴县"},{value:"130627",text:"唐县"},{value:"130628",text:"高阳县"},{value:"130629",text:"容城县"},{value:"130630",text:"涞源县"},{value:"130631",text:"望都县"},{value:"130632",text:"安新县"},{value:"130633",text:"易县"},{value:"130634",text:"曲阳县"},{value:"130635",text:"蠡县"},{value:"130636",text:"顺平县"},{value:"130637",text:"博野县"},{value:"130638",text:"雄县"},{value:"130671",text:"保定高新技术产业开发区"},{value:"130672",text:"保定白沟新城"},{value:"130681",text:"涿州市"},{value:"130682",text:"定州市"},{value:"130683",text:"安国市"},{value:"130684",text:"高碑店市"}]},{value:"1307",text:"张家口市",children:[{value:"130702",text:"桥东区"},{value:"130703",text:"桥西区"},{value:"130705",text:"宣化区"},{value:"130706",text:"下花园区"},{value:"130708",text:"万全区"},{value:"130709",text:"崇礼区"},{value:"130722",text:"张北县"},{value:"130723",text:"康保县"},{value:"130724",text:"沽源县"},{value:"130725",text:"尚义县"},{value:"130726",text:"蔚县"},{value:"130727",text:"阳原县"},{value:"130728",text:"怀安县"},{value:"130730",text:"怀来县"},{value:"130731",text:"涿鹿县"},{value:"130732",text:"赤城县"},{value:"130771",text:"张家口经济开发区"},{value:"130772",text:"张家口市察北管理区"},{value:"130773",text:"张家口市塞北管理区"}]},{value:"1308",text:"承德市",children:[{value:"130802",text:"双桥区"},{value:"130803",text:"双滦区"},{value:"130804",text:"鹰手营子矿区"},{value:"130821",text:"承德县"},{value:"130822",text:"兴隆县"},{value:"130824",text:"滦平县"},{value:"130825",text:"隆化县"},{value:"130826",text:"丰宁满族自治县"},{value:"130827",text:"宽城满族自治县"},{value:"130828",text:"围场满族蒙古族自治县"},{value:"130871",text:"承德高新技术产业开发区"},{value:"130881",text:"平泉市"}]},{value:"1309",text:"沧州市",children:[{value:"130902",text:"新华区"},{value:"130903",text:"运河区"},{value:"130921",text:"沧县"},{value:"130922",text:"青县"},{value:"130923",text:"东光县"},{value:"130924",text:"海兴县"},{value:"130925",text:"盐山县"},{value:"130926",text:"肃宁县"},{value:"130927",text:"南皮县"},{value:"130928",text:"吴桥县"},{value:"130929",text:"献县"},{value:"130930",text:"孟村回族自治县"},{value:"130971",text:"河北沧州经济开发区"},{value:"130972",text:"沧州高新技术产业开发区"},{value:"130973",text:"沧州渤海新区"},{value:"130981",text:"泊头市"},{value:"130982",text:"任丘市"},{value:"130983",text:"黄骅市"},{value:"130984",text:"河间市"}]},{value:"1310",text:"廊坊市",children:[{value:"131002",text:"安次区"},{value:"131003",text:"广阳区"},{value:"131022",text:"固安县"},{value:"131023",text:"永清县"},{value:"131024",text:"香河县"},{value:"131025",text:"大城县"},{value:"131026",text:"文安县"},{value:"131028",text:"大厂回族自治县"},{value:"131071",text:"廊坊经济技术开发区"},{value:"131081",text:"霸州市"},{value:"131082",text:"三河市"}]},{value:"1311",text:"衡水市",children:[{value:"131102",text:"桃城区"},{value:"131103",text:"冀州区"},{value:"131121",text:"枣强县"},{value:"131122",text:"武邑县"},{value:"131123",text:"武强县"},{value:"131124",text:"饶阳县"},{value:"131125",text:"安平县"},{value:"131126",text:"故城县"},{value:"131127",text:"景县"},{value:"131128",text:"阜城县"},{value:"131171",text:"河北衡水高新技术产业开发区"},{value:"131172",text:"衡水滨湖新区"},{value:"131182",text:"深州市"}]}]},{value:"14",text:"山西省",children:[{value:"1401",text:"太原市",children:[{value:"140105",text:"小店区"},{value:"140106",text:"迎泽区"},{value:"140107",text:"杏花岭区"},{value:"140108",text:"尖草坪区"},{value:"140109",text:"万柏林区"},{value:"140110",text:"晋源区"},{value:"140121",text:"清徐县"},{value:"140122",text:"阳曲县"},{value:"140123",text:"娄烦县"},{value:"140171",text:"山西转型综合改革示范区"},{value:"140181",text:"古交市"}]},{value:"1402",text:"大同市",children:[{value:"140212",text:"新荣区"},{value:"140213",text:"平城区"},{value:"140214",text:"云冈区"},{value:"140215",text:"云州区"},{value:"140221",text:"阳高县"},{value:"140222",text:"天镇县"},{value:"140223",text:"广灵县"},{value:"140224",text:"灵丘县"},{value:"140225",text:"浑源县"},{value:"140226",text:"左云县"},{value:"140271",text:"山西大同经济开发区"}]},{value:"1403",text:"阳泉市",children:[{value:"140302",text:"城区"},{value:"140303",text:"矿区"},{value:"140311",text:"郊区"},{value:"140321",text:"平定县"},{value:"140322",text:"盂县"}]},{value:"1404",text:"长治市",children:[{value:"140403",text:"潞州区"},{value:"140404",text:"上党区"},{value:"140405",text:"屯留区"},{value:"140406",text:"潞城区"},{value:"140423",text:"襄垣县"},{value:"140425",text:"平顺县"},{value:"140426",text:"黎城县"},{value:"140427",text:"壶关县"},{value:"140428",text:"长子县"},{value:"140429",text:"武乡县"},{value:"140430",text:"沁县"},{value:"140431",text:"沁源县"}]},{value:"1405",text:"晋城市",children:[{value:"140502",text:"城区"},{value:"140521",text:"沁水县"},{value:"140522",text:"阳城县"},{value:"140524",text:"陵川县"},{value:"140525",text:"泽州县"},{value:"140581",text:"高平市"}]},{value:"1406",text:"朔州市",children:[{value:"140602",text:"朔城区"},{value:"140603",text:"平鲁区"},{value:"140621",text:"山阴县"},{value:"140622",text:"应县"},{value:"140623",text:"右玉县"},{value:"140671",text:"山西朔州经济开发区"},{value:"140681",text:"怀仁市"}]},{value:"1407",text:"晋中市",children:[{value:"140702",text:"榆次区"},{value:"140703",text:"太谷区"},{value:"140721",text:"榆社县"},{value:"140722",text:"左权县"},{value:"140723",text:"和顺县"},{value:"140724",text:"昔阳县"},{value:"140725",text:"寿阳县"},{value:"140727",text:"祁县"},{value:"140728",text:"平遥县"},{value:"140729",text:"灵石县"},{value:"140781",text:"介休市"}]},{value:"1408",text:"运城市",children:[{value:"140802",text:"盐湖区"},{value:"140821",text:"临猗县"},{value:"140822",text:"万荣县"},{value:"140823",text:"闻喜县"},{value:"140824",text:"稷山县"},{value:"140825",text:"新绛县"},{value:"140826",text:"绛县"},{value:"140827",text:"垣曲县"},{value:"140828",text:"夏县"},{value:"140829",text:"平陆县"},{value:"140830",text:"芮城县"},{value:"140881",text:"永济市"},{value:"140882",text:"河津市"}]},{value:"1409",text:"忻州市",children:[{value:"140902",text:"忻府区"},{value:"140921",text:"定襄县"},{value:"140922",text:"五台县"},{value:"140923",text:"代县"},{value:"140924",text:"繁峙县"},{value:"140925",text:"宁武县"},{value:"140926",text:"静乐县"},{value:"140927",text:"神池县"},{value:"140928",text:"五寨县"},{value:"140929",text:"岢岚县"},{value:"140930",text:"河曲县"},{value:"140931",text:"保德县"},{value:"140932",text:"偏关县"},{value:"140971",text:"五台山风景名胜区"},{value:"140981",text:"原平市"}]},{value:"1410",text:"临汾市",children:[{value:"141002",text:"尧都区"},{value:"141021",text:"曲沃县"},{value:"141022",text:"翼城县"},{value:"141023",text:"襄汾县"},{value:"141024",text:"洪洞县"},{value:"141025",text:"古县"},{value:"141026",text:"安泽县"},{value:"141027",text:"浮山县"},{value:"141028",text:"吉县"},{value:"141029",text:"乡宁县"},{value:"141030",text:"大宁县"},{value:"141031",text:"隰县"},{value:"141032",text:"永和县"},{value:"141033",text:"蒲县"},{value:"141034",text:"汾西县"},{value:"141081",text:"侯马市"},{value:"141082",text:"霍州市"}]},{value:"1411",text:"吕梁市",children:[{value:"141102",text:"离石区"},{value:"141121",text:"文水县"},{value:"141122",text:"交城县"},{value:"141123",text:"兴县"},{value:"141124",text:"临县"},{value:"141125",text:"柳林县"},{value:"141126",text:"石楼县"},{value:"141127",text:"岚县"},{value:"141128",text:"方山县"},{value:"141129",text:"中阳县"},{value:"141130",text:"交口县"},{value:"141181",text:"孝义市"},{value:"141182",text:"汾阳市"}]}]},{value:"15",text:"内蒙古自治区",children:[{value:"1501",text:"呼和浩特市",children:[{value:"150102",text:"新城区"},{value:"150103",text:"回民区"},{value:"150104",text:"玉泉区"},{value:"150105",text:"赛罕区"},{value:"150121",text:"土默特左旗"},{value:"150122",text:"托克托县"},{value:"150123",text:"和林格尔县"},{value:"150124",text:"清水河县"},{value:"150125",text:"武川县"},{value:"150172",text:"呼和浩特经济技术开发区"}]},{value:"1502",text:"包头市",children:[{value:"150202",text:"东河区"},{value:"150203",text:"昆都仑区"},{value:"150204",text:"青山区"},{value:"150205",text:"石拐区"},{value:"150206",text:"白云鄂博矿区"},{value:"150207",text:"九原区"},{value:"150221",text:"土默特右旗"},{value:"150222",text:"固阳县"},{value:"150223",text:"达尔罕茂明安联合旗"},{value:"150271",text:"包头稀土高新技术产业开发区"}]},{value:"1503",text:"乌海市",children:[{value:"150302",text:"海勃湾区"},{value:"150303",text:"海南区"},{value:"150304",text:"乌达区"}]},{value:"1504",text:"赤峰市",children:[{value:"150402",text:"红山区"},{value:"150403",text:"元宝山区"},{value:"150404",text:"松山区"},{value:"150421",text:"阿鲁科尔沁旗"},{value:"150422",text:"巴林左旗"},{value:"150423",text:"巴林右旗"},{value:"150424",text:"林西县"},{value:"150425",text:"克什克腾旗"},{value:"150426",text:"翁牛特旗"},{value:"150428",text:"喀喇沁旗"},{value:"150429",text:"宁城县"},{value:"150430",text:"敖汉旗"}]},{value:"1505",text:"通辽市",children:[{value:"150502",text:"科尔沁区"},{value:"150521",text:"科尔沁左翼中旗"},{value:"150522",text:"科尔沁左翼后旗"},{value:"150523",text:"开鲁县"},{value:"150524",text:"库伦旗"},{value:"150525",text:"奈曼旗"},{value:"150526",text:"扎鲁特旗"},{value:"150571",text:"通辽经济技术开发区"},{value:"150581",text:"霍林郭勒市"}]},{value:"1506",text:"鄂尔多斯市",children:[{value:"150602",text:"东胜区"},{value:"150603",text:"康巴什区"},{value:"150621",text:"达拉特旗"},{value:"150622",text:"准格尔旗"},{value:"150623",text:"鄂托克前旗"},{value:"150624",text:"鄂托克旗"},{value:"150625",text:"杭锦旗"},{value:"150626",text:"乌审旗"},{value:"150627",text:"伊金霍洛旗"}]},{value:"1507",text:"呼伦贝尔市",children:[{value:"150702",text:"海拉尔区"},{value:"150703",text:"扎赉诺尔区"},{value:"150721",text:"阿荣旗"},{value:"150722",text:"莫力达瓦达斡尔族自治旗"},{value:"150723",text:"鄂伦春自治旗"},{value:"150724",text:"鄂温克族自治旗"},{value:"150725",text:"陈巴尔虎旗"},{value:"150726",text:"新巴尔虎左旗"},{value:"150727",text:"新巴尔虎右旗"},{value:"150781",text:"满洲里市"},{value:"150782",text:"牙克石市"},{value:"150783",text:"扎兰屯市"},{value:"150784",text:"额尔古纳市"},{value:"150785",text:"根河市"}]},{value:"1508",text:"巴彦淖尔市",children:[{value:"150802",text:"临河区"},{value:"150821",text:"五原县"},{value:"150822",text:"磴口县"},{value:"150823",text:"乌拉特前旗"},{value:"150824",text:"乌拉特中旗"},{value:"150825",text:"乌拉特后旗"},{value:"150826",text:"杭锦后旗"}]},{value:"1509",text:"乌兰察布市",children:[{value:"150902",text:"集宁区"},{value:"150921",text:"卓资县"},{value:"150922",text:"化德县"},{value:"150923",text:"商都县"},{value:"150924",text:"兴和县"},{value:"150925",text:"凉城县"},{value:"150926",text:"察哈尔右翼前旗"},{value:"150927",text:"察哈尔右翼中旗"},{value:"150928",text:"察哈尔右翼后旗"},{value:"150929",text:"四子王旗"},{value:"150981",text:"丰镇市"}]},{value:"1522",text:"兴安盟",children:[{value:"152201",text:"乌兰浩特市"},{value:"152202",text:"阿尔山市"},{value:"152221",text:"科尔沁右翼前旗"},{value:"152222",text:"科尔沁右翼中旗"},{value:"152223",text:"扎赉特旗"},{value:"152224",text:"突泉县"}]},{value:"1525",text:"锡林郭勒盟",children:[{value:"152501",text:"二连浩特市"},{value:"152502",text:"锡林浩特市"},{value:"152522",text:"阿巴嘎旗"},{value:"152523",text:"苏尼特左旗"},{value:"152524",text:"苏尼特右旗"},{value:"152525",text:"东乌珠穆沁旗"},{value:"152526",text:"西乌珠穆沁旗"},{value:"152527",text:"太仆寺旗"},{value:"152528",text:"镶黄旗"},{value:"152529",text:"正镶白旗"},{value:"152530",text:"正蓝旗"},{value:"152531",text:"多伦县"},{value:"152571",text:"乌拉盖管理区管委会"}]},{value:"1529",text:"阿拉善盟",children:[{value:"152921",text:"阿拉善左旗"},{value:"152922",text:"阿拉善右旗"},{value:"152923",text:"额济纳旗"},{value:"152971",text:"内蒙古阿拉善高新技术产业开发区"}]}]},{value:"21",text:"辽宁省",children:[{value:"2101",text:"沈阳市",children:[{value:"210102",text:"和平区"},{value:"210103",text:"沈河区"},{value:"210104",text:"大东区"},{value:"210105",text:"皇姑区"},{value:"210106",text:"铁西区"},{value:"210111",text:"苏家屯区"},{value:"210112",text:"浑南区"},{value:"210113",text:"沈北新区"},{value:"210114",text:"于洪区"},{value:"210115",text:"辽中区"},{value:"210123",text:"康平县"},{value:"210124",text:"法库县"},{value:"210181",text:"新民市"}]},{value:"2102",text:"大连市",children:[{value:"210202",text:"中山区"},{value:"210203",text:"西岗区"},{value:"210204",text:"沙河口区"},{value:"210211",text:"甘井子区"},{value:"210212",text:"旅顺口区"},{value:"210213",text:"金州区"},{value:"210214",text:"普兰店区"},{value:"210224",text:"长海县"},{value:"210281",text:"瓦房店市"},{value:"210283",text:"庄河市"}]},{value:"2103",text:"鞍山市",children:[{value:"210302",text:"铁东区"},{value:"210303",text:"铁西区"},{value:"210304",text:"立山区"},{value:"210311",text:"千山区"},{value:"210321",text:"台安县"},{value:"210323",text:"岫岩满族自治县"},{value:"210381",text:"海城市"}]},{value:"2104",text:"抚顺市",children:[{value:"210402",text:"新抚区"},{value:"210403",text:"东洲区"},{value:"210404",text:"望花区"},{value:"210411",text:"顺城区"},{value:"210421",text:"抚顺县"},{value:"210422",text:"新宾满族自治县"},{value:"210423",text:"清原满族自治县"}]},{value:"2105",text:"本溪市",children:[{value:"210502",text:"平山区"},{value:"210503",text:"溪湖区"},{value:"210504",text:"明山区"},{value:"210505",text:"南芬区"},{value:"210521",text:"本溪满族自治县"},{value:"210522",text:"桓仁满族自治县"}]},{value:"2106",text:"丹东市",children:[{value:"210602",text:"元宝区"},{value:"210603",text:"振兴区"},{value:"210604",text:"振安区"},{value:"210624",text:"宽甸满族自治县"},{value:"210681",text:"东港市"},{value:"210682",text:"凤城市"}]},{value:"2107",text:"锦州市",children:[{value:"210702",text:"古塔区"},{value:"210703",text:"凌河区"},{value:"210711",text:"太和区"},{value:"210726",text:"黑山县"},{value:"210727",text:"义县"},{value:"210781",text:"凌海市"},{value:"210782",text:"北镇市"}]},{value:"2108",text:"营口市",children:[{value:"210802",text:"站前区"},{value:"210803",text:"西市区"},{value:"210804",text:"鲅鱼圈区"},{value:"210811",text:"老边区"},{value:"210881",text:"盖州市"},{value:"210882",text:"大石桥市"}]},{value:"2109",text:"阜新市",children:[{value:"210902",text:"海州区"},{value:"210903",text:"新邱区"},{value:"210904",text:"太平区"},{value:"210905",text:"清河门区"},{value:"210911",text:"细河区"},{value:"210921",text:"阜新蒙古族自治县"},{value:"210922",text:"彰武县"}]},{value:"2110",text:"辽阳市",children:[{value:"211002",text:"白塔区"},{value:"211003",text:"文圣区"},{value:"211004",text:"宏伟区"},{value:"211005",text:"弓长岭区"},{value:"211011",text:"太子河区"},{value:"211021",text:"辽阳县"},{value:"211081",text:"灯塔市"}]},{value:"2111",text:"盘锦市",children:[{value:"211102",text:"双台子区"},{value:"211103",text:"兴隆台区"},{value:"211104",text:"大洼区"},{value:"211122",text:"盘山县"}]},{value:"2112",text:"铁岭市",children:[{value:"211202",text:"银州区"},{value:"211204",text:"清河区"},{value:"211221",text:"铁岭县"},{value:"211223",text:"西丰县"},{value:"211224",text:"昌图县"},{value:"211281",text:"调兵山市"},{value:"211282",text:"开原市"}]},{value:"2113",text:"朝阳市",children:[{value:"211302",text:"双塔区"},{value:"211303",text:"龙城区"},{value:"211321",text:"朝阳县"},{value:"211322",text:"建平县"},{value:"211324",text:"喀喇沁左翼蒙古族自治县"},{value:"211381",text:"北票市"},{value:"211382",text:"凌源市"}]},{value:"2114",text:"葫芦岛市",children:[{value:"211402",text:"连山区"},{value:"211403",text:"龙港区"},{value:"211404",text:"南票区"},{value:"211421",text:"绥中县"},{value:"211422",text:"建昌县"},{value:"211481",text:"兴城市"}]}]},{value:"22",text:"吉林省",children:[{value:"2201",text:"长春市",children:[{value:"220102",text:"南关区"},{value:"220103",text:"宽城区"},{value:"220104",text:"朝阳区"},{value:"220105",text:"二道区"},{value:"220106",text:"绿园区"},{value:"220112",text:"双阳区"},{value:"220113",text:"九台区"},{value:"220122",text:"农安县"},{value:"220171",text:"长春经济技术开发区"},{value:"220172",text:"长春净月高新技术产业开发区"},{value:"220173",text:"长春高新技术产业开发区"},{value:"220174",text:"长春汽车经济技术开发区"},{value:"220182",text:"榆树市"},{value:"220183",text:"德惠市"},{value:"220184",text:"公主岭市"}]},{value:"2202",text:"吉林市",children:[{value:"220202",text:"昌邑区"},{value:"220203",text:"龙潭区"},{value:"220204",text:"船营区"},{value:"220211",text:"丰满区"},{value:"220221",text:"永吉县"},{value:"220271",text:"吉林经济开发区"},{value:"220272",text:"吉林高新技术产业开发区"},{value:"220273",text:"吉林中国新加坡食品区"},{value:"220281",text:"蛟河市"},{value:"220282",text:"桦甸市"},{value:"220283",text:"舒兰市"},{value:"220284",text:"磐石市"}]},{value:"2203",text:"四平市",children:[{value:"220302",text:"铁西区"},{value:"220303",text:"铁东区"},{value:"220322",text:"梨树县"},{value:"220323",text:"伊通满族自治县"},{value:"220382",text:"双辽市"}]},{value:"2204",text:"辽源市",children:[{value:"220402",text:"龙山区"},{value:"220403",text:"西安区"},{value:"220421",text:"东丰县"},{value:"220422",text:"东辽县"}]},{value:"2205",text:"通化市",children:[{value:"220502",text:"东昌区"},{value:"220503",text:"二道江区"},{value:"220521",text:"通化县"},{value:"220523",text:"辉南县"},{value:"220524",text:"柳河县"},{value:"220581",text:"梅河口市"},{value:"220582",text:"集安市"}]},{value:"2206",text:"白山市",children:[{value:"220602",text:"浑江区"},{value:"220605",text:"江源区"},{value:"220621",text:"抚松县"},{value:"220622",text:"靖宇县"},{value:"220623",text:"长白朝鲜族自治县"},{value:"220681",text:"临江市"}]},{value:"2207",text:"松原市",children:[{value:"220702",text:"宁江区"},{value:"220721",text:"前郭尔罗斯蒙古族自治县"},{value:"220722",text:"长岭县"},{value:"220723",text:"乾安县"},{value:"220771",text:"吉林松原经济开发区"},{value:"220781",text:"扶余市"}]},{value:"2208",text:"白城市",children:[{value:"220802",text:"洮北区"},{value:"220821",text:"镇赉县"},{value:"220822",text:"通榆县"},{value:"220871",text:"吉林白城经济开发区"},{value:"220881",text:"洮南市"},{value:"220882",text:"大安市"}]},{value:"2224",text:"延边朝鲜族自治州",children:[{value:"222401",text:"延吉市"},{value:"222402",text:"图们市"},{value:"222403",text:"敦化市"},{value:"222404",text:"珲春市"},{value:"222405",text:"龙井市"},{value:"222406",text:"和龙市"},{value:"222424",text:"汪清县"},{value:"222426",text:"安图县"}]}]},{value:"23",text:"黑龙江省",children:[{value:"2301",text:"哈尔滨市",children:[{value:"230102",text:"道里区"},{value:"230103",text:"南岗区"},{value:"230104",text:"道外区"},{value:"230108",text:"平房区"},{value:"230109",text:"松北区"},{value:"230110",text:"香坊区"},{value:"230111",text:"呼兰区"},{value:"230112",text:"阿城区"},{value:"230113",text:"双城区"},{value:"230123",text:"依兰县"},{value:"230124",text:"方正县"},{value:"230125",text:"宾县"},{value:"230126",text:"巴彦县"},{value:"230127",text:"木兰县"},{value:"230128",text:"通河县"},{value:"230129",text:"延寿县"},{value:"230183",text:"尚志市"},{value:"230184",text:"五常市"}]},{value:"2302",text:"齐齐哈尔市",children:[{value:"230202",text:"龙沙区"},{value:"230203",text:"建华区"},{value:"230204",text:"铁锋区"},{value:"230205",text:"昂昂溪区"},{value:"230206",text:"富拉尔基区"},{value:"230207",text:"碾子山区"},{value:"230208",text:"梅里斯达斡尔族区"},{value:"230221",text:"龙江县"},{value:"230223",text:"依安县"},{value:"230224",text:"泰来县"},{value:"230225",text:"甘南县"},{value:"230227",text:"富裕县"},{value:"230229",text:"克山县"},{value:"230230",text:"克东县"},{value:"230231",text:"拜泉县"},{value:"230281",text:"讷河市"}]},{value:"2303",text:"鸡西市",children:[{value:"230302",text:"鸡冠区"},{value:"230303",text:"恒山区"},{value:"230304",text:"滴道区"},{value:"230305",text:"梨树区"},{value:"230306",text:"城子河区"},{value:"230307",text:"麻山区"},{value:"230321",text:"鸡东县"},{value:"230381",text:"虎林市"},{value:"230382",text:"密山市"}]},{value:"2304",text:"鹤岗市",children:[{value:"230402",text:"向阳区"},{value:"230403",text:"工农区"},{value:"230404",text:"南山区"},{value:"230405",text:"兴安区"},{value:"230406",text:"东山区"},{value:"230407",text:"兴山区"},{value:"230421",text:"萝北县"},{value:"230422",text:"绥滨县"}]},{value:"2305",text:"双鸭山市",children:[{value:"230502",text:"尖山区"},{value:"230503",text:"岭东区"},{value:"230505",text:"四方台区"},{value:"230506",text:"宝山区"},{value:"230521",text:"集贤县"},{value:"230522",text:"友谊县"},{value:"230523",text:"宝清县"},{value:"230524",text:"饶河县"}]},{value:"2306",text:"大庆市",children:[{value:"230602",text:"萨尔图区"},{value:"230603",text:"龙凤区"},{value:"230604",text:"让胡路区"},{value:"230605",text:"红岗区"},{value:"230606",text:"大同区"},{value:"230621",text:"肇州县"},{value:"230622",text:"肇源县"},{value:"230623",text:"林甸县"},{value:"230624",text:"杜尔伯特蒙古族自治县"},{value:"230671",text:"大庆高新技术产业开发区"}]},{value:"2307",text:"伊春市",children:[{value:"230717",text:"伊美区"},{value:"230718",text:"乌翠区"},{value:"230719",text:"友好区"},{value:"230722",text:"嘉荫县"},{value:"230723",text:"汤旺县"},{value:"230724",text:"丰林县"},{value:"230725",text:"大箐山县"},{value:"230726",text:"南岔县"},{value:"230751",text:"金林区"},{value:"230781",text:"铁力市"}]},{value:"2308",text:"佳木斯市",children:[{value:"230803",text:"向阳区"},{value:"230804",text:"前进区"},{value:"230805",text:"东风区"},{value:"230811",text:"郊区"},{value:"230822",text:"桦南县"},{value:"230826",text:"桦川县"},{value:"230828",text:"汤原县"},{value:"230881",text:"同江市"},{value:"230882",text:"富锦市"},{value:"230883",text:"抚远市"}]},{value:"2309",text:"七台河市",children:[{value:"230902",text:"新兴区"},{value:"230903",text:"桃山区"},{value:"230904",text:"茄子河区"},{value:"230921",text:"勃利县"}]},{value:"2310",text:"牡丹江市",children:[{value:"231002",text:"东安区"},{value:"231003",text:"阳明区"},{value:"231004",text:"爱民区"},{value:"231005",text:"西安区"},{value:"231025",text:"林口县"},{value:"231081",text:"绥芬河市"},{value:"231083",text:"海林市"},{value:"231084",text:"宁安市"},{value:"231085",text:"穆棱市"},{value:"231086",text:"东宁市"}]},{value:"2311",text:"黑河市",children:[{value:"231102",text:"爱辉区"},{value:"231123",text:"逊克县"},{value:"231124",text:"孙吴县"},{value:"231181",text:"北安市"},{value:"231182",text:"五大连池市"},{value:"231183",text:"嫩江市"}]},{value:"2312",text:"绥化市",children:[{value:"231202",text:"北林区"},{value:"231221",text:"望奎县"},{value:"231222",text:"兰西县"},{value:"231223",text:"青冈县"},{value:"231224",text:"庆安县"},{value:"231225",text:"明水县"},{value:"231226",text:"绥棱县"},{value:"231281",text:"安达市"},{value:"231282",text:"肇东市"},{value:"231283",text:"海伦市"}]},{value:"2327",text:"大兴安岭地区",children:[{value:"232701",text:"漠河市"},{value:"232721",text:"呼玛县"},{value:"232722",text:"塔河县"},{value:"232761",text:"加格达奇区"},{value:"232762",text:"松岭区"},{value:"232763",text:"新林区"},{value:"232764",text:"呼中区"}]}]},{value:"31",text:"上海市",children:[{value:"3101",text:"市辖区",children:[{value:"310101",text:"黄浦区"},{value:"310104",text:"徐汇区"},{value:"310105",text:"长宁区"},{value:"310106",text:"静安区"},{value:"310107",text:"普陀区"},{value:"310109",text:"虹口区"},{value:"310110",text:"杨浦区"},{value:"310112",text:"闵行区"},{value:"310113",text:"宝山区"},{value:"310114",text:"嘉定区"},{value:"310115",text:"浦东新区"},{value:"310116",text:"金山区"},{value:"310117",text:"松江区"},{value:"310118",text:"青浦区"},{value:"310120",text:"奉贤区"},{value:"310151",text:"崇明区"}]}]},{value:"32",text:"江苏省",children:[{value:"3201",text:"南京市",children:[{value:"320102",text:"玄武区"},{value:"320104",text:"秦淮区"},{value:"320105",text:"建邺区"},{value:"320106",text:"鼓楼区"},{value:"320111",text:"浦口区"},{value:"320113",text:"栖霞区"},{value:"320114",text:"雨花台区"},{value:"320115",text:"江宁区"},{value:"320116",text:"六合区"},{value:"320117",text:"溧水区"},{value:"320118",text:"高淳区"}]},{value:"3202",text:"无锡市",children:[{value:"320205",text:"锡山区"},{value:"320206",text:"惠山区"},{value:"320211",text:"滨湖区"},{value:"320213",text:"梁溪区"},{value:"320214",text:"新吴区"},{value:"320281",text:"江阴市"},{value:"320282",text:"宜兴市"}]},{value:"3203",text:"徐州市",children:[{value:"320302",text:"鼓楼区"},{value:"320303",text:"云龙区"},{value:"320305",text:"贾汪区"},{value:"320311",text:"泉山区"},{value:"320312",text:"铜山区"},{value:"320321",text:"丰县"},{value:"320322",text:"沛县"},{value:"320324",text:"睢宁县"},{value:"320371",text:"徐州经济技术开发区"},{value:"320381",text:"新沂市"},{value:"320382",text:"邳州市"}]},{value:"3204",text:"常州市",children:[{value:"320402",text:"天宁区"},{value:"320404",text:"钟楼区"},{value:"320411",text:"新北区"},{value:"320412",text:"武进区"},{value:"320413",text:"金坛区"},{value:"320481",text:"溧阳市"}]},{value:"3205",text:"苏州市",children:[{value:"320505",text:"虎丘区"},{value:"320506",text:"吴中区"},{value:"320507",text:"相城区"},{value:"320508",text:"姑苏区"},{value:"320509",text:"吴江区"},{value:"320576",text:"苏州工业园区"},{value:"320581",text:"常熟市"},{value:"320582",text:"张家港市"},{value:"320583",text:"昆山市"},{value:"320585",text:"太仓市"}]},{value:"3206",text:"南通市",children:[{value:"320612",text:"通州区"},{value:"320613",text:"崇川区"},{value:"320614",text:"海门区"},{value:"320623",text:"如东县"},{value:"320671",text:"南通经济技术开发区"},{value:"320681",text:"启东市"},{value:"320682",text:"如皋市"},{value:"320685",text:"海安市"}]},{value:"3207",text:"连云港市",children:[{value:"320703",text:"连云区"},{value:"320706",text:"海州区"},{value:"320707",text:"赣榆区"},{value:"320722",text:"东海县"},{value:"320723",text:"灌云县"},{value:"320724",text:"灌南县"},{value:"320771",text:"连云港经济技术开发区"}]},{value:"3208",text:"淮安市",children:[{value:"320803",text:"淮安区"},{value:"320804",text:"淮阴区"},{value:"320812",text:"清江浦区"},{value:"320813",text:"洪泽区"},{value:"320826",text:"涟水县"},{value:"320830",text:"盱眙县"},{value:"320831",text:"金湖县"},{value:"320871",text:"淮安经济技术开发区"}]},{value:"3209",text:"盐城市",children:[{value:"320902",text:"亭湖区"},{value:"320903",text:"盐都区"},{value:"320904",text:"大丰区"},{value:"320921",text:"响水县"},{value:"320922",text:"滨海县"},{value:"320923",text:"阜宁县"},{value:"320924",text:"射阳县"},{value:"320925",text:"建湖县"},{value:"320971",text:"盐城经济技术开发区"},{value:"320981",text:"东台市"}]},{value:"3210",text:"扬州市",children:[{value:"321002",text:"广陵区"},{value:"321003",text:"邗江区"},{value:"321012",text:"江都区"},{value:"321023",text:"宝应县"},{value:"321071",text:"扬州经济技术开发区"},{value:"321081",text:"仪征市"},{value:"321084",text:"高邮市"}]},{value:"3211",text:"镇江市",children:[{value:"321102",text:"京口区"},{value:"321111",text:"润州区"},{value:"321112",text:"丹徒区"},{value:"321171",text:"镇江新区"},{value:"321181",text:"丹阳市"},{value:"321182",text:"扬中市"},{value:"321183",text:"句容市"}]},{value:"3212",text:"泰州市",children:[{value:"321202",text:"海陵区"},{value:"321203",text:"高港区"},{value:"321204",text:"姜堰区"},{value:"321281",text:"兴化市"},{value:"321282",text:"靖江市"},{value:"321283",text:"泰兴市"}]},{value:"3213",text:"宿迁市",children:[{value:"321302",text:"宿城区"},{value:"321311",text:"宿豫区"},{value:"321322",text:"沭阳县"},{value:"321323",text:"泗阳县"},{value:"321324",text:"泗洪县"},{value:"321371",text:"宿迁经济技术开发区"}]}]},{value:"33",text:"浙江省",children:[{value:"3301",text:"杭州市",children:[{value:"330102",text:"上城区"},{value:"330105",text:"拱墅区"},{value:"330106",text:"西湖区"},{value:"330108",text:"滨江区"},{value:"330109",text:"萧山区"},{value:"330110",text:"余杭区"},{value:"330111",text:"富阳区"},{value:"330112",text:"临安区"},{value:"330113",text:"临平区"},{value:"330114",text:"钱塘区"},{value:"330122",text:"桐庐县"},{value:"330127",text:"淳安县"},{value:"330182",text:"建德市"}]},{value:"3302",text:"宁波市",children:[{value:"330203",text:"海曙区"},{value:"330205",text:"江北区"},{value:"330206",text:"北仑区"},{value:"330211",text:"镇海区"},{value:"330212",text:"鄞州区"},{value:"330213",text:"奉化区"},{value:"330225",text:"象山县"},{value:"330226",text:"宁海县"},{value:"330281",text:"余姚市"},{value:"330282",text:"慈溪市"}]},{value:"3303",text:"温州市",children:[{value:"330302",text:"鹿城区"},{value:"330303",text:"龙湾区"},{value:"330304",text:"瓯海区"},{value:"330305",text:"洞头区"},{value:"330324",text:"永嘉县"},{value:"330326",text:"平阳县"},{value:"330327",text:"苍南县"},{value:"330328",text:"文成县"},{value:"330329",text:"泰顺县"},{value:"330381",text:"瑞安市"},{value:"330382",text:"乐清市"},{value:"330383",text:"龙港市"}]},{value:"3304",text:"嘉兴市",children:[{value:"330402",text:"南湖区"},{value:"330411",text:"秀洲区"},{value:"330421",text:"嘉善县"},{value:"330424",text:"海盐县"},{value:"330481",text:"海宁市"},{value:"330482",text:"平湖市"},{value:"330483",text:"桐乡市"}]},{value:"3305",text:"湖州市",children:[{value:"330502",text:"吴兴区"},{value:"330503",text:"南浔区"},{value:"330521",text:"德清县"},{value:"330522",text:"长兴县"},{value:"330523",text:"安吉县"}]},{value:"3306",text:"绍兴市",children:[{value:"330602",text:"越城区"},{value:"330603",text:"柯桥区"},{value:"330604",text:"上虞区"},{value:"330624",text:"新昌县"},{value:"330681",text:"诸暨市"},{value:"330683",text:"嵊州市"}]},{value:"3307",text:"金华市",children:[{value:"330702",text:"婺城区"},{value:"330703",text:"金东区"},{value:"330723",text:"武义县"},{value:"330726",text:"浦江县"},{value:"330727",text:"磐安县"},{value:"330781",text:"兰溪市"},{value:"330782",text:"义乌市"},{value:"330783",text:"东阳市"},{value:"330784",text:"永康市"}]},{value:"3308",text:"衢州市",children:[{value:"330802",text:"柯城区"},{value:"330803",text:"衢江区"},{value:"330822",text:"常山县"},{value:"330824",text:"开化县"},{value:"330825",text:"龙游县"},{value:"330881",text:"江山市"}]},{value:"3309",text:"舟山市",children:[{value:"330902",text:"定海区"},{value:"330903",text:"普陀区"},{value:"330921",text:"岱山县"},{value:"330922",text:"嵊泗县"}]},{value:"3310",text:"台州市",children:[{value:"331002",text:"椒江区"},{value:"331003",text:"黄岩区"},{value:"331004",text:"路桥区"},{value:"331022",text:"三门县"},{value:"331023",text:"天台县"},{value:"331024",text:"仙居县"},{value:"331081",text:"温岭市"},{value:"331082",text:"临海市"},{value:"331083",text:"玉环市"}]},{value:"3311",text:"丽水市",children:[{value:"331102",text:"莲都区"},{value:"331121",text:"青田县"},{value:"331122",text:"缙云县"},{value:"331123",text:"遂昌县"},{value:"331124",text:"松阳县"},{value:"331125",text:"云和县"},{value:"331126",text:"庆元县"},{value:"331127",text:"景宁畲族自治县"},{value:"331181",text:"龙泉市"}]}]},{value:"34",text:"安徽省",children:[{value:"3401",text:"合肥市",children:[{value:"340102",text:"瑶海区"},{value:"340103",text:"庐阳区"},{value:"340104",text:"蜀山区"},{value:"340111",text:"包河区"},{value:"340121",text:"长丰县"},{value:"340122",text:"肥东县"},{value:"340123",text:"肥西县"},{value:"340124",text:"庐江县"},{value:"340176",text:"合肥高新技术产业开发区"},{value:"340177",text:"合肥经济技术开发区"},{value:"340178",text:"合肥新站高新技术产业开发区"},{value:"340181",text:"巢湖市"}]},{value:"3402",text:"芜湖市",children:[{value:"340202",text:"镜湖区"},{value:"340207",text:"鸠江区"},{value:"340209",text:"弋江区"},{value:"340210",text:"湾沚区"},{value:"340212",text:"繁昌区"},{value:"340223",text:"南陵县"},{value:"340271",text:"芜湖经济技术开发区"},{value:"340272",text:"安徽芜湖三山经济开发区"},{value:"340281",text:"无为市"}]},{value:"3403",text:"蚌埠市",children:[{value:"340302",text:"龙子湖区"},{value:"340303",text:"蚌山区"},{value:"340304",text:"禹会区"},{value:"340311",text:"淮上区"},{value:"340321",text:"怀远县"},{value:"340322",text:"五河县"},{value:"340323",text:"固镇县"},{value:"340371",text:"蚌埠市高新技术开发区"},{value:"340372",text:"蚌埠市经济开发区"}]},{value:"3404",text:"淮南市",children:[{value:"340402",text:"大通区"},{value:"340403",text:"田家庵区"},{value:"340404",text:"谢家集区"},{value:"340405",text:"八公山区"},{value:"340406",text:"潘集区"},{value:"340421",text:"凤台县"},{value:"340422",text:"寿县"}]},{value:"3405",text:"马鞍山市",children:[{value:"340503",text:"花山区"},{value:"340504",text:"雨山区"},{value:"340506",text:"博望区"},{value:"340521",text:"当涂县"},{value:"340522",text:"含山县"},{value:"340523",text:"和县"}]},{value:"3406",text:"淮北市",children:[{value:"340602",text:"杜集区"},{value:"340603",text:"相山区"},{value:"340604",text:"烈山区"},{value:"340621",text:"濉溪县"}]},{value:"3407",text:"铜陵市",children:[{value:"340705",text:"铜官区"},{value:"340706",text:"义安区"},{value:"340711",text:"郊区"},{value:"340722",text:"枞阳县"}]},{value:"3408",text:"安庆市",children:[{value:"340802",text:"迎江区"},{value:"340803",text:"大观区"},{value:"340811",text:"宜秀区"},{value:"340822",text:"怀宁县"},{value:"340825",text:"太湖县"},{value:"340826",text:"宿松县"},{value:"340827",text:"望江县"},{value:"340828",text:"岳西县"},{value:"340871",text:"安徽安庆经济开发区"},{value:"340881",text:"桐城市"},{value:"340882",text:"潜山市"}]},{value:"3410",text:"黄山市",children:[{value:"341002",text:"屯溪区"},{value:"341003",text:"黄山区"},{value:"341004",text:"徽州区"},{value:"341021",text:"歙县"},{value:"341022",text:"休宁县"},{value:"341023",text:"黟县"},{value:"341024",text:"祁门县"}]},{value:"3411",text:"滁州市",children:[{value:"341102",text:"琅琊区"},{value:"341103",text:"南谯区"},{value:"341122",text:"来安县"},{value:"341124",text:"全椒县"},{value:"341125",text:"定远县"},{value:"341126",text:"凤阳县"},{value:"341171",text:"中新苏滁高新技术产业开发区"},{value:"341172",text:"滁州经济技术开发区"},{value:"341181",text:"天长市"},{value:"341182",text:"明光市"}]},{value:"3412",text:"阜阳市",children:[{value:"341202",text:"颍州区"},{value:"341203",text:"颍东区"},{value:"341204",text:"颍泉区"},{value:"341221",text:"临泉县"},{value:"341222",text:"太和县"},{value:"341225",text:"阜南县"},{value:"341226",text:"颍上县"},{value:"341271",text:"阜阳合肥现代产业园区"},{value:"341272",text:"阜阳经济技术开发区"},{value:"341282",text:"界首市"}]},{value:"3413",text:"宿州市",children:[{value:"341302",text:"埇桥区"},{value:"341321",text:"砀山县"},{value:"341322",text:"萧县"},{value:"341323",text:"灵璧县"},{value:"341324",text:"泗县"},{value:"341371",text:"宿州马鞍山现代产业园区"},{value:"341372",text:"宿州经济技术开发区"}]},{value:"3415",text:"六安市",children:[{value:"341502",text:"金安区"},{value:"341503",text:"裕安区"},{value:"341504",text:"叶集区"},{value:"341522",text:"霍邱县"},{value:"341523",text:"舒城县"},{value:"341524",text:"金寨县"},{value:"341525",text:"霍山县"}]},{value:"3416",text:"亳州市",children:[{value:"341602",text:"谯城区"},{value:"341621",text:"涡阳县"},{value:"341622",text:"蒙城县"},{value:"341623",text:"利辛县"}]},{value:"3417",text:"池州市",children:[{value:"341702",text:"贵池区"},{value:"341721",text:"东至县"},{value:"341722",text:"石台县"},{value:"341723",text:"青阳县"}]},{value:"3418",text:"宣城市",children:[{value:"341802",text:"宣州区"},{value:"341821",text:"郎溪县"},{value:"341823",text:"泾县"},{value:"341824",text:"绩溪县"},{value:"341825",text:"旌德县"},{value:"341871",text:"宣城市经济开发区"},{value:"341881",text:"宁国市"},{value:"341882",text:"广德市"}]}]},{value:"35",text:"福建省",children:[{value:"3501",text:"福州市",children:[{value:"350102",text:"鼓楼区"},{value:"350103",text:"台江区"},{value:"350104",text:"仓山区"},{value:"350105",text:"马尾区"},{value:"350111",text:"晋安区"},{value:"350112",text:"长乐区"},{value:"350121",text:"闽侯县"},{value:"350122",text:"连江县"},{value:"350123",text:"罗源县"},{value:"350124",text:"闽清县"},{value:"350125",text:"永泰县"},{value:"350128",text:"平潭县"},{value:"350181",text:"福清市"}]},{value:"3502",text:"厦门市",children:[{value:"350203",text:"思明区"},{value:"350205",text:"海沧区"},{value:"350206",text:"湖里区"},{value:"350211",text:"集美区"},{value:"350212",text:"同安区"},{value:"350213",text:"翔安区"}]},{value:"3503",text:"莆田市",children:[{value:"350302",text:"城厢区"},{value:"350303",text:"涵江区"},{value:"350304",text:"荔城区"},{value:"350305",text:"秀屿区"},{value:"350322",text:"仙游县"}]},{value:"3504",text:"三明市",children:[{value:"350404",text:"三元区"},{value:"350405",text:"沙县区"},{value:"350421",text:"明溪县"},{value:"350423",text:"清流县"},{value:"350424",text:"宁化县"},{value:"350425",text:"大田县"},{value:"350426",text:"尤溪县"},{value:"350428",text:"将乐县"},{value:"350429",text:"泰宁县"},{value:"350430",text:"建宁县"},{value:"350481",text:"永安市"}]},{value:"3505",text:"泉州市",children:[{value:"350502",text:"鲤城区"},{value:"350503",text:"丰泽区"},{value:"350504",text:"洛江区"},{value:"350505",text:"泉港区"},{value:"350521",text:"惠安县"},{value:"350524",text:"安溪县"},{value:"350525",text:"永春县"},{value:"350526",text:"德化县"},{value:"350527",text:"金门县"},{value:"350581",text:"石狮市"},{value:"350582",text:"晋江市"},{value:"350583",text:"南安市"}]},{value:"3506",text:"漳州市",children:[{value:"350602",text:"芗城区"},{value:"350603",text:"龙文区"},{value:"350604",text:"龙海区"},{value:"350605",text:"长泰区"},{value:"350622",text:"云霄县"},{value:"350623",text:"漳浦县"},{value:"350624",text:"诏安县"},{value:"350626",text:"东山县"},{value:"350627",text:"南靖县"},{value:"350628",text:"平和县"},{value:"350629",text:"华安县"}]},{value:"3507",text:"南平市",children:[{value:"350702",text:"延平区"},{value:"350703",text:"建阳区"},{value:"350721",text:"顺昌县"},{value:"350722",text:"浦城县"},{value:"350723",text:"光泽县"},{value:"350724",text:"松溪县"},{value:"350725",text:"政和县"},{value:"350781",text:"邵武市"},{value:"350782",text:"武夷山市"},{value:"350783",text:"建瓯市"}]},{value:"3508",text:"龙岩市",children:[{value:"350802",text:"新罗区"},{value:"350803",text:"永定区"},{value:"350821",text:"长汀县"},{value:"350823",text:"上杭县"},{value:"350824",text:"武平县"},{value:"350825",text:"连城县"},{value:"350881",text:"漳平市"}]},{value:"3509",text:"宁德市",children:[{value:"350902",text:"蕉城区"},{value:"350921",text:"霞浦县"},{value:"350922",text:"古田县"},{value:"350923",text:"屏南县"},{value:"350924",text:"寿宁县"},{value:"350925",text:"周宁县"},{value:"350926",text:"柘荣县"},{value:"350981",text:"福安市"},{value:"350982",text:"福鼎市"}]}]},{value:"36",text:"江西省",children:[{value:"3601",text:"南昌市",children:[{value:"360102",text:"东湖区"},{value:"360103",text:"西湖区"},{value:"360104",text:"青云谱区"},{value:"360111",text:"青山湖区"},{value:"360112",text:"新建区"},{value:"360113",text:"红谷滩区"},{value:"360121",text:"南昌县"},{value:"360123",text:"安义县"},{value:"360124",text:"进贤县"}]},{value:"3602",text:"景德镇市",children:[{value:"360202",text:"昌江区"},{value:"360203",text:"珠山区"},{value:"360222",text:"浮梁县"},{value:"360281",text:"乐平市"}]},{value:"3603",text:"萍乡市",children:[{value:"360302",text:"安源区"},{value:"360313",text:"湘东区"},{value:"360321",text:"莲花县"},{value:"360322",text:"上栗县"},{value:"360323",text:"芦溪县"}]},{value:"3604",text:"九江市",children:[{value:"360402",text:"濂溪区"},{value:"360403",text:"浔阳区"},{value:"360404",text:"柴桑区"},{value:"360423",text:"武宁县"},{value:"360424",text:"修水县"},{value:"360425",text:"永修县"},{value:"360426",text:"德安县"},{value:"360428",text:"都昌县"},{value:"360429",text:"湖口县"},{value:"360430",text:"彭泽县"},{value:"360481",text:"瑞昌市"},{value:"360482",text:"共青城市"},{value:"360483",text:"庐山市"}]},{value:"3605",text:"新余市",children:[{value:"360502",text:"渝水区"},{value:"360521",text:"分宜县"}]},{value:"3606",text:"鹰潭市",children:[{value:"360602",text:"月湖区"},{value:"360603",text:"余江区"},{value:"360681",text:"贵溪市"}]},{value:"3607",text:"赣州市",children:[{value:"360702",text:"章贡区"},{value:"360703",text:"南康区"},{value:"360704",text:"赣县区"},{value:"360722",text:"信丰县"},{value:"360723",text:"大余县"},{value:"360724",text:"上犹县"},{value:"360725",text:"崇义县"},{value:"360726",text:"安远县"},{value:"360728",text:"定南县"},{value:"360729",text:"全南县"},{value:"360730",text:"宁都县"},{value:"360731",text:"于都县"},{value:"360732",text:"兴国县"},{value:"360733",text:"会昌县"},{value:"360734",text:"寻乌县"},{value:"360735",text:"石城县"},{value:"360781",text:"瑞金市"},{value:"360783",text:"龙南市"}]},{value:"3608",text:"吉安市",children:[{value:"360802",text:"吉州区"},{value:"360803",text:"青原区"},{value:"360821",text:"吉安县"},{value:"360822",text:"吉水县"},{value:"360823",text:"峡江县"},{value:"360824",text:"新干县"},{value:"360825",text:"永丰县"},{value:"360826",text:"泰和县"},{value:"360827",text:"遂川县"},{value:"360828",text:"万安县"},{value:"360829",text:"安福县"},{value:"360830",text:"永新县"},{value:"360881",text:"井冈山市"}]},{value:"3609",text:"宜春市",children:[{value:"360902",text:"袁州区"},{value:"360921",text:"奉新县"},{value:"360922",text:"万载县"},{value:"360923",text:"上高县"},{value:"360924",text:"宜丰县"},{value:"360925",text:"靖安县"},{value:"360926",text:"铜鼓县"},{value:"360981",text:"丰城市"},{value:"360982",text:"樟树市"},{value:"360983",text:"高安市"}]},{value:"3610",text:"抚州市",children:[{value:"361002",text:"临川区"},{value:"361003",text:"东乡区"},{value:"361021",text:"南城县"},{value:"361022",text:"黎川县"},{value:"361023",text:"南丰县"},{value:"361024",text:"崇仁县"},{value:"361025",text:"乐安县"},{value:"361026",text:"宜黄县"},{value:"361027",text:"金溪县"},{value:"361028",text:"资溪县"},{value:"361030",text:"广昌县"}]},{value:"3611",text:"上饶市",children:[{value:"361102",text:"信州区"},{value:"361103",text:"广丰区"},{value:"361104",text:"广信区"},{value:"361123",text:"玉山县"},{value:"361124",text:"铅山县"},{value:"361125",text:"横峰县"},{value:"361126",text:"弋阳县"},{value:"361127",text:"余干县"},{value:"361128",text:"鄱阳县"},{value:"361129",text:"万年县"},{value:"361130",text:"婺源县"},{value:"361181",text:"德兴市"}]}]},{value:"37",text:"山东省",children:[{value:"3701",text:"济南市",children:[{value:"370102",text:"历下区"},{value:"370103",text:"市中区"},{value:"370104",text:"槐荫区"},{value:"370105",text:"天桥区"},{value:"370112",text:"历城区"},{value:"370113",text:"长清区"},{value:"370114",text:"章丘区"},{value:"370115",text:"济阳区"},{value:"370116",text:"莱芜区"},{value:"370117",text:"钢城区"},{value:"370124",text:"平阴县"},{value:"370126",text:"商河县"},{value:"370176",text:"济南高新技术产业开发区"}]},{value:"3702",text:"青岛市",children:[{value:"370202",text:"市南区"},{value:"370203",text:"市北区"},{value:"370211",text:"黄岛区"},{value:"370212",text:"崂山区"},{value:"370213",text:"李沧区"},{value:"370214",text:"城阳区"},{value:"370215",text:"即墨区"},{value:"370281",text:"胶州市"},{value:"370283",text:"平度市"},{value:"370285",text:"莱西市"}]},{value:"3703",text:"淄博市",children:[{value:"370302",text:"淄川区"},{value:"370303",text:"张店区"},{value:"370304",text:"博山区"},{value:"370305",text:"临淄区"},{value:"370306",text:"周村区"},{value:"370321",text:"桓台县"},{value:"370322",text:"高青县"},{value:"370323",text:"沂源县"}]},{value:"3704",text:"枣庄市",children:[{value:"370402",text:"市中区"},{value:"370403",text:"薛城区"},{value:"370404",text:"峄城区"},{value:"370405",text:"台儿庄区"},{value:"370406",text:"山亭区"},{value:"370481",text:"滕州市"}]},{value:"3705",text:"东营市",children:[{value:"370502",text:"东营区"},{value:"370503",text:"河口区"},{value:"370505",text:"垦利区"},{value:"370522",text:"利津县"},{value:"370523",text:"广饶县"},{value:"370571",text:"东营经济技术开发区"},{value:"370572",text:"东营港经济开发区"}]},{value:"3706",text:"烟台市",children:[{value:"370602",text:"芝罘区"},{value:"370611",text:"福山区"},{value:"370612",text:"牟平区"},{value:"370613",text:"莱山区"},{value:"370614",text:"蓬莱区"},{value:"370671",text:"烟台高新技术产业开发区"},{value:"370676",text:"烟台经济技术开发区"},{value:"370681",text:"龙口市"},{value:"370682",text:"莱阳市"},{value:"370683",text:"莱州市"},{value:"370685",text:"招远市"},{value:"370686",text:"栖霞市"},{value:"370687",text:"海阳市"}]},{value:"3707",text:"潍坊市",children:[{value:"370702",text:"潍城区"},{value:"370703",text:"寒亭区"},{value:"370704",text:"坊子区"},{value:"370705",text:"奎文区"},{value:"370724",text:"临朐县"},{value:"370725",text:"昌乐县"},{value:"370772",text:"潍坊滨海经济技术开发区"},{value:"370781",text:"青州市"},{value:"370782",text:"诸城市"},{value:"370783",text:"寿光市"},{value:"370784",text:"安丘市"},{value:"370785",text:"高密市"},{value:"370786",text:"昌邑市"}]},{value:"3708",text:"济宁市",children:[{value:"370811",text:"任城区"},{value:"370812",text:"兖州区"},{value:"370826",text:"微山县"},{value:"370827",text:"鱼台县"},{value:"370828",text:"金乡县"},{value:"370829",text:"嘉祥县"},{value:"370830",text:"汶上县"},{value:"370831",text:"泗水县"},{value:"370832",text:"梁山县"},{value:"370871",text:"济宁高新技术产业开发区"},{value:"370881",text:"曲阜市"},{value:"370883",text:"邹城市"}]},{value:"3709",text:"泰安市",children:[{value:"370902",text:"泰山区"},{value:"370911",text:"岱岳区"},{value:"370921",text:"宁阳县"},{value:"370923",text:"东平县"},{value:"370982",text:"新泰市"},{value:"370983",text:"肥城市"}]},{value:"3710",text:"威海市",children:[{value:"371002",text:"环翠区"},{value:"371003",text:"文登区"},{value:"371071",text:"威海火炬高技术产业开发区"},{value:"371072",text:"威海经济技术开发区"},{value:"371073",text:"威海临港经济技术开发区"},{value:"371082",text:"荣成市"},{value:"371083",text:"乳山市"}]},{value:"3711",text:"日照市",children:[{value:"371102",text:"东港区"},{value:"371103",text:"岚山区"},{value:"371121",text:"五莲县"},{value:"371122",text:"莒县"},{value:"371171",text:"日照经济技术开发区"}]},{value:"3713",text:"临沂市",children:[{value:"371302",text:"兰山区"},{value:"371311",text:"罗庄区"},{value:"371312",text:"河东区"},{value:"371321",text:"沂南县"},{value:"371322",text:"郯城县"},{value:"371323",text:"沂水县"},{value:"371324",text:"兰陵县"},{value:"371325",text:"费县"},{value:"371326",text:"平邑县"},{value:"371327",text:"莒南县"},{value:"371328",text:"蒙阴县"},{value:"371329",text:"临沭县"},{value:"371371",text:"临沂高新技术产业开发区"}]},{value:"3714",text:"德州市",children:[{value:"371402",text:"德城区"},{value:"371403",text:"陵城区"},{value:"371422",text:"宁津县"},{value:"371423",text:"庆云县"},{value:"371424",text:"临邑县"},{value:"371425",text:"齐河县"},{value:"371426",text:"平原县"},{value:"371427",text:"夏津县"},{value:"371428",text:"武城县"},{value:"371471",text:"德州天衢新区"},{value:"371481",text:"乐陵市"},{value:"371482",text:"禹城市"}]},{value:"3715",text:"聊城市",children:[{value:"371502",text:"东昌府区"},{value:"371503",text:"茌平区"},{value:"371521",text:"阳谷县"},{value:"371522",text:"莘县"},{value:"371524",text:"东阿县"},{value:"371525",text:"冠县"},{value:"371526",text:"高唐县"},{value:"371581",text:"临清市"}]},{value:"3716",text:"滨州市",children:[{value:"371602",text:"滨城区"},{value:"371603",text:"沾化区"},{value:"371621",text:"惠民县"},{value:"371622",text:"阳信县"},{value:"371623",text:"无棣县"},{value:"371625",text:"博兴县"},{value:"371681",text:"邹平市"}]},{value:"3717",text:"菏泽市",children:[{value:"371702",text:"牡丹区"},{value:"371703",text:"定陶区"},{value:"371721",text:"曹县"},{value:"371722",text:"单县"},{value:"371723",text:"成武县"},{value:"371724",text:"巨野县"},{value:"371725",text:"郓城县"},{value:"371726",text:"鄄城县"},{value:"371728",text:"东明县"},{value:"371771",text:"菏泽经济技术开发区"},{value:"371772",text:"菏泽高新技术开发区"}]}]},{value:"41",text:"河南省",children:[{value:"4101",text:"郑州市",children:[{value:"410102",text:"中原区"},{value:"410103",text:"二七区"},{value:"410104",text:"管城回族区"},{value:"410105",text:"金水区"},{value:"410106",text:"上街区"},{value:"410108",text:"惠济区"},{value:"410122",text:"中牟县"},{value:"410171",text:"郑州经济技术开发区"},{value:"410172",text:"郑州高新技术产业开发区"},{value:"410173",text:"郑州航空港经济综合实验区"},{value:"410181",text:"巩义市"},{value:"410182",text:"荥阳市"},{value:"410183",text:"新密市"},{value:"410184",text:"新郑市"},{value:"410185",text:"登封市"}]},{value:"4102",text:"开封市",children:[{value:"410202",text:"龙亭区"},{value:"410203",text:"顺河回族区"},{value:"410204",text:"鼓楼区"},{value:"410205",text:"禹王台区"},{value:"410212",text:"祥符区"},{value:"410221",text:"杞县"},{value:"410222",text:"通许县"},{value:"410223",text:"尉氏县"},{value:"410225",text:"兰考县"}]},{value:"4103",text:"洛阳市",children:[{value:"410302",text:"老城区"},{value:"410303",text:"西工区"},{value:"410304",text:"瀍河回族区"},{value:"410305",text:"涧西区"},{value:"410307",text:"偃师区"},{value:"410308",text:"孟津区"},{value:"410311",text:"洛龙区"},{value:"410323",text:"新安县"},{value:"410324",text:"栾川县"},{value:"410325",text:"嵩县"},{value:"410326",text:"汝阳县"},{value:"410327",text:"宜阳县"},{value:"410328",text:"洛宁县"},{value:"410329",text:"伊川县"},{value:"410371",text:"洛阳高新技术产业开发区"}]},{value:"4104",text:"平顶山市",children:[{value:"410402",text:"新华区"},{value:"410403",text:"卫东区"},{value:"410404",text:"石龙区"},{value:"410411",text:"湛河区"},{value:"410421",text:"宝丰县"},{value:"410422",text:"叶县"},{value:"410423",text:"鲁山县"},{value:"410425",text:"郏县"},{value:"410471",text:"平顶山高新技术产业开发区"},{value:"410472",text:"平顶山市城乡一体化示范区"},{value:"410481",text:"舞钢市"},{value:"410482",text:"汝州市"}]},{value:"4105",text:"安阳市",children:[{value:"410502",text:"文峰区"},{value:"410503",text:"北关区"},{value:"410505",text:"殷都区"},{value:"410506",text:"龙安区"},{value:"410522",text:"安阳县"},{value:"410523",text:"汤阴县"},{value:"410526",text:"滑县"},{value:"410527",text:"内黄县"},{value:"410571",text:"安阳高新技术产业开发区"},{value:"410581",text:"林州市"}]},{value:"4106",text:"鹤壁市",children:[{value:"410602",text:"鹤山区"},{value:"410603",text:"山城区"},{value:"410611",text:"淇滨区"},{value:"410621",text:"浚县"},{value:"410622",text:"淇县"},{value:"410671",text:"鹤壁经济技术开发区"}]},{value:"4107",text:"新乡市",children:[{value:"410702",text:"红旗区"},{value:"410703",text:"卫滨区"},{value:"410704",text:"凤泉区"},{value:"410711",text:"牧野区"},{value:"410721",text:"新乡县"},{value:"410724",text:"获嘉县"},{value:"410725",text:"原阳县"},{value:"410726",text:"延津县"},{value:"410727",text:"封丘县"},{value:"410771",text:"新乡高新技术产业开发区"},{value:"410772",text:"新乡经济技术开发区"},{value:"410773",text:"新乡市平原城乡一体化示范区"},{value:"410781",text:"卫辉市"},{value:"410782",text:"辉县市"},{value:"410783",text:"长垣市"}]},{value:"4108",text:"焦作市",children:[{value:"410802",text:"解放区"},{value:"410803",text:"中站区"},{value:"410804",text:"马村区"},{value:"410811",text:"山阳区"},{value:"410821",text:"修武县"},{value:"410822",text:"博爱县"},{value:"410823",text:"武陟县"},{value:"410825",text:"温县"},{value:"410871",text:"焦作城乡一体化示范区"},{value:"410882",text:"沁阳市"},{value:"410883",text:"孟州市"}]},{value:"4109",text:"濮阳市",children:[{value:"410902",text:"华龙区"},{value:"410922",text:"清丰县"},{value:"410923",text:"南乐县"},{value:"410926",text:"范县"},{value:"410927",text:"台前县"},{value:"410928",text:"濮阳县"},{value:"410971",text:"河南濮阳工业园区"},{value:"410972",text:"濮阳经济技术开发区"}]},{value:"4110",text:"许昌市",children:[{value:"411002",text:"魏都区"},{value:"411003",text:"建安区"},{value:"411024",text:"鄢陵县"},{value:"411025",text:"襄城县"},{value:"411071",text:"许昌经济技术开发区"},{value:"411081",text:"禹州市"},{value:"411082",text:"长葛市"}]},{value:"4111",text:"漯河市",children:[{value:"411102",text:"源汇区"},{value:"411103",text:"郾城区"},{value:"411104",text:"召陵区"},{value:"411121",text:"舞阳县"},{value:"411122",text:"临颍县"},{value:"411171",text:"漯河经济技术开发区"}]},{value:"4112",text:"三门峡市",children:[{value:"411202",text:"湖滨区"},{value:"411203",text:"陕州区"},{value:"411221",text:"渑池县"},{value:"411224",text:"卢氏县"},{value:"411271",text:"河南三门峡经济开发区"},{value:"411281",text:"义马市"},{value:"411282",text:"灵宝市"}]},{value:"4113",text:"南阳市",children:[{value:"411302",text:"宛城区"},{value:"411303",text:"卧龙区"},{value:"411321",text:"南召县"},{value:"411322",text:"方城县"},{value:"411323",text:"西峡县"},{value:"411324",text:"镇平县"},{value:"411325",text:"内乡县"},{value:"411326",text:"淅川县"},{value:"411327",text:"社旗县"},{value:"411328",text:"唐河县"},{value:"411329",text:"新野县"},{value:"411330",text:"桐柏县"},{value:"411371",text:"南阳高新技术产业开发区"},{value:"411372",text:"南阳市城乡一体化示范区"},{value:"411381",text:"邓州市"}]},{value:"4114",text:"商丘市",children:[{value:"411402",text:"梁园区"},{value:"411403",text:"睢阳区"},{value:"411421",text:"民权县"},{value:"411422",text:"睢县"},{value:"411423",text:"宁陵县"},{value:"411424",text:"柘城县"},{value:"411425",text:"虞城县"},{value:"411426",text:"夏邑县"},{value:"411471",text:"豫东综合物流产业聚集区"},{value:"411472",text:"河南商丘经济开发区"},{value:"411481",text:"永城市"}]},{value:"4115",text:"信阳市",children:[{value:"411502",text:"浉河区"},{value:"411503",text:"平桥区"},{value:"411521",text:"罗山县"},{value:"411522",text:"光山县"},{value:"411523",text:"新县"},{value:"411524",text:"商城县"},{value:"411525",text:"固始县"},{value:"411526",text:"潢川县"},{value:"411527",text:"淮滨县"},{value:"411528",text:"息县"},{value:"411571",text:"信阳高新技术产业开发区"}]},{value:"4116",text:"周口市",children:[{value:"411602",text:"川汇区"},{value:"411603",text:"淮阳区"},{value:"411621",text:"扶沟县"},{value:"411622",text:"西华县"},{value:"411623",text:"商水县"},{value:"411624",text:"沈丘县"},{value:"411625",text:"郸城县"},{value:"411627",text:"太康县"},{value:"411628",text:"鹿邑县"},{value:"411671",text:"周口临港开发区"},{value:"411681",text:"项城市"}]},{value:"4117",text:"驻马店市",children:[{value:"411702",text:"驿城区"},{value:"411721",text:"西平县"},{value:"411722",text:"上蔡县"},{value:"411723",text:"平舆县"},{value:"411724",text:"正阳县"},{value:"411725",text:"确山县"},{value:"411726",text:"泌阳县"},{value:"411727",text:"汝南县"},{value:"411728",text:"遂平县"},{value:"411729",text:"新蔡县"},{value:"411771",text:"河南驻马店经济开发区"}]},{value:"4190",text:"省直辖县级行政区划",children:[{value:"419001",text:"济源市"}]}]},{value:"42",text:"湖北省",children:[{value:"4201",text:"武汉市",children:[{value:"420102",text:"江岸区"},{value:"420103",text:"江汉区"},{value:"420104",text:"硚口区"},{value:"420105",text:"汉阳区"},{value:"420106",text:"武昌区"},{value:"420107",text:"青山区"},{value:"420111",text:"洪山区"},{value:"420112",text:"东西湖区"},{value:"420113",text:"汉南区"},{value:"420114",text:"蔡甸区"},{value:"420115",text:"江夏区"},{value:"420116",text:"黄陂区"},{value:"420117",text:"新洲区"}]},{value:"4202",text:"黄石市",children:[{value:"420202",text:"黄石港区"},{value:"420203",text:"西塞山区"},{value:"420204",text:"下陆区"},{value:"420205",text:"铁山区"},{value:"420222",text:"阳新县"},{value:"420281",text:"大冶市"}]},{value:"4203",text:"十堰市",children:[{value:"420302",text:"茅箭区"},{value:"420303",text:"张湾区"},{value:"420304",text:"郧阳区"},{value:"420322",text:"郧西县"},{value:"420323",text:"竹山县"},{value:"420324",text:"竹溪县"},{value:"420325",text:"房县"},{value:"420381",text:"丹江口市"}]},{value:"4205",text:"宜昌市",children:[{value:"420502",text:"西陵区"},{value:"420503",text:"伍家岗区"},{value:"420504",text:"点军区"},{value:"420505",text:"猇亭区"},{value:"420506",text:"夷陵区"},{value:"420525",text:"远安县"},{value:"420526",text:"兴山县"},{value:"420527",text:"秭归县"},{value:"420528",text:"长阳土家族自治县"},{value:"420529",text:"五峰土家族自治县"},{value:"420581",text:"宜都市"},{value:"420582",text:"当阳市"},{value:"420583",text:"枝江市"}]},{value:"4206",text:"襄阳市",children:[{value:"420602",text:"襄城区"},{value:"420606",text:"樊城区"},{value:"420607",text:"襄州区"},{value:"420624",text:"南漳县"},{value:"420625",text:"谷城县"},{value:"420626",text:"保康县"},{value:"420682",text:"老河口市"},{value:"420683",text:"枣阳市"},{value:"420684",text:"宜城市"}]},{value:"4207",text:"鄂州市",children:[{value:"420702",text:"梁子湖区"},{value:"420703",text:"华容区"},{value:"420704",text:"鄂城区"}]},{value:"4208",text:"荆门市",children:[{value:"420802",text:"东宝区"},{value:"420804",text:"掇刀区"},{value:"420822",text:"沙洋县"},{value:"420881",text:"钟祥市"},{value:"420882",text:"京山市"}]},{value:"4209",text:"孝感市",children:[{value:"420902",text:"孝南区"},{value:"420921",text:"孝昌县"},{value:"420922",text:"大悟县"},{value:"420923",text:"云梦县"},{value:"420981",text:"应城市"},{value:"420982",text:"安陆市"},{value:"420984",text:"汉川市"}]},{value:"4210",text:"荆州市",children:[{value:"421002",text:"沙市区"},{value:"421003",text:"荆州区"},{value:"421022",text:"公安县"},{value:"421024",text:"江陵县"},{value:"421071",text:"荆州经济技术开发区"},{value:"421081",text:"石首市"},{value:"421083",text:"洪湖市"},{value:"421087",text:"松滋市"},{value:"421088",text:"监利市"}]},{value:"4211",text:"黄冈市",children:[{value:"421102",text:"黄州区"},{value:"421121",text:"团风县"},{value:"421122",text:"红安县"},{value:"421123",text:"罗田县"},{value:"421124",text:"英山县"},{value:"421125",text:"浠水县"},{value:"421126",text:"蕲春县"},{value:"421127",text:"黄梅县"},{value:"421171",text:"龙感湖管理区"},{value:"421181",text:"麻城市"},{value:"421182",text:"武穴市"}]},{value:"4212",text:"咸宁市",children:[{value:"421202",text:"咸安区"},{value:"421221",text:"嘉鱼县"},{value:"421222",text:"通城县"},{value:"421223",text:"崇阳县"},{value:"421224",text:"通山县"},{value:"421281",text:"赤壁市"}]},{value:"4213",text:"随州市",children:[{value:"421303",text:"曾都区"},{value:"421321",text:"随县"},{value:"421381",text:"广水市"}]},{value:"4228",text:"恩施土家族苗族自治州",children:[{value:"422801",text:"恩施市"},{value:"422802",text:"利川市"},{value:"422822",text:"建始县"},{value:"422823",text:"巴东县"},{value:"422825",text:"宣恩县"},{value:"422826",text:"咸丰县"},{value:"422827",text:"来凤县"},{value:"422828",text:"鹤峰县"}]},{value:"4290",text:"省直辖县级行政区划",children:[{value:"429004",text:"仙桃市"},{value:"429005",text:"潜江市"},{value:"429006",text:"天门市"},{value:"429021",text:"神农架林区"}]}]},{value:"43",text:"湖南省",children:[{value:"4301",text:"长沙市",children:[{value:"430102",text:"芙蓉区"},{value:"430103",text:"天心区"},{value:"430104",text:"岳麓区"},{value:"430105",text:"开福区"},{value:"430111",text:"雨花区"},{value:"430112",text:"望城区"},{value:"430121",text:"长沙县"},{value:"430181",text:"浏阳市"},{value:"430182",text:"宁乡市"}]},{value:"4302",text:"株洲市",children:[{value:"430202",text:"荷塘区"},{value:"430203",text:"芦淞区"},{value:"430204",text:"石峰区"},{value:"430211",text:"天元区"},{value:"430212",text:"渌口区"},{value:"430223",text:"攸县"},{value:"430224",text:"茶陵县"},{value:"430225",text:"炎陵县"},{value:"430281",text:"醴陵市"}]},{value:"4303",text:"湘潭市",children:[{value:"430302",text:"雨湖区"},{value:"430304",text:"岳塘区"},{value:"430321",text:"湘潭县"},{value:"430371",text:"湖南湘潭高新技术产业园区"},{value:"430372",text:"湘潭昭山示范区"},{value:"430373",text:"湘潭九华示范区"},{value:"430381",text:"湘乡市"},{value:"430382",text:"韶山市"}]},{value:"4304",text:"衡阳市",children:[{value:"430405",text:"珠晖区"},{value:"430406",text:"雁峰区"},{value:"430407",text:"石鼓区"},{value:"430408",text:"蒸湘区"},{value:"430412",text:"南岳区"},{value:"430421",text:"衡阳县"},{value:"430422",text:"衡南县"},{value:"430423",text:"衡山县"},{value:"430424",text:"衡东县"},{value:"430426",text:"祁东县"},{value:"430473",text:"湖南衡阳松木经济开发区"},{value:"430476",text:"湖南衡阳高新技术产业园区"},{value:"430481",text:"耒阳市"},{value:"430482",text:"常宁市"}]},{value:"4305",text:"邵阳市",children:[{value:"430502",text:"双清区"},{value:"430503",text:"大祥区"},{value:"430511",text:"北塔区"},{value:"430522",text:"新邵县"},{value:"430523",text:"邵阳县"},{value:"430524",text:"隆回县"},{value:"430525",text:"洞口县"},{value:"430527",text:"绥宁县"},{value:"430528",text:"新宁县"},{value:"430529",text:"城步苗族自治县"},{value:"430581",text:"武冈市"},{value:"430582",text:"邵东市"}]},{value:"4306",text:"岳阳市",children:[{value:"430602",text:"岳阳楼区"},{value:"430603",text:"云溪区"},{value:"430611",text:"君山区"},{value:"430621",text:"岳阳县"},{value:"430623",text:"华容县"},{value:"430624",text:"湘阴县"},{value:"430626",text:"平江县"},{value:"430671",text:"岳阳市屈原管理区"},{value:"430681",text:"汨罗市"},{value:"430682",text:"临湘市"}]},{value:"4307",text:"常德市",children:[{value:"430702",text:"武陵区"},{value:"430703",text:"鼎城区"},{value:"430721",text:"安乡县"},{value:"430722",text:"汉寿县"},{value:"430723",text:"澧县"},{value:"430724",text:"临澧县"},{value:"430725",text:"桃源县"},{value:"430726",text:"石门县"},{value:"430771",text:"常德市西洞庭管理区"},{value:"430781",text:"津市市"}]},{value:"4308",text:"张家界市",children:[{value:"430802",text:"永定区"},{value:"430811",text:"武陵源区"},{value:"430821",text:"慈利县"},{value:"430822",text:"桑植县"}]},{value:"4309",text:"益阳市",children:[{value:"430902",text:"资阳区"},{value:"430903",text:"赫山区"},{value:"430921",text:"南县"},{value:"430922",text:"桃江县"},{value:"430923",text:"安化县"},{value:"430971",text:"益阳市大通湖管理区"},{value:"430972",text:"湖南益阳高新技术产业园区"},{value:"430981",text:"沅江市"}]},{value:"4310",text:"郴州市",children:[{value:"431002",text:"北湖区"},{value:"431003",text:"苏仙区"},{value:"431021",text:"桂阳县"},{value:"431022",text:"宜章县"},{value:"431023",text:"永兴县"},{value:"431024",text:"嘉禾县"},{value:"431025",text:"临武县"},{value:"431026",text:"汝城县"},{value:"431027",text:"桂东县"},{value:"431028",text:"安仁县"},{value:"431081",text:"资兴市"}]},{value:"4311",text:"永州市",children:[{value:"431102",text:"零陵区"},{value:"431103",text:"冷水滩区"},{value:"431122",text:"东安县"},{value:"431123",text:"双牌县"},{value:"431124",text:"道县"},{value:"431125",text:"江永县"},{value:"431126",text:"宁远县"},{value:"431127",text:"蓝山县"},{value:"431128",text:"新田县"},{value:"431129",text:"江华瑶族自治县"},{value:"431171",text:"永州经济技术开发区"},{value:"431173",text:"永州市回龙圩管理区"},{value:"431181",text:"祁阳市"}]},{value:"4312",text:"怀化市",children:[{value:"431202",text:"鹤城区"},{value:"431221",text:"中方县"},{value:"431222",text:"沅陵县"},{value:"431223",text:"辰溪县"},{value:"431224",text:"溆浦县"},{value:"431225",text:"会同县"},{value:"431226",text:"麻阳苗族自治县"},{value:"431227",text:"新晃侗族自治县"},{value:"431228",text:"芷江侗族自治县"},{value:"431229",text:"靖州苗族侗族自治县"},{value:"431230",text:"通道侗族自治县"},{value:"431271",text:"怀化市洪江管理区"},{value:"431281",text:"洪江市"}]},{value:"4313",text:"娄底市",children:[{value:"431302",text:"娄星区"},{value:"431321",text:"双峰县"},{value:"431322",text:"新化县"},{value:"431381",text:"冷水江市"},{value:"431382",text:"涟源市"}]},{value:"4331",text:"湘西土家族苗族自治州",children:[{value:"433101",text:"吉首市"},{value:"433122",text:"泸溪县"},{value:"433123",text:"凤凰县"},{value:"433124",text:"花垣县"},{value:"433125",text:"保靖县"},{value:"433126",text:"古丈县"},{value:"433127",text:"永顺县"},{value:"433130",text:"龙山县"}]}]},{value:"44",text:"广东省",children:[{value:"4401",text:"广州市",children:[{value:"440103",text:"荔湾区"},{value:"440104",text:"越秀区"},{value:"440105",text:"海珠区"},{value:"440106",text:"天河区"},{value:"440111",text:"白云区"},{value:"440112",text:"黄埔区"},{value:"440113",text:"番禺区"},{value:"440114",text:"花都区"},{value:"440115",text:"南沙区"},{value:"440117",text:"从化区"},{value:"440118",text:"增城区"}]},{value:"4402",text:"韶关市",children:[{value:"440203",text:"武江区"},{value:"440204",text:"浈江区"},{value:"440205",text:"曲江区"},{value:"440222",text:"始兴县"},{value:"440224",text:"仁化县"},{value:"440229",text:"翁源县"},{value:"440232",text:"乳源瑶族自治县"},{value:"440233",text:"新丰县"},{value:"440281",text:"乐昌市"},{value:"440282",text:"南雄市"}]},{value:"4403",text:"深圳市",children:[{value:"440303",text:"罗湖区"},{value:"440304",text:"福田区"},{value:"440305",text:"南山区"},{value:"440306",text:"宝安区"},{value:"440307",text:"龙岗区"},{value:"440308",text:"盐田区"},{value:"440309",text:"龙华区"},{value:"440310",text:"坪山区"},{value:"440311",text:"光明区"}]},{value:"4404",text:"珠海市",children:[{value:"440402",text:"香洲区"},{value:"440403",text:"斗门区"},{value:"440404",text:"金湾区"}]},{value:"4405",text:"汕头市",children:[{value:"440507",text:"龙湖区"},{value:"440511",text:"金平区"},{value:"440512",text:"濠江区"},{value:"440513",text:"潮阳区"},{value:"440514",text:"潮南区"},{value:"440515",text:"澄海区"},{value:"440523",text:"南澳县"}]},{value:"4406",text:"佛山市",children:[{value:"440604",text:"禅城区"},{value:"440605",text:"南海区"},{value:"440606",text:"顺德区"},{value:"440607",text:"三水区"},{value:"440608",text:"高明区"}]},{value:"4407",text:"江门市",children:[{value:"440703",text:"蓬江区"},{value:"440704",text:"江海区"},{value:"440705",text:"新会区"},{value:"440781",text:"台山市"},{value:"440783",text:"开平市"},{value:"440784",text:"鹤山市"},{value:"440785",text:"恩平市"}]},{value:"4408",text:"湛江市",children:[{value:"440802",text:"赤坎区"},{value:"440803",text:"霞山区"},{value:"440804",text:"坡头区"},{value:"440811",text:"麻章区"},{value:"440823",text:"遂溪县"},{value:"440825",text:"徐闻县"},{value:"440881",text:"廉江市"},{value:"440882",text:"雷州市"},{value:"440883",text:"吴川市"}]},{value:"4409",text:"茂名市",children:[{value:"440902",text:"茂南区"},{value:"440904",text:"电白区"},{value:"440981",text:"高州市"},{value:"440982",text:"化州市"},{value:"440983",text:"信宜市"}]},{value:"4412",text:"肇庆市",children:[{value:"441202",text:"端州区"},{value:"441203",text:"鼎湖区"},{value:"441204",text:"高要区"},{value:"441223",text:"广宁县"},{value:"441224",text:"怀集县"},{value:"441225",text:"封开县"},{value:"441226",text:"德庆县"},{value:"441284",text:"四会市"}]},{value:"4413",text:"惠州市",children:[{value:"441302",text:"惠城区"},{value:"441303",text:"惠阳区"},{value:"441322",text:"博罗县"},{value:"441323",text:"惠东县"},{value:"441324",text:"龙门县"}]},{value:"4414",text:"梅州市",children:[{value:"441402",text:"梅江区"},{value:"441403",text:"梅县区"},{value:"441422",text:"大埔县"},{value:"441423",text:"丰顺县"},{value:"441424",text:"五华县"},{value:"441426",text:"平远县"},{value:"441427",text:"蕉岭县"},{value:"441481",text:"兴宁市"}]},{value:"4415",text:"汕尾市",children:[{value:"441502",text:"城区"},{value:"441521",text:"海丰县"},{value:"441523",text:"陆河县"},{value:"441581",text:"陆丰市"}]},{value:"4416",text:"河源市",children:[{value:"441602",text:"源城区"},{value:"441621",text:"紫金县"},{value:"441622",text:"龙川县"},{value:"441623",text:"连平县"},{value:"441624",text:"和平县"},{value:"441625",text:"东源县"}]},{value:"4417",text:"阳江市",children:[{value:"441702",text:"江城区"},{value:"441704",text:"阳东区"},{value:"441721",text:"阳西县"},{value:"441781",text:"阳春市"}]},{value:"4418",text:"清远市",children:[{value:"441802",text:"清城区"},{value:"441803",text:"清新区"},{value:"441821",text:"佛冈县"},{value:"441823",text:"阳山县"},{value:"441825",text:"连山壮族瑶族自治县"},{value:"441826",text:"连南瑶族自治县"},{value:"441881",text:"英德市"},{value:"441882",text:"连州市"}]},{value:"4419",text:"东莞市",children:[{value:"441900003",text:"东城街道"},{value:"441900004",text:"南城街道"},{value:"441900005",text:"万江街道"},{value:"441900006",text:"莞城街道"},{value:"441900101",text:"石碣镇"},{value:"441900102",text:"石龙镇"},{value:"441900103",text:"茶山镇"},{value:"441900104",text:"石排镇"},{value:"441900105",text:"企石镇"},{value:"441900106",text:"横沥镇"},{value:"441900107",text:"桥头镇"},{value:"441900108",text:"谢岗镇"},{value:"441900109",text:"东坑镇"},{value:"441900110",text:"常平镇"},{value:"441900111",text:"寮步镇"},{value:"441900112",text:"樟木头镇"},{value:"441900113",text:"大朗镇"},{value:"441900114",text:"黄江镇"},{value:"441900115",text:"清溪镇"},{value:"441900116",text:"塘厦镇"},{value:"441900117",text:"凤岗镇"},{value:"441900118",text:"大岭山镇"},{value:"441900119",text:"长安镇"},{value:"441900121",text:"虎门镇"},{value:"441900122",text:"厚街镇"},{value:"441900123",text:"沙田镇"},{value:"441900124",text:"道滘镇"},{value:"441900125",text:"洪梅镇"},{value:"441900126",text:"麻涌镇"},{value:"441900127",text:"望牛墩镇"},{value:"441900128",text:"中堂镇"},{value:"441900129",text:"高埗镇"},{value:"441900401",text:"松山湖"},{value:"441900402",text:"东莞港"},{value:"441900403",text:"东莞生态园"},{value:"441900404",text:"东莞滨海湾新区"}]},{value:"4420",text:"中山市",children:[{value:"442000001",text:"石岐街道"},{value:"442000002",text:"东区街道"},{value:"442000003",text:"中山港街道"},{value:"442000004",text:"西区街道"},{value:"442000005",text:"南区街道"},{value:"442000006",text:"五桂山街道"},{value:"442000007",text:"民众街道"},{value:"442000008",text:"南朗街道"},{value:"442000101",text:"黄圃镇"},{value:"442000103",text:"东凤镇"},{value:"442000105",text:"古镇镇"},{value:"442000106",text:"沙溪镇"},{value:"442000107",text:"坦洲镇"},{value:"442000108",text:"港口镇"},{value:"442000109",text:"三角镇"},{value:"442000110",text:"横栏镇"},{value:"442000111",text:"南头镇"},{value:"442000112",text:"阜沙镇"},{value:"442000114",text:"三乡镇"},{value:"442000115",text:"板芙镇"},{value:"442000116",text:"大涌镇"},{value:"442000117",text:"神湾镇"},{value:"442000118",text:"小榄镇"}]},{value:"4451",text:"潮州市",children:[{value:"445102",text:"湘桥区"},{value:"445103",text:"潮安区"},{value:"445122",text:"饶平县"}]},{value:"4452",text:"揭阳市",children:[{value:"445202",text:"榕城区"},{value:"445203",text:"揭东区"},{value:"445222",text:"揭西县"},{value:"445224",text:"惠来县"},{value:"445281",text:"普宁市"}]},{value:"4453",text:"云浮市",children:[{value:"445302",text:"云城区"},{value:"445303",text:"云安区"},{value:"445321",text:"新兴县"},{value:"445322",text:"郁南县"},{value:"445381",text:"罗定市"}]}]},{value:"45",text:"广西壮族自治区",children:[{value:"4501",text:"南宁市",children:[{value:"450102",text:"兴宁区"},{value:"450103",text:"青秀区"},{value:"450105",text:"江南区"},{value:"450107",text:"西乡塘区"},{value:"450108",text:"良庆区"},{value:"450109",text:"邕宁区"},{value:"450110",text:"武鸣区"},{value:"450123",text:"隆安县"},{value:"450124",text:"马山县"},{value:"450125",text:"上林县"},{value:"450126",text:"宾阳县"},{value:"450181",text:"横州市"}]},{value:"4502",text:"柳州市",children:[{value:"450202",text:"城中区"},{value:"450203",text:"鱼峰区"},{value:"450204",text:"柳南区"},{value:"450205",text:"柳北区"},{value:"450206",text:"柳江区"},{value:"450222",text:"柳城县"},{value:"450223",text:"鹿寨县"},{value:"450224",text:"融安县"},{value:"450225",text:"融水苗族自治县"},{value:"450226",text:"三江侗族自治县"}]},{value:"4503",text:"桂林市",children:[{value:"450302",text:"秀峰区"},{value:"450303",text:"叠彩区"},{value:"450304",text:"象山区"},{value:"450305",text:"七星区"},{value:"450311",text:"雁山区"},{value:"450312",text:"临桂区"},{value:"450321",text:"阳朔县"},{value:"450323",text:"灵川县"},{value:"450324",text:"全州县"},{value:"450325",text:"兴安县"},{value:"450326",text:"永福县"},{value:"450327",text:"灌阳县"},{value:"450328",text:"龙胜各族自治县"},{value:"450329",text:"资源县"},{value:"450330",text:"平乐县"},{value:"450332",text:"恭城瑶族自治县"},{value:"450381",text:"荔浦市"}]},{value:"4504",text:"梧州市",children:[{value:"450403",text:"万秀区"},{value:"450405",text:"长洲区"},{value:"450406",text:"龙圩区"},{value:"450421",text:"苍梧县"},{value:"450422",text:"藤县"},{value:"450423",text:"蒙山县"},{value:"450481",text:"岑溪市"}]},{value:"4505",text:"北海市",children:[{value:"450502",text:"海城区"},{value:"450503",text:"银海区"},{value:"450512",text:"铁山港区"},{value:"450521",text:"合浦县"}]},{value:"4506",text:"防城港市",children:[{value:"450602",text:"港口区"},{value:"450603",text:"防城区"},{value:"450621",text:"上思县"},{value:"450681",text:"东兴市"}]},{value:"4507",text:"钦州市",children:[{value:"450702",text:"钦南区"},{value:"450703",text:"钦北区"},{value:"450721",text:"灵山县"},{value:"450722",text:"浦北县"}]},{value:"4508",text:"贵港市",children:[{value:"450802",text:"港北区"},{value:"450803",text:"港南区"},{value:"450804",text:"覃塘区"},{value:"450821",text:"平南县"},{value:"450881",text:"桂平市"}]},{value:"4509",text:"玉林市",children:[{value:"450902",text:"玉州区"},{value:"450903",text:"福绵区"},{value:"450921",text:"容县"},{value:"450922",text:"陆川县"},{value:"450923",text:"博白县"},{value:"450924",text:"兴业县"},{value:"450981",text:"北流市"}]},{value:"4510",text:"百色市",children:[{value:"451002",text:"右江区"},{value:"451003",text:"田阳区"},{value:"451022",text:"田东县"},{value:"451024",text:"德保县"},{value:"451026",text:"那坡县"},{value:"451027",text:"凌云县"},{value:"451028",text:"乐业县"},{value:"451029",text:"田林县"},{value:"451030",text:"西林县"},{value:"451031",text:"隆林各族自治县"},{value:"451081",text:"靖西市"},{value:"451082",text:"平果市"}]},{value:"4511",text:"贺州市",children:[{value:"451102",text:"八步区"},{value:"451103",text:"平桂区"},{value:"451121",text:"昭平县"},{value:"451122",text:"钟山县"},{value:"451123",text:"富川瑶族自治县"}]},{value:"4512",text:"河池市",children:[{value:"451202",text:"金城江区"},{value:"451203",text:"宜州区"},{value:"451221",text:"南丹县"},{value:"451222",text:"天峨县"},{value:"451223",text:"凤山县"},{value:"451224",text:"东兰县"},{value:"451225",text:"罗城仫佬族自治县"},{value:"451226",text:"环江毛南族自治县"},{value:"451227",text:"巴马瑶族自治县"},{value:"451228",text:"都安瑶族自治县"},{value:"451229",text:"大化瑶族自治县"}]},{value:"4513",text:"来宾市",children:[{value:"451302",text:"兴宾区"},{value:"451321",text:"忻城县"},{value:"451322",text:"象州县"},{value:"451323",text:"武宣县"},{value:"451324",text:"金秀瑶族自治县"},{value:"451381",text:"合山市"}]},{value:"4514",text:"崇左市",children:[{value:"451402",text:"江州区"},{value:"451421",text:"扶绥县"},{value:"451422",text:"宁明县"},{value:"451423",text:"龙州县"},{value:"451424",text:"大新县"},{value:"451425",text:"天等县"},{value:"451481",text:"凭祥市"}]}]},{value:"46",text:"海南省",children:[{value:"4601",text:"海口市",children:[{value:"460105",text:"秀英区"},{value:"460106",text:"龙华区"},{value:"460107",text:"琼山区"},{value:"460108",text:"美兰区"}]},{value:"4602",text:"三亚市",children:[{value:"460202",text:"海棠区"},{value:"460203",text:"吉阳区"},{value:"460204",text:"天涯区"},{value:"460205",text:"崖州区"}]},{value:"4603",text:"三沙市",children:[{value:"460321",text:"西沙群岛"},{value:"460322",text:"南沙群岛"},{value:"460323",text:"中沙群岛的岛礁及其海域"}]},{value:"4604",text:"儋州市",children:[{value:"460400100",text:"那大镇"},{value:"460400101",text:"和庆镇"},{value:"460400102",text:"南丰镇"},{value:"460400103",text:"大成镇"},{value:"460400104",text:"雅星镇"},{value:"460400105",text:"兰洋镇"},{value:"460400106",text:"光村镇"},{value:"460400107",text:"木棠镇"},{value:"460400108",text:"海头镇"},{value:"460400109",text:"峨蔓镇"},{value:"460400111",text:"王五镇"},{value:"460400112",text:"白马井镇"},{value:"460400113",text:"中和镇"},{value:"460400114",text:"排浦镇"},{value:"460400115",text:"东成镇"},{value:"460400116",text:"新州镇"},{value:"460400499",text:"洋浦经济开发区"},{value:"460400500",text:"华南热作学院"}]},{value:"4690",text:"省直辖县级行政区划",children:[{value:"469001",text:"五指山市"},{value:"469002",text:"琼海市"},{value:"469005",text:"文昌市"},{value:"469006",text:"万宁市"},{value:"469007",text:"东方市"},{value:"469021",text:"定安县"},{value:"469022",text:"屯昌县"},{value:"469023",text:"澄迈县"},{value:"469024",text:"临高县"},{value:"469025",text:"白沙黎族自治县"},{value:"469026",text:"昌江黎族自治县"},{value:"469027",text:"乐东黎族自治县"},{value:"469028",text:"陵水黎族自治县"},{value:"469029",text:"保亭黎族苗族自治县"},{value:"469030",text:"琼中黎族苗族自治县"}]}]},{value:"50",text:"重庆市",children:[{value:"5001",text:"市辖区",children:[{value:"500101",text:"万州区"},{value:"500102",text:"涪陵区"},{value:"500103",text:"渝中区"},{value:"500104",text:"大渡口区"},{value:"500105",text:"江北区"},{value:"500106",text:"沙坪坝区"},{value:"500107",text:"九龙坡区"},{value:"500108",text:"南岸区"},{value:"500109",text:"北碚区"},{value:"500110",text:"綦江区"},{value:"500111",text:"大足区"},{value:"500112",text:"渝北区"},{value:"500113",text:"巴南区"},{value:"500114",text:"黔江区"},{value:"500115",text:"长寿区"},{value:"500116",text:"江津区"},{value:"500117",text:"合川区"},{value:"500118",text:"永川区"},{value:"500119",text:"南川区"},{value:"500120",text:"璧山区"},{value:"500151",text:"铜梁区"},{value:"500152",text:"潼南区"},{value:"500153",text:"荣昌区"},{value:"500154",text:"开州区"},{value:"500155",text:"梁平区"},{value:"500156",text:"武隆区"}]},{value:"5002",text:"县",children:[{value:"500229",text:"城口县"},{value:"500230",text:"丰都县"},{value:"500231",text:"垫江县"},{value:"500233",text:"忠县"},{value:"500235",text:"云阳县"},{value:"500236",text:"奉节县"},{value:"500237",text:"巫山县"},{value:"500238",text:"巫溪县"},{value:"500240",text:"石柱土家族自治县"},{value:"500241",text:"秀山土家族苗族自治县"},{value:"500242",text:"酉阳土家族苗族自治县"},{value:"500243",text:"彭水苗族土家族自治县"}]}]},{value:"51",text:"四川省",children:[{value:"5101",text:"成都市",children:[{value:"510104",text:"锦江区"},{value:"510105",text:"青羊区"},{value:"510106",text:"金牛区"},{value:"510107",text:"武侯区"},{value:"510108",text:"成华区"},{value:"510112",text:"龙泉驿区"},{value:"510113",text:"青白江区"},{value:"510114",text:"新都区"},{value:"510115",text:"温江区"},{value:"510116",text:"双流区"},{value:"510117",text:"郫都区"},{value:"510118",text:"新津区"},{value:"510121",text:"金堂县"},{value:"510129",text:"大邑县"},{value:"510131",text:"蒲江县"},{value:"510181",text:"都江堰市"},{value:"510182",text:"彭州市"},{value:"510183",text:"邛崃市"},{value:"510184",text:"崇州市"},{value:"510185",text:"简阳市"}]},{value:"5103",text:"自贡市",children:[{value:"510302",text:"自流井区"},{value:"510303",text:"贡井区"},{value:"510304",text:"大安区"},{value:"510311",text:"沿滩区"},{value:"510321",text:"荣县"},{value:"510322",text:"富顺县"}]},{value:"5104",text:"攀枝花市",children:[{value:"510402",text:"东区"},{value:"510403",text:"西区"},{value:"510411",text:"仁和区"},{value:"510421",text:"米易县"},{value:"510422",text:"盐边县"}]},{value:"5105",text:"泸州市",children:[{value:"510502",text:"江阳区"},{value:"510503",text:"纳溪区"},{value:"510504",text:"龙马潭区"},{value:"510521",text:"泸县"},{value:"510522",text:"合江县"},{value:"510524",text:"叙永县"},{value:"510525",text:"古蔺县"}]},{value:"5106",text:"德阳市",children:[{value:"510603",text:"旌阳区"},{value:"510604",text:"罗江区"},{value:"510623",text:"中江县"},{value:"510681",text:"广汉市"},{value:"510682",text:"什邡市"},{value:"510683",text:"绵竹市"}]},{value:"5107",text:"绵阳市",children:[{value:"510703",text:"涪城区"},{value:"510704",text:"游仙区"},{value:"510705",text:"安州区"},{value:"510722",text:"三台县"},{value:"510723",text:"盐亭县"},{value:"510725",text:"梓潼县"},{value:"510726",text:"北川羌族自治县"},{value:"510727",text:"平武县"},{value:"510781",text:"江油市"}]},{value:"5108",text:"广元市",children:[{value:"510802",text:"利州区"},{value:"510811",text:"昭化区"},{value:"510812",text:"朝天区"},{value:"510821",text:"旺苍县"},{value:"510822",text:"青川县"},{value:"510823",text:"剑阁县"},{value:"510824",text:"苍溪县"}]},{value:"5109",text:"遂宁市",children:[{value:"510903",text:"船山区"},{value:"510904",text:"安居区"},{value:"510921",text:"蓬溪县"},{value:"510923",text:"大英县"},{value:"510981",text:"射洪市"}]},{value:"5110",text:"内江市",children:[{value:"511002",text:"市中区"},{value:"511011",text:"东兴区"},{value:"511024",text:"威远县"},{value:"511025",text:"资中县"},{value:"511083",text:"隆昌市"}]},{value:"5111",text:"乐山市",children:[{value:"511102",text:"市中区"},{value:"511111",text:"沙湾区"},{value:"511112",text:"五通桥区"},{value:"511113",text:"金口河区"},{value:"511123",text:"犍为县"},{value:"511124",text:"井研县"},{value:"511126",text:"夹江县"},{value:"511129",text:"沐川县"},{value:"511132",text:"峨边彝族自治县"},{value:"511133",text:"马边彝族自治县"},{value:"511181",text:"峨眉山市"}]},{value:"5113",text:"南充市",children:[{value:"511302",text:"顺庆区"},{value:"511303",text:"高坪区"},{value:"511304",text:"嘉陵区"},{value:"511321",text:"南部县"},{value:"511322",text:"营山县"},{value:"511323",text:"蓬安县"},{value:"511324",text:"仪陇县"},{value:"511325",text:"西充县"},{value:"511381",text:"阆中市"}]},{value:"5114",text:"眉山市",children:[{value:"511402",text:"东坡区"},{value:"511403",text:"彭山区"},{value:"511421",text:"仁寿县"},{value:"511423",text:"洪雅县"},{value:"511424",text:"丹棱县"},{value:"511425",text:"青神县"}]},{value:"5115",text:"宜宾市",children:[{value:"511502",text:"翠屏区"},{value:"511503",text:"南溪区"},{value:"511504",text:"叙州区"},{value:"511523",text:"江安县"},{value:"511524",text:"长宁县"},{value:"511525",text:"高县"},{value:"511526",text:"珙县"},{value:"511527",text:"筠连县"},{value:"511528",text:"兴文县"},{value:"511529",text:"屏山县"}]},{value:"5116",text:"广安市",children:[{value:"511602",text:"广安区"},{value:"511603",text:"前锋区"},{value:"511621",text:"岳池县"},{value:"511622",text:"武胜县"},{value:"511623",text:"邻水县"},{value:"511681",text:"华蓥市"}]},{value:"5117",text:"达州市",children:[{value:"511702",text:"通川区"},{value:"511703",text:"达川区"},{value:"511722",text:"宣汉县"},{value:"511723",text:"开江县"},{value:"511724",text:"大竹县"},{value:"511725",text:"渠县"},{value:"511781",text:"万源市"}]},{value:"5118",text:"雅安市",children:[{value:"511802",text:"雨城区"},{value:"511803",text:"名山区"},{value:"511822",text:"荥经县"},{value:"511823",text:"汉源县"},{value:"511824",text:"石棉县"},{value:"511825",text:"天全县"},{value:"511826",text:"芦山县"},{value:"511827",text:"宝兴县"}]},{value:"5119",text:"巴中市",children:[{value:"511902",text:"巴州区"},{value:"511903",text:"恩阳区"},{value:"511921",text:"通江县"},{value:"511922",text:"南江县"},{value:"511923",text:"平昌县"}]},{value:"5120",text:"资阳市",children:[{value:"512002",text:"雁江区"},{value:"512021",text:"安岳县"},{value:"512022",text:"乐至县"}]},{value:"5132",text:"阿坝藏族羌族自治州",children:[{value:"513201",text:"马尔康市"},{value:"513221",text:"汶川县"},{value:"513222",text:"理县"},{value:"513223",text:"茂县"},{value:"513224",text:"松潘县"},{value:"513225",text:"九寨沟县"},{value:"513226",text:"金川县"},{value:"513227",text:"小金县"},{value:"513228",text:"黑水县"},{value:"513230",text:"壤塘县"},{value:"513231",text:"阿坝县"},{value:"513232",text:"若尔盖县"},{value:"513233",text:"红原县"}]},{value:"5133",text:"甘孜藏族自治州",children:[{value:"513301",text:"康定市"},{value:"513322",text:"泸定县"},{value:"513323",text:"丹巴县"},{value:"513324",text:"九龙县"},{value:"513325",text:"雅江县"},{value:"513326",text:"道孚县"},{value:"513327",text:"炉霍县"},{value:"513328",text:"甘孜县"},{value:"513329",text:"新龙县"},{value:"513330",text:"德格县"},{value:"513331",text:"白玉县"},{value:"513332",text:"石渠县"},{value:"513333",text:"色达县"},{value:"513334",text:"理塘县"},{value:"513335",text:"巴塘县"},{value:"513336",text:"乡城县"},{value:"513337",text:"稻城县"},{value:"513338",text:"得荣县"}]},{value:"5134",text:"凉山彝族自治州",children:[{value:"513401",text:"西昌市"},{value:"513402",text:"会理市"},{value:"513422",text:"木里藏族自治县"},{value:"513423",text:"盐源县"},{value:"513424",text:"德昌县"},{value:"513426",text:"会东县"},{value:"513427",text:"宁南县"},{value:"513428",text:"普格县"},{value:"513429",text:"布拖县"},{value:"513430",text:"金阳县"},{value:"513431",text:"昭觉县"},{value:"513432",text:"喜德县"},{value:"513433",text:"冕宁县"},{value:"513434",text:"越西县"},{value:"513435",text:"甘洛县"},{value:"513436",text:"美姑县"},{value:"513437",text:"雷波县"}]}]},{value:"52",text:"贵州省",children:[{value:"5201",text:"贵阳市",children:[{value:"520102",text:"南明区"},{value:"520103",text:"云岩区"},{value:"520111",text:"花溪区"},{value:"520112",text:"乌当区"},{value:"520113",text:"白云区"},{value:"520115",text:"观山湖区"},{value:"520121",text:"开阳县"},{value:"520122",text:"息烽县"},{value:"520123",text:"修文县"},{value:"520181",text:"清镇市"}]},{value:"5202",text:"六盘水市",children:[{value:"520201",text:"钟山区"},{value:"520203",text:"六枝特区"},{value:"520204",text:"水城区"},{value:"520281",text:"盘州市"}]},{value:"5203",text:"遵义市",children:[{value:"520302",text:"红花岗区"},{value:"520303",text:"汇川区"},{value:"520304",text:"播州区"},{value:"520322",text:"桐梓县"},{value:"520323",text:"绥阳县"},{value:"520324",text:"正安县"},{value:"520325",text:"道真仡佬族苗族自治县"},{value:"520326",text:"务川仡佬族苗族自治县"},{value:"520327",text:"凤冈县"},{value:"520328",text:"湄潭县"},{value:"520329",text:"余庆县"},{value:"520330",text:"习水县"},{value:"520381",text:"赤水市"},{value:"520382",text:"仁怀市"}]},{value:"5204",text:"安顺市",children:[{value:"520402",text:"西秀区"},{value:"520403",text:"平坝区"},{value:"520422",text:"普定县"},{value:"520423",text:"镇宁布依族苗族自治县"},{value:"520424",text:"关岭布依族苗族自治县"},{value:"520425",text:"紫云苗族布依族自治县"}]},{value:"5205",text:"毕节市",children:[{value:"520502",text:"七星关区"},{value:"520521",text:"大方县"},{value:"520523",text:"金沙县"},{value:"520524",text:"织金县"},{value:"520525",text:"纳雍县"},{value:"520526",text:"威宁彝族回族苗族自治县"},{value:"520527",text:"赫章县"},{value:"520581",text:"黔西市"}]},{value:"5206",text:"铜仁市",children:[{value:"520602",text:"碧江区"},{value:"520603",text:"万山区"},{value:"520621",text:"江口县"},{value:"520622",text:"玉屏侗族自治县"},{value:"520623",text:"石阡县"},{value:"520624",text:"思南县"},{value:"520625",text:"印江土家族苗族自治县"},{value:"520626",text:"德江县"},{value:"520627",text:"沿河土家族自治县"},{value:"520628",text:"松桃苗族自治县"}]},{value:"5223",text:"黔西南布依族苗族自治州",children:[{value:"522301",text:"兴义市"},{value:"522302",text:"兴仁市"},{value:"522323",text:"普安县"},{value:"522324",text:"晴隆县"},{value:"522325",text:"贞丰县"},{value:"522326",text:"望谟县"},{value:"522327",text:"册亨县"},{value:"522328",text:"安龙县"}]},{value:"5226",text:"黔东南苗族侗族自治州",children:[{value:"522601",text:"凯里市"},{value:"522622",text:"黄平县"},{value:"522623",text:"施秉县"},{value:"522624",text:"三穗县"},{value:"522625",text:"镇远县"},{value:"522626",text:"岑巩县"},{value:"522627",text:"天柱县"},{value:"522628",text:"锦屏县"},{value:"522629",text:"剑河县"},{value:"522630",text:"台江县"},{value:"522631",text:"黎平县"},{value:"522632",text:"榕江县"},{value:"522633",text:"从江县"},{value:"522634",text:"雷山县"},{value:"522635",text:"麻江县"},{value:"522636",text:"丹寨县"}]},{value:"5227",text:"黔南布依族苗族自治州",children:[{value:"522701",text:"都匀市"},{value:"522702",text:"福泉市"},{value:"522722",text:"荔波县"},{value:"522723",text:"贵定县"},{value:"522725",text:"瓮安县"},{value:"522726",text:"独山县"},{value:"522727",text:"平塘县"},{value:"522728",text:"罗甸县"},{value:"522729",text:"长顺县"},{value:"522730",text:"龙里县"},{value:"522731",text:"惠水县"},{value:"522732",text:"三都水族自治县"}]}]},{value:"53",text:"云南省",children:[{value:"5301",text:"昆明市",children:[{value:"530102",text:"五华区"},{value:"530103",text:"盘龙区"},{value:"530111",text:"官渡区"},{value:"530112",text:"西山区"},{value:"530113",text:"东川区"},{value:"530114",text:"呈贡区"},{value:"530115",text:"晋宁区"},{value:"530124",text:"富民县"},{value:"530125",text:"宜良县"},{value:"530126",text:"石林彝族自治县"},{value:"530127",text:"嵩明县"},{value:"530128",text:"禄劝彝族苗族自治县"},{value:"530129",text:"寻甸回族彝族自治县"},{value:"530181",text:"安宁市"}]},{value:"5303",text:"曲靖市",children:[{value:"530302",text:"麒麟区"},{value:"530303",text:"沾益区"},{value:"530304",text:"马龙区"},{value:"530322",text:"陆良县"},{value:"530323",text:"师宗县"},{value:"530324",text:"罗平县"},{value:"530325",text:"富源县"},{value:"530326",text:"会泽县"},{value:"530381",text:"宣威市"}]},{value:"5304",text:"玉溪市",children:[{value:"530402",text:"红塔区"},{value:"530403",text:"江川区"},{value:"530423",text:"通海县"},{value:"530424",text:"华宁县"},{value:"530425",text:"易门县"},{value:"530426",text:"峨山彝族自治县"},{value:"530427",text:"新平彝族傣族自治县"},{value:"530428",text:"元江哈尼族彝族傣族自治县"},{value:"530481",text:"澄江市"}]},{value:"5305",text:"保山市",children:[{value:"530502",text:"隆阳区"},{value:"530521",text:"施甸县"},{value:"530523",text:"龙陵县"},{value:"530524",text:"昌宁县"},{value:"530581",text:"腾冲市"}]},{value:"5306",text:"昭通市",children:[{value:"530602",text:"昭阳区"},{value:"530621",text:"鲁甸县"},{value:"530622",text:"巧家县"},{value:"530623",text:"盐津县"},{value:"530624",text:"大关县"},{value:"530625",text:"永善县"},{value:"530626",text:"绥江县"},{value:"530627",text:"镇雄县"},{value:"530628",text:"彝良县"},{value:"530629",text:"威信县"},{value:"530681",text:"水富市"}]},{value:"5307",text:"丽江市",children:[{value:"530702",text:"古城区"},{value:"530721",text:"玉龙纳西族自治县"},{value:"530722",text:"永胜县"},{value:"530723",text:"华坪县"},{value:"530724",text:"宁蒗彝族自治县"}]},{value:"5308",text:"普洱市",children:[{value:"530802",text:"思茅区"},{value:"530821",text:"宁洱哈尼族彝族自治县"},{value:"530822",text:"墨江哈尼族自治县"},{value:"530823",text:"景东彝族自治县"},{value:"530824",text:"景谷傣族彝族自治县"},{value:"530825",text:"镇沅彝族哈尼族拉祜族自治县"},{value:"530826",text:"江城哈尼族彝族自治县"},{value:"530827",text:"孟连傣族拉祜族佤族自治县"},{value:"530828",text:"澜沧拉祜族自治县"},{value:"530829",text:"西盟佤族自治县"}]},{value:"5309",text:"临沧市",children:[{value:"530902",text:"临翔区"},{value:"530921",text:"凤庆县"},{value:"530922",text:"云县"},{value:"530923",text:"永德县"},{value:"530924",text:"镇康县"},{value:"530925",text:"双江拉祜族佤族布朗族傣族自治县"},{value:"530926",text:"耿马傣族佤族自治县"},{value:"530927",text:"沧源佤族自治县"}]},{value:"5323",text:"楚雄彝族自治州",children:[{value:"532301",text:"楚雄市"},{value:"532302",text:"禄丰市"},{value:"532322",text:"双柏县"},{value:"532323",text:"牟定县"},{value:"532324",text:"南华县"},{value:"532325",text:"姚安县"},{value:"532326",text:"大姚县"},{value:"532327",text:"永仁县"},{value:"532328",text:"元谋县"},{value:"532329",text:"武定县"}]},{value:"5325",text:"红河哈尼族彝族自治州",children:[{value:"532501",text:"个旧市"},{value:"532502",text:"开远市"},{value:"532503",text:"蒙自市"},{value:"532504",text:"弥勒市"},{value:"532523",text:"屏边苗族自治县"},{value:"532524",text:"建水县"},{value:"532525",text:"石屏县"},{value:"532527",text:"泸西县"},{value:"532528",text:"元阳县"},{value:"532529",text:"红河县"},{value:"532530",text:"金平苗族瑶族傣族自治县"},{value:"532531",text:"绿春县"},{value:"532532",text:"河口瑶族自治县"}]},{value:"5326",text:"文山壮族苗族自治州",children:[{value:"532601",text:"文山市"},{value:"532622",text:"砚山县"},{value:"532623",text:"西畴县"},{value:"532624",text:"麻栗坡县"},{value:"532625",text:"马关县"},{value:"532626",text:"丘北县"},{value:"532627",text:"广南县"},{value:"532628",text:"富宁县"}]},{value:"5328",text:"西双版纳傣族自治州",children:[{value:"532801",text:"景洪市"},{value:"532822",text:"勐海县"},{value:"532823",text:"勐腊县"}]},{value:"5329",text:"大理白族自治州",children:[{value:"532901",text:"大理市"},{value:"532922",text:"漾濞彝族自治县"},{value:"532923",text:"祥云县"},{value:"532924",text:"宾川县"},{value:"532925",text:"弥渡县"},{value:"532926",text:"南涧彝族自治县"},{value:"532927",text:"巍山彝族回族自治县"},{value:"532928",text:"永平县"},{value:"532929",text:"云龙县"},{value:"532930",text:"洱源县"},{value:"532931",text:"剑川县"},{value:"532932",text:"鹤庆县"}]},{value:"5331",text:"德宏傣族景颇族自治州",children:[{value:"533102",text:"瑞丽市"},{value:"533103",text:"芒市"},{value:"533122",text:"梁河县"},{value:"533123",text:"盈江县"},{value:"533124",text:"陇川县"}]},{value:"5333",text:"怒江傈僳族自治州",children:[{value:"533301",text:"泸水市"},{value:"533323",text:"福贡县"},{value:"533324",text:"贡山独龙族怒族自治县"},{value:"533325",text:"兰坪白族普米族自治县"}]},{value:"5334",text:"迪庆藏族自治州",children:[{value:"533401",text:"香格里拉市"},{value:"533422",text:"德钦县"},{value:"533423",text:"维西傈僳族自治县"}]}]},{value:"54",text:"西藏自治区",children:[{value:"5401",text:"拉萨市",children:[{value:"540102",text:"城关区"},{value:"540103",text:"堆龙德庆区"},{value:"540104",text:"达孜区"},{value:"540121",text:"林周县"},{value:"540122",text:"当雄县"},{value:"540123",text:"尼木县"},{value:"540124",text:"曲水县"},{value:"540127",text:"墨竹工卡县"},{value:"540171",text:"格尔木藏青工业园区"},{value:"540172",text:"拉萨经济技术开发区"},{value:"540173",text:"西藏文化旅游创意园区"},{value:"540174",text:"达孜工业园区"}]},{value:"5402",text:"日喀则市",children:[{value:"540202",text:"桑珠孜区"},{value:"540221",text:"南木林县"},{value:"540222",text:"江孜县"},{value:"540223",text:"定日县"},{value:"540224",text:"萨迦县"},{value:"540225",text:"拉孜县"},{value:"540226",text:"昂仁县"},{value:"540227",text:"谢通门县"},{value:"540228",text:"白朗县"},{value:"540229",text:"仁布县"},{value:"540230",text:"康马县"},{value:"540231",text:"定结县"},{value:"540232",text:"仲巴县"},{value:"540233",text:"亚东县"},{value:"540234",text:"吉隆县"},{value:"540235",text:"聂拉木县"},{value:"540236",text:"萨嘎县"},{value:"540237",text:"岗巴县"}]},{value:"5403",text:"昌都市",children:[{value:"540302",text:"卡若区"},{value:"540321",text:"江达县"},{value:"540322",text:"贡觉县"},{value:"540323",text:"类乌齐县"},{value:"540324",text:"丁青县"},{value:"540325",text:"察雅县"},{value:"540326",text:"八宿县"},{value:"540327",text:"左贡县"},{value:"540328",text:"芒康县"},{value:"540329",text:"洛隆县"},{value:"540330",text:"边坝县"}]},{value:"5404",text:"林芝市",children:[{value:"540402",text:"巴宜区"},{value:"540421",text:"工布江达县"},{value:"540423",text:"墨脱县"},{value:"540424",text:"波密县"},{value:"540425",text:"察隅县"},{value:"540426",text:"朗县"},{value:"540481",text:"米林市"}]},{value:"5405",text:"山南市",children:[{value:"540502",text:"乃东区"},{value:"540521",text:"扎囊县"},{value:"540522",text:"贡嘎县"},{value:"540523",text:"桑日县"},{value:"540524",text:"琼结县"},{value:"540525",text:"曲松县"},{value:"540526",text:"措美县"},{value:"540527",text:"洛扎县"},{value:"540528",text:"加查县"},{value:"540529",text:"隆子县"},{value:"540531",text:"浪卡子县"},{value:"540581",text:"错那市"}]},{value:"5406",text:"那曲市",children:[{value:"540602",text:"色尼区"},{value:"540621",text:"嘉黎县"},{value:"540622",text:"比如县"},{value:"540623",text:"聂荣县"},{value:"540624",text:"安多县"},{value:"540625",text:"申扎县"},{value:"540626",text:"索县"},{value:"540627",text:"班戈县"},{value:"540628",text:"巴青县"},{value:"540629",text:"尼玛县"},{value:"540630",text:"双湖县"}]},{value:"5425",text:"阿里地区",children:[{value:"542521",text:"普兰县"},{value:"542522",text:"札达县"},{value:"542523",text:"噶尔县"},{value:"542524",text:"日土县"},{value:"542525",text:"革吉县"},{value:"542526",text:"改则县"},{value:"542527",text:"措勤县"}]}]},{value:"61",text:"陕西省",children:[{value:"6101",text:"西安市",children:[{value:"610102",text:"新城区"},{value:"610103",text:"碑林区"},{value:"610104",text:"莲湖区"},{value:"610111",text:"灞桥区"},{value:"610112",text:"未央区"},{value:"610113",text:"雁塔区"},{value:"610114",text:"阎良区"},{value:"610115",text:"临潼区"},{value:"610116",text:"长安区"},{value:"610117",text:"高陵区"},{value:"610118",text:"鄠邑区"},{value:"610122",text:"蓝田县"},{value:"610124",text:"周至县"}]},{value:"6102",text:"铜川市",children:[{value:"610202",text:"王益区"},{value:"610203",text:"印台区"},{value:"610204",text:"耀州区"},{value:"610222",text:"宜君县"}]},{value:"6103",text:"宝鸡市",children:[{value:"610302",text:"渭滨区"},{value:"610303",text:"金台区"},{value:"610304",text:"陈仓区"},{value:"610305",text:"凤翔区"},{value:"610323",text:"岐山县"},{value:"610324",text:"扶风县"},{value:"610326",text:"眉县"},{value:"610327",text:"陇县"},{value:"610328",text:"千阳县"},{value:"610329",text:"麟游县"},{value:"610330",text:"凤县"},{value:"610331",text:"太白县"}]},{value:"6104",text:"咸阳市",children:[{value:"610402",text:"秦都区"},{value:"610403",text:"杨陵区"},{value:"610404",text:"渭城区"},{value:"610422",text:"三原县"},{value:"610423",text:"泾阳县"},{value:"610424",text:"乾县"},{value:"610425",text:"礼泉县"},{value:"610426",text:"永寿县"},{value:"610428",text:"长武县"},{value:"610429",text:"旬邑县"},{value:"610430",text:"淳化县"},{value:"610431",text:"武功县"},{value:"610481",text:"兴平市"},{value:"610482",text:"彬州市"}]},{value:"6105",text:"渭南市",children:[{value:"610502",text:"临渭区"},{value:"610503",text:"华州区"},{value:"610522",text:"潼关县"},{value:"610523",text:"大荔县"},{value:"610524",text:"合阳县"},{value:"610525",text:"澄城县"},{value:"610526",text:"蒲城县"},{value:"610527",text:"白水县"},{value:"610528",text:"富平县"},{value:"610581",text:"韩城市"},{value:"610582",text:"华阴市"}]},{value:"6106",text:"延安市",children:[{value:"610602",text:"宝塔区"},{value:"610603",text:"安塞区"},{value:"610621",text:"延长县"},{value:"610622",text:"延川县"},{value:"610625",text:"志丹县"},{value:"610626",text:"吴起县"},{value:"610627",text:"甘泉县"},{value:"610628",text:"富县"},{value:"610629",text:"洛川县"},{value:"610630",text:"宜川县"},{value:"610631",text:"黄龙县"},{value:"610632",text:"黄陵县"},{value:"610681",text:"子长市"}]},{value:"6107",text:"汉中市",children:[{value:"610702",text:"汉台区"},{value:"610703",text:"南郑区"},{value:"610722",text:"城固县"},{value:"610723",text:"洋县"},{value:"610724",text:"西乡县"},{value:"610725",text:"勉县"},{value:"610726",text:"宁强县"},{value:"610727",text:"略阳县"},{value:"610728",text:"镇巴县"},{value:"610729",text:"留坝县"},{value:"610730",text:"佛坪县"}]},{value:"6108",text:"榆林市",children:[{value:"610802",text:"榆阳区"},{value:"610803",text:"横山区"},{value:"610822",text:"府谷县"},{value:"610824",text:"靖边县"},{value:"610825",text:"定边县"},{value:"610826",text:"绥德县"},{value:"610827",text:"米脂县"},{value:"610828",text:"佳县"},{value:"610829",text:"吴堡县"},{value:"610830",text:"清涧县"},{value:"610831",text:"子洲县"},{value:"610881",text:"神木市"}]},{value:"6109",text:"安康市",children:[{value:"610902",text:"汉滨区"},{value:"610921",text:"汉阴县"},{value:"610922",text:"石泉县"},{value:"610923",text:"宁陕县"},{value:"610924",text:"紫阳县"},{value:"610925",text:"岚皋县"},{value:"610926",text:"平利县"},{value:"610927",text:"镇坪县"},{value:"610929",text:"白河县"},{value:"610981",text:"旬阳市"}]},{value:"6110",text:"商洛市",children:[{value:"611002",text:"商州区"},{value:"611021",text:"洛南县"},{value:"611022",text:"丹凤县"},{value:"611023",text:"商南县"},{value:"611024",text:"山阳县"},{value:"611025",text:"镇安县"},{value:"611026",text:"柞水县"}]}]},{value:"62",text:"甘肃省",children:[{value:"6201",text:"兰州市",children:[{value:"620102",text:"城关区"},{value:"620103",text:"七里河区"},{value:"620104",text:"西固区"},{value:"620105",text:"安宁区"},{value:"620111",text:"红古区"},{value:"620121",text:"永登县"},{value:"620122",text:"皋兰县"},{value:"620123",text:"榆中县"},{value:"620171",text:"兰州新区"}]},{value:"6202",text:"嘉峪关市",children:[{value:"620201001",text:"雄关街道"},{value:"620201002",text:"钢城街道"},{value:"620201100",text:"新城镇"},{value:"620201101",text:"峪泉镇"},{value:"620201102",text:"文殊镇"}]},{value:"6203",text:"金昌市",children:[{value:"620302",text:"金川区"},{value:"620321",text:"永昌县"}]},{value:"6204",text:"白银市",children:[{value:"620402",text:"白银区"},{value:"620403",text:"平川区"},{value:"620421",text:"靖远县"},{value:"620422",text:"会宁县"},{value:"620423",text:"景泰县"}]},{value:"6205",text:"天水市",children:[{value:"620502",text:"秦州区"},{value:"620503",text:"麦积区"},{value:"620521",text:"清水县"},{value:"620522",text:"秦安县"},{value:"620523",text:"甘谷县"},{value:"620524",text:"武山县"},{value:"620525",text:"张家川回族自治县"}]},{value:"6206",text:"武威市",children:[{value:"620602",text:"凉州区"},{value:"620621",text:"民勤县"},{value:"620622",text:"古浪县"},{value:"620623",text:"天祝藏族自治县"}]},{value:"6207",text:"张掖市",children:[{value:"620702",text:"甘州区"},{value:"620721",text:"肃南裕固族自治县"},{value:"620722",text:"民乐县"},{value:"620723",text:"临泽县"},{value:"620724",text:"高台县"},{value:"620725",text:"山丹县"}]},{value:"6208",text:"平凉市",children:[{value:"620802",text:"崆峒区"},{value:"620821",text:"泾川县"},{value:"620822",text:"灵台县"},{value:"620823",text:"崇信县"},{value:"620825",text:"庄浪县"},{value:"620826",text:"静宁县"},{value:"620881",text:"华亭市"}]},{value:"6209",text:"酒泉市",children:[{value:"620902",text:"肃州区"},{value:"620921",text:"金塔县"},{value:"620922",text:"瓜州县"},{value:"620923",text:"肃北蒙古族自治县"},{value:"620924",text:"阿克塞哈萨克族自治县"},{value:"620981",text:"玉门市"},{value:"620982",text:"敦煌市"}]},{value:"6210",text:"庆阳市",children:[{value:"621002",text:"西峰区"},{value:"621021",text:"庆城县"},{value:"621022",text:"环县"},{value:"621023",text:"华池县"},{value:"621024",text:"合水县"},{value:"621025",text:"正宁县"},{value:"621026",text:"宁县"},{value:"621027",text:"镇原县"}]},{value:"6211",text:"定西市",children:[{value:"621102",text:"安定区"},{value:"621121",text:"通渭县"},{value:"621122",text:"陇西县"},{value:"621123",text:"渭源县"},{value:"621124",text:"临洮县"},{value:"621125",text:"漳县"},{value:"621126",text:"岷县"}]},{value:"6212",text:"陇南市",children:[{value:"621202",text:"武都区"},{value:"621221",text:"成县"},{value:"621222",text:"文县"},{value:"621223",text:"宕昌县"},{value:"621224",text:"康县"},{value:"621225",text:"西和县"},{value:"621226",text:"礼县"},{value:"621227",text:"徽县"},{value:"621228",text:"两当县"}]},{value:"6229",text:"临夏回族自治州",children:[{value:"622901",text:"临夏市"},{value:"622921",text:"临夏县"},{value:"622922",text:"康乐县"},{value:"622923",text:"永靖县"},{value:"622924",text:"广河县"},{value:"622925",text:"和政县"},{value:"622926",text:"东乡族自治县"},{value:"622927",text:"积石山保安族东乡族撒拉族自治县"}]},{value:"6230",text:"甘南藏族自治州",children:[{value:"623001",text:"合作市"},{value:"623021",text:"临潭县"},{value:"623022",text:"卓尼县"},{value:"623023",text:"舟曲县"},{value:"623024",text:"迭部县"},{value:"623025",text:"玛曲县"},{value:"623026",text:"碌曲县"},{value:"623027",text:"夏河县"}]}]},{value:"63",text:"青海省",children:[{value:"6301",text:"西宁市",children:[{value:"630102",text:"城东区"},{value:"630103",text:"城中区"},{value:"630104",text:"城西区"},{value:"630105",text:"城北区"},{value:"630106",text:"湟中区"},{value:"630121",text:"大通回族土族自治县"},{value:"630123",text:"湟源县"}]},{value:"6302",text:"海东市",children:[{value:"630202",text:"乐都区"},{value:"630203",text:"平安区"},{value:"630222",text:"民和回族土族自治县"},{value:"630223",text:"互助土族自治县"},{value:"630224",text:"化隆回族自治县"},{value:"630225",text:"循化撒拉族自治县"}]},{value:"6322",text:"海北藏族自治州",children:[{value:"632221",text:"门源回族自治县"},{value:"632222",text:"祁连县"},{value:"632223",text:"海晏县"},{value:"632224",text:"刚察县"}]},{value:"6323",text:"黄南藏族自治州",children:[{value:"632301",text:"同仁市"},{value:"632322",text:"尖扎县"},{value:"632323",text:"泽库县"},{value:"632324",text:"河南蒙古族自治县"}]},{value:"6325",text:"海南藏族自治州",children:[{value:"632521",text:"共和县"},{value:"632522",text:"同德县"},{value:"632523",text:"贵德县"},{value:"632524",text:"兴海县"},{value:"632525",text:"贵南县"}]},{value:"6326",text:"果洛藏族自治州",children:[{value:"632621",text:"玛沁县"},{value:"632622",text:"班玛县"},{value:"632623",text:"甘德县"},{value:"632624",text:"达日县"},{value:"632625",text:"久治县"},{value:"632626",text:"玛多县"}]},{value:"6327",text:"玉树藏族自治州",children:[{value:"632701",text:"玉树市"},{value:"632722",text:"杂多县"},{value:"632723",text:"称多县"},{value:"632724",text:"治多县"},{value:"632725",text:"囊谦县"},{value:"632726",text:"曲麻莱县"}]},{value:"6328",text:"海西蒙古族藏族自治州",children:[{value:"632801",text:"格尔木市"},{value:"632802",text:"德令哈市"},{value:"632803",text:"茫崖市"},{value:"632821",text:"乌兰县"},{value:"632822",text:"都兰县"},{value:"632823",text:"天峻县"},{value:"632857",text:"大柴旦行政委员会"}]}]},{value:"64",text:"宁夏回族自治区",children:[{value:"6401",text:"银川市",children:[{value:"640104",text:"兴庆区"},{value:"640105",text:"西夏区"},{value:"640106",text:"金凤区"},{value:"640121",text:"永宁县"},{value:"640122",text:"贺兰县"},{value:"640181",text:"灵武市"}]},{value:"6402",text:"石嘴山市",children:[{value:"640202",text:"大武口区"},{value:"640205",text:"惠农区"},{value:"640221",text:"平罗县"}]},{value:"6403",text:"吴忠市",children:[{value:"640302",text:"利通区"},{value:"640303",text:"红寺堡区"},{value:"640323",text:"盐池县"},{value:"640324",text:"同心县"},{value:"640381",text:"青铜峡市"}]},{value:"6404",text:"固原市",children:[{value:"640402",text:"原州区"},{value:"640422",text:"西吉县"},{value:"640423",text:"隆德县"},{value:"640424",text:"泾源县"},{value:"640425",text:"彭阳县"}]},{value:"6405",text:"中卫市",children:[{value:"640502",text:"沙坡头区"},{value:"640521",text:"中宁县"},{value:"640522",text:"海原县"}]}]},{value:"65",text:"新疆维吾尔自治区",children:[{value:"6501",text:"乌鲁木齐市",children:[{value:"650102",text:"天山区"},{value:"650103",text:"沙依巴克区"},{value:"650104",text:"新市区"},{value:"650105",text:"水磨沟区"},{value:"650106",text:"头屯河区"},{value:"650107",text:"达坂城区"},{value:"650109",text:"米东区"},{value:"650121",text:"乌鲁木齐县"}]},{value:"6502",text:"克拉玛依市",children:[{value:"650202",text:"独山子区"},{value:"650203",text:"克拉玛依区"},{value:"650204",text:"白碱滩区"},{value:"650205",text:"乌尔禾区"}]},{value:"6504",text:"吐鲁番市",children:[{value:"650402",text:"高昌区"},{value:"650421",text:"鄯善县"},{value:"650422",text:"托克逊县"}]},{value:"6505",text:"哈密市",children:[{value:"650502",text:"伊州区"},{value:"650521",text:"巴里坤哈萨克自治县"},{value:"650522",text:"伊吾县"}]},{value:"6523",text:"昌吉回族自治州",children:[{value:"652301",text:"昌吉市"},{value:"652302",text:"阜康市"},{value:"652323",text:"呼图壁县"},{value:"652324",text:"玛纳斯县"},{value:"652325",text:"奇台县"},{value:"652327",text:"吉木萨尔县"},{value:"652328",text:"木垒哈萨克自治县"}]},{value:"6527",text:"博尔塔拉蒙古自治州",children:[{value:"652701",text:"博乐市"},{value:"652702",text:"阿拉山口市"},{value:"652722",text:"精河县"},{value:"652723",text:"温泉县"}]},{value:"6528",text:"巴音郭楞蒙古自治州",children:[{value:"652801",text:"库尔勒市"},{value:"652822",text:"轮台县"},{value:"652823",text:"尉犁县"},{value:"652824",text:"若羌县"},{value:"652825",text:"且末县"},{value:"652826",text:"焉耆回族自治县"},{value:"652827",text:"和静县"},{value:"652828",text:"和硕县"},{value:"652829",text:"博湖县"}]},{value:"6529",text:"阿克苏地区",children:[{value:"652901",text:"阿克苏市"},{value:"652902",text:"库车市"},{value:"652922",text:"温宿县"},{value:"652924",text:"沙雅县"},{value:"652925",text:"新和县"},{value:"652926",text:"拜城县"},{value:"652927",text:"乌什县"},{value:"652928",text:"阿瓦提县"},{value:"652929",text:"柯坪县"}]},{value:"6530",text:"克孜勒苏柯尔克孜自治州",children:[{value:"653001",text:"阿图什市"},{value:"653022",text:"阿克陶县"},{value:"653023",text:"阿合奇县"},{value:"653024",text:"乌恰县"}]},{value:"6531",text:"喀什地区",children:[{value:"653101",text:"喀什市"},{value:"653121",text:"疏附县"},{value:"653122",text:"疏勒县"},{value:"653123",text:"英吉沙县"},{value:"653124",text:"泽普县"},{value:"653125",text:"莎车县"},{value:"653126",text:"叶城县"},{value:"653127",text:"麦盖提县"},{value:"653128",text:"岳普湖县"},{value:"653129",text:"伽师县"},{value:"653130",text:"巴楚县"},{value:"653131",text:"塔什库尔干塔吉克自治县"}]},{value:"6532",text:"和田地区",children:[{value:"653201",text:"和田市"},{value:"653221",text:"和田县"},{value:"653222",text:"墨玉县"},{value:"653223",text:"皮山县"},{value:"653224",text:"洛浦县"},{value:"653225",text:"策勒县"},{value:"653226",text:"于田县"},{value:"653227",text:"民丰县"}]},{value:"6540",text:"伊犁哈萨克自治州",children:[{value:"654002",text:"伊宁市"},{value:"654003",text:"奎屯市"},{value:"654004",text:"霍尔果斯市"},{value:"654021",text:"伊宁县"},{value:"654022",text:"察布查尔锡伯自治县"},{value:"654023",text:"霍城县"},{value:"654024",text:"巩留县"},{value:"654025",text:"新源县"},{value:"654026",text:"昭苏县"},{value:"654027",text:"特克斯县"},{value:"654028",text:"尼勒克县"}]},{value:"6542",text:"塔城地区",children:[{value:"654201",text:"塔城市"},{value:"654202",text:"乌苏市"},{value:"654203",text:"沙湾市"},{value:"654221",text:"额敏县"},{value:"654224",text:"托里县"},{value:"654225",text:"裕民县"},{value:"654226",text:"和布克赛尔蒙古自治县"}]},{value:"6543",text:"阿勒泰地区",children:[{value:"654301",text:"阿勒泰市"},{value:"654321",text:"布尔津县"},{value:"654322",text:"富蕴县"},{value:"654323",text:"福海县"},{value:"654324",text:"哈巴河县"},{value:"654325",text:"青河县"},{value:"654326",text:"吉木乃县"}]},{value:"6590",text:"自治区直辖县级行政区划",children:[{value:"659001",text:"石河子市"},{value:"659002",text:"阿拉尔市"},{value:"659003",text:"图木舒克市"},{value:"659004",text:"五家渠市"},{value:"659005",text:"北屯市"},{value:"659006",text:"铁门关市"},{value:"659007",text:"双河市"},{value:"659008",text:"可克达拉市"},{value:"659009",text:"昆玉市"},{value:"659010",text:"胡杨河市"},{value:"659011",text:"新星市"},{value:"659012",text:"白杨市"}]}]}],Zu=(e,t)=>{for(const a of e)if(a.text===t[0]){if(1===t.length)return a.value;if(a.children&&a.children.length){const e=Zu(a.children,t.slice(1));if(e)return e}}return""},Xu={__name:"operation-address",setup(t){e.useCssVars((e=>({"760305a7":n.value})));const a=ae(),n=e.ref(a.statusBarHeight+"px"),r=e.ref(0);d((e=>{r.value=e.scrollTop}));const s=()=>{uni.navigateBack({delta:1})},c=()=>{m.value.isDefault=1==m.value.isDefault?0:1},u=e.ref(""),m=e.ref({city:"",detailAddress:"",district:"",isDefault:0,province:"",receiverName:"",receiverPhone:""}),p=async()=>{if(v())try{const e=m.value.id?hr:pr;await e(m.value);uni.showToast({title:(m.value.id?"修改":"新增")+"成功",icon:"none"}),s()}catch(e){o("log","at pages/shopping-mall/operation-address.vue:119",e)}},h=e=>{const[t,a,n]=e.detail.value;m.value.province=t.text,m.value.city=a.text,m.value.district=n.text,u.value=n.value};l((e=>{if(e.info){const t=JSON.parse(e.info);m.value=t;const{province:a,city:n,district:o}=t;u.value=Zu(Ju,[a,n,o])}}));const v=()=>{const{receiverName:e,receiverPhone:t,province:a,city:n,district:o,detailAddress:i}=m.value;if(!e.trim())return uni.showToast({title:"请填写收件人姓名",icon:"none"}),!1;return t.trim()?/^1[3-9]\d{9}$/.test(t.trim())?a?n?o?!!i.trim()||(uni.showToast({title:"请填写详细收货地址（街道/小区/门牌号）",icon:"none"}),!1):(uni.showToast({title:"请选择区县",icon:"none"}),!1):(uni.showToast({title:"请选择城市",icon:"none"}),!1):(uni.showToast({title:"请选择省份",icon:"none"}),!1):(uni.showToast({title:"请填写正确的11位手机号",icon:"none"}),!1):(uni.showToast({title:"请填写收件人手机号",icon:"none"}),!1)};return(t,a)=>{const n=i(e.resolveDynamicComponent("uni-icons"),re),o=i(e.resolveDynamicComponent("uni-nav-bar"),Di),l=i(e.resolveDynamicComponent("uni-data-picker"),Wu);return e.openBlock(),e.createElementBlock("view",{class:"settled-box"},[e.createElementVNode("scroll-view",{"scroll-y":"",class:"scroll-content","scroll-top":t.top,"show-scrollbar":!1,"scroll-with-animation":"",id:"scrollView"},[e.createElementVNode("view",{class:"header"},[e.createVNode(o,{class:e.normalizeClass([r.value>15?"scrollClass":"","header-bar"]),backgroundColor:"rgba(255,255,255,0)",border:!1,title:(m.value.id?"修改":"新增")+"收货地址"},{left:e.withCtx((()=>[e.createVNode(n,{type:"left",size:"24",onClick:s})])),_:1},8,["class","title"])]),e.createElementVNode("view",{class:"content"},[e.createElementVNode("view",{class:"address-item"},[e.createElementVNode("view",{class:"address-info"},[e.createElementVNode("view",null,"收货人"),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>m.value.receiverName=e),type:"text",placeholder:"请填写收货人姓名",class:"address-boder"},null,512),[[e.vModelText,m.value.receiverName]])]),e.createElementVNode("view",{class:"address-info"},[e.createElementVNode("view",null,"手机号"),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>m.value.receiverPhone=e),type:"text",placeholder:"请填写收货人手机号"},null,512),[[e.vModelText,m.value.receiverPhone]])])]),e.createElementVNode("view",{class:"address-item"},[e.createElementVNode("view",null,"地址信息"),e.createElementVNode("view",{class:"address-info"},[e.createElementVNode("view",{style:{"margin-right":"20rpx"}},"省-市-区"),e.createVNode(l,{placeholder:"请选择所在地区","popup-title":"请选择所在地区",localdata:e.unref(Ju),modelValue:u.value,"onUpdate:modelValue":a[2]||(a[2]=e=>u.value=e),onChange:h},null,8,["localdata","modelValue"])]),e.createElementVNode("view",{class:"address-info"},[e.createElementVNode("view",null,"详细地址"),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":a[3]||(a[3]=e=>m.value.detailAddress=e),type:"text",placeholder:"请填写详细地址信息",style:{width:"75%"}},null,512),[[e.vModelText,m.value.detailAddress]])])]),e.createElementVNode("view",{class:"address-item"},[e.createElementVNode("view",{class:"address-default"},[e.createElementVNode("view",null,[e.createElementVNode("view",null,"设为默认地址"),e.createElementVNode("view",{class:"default-tips"},[e.createVNode(n,{type:"sound-filled",size:"16",color:"#89898a"}),e.createTextVNode(" 下单时会优先使用该地址 ")])]),e.createVNode(n,{type:m.value.isDefault?"checkbox-filled":"circle",color:m.value.isDefault?"#ff9900":"#ccc",size:"25",onClick:c},null,8,["type","color"])])])])],8,["scroll-top"]),e.createElementVNode("view",{class:"footer"},[e.createElementVNode("view",{class:"btn-buy",onClick:p},"保存")])])}}},Qu=ie(Xu,[["__scopeId","data-v-74090874"]]),ed={__name:"order-details",setup(t){e.useCssVars((e=>({"49c8cf02":n.value})));const a=ae(),n=e.ref(a.statusBarHeight+"px"),r=e.ref({}),c=(e,t)=>{var a;return(null==(a={1:{1:"退款审核中",2:"退款请求通过",3:"退款申请拒绝",4:"退款成功"},2:{1:"退货审核中",2:"退货请求通过",3:"退货申请拒绝",4:"退款成功"},3:{1:"换货审核中",2:"换货请求通过",3:"换货申请拒绝",4:"换货成功"}}[val])?void 0:a[t])||"退款中"},u=(e,t)=>{var a;return(null==(a={1:{1:"请耐心等待工作人员审核",2:"仅退款请求已通过",3:"仅退款申请已拒绝",4:"退款金额已原路退回"},2:{1:"请耐心等待工作人员审核",2:"请及时上传退货物流信息",3:"退货退款申请已拒绝",4:"退款金额已原路退回"},3:{1:"请耐心等待工作人员审核换货申请",2:"请及时上传退货物流信息",3:"换货申请已拒绝",4:"退款金额已原路退回"}}[e])?void 0:a[t])||"退款中"},d=e.ref({}),m=async()=>{try{const{expressCompany:e,expressNo:t}=r.value,{data:a}=await((e,t={})=>A.get("/api/mall/express/query",e,t))({expressCompany:"韵达快递",expressNo:"428163465007284"});a.tracks.forEach(((e,t)=>{e.isCompleted=0===t})),d.value=a}catch(Ft){o("log","at pages/shopping-mall/order-details.vue:261",Ft)}};l((e=>{m(),((e,t={})=>A.get(`/api/mall/order/detail?id=${e}`,t))(e.id).then((e=>{r.value=e.data,o("log","at pages/shopping-mall/order-details.vue:269",e.data),7==e.data.orderStatus&&f(),3==e.data.orderStatus&&m()}))})),s((()=>{}));const p=e.ref(0),h=e=>{p.value=e.detail.scrollTop},v=()=>{uni.navigateBack({delta:1})},g=e.ref({}),f=async()=>{try{const{data:e}=await((e,t={})=>A.get(`/api/mall/refund/detail?id=${e}`,t))(r.value.id);g.value=e}catch(e){o("log","at pages/shopping-mall/order-details.vue:307",e)}},y=e=>{uni.setClipboardData({data:e,success(e){uni.showToast({title:"已复制"})}})},_=e.ref(null),k=e=>{_.value.open("center")},E=()=>{uni.navigateTo({url:`/pages/payment/order/refund-order?order=${JSON.stringify(r.value)}`}),_.value.close()};e.ref("weixin"),Zc();const x=async()=>{try{await Xl({orderSn:r.value.orderSn});uni.showToast({title:"取消成功",icon:"none"})}catch(e){o("log","at pages/shopping-mall/order-details.vue:444",e)}};return(t,a)=>{const n=i(e.resolveDynamicComponent("uni-icons"),re),o=i(e.resolveDynamicComponent("uni-nav-bar"),Di),s=i(e.resolveDynamicComponent("uni-popup"),vi);return e.openBlock(),e.createElementBlock("view",{class:"settled-box"},[e.createElementVNode("view",{class:"header"},[e.createVNode(o,{class:e.normalizeClass([p.value>15?"scrollClass":"","header-bar"]),backgroundColor:"rgba(255,255,255,0)",border:!1,title:(m=r.value.orderStatus,{1:"待付款",2:"待发货",3:"待收货",4:"待评价",5:"已完成",6:"已取消",7:"售后中"}[m]||"订单详情")},{left:e.withCtx((()=>[e.createVNode(n,{type:"left",size:"24",onClick:v})])),_:1},8,["class","title"])]),e.createElementVNode("scroll-view",{"scroll-y":"",onScroll:h,style:{height:"calc(100vh - 130rpx)"},"show-scrollbar":!1},[e.createElementVNode("view",{class:"consultation-content"},[e.createElementVNode("view",{class:"notice-bar"},[e.createVNode(n,{type:"sound",size:"20",color:"#F87171"}),e.createElementVNode("view",{class:"notice-text"},e.toDisplayString((l=r.value.orderStatus,{1:"未付款订单自动取消剩余：15分钟",2:"您订单的商品正在紧锣密鼓打包中",3:"快递正在途中快马加鞭，小主耐心等待",4:"感谢小主的耐心等待，希望商品让您满意",7:"非常抱歉没有让您选中满意的商品"}[l]||"订单状态更新中...")),1)]),7==r.value.orderStatus?(e.openBlock(),e.createElementBlock("view",{key:0,class:"refund-info"},[e.createElementVNode("view",{class:"refund-title"},e.toDisplayString(c(g.value.refundType,g.value.status)),1),e.createElementVNode("view",{class:"refund-text"},e.toDisplayString(u(g.value.refundType,g.value.status)),1)])):e.createCommentVNode("",!0),e.createElementVNode("view",{class:"appointment-info",style:{display:"flex",padding:"30rpx 50rpx"}},[e.createVNode(n,{type:"location",size:"23",color:"#888888",style:{"margin-right":"10rpx"}}),e.createElementVNode("view",{class:"info-item",style:{width:"100%","align-items":"normal","flex-direction":"column","margin-top":"0"}},[e.createElementVNode("view",{class:"info-label"},e.toDisplayString(r.value.receiverAddress),1),e.createElementVNode("view",{class:"info-label info-text"},[e.createElementVNode("text",null,e.toDisplayString(r.value.receiverName),1),e.createElementVNode("text",null,e.toDisplayString(r.value.receiverPhone),1)])])]),e.createElementVNode("view",{class:"user-info-section"},[e.createElementVNode("view",{class:"user-details"},[e.createElementVNode("image",{src:r.value.items[0].thumbnail,class:"user-avatar"},null,8,["src"]),e.createElementVNode("view",{class:"user-info"},[e.createElementVNode("view",null,e.toDisplayString(r.value.items[0].productName),1),e.createElementVNode("view",{class:"info-item"},[e.createElementVNode("view",{class:"item-text"},e.toDisplayString(Object.values(JSON.parse(r.value.items[0].specValues)).join(";")),1),e.createElementVNode("view",null,"¥"+e.toDisplayString(r.value.items[0].price),1)]),e.createElementVNode("view",{class:"item-text"},"x "+e.toDisplayString(r.value.items[0].quantity),1)])])]),e.createElementVNode("view",{class:"appointment-info"},[e.createElementVNode("view",{class:"info-title"},[e.createElementVNode("view",null,"订单信息"),2==r.value.status?(e.openBlock(),e.createElementBlock("view",{key:0,class:"info-refund",onClick:k},"我要退款")):e.createCommentVNode("",!0)]),e.createElementVNode("view",{class:"info-item"},[e.createElementVNode("view",{class:"info-label"},"订单编号"),e.createElementVNode("view",{class:"consultation-methods",style:{display:"block"}},[e.createElementVNode("image",{src:lc,style:{width:"22rpx",height:"22rpx","margin-right":"10rpx"},onClick:a[0]||(a[0]=e=>y(r.value.orderSn))}),e.createElementVNode("text",{class:"method-text"},e.toDisplayString(r.value.orderSn),1)])]),e.createElementVNode("view",{class:"info-item"},[e.createElementVNode("view",{class:"info-label"},"创建时间"),e.createElementVNode("view",{class:"info-value"},e.toDisplayString(r.value.createTime),1)]),r.value.payTime?(e.openBlock(),e.createElementBlock("view",{key:0,class:"info-item"},[e.createElementVNode("view",{class:"info-label"},"支付时间"),e.createElementVNode("view",{class:"info-value"},e.toDisplayString(r.value.payTime),1)])):e.createCommentVNode("",!0),e.createElementVNode("view",{class:"info-item"},[e.createElementVNode("view",{class:"info-label"},"订单金额"),e.createElementVNode("view",{class:"info-value"},"￥"+e.toDisplayString(r.value.totalAmount),1)]),1!=r.value.orderStatus?(e.openBlock(),e.createElementBlock("view",{key:1,class:"info-item"},[e.createElementVNode("view",{class:"info-label"},"支付方式"),e.createElementVNode("view",{class:"consultation-methods"},["wxpay"==r.value.payType?(e.openBlock(),e.createElementBlock("view",{key:0,class:"method-item"},[e.createElementVNode("image",{src:"http://cdn.yupao.com/pc/images/zgp/recharge-pay-wechatimg.png"}),e.createElementVNode("text",{class:"method-text"},"微信支付")])):(e.openBlock(),e.createElementBlock("view",{key:1,class:"method-item"},[e.createElementVNode("image",{src:"http://cdn.yupao.com/pc/images/zgp/recharge-pay-alipayimg.png"}),e.createElementVNode("text",{class:"method-text"},"支付宝支付")]))])])):e.createCommentVNode("",!0)]),r.value.expressNo?(e.openBlock(),e.createElementBlock("view",{key:1,class:"appointment-info"},[e.createElementVNode("view",{class:"info-express"},[e.createVNode(n,{"custom-prefix":"iconfont",type:"icon-xiaohuoche",size:"20",color:"#9a9a9a",class:"icon"}),e.createElementVNode("view",{class:"express-text"},e.toDisplayString(r.value.expressCompany),1),e.createElementVNode("view",{class:"express-code"},[e.createElementVNode("view",null,e.toDisplayString(r.value.expressNo),1),e.createElementVNode("image",{src:lc,style:{width:"22rpx",height:"22rpx","margin-left":"10rpx"},onClick:a[1]||(a[1]=e=>y(r.value.orderSn))})])]),e.createElementVNode("view",{class:"logistics-container"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(d.value.tracks,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"logistics-item",key:a},[e.createElementVNode("view",{class:"logistics-node-wrap"},[e.createElementVNode("view",{class:e.normalizeClass(["logistics-node",{completed:t.isCompleted}])},null,2),a<d.value.tracks.length-1?(e.openBlock(),e.createElementBlock("view",{key:0,class:"logistics-line"})):e.createCommentVNode("",!0)]),e.createElementVNode("view",{class:"logistics-info"},[e.createElementVNode("view",{class:"logistics-time"},e.toDisplayString(t.time),1),e.createElementVNode("view",{class:"logistics-status"},e.toDisplayString(t.context),1)])])))),128))])])):e.createCommentVNode("",!0),r.value.expressNo?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(Fu,{key:2,style:{"margin-bottom":"50rpx"}}))])],32),e.createElementVNode("view",{class:"footer"},[1==r.value.orderStatus?(e.openBlock(),e.createElementBlock("view",{key:0,class:"btn-cart",onClick:x},"取消订单")):e.createCommentVNode("",!0),1==r.value.orderStatus?(e.openBlock(),e.createElementBlock("view",{key:1,class:"btn-buy",onClick:a[2]||(a[2]=(...e)=>t.handleBuy&&t.handleBuy(...e))},"继续支付")):e.createCommentVNode("",!0)]),e.createVNode(s,{ref_key:"popup",ref:_,type:"center",animation:!1},{default:e.withCtx((()=>[e.createElementVNode("view",{class:"popup-container"},[e.createElementVNode("view",{class:"popup-title"},[e.createElementVNode("view",null,"退款须知"),e.createElementVNode("image",{src:au,style:{width:"33rpx",height:"33rpx","margin-right":"10rpx"}})]),e.createElementVNode("view",{class:"popup-content"},[e.createElementVNode("view",{class:"list-item"},"订单剩余未服务时长在有效期内可退"),e.createElementVNode("view",{class:"list-item"},"如拨打过且通话时长>3分钟，根据实际使用时长，按照原价进行扣减后退费;"),e.createElementVNode("view",{class:"list-item"},"文字倾诉订单下单后未回复的，自动退款;")]),e.createElementVNode("view",{class:"popup-btn"},[e.createElementVNode("view",{class:"popup-btn-text",onClick:E},"我知道了")])])])),_:1},512)]);var l,m}}},td=ie(ed,[["__scopeId","data-v-650a3542"]]),ad={__name:"order-list",setup(t){const a=e.ref([{name:"全部"},{name:"待付款"},{name:"待发货"},{name:"待收货"},{name:"待评价"},{name:"已完成"},{name:"已取消"},{name:"售后中"}]);e.ref(!1);const n=e.ref(0),r=e.ref([]),s=e.ref({pageNum:1,pageSize:10}),c=e=>{s.value.pageNum=1,s.value.orderStatus=e,n.value=e,r.value=[],0==e&&delete s.value.orderStatus,d()},u=e.ref(!1);m((()=>{u.value||(s.value.current+=1,d())}));const d=async()=>{try{const e=await((e,t={})=>A.post("/api/mall/order/my",e,t))(s.value);r.value=[...r.value,...e.data.records],u.value=0===e.data.records.length}catch(Ft){o("log","at pages/shopping-mall/order-list.vue:182",Ft)}},p=e=>{switch(e){case 1:return"待付款";case 2:return"待发货";case 3:return"待收货";case 4:return"待评价";case 5:return"已完成";case 6:return"已取消";case 7:return"售后中";default:return""}},h=e.ref({});l((e=>{}));const v=e=>{uni.navigateTo({url:`/pages/payment/order/evaluation-order?type=${JSON.stringify(h.value)}&colorType=1`})};return e.onMounted((()=>{d()})),(t,s)=>{const l=i(e.resolveDynamicComponent("u-navbar"),Fl),u=i(e.resolveDynamicComponent("u-tabs"),Ec);return e.openBlock(),e.createElementBlock("view",{class:"order-page"},[e.createVNode(l,{title:"商品订单",autoBack:!0}),e.createVNode(u,{list:a.value,onChange:c,current:n.value,lineColor:"#00C28A",activeStyle:"color:#000;font-weight:600",inactiveStyle:"color:#666"},null,8,["list","current"]),e.createElementVNode("scroll-view",{"scroll-y":"",class:"order-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.value,((t,a)=>{return e.openBlock(),e.createElementBlock("view",{key:a,class:e.normalizeClass(["order-card",(n=t.status,{"待支付":"","待咨询":"","待评价":"","已完成":"","未完成":""}[n])])},[e.createElementVNode("view",{class:"order-header"},[e.createElementVNode("text",{class:"order-no"},[e.createTextVNode("订单号："+e.toDisplayString(t.orderSn)+" ",1),e.createElementVNode("image",{src:lc,style:{width:"25rpx",height:"25rpx","margin-left":"15rpx"},onClick:e=>{return a=t.orderSn,void uni.setClipboardData({data:a,success(e){uni.showToast({title:"已复制"})}});var a}},null,8,["onClick"])]),e.createElementVNode("text",{class:"status orange"},e.toDisplayString(p(t.status)),1)]),e.createElementVNode("view",{class:"order-body"},[e.createElementVNode("view",{class:"order-item",onClick:e=>(e=>{o("log","at pages/shopping-mall/order-list.vue:243",e),uni.navigateTo({url:`/pages/shopping-mall/order-details?id=${e.id}`})})(t)},[e.createElementVNode("image",{src:t.items[0].thumbnail,class:"cover"},null,8,["src"]),e.createElementVNode("view",{class:"info"},[e.createElementVNode("view",{class:"title"},e.toDisplayString(t.items[0].productName),1),e.createElementVNode("view",{class:"price"},[e.createElementVNode("view",{class:"text"},e.toDisplayString(Object.values(JSON.parse(t.items[0].specValues)).join(";")),1),e.createElementVNode("view",{class:"price-num"},"¥"+e.toDisplayString(t.items[0].price),1)]),e.createElementVNode("view",{class:"count"},"x"+e.toDisplayString(t.items[0].quantity),1)])],8,["onClick"])]),e.createElementVNode("view",{class:"desc"},[e.createElementVNode("view",{class:"text"},"感谢小主的耐心等待，希望商品让您满意"),e.createElementVNode("view",{class:"price"},"实付款¥"+e.toDisplayString(t.items[0].totalAmount),1)]),e.createElementVNode("view",{class:"btn-group"},[e.createElementVNode("view",{style:{display:"flex","flex-direction":"row",gap:"20rpx"}},[1==t.orderStatus?(e.openBlock(),e.createElementBlock("view",{key:0,class:"btn-2",size:"small",shape:"circle",plain:"",type:"info",onClick:e=>(async e=>{try{await Xl({orderSn:e.orderSn}),uni.showToast({title:"取消成功",icon:"none"}),d()}catch(Ft){o("log","at pages/shopping-mall/order-list.vue:276",Ft)}})(t)},"取消订单",8,["onClick"])):e.createCommentVNode("",!0),1==t.orderStatus?(e.openBlock(),e.createElementBlock("view",{key:1,class:"btn-1",size:"small",shape:"circle",type:"warning"},"继续支付")):e.createCommentVNode("",!0),2==t.orderStatus?(e.openBlock(),e.createElementBlock("view",{key:2,class:"btn-1",size:"small",shape:"circle",plain:"",type:"info",onClick:e=>(e=>{uni.navigateTo({url:`/pages/payment/order/refund-order?order=${JSON.stringify(e)}`})})(t)},"退款",8,["onClick"])):e.createCommentVNode("",!0),4==t.orderStatus?(e.openBlock(),e.createElementBlock("view",{key:3,class:"btn-1",size:"small",shape:"circle",type:"warning",onClick:e=>v()},"去评价",8,["onClick"])):e.createCommentVNode("",!0),3==t.orderStatus?(e.openBlock(),e.createElementBlock("view",{key:4,class:"btn-1",size:"small",shape:"circle",type:"warning",onClick:e=>v()},"确认收货",8,["onClick"])):e.createCommentVNode("",!0),3==t.orderStatus||4==t.orderStatus?(e.openBlock(),e.createElementBlock("view",{key:5,class:"btn-2",size:"small",shape:"circle",type:"warning",onClick:e=>v()},"查看物流",8,["onClick"])):e.createCommentVNode("",!0),3==t.orderStatus?(e.openBlock(),e.createElementBlock("view",{key:6,class:"btn-2",size:"small",shape:"circle",type:"warning",onClick:e=>v()},"退换",8,["onClick"])):e.createCommentVNode("",!0),6==t.orderStatus?(e.openBlock(),e.createElementBlock("view",{key:7,class:"btn-1",size:"small",shape:"circle",type:"warning",onClick:e=>v()},"加入购物车",8,["onClick"])):e.createCommentVNode("",!0)])])],2);var n})),128))])])}}},nd=ie(ad,[["__scopeId","data-v-3e9a4850"]]),od={__name:"order-confirmation",setup(t){e.useCssVars((e=>({"32eacfd2":c.value})));const a=e.ref(0),n=ae(),r=Gu(),c=e.ref(n.statusBarHeight+"px"),u=e.ref([]);u.value=r.orderList,o("log","at pages/shopping-mall/order-confirmation.vue:133",r.orderList);const d=e=>{a.value=e.detail.scrollTop},m=()=>{uni.navigateBack({delta:1})},p=e.ref("select-green"),h=e.ref({}),v=async()=>{try{const{data:e}=await((e,t={})=>A.get("/api/mall/address/default",e,t))();if(!e)return;u.value.addressId=e.id,h.value=e}catch(e){o("log","at pages/shopping-mall/order-confirmation.vue:154",e)}},g=()=>{uni.navigateTo({url:"/pages/shopping-mall/delivery-address"})},f=e.ref("weixin"),y=e=>{f.value=e},{isLoading:_,paymentStatus:k,initPaymentChannels:E,wechatPay:x,alipay:N,PAYMENT_STATUS:w}=Zc(),C=async e=>{if(null!=h.value.id)try{const e="weixin"==f.value?cc:uc,t="weixin"==f.value?"wxPay":"aliPay",{id:a,addressId:n,currentSku:o,remark:i}=u.value,r={addressId:n,directBuyItem:{productId:a,quantity:o.quantity,skuId:o.id},remark:i},s=await((e,t={})=>A.post("/api/mall/order/create",e,t))(r),{data:l}=await e({orderId:s.data.orderId,amount:s.data.orderAmount,type:t,status:1});"weixin"==f.value?S(l.orderString):M(l.orderString,s.data.orderSn)}catch(t){message.value=t.message||"支付宝支付失败"}else uni.showToast({title:"请选择收货地址",icon:"none"})},M=async(e,t)=>{try{await N(e);I(t)}catch(a){message.value=a.message||"支付宝支付失败"}},S=async e=>{try{(await x(e)).status===w.SUCCESS&&(message.value="微信支付成功")}catch(t){message.value=t.message||"微信支付失败"}},I=async e=>{try{(await hc({orderSn:e})).data.status}catch(t){message.value=t.message||"支付失败"}};return l((e=>{o("log","at pages/shopping-mall/order-confirmation.vue:266",uni.getStorageSync("orderTempData"))})),s((()=>{v()})),(t,n)=>{const o=i(e.resolveDynamicComponent("uni-icons"),re),r=i(e.resolveDynamicComponent("uni-nav-bar"),Di);return e.openBlock(),e.createElementBlock("view",{class:"settled-box"},[e.createElementVNode("view",{class:"header"},[e.createVNode(r,{class:e.normalizeClass([a.value>15?"scrollClass":"","header-bar"]),backgroundColor:"rgba(255,255,255,0)",border:!1,title:"确认订单"},{left:e.withCtx((()=>[e.createVNode(o,{type:"left",size:"24",onClick:m})])),_:1},8,["class"])]),e.createElementVNode("scroll-view",{"scroll-y":"",onScroll:d,style:{height:"100vh"},"show-scrollbar":!1},[e.createElementVNode("view",{class:"consultation-content"},[e.createElementVNode("view",{class:"consultation-plan-section"},[e.createElementVNode("view",{class:"plan-list-container"},[e.createElementVNode("view",{class:"address-item"},[h.value.receiverPhone?(e.openBlock(),e.createElementBlock("view",{key:0,class:"address-info"},[e.createVNode(o,{type:"location",size:"30",color:"#8D8D8D",class:"icon"}),e.createElementVNode("view",null,[e.createElementVNode("view",null,e.toDisplayString(h.value.detailAddress),1),e.createElementVNode("view",{class:"info-user"},[e.createElementVNode("view",null,e.toDisplayString(h.value.receiverName),1),e.createElementVNode("view",null,e.toDisplayString(h.value.receiverPhone),1)])])])):(e.openBlock(),e.createElementBlock("view",{key:1,class:"address-info"},"请添加默认收货地址")),e.createVNode(o,{type:"right",size:"30",onClick:g})])])]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(u.value,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"consultation-plan-section"},[e.createElementVNode("view",{class:"plan-list-container",style:{padding:"20rpx"}},[e.createElementVNode("view",{class:"cart-item-info"},[e.createElementVNode("image",{class:"cart-item-img",src:t.thumbnail,mode:"widthFix"},null,8,["src"]),e.createElementVNode("view",{class:"cart-item-detail"},[e.createElementVNode("text",{class:"cart-item-title"},e.toDisplayString(t.productName),1),e.createElementVNode("view",{class:"cart-item-spec"},[e.createElementVNode("text",null,e.toDisplayString(Object.values(t.specValues).join(";")),1),e.createElementVNode("text",{class:"cart-item-price"},"¥"+e.toDisplayString(t.totalAmount),1)]),e.createElementVNode("view",{class:"count-group"},[e.createElementVNode("view",{class:"count-btn minus-btn",onClick:e=>(e=>{u.value[e].quantity>1&&u.value[e].quantity--})(a),disabled:t.quantity<=1},[e.createElementVNode("view",null,"-"),e.createElementVNode("view",{class:"line"})],8,["onClick","disabled"]),e.createElementVNode("view",{class:"count"},e.toDisplayString(t.quantity),1),e.createElementVNode("view",{class:"count-btn plus-btn",onClick:e=>(e=>{u.value[e].quantity++})(a)},[e.createElementVNode("view",{class:"line"}),e.createElementVNode("view",null,"+")],8,["onClick"])])])])])])))),256)),e.createElementVNode("view",{class:"consultation-plan-section"},[e.createElementVNode("view",{class:"plan-list-container"},[e.createElementVNode("view",{class:"plan-item"},[e.createElementVNode("view",null,"配送"),e.createElementVNode("view",null,"48小时发货")]),e.createElementVNode("view",{class:"plan-item"},[e.createElementVNode("view",null,"运费"),e.createElementVNode("view",null,e.toDisplayString(1==u.value.freeShipping?"免运费":"¥0.00"),1)]),e.createElementVNode("view",{class:"plan-item"},[e.createElementVNode("view",null,"商品总价"),e.createElementVNode("view",{style:{color:"#de1718"}},"¥"+e.toDisplayString(u.value.currentSku.price*u.value.currentSku.quantity),1)]),e.createElementVNode("view",{class:"plan-item"},[e.createElementVNode("view",null,"应付金额"),e.createElementVNode("view",{style:{color:"#de1718"}},"¥"+e.toDisplayString(u.value.currentSku.price*u.value.currentSku.quantity),1)])])]),e.createElementVNode("view",{class:"consultation-plan-section"},[e.createElementVNode("view",{class:"please-note"},[e.createTextVNode(" 备注 "),e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":n[0]||(n[0]=e=>u.value.remark=e),"placeholder-style":"color:#9E9E9E;padding: 20rpx",placeholder:"这里是备注内容"},null,512),[[e.vModelText,u.value.remark]])])]),e.createElementVNode("view",{class:"consultation-plan-section"},[e.createElementVNode("view",{class:"plan-title"},"支付方式"),e.createElementVNode("view",{class:"please-note"},[e.createElementVNode("view",{class:"note-pay",onClick:n[1]||(n[1]=e=>y("weixin"))},[e.createElementVNode("view",{class:"pay-item"},[e.createElementVNode("image",{src:"http://cdn.yupao.com/pc/images/zgp/recharge-pay-wechatimg.png"}),e.createElementVNode("view",null,"微信支付")]),e.createElementVNode("image",{src:`/static/auth/${"weixin"==f.value?p.value:"not-selected"}.png`,style:{width:"25rpx",height:"25rpx"}},null,8,["src"])]),e.createElementVNode("view",{class:"note-pay",onClick:n[2]||(n[2]=e=>y("alipay"))},[e.createElementVNode("view",{class:"pay-item"},[e.createElementVNode("image",{src:"http://cdn.yupao.com/pc/images/zgp/recharge-pay-alipayimg.png"}),e.createElementVNode("view",null,"支付宝支付")]),e.createElementVNode("image",{src:`/static/auth/${"alipay"==f.value?p.value:"not-selected"}.png`,style:{width:"25rpx",height:"25rpx"}},null,8,["src"])])])])])],32),e.createElementVNode("view",{class:"recharge-pay-footer"},[e.createElementVNode("button",{class:"recharge-sure-price",onClick:C},"立即支付 ¥"+e.toDisplayString(u.value.currentSku.price*u.value.currentSku.quantity),1)])])}}},rd=ie(od,[["__scopeId","data-v-83210573"]]);__definePage("pages/login/login",ne),__definePage("pages/confide/index",Ii),__definePage("pages/confide/detail",Ui),__definePage("pages/consult/index",Fi),__definePage("pages/consult/detail",Hi),__definePage("pages/index/index",gr),__definePage("pages/message/index",_r),__definePage("pages/my/index",xr),__definePage("pages/readArticle/readArticle",Nr),__definePage("pages/readArticle/articleDetail",Lr),__definePage("pages/settled/settled",Or),__definePage("pages/settled/application",Pr),__definePage("pages/consult-feel/consult-feel",Gr),__definePage("pages/evaluate/evaluate",qr),__definePage("pages/forum/index/index",Xr),__definePage("pages/forum/write/write",Qr),__definePage("pages/forum/my/my",is),__definePage("pages/forum/other/other",ss),__definePage("pages/forum/mailbox/mailbox",cs),__definePage("pages/forum/write/ask-question/ask-question",us),__definePage("pages/forum/write/send-dynamics/send-dynamics",ms),__definePage("pages/forum/write/write-mailbox/write-mailbox",ps),__definePage("pages/forum/my/userInfo",Rs),__definePage("pages/forum/my/info",tl),__definePage("pages/forum/write/choose-topic/choose-topic",al),__definePage("pages/forum/index/qaDetail",nl),__definePage("pages/psychological-test/index/index",sl),__definePage("pages/psychological-test/order/order",pl),__definePage("pages/psychological-test/test-type/test-type",vl),__definePage("pages/psychological-test/start-test/start-test",fl),__definePage("pages/psychological-test/comment/comment",_l),__definePage("pages/psychological-test/contact-consult/contact-consult",kl),__definePage("pages/psychological-test/test-result/test-result",xl),__definePage("pages/psychological-test/charge-test/charge-test",wl),__definePage("pages/psychological-test/free-test/free-test",Cl),__definePage("pages/message/private-chat",Rl),__definePage("pages/supplementInfo/supplementInfo",Hl),__definePage("pages/settings/serviceSettings",$l),__definePage("pages/settings/help-center",Kl),__definePage("pages/settings/service-setup",ec),__definePage("pages/settings/service-price",ac),__definePage("pages/settings/feedback",oc),__definePage("pages/settings/complaint",rc),__definePage("pages/payment/order/refund-order",fc),__definePage("pages/settings/record",_c),__definePage("pages/payment/order/consult-order",Nc),__definePage("pages/payment/order/exam-order",Cc),__definePage("pages/payment/order/listener-order",Sc),__definePage("pages/payment/order/bill-order",Tc),__definePage("pages/payment/order/evaluation-order",Vc),__definePage("pages/settings/services",Lc),__definePage("pages/auth/auth",$c),__definePage("pages/auth/cityChoose",Yc),__definePage("pages/payment/payment",Qc),__definePage("pages/payment/payment-records",tu),__definePage("pages/payment/order-details",ou),__definePage("pages/register/register",ru),__definePage("pages/settings/settings",lu),__definePage("pages/account/security",cu),__definePage("pages/webview/webview",uu),__definePage("pages/my/wallet/bill",mu),__definePage("pages/my/wallet/withdrawal",vu),__definePage("pages/my/wallet/bank-card",Lu),__definePage("pages/my/wallet/mine",Ou),__definePage("pages/shopping-mall/mall-home",Pu),__definePage("pages/shopping-mall/product-details",Uu),__definePage("pages/shopping-mall/shopping-cart",Hu),__definePage("pages/shopping-mall/delivery-address",ju),__definePage("pages/shopping-mall/operation-address",Qu),__definePage("pages/shopping-mall/order-details",td),__definePage("pages/shopping-mall/order-list",nd),__definePage("pages/shopping-mall/order-confirmation",rd);const sd={whiteList:["/pages/login/login",{pattern:RegExp(/register/)}],blackList:["/pages/index/index",{pattern:RegExp(/detail/)}],uInfo:"token",loginPath:"/pages/login/login",toLogin:!0},ld=["navigateTo","redirectTo","reLaunch","switchTab"];function cd(e,t){let a="";for(let n in t)a+=`&${n}=${t[n]}`;a=a.replace("&","?"),ud(e+a)}function ud(e,t=0){let a=encodeURIComponent(e),n=sd.loginPath+"?path="+a;t?uni.navigateTo({url:n}):uni.reLaunch({url:n})}const dd={onLaunch:function(e){!function({path:e,query:t}){(sd.whiteList||sd.blackList)&&(e="/"+e,uni.getStorageSync(sd.uInfo)?"/pages/login/login"==e&&uni.reLaunch({url:"/pages/index/index"}):(sd.whiteList&&!sd.whiteList.includes(e)||sd.blackList&&sd.blackList.includes(e))&&cd(e,t),ld.forEach((e=>{uni.addInterceptor(e,{invoke(e){const t=uni.getStorageSync(sd.uInfo),a=e.url.split("?")[0];let n=!0;return sd.whiteList?n=sd.whiteList.some((e=>"object"==typeof e&&e.pattern?e.pattern.test(a):a==e)):sd.blackList&&(n=sd.blackList.every((e=>"object"==typeof e&&e.pattern?!e.pattern.test(a):a!=e))),n||t?e:(ud(e.url,1),!1)}})})))}(e)},onShow:function(){},onHide:function(){},globalData:{httpImageUrl:"https://odd.dzjob.net/profile/upload"}},md={data:()=>({}),onLoad(){this.$u.getRect=this.$uGetRect},methods:{$uGetRect(e,t){return new Promise((a=>{uni.createSelectorQuery().in(this)[t?"selectAll":"select"](e).boundingClientRect((e=>{t&&Array.isArray(e)&&e.length&&a(e),!t&&e&&a(e)})).exec()}))},getParentData(e=""){this.parent||(this.parent=!1),this.parent=this.$u.$parent.call(this,e),this.parent&&(Object.keys(this.parentData).map((e=>{this.parentData[e]=this.parent[e]})),this.parentData.value=this.parent.modelValue)},preventEvent(e){e&&e.stopPropagation&&e.stopPropagation()}},onReachBottom(){uni.$emit("uOnReachBottom")},beforeUnmount(){if(this.parent&&uni.$u.test.array(this.parent.children)){const e=this.parent.children;e.map(((t,a)=>{t===this&&e.splice(a,1)}))}}};function pd(e){if([null,void 0,NaN,!1].includes(e))return e;if("object"!=typeof e&&"function"!=typeof e)return e;var t,a=(t=e,"[object Array]"===Object.prototype.toString.call(t)?[]:{});for(let n in e)e.hasOwnProperty(n)&&(a[n]="object"==typeof e[n]?pd(e[n]):e[n]);return a}function hd(e={},t={}){if("object"!=typeof(e=pd(e))||"object"!=typeof t)return!1;for(var a in t)t.hasOwnProperty(a)&&(a in e?"object"!=typeof e[a]||"object"!=typeof t[a]?e[a]=t[a]:e[a].concat&&t[a].concat?e[a]=e[a].concat(t[a]):e[a]=hd(e[a],t[a]):e[a]=t[a]);return e}function vd(e){return/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)}function gd(e){switch(typeof e){case"undefined":return!0;case"string":if(0==e.replace(/(^[ \t\n\r]*)|([ \t\n\r]*$)/g,"").length)return!0;break;case"boolean":if(!e)return!0;break;case"number":if(0===e||isNaN(e))return!0;break;case"object":if(null===e||0===e.length)return!0;for(var t in e)return!1;return!0}return!1}function fd(e){return"[object Object]"===Object.prototype.toString.call(e)}function yd(e){return"function"==typeof e}const _d={email:function(e){return/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/.test(e)},mobile:function(e){return/^1[23456789]\d{9}$/.test(e)},url:function(e){return/http(s)?:\/\/([\w-]+\.)+[\w-]+(\/[\w-.\/?%&=]*)?/.test(e)},date:function(e){return!!e&&(vd(e)&&(e=+e),!/Invalid|NaN/.test(new Date(e).toString()))},dateISO:function(e){return/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(e)},number:vd,digits:function(e){return/^\d+$/.test(e)},idCard:function(e){return/^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$/.test(e)},carNo:function(e){const t=/^[京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领A-Z]{1}[A-Z]{1}(([0-9]{5}[DF]$)|([DF][A-HJ-NP-Z0-9][0-9]{4}$))/,a=/^[京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领A-Z]{1}[A-Z]{1}[A-HJ-NP-Z0-9]{4}[A-HJ-NP-Z0-9挂学警港澳]{1}$/;return 7===e.length?a.test(e):8===e.length&&t.test(e)},amount:function(e){return/^[1-9]\d*(,\d{3})*(\.\d{1,2})?$|^0\.\d{1,2}$/.test(e)},chinese:function(e){return/^[\u4e00-\u9fa5]+$/gi.test(e)},letter:function(e){return/^[a-zA-Z]*$/.test(e)},enOrNum:function(e){return/^[0-9a-zA-Z]*$/g.test(e)},contains:function(e,t){return e.indexOf(t)>=0},range:function(e,t){return e>=t[0]&&e<=t[1]},rangeLength:function(e,t){return e.length>=t[0]&&e.length<=t[1]},empty:gd,isEmpty:gd,jsonString:function(e){if("string"==typeof e)try{var t=JSON.parse(e);return!("object"!=typeof t||!t)}catch(Ft){return!1}return!1},landline:function(e){return/^\d{3,4}-\d{7,8}(-\d{3,4})?$/.test(e)},object:fd,array:function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)},code:function(e,t=6){return new RegExp(`^\\d{${t}}$`).test(e)},func:yd,promise:function(e){return fd(e)&&yd(e.then)&&yd(e.catch)},video:function(e){const t=e.split("?")[0];return new RegExp(/\.(mp4|mpg|mpeg|dat|asf|avi|rm|rmvb|mov|wmv|flv|mkv|m3u8|3gp)$/).test(t)},image:function(e){const t=e.split("?")[0];return new RegExp(/\.(jpeg|jpg|gif|png|svg|webp|jfif|bmp|dpg)$/).test(t)},regExp:function(e){return e&&"[object RegExp]"===Object.prototype.toString.call(e)},string:function(e){return"string"==typeof e}};const kd=new class{setConfig(e){this.config=hd(this.config,e)}request(e={}){if(this.interceptor.request&&"function"==typeof this.interceptor.request){let t=this.interceptor.request(e);if(!1===t)return new Promise((()=>{}));this.options=t}return e.dataType=e.dataType||this.config.dataType,e.responseType=e.responseType||this.config.responseType,e.url=e.url||"",e.params=e.params||{},e.header=Object.assign({},this.config.header,e.header),e.method=e.method||this.config.method,new Promise(((t,a)=>{e.complete=e=>{if(uni.hideLoading(),clearTimeout(this.config.timer),this.config.timer=null,this.config.originalData)if(this.interceptor.response&&"function"==typeof this.interceptor.response){let n=this.interceptor.response(e);!1!==n?t(n):a(e)}else t(e);else if(200==e.statusCode)if(this.interceptor.response&&"function"==typeof this.interceptor.response){let n=this.interceptor.response(e.data);!1!==n?t(n):a(e.data)}else t(e.data);else a(e)},e.url=_d.url(e.url)?e.url:this.config.baseUrl+(0==e.url.indexOf("/")?e.url:"/"+e.url),this.config.showLoading&&!this.config.timer&&(this.config.timer=setTimeout((()=>{uni.showLoading({title:this.config.loadingText,mask:this.config.loadingMask}),this.config.timer=null}),this.config.loadingTime)),uni.request(e)}))}constructor(){this.config={baseUrl:"",header:{},method:"POST",dataType:"json",responseType:"text",showLoading:!0,loadingText:"请求中...",loadingTime:800,timer:null,originalData:!1,loadingMask:!0},this.interceptor={request:null,response:null},this.get=(e,t={},a={})=>this.request({method:"GET",url:e,header:a,data:t}),this.post=(e,t={},a={})=>this.request({url:e,method:"POST",header:a,data:t}),this.put=(e,t={},a={})=>this.request({url:e,method:"PUT",header:a,data:t}),this.delete=(e,t={},a={})=>this.request({url:e,method:"DELETE",header:a,data:t})}};const Ed=(new class{constructor(){this.config={type:"navigateTo",url:"",delta:1,params:{},animationType:"pop-in",animationDuration:300,intercept:!1},this.route=this.route.bind(this)}addRootPath(e){return"/"===e[0]?e:`/${e}`}mixinParam(e,t){e=e&&this.addRootPath(e);let a="";return/.*\/.*\?.*=.*/.test(e)?(a=uni.$u.queryParams(t,!1),e+"&"+a):(a=uni.$u.queryParams(t),e+a)}async route(e={},t={}){let a={};if("string"==typeof e?(a.url=this.mixinParam(e,t),a.type="navigateTo"):(a=uni.$u.deepClone(e,this.config),a.url=this.mixinParam(e.url,e.params)),t.intercept&&(this.config.intercept=t.intercept),a.params=t,a=uni.$u.deepMerge(this.config,a),"function"==typeof uni.$u.routeIntercept){await new Promise(((e,t)=>{uni.$u.routeIntercept(a,e)}))&&this.openPage(a)}else this.openPage(a)}openPage(e){const{url:t,type:a,delta:n,animationType:o,animationDuration:i}=e;"navigateTo"!=e.type&&"to"!=e.type||uni.navigateTo({url:t,animationType:o,animationDuration:i}),"redirectTo"!=e.type&&"redirect"!=e.type||uni.redirectTo({url:t}),"switchTab"!=e.type&&"tab"!=e.type||uni.switchTab({url:t}),"reLaunch"!=e.type&&"launch"!=e.type||uni.reLaunch({url:t}),"navigateBack"!=e.type&&"back"!=e.type||uni.navigateBack({delta:n})}}).route;function xd(e,t=!0){if((e=e.toLowerCase())&&/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(e)){if(4===e.length){let t="#";for(let a=1;a<4;a+=1)t+=e.slice(a,a+1).concat(e.slice(a,a+1));e=t}let a=[];for(let t=1;t<7;t+=2)a.push(parseInt("0x"+e.slice(t,t+2)));return t?`rgb(${a[0]},${a[1]},${a[2]})`:a}if(/^(rgb|RGB)/.test(e)){return e.replace(/(?:\(|\)|rgb|RGB)*/g,"").split(",").map((e=>Number(e)))}return e}function Nd(e){let t=e;if(/^(rgb|RGB)/.test(t)){let e=t.replace(/(?:\(|\)|rgb|RGB)*/g,"").split(","),a="#";for(let t=0;t<e.length;t++){let n=Number(e[t]).toString(16);n=1==String(n).length?"0"+n:n,"0"===n&&(n+=n),a+=n}return 7!==a.length&&(a=t),a}if(!/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(t))return t;{let e=t.replace(/#/,"").split("");if(6===e.length)return t;if(3===e.length){let t="#";for(let a=0;a<e.length;a+=1)t+=e[a]+e[a];return t}}}const wd={colorGradient:function(e="rgb(0, 0, 0)",t="rgb(255, 255, 255)",a=10){let n=xd(e,!1),o=n[0],i=n[1],r=n[2],s=xd(t,!1),l=(s[0]-o)/a,c=(s[1]-i)/a,u=(s[2]-r)/a,d=[];for(let m=0;m<a;m++){let e=Nd("rgb("+Math.round(l*m+o)+","+Math.round(c*m+i)+","+Math.round(u*m+r)+")");d.push(e)}return d},hexToRgb:xd,rgbToHex:Nd,colorToRgba:function(e,t=.3){let a=(e=Nd(e)).toLowerCase();if(a&&/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(a)){if(4===a.length){var n="#";for(let e=1;e<4;e+=1)n+=a.slice(e,e+1).concat(a.slice(e,e+1));a=n}var o=[];for(let e=1;e<7;e+=2)o.push(parseInt("0x"+a.slice(e,e+2)));return"rgba("+o.join(",")+","+t+")"}return a}};let Cd=null;let Md=[],Sd=[];function Id(e,t="both"){return e=String(e),"both"==t?e.replace(/^\s+|\s+$/g,""):"left"==t?e.replace(/^\s*/,""):"right"==t?e.replace(/(\s*$)/g,""):"all"==t?e.replace(/\s+/g,""):e}let Td="1.10.1";const Dd={v:Td,version:Td,type:["primary","success","info","error","warning"]};const bd={queryParams:function(e={},t=!0,a="brackets"){let n=t?"?":"",o=[];-1==["indices","brackets","repeat","comma"].indexOf(a)&&(a="brackets");for(let i in e){let t=e[i];if(!(["",void 0,null].indexOf(t)>=0))if(t.constructor===Array)switch(a){case"indices":for(let a=0;a<t.length;a++)o.push(i+"["+a+"]="+t[a]);break;case"brackets":default:t.forEach((e=>{o.push(i+"[]="+e)}));break;case"repeat":t.forEach((e=>{o.push(i+"="+e)}));break;case"comma":let e="";t.forEach((t=>{e+=(e?",":"")+t})),o.push(i+"="+e)}else o.push(i+"="+t)}return o.length?n+o.join("&"):""},route:Ed,timeFormat:ks,date:ks,timeFrom:function(e=null,t="yyyy-mm-dd"){e||(e=Number(new Date)),10==e.toString().length&&(e*=1e3);let a=+new Date(Number(e)),n=(Number(new Date)-a)/1e3,o="";switch(!0){case n<300:o="刚刚";break;case n>=300&&n<3600:o=parseInt(n/60)+"分钟前";break;case n>=3600&&n<86400:o=parseInt(n/3600)+"小时前";break;case n>=86400&&n<2592e3:o=parseInt(n/86400)+"天前";break;default:o=!1===t?n>=2592e3&&n<31536e3?parseInt(n/2592e3)+"个月前":parseInt(n/31536e3)+"年前":ks(a,t)}return o},colorGradient:wd.colorGradient,colorToRgba:wd.colorToRgba,guid:function(e=32,t=!0,a=null){let n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),o=[];if(a=a||n.length,e)for(let i=0;i<e;i++)o[i]=n[0|Math.random()*a];else{let e;o[8]=o[13]=o[18]=o[23]="-",o[14]="4";for(let t=0;t<36;t++)o[t]||(e=0|16*Math.random(),o[t]=n[19==t?3&e|8:e])}return t?(o.shift(),"u"+o.join("")):o.join("")},color:{primary:"#2979ff",primaryDark:"#2b85e4",primaryDisabled:"#a0cfff",primaryLight:"#ecf5ff",bgColor:"#f3f4f6",info:"#909399",infoDark:"#82848a",infoDisabled:"#c8c9cc",infoLight:"#f4f4f5",warning:"#ff9900",warningDark:"#f29100",warningDisabled:"#fcbd71",warningLight:"#fdf6ec",error:"#fa3534",errorDark:"#dd6161",errorDisabled:"#fab6b6",errorLight:"#fef0f0",success:"#19be6b",successDark:"#18b566",successDisabled:"#71d5a1",successLight:"#dbf1e1",mainColor:"#303133",contentColor:"#606266",tipsColor:"#909399",lightColor:"#c0c4cc",borderColor:"#e4e7ed"},sys:function(){return Pl()},os:function(){return Pl().platform},type2icon:function(e="success",t=!1){-1==["primary","info","error","warning","success"].indexOf(e)&&(e="success");let a="";switch(e){case"primary":case"info":a="info-circle";break;case"error":a="close-circle";break;case"warning":a="error-circle";break;default:a="checkmark-circle"}return t&&(a+="-fill"),a},randomArray:function(e=[]){return e.sort((()=>Math.random()-.5))},wranning:function(e){},get:kd.get,post:kd.post,put:kd.put,delete:kd.delete,hexToRgb:wd.hexToRgb,rgbToHex:wd.rgbToHex,test:_d,random:function(e,t){if(e>=0&&t>0&&t>=e){let a=t-e+1;return Math.floor(Math.random()*a+e)}return 0},deepClone:pd,deepMerge:hd,getParent:function(e,t){let a=this.$parent;for(;a;){if(a.$options.name===e){let e={};if(Array.isArray(t))t.map((t=>{e[t]=a[t]?a[t]:""}));else for(let n in t)Array.isArray(t[n])?t[n].length?e[n]=t[n]:e[n]=a[n]:t[n].constructor===Object?Object.keys(t[n]).length?e[n]=t[n]:e[n]=a[n]:e[n]=t[n]||!1===t[n]?t[n]:a[n];return e}a=a.$parent}return{}},$parent:function(e){let t=this.$parent;for(;t;){if(!t.$options||t.$options.name===e)return t;t=t.$parent}return!1},addUnit:function(e="auto",t="rpx"){return e=String(e),_d.number(e)?`${e}${t}`:e},trim:function(e,t="both"){return"both"==t?e.replace(/^\s+|\s+$/g,""):"left"==t?e.replace(/^\s*/,""):"right"==t?e.replace(/(\s*$)/g,""):"all"==t?e.replace(/\s+/g,""):e},type:["primary","success","error","warning","info"],http:kd,toast:function(e,t=1500){uni.showToast({title:e,icon:"none",duration:t})},config:Dd,zIndex:{toast:10090,noNetwork:10080,popup:10075,mask:10070,navbar:980,topTips:975,sticky:970,indexListSticky:965},debounce:function(e,t=500,a=!1){if(null!==Cd&&clearTimeout(Cd),a){var n=!Cd;Cd=setTimeout((function(){Cd=null}),t),n&&"function"==typeof e&&e()}else Cd=setTimeout((function(){"function"==typeof e&&e()}),t)},throttle:function(e,t=500,a=!0,n="default"){Md[n]||(Md[n]=null),a?Sd[n]||(Sd[n]=!0,"function"==typeof e&&e(),Md[n]=setTimeout((()=>{Sd[n]=!1}),t)):Sd[n]||(Sd[n]=!0,Md[n]=setTimeout((()=>{Sd[n]=!1,"function"==typeof e&&e()}),t))},addStyle:function(e,t="object"){if(_d.empty(e)||"object"==typeof e&&"object"===t||"string"===t&&"string"==typeof e)return e;if("object"===t){const t=(e=Id(e)).split(";"),a={};for(let e=0;e<t.length;e++)if(t[e]){const n=t[e].split(":");a[Id(n[0])]=Id(n[1])}return a}let a="";for(const n in e){a+=`${n.replace(/([A-Z])/g,"-$1").toLowerCase()}:${e[n]};`}return Id(a)},getSystemInfoSync:Pl};uni.$u=bd;const Vd={install:e=>{e.mixin(md),e.config.globalProperties.$u=bd}};uni.getStorageSync("currentUser");const{app:Ad,Vuex:Ld,Pinia:Rd}=function(){const t=e.createVueApp(dd),a=function(){const t=e.effectScope(!0),a=t.run((()=>e.ref({})));let n=[],o=[];const i=e.markRaw({install(e){F(i),i._a=e,e.provide(q,i),e.config.globalProperties.$pinia=i,o.forEach((e=>n.push(e))),o=[]},use(e){return this._a?n.push(e):o.push(e),this},_p:n,_a:null,_e:t,_s:new Map,state:a});return i}();return t.use(Vd),t.use(a),{app:t}}();uni.Vuex=Ld,uni.Pinia=Rd,Ad.provide("__globalStyles",__uniConfig.styles),Ad._component.mpType="app",Ad._component.render=()=>{},Ad.mount("#app")}(Vue);
