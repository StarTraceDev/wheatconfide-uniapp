var __defProp = Object.defineProperty;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __publicField = (obj, key, value) => {
  __defNormalProp(obj, typeof key !== "symbol" ? key + "" : key, value);
  return value;
};
if (typeof Promise !== "undefined" && !Promise.prototype.finally) {
  Promise.prototype.finally = function(callback) {
    const promise2 = this.constructor;
    return this.then(
      (value) => promise2.resolve(callback()).then(() => value),
      (reason) => promise2.resolve(callback()).then(() => {
        throw reason;
      })
    );
  };
}
;
if (typeof uni !== "undefined" && uni && uni.requireGlobal) {
  const global2 = uni.requireGlobal();
  ArrayBuffer = global2.ArrayBuffer;
  Int8Array = global2.Int8Array;
  Uint8Array = global2.Uint8Array;
  Uint8ClampedArray = global2.Uint8ClampedArray;
  Int16Array = global2.Int16Array;
  Uint16Array = global2.Uint16Array;
  Int32Array = global2.Int32Array;
  Uint32Array = global2.Uint32Array;
  Float32Array = global2.Float32Array;
  Float64Array = global2.Float64Array;
  BigInt64Array = global2.BigInt64Array;
  BigUint64Array = global2.BigUint64Array;
}
;
if (uni.restoreGlobal) {
  uni.restoreGlobal(Vue, weex, plus, setTimeout, clearTimeout, setInterval, clearInterval);
}
(function(vue) {
  "use strict";
  const ON_SHOW = "onShow";
  const ON_LOAD = "onLoad";
  const ON_UNLOAD = "onUnload";
  const ON_BACK_PRESS = "onBackPress";
  const ON_PAGE_SCROLL = "onPageScroll";
  const ON_REACH_BOTTOM = "onReachBottom";
  function requireNativePlugin(name) {
    return weex.requireModule(name);
  }
  function formatAppLog(type, filename, ...args) {
    if (uni.__log__) {
      uni.__log__(type, filename, ...args);
    } else {
      console[type].apply(console, [...args, filename]);
    }
  }
  function resolveEasycom(component, easycom) {
    return typeof component === "string" ? easycom : component;
  }
  const createLifeCycleHook = (lifecycle, flag = 0) => (hook, target = vue.getCurrentInstance()) => {
    !vue.isInSSRComponentSetup && vue.injectHook(lifecycle, hook, target);
  };
  const onShow = /* @__PURE__ */ createLifeCycleHook(
    ON_SHOW,
    1 | 2
    /* HookFlags.PAGE */
  );
  const onLoad = /* @__PURE__ */ createLifeCycleHook(
    ON_LOAD,
    2
    /* HookFlags.PAGE */
  );
  const onUnload = /* @__PURE__ */ createLifeCycleHook(
    ON_UNLOAD,
    2
    /* HookFlags.PAGE */
  );
  const onBackPress = /* @__PURE__ */ createLifeCycleHook(
    ON_BACK_PRESS,
    2
    /* HookFlags.PAGE */
  );
  const onPageScroll = /* @__PURE__ */ createLifeCycleHook(
    ON_PAGE_SCROLL,
    2
    /* HookFlags.PAGE */
  );
  const onReachBottom = /* @__PURE__ */ createLifeCycleHook(
    ON_REACH_BOTTOM,
    2
    /* HookFlags.PAGE */
  );
  var commonjsGlobal = typeof globalThis !== "undefined" ? globalThis : typeof window !== "undefined" ? window : typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : {};
  function getDefaultExportFromCjs(x) {
    return x && x.__esModule && Object.prototype.hasOwnProperty.call(x, "default") ? x["default"] : x;
  }
  var jsonBigint = { exports: {} };
  var stringify = { exports: {} };
  var lookup = [
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    62,
    0,
    62,
    0,
    63,
    52,
    53,
    54,
    55,
    56,
    57,
    58,
    59,
    60,
    61,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    1,
    2,
    3,
    4,
    5,
    6,
    7,
    8,
    9,
    10,
    11,
    12,
    13,
    14,
    15,
    16,
    17,
    18,
    19,
    20,
    21,
    22,
    23,
    24,
    25,
    0,
    0,
    0,
    0,
    63,
    0,
    26,
    27,
    28,
    29,
    30,
    31,
    32,
    33,
    34,
    35,
    36,
    37,
    38,
    39,
    40,
    41,
    42,
    43,
    44,
    45,
    46,
    47,
    48,
    49,
    50,
    51
  ];
  function base64Decode(source, target) {
    var sourceLength = source.length;
    var paddingLength = source[sourceLength - 2] === "=" ? 2 : source[sourceLength - 1] === "=" ? 1 : 0;
    var tmp;
    var byteIndex = 0;
    var baseLength = sourceLength - paddingLength & 4294967292;
    for (var i2 = 0; i2 < baseLength; i2 += 4) {
      tmp = lookup[source.charCodeAt(i2)] << 18 | lookup[source.charCodeAt(i2 + 1)] << 12 | lookup[source.charCodeAt(i2 + 2)] << 6 | lookup[source.charCodeAt(i2 + 3)];
      target[byteIndex++] = tmp >> 16 & 255;
      target[byteIndex++] = tmp >> 8 & 255;
      target[byteIndex++] = tmp & 255;
    }
    if (paddingLength === 1) {
      tmp = lookup[source.charCodeAt(i2)] << 10 | lookup[source.charCodeAt(i2 + 1)] << 4 | lookup[source.charCodeAt(i2 + 2)] >> 2;
      target[byteIndex++] = tmp >> 8 & 255;
      target[byteIndex++] = tmp & 255;
    }
    if (paddingLength === 2) {
      tmp = lookup[source.charCodeAt(i2)] << 2 | lookup[source.charCodeAt(i2 + 1)] >> 4;
      target[byteIndex++] = tmp & 255;
    }
  }
  const crypto = {
    getRandomValues(arr) {
      if (!(arr instanceof Int8Array || arr instanceof Uint8Array || arr instanceof Int16Array || arr instanceof Uint16Array || arr instanceof Int32Array || arr instanceof Uint32Array || arr instanceof Uint8ClampedArray)) {
        throw new Error("Expected an integer array");
      }
      if (arr.byteLength > 65536) {
        throw new Error("Can only request a maximum of 65536 bytes");
      }
      var crypto2 = requireNativePlugin("DCloud-Crypto");
      base64Decode(crypto2.getRandomValues(arr.byteLength), new Uint8Array(
        arr.buffer,
        arr.byteOffset,
        arr.byteLength
      ));
      return arr;
    }
  };
  var bignumber = { exports: {} };
  (function(module2) {
    (function(globalObject) {
      var BigNumber2, isNumeric = /^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i, mathceil = Math.ceil, mathfloor = Math.floor, bignumberError = "[BigNumber Error] ", tooManyDigits = bignumberError + "Number primitive has more than 15 significant digits: ", BASE = 1e14, LOG_BASE = 14, MAX_SAFE_INTEGER = 9007199254740991, POWS_TEN = [1, 10, 100, 1e3, 1e4, 1e5, 1e6, 1e7, 1e8, 1e9, 1e10, 1e11, 1e12, 1e13], SQRT_BASE = 1e7, MAX = 1e9;
      function clone(configObject) {
        var div, convertBase, parseNumeric, P2 = BigNumber3.prototype = { constructor: BigNumber3, toString: null, valueOf: null }, ONE = new BigNumber3(1), DECIMAL_PLACES = 20, ROUNDING_MODE = 4, TO_EXP_NEG = -7, TO_EXP_POS = 21, MIN_EXP = -1e7, MAX_EXP = 1e7, CRYPTO = false, MODULO_MODE = 1, POW_PRECISION = 0, FORMAT = {
          prefix: "",
          groupSize: 3,
          secondaryGroupSize: 0,
          groupSeparator: ",",
          decimalSeparator: ".",
          fractionGroupSize: 0,
          fractionGroupSeparator: " ",
          // non-breaking space
          suffix: ""
        }, ALPHABET = "0123456789abcdefghijklmnopqrstuvwxyz", alphabetHasNormalDecimalDigits = true;
        function BigNumber3(v2, b2) {
          var alphabet, c2, caseChanged, e2, i2, isNum, len, str, x = this;
          if (!(x instanceof BigNumber3))
            return new BigNumber3(v2, b2);
          if (b2 == null) {
            if (v2 && v2._isBigNumber === true) {
              x.s = v2.s;
              if (!v2.c || v2.e > MAX_EXP) {
                x.c = x.e = null;
              } else if (v2.e < MIN_EXP) {
                x.c = [x.e = 0];
              } else {
                x.e = v2.e;
                x.c = v2.c.slice();
              }
              return;
            }
            if ((isNum = typeof v2 == "number") && v2 * 0 == 0) {
              x.s = 1 / v2 < 0 ? (v2 = -v2, -1) : 1;
              if (v2 === ~~v2) {
                for (e2 = 0, i2 = v2; i2 >= 10; i2 /= 10, e2++)
                  ;
                if (e2 > MAX_EXP) {
                  x.c = x.e = null;
                } else {
                  x.e = e2;
                  x.c = [v2];
                }
                return;
              }
              str = String(v2);
            } else {
              if (!isNumeric.test(str = String(v2)))
                return parseNumeric(x, str, isNum);
              x.s = str.charCodeAt(0) == 45 ? (str = str.slice(1), -1) : 1;
            }
            if ((e2 = str.indexOf(".")) > -1)
              str = str.replace(".", "");
            if ((i2 = str.search(/e/i)) > 0) {
              if (e2 < 0)
                e2 = i2;
              e2 += +str.slice(i2 + 1);
              str = str.substring(0, i2);
            } else if (e2 < 0) {
              e2 = str.length;
            }
          } else {
            intCheck(b2, 2, ALPHABET.length, "Base");
            if (b2 == 10 && alphabetHasNormalDecimalDigits) {
              x = new BigNumber3(v2);
              return round(x, DECIMAL_PLACES + x.e + 1, ROUNDING_MODE);
            }
            str = String(v2);
            if (isNum = typeof v2 == "number") {
              if (v2 * 0 != 0)
                return parseNumeric(x, str, isNum, b2);
              x.s = 1 / v2 < 0 ? (str = str.slice(1), -1) : 1;
              if (BigNumber3.DEBUG && str.replace(/^0\.0*|\./, "").length > 15) {
                throw Error(tooManyDigits + v2);
              }
            } else {
              x.s = str.charCodeAt(0) === 45 ? (str = str.slice(1), -1) : 1;
            }
            alphabet = ALPHABET.slice(0, b2);
            e2 = i2 = 0;
            for (len = str.length; i2 < len; i2++) {
              if (alphabet.indexOf(c2 = str.charAt(i2)) < 0) {
                if (c2 == ".") {
                  if (i2 > e2) {
                    e2 = len;
                    continue;
                  }
                } else if (!caseChanged) {
                  if (str == str.toUpperCase() && (str = str.toLowerCase()) || str == str.toLowerCase() && (str = str.toUpperCase())) {
                    caseChanged = true;
                    i2 = -1;
                    e2 = 0;
                    continue;
                  }
                }
                return parseNumeric(x, String(v2), isNum, b2);
              }
            }
            isNum = false;
            str = convertBase(str, b2, 10, x.s);
            if ((e2 = str.indexOf(".")) > -1)
              str = str.replace(".", "");
            else
              e2 = str.length;
          }
          for (i2 = 0; str.charCodeAt(i2) === 48; i2++)
            ;
          for (len = str.length; str.charCodeAt(--len) === 48; )
            ;
          if (str = str.slice(i2, ++len)) {
            len -= i2;
            if (isNum && BigNumber3.DEBUG && len > 15 && (v2 > MAX_SAFE_INTEGER || v2 !== mathfloor(v2))) {
              throw Error(tooManyDigits + x.s * v2);
            }
            if ((e2 = e2 - i2 - 1) > MAX_EXP) {
              x.c = x.e = null;
            } else if (e2 < MIN_EXP) {
              x.c = [x.e = 0];
            } else {
              x.e = e2;
              x.c = [];
              i2 = (e2 + 1) % LOG_BASE;
              if (e2 < 0)
                i2 += LOG_BASE;
              if (i2 < len) {
                if (i2)
                  x.c.push(+str.slice(0, i2));
                for (len -= LOG_BASE; i2 < len; ) {
                  x.c.push(+str.slice(i2, i2 += LOG_BASE));
                }
                i2 = LOG_BASE - (str = str.slice(i2)).length;
              } else {
                i2 -= len;
              }
              for (; i2--; str += "0")
                ;
              x.c.push(+str);
            }
          } else {
            x.c = [x.e = 0];
          }
        }
        BigNumber3.clone = clone;
        BigNumber3.ROUND_UP = 0;
        BigNumber3.ROUND_DOWN = 1;
        BigNumber3.ROUND_CEIL = 2;
        BigNumber3.ROUND_FLOOR = 3;
        BigNumber3.ROUND_HALF_UP = 4;
        BigNumber3.ROUND_HALF_DOWN = 5;
        BigNumber3.ROUND_HALF_EVEN = 6;
        BigNumber3.ROUND_HALF_CEIL = 7;
        BigNumber3.ROUND_HALF_FLOOR = 8;
        BigNumber3.EUCLID = 9;
        BigNumber3.config = BigNumber3.set = function(obj) {
          var p2, v2;
          if (obj != null) {
            if (typeof obj == "object") {
              if (obj.hasOwnProperty(p2 = "DECIMAL_PLACES")) {
                v2 = obj[p2];
                intCheck(v2, 0, MAX, p2);
                DECIMAL_PLACES = v2;
              }
              if (obj.hasOwnProperty(p2 = "ROUNDING_MODE")) {
                v2 = obj[p2];
                intCheck(v2, 0, 8, p2);
                ROUNDING_MODE = v2;
              }
              if (obj.hasOwnProperty(p2 = "EXPONENTIAL_AT")) {
                v2 = obj[p2];
                if (v2 && v2.pop) {
                  intCheck(v2[0], -MAX, 0, p2);
                  intCheck(v2[1], 0, MAX, p2);
                  TO_EXP_NEG = v2[0];
                  TO_EXP_POS = v2[1];
                } else {
                  intCheck(v2, -MAX, MAX, p2);
                  TO_EXP_NEG = -(TO_EXP_POS = v2 < 0 ? -v2 : v2);
                }
              }
              if (obj.hasOwnProperty(p2 = "RANGE")) {
                v2 = obj[p2];
                if (v2 && v2.pop) {
                  intCheck(v2[0], -MAX, -1, p2);
                  intCheck(v2[1], 1, MAX, p2);
                  MIN_EXP = v2[0];
                  MAX_EXP = v2[1];
                } else {
                  intCheck(v2, -MAX, MAX, p2);
                  if (v2) {
                    MIN_EXP = -(MAX_EXP = v2 < 0 ? -v2 : v2);
                  } else {
                    throw Error(bignumberError + p2 + " cannot be zero: " + v2);
                  }
                }
              }
              if (obj.hasOwnProperty(p2 = "CRYPTO")) {
                v2 = obj[p2];
                if (v2 === !!v2) {
                  if (v2) {
                    if (typeof crypto != "undefined" && crypto && (crypto.getRandomValues || crypto.randomBytes)) {
                      CRYPTO = v2;
                    } else {
                      CRYPTO = !v2;
                      throw Error(bignumberError + "crypto unavailable");
                    }
                  } else {
                    CRYPTO = v2;
                  }
                } else {
                  throw Error(bignumberError + p2 + " not true or false: " + v2);
                }
              }
              if (obj.hasOwnProperty(p2 = "MODULO_MODE")) {
                v2 = obj[p2];
                intCheck(v2, 0, 9, p2);
                MODULO_MODE = v2;
              }
              if (obj.hasOwnProperty(p2 = "POW_PRECISION")) {
                v2 = obj[p2];
                intCheck(v2, 0, MAX, p2);
                POW_PRECISION = v2;
              }
              if (obj.hasOwnProperty(p2 = "FORMAT")) {
                v2 = obj[p2];
                if (typeof v2 == "object")
                  FORMAT = v2;
                else
                  throw Error(bignumberError + p2 + " not an object: " + v2);
              }
              if (obj.hasOwnProperty(p2 = "ALPHABET")) {
                v2 = obj[p2];
                if (typeof v2 == "string" && !/^.?$|[+\-.\s]|(.).*\1/.test(v2)) {
                  alphabetHasNormalDecimalDigits = v2.slice(0, 10) == "0123456789";
                  ALPHABET = v2;
                } else {
                  throw Error(bignumberError + p2 + " invalid: " + v2);
                }
              }
            } else {
              throw Error(bignumberError + "Object expected: " + obj);
            }
          }
          return {
            DECIMAL_PLACES,
            ROUNDING_MODE,
            EXPONENTIAL_AT: [TO_EXP_NEG, TO_EXP_POS],
            RANGE: [MIN_EXP, MAX_EXP],
            CRYPTO,
            MODULO_MODE,
            POW_PRECISION,
            FORMAT,
            ALPHABET
          };
        };
        BigNumber3.isBigNumber = function(v2) {
          if (!v2 || v2._isBigNumber !== true)
            return false;
          if (!BigNumber3.DEBUG)
            return true;
          var i2, n2, c2 = v2.c, e2 = v2.e, s2 = v2.s;
          out:
            if ({}.toString.call(c2) == "[object Array]") {
              if ((s2 === 1 || s2 === -1) && e2 >= -MAX && e2 <= MAX && e2 === mathfloor(e2)) {
                if (c2[0] === 0) {
                  if (e2 === 0 && c2.length === 1)
                    return true;
                  break out;
                }
                i2 = (e2 + 1) % LOG_BASE;
                if (i2 < 1)
                  i2 += LOG_BASE;
                if (String(c2[0]).length == i2) {
                  for (i2 = 0; i2 < c2.length; i2++) {
                    n2 = c2[i2];
                    if (n2 < 0 || n2 >= BASE || n2 !== mathfloor(n2))
                      break out;
                  }
                  if (n2 !== 0)
                    return true;
                }
              }
            } else if (c2 === null && e2 === null && (s2 === null || s2 === 1 || s2 === -1)) {
              return true;
            }
          throw Error(bignumberError + "Invalid BigNumber: " + v2);
        };
        BigNumber3.maximum = BigNumber3.max = function() {
          return maxOrMin(arguments, -1);
        };
        BigNumber3.minimum = BigNumber3.min = function() {
          return maxOrMin(arguments, 1);
        };
        BigNumber3.random = function() {
          var pow2_53 = 9007199254740992;
          var random53bitInt = Math.random() * pow2_53 & 2097151 ? function() {
            return mathfloor(Math.random() * pow2_53);
          } : function() {
            return (Math.random() * 1073741824 | 0) * 8388608 + (Math.random() * 8388608 | 0);
          };
          return function(dp) {
            var a2, b2, e2, k, v2, i2 = 0, c2 = [], rand = new BigNumber3(ONE);
            if (dp == null)
              dp = DECIMAL_PLACES;
            else
              intCheck(dp, 0, MAX);
            k = mathceil(dp / LOG_BASE);
            if (CRYPTO) {
              if (crypto.getRandomValues) {
                a2 = crypto.getRandomValues(new Uint32Array(k *= 2));
                for (; i2 < k; ) {
                  v2 = a2[i2] * 131072 + (a2[i2 + 1] >>> 11);
                  if (v2 >= 9e15) {
                    b2 = crypto.getRandomValues(new Uint32Array(2));
                    a2[i2] = b2[0];
                    a2[i2 + 1] = b2[1];
                  } else {
                    c2.push(v2 % 1e14);
                    i2 += 2;
                  }
                }
                i2 = k / 2;
              } else if (crypto.randomBytes) {
                a2 = crypto.randomBytes(k *= 7);
                for (; i2 < k; ) {
                  v2 = (a2[i2] & 31) * 281474976710656 + a2[i2 + 1] * 1099511627776 + a2[i2 + 2] * 4294967296 + a2[i2 + 3] * 16777216 + (a2[i2 + 4] << 16) + (a2[i2 + 5] << 8) + a2[i2 + 6];
                  if (v2 >= 9e15) {
                    crypto.randomBytes(7).copy(a2, i2);
                  } else {
                    c2.push(v2 % 1e14);
                    i2 += 7;
                  }
                }
                i2 = k / 7;
              } else {
                CRYPTO = false;
                throw Error(bignumberError + "crypto unavailable");
              }
            }
            if (!CRYPTO) {
              for (; i2 < k; ) {
                v2 = random53bitInt();
                if (v2 < 9e15)
                  c2[i2++] = v2 % 1e14;
              }
            }
            k = c2[--i2];
            dp %= LOG_BASE;
            if (k && dp) {
              v2 = POWS_TEN[LOG_BASE - dp];
              c2[i2] = mathfloor(k / v2) * v2;
            }
            for (; c2[i2] === 0; c2.pop(), i2--)
              ;
            if (i2 < 0) {
              c2 = [e2 = 0];
            } else {
              for (e2 = -1; c2[0] === 0; c2.splice(0, 1), e2 -= LOG_BASE)
                ;
              for (i2 = 1, v2 = c2[0]; v2 >= 10; v2 /= 10, i2++)
                ;
              if (i2 < LOG_BASE)
                e2 -= LOG_BASE - i2;
            }
            rand.e = e2;
            rand.c = c2;
            return rand;
          };
        }();
        BigNumber3.sum = function() {
          var i2 = 1, args = arguments, sum = new BigNumber3(args[0]);
          for (; i2 < args.length; )
            sum = sum.plus(args[i2++]);
          return sum;
        };
        convertBase = /* @__PURE__ */ function() {
          var decimal = "0123456789";
          function toBaseOut(str, baseIn, baseOut, alphabet) {
            var j2, arr = [0], arrL, i2 = 0, len = str.length;
            for (; i2 < len; ) {
              for (arrL = arr.length; arrL--; arr[arrL] *= baseIn)
                ;
              arr[0] += alphabet.indexOf(str.charAt(i2++));
              for (j2 = 0; j2 < arr.length; j2++) {
                if (arr[j2] > baseOut - 1) {
                  if (arr[j2 + 1] == null)
                    arr[j2 + 1] = 0;
                  arr[j2 + 1] += arr[j2] / baseOut | 0;
                  arr[j2] %= baseOut;
                }
              }
            }
            return arr.reverse();
          }
          return function(str, baseIn, baseOut, sign, callerIsToString) {
            var alphabet, d2, e2, k, r2, x, xc, y2, i2 = str.indexOf("."), dp = DECIMAL_PLACES, rm = ROUNDING_MODE;
            if (i2 >= 0) {
              k = POW_PRECISION;
              POW_PRECISION = 0;
              str = str.replace(".", "");
              y2 = new BigNumber3(baseIn);
              x = y2.pow(str.length - i2);
              POW_PRECISION = k;
              y2.c = toBaseOut(
                toFixedPoint(coeffToString(x.c), x.e, "0"),
                10,
                baseOut,
                decimal
              );
              y2.e = y2.c.length;
            }
            xc = toBaseOut(str, baseIn, baseOut, callerIsToString ? (alphabet = ALPHABET, decimal) : (alphabet = decimal, ALPHABET));
            e2 = k = xc.length;
            for (; xc[--k] == 0; xc.pop())
              ;
            if (!xc[0])
              return alphabet.charAt(0);
            if (i2 < 0) {
              --e2;
            } else {
              x.c = xc;
              x.e = e2;
              x.s = sign;
              x = div(x, y2, dp, rm, baseOut);
              xc = x.c;
              r2 = x.r;
              e2 = x.e;
            }
            d2 = e2 + dp + 1;
            i2 = xc[d2];
            k = baseOut / 2;
            r2 = r2 || d2 < 0 || xc[d2 + 1] != null;
            r2 = rm < 4 ? (i2 != null || r2) && (rm == 0 || rm == (x.s < 0 ? 3 : 2)) : i2 > k || i2 == k && (rm == 4 || r2 || rm == 6 && xc[d2 - 1] & 1 || rm == (x.s < 0 ? 8 : 7));
            if (d2 < 1 || !xc[0]) {
              str = r2 ? toFixedPoint(alphabet.charAt(1), -dp, alphabet.charAt(0)) : alphabet.charAt(0);
            } else {
              xc.length = d2;
              if (r2) {
                for (--baseOut; ++xc[--d2] > baseOut; ) {
                  xc[d2] = 0;
                  if (!d2) {
                    ++e2;
                    xc = [1].concat(xc);
                  }
                }
              }
              for (k = xc.length; !xc[--k]; )
                ;
              for (i2 = 0, str = ""; i2 <= k; str += alphabet.charAt(xc[i2++]))
                ;
              str = toFixedPoint(str, e2, alphabet.charAt(0));
            }
            return str;
          };
        }();
        div = /* @__PURE__ */ function() {
          function multiply(x, k, base) {
            var m2, temp, xlo, xhi, carry = 0, i2 = x.length, klo = k % SQRT_BASE, khi = k / SQRT_BASE | 0;
            for (x = x.slice(); i2--; ) {
              xlo = x[i2] % SQRT_BASE;
              xhi = x[i2] / SQRT_BASE | 0;
              m2 = khi * xlo + xhi * klo;
              temp = klo * xlo + m2 % SQRT_BASE * SQRT_BASE + carry;
              carry = (temp / base | 0) + (m2 / SQRT_BASE | 0) + khi * xhi;
              x[i2] = temp % base;
            }
            if (carry)
              x = [carry].concat(x);
            return x;
          }
          function compare2(a2, b2, aL, bL) {
            var i2, cmp;
            if (aL != bL) {
              cmp = aL > bL ? 1 : -1;
            } else {
              for (i2 = cmp = 0; i2 < aL; i2++) {
                if (a2[i2] != b2[i2]) {
                  cmp = a2[i2] > b2[i2] ? 1 : -1;
                  break;
                }
              }
            }
            return cmp;
          }
          function subtract(a2, b2, aL, base) {
            var i2 = 0;
            for (; aL--; ) {
              a2[aL] -= i2;
              i2 = a2[aL] < b2[aL] ? 1 : 0;
              a2[aL] = i2 * base + a2[aL] - b2[aL];
            }
            for (; !a2[0] && a2.length > 1; a2.splice(0, 1))
              ;
          }
          return function(x, y2, dp, rm, base) {
            var cmp, e2, i2, more, n2, prod, prodL, q2, qc, rem, remL, rem0, xi, xL, yc0, yL, yz, s2 = x.s == y2.s ? 1 : -1, xc = x.c, yc = y2.c;
            if (!xc || !xc[0] || !yc || !yc[0]) {
              return new BigNumber3(
                // Return NaN if either NaN, or both Infinity or 0.
                !x.s || !y2.s || (xc ? yc && xc[0] == yc[0] : !yc) ? NaN : (
                  // Return ±0 if x is ±0 or y is ±Infinity, or return ±Infinity as y is ±0.
                  xc && xc[0] == 0 || !yc ? s2 * 0 : s2 / 0
                )
              );
            }
            q2 = new BigNumber3(s2);
            qc = q2.c = [];
            e2 = x.e - y2.e;
            s2 = dp + e2 + 1;
            if (!base) {
              base = BASE;
              e2 = bitFloor(x.e / LOG_BASE) - bitFloor(y2.e / LOG_BASE);
              s2 = s2 / LOG_BASE | 0;
            }
            for (i2 = 0; yc[i2] == (xc[i2] || 0); i2++)
              ;
            if (yc[i2] > (xc[i2] || 0))
              e2--;
            if (s2 < 0) {
              qc.push(1);
              more = true;
            } else {
              xL = xc.length;
              yL = yc.length;
              i2 = 0;
              s2 += 2;
              n2 = mathfloor(base / (yc[0] + 1));
              if (n2 > 1) {
                yc = multiply(yc, n2, base);
                xc = multiply(xc, n2, base);
                yL = yc.length;
                xL = xc.length;
              }
              xi = yL;
              rem = xc.slice(0, yL);
              remL = rem.length;
              for (; remL < yL; rem[remL++] = 0)
                ;
              yz = yc.slice();
              yz = [0].concat(yz);
              yc0 = yc[0];
              if (yc[1] >= base / 2)
                yc0++;
              do {
                n2 = 0;
                cmp = compare2(yc, rem, yL, remL);
                if (cmp < 0) {
                  rem0 = rem[0];
                  if (yL != remL)
                    rem0 = rem0 * base + (rem[1] || 0);
                  n2 = mathfloor(rem0 / yc0);
                  if (n2 > 1) {
                    if (n2 >= base)
                      n2 = base - 1;
                    prod = multiply(yc, n2, base);
                    prodL = prod.length;
                    remL = rem.length;
                    while (compare2(prod, rem, prodL, remL) == 1) {
                      n2--;
                      subtract(prod, yL < prodL ? yz : yc, prodL, base);
                      prodL = prod.length;
                      cmp = 1;
                    }
                  } else {
                    if (n2 == 0) {
                      cmp = n2 = 1;
                    }
                    prod = yc.slice();
                    prodL = prod.length;
                  }
                  if (prodL < remL)
                    prod = [0].concat(prod);
                  subtract(rem, prod, remL, base);
                  remL = rem.length;
                  if (cmp == -1) {
                    while (compare2(yc, rem, yL, remL) < 1) {
                      n2++;
                      subtract(rem, yL < remL ? yz : yc, remL, base);
                      remL = rem.length;
                    }
                  }
                } else if (cmp === 0) {
                  n2++;
                  rem = [0];
                }
                qc[i2++] = n2;
                if (rem[0]) {
                  rem[remL++] = xc[xi] || 0;
                } else {
                  rem = [xc[xi]];
                  remL = 1;
                }
              } while ((xi++ < xL || rem[0] != null) && s2--);
              more = rem[0] != null;
              if (!qc[0])
                qc.splice(0, 1);
            }
            if (base == BASE) {
              for (i2 = 1, s2 = qc[0]; s2 >= 10; s2 /= 10, i2++)
                ;
              round(q2, dp + (q2.e = i2 + e2 * LOG_BASE - 1) + 1, rm, more);
            } else {
              q2.e = e2;
              q2.r = +more;
            }
            return q2;
          };
        }();
        function format(n2, i2, rm, id2) {
          var c0, e2, ne2, len, str;
          if (rm == null)
            rm = ROUNDING_MODE;
          else
            intCheck(rm, 0, 8);
          if (!n2.c)
            return n2.toString();
          c0 = n2.c[0];
          ne2 = n2.e;
          if (i2 == null) {
            str = coeffToString(n2.c);
            str = id2 == 1 || id2 == 2 && (ne2 <= TO_EXP_NEG || ne2 >= TO_EXP_POS) ? toExponential(str, ne2) : toFixedPoint(str, ne2, "0");
          } else {
            n2 = round(new BigNumber3(n2), i2, rm);
            e2 = n2.e;
            str = coeffToString(n2.c);
            len = str.length;
            if (id2 == 1 || id2 == 2 && (i2 <= e2 || e2 <= TO_EXP_NEG)) {
              for (; len < i2; str += "0", len++)
                ;
              str = toExponential(str, e2);
            } else {
              i2 -= ne2 + (id2 === 2 && e2 > ne2);
              str = toFixedPoint(str, e2, "0");
              if (e2 + 1 > len) {
                if (--i2 > 0)
                  for (str += "."; i2--; str += "0")
                    ;
              } else {
                i2 += e2 - len;
                if (i2 > 0) {
                  if (e2 + 1 == len)
                    str += ".";
                  for (; i2--; str += "0")
                    ;
                }
              }
            }
          }
          return n2.s < 0 && c0 ? "-" + str : str;
        }
        function maxOrMin(args, n2) {
          var k, y2, i2 = 1, x = new BigNumber3(args[0]);
          for (; i2 < args.length; i2++) {
            y2 = new BigNumber3(args[i2]);
            if (!y2.s || (k = compare(x, y2)) === n2 || k === 0 && x.s === n2) {
              x = y2;
            }
          }
          return x;
        }
        function normalise(n2, c2, e2) {
          var i2 = 1, j2 = c2.length;
          for (; !c2[--j2]; c2.pop())
            ;
          for (j2 = c2[0]; j2 >= 10; j2 /= 10, i2++)
            ;
          if ((e2 = i2 + e2 * LOG_BASE - 1) > MAX_EXP) {
            n2.c = n2.e = null;
          } else if (e2 < MIN_EXP) {
            n2.c = [n2.e = 0];
          } else {
            n2.e = e2;
            n2.c = c2;
          }
          return n2;
        }
        parseNumeric = /* @__PURE__ */ function() {
          var basePrefix = /^(-?)0([xbo])(?=\w[\w.]*$)/i, dotAfter = /^([^.]+)\.$/, dotBefore = /^\.([^.]+)$/, isInfinityOrNaN = /^-?(Infinity|NaN)$/, whitespaceOrPlus = /^\s*\+(?=[\w.])|^\s+|\s+$/g;
          return function(x, str, isNum, b2) {
            var base, s2 = isNum ? str : str.replace(whitespaceOrPlus, "");
            if (isInfinityOrNaN.test(s2)) {
              x.s = isNaN(s2) ? null : s2 < 0 ? -1 : 1;
            } else {
              if (!isNum) {
                s2 = s2.replace(basePrefix, function(m2, p1, p2) {
                  base = (p2 = p2.toLowerCase()) == "x" ? 16 : p2 == "b" ? 2 : 8;
                  return !b2 || b2 == base ? p1 : m2;
                });
                if (b2) {
                  base = b2;
                  s2 = s2.replace(dotAfter, "$1").replace(dotBefore, "0.$1");
                }
                if (str != s2)
                  return new BigNumber3(s2, base);
              }
              if (BigNumber3.DEBUG) {
                throw Error(bignumberError + "Not a" + (b2 ? " base " + b2 : "") + " number: " + str);
              }
              x.s = null;
            }
            x.c = x.e = null;
          };
        }();
        function round(x, sd, rm, r2) {
          var d2, i2, j2, k, n2, ni, rd, xc = x.c, pows10 = POWS_TEN;
          if (xc) {
            out: {
              for (d2 = 1, k = xc[0]; k >= 10; k /= 10, d2++)
                ;
              i2 = sd - d2;
              if (i2 < 0) {
                i2 += LOG_BASE;
                j2 = sd;
                n2 = xc[ni = 0];
                rd = mathfloor(n2 / pows10[d2 - j2 - 1] % 10);
              } else {
                ni = mathceil((i2 + 1) / LOG_BASE);
                if (ni >= xc.length) {
                  if (r2) {
                    for (; xc.length <= ni; xc.push(0))
                      ;
                    n2 = rd = 0;
                    d2 = 1;
                    i2 %= LOG_BASE;
                    j2 = i2 - LOG_BASE + 1;
                  } else {
                    break out;
                  }
                } else {
                  n2 = k = xc[ni];
                  for (d2 = 1; k >= 10; k /= 10, d2++)
                    ;
                  i2 %= LOG_BASE;
                  j2 = i2 - LOG_BASE + d2;
                  rd = j2 < 0 ? 0 : mathfloor(n2 / pows10[d2 - j2 - 1] % 10);
                }
              }
              r2 = r2 || sd < 0 || // Are there any non-zero digits after the rounding digit?
              // The expression  n % pows10[d - j - 1]  returns all digits of n to the right
              // of the digit at j, e.g. if n is 908714 and j is 2, the expression gives 714.
              xc[ni + 1] != null || (j2 < 0 ? n2 : n2 % pows10[d2 - j2 - 1]);
              r2 = rm < 4 ? (rd || r2) && (rm == 0 || rm == (x.s < 0 ? 3 : 2)) : rd > 5 || rd == 5 && (rm == 4 || r2 || rm == 6 && // Check whether the digit to the left of the rounding digit is odd.
              (i2 > 0 ? j2 > 0 ? n2 / pows10[d2 - j2] : 0 : xc[ni - 1]) % 10 & 1 || rm == (x.s < 0 ? 8 : 7));
              if (sd < 1 || !xc[0]) {
                xc.length = 0;
                if (r2) {
                  sd -= x.e + 1;
                  xc[0] = pows10[(LOG_BASE - sd % LOG_BASE) % LOG_BASE];
                  x.e = -sd || 0;
                } else {
                  xc[0] = x.e = 0;
                }
                return x;
              }
              if (i2 == 0) {
                xc.length = ni;
                k = 1;
                ni--;
              } else {
                xc.length = ni + 1;
                k = pows10[LOG_BASE - i2];
                xc[ni] = j2 > 0 ? mathfloor(n2 / pows10[d2 - j2] % pows10[j2]) * k : 0;
              }
              if (r2) {
                for (; ; ) {
                  if (ni == 0) {
                    for (i2 = 1, j2 = xc[0]; j2 >= 10; j2 /= 10, i2++)
                      ;
                    j2 = xc[0] += k;
                    for (k = 1; j2 >= 10; j2 /= 10, k++)
                      ;
                    if (i2 != k) {
                      x.e++;
                      if (xc[0] == BASE)
                        xc[0] = 1;
                    }
                    break;
                  } else {
                    xc[ni] += k;
                    if (xc[ni] != BASE)
                      break;
                    xc[ni--] = 0;
                    k = 1;
                  }
                }
              }
              for (i2 = xc.length; xc[--i2] === 0; xc.pop())
                ;
            }
            if (x.e > MAX_EXP) {
              x.c = x.e = null;
            } else if (x.e < MIN_EXP) {
              x.c = [x.e = 0];
            }
          }
          return x;
        }
        function valueOf(n2) {
          var str, e2 = n2.e;
          if (e2 === null)
            return n2.toString();
          str = coeffToString(n2.c);
          str = e2 <= TO_EXP_NEG || e2 >= TO_EXP_POS ? toExponential(str, e2) : toFixedPoint(str, e2, "0");
          return n2.s < 0 ? "-" + str : str;
        }
        P2.absoluteValue = P2.abs = function() {
          var x = new BigNumber3(this);
          if (x.s < 0)
            x.s = 1;
          return x;
        };
        P2.comparedTo = function(y2, b2) {
          return compare(this, new BigNumber3(y2, b2));
        };
        P2.decimalPlaces = P2.dp = function(dp, rm) {
          var c2, n2, v2, x = this;
          if (dp != null) {
            intCheck(dp, 0, MAX);
            if (rm == null)
              rm = ROUNDING_MODE;
            else
              intCheck(rm, 0, 8);
            return round(new BigNumber3(x), dp + x.e + 1, rm);
          }
          if (!(c2 = x.c))
            return null;
          n2 = ((v2 = c2.length - 1) - bitFloor(this.e / LOG_BASE)) * LOG_BASE;
          if (v2 = c2[v2])
            for (; v2 % 10 == 0; v2 /= 10, n2--)
              ;
          if (n2 < 0)
            n2 = 0;
          return n2;
        };
        P2.dividedBy = P2.div = function(y2, b2) {
          return div(this, new BigNumber3(y2, b2), DECIMAL_PLACES, ROUNDING_MODE);
        };
        P2.dividedToIntegerBy = P2.idiv = function(y2, b2) {
          return div(this, new BigNumber3(y2, b2), 0, 1);
        };
        P2.exponentiatedBy = P2.pow = function(n2, m2) {
          var half, isModExp, i2, k, more, nIsBig, nIsNeg, nIsOdd, y2, x = this;
          n2 = new BigNumber3(n2);
          if (n2.c && !n2.isInteger()) {
            throw Error(bignumberError + "Exponent not an integer: " + valueOf(n2));
          }
          if (m2 != null)
            m2 = new BigNumber3(m2);
          nIsBig = n2.e > 14;
          if (!x.c || !x.c[0] || x.c[0] == 1 && !x.e && x.c.length == 1 || !n2.c || !n2.c[0]) {
            y2 = new BigNumber3(Math.pow(+valueOf(x), nIsBig ? n2.s * (2 - isOdd(n2)) : +valueOf(n2)));
            return m2 ? y2.mod(m2) : y2;
          }
          nIsNeg = n2.s < 0;
          if (m2) {
            if (m2.c ? !m2.c[0] : !m2.s)
              return new BigNumber3(NaN);
            isModExp = !nIsNeg && x.isInteger() && m2.isInteger();
            if (isModExp)
              x = x.mod(m2);
          } else if (n2.e > 9 && (x.e > 0 || x.e < -1 || (x.e == 0 ? x.c[0] > 1 || nIsBig && x.c[1] >= 24e7 : x.c[0] < 8e13 || nIsBig && x.c[0] <= 9999975e7))) {
            k = x.s < 0 && isOdd(n2) ? -0 : 0;
            if (x.e > -1)
              k = 1 / k;
            return new BigNumber3(nIsNeg ? 1 / k : k);
          } else if (POW_PRECISION) {
            k = mathceil(POW_PRECISION / LOG_BASE + 2);
          }
          if (nIsBig) {
            half = new BigNumber3(0.5);
            if (nIsNeg)
              n2.s = 1;
            nIsOdd = isOdd(n2);
          } else {
            i2 = Math.abs(+valueOf(n2));
            nIsOdd = i2 % 2;
          }
          y2 = new BigNumber3(ONE);
          for (; ; ) {
            if (nIsOdd) {
              y2 = y2.times(x);
              if (!y2.c)
                break;
              if (k) {
                if (y2.c.length > k)
                  y2.c.length = k;
              } else if (isModExp) {
                y2 = y2.mod(m2);
              }
            }
            if (i2) {
              i2 = mathfloor(i2 / 2);
              if (i2 === 0)
                break;
              nIsOdd = i2 % 2;
            } else {
              n2 = n2.times(half);
              round(n2, n2.e + 1, 1);
              if (n2.e > 14) {
                nIsOdd = isOdd(n2);
              } else {
                i2 = +valueOf(n2);
                if (i2 === 0)
                  break;
                nIsOdd = i2 % 2;
              }
            }
            x = x.times(x);
            if (k) {
              if (x.c && x.c.length > k)
                x.c.length = k;
            } else if (isModExp) {
              x = x.mod(m2);
            }
          }
          if (isModExp)
            return y2;
          if (nIsNeg)
            y2 = ONE.div(y2);
          return m2 ? y2.mod(m2) : k ? round(y2, POW_PRECISION, ROUNDING_MODE, more) : y2;
        };
        P2.integerValue = function(rm) {
          var n2 = new BigNumber3(this);
          if (rm == null)
            rm = ROUNDING_MODE;
          else
            intCheck(rm, 0, 8);
          return round(n2, n2.e + 1, rm);
        };
        P2.isEqualTo = P2.eq = function(y2, b2) {
          return compare(this, new BigNumber3(y2, b2)) === 0;
        };
        P2.isFinite = function() {
          return !!this.c;
        };
        P2.isGreaterThan = P2.gt = function(y2, b2) {
          return compare(this, new BigNumber3(y2, b2)) > 0;
        };
        P2.isGreaterThanOrEqualTo = P2.gte = function(y2, b2) {
          return (b2 = compare(this, new BigNumber3(y2, b2))) === 1 || b2 === 0;
        };
        P2.isInteger = function() {
          return !!this.c && bitFloor(this.e / LOG_BASE) > this.c.length - 2;
        };
        P2.isLessThan = P2.lt = function(y2, b2) {
          return compare(this, new BigNumber3(y2, b2)) < 0;
        };
        P2.isLessThanOrEqualTo = P2.lte = function(y2, b2) {
          return (b2 = compare(this, new BigNumber3(y2, b2))) === -1 || b2 === 0;
        };
        P2.isNaN = function() {
          return !this.s;
        };
        P2.isNegative = function() {
          return this.s < 0;
        };
        P2.isPositive = function() {
          return this.s > 0;
        };
        P2.isZero = function() {
          return !!this.c && this.c[0] == 0;
        };
        P2.minus = function(y2, b2) {
          var i2, j2, t2, xLTy, x = this, a2 = x.s;
          y2 = new BigNumber3(y2, b2);
          b2 = y2.s;
          if (!a2 || !b2)
            return new BigNumber3(NaN);
          if (a2 != b2) {
            y2.s = -b2;
            return x.plus(y2);
          }
          var xe2 = x.e / LOG_BASE, ye2 = y2.e / LOG_BASE, xc = x.c, yc = y2.c;
          if (!xe2 || !ye2) {
            if (!xc || !yc)
              return xc ? (y2.s = -b2, y2) : new BigNumber3(yc ? x : NaN);
            if (!xc[0] || !yc[0]) {
              return yc[0] ? (y2.s = -b2, y2) : new BigNumber3(xc[0] ? x : (
                // IEEE 754 (2008) 6.3: n - n = -0 when rounding to -Infinity
                ROUNDING_MODE == 3 ? -0 : 0
              ));
            }
          }
          xe2 = bitFloor(xe2);
          ye2 = bitFloor(ye2);
          xc = xc.slice();
          if (a2 = xe2 - ye2) {
            if (xLTy = a2 < 0) {
              a2 = -a2;
              t2 = xc;
            } else {
              ye2 = xe2;
              t2 = yc;
            }
            t2.reverse();
            for (b2 = a2; b2--; t2.push(0))
              ;
            t2.reverse();
          } else {
            j2 = (xLTy = (a2 = xc.length) < (b2 = yc.length)) ? a2 : b2;
            for (a2 = b2 = 0; b2 < j2; b2++) {
              if (xc[b2] != yc[b2]) {
                xLTy = xc[b2] < yc[b2];
                break;
              }
            }
          }
          if (xLTy) {
            t2 = xc;
            xc = yc;
            yc = t2;
            y2.s = -y2.s;
          }
          b2 = (j2 = yc.length) - (i2 = xc.length);
          if (b2 > 0)
            for (; b2--; xc[i2++] = 0)
              ;
          b2 = BASE - 1;
          for (; j2 > a2; ) {
            if (xc[--j2] < yc[j2]) {
              for (i2 = j2; i2 && !xc[--i2]; xc[i2] = b2)
                ;
              --xc[i2];
              xc[j2] += BASE;
            }
            xc[j2] -= yc[j2];
          }
          for (; xc[0] == 0; xc.splice(0, 1), --ye2)
            ;
          if (!xc[0]) {
            y2.s = ROUNDING_MODE == 3 ? -1 : 1;
            y2.c = [y2.e = 0];
            return y2;
          }
          return normalise(y2, xc, ye2);
        };
        P2.modulo = P2.mod = function(y2, b2) {
          var q2, s2, x = this;
          y2 = new BigNumber3(y2, b2);
          if (!x.c || !y2.s || y2.c && !y2.c[0]) {
            return new BigNumber3(NaN);
          } else if (!y2.c || x.c && !x.c[0]) {
            return new BigNumber3(x);
          }
          if (MODULO_MODE == 9) {
            s2 = y2.s;
            y2.s = 1;
            q2 = div(x, y2, 0, 3);
            y2.s = s2;
            q2.s *= s2;
          } else {
            q2 = div(x, y2, 0, MODULO_MODE);
          }
          y2 = x.minus(q2.times(y2));
          if (!y2.c[0] && MODULO_MODE == 1)
            y2.s = x.s;
          return y2;
        };
        P2.multipliedBy = P2.times = function(y2, b2) {
          var c2, e2, i2, j2, k, m2, xcL, xlo, xhi, ycL, ylo, yhi, zc, base, sqrtBase, x = this, xc = x.c, yc = (y2 = new BigNumber3(y2, b2)).c;
          if (!xc || !yc || !xc[0] || !yc[0]) {
            if (!x.s || !y2.s || xc && !xc[0] && !yc || yc && !yc[0] && !xc) {
              y2.c = y2.e = y2.s = null;
            } else {
              y2.s *= x.s;
              if (!xc || !yc) {
                y2.c = y2.e = null;
              } else {
                y2.c = [0];
                y2.e = 0;
              }
            }
            return y2;
          }
          e2 = bitFloor(x.e / LOG_BASE) + bitFloor(y2.e / LOG_BASE);
          y2.s *= x.s;
          xcL = xc.length;
          ycL = yc.length;
          if (xcL < ycL) {
            zc = xc;
            xc = yc;
            yc = zc;
            i2 = xcL;
            xcL = ycL;
            ycL = i2;
          }
          for (i2 = xcL + ycL, zc = []; i2--; zc.push(0))
            ;
          base = BASE;
          sqrtBase = SQRT_BASE;
          for (i2 = ycL; --i2 >= 0; ) {
            c2 = 0;
            ylo = yc[i2] % sqrtBase;
            yhi = yc[i2] / sqrtBase | 0;
            for (k = xcL, j2 = i2 + k; j2 > i2; ) {
              xlo = xc[--k] % sqrtBase;
              xhi = xc[k] / sqrtBase | 0;
              m2 = yhi * xlo + xhi * ylo;
              xlo = ylo * xlo + m2 % sqrtBase * sqrtBase + zc[j2] + c2;
              c2 = (xlo / base | 0) + (m2 / sqrtBase | 0) + yhi * xhi;
              zc[j2--] = xlo % base;
            }
            zc[j2] = c2;
          }
          if (c2) {
            ++e2;
          } else {
            zc.splice(0, 1);
          }
          return normalise(y2, zc, e2);
        };
        P2.negated = function() {
          var x = new BigNumber3(this);
          x.s = -x.s || null;
          return x;
        };
        P2.plus = function(y2, b2) {
          var t2, x = this, a2 = x.s;
          y2 = new BigNumber3(y2, b2);
          b2 = y2.s;
          if (!a2 || !b2)
            return new BigNumber3(NaN);
          if (a2 != b2) {
            y2.s = -b2;
            return x.minus(y2);
          }
          var xe2 = x.e / LOG_BASE, ye2 = y2.e / LOG_BASE, xc = x.c, yc = y2.c;
          if (!xe2 || !ye2) {
            if (!xc || !yc)
              return new BigNumber3(a2 / 0);
            if (!xc[0] || !yc[0])
              return yc[0] ? y2 : new BigNumber3(xc[0] ? x : a2 * 0);
          }
          xe2 = bitFloor(xe2);
          ye2 = bitFloor(ye2);
          xc = xc.slice();
          if (a2 = xe2 - ye2) {
            if (a2 > 0) {
              ye2 = xe2;
              t2 = yc;
            } else {
              a2 = -a2;
              t2 = xc;
            }
            t2.reverse();
            for (; a2--; t2.push(0))
              ;
            t2.reverse();
          }
          a2 = xc.length;
          b2 = yc.length;
          if (a2 - b2 < 0) {
            t2 = yc;
            yc = xc;
            xc = t2;
            b2 = a2;
          }
          for (a2 = 0; b2; ) {
            a2 = (xc[--b2] = xc[b2] + yc[b2] + a2) / BASE | 0;
            xc[b2] = BASE === xc[b2] ? 0 : xc[b2] % BASE;
          }
          if (a2) {
            xc = [a2].concat(xc);
            ++ye2;
          }
          return normalise(y2, xc, ye2);
        };
        P2.precision = P2.sd = function(sd, rm) {
          var c2, n2, v2, x = this;
          if (sd != null && sd !== !!sd) {
            intCheck(sd, 1, MAX);
            if (rm == null)
              rm = ROUNDING_MODE;
            else
              intCheck(rm, 0, 8);
            return round(new BigNumber3(x), sd, rm);
          }
          if (!(c2 = x.c))
            return null;
          v2 = c2.length - 1;
          n2 = v2 * LOG_BASE + 1;
          if (v2 = c2[v2]) {
            for (; v2 % 10 == 0; v2 /= 10, n2--)
              ;
            for (v2 = c2[0]; v2 >= 10; v2 /= 10, n2++)
              ;
          }
          if (sd && x.e + 1 > n2)
            n2 = x.e + 1;
          return n2;
        };
        P2.shiftedBy = function(k) {
          intCheck(k, -MAX_SAFE_INTEGER, MAX_SAFE_INTEGER);
          return this.times("1e" + k);
        };
        P2.squareRoot = P2.sqrt = function() {
          var m2, n2, r2, rep, t2, x = this, c2 = x.c, s2 = x.s, e2 = x.e, dp = DECIMAL_PLACES + 4, half = new BigNumber3("0.5");
          if (s2 !== 1 || !c2 || !c2[0]) {
            return new BigNumber3(!s2 || s2 < 0 && (!c2 || c2[0]) ? NaN : c2 ? x : 1 / 0);
          }
          s2 = Math.sqrt(+valueOf(x));
          if (s2 == 0 || s2 == 1 / 0) {
            n2 = coeffToString(c2);
            if ((n2.length + e2) % 2 == 0)
              n2 += "0";
            s2 = Math.sqrt(+n2);
            e2 = bitFloor((e2 + 1) / 2) - (e2 < 0 || e2 % 2);
            if (s2 == 1 / 0) {
              n2 = "5e" + e2;
            } else {
              n2 = s2.toExponential();
              n2 = n2.slice(0, n2.indexOf("e") + 1) + e2;
            }
            r2 = new BigNumber3(n2);
          } else {
            r2 = new BigNumber3(s2 + "");
          }
          if (r2.c[0]) {
            e2 = r2.e;
            s2 = e2 + dp;
            if (s2 < 3)
              s2 = 0;
            for (; ; ) {
              t2 = r2;
              r2 = half.times(t2.plus(div(x, t2, dp, 1)));
              if (coeffToString(t2.c).slice(0, s2) === (n2 = coeffToString(r2.c)).slice(0, s2)) {
                if (r2.e < e2)
                  --s2;
                n2 = n2.slice(s2 - 3, s2 + 1);
                if (n2 == "9999" || !rep && n2 == "4999") {
                  if (!rep) {
                    round(t2, t2.e + DECIMAL_PLACES + 2, 0);
                    if (t2.times(t2).eq(x)) {
                      r2 = t2;
                      break;
                    }
                  }
                  dp += 4;
                  s2 += 4;
                  rep = 1;
                } else {
                  if (!+n2 || !+n2.slice(1) && n2.charAt(0) == "5") {
                    round(r2, r2.e + DECIMAL_PLACES + 2, 1);
                    m2 = !r2.times(r2).eq(x);
                  }
                  break;
                }
              }
            }
          }
          return round(r2, r2.e + DECIMAL_PLACES + 1, ROUNDING_MODE, m2);
        };
        P2.toExponential = function(dp, rm) {
          if (dp != null) {
            intCheck(dp, 0, MAX);
            dp++;
          }
          return format(this, dp, rm, 1);
        };
        P2.toFixed = function(dp, rm) {
          if (dp != null) {
            intCheck(dp, 0, MAX);
            dp = dp + this.e + 1;
          }
          return format(this, dp, rm);
        };
        P2.toFormat = function(dp, rm, format2) {
          var str, x = this;
          if (format2 == null) {
            if (dp != null && rm && typeof rm == "object") {
              format2 = rm;
              rm = null;
            } else if (dp && typeof dp == "object") {
              format2 = dp;
              dp = rm = null;
            } else {
              format2 = FORMAT;
            }
          } else if (typeof format2 != "object") {
            throw Error(bignumberError + "Argument not an object: " + format2);
          }
          str = x.toFixed(dp, rm);
          if (x.c) {
            var i2, arr = str.split("."), g1 = +format2.groupSize, g2 = +format2.secondaryGroupSize, groupSeparator = format2.groupSeparator || "", intPart = arr[0], fractionPart = arr[1], isNeg = x.s < 0, intDigits = isNeg ? intPart.slice(1) : intPart, len = intDigits.length;
            if (g2) {
              i2 = g1;
              g1 = g2;
              g2 = i2;
              len -= i2;
            }
            if (g1 > 0 && len > 0) {
              i2 = len % g1 || g1;
              intPart = intDigits.substr(0, i2);
              for (; i2 < len; i2 += g1)
                intPart += groupSeparator + intDigits.substr(i2, g1);
              if (g2 > 0)
                intPart += groupSeparator + intDigits.slice(i2);
              if (isNeg)
                intPart = "-" + intPart;
            }
            str = fractionPart ? intPart + (format2.decimalSeparator || "") + ((g2 = +format2.fractionGroupSize) ? fractionPart.replace(
              new RegExp("\\d{" + g2 + "}\\B", "g"),
              "$&" + (format2.fractionGroupSeparator || "")
            ) : fractionPart) : intPart;
          }
          return (format2.prefix || "") + str + (format2.suffix || "");
        };
        P2.toFraction = function(md) {
          var d2, d0, d1, d22, e2, exp, n2, n0, n1, q2, r2, s2, x = this, xc = x.c;
          if (md != null) {
            n2 = new BigNumber3(md);
            if (!n2.isInteger() && (n2.c || n2.s !== 1) || n2.lt(ONE)) {
              throw Error(bignumberError + "Argument " + (n2.isInteger() ? "out of range: " : "not an integer: ") + valueOf(n2));
            }
          }
          if (!xc)
            return new BigNumber3(x);
          d2 = new BigNumber3(ONE);
          n1 = d0 = new BigNumber3(ONE);
          d1 = n0 = new BigNumber3(ONE);
          s2 = coeffToString(xc);
          e2 = d2.e = s2.length - x.e - 1;
          d2.c[0] = POWS_TEN[(exp = e2 % LOG_BASE) < 0 ? LOG_BASE + exp : exp];
          md = !md || n2.comparedTo(d2) > 0 ? e2 > 0 ? d2 : n1 : n2;
          exp = MAX_EXP;
          MAX_EXP = 1 / 0;
          n2 = new BigNumber3(s2);
          n0.c[0] = 0;
          for (; ; ) {
            q2 = div(n2, d2, 0, 1);
            d22 = d0.plus(q2.times(d1));
            if (d22.comparedTo(md) == 1)
              break;
            d0 = d1;
            d1 = d22;
            n1 = n0.plus(q2.times(d22 = n1));
            n0 = d22;
            d2 = n2.minus(q2.times(d22 = d2));
            n2 = d22;
          }
          d22 = div(md.minus(d0), d1, 0, 1);
          n0 = n0.plus(d22.times(n1));
          d0 = d0.plus(d22.times(d1));
          n0.s = n1.s = x.s;
          e2 = e2 * 2;
          r2 = div(n1, d1, e2, ROUNDING_MODE).minus(x).abs().comparedTo(
            div(n0, d0, e2, ROUNDING_MODE).minus(x).abs()
          ) < 1 ? [n1, d1] : [n0, d0];
          MAX_EXP = exp;
          return r2;
        };
        P2.toNumber = function() {
          return +valueOf(this);
        };
        P2.toPrecision = function(sd, rm) {
          if (sd != null)
            intCheck(sd, 1, MAX);
          return format(this, sd, rm, 2);
        };
        P2.toString = function(b2) {
          var str, n2 = this, s2 = n2.s, e2 = n2.e;
          if (e2 === null) {
            if (s2) {
              str = "Infinity";
              if (s2 < 0)
                str = "-" + str;
            } else {
              str = "NaN";
            }
          } else {
            if (b2 == null) {
              str = e2 <= TO_EXP_NEG || e2 >= TO_EXP_POS ? toExponential(coeffToString(n2.c), e2) : toFixedPoint(coeffToString(n2.c), e2, "0");
            } else if (b2 === 10 && alphabetHasNormalDecimalDigits) {
              n2 = round(new BigNumber3(n2), DECIMAL_PLACES + e2 + 1, ROUNDING_MODE);
              str = toFixedPoint(coeffToString(n2.c), n2.e, "0");
            } else {
              intCheck(b2, 2, ALPHABET.length, "Base");
              str = convertBase(toFixedPoint(coeffToString(n2.c), e2, "0"), 10, b2, s2, true);
            }
            if (s2 < 0 && n2.c[0])
              str = "-" + str;
          }
          return str;
        };
        P2.valueOf = P2.toJSON = function() {
          return valueOf(this);
        };
        P2._isBigNumber = true;
        if (configObject != null)
          BigNumber3.set(configObject);
        return BigNumber3;
      }
      function bitFloor(n2) {
        var i2 = n2 | 0;
        return n2 > 0 || n2 === i2 ? i2 : i2 - 1;
      }
      function coeffToString(a2) {
        var s2, z2, i2 = 1, j2 = a2.length, r2 = a2[0] + "";
        for (; i2 < j2; ) {
          s2 = a2[i2++] + "";
          z2 = LOG_BASE - s2.length;
          for (; z2--; s2 = "0" + s2)
            ;
          r2 += s2;
        }
        for (j2 = r2.length; r2.charCodeAt(--j2) === 48; )
          ;
        return r2.slice(0, j2 + 1 || 1);
      }
      function compare(x, y2) {
        var a2, b2, xc = x.c, yc = y2.c, i2 = x.s, j2 = y2.s, k = x.e, l2 = y2.e;
        if (!i2 || !j2)
          return null;
        a2 = xc && !xc[0];
        b2 = yc && !yc[0];
        if (a2 || b2)
          return a2 ? b2 ? 0 : -j2 : i2;
        if (i2 != j2)
          return i2;
        a2 = i2 < 0;
        b2 = k == l2;
        if (!xc || !yc)
          return b2 ? 0 : !xc ^ a2 ? 1 : -1;
        if (!b2)
          return k > l2 ^ a2 ? 1 : -1;
        j2 = (k = xc.length) < (l2 = yc.length) ? k : l2;
        for (i2 = 0; i2 < j2; i2++)
          if (xc[i2] != yc[i2])
            return xc[i2] > yc[i2] ^ a2 ? 1 : -1;
        return k == l2 ? 0 : k > l2 ^ a2 ? 1 : -1;
      }
      function intCheck(n2, min, max, name) {
        if (n2 < min || n2 > max || n2 !== mathfloor(n2)) {
          throw Error(bignumberError + (name || "Argument") + (typeof n2 == "number" ? n2 < min || n2 > max ? " out of range: " : " not an integer: " : " not a primitive number: ") + String(n2));
        }
      }
      function isOdd(n2) {
        var k = n2.c.length - 1;
        return bitFloor(n2.e / LOG_BASE) == k && n2.c[k] % 2 != 0;
      }
      function toExponential(str, e2) {
        return (str.length > 1 ? str.charAt(0) + "." + str.slice(1) : str) + (e2 < 0 ? "e" : "e+") + e2;
      }
      function toFixedPoint(str, e2, z2) {
        var len, zs2;
        if (e2 < 0) {
          for (zs2 = z2 + "."; ++e2; zs2 += z2)
            ;
          str = zs2 + str;
        } else {
          len = str.length;
          if (++e2 > len) {
            for (zs2 = z2, e2 -= len; --e2; zs2 += z2)
              ;
            str += zs2;
          } else if (e2 < len) {
            str = str.slice(0, e2) + "." + str.slice(e2);
          }
        }
        return str;
      }
      BigNumber2 = clone();
      BigNumber2["default"] = BigNumber2.BigNumber = BigNumber2;
      if (module2.exports) {
        module2.exports = BigNumber2;
      } else {
        if (!globalObject) {
          globalObject = typeof self != "undefined" && self ? self : window;
        }
        globalObject.BigNumber = BigNumber2;
      }
    })(commonjsGlobal);
  })(bignumber);
  var bignumberExports = bignumber.exports;
  (function(module2) {
    var BigNumber2 = bignumberExports;
    var JSON2 = module2.exports;
    (function() {
      var escapable = /[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g, gap, indent, meta = {
        // table of character substitutions
        "\b": "\\b",
        "	": "\\t",
        "\n": "\\n",
        "\f": "\\f",
        "\r": "\\r",
        '"': '\\"',
        "\\": "\\\\"
      }, rep;
      function quote(string2) {
        escapable.lastIndex = 0;
        return escapable.test(string2) ? '"' + string2.replace(escapable, function(a2) {
          var c2 = meta[a2];
          return typeof c2 === "string" ? c2 : "\\u" + ("0000" + a2.charCodeAt(0).toString(16)).slice(-4);
        }) + '"' : '"' + string2 + '"';
      }
      function str(key, holder) {
        var i2, k, v2, length, mind = gap, partial, value = holder[key], isBigNumber = value != null && (value instanceof BigNumber2 || BigNumber2.isBigNumber(value));
        if (value && typeof value === "object" && typeof value.toJSON === "function") {
          value = value.toJSON(key);
        }
        if (typeof rep === "function") {
          value = rep.call(holder, key, value);
        }
        switch (typeof value) {
          case "string":
            if (isBigNumber) {
              return value;
            } else {
              return quote(value);
            }
          case "number":
            return isFinite(value) ? String(value) : "null";
          case "boolean":
          case "null":
          case "bigint":
            return String(value);
          case "object":
            if (!value) {
              return "null";
            }
            gap += indent;
            partial = [];
            if (Object.prototype.toString.apply(value) === "[object Array]") {
              length = value.length;
              for (i2 = 0; i2 < length; i2 += 1) {
                partial[i2] = str(i2, value) || "null";
              }
              v2 = partial.length === 0 ? "[]" : gap ? "[\n" + gap + partial.join(",\n" + gap) + "\n" + mind + "]" : "[" + partial.join(",") + "]";
              gap = mind;
              return v2;
            }
            if (rep && typeof rep === "object") {
              length = rep.length;
              for (i2 = 0; i2 < length; i2 += 1) {
                if (typeof rep[i2] === "string") {
                  k = rep[i2];
                  v2 = str(k, value);
                  if (v2) {
                    partial.push(quote(k) + (gap ? ": " : ":") + v2);
                  }
                }
              }
            } else {
              Object.keys(value).forEach(function(k2) {
                var v3 = str(k2, value);
                if (v3) {
                  partial.push(quote(k2) + (gap ? ": " : ":") + v3);
                }
              });
            }
            v2 = partial.length === 0 ? "{}" : gap ? "{\n" + gap + partial.join(",\n" + gap) + "\n" + mind + "}" : "{" + partial.join(",") + "}";
            gap = mind;
            return v2;
        }
      }
      if (typeof JSON2.stringify !== "function") {
        JSON2.stringify = function(value, replacer, space) {
          var i2;
          gap = "";
          indent = "";
          if (typeof space === "number") {
            for (i2 = 0; i2 < space; i2 += 1) {
              indent += " ";
            }
          } else if (typeof space === "string") {
            indent = space;
          }
          rep = replacer;
          if (replacer && typeof replacer !== "function" && (typeof replacer !== "object" || typeof replacer.length !== "number")) {
            throw new Error("JSON.stringify");
          }
          return str("", { "": value });
        };
      }
    })();
  })(stringify);
  var stringifyExports = stringify.exports;
  var BigNumber = null;
  const suspectProtoRx = /(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])/;
  const suspectConstructorRx = /(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)/;
  var json_parse$1 = function(options) {
    var _options = {
      strict: false,
      // not being strict means do not generate syntax errors for "duplicate key"
      storeAsString: false,
      // toggles whether the values should be stored as BigNumber (default) or a string
      alwaysParseAsBig: false,
      // toggles whether all numbers should be Big
      useNativeBigInt: false,
      // toggles whether to use native BigInt instead of bignumber.js
      protoAction: "error",
      constructorAction: "error"
    };
    if (options !== void 0 && options !== null) {
      if (options.strict === true) {
        _options.strict = true;
      }
      if (options.storeAsString === true) {
        _options.storeAsString = true;
      }
      _options.alwaysParseAsBig = options.alwaysParseAsBig === true ? options.alwaysParseAsBig : false;
      _options.useNativeBigInt = options.useNativeBigInt === true ? options.useNativeBigInt : false;
      if (typeof options.constructorAction !== "undefined") {
        if (options.constructorAction === "error" || options.constructorAction === "ignore" || options.constructorAction === "preserve") {
          _options.constructorAction = options.constructorAction;
        } else {
          throw new Error(
            `Incorrect value for constructorAction option, must be "error", "ignore" or undefined but passed ${options.constructorAction}`
          );
        }
      }
      if (typeof options.protoAction !== "undefined") {
        if (options.protoAction === "error" || options.protoAction === "ignore" || options.protoAction === "preserve") {
          _options.protoAction = options.protoAction;
        } else {
          throw new Error(
            `Incorrect value for protoAction option, must be "error", "ignore" or undefined but passed ${options.protoAction}`
          );
        }
      }
    }
    var at2, ch, escapee = {
      '"': '"',
      "\\": "\\",
      "/": "/",
      b: "\b",
      f: "\f",
      n: "\n",
      r: "\r",
      t: "	"
    }, text, error = function(m2) {
      throw {
        name: "SyntaxError",
        message: m2,
        at: at2,
        text
      };
    }, next = function(c2) {
      if (c2 && c2 !== ch) {
        error("Expected '" + c2 + "' instead of '" + ch + "'");
      }
      ch = text.charAt(at2);
      at2 += 1;
      return ch;
    }, number2 = function() {
      var number3, string3 = "";
      if (ch === "-") {
        string3 = "-";
        next("-");
      }
      while (ch >= "0" && ch <= "9") {
        string3 += ch;
        next();
      }
      if (ch === ".") {
        string3 += ".";
        while (next() && ch >= "0" && ch <= "9") {
          string3 += ch;
        }
      }
      if (ch === "e" || ch === "E") {
        string3 += ch;
        next();
        if (ch === "-" || ch === "+") {
          string3 += ch;
          next();
        }
        while (ch >= "0" && ch <= "9") {
          string3 += ch;
          next();
        }
      }
      number3 = +string3;
      if (!isFinite(number3)) {
        error("Bad number");
      } else {
        if (BigNumber == null)
          BigNumber = bignumberExports;
        if (string3.length > 15)
          return _options.storeAsString ? string3 : _options.useNativeBigInt ? BigInt(string3) : new BigNumber(string3);
        else
          return !_options.alwaysParseAsBig ? number3 : _options.useNativeBigInt ? BigInt(number3) : new BigNumber(number3);
      }
    }, string2 = function() {
      var hex, i2, string3 = "", uffff;
      if (ch === '"') {
        var startAt = at2;
        while (next()) {
          if (ch === '"') {
            if (at2 - 1 > startAt)
              string3 += text.substring(startAt, at2 - 1);
            next();
            return string3;
          }
          if (ch === "\\") {
            if (at2 - 1 > startAt)
              string3 += text.substring(startAt, at2 - 1);
            next();
            if (ch === "u") {
              uffff = 0;
              for (i2 = 0; i2 < 4; i2 += 1) {
                hex = parseInt(next(), 16);
                if (!isFinite(hex)) {
                  break;
                }
                uffff = uffff * 16 + hex;
              }
              string3 += String.fromCharCode(uffff);
            } else if (typeof escapee[ch] === "string") {
              string3 += escapee[ch];
            } else {
              break;
            }
            startAt = at2;
          }
        }
      }
      error("Bad string");
    }, white = function() {
      while (ch && ch <= " ") {
        next();
      }
    }, word = function() {
      switch (ch) {
        case "t":
          next("t");
          next("r");
          next("u");
          next("e");
          return true;
        case "f":
          next("f");
          next("a");
          next("l");
          next("s");
          next("e");
          return false;
        case "n":
          next("n");
          next("u");
          next("l");
          next("l");
          return null;
      }
      error("Unexpected '" + ch + "'");
    }, value, array2 = function() {
      var array3 = [];
      if (ch === "[") {
        next("[");
        white();
        if (ch === "]") {
          next("]");
          return array3;
        }
        while (ch) {
          array3.push(value());
          white();
          if (ch === "]") {
            next("]");
            return array3;
          }
          next(",");
          white();
        }
      }
      error("Bad array");
    }, object2 = function() {
      var key, object3 = /* @__PURE__ */ Object.create(null);
      if (ch === "{") {
        next("{");
        white();
        if (ch === "}") {
          next("}");
          return object3;
        }
        while (ch) {
          key = string2();
          white();
          next(":");
          if (_options.strict === true && Object.hasOwnProperty.call(object3, key)) {
            error('Duplicate key "' + key + '"');
          }
          if (suspectProtoRx.test(key) === true) {
            if (_options.protoAction === "error") {
              error("Object contains forbidden prototype property");
            } else if (_options.protoAction === "ignore") {
              value();
            } else {
              object3[key] = value();
            }
          } else if (suspectConstructorRx.test(key) === true) {
            if (_options.constructorAction === "error") {
              error("Object contains forbidden constructor property");
            } else if (_options.constructorAction === "ignore") {
              value();
            } else {
              object3[key] = value();
            }
          } else {
            object3[key] = value();
          }
          white();
          if (ch === "}") {
            next("}");
            return object3;
          }
          next(",");
          white();
        }
      }
      error("Bad object");
    };
    value = function() {
      white();
      switch (ch) {
        case "{":
          return object2();
        case "[":
          return array2();
        case '"':
          return string2();
        case "-":
          return number2();
        default:
          return ch >= "0" && ch <= "9" ? number2() : word();
      }
    };
    return function(source, reviver) {
      var result;
      text = source + "";
      at2 = 0;
      ch = " ";
      result = value();
      white();
      if (ch) {
        error("Syntax error");
      }
      return typeof reviver === "function" ? function walk(holder, key) {
        var v2, value2 = holder[key];
        if (value2 && typeof value2 === "object") {
          Object.keys(value2).forEach(function(k) {
            v2 = walk(value2, k);
            if (v2 !== void 0) {
              value2[k] = v2;
            } else {
              delete value2[k];
            }
          });
        }
        return reviver.call(holder, key, value2);
      }({ "": result }, "") : result;
    };
  };
  var parse$1 = json_parse$1;
  var json_stringify = stringifyExports.stringify;
  var json_parse = parse$1;
  jsonBigint.exports = function(options) {
    return {
      parse: json_parse(options),
      stringify: json_stringify
    };
  };
  jsonBigint.exports.parse = json_parse();
  jsonBigint.exports.stringify = json_stringify;
  var jsonBigintExports = jsonBigint.exports;
  const JSONBig = /* @__PURE__ */ getDefaultExportFromCjs(jsonBigintExports);
  const baseURL$1 = "https://ceshi.maimiaoqingsu.com";
  const requestConfig = {
    baseURL: baseURL$1,
    timeout: 3e4,
    header: {
      "Content-Type": "application/json"
    },
    dataType: "text"
  };
  const request = (options) => {
    const config2 = { ...requestConfig, ...options };
    if (config2.url && !config2.url.startsWith("http")) {
      const baseUrl = config2.baseURL.endsWith("/") ? config2.baseURL : config2.baseURL + "/";
      const path = config2.url.startsWith("/") ? config2.url.substring(1) : config2.url;
      config2.url = baseUrl + path;
    }
    const token = uni.getStorageSync("token");
    if (token) {
      config2.header = { ...config2.header, token };
    }
    return new Promise((resolve, reject) => {
      uni.request({
        ...config2,
        success: (res2) => {
          if (res2.statusCode !== 200) {
            uni.showToast({ title: "服务器异常，请稍后重试", icon: "none" });
            reject(res2);
            return;
          }
          let data = res2.data;
          if (typeof data !== "string")
            data = JSON.stringify(data);
          try {
            data = JSONBig.parse(data);
          } catch (e2) {
            formatAppLog("error", "at utils/request.js:49", "JSON解析失败:", e2);
            data = res2.data;
          }
          const custom = config2.custom || {};
          if (data.code !== 0 && data.code !== 409999) {
            if (custom.toast !== false) {
              uni.showToast({
                title: data.msg || "请求失败",
                icon: "error"
              });
              if (data.code === 401 || data.code === 10010002) {
                uni.showToast({ title: "登录已过期，请重新登录", icon: "none" });
                uni.removeStorageSync("logoInfo");
                setTimeout(() => {
                  uni.reLaunch({ url: "/pages/login/login" });
                }, 1e3);
              }
            }
            reject({ statusCode: res2.statusCode, data, message: data.msg || "请求失败" });
            return;
          }
          resolve(data);
        },
        fail: (err) => {
          uni.showToast({ title: "网络错误，请稍后再试", icon: "none" });
          reject(err);
        }
      });
    });
  };
  const http$1 = {
    get(url2, data = {}, config2 = {}) {
      return request({ url: url2, method: "GET", data, ...config2 });
    },
    post(url2, data = {}, config2 = {}) {
      return request({ url: url2, method: "POST", data, ...config2 });
    },
    put(url2, data = {}, config2 = {}) {
      return request({ url: url2, method: "PUT", data, ...config2 });
    },
    delete(url2, data = {}, config2 = {}) {
      return request({ url: url2, method: "DELETE", data, ...config2 });
    }
  };
  const login = (params, config2 = {}) => http$1.post(
    "/api/user/login",
    params,
    config2
  );
  const getUserInfo = (params, config2 = {}) => http$1.post(
    "/api/user/userInfo",
    params,
    config2
  );
  const sendSms = (params, config2 = {}) => http$1.post(
    "/api/sms/sms/sendSms",
    params,
    config2
  );
  const smsLogin = (params, config2 = {}) => http$1.post(
    "/api/user/smsLogin",
    params,
    config2
  );
  const register = (params, config2 = {}) => http$1.post("/api/user/register", params, config2);
  const articleByType$1 = (params, config2 = {}) => http$1.get("/api/agreement/page?current=1&size=10", params, config2);
  const cities = (params, config2 = {}) => http$1.get("/api/city/list");
  const userSummary = (params, config2 = {}) => http$1.get(`/api/user/summary?userId=${params.userId}`, params, config2);
  const getMallSwitch = (params, config2 = {}) => http$1.get("/api/mall/config/getMallSwitch", params, config2);
  var isVue2 = false;
  function set(target, key, val2) {
    if (Array.isArray(target)) {
      target.length = Math.max(target.length, key);
      target.splice(key, 1, val2);
      return val2;
    }
    target[key] = val2;
    return val2;
  }
  function del(target, key) {
    if (Array.isArray(target)) {
      target.splice(key, 1);
      return;
    }
    delete target[key];
  }
  function getDevtoolsGlobalHook() {
    return getTarget().__VUE_DEVTOOLS_GLOBAL_HOOK__;
  }
  function getTarget() {
    return typeof navigator !== "undefined" && typeof window !== "undefined" ? window : typeof global !== "undefined" ? global : {};
  }
  const isProxyAvailable = typeof Proxy === "function";
  const HOOK_SETUP = "devtools-plugin:setup";
  const HOOK_PLUGIN_SETTINGS_SET = "plugin:settings:set";
  let supported;
  let perf;
  function isPerformanceSupported() {
    var _a;
    if (supported !== void 0) {
      return supported;
    }
    if (typeof window !== "undefined" && window.performance) {
      supported = true;
      perf = window.performance;
    } else if (typeof global !== "undefined" && ((_a = global.perf_hooks) === null || _a === void 0 ? void 0 : _a.performance)) {
      supported = true;
      perf = global.perf_hooks.performance;
    } else {
      supported = false;
    }
    return supported;
  }
  function now() {
    return isPerformanceSupported() ? perf.now() : Date.now();
  }
  class ApiProxy {
    constructor(plugin, hook) {
      this.target = null;
      this.targetQueue = [];
      this.onQueue = [];
      this.plugin = plugin;
      this.hook = hook;
      const defaultSettings = {};
      if (plugin.settings) {
        for (const id2 in plugin.settings) {
          const item = plugin.settings[id2];
          defaultSettings[id2] = item.defaultValue;
        }
      }
      const localSettingsSaveId = `__vue-devtools-plugin-settings__${plugin.id}`;
      let currentSettings = Object.assign({}, defaultSettings);
      try {
        const raw = localStorage.getItem(localSettingsSaveId);
        const data = JSON.parse(raw);
        Object.assign(currentSettings, data);
      } catch (e2) {
      }
      this.fallbacks = {
        getSettings() {
          return currentSettings;
        },
        setSettings(value) {
          try {
            localStorage.setItem(localSettingsSaveId, JSON.stringify(value));
          } catch (e2) {
          }
          currentSettings = value;
        },
        now() {
          return now();
        }
      };
      if (hook) {
        hook.on(HOOK_PLUGIN_SETTINGS_SET, (pluginId, value) => {
          if (pluginId === this.plugin.id) {
            this.fallbacks.setSettings(value);
          }
        });
      }
      this.proxiedOn = new Proxy({}, {
        get: (_target, prop) => {
          if (this.target) {
            return this.target.on[prop];
          } else {
            return (...args) => {
              this.onQueue.push({
                method: prop,
                args
              });
            };
          }
        }
      });
      this.proxiedTarget = new Proxy({}, {
        get: (_target, prop) => {
          if (this.target) {
            return this.target[prop];
          } else if (prop === "on") {
            return this.proxiedOn;
          } else if (Object.keys(this.fallbacks).includes(prop)) {
            return (...args) => {
              this.targetQueue.push({
                method: prop,
                args,
                resolve: () => {
                }
              });
              return this.fallbacks[prop](...args);
            };
          } else {
            return (...args) => {
              return new Promise((resolve) => {
                this.targetQueue.push({
                  method: prop,
                  args,
                  resolve
                });
              });
            };
          }
        }
      });
    }
    async setRealTarget(target) {
      this.target = target;
      for (const item of this.onQueue) {
        this.target.on[item.method](...item.args);
      }
      for (const item of this.targetQueue) {
        item.resolve(await this.target[item.method](...item.args));
      }
    }
  }
  function setupDevtoolsPlugin(pluginDescriptor, setupFn) {
    const descriptor = pluginDescriptor;
    const target = getTarget();
    const hook = getDevtoolsGlobalHook();
    const enableProxy = isProxyAvailable && descriptor.enableEarlyProxy;
    if (hook && (target.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__ || !enableProxy)) {
      hook.emit(HOOK_SETUP, pluginDescriptor, setupFn);
    } else {
      const proxy = enableProxy ? new ApiProxy(descriptor, hook) : null;
      const list = target.__VUE_DEVTOOLS_PLUGINS__ = target.__VUE_DEVTOOLS_PLUGINS__ || [];
      list.push({
        pluginDescriptor: descriptor,
        setupFn,
        proxy
      });
      if (proxy)
        setupFn(proxy.proxiedTarget);
    }
  }
  /*!
   * pinia v2.1.7
   * (c) 2023 Eduardo San Martin Morote
   * @license MIT
   */
  let activePinia;
  const setActivePinia = (pinia) => activePinia = pinia;
  const piniaSymbol = Symbol("pinia");
  function isPlainObject(o2) {
    return o2 && typeof o2 === "object" && Object.prototype.toString.call(o2) === "[object Object]" && typeof o2.toJSON !== "function";
  }
  var MutationType;
  (function(MutationType2) {
    MutationType2["direct"] = "direct";
    MutationType2["patchObject"] = "patch object";
    MutationType2["patchFunction"] = "patch function";
  })(MutationType || (MutationType = {}));
  const IS_CLIENT = typeof window !== "undefined";
  const USE_DEVTOOLS = IS_CLIENT;
  const _global = /* @__PURE__ */ (() => typeof window === "object" && window.window === window ? window : typeof self === "object" && self.self === self ? self : typeof global === "object" && global.global === global ? global : typeof globalThis === "object" ? globalThis : { HTMLElement: null })();
  function bom(blob, { autoBom = false } = {}) {
    if (autoBom && /^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(blob.type)) {
      return new Blob([String.fromCharCode(65279), blob], { type: blob.type });
    }
    return blob;
  }
  function download(url2, name, opts) {
    const xhr = new XMLHttpRequest();
    xhr.open("GET", url2);
    xhr.responseType = "blob";
    xhr.onload = function() {
      saveAs(xhr.response, name, opts);
    };
    xhr.onerror = function() {
      console.error("could not download file");
    };
    xhr.send();
  }
  function corsEnabled(url2) {
    const xhr = new XMLHttpRequest();
    xhr.open("HEAD", url2, false);
    try {
      xhr.send();
    } catch (e2) {
    }
    return xhr.status >= 200 && xhr.status <= 299;
  }
  function click(node) {
    try {
      node.dispatchEvent(new MouseEvent("click"));
    } catch (e2) {
      const evt = document.createEvent("MouseEvents");
      evt.initMouseEvent("click", true, true, window, 0, 0, 0, 80, 20, false, false, false, false, 0, null);
      node.dispatchEvent(evt);
    }
  }
  const _navigator = typeof navigator === "object" ? navigator : { userAgent: "" };
  const isMacOSWebView = /* @__PURE__ */ (() => /Macintosh/.test(_navigator.userAgent) && /AppleWebKit/.test(_navigator.userAgent) && !/Safari/.test(_navigator.userAgent))();
  const saveAs = !IS_CLIENT ? () => {
  } : (
    // Use download attribute first if possible (#193 Lumia mobile) unless this is a macOS WebView or mini program
    typeof HTMLAnchorElement !== "undefined" && "download" in HTMLAnchorElement.prototype && !isMacOSWebView ? downloadSaveAs : (
      // Use msSaveOrOpenBlob as a second approach
      "msSaveOrOpenBlob" in _navigator ? msSaveAs : (
        // Fallback to using FileReader and a popup
        fileSaverSaveAs
      )
    )
  );
  function downloadSaveAs(blob, name = "download", opts) {
    const a2 = document.createElement("a");
    a2.download = name;
    a2.rel = "noopener";
    if (typeof blob === "string") {
      a2.href = blob;
      if (a2.origin !== location.origin) {
        if (corsEnabled(a2.href)) {
          download(blob, name, opts);
        } else {
          a2.target = "_blank";
          click(a2);
        }
      } else {
        click(a2);
      }
    } else {
      a2.href = URL.createObjectURL(blob);
      setTimeout(function() {
        URL.revokeObjectURL(a2.href);
      }, 4e4);
      setTimeout(function() {
        click(a2);
      }, 0);
    }
  }
  function msSaveAs(blob, name = "download", opts) {
    if (typeof blob === "string") {
      if (corsEnabled(blob)) {
        download(blob, name, opts);
      } else {
        const a2 = document.createElement("a");
        a2.href = blob;
        a2.target = "_blank";
        setTimeout(function() {
          click(a2);
        });
      }
    } else {
      navigator.msSaveOrOpenBlob(bom(blob, opts), name);
    }
  }
  function fileSaverSaveAs(blob, name, opts, popup) {
    popup = popup || open("", "_blank");
    if (popup) {
      popup.document.title = popup.document.body.innerText = "downloading...";
    }
    if (typeof blob === "string")
      return download(blob, name, opts);
    const force = blob.type === "application/octet-stream";
    const isSafari = /constructor/i.test(String(_global.HTMLElement)) || "safari" in _global;
    const isChromeIOS = /CriOS\/[\d]+/.test(navigator.userAgent);
    if ((isChromeIOS || force && isSafari || isMacOSWebView) && typeof FileReader !== "undefined") {
      const reader = new FileReader();
      reader.onloadend = function() {
        let url2 = reader.result;
        if (typeof url2 !== "string") {
          popup = null;
          throw new Error("Wrong reader.result type");
        }
        url2 = isChromeIOS ? url2 : url2.replace(/^data:[^;]*;/, "data:attachment/file;");
        if (popup) {
          popup.location.href = url2;
        } else {
          location.assign(url2);
        }
        popup = null;
      };
      reader.readAsDataURL(blob);
    } else {
      const url2 = URL.createObjectURL(blob);
      if (popup)
        popup.location.assign(url2);
      else
        location.href = url2;
      popup = null;
      setTimeout(function() {
        URL.revokeObjectURL(url2);
      }, 4e4);
    }
  }
  function toastMessage(message2, type) {
    const piniaMessage = "🍍 " + message2;
    if (typeof __VUE_DEVTOOLS_TOAST__ === "function") {
      __VUE_DEVTOOLS_TOAST__(piniaMessage, type);
    } else if (type === "error") {
      console.error(piniaMessage);
    } else if (type === "warn") {
      console.warn(piniaMessage);
    } else {
      console.log(piniaMessage);
    }
  }
  function isPinia(o2) {
    return "_a" in o2 && "install" in o2;
  }
  function checkClipboardAccess() {
    if (!("clipboard" in navigator)) {
      toastMessage(`Your browser doesn't support the Clipboard API`, "error");
      return true;
    }
  }
  function checkNotFocusedError(error) {
    if (error instanceof Error && error.message.toLowerCase().includes("document is not focused")) {
      toastMessage('You need to activate the "Emulate a focused page" setting in the "Rendering" panel of devtools.', "warn");
      return true;
    }
    return false;
  }
  async function actionGlobalCopyState(pinia) {
    if (checkClipboardAccess())
      return;
    try {
      await navigator.clipboard.writeText(JSON.stringify(pinia.state.value));
      toastMessage("Global state copied to clipboard.");
    } catch (error) {
      if (checkNotFocusedError(error))
        return;
      toastMessage(`Failed to serialize the state. Check the console for more details.`, "error");
      console.error(error);
    }
  }
  async function actionGlobalPasteState(pinia) {
    if (checkClipboardAccess())
      return;
    try {
      loadStoresState(pinia, JSON.parse(await navigator.clipboard.readText()));
      toastMessage("Global state pasted from clipboard.");
    } catch (error) {
      if (checkNotFocusedError(error))
        return;
      toastMessage(`Failed to deserialize the state from clipboard. Check the console for more details.`, "error");
      console.error(error);
    }
  }
  async function actionGlobalSaveState(pinia) {
    try {
      saveAs(new Blob([JSON.stringify(pinia.state.value)], {
        type: "text/plain;charset=utf-8"
      }), "pinia-state.json");
    } catch (error) {
      toastMessage(`Failed to export the state as JSON. Check the console for more details.`, "error");
      console.error(error);
    }
  }
  let fileInput;
  function getFileOpener() {
    if (!fileInput) {
      fileInput = document.createElement("input");
      fileInput.type = "file";
      fileInput.accept = ".json";
    }
    function openFile() {
      return new Promise((resolve, reject) => {
        fileInput.onchange = async () => {
          const files = fileInput.files;
          if (!files)
            return resolve(null);
          const file = files.item(0);
          if (!file)
            return resolve(null);
          return resolve({ text: await file.text(), file });
        };
        fileInput.oncancel = () => resolve(null);
        fileInput.onerror = reject;
        fileInput.click();
      });
    }
    return openFile;
  }
  async function actionGlobalOpenStateFile(pinia) {
    try {
      const open2 = getFileOpener();
      const result = await open2();
      if (!result)
        return;
      const { text, file } = result;
      loadStoresState(pinia, JSON.parse(text));
      toastMessage(`Global state imported from "${file.name}".`);
    } catch (error) {
      toastMessage(`Failed to import the state from JSON. Check the console for more details.`, "error");
      console.error(error);
    }
  }
  function loadStoresState(pinia, state) {
    for (const key in state) {
      const storeState = pinia.state.value[key];
      if (storeState) {
        Object.assign(storeState, state[key]);
      } else {
        pinia.state.value[key] = state[key];
      }
    }
  }
  function formatDisplay(display) {
    return {
      _custom: {
        display
      }
    };
  }
  const PINIA_ROOT_LABEL = "🍍 Pinia (root)";
  const PINIA_ROOT_ID = "_root";
  function formatStoreForInspectorTree(store) {
    return isPinia(store) ? {
      id: PINIA_ROOT_ID,
      label: PINIA_ROOT_LABEL
    } : {
      id: store.$id,
      label: store.$id
    };
  }
  function formatStoreForInspectorState(store) {
    if (isPinia(store)) {
      const storeNames = Array.from(store._s.keys());
      const storeMap = store._s;
      const state2 = {
        state: storeNames.map((storeId) => ({
          editable: true,
          key: storeId,
          value: store.state.value[storeId]
        })),
        getters: storeNames.filter((id2) => storeMap.get(id2)._getters).map((id2) => {
          const store2 = storeMap.get(id2);
          return {
            editable: false,
            key: id2,
            value: store2._getters.reduce((getters, key) => {
              getters[key] = store2[key];
              return getters;
            }, {})
          };
        })
      };
      return state2;
    }
    const state = {
      state: Object.keys(store.$state).map((key) => ({
        editable: true,
        key,
        value: store.$state[key]
      }))
    };
    if (store._getters && store._getters.length) {
      state.getters = store._getters.map((getterName) => ({
        editable: false,
        key: getterName,
        value: store[getterName]
      }));
    }
    if (store._customProperties.size) {
      state.customProperties = Array.from(store._customProperties).map((key) => ({
        editable: true,
        key,
        value: store[key]
      }));
    }
    return state;
  }
  function formatEventData(events) {
    if (!events)
      return {};
    if (Array.isArray(events)) {
      return events.reduce((data, event) => {
        data.keys.push(event.key);
        data.operations.push(event.type);
        data.oldValue[event.key] = event.oldValue;
        data.newValue[event.key] = event.newValue;
        return data;
      }, {
        oldValue: {},
        keys: [],
        operations: [],
        newValue: {}
      });
    } else {
      return {
        operation: formatDisplay(events.type),
        key: formatDisplay(events.key),
        oldValue: events.oldValue,
        newValue: events.newValue
      };
    }
  }
  function formatMutationType(type) {
    switch (type) {
      case MutationType.direct:
        return "mutation";
      case MutationType.patchFunction:
        return "$patch";
      case MutationType.patchObject:
        return "$patch";
      default:
        return "unknown";
    }
  }
  let isTimelineActive = true;
  const componentStateTypes = [];
  const MUTATIONS_LAYER_ID = "pinia:mutations";
  const INSPECTOR_ID = "pinia";
  const { assign: assign$1 } = Object;
  const getStoreType = (id2) => "🍍 " + id2;
  function registerPiniaDevtools(app, pinia) {
    setupDevtoolsPlugin({
      id: "dev.esm.pinia",
      label: "Pinia 🍍",
      logo: "https://pinia.vuejs.org/logo.svg",
      packageName: "pinia",
      homepage: "https://pinia.vuejs.org",
      componentStateTypes,
      app
    }, (api) => {
      if (typeof api.now !== "function") {
        toastMessage("You seem to be using an outdated version of Vue Devtools. Are you still using the Beta release instead of the stable one? You can find the links at https://devtools.vuejs.org/guide/installation.html.");
      }
      api.addTimelineLayer({
        id: MUTATIONS_LAYER_ID,
        label: `Pinia 🍍`,
        color: 15064968
      });
      api.addInspector({
        id: INSPECTOR_ID,
        label: "Pinia 🍍",
        icon: "storage",
        treeFilterPlaceholder: "Search stores",
        actions: [
          {
            icon: "content_copy",
            action: () => {
              actionGlobalCopyState(pinia);
            },
            tooltip: "Serialize and copy the state"
          },
          {
            icon: "content_paste",
            action: async () => {
              await actionGlobalPasteState(pinia);
              api.sendInspectorTree(INSPECTOR_ID);
              api.sendInspectorState(INSPECTOR_ID);
            },
            tooltip: "Replace the state with the content of your clipboard"
          },
          {
            icon: "save",
            action: () => {
              actionGlobalSaveState(pinia);
            },
            tooltip: "Save the state as a JSON file"
          },
          {
            icon: "folder_open",
            action: async () => {
              await actionGlobalOpenStateFile(pinia);
              api.sendInspectorTree(INSPECTOR_ID);
              api.sendInspectorState(INSPECTOR_ID);
            },
            tooltip: "Import the state from a JSON file"
          }
        ],
        nodeActions: [
          {
            icon: "restore",
            tooltip: 'Reset the state (with "$reset")',
            action: (nodeId) => {
              const store = pinia._s.get(nodeId);
              if (!store) {
                toastMessage(`Cannot reset "${nodeId}" store because it wasn't found.`, "warn");
              } else if (typeof store.$reset !== "function") {
                toastMessage(`Cannot reset "${nodeId}" store because it doesn't have a "$reset" method implemented.`, "warn");
              } else {
                store.$reset();
                toastMessage(`Store "${nodeId}" reset.`);
              }
            }
          }
        ]
      });
      api.on.inspectComponent((payload, ctx) => {
        const proxy = payload.componentInstance && payload.componentInstance.proxy;
        if (proxy && proxy._pStores) {
          const piniaStores = payload.componentInstance.proxy._pStores;
          Object.values(piniaStores).forEach((store) => {
            payload.instanceData.state.push({
              type: getStoreType(store.$id),
              key: "state",
              editable: true,
              value: store._isOptionsAPI ? {
                _custom: {
                  value: vue.toRaw(store.$state),
                  actions: [
                    {
                      icon: "restore",
                      tooltip: "Reset the state of this store",
                      action: () => store.$reset()
                    }
                  ]
                }
              } : (
                // NOTE: workaround to unwrap transferred refs
                Object.keys(store.$state).reduce((state, key) => {
                  state[key] = store.$state[key];
                  return state;
                }, {})
              )
            });
            if (store._getters && store._getters.length) {
              payload.instanceData.state.push({
                type: getStoreType(store.$id),
                key: "getters",
                editable: false,
                value: store._getters.reduce((getters, key) => {
                  try {
                    getters[key] = store[key];
                  } catch (error) {
                    getters[key] = error;
                  }
                  return getters;
                }, {})
              });
            }
          });
        }
      });
      api.on.getInspectorTree((payload) => {
        if (payload.app === app && payload.inspectorId === INSPECTOR_ID) {
          let stores = [pinia];
          stores = stores.concat(Array.from(pinia._s.values()));
          payload.rootNodes = (payload.filter ? stores.filter((store) => "$id" in store ? store.$id.toLowerCase().includes(payload.filter.toLowerCase()) : PINIA_ROOT_LABEL.toLowerCase().includes(payload.filter.toLowerCase())) : stores).map(formatStoreForInspectorTree);
        }
      });
      api.on.getInspectorState((payload) => {
        if (payload.app === app && payload.inspectorId === INSPECTOR_ID) {
          const inspectedStore = payload.nodeId === PINIA_ROOT_ID ? pinia : pinia._s.get(payload.nodeId);
          if (!inspectedStore) {
            return;
          }
          if (inspectedStore) {
            payload.state = formatStoreForInspectorState(inspectedStore);
          }
        }
      });
      api.on.editInspectorState((payload, ctx) => {
        if (payload.app === app && payload.inspectorId === INSPECTOR_ID) {
          const inspectedStore = payload.nodeId === PINIA_ROOT_ID ? pinia : pinia._s.get(payload.nodeId);
          if (!inspectedStore) {
            return toastMessage(`store "${payload.nodeId}" not found`, "error");
          }
          const { path } = payload;
          if (!isPinia(inspectedStore)) {
            if (path.length !== 1 || !inspectedStore._customProperties.has(path[0]) || path[0] in inspectedStore.$state) {
              path.unshift("$state");
            }
          } else {
            path.unshift("state");
          }
          isTimelineActive = false;
          payload.set(inspectedStore, path, payload.state.value);
          isTimelineActive = true;
        }
      });
      api.on.editComponentState((payload) => {
        if (payload.type.startsWith("🍍")) {
          const storeId = payload.type.replace(/^🍍\s*/, "");
          const store = pinia._s.get(storeId);
          if (!store) {
            return toastMessage(`store "${storeId}" not found`, "error");
          }
          const { path } = payload;
          if (path[0] !== "state") {
            return toastMessage(`Invalid path for store "${storeId}":
${path}
Only state can be modified.`);
          }
          path[0] = "$state";
          isTimelineActive = false;
          payload.set(store, path, payload.state.value);
          isTimelineActive = true;
        }
      });
    });
  }
  function addStoreToDevtools(app, store) {
    if (!componentStateTypes.includes(getStoreType(store.$id))) {
      componentStateTypes.push(getStoreType(store.$id));
    }
    setupDevtoolsPlugin({
      id: "dev.esm.pinia",
      label: "Pinia 🍍",
      logo: "https://pinia.vuejs.org/logo.svg",
      packageName: "pinia",
      homepage: "https://pinia.vuejs.org",
      componentStateTypes,
      app,
      settings: {
        logStoreChanges: {
          label: "Notify about new/deleted stores",
          type: "boolean",
          defaultValue: true
        }
        // useEmojis: {
        //   label: 'Use emojis in messages ⚡️',
        //   type: 'boolean',
        //   defaultValue: true,
        // },
      }
    }, (api) => {
      const now2 = typeof api.now === "function" ? api.now.bind(api) : Date.now;
      store.$onAction(({ after, onError, name, args }) => {
        const groupId = runningActionId++;
        api.addTimelineEvent({
          layerId: MUTATIONS_LAYER_ID,
          event: {
            time: now2(),
            title: "🛫 " + name,
            subtitle: "start",
            data: {
              store: formatDisplay(store.$id),
              action: formatDisplay(name),
              args
            },
            groupId
          }
        });
        after((result) => {
          activeAction = void 0;
          api.addTimelineEvent({
            layerId: MUTATIONS_LAYER_ID,
            event: {
              time: now2(),
              title: "🛬 " + name,
              subtitle: "end",
              data: {
                store: formatDisplay(store.$id),
                action: formatDisplay(name),
                args,
                result
              },
              groupId
            }
          });
        });
        onError((error) => {
          activeAction = void 0;
          api.addTimelineEvent({
            layerId: MUTATIONS_LAYER_ID,
            event: {
              time: now2(),
              logType: "error",
              title: "💥 " + name,
              subtitle: "end",
              data: {
                store: formatDisplay(store.$id),
                action: formatDisplay(name),
                args,
                error
              },
              groupId
            }
          });
        });
      }, true);
      store._customProperties.forEach((name) => {
        vue.watch(() => vue.unref(store[name]), (newValue, oldValue) => {
          api.notifyComponentUpdate();
          api.sendInspectorState(INSPECTOR_ID);
          if (isTimelineActive) {
            api.addTimelineEvent({
              layerId: MUTATIONS_LAYER_ID,
              event: {
                time: now2(),
                title: "Change",
                subtitle: name,
                data: {
                  newValue,
                  oldValue
                },
                groupId: activeAction
              }
            });
          }
        }, { deep: true });
      });
      store.$subscribe(({ events, type }, state) => {
        api.notifyComponentUpdate();
        api.sendInspectorState(INSPECTOR_ID);
        if (!isTimelineActive)
          return;
        const eventData = {
          time: now2(),
          title: formatMutationType(type),
          data: assign$1({ store: formatDisplay(store.$id) }, formatEventData(events)),
          groupId: activeAction
        };
        if (type === MutationType.patchFunction) {
          eventData.subtitle = "⤵️";
        } else if (type === MutationType.patchObject) {
          eventData.subtitle = "🧩";
        } else if (events && !Array.isArray(events)) {
          eventData.subtitle = events.type;
        }
        if (events) {
          eventData.data["rawEvent(s)"] = {
            _custom: {
              display: "DebuggerEvent",
              type: "object",
              tooltip: "raw DebuggerEvent[]",
              value: events
            }
          };
        }
        api.addTimelineEvent({
          layerId: MUTATIONS_LAYER_ID,
          event: eventData
        });
      }, { detached: true, flush: "sync" });
      const hotUpdate = store._hotUpdate;
      store._hotUpdate = vue.markRaw((newStore) => {
        hotUpdate(newStore);
        api.addTimelineEvent({
          layerId: MUTATIONS_LAYER_ID,
          event: {
            time: now2(),
            title: "🔥 " + store.$id,
            subtitle: "HMR update",
            data: {
              store: formatDisplay(store.$id),
              info: formatDisplay(`HMR update`)
            }
          }
        });
        api.notifyComponentUpdate();
        api.sendInspectorTree(INSPECTOR_ID);
        api.sendInspectorState(INSPECTOR_ID);
      });
      const { $dispose } = store;
      store.$dispose = () => {
        $dispose();
        api.notifyComponentUpdate();
        api.sendInspectorTree(INSPECTOR_ID);
        api.sendInspectorState(INSPECTOR_ID);
        api.getSettings().logStoreChanges && toastMessage(`Disposed "${store.$id}" store 🗑`);
      };
      api.notifyComponentUpdate();
      api.sendInspectorTree(INSPECTOR_ID);
      api.sendInspectorState(INSPECTOR_ID);
      api.getSettings().logStoreChanges && toastMessage(`"${store.$id}" store installed 🆕`);
    });
  }
  let runningActionId = 0;
  let activeAction;
  function patchActionForGrouping(store, actionNames, wrapWithProxy) {
    const actions = actionNames.reduce((storeActions, actionName) => {
      storeActions[actionName] = vue.toRaw(store)[actionName];
      return storeActions;
    }, {});
    for (const actionName in actions) {
      store[actionName] = function() {
        const _actionId = runningActionId;
        const trackedStore = wrapWithProxy ? new Proxy(store, {
          get(...args) {
            activeAction = _actionId;
            return Reflect.get(...args);
          },
          set(...args) {
            activeAction = _actionId;
            return Reflect.set(...args);
          }
        }) : store;
        activeAction = _actionId;
        const retValue = actions[actionName].apply(trackedStore, arguments);
        activeAction = void 0;
        return retValue;
      };
    }
  }
  function devtoolsPlugin({ app, store, options }) {
    if (store.$id.startsWith("__hot:")) {
      return;
    }
    store._isOptionsAPI = !!options.state;
    patchActionForGrouping(store, Object.keys(options.actions), store._isOptionsAPI);
    const originalHotUpdate = store._hotUpdate;
    vue.toRaw(store)._hotUpdate = function(newStore) {
      originalHotUpdate.apply(this, arguments);
      patchActionForGrouping(store, Object.keys(newStore._hmrPayload.actions), !!store._isOptionsAPI);
    };
    addStoreToDevtools(
      app,
      // FIXME: is there a way to allow the assignment from Store<Id, S, G, A> to StoreGeneric?
      store
    );
  }
  function createPinia() {
    const scope = vue.effectScope(true);
    const state = scope.run(() => vue.ref({}));
    let _p = [];
    let toBeInstalled = [];
    const pinia = vue.markRaw({
      install(app) {
        setActivePinia(pinia);
        {
          pinia._a = app;
          app.provide(piniaSymbol, pinia);
          app.config.globalProperties.$pinia = pinia;
          if (USE_DEVTOOLS) {
            registerPiniaDevtools(app, pinia);
          }
          toBeInstalled.forEach((plugin) => _p.push(plugin));
          toBeInstalled = [];
        }
      },
      use(plugin) {
        if (!this._a && !isVue2) {
          toBeInstalled.push(plugin);
        } else {
          _p.push(plugin);
        }
        return this;
      },
      _p,
      // it's actually undefined here
      // @ts-expect-error
      _a: null,
      _e: scope,
      _s: /* @__PURE__ */ new Map(),
      state
    });
    if (USE_DEVTOOLS && typeof Proxy !== "undefined") {
      pinia.use(devtoolsPlugin);
    }
    return pinia;
  }
  function patchObject(newState, oldState) {
    for (const key in oldState) {
      const subPatch = oldState[key];
      if (!(key in newState)) {
        continue;
      }
      const targetValue = newState[key];
      if (isPlainObject(targetValue) && isPlainObject(subPatch) && !vue.isRef(subPatch) && !vue.isReactive(subPatch)) {
        newState[key] = patchObject(targetValue, subPatch);
      } else {
        {
          newState[key] = subPatch;
        }
      }
    }
    return newState;
  }
  const noop = () => {
  };
  function addSubscription(subscriptions, callback, detached, onCleanup = noop) {
    subscriptions.push(callback);
    const removeSubscription = () => {
      const idx = subscriptions.indexOf(callback);
      if (idx > -1) {
        subscriptions.splice(idx, 1);
        onCleanup();
      }
    };
    if (!detached && vue.getCurrentScope()) {
      vue.onScopeDispose(removeSubscription);
    }
    return removeSubscription;
  }
  function triggerSubscriptions(subscriptions, ...args) {
    subscriptions.slice().forEach((callback) => {
      callback(...args);
    });
  }
  const fallbackRunWithContext = (fn) => fn();
  function mergeReactiveObjects(target, patchToApply) {
    if (target instanceof Map && patchToApply instanceof Map) {
      patchToApply.forEach((value, key) => target.set(key, value));
    }
    if (target instanceof Set && patchToApply instanceof Set) {
      patchToApply.forEach(target.add, target);
    }
    for (const key in patchToApply) {
      if (!patchToApply.hasOwnProperty(key))
        continue;
      const subPatch = patchToApply[key];
      const targetValue = target[key];
      if (isPlainObject(targetValue) && isPlainObject(subPatch) && target.hasOwnProperty(key) && !vue.isRef(subPatch) && !vue.isReactive(subPatch)) {
        target[key] = mergeReactiveObjects(targetValue, subPatch);
      } else {
        target[key] = subPatch;
      }
    }
    return target;
  }
  const skipHydrateSymbol = Symbol("pinia:skipHydration");
  function shouldHydrate(obj) {
    return !isPlainObject(obj) || !obj.hasOwnProperty(skipHydrateSymbol);
  }
  const { assign } = Object;
  function isComputed(o2) {
    return !!(vue.isRef(o2) && o2.effect);
  }
  function createOptionsStore(id2, options, pinia, hot) {
    const { state, actions, getters } = options;
    const initialState = pinia.state.value[id2];
    let store;
    function setup() {
      if (!initialState && !hot) {
        {
          pinia.state.value[id2] = state ? state() : {};
        }
      }
      const localState = hot ? (
        // use ref() to unwrap refs inside state TODO: check if this is still necessary
        vue.toRefs(vue.ref(state ? state() : {}).value)
      ) : vue.toRefs(pinia.state.value[id2]);
      return assign(localState, actions, Object.keys(getters || {}).reduce((computedGetters, name) => {
        if (name in localState) {
          console.warn(`[🍍]: A getter cannot have the same name as another state property. Rename one of them. Found with "${name}" in store "${id2}".`);
        }
        computedGetters[name] = vue.markRaw(vue.computed(() => {
          setActivePinia(pinia);
          const store2 = pinia._s.get(id2);
          return getters[name].call(store2, store2);
        }));
        return computedGetters;
      }, {}));
    }
    store = createSetupStore(id2, setup, options, pinia, hot, true);
    return store;
  }
  function createSetupStore($id, setup, options = {}, pinia, hot, isOptionsStore) {
    let scope;
    const optionsForPlugin = assign({ actions: {} }, options);
    if (!pinia._e.active) {
      throw new Error("Pinia destroyed");
    }
    const $subscribeOptions = {
      deep: true
      // flush: 'post',
    };
    {
      $subscribeOptions.onTrigger = (event) => {
        if (isListening) {
          debuggerEvents = event;
        } else if (isListening == false && !store._hotUpdating) {
          if (Array.isArray(debuggerEvents)) {
            debuggerEvents.push(event);
          } else {
            console.error("🍍 debuggerEvents should be an array. This is most likely an internal Pinia bug.");
          }
        }
      };
    }
    let isListening;
    let isSyncListening;
    let subscriptions = [];
    let actionSubscriptions = [];
    let debuggerEvents;
    const initialState = pinia.state.value[$id];
    if (!isOptionsStore && !initialState && !hot) {
      {
        pinia.state.value[$id] = {};
      }
    }
    const hotState = vue.ref({});
    let activeListener;
    function $patch(partialStateOrMutator) {
      let subscriptionMutation;
      isListening = isSyncListening = false;
      {
        debuggerEvents = [];
      }
      if (typeof partialStateOrMutator === "function") {
        partialStateOrMutator(pinia.state.value[$id]);
        subscriptionMutation = {
          type: MutationType.patchFunction,
          storeId: $id,
          events: debuggerEvents
        };
      } else {
        mergeReactiveObjects(pinia.state.value[$id], partialStateOrMutator);
        subscriptionMutation = {
          type: MutationType.patchObject,
          payload: partialStateOrMutator,
          storeId: $id,
          events: debuggerEvents
        };
      }
      const myListenerId = activeListener = Symbol();
      vue.nextTick().then(() => {
        if (activeListener === myListenerId) {
          isListening = true;
        }
      });
      isSyncListening = true;
      triggerSubscriptions(subscriptions, subscriptionMutation, pinia.state.value[$id]);
    }
    const $reset = isOptionsStore ? function $reset2() {
      const { state } = options;
      const newState = state ? state() : {};
      this.$patch(($state) => {
        assign($state, newState);
      });
    } : (
      /* istanbul ignore next */
      () => {
        throw new Error(`🍍: Store "${$id}" is built using the setup syntax and does not implement $reset().`);
      }
    );
    function $dispose() {
      scope.stop();
      subscriptions = [];
      actionSubscriptions = [];
      pinia._s.delete($id);
    }
    function wrapAction(name, action) {
      return function() {
        setActivePinia(pinia);
        const args = Array.from(arguments);
        const afterCallbackList = [];
        const onErrorCallbackList = [];
        function after(callback) {
          afterCallbackList.push(callback);
        }
        function onError(callback) {
          onErrorCallbackList.push(callback);
        }
        triggerSubscriptions(actionSubscriptions, {
          args,
          name,
          store,
          after,
          onError
        });
        let ret;
        try {
          ret = action.apply(this && this.$id === $id ? this : store, args);
        } catch (error) {
          triggerSubscriptions(onErrorCallbackList, error);
          throw error;
        }
        if (ret instanceof Promise) {
          return ret.then((value) => {
            triggerSubscriptions(afterCallbackList, value);
            return value;
          }).catch((error) => {
            triggerSubscriptions(onErrorCallbackList, error);
            return Promise.reject(error);
          });
        }
        triggerSubscriptions(afterCallbackList, ret);
        return ret;
      };
    }
    const _hmrPayload = /* @__PURE__ */ vue.markRaw({
      actions: {},
      getters: {},
      state: [],
      hotState
    });
    const partialStore = {
      _p: pinia,
      // _s: scope,
      $id,
      $onAction: addSubscription.bind(null, actionSubscriptions),
      $patch,
      $reset,
      $subscribe(callback, options2 = {}) {
        const removeSubscription = addSubscription(subscriptions, callback, options2.detached, () => stopWatcher());
        const stopWatcher = scope.run(() => vue.watch(() => pinia.state.value[$id], (state) => {
          if (options2.flush === "sync" ? isSyncListening : isListening) {
            callback({
              storeId: $id,
              type: MutationType.direct,
              events: debuggerEvents
            }, state);
          }
        }, assign({}, $subscribeOptions, options2)));
        return removeSubscription;
      },
      $dispose
    };
    const store = vue.reactive(assign(
      {
        _hmrPayload,
        _customProperties: vue.markRaw(/* @__PURE__ */ new Set())
        // devtools custom properties
      },
      partialStore
      // must be added later
      // setupStore
    ));
    pinia._s.set($id, store);
    const runWithContext = pinia._a && pinia._a.runWithContext || fallbackRunWithContext;
    const setupStore = runWithContext(() => pinia._e.run(() => (scope = vue.effectScope()).run(setup)));
    for (const key in setupStore) {
      const prop = setupStore[key];
      if (vue.isRef(prop) && !isComputed(prop) || vue.isReactive(prop)) {
        if (hot) {
          set(hotState.value, key, vue.toRef(setupStore, key));
        } else if (!isOptionsStore) {
          if (initialState && shouldHydrate(prop)) {
            if (vue.isRef(prop)) {
              prop.value = initialState[key];
            } else {
              mergeReactiveObjects(prop, initialState[key]);
            }
          }
          {
            pinia.state.value[$id][key] = prop;
          }
        }
        {
          _hmrPayload.state.push(key);
        }
      } else if (typeof prop === "function") {
        const actionValue = hot ? prop : wrapAction(key, prop);
        {
          setupStore[key] = actionValue;
        }
        {
          _hmrPayload.actions[key] = prop;
        }
        optionsForPlugin.actions[key] = prop;
      } else {
        if (isComputed(prop)) {
          _hmrPayload.getters[key] = isOptionsStore ? (
            // @ts-expect-error
            options.getters[key]
          ) : prop;
          if (IS_CLIENT) {
            const getters = setupStore._getters || // @ts-expect-error: same
            (setupStore._getters = vue.markRaw([]));
            getters.push(key);
          }
        }
      }
    }
    {
      assign(store, setupStore);
      assign(vue.toRaw(store), setupStore);
    }
    Object.defineProperty(store, "$state", {
      get: () => hot ? hotState.value : pinia.state.value[$id],
      set: (state) => {
        if (hot) {
          throw new Error("cannot set hotState");
        }
        $patch(($state) => {
          assign($state, state);
        });
      }
    });
    {
      store._hotUpdate = vue.markRaw((newStore) => {
        store._hotUpdating = true;
        newStore._hmrPayload.state.forEach((stateKey) => {
          if (stateKey in store.$state) {
            const newStateTarget = newStore.$state[stateKey];
            const oldStateSource = store.$state[stateKey];
            if (typeof newStateTarget === "object" && isPlainObject(newStateTarget) && isPlainObject(oldStateSource)) {
              patchObject(newStateTarget, oldStateSource);
            } else {
              newStore.$state[stateKey] = oldStateSource;
            }
          }
          set(store, stateKey, vue.toRef(newStore.$state, stateKey));
        });
        Object.keys(store.$state).forEach((stateKey) => {
          if (!(stateKey in newStore.$state)) {
            del(store, stateKey);
          }
        });
        isListening = false;
        isSyncListening = false;
        pinia.state.value[$id] = vue.toRef(newStore._hmrPayload, "hotState");
        isSyncListening = true;
        vue.nextTick().then(() => {
          isListening = true;
        });
        for (const actionName in newStore._hmrPayload.actions) {
          const action = newStore[actionName];
          set(store, actionName, wrapAction(actionName, action));
        }
        for (const getterName in newStore._hmrPayload.getters) {
          const getter = newStore._hmrPayload.getters[getterName];
          const getterValue = isOptionsStore ? (
            // special handling of options api
            vue.computed(() => {
              setActivePinia(pinia);
              return getter.call(store, store);
            })
          ) : getter;
          set(store, getterName, getterValue);
        }
        Object.keys(store._hmrPayload.getters).forEach((key) => {
          if (!(key in newStore._hmrPayload.getters)) {
            del(store, key);
          }
        });
        Object.keys(store._hmrPayload.actions).forEach((key) => {
          if (!(key in newStore._hmrPayload.actions)) {
            del(store, key);
          }
        });
        store._hmrPayload = newStore._hmrPayload;
        store._getters = newStore._getters;
        store._hotUpdating = false;
      });
    }
    if (USE_DEVTOOLS) {
      const nonEnumerable = {
        writable: true,
        configurable: true,
        // avoid warning on devtools trying to display this property
        enumerable: false
      };
      ["_p", "_hmrPayload", "_getters", "_customProperties"].forEach((p2) => {
        Object.defineProperty(store, p2, assign({ value: store[p2] }, nonEnumerable));
      });
    }
    pinia._p.forEach((extender) => {
      if (USE_DEVTOOLS) {
        const extensions = scope.run(() => extender({
          store,
          app: pinia._a,
          pinia,
          options: optionsForPlugin
        }));
        Object.keys(extensions || {}).forEach((key) => store._customProperties.add(key));
        assign(store, extensions);
      } else {
        assign(store, scope.run(() => extender({
          store,
          app: pinia._a,
          pinia,
          options: optionsForPlugin
        })));
      }
    });
    if (store.$state && typeof store.$state === "object" && typeof store.$state.constructor === "function" && !store.$state.constructor.toString().includes("[native code]")) {
      console.warn(`[🍍]: The "state" must be a plain object. It cannot be
	state: () => new MyClass()
Found in store "${store.$id}".`);
    }
    if (initialState && isOptionsStore && options.hydrate) {
      options.hydrate(store.$state, initialState);
    }
    isListening = true;
    isSyncListening = true;
    return store;
  }
  function defineStore(idOrOptions, setup, setupOptions) {
    let id2;
    let options;
    const isSetupStore = typeof setup === "function";
    if (typeof idOrOptions === "string") {
      id2 = idOrOptions;
      options = isSetupStore ? setupOptions : setup;
    } else {
      options = idOrOptions;
      id2 = idOrOptions.id;
      if (typeof id2 !== "string") {
        throw new Error(`[🍍]: "defineStore()" must be passed a store id as its first argument.`);
      }
    }
    function useStore(pinia, hot) {
      const hasContext = vue.hasInjectionContext();
      pinia = // in test mode, ignore the argument provided as we can always retrieve a
      // pinia instance with getActivePinia()
      pinia || (hasContext ? vue.inject(piniaSymbol, null) : null);
      if (pinia)
        setActivePinia(pinia);
      if (!activePinia) {
        throw new Error(`[🍍]: "getActivePinia()" was called but there was no active Pinia. Are you trying to use a store before calling "app.use(pinia)"?
See https://pinia.vuejs.org/core-concepts/outside-component-usage.html for help.
This will fail in production.`);
      }
      pinia = activePinia;
      if (!pinia._s.has(id2)) {
        if (isSetupStore) {
          createSetupStore(id2, setup, options, pinia);
        } else {
          createOptionsStore(id2, options, pinia);
        }
        {
          useStore._pinia = pinia;
        }
      }
      const store = pinia._s.get(id2);
      if (hot) {
        const hotId = "__hot:" + id2;
        const newStore = isSetupStore ? createSetupStore(hotId, setup, options, pinia, true) : createOptionsStore(hotId, assign({}, options), pinia, true);
        hot._hotUpdate(newStore);
        delete pinia.state.value[hotId];
        pinia._s.delete(hotId);
      }
      if (IS_CLIENT) {
        const currentInstance = vue.getCurrentInstance();
        if (currentInstance && currentInstance.proxy && // avoid adding stores that are just built for hot module replacement
        !hot) {
          const vm = currentInstance.proxy;
          const cache = "_pStores" in vm ? vm._pStores : vm._pStores = {};
          cache[id2] = store;
        }
      }
      return store;
    }
    useStore.$id = id2;
    return useStore;
  }
  const systemInfo$1 = uni.getSystemInfoSync();
  const useGlobalDataStore = defineStore("global", {
    state: () => ({
      statusBarHeight: systemInfo$1.statusBarHeight + 50 || 0,
      token: uni.getStorageSync("token") || "",
      // 从本地存储初始化Token
      userInfo: uni.getStorageSync("userInfo") || "",
      // 从本地存储初始化Token
      mallSwitch: uni.getStorageSync("mallSwitch") || ""
      // 商城状态
    }),
    actions: {
      // 设置Token并保存到本地存储
      setToken(token) {
        this.token = token;
        uni.setStorageSync("token", token);
      },
      setMallSwitch(mallSwitch) {
        this.mallSwitch = mallSwitch;
        uni.setStorageSync("mallSwitch", mallSwitch);
      },
      // 清除Token（用于登出）
      clearToken() {
        this.token = "";
        uni.removeStorageSync("token");
      },
      setUserInfo(userInfo) {
        this.userInfo = userInfo;
        uni.setStorageSync("userInfo", userInfo);
      }
    },
    getters: {
      // 获取Token（可用于计算属性或组件）
      getToken: (state) => state.token,
      getUserInfo: (state) => state.userInfo,
      getMallSwitch: (state) => state.mallSwitch,
      // 判断是否已登录
      isLoggedIn: (state) => !!state.token
    }
  });
  var timJs = { exports: {} };
  (function(module2, exports2) {
    !function(e2, t2) {
      module2.exports = t2();
    }(commonjsGlobal, function() {
      function e2(e3, t3) {
        var n3 = Object.keys(e3);
        if (Object.getOwnPropertySymbols) {
          var o3 = Object.getOwnPropertySymbols(e3);
          t3 && (o3 = o3.filter(function(t4) {
            return Object.getOwnPropertyDescriptor(e3, t4).enumerable;
          })), n3.push.apply(n3, o3);
        }
        return n3;
      }
      function t2(t3) {
        for (var n3 = 1; n3 < arguments.length; n3++) {
          var o3 = null != arguments[n3] ? arguments[n3] : {};
          n3 % 2 ? e2(Object(o3), true).forEach(function(e3) {
            s2(t3, e3, o3[e3]);
          }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t3, Object.getOwnPropertyDescriptors(o3)) : e2(Object(o3)).forEach(function(e3) {
            Object.defineProperty(t3, e3, Object.getOwnPropertyDescriptor(o3, e3));
          });
        }
        return t3;
      }
      function n2(e3) {
        return (n2 = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e4) {
          return typeof e4;
        } : function(e4) {
          return e4 && "function" == typeof Symbol && e4.constructor === Symbol && e4 !== Symbol.prototype ? "symbol" : typeof e4;
        })(e3);
      }
      function o2(e3, t3) {
        if (!(e3 instanceof t3))
          throw new TypeError("Cannot call a class as a function");
      }
      function r2(e3, t3) {
        for (var n3 = 0; n3 < t3.length; n3++) {
          var o3 = t3[n3];
          o3.enumerable = o3.enumerable || false, o3.configurable = true, "value" in o3 && (o3.writable = true), Object.defineProperty(e3, o3.key, o3);
        }
      }
      function a2(e3, t3, n3) {
        return t3 && r2(e3.prototype, t3), n3 && r2(e3, n3), Object.defineProperty(e3, "prototype", { writable: false }), e3;
      }
      function s2(e3, t3, n3) {
        return t3 in e3 ? Object.defineProperty(e3, t3, { value: n3, enumerable: true, configurable: true, writable: true }) : e3[t3] = n3, e3;
      }
      function i2(e3, t3) {
        if ("function" != typeof t3 && null !== t3)
          throw new TypeError("Super expression must either be null or a function");
        e3.prototype = Object.create(t3 && t3.prototype, { constructor: { value: e3, writable: true, configurable: true } }), Object.defineProperty(e3, "prototype", { writable: false }), t3 && u2(e3, t3);
      }
      function c2(e3) {
        return (c2 = Object.setPrototypeOf ? Object.getPrototypeOf : function(e4) {
          return e4.__proto__ || Object.getPrototypeOf(e4);
        })(e3);
      }
      function u2(e3, t3) {
        return (u2 = Object.setPrototypeOf || function(e4, t4) {
          return e4.__proto__ = t4, e4;
        })(e3, t3);
      }
      function l2() {
        if ("undefined" == typeof Reflect || !Reflect.construct)
          return false;
        if (Reflect.construct.sham)
          return false;
        if ("function" == typeof Proxy)
          return true;
        try {
          return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
          })), true;
        } catch (e3) {
          return false;
        }
      }
      function d2(e3, t3, n3) {
        return (d2 = l2() ? Reflect.construct : function(e4, t4, n4) {
          var o3 = [null];
          o3.push.apply(o3, t4);
          var r3 = new (Function.bind.apply(e4, o3))();
          return n4 && u2(r3, n4.prototype), r3;
        }).apply(null, arguments);
      }
      function p2(e3) {
        var t3 = "function" == typeof Map ? /* @__PURE__ */ new Map() : void 0;
        return (p2 = function(e4) {
          if (null === e4 || (n3 = e4, -1 === Function.toString.call(n3).indexOf("[native code]")))
            return e4;
          var n3;
          if ("function" != typeof e4)
            throw new TypeError("Super expression must either be null or a function");
          if (void 0 !== t3) {
            if (t3.has(e4))
              return t3.get(e4);
            t3.set(e4, o3);
          }
          function o3() {
            return d2(e4, arguments, c2(this).constructor);
          }
          return o3.prototype = Object.create(e4.prototype, { constructor: { value: o3, enumerable: false, writable: true, configurable: true } }), u2(o3, e4);
        })(e3);
      }
      function g2(e3, t3) {
        if (null == e3)
          return {};
        var n3, o3, r3 = function(e4, t4) {
          if (null == e4)
            return {};
          var n4, o4, r4 = {}, a4 = Object.keys(e4);
          for (o4 = 0; o4 < a4.length; o4++)
            n4 = a4[o4], t4.indexOf(n4) >= 0 || (r4[n4] = e4[n4]);
          return r4;
        }(e3, t3);
        if (Object.getOwnPropertySymbols) {
          var a3 = Object.getOwnPropertySymbols(e3);
          for (o3 = 0; o3 < a3.length; o3++)
            n3 = a3[o3], t3.indexOf(n3) >= 0 || Object.prototype.propertyIsEnumerable.call(e3, n3) && (r3[n3] = e3[n3]);
        }
        return r3;
      }
      function h2(e3) {
        if (void 0 === e3)
          throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return e3;
      }
      function _2(e3, t3) {
        if (t3 && ("object" == typeof t3 || "function" == typeof t3))
          return t3;
        if (void 0 !== t3)
          throw new TypeError("Derived constructors may only return object or undefined");
        return h2(e3);
      }
      function f2(e3) {
        var t3 = l2();
        return function() {
          var n3, o3 = c2(e3);
          if (t3) {
            var r3 = c2(this).constructor;
            n3 = Reflect.construct(o3, arguments, r3);
          } else
            n3 = o3.apply(this, arguments);
          return _2(this, n3);
        };
      }
      function m2(e3, t3) {
        return M2(e3) || function(e4, t4) {
          var n3 = null == e4 ? null : "undefined" != typeof Symbol && e4[Symbol.iterator] || e4["@@iterator"];
          if (null == n3)
            return;
          var o3, r3, a3 = [], s3 = true, i3 = false;
          try {
            for (n3 = n3.call(e4); !(s3 = (o3 = n3.next()).done) && (a3.push(o3.value), !t4 || a3.length !== t4); s3 = true)
              ;
          } catch (c3) {
            i3 = true, r3 = c3;
          } finally {
            try {
              s3 || null == n3.return || n3.return();
            } finally {
              if (i3)
                throw r3;
            }
          }
          return a3;
        }(e3, t3) || I2(e3, t3) || T2();
      }
      function v2(e3) {
        return function(e4) {
          if (Array.isArray(e4))
            return E2(e4);
        }(e3) || y2(e3) || I2(e3) || function() {
          throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
        }();
      }
      function M2(e3) {
        if (Array.isArray(e3))
          return e3;
      }
      function y2(e3) {
        if ("undefined" != typeof Symbol && null != e3[Symbol.iterator] || null != e3["@@iterator"])
          return Array.from(e3);
      }
      function I2(e3, t3) {
        if (e3) {
          if ("string" == typeof e3)
            return E2(e3, t3);
          var n3 = Object.prototype.toString.call(e3).slice(8, -1);
          return "Object" === n3 && e3.constructor && (n3 = e3.constructor.name), "Map" === n3 || "Set" === n3 ? Array.from(e3) : "Arguments" === n3 || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n3) ? E2(e3, t3) : void 0;
        }
      }
      function E2(e3, t3) {
        (null == t3 || t3 > e3.length) && (t3 = e3.length);
        for (var n3 = 0, o3 = new Array(t3); n3 < t3; n3++)
          o3[n3] = e3[n3];
        return o3;
      }
      function T2() {
        throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
      }
      function S2(e3, t3) {
        var n3 = "undefined" != typeof Symbol && e3[Symbol.iterator] || e3["@@iterator"];
        if (!n3) {
          if (Array.isArray(e3) || (n3 = I2(e3)) || t3 && e3 && "number" == typeof e3.length) {
            n3 && (e3 = n3);
            var o3 = 0, r3 = function() {
            };
            return { s: r3, n: function() {
              return o3 >= e3.length ? { done: true } : { done: false, value: e3[o3++] };
            }, e: function(e4) {
              throw e4;
            }, f: r3 };
          }
          throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
        }
        var a3, s3 = true, i3 = false;
        return { s: function() {
          n3 = n3.call(e3);
        }, n: function() {
          var e4 = n3.next();
          return s3 = e4.done, e4;
        }, e: function(e4) {
          i3 = true, a3 = e4;
        }, f: function() {
          try {
            s3 || null == n3.return || n3.return();
          } finally {
            if (i3)
              throw a3;
          }
        } };
      }
      var C2 = "undefined" != typeof globalThis ? globalThis : "undefined" != typeof window ? window : "undefined" != typeof commonjsGlobal ? commonjsGlobal : "undefined" != typeof self ? self : {};
      function A2(e3, t3) {
        return e3(t3 = { exports: {} }, t3.exports), t3.exports;
      }
      var D2, N2, O2 = function(e3) {
        return e3 && e3.Math == Math && e3;
      }, R2 = O2("object" == typeof globalThis && globalThis) || O2("object" == typeof window && window) || O2("object" == typeof self && self) || O2("object" == typeof C2 && C2) || /* @__PURE__ */ function() {
        return this;
      }() || Function("return this")(), L2 = function(e3) {
        try {
          return !!e3();
        } catch (t3) {
          return true;
        }
      }, k = !L2(function() {
        return 7 != Object.defineProperty({}, 1, { get: function() {
          return 7;
        } })[1];
      }), P2 = !L2(function() {
        var e3 = (function() {
        }).bind();
        return "function" != typeof e3 || e3.hasOwnProperty("prototype");
      }), G2 = Function.prototype.call, b2 = P2 ? G2.bind(G2) : function() {
        return G2.apply(G2, arguments);
      }, w2 = {}.propertyIsEnumerable, U2 = Object.getOwnPropertyDescriptor, F2 = { f: U2 && !w2.call({ 1: 2 }, 1) ? function(e3) {
        var t3 = U2(this, e3);
        return !!t3 && t3.enumerable;
      } : w2 }, q2 = function(e3, t3) {
        return { enumerable: !(1 & e3), configurable: !(2 & e3), writable: !(4 & e3), value: t3 };
      }, V2 = Function.prototype, x = V2.bind, K2 = V2.call, H2 = P2 && x.bind(K2, K2), B2 = P2 ? function(e3) {
        return e3 && H2(e3);
      } : function(e3) {
        return e3 && function() {
          return K2.apply(e3, arguments);
        };
      }, j2 = B2({}.toString), W2 = B2("".slice), Y2 = function(e3) {
        return W2(j2(e3), 8, -1);
      }, $2 = R2.Object, z2 = B2("".split), J2 = L2(function() {
        return !$2("z").propertyIsEnumerable(0);
      }) ? function(e3) {
        return "String" == Y2(e3) ? z2(e3, "") : $2(e3);
      } : $2, X2 = R2.TypeError, Q2 = function(e3) {
        if (null == e3)
          throw X2("Can't call method on " + e3);
        return e3;
      }, Z2 = function(e3) {
        return J2(Q2(e3));
      }, ee2 = function(e3) {
        return "function" == typeof e3;
      }, te2 = function(e3) {
        return "object" == typeof e3 ? null !== e3 : ee2(e3);
      }, ne2 = function(e3) {
        return ee2(e3) ? e3 : void 0;
      }, oe2 = function(e3, t3) {
        return arguments.length < 2 ? ne2(R2[e3]) : R2[e3] && R2[e3][t3];
      }, re2 = B2({}.isPrototypeOf), ae2 = oe2("navigator", "userAgent") || "", se2 = R2.process, ie2 = R2.Deno, ce2 = se2 && se2.versions || ie2 && ie2.version, ue2 = ce2 && ce2.v8;
      ue2 && (N2 = (D2 = ue2.split("."))[0] > 0 && D2[0] < 4 ? 1 : +(D2[0] + D2[1])), !N2 && ae2 && (!(D2 = ae2.match(/Edge\/(\d+)/)) || D2[1] >= 74) && (D2 = ae2.match(/Chrome\/(\d+)/)) && (N2 = +D2[1]);
      var le2 = N2, de2 = !!Object.getOwnPropertySymbols && !L2(function() {
        var e3 = Symbol();
        return !String(e3) || !(Object(e3) instanceof Symbol) || !Symbol.sham && le2 && le2 < 41;
      }), pe2 = de2 && !Symbol.sham && "symbol" == typeof Symbol.iterator, ge2 = R2.Object, he2 = pe2 ? function(e3) {
        return "symbol" == typeof e3;
      } : function(e3) {
        var t3 = oe2("Symbol");
        return ee2(t3) && re2(t3.prototype, ge2(e3));
      }, _e2 = R2.String, fe2 = function(e3) {
        try {
          return _e2(e3);
        } catch (t3) {
          return "Object";
        }
      }, me2 = R2.TypeError, ve2 = function(e3) {
        if (ee2(e3))
          return e3;
        throw me2(fe2(e3) + " is not a function");
      }, Me2 = function(e3, t3) {
        var n3 = e3[t3];
        return null == n3 ? void 0 : ve2(n3);
      }, ye2 = R2.TypeError, Ie2 = Object.defineProperty, Ee2 = function(e3, t3) {
        try {
          Ie2(R2, e3, { value: t3, configurable: true, writable: true });
        } catch (n3) {
          R2[e3] = t3;
        }
        return t3;
      }, Te2 = R2["__core-js_shared__"] || Ee2("__core-js_shared__", {}), Se2 = A2(function(e3) {
        (e3.exports = function(e4, t3) {
          return Te2[e4] || (Te2[e4] = void 0 !== t3 ? t3 : {});
        })("versions", []).push({ version: "3.21.0", mode: "global", copyright: "© 2014-2022 Denis Pushkarev (zloirock.ru)", license: "https://github.com/zloirock/core-js/blob/v3.21.0/LICENSE", source: "https://github.com/zloirock/core-js" });
      }), Ce2 = R2.Object, Ae2 = function(e3) {
        return Ce2(Q2(e3));
      }, De2 = B2({}.hasOwnProperty), Ne2 = Object.hasOwn || function(e3, t3) {
        return De2(Ae2(e3), t3);
      }, Oe2 = 0, Re2 = Math.random(), Le2 = B2(1 .toString), ke2 = function(e3) {
        return "Symbol(" + (void 0 === e3 ? "" : e3) + ")_" + Le2(++Oe2 + Re2, 36);
      }, Pe2 = Se2("wks"), Ge2 = R2.Symbol, be2 = Ge2 && Ge2.for, we2 = pe2 ? Ge2 : Ge2 && Ge2.withoutSetter || ke2, Ue2 = function(e3) {
        if (!Ne2(Pe2, e3) || !de2 && "string" != typeof Pe2[e3]) {
          var t3 = "Symbol." + e3;
          de2 && Ne2(Ge2, e3) ? Pe2[e3] = Ge2[e3] : Pe2[e3] = pe2 && be2 ? be2(t3) : we2(t3);
        }
        return Pe2[e3];
      }, Fe2 = R2.TypeError, qe2 = Ue2("toPrimitive"), Ve2 = function(e3, t3) {
        if (!te2(e3) || he2(e3))
          return e3;
        var n3, o3 = Me2(e3, qe2);
        if (o3) {
          if (void 0 === t3 && (t3 = "default"), n3 = b2(o3, e3, t3), !te2(n3) || he2(n3))
            return n3;
          throw Fe2("Can't convert object to primitive value");
        }
        return void 0 === t3 && (t3 = "number"), function(e4, t4) {
          var n4, o4;
          if ("string" === t4 && ee2(n4 = e4.toString) && !te2(o4 = b2(n4, e4)))
            return o4;
          if (ee2(n4 = e4.valueOf) && !te2(o4 = b2(n4, e4)))
            return o4;
          if ("string" !== t4 && ee2(n4 = e4.toString) && !te2(o4 = b2(n4, e4)))
            return o4;
          throw ye2("Can't convert object to primitive value");
        }(e3, t3);
      }, xe2 = function(e3) {
        var t3 = Ve2(e3, "string");
        return he2(t3) ? t3 : t3 + "";
      }, Ke2 = R2.document, He2 = te2(Ke2) && te2(Ke2.createElement), Be2 = function(e3) {
        return He2 ? Ke2.createElement(e3) : {};
      }, je2 = !k && !L2(function() {
        return 7 != Object.defineProperty(Be2("div"), "a", { get: function() {
          return 7;
        } }).a;
      }), We2 = Object.getOwnPropertyDescriptor, Ye2 = { f: k ? We2 : function(e3, t3) {
        if (e3 = Z2(e3), t3 = xe2(t3), je2)
          try {
            return We2(e3, t3);
          } catch (n3) {
          }
        if (Ne2(e3, t3))
          return q2(!b2(F2.f, e3, t3), e3[t3]);
      } }, $e2 = k && L2(function() {
        return 42 != Object.defineProperty(function() {
        }, "prototype", { value: 42, writable: false }).prototype;
      }), ze2 = R2.String, Je2 = R2.TypeError, Xe2 = function(e3) {
        if (te2(e3))
          return e3;
        throw Je2(ze2(e3) + " is not an object");
      }, Qe2 = R2.TypeError, Ze2 = Object.defineProperty, et2 = Object.getOwnPropertyDescriptor, nt2 = { f: k ? $e2 ? function(e3, t3, n3) {
        if (Xe2(e3), t3 = xe2(t3), Xe2(n3), "function" == typeof e3 && "prototype" === t3 && "value" in n3 && "writable" in n3 && !n3.writable) {
          var o3 = et2(e3, t3);
          o3 && o3.writable && (e3[t3] = n3.value, n3 = { configurable: "configurable" in n3 ? n3.configurable : o3.configurable, enumerable: "enumerable" in n3 ? n3.enumerable : o3.enumerable, writable: false });
        }
        return Ze2(e3, t3, n3);
      } : Ze2 : function(e3, t3, n3) {
        if (Xe2(e3), t3 = xe2(t3), Xe2(n3), je2)
          try {
            return Ze2(e3, t3, n3);
          } catch (o3) {
          }
        if ("get" in n3 || "set" in n3)
          throw Qe2("Accessors not supported");
        return "value" in n3 && (e3[t3] = n3.value), e3;
      } }, ot2 = k ? function(e3, t3, n3) {
        return nt2.f(e3, t3, q2(1, n3));
      } : function(e3, t3, n3) {
        return e3[t3] = n3, e3;
      }, rt2 = B2(Function.toString);
      ee2(Te2.inspectSource) || (Te2.inspectSource = function(e3) {
        return rt2(e3);
      });
      var at2, st2, it2, ct2 = Te2.inspectSource, ut2 = R2.WeakMap, lt2 = ee2(ut2) && /native code/.test(ct2(ut2)), dt2 = Se2("keys"), pt2 = function(e3) {
        return dt2[e3] || (dt2[e3] = ke2(e3));
      }, gt2 = {}, ht2 = R2.TypeError, _t2 = R2.WeakMap;
      if (lt2 || Te2.state) {
        var ft2 = Te2.state || (Te2.state = new _t2()), mt2 = B2(ft2.get), vt2 = B2(ft2.has), Mt2 = B2(ft2.set);
        at2 = function(e3, t3) {
          if (vt2(ft2, e3))
            throw new ht2("Object already initialized");
          return t3.facade = e3, Mt2(ft2, e3, t3), t3;
        }, st2 = function(e3) {
          return mt2(ft2, e3) || {};
        }, it2 = function(e3) {
          return vt2(ft2, e3);
        };
      } else {
        var yt2 = pt2("state");
        gt2[yt2] = true, at2 = function(e3, t3) {
          if (Ne2(e3, yt2))
            throw new ht2("Object already initialized");
          return t3.facade = e3, ot2(e3, yt2, t3), t3;
        }, st2 = function(e3) {
          return Ne2(e3, yt2) ? e3[yt2] : {};
        }, it2 = function(e3) {
          return Ne2(e3, yt2);
        };
      }
      var It2 = { set: at2, get: st2, has: it2, enforce: function(e3) {
        return it2(e3) ? st2(e3) : at2(e3, {});
      }, getterFor: function(e3) {
        return function(t3) {
          var n3;
          if (!te2(t3) || (n3 = st2(t3)).type !== e3)
            throw ht2("Incompatible receiver, " + e3 + " required");
          return n3;
        };
      } }, Et2 = Function.prototype, Tt2 = k && Object.getOwnPropertyDescriptor, St2 = Ne2(Et2, "name"), Ct2 = { EXISTS: St2, PROPER: St2 && "something" === (function() {
      }).name, CONFIGURABLE: St2 && (!k || k && Tt2(Et2, "name").configurable) }, At2 = A2(function(e3) {
        var t3 = Ct2.CONFIGURABLE, n3 = It2.get, o3 = It2.enforce, r3 = String(String).split("String");
        (e3.exports = function(e4, n4, a3, s3) {
          var i3, c3 = !!s3 && !!s3.unsafe, u3 = !!s3 && !!s3.enumerable, l3 = !!s3 && !!s3.noTargetGet, d3 = s3 && void 0 !== s3.name ? s3.name : n4;
          ee2(a3) && ("Symbol(" === String(d3).slice(0, 7) && (d3 = "[" + String(d3).replace(/^Symbol\(([^)]*)\)/, "$1") + "]"), (!Ne2(a3, "name") || t3 && a3.name !== d3) && ot2(a3, "name", d3), (i3 = o3(a3)).source || (i3.source = r3.join("string" == typeof d3 ? d3 : ""))), e4 !== R2 ? (c3 ? !l3 && e4[n4] && (u3 = true) : delete e4[n4], u3 ? e4[n4] = a3 : ot2(e4, n4, a3)) : u3 ? e4[n4] = a3 : Ee2(n4, a3);
        })(Function.prototype, "toString", function() {
          return ee2(this) && n3(this).source || ct2(this);
        });
      }), Dt2 = Math.ceil, Nt2 = Math.floor, Ot2 = function(e3) {
        var t3 = +e3;
        return t3 != t3 || 0 === t3 ? 0 : (t3 > 0 ? Nt2 : Dt2)(t3);
      }, Rt2 = Math.max, Lt2 = Math.min, kt2 = function(e3, t3) {
        var n3 = Ot2(e3);
        return n3 < 0 ? Rt2(n3 + t3, 0) : Lt2(n3, t3);
      }, Pt2 = Math.min, Gt2 = function(e3) {
        return e3 > 0 ? Pt2(Ot2(e3), 9007199254740991) : 0;
      }, bt2 = function(e3) {
        return Gt2(e3.length);
      }, wt2 = function(e3) {
        return function(t3, n3, o3) {
          var r3, a3 = Z2(t3), s3 = bt2(a3), i3 = kt2(o3, s3);
          if (e3 && n3 != n3) {
            for (; s3 > i3; )
              if ((r3 = a3[i3++]) != r3)
                return true;
          } else
            for (; s3 > i3; i3++)
              if ((e3 || i3 in a3) && a3[i3] === n3)
                return e3 || i3 || 0;
          return !e3 && -1;
        };
      }, Ut2 = { includes: wt2(true), indexOf: wt2(false) }, Ft2 = Ut2.indexOf, qt2 = B2([].push), Vt2 = function(e3, t3) {
        var n3, o3 = Z2(e3), r3 = 0, a3 = [];
        for (n3 in o3)
          !Ne2(gt2, n3) && Ne2(o3, n3) && qt2(a3, n3);
        for (; t3.length > r3; )
          Ne2(o3, n3 = t3[r3++]) && (~Ft2(a3, n3) || qt2(a3, n3));
        return a3;
      }, xt2 = ["constructor", "hasOwnProperty", "isPrototypeOf", "propertyIsEnumerable", "toLocaleString", "toString", "valueOf"], Kt2 = xt2.concat("length", "prototype"), Ht2 = { f: Object.getOwnPropertyNames || function(e3) {
        return Vt2(e3, Kt2);
      } }, Bt2 = { f: Object.getOwnPropertySymbols }, jt2 = B2([].concat), Wt2 = oe2("Reflect", "ownKeys") || function(e3) {
        var t3 = Ht2.f(Xe2(e3)), n3 = Bt2.f;
        return n3 ? jt2(t3, n3(e3)) : t3;
      }, Yt2 = function(e3, t3, n3) {
        for (var o3 = Wt2(t3), r3 = nt2.f, a3 = Ye2.f, s3 = 0; s3 < o3.length; s3++) {
          var i3 = o3[s3];
          Ne2(e3, i3) || n3 && Ne2(n3, i3) || r3(e3, i3, a3(t3, i3));
        }
      }, $t2 = /#|\.prototype\./, zt2 = function(e3, t3) {
        var n3 = Xt2[Jt2(e3)];
        return n3 == Zt2 || n3 != Qt2 && (ee2(t3) ? L2(t3) : !!t3);
      }, Jt2 = zt2.normalize = function(e3) {
        return String(e3).replace($t2, ".").toLowerCase();
      }, Xt2 = zt2.data = {}, Qt2 = zt2.NATIVE = "N", Zt2 = zt2.POLYFILL = "P", en2 = zt2, tn = Ye2.f, nn2 = function(e3, t3) {
        var n3, o3, r3, a3, s3, i3 = e3.target, c3 = e3.global, u3 = e3.stat;
        if (n3 = c3 ? R2 : u3 ? R2[i3] || Ee2(i3, {}) : (R2[i3] || {}).prototype)
          for (o3 in t3) {
            if (a3 = t3[o3], r3 = e3.noTargetGet ? (s3 = tn(n3, o3)) && s3.value : n3[o3], !en2(c3 ? o3 : i3 + (u3 ? "." : "#") + o3, e3.forced) && void 0 !== r3) {
              if (typeof a3 == typeof r3)
                continue;
              Yt2(a3, r3);
            }
            (e3.sham || r3 && r3.sham) && ot2(a3, "sham", true), At2(n3, o3, a3, e3);
          }
      }, on = {};
      on[Ue2("toStringTag")] = "z";
      var rn = "[object z]" === String(on), an = Ue2("toStringTag"), sn = R2.Object, cn = "Arguments" == Y2(/* @__PURE__ */ function() {
        return arguments;
      }()), un = rn ? Y2 : function(e3) {
        var t3, n3, o3;
        return void 0 === e3 ? "Undefined" : null === e3 ? "Null" : "string" == typeof (n3 = function(e4, t4) {
          try {
            return e4[t4];
          } catch (n4) {
          }
        }(t3 = sn(e3), an)) ? n3 : cn ? Y2(t3) : "Object" == (o3 = Y2(t3)) && ee2(t3.callee) ? "Arguments" : o3;
      }, ln = R2.String, dn = function(e3) {
        if ("Symbol" === un(e3))
          throw TypeError("Cannot convert a Symbol value to a string");
        return ln(e3);
      }, pn = "	\n\v\f\r                　\u2028\u2029\uFEFF", gn = B2("".replace), hn = "[" + pn + "]", _n = RegExp("^" + hn + hn + "*"), fn = RegExp(hn + hn + "*$"), mn = function(e3) {
        return function(t3) {
          var n3 = dn(Q2(t3));
          return 1 & e3 && (n3 = gn(n3, _n, "")), 2 & e3 && (n3 = gn(n3, fn, "")), n3;
        };
      }, vn = { start: mn(1), end: mn(2), trim: mn(3) }, Mn = vn.trim, yn = R2.parseInt, In = R2.Symbol, En = In && In.iterator, Tn = /^[+-]?0x/i, Sn = B2(Tn.exec), Cn = 8 !== yn(pn + "08") || 22 !== yn(pn + "0x16") || En && !L2(function() {
        yn(Object(En));
      }) ? function(e3, t3) {
        var n3 = Mn(dn(e3));
        return yn(n3, t3 >>> 0 || (Sn(Tn, n3) ? 16 : 10));
      } : yn;
      nn2({ global: true, forced: parseInt != Cn }, { parseInt: Cn });
      var An, Dn = Object.keys || function(e3) {
        return Vt2(e3, xt2);
      }, Nn = { f: k && !$e2 ? Object.defineProperties : function(e3, t3) {
        Xe2(e3);
        for (var n3, o3 = Z2(t3), r3 = Dn(t3), a3 = r3.length, s3 = 0; a3 > s3; )
          nt2.f(e3, n3 = r3[s3++], o3[n3]);
        return e3;
      } }, On = oe2("document", "documentElement"), Rn = pt2("IE_PROTO"), Ln = function() {
      }, kn = function(e3) {
        return "<script>" + e3 + "<\/script>";
      }, Pn = function(e3) {
        e3.write(kn("")), e3.close();
        var t3 = e3.parentWindow.Object;
        return e3 = null, t3;
      }, Gn2 = function() {
        try {
          An = new ActiveXObject("htmlfile");
        } catch (o3) {
        }
        var e3, t3;
        Gn2 = "undefined" != typeof document ? document.domain && An ? Pn(An) : ((t3 = Be2("iframe")).style.display = "none", On.appendChild(t3), t3.src = String("javascript:"), (e3 = t3.contentWindow.document).open(), e3.write(kn("document.F=Object")), e3.close(), e3.F) : Pn(An);
        for (var n3 = xt2.length; n3--; )
          delete Gn2.prototype[xt2[n3]];
        return Gn2();
      };
      gt2[Rn] = true;
      var bn = Object.create || function(e3, t3) {
        var n3;
        return null !== e3 ? (Ln.prototype = Xe2(e3), n3 = new Ln(), Ln.prototype = null, n3[Rn] = e3) : n3 = Gn2(), void 0 === t3 ? n3 : Nn.f(n3, t3);
      };
      nn2({ target: "Object", stat: true, sham: !k }, { create: bn });
      var wn = B2(B2.bind), Un = function(e3, t3) {
        return ve2(e3), void 0 === t3 ? e3 : P2 ? wn(e3, t3) : function() {
          return e3.apply(t3, arguments);
        };
      }, Fn = Array.isArray || function(e3) {
        return "Array" == Y2(e3);
      }, qn = function() {
      }, Vn2 = [], xn = oe2("Reflect", "construct"), Kn2 = /^\s*(?:class|function)\b/, Hn2 = B2(Kn2.exec), Bn = !Kn2.exec(qn), jn = function(e3) {
        if (!ee2(e3))
          return false;
        try {
          return xn(qn, Vn2, e3), true;
        } catch (t3) {
          return false;
        }
      }, Wn = function(e3) {
        if (!ee2(e3))
          return false;
        switch (un(e3)) {
          case "AsyncFunction":
          case "GeneratorFunction":
          case "AsyncGeneratorFunction":
            return false;
        }
        try {
          return Bn || !!Hn2(Kn2, ct2(e3));
        } catch (t3) {
          return true;
        }
      };
      Wn.sham = true;
      var Yn2 = !xn || L2(function() {
        var e3;
        return jn(jn.call) || !jn(Object) || !jn(function() {
          e3 = true;
        }) || e3;
      }) ? Wn : jn, $n = Ue2("species"), zn2 = R2.Array, Jn2 = function(e3, t3) {
        return new (function(e4) {
          var t4;
          return Fn(e4) && (t4 = e4.constructor, (Yn2(t4) && (t4 === zn2 || Fn(t4.prototype)) || te2(t4) && null === (t4 = t4[$n])) && (t4 = void 0)), void 0 === t4 ? zn2 : t4;
        }(e3))(0 === t3 ? 0 : t3);
      }, Xn2 = B2([].push), Qn2 = function(e3) {
        var t3 = 1 == e3, n3 = 2 == e3, o3 = 3 == e3, r3 = 4 == e3, a3 = 6 == e3, s3 = 7 == e3, i3 = 5 == e3 || a3;
        return function(c3, u3, l3, d3) {
          for (var p3, g3, h3 = Ae2(c3), _3 = J2(h3), f3 = Un(u3, l3), m3 = bt2(_3), v3 = 0, M3 = d3 || Jn2, y3 = t3 ? M3(c3, m3) : n3 || s3 ? M3(c3, 0) : void 0; m3 > v3; v3++)
            if ((i3 || v3 in _3) && (g3 = f3(p3 = _3[v3], v3, h3), e3))
              if (t3)
                y3[v3] = g3;
              else if (g3)
                switch (e3) {
                  case 3:
                    return true;
                  case 5:
                    return p3;
                  case 6:
                    return v3;
                  case 2:
                    Xn2(y3, p3);
                }
              else
                switch (e3) {
                  case 4:
                    return false;
                  case 7:
                    Xn2(y3, p3);
                }
          return a3 ? -1 : o3 || r3 ? r3 : y3;
        };
      }, Zn2 = { forEach: Qn2(0), map: Qn2(1), filter: Qn2(2), some: Qn2(3), every: Qn2(4), find: Qn2(5), findIndex: Qn2(6), filterReject: Qn2(7) }, eo = function(e3, t3) {
        var n3 = [][e3];
        return !!n3 && L2(function() {
          n3.call(null, t3 || function() {
            throw 1;
          }, 1);
        });
      }, to = Zn2.forEach, no = eo("forEach") ? [].forEach : function(e3) {
        return to(this, e3, arguments.length > 1 ? arguments[1] : void 0);
      };
      nn2({ target: "Array", proto: true, forced: [].forEach != no }, { forEach: no });
      var oo = rn ? {}.toString : function() {
        return "[object " + un(this) + "]";
      };
      rn || At2(Object.prototype, "toString", oo, { unsafe: true });
      var ro = { CSSRuleList: 0, CSSStyleDeclaration: 0, CSSValueList: 0, ClientRectList: 0, DOMRectList: 0, DOMStringList: 0, DOMTokenList: 1, DataTransferItemList: 0, FileList: 0, HTMLAllCollection: 0, HTMLCollection: 0, HTMLFormElement: 0, HTMLSelectElement: 0, MediaList: 0, MimeTypeArray: 0, NamedNodeMap: 0, NodeList: 1, PaintRequestList: 0, Plugin: 0, PluginArray: 0, SVGLengthList: 0, SVGNumberList: 0, SVGPathSegList: 0, SVGPointList: 0, SVGStringList: 0, SVGTransformList: 0, SourceBufferList: 0, StyleSheetList: 0, TextTrackCueList: 0, TextTrackList: 0, TouchList: 0 }, ao = Be2("span").classList, so = ao && ao.constructor && ao.constructor.prototype, io = so === Object.prototype ? void 0 : so, co = function(e3) {
        if (e3 && e3.forEach !== no)
          try {
            ot2(e3, "forEach", no);
          } catch (t3) {
            e3.forEach = no;
          }
      };
      for (var uo in ro)
        ro[uo] && co(R2[uo] && R2[uo].prototype);
      co(io);
      var lo = L2(function() {
        Dn(1);
      });
      nn2({ target: "Object", stat: true, forced: lo }, { keys: function(e3) {
        return Dn(Ae2(e3));
      } });
      var po = function(e3, t3, n3) {
        var o3, r3;
        Xe2(e3);
        try {
          if (!(o3 = Me2(e3, "return"))) {
            if ("throw" === t3)
              throw n3;
            return n3;
          }
          o3 = b2(o3, e3);
        } catch (a3) {
          r3 = true, o3 = a3;
        }
        if ("throw" === t3)
          throw n3;
        if (r3)
          throw o3;
        return Xe2(o3), n3;
      }, go = function(e3, t3, n3, o3) {
        try {
          return o3 ? t3(Xe2(n3)[0], n3[1]) : t3(n3);
        } catch (r3) {
          po(e3, "throw", r3);
        }
      }, ho = {}, _o = Ue2("iterator"), fo = Array.prototype, mo = function(e3) {
        return void 0 !== e3 && (ho.Array === e3 || fo[_o] === e3);
      }, vo = function(e3, t3, n3) {
        var o3 = xe2(t3);
        o3 in e3 ? nt2.f(e3, o3, q2(0, n3)) : e3[o3] = n3;
      }, Mo = Ue2("iterator"), yo = function(e3) {
        if (null != e3)
          return Me2(e3, Mo) || Me2(e3, "@@iterator") || ho[un(e3)];
      }, Io = R2.TypeError, Eo = function(e3, t3) {
        var n3 = arguments.length < 2 ? yo(e3) : t3;
        if (ve2(n3))
          return Xe2(b2(n3, e3));
        throw Io(fe2(e3) + " is not iterable");
      }, To = R2.Array, So = function(e3) {
        var t3 = Ae2(e3), n3 = Yn2(this), o3 = arguments.length, r3 = o3 > 1 ? arguments[1] : void 0, a3 = void 0 !== r3;
        a3 && (r3 = Un(r3, o3 > 2 ? arguments[2] : void 0));
        var s3, i3, c3, u3, l3, d3, p3 = yo(t3), g3 = 0;
        if (!p3 || this == To && mo(p3))
          for (s3 = bt2(t3), i3 = n3 ? new this(s3) : To(s3); s3 > g3; g3++)
            d3 = a3 ? r3(t3[g3], g3) : t3[g3], vo(i3, g3, d3);
        else
          for (l3 = (u3 = Eo(t3, p3)).next, i3 = n3 ? new this() : []; !(c3 = b2(l3, u3)).done; g3++)
            d3 = a3 ? go(u3, r3, [c3.value, g3], true) : c3.value, vo(i3, g3, d3);
        return i3.length = g3, i3;
      }, Co = Ue2("iterator"), Ao = false;
      try {
        var Do = 0, No = { next: function() {
          return { done: !!Do++ };
        }, return: function() {
          Ao = true;
        } };
        No[Co] = function() {
          return this;
        }, Array.from(No, function() {
          throw 2;
        });
      } catch (rS) {
      }
      var Oo = function(e3, t3) {
        if (!t3 && !Ao)
          return false;
        var n3 = false;
        try {
          var o3 = {};
          o3[Co] = function() {
            return { next: function() {
              return { done: n3 = true };
            } };
          }, e3(o3);
        } catch (rS) {
        }
        return n3;
      }, Ro = !Oo(function(e3) {
        Array.from(e3);
      });
      nn2({ target: "Array", stat: true, forced: Ro }, { from: So });
      var Lo, ko, Po, Go = B2("".charAt), bo = B2("".charCodeAt), wo = B2("".slice), Uo = function(e3) {
        return function(t3, n3) {
          var o3, r3, a3 = dn(Q2(t3)), s3 = Ot2(n3), i3 = a3.length;
          return s3 < 0 || s3 >= i3 ? e3 ? "" : void 0 : (o3 = bo(a3, s3)) < 55296 || o3 > 56319 || s3 + 1 === i3 || (r3 = bo(a3, s3 + 1)) < 56320 || r3 > 57343 ? e3 ? Go(a3, s3) : o3 : e3 ? wo(a3, s3, s3 + 2) : r3 - 56320 + (o3 - 55296 << 10) + 65536;
        };
      }, Fo = { codeAt: Uo(false), charAt: Uo(true) }, qo = !L2(function() {
        function e3() {
        }
        return e3.prototype.constructor = null, Object.getPrototypeOf(new e3()) !== e3.prototype;
      }), Vo = pt2("IE_PROTO"), xo = R2.Object, Ko = xo.prototype, Ho = qo ? xo.getPrototypeOf : function(e3) {
        var t3 = Ae2(e3);
        if (Ne2(t3, Vo))
          return t3[Vo];
        var n3 = t3.constructor;
        return ee2(n3) && t3 instanceof n3 ? n3.prototype : t3 instanceof xo ? Ko : null;
      }, Bo = Ue2("iterator"), jo = false;
      [].keys && ("next" in (Po = [].keys()) ? (ko = Ho(Ho(Po))) !== Object.prototype && (Lo = ko) : jo = true), (null == Lo || L2(function() {
        var e3 = {};
        return Lo[Bo].call(e3) !== e3;
      })) && (Lo = {}), ee2(Lo[Bo]) || At2(Lo, Bo, function() {
        return this;
      });
      var Wo = { IteratorPrototype: Lo, BUGGY_SAFARI_ITERATORS: jo }, Yo = nt2.f, $o = Ue2("toStringTag"), zo = function(e3, t3, n3) {
        e3 && !n3 && (e3 = e3.prototype), e3 && !Ne2(e3, $o) && Yo(e3, $o, { configurable: true, value: t3 });
      }, Jo = Wo.IteratorPrototype, Xo = function() {
        return this;
      }, Qo = function(e3, t3, n3, o3) {
        var r3 = t3 + " Iterator";
        return e3.prototype = bn(Jo, { next: q2(+!o3, n3) }), zo(e3, r3, false), ho[r3] = Xo, e3;
      }, Zo = R2.String, er2 = R2.TypeError, tr2 = Object.setPrototypeOf || ("__proto__" in {} ? function() {
        var e3, t3 = false, n3 = {};
        try {
          (e3 = B2(Object.getOwnPropertyDescriptor(Object.prototype, "__proto__").set))(n3, []), t3 = n3 instanceof Array;
        } catch (rS) {
        }
        return function(n4, o3) {
          return Xe2(n4), function(e4) {
            if ("object" == typeof e4 || ee2(e4))
              return e4;
            throw er2("Can't set " + Zo(e4) + " as a prototype");
          }(o3), t3 ? e3(n4, o3) : n4.__proto__ = o3, n4;
        };
      }() : void 0), nr = Ct2.PROPER, or = Ct2.CONFIGURABLE, rr = Wo.IteratorPrototype, ar = Wo.BUGGY_SAFARI_ITERATORS, sr = Ue2("iterator"), ir = function() {
        return this;
      }, cr = function(e3, t3, n3, o3, r3, a3, s3) {
        Qo(n3, t3, o3);
        var i3, c3, u3, l3 = function(e4) {
          if (e4 === r3 && _3)
            return _3;
          if (!ar && e4 in g3)
            return g3[e4];
          switch (e4) {
            case "keys":
            case "values":
            case "entries":
              return function() {
                return new n3(this, e4);
              };
          }
          return function() {
            return new n3(this);
          };
        }, d3 = t3 + " Iterator", p3 = false, g3 = e3.prototype, h3 = g3[sr] || g3["@@iterator"] || r3 && g3[r3], _3 = !ar && h3 || l3(r3), f3 = "Array" == t3 && g3.entries || h3;
        if (f3 && (i3 = Ho(f3.call(new e3()))) !== Object.prototype && i3.next && (Ho(i3) !== rr && (tr2 ? tr2(i3, rr) : ee2(i3[sr]) || At2(i3, sr, ir)), zo(i3, d3, true)), nr && "values" == r3 && h3 && "values" !== h3.name && (or ? ot2(g3, "name", "values") : (p3 = true, _3 = function() {
          return b2(h3, this);
        })), r3)
          if (c3 = { values: l3("values"), keys: a3 ? _3 : l3("keys"), entries: l3("entries") }, s3)
            for (u3 in c3)
              (ar || p3 || !(u3 in g3)) && At2(g3, u3, c3[u3]);
          else
            nn2({ target: t3, proto: true, forced: ar || p3 }, c3);
        return g3[sr] !== _3 && At2(g3, sr, _3, { name: r3 }), ho[t3] = _3, c3;
      }, ur = Fo.charAt, lr = It2.set, dr = It2.getterFor("String Iterator");
      cr(String, "String", function(e3) {
        lr(this, { type: "String Iterator", string: dn(e3), index: 0 });
      }, function() {
        var e3, t3 = dr(this), n3 = t3.string, o3 = t3.index;
        return o3 >= n3.length ? { value: void 0, done: true } : (e3 = ur(n3, o3), t3.index += e3.length, { value: e3, done: false });
      });
      var pr = { SDK_READY: "sdkStateReady", SDK_NOT_READY: "sdkStateNotReady", SDK_DESTROY: "sdkDestroy", MESSAGE_RECEIVED: "onMessageReceived", MESSAGE_MODIFIED: "onMessageModified", MESSAGE_REVOKED: "onMessageRevoked", MESSAGE_READ_BY_PEER: "onMessageReadByPeer", MESSAGE_READ_RECEIPT_RECEIVED: "onMessageReadReceiptReceived", CONVERSATION_LIST_UPDATED: "onConversationListUpdated", GROUP_LIST_UPDATED: "onGroupListUpdated", GROUP_SYSTEM_NOTICE_RECEIVED: "receiveGroupSystemNotice", GROUP_ATTRIBUTES_UPDATED: "groupAttributesUpdated", TOPIC_CREATED: "onTopicCreated", TOPIC_DELETED: "onTopicDeleted", TOPIC_UPDATED: "onTopicUpdated", PROFILE_UPDATED: "onProfileUpdated", BLACKLIST_UPDATED: "blacklistUpdated", FRIEND_LIST_UPDATED: "onFriendListUpdated", FRIEND_GROUP_LIST_UPDATED: "onFriendGroupListUpdated", FRIEND_APPLICATION_LIST_UPDATED: "onFriendApplicationListUpdated", KICKED_OUT: "kickedOut", ERROR: "error", NET_STATE_CHANGE: "netStateChange", SDK_RELOAD: "sdkReload" }, gr = { MSG_TEXT: "TIMTextElem", MSG_IMAGE: "TIMImageElem", MSG_SOUND: "TIMSoundElem", MSG_AUDIO: "TIMSoundElem", MSG_FILE: "TIMFileElem", MSG_FACE: "TIMFaceElem", MSG_VIDEO: "TIMVideoFileElem", MSG_GEO: "TIMLocationElem", MSG_LOCATION: "TIMLocationElem", MSG_GRP_TIP: "TIMGroupTipElem", MSG_GRP_SYS_NOTICE: "TIMGroupSystemNoticeElem", MSG_CUSTOM: "TIMCustomElem", MSG_MERGER: "TIMRelayElem", MSG_PRIORITY_HIGH: "High", MSG_PRIORITY_NORMAL: "Normal", MSG_PRIORITY_LOW: "Low", MSG_PRIORITY_LOWEST: "Lowest", CONV_C2C: "C2C", CONV_GROUP: "GROUP", CONV_TOPIC: "TOPIC", CONV_SYSTEM: "@TIM#SYSTEM", CONV_AT_ME: 1, CONV_AT_ALL: 2, CONV_AT_ALL_AT_ME: 3, GRP_PRIVATE: "Private", GRP_WORK: "Private", GRP_PUBLIC: "Public", GRP_CHATROOM: "ChatRoom", GRP_MEETING: "ChatRoom", GRP_AVCHATROOM: "AVChatRoom", GRP_COMMUNITY: "Community", GRP_MBR_ROLE_OWNER: "Owner", GRP_MBR_ROLE_ADMIN: "Admin", GRP_MBR_ROLE_MEMBER: "Member", GRP_MBR_ROLE_CUSTOM: "Custom", GRP_TIP_MBR_JOIN: 1, GRP_TIP_MBR_QUIT: 2, GRP_TIP_MBR_KICKED_OUT: 3, GRP_TIP_MBR_SET_ADMIN: 4, GRP_TIP_MBR_CANCELED_ADMIN: 5, GRP_TIP_GRP_PROFILE_UPDATED: 6, GRP_TIP_MBR_PROFILE_UPDATED: 7, MSG_REMIND_ACPT_AND_NOTE: "AcceptAndNotify", MSG_REMIND_ACPT_NOT_NOTE: "AcceptNotNotify", MSG_REMIND_DISCARD: "Discard", GENDER_UNKNOWN: "Gender_Type_Unknown", GENDER_FEMALE: "Gender_Type_Female", GENDER_MALE: "Gender_Type_Male", KICKED_OUT_MULT_ACCOUNT: "multipleAccount", KICKED_OUT_MULT_DEVICE: "multipleDevice", KICKED_OUT_USERSIG_EXPIRED: "userSigExpired", KICKED_OUT_REST_API: "REST_API_Kick", ALLOW_TYPE_ALLOW_ANY: "AllowType_Type_AllowAny", ALLOW_TYPE_NEED_CONFIRM: "AllowType_Type_NeedConfirm", ALLOW_TYPE_DENY_ANY: "AllowType_Type_DenyAny", FORBID_TYPE_NONE: "AdminForbid_Type_None", FORBID_TYPE_SEND_OUT: "AdminForbid_Type_SendOut", JOIN_OPTIONS_FREE_ACCESS: "FreeAccess", JOIN_OPTIONS_NEED_PERMISSION: "NeedPermission", JOIN_OPTIONS_DISABLE_APPLY: "DisableApply", JOIN_STATUS_SUCCESS: "JoinedSuccess", JOIN_STATUS_ALREADY_IN_GROUP: "AlreadyInGroup", JOIN_STATUS_WAIT_APPROVAL: "WaitAdminApproval", GRP_PROFILE_OWNER_ID: "ownerID", GRP_PROFILE_CREATE_TIME: "createTime", GRP_PROFILE_LAST_INFO_TIME: "lastInfoTime", GRP_PROFILE_MEMBER_NUM: "memberNum", GRP_PROFILE_MAX_MEMBER_NUM: "maxMemberNum", GRP_PROFILE_JOIN_OPTION: "joinOption", GRP_PROFILE_INTRODUCTION: "introduction", GRP_PROFILE_NOTIFICATION: "notification", GRP_PROFILE_MUTE_ALL_MBRS: "muteAllMembers", SNS_ADD_TYPE_SINGLE: "Add_Type_Single", SNS_ADD_TYPE_BOTH: "Add_Type_Both", SNS_DELETE_TYPE_SINGLE: "Delete_Type_Single", SNS_DELETE_TYPE_BOTH: "Delete_Type_Both", SNS_APPLICATION_TYPE_BOTH: "Pendency_Type_Both", SNS_APPLICATION_SENT_TO_ME: "Pendency_Type_ComeIn", SNS_APPLICATION_SENT_BY_ME: "Pendency_Type_SendOut", SNS_APPLICATION_AGREE: "Response_Action_Agree", SNS_APPLICATION_AGREE_AND_ADD: "Response_Action_AgreeAndAdd", SNS_CHECK_TYPE_BOTH: "CheckResult_Type_Both", SNS_CHECK_TYPE_SINGLE: "CheckResult_Type_Single", SNS_TYPE_NO_RELATION: "CheckResult_Type_NoRelation", SNS_TYPE_A_WITH_B: "CheckResult_Type_AWithB", SNS_TYPE_B_WITH_A: "CheckResult_Type_BWithA", SNS_TYPE_BOTH_WAY: "CheckResult_Type_BothWay", NET_STATE_CONNECTED: "connected", NET_STATE_CONNECTING: "connecting", NET_STATE_DISCONNECTED: "disconnected", MSG_AT_ALL: "__kImSDK_MesssageAtALL__", READ_ALL_C2C_MSG: "readAllC2CMessage", READ_ALL_GROUP_MSG: "readAllGroupMessage", READ_ALL_MSG: "readAllMessage" }, hr = B2([].slice), _r = R2.Function, fr = B2([].concat), mr = B2([].join), vr = {}, Mr = function(e3, t3, n3) {
        if (!Ne2(vr, t3)) {
          for (var o3 = [], r3 = 0; r3 < t3; r3++)
            o3[r3] = "a[" + r3 + "]";
          vr[t3] = _r("C,a", "return new C(" + mr(o3, ",") + ")");
        }
        return vr[t3](e3, n3);
      }, yr = P2 ? _r.bind : function(e3) {
        var t3 = ve2(this), n3 = t3.prototype, o3 = hr(arguments, 1), r3 = function() {
          var n4 = fr(o3, hr(arguments));
          return this instanceof r3 ? Mr(t3, n4.length, n4) : t3.apply(e3, n4);
        };
        return te2(n3) && (r3.prototype = n3), r3;
      };
      nn2({ target: "Function", proto: true, forced: Function.bind !== yr }, { bind: yr });
      var Ir = Ue2("species"), Er = function(e3) {
        return le2 >= 51 || !L2(function() {
          var t3 = [];
          return (t3.constructor = {})[Ir] = function() {
            return { foo: 1 };
          }, 1 !== t3[e3](Boolean).foo;
        });
      }, Tr = Zn2.map, Sr = Er("map");
      nn2({ target: "Array", proto: true, forced: !Sr }, { map: function(e3) {
        return Tr(this, e3, arguments.length > 1 ? arguments[1] : void 0);
      } });
      var Cr = function() {
        function e3() {
          o2(this, e3), this.cache = [], this.options = null;
        }
        return a2(e3, [{ key: "use", value: function(e4) {
          if ("function" != typeof e4)
            throw "middleware must be a function";
          return this.cache.push(e4), this;
        } }, { key: "next", value: function(e4) {
          if (this.middlewares && this.middlewares.length > 0)
            return this.middlewares.shift().call(this, this.options, this.next.bind(this));
        } }, { key: "run", value: function(e4) {
          return this.middlewares = this.cache.map(function(e5) {
            return e5;
          }), this.options = e4, this.next();
        } }]), e3;
      }(), Ar = Ct2.EXISTS, Dr = nt2.f, Nr = Function.prototype, Or = B2(Nr.toString), Rr = /function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/, Lr = B2(Rr.exec);
      k && !Ar && Dr(Nr, "name", { configurable: true, get: function() {
        try {
          return Lr(Rr, Or(this))[1];
        } catch (rS) {
          return "";
        }
      } });
      var kr = Ue2("isConcatSpreadable"), Pr = R2.TypeError, Gr = le2 >= 51 || !L2(function() {
        var e3 = [];
        return e3[kr] = false, e3.concat()[0] !== e3;
      }), br = Er("concat"), wr = function(e3) {
        if (!te2(e3))
          return false;
        var t3 = e3[kr];
        return void 0 !== t3 ? !!t3 : Fn(e3);
      };
      nn2({ target: "Array", proto: true, forced: !Gr || !br }, { concat: function(e3) {
        var t3, n3, o3, r3, a3, s3 = Ae2(this), i3 = Jn2(s3, 0), c3 = 0;
        for (t3 = -1, o3 = arguments.length; t3 < o3; t3++)
          if (wr(a3 = -1 === t3 ? s3 : arguments[t3])) {
            if (c3 + (r3 = bt2(a3)) > 9007199254740991)
              throw Pr("Maximum allowed index exceeded");
            for (n3 = 0; n3 < r3; n3++, c3++)
              n3 in a3 && vo(i3, c3, a3[n3]);
          } else {
            if (c3 >= 9007199254740991)
              throw Pr("Maximum allowed index exceeded");
            vo(i3, c3++, a3);
          }
        return i3.length = c3, i3;
      } });
      var Ur = A2(function(e3, t3) {
        var n3, o3, r3, a3, s3, i3, c3, u3, l3, d3, p3, g3, h3, _3, f3, m3, v3, M3;
        e3.exports = (n3 = "function" == typeof Promise, o3 = "object" == typeof self ? self : C2, r3 = "undefined" != typeof Symbol, a3 = "undefined" != typeof Map, s3 = "undefined" != typeof Set, i3 = "undefined" != typeof WeakMap, c3 = "undefined" != typeof WeakSet, u3 = "undefined" != typeof DataView, l3 = r3 && void 0 !== Symbol.iterator, d3 = r3 && void 0 !== Symbol.toStringTag, p3 = s3 && "function" == typeof Set.prototype.entries, g3 = a3 && "function" == typeof Map.prototype.entries, h3 = p3 && Object.getPrototypeOf((/* @__PURE__ */ new Set()).entries()), _3 = g3 && Object.getPrototypeOf((/* @__PURE__ */ new Map()).entries()), f3 = l3 && "function" == typeof Array.prototype[Symbol.iterator], m3 = f3 && Object.getPrototypeOf([][Symbol.iterator]()), v3 = l3 && "function" == typeof String.prototype[Symbol.iterator], M3 = v3 && Object.getPrototypeOf(""[Symbol.iterator]()), function(e4) {
          var t4 = typeof e4;
          if ("object" !== t4)
            return t4;
          if (null === e4)
            return "null";
          if (e4 === o3)
            return "global";
          if (Array.isArray(e4) && (false === d3 || !(Symbol.toStringTag in e4)))
            return "Array";
          if ("object" == typeof window && null !== window) {
            if ("object" == typeof window.location && e4 === window.location)
              return "Location";
            if ("object" == typeof window.document && e4 === window.document)
              return "Document";
            if ("object" == typeof window.navigator) {
              if ("object" == typeof window.navigator.mimeTypes && e4 === window.navigator.mimeTypes)
                return "MimeTypeArray";
              if ("object" == typeof window.navigator.plugins && e4 === window.navigator.plugins)
                return "PluginArray";
            }
            if (("function" == typeof window.HTMLElement || "object" == typeof window.HTMLElement) && e4 instanceof window.HTMLElement) {
              if ("BLOCKQUOTE" === e4.tagName)
                return "HTMLQuoteElement";
              if ("TD" === e4.tagName)
                return "HTMLTableDataCellElement";
              if ("TH" === e4.tagName)
                return "HTMLTableHeaderCellElement";
            }
          }
          var r4 = d3 && e4[Symbol.toStringTag];
          if ("string" == typeof r4)
            return r4;
          var l4 = Object.getPrototypeOf(e4);
          return l4 === RegExp.prototype ? "RegExp" : l4 === Date.prototype ? "Date" : n3 && l4 === Promise.prototype ? "Promise" : s3 && l4 === Set.prototype ? "Set" : a3 && l4 === Map.prototype ? "Map" : c3 && l4 === WeakSet.prototype ? "WeakSet" : i3 && l4 === WeakMap.prototype ? "WeakMap" : u3 && l4 === DataView.prototype ? "DataView" : a3 && l4 === _3 ? "Map Iterator" : s3 && l4 === h3 ? "Set Iterator" : f3 && l4 === m3 ? "Array Iterator" : v3 && l4 === M3 ? "String Iterator" : null === l4 ? "Object" : Object.prototype.toString.call(e4).slice(8, -1);
        });
      });
      nn2({ target: "Array", stat: true }, { isArray: Fn });
      var Fr = function(e3, t3, n3) {
        var o3, r3;
        return tr2 && ee2(o3 = t3.constructor) && o3 !== n3 && te2(r3 = o3.prototype) && r3 !== n3.prototype && tr2(e3, r3), e3;
      }, qr = B2(1 .valueOf), Vr = Ht2.f, xr = Ye2.f, Kr = nt2.f, Hr = vn.trim, Br = R2.Number, jr = Br.prototype, Wr = R2.TypeError, Yr = B2("".slice), $r = B2("".charCodeAt), zr = function(e3) {
        var t3 = Ve2(e3, "number");
        return "bigint" == typeof t3 ? t3 : Jr(t3);
      }, Jr = function(e3) {
        var t3, n3, o3, r3, a3, s3, i3, c3, u3 = Ve2(e3, "number");
        if (he2(u3))
          throw Wr("Cannot convert a Symbol value to a number");
        if ("string" == typeof u3 && u3.length > 2) {
          if (u3 = Hr(u3), 43 === (t3 = $r(u3, 0)) || 45 === t3) {
            if (88 === (n3 = $r(u3, 2)) || 120 === n3)
              return NaN;
          } else if (48 === t3) {
            switch ($r(u3, 1)) {
              case 66:
              case 98:
                o3 = 2, r3 = 49;
                break;
              case 79:
              case 111:
                o3 = 8, r3 = 55;
                break;
              default:
                return +u3;
            }
            for (s3 = (a3 = Yr(u3, 2)).length, i3 = 0; i3 < s3; i3++)
              if ((c3 = $r(a3, i3)) < 48 || c3 > r3)
                return NaN;
            return parseInt(a3, o3);
          }
        }
        return +u3;
      };
      if (en2("Number", !Br(" 0o1") || !Br("0b1") || Br("+0x1"))) {
        for (var Xr, Qr = function(e3) {
          var t3 = arguments.length < 1 ? 0 : Br(zr(e3)), n3 = this;
          return re2(jr, n3) && L2(function() {
            qr(n3);
          }) ? Fr(Object(t3), n3, Qr) : t3;
        }, Zr = k ? Vr(Br) : "MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","), ea = 0; Zr.length > ea; ea++)
          Ne2(Br, Xr = Zr[ea]) && !Ne2(Qr, Xr) && Kr(Qr, Xr, xr(Br, Xr));
        Qr.prototype = jr, jr.constructor = Qr, At2(R2, "Number", Qr);
      }
      var ta = L2(function() {
        Ho(1);
      });
      nn2({ target: "Object", stat: true, forced: ta, sham: !qo }, { getPrototypeOf: function(e3) {
        return Ho(Ae2(e3));
      } });
      var na, oa, ra = function() {
        var e3 = Xe2(this), t3 = "";
        return e3.global && (t3 += "g"), e3.ignoreCase && (t3 += "i"), e3.multiline && (t3 += "m"), e3.dotAll && (t3 += "s"), e3.unicode && (t3 += "u"), e3.sticky && (t3 += "y"), t3;
      }, aa = R2.RegExp, sa = L2(function() {
        var e3 = aa("a", "y");
        return e3.lastIndex = 2, null != e3.exec("abcd");
      }), ia = sa || L2(function() {
        return !aa("a", "y").sticky;
      }), ca = { BROKEN_CARET: sa || L2(function() {
        var e3 = aa("^r", "gy");
        return e3.lastIndex = 2, null != e3.exec("str");
      }), MISSED_STICKY: ia, UNSUPPORTED_Y: sa }, ua = R2.RegExp, la = L2(function() {
        var e3 = ua(".", "s");
        return !(e3.dotAll && e3.exec("\n") && "s" === e3.flags);
      }), da = R2.RegExp, pa = L2(function() {
        var e3 = da("(?<a>b)", "g");
        return "b" !== e3.exec("b").groups.a || "bc" !== "b".replace(e3, "$<a>c");
      }), ga = It2.get, ha = Se2("native-string-replace", String.prototype.replace), _a = RegExp.prototype.exec, fa = _a, ma = B2("".charAt), va = B2("".indexOf), Ma = B2("".replace), ya = B2("".slice), Ia = (oa = /b*/g, b2(_a, na = /a/, "a"), b2(_a, oa, "a"), 0 !== na.lastIndex || 0 !== oa.lastIndex), Ea = ca.BROKEN_CARET, Ta = void 0 !== /()??/.exec("")[1];
      (Ia || Ta || Ea || la || pa) && (fa = function(e3) {
        var t3, n3, o3, r3, a3, s3, i3, c3 = this, u3 = ga(c3), l3 = dn(e3), d3 = u3.raw;
        if (d3)
          return d3.lastIndex = c3.lastIndex, t3 = b2(fa, d3, l3), c3.lastIndex = d3.lastIndex, t3;
        var p3 = u3.groups, g3 = Ea && c3.sticky, h3 = b2(ra, c3), _3 = c3.source, f3 = 0, m3 = l3;
        if (g3 && (h3 = Ma(h3, "y", ""), -1 === va(h3, "g") && (h3 += "g"), m3 = ya(l3, c3.lastIndex), c3.lastIndex > 0 && (!c3.multiline || c3.multiline && "\n" !== ma(l3, c3.lastIndex - 1)) && (_3 = "(?: " + _3 + ")", m3 = " " + m3, f3++), n3 = new RegExp("^(?:" + _3 + ")", h3)), Ta && (n3 = new RegExp("^" + _3 + "$(?!\\s)", h3)), Ia && (o3 = c3.lastIndex), r3 = b2(_a, g3 ? n3 : c3, m3), g3 ? r3 ? (r3.input = ya(r3.input, f3), r3[0] = ya(r3[0], f3), r3.index = c3.lastIndex, c3.lastIndex += r3[0].length) : c3.lastIndex = 0 : Ia && r3 && (c3.lastIndex = c3.global ? r3.index + r3[0].length : o3), Ta && r3 && r3.length > 1 && b2(ha, r3[0], n3, function() {
          for (a3 = 1; a3 < arguments.length - 2; a3++)
            void 0 === arguments[a3] && (r3[a3] = void 0);
        }), r3 && p3)
          for (r3.groups = s3 = bn(null), a3 = 0; a3 < p3.length; a3++)
            s3[(i3 = p3[a3])[0]] = r3[i3[1]];
        return r3;
      });
      var Sa = fa;
      nn2({ target: "RegExp", proto: true, forced: /./.exec !== Sa }, { exec: Sa });
      var Ca = Date.prototype, Aa = B2(Ca.toString), Da = B2(Ca.getTime);
      "Invalid Date" != String(/* @__PURE__ */ new Date(NaN)) && At2(Ca, "toString", function() {
        var e3 = Da(this);
        return e3 == e3 ? Aa(this) : "Invalid Date";
      });
      var Na = Ct2.PROPER, Oa = RegExp.prototype, Ra = Oa.toString, La = B2(ra), ka = L2(function() {
        return "/a/b" != Ra.call({ source: "a", flags: "b" });
      }), Pa = Na && "toString" != Ra.name;
      (ka || Pa) && At2(RegExp.prototype, "toString", function() {
        var e3 = Xe2(this), t3 = dn(e3.source), n3 = e3.flags;
        return "/" + t3 + "/" + dn(void 0 === n3 && re2(Oa, e3) && !("flags" in Oa) ? La(e3) : n3);
      }, { unsafe: true });
      var Ga = Ue2("species"), ba = RegExp.prototype, wa = function(e3, t3, n3, o3) {
        var r3 = Ue2(e3), a3 = !L2(function() {
          var t4 = {};
          return t4[r3] = function() {
            return 7;
          }, 7 != ""[e3](t4);
        }), s3 = a3 && !L2(function() {
          var t4 = false, n4 = /a/;
          return "split" === e3 && ((n4 = {}).constructor = {}, n4.constructor[Ga] = function() {
            return n4;
          }, n4.flags = "", n4[r3] = /./[r3]), n4.exec = function() {
            return t4 = true, null;
          }, n4[r3](""), !t4;
        });
        if (!a3 || !s3 || n3) {
          var i3 = B2(/./[r3]), c3 = t3(r3, ""[e3], function(e4, t4, n4, o4, r4) {
            var s4 = B2(e4), c4 = t4.exec;
            return c4 === Sa || c4 === ba.exec ? a3 && !r4 ? { done: true, value: i3(t4, n4, o4) } : { done: true, value: s4(n4, t4, o4) } : { done: false };
          });
          At2(String.prototype, e3, c3[0]), At2(ba, r3, c3[1]);
        }
        o3 && ot2(ba[r3], "sham", true);
      }, Ua = Fo.charAt, Fa = function(e3, t3, n3) {
        return t3 + (n3 ? Ua(e3, t3).length : 1);
      }, qa2 = R2.TypeError, Va = function(e3, t3) {
        var n3 = e3.exec;
        if (ee2(n3)) {
          var o3 = b2(n3, e3, t3);
          return null !== o3 && Xe2(o3), o3;
        }
        if ("RegExp" === Y2(e3))
          return b2(Sa, e3, t3);
        throw qa2("RegExp#exec called on incompatible receiver");
      };
      wa("match", function(e3, t3, n3) {
        return [function(t4) {
          var n4 = Q2(this), o3 = null == t4 ? void 0 : Me2(t4, e3);
          return o3 ? b2(o3, t4, n4) : new RegExp(t4)[e3](dn(n4));
        }, function(e4) {
          var o3 = Xe2(this), r3 = dn(e4), a3 = n3(t3, o3, r3);
          if (a3.done)
            return a3.value;
          if (!o3.global)
            return Va(o3, r3);
          var s3 = o3.unicode;
          o3.lastIndex = 0;
          for (var i3, c3 = [], u3 = 0; null !== (i3 = Va(o3, r3)); ) {
            var l3 = dn(i3[0]);
            c3[u3] = l3, "" === l3 && (o3.lastIndex = Fa(r3, Gt2(o3.lastIndex), s3)), u3++;
          }
          return 0 === u3 ? null : c3;
        }];
      });
      var xa = R2.Date, Ka = B2(xa.prototype.getTime);
      nn2({ target: "Date", stat: true }, { now: function() {
        return Ka(new xa());
      } });
      var Ha = Ue2("unscopables"), Ba = Array.prototype;
      null == Ba[Ha] && nt2.f(Ba, Ha, { configurable: true, value: bn(null) });
      var ja = function(e3) {
        Ba[Ha][e3] = true;
      }, Wa = Ut2.includes;
      nn2({ target: "Array", proto: true }, { includes: function(e3) {
        return Wa(this, e3, arguments.length > 1 ? arguments[1] : void 0);
      } }), ja("includes");
      var Ya = Ue2("match"), $a = function(e3) {
        var t3;
        return te2(e3) && (void 0 !== (t3 = e3[Ya]) ? !!t3 : "RegExp" == Y2(e3));
      }, za = R2.TypeError, Ja = function(e3) {
        if ($a(e3))
          throw za("The method doesn't accept regular expressions");
        return e3;
      }, Xa = Ue2("match"), Qa = function(e3) {
        var t3 = /./;
        try {
          "/./"[e3](t3);
        } catch (n3) {
          try {
            return t3[Xa] = false, "/./"[e3](t3);
          } catch (o3) {
          }
        }
        return false;
      }, Za = B2("".indexOf);
      nn2({ target: "String", proto: true, forced: !Qa("includes") }, { includes: function(e3) {
        return !!~Za(dn(Q2(this)), dn(Ja(e3)), arguments.length > 1 ? arguments[1] : void 0);
      } });
      var es2 = R2.RangeError, ts2 = B2(function(e3) {
        var t3 = dn(Q2(this)), n3 = "", o3 = Ot2(e3);
        if (o3 < 0 || Infinity == o3)
          throw es2("Wrong number of repetitions");
        for (; o3 > 0; (o3 >>>= 1) && (t3 += t3))
          1 & o3 && (n3 += t3);
        return n3;
      }), ns2 = B2("".slice), os2 = Math.ceil, rs2 = function(e3) {
        return function(t3, n3, o3) {
          var r3, a3, s3 = dn(Q2(t3)), i3 = Gt2(n3), c3 = s3.length, u3 = void 0 === o3 ? " " : dn(o3);
          return i3 <= c3 || "" == u3 ? s3 : ((a3 = ts2(u3, os2((r3 = i3 - c3) / u3.length))).length > r3 && (a3 = ns2(a3, 0, r3)), e3 ? s3 + a3 : a3 + s3);
        };
      }, as2 = { start: rs2(false), end: rs2(true) }.start, ss2 = R2.RangeError, is2 = Math.abs, cs2 = Date.prototype, us2 = cs2.toISOString, ls2 = B2(cs2.getTime), ds2 = B2(cs2.getUTCDate), ps2 = B2(cs2.getUTCFullYear), gs2 = B2(cs2.getUTCHours), hs2 = B2(cs2.getUTCMilliseconds), _s2 = B2(cs2.getUTCMinutes), fs2 = B2(cs2.getUTCMonth), ms2 = B2(cs2.getUTCSeconds), vs2 = L2(function() {
        return "0385-07-25T07:06:39.999Z" != us2.call(/* @__PURE__ */ new Date(-50000000000001));
      }) || !L2(function() {
        us2.call(/* @__PURE__ */ new Date(NaN));
      }) ? function() {
        if (!isFinite(ls2(this)))
          throw ss2("Invalid time value");
        var e3 = ps2(this), t3 = hs2(this), n3 = e3 < 0 ? "-" : e3 > 9999 ? "+" : "";
        return n3 + as2(is2(e3), n3 ? 6 : 4, 0) + "-" + as2(fs2(this) + 1, 2, 0) + "-" + as2(ds2(this), 2, 0) + "T" + as2(gs2(this), 2, 0) + ":" + as2(_s2(this), 2, 0) + ":" + as2(ms2(this), 2, 0) + "." + as2(t3, 3, 0) + "Z";
      } : us2;
      nn2({ target: "Date", proto: true, forced: Date.prototype.toISOString !== vs2 }, { toISOString: vs2 });
      var Ms2 = Function.prototype, ys2 = Ms2.apply, Is2 = Ms2.call, Es2 = "object" == typeof Reflect && Reflect.apply || (P2 ? Is2.bind(ys2) : function() {
        return Is2.apply(ys2, arguments);
      }), Ts2 = Math.floor, Ss2 = B2("".charAt), Cs2 = B2("".replace), As2 = B2("".slice), Ds2 = /\$([$&'`]|\d{1,2}|<[^>]*>)/g, Ns2 = /\$([$&'`]|\d{1,2})/g, Os2 = function(e3, t3, n3, o3, r3, a3) {
        var s3 = n3 + e3.length, i3 = o3.length, c3 = Ns2;
        return void 0 !== r3 && (r3 = Ae2(r3), c3 = Ds2), Cs2(a3, c3, function(a4, c4) {
          var u3;
          switch (Ss2(c4, 0)) {
            case "$":
              return "$";
            case "&":
              return e3;
            case "`":
              return As2(t3, 0, n3);
            case "'":
              return As2(t3, s3);
            case "<":
              u3 = r3[As2(c4, 1, -1)];
              break;
            default:
              var l3 = +c4;
              if (0 === l3)
                return a4;
              if (l3 > i3) {
                var d3 = Ts2(l3 / 10);
                return 0 === d3 ? a4 : d3 <= i3 ? void 0 === o3[d3 - 1] ? Ss2(c4, 1) : o3[d3 - 1] + Ss2(c4, 1) : a4;
              }
              u3 = o3[l3 - 1];
          }
          return void 0 === u3 ? "" : u3;
        });
      }, Rs2 = Ue2("replace"), Ls2 = Math.max, ks2 = Math.min, Ps2 = B2([].concat), Gs2 = B2([].push), bs2 = B2("".indexOf), ws2 = B2("".slice), Us2 = "$0" === "a".replace(/./, "$0"), Fs2 = !!/./[Rs2] && "" === /./[Rs2]("a", "$0");
      wa("replace", function(e3, t3, n3) {
        var o3 = Fs2 ? "$" : "$0";
        return [function(e4, n4) {
          var o4 = Q2(this), r3 = null == e4 ? void 0 : Me2(e4, Rs2);
          return r3 ? b2(r3, e4, o4, n4) : b2(t3, dn(o4), e4, n4);
        }, function(e4, r3) {
          var a3 = Xe2(this), s3 = dn(e4);
          if ("string" == typeof r3 && -1 === bs2(r3, o3) && -1 === bs2(r3, "$<")) {
            var i3 = n3(t3, a3, s3, r3);
            if (i3.done)
              return i3.value;
          }
          var c3 = ee2(r3);
          c3 || (r3 = dn(r3));
          var u3 = a3.global;
          if (u3) {
            var l3 = a3.unicode;
            a3.lastIndex = 0;
          }
          for (var d3 = []; ; ) {
            var p3 = Va(a3, s3);
            if (null === p3)
              break;
            if (Gs2(d3, p3), !u3)
              break;
            "" === dn(p3[0]) && (a3.lastIndex = Fa(s3, Gt2(a3.lastIndex), l3));
          }
          for (var g3, h3 = "", _3 = 0, f3 = 0; f3 < d3.length; f3++) {
            for (var m3 = dn((p3 = d3[f3])[0]), v3 = Ls2(ks2(Ot2(p3.index), s3.length), 0), M3 = [], y3 = 1; y3 < p3.length; y3++)
              Gs2(M3, void 0 === (g3 = p3[y3]) ? g3 : String(g3));
            var I3 = p3.groups;
            if (c3) {
              var E3 = Ps2([m3], M3, v3, s3);
              void 0 !== I3 && Gs2(E3, I3);
              var T3 = dn(Es2(r3, void 0, E3));
            } else
              T3 = Os2(m3, s3, v3, M3, I3, r3);
            v3 >= _3 && (h3 += ws2(s3, _3, v3) + T3, _3 = v3 + m3.length);
          }
          return h3 + ws2(s3, _3);
        }];
      }, !!L2(function() {
        var e3 = /./;
        return e3.exec = function() {
          var e4 = [];
          return e4.groups = { a: "7" }, e4;
        }, "7" !== "".replace(e3, "$<a>");
      }) || !Us2 || Fs2);
      var qs2 = nt2.f, Vs2 = It2.set, xs2 = It2.getterFor("Array Iterator"), Ks2 = cr(Array, "Array", function(e3, t3) {
        Vs2(this, { type: "Array Iterator", target: Z2(e3), index: 0, kind: t3 });
      }, function() {
        var e3 = xs2(this), t3 = e3.target, n3 = e3.kind, o3 = e3.index++;
        return !t3 || o3 >= t3.length ? (e3.target = void 0, { value: void 0, done: true }) : "keys" == n3 ? { value: o3, done: false } : "values" == n3 ? { value: t3[o3], done: false } : { value: [o3, t3[o3]], done: false };
      }, "values"), Hs2 = ho.Arguments = ho.Array;
      if (ja("keys"), ja("values"), ja("entries"), k && "values" !== Hs2.name)
        try {
          qs2(Hs2, "name", { value: "values" });
        } catch (rS) {
        }
      var Bs2 = Ue2("iterator"), js2 = Ue2("toStringTag"), Ws2 = Ks2.values, Ys2 = function(e3, t3) {
        if (e3) {
          if (e3[Bs2] !== Ws2)
            try {
              ot2(e3, Bs2, Ws2);
            } catch (rS) {
              e3[Bs2] = Ws2;
            }
          if (e3[js2] || ot2(e3, js2, t3), ro[t3]) {
            for (var n3 in Ks2)
              if (e3[n3] !== Ks2[n3])
                try {
                  ot2(e3, n3, Ks2[n3]);
                } catch (rS) {
                  e3[n3] = Ks2[n3];
                }
          }
        }
      };
      for (var $s2 in ro)
        Ys2(R2[$s2] && R2[$s2].prototype, $s2);
      Ys2(io, "DOMTokenList");
      var zs2 = Er("slice"), Js2 = Ue2("species"), Xs2 = R2.Array, Qs2 = Math.max;
      nn2({ target: "Array", proto: true, forced: !zs2 }, { slice: function(e3, t3) {
        var n3, o3, r3, a3 = Z2(this), s3 = bt2(a3), i3 = kt2(e3, s3), c3 = kt2(void 0 === t3 ? s3 : t3, s3);
        if (Fn(a3) && (n3 = a3.constructor, (Yn2(n3) && (n3 === Xs2 || Fn(n3.prototype)) || te2(n3) && null === (n3 = n3[Js2])) && (n3 = void 0), n3 === Xs2 || void 0 === n3))
          return hr(a3, i3, c3);
        for (o3 = new (void 0 === n3 ? Xs2 : n3)(Qs2(c3 - i3, 0)), r3 = 0; i3 < c3; i3++, r3++)
          i3 in a3 && vo(o3, r3, a3[i3]);
        return o3.length = r3, o3;
      } });
      var Zs2 = B2([].join), ei = J2 != Object, ti = eo("join", ",");
      nn2({ target: "Array", proto: true, forced: ei || !ti }, { join: function(e3) {
        return Zs2(Z2(this), void 0 === e3 ? "," : e3);
      } });
      var ni = Ut2.indexOf, oi = B2([].indexOf), ri = !!oi && 1 / oi([1], 1, -0) < 0, ai = eo("indexOf");
      nn2({ target: "Array", proto: true, forced: ri || !ai }, { indexOf: function(e3) {
        var t3 = arguments.length > 1 ? arguments[1] : void 0;
        return ri ? oi(this, e3, t3) || 0 : ni(this, e3, t3);
      } });
      var si = R2.Array, ii = Math.max, ci = function(e3, t3, n3) {
        for (var o3 = bt2(e3), r3 = kt2(t3, o3), a3 = kt2(void 0 === n3 ? o3 : n3, o3), s3 = si(ii(a3 - r3, 0)), i3 = 0; r3 < a3; r3++, i3++)
          vo(s3, i3, e3[r3]);
        return s3.length = i3, s3;
      }, ui = Ht2.f, li = "object" == typeof window && window && Object.getOwnPropertyNames ? Object.getOwnPropertyNames(window) : [], di = { f: function(e3) {
        return li && "Window" == Y2(e3) ? function(e4) {
          try {
            return ui(e4);
          } catch (rS) {
            return ci(li);
          }
        }(e3) : ui(Z2(e3));
      } }, pi = di.f, gi = L2(function() {
        return !Object.getOwnPropertyNames(1);
      });
      nn2({ target: "Object", stat: true, forced: gi }, { getOwnPropertyNames: pi });
      var hi = Zn2.find, _i = true;
      "find" in [] && Array(1).find(function() {
        _i = false;
      }), nn2({ target: "Array", proto: true, forced: _i }, { find: function(e3) {
        return hi(this, e3, arguments.length > 1 ? arguments[1] : void 0);
      } }), ja("find");
      var fi, mi = Ye2.f, vi = B2("".startsWith), Mi = B2("".slice), yi = Math.min, Ii = Qa("startsWith"), Ei = !(Ii || (fi = mi(String.prototype, "startsWith"), !fi || fi.writable));
      nn2({ target: "String", proto: true, forced: !Ei && !Ii }, { startsWith: function(e3) {
        var t3 = dn(Q2(this));
        Ja(e3);
        var n3 = Gt2(yi(arguments.length > 1 ? arguments[1] : void 0, t3.length)), o3 = dn(e3);
        return vi ? vi(t3, o3, n3) : Mi(t3, n3, n3 + o3.length) === o3;
      } });
      var Ti, Si, Ci, Ai, Di = R2.Promise, Ni = function(e3, t3, n3) {
        for (var o3 in t3)
          At2(e3, o3, t3[o3], n3);
        return e3;
      }, Oi = Ue2("species"), Ri = function(e3) {
        var t3 = oe2(e3), n3 = nt2.f;
        k && t3 && !t3[Oi] && n3(t3, Oi, { configurable: true, get: function() {
          return this;
        } });
      }, Li = R2.TypeError, ki = function(e3, t3) {
        if (re2(t3, e3))
          return e3;
        throw Li("Incorrect invocation");
      }, Pi = R2.TypeError, Gi = function(e3, t3) {
        this.stopped = e3, this.result = t3;
      }, bi = Gi.prototype, wi = function(e3, t3, n3) {
        var o3, r3, a3, s3, i3, c3, u3, l3 = n3 && n3.that, d3 = !(!n3 || !n3.AS_ENTRIES), p3 = !(!n3 || !n3.IS_ITERATOR), g3 = !(!n3 || !n3.INTERRUPTED), h3 = Un(t3, l3), _3 = function(e4) {
          return o3 && po(o3, "normal", e4), new Gi(true, e4);
        }, f3 = function(e4) {
          return d3 ? (Xe2(e4), g3 ? h3(e4[0], e4[1], _3) : h3(e4[0], e4[1])) : g3 ? h3(e4, _3) : h3(e4);
        };
        if (p3)
          o3 = e3;
        else {
          if (!(r3 = yo(e3)))
            throw Pi(fe2(e3) + " is not iterable");
          if (mo(r3)) {
            for (a3 = 0, s3 = bt2(e3); s3 > a3; a3++)
              if ((i3 = f3(e3[a3])) && re2(bi, i3))
                return i3;
            return new Gi(false);
          }
          o3 = Eo(e3, r3);
        }
        for (c3 = o3.next; !(u3 = b2(c3, o3)).done; ) {
          try {
            i3 = f3(u3.value);
          } catch (rS) {
            po(o3, "throw", rS);
          }
          if ("object" == typeof i3 && i3 && re2(bi, i3))
            return i3;
        }
        return new Gi(false);
      }, Ui = R2.TypeError, Fi = function(e3) {
        if (Yn2(e3))
          return e3;
        throw Ui(fe2(e3) + " is not a constructor");
      }, qi = Ue2("species"), Vi = function(e3, t3) {
        var n3, o3 = Xe2(e3).constructor;
        return void 0 === o3 || null == (n3 = Xe2(o3)[qi]) ? t3 : Fi(n3);
      }, xi = R2.TypeError, Ki = function(e3, t3) {
        if (e3 < t3)
          throw xi("Not enough arguments");
        return e3;
      }, Hi = /(?:ipad|iphone|ipod).*applewebkit/i.test(ae2), Bi = "process" == Y2(R2.process), ji = R2.setImmediate, Wi = R2.clearImmediate, Yi = R2.process, $i = R2.Dispatch, zi = R2.Function, Ji = R2.MessageChannel, Xi = R2.String, Qi = 0, Zi = {};
      try {
        Ti = R2.location;
      } catch (rS) {
      }
      var ec = function(e3) {
        if (Ne2(Zi, e3)) {
          var t3 = Zi[e3];
          delete Zi[e3], t3();
        }
      }, tc = function(e3) {
        return function() {
          ec(e3);
        };
      }, nc = function(e3) {
        ec(e3.data);
      }, oc = function(e3) {
        R2.postMessage(Xi(e3), Ti.protocol + "//" + Ti.host);
      };
      ji && Wi || (ji = function(e3) {
        Ki(arguments.length, 1);
        var t3 = ee2(e3) ? e3 : zi(e3), n3 = hr(arguments, 1);
        return Zi[++Qi] = function() {
          Es2(t3, void 0, n3);
        }, Si(Qi), Qi;
      }, Wi = function(e3) {
        delete Zi[e3];
      }, Bi ? Si = function(e3) {
        Yi.nextTick(tc(e3));
      } : $i && $i.now ? Si = function(e3) {
        $i.now(tc(e3));
      } : Ji && !Hi ? (Ai = (Ci = new Ji()).port2, Ci.port1.onmessage = nc, Si = Un(Ai.postMessage, Ai)) : R2.addEventListener && ee2(R2.postMessage) && !R2.importScripts && Ti && "file:" !== Ti.protocol && !L2(oc) ? (Si = oc, R2.addEventListener("message", nc, false)) : Si = "onreadystatechange" in Be2("script") ? function(e3) {
        On.appendChild(Be2("script")).onreadystatechange = function() {
          On.removeChild(this), ec(e3);
        };
      } : function(e3) {
        setTimeout(tc(e3), 0);
      });
      var rc, ac, sc, ic, cc, uc, lc, dc, pc = { set: ji, clear: Wi }, gc = /ipad|iphone|ipod/i.test(ae2) && void 0 !== R2.Pebble, hc = /web0s(?!.*chrome)/i.test(ae2), _c = Ye2.f, fc = pc.set, mc = R2.MutationObserver || R2.WebKitMutationObserver, vc = R2.document, Mc = R2.process, yc = R2.Promise, Ic = _c(R2, "queueMicrotask"), Ec = Ic && Ic.value;
      Ec || (rc = function() {
        var e3, t3;
        for (Bi && (e3 = Mc.domain) && e3.exit(); ac; ) {
          t3 = ac.fn, ac = ac.next;
          try {
            t3();
          } catch (rS) {
            throw ac ? ic() : sc = void 0, rS;
          }
        }
        sc = void 0, e3 && e3.enter();
      }, Hi || Bi || hc || !mc || !vc ? !gc && yc && yc.resolve ? ((lc = yc.resolve(void 0)).constructor = yc, dc = Un(lc.then, lc), ic = function() {
        dc(rc);
      }) : Bi ? ic = function() {
        Mc.nextTick(rc);
      } : (fc = Un(fc, R2), ic = function() {
        fc(rc);
      }) : (cc = true, uc = vc.createTextNode(""), new mc(rc).observe(uc, { characterData: true }), ic = function() {
        uc.data = cc = !cc;
      }));
      var Tc = Ec || function(e3) {
        var t3 = { fn: e3, next: void 0 };
        sc && (sc.next = t3), ac || (ac = t3, ic()), sc = t3;
      }, Sc = function(e3) {
        var t3, n3;
        this.promise = new e3(function(e4, o3) {
          if (void 0 !== t3 || void 0 !== n3)
            throw TypeError("Bad Promise constructor");
          t3 = e4, n3 = o3;
        }), this.resolve = ve2(t3), this.reject = ve2(n3);
      }, Cc = { f: function(e3) {
        return new Sc(e3);
      } }, Ac = function(e3, t3) {
        if (Xe2(e3), te2(t3) && t3.constructor === e3)
          return t3;
        var n3 = Cc.f(e3);
        return (0, n3.resolve)(t3), n3.promise;
      }, Dc = function(e3) {
        try {
          return { error: false, value: e3() };
        } catch (rS) {
          return { error: true, value: rS };
        }
      }, Nc = function() {
        this.head = null, this.tail = null;
      };
      Nc.prototype = { add: function(e3) {
        var t3 = { item: e3, next: null };
        this.head ? this.tail.next = t3 : this.head = t3, this.tail = t3;
      }, get: function() {
        var e3 = this.head;
        if (e3)
          return this.head = e3.next, this.tail === e3 && (this.tail = null), e3.item;
      } };
      var Oc, Rc, Lc, kc, Pc = Nc, Gc = "object" == typeof window, bc = pc.set, wc = Ue2("species"), Uc = "Promise", Fc = It2.getterFor(Uc), qc = It2.set, Vc = It2.getterFor(Uc), xc = Di && Di.prototype, Kc = Di, Hc = xc, Bc = R2.TypeError, jc = R2.document, Wc = R2.process, Yc = Cc.f, $c = Yc, zc = !!(jc && jc.createEvent && R2.dispatchEvent), Jc = ee2(R2.PromiseRejectionEvent), Xc = false, Qc = en2(Uc, function() {
        var e3 = ct2(Kc), t3 = e3 !== String(Kc);
        if (!t3 && 66 === le2)
          return true;
        if (le2 >= 51 && /native code/.test(e3))
          return false;
        var n3 = new Kc(function(e4) {
          e4(1);
        }), o3 = function(e4) {
          e4(function() {
          }, function() {
          });
        };
        return (n3.constructor = {})[wc] = o3, !(Xc = n3.then(function() {
        }) instanceof o3) || !t3 && Gc && !Jc;
      }), Zc = Qc || !Oo(function(e3) {
        Kc.all(e3).catch(function() {
        });
      }), eu = function(e3) {
        var t3;
        return !(!te2(e3) || !ee2(t3 = e3.then)) && t3;
      }, tu = function(e3, t3) {
        var n3, o3, r3, a3 = t3.value, s3 = 1 == t3.state, i3 = s3 ? e3.ok : e3.fail, c3 = e3.resolve, u3 = e3.reject, l3 = e3.domain;
        try {
          i3 ? (s3 || (2 === t3.rejection && su(t3), t3.rejection = 1), true === i3 ? n3 = a3 : (l3 && l3.enter(), n3 = i3(a3), l3 && (l3.exit(), r3 = true)), n3 === e3.promise ? u3(Bc("Promise-chain cycle")) : (o3 = eu(n3)) ? b2(o3, n3, c3, u3) : c3(n3)) : u3(a3);
        } catch (rS) {
          l3 && !r3 && l3.exit(), u3(rS);
        }
      }, nu = function(e3, t3) {
        e3.notified || (e3.notified = true, Tc(function() {
          for (var n3, o3 = e3.reactions; n3 = o3.get(); )
            tu(n3, e3);
          e3.notified = false, t3 && !e3.rejection && ru(e3);
        }));
      }, ou = function(e3, t3, n3) {
        var o3, r3;
        zc ? ((o3 = jc.createEvent("Event")).promise = t3, o3.reason = n3, o3.initEvent(e3, false, true), R2.dispatchEvent(o3)) : o3 = { promise: t3, reason: n3 }, !Jc && (r3 = R2["on" + e3]) ? r3(o3) : "unhandledrejection" === e3 && function(e4, t4) {
          var n4 = R2.console;
          n4 && n4.error && (1 == arguments.length ? n4.error(e4) : n4.error(e4, t4));
        }("Unhandled promise rejection", n3);
      }, ru = function(e3) {
        b2(bc, R2, function() {
          var t3, n3 = e3.facade, o3 = e3.value;
          if (au(e3) && (t3 = Dc(function() {
            Bi ? Wc.emit("unhandledRejection", o3, n3) : ou("unhandledrejection", n3, o3);
          }), e3.rejection = Bi || au(e3) ? 2 : 1, t3.error))
            throw t3.value;
        });
      }, au = function(e3) {
        return 1 !== e3.rejection && !e3.parent;
      }, su = function(e3) {
        b2(bc, R2, function() {
          var t3 = e3.facade;
          Bi ? Wc.emit("rejectionHandled", t3) : ou("rejectionhandled", t3, e3.value);
        });
      }, iu = function(e3, t3, n3) {
        return function(o3) {
          e3(t3, o3, n3);
        };
      }, cu = function(e3, t3, n3) {
        e3.done || (e3.done = true, n3 && (e3 = n3), e3.value = t3, e3.state = 2, nu(e3, true));
      }, uu = function(e3, t3, n3) {
        if (!e3.done) {
          e3.done = true, n3 && (e3 = n3);
          try {
            if (e3.facade === t3)
              throw Bc("Promise can't be resolved itself");
            var o3 = eu(t3);
            o3 ? Tc(function() {
              var n4 = { done: false };
              try {
                b2(o3, t3, iu(uu, n4, e3), iu(cu, n4, e3));
              } catch (rS) {
                cu(n4, rS, e3);
              }
            }) : (e3.value = t3, e3.state = 1, nu(e3, false));
          } catch (rS) {
            cu({ done: false }, rS, e3);
          }
        }
      };
      if (Qc && (Hc = (Kc = function(e3) {
        ki(this, Hc), ve2(e3), b2(Oc, this);
        var t3 = Fc(this);
        try {
          e3(iu(uu, t3), iu(cu, t3));
        } catch (rS) {
          cu(t3, rS);
        }
      }).prototype, (Oc = function(e3) {
        qc(this, { type: Uc, done: false, notified: false, parent: false, reactions: new Pc(), rejection: false, state: 0, value: void 0 });
      }).prototype = Ni(Hc, { then: function(e3, t3) {
        var n3 = Vc(this), o3 = Yc(Vi(this, Kc));
        return n3.parent = true, o3.ok = !ee2(e3) || e3, o3.fail = ee2(t3) && t3, o3.domain = Bi ? Wc.domain : void 0, 0 == n3.state ? n3.reactions.add(o3) : Tc(function() {
          tu(o3, n3);
        }), o3.promise;
      }, catch: function(e3) {
        return this.then(void 0, e3);
      } }), Rc = function() {
        var e3 = new Oc(), t3 = Fc(e3);
        this.promise = e3, this.resolve = iu(uu, t3), this.reject = iu(cu, t3);
      }, Cc.f = Yc = function(e3) {
        return e3 === Kc || e3 === Lc ? new Rc(e3) : $c(e3);
      }, ee2(Di) && xc !== Object.prototype)) {
        kc = xc.then, Xc || (At2(xc, "then", function(e3, t3) {
          var n3 = this;
          return new Kc(function(e4, t4) {
            b2(kc, n3, e4, t4);
          }).then(e3, t3);
        }, { unsafe: true }), At2(xc, "catch", Hc.catch, { unsafe: true }));
        try {
          delete xc.constructor;
        } catch (rS) {
        }
        tr2 && tr2(xc, Hc);
      }
      nn2({ global: true, wrap: true, forced: Qc }, { Promise: Kc }), zo(Kc, Uc, false), Ri(Uc), Lc = oe2(Uc), nn2({ target: Uc, stat: true, forced: Qc }, { reject: function(e3) {
        var t3 = Yc(this);
        return b2(t3.reject, void 0, e3), t3.promise;
      } }), nn2({ target: Uc, stat: true, forced: Qc }, { resolve: function(e3) {
        return Ac(this, e3);
      } }), nn2({ target: Uc, stat: true, forced: Zc }, { all: function(e3) {
        var t3 = this, n3 = Yc(t3), o3 = n3.resolve, r3 = n3.reject, a3 = Dc(function() {
          var n4 = ve2(t3.resolve), a4 = [], s3 = 0, i3 = 1;
          wi(e3, function(e4) {
            var c3 = s3++, u3 = false;
            i3++, b2(n4, t3, e4).then(function(e5) {
              u3 || (u3 = true, a4[c3] = e5, --i3 || o3(a4));
            }, r3);
          }), --i3 || o3(a4);
        });
        return a3.error && r3(a3.value), n3.promise;
      }, race: function(e3) {
        var t3 = this, n3 = Yc(t3), o3 = n3.reject, r3 = Dc(function() {
          var r4 = ve2(t3.resolve);
          wi(e3, function(e4) {
            b2(r4, t3, e4).then(n3.resolve, o3);
          });
        });
        return r3.error && o3(r3.value), n3.promise;
      } });
      var lu = Fo.codeAt;
      nn2({ target: "String", proto: true }, { codePointAt: function(e3) {
        return lu(this, e3);
      } });
      var du = ca.UNSUPPORTED_Y, pu = Math.min, gu = [].push, hu = B2(/./.exec), _u = B2(gu), fu = B2("".slice);
      wa("split", function(e3, t3, n3) {
        var o3;
        return o3 = "c" == "abbc".split(/(b)*/)[1] || 4 != "test".split(/(?:)/, -1).length || 2 != "ab".split(/(?:ab)*/).length || 4 != ".".split(/(.?)(.?)/).length || ".".split(/()()/).length > 1 || "".split(/.?/).length ? function(e4, n4) {
          var o4 = dn(Q2(this)), r3 = void 0 === n4 ? 4294967295 : n4 >>> 0;
          if (0 === r3)
            return [];
          if (void 0 === e4)
            return [o4];
          if (!$a(e4))
            return b2(t3, o4, e4, r3);
          for (var a3, s3, i3, c3 = [], u3 = (e4.ignoreCase ? "i" : "") + (e4.multiline ? "m" : "") + (e4.unicode ? "u" : "") + (e4.sticky ? "y" : ""), l3 = 0, d3 = new RegExp(e4.source, u3 + "g"); (a3 = b2(Sa, d3, o4)) && !((s3 = d3.lastIndex) > l3 && (_u(c3, fu(o4, l3, a3.index)), a3.length > 1 && a3.index < o4.length && Es2(gu, c3, ci(a3, 1)), i3 = a3[0].length, l3 = s3, c3.length >= r3)); )
            d3.lastIndex === a3.index && d3.lastIndex++;
          return l3 === o4.length ? !i3 && hu(d3, "") || _u(c3, "") : _u(c3, fu(o4, l3)), c3.length > r3 ? ci(c3, 0, r3) : c3;
        } : "0".split(void 0, 0).length ? function(e4, n4) {
          return void 0 === e4 && 0 === n4 ? [] : b2(t3, this, e4, n4);
        } : t3, [function(t4, n4) {
          var r3 = Q2(this), a3 = null == t4 ? void 0 : Me2(t4, e3);
          return a3 ? b2(a3, t4, r3, n4) : b2(o3, dn(r3), t4, n4);
        }, function(e4, r3) {
          var a3 = Xe2(this), s3 = dn(e4), i3 = n3(o3, a3, s3, r3, o3 !== t3);
          if (i3.done)
            return i3.value;
          var c3 = Vi(a3, RegExp), u3 = a3.unicode, l3 = (a3.ignoreCase ? "i" : "") + (a3.multiline ? "m" : "") + (a3.unicode ? "u" : "") + (du ? "g" : "y"), d3 = new c3(du ? "^(?:" + a3.source + ")" : a3, l3), p3 = void 0 === r3 ? 4294967295 : r3 >>> 0;
          if (0 === p3)
            return [];
          if (0 === s3.length)
            return null === Va(d3, s3) ? [s3] : [];
          for (var g3 = 0, h3 = 0, _3 = []; h3 < s3.length; ) {
            d3.lastIndex = du ? 0 : h3;
            var f3, m3 = Va(d3, du ? fu(s3, h3) : s3);
            if (null === m3 || (f3 = pu(Gt2(d3.lastIndex + (du ? h3 : 0)), s3.length)) === g3)
              h3 = Fa(s3, h3, u3);
            else {
              if (_u(_3, fu(s3, g3, h3)), _3.length === p3)
                return _3;
              for (var v3 = 1; v3 <= m3.length - 1; v3++)
                if (_u(_3, m3[v3]), _3.length === p3)
                  return _3;
              h3 = g3 = f3;
            }
          }
          return _u(_3, fu(s3, g3)), _3;
        }];
      }, !!L2(function() {
        var e3 = /(?:)/, t3 = e3.exec;
        e3.exec = function() {
          return t3.apply(this, arguments);
        };
        var n3 = "ab".split(e3);
        return 2 !== n3.length || "a" !== n3[0] || "b" !== n3[1];
      }), du);
      var mu = vn.trim, vu = B2("".charAt), Mu = R2.parseFloat, yu = R2.Symbol, Iu = yu && yu.iterator, Eu = 1 / Mu(pn + "-0") != -Infinity || Iu && !L2(function() {
        Mu(Object(Iu));
      }) ? function(e3) {
        var t3 = mu(dn(e3)), n3 = Mu(t3);
        return 0 === n3 && "-" == vu(t3, 0) ? -0 : n3;
      } : Mu;
      nn2({ global: true, forced: parseFloat != Eu }, { parseFloat: Eu });
      var Tu = function() {
        function e3() {
          var t3 = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0, n3 = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0;
          o2(this, e3), this.high = t3, this.low = n3;
        }
        return a2(e3, [{ key: "equal", value: function(e4) {
          return null !== e4 && (this.low === e4.low && this.high === e4.high);
        } }, { key: "toString", value: function() {
          var e4 = Number(this.high).toString(16), t3 = Number(this.low).toString(16);
          if (t3.length < 8)
            for (var n3 = 8 - t3.length; n3; )
              t3 = "0" + t3, n3--;
          return e4 + t3;
        } }]), e3;
      }(), Su = { TEST: { CHINA: { DEFAULT: "wss://wss-dev.tim.qq.com" }, OVERSEA: { DEFAULT: "wss://wss-dev.tim.qq.com" }, SINGAPORE: { DEFAULT: "wss://wsssgp-dev.im.qcloud.com" }, KOREA: { DEFAULT: "wss://wsskr-dev.im.qcloud.com" }, GERMANY: { DEFAULT: "wss://wssger-dev.im.qcloud.com" }, IND: { DEFAULT: "wss://wssind-dev.im.qcloud.com" } }, PRODUCTION: { CHINA: { DEFAULT: "wss://wss.im.qcloud.com", BACKUP: "wss://wss.tim.qq.com", STAT: "https://api.im.qcloud.com" }, OVERSEA: { DEFAULT: "wss://wss.im.qcloud.com", BACKUP: "wss://wss.my-imcloud.com", STAT: "https://api.my-imcloud.com" }, SINGAPORE: { DEFAULT: "wss://wsssgp.im.qcloud.com", BACKUP: "wss://wsssgp.my-imcloud.com", STAT: "https://apisgp.my-imcloud.com" }, KOREA: { DEFAULT: "wss://wsskr.im.qcloud.com", BACKUP: "wss://wsskr.my-imcloud.com", STAT: "https://apikr.my-imcloud.com" }, GERMANY: { DEFAULT: "wss://wssger.im.qcloud.com", BACKUP: "wss://wssger.my-imcloud.com", STAT: "https://apiger.my-imcloud.com" }, IND: { DEFAULT: "wss://wssind.im.qcloud.com", BACKUP: "wss://wssind.my-imcloud.com", STAT: "https://apiind.my-imcloud.com" } } }, Cu = { WEB: 7, WX_MP: 8, QQ_MP: 9, TT_MP: 10, BAIDU_MP: 11, ALI_MP: 12, UNI_NATIVE_APP: 15 }, Au = "1.7.3", Du = 537048168, Nu = "CHINA", Ou = "OVERSEA", Ru = "SINGAPORE", Lu = "KOREA", ku = "GERMANY", Pu = "IND", Gu = { HOST: { CURRENT: { DEFAULT: "wss://wss.im.qcloud.com", STAT: "https://api.im.qcloud.com" }, setCurrent: function() {
        var e3 = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : Nu;
        this.CURRENT = Su.PRODUCTION[e3];
      } }, NAME: { OPEN_IM: "openim", GROUP: "group_open_http_svc", GROUP_COMMUNITY: "million_group_open_http_svc", GROUP_ATTR: "group_open_attr_http_svc", FRIEND: "sns", PROFILE: "profile", RECENT_CONTACT: "recentcontact", PIC: "openpic", BIG_GROUP_NO_AUTH: "group_open_http_noauth_svc", BIG_GROUP_LONG_POLLING: "group_open_long_polling_http_svc", BIG_GROUP_LONG_POLLING_NO_AUTH: "group_open_long_polling_http_noauth_svc", IM_OPEN_STAT: "imopenstat", WEB_IM: "webim", IM_COS_SIGN: "im_cos_sign_svr", CUSTOM_UPLOAD: "im_cos_msg", HEARTBEAT: "heartbeat", IM_OPEN_PUSH: "im_open_push", IM_OPEN_STATUS: "im_open_status", IM_LONG_MESSAGE: "im_long_msg", IM_CONFIG_MANAGER: "im_sdk_config_mgr", STAT_SERVICE: "StatSvc", OVERLOAD_PUSH: "OverLoadPush" }, CMD: { ACCESS_LAYER: "accesslayer", LOGIN: "wslogin", LOGOUT_LONG_POLL: "longpollinglogout", LOGOUT: "wslogout", HELLO: "wshello", PORTRAIT_GET: "portrait_get_all", PORTRAIT_SET: "portrait_set", GET_LONG_POLL_ID: "getlongpollingid", LONG_POLL: "longpolling", AVCHATROOM_LONG_POLL: "get_msg", ADD_FRIEND: "friend_add", UPDATE_FRIEND: "friend_update", GET_FRIEND_LIST: "friend_get", GET_FRIEND_PROFILE: "friend_get_list", DELETE_FRIEND: "friend_delete", CHECK_FRIEND: "friend_check", GET_FRIEND_GROUP_LIST: "group_get", RESPOND_FRIEND_APPLICATION: "friend_response", GET_FRIEND_APPLICATION_LIST: "pendency_get", DELETE_FRIEND_APPLICATION: "pendency_delete", REPORT_FRIEND_APPLICATION: "pendency_report", GET_GROUP_APPLICATION: "get_pendency", CREATE_FRIEND_GROUP: "group_add", DELETE_FRIEND_GROUP: "group_delete", UPDATE_FRIEND_GROUP: "group_update", GET_BLACKLIST: "black_list_get", ADD_BLACKLIST: "black_list_add", DELETE_BLACKLIST: "black_list_delete", CREATE_GROUP: "create_group", GET_JOINED_GROUPS: "get_joined_group_list", SET_GROUP_ATTRIBUTES: "set_group_attr", MODIFY_GROUP_ATTRIBUTES: "modify_group_attr", DELETE_GROUP_ATTRIBUTES: "delete_group_attr", CLEAR_GROUP_ATTRIBUTES: "clear_group_attr", GET_GROUP_ATTRIBUTES: "get_group_attr", SEND_MESSAGE: "sendmsg", REVOKE_C2C_MESSAGE: "msgwithdraw", DELETE_C2C_MESSAGE: "delete_c2c_msg_ramble", MODIFY_C2C_MESSAGE: "modify_c2c_msg", SEND_GROUP_MESSAGE: "send_group_msg", REVOKE_GROUP_MESSAGE: "group_msg_recall", DELETE_GROUP_MESSAGE: "delete_group_ramble_msg_by_seq", MODIFY_GROUP_MESSAGE: "modify_group_msg", GET_GROUP_INFO: "get_group_self_member_info", GET_GROUP_MEMBER_INFO: "get_specified_group_member_info", GET_GROUP_MEMBER_LIST: "get_group_member_info", QUIT_GROUP: "quit_group", CHANGE_GROUP_OWNER: "change_group_owner", DESTROY_GROUP: "destroy_group", ADD_GROUP_MEMBER: "add_group_member", DELETE_GROUP_MEMBER: "delete_group_member", SEARCH_GROUP_BY_ID: "get_group_public_info", APPLY_JOIN_GROUP: "apply_join_group", HANDLE_APPLY_JOIN_GROUP: "handle_apply_join_group", HANDLE_GROUP_INVITATION: "handle_invite_join_group", MODIFY_GROUP_INFO: "modify_group_base_info", MODIFY_GROUP_MEMBER_INFO: "modify_group_member_info", DELETE_GROUP_SYSTEM_MESSAGE: "deletemsg", DELETE_GROUP_AT_TIPS: "deletemsg", GET_CONVERSATION_LIST: "get", PAGING_GET_CONVERSATION_LIST: "page_get", DELETE_CONVERSATION: "delete", PIN_CONVERSATION: "top", GET_MESSAGES: "getmsg", GET_C2C_ROAM_MESSAGES: "getroammsg", SET_C2C_PEER_MUTE_NOTIFICATIONS: "set_c2c_peer_mute_notifications", GET_C2C_PEER_MUTE_NOTIFICATIONS: "get_c2c_peer_mute_notifications", GET_GROUP_ROAM_MESSAGES: "group_msg_get", GET_READ_RECEIPT: "get_group_msg_receipt", GET_READ_RECEIPT_DETAIL: "get_group_msg_receipt_detail", SEND_READ_RECEIPT: "group_msg_receipt", SEND_C2C_READ_RECEIPT: "c2c_msg_read_receipt", SET_C2C_MESSAGE_READ: "msgreaded", GET_PEER_READ_TIME: "get_peer_read_time", SET_GROUP_MESSAGE_READ: "msg_read_report", FILE_READ_AND_WRITE_AUTHKEY: "authkey", FILE_UPLOAD: "pic_up", COS_SIGN: "cos", COS_PRE_SIG: "pre_sig", VIDEO_COVER: "video_cover", TIM_WEB_REPORT_V2: "tim_web_report_v2", BIG_DATA_HALLWAY_AUTH_KEY: "authkey", GET_ONLINE_MEMBER_NUM: "get_online_member_num", ALIVE: "alive", MESSAGE_PUSH: "msg_push", MULTI_MESSAGE_PUSH: "multi_msg_push_ws", MESSAGE_PUSH_ACK: "ws_msg_push_ack", STATUS_FORCE_OFFLINE: "stat_forceoffline", DOWNLOAD_MERGER_MESSAGE: "get_relay_json_msg", UPLOAD_MERGER_MESSAGE: "save_relay_json_msg", FETCH_CLOUD_CONTROL_CONFIG: "fetch_config", PUSHED_CLOUD_CONTROL_CONFIG: "push_configv2", FETCH_COMMERCIAL_CONFIG: "fetch_imsdk_purchase_bitsv2", PUSHED_COMMERCIAL_CONFIG: "push_imsdk_purchase_bitsv2", KICK_OTHER: "KickOther", OVERLOAD_NOTIFY: "notify2", SET_ALL_MESSAGE_READ: "read_all_unread_msg", CREATE_TOPIC: "create_topic", DELETE_TOPIC: "destroy_topic", UPDATE_TOPIC_PROFILE: "modify_topic", GET_TOPIC_LIST: "get_topic" }, CHANNEL: { SOCKET: 1, XHR: 2, AUTO: 0 }, NAME_VERSION: { openim: "v4", group_open_http_svc: "v4", sns: "v4", profile: "v4", recentcontact: "v4", openpic: "v4", group_open_http_noauth_svc: "v4", group_open_long_polling_http_svc: "v4", group_open_long_polling_http_noauth_svc: "v4", imopenstat: "v4", im_cos_sign_svr: "v4", im_cos_msg: "v4", webim: "v4", im_open_push: "v4", im_open_status: "v4" } }, bu = { SEARCH_MSG: new Tu(0, Math.pow(2, 0)).toString(), SEARCH_GRP_SNS: new Tu(0, Math.pow(2, 1)).toString(), AVCHATROOM_HISTORY_MSG: new Tu(0, Math.pow(2, 2)).toString(), GRP_COMMUNITY: new Tu(0, Math.pow(2, 3)).toString(), MSG_TO_SPECIFIED_GRP_MBR: new Tu(0, Math.pow(2, 4)).toString() };
      Gu.HOST.setCurrent(Nu);
      var wu, Uu = "undefined" != typeof wx && "function" == typeof wx.getSystemInfoSync && Boolean(wx.getSystemInfoSync().fontSizeSetting), Fu = "undefined" != typeof qq && "function" == typeof qq.getSystemInfoSync && Boolean(qq.getSystemInfoSync().fontSizeSetting), qu = "undefined" != typeof tt && "function" == typeof tt.getSystemInfoSync && Boolean(tt.getSystemInfoSync().fontSizeSetting), Vu = "undefined" != typeof swan && "function" == typeof swan.getSystemInfoSync && Boolean(swan.getSystemInfoSync().fontSizeSetting), xu = "undefined" != typeof my && "function" == typeof my.getSystemInfoSync && Boolean(my.getSystemInfoSync().fontSizeSetting), Ku = "undefined" != typeof uni && "undefined" == typeof window, Hu = "undefined" != typeof uni, Bu = Uu || Fu || qu || Vu || xu || Ku, ju = ("undefined" != typeof uni || "undefined" != typeof window) && !Bu, Wu = Fu ? qq : qu ? tt : Vu ? swan : xu ? my : Uu ? wx : Ku ? uni : {}, Yu = (wu = "WEB", cl ? wu = "WEB" : Fu ? wu = "QQ_MP" : qu ? wu = "TT_MP" : Vu ? wu = "BAIDU_MP" : xu ? wu = "ALI_MP" : Uu ? wu = "WX_MP" : Ku && (wu = "UNI_NATIVE_APP"), Cu[wu]), $u2 = ju && window && window.navigator && window.navigator.userAgent || "", zu = /AppleWebKit\/([\d.]+)/i.exec($u2), Ju = (zu && parseFloat(zu.pop()), /iPad/i.test($u2)), Xu = /iPhone/i.test($u2) && !Ju, Qu = /iPod/i.test($u2), Zu = Xu || Ju || Qu, el = function() {
        var e3 = $u2.match(/OS (\d+)_/i);
        return e3 && e3[1] ? e3[1] : null;
      }(), tl = /Android/i.test($u2), nl = function() {
        var e3 = $u2.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);
        if (!e3)
          return null;
        var t3 = e3[1] && parseFloat(e3[1]), n3 = e3[2] && parseFloat(e3[2]);
        return t3 && n3 ? parseFloat(e3[1] + "." + e3[2]) : t3 || null;
      }(), al = (function() {
        var e3 = $u2.match(/Chrome\/(\d+)/);
        e3 && e3[1] && parseFloat(e3[1]);
      }(), /MSIE/.test($u2) || $u2.indexOf("Trident") > -1 && $u2.indexOf("rv:11.0") > -1), sl = function() {
        var e3 = /MSIE\s(\d+)\.\d/.exec($u2), t3 = e3 && parseFloat(e3[1]);
        return !t3 && /Trident\/7.0/i.test($u2) && /rv:11.0/.test($u2) && (t3 = 11), t3;
      }(), cl = (function() {
        var e3 = $u2.match(/TBS\/(\d+)/i);
        if (e3 && e3[1])
          e3[1];
      }(), /(micromessenger|webbrowser)/i.test($u2)), ul = /Windows/i.test($u2), ll = /MAC OS X/i.test($u2), dl = ju && "undefined" != typeof Worker && !al, pl = tl || Zu, gl = L2(function() {
        if ("function" == typeof ArrayBuffer) {
          var e3 = new ArrayBuffer(8);
          Object.isExtensible(e3) && Object.defineProperty(e3, "a", { value: 8 });
        }
      }), hl = Object.isExtensible, _l = L2(function() {
        hl(1);
      }) || gl ? function(e3) {
        return !!te2(e3) && ((!gl || "ArrayBuffer" != Y2(e3)) && (!hl || hl(e3)));
      } : hl, fl = !L2(function() {
        return Object.isExtensible(Object.preventExtensions({}));
      }), ml = A2(function(e3) {
        var t3 = nt2.f, n3 = false, o3 = ke2("meta"), r3 = 0, a3 = function(e4) {
          t3(e4, o3, { value: { objectID: "O" + r3++, weakData: {} } });
        }, s3 = e3.exports = { enable: function() {
          s3.enable = function() {
          }, n3 = true;
          var e4 = Ht2.f, t4 = B2([].splice), r4 = {};
          r4[o3] = 1, e4(r4).length && (Ht2.f = function(n4) {
            for (var r5 = e4(n4), a4 = 0, s4 = r5.length; a4 < s4; a4++)
              if (r5[a4] === o3) {
                t4(r5, a4, 1);
                break;
              }
            return r5;
          }, nn2({ target: "Object", stat: true, forced: true }, { getOwnPropertyNames: di.f }));
        }, fastKey: function(e4, t4) {
          if (!te2(e4))
            return "symbol" == typeof e4 ? e4 : ("string" == typeof e4 ? "S" : "P") + e4;
          if (!Ne2(e4, o3)) {
            if (!_l(e4))
              return "F";
            if (!t4)
              return "E";
            a3(e4);
          }
          return e4[o3].objectID;
        }, getWeakData: function(e4, t4) {
          if (!Ne2(e4, o3)) {
            if (!_l(e4))
              return true;
            if (!t4)
              return false;
            a3(e4);
          }
          return e4[o3].weakData;
        }, onFreeze: function(e4) {
          return fl && n3 && _l(e4) && !Ne2(e4, o3) && a3(e4), e4;
        } };
        gt2[o3] = true;
      }), vl = (ml.enable, ml.fastKey, ml.getWeakData, ml.onFreeze, nt2.f), Ml = ml.fastKey, yl = It2.set, Il = It2.getterFor;
      !function(e3, t3, n3) {
        var o3 = -1 !== e3.indexOf("Map"), r3 = -1 !== e3.indexOf("Weak"), a3 = o3 ? "set" : "add", s3 = R2[e3], i3 = s3 && s3.prototype, c3 = s3, u3 = {}, l3 = function(e4) {
          var t4 = B2(i3[e4]);
          At2(i3, e4, "add" == e4 ? function(e5) {
            return t4(this, 0 === e5 ? 0 : e5), this;
          } : "delete" == e4 ? function(e5) {
            return !(r3 && !te2(e5)) && t4(this, 0 === e5 ? 0 : e5);
          } : "get" == e4 ? function(e5) {
            return r3 && !te2(e5) ? void 0 : t4(this, 0 === e5 ? 0 : e5);
          } : "has" == e4 ? function(e5) {
            return !(r3 && !te2(e5)) && t4(this, 0 === e5 ? 0 : e5);
          } : function(e5, n4) {
            return t4(this, 0 === e5 ? 0 : e5, n4), this;
          });
        };
        if (en2(e3, !ee2(s3) || !(r3 || i3.forEach && !L2(function() {
          new s3().entries().next();
        }))))
          c3 = n3.getConstructor(t3, e3, o3, a3), ml.enable();
        else if (en2(e3, true)) {
          var d3 = new c3(), p3 = d3[a3](r3 ? {} : -0, 1) != d3, g3 = L2(function() {
            d3.has(1);
          }), h3 = Oo(function(e4) {
            new s3(e4);
          }), _3 = !r3 && L2(function() {
            for (var e4 = new s3(), t4 = 5; t4--; )
              e4[a3](t4, t4);
            return !e4.has(-0);
          });
          h3 || ((c3 = t3(function(e4, t4) {
            ki(e4, i3);
            var n4 = Fr(new s3(), e4, c3);
            return null != t4 && wi(t4, n4[a3], { that: n4, AS_ENTRIES: o3 }), n4;
          })).prototype = i3, i3.constructor = c3), (g3 || _3) && (l3("delete"), l3("has"), o3 && l3("get")), (_3 || p3) && l3(a3), r3 && i3.clear && delete i3.clear;
        }
        u3[e3] = c3, nn2({ global: true, forced: c3 != s3 }, u3), zo(c3, e3), r3 || n3.setStrong(c3, e3, o3);
      }("Map", function(e3) {
        return function() {
          return e3(this, arguments.length ? arguments[0] : void 0);
        };
      }, { getConstructor: function(e3, t3, n3, o3) {
        var r3 = e3(function(e4, r4) {
          ki(e4, a3), yl(e4, { type: t3, index: bn(null), first: void 0, last: void 0, size: 0 }), k || (e4.size = 0), null != r4 && wi(r4, e4[o3], { that: e4, AS_ENTRIES: n3 });
        }), a3 = r3.prototype, s3 = Il(t3), i3 = function(e4, t4, n4) {
          var o4, r4, a4 = s3(e4), i4 = c3(e4, t4);
          return i4 ? i4.value = n4 : (a4.last = i4 = { index: r4 = Ml(t4, true), key: t4, value: n4, previous: o4 = a4.last, next: void 0, removed: false }, a4.first || (a4.first = i4), o4 && (o4.next = i4), k ? a4.size++ : e4.size++, "F" !== r4 && (a4.index[r4] = i4)), e4;
        }, c3 = function(e4, t4) {
          var n4, o4 = s3(e4), r4 = Ml(t4);
          if ("F" !== r4)
            return o4.index[r4];
          for (n4 = o4.first; n4; n4 = n4.next)
            if (n4.key == t4)
              return n4;
        };
        return Ni(a3, { clear: function() {
          for (var e4 = s3(this), t4 = e4.index, n4 = e4.first; n4; )
            n4.removed = true, n4.previous && (n4.previous = n4.previous.next = void 0), delete t4[n4.index], n4 = n4.next;
          e4.first = e4.last = void 0, k ? e4.size = 0 : this.size = 0;
        }, delete: function(e4) {
          var t4 = s3(this), n4 = c3(this, e4);
          if (n4) {
            var o4 = n4.next, r4 = n4.previous;
            delete t4.index[n4.index], n4.removed = true, r4 && (r4.next = o4), o4 && (o4.previous = r4), t4.first == n4 && (t4.first = o4), t4.last == n4 && (t4.last = r4), k ? t4.size-- : this.size--;
          }
          return !!n4;
        }, forEach: function(e4) {
          for (var t4, n4 = s3(this), o4 = Un(e4, arguments.length > 1 ? arguments[1] : void 0); t4 = t4 ? t4.next : n4.first; )
            for (o4(t4.value, t4.key, this); t4 && t4.removed; )
              t4 = t4.previous;
        }, has: function(e4) {
          return !!c3(this, e4);
        } }), Ni(a3, n3 ? { get: function(e4) {
          var t4 = c3(this, e4);
          return t4 && t4.value;
        }, set: function(e4, t4) {
          return i3(this, 0 === e4 ? 0 : e4, t4);
        } } : { add: function(e4) {
          return i3(this, e4 = 0 === e4 ? 0 : e4, e4);
        } }), k && vl(a3, "size", { get: function() {
          return s3(this).size;
        } }), r3;
      }, setStrong: function(e3, t3, n3) {
        var o3 = t3 + " Iterator", r3 = Il(t3), a3 = Il(o3);
        cr(e3, t3, function(e4, t4) {
          yl(this, { type: o3, target: e4, state: r3(e4), kind: t4, last: void 0 });
        }, function() {
          for (var e4 = a3(this), t4 = e4.kind, n4 = e4.last; n4 && n4.removed; )
            n4 = n4.previous;
          return e4.target && (e4.last = n4 = n4 ? n4.next : e4.state.first) ? "keys" == t4 ? { value: n4.key, done: false } : "values" == t4 ? { value: n4.value, done: false } : { value: [n4.key, n4.value], done: false } : (e4.target = void 0, { value: void 0, done: true });
        }, n3 ? "entries" : "values", !n3, true), Ri(t3);
      } });
      var El, Tl, Sl = "undefined" != typeof commonjsGlobal ? commonjsGlobal : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {};
      El = "undefined" != typeof console ? console : void 0 !== Sl && Sl.console ? Sl.console : "undefined" != typeof window && window.console ? window.console : {};
      for (var Cl = function() {
      }, Al = ["assert", "clear", "count", "debug", "dir", "dirxml", "error", "group", "groupCollapsed", "groupEnd", "info", "log", "profile", "profileEnd", "table", "time", "timeEnd", "timeStamp", "trace", "warn"], Dl = Al.length; Dl--; )
        Tl = Al[Dl], console[Tl] || (El[Tl] = Cl);
      var Nl = El, Ol = 0, Rl = function() {
        return (/* @__PURE__ */ new Date()).getTime() + Ol;
      }, Ll = function() {
        Ol = 0;
      }, kl = function() {
        return Math.floor(Rl() / 1e3);
      }, Pl = 0, Gl = /* @__PURE__ */ new Map();
      function bl() {
        var e3, t3 = ((e3 = /* @__PURE__ */ new Date()).setTime(Rl()), e3);
        return "TIM " + t3.toLocaleTimeString("en-US", { hour12: false }) + "." + function(e4) {
          var t4;
          switch (e4.toString().length) {
            case 1:
              t4 = "00" + e4;
              break;
            case 2:
              t4 = "0" + e4;
              break;
            default:
              t4 = e4;
          }
          return t4;
        }(t3.getMilliseconds()) + ":";
      }
      var wl = { arguments2String: function(e3) {
        var t3;
        if (1 === e3.length)
          t3 = bl() + e3[0];
        else {
          t3 = bl();
          for (var n3 = 0, o3 = e3.length; n3 < o3; n3++)
            ed(e3[n3]) ? nd(e3[n3]) ? t3 += cd(e3[n3]) : t3 += JSON.stringify(e3[n3]) : t3 += e3[n3], t3 += " ";
        }
        return t3;
      }, debug: function() {
        if (Pl <= -1) {
          var e3 = this.arguments2String(arguments);
          Nl.debug(e3);
        }
      }, log: function() {
        if (Pl <= 0) {
          var e3 = this.arguments2String(arguments);
          Nl.log(e3);
        }
      }, info: function() {
        if (Pl <= 1) {
          var e3 = this.arguments2String(arguments);
          Nl.info(e3);
        }
      }, warn: function() {
        if (Pl <= 2) {
          var e3 = this.arguments2String(arguments);
          Nl.warn(e3);
        }
      }, error: function() {
        if (Pl <= 3) {
          var e3 = this.arguments2String(arguments);
          Nl.error(e3);
        }
      }, time: function(e3) {
        Gl.set(e3, sd.now());
      }, timeEnd: function(e3) {
        if (Gl.has(e3)) {
          var t3 = sd.now() - Gl.get(e3);
          return Gl.delete(e3), t3;
        }
        return Nl.warn("未找到对应label: ".concat(e3, ", 请在调用 logger.timeEnd 前，调用 logger.time")), 0;
      }, setLevel: function(e3) {
        e3 < 4 && Nl.log(bl() + "set level from " + Pl + " to " + e3), Pl = e3;
      }, getLevel: function() {
        return Pl;
      } }, Ul = { JPG: 1, JPEG: 1, GIF: 2, PNG: 3, BMP: 4, UNKNOWN: 255 }, Fl = { NICK: "Tag_Profile_IM_Nick", GENDER: "Tag_Profile_IM_Gender", BIRTHDAY: "Tag_Profile_IM_BirthDay", LOCATION: "Tag_Profile_IM_Location", SELFSIGNATURE: "Tag_Profile_IM_SelfSignature", ALLOWTYPE: "Tag_Profile_IM_AllowType", LANGUAGE: "Tag_Profile_IM_Language", AVATAR: "Tag_Profile_IM_Image", MESSAGESETTINGS: "Tag_Profile_IM_MsgSettings", ADMINFORBIDTYPE: "Tag_Profile_IM_AdminForbidType", LEVEL: "Tag_Profile_IM_Level", ROLE: "Tag_Profile_IM_Role" }, ql = { UNKNOWN: "Gender_Type_Unknown", FEMALE: "Gender_Type_Female", MALE: "Gender_Type_Male" }, Vl = { NONE: "AdminForbid_Type_None", SEND_OUT: "AdminForbid_Type_SendOut" }, xl = { NEED_CONFIRM: "AllowType_Type_NeedConfirm", ALLOW_ANY: "AllowType_Type_AllowAny", DENY_ANY: "AllowType_Type_DenyAny" }, Kl = "JoinedSuccess", Hl = "WaitAdminApproval", Bl = "@TGS#_", jl = "@TOPIC#_", Wl = ["url"], Yl = function(e3) {
        return "file" === od(e3);
      }, $l = function(e3) {
        return null !== e3 && ("number" == typeof e3 && !isNaN(e3 - 0) || "object" === n2(e3) && e3.constructor === Number);
      }, zl = function(e3) {
        return "string" == typeof e3;
      }, Jl = function(e3) {
        return null !== e3 && "object" === n2(e3);
      }, Xl = function(e3) {
        if ("object" !== n2(e3) || null === e3)
          return false;
        var t3 = Object.getPrototypeOf(e3);
        if (null === t3)
          return true;
        for (var o3 = t3; null !== Object.getPrototypeOf(o3); )
          o3 = Object.getPrototypeOf(o3);
        return t3 === o3;
      }, Ql = function(e3) {
        return "function" == typeof Array.isArray ? Array.isArray(e3) : "array" === od(e3);
      }, Zl = function(e3) {
        return void 0 === e3;
      }, ed = function(e3) {
        return Ql(e3) || Jl(e3);
      }, td = function(e3) {
        return "function" == typeof e3;
      }, nd = function(e3) {
        return e3 instanceof Error;
      }, od = function(e3) {
        return Object.prototype.toString.call(e3).match(/^\[object (.*)\]$/)[1].toLowerCase();
      }, rd = function(e3) {
        if ("string" != typeof e3)
          return false;
        var t3 = e3[0];
        return !/[^a-zA-Z0-9]/.test(t3);
      }, ad = 0;
      Date.now || (Date.now = function() {
        return (/* @__PURE__ */ new Date()).getTime();
      });
      var sd = { now: function() {
        0 === ad && (ad = Date.now() - 1);
        var e3 = Date.now() - ad;
        return e3 > 4294967295 ? (ad += 4294967295, Date.now() - ad) : e3;
      }, utc: function() {
        return Math.round(Date.now() / 1e3);
      } }, id2 = function e3(t3, n3, o3, r3) {
        if (!ed(t3) || !ed(n3))
          return 0;
        for (var a3, s3 = 0, i3 = Object.keys(n3), c3 = 0, u3 = i3.length; c3 < u3; c3++)
          if (a3 = i3[c3], !(Zl(n3[a3]) || o3 && o3.includes(a3)))
            if (ed(t3[a3]) && ed(n3[a3]))
              s3 += e3(t3[a3], n3[a3], o3, r3);
            else {
              if (r3 && r3.includes(n3[a3]))
                continue;
              t3[a3] !== n3[a3] && (t3[a3] = n3[a3], s3 += 1);
            }
        return s3;
      }, cd = function(e3) {
        return JSON.stringify(e3, ["message", "code"]);
      }, ud = function(e3) {
        if (0 === e3.length)
          return 0;
        for (var t3 = 0, n3 = 0, o3 = "undefined" != typeof document && void 0 !== document.characterSet ? document.characterSet : "UTF-8"; void 0 !== e3[t3]; )
          n3 += e3[t3++].charCodeAt[t3] <= 255 ? 1 : false === o3 ? 3 : 2;
        return n3;
      }, ld = function(e3) {
        var t3 = e3 || 99999999;
        return Math.round(Math.random() * t3);
      }, dd = "0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ", pd = dd.length, gd = function(e3, t3) {
        for (var n3 in e3)
          if (e3[n3] === t3)
            return true;
        return false;
      }, hd = {}, _d = function() {
        if (Bu)
          return "https:";
        if (ju && "undefined" == typeof window)
          return "https:";
        var e3 = window.location.protocol;
        return ["http:", "https:"].indexOf(e3) < 0 && (e3 = "http:"), e3;
      }, fd = function(e3) {
        return -1 === e3.indexOf("http://") || -1 === e3.indexOf("https://") ? "https://" + e3 : e3.replace(/https|http/, "https");
      }, md = function e3(t3) {
        if (0 === Object.getOwnPropertyNames(t3).length)
          return /* @__PURE__ */ Object.create(null);
        var o3 = Array.isArray(t3) ? [] : /* @__PURE__ */ Object.create(null), r3 = "";
        for (var a3 in t3)
          null !== t3[a3] ? void 0 !== t3[a3] ? (r3 = n2(t3[a3]), ["string", "number", "function", "boolean"].indexOf(r3) >= 0 ? o3[a3] = t3[a3] : o3[a3] = e3(t3[a3])) : o3[a3] = void 0 : o3[a3] = null;
        return o3;
      };
      function vd(e3, t3) {
        Ql(e3) && Ql(t3) ? t3.forEach(function(t4) {
          var n3 = t4.key, o3 = t4.value, r3 = e3.find(function(e4) {
            return e4.key === n3;
          });
          r3 ? r3.value = o3 : e3.push({ key: n3, value: o3 });
        }) : wl.warn("updateCustomField target 或 source 不是数组，忽略此次更新。");
      }
      var Md = function(e3) {
        return e3 === gr.GRP_PUBLIC;
      }, yd = function(e3) {
        return e3 === gr.GRP_AVCHATROOM;
      }, Id = function(e3) {
        var t3 = e3.type, n3 = e3.groupID;
        return t3 === gr.GRP_COMMUNITY || "".concat(n3).startsWith(Bl) && !"".concat(n3).includes(jl);
      }, Ed = function(e3) {
        return "".concat(e3).startsWith(Bl) && "".concat(e3).includes(jl);
      }, Td = function(e3) {
        return zl(e3) && e3.slice(0, 3) === gr.CONV_C2C;
      }, Sd = function(e3) {
        return zl(e3) && e3.slice(0, 5) === gr.CONV_GROUP;
      }, Cd = function(e3) {
        return zl(e3) && e3 === gr.CONV_SYSTEM;
      };
      function Ad(e3, t3) {
        var n3 = {};
        return Object.keys(e3).forEach(function(o3) {
          n3[o3] = t3(e3[o3], o3);
        }), n3;
      }
      function Dd(e3) {
        return Bu ? new Promise(function(t3, n3) {
          Wu.getImageInfo({ src: e3, success: function(e4) {
            t3({ width: e4.width, height: e4.height });
          }, fail: function() {
            t3({ width: 0, height: 0 });
          } });
        }) : al && 9 === sl ? Promise.resolve({ width: 0, height: 0 }) : new Promise(function(t3, n3) {
          var o3 = new Image();
          o3.onload = function() {
            t3({ width: this.width, height: this.height }), o3 = null;
          }, o3.onerror = function() {
            t3({ width: 0, height: 0 }), o3 = null;
          }, o3.src = e3;
        });
      }
      function Nd() {
        function e3() {
          return (65536 * (1 + Math.random()) | 0).toString(16).substring(1);
        }
        return "".concat(e3() + e3()).concat(e3()).concat(e3()).concat(e3()).concat(e3()).concat(e3()).concat(e3());
      }
      function Od() {
        var e3 = "unknown";
        if (ll && (e3 = "mac"), ul && (e3 = "windows"), Zu && (e3 = "ios"), tl && (e3 = "android"), Bu)
          try {
            var t3 = Wu.getSystemInfoSync().platform;
            void 0 !== t3 && (e3 = t3);
          } catch (rS) {
          }
        return e3;
      }
      function Rd(e3) {
        var t3 = e3.originUrl, n3 = void 0 === t3 ? void 0 : t3, o3 = e3.originWidth, r3 = e3.originHeight, a3 = e3.min, s3 = void 0 === a3 ? 198 : a3, i3 = parseInt(o3), c3 = parseInt(r3), u3 = { url: void 0, width: 0, height: 0 };
        if ((i3 <= c3 ? i3 : c3) <= s3)
          u3.url = n3, u3.width = i3, u3.height = c3;
        else {
          c3 <= i3 ? (u3.width = Math.ceil(i3 * s3 / c3), u3.height = s3) : (u3.width = s3, u3.height = Math.ceil(c3 * s3 / i3));
          var l3 = n3 && n3.indexOf("?") > -1 ? "".concat(n3, "&") : "".concat(n3, "?");
          u3.url = "".concat(l3, 198 === s3 ? "imageView2/3/w/198/h/198" : "imageView2/3/w/720/h/720");
        }
        return Zl(n3) ? g2(u3, Wl) : u3;
      }
      function Ld(e3) {
        var t3 = e3[2];
        e3[2] = e3[1], e3[1] = t3;
        for (var n3 = 0; n3 < e3.length; n3++)
          e3[n3].setType(n3);
      }
      function kd(e3) {
        var t3 = e3.servcmd;
        return t3.slice(t3.indexOf(".") + 1);
      }
      function Pd(e3, t3) {
        return Math.round(Number(e3) * Math.pow(10, t3)) / Math.pow(10, t3);
      }
      function Gd(e3, t3) {
        return e3.includes(t3);
      }
      function bd(e3, t3) {
        return e3.includes(t3);
      }
      function wd(e3) {
        return e3.split(jl)[0];
      }
      var Ud = function(e3, t3) {
        if (Zl(t3))
          return "";
        switch (e3) {
          case gr.MSG_TEXT:
            return t3.text;
          case gr.MSG_IMAGE:
            return "[图片]";
          case gr.MSG_LOCATION:
            return "[位置]";
          case gr.MSG_AUDIO:
            return "[语音]";
          case gr.MSG_VIDEO:
            return "[视频]";
          case gr.MSG_FILE:
            return "[文件]";
          case gr.MSG_CUSTOM:
            return "[自定义消息]";
          case gr.MSG_GRP_TIP:
            return "[群提示消息]";
          case gr.MSG_GRP_SYS_NOTICE:
            return "[群系统通知]";
          case gr.MSG_FACE:
            return "[动画表情]";
          case gr.MSG_MERGER:
            return "[聊天记录]";
          default:
            return "";
        }
      }, Fd = Object.prototype.hasOwnProperty;
      function qd(e3) {
        if (null == e3)
          return true;
        if ("boolean" == typeof e3)
          return false;
        if ("number" == typeof e3)
          return 0 === e3;
        if ("string" == typeof e3)
          return 0 === e3.length;
        if ("function" == typeof e3)
          return 0 === e3.length;
        if (Array.isArray(e3))
          return 0 === e3.length;
        if (e3 instanceof Error)
          return "" === e3.message;
        if (Xl(e3)) {
          for (var t3 in e3)
            if (Fd.call(e3, t3))
              return false;
          return true;
        }
        return !("map" !== od(e3) && !function(e4) {
          return "set" === od(e4);
        }(e3) && !Yl(e3)) && 0 === e3.size;
      }
      function Vd(e3, t3, n3) {
        if (void 0 === t3)
          return true;
        var o3 = true;
        if ("object" === Ur(t3).toLowerCase())
          Object.keys(t3).forEach(function(r4) {
            var a3 = 1 === e3.length ? e3[0][r4] : void 0;
            o3 = !!xd(a3, t3[r4], n3, r4) && o3;
          });
        else if ("array" === Ur(t3).toLowerCase())
          for (var r3 = 0; r3 < t3.length; r3++)
            o3 = !!xd(e3[r3], t3[r3], n3, t3[r3].name) && o3;
        if (o3)
          return o3;
        throw new Error("Params validate failed.");
      }
      function xd(e3, t3, n3, o3) {
        if (void 0 === t3)
          return true;
        var r3 = true;
        return t3.required && qd(e3) && (Nl.error("TIM [".concat(n3, '] Missing required params: "').concat(o3, '".')), r3 = false), qd(e3) || Ur(e3).toLowerCase() === t3.type.toLowerCase() || (Nl.error("TIM [".concat(n3, '] Invalid params: type check failed for "').concat(o3, '".Expected ').concat(t3.type, ".")), r3 = false), t3.validator && !t3.validator(e3) && (Nl.error("TIM [".concat(n3, "] Invalid params: custom validator check failed for params.")), r3 = false), r3;
      }
      var Kd = { f: Ue2 }, Hd = R2, Bd = nt2.f, jd = Zn2.forEach, Wd = pt2("hidden"), Yd = Ue2("toPrimitive"), $d = It2.set, zd = It2.getterFor("Symbol"), Jd = Object.prototype, Xd = R2.Symbol, Qd = Xd && Xd.prototype, Zd = R2.TypeError, ep = R2.QObject, tp = oe2("JSON", "stringify"), np = Ye2.f, op = nt2.f, rp = di.f, ap = F2.f, sp = B2([].push), ip = Se2("symbols"), cp = Se2("op-symbols"), up = Se2("string-to-symbol-registry"), lp = Se2("symbol-to-string-registry"), dp = Se2("wks"), pp = !ep || !ep.prototype || !ep.prototype.findChild, gp = k && L2(function() {
        return 7 != bn(op({}, "a", { get: function() {
          return op(this, "a", { value: 7 }).a;
        } })).a;
      }) ? function(e3, t3, n3) {
        var o3 = np(Jd, t3);
        o3 && delete Jd[t3], op(e3, t3, n3), o3 && e3 !== Jd && op(Jd, t3, o3);
      } : op, hp = function(e3, t3) {
        var n3 = ip[e3] = bn(Qd);
        return $d(n3, { type: "Symbol", tag: e3, description: t3 }), k || (n3.description = t3), n3;
      }, _p = function(e3, t3, n3) {
        e3 === Jd && _p(cp, t3, n3), Xe2(e3);
        var o3 = xe2(t3);
        return Xe2(n3), Ne2(ip, o3) ? (n3.enumerable ? (Ne2(e3, Wd) && e3[Wd][o3] && (e3[Wd][o3] = false), n3 = bn(n3, { enumerable: q2(0, false) })) : (Ne2(e3, Wd) || op(e3, Wd, q2(1, {})), e3[Wd][o3] = true), gp(e3, o3, n3)) : op(e3, o3, n3);
      }, fp = function(e3, t3) {
        Xe2(e3);
        var n3 = Z2(t3), o3 = Dn(n3).concat(yp(n3));
        return jd(o3, function(t4) {
          k && !b2(mp, n3, t4) || _p(e3, t4, n3[t4]);
        }), e3;
      }, mp = function(e3) {
        var t3 = xe2(e3), n3 = b2(ap, this, t3);
        return !(this === Jd && Ne2(ip, t3) && !Ne2(cp, t3)) && (!(n3 || !Ne2(this, t3) || !Ne2(ip, t3) || Ne2(this, Wd) && this[Wd][t3]) || n3);
      }, vp = function(e3, t3) {
        var n3 = Z2(e3), o3 = xe2(t3);
        if (n3 !== Jd || !Ne2(ip, o3) || Ne2(cp, o3)) {
          var r3 = np(n3, o3);
          return !r3 || !Ne2(ip, o3) || Ne2(n3, Wd) && n3[Wd][o3] || (r3.enumerable = true), r3;
        }
      }, Mp = function(e3) {
        var t3 = rp(Z2(e3)), n3 = [];
        return jd(t3, function(e4) {
          Ne2(ip, e4) || Ne2(gt2, e4) || sp(n3, e4);
        }), n3;
      }, yp = function(e3) {
        var t3 = e3 === Jd, n3 = rp(t3 ? cp : Z2(e3)), o3 = [];
        return jd(n3, function(e4) {
          !Ne2(ip, e4) || t3 && !Ne2(Jd, e4) || sp(o3, ip[e4]);
        }), o3;
      };
      if (de2 || (Qd = (Xd = function() {
        if (re2(Qd, this))
          throw Zd("Symbol is not a constructor");
        var e3 = arguments.length && void 0 !== arguments[0] ? dn(arguments[0]) : void 0, t3 = ke2(e3), n3 = function(e4) {
          this === Jd && b2(n3, cp, e4), Ne2(this, Wd) && Ne2(this[Wd], t3) && (this[Wd][t3] = false), gp(this, t3, q2(1, e4));
        };
        return k && pp && gp(Jd, t3, { configurable: true, set: n3 }), hp(t3, e3);
      }).prototype, At2(Qd, "toString", function() {
        return zd(this).tag;
      }), At2(Xd, "withoutSetter", function(e3) {
        return hp(ke2(e3), e3);
      }), F2.f = mp, nt2.f = _p, Nn.f = fp, Ye2.f = vp, Ht2.f = di.f = Mp, Bt2.f = yp, Kd.f = function(e3) {
        return hp(Ue2(e3), e3);
      }, k && (op(Qd, "description", { configurable: true, get: function() {
        return zd(this).description;
      } }), At2(Jd, "propertyIsEnumerable", mp, { unsafe: true }))), nn2({ global: true, wrap: true, forced: !de2, sham: !de2 }, { Symbol: Xd }), jd(Dn(dp), function(e3) {
        !function(e4) {
          var t3 = Hd.Symbol || (Hd.Symbol = {});
          Ne2(t3, e4) || Bd(t3, e4, { value: Kd.f(e4) });
        }(e3);
      }), nn2({ target: "Symbol", stat: true, forced: !de2 }, { for: function(e3) {
        var t3 = dn(e3);
        if (Ne2(up, t3))
          return up[t3];
        var n3 = Xd(t3);
        return up[t3] = n3, lp[n3] = t3, n3;
      }, keyFor: function(e3) {
        if (!he2(e3))
          throw Zd(e3 + " is not a symbol");
        if (Ne2(lp, e3))
          return lp[e3];
      }, useSetter: function() {
        pp = true;
      }, useSimple: function() {
        pp = false;
      } }), nn2({ target: "Object", stat: true, forced: !de2, sham: !k }, { create: function(e3, t3) {
        return void 0 === t3 ? bn(e3) : fp(bn(e3), t3);
      }, defineProperty: _p, defineProperties: fp, getOwnPropertyDescriptor: vp }), nn2({ target: "Object", stat: true, forced: !de2 }, { getOwnPropertyNames: Mp, getOwnPropertySymbols: yp }), nn2({ target: "Object", stat: true, forced: L2(function() {
        Bt2.f(1);
      }) }, { getOwnPropertySymbols: function(e3) {
        return Bt2.f(Ae2(e3));
      } }), tp) {
        var Ip = !de2 || L2(function() {
          var e3 = Xd();
          return "[null]" != tp([e3]) || "{}" != tp({ a: e3 }) || "{}" != tp(Object(e3));
        });
        nn2({ target: "JSON", stat: true, forced: Ip }, { stringify: function(e3, t3, n3) {
          var o3 = hr(arguments), r3 = t3;
          if ((te2(t3) || void 0 !== e3) && !he2(e3))
            return Fn(t3) || (t3 = function(e4, t4) {
              if (ee2(r3) && (t4 = b2(r3, this, e4, t4)), !he2(t4))
                return t4;
            }), o3[1] = t3, Es2(tp, null, o3);
        } });
      }
      if (!Qd[Yd]) {
        var Ep = Qd.valueOf;
        At2(Qd, Yd, function(e3) {
          return b2(Ep, this);
        });
      }
      zo(Xd, "Symbol"), gt2[Wd] = true;
      var Tp = nt2.f, Sp = R2.Symbol, Cp = Sp && Sp.prototype;
      if (k && ee2(Sp) && (!("description" in Cp) || void 0 !== Sp().description)) {
        var Ap = {}, Dp = function() {
          var e3 = arguments.length < 1 || void 0 === arguments[0] ? void 0 : dn(arguments[0]), t3 = re2(Cp, this) ? new Sp(e3) : void 0 === e3 ? Sp() : Sp(e3);
          return "" === e3 && (Ap[t3] = true), t3;
        };
        Yt2(Dp, Sp), Dp.prototype = Cp, Cp.constructor = Dp;
        var Np = "Symbol(test)" == String(Sp("test")), Op = B2(Cp.toString), Rp = B2(Cp.valueOf), Lp = /^Symbol\((.*)\)[^)]+$/, kp = B2("".replace), Pp = B2("".slice);
        Tp(Cp, "description", { configurable: true, get: function() {
          var e3 = Rp(this), t3 = Op(e3);
          if (Ne2(Ap, e3))
            return "";
          var n3 = Np ? Pp(t3, 7, -1) : kp(t3, Lp, "$1");
          return "" === n3 ? void 0 : n3;
        } }), nn2({ global: true, forced: true }, { Symbol: Dp });
      }
      var Gp = { UNSEND: "unSend", SUCCESS: "success", FAIL: "fail" }, bp = { NOT_START: "notStart", PENDING: "pengding", RESOLVED: "resolved", REJECTED: "rejected" }, wp = function(e3) {
        return !!e3 && (!!(Td(e3) || Sd(e3) || Cd(e3)) || (formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", "非法的会话 ID:".concat(e3, "。会话 ID 组成方式：C2C + userID（单聊）GROUP + groupID（群聊）@TIM#SYSTEM（系统通知会话）")), false));
      }, Up = "请参考 https://web.sdk.qcloud.com/im/doc/zh-cn/SDK.html#", Fp = function(e3) {
        return e3.param ? "".concat(e3.api, " ").concat(e3.param, " ").concat(e3.desc, "。").concat(Up).concat(e3.api) : "".concat(e3.api, " ").concat(e3.desc, "。").concat(Up).concat(e3.api);
      }, qp = { type: "String", required: true }, Vp = { type: "Array", required: true }, xp = { type: "Object", required: true }, Kp = { login: { userID: qp, userSig: qp }, addToBlacklist: { userIDList: Vp }, on: [{ name: "eventName", type: "String", validator: function(e3) {
        return "string" == typeof e3 && 0 !== e3.length || (formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "on", param: "eventName", desc: "类型必须为 String，且不能为空" })), false);
      } }, { name: "handler", type: "Function", validator: function(e3) {
        return "function" != typeof e3 ? (formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "on", param: "handler", desc: "参数必须为 Function" })), false) : ("" === e3.name && formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", "on 接口的 handler 参数推荐使用具名函数。具名函数可以使用 off 接口取消订阅，匿名函数无法取消订阅。"), true);
      } }], once: [{ name: "eventName", type: "String", validator: function(e3) {
        return "string" == typeof e3 && 0 !== e3.length || (formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "once", param: "eventName", desc: "类型必须为 String，且不能为空" })), false);
      } }, { name: "handler", type: "Function", validator: function(e3) {
        return "function" != typeof e3 ? (formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "once", param: "handler", desc: "参数必须为 Function" })), false) : ("" === e3.name && formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", "once 接口的 handler 参数推荐使用具名函数。"), true);
      } }], off: [{ name: "eventName", type: "String", validator: function(e3) {
        return "string" == typeof e3 && 0 !== e3.length || (formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "off", param: "eventName", desc: "类型必须为 String，且不能为空" })), false);
      } }, { name: "handler", type: "Function", validator: function(e3) {
        return "function" != typeof e3 ? (formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "off", param: "handler", desc: "参数必须为 Function" })), false) : ("" === e3.name && formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", "off 接口无法为匿名函数取消监听事件。"), true);
      } }], sendMessage: [t2({ name: "message" }, xp)], getMessageList: { conversationID: t2(t2({}, qp), {}, { validator: function(e3) {
        return wp(e3);
      } }), nextReqMessageID: { type: "String" }, count: { type: "Number", validator: function(e3) {
        return !(!Zl(e3) && !/^[1-9][0-9]*$/.test(e3)) || (formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "getMessageList", param: "count", desc: "必须为正整数" })), false);
      } } }, getMessageListHopping: { conversationID: t2(t2({}, qp), {}, { validator: function(e3) {
        return wp(e3);
      } }), sequence: { type: "Number" }, time: { type: "Number" }, direction: { type: "Number", validator: function(e3) {
        return !(!Zl(e3) && 0 !== e3 && 1 !== e3) || (formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "getMessageListHopping", param: "direction", desc: "必须传 0 或 1" })), false);
      } }, count: { type: "Number", validator: function(e3) {
        return !(!Zl(e3) && !/^[1-9][0-9]*$/.test(e3)) || (formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "getMessageListHopping", param: "count", desc: "必须为正整数" })), false);
      } } }, setMessageRead: { conversationID: t2(t2({}, qp), {}, { validator: function(e3) {
        return wp(e3);
      } }) }, setAllMessageRead: { scope: { type: "String", required: false, validator: function(e3) {
        return !e3 || -1 !== [gr.READ_ALL_C2C_MSG, gr.READ_ALL_GROUP_MSG, gr.READ_ALL_MSG].indexOf(e3) || (formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "setAllMessageRead", param: "scope", desc: "取值必须为 TIM.TYPES.READ_ALL_C2C_MSG, TIM.TYPES.READ_ALL_GROUP_MSG 或 TIM.TYPES.READ_ALL_MSG" })), false);
      } } }, getConversationProfile: [t2(t2({ name: "conversationID" }, qp), {}, { validator: function(e3) {
        return wp(e3);
      } })], deleteConversation: [t2(t2({ name: "conversationID" }, qp), {}, { validator: function(e3) {
        return wp(e3);
      } })], pinConversation: { conversationID: t2(t2({}, qp), {}, { validator: function(e3) {
        return wp(e3);
      } }), isPinned: t2({}, { type: "Boolean", required: true }) }, getConversationList: [{ name: "options", type: "Array", validator: function(e3) {
        return !!Zl(e3) || (0 !== e3.length || (formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "getConversationList", desc: "获取指定会话时不能传入空数组" })), false));
      } }], getGroupList: { groupProfileFilter: { type: "Array" } }, getGroupProfile: { groupID: qp, groupCustomFieldFilter: { type: "Array" }, memberCustomFieldFilter: { type: "Array" } }, getGroupProfileAdvance: { groupIDList: Vp }, createGroup: { name: qp }, joinGroup: { groupID: qp, type: { type: "String" }, applyMessage: { type: "String" } }, quitGroup: [t2({ name: "groupID" }, qp)], handleApplication: { message: xp, handleAction: qp, handleMessage: { type: "String" } }, changeGroupOwner: { groupID: qp, newOwnerID: qp }, updateGroupProfile: { groupID: qp, muteAllMembers: { type: "Boolean" } }, dismissGroup: [t2({ name: "groupID" }, qp)], searchGroupByID: [t2({ name: "groupID" }, qp)], initGroupAttributes: { groupID: qp, groupAttributes: t2(t2({}, xp), {}, { validator: function(e3) {
        var t3 = true;
        return Object.keys(e3).forEach(function(n3) {
          if (!zl(e3[n3]))
            return formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "initGroupAttributes", desc: "群属性 value 必须是字符串" })), t3 = false;
        }), t3;
      } }) }, setGroupAttributes: { groupID: qp, groupAttributes: t2(t2({}, xp), {}, { validator: function(e3) {
        var t3 = true;
        return Object.keys(e3).forEach(function(n3) {
          if (!zl(e3[n3]))
            return formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "setGroupAttributes", desc: "群属性 value 必须是字符串" })), t3 = false;
        }), t3;
      } }) }, deleteGroupAttributes: { groupID: qp, keyList: { type: "Array", validator: function(e3) {
        if (Zl(e3))
          return formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "deleteGroupAttributes", desc: "缺少必填参数：keyList" })), false;
        if (!Ql(e3))
          return false;
        if (!qd(e3)) {
          var t3 = true;
          return e3.forEach(function(e4) {
            if (!zl(e4))
              return formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "deleteGroupAttributes", desc: "群属性 key 必须是字符串" })), t3 = false;
          }), t3;
        }
        return true;
      } } }, getGroupAttributes: { groupID: qp, keyList: { type: "Array", validator: function(e3) {
        if (Zl(e3))
          return formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "getGroupAttributes", desc: "缺少必填参数：keyList" })), false;
        if (!Ql(e3))
          return false;
        if (!qd(e3)) {
          var t3 = true;
          return e3.forEach(function(e4) {
            if (!zl(e4))
              return formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "getGroupAttributes", desc: "群属性 key 必须是字符串" })), t3 = false;
          }), t3;
        }
        return true;
      } } }, getGroupMemberList: { groupID: qp, count: { type: "Number" } }, getGroupMemberProfile: { groupID: qp, userIDList: Vp, memberCustomFieldFilter: { type: "Array" } }, addGroupMember: { groupID: qp, userIDList: Vp }, setGroupMemberRole: { groupID: qp, userID: qp, role: qp }, setGroupMemberMuteTime: { groupID: qp, userID: qp, muteTime: { type: "Number", validator: function(e3) {
        return e3 >= 0;
      } } }, setGroupMemberNameCard: { groupID: qp, userID: { type: "String" }, nameCard: { type: "String", validator: function(e3) {
        return zl(e3) ? (e3.length, true) : (formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "setGroupMemberNameCard", param: "nameCard", desc: "类型必须为 String" })), false);
      } } }, setGroupMemberCustomField: { groupID: qp, userID: { type: "String" }, memberCustomField: Vp }, deleteGroupMember: { groupID: qp }, createTextMessage: { to: qp, conversationType: qp, payload: t2(t2({}, xp), {}, { validator: function(e3) {
        return Xl(e3) ? zl(e3.text) ? 0 !== e3.text.length || (formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "createTextMessage", desc: "消息内容不能为空" })), false) : (formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "createTextMessage", param: "payload.text", desc: "类型必须为 String" })), false) : (formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "createTextMessage", param: "payload", desc: "类型必须为 plain object" })), false);
      } }) }, createTextAtMessage: { to: qp, conversationType: qp, payload: t2(t2({}, xp), {}, { validator: function(e3) {
        return Xl(e3) ? zl(e3.text) ? 0 === e3.text.length ? (formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "createTextAtMessage", desc: "消息内容不能为空" })), false) : !(e3.atUserList && !Ql(e3.atUserList)) || (formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "createTextAtMessage", desc: "payload.atUserList 类型必须为数组" })), false) : (formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "createTextAtMessage", param: "payload.text", desc: "类型必须为 String" })), false) : (formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "createTextAtMessage", param: "payload", desc: "类型必须为 plain object" })), false);
      } }) }, createCustomMessage: { to: qp, conversationType: qp, payload: t2(t2({}, xp), {}, { validator: function(e3) {
        return Xl(e3) ? e3.data && !zl(e3.data) ? (formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "createCustomMessage", param: "payload.data", desc: "类型必须为 String" })), false) : e3.description && !zl(e3.description) ? (formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "createCustomMessage", param: "payload.description", desc: "类型必须为 String" })), false) : !(e3.extension && !zl(e3.extension)) || (formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "createCustomMessage", param: "payload.extension", desc: "类型必须为 String" })), false) : (formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "createCustomMessage", param: "payload", desc: "类型必须为 plain object" })), false);
      } }) }, createImageMessage: { to: qp, conversationType: qp, payload: t2(t2({}, xp), {}, { validator: function(e3) {
        if (!Xl(e3))
          return formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "createImageMessage", param: "payload", desc: "类型必须为 plain object" })), false;
        if (Zl(e3.file))
          return formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "createImageMessage", param: "payload.file", desc: "不能为 undefined" })), false;
        if (ju) {
          if (!(e3.file instanceof HTMLInputElement || Yl(e3.file)))
            return Xl(e3.file) && "undefined" != typeof uni ? 0 !== e3.file.tempFilePaths.length && 0 !== e3.file.tempFiles.length || (formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "createImageMessage", param: "payload.file", desc: "您没有选择文件，无法发送" })), false) : (formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "createImageMessage", param: "payload.file", desc: "类型必须是 HTMLInputElement 或 File" })), false);
          if (e3.file instanceof HTMLInputElement && 0 === e3.file.files.length)
            return formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "createImageMessage", param: "payload.file", desc: "您没有选择文件，无法发送" })), false;
        }
        return true;
      }, onProgress: { type: "Function", required: false, validator: function(e3) {
        return Zl(e3) && formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "createImageMessage", desc: "没有 onProgress 回调，您将无法获取上传进度" })), true;
      } } }) }, createAudioMessage: { to: qp, conversationType: qp, payload: t2(t2({}, xp), {}, { validator: function(e3) {
        return !!Xl(e3) || (formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "createAudioMessage", param: "payload", desc: "类型必须为 plain object" })), false);
      } }), onProgress: { type: "Function", required: false, validator: function(e3) {
        return Zl(e3) && formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "createAudioMessage", desc: "没有 onProgress 回调，您将无法获取上传进度" })), true;
      } } }, createVideoMessage: { to: qp, conversationType: qp, payload: t2(t2({}, xp), {}, { validator: function(e3) {
        if (!Xl(e3))
          return formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "createVideoMessage", param: "payload", desc: "类型必须为 plain object" })), false;
        if (Zl(e3.file))
          return formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "createVideoMessage", param: "payload.file", desc: "不能为 undefined" })), false;
        if (ju) {
          if (!(e3.file instanceof HTMLInputElement || Yl(e3.file)))
            return Xl(e3.file) && "undefined" != typeof uni ? !!Yl(e3.file.tempFile) || (formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "createVideoMessage", param: "payload.file", desc: "您没有选择文件，无法发送" })), false) : (formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "createVideoMessage", param: "payload.file", desc: "类型必须是 HTMLInputElement 或 File" })), false);
          if (e3.file instanceof HTMLInputElement && 0 === e3.file.files.length)
            return formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "createVideoMessage", param: "payload.file", desc: "您没有选择文件，无法发送" })), false;
        }
        return true;
      } }), onProgress: { type: "Function", required: false, validator: function(e3) {
        return Zl(e3) && formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "createVideoMessage", desc: "没有 onProgress 回调，您将无法获取上传进度" })), true;
      } } }, createFaceMessage: { to: qp, conversationType: qp, payload: t2(t2({}, xp), {}, { validator: function(e3) {
        return Xl(e3) ? $l(e3.index) ? !!zl(e3.data) || (formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "createFaceMessage", param: "payload.data", desc: "类型必须为 String" })), false) : (formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "createFaceMessage", param: "payload.index", desc: "类型必须为 Number" })), false) : (formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "createFaceMessage", param: "payload", desc: "类型必须为 plain object" })), false);
      } }) }, createFileMessage: { to: qp, conversationType: qp, payload: t2(t2({}, xp), {}, { validator: function(e3) {
        if (!Xl(e3))
          return formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "createFileMessage", param: "payload", desc: "类型必须为 plain object" })), false;
        if (Zl(e3.file))
          return formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "createFileMessage", param: "payload.file", desc: "不能为 undefined" })), false;
        if (ju) {
          if (!(e3.file instanceof HTMLInputElement || Yl(e3.file)))
            return Xl(e3.file) && "undefined" != typeof uni ? 0 !== e3.file.tempFilePaths.length && 0 !== e3.file.tempFiles.length || (formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "createFileMessage", param: "payload.file", desc: "您没有选择文件，无法发送" })), false) : (formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "createFileMessage", param: "payload.file", desc: "类型必须是 HTMLInputElement 或 File" })), false);
          if (e3.file instanceof HTMLInputElement && 0 === e3.file.files.length)
            return formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "createFileMessage", desc: "您没有选择文件，无法发送" })), false;
        }
        return true;
      } }), onProgress: { type: "Function", required: false, validator: function(e3) {
        return Zl(e3) && formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "createFileMessage", desc: "没有 onProgress 回调，您将无法获取上传进度" })), true;
      } } }, createLocationMessage: { to: qp, conversationType: qp, payload: t2(t2({}, xp), {}, { validator: function(e3) {
        return Xl(e3) ? zl(e3.description) ? $l(e3.longitude) ? !!$l(e3.latitude) || (formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "createLocationMessage", param: "payload.latitude", desc: "类型必须为 Number" })), false) : (formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "createLocationMessage", param: "payload.longitude", desc: "类型必须为 Number" })), false) : (formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "createLocationMessage", param: "payload.description", desc: "类型必须为 String" })), false) : (formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "createLocationMessage", param: "payload", desc: "类型必须为 plain object" })), false);
      } }) }, createMergerMessage: { to: qp, conversationType: qp, payload: t2(t2({}, xp), {}, { validator: function(e3) {
        if (qd(e3.messageList))
          return formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "createMergerMessage", desc: "不能为空数组" })), false;
        if (qd(e3.compatibleText))
          return formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "createMergerMessage", desc: "类型必须为 String，且不能为空" })), false;
        var t3 = false;
        return e3.messageList.forEach(function(e4) {
          e4.status === Gp.FAIL && (t3 = true);
        }), !t3 || (formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "createMergerMessage", desc: "不支持合并已发送失败的消息" })), false);
      } }) }, revokeMessage: [t2(t2({ name: "message" }, xp), {}, { validator: function(e3) {
        return qd(e3) ? (formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "revokeMessage", desc: "请传入消息（Message）实例" })), false) : e3.conversationType === gr.CONV_SYSTEM ? (formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "revokeMessage", desc: "不能撤回系统会话消息，只能撤回单聊消息或群消息" })), false) : true !== e3.isRevoked || (formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "revokeMessage", desc: "消息已经被撤回，请勿重复操作" })), false);
      } })], deleteMessage: [t2(t2({ name: "messageList" }, Vp), {}, { validator: function(e3) {
        return !qd(e3) || (formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "deleteMessage", param: "messageList", desc: "不能为空数组" })), false);
      } })], modifyMessage: [t2(t2({ name: "message" }, xp), {}, { validator: function(e3) {
        return qd(e3) ? (formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "modifyMessage", desc: "请传入消息（Message）实例" })), false) : e3.conversationType === gr.CONV_SYSTEM ? (formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "modifyMessage", desc: "不支持修改系统会话消息，只能修改单聊消息或群消息" })), false) : true === e3._onlineOnlyFlag ? (formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "modifyMessage", desc: "不支持修改在线消息" })), false) : -1 !== [gr.MSG_TEXT, gr.MSG_CUSTOM, gr.MSG_LOCATION, gr.MSG_FACE].indexOf(e3.type) || (formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "modifyMessage", desc: "只支持修改文本消息、自定义消息、地理位置消息和表情消息" })), false);
      } })], getUserProfile: { userIDList: { type: "Array", validator: function(e3) {
        return Ql(e3) ? (0 === e3.length && formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "getUserProfile", param: "userIDList", desc: "不能为空数组" })), true) : (formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "getUserProfile", param: "userIDList", desc: "必须为数组" })), false);
      } } }, updateMyProfile: { profileCustomField: { type: "Array", validator: function(e3) {
        return !!Zl(e3) || (!!Ql(e3) || (formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "updateMyProfile", param: "profileCustomField", desc: "必须为数组" })), false));
      } } }, addFriend: { to: qp, source: { type: "String", required: true, validator: function(e3) {
        return !!e3 && (e3.startsWith("AddSource_Type_") ? !(e3.replace("AddSource_Type_", "").length > 8) || (formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "addFriend", desc: "加好友来源字段的关键字长度不得超过8字节" })), false) : (formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "addFriend", desc: "加好友来源字段的前缀必须是：AddSource_Type_" })), false));
      } }, remark: { type: "String", required: false, validator: function(e3) {
        return !(zl(e3) && e3.length > 96) || (formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "updateFriend", desc: " 备注长度最长不得超过 96 个字节" })), false);
      } } }, deleteFriend: { userIDList: Vp }, checkFriend: { userIDList: Vp }, getFriendProfile: { userIDList: Vp }, updateFriend: { userID: qp, remark: { type: "String", required: false, validator: function(e3) {
        return !(zl(e3) && e3.length > 96) || (formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "updateFriend", desc: " 备注长度最长不得超过 96 个字节" })), false);
      } }, friendCustomField: { type: "Array", required: false, validator: function(e3) {
        if (e3) {
          if (!Ql(e3))
            return formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "updateFriend", param: "friendCustomField", desc: "必须为数组" })), false;
          var t3 = true;
          return e3.forEach(function(e4) {
            return zl(e4.key) && -1 !== e4.key.indexOf("Tag_SNS_Custom") ? zl(e4.value) ? e4.value.length > 8 ? (formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "updateFriend", desc: "好友自定义字段的关键字长度不得超过8字节" })), t3 = false) : void 0 : (formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "updateFriend", desc: "类型必须为 String" })), t3 = false) : (formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "updateFriend", desc: "好友自定义字段的前缀必须是 Tag_SNS_Custom" })), t3 = false);
          }), t3;
        }
        return true;
      } } }, acceptFriendApplication: { userID: qp }, refuseFriendApplication: { userID: qp }, deleteFriendApplication: { userID: qp }, createFriendGroup: { name: qp }, deleteFriendGroup: { name: qp }, addToFriendGroup: { name: qp, userIDList: Vp }, removeFromFriendGroup: { name: qp, userIDList: Vp }, renameFriendGroup: { oldName: qp, newName: qp }, sendMessageReadReceipt: [{ name: "messageList", type: "Array", validator: function(e3) {
        return Ql(e3) ? 0 !== e3.length || (formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "sendMessageReadReceipt", param: "messageList", desc: "不能为空数组" })), false) : (formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "sendMessageReadReceipt", param: "messageList", desc: "必须为数组" })), false);
      } }], getMessageReadReceiptList: [{ name: "messageList", type: "Array", validator: function(e3) {
        return Ql(e3) ? 0 !== e3.length || (formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "getMessageReadReceiptList", param: "messageList", desc: "不能为空数组" })), false) : (formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "getMessageReadReceiptList", param: "messageList", desc: "必须为数组" })), false);
      } }], createTopicInCommunity: { groupID: qp, topicName: qp }, deleteTopicFromCommunity: { groupID: qp, topicIDList: { type: "Array", validator: function(e3) {
        return !e3 || (!!Ql(e3) || (formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "deleteTopicFromCommunity", param: "topicIDList", desc: "必须为数组" })), false));
      } } }, updateTopicProfile: { groupID: qp, topicID: qp }, getTopicList: { groupID: qp, topicIDList: { type: "Array", validator: function(e3) {
        return !e3 || (!!Ql(e3) || (formatAppLog("warn", "at node_modules/tim-js-sdk/tim-js.js:1", Fp({ api: "getTopicList", param: "topicIDList", desc: "必须为数组" })), false));
      } } } }, Hp = { login: "login", logout: "logout", on: "on", once: "once", off: "off", setLogLevel: "setLogLevel", registerPlugin: "registerPlugin", destroy: "destroy", createTextMessage: "createTextMessage", createTextAtMessage: "createTextAtMessage", createImageMessage: "createImageMessage", createAudioMessage: "createAudioMessage", createVideoMessage: "createVideoMessage", createCustomMessage: "createCustomMessage", createFaceMessage: "createFaceMessage", createFileMessage: "createFileMessage", createLocationMessage: "createLocationMessage", createMergerMessage: "createMergerMessage", downloadMergerMessage: "downloadMergerMessage", createForwardMessage: "createForwardMessage", sendMessage: "sendMessage", resendMessage: "resendMessage", revokeMessage: "revokeMessage", deleteMessage: "deleteMessage", modifyMessage: "modifyMessage", sendMessageReadReceipt: "sendMessageReadReceipt", getGroupMessageReadMemberList: "getGroupMessageReadMemberList", getMessageReadReceiptList: "getMessageReadReceiptList", getMessageList: "getMessageList", findMessage: "findMessage", getMessageListHopping: "getMessageListHopping", setMessageRead: "setMessageRead", setAllMessageRead: "setAllMessageRead", getConversationList: "getConversationList", getConversationProfile: "getConversationProfile", deleteConversation: "deleteConversation", pinConversation: "pinConversation", getGroupList: "getGroupList", getGroupProfile: "getGroupProfile", createGroup: "createGroup", joinGroup: "joinGroup", updateGroupProfile: "updateGroupProfile", quitGroup: "quitGroup", dismissGroup: "dismissGroup", changeGroupOwner: "changeGroupOwner", searchGroupByID: "searchGroupByID", setMessageRemindType: "setMessageRemindType", handleGroupApplication: "handleGroupApplication", initGroupAttributes: "initGroupAttributes", setGroupAttributes: "setGroupAttributes", deleteGroupAttributes: "deleteGroupAttributes", getGroupAttributes: "getGroupAttributes", getJoinedCommunityList: "getJoinedCommunityList", createTopicInCommunity: "createTopicInCommunity", deleteTopicFromCommunity: "deleteTopicFromCommunity", updateTopicProfile: "updateTopicProfile", getTopicList: "getTopicList", getGroupMemberProfile: "getGroupMemberProfile", getGroupMemberList: "getGroupMemberList", addGroupMember: "addGroupMember", deleteGroupMember: "deleteGroupMember", setGroupMemberNameCard: "setGroupMemberNameCard", setGroupMemberMuteTime: "setGroupMemberMuteTime", setGroupMemberRole: "setGroupMemberRole", setGroupMemberCustomField: "setGroupMemberCustomField", getGroupOnlineMemberCount: "getGroupOnlineMemberCount", getMyProfile: "getMyProfile", getUserProfile: "getUserProfile", updateMyProfile: "updateMyProfile", getBlacklist: "getBlacklist", addToBlacklist: "addToBlacklist", removeFromBlacklist: "removeFromBlacklist", getFriendList: "getFriendList", addFriend: "addFriend", deleteFriend: "deleteFriend", checkFriend: "checkFriend", updateFriend: "updateFriend", getFriendProfile: "getFriendProfile", getFriendApplicationList: "getFriendApplicationList", refuseFriendApplication: "refuseFriendApplication", deleteFriendApplication: "deleteFriendApplication", acceptFriendApplication: "acceptFriendApplication", setFriendApplicationRead: "setFriendApplicationRead", getFriendGroupList: "getFriendGroupList", createFriendGroup: "createFriendGroup", renameFriendGroup: "renameFriendGroup", deleteFriendGroup: "deleteFriendGroup", addToFriendGroup: "addToFriendGroup", removeFromFriendGroup: "removeFromFriendGroup", callExperimentalAPI: "callExperimentalAPI" }, Bp = !!Di && L2(function() {
        Di.prototype.finally.call({ then: function() {
        } }, function() {
        });
      });
      if (nn2({ target: "Promise", proto: true, real: true, forced: Bp }, { finally: function(e3) {
        var t3 = Vi(this, oe2("Promise")), n3 = ee2(e3);
        return this.then(n3 ? function(n4) {
          return Ac(t3, e3()).then(function() {
            return n4;
          });
        } : e3, n3 ? function(n4) {
          return Ac(t3, e3()).then(function() {
            throw n4;
          });
        } : e3);
      } }), ee2(Di)) {
        var jp = oe2("Promise").prototype.finally;
        Di.prototype.finally !== jp && At2(Di.prototype, "finally", jp, { unsafe: true });
      }
      var Wp = /MSIE .\./.test(ae2), Yp = R2.Function, $p = function(e3) {
        return function(t3, n3) {
          var o3 = Ki(arguments.length, 1) > 2, r3 = ee2(t3) ? t3 : Yp(t3), a3 = o3 ? hr(arguments, 2) : void 0;
          return e3(o3 ? function() {
            Es2(r3, this, a3);
          } : r3, n3);
        };
      };
      nn2({ global: true, bind: true, forced: Wp }, { setTimeout: $p(R2.setTimeout), setInterval: $p(R2.setInterval) });
      var zp = Zn2.filter, Jp = Er("filter");
      nn2({ target: "Array", proto: true, forced: !Jp }, { filter: function(e3) {
        return zp(this, e3, arguments.length > 1 ? arguments[1] : void 0);
      } });
      var Xp, Qp = "sign", Zp = "message", eg = "user", tg = "c2c", ng = "group", og = "sns", rg = "groupMember", ag = "Topic", sg = "conversation", ig = "context", cg = "storage", ug = "eventStat", lg = "netMonitor", dg = "bigDataChannel", pg = "upload", gg = "plugin", hg = "syncUnreadMessage", _g = "session", fg = "channel", mg = "message_loss_detection", vg = "cloudControl", Mg = "workerTimer", yg = "pullGroupMessage", Ig = "qualityStat", Eg = "commercialConfig", Tg = function() {
        function e3(t3) {
          o2(this, e3), this._moduleManager = t3, this._className = "";
        }
        return a2(e3, [{ key: "isLoggedIn", value: function() {
          return this._moduleManager.getModule(ig).isLoggedIn();
        } }, { key: "isOversea", value: function() {
          return this._moduleManager.getModule(ig).isOversea();
        } }, { key: "getMyUserID", value: function() {
          return this._moduleManager.getModule(ig).getUserID();
        } }, { key: "getMyTinyID", value: function() {
          return this._moduleManager.getModule(ig).getTinyID();
        } }, { key: "getModule", value: function(e4) {
          return this._moduleManager.getModule(e4);
        } }, { key: "getPlatform", value: function() {
          return Yu;
        } }, { key: "getNetworkType", value: function() {
          return this._moduleManager.getModule(lg).getNetworkType();
        } }, { key: "probeNetwork", value: function(e4) {
          return this._moduleManager.getModule(lg).probe(e4);
        } }, { key: "getCloudConfig", value: function(e4) {
          return this._moduleManager.getModule(vg).getCloudConfig(e4);
        } }, { key: "emitOuterEvent", value: function(e4, t3) {
          this._moduleManager.getOuterEmitterInstance().emit(e4, t3);
        } }, { key: "emitInnerEvent", value: function(e4, t3) {
          this._moduleManager.getInnerEmitterInstance().emit(e4, t3);
        } }, { key: "getInnerEmitterInstance", value: function() {
          return this._moduleManager.getInnerEmitterInstance();
        } }, { key: "generateTjgID", value: function(e4) {
          return this._moduleManager.getModule(ig).getTinyID() + "-" + e4.random;
        } }, { key: "filterModifiedMessage", value: function(e4) {
          if (!qd(e4)) {
            var t3 = e4.filter(function(e5) {
              return true === e5.isModified;
            });
            t3.length > 0 && this.emitOuterEvent(pr.MESSAGE_MODIFIED, t3);
          }
        } }, { key: "filterUnmodifiedMessage", value: function(e4) {
          return qd(e4) ? [] : e4.filter(function(e5) {
            return false === e5.isModified;
          });
        } }, { key: "request", value: function(e4) {
          return this._moduleManager.getModule(_g).request(e4);
        } }, { key: "canIUse", value: function(e4) {
          return this._moduleManager.getModule(Eg).hasPurchasedFeature(e4);
        } }]), e3;
      }(), Sg = "wslogin", Cg = "wslogout", Ag = "wshello", Dg = "KickOther", Ng = "getmsg", Og = "authkey", Rg = "sendmsg", Lg = "send_group_msg", kg = "portrait_get_all", Pg = "portrait_set", Gg = "black_list_get", bg = "black_list_add", wg = "black_list_delete", Ug = "msgwithdraw", Fg = "msgreaded", qg = "set_c2c_peer_mute_notifications", Vg = "get_c2c_peer_mute_notifications", xg = "getroammsg", Kg = "get_peer_read_time", Hg = "delete_c2c_msg_ramble", Bg = "modify_c2c_msg", jg = "page_get", Wg = "get", Yg = "delete", $g = "top", zg = "deletemsg", Jg = "get_joined_group_list", Xg = "get_group_self_member_info", Qg = "create_group", Zg = "destroy_group", eh = "modify_group_base_info", th = "apply_join_group", nh = "apply_join_group_noauth", oh = "quit_group", rh = "get_group_public_info", ah = "change_group_owner", sh = "handle_apply_join_group", ih = "handle_invite_join_group", ch = "group_msg_recall", uh = "msg_read_report", lh = "read_all_unread_msg", dh = "group_msg_get", ph = "get_group_msg_receipt", gh = "group_msg_receipt", hh = "c2c_msg_read_receipt", _h = "get_group_msg_receipt_detail", fh = "get_pendency", mh = "deletemsg", vh = "get_msg", Mh = "get_msg_noauth", yh = "get_online_member_num", Ih = "delete_group_ramble_msg_by_seq", Eh = "modify_group_msg", Th = "set_group_attr", Sh = "modify_group_attr", Ch = "delete_group_attr", Ah = "clear_group_attr", Dh = "get_group_attr", Nh = "get_group_member_info", Oh = "get_specified_group_member_info", Rh = "add_group_member", Lh = "delete_group_member", kh = "modify_group_member_info", Ph = "cos", Gh = "pre_sig", bh = "video_cover", wh = "tim_web_report_v2", Uh = "alive", Fh = "msg_push", qh = "multi_msg_push_ws", Vh = "ws_msg_push_ack", xh = "stat_forceoffline", Kh = "save_relay_json_msg", Hh = "get_relay_json_msg", Bh = "fetch_config", jh = "push_configv2", Wh = "fetch_imsdk_purchase_bitsv2", Yh = "push_imsdk_purchase_bitsv2", $h = "notify2", zh = "create_topic", Jh = "destroy_topic", Xh = "modify_topic", Qh = "get_topic", Zh = { NO_SDKAPPID: 2e3, NO_ACCOUNT_TYPE: 2001, NO_IDENTIFIER: 2002, NO_USERSIG: 2003, NO_TINYID: 2022, NO_A2KEY: 2023, USER_NOT_LOGGED_IN: 2024, REPEAT_LOGIN: 2025, COS_UNDETECTED: 2040, COS_GET_SIG_FAIL: 2041, MESSAGE_SEND_FAIL: 2100, MESSAGE_LIST_CONSTRUCTOR_NEED_OPTIONS: 2103, MESSAGE_SEND_NEED_MESSAGE_INSTANCE: 2105, MESSAGE_SEND_INVALID_CONVERSATION_TYPE: 2106, MESSAGE_FILE_IS_EMPTY: 2108, MESSAGE_ONPROGRESS_FUNCTION_ERROR: 2109, MESSAGE_REVOKE_FAIL: 2110, MESSAGE_DELETE_FAIL: 2111, MESSAGE_UNREAD_ALL_FAIL: 2112, MESSAGE_CONTROL_INFO_FAIL: 2113, READ_RECEIPT_MESSAGE_LIST_EMPTY: 2114, MESSAGE_SEND_GROUP_WITH_TOPIC_FAIL: 2115, MESSAGE_IMAGE_SELECT_FILE_FIRST: 2251, MESSAGE_IMAGE_TYPES_LIMIT: 2252, MESSAGE_IMAGE_SIZE_LIMIT: 2253, MESSAGE_AUDIO_UPLOAD_FAIL: 2300, MESSAGE_AUDIO_SIZE_LIMIT: 2301, MESSAGE_VIDEO_UPLOAD_FAIL: 2350, MESSAGE_VIDEO_SIZE_LIMIT: 2351, MESSAGE_VIDEO_TYPES_LIMIT: 2352, MESSAGE_FILE_UPLOAD_FAIL: 2400, MESSAGE_FILE_SELECT_FILE_FIRST: 2401, MESSAGE_FILE_SIZE_LIMIT: 2402, MESSAGE_FILE_URL_IS_EMPTY: 2403, MESSAGE_MERGER_TYPE_INVALID: 2450, MESSAGE_MERGER_KEY_INVALID: 2451, MESSAGE_MERGER_DOWNLOAD_FAIL: 2452, MESSAGE_FORWARD_TYPE_INVALID: 2453, MESSAGE_AT_TYPE_INVALID: 2454, MESSAGE_MODIFY_CONFLICT: 2480, MESSAGE_MODIFY_DISABLED_IN_AVCHATROOM: 2481, CONVERSATION_NOT_FOUND: 2500, USER_OR_GROUP_NOT_FOUND: 2501, CONVERSATION_UN_RECORDED_TYPE: 2502, ILLEGAL_GROUP_TYPE: 2600, CANNOT_JOIN_WORK: 2601, ILLEGAL_GROUP_ID: 2602, CANNOT_CHANGE_OWNER_IN_AVCHATROOM: 2620, CANNOT_CHANGE_OWNER_TO_SELF: 2621, CANNOT_DISMISS_Work: 2622, MEMBER_NOT_IN_GROUP: 2623, CANNOT_USE_GRP_ATTR_NOT_AVCHATROOM: 2641, CANNOT_USE_GRP_ATTR_AVCHATROOM_UNJOIN: 2642, JOIN_GROUP_FAIL: 2660, CANNOT_ADD_MEMBER_IN_AVCHATROOM: 2661, CANNOT_JOIN_NON_AVCHATROOM_WITHOUT_LOGIN: 2662, CANNOT_KICK_MEMBER_IN_AVCHATROOM: 2680, NOT_OWNER: 2681, CANNOT_SET_MEMBER_ROLE_IN_WORK_AND_AVCHATROOM: 2682, INVALID_MEMBER_ROLE: 2683, CANNOT_SET_SELF_MEMBER_ROLE: 2684, CANNOT_MUTE_SELF: 2685, NOT_MY_FRIEND: 2700, ALREADY_MY_FRIEND: 2701, FRIEND_GROUP_EXISTED: 2710, FRIEND_GROUP_NOT_EXIST: 2711, FRIEND_APPLICATION_NOT_EXIST: 2716, UPDATE_PROFILE_INVALID_PARAM: 2721, UPDATE_PROFILE_NO_KEY: 2722, ADD_BLACKLIST_INVALID_PARAM: 2740, DEL_BLACKLIST_INVALID_PARAM: 2741, CANNOT_ADD_SELF_TO_BLACKLIST: 2742, ADD_FRIEND_INVALID_PARAM: 2760, NETWORK_ERROR: 2800, NETWORK_TIMEOUT: 2801, NETWORK_BASE_OPTIONS_NO_URL: 2802, NETWORK_UNDEFINED_SERVER_NAME: 2803, NETWORK_PACKAGE_UNDEFINED: 2804, NO_NETWORK: 2805, CONVERTOR_IRREGULAR_PARAMS: 2900, NOTICE_RUNLOOP_UNEXPECTED_CONDITION: 2901, NOTICE_RUNLOOP_OFFSET_LOST: 2902, UNCAUGHT_ERROR: 2903, GET_LONGPOLL_ID_FAILED: 2904, INVALID_OPERATION: 2905, OVER_FREQUENCY_LIMIT: 2996, CANNOT_FIND_PROTOCOL: 2997, CANNOT_FIND_MODULE: 2998, SDK_IS_NOT_READY: 2999, LOGGING_IN: 3e3, LOGIN_FAILED: 3001, KICKED_OUT_MULT_DEVICE: 3002, KICKED_OUT_MULT_ACCOUNT: 3003, KICKED_OUT_USERSIG_EXPIRED: 3004, LOGGED_OUT: 3005, KICKED_OUT_REST_API: 3006, ILLEGAL_TOPIC_ID: 3021, LONG_POLL_KICK_OUT: 91101, MESSAGE_A2KEY_EXPIRED: 20002, ACCOUNT_A2KEY_EXPIRED: 70001, LONG_POLL_API_PARAM_ERROR: 90001, HELLO_ANSWER_KICKED_OUT: 1002, OPEN_SERVICE_OVERLOAD_ERROR: 60022 }, e_ = { NO_SDKAPPID: "无 SDKAppID", NO_ACCOUNT_TYPE: "无 accountType", NO_IDENTIFIER: "无 userID", NO_USERSIG: "无 userSig", NO_TINYID: "无 tinyID", NO_A2KEY: "无 a2key", USER_NOT_LOGGED_IN: "用户未登录", REPEAT_LOGIN: "重复登录", COS_UNDETECTED: "未检测到 COS 上传插件", COS_GET_SIG_FAIL: "获取 COS 预签名 URL 失败", MESSAGE_SEND_FAIL: "消息发送失败", MESSAGE_LIST_CONSTRUCTOR_NEED_OPTIONS: "MessageController.constructor() 需要参数 options", MESSAGE_SEND_NEED_MESSAGE_INSTANCE: "需要 Message 的实例", MESSAGE_SEND_INVALID_CONVERSATION_TYPE: 'Message.conversationType 只能为 "C2C" 或 "GROUP"', MESSAGE_FILE_IS_EMPTY: "无法发送空文件", MESSAGE_ONPROGRESS_FUNCTION_ERROR: "回调函数运行时遇到错误，请检查接入侧代码", MESSAGE_REVOKE_FAIL: "消息撤回失败", MESSAGE_DELETE_FAIL: "消息删除失败", MESSAGE_UNREAD_ALL_FAIL: "设置所有未读消息为已读处理失败", MESSAGE_CONTROL_INFO_FAIL: "社群不支持消息发送控制选项", READ_RECEIPT_MESSAGE_LIST_EMPTY: "消息列表中没有需要发送已读回执的消息", MESSAGE_SEND_GROUP_WITH_TOPIC_FAIL: "不能在支持话题的群组中发消息，请检查群组 isSupportTopic 属性", MESSAGE_IMAGE_SELECT_FILE_FIRST: "请先选择一个图片", MESSAGE_IMAGE_TYPES_LIMIT: "只允许上传 jpg png jpeg gif bmp image webp 格式的图片", MESSAGE_IMAGE_SIZE_LIMIT: "图片大小超过20M，无法发送", MESSAGE_AUDIO_UPLOAD_FAIL: "语音上传失败", MESSAGE_AUDIO_SIZE_LIMIT: "语音大小大于20M，无法发送", MESSAGE_VIDEO_UPLOAD_FAIL: "视频上传失败", MESSAGE_VIDEO_SIZE_LIMIT: "视频大小超过100M，无法发送", MESSAGE_VIDEO_TYPES_LIMIT: "只允许上传 mp4 格式的视频", MESSAGE_FILE_UPLOAD_FAIL: "文件上传失败", MESSAGE_FILE_SELECT_FILE_FIRST: "请先选择一个文件", MESSAGE_FILE_SIZE_LIMIT: "文件大小超过100M，无法发送 ", MESSAGE_FILE_URL_IS_EMPTY: "缺少必要的参数文件 URL", MESSAGE_MERGER_TYPE_INVALID: "非合并消息", MESSAGE_MERGER_KEY_INVALID: "合并消息的 messageKey 无效", MESSAGE_MERGER_DOWNLOAD_FAIL: "下载合并消息失败", MESSAGE_FORWARD_TYPE_INVALID: "选择的消息类型（如群提示消息）不可以转发", MESSAGE_AT_TYPE_INVALID: "社群/话题不支持 @ 所有人", MESSAGE_MODIFY_CONFLICT: "修改消息时发生冲突", MESSAGE_MODIFY_DISABLED_IN_AVCHATROOM: "直播群不支持修改消息", CONVERSATION_NOT_FOUND: "没有找到相应的会话，请检查传入参数", USER_OR_GROUP_NOT_FOUND: "没有找到相应的用户或群组，请检查传入参数", CONVERSATION_UN_RECORDED_TYPE: "未记录的会话类型", ILLEGAL_GROUP_TYPE: "非法的群类型，请检查传入参数", CANNOT_JOIN_WORK: "不能加入 Work 类型的群组", ILLEGAL_GROUP_ID: "群组 ID 非法，非 Community 类型群组不能以 @TGS#_ 为前缀，Community 类型群组必须以 @TGS#_ 为前缀且不能包含 @TOPIC#_ 字符串", CANNOT_CHANGE_OWNER_IN_AVCHATROOM: "AVChatRoom 类型的群组不能转让群主", CANNOT_CHANGE_OWNER_TO_SELF: "不能把群主转让给自己", CANNOT_DISMISS_WORK: "不能解散 Work 类型的群组", MEMBER_NOT_IN_GROUP: "用户不在该群组内", JOIN_GROUP_FAIL: "加群失败，请检查传入参数或重试", CANNOT_ADD_MEMBER_IN_AVCHATROOM: "AVChatRoom 类型的群不支持邀请群成员", CANNOT_JOIN_NON_AVCHATROOM_WITHOUT_LOGIN: "非 AVChatRoom 类型的群组不允许匿名加群，请先登录后再加群", CANNOT_KICK_MEMBER_IN_AVCHATROOM: "不能在 AVChatRoom 类型的群组踢人", NOT_OWNER: "你不是群主，只有群主才有权限操作", CANNOT_SET_MEMBER_ROLE_IN_WORK_AND_AVCHATROOM: "不能在 Work / AVChatRoom 类型的群中设置群成员身份", INVALID_MEMBER_ROLE: "不合法的群成员身份，请检查传入参数", CANNOT_SET_SELF_MEMBER_ROLE: "不能设置自己的群成员身份，请检查传入参数", CANNOT_MUTE_SELF: "不能将自己禁言，请检查传入参数", NOT_MY_FRIEND: "非好友关系", ALREADY_MY_FRIEND: "已经是好友关系", FRIEND_GROUP_EXISTED: "好友分组已存在", FRIEND_GROUP_NOT_EXIST: "好友分组不存在", FRIEND_APPLICATION_NOT_EXIST: "好友申请不存在", UPDATE_PROFILE_INVALID_PARAM: "传入 updateMyProfile 接口的参数无效", UPDATE_PROFILE_NO_KEY: "updateMyProfile 无标配资料字段或自定义资料字段", ADD_BLACKLIST_INVALID_PARAM: "传入 addToBlacklist 接口的参数无效", DEL_BLACKLIST_INVALID_PARAM: "传入 removeFromBlacklist 接口的参数无效", CANNOT_ADD_SELF_TO_BLACKLIST: "不能拉黑自己", ADD_FRIEND_INVALID_PARAM: "传入 addFriend 接口的参数无效", NETWORK_ERROR: "网络错误", NETWORK_TIMEOUT: "请求超时", NETWORK_BASE_OPTIONS_NO_URL: "网络层初始化错误，缺少 URL 参数", NETWORK_UNDEFINED_SERVER_NAME: "打包错误，未定义的 serverName", NETWORK_PACKAGE_UNDEFINED: "未定义的 packageConfig", NO_NETWORK: "未连接到网络", CONVERTOR_IRREGULAR_PARAMS: "不规范的参数名称", NOTICE_RUNLOOP_UNEXPECTED_CONDITION: "意料外的通知条件", NOTICE_RUNLOOP_OFFSET_LOST: "_syncOffset 丢失", GET_LONGPOLL_ID_FAILED: "获取 longpolling id 失败", UNCAUGHT_ERROR: "未经明确定义的错误", INVALID_OPERATION: "无效操作，如调用了未定义或者未实现的方法等", CANNOT_FIND_PROTOCOL: "无法找到协议", CANNOT_FIND_MODULE: "无法找到模块，请参考：https://web.sdk.qcloud.com/im/doc/zh-cn/tutorial-03-sns.html", SDK_IS_NOT_READY: "接口需要 SDK 处于 ready 状态后才能调用", LOGGING_IN: "用户正在登录中", LOGIN_FAILED: "用户登录失败", KICKED_OUT_MULT_DEVICE: "用户多终端登录被踢出", KICKED_OUT_MULT_ACCOUNT: "用户多实例登录被踢出", KICKED_OUT_USERSIG_EXPIRED: "用户 userSig 过期被踢出", LOGGED_OUT: "用户已登出", KICKED_OUT_REST_API: "用户被 REST API - kick 接口: https://cloud.tencent.com/document/product/269/3853 踢出", OVER_FREQUENCY_LIMIT: "超出 SDK 频率控制", LONG_POLL_KICK_OUT: "检测到多个 web 实例登录，消息通道下线", OPEN_SERVICE_OVERLOAD_ERROR: "后台服务正忙，请稍后再试", MESSAGE_A2KEY_EXPIRED: "消息错误码：UserSig 或 A2 失效。", ACCOUNT_A2KEY_EXPIRED: "帐号错误码：UserSig 已过期，请重新生成。建议 UserSig 有效期设置不小于24小时。", LONG_POLL_API_PARAM_ERROR: "longPoll API parameters error", ILLEGAL_TOPIC_ID: "topicID 非法" }, t_ = "networkRTT", n_ = "messageE2EDelay", o_ = "sendMessageC2C", r_ = "sendMessageGroup", a_ = "sendMessageGroupAV", s_ = "sendMessageRichMedia", i_ = "cosUpload", c_ = "messageReceivedGroup", u_ = "messageReceivedGroupAVPush", l_ = "messageReceivedGroupAVPull", d_ = (s2(Xp = {}, t_, 2), s2(Xp, n_, 3), s2(Xp, o_, 4), s2(Xp, r_, 5), s2(Xp, a_, 6), s2(Xp, s_, 7), s2(Xp, c_, 8), s2(Xp, u_, 9), s2(Xp, l_, 10), s2(Xp, i_, 11), Xp), p_ = { info: 4, warning: 5, error: 6 }, g_ = { wifi: 1, "2g": 2, "3g": 3, "4g": 4, "5g": 5, unknown: 6, none: 7, online: 8 }, h_ = { login: 4 }, __ = function() {
        function e3(t3) {
          o2(this, e3), this.eventType = h_[t3] || 0, this.timestamp = 0, this.networkType = 8, this.code = 0, this.message = "", this.moreMessage = "", this.extension = t3, this.costTime = 0, this.duplicate = false, this.level = 4, this.uiPlatform = void 0, this._sentFlag = false, this._startts = Rl();
        }
        return a2(e3, [{ key: "updateTimeStamp", value: function() {
          this.timestamp = Rl();
        } }, { key: "start", value: function(e4) {
          return this._startts = e4, this;
        } }, { key: "end", value: function() {
          var e4 = this, t3 = arguments.length > 0 && void 0 !== arguments[0] && arguments[0];
          if (!this._sentFlag) {
            var n3 = Rl();
            0 === this.costTime && (this.costTime = n3 - this._startts), this.setMoreMessage("startts:".concat(this._startts, " endts:").concat(n3)), t3 ? (this._sentFlag = true, this._eventStatModule && this._eventStatModule.pushIn(this)) : setTimeout(function() {
              e4._sentFlag = true, e4._eventStatModule && e4._eventStatModule.pushIn(e4);
            }, 0);
          }
        } }, { key: "setError", value: function(e4, t3, n3) {
          return e4 instanceof Error ? (this._sentFlag || (this.setNetworkType(n3), t3 ? (e4.code && this.setCode(e4.code), e4.message && this.setMoreMessage(e4.message)) : (this.setCode(Zh.NO_NETWORK), this.setMoreMessage(e_.NO_NETWORK)), this.setLevel("error")), this) : (wl.warn("SSOLogData.setError value not instanceof Error, please check!"), this);
        } }, { key: "setCode", value: function(e4) {
          return Zl(e4) || this._sentFlag || ("ECONNABORTED" === e4 && (this.code = 103), $l(e4) ? this.code = e4 : wl.warn("SSOLogData.setCode value not a number, please check!", e4, n2(e4))), this;
        } }, { key: "setMessage", value: function(e4) {
          return Zl(e4) || this._sentFlag || ($l(e4) && (this.message = e4.toString()), zl(e4) && (this.message = e4)), this;
        } }, { key: "setCostTime", value: function(e4) {
          return this.costTime = e4, this;
        } }, { key: "setLevel", value: function(e4) {
          return Zl(e4) || this._sentFlag || (this.level = p_[e4]), this;
        } }, { key: "setMoreMessage", value: function(e4) {
          return qd(this.moreMessage) ? this.moreMessage = "".concat(e4) : this.moreMessage += " ".concat(e4), this;
        } }, { key: "setNetworkType", value: function(e4) {
          if (Zl(e4))
            wl.warn("SSOLogData.setNetworkType value is undefined, please check!");
          else {
            var t3 = g_[e4.toLowerCase()];
            Zl(t3) || (this.networkType = t3);
          }
          return this;
        } }, { key: "getStartTs", value: function() {
          return this._startts;
        } }, { key: "setUIPlatform", value: function(e4) {
          this.uiPlatform = e4;
        } }], [{ key: "bindEventStatModule", value: function(t3) {
          e3.prototype._eventStatModule = t3;
        } }]), e3;
      }(), f_ = { SDK_CONSTRUCT: "sdkConstruct", SDK_READY: "sdkReady", LOGIN: "login", LOGOUT: "logout", KICKED_OUT: "kickedOut", REGISTER_PLUGIN: "registerPlugin", KICK_OTHER: "kickOther", WS_CONNECT: "wsConnect", WS_ON_OPEN: "wsOnOpen", WS_ON_CLOSE: "wsOnClose", WS_ON_ERROR: "wsOnError", NETWORK_CHANGE: "networkChange", GET_COS_AUTH_KEY: "getCosAuthKey", GET_COS_PRE_SIG_URL: "getCosPreSigUrl", GET_SNAPSHOT_INFO: "getSnapshotInfo", UPLOAD: "upload", SEND_MESSAGE: "sendMessage", SEND_MESSAGE_WITH_RECEIPT: "sendMessageWithReceipt", SEND_COMBO_MESSAGE: "sendComboMessage", GET_C2C_ROAMING_MESSAGES: "getC2CRoamingMessages", GET_GROUP_ROAMING_MESSAGES: "getGroupRoamingMessages", GET_C2C_ROAMING_MESSAGES_HOPPING: "getC2CRoamingMessagesHopping", GET_GROUP_ROAMING_MESSAGES_HOPPING: "getGroupRoamingMessagesHopping", GET_READ_RECEIPT: "getReadReceipt", GET_READ_RECEIPT_DETAIL: "getReadReceiptDetail", SEND_READ_RECEIPT: "sendReadReceipt", SEND_C2C_READ_RECEIPT: "sendC2CReadReceipt", REVOKE_MESSAGE: "revokeMessage", DELETE_MESSAGE: "deleteMessage", EDIT_MESSAGE: "modifyMessage", SET_C2C_MESSAGE_READ: "setC2CMessageRead", SET_GROUP_MESSAGE_READ: "setGroupMessageRead", EMPTY_MESSAGE_BODY: "emptyMessageBody", GET_PEER_READ_TIME: "getPeerReadTime", UPLOAD_MERGER_MESSAGE: "uploadMergerMessage", DOWNLOAD_MERGER_MESSAGE: "downloadMergerMessage", JSON_PARSE_ERROR: "jsonParseError", MESSAGE_E2E_DELAY_EXCEPTION: "messageE2EDelayException", GET_CONVERSATION_LIST: "getConversationList", GET_CONVERSATION_PROFILE: "getConversationProfile", DELETE_CONVERSATION: "deleteConversation", PIN_CONVERSATION: "pinConversation", GET_CONVERSATION_LIST_IN_STORAGE: "getConversationListInStorage", SYNC_CONVERSATION_LIST: "syncConversationList", SET_ALL_MESSAGE_READ: "setAllMessageRead", CREATE_GROUP: "createGroup", APPLY_JOIN_GROUP: "applyJoinGroup", QUIT_GROUP: "quitGroup", SEARCH_GROUP_BY_ID: "searchGroupByID", CHANGE_GROUP_OWNER: "changeGroupOwner", HANDLE_GROUP_APPLICATION: "handleGroupApplication", HANDLE_GROUP_INVITATION: "handleGroupInvitation", SET_MESSAGE_REMIND_TYPE: "setMessageRemindType", DISMISS_GROUP: "dismissGroup", UPDATE_GROUP_PROFILE: "updateGroupProfile", GET_GROUP_LIST: "getGroupList", GET_GROUP_PROFILE: "getGroupProfile", GET_GROUP_LIST_IN_STORAGE: "getGroupListInStorage", GET_GROUP_LAST_SEQUENCE: "getGroupLastSequence", GET_GROUP_MISSING_MESSAGE: "getGroupMissingMessage", PAGING_GET_GROUP_LIST: "pagingGetGroupList", PAGING_GET_GROUP_LIST_WITH_TOPIC: "pagingGetGroupListWithTopic", GET_GROUP_SIMPLIFIED_INFO: "getGroupSimplifiedInfo", JOIN_WITHOUT_AUTH: "joinWithoutAuth", INIT_GROUP_ATTRIBUTES: "initGroupAttributes", SET_GROUP_ATTRIBUTES: "setGroupAttributes", DELETE_GROUP_ATTRIBUTES: "deleteGroupAttributes", GET_GROUP_ATTRIBUTES: "getGroupAttributes", GET_GROUP_MEMBER_LIST: "getGroupMemberList", GET_GROUP_MEMBER_PROFILE: "getGroupMemberProfile", ADD_GROUP_MEMBER: "addGroupMember", DELETE_GROUP_MEMBER: "deleteGroupMember", SET_GROUP_MEMBER_MUTE_TIME: "setGroupMemberMuteTime", SET_GROUP_MEMBER_NAME_CARD: "setGroupMemberNameCard", SET_GROUP_MEMBER_ROLE: "setGroupMemberRole", SET_GROUP_MEMBER_CUSTOM_FIELD: "setGroupMemberCustomField", GET_GROUP_ONLINE_MEMBER_COUNT: "getGroupOnlineMemberCount", SYNC_MESSAGE: "syncMessage", LONG_POLLING_AV_ERROR: "longPollingAVError", MESSAGE_LOSS: "messageLoss", MESSAGE_STACKED: "messageStacked", GET_USER_PROFILE: "getUserProfile", UPDATE_MY_PROFILE: "updateMyProfile", GET_BLACKLIST: "getBlacklist", ADD_TO_BLACKLIST: "addToBlacklist", REMOVE_FROM_BLACKLIST: "removeFromBlacklist", ADD_FRIEND: "addFriend", CHECK_FRIEND: "checkFriend", DELETE_FRIEND: "removeFromFriendList", GET_FRIEND_PROFILE: "getFriendProfile", GET_FRIEND_LIST: "getFriendList", UPDATE_FRIEND: "updateFriend", GET_FRIEND_APPLICATION_LIST: "getFriendApplicationList", DELETE_FRIEND_APPLICATION: "deleteFriendApplication", ACCEPT_FRIEND_APPLICATION: "acceptFriendApplication", REFUSE_FRIEND_APPLICATION: "refuseFriendApplication", SET_FRIEND_APPLICATION_READ: "setFriendApplicationRead", CREATE_FRIEND_GROUP: "createFriendGroup", DELETE_FRIEND_GROUP: "deleteFriendGroup", RENAME_FRIEND_GROUP: "renameFriendGroup", ADD_TO_FRIEND_GROUP: "addToFriendGroup", REMOVE_FROM_FRIEND_GROUP: "removeFromFriendGroup", GET_FRIEND_GROUP_LIST: "getFriendGroupList", CREATE_TOPIC: "createTopic", DELETE_TOPIC: "deleteTopic", UPDATE_TOPIC_PROFILE: "updateTopicProfile", GET_TOPIC_LIST: "getTopicList", RELAY_GET_TOPIC_LIST: "relayGetTopicList", GET_TOPIC_LAST_SEQUENCE: "getTopicLastSequence", MP_HIDE_TO_SHOW: "mpHideToShow", CALLBACK_FUNCTION_ERROR: "callbackFunctionError", FETCH_CLOUD_CONTROL_CONFIG: "fetchCloudControlConfig", PUSHED_CLOUD_CONTROL_CONFIG: "pushedCloudControlConfig", FETCH_COMMERCIAL_CONFIG: "fetchCommercialConfig", PUSHED_COMMERCIAL_CONFIG: "pushedCommercialConfig", ERROR: "error", LAST_MESSAGE_NOT_EXIST: "lastMessageNotExist" }, m_ = F2.f, v_ = B2(m_), M_ = B2([].push), y_ = function(e3) {
        return function(t3) {
          for (var n3, o3 = Z2(t3), r3 = Dn(o3), a3 = r3.length, s3 = 0, i3 = []; a3 > s3; )
            n3 = r3[s3++], k && !v_(o3, n3) || M_(i3, e3 ? [n3, o3[n3]] : o3[n3]);
          return i3;
        };
      }, I_ = { entries: y_(true), values: y_(false) }.values;
      nn2({ target: "Object", stat: true }, { values: function(e3) {
        return I_(e3);
      } });
      var E_ = function() {
        function e3(t3) {
          o2(this, e3), this.type = gr.MSG_TEXT, this.content = { text: t3.text || "" };
        }
        return a2(e3, [{ key: "setText", value: function(e4) {
          this.content.text = e4;
        } }, { key: "sendable", value: function() {
          return 0 !== this.content.text.length;
        } }]), e3;
      }(), T_ = Ue2("iterator"), S_ = !L2(function() {
        var e3 = new URL("b?a=1&b=2&c=3", "http://a"), t3 = e3.searchParams, n3 = "";
        return e3.pathname = "c%20d", t3.forEach(function(e4, o3) {
          t3.delete("b"), n3 += o3 + e4;
        }), !t3.sort || "http://a/c%20d?a=1&c=3" !== e3.href || "3" !== t3.get("c") || "a=1" !== String(new URLSearchParams("?a=1")) || !t3[T_] || "a" !== new URL("https://a@b").username || "b" !== new URLSearchParams(new URLSearchParams("a=b")).get("a") || "xn--e1aybc" !== new URL("http://тест").host || "#%D0%B1" !== new URL("http://a#б").hash || "a1c3" !== n3 || "x" !== new URL("http://x", void 0).host;
      }), C_ = Object.assign, A_ = Object.defineProperty, D_ = B2([].concat), N_ = !C_ || L2(function() {
        if (k && 1 !== C_({ b: 1 }, C_(A_({}, "a", { enumerable: true, get: function() {
          A_(this, "b", { value: 3, enumerable: false });
        } }), { b: 2 })).b)
          return true;
        var e3 = {}, t3 = {}, n3 = Symbol();
        return e3[n3] = 7, "abcdefghijklmnopqrst".split("").forEach(function(e4) {
          t3[e4] = e4;
        }), 7 != C_({}, e3)[n3] || "abcdefghijklmnopqrst" != Dn(C_({}, t3)).join("");
      }) ? function(e3, t3) {
        for (var n3 = Ae2(e3), o3 = arguments.length, r3 = 1, a3 = Bt2.f, s3 = F2.f; o3 > r3; )
          for (var i3, c3 = J2(arguments[r3++]), u3 = a3 ? D_(Dn(c3), a3(c3)) : Dn(c3), l3 = u3.length, d3 = 0; l3 > d3; )
            i3 = u3[d3++], k && !b2(s3, c3, i3) || (n3[i3] = c3[i3]);
        return n3;
      } : C_, O_ = /[^\0-\u007E]/, R_ = /[.\u3002\uFF0E\uFF61]/g, L_ = "Overflow: input needs wider integers to process", k_ = R2.RangeError, P_ = B2(R_.exec), G_ = Math.floor, b_ = String.fromCharCode, w_ = B2("".charCodeAt), U_ = B2([].join), F_ = B2([].push), q_ = B2("".replace), V_ = B2("".split), x_ = B2("".toLowerCase), K_ = function(e3) {
        return e3 + 22 + 75 * (e3 < 26);
      }, H_ = function(e3, t3, n3) {
        var o3 = 0;
        for (e3 = n3 ? G_(e3 / 700) : e3 >> 1, e3 += G_(e3 / t3); e3 > 455; )
          e3 = G_(e3 / 35), o3 += 36;
        return G_(o3 + 36 * e3 / (e3 + 38));
      }, B_ = function(e3) {
        var t3, n3, o3 = [], r3 = (e3 = function(e4) {
          for (var t4 = [], n4 = 0, o4 = e4.length; n4 < o4; ) {
            var r4 = w_(e4, n4++);
            if (r4 >= 55296 && r4 <= 56319 && n4 < o4) {
              var a4 = w_(e4, n4++);
              56320 == (64512 & a4) ? F_(t4, ((1023 & r4) << 10) + (1023 & a4) + 65536) : (F_(t4, r4), n4--);
            } else
              F_(t4, r4);
          }
          return t4;
        }(e3)).length, a3 = 128, s3 = 0, i3 = 72;
        for (t3 = 0; t3 < e3.length; t3++)
          (n3 = e3[t3]) < 128 && F_(o3, b_(n3));
        var c3 = o3.length, u3 = c3;
        for (c3 && F_(o3, "-"); u3 < r3; ) {
          var l3 = 2147483647;
          for (t3 = 0; t3 < e3.length; t3++)
            (n3 = e3[t3]) >= a3 && n3 < l3 && (l3 = n3);
          var d3 = u3 + 1;
          if (l3 - a3 > G_((2147483647 - s3) / d3))
            throw k_(L_);
          for (s3 += (l3 - a3) * d3, a3 = l3, t3 = 0; t3 < e3.length; t3++) {
            if ((n3 = e3[t3]) < a3 && ++s3 > 2147483647)
              throw k_(L_);
            if (n3 == a3) {
              for (var p3 = s3, g3 = 36; ; ) {
                var h3 = g3 <= i3 ? 1 : g3 >= i3 + 26 ? 26 : g3 - i3;
                if (p3 < h3)
                  break;
                var _3 = p3 - h3, f3 = 36 - h3;
                F_(o3, b_(K_(h3 + _3 % f3))), p3 = G_(_3 / f3), g3 += 36;
              }
              F_(o3, b_(K_(p3))), i3 = H_(s3, d3, u3 == c3), s3 = 0, u3++;
            }
          }
          s3++, a3++;
        }
        return U_(o3, "");
      }, j_ = Math.floor, W_ = function(e3, t3) {
        var n3 = e3.length, o3 = j_(n3 / 2);
        return n3 < 8 ? Y_(e3, t3) : $_(e3, W_(ci(e3, 0, o3), t3), W_(ci(e3, o3), t3), t3);
      }, Y_ = function(e3, t3) {
        for (var n3, o3, r3 = e3.length, a3 = 1; a3 < r3; ) {
          for (o3 = a3, n3 = e3[a3]; o3 && t3(e3[o3 - 1], n3) > 0; )
            e3[o3] = e3[--o3];
          o3 !== a3++ && (e3[o3] = n3);
        }
        return e3;
      }, $_ = function(e3, t3, n3, o3) {
        for (var r3 = t3.length, a3 = n3.length, s3 = 0, i3 = 0; s3 < r3 || i3 < a3; )
          e3[s3 + i3] = s3 < r3 && i3 < a3 ? o3(t3[s3], n3[i3]) <= 0 ? t3[s3++] : n3[i3++] : s3 < r3 ? t3[s3++] : n3[i3++];
        return e3;
      }, z_ = W_, J_ = Ue2("iterator"), X_ = It2.set, Q_ = It2.getterFor("URLSearchParams"), Z_ = It2.getterFor("URLSearchParamsIterator"), ef = oe2("fetch"), tf = oe2("Request"), nf = oe2("Headers"), of = tf && tf.prototype, rf = nf && nf.prototype, af = R2.RegExp, sf = R2.TypeError, cf = R2.decodeURIComponent, uf = R2.encodeURIComponent, lf = B2("".charAt), df = B2([].join), pf = B2([].push), gf = B2("".replace), hf = B2([].shift), _f = B2([].splice), ff = B2("".split), mf = B2("".slice), vf = /\+/g, Mf = Array(4), yf = function(e3) {
        return Mf[e3 - 1] || (Mf[e3 - 1] = af("((?:%[\\da-f]{2}){" + e3 + "})", "gi"));
      }, If = function(e3) {
        try {
          return cf(e3);
        } catch (rS) {
          return e3;
        }
      }, Ef = function(e3) {
        var t3 = gf(e3, vf, " "), n3 = 4;
        try {
          return cf(t3);
        } catch (rS) {
          for (; n3; )
            t3 = gf(t3, yf(n3--), If);
          return t3;
        }
      }, Tf = /[!'()~]|%20/g, Sf = { "!": "%21", "'": "%27", "(": "%28", ")": "%29", "~": "%7E", "%20": "+" }, Cf = function(e3) {
        return Sf[e3];
      }, Af = function(e3) {
        return gf(uf(e3), Tf, Cf);
      }, Df = Qo(function(e3, t3) {
        X_(this, { type: "URLSearchParamsIterator", iterator: Eo(Q_(e3).entries), kind: t3 });
      }, "Iterator", function() {
        var e3 = Z_(this), t3 = e3.kind, n3 = e3.iterator.next(), o3 = n3.value;
        return n3.done || (n3.value = "keys" === t3 ? o3.key : "values" === t3 ? o3.value : [o3.key, o3.value]), n3;
      }, true), Nf = function(e3) {
        this.entries = [], this.url = null, void 0 !== e3 && (te2(e3) ? this.parseObject(e3) : this.parseQuery("string" == typeof e3 ? "?" === lf(e3, 0) ? mf(e3, 1) : e3 : dn(e3)));
      };
      Nf.prototype = { type: "URLSearchParams", bindURL: function(e3) {
        this.url = e3, this.update();
      }, parseObject: function(e3) {
        var t3, n3, o3, r3, a3, s3, i3, c3 = yo(e3);
        if (c3)
          for (n3 = (t3 = Eo(e3, c3)).next; !(o3 = b2(n3, t3)).done; ) {
            if (a3 = (r3 = Eo(Xe2(o3.value))).next, (s3 = b2(a3, r3)).done || (i3 = b2(a3, r3)).done || !b2(a3, r3).done)
              throw sf("Expected sequence with length 2");
            pf(this.entries, { key: dn(s3.value), value: dn(i3.value) });
          }
        else
          for (var u3 in e3)
            Ne2(e3, u3) && pf(this.entries, { key: u3, value: dn(e3[u3]) });
      }, parseQuery: function(e3) {
        if (e3)
          for (var t3, n3, o3 = ff(e3, "&"), r3 = 0; r3 < o3.length; )
            (t3 = o3[r3++]).length && (n3 = ff(t3, "="), pf(this.entries, { key: Ef(hf(n3)), value: Ef(df(n3, "=")) }));
      }, serialize: function() {
        for (var e3, t3 = this.entries, n3 = [], o3 = 0; o3 < t3.length; )
          e3 = t3[o3++], pf(n3, Af(e3.key) + "=" + Af(e3.value));
        return df(n3, "&");
      }, update: function() {
        this.entries.length = 0, this.parseQuery(this.url.query);
      }, updateURL: function() {
        this.url && this.url.update();
      } };
      var Of = function() {
        ki(this, Rf);
        var e3 = arguments.length > 0 ? arguments[0] : void 0;
        X_(this, new Nf(e3));
      }, Rf = Of.prototype;
      if (Ni(Rf, { append: function(e3, t3) {
        Ki(arguments.length, 2);
        var n3 = Q_(this);
        pf(n3.entries, { key: dn(e3), value: dn(t3) }), n3.updateURL();
      }, delete: function(e3) {
        Ki(arguments.length, 1);
        for (var t3 = Q_(this), n3 = t3.entries, o3 = dn(e3), r3 = 0; r3 < n3.length; )
          n3[r3].key === o3 ? _f(n3, r3, 1) : r3++;
        t3.updateURL();
      }, get: function(e3) {
        Ki(arguments.length, 1);
        for (var t3 = Q_(this).entries, n3 = dn(e3), o3 = 0; o3 < t3.length; o3++)
          if (t3[o3].key === n3)
            return t3[o3].value;
        return null;
      }, getAll: function(e3) {
        Ki(arguments.length, 1);
        for (var t3 = Q_(this).entries, n3 = dn(e3), o3 = [], r3 = 0; r3 < t3.length; r3++)
          t3[r3].key === n3 && pf(o3, t3[r3].value);
        return o3;
      }, has: function(e3) {
        Ki(arguments.length, 1);
        for (var t3 = Q_(this).entries, n3 = dn(e3), o3 = 0; o3 < t3.length; )
          if (t3[o3++].key === n3)
            return true;
        return false;
      }, set: function(e3, t3) {
        Ki(arguments.length, 1);
        for (var n3, o3 = Q_(this), r3 = o3.entries, a3 = false, s3 = dn(e3), i3 = dn(t3), c3 = 0; c3 < r3.length; c3++)
          (n3 = r3[c3]).key === s3 && (a3 ? _f(r3, c3--, 1) : (a3 = true, n3.value = i3));
        a3 || pf(r3, { key: s3, value: i3 }), o3.updateURL();
      }, sort: function() {
        var e3 = Q_(this);
        z_(e3.entries, function(e4, t3) {
          return e4.key > t3.key ? 1 : -1;
        }), e3.updateURL();
      }, forEach: function(e3) {
        for (var t3, n3 = Q_(this).entries, o3 = Un(e3, arguments.length > 1 ? arguments[1] : void 0), r3 = 0; r3 < n3.length; )
          o3((t3 = n3[r3++]).value, t3.key, this);
      }, keys: function() {
        return new Df(this, "keys");
      }, values: function() {
        return new Df(this, "values");
      }, entries: function() {
        return new Df(this, "entries");
      } }, { enumerable: true }), At2(Rf, J_, Rf.entries, { name: "entries" }), At2(Rf, "toString", function() {
        return Q_(this).serialize();
      }, { enumerable: true }), zo(Of, "URLSearchParams"), nn2({ global: true, forced: !S_ }, { URLSearchParams: Of }), !S_ && ee2(nf)) {
        var Lf = B2(rf.has), kf = B2(rf.set), Pf = function(e3) {
          if (te2(e3)) {
            var t3, n3 = e3.body;
            if ("URLSearchParams" === un(n3))
              return t3 = e3.headers ? new nf(e3.headers) : new nf(), Lf(t3, "content-type") || kf(t3, "content-type", "application/x-www-form-urlencoded;charset=UTF-8"), bn(e3, { body: q2(0, dn(n3)), headers: q2(0, t3) });
          }
          return e3;
        };
        if (ee2(ef) && nn2({ global: true, enumerable: true, forced: true }, { fetch: function(e3) {
          return ef(e3, arguments.length > 1 ? Pf(arguments[1]) : {});
        } }), ee2(tf)) {
          var Gf = function(e3) {
            return ki(this, of), new tf(e3, arguments.length > 1 ? Pf(arguments[1]) : {});
          };
          of.constructor = Gf, Gf.prototype = of, nn2({ global: true, forced: true }, { Request: Gf });
        }
      }
      var bf, wf = { URLSearchParams: Of, getState: Q_ }, Uf = Nn.f, Ff = Fo.codeAt, qf = It2.set, Vf = It2.getterFor("URL"), xf = wf.URLSearchParams, Kf = wf.getState, Hf = R2.URL, Bf = R2.TypeError, jf = R2.parseInt, Wf = Math.floor, Yf = Math.pow, $f = B2("".charAt), zf = B2(/./.exec), Jf = B2([].join), Xf = B2(1 .toString), Qf = B2([].pop), Zf = B2([].push), em = B2("".replace), tm = B2([].shift), nm = B2("".split), om = B2("".slice), rm = B2("".toLowerCase), am = B2([].unshift), sm = /[a-z]/i, im = /[\d+-.a-z]/i, cm = /\d/, um = /^0x/i, lm = /^[0-7]+$/, dm = /^\d+$/, pm = /^[\da-f]+$/i, gm = /[\0\t\n\r #%/:<>?@[\\\]^|]/, hm = /[\0\t\n\r #/:<>?@[\\\]^|]/, _m = /^[\u0000-\u0020]+|[\u0000-\u0020]+$/g, fm = /[\t\n\r]/g, mm = function(e3) {
        var t3, n3, o3, r3;
        if ("number" == typeof e3) {
          for (t3 = [], n3 = 0; n3 < 4; n3++)
            am(t3, e3 % 256), e3 = Wf(e3 / 256);
          return Jf(t3, ".");
        }
        if ("object" == typeof e3) {
          for (t3 = "", o3 = function(e4) {
            for (var t4 = null, n4 = 1, o4 = null, r4 = 0, a3 = 0; a3 < 8; a3++)
              0 !== e4[a3] ? (r4 > n4 && (t4 = o4, n4 = r4), o4 = null, r4 = 0) : (null === o4 && (o4 = a3), ++r4);
            return r4 > n4 && (t4 = o4, n4 = r4), t4;
          }(e3), n3 = 0; n3 < 8; n3++)
            r3 && 0 === e3[n3] || (r3 && (r3 = false), o3 === n3 ? (t3 += n3 ? ":" : "::", r3 = true) : (t3 += Xf(e3[n3], 16), n3 < 7 && (t3 += ":")));
          return "[" + t3 + "]";
        }
        return e3;
      }, vm = {}, Mm = N_({}, vm, { " ": 1, '"': 1, "<": 1, ">": 1, "`": 1 }), ym = N_({}, Mm, { "#": 1, "?": 1, "{": 1, "}": 1 }), Im = N_({}, ym, { "/": 1, ":": 1, ";": 1, "=": 1, "@": 1, "[": 1, "\\": 1, "]": 1, "^": 1, "|": 1 }), Em = function(e3, t3) {
        var n3 = Ff(e3, 0);
        return n3 > 32 && n3 < 127 && !Ne2(t3, e3) ? e3 : encodeURIComponent(e3);
      }, Tm = { ftp: 21, file: null, http: 80, https: 443, ws: 80, wss: 443 }, Sm = function(e3, t3) {
        var n3;
        return 2 == e3.length && zf(sm, $f(e3, 0)) && (":" == (n3 = $f(e3, 1)) || !t3 && "|" == n3);
      }, Cm = function(e3) {
        var t3;
        return e3.length > 1 && Sm(om(e3, 0, 2)) && (2 == e3.length || "/" === (t3 = $f(e3, 2)) || "\\" === t3 || "?" === t3 || "#" === t3);
      }, Am = function(e3) {
        return "." === e3 || "%2e" === rm(e3);
      }, Dm = {}, Nm = {}, Om = {}, Rm = {}, Lm = {}, km = {}, Pm = {}, Gm = {}, bm = {}, wm = {}, Um = {}, Fm = {}, qm = {}, Vm = {}, xm = {}, Km = {}, Hm = {}, Bm = {}, jm = {}, Wm = {}, Ym = {}, $m = function(e3, t3, n3) {
        var o3, r3, a3, s3 = dn(e3);
        if (t3) {
          if (r3 = this.parse(s3))
            throw Bf(r3);
          this.searchParams = null;
        } else {
          if (void 0 !== n3 && (o3 = new $m(n3, true)), r3 = this.parse(s3, null, o3))
            throw Bf(r3);
          (a3 = Kf(new xf())).bindURL(this), this.searchParams = a3;
        }
      };
      $m.prototype = { type: "URL", parse: function(e3, t3, n3) {
        var o3, r3, a3, s3, i3, c3 = this, u3 = t3 || Dm, l3 = 0, d3 = "", p3 = false, g3 = false, h3 = false;
        for (e3 = dn(e3), t3 || (c3.scheme = "", c3.username = "", c3.password = "", c3.host = null, c3.port = null, c3.path = [], c3.query = null, c3.fragment = null, c3.cannotBeABaseURL = false, e3 = em(e3, _m, "")), e3 = em(e3, fm, ""), o3 = So(e3); l3 <= o3.length; ) {
          switch (r3 = o3[l3], u3) {
            case Dm:
              if (!r3 || !zf(sm, r3)) {
                if (t3)
                  return "Invalid scheme";
                u3 = Om;
                continue;
              }
              d3 += rm(r3), u3 = Nm;
              break;
            case Nm:
              if (r3 && (zf(im, r3) || "+" == r3 || "-" == r3 || "." == r3))
                d3 += rm(r3);
              else {
                if (":" != r3) {
                  if (t3)
                    return "Invalid scheme";
                  d3 = "", u3 = Om, l3 = 0;
                  continue;
                }
                if (t3 && (c3.isSpecial() != Ne2(Tm, d3) || "file" == d3 && (c3.includesCredentials() || null !== c3.port) || "file" == c3.scheme && !c3.host))
                  return;
                if (c3.scheme = d3, t3)
                  return void (c3.isSpecial() && Tm[c3.scheme] == c3.port && (c3.port = null));
                d3 = "", "file" == c3.scheme ? u3 = Vm : c3.isSpecial() && n3 && n3.scheme == c3.scheme ? u3 = Rm : c3.isSpecial() ? u3 = Gm : "/" == o3[l3 + 1] ? (u3 = Lm, l3++) : (c3.cannotBeABaseURL = true, Zf(c3.path, ""), u3 = jm);
              }
              break;
            case Om:
              if (!n3 || n3.cannotBeABaseURL && "#" != r3)
                return "Invalid scheme";
              if (n3.cannotBeABaseURL && "#" == r3) {
                c3.scheme = n3.scheme, c3.path = ci(n3.path), c3.query = n3.query, c3.fragment = "", c3.cannotBeABaseURL = true, u3 = Ym;
                break;
              }
              u3 = "file" == n3.scheme ? Vm : km;
              continue;
            case Rm:
              if ("/" != r3 || "/" != o3[l3 + 1]) {
                u3 = km;
                continue;
              }
              u3 = bm, l3++;
              break;
            case Lm:
              if ("/" == r3) {
                u3 = wm;
                break;
              }
              u3 = Bm;
              continue;
            case km:
              if (c3.scheme = n3.scheme, r3 == bf)
                c3.username = n3.username, c3.password = n3.password, c3.host = n3.host, c3.port = n3.port, c3.path = ci(n3.path), c3.query = n3.query;
              else if ("/" == r3 || "\\" == r3 && c3.isSpecial())
                u3 = Pm;
              else if ("?" == r3)
                c3.username = n3.username, c3.password = n3.password, c3.host = n3.host, c3.port = n3.port, c3.path = ci(n3.path), c3.query = "", u3 = Wm;
              else {
                if ("#" != r3) {
                  c3.username = n3.username, c3.password = n3.password, c3.host = n3.host, c3.port = n3.port, c3.path = ci(n3.path), c3.path.length--, u3 = Bm;
                  continue;
                }
                c3.username = n3.username, c3.password = n3.password, c3.host = n3.host, c3.port = n3.port, c3.path = ci(n3.path), c3.query = n3.query, c3.fragment = "", u3 = Ym;
              }
              break;
            case Pm:
              if (!c3.isSpecial() || "/" != r3 && "\\" != r3) {
                if ("/" != r3) {
                  c3.username = n3.username, c3.password = n3.password, c3.host = n3.host, c3.port = n3.port, u3 = Bm;
                  continue;
                }
                u3 = wm;
              } else
                u3 = bm;
              break;
            case Gm:
              if (u3 = bm, "/" != r3 || "/" != $f(d3, l3 + 1))
                continue;
              l3++;
              break;
            case bm:
              if ("/" != r3 && "\\" != r3) {
                u3 = wm;
                continue;
              }
              break;
            case wm:
              if ("@" == r3) {
                p3 && (d3 = "%40" + d3), p3 = true, a3 = So(d3);
                for (var _3 = 0; _3 < a3.length; _3++) {
                  var f3 = a3[_3];
                  if (":" != f3 || h3) {
                    var m3 = Em(f3, Im);
                    h3 ? c3.password += m3 : c3.username += m3;
                  } else
                    h3 = true;
                }
                d3 = "";
              } else if (r3 == bf || "/" == r3 || "?" == r3 || "#" == r3 || "\\" == r3 && c3.isSpecial()) {
                if (p3 && "" == d3)
                  return "Invalid authority";
                l3 -= So(d3).length + 1, d3 = "", u3 = Um;
              } else
                d3 += r3;
              break;
            case Um:
            case Fm:
              if (t3 && "file" == c3.scheme) {
                u3 = Km;
                continue;
              }
              if (":" != r3 || g3) {
                if (r3 == bf || "/" == r3 || "?" == r3 || "#" == r3 || "\\" == r3 && c3.isSpecial()) {
                  if (c3.isSpecial() && "" == d3)
                    return "Invalid host";
                  if (t3 && "" == d3 && (c3.includesCredentials() || null !== c3.port))
                    return;
                  if (s3 = c3.parseHost(d3))
                    return s3;
                  if (d3 = "", u3 = Hm, t3)
                    return;
                  continue;
                }
                "[" == r3 ? g3 = true : "]" == r3 && (g3 = false), d3 += r3;
              } else {
                if ("" == d3)
                  return "Invalid host";
                if (s3 = c3.parseHost(d3))
                  return s3;
                if (d3 = "", u3 = qm, t3 == Fm)
                  return;
              }
              break;
            case qm:
              if (!zf(cm, r3)) {
                if (r3 == bf || "/" == r3 || "?" == r3 || "#" == r3 || "\\" == r3 && c3.isSpecial() || t3) {
                  if ("" != d3) {
                    var v3 = jf(d3, 10);
                    if (v3 > 65535)
                      return "Invalid port";
                    c3.port = c3.isSpecial() && v3 === Tm[c3.scheme] ? null : v3, d3 = "";
                  }
                  if (t3)
                    return;
                  u3 = Hm;
                  continue;
                }
                return "Invalid port";
              }
              d3 += r3;
              break;
            case Vm:
              if (c3.scheme = "file", "/" == r3 || "\\" == r3)
                u3 = xm;
              else {
                if (!n3 || "file" != n3.scheme) {
                  u3 = Bm;
                  continue;
                }
                if (r3 == bf)
                  c3.host = n3.host, c3.path = ci(n3.path), c3.query = n3.query;
                else if ("?" == r3)
                  c3.host = n3.host, c3.path = ci(n3.path), c3.query = "", u3 = Wm;
                else {
                  if ("#" != r3) {
                    Cm(Jf(ci(o3, l3), "")) || (c3.host = n3.host, c3.path = ci(n3.path), c3.shortenPath()), u3 = Bm;
                    continue;
                  }
                  c3.host = n3.host, c3.path = ci(n3.path), c3.query = n3.query, c3.fragment = "", u3 = Ym;
                }
              }
              break;
            case xm:
              if ("/" == r3 || "\\" == r3) {
                u3 = Km;
                break;
              }
              n3 && "file" == n3.scheme && !Cm(Jf(ci(o3, l3), "")) && (Sm(n3.path[0], true) ? Zf(c3.path, n3.path[0]) : c3.host = n3.host), u3 = Bm;
              continue;
            case Km:
              if (r3 == bf || "/" == r3 || "\\" == r3 || "?" == r3 || "#" == r3) {
                if (!t3 && Sm(d3))
                  u3 = Bm;
                else if ("" == d3) {
                  if (c3.host = "", t3)
                    return;
                  u3 = Hm;
                } else {
                  if (s3 = c3.parseHost(d3))
                    return s3;
                  if ("localhost" == c3.host && (c3.host = ""), t3)
                    return;
                  d3 = "", u3 = Hm;
                }
                continue;
              }
              d3 += r3;
              break;
            case Hm:
              if (c3.isSpecial()) {
                if (u3 = Bm, "/" != r3 && "\\" != r3)
                  continue;
              } else if (t3 || "?" != r3)
                if (t3 || "#" != r3) {
                  if (r3 != bf && (u3 = Bm, "/" != r3))
                    continue;
                } else
                  c3.fragment = "", u3 = Ym;
              else
                c3.query = "", u3 = Wm;
              break;
            case Bm:
              if (r3 == bf || "/" == r3 || "\\" == r3 && c3.isSpecial() || !t3 && ("?" == r3 || "#" == r3)) {
                if (".." === (i3 = rm(i3 = d3)) || "%2e." === i3 || ".%2e" === i3 || "%2e%2e" === i3 ? (c3.shortenPath(), "/" == r3 || "\\" == r3 && c3.isSpecial() || Zf(c3.path, "")) : Am(d3) ? "/" == r3 || "\\" == r3 && c3.isSpecial() || Zf(c3.path, "") : ("file" == c3.scheme && !c3.path.length && Sm(d3) && (c3.host && (c3.host = ""), d3 = $f(d3, 0) + ":"), Zf(c3.path, d3)), d3 = "", "file" == c3.scheme && (r3 == bf || "?" == r3 || "#" == r3))
                  for (; c3.path.length > 1 && "" === c3.path[0]; )
                    tm(c3.path);
                "?" == r3 ? (c3.query = "", u3 = Wm) : "#" == r3 && (c3.fragment = "", u3 = Ym);
              } else
                d3 += Em(r3, ym);
              break;
            case jm:
              "?" == r3 ? (c3.query = "", u3 = Wm) : "#" == r3 ? (c3.fragment = "", u3 = Ym) : r3 != bf && (c3.path[0] += Em(r3, vm));
              break;
            case Wm:
              t3 || "#" != r3 ? r3 != bf && ("'" == r3 && c3.isSpecial() ? c3.query += "%27" : c3.query += "#" == r3 ? "%23" : Em(r3, vm)) : (c3.fragment = "", u3 = Ym);
              break;
            case Ym:
              r3 != bf && (c3.fragment += Em(r3, Mm));
          }
          l3++;
        }
      }, parseHost: function(e3) {
        var t3, n3, o3;
        if ("[" == $f(e3, 0)) {
          if ("]" != $f(e3, e3.length - 1))
            return "Invalid host";
          if (!(t3 = function(e4) {
            var t4, n4, o4, r3, a3, s3, i3, c3 = [0, 0, 0, 0, 0, 0, 0, 0], u3 = 0, l3 = null, d3 = 0, p3 = function() {
              return $f(e4, d3);
            };
            if (":" == p3()) {
              if (":" != $f(e4, 1))
                return;
              d3 += 2, l3 = ++u3;
            }
            for (; p3(); ) {
              if (8 == u3)
                return;
              if (":" != p3()) {
                for (t4 = n4 = 0; n4 < 4 && zf(pm, p3()); )
                  t4 = 16 * t4 + jf(p3(), 16), d3++, n4++;
                if ("." == p3()) {
                  if (0 == n4)
                    return;
                  if (d3 -= n4, u3 > 6)
                    return;
                  for (o4 = 0; p3(); ) {
                    if (r3 = null, o4 > 0) {
                      if (!("." == p3() && o4 < 4))
                        return;
                      d3++;
                    }
                    if (!zf(cm, p3()))
                      return;
                    for (; zf(cm, p3()); ) {
                      if (a3 = jf(p3(), 10), null === r3)
                        r3 = a3;
                      else {
                        if (0 == r3)
                          return;
                        r3 = 10 * r3 + a3;
                      }
                      if (r3 > 255)
                        return;
                      d3++;
                    }
                    c3[u3] = 256 * c3[u3] + r3, 2 != ++o4 && 4 != o4 || u3++;
                  }
                  if (4 != o4)
                    return;
                  break;
                }
                if (":" == p3()) {
                  if (d3++, !p3())
                    return;
                } else if (p3())
                  return;
                c3[u3++] = t4;
              } else {
                if (null !== l3)
                  return;
                d3++, l3 = ++u3;
              }
            }
            if (null !== l3)
              for (s3 = u3 - l3, u3 = 7; 0 != u3 && s3 > 0; )
                i3 = c3[u3], c3[u3--] = c3[l3 + s3 - 1], c3[l3 + --s3] = i3;
            else if (8 != u3)
              return;
            return c3;
          }(om(e3, 1, -1))))
            return "Invalid host";
          this.host = t3;
        } else if (this.isSpecial()) {
          if (e3 = function(e4) {
            var t4, n4, o4 = [], r3 = V_(q_(x_(e4), R_, "."), ".");
            for (t4 = 0; t4 < r3.length; t4++)
              n4 = r3[t4], F_(o4, P_(O_, n4) ? "xn--" + B_(n4) : n4);
            return U_(o4, ".");
          }(e3), zf(gm, e3))
            return "Invalid host";
          if (null === (t3 = function(e4) {
            var t4, n4, o4, r3, a3, s3, i3, c3 = nm(e4, ".");
            if (c3.length && "" == c3[c3.length - 1] && c3.length--, (t4 = c3.length) > 4)
              return e4;
            for (n4 = [], o4 = 0; o4 < t4; o4++) {
              if ("" == (r3 = c3[o4]))
                return e4;
              if (a3 = 10, r3.length > 1 && "0" == $f(r3, 0) && (a3 = zf(um, r3) ? 16 : 8, r3 = om(r3, 8 == a3 ? 1 : 2)), "" === r3)
                s3 = 0;
              else {
                if (!zf(10 == a3 ? dm : 8 == a3 ? lm : pm, r3))
                  return e4;
                s3 = jf(r3, a3);
              }
              Zf(n4, s3);
            }
            for (o4 = 0; o4 < t4; o4++)
              if (s3 = n4[o4], o4 == t4 - 1) {
                if (s3 >= Yf(256, 5 - t4))
                  return null;
              } else if (s3 > 255)
                return null;
            for (i3 = Qf(n4), o4 = 0; o4 < n4.length; o4++)
              i3 += n4[o4] * Yf(256, 3 - o4);
            return i3;
          }(e3)))
            return "Invalid host";
          this.host = t3;
        } else {
          if (zf(hm, e3))
            return "Invalid host";
          for (t3 = "", n3 = So(e3), o3 = 0; o3 < n3.length; o3++)
            t3 += Em(n3[o3], vm);
          this.host = t3;
        }
      }, cannotHaveUsernamePasswordPort: function() {
        return !this.host || this.cannotBeABaseURL || "file" == this.scheme;
      }, includesCredentials: function() {
        return "" != this.username || "" != this.password;
      }, isSpecial: function() {
        return Ne2(Tm, this.scheme);
      }, shortenPath: function() {
        var e3 = this.path, t3 = e3.length;
        !t3 || "file" == this.scheme && 1 == t3 && Sm(e3[0], true) || e3.length--;
      }, serialize: function() {
        var e3 = this, t3 = e3.scheme, n3 = e3.username, o3 = e3.password, r3 = e3.host, a3 = e3.port, s3 = e3.path, i3 = e3.query, c3 = e3.fragment, u3 = t3 + ":";
        return null !== r3 ? (u3 += "//", e3.includesCredentials() && (u3 += n3 + (o3 ? ":" + o3 : "") + "@"), u3 += mm(r3), null !== a3 && (u3 += ":" + a3)) : "file" == t3 && (u3 += "//"), u3 += e3.cannotBeABaseURL ? s3[0] : s3.length ? "/" + Jf(s3, "/") : "", null !== i3 && (u3 += "?" + i3), null !== c3 && (u3 += "#" + c3), u3;
      }, setHref: function(e3) {
        var t3 = this.parse(e3);
        if (t3)
          throw Bf(t3);
        this.searchParams.update();
      }, getOrigin: function() {
        var e3 = this.scheme, t3 = this.port;
        if ("blob" == e3)
          try {
            return new zm(e3.path[0]).origin;
          } catch (rS) {
            return "null";
          }
        return "file" != e3 && this.isSpecial() ? e3 + "://" + mm(this.host) + (null !== t3 ? ":" + t3 : "") : "null";
      }, getProtocol: function() {
        return this.scheme + ":";
      }, setProtocol: function(e3) {
        this.parse(dn(e3) + ":", Dm);
      }, getUsername: function() {
        return this.username;
      }, setUsername: function(e3) {
        var t3 = So(dn(e3));
        if (!this.cannotHaveUsernamePasswordPort()) {
          this.username = "";
          for (var n3 = 0; n3 < t3.length; n3++)
            this.username += Em(t3[n3], Im);
        }
      }, getPassword: function() {
        return this.password;
      }, setPassword: function(e3) {
        var t3 = So(dn(e3));
        if (!this.cannotHaveUsernamePasswordPort()) {
          this.password = "";
          for (var n3 = 0; n3 < t3.length; n3++)
            this.password += Em(t3[n3], Im);
        }
      }, getHost: function() {
        var e3 = this.host, t3 = this.port;
        return null === e3 ? "" : null === t3 ? mm(e3) : mm(e3) + ":" + t3;
      }, setHost: function(e3) {
        this.cannotBeABaseURL || this.parse(e3, Um);
      }, getHostname: function() {
        var e3 = this.host;
        return null === e3 ? "" : mm(e3);
      }, setHostname: function(e3) {
        this.cannotBeABaseURL || this.parse(e3, Fm);
      }, getPort: function() {
        var e3 = this.port;
        return null === e3 ? "" : dn(e3);
      }, setPort: function(e3) {
        this.cannotHaveUsernamePasswordPort() || ("" == (e3 = dn(e3)) ? this.port = null : this.parse(e3, qm));
      }, getPathname: function() {
        var e3 = this.path;
        return this.cannotBeABaseURL ? e3[0] : e3.length ? "/" + Jf(e3, "/") : "";
      }, setPathname: function(e3) {
        this.cannotBeABaseURL || (this.path = [], this.parse(e3, Hm));
      }, getSearch: function() {
        var e3 = this.query;
        return e3 ? "?" + e3 : "";
      }, setSearch: function(e3) {
        "" == (e3 = dn(e3)) ? this.query = null : ("?" == $f(e3, 0) && (e3 = om(e3, 1)), this.query = "", this.parse(e3, Wm)), this.searchParams.update();
      }, getSearchParams: function() {
        return this.searchParams.facade;
      }, getHash: function() {
        var e3 = this.fragment;
        return e3 ? "#" + e3 : "";
      }, setHash: function(e3) {
        "" != (e3 = dn(e3)) ? ("#" == $f(e3, 0) && (e3 = om(e3, 1)), this.fragment = "", this.parse(e3, Ym)) : this.fragment = null;
      }, update: function() {
        this.query = this.searchParams.serialize() || null;
      } };
      var zm = function(e3) {
        var t3 = ki(this, Jm), n3 = Ki(arguments.length, 1) > 1 ? arguments[1] : void 0, o3 = qf(t3, new $m(e3, false, n3));
        k || (t3.href = o3.serialize(), t3.origin = o3.getOrigin(), t3.protocol = o3.getProtocol(), t3.username = o3.getUsername(), t3.password = o3.getPassword(), t3.host = o3.getHost(), t3.hostname = o3.getHostname(), t3.port = o3.getPort(), t3.pathname = o3.getPathname(), t3.search = o3.getSearch(), t3.searchParams = o3.getSearchParams(), t3.hash = o3.getHash());
      }, Jm = zm.prototype, Xm = function(e3, t3) {
        return { get: function() {
          return Vf(this)[e3]();
        }, set: t3 && function(e4) {
          return Vf(this)[t3](e4);
        }, configurable: true, enumerable: true };
      };
      if (k && Uf(Jm, { href: Xm("serialize", "setHref"), origin: Xm("getOrigin"), protocol: Xm("getProtocol", "setProtocol"), username: Xm("getUsername", "setUsername"), password: Xm("getPassword", "setPassword"), host: Xm("getHost", "setHost"), hostname: Xm("getHostname", "setHostname"), port: Xm("getPort", "setPort"), pathname: Xm("getPathname", "setPathname"), search: Xm("getSearch", "setSearch"), searchParams: Xm("getSearchParams"), hash: Xm("getHash", "setHash") }), At2(Jm, "toJSON", function() {
        return Vf(this).serialize();
      }, { enumerable: true }), At2(Jm, "toString", function() {
        return Vf(this).serialize();
      }, { enumerable: true }), Hf) {
        var Qm = Hf.createObjectURL, Zm = Hf.revokeObjectURL;
        Qm && At2(zm, "createObjectURL", Un(Qm, Hf)), Zm && At2(zm, "revokeObjectURL", Un(Zm, Hf));
      }
      zo(zm, "URL"), nn2({ global: true, forced: !S_, sham: !k }, { URL: zm }), nn2({ target: "Object", stat: true, forced: Object.assign !== N_ }, { assign: N_ });
      var ev = function() {
        function e3(t3) {
          o2(this, e3), this._imageMemoryURL = "", Bu ? this.createImageDataASURLInWXMiniApp(t3.file) : this.createImageDataASURLInWeb(t3.file), this._initImageInfoModel(), this.type = gr.MSG_IMAGE, this._percent = 0, this.content = { imageFormat: t3.imageFormat || Ul.UNKNOWN, uuid: t3.uuid, imageInfoArray: [] }, this.initImageInfoArray(t3.imageInfoArray), this._defaultImage = "http://imgcache.qq.com/open/qcloud/video/act/webim-images/default.jpg", this._autoFixUrl();
        }
        return a2(e3, [{ key: "_initImageInfoModel", value: function() {
          var e4 = this;
          this._ImageInfoModel = function(t3) {
            this.instanceID = ld(9999999), this.sizeType = t3.type || 0, this.type = 0, this.size = t3.size || 0, this.width = t3.width || 0, this.height = t3.height || 0, this.imageUrl = t3.url || "", this.url = t3.url || e4._imageMemoryURL || e4._defaultImage;
          }, this._ImageInfoModel.prototype = { setSizeType: function(e5) {
            this.sizeType = e5;
          }, setType: function(e5) {
            this.type = e5;
          }, setImageUrl: function(e5) {
            e5 && (this.imageUrl = e5);
          }, getImageUrl: function() {
            return this.imageUrl;
          } };
        } }, { key: "initImageInfoArray", value: function(e4) {
          for (var t3 = 0, n3 = null, o3 = null; t3 <= 2; )
            o3 = Zl(e4) || Zl(e4[t3]) ? { type: 0, size: 0, width: 0, height: 0, url: "" } : e4[t3], (n3 = new this._ImageInfoModel(o3)).setSizeType(t3 + 1), n3.setType(t3), this.addImageInfo(n3), t3++;
          this.updateAccessSideImageInfoArray();
        } }, { key: "updateImageInfoArray", value: function(e4) {
          for (var t3, n3 = this.content.imageInfoArray.length, o3 = 0; o3 < n3; o3++)
            t3 = this.content.imageInfoArray[o3], e4[o3].size && (t3.size = e4[o3].size), e4[o3].url && t3.setImageUrl(e4[o3].url), e4[o3].width && (t3.width = e4[o3].width), e4[o3].height && (t3.height = e4[o3].height);
        } }, { key: "_autoFixUrl", value: function() {
          for (var e4 = this.content.imageInfoArray.length, t3 = "", n3 = "", o3 = ["http", "https"], r3 = null, a3 = 0; a3 < e4; a3++)
            this.content.imageInfoArray[a3].url && "" !== (r3 = this.content.imageInfoArray[a3]).imageUrl && (n3 = r3.imageUrl.slice(0, r3.imageUrl.indexOf("://") + 1), t3 = r3.imageUrl.slice(r3.imageUrl.indexOf("://") + 1), o3.indexOf(n3) < 0 && (n3 = "https:"), this.content.imageInfoArray[a3].setImageUrl([n3, t3].join("")));
        } }, { key: "updatePercent", value: function(e4) {
          this._percent = e4, this._percent > 1 && (this._percent = 1);
        } }, { key: "updateImageFormat", value: function(e4) {
          this.content.imageFormat = Ul[e4.toUpperCase()] || Ul.UNKNOWN;
        } }, { key: "createImageDataASURLInWeb", value: function(e4) {
          void 0 !== e4 && e4.files.length > 0 && (this._imageMemoryURL = window.URL.createObjectURL(e4.files[0]));
        } }, { key: "createImageDataASURLInWXMiniApp", value: function(e4) {
          e4 && e4.url && (this._imageMemoryURL = e4.url);
        } }, { key: "replaceImageInfo", value: function(e4, t3) {
          this.content.imageInfoArray[t3] instanceof this._ImageInfoModel || (this.content.imageInfoArray[t3] = e4);
        } }, { key: "addImageInfo", value: function(e4) {
          this.content.imageInfoArray.length >= 3 || this.content.imageInfoArray.push(e4);
        } }, { key: "updateAccessSideImageInfoArray", value: function() {
          var e4 = this.content.imageInfoArray, t3 = e4[0], n3 = t3.width, o3 = void 0 === n3 ? 0 : n3, r3 = t3.height, a3 = void 0 === r3 ? 0 : r3;
          0 !== o3 && 0 !== a3 && (Ld(e4), Object.assign(e4[2], Rd({ originWidth: o3, originHeight: a3, min: 720 })));
        } }, { key: "sendable", value: function() {
          return 0 !== this.content.imageInfoArray.length && ("" !== this.content.imageInfoArray[0].imageUrl && 0 !== this.content.imageInfoArray[0].size);
        } }]), e3;
      }(), tv = function() {
        function e3(t3) {
          o2(this, e3), this.type = gr.MSG_FACE, this.content = t3 || null;
        }
        return a2(e3, [{ key: "sendable", value: function() {
          return null !== this.content;
        } }]), e3;
      }(), nv = function() {
        function e3(t3) {
          o2(this, e3), this.type = gr.MSG_AUDIO, this._percent = 0, this.content = { downloadFlag: 2, second: t3.second, size: t3.size, url: t3.url, remoteAudioUrl: t3.url || "", uuid: t3.uuid };
        }
        return a2(e3, [{ key: "updatePercent", value: function(e4) {
          this._percent = e4, this._percent > 1 && (this._percent = 1);
        } }, { key: "updateAudioUrl", value: function(e4) {
          this.content.remoteAudioUrl = e4;
        } }, { key: "sendable", value: function() {
          return "" !== this.content.remoteAudioUrl;
        } }]), e3;
      }(), ov = { from: true, groupID: true, groupName: true, to: true }, rv = function() {
        function e3(t3) {
          o2(this, e3), this.type = gr.MSG_GRP_TIP, this.content = {}, this._initContent(t3);
        }
        return a2(e3, [{ key: "_initContent", value: function(e4) {
          var t3 = this;
          Object.keys(e4).forEach(function(n3) {
            switch (n3) {
              case "remarkInfo":
                break;
              case "groupProfile":
                t3.content.groupProfile = {}, t3._initGroupProfile(e4[n3]);
                break;
              case "operatorInfo":
                break;
              case "memberInfoList":
              case "msgMemberInfo":
                t3._updateMemberList(e4[n3]);
                break;
              case "onlineMemberInfo":
                break;
              case "memberNum":
                t3.content[n3] = e4[n3], t3.content.memberCount = e4[n3];
                break;
              case "newGroupProfile":
                t3.content.newGroupProfile = {}, t3._initNewGroupProfile(e4[n3]);
                break;
              default:
                t3.content[n3] = e4[n3];
            }
          }), this.content.userIDList || (this.content.userIDList = [this.content.operatorID]);
        } }, { key: "_initGroupProfile", value: function(e4) {
          for (var t3 = Object.keys(e4), n3 = 0; n3 < t3.length; n3++) {
            var o3 = t3[n3];
            ov[o3] && (this.content.groupProfile[o3] = e4[o3]);
          }
        } }, { key: "_updateMemberList", value: function(e4) {
          qd(this.content.memberList) ? this.content.memberList = e4 : this.content.memberList.forEach(function(t3) {
            e4.forEach(function(e5) {
              t3.userID === e5.userID && Object.assign(t3, e5);
            });
          });
        } }, { key: "_initNewGroupProfile", value: function(e4) {
          for (var t3 = Object.keys(e4), n3 = 0; n3 < t3.length; n3++) {
            var o3 = t3[n3];
            "muteAllMembers" !== o3 ? this.content.newGroupProfile[o3] = e4[o3] : this.content.newGroupProfile[o3] = 1 === e4[o3];
          }
        } }]), e3;
      }(), av = { from: true, groupID: true, groupName: true, to: true }, sv = function() {
        function e3(t3) {
          o2(this, e3), this.type = gr.MSG_GRP_SYS_NOTICE, this.content = {}, this._initContent(t3);
        }
        return a2(e3, [{ key: "_initContent", value: function(e4) {
          var t3 = this;
          Object.keys(e4).forEach(function(n3) {
            switch (n3) {
              case "memberInfoList":
                break;
              case "remarkInfo":
                t3.content.handleMessage = e4[n3];
                break;
              case "groupProfile":
                t3.content.groupProfile = {}, t3._initGroupProfile(e4[n3]);
                break;
              default:
                t3.content[n3] = e4[n3];
            }
          });
        } }, { key: "_initGroupProfile", value: function(e4) {
          for (var t3 = Object.keys(e4), n3 = 0; n3 < t3.length; n3++) {
            var o3 = t3[n3];
            av[o3] && ("groupName" === o3 ? this.content.groupProfile.name = e4[o3] : this.content.groupProfile[o3] = e4[o3]);
          }
        } }]), e3;
      }(), iv = Math.min, cv = [].lastIndexOf, uv = !!cv && 1 / [1].lastIndexOf(1, -0) < 0, lv = eo("lastIndexOf"), dv = uv || !lv ? function(e3) {
        if (uv)
          return Es2(cv, this, arguments) || 0;
        var t3 = Z2(this), n3 = bt2(t3), o3 = n3 - 1;
        for (arguments.length > 1 && (o3 = iv(o3, Ot2(arguments[1]))), o3 < 0 && (o3 = n3 + o3); o3 >= 0; o3--)
          if (o3 in t3 && t3[o3] === e3)
            return o3 || 0;
        return -1;
      } : cv;
      nn2({ target: "Array", proto: true, forced: dv !== [].lastIndexOf }, { lastIndexOf: dv });
      var pv = function() {
        function e3(t3) {
          o2(this, e3), this.type = gr.MSG_FILE, this._percent = 0;
          var n3 = this._getFileInfo(t3);
          this.content = { downloadFlag: 2, fileUrl: t3.url || "", uuid: t3.uuid, fileName: n3.name || "", fileSize: n3.size || 0 };
        }
        return a2(e3, [{ key: "_getFileInfo", value: function(e4) {
          if (!Zl(e4.fileName) && !Zl(e4.fileSize))
            return { size: e4.fileSize, name: e4.fileName };
          var t3 = e4.file.files[0];
          if (Ku) {
            if (t3.path && -1 !== t3.path.indexOf(".")) {
              var n3 = t3.path.slice(t3.path.lastIndexOf(".") + 1).toLowerCase();
              t3.type = n3, t3.name || (t3.name = "".concat(ld(999999), ".").concat(n3));
            }
            t3.name || (t3.type = "", t3.name = t3.path.slice(t3.path.lastIndexOf("/") + 1).toLowerCase()), t3.suffix && (t3.type = t3.suffix), t3.url || (t3.url = t3.path);
          }
          return { size: t3.size, name: t3.name };
        } }, { key: "updatePercent", value: function(e4) {
          this._percent = e4, this._percent > 1 && (this._percent = 1);
        } }, { key: "updateFileUrl", value: function(e4) {
          this.content.fileUrl = e4;
        } }, { key: "sendable", value: function() {
          return "" !== this.content.fileUrl && ("" !== this.content.fileName && 0 !== this.content.fileSize);
        } }]), e3;
      }(), gv = function() {
        function e3(t3) {
          o2(this, e3), this.type = gr.MSG_CUSTOM, this.content = { data: t3.data || "", description: t3.description || "", extension: t3.extension || "" };
        }
        return a2(e3, [{ key: "setData", value: function(e4) {
          return this.content.data = e4, this;
        } }, { key: "setDescription", value: function(e4) {
          return this.content.description = e4, this;
        } }, { key: "setExtension", value: function(e4) {
          return this.content.extension = e4, this;
        } }, { key: "sendable", value: function() {
          return 0 !== this.content.data.length || 0 !== this.content.description.length || 0 !== this.content.extension.length;
        } }]), e3;
      }(), hv = function() {
        function e3(t3) {
          o2(this, e3), this.type = gr.MSG_VIDEO, this._percent = 0, this.content = { remoteVideoUrl: t3.remoteVideoUrl || t3.videoUrl || "", videoFormat: t3.videoFormat, videoSecond: parseInt(t3.videoSecond, 10), videoSize: t3.videoSize, videoUrl: t3.videoUrl, videoDownloadFlag: 2, videoUUID: t3.videoUUID, thumbUUID: t3.thumbUUID, thumbFormat: t3.thumbFormat, thumbWidth: t3.thumbWidth, snapshotWidth: t3.thumbWidth, thumbHeight: t3.thumbHeight, snapshotHeight: t3.thumbHeight, thumbSize: t3.thumbSize, snapshotSize: t3.thumbSize, thumbDownloadFlag: 2, thumbUrl: t3.thumbUrl, snapshotUrl: t3.thumbUrl };
        }
        return a2(e3, [{ key: "updatePercent", value: function(e4) {
          this._percent = e4, this._percent > 1 && (this._percent = 1);
        } }, { key: "updateVideoUrl", value: function(e4) {
          e4 && (this.content.remoteVideoUrl = e4);
        } }, { key: "updateSnapshotInfo", value: function(e4) {
          var t3 = e4.snapshotUrl, n3 = e4.snapshotWidth, o3 = e4.snapshotHeight;
          qd(t3) || (this.content.thumbUrl = this.content.snapshotUrl = t3), qd(n3) || (this.content.thumbWidth = this.content.snapshotWidth = Number(n3)), qd(o3) || (this.content.thumbHeight = this.content.snapshotHeight = Number(o3));
        } }, { key: "sendable", value: function() {
          return "" !== this.content.remoteVideoUrl;
        } }]), e3;
      }(), _v = function() {
        function e3(t3) {
          o2(this, e3), this.type = gr.MSG_LOCATION;
          var n3 = t3.description, r3 = t3.longitude, a3 = t3.latitude;
          this.content = { description: n3, longitude: r3, latitude: a3 };
        }
        return a2(e3, [{ key: "sendable", value: function() {
          return true;
        } }]), e3;
      }(), fv = function() {
        function e3(t3) {
          if (o2(this, e3), this.from = t3.from, this.messageSender = t3.from, this.time = t3.time, this.messageSequence = t3.sequence, this.clientSequence = t3.clientSequence || t3.sequence, this.messageRandom = t3.random, this.cloudCustomData = t3.cloudCustomData || "", t3.ID)
            this.nick = t3.nick || "", this.avatar = t3.avatar || "", this.messageBody = [{ type: t3.type, payload: t3.payload }], t3.conversationType.startsWith(gr.CONV_C2C) ? this.receiverUserID = t3.to : t3.conversationType.startsWith(gr.CONV_GROUP) && (this.receiverGroupID = t3.to), this.messageReceiver = t3.to;
          else {
            this.nick = t3.nick || "", this.avatar = t3.avatar || "", this.messageBody = [];
            var n3 = t3.elements[0].type, r3 = t3.elements[0].content;
            this._patchRichMediaPayload(n3, r3), n3 === gr.MSG_MERGER ? this.messageBody.push({ type: n3, payload: new mv(r3).content }) : this.messageBody.push({ type: n3, payload: r3 }), t3.groupID && (this.receiverGroupID = t3.groupID, this.messageReceiver = t3.groupID), t3.to && (this.receiverUserID = t3.to, this.messageReceiver = t3.to);
          }
        }
        return a2(e3, [{ key: "_patchRichMediaPayload", value: function(e4, t3) {
          e4 === gr.MSG_IMAGE ? t3.imageInfoArray.forEach(function(e5) {
            !e5.imageUrl && e5.url && (e5.imageUrl = e5.url, e5.sizeType = e5.type, 1 === e5.type ? e5.type = 0 : 3 === e5.type && (e5.type = 1));
          }) : e4 === gr.MSG_VIDEO ? !t3.remoteVideoUrl && t3.videoUrl && (t3.remoteVideoUrl = t3.videoUrl) : e4 === gr.MSG_AUDIO ? !t3.remoteAudioUrl && t3.url && (t3.remoteAudioUrl = t3.url) : e4 === gr.MSG_FILE && !t3.fileUrl && t3.url && (t3.fileUrl = t3.url, t3.url = void 0);
        } }]), e3;
      }(), mv = function() {
        function e3(t3) {
          if (o2(this, e3), this.type = gr.MSG_MERGER, this.content = { downloadKey: "", pbDownloadKey: "", messageList: [], title: "", abstractList: [], compatibleText: "", version: 0, layersOverLimit: false }, t3.downloadKey) {
            var n3 = t3.downloadKey, r3 = t3.pbDownloadKey, a3 = t3.title, s3 = t3.abstractList, i3 = t3.compatibleText, c3 = t3.version;
            this.content.downloadKey = n3, this.content.pbDownloadKey = r3, this.content.title = a3, this.content.abstractList = s3, this.content.compatibleText = i3, this.content.version = c3 || 0;
          } else if (qd(t3.messageList))
            1 === t3.layersOverLimit && (this.content.layersOverLimit = true);
          else {
            var u3 = t3.messageList, l3 = t3.title, d3 = t3.abstractList, p3 = t3.compatibleText, g3 = t3.version, h3 = [];
            u3.forEach(function(e4) {
              if (!qd(e4)) {
                var t4 = new fv(e4);
                h3.push(t4);
              }
            }), this.content.messageList = h3, this.content.title = l3, this.content.abstractList = d3, this.content.compatibleText = p3, this.content.version = g3 || 0;
          }
          wl.debug("MergerElement.content:", this.content);
        }
        return a2(e3, [{ key: "sendable", value: function() {
          return !qd(this.content.messageList) || !qd(this.content.downloadKey);
        } }]), e3;
      }(), vv = { 1: gr.MSG_PRIORITY_HIGH, 2: gr.MSG_PRIORITY_NORMAL, 3: gr.MSG_PRIORITY_LOW, 4: gr.MSG_PRIORITY_LOWEST }, Mv = function() {
        function e3(t3) {
          o2(this, e3), this.ID = "", this.conversationID = t3.conversationID || null, this.conversationType = t3.conversationType || gr.CONV_C2C, this.conversationSubType = t3.conversationSubType, this.time = t3.time || Math.ceil(Date.now() / 1e3), this.sequence = t3.sequence || 0, this.clientSequence = t3.clientSequence || t3.sequence || 0, this.random = t3.random || 0 === t3.random ? t3.random : ld(), this.priority = this._computePriority(t3.priority), this.nick = t3.nick || "", this.avatar = t3.avatar || "", this.isPeerRead = 1 === t3.isPeerRead || false, this.nameCard = "", this._elements = [], this.isPlaceMessage = t3.isPlaceMessage || 0, this.isRevoked = 2 === t3.isPlaceMessage || 8 === t3.msgFlagBits, this.from = t3.from || null, this.to = t3.to || null, this.flow = "", this.isSystemMessage = t3.isSystemMessage || false, this.protocol = t3.protocol || "JSON", this.isResend = false, this.isRead = false, this.status = t3.status || Gp.SUCCESS, this._onlineOnlyFlag = false, this._groupAtInfoList = [], this._relayFlag = false, this.atUserList = [], this.cloudCustomData = t3.cloudCustomData || "", this.isDeleted = false, this.isModified = false, this._isExcludedFromUnreadCount = !(!t3.messageControlInfo || 1 !== t3.messageControlInfo.excludedFromUnreadCount), this._isExcludedFromLastMessage = !(!t3.messageControlInfo || 1 !== t3.messageControlInfo.excludedFromLastMessage), this.clientTime = t3.clientTime || kl() || 0, this.senderTinyID = t3.senderTinyID || t3.tinyID || "", this.readReceiptInfo = t3.readReceiptInfo || { readCount: void 0, unreadCount: void 0 }, this.needReadReceipt = true === t3.needReadReceipt || 1 === t3.needReadReceipt, this.version = t3.messageVersion || 0, this.reInitialize(t3.currentUser), this.extractGroupInfo(t3.groupProfile || null), this.handleGroupAtInfo(t3);
        }
        return a2(e3, [{ key: "elements", get: function() {
          return wl.warn("！！！Message 实例的 elements 属性即将废弃，请尽快修改。使用 type 和 payload 属性处理单条消息，兼容组合消息使用 _elements 属性！！！"), this._elements;
        } }, { key: "getElements", value: function() {
          return this._elements;
        } }, { key: "extractGroupInfo", value: function(e4) {
          if (null !== e4) {
            zl(e4.nick) && (this.nick = e4.nick), zl(e4.avatar) && (this.avatar = e4.avatar);
            var t3 = e4.messageFromAccountExtraInformation;
            Xl(t3) && zl(t3.nameCard) && (this.nameCard = t3.nameCard);
          }
        } }, { key: "handleGroupAtInfo", value: function(e4) {
          var t3 = this;
          e4.payload && e4.payload.atUserList && e4.payload.atUserList.forEach(function(e5) {
            e5 !== gr.MSG_AT_ALL ? (t3._groupAtInfoList.push({ groupAtAllFlag: 0, groupAtUserID: e5 }), t3.atUserList.push(e5)) : (t3._groupAtInfoList.push({ groupAtAllFlag: 1 }), t3.atUserList.push(gr.MSG_AT_ALL));
          }), Ql(e4.groupAtInfo) && e4.groupAtInfo.forEach(function(e5) {
            0 === e5.groupAtAllFlag ? t3.atUserList.push(e5.groupAtUserID) : 1 === e5.groupAtAllFlag && t3.atUserList.push(gr.MSG_AT_ALL);
          });
        } }, { key: "getGroupAtInfoList", value: function() {
          return this._groupAtInfoList;
        } }, { key: "_initProxy", value: function() {
          this._elements[0] && (this.payload = this._elements[0].content, this.type = this._elements[0].type);
        } }, { key: "reInitialize", value: function(e4) {
          e4 && (this.status = this.from ? Gp.SUCCESS : Gp.UNSEND, !this.from && (this.from = e4)), this._initFlow(e4), this._initSequence(e4), this._concatConversationID(e4), this.generateMessageID();
        } }, { key: "isSendable", value: function() {
          return 0 !== this._elements.length && ("function" != typeof this._elements[0].sendable ? (wl.warn("".concat(this._elements[0].type, ' need "boolean : sendable()" method')), false) : this._elements[0].sendable());
        } }, { key: "_initTo", value: function(e4) {
          this.conversationType === gr.CONV_GROUP && (this.to = e4.groupID);
        } }, { key: "_initSequence", value: function(e4) {
          0 === this.clientSequence && e4 && (this.clientSequence = function(e5) {
            if (!e5)
              return wl.error("autoIncrementIndex(string: key) need key parameter"), false;
            if (void 0 === hd[e5]) {
              var t3 = /* @__PURE__ */ new Date(), n3 = "3".concat(t3.getHours()).slice(-2), o3 = "0".concat(t3.getMinutes()).slice(-2), r3 = "0".concat(t3.getSeconds()).slice(-2);
              hd[e5] = parseInt([n3, o3, r3, "0001"].join("")), n3 = null, o3 = null, r3 = null, wl.log("autoIncrementIndex start index:".concat(hd[e5]));
            }
            return hd[e5]++;
          }(e4)), 0 === this.sequence && this.conversationType === gr.CONV_C2C && (this.sequence = this.clientSequence);
        } }, { key: "generateMessageID", value: function() {
          this.from === gr.CONV_SYSTEM && (this.senderTinyID = "144115198244471703"), this.ID = "".concat(this.senderTinyID, "-").concat(this.clientTime, "-").concat(this.random);
        } }, { key: "_initFlow", value: function(e4) {
          "" !== e4 && (e4 === this.from ? (this.flow = "out", this.isRead = true) : this.flow = "in");
        } }, { key: "_concatConversationID", value: function(e4) {
          var t3 = this.to, n3 = "", o3 = this.conversationType;
          o3 !== gr.CONV_SYSTEM ? (n3 = o3 === gr.CONV_C2C ? e4 === this.from ? t3 : this.from : this.to, this.conversationID = "".concat(o3).concat(n3)) : this.conversationID = gr.CONV_SYSTEM;
        } }, { key: "isElement", value: function(e4) {
          return e4 instanceof E_ || e4 instanceof ev || e4 instanceof tv || e4 instanceof nv || e4 instanceof pv || e4 instanceof hv || e4 instanceof rv || e4 instanceof sv || e4 instanceof gv || e4 instanceof _v || e4 instanceof mv;
        } }, { key: "setElement", value: function(e4) {
          var t3 = this;
          if (this.isElement(e4))
            return this._elements = [e4], void this._initProxy();
          var n3 = function(e5) {
            if (e5.type && e5.content)
              switch (e5.type) {
                case gr.MSG_TEXT:
                  t3.setTextElement(e5.content);
                  break;
                case gr.MSG_IMAGE:
                  t3.setImageElement(e5.content);
                  break;
                case gr.MSG_AUDIO:
                  t3.setAudioElement(e5.content);
                  break;
                case gr.MSG_FILE:
                  t3.setFileElement(e5.content);
                  break;
                case gr.MSG_VIDEO:
                  t3.setVideoElement(e5.content);
                  break;
                case gr.MSG_CUSTOM:
                  t3.setCustomElement(e5.content);
                  break;
                case gr.MSG_LOCATION:
                  t3.setLocationElement(e5.content);
                  break;
                case gr.MSG_GRP_TIP:
                  t3.setGroupTipElement(e5.content);
                  break;
                case gr.MSG_GRP_SYS_NOTICE:
                  t3.setGroupSystemNoticeElement(e5.content);
                  break;
                case gr.MSG_FACE:
                  t3.setFaceElement(e5.content);
                  break;
                case gr.MSG_MERGER:
                  t3.setMergerElement(e5.content);
                  break;
                default:
                  wl.warn(e5.type, e5.content, "no operation......");
              }
          };
          if (Ql(e4))
            for (var o3 = 0; o3 < e4.length; o3++)
              n3(e4[o3]);
          else
            n3(e4);
          this._initProxy();
        } }, { key: "clearElement", value: function() {
          this._elements.length = 0;
        } }, { key: "setTextElement", value: function(e4) {
          var t3 = "string" == typeof e4 ? e4 : e4.text, n3 = new E_({ text: t3 });
          this._elements.push(n3);
        } }, { key: "setImageElement", value: function(e4) {
          var t3 = new ev(e4);
          this._elements.push(t3);
        } }, { key: "setAudioElement", value: function(e4) {
          var t3 = new nv(e4);
          this._elements.push(t3);
        } }, { key: "setFileElement", value: function(e4) {
          var t3 = new pv(e4);
          this._elements.push(t3);
        } }, { key: "setVideoElement", value: function(e4) {
          var t3 = new hv(e4);
          this._elements.push(t3);
        } }, { key: "setLocationElement", value: function(e4) {
          var t3 = new _v(e4);
          this._elements.push(t3);
        } }, { key: "setCustomElement", value: function(e4) {
          var t3 = new gv(e4);
          this._elements.push(t3);
        } }, { key: "setGroupTipElement", value: function(e4) {
          var t3 = {}, n3 = e4.operationType;
          qd(e4.memberInfoList) ? e4.operatorInfo && (t3 = e4.operatorInfo) : n3 !== gr.GRP_TIP_MBR_JOIN && n3 !== gr.GRP_TIP_MBR_KICKED_OUT && n3 !== gr.GRP_TIP_MBR_SET_ADMIN && n3 !== gr.GRP_TIP_MBR_CANCELED_ADMIN || (t3 = e4.memberInfoList[0]);
          var o3 = t3, r3 = o3.nick, a3 = o3.avatar;
          zl(r3) && (this.nick = r3), zl(a3) && (this.avatar = a3);
          var s3 = new rv(e4);
          this._elements.push(s3);
        } }, { key: "setGroupSystemNoticeElement", value: function(e4) {
          var t3 = new sv(e4);
          this._elements.push(t3);
        } }, { key: "setFaceElement", value: function(e4) {
          var t3 = new tv(e4);
          this._elements.push(t3);
        } }, { key: "setMergerElement", value: function(e4) {
          var t3 = new mv(e4);
          this._elements.push(t3);
        } }, { key: "setIsRead", value: function(e4) {
          this.isRead = e4;
        } }, { key: "setRelayFlag", value: function(e4) {
          this._relayFlag = e4;
        } }, { key: "getRelayFlag", value: function() {
          return this._relayFlag;
        } }, { key: "_computePriority", value: function(e4) {
          if (Zl(e4))
            return gr.MSG_PRIORITY_NORMAL;
          if (zl(e4) && -1 !== Object.values(vv).indexOf(e4))
            return e4;
          if ($l(e4)) {
            var t3 = "" + e4;
            if (-1 !== Object.keys(vv).indexOf(t3))
              return vv[t3];
          }
          return gr.MSG_PRIORITY_NORMAL;
        } }, { key: "setNickAndAvatar", value: function(e4) {
          var t3 = e4.nick, n3 = e4.avatar;
          zl(t3) && (this.nick = t3), zl(n3) && (this.avatar = n3);
        } }, { key: "setNameCard", value: function(e4) {
          zl(e4) && (this.nameCard = e4);
        } }]), e3;
      }(), yv = function(e3) {
        return { code: 0, data: e3 || {} };
      }, Iv = "https://cloud.tencent.com/document/product/", Ev = "您可以在即时通信 IM 控制台的【开发辅助工具(https://console.cloud.tencent.com/im-detail/tool-usersig)】 页面校验 UserSig。", Tv = "UserSig 非法，请使用官网提供的 API 重新生成 UserSig(".concat(Iv, "269/32688)。"), Sv = "#.E6.B6.88.E6.81.AF.E5.85.83.E7.B4.A0-timmsgelement", Cv = { 70001: "UserSig 已过期，请重新生成。建议 UserSig 有效期设置不小于24小时。", 70002: "UserSig 长度为0，请检查传入的 UserSig 是否正确。", 70003: Tv, 70005: Tv, 70009: "UserSig 验证失败，可能因为生成 UserSig 时混用了其他 SDKAppID 的私钥或密钥导致，请使用对应 SDKAppID 下的私钥或密钥重新生成 UserSig(".concat(Iv, "269/32688)。"), 70013: "请求中的 UserID 与生成 UserSig 时使用的 UserID 不匹配。".concat(Ev), 70014: "请求中的 SDKAppID 与生成 UserSig 时使用的 SDKAppID 不匹配。".concat(Ev), 70016: "密钥不存在，UserSig 验证失败，请在即时通信 IM 控制台获取密钥(".concat(Iv, "269/32578#.E8.8E.B7.E5.8F.96.E5.AF.86.E9.92.A5)。"), 70020: "SDKAppID 未找到，请在即时通信 IM 控制台确认应用信息。", 70050: "UserSig 验证次数过于频繁。请检查 UserSig 是否正确，并于1分钟后重新验证。".concat(Ev), 70051: "帐号被拉入黑名单。", 70052: "UserSig 已经失效，请重新生成，再次尝试。", 70107: "因安全原因被限制登录，请不要频繁登录。", 70169: "请求的用户帐号不存在。", 70114: "".concat("服务端内部超时，请稍后重试。"), 70202: "".concat("服务端内部超时，请稍后重试。"), 70206: "请求中批量数量不合法。", 70402: "参数非法，请检查必填字段是否填充，或者字段的填充是否满足协议要求。", 70403: "请求失败，需要 App 管理员权限。", 70398: "帐号数超限。如需创建多于100个帐号，请将应用升级为专业版，具体操作指引请参见购买指引(".concat(Iv, "269/32458)。"), 70500: "".concat("服务端内部错误，请重试。"), 71e3: "删除帐号失败。仅支持删除体验版帐号，您当前应用为专业版，暂不支持帐号删除。", 20001: "请求包非法。", 20002: "UserSig 或 A2 失效。", 20003: "消息发送方或接收方 UserID 无效或不存在，请检查 UserID 是否已导入即时通信 IM。", 20004: "网络异常，请重试。", 20005: "".concat("服务端内部错误，请重试。"), 20006: "触发发送".concat("单聊消息", "之前回调，App 后台返回禁止下发该消息。"), 20007: "发送".concat("单聊消息", "，被对方拉黑，禁止发送。消息发送状态默认展示为失败，您可以登录控制台修改该场景下的消息发送状态展示结果，具体操作请参见消息保留设置(").concat(Iv, "269/38656)。"), 20009: "消息发送双方互相不是好友，禁止发送（配置".concat("单聊消息", "校验好友关系才会出现）。"), 20010: "发送".concat("单聊消息", "，自己不是对方的好友（单向关系），禁止发送。"), 20011: "发送".concat("单聊消息", "，对方不是自己的好友（单向关系），禁止发送。"), 20012: "发送方被禁言，该条消息被禁止发送。", 20016: "消息撤回超过了时间限制（默认2分钟）。", 20018: "删除漫游内部错误。", 90001: "JSON 格式解析失败，请检查请求包是否符合 JSON 规范。", 90002: "".concat("JSON 格式请求包体", "中 MsgBody 不符合消息格式描述，或者 MsgBody 不是 Array 类型，请参考 TIMMsgElement 对象的定义(").concat(Iv, "269/2720").concat(Sv, ")。"), 90003: "".concat("JSON 格式请求包体", "中缺少 To_Account 字段或者 To_Account 帐号不存在。"), 90005: "".concat("JSON 格式请求包体", "中缺少 MsgRandom 字段或者 MsgRandom 字段不是 Integer 类型。"), 90006: "".concat("JSON 格式请求包体", "中缺少 MsgTimeStamp 字段或者 MsgTimeStamp 字段不是 Integer 类型。"), 90007: "".concat("JSON 格式请求包体", "中 MsgBody 类型不是 Array 类型，请将其修改为 Array 类型。"), 90008: "".concat("JSON 格式请求包体", "中缺少 From_Account 字段或者 From_Account 帐号不存在。"), 90009: "请求需要 App 管理员权限。", 90010: "".concat("JSON 格式请求包体", "不符合消息格式描述，请参考 TIMMsgElement 对象的定义(").concat(Iv, "269/2720").concat(Sv, ")。"), 90011: "批量发消息目标帐号超过500，请减少 To_Account 中目标帐号数量。", 90012: "To_Account 没有注册或不存在，请确认 To_Account 是否导入即时通信 IM 或者是否拼写错误。", 90026: "消息离线存储时间错误（最多不能超过7天）。", 90031: "".concat("JSON 格式请求包体", "中 SyncOtherMachine 字段不是 Integer 类型。"), 90044: "".concat("JSON 格式请求包体", "中 MsgLifeTime 字段不是 Integer 类型。"), 90048: "请求的用户帐号不存在。", 90054: "撤回请求中的 MsgKey 不合法。", 90994: "".concat("服务端内部错误，请重试。"), 90995: "".concat("服务端内部错误，请重试。"), 91e3: "".concat("服务端内部错误，请重试。"), 90992: "".concat("服务端内部错误，请重试。", "如果所有请求都返回该错误码，且 App 配置了第三方回调，请检查 App 服务端是否正常向即时通信 IM 后台服务端返回回调结果。"), 93e3: "JSON 数据包超长，消息包体请不要超过8k。", 91101: "Web 端长轮询被踢（Web 端同时在线实例个数超出限制）。", 10002: "".concat("服务端内部错误，请重试。"), 10003: "请求中的接口名称错误，请核对接口名称并重试。", 10004: "参数非法，请根据错误描述检查请求是否正确。", 10005: "请求包体中携带的帐号数量过多。", 10006: "操作频率限制，请尝试降低调用的频率。", 10007: "操作权限不足，例如 Work ".concat("群组", "中普通成员尝试执行踢人操作，但只有 App 管理员才有权限。"), 10008: "请求非法，可能是请求中携带的签名信息验证不正确，请再次尝试。", 10009: "该群不允许群主主动退出。", 10010: "".concat("群组", "不存在，或者曾经存在过，但是目前已经被解散。"), 10011: "解析 JSON 包体失败，请检查包体的格式是否符合 JSON 格式。", 10012: "发起操作的 UserID 非法，请检查发起操作的用户 UserID 是否填写正确。", 10013: "被邀请加入的用户已经是群成员。", 10014: "群已满员，无法将请求中的用户加入".concat("群组", "，如果是批量加人，可以尝试减少加入用户的数量。"), 10015: "找不到指定 ID 的".concat("群组", "。"), 10016: "App 后台通过第三方回调拒绝本次操作。", 10017: "因被禁言而不能发送消息，请检查发送者是否被设置禁言。", 10018: "应答包长度超过最大包长（1MB），请求的内容过多，请尝试减少单次请求的数据量。", 10019: "请求的用户帐号不存在。", 10021: "".concat("群组", " ID 已被使用，请选择其他的").concat("群组", " ID。"), 10023: "发消息的频率超限，请延长两次发消息时间的间隔。", 10024: "此邀请或者申请请求已经被处理。", 10025: "".concat("群组", " ID 已被使用，并且操作者为群主，可以直接使用。"), 10026: "该 SDKAppID 请求的命令字已被禁用。", 10030: "请求撤回的消息不存在。", 10031: "消息撤回超过了时间限制（默认2分钟）。", 10032: "请求撤回的消息不支持撤回操作。", 10033: "".concat("群组", "类型不支持消息撤回操作。"), 10034: "该消息类型不支持删除操作。", 10035: "直播群和在线成员广播大群不支持删除消息。", 10036: "直播群创建数量超过了限制，请参考价格说明(".concat(Iv, "269/11673)购买预付费套餐“IM直播群”。"), 10037: "单个用户可创建和加入的".concat("群组", "数量超过了限制，请参考价格说明(").concat(Iv, "269/11673)购买或升级预付费套餐“单人可创建与加入").concat("群组", "数”。"), 10038: "群成员数量超过限制，请参考价格说明(".concat(Iv, "269/11673)购买或升级预付费套餐“扩展群人数上限”。"), 10041: "该应用（SDKAppID）已配置不支持群消息撤回。", 10050: "群属性 key 不存在", 10056: "请在写入群属性前先使用 getGroupAttributes 接口更新本地群属性，避免冲突。", 10059: "非旗舰版", 10060: "群人数超过已读回执人数上限", 10061: "在线消息不支持已读回执", 10062: "找不到群消息的已读回执信息", 20026: "消息不存在", 20029: "该群类型不支持修改消息。", 30001: "请求参数错误，请根据错误描述检查请求参数", 30002: "SDKAppID 不匹配", 30003: "请求的用户帐号不存在", 30004: "请求需要 App 管理员权限", 30005: "关系链字段中包含敏感词", 30006: "".concat("服务端内部错误，请重试。"), 30007: "".concat("网络超时，请稍后重试. "), 30008: "并发写导致写冲突，建议使用批量方式", 30009: "后台禁止该用户发起加好友请求", 30010: "自己的好友数已达系统上限", 30011: "分组已达系统上限", 30012: "未决数已达系统上限", 30014: "对方的好友数已达系统上限", 30515: "请求添加好友时，对方在自己的黑名单中，不允许加好友", 30516: "请求添加好友时，对方的加好友验证方式是不允许任何人添加自己为好友", 30525: "请求添加好友时，自己在对方的黑名单中，不允许加好友", 30539: "等待对方同意", 30540: "添加好友请求被安全策略打击，请勿频繁发起添加好友请求", 31704: "与请求删除的帐号之间不存在好友关系", 31707: "删除好友请求被安全策略打击，请勿频繁发起删除好友请求" }, Av = function(e3) {
        i2(n3, e3);
        var t3 = f2(n3);
        function n3(e4) {
          var r3;
          return o2(this, n3), (r3 = t3.call(this)).code = e4.code, r3.message = Cv[e4.code] || e4.message, r3.data = e4.data || {}, r3;
        }
        return a2(n3);
      }(p2(Error)), Dv = null, Nv = function(e3) {
        Dv = e3;
      }, Ov = function(e3) {
        return Promise.resolve(yv(e3));
      }, Rv = function(e3) {
        var t3 = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
        if (e3 instanceof Av)
          return t3 && null !== Dv && Dv.emit(pr.ERROR, e3), Promise.reject(e3);
        if (e3 instanceof Error) {
          var n3 = new Av({ code: Zh.UNCAUGHT_ERROR, message: e3.message });
          return t3 && null !== Dv && Dv.emit(pr.ERROR, n3), Promise.reject(n3);
        }
        if (Zl(e3) || Zl(e3.code) || Zl(e3.message))
          wl.error("IMPromise.reject 必须指定code(错误码)和message(错误信息)!!!");
        else {
          if ($l(e3.code) && zl(e3.message)) {
            var o3 = new Av(e3);
            return t3 && null !== Dv && Dv.emit(pr.ERROR, o3), Promise.reject(o3);
          }
          wl.error("IMPromise.reject code(错误码)必须为数字，message(错误信息)必须为字符串!!!");
        }
      }, Lv = function(e3) {
        i2(r3, e3);
        var n3 = f2(r3);
        function r3(e4) {
          var t3;
          return o2(this, r3), (t3 = n3.call(this, e4))._className = "C2CModule", t3;
        }
        return a2(r3, [{ key: "onNewC2CMessage", value: function(e4) {
          var t3 = e4.dataList, n4 = e4.isInstantMessage, o3 = e4.C2CRemainingUnreadList, r4 = e4.C2CPairUnreadList;
          wl.debug("".concat(this._className, ".onNewC2CMessage count:").concat(t3.length, " isInstantMessage:").concat(n4));
          var a3 = this._newC2CMessageStoredAndSummary({ dataList: t3, C2CRemainingUnreadList: o3, C2CPairUnreadList: r4, isInstantMessage: n4 }), s3 = a3.conversationOptionsList, i3 = a3.messageList, c3 = a3.isUnreadC2CMessage;
          (this.filterModifiedMessage(i3), s3.length > 0) && this.getModule(sg).onNewMessage({ conversationOptionsList: s3, isInstantMessage: n4, isUnreadC2CMessage: c3 });
          var u3 = this.filterUnmodifiedMessage(i3);
          n4 && u3.length > 0 && this.emitOuterEvent(pr.MESSAGE_RECEIVED, u3), i3.length = 0;
        } }, { key: "_newC2CMessageStoredAndSummary", value: function(e4) {
          for (var t3 = e4.dataList, n4 = e4.C2CRemainingUnreadList, o3 = e4.C2CPairUnreadList, r4 = e4.isInstantMessage, a3 = null, s3 = [], i3 = [], c3 = {}, u3 = this.getModule(dg), l3 = this.getModule(Ig), d3 = false, p3 = 0, g3 = t3.length; p3 < g3; p3++) {
            var h3 = t3[p3];
            h3.currentUser = this.getMyUserID(), h3.conversationType = gr.CONV_C2C, h3.isSystemMessage = !!h3.isSystemMessage, (Zl(h3.nick) || Zl(h3.avatar)) && (d3 = true, wl.debug("".concat(this._className, "._newC2CMessageStoredAndSummary nick or avatar missing!"))), a3 = new Mv(h3), h3.elements = u3.parseElements(h3.elements, h3.from), a3.setElement(h3.elements), a3.setNickAndAvatar({ nick: h3.nick, avatar: h3.avatar });
            var _3 = a3.conversationID;
            if (r4) {
              var f3 = false, m3 = this.getModule(sg);
              if (a3.from !== this.getMyUserID()) {
                var v3 = m3.getLatestMessageSentByPeer(_3);
                if (v3) {
                  var M3 = v3.nick, y3 = v3.avatar;
                  d3 ? a3.setNickAndAvatar({ nick: M3, avatar: y3 }) : M3 === a3.nick && y3 === a3.avatar || (f3 = true);
                }
              } else {
                var I3 = m3.getLatestMessageSentByMe(_3);
                if (I3) {
                  var E3 = I3.nick, T3 = I3.avatar;
                  E3 === a3.nick && T3 === a3.avatar || m3.modifyMessageSentByMe({ conversationID: _3, latestNick: a3.nick, latestAvatar: a3.avatar });
                }
              }
              var S3 = 1 === t3[p3].isModified;
              if (m3.isMessageSentByCurrentInstance(a3) ? a3.isModified = S3 : S3 = false, 0 === h3.msgLifeTime)
                a3._onlineOnlyFlag = true, i3.push(a3);
              else {
                if (!m3.pushIntoMessageList(i3, a3, S3))
                  continue;
                f3 && (m3.modifyMessageSentByPeer({ conversationID: _3, latestNick: a3.nick, latestAvatar: a3.avatar }), m3.updateUserProfileSpecifiedKey({ conversationID: _3, nick: a3.nick, avatar: a3.avatar }));
              }
              r4 && a3.clientTime > 0 && l3.addMessageDelay(a3.clientTime);
            }
            if (0 !== h3.msgLifeTime) {
              if (false === a3._onlineOnlyFlag)
                if (Zl(c3[_3])) {
                  var C3 = 0;
                  "in" === a3.flow && (a3._isExcludedFromUnreadCount || (C3 = 1)), c3[_3] = s3.push({ conversationID: _3, unreadCount: C3, type: a3.conversationType, subType: a3.conversationSubType, lastMessage: a3._isExcludedFromLastMessage ? "" : a3 }) - 1;
                } else {
                  var A3 = c3[_3];
                  s3[A3].type = a3.conversationType, s3[A3].subType = a3.conversationSubType, s3[A3].lastMessage = a3._isExcludedFromLastMessage ? "" : a3, "in" === a3.flow && (a3._isExcludedFromUnreadCount || s3[A3].unreadCount++);
                }
            } else
              a3._onlineOnlyFlag = true;
          }
          var D3 = false;
          if (Ql(o3))
            for (var N3 = function(e5, t4) {
              if (o3[e5].unreadCount > 0) {
                D3 = true;
                var n5 = s3.find(function(t5) {
                  return t5.conversationID === "C2C".concat(o3[e5].from);
                });
                n5 ? n5.unreadCount = o3[e5].unreadCount : s3.push({ conversationID: "C2C".concat(o3[e5].from), unreadCount: o3[e5].unreadCount, type: gr.CONV_C2C });
              }
            }, O3 = 0, R3 = o3.length; O3 < R3; O3++)
              N3(O3);
          if (Ql(n4))
            for (var L3 = function(e5, t4) {
              s3.find(function(t5) {
                return t5.conversationID === "C2C".concat(n4[e5].from);
              }) || s3.push({ conversationID: "C2C".concat(n4[e5].from), type: gr.CONV_C2C, lastMsgTime: n4[e5].lastMsgTime });
            }, k2 = 0, P3 = n4.length; k2 < P3; k2++)
              L3(k2);
          return { conversationOptionsList: s3, messageList: i3, isUnreadC2CMessage: D3 };
        } }, { key: "onC2CMessageRevoked", value: function(e4) {
          var t3 = this;
          wl.debug("".concat(this._className, ".onC2CMessageRevoked count:").concat(e4.dataList.length));
          var n4 = this.getModule(sg), o3 = [], r4 = null;
          e4.dataList.forEach(function(e5) {
            if (e5.c2cMessageRevokedNotify) {
              var a3 = e5.c2cMessageRevokedNotify.revokedInfos;
              Zl(a3) || a3.forEach(function(e6) {
                var a4 = t3.getMyUserID() === e6.from ? "".concat(gr.CONV_C2C).concat(e6.to) : "".concat(gr.CONV_C2C).concat(e6.from);
                (r4 = n4.revoke(a4, e6.sequence, e6.random)) && o3.push(r4);
              });
            }
          }), 0 !== o3.length && (n4.onMessageRevoked(o3), this.emitOuterEvent(pr.MESSAGE_REVOKED, o3));
        } }, { key: "onC2CMessageReadReceipt", value: function(e4) {
          var t3 = this;
          e4.dataList.forEach(function(e5) {
            if (!qd(e5.c2cMessageReadReceipt)) {
              var n4 = e5.c2cMessageReadReceipt.to;
              e5.c2cMessageReadReceipt.uinPairReadArray.forEach(function(e6) {
                var o3 = e6.peerReadTime;
                wl.debug("".concat(t3._className, "._onC2CMessageReadReceipt to:").concat(n4, " peerReadTime:").concat(o3));
                var r4 = "".concat(gr.CONV_C2C).concat(n4), a3 = t3.getModule(sg);
                a3.recordPeerReadTime(r4, o3), a3.updateMessageIsPeerReadProperty(r4, o3);
              });
            }
          });
        } }, { key: "onC2CMessageReadNotice", value: function(e4) {
          var t3 = this;
          e4.dataList.forEach(function(e5) {
            if (!qd(e5.c2cMessageReadNotice)) {
              var n4 = t3.getModule(sg);
              e5.c2cMessageReadNotice.uinPairReadArray.forEach(function(e6) {
                var o3 = e6.from, r4 = e6.peerReadTime;
                wl.debug("".concat(t3._className, ".onC2CMessageReadNotice from:").concat(o3, " lastReadTime:").concat(r4));
                var a3 = "".concat(gr.CONV_C2C).concat(o3);
                n4.updateIsReadAfterReadReport({ conversationID: a3, lastMessageTime: r4 }), n4.updateUnreadCount(a3);
              });
            }
          });
        } }, { key: "onC2CMessageModified", value: function(e4) {
          wl.debug("".concat(this._className, ".onC2CMessageModified options:"), JSON.stringify(e4));
          var n4 = this.getModule(sg);
          e4.dataList.forEach(function(e5) {
            n4.onMessageModified(t2(t2({}, e5), {}, { conversationType: gr.CONV_C2C }));
          });
        } }, { key: "onReadReceiptList", value: function(e4) {
          wl.debug("".concat(this._className, ".onReadReceiptList options:"), JSON.stringify(e4));
          var t3 = e4.dataList, n4 = t3.userID, o3 = t3.readReceiptList;
          this.getModule(sg).updateReadReceiptInfo({ userID: n4, readReceiptList: o3 });
        } }, { key: "sendMessage", value: function(e4, t3) {
          var n4 = this._createC2CMessagePack(e4, t3);
          return this.request(n4);
        } }, { key: "_createC2CMessagePack", value: function(e4, t3) {
          var n4 = null;
          t3 && (t3.offlinePushInfo && (n4 = t3.offlinePushInfo), true === t3.onlineUserOnly && (n4 ? n4.disablePush = true : n4 = { disablePush: true }));
          var o3 = "";
          zl(e4.cloudCustomData) && e4.cloudCustomData.length > 0 && (o3 = e4.cloudCustomData);
          var r4 = [];
          if (Xl(t3) && Xl(t3.messageControlInfo)) {
            var a3 = t3.messageControlInfo, s3 = a3.excludedFromUnreadCount, i3 = a3.excludedFromLastMessage;
            true === s3 && r4.push("NoUnread"), true === i3 && r4.push("NoLastMsg");
          }
          return { protocolName: Rg, tjgID: this.generateTjgID(e4), requestData: { fromAccount: this.getMyUserID(), toAccount: e4.to, msgBody: e4.getElements(), cloudCustomData: o3, msgSeq: e4.sequence, msgRandom: e4.random, msgLifeTime: this.isOnlineMessage(e4, t3) ? 0 : void 0, nick: e4.nick, avatar: e4.avatar, offlinePushInfo: n4 ? { pushFlag: true === n4.disablePush ? 1 : 0, title: n4.title || "", desc: n4.description || "", ext: n4.extension || "", apnsInfo: { badgeMode: true === n4.ignoreIOSBadge ? 1 : 0 }, androidInfo: { OPPOChannelID: n4.androidOPPOChannelID || "" } } : void 0, messageControlInfo: r4, clientTime: e4.clientTime, needReadReceipt: true === e4.needReadReceipt ? 1 : 0 } };
        } }, { key: "isOnlineMessage", value: function(e4, t3) {
          return !(!t3 || true !== t3.onlineUserOnly);
        } }, { key: "revokeMessage", value: function(e4) {
          return this.request({ protocolName: Ug, requestData: { msgInfo: { fromAccount: e4.from, toAccount: e4.to, msgSeq: e4.sequence, msgRandom: e4.random, msgTimeStamp: e4.time } } });
        } }, { key: "deleteMessage", value: function(e4) {
          var t3 = e4.to, n4 = e4.keyList;
          return wl.log("".concat(this._className, ".deleteMessage toAccount:").concat(t3, " count:").concat(n4.length)), this.request({ protocolName: Hg, requestData: { fromAccount: this.getMyUserID(), to: t3, keyList: n4 } });
        } }, { key: "modifyRemoteMessage", value: function(e4) {
          var t3 = e4.from, n4 = e4.to, o3 = e4.version, r4 = void 0 === o3 ? 0 : o3, a3 = e4.sequence, s3 = e4.random, i3 = e4.time, c3 = e4.payload, u3 = e4.type, l3 = e4.cloudCustomData;
          return this.request({ protocolName: Bg, requestData: { from: t3, to: n4, version: r4, sequence: a3, random: s3, time: i3, elements: [{ type: u3, content: c3 }], cloudCustomData: l3 } });
        } }, { key: "setMessageRead", value: function(e4) {
          var t3 = this, n4 = e4.conversationID, o3 = e4.lastMessageTime, r4 = "".concat(this._className, ".setMessageRead");
          wl.log("".concat(r4, " conversationID:").concat(n4, " lastMessageTime:").concat(o3)), $l(o3) || wl.warn("".concat(r4, " 请勿修改 Conversation.lastMessage.lastTime，否则可能会导致已读上报结果不准确"));
          var a3 = new __(f_.SET_C2C_MESSAGE_READ);
          return a3.setMessage("conversationID:".concat(n4, " lastMessageTime:").concat(o3)), this.request({ protocolName: Fg, requestData: { C2CMsgReaded: { cookie: "", C2CMsgReadedItem: [{ toAccount: n4.replace("C2C", ""), lastMessageTime: o3, receipt: 1 }] } } }).then(function() {
            a3.setNetworkType(t3.getNetworkType()).end(), wl.log("".concat(r4, " ok"));
            var e5 = t3.getModule(sg);
            return e5.updateIsReadAfterReadReport({ conversationID: n4, lastMessageTime: o3 }), e5.updateUnreadCount(n4), yv();
          }).catch(function(e5) {
            return t3.probeNetwork().then(function(t4) {
              var n5 = m2(t4, 2), o4 = n5[0], r5 = n5[1];
              a3.setError(e5, o4, r5).end();
            }), wl.log("".concat(r4, " failed. error:"), e5), Rv(e5);
          });
        } }, { key: "getRoamingMessage", value: function(e4) {
          var t3 = this, n4 = "".concat(this._className, ".getRoamingMessage"), o3 = e4.peerAccount, r4 = e4.conversationID, a3 = e4.count, s3 = e4.lastMessageTime, i3 = e4.messageKey, c3 = "peerAccount:".concat(o3, " count:").concat(a3 || 15, " lastMessageTime:").concat(s3 || 0, " messageKey:").concat(i3);
          wl.log("".concat(n4, " ").concat(c3));
          var u3 = new __(f_.GET_C2C_ROAMING_MESSAGES);
          return this.request({ protocolName: xg, requestData: { peerAccount: o3, count: a3 || 15, lastMessageTime: s3 || 0, messageKey: i3 } }).then(function(e5) {
            var o4 = e5.data, a4 = o4.complete, s4 = o4.messageList, i4 = o4.messageKey, l3 = o4.lastMessageTime;
            Zl(s4) ? wl.log("".concat(n4, " ok. complete:").concat(a4, " but messageList is undefined!")) : wl.log("".concat(n4, " ok. complete:").concat(a4, " count:").concat(s4.length)), u3.setNetworkType(t3.getNetworkType()).setMessage("".concat(c3, " complete:").concat(a4, " length:").concat(s4.length)).end();
            var d3 = t3.getModule(sg);
            1 === a4 && d3.setCompleted(r4);
            var p3 = d3.onRoamingMessage(s4, r4);
            d3.modifyMessageList(r4), d3.updateIsRead(r4), d3.updateRoamingMessageKeyAndTime(r4, i4, l3);
            var g3 = d3.getPeerReadTime(r4);
            if (wl.log("".concat(n4, " update isPeerRead property. conversationID:").concat(r4, " peerReadTime:").concat(g3)), g3)
              d3.updateMessageIsPeerReadProperty(r4, g3);
            else {
              var h3 = r4.replace(gr.CONV_C2C, "");
              t3.getRemotePeerReadTime([h3]).then(function() {
                d3.updateMessageIsPeerReadProperty(r4, d3.getPeerReadTime(r4));
              });
            }
            var _3 = "";
            if (p3.length > 0)
              _3 = p3[0].ID;
            else {
              var f3 = d3.getLocalOldestMessage(r4);
              f3 && (_3 = f3.ID);
            }
            return wl.log("".concat(n4, " nextReqID:").concat(_3, " stored message count:").concat(p3.length)), { nextReqID: _3, storedMessageList: p3 };
          }).catch(function(e5) {
            return t3.probeNetwork().then(function(t4) {
              var n5 = m2(t4, 2), o4 = n5[0], r5 = n5[1];
              u3.setMessage(c3).setError(e5, o4, r5).end();
            }), wl.warn("".concat(n4, " failed. error:"), e5), Rv(e5);
          });
        } }, { key: "getRoamingMessagesHopping", value: function(e4) {
          var t3 = this, n4 = "".concat(this._className, ".getRoamingMessagesHopping"), o3 = e4.peerAccount, r4 = e4.time, a3 = void 0 === r4 ? 0 : r4, s3 = e4.count, i3 = e4.direction, c3 = "peerAccount:".concat(o3, " count:").concat(s3, " time:").concat(a3, " direction:").concat(i3);
          wl.log("".concat(n4, " ").concat(c3));
          var u3 = new __(f_.GET_C2C_ROAMING_MESSAGES_HOPPING);
          return this.request({ protocolName: xg, requestData: { peerAccount: o3, count: s3, lastMessageTime: a3, direction: i3 } }).then(function(e5) {
            var r5 = e5.data, a4 = r5.complete, s4 = r5.messageList, i4 = void 0 === s4 ? [] : s4;
            wl.log("".concat(n4, " ok. complete:").concat(a4, " count:").concat(i4.length)), u3.setNetworkType(t3.getNetworkType()).setMessage("".concat(c3, " complete:").concat(a4, " length:").concat(i4.length)).end();
            var l3 = "".concat(gr.CONV_C2C).concat(o3), d3 = t3.getModule(sg).onRoamingMessage(i4, l3, false);
            return t3._modifyMessageList(l3, d3), d3;
          }).catch(function(e5) {
            return t3.probeNetwork().then(function(t4) {
              var n5 = m2(t4, 2), o4 = n5[0], r5 = n5[1];
              u3.setMessage(c3).setError(e5, o4, r5).end();
            }), wl.warn("".concat(n4, " failed. error:"), e5), Rv(e5);
          });
        } }, { key: "_modifyMessageList", value: function(e4, t3) {
          var n4 = this.getModule(sg).getLocalConversation(e4);
          if (n4)
            for (var o3 = n4.userProfile.nick, r4 = n4.userProfile.avatar, a3 = this.getModule(eg).getNickAndAvatarByUserID(this.getMyUserID()), s3 = a3.nick, i3 = a3.avatar, c3 = t3.length - 1; c3 >= 0; c3--) {
              var u3 = t3[c3];
              "in" === u3.flow && (u3.nick !== o3 && u3.setNickAndAvatar({ nick: o3 }), u3.avatar !== r4 && u3.setNickAndAvatar({ avatar: r4 })), "out" === u3.flow && (u3.nick !== s3 && u3.setNickAndAvatar({ nick: s3 }), u3.avatar !== i3 && u3.setNickAndAvatar({ avatar: i3 }));
            }
        } }, { key: "getRemotePeerReadTime", value: function(e4) {
          var t3 = this, n4 = "".concat(this._className, ".getRemotePeerReadTime");
          if (qd(e4))
            return wl.warn("".concat(n4, " userIDList is empty!")), Promise.resolve();
          var o3 = new __(f_.GET_PEER_READ_TIME);
          return wl.log("".concat(n4, " userIDList:").concat(e4)), this.request({ protocolName: Kg, requestData: { userIDList: e4 } }).then(function(r4) {
            var a3 = r4.data.peerReadTimeList;
            wl.log("".concat(n4, " ok. peerReadTimeList:").concat(a3));
            for (var s3 = "", i3 = t3.getModule(sg), c3 = 0; c3 < e4.length; c3++)
              s3 += "".concat(e4[c3], "-").concat(a3[c3], " "), a3[c3] > 0 && i3.recordPeerReadTime("C2C".concat(e4[c3]), a3[c3]);
            o3.setNetworkType(t3.getNetworkType()).setMessage(s3).end();
          }).catch(function(e5) {
            t3.probeNetwork().then(function(t4) {
              var n5 = m2(t4, 2), r4 = n5[0], a3 = n5[1];
              o3.setError(e5, r4, a3).end();
            }), wl.warn("".concat(n4, " failed. error:"), e5);
          });
        } }, { key: "sendReadReceipt", value: function(e4) {
          var t3 = this, n4 = e4[0].conversationID.replace(gr.CONV_C2C, ""), o3 = new __(f_.SEND_C2C_READ_RECEIPT);
          o3.setMessage("peerAccount:".concat(n4));
          var r4 = this.getMyUserID(), a3 = e4.filter(function(e5) {
            return e5.from !== r4 && true === e5.needReadReceipt;
          }).map(function(e5) {
            return { fromAccount: e5.from, toAccount: e5.to, sequence: e5.sequence, random: e5.random, time: e5.time, clientTime: e5.clientTime };
          });
          if (0 === a3.length)
            return Rv({ code: Zh.READ_RECEIPT_MESSAGE_LIST_EMPTY, message: e_.READ_RECEIPT_MESSAGE_LIST_EMPTY });
          var s3 = "".concat(this._className, ".sendReadReceipt");
          return wl.log("".concat(s3, ". peerAccount:").concat(n4, " messageInfoList length:").concat(a3.length)), this.request({ protocolName: hh, requestData: { peerAccount: n4, messageInfoList: a3 } }).then(function(e5) {
            return o3.end(), wl.log("".concat(s3, " ok")), yv();
          }).catch(function(e5) {
            return t3.probeNetwork().then(function(t4) {
              var n5 = m2(t4, 2), r5 = n5[0], a4 = n5[1];
              o3.setError(e5, r5, a4).end();
            }), wl.warn("".concat(s3, " failed. error:"), e5), Rv(e5);
          });
        } }, { key: "getReadReceiptList", value: function(e4) {
          var t3 = "".concat(this._className, ".getReadReceiptList"), n4 = this.getMyUserID(), o3 = e4.filter(function(e5) {
            return e5.from === n4 && true === e5.needReadReceipt;
          });
          return wl.log("".concat(t3, " userID:").concat(n4, " messageList length:").concat(o3.length)), Ov({ messageList: o3 });
        } }]), r3;
      }(Tg), kv = ae2.match(/firefox\/(\d+)/i), Pv = !!kv && +kv[1], Gv = /MSIE|Trident/.test(ae2), bv = ae2.match(/AppleWebKit\/(\d+)\./), wv = !!bv && +bv[1], Uv = [], Fv = B2(Uv.sort), qv = B2(Uv.push), Vv = L2(function() {
        Uv.sort(void 0);
      }), xv = L2(function() {
        Uv.sort(null);
      }), Kv = eo("sort"), Hv = !L2(function() {
        if (le2)
          return le2 < 70;
        if (!(Pv && Pv > 3)) {
          if (Gv)
            return true;
          if (wv)
            return wv < 603;
          var e3, t3, n3, o3, r3 = "";
          for (e3 = 65; e3 < 76; e3++) {
            switch (t3 = String.fromCharCode(e3), e3) {
              case 66:
              case 69:
              case 70:
              case 72:
                n3 = 3;
                break;
              case 68:
              case 71:
                n3 = 4;
                break;
              default:
                n3 = 2;
            }
            for (o3 = 0; o3 < 47; o3++)
              Uv.push({ k: t3 + o3, v: n3 });
          }
          for (Uv.sort(function(e4, t4) {
            return t4.v - e4.v;
          }), o3 = 0; o3 < Uv.length; o3++)
            t3 = Uv[o3].k.charAt(0), r3.charAt(r3.length - 1) !== t3 && (r3 += t3);
          return "DGBEFHACIJK" !== r3;
        }
      });
      nn2({ target: "Array", proto: true, forced: Vv || !xv || !Kv || !Hv }, { sort: function(e3) {
        void 0 !== e3 && ve2(e3);
        var t3 = Ae2(this);
        if (Hv)
          return void 0 === e3 ? Fv(t3) : Fv(t3, e3);
        var n3, o3, r3 = [], a3 = bt2(t3);
        for (o3 = 0; o3 < a3; o3++)
          o3 in t3 && qv(r3, t3[o3]);
        for (z_(r3, /* @__PURE__ */ function(e4) {
          return function(t4, n4) {
            return void 0 === n4 ? -1 : void 0 === t4 ? 1 : void 0 !== e4 ? +e4(t4, n4) || 0 : dn(t4) > dn(n4) ? 1 : -1;
          };
        }(e3)), n3 = r3.length, o3 = 0; o3 < n3; )
          t3[o3] = r3[o3++];
        for (; o3 < a3; )
          delete t3[o3++];
        return t3;
      } });
      var Bv = Zn2.findIndex, jv = true;
      "findIndex" in [] && Array(1).findIndex(function() {
        jv = false;
      }), nn2({ target: "Array", proto: true, forced: jv }, { findIndex: function(e3) {
        return Bv(this, e3, arguments.length > 1 ? arguments[1] : void 0);
      } }), ja("findIndex");
      var Wv = function() {
        function e3() {
          o2(this, e3), this.list = /* @__PURE__ */ new Map(), this._className = "MessageListHandler", this._latestMessageSentByPeerMap = /* @__PURE__ */ new Map(), this._latestMessageSentByMeMap = /* @__PURE__ */ new Map(), this._groupLocalLastMessageSequenceMap = /* @__PURE__ */ new Map();
        }
        return a2(e3, [{ key: "getLocalOldestMessageByConversationID", value: function(e4) {
          if (!e4)
            return null;
          if (!this.list.has(e4))
            return null;
          var t3 = this.list.get(e4).values();
          return t3 ? t3.next().value : null;
        } }, { key: "pushIn", value: function(e4) {
          var t3 = arguments.length > 1 && void 0 !== arguments[1] && arguments[1], n3 = e4.conversationID, o3 = true;
          this.list.has(n3) || this.list.set(n3, /* @__PURE__ */ new Map());
          var r3 = this._getUniqueIDOfMessage(e4), a3 = this.list.get(n3).has(r3);
          if (a3) {
            var s3 = this.list.get(n3).get(r3);
            if (!t3 || true === s3.isModified)
              return o3 = false;
          }
          return this.list.get(n3).set(r3, e4), this._setLatestMessageSentByPeer(n3, e4), this._setLatestMessageSentByMe(n3, e4), this._setGroupLocalLastMessageSequence(n3, e4), o3;
        } }, { key: "unshift", value: function(e4, t3) {
          var n3;
          if (Ql(e4)) {
            if (e4.length > 0) {
              n3 = e4[0].conversationID;
              var o3 = e4.length;
              this._unshiftMultipleMessages(e4, t3), this._setGroupLocalLastMessageSequence(n3, e4[o3 - 1]);
            }
          } else
            n3 = e4.conversationID, this._unshiftSingleMessage(e4, t3), this._setGroupLocalLastMessageSequence(n3, e4);
          if (n3 && n3.startsWith(gr.CONV_C2C)) {
            var r3 = Array.from(this.list.get(n3).values()), a3 = r3.length;
            if (0 === a3)
              return;
            for (var s3 = a3 - 1; s3 >= 0; s3--)
              if ("out" === r3[s3].flow) {
                this._setLatestMessageSentByMe(n3, r3[s3]);
                break;
              }
            for (var i3 = a3 - 1; i3 >= 0; i3--)
              if ("in" === r3[i3].flow) {
                this._setLatestMessageSentByPeer(n3, r3[i3]);
                break;
              }
          }
        } }, { key: "_unshiftSingleMessage", value: function(e4, t3) {
          var n3 = e4.conversationID, o3 = this._getUniqueIDOfMessage(e4);
          if (!this.list.has(n3))
            return this.list.set(n3, /* @__PURE__ */ new Map()), this.list.get(n3).set(o3, e4), void t3.push(e4);
          var r3 = this.list.get(n3), a3 = Array.from(r3);
          r3.has(o3) || (a3.unshift([o3, e4]), this.list.set(n3, new Map(a3)), t3.push(e4));
        } }, { key: "_unshiftMultipleMessages", value: function(e4, t3) {
          for (var n3 = e4.length, o3 = [], r3 = e4[0].conversationID, a3 = this.list.get(r3), s3 = this.list.has(r3) ? Array.from(a3) : [], i3 = 0; i3 < n3; i3++) {
            var c3 = this._getUniqueIDOfMessage(e4[i3]);
            a3 && a3.has(c3) || (o3.push([c3, e4[i3]]), t3.push(e4[i3]));
          }
          this.list.set(r3, new Map(o3.concat(s3)));
        } }, { key: "remove", value: function(e4) {
          var t3 = e4.conversationID, n3 = this._getUniqueIDOfMessage(e4);
          this.list.has(t3) && this.list.get(t3).delete(n3);
        } }, { key: "revoke", value: function(e4, t3, n3) {
          if (wl.debug("revoke message", e4, t3, n3), this.list.has(e4)) {
            var o3, r3 = S2(this.list.get(e4));
            try {
              for (r3.s(); !(o3 = r3.n()).done; ) {
                var a3 = m2(o3.value, 2)[1];
                if (a3.sequence === t3 && !a3.isRevoked && (Zl(n3) || a3.random === n3))
                  return a3.isRevoked = true, a3;
              }
            } catch (s3) {
              r3.e(s3);
            } finally {
              r3.f();
            }
          }
          return null;
        } }, { key: "removeByConversationID", value: function(e4) {
          this.list.has(e4) && (this.list.delete(e4), this._latestMessageSentByPeerMap.delete(e4), this._latestMessageSentByMeMap.delete(e4));
        } }, { key: "findMessage", value: function(e4) {
          var t3, n3 = null, o3 = S2(this.list);
          try {
            for (o3.s(); !(t3 = o3.n()).done; )
              for (var r3 = v2(m2(t3.value, 2)[1].values()), a3 = r3.length, s3 = 0; s3 < a3; s3++)
                if (r3[s3].ID === e4) {
                  n3 = r3[s3];
                  break;
                }
          } catch (i3) {
            o3.e(i3);
          } finally {
            o3.f();
          }
          return n3;
        } }, { key: "updateMessageIsPeerReadProperty", value: function(e4, t3) {
          var n3 = [];
          if (this.list.has(e4)) {
            var o3, r3 = S2(this.list.get(e4));
            try {
              for (r3.s(); !(o3 = r3.n()).done; ) {
                var a3 = m2(o3.value, 2)[1];
                a3.time <= t3 && !a3.isPeerRead && "out" === a3.flow && (a3.isPeerRead = true, n3.push(a3));
              }
            } catch (s3) {
              r3.e(s3);
            } finally {
              r3.f();
            }
            wl.log("".concat(this._className, ".updateMessageIsPeerReadProperty conversationID:").concat(e4, " peerReadTime:").concat(t3, " count:").concat(n3.length));
          }
          return n3;
        } }, { key: "updateMessageIsModifiedProperty", value: function(e4) {
          var t3 = e4.conversationID;
          if (this.list.has(t3)) {
            var n3 = this._getUniqueIDOfMessage(e4), o3 = this.list.get(t3).get(n3);
            o3 && (o3.isModified = true);
          }
        } }, { key: "hasLocalMessageList", value: function(e4) {
          return this.list.has(e4);
        } }, { key: "getLocalMessageList", value: function(e4) {
          return this.hasLocalMessageList(e4) ? v2(this.list.get(e4).values()) : [];
        } }, { key: "hasLocalMessage", value: function(e4, t3) {
          for (var n3 = false, o3 = this.getLocalMessageList(e4), r3 = o3.length, a3 = 0; a3 < r3; a3++)
            o3[a3].ID === t3 && (n3 = true);
          return n3;
        } }, { key: "getLocalMessage", value: function(e4, t3) {
          for (var n3 = null, o3 = this.getLocalMessageList(e4), r3 = o3.length, a3 = 0; a3 < r3; a3++)
            if (o3[a3].ID === t3) {
              n3 = o3[a3];
              break;
            }
          return n3;
        } }, { key: "getLocalLastMessage", value: function(e4) {
          var t3 = this.getLocalMessageList(e4);
          return t3[t3.length - 1];
        } }, { key: "getLocalOldestMessage", value: function(e4) {
          return this.getLocalMessageList(e4)[0];
        } }, { key: "_setLatestMessageSentByPeer", value: function(e4, t3) {
          e4.startsWith(gr.CONV_C2C) && "in" === t3.flow && this._latestMessageSentByPeerMap.set(e4, t3);
        } }, { key: "_setLatestMessageSentByMe", value: function(e4, t3) {
          e4.startsWith(gr.CONV_C2C) && "out" === t3.flow && this._latestMessageSentByMeMap.set(e4, t3);
        } }, { key: "_setGroupLocalLastMessageSequence", value: function(e4, t3) {
          e4.startsWith(gr.CONV_GROUP) && this._groupLocalLastMessageSequenceMap.set(e4, t3.sequence);
        } }, { key: "getLatestMessageSentByPeer", value: function(e4) {
          return this._latestMessageSentByPeerMap.get(e4);
        } }, { key: "getLatestMessageSentByMe", value: function(e4) {
          return this._latestMessageSentByMeMap.get(e4);
        } }, { key: "getGroupLocalLastMessageSequence", value: function(e4) {
          return this._groupLocalLastMessageSequenceMap.get(e4) || 0;
        } }, { key: "modifyMessageSentByPeer", value: function(e4) {
          var t3 = e4.conversationID, n3 = e4.latestNick, o3 = e4.latestAvatar, r3 = this.list.get(t3);
          if (!qd(r3)) {
            var a3 = Array.from(r3.values()), s3 = a3.length;
            if (0 !== s3) {
              for (var i3 = null, c3 = 0, u3 = false, l3 = s3 - 1; l3 >= 0; l3--)
                "in" === a3[l3].flow && ((i3 = a3[l3]).nick !== n3 && (i3.setNickAndAvatar({ nick: n3 }), u3 = true), i3.avatar !== o3 && (i3.setNickAndAvatar({ avatar: o3 }), u3 = true), u3 && (c3 += 1));
              wl.log("".concat(this._className, ".modifyMessageSentByPeer conversationID:").concat(t3, " count:").concat(c3));
            }
          }
        } }, { key: "modifyMessageSentByMe", value: function(e4) {
          var t3 = e4.conversationID, n3 = e4.latestNick, o3 = e4.latestAvatar, r3 = this.list.get(t3);
          if (!qd(r3)) {
            var a3 = Array.from(r3.values()), s3 = a3.length;
            if (0 !== s3) {
              for (var i3 = null, c3 = 0, u3 = false, l3 = s3 - 1; l3 >= 0; l3--)
                "out" === a3[l3].flow && ((i3 = a3[l3]).nick !== n3 && (i3.setNickAndAvatar({ nick: n3 }), u3 = true), i3.avatar !== o3 && (i3.setNickAndAvatar({ avatar: o3 }), u3 = true), u3 && (c3 += 1));
              wl.log("".concat(this._className, ".modifyMessageSentByMe conversationID:").concat(t3, " count:").concat(c3));
            }
          }
        } }, { key: "getLocalMessageListHopping", value: function(e4) {
          var t3 = e4.conversationID, n3 = e4.sequence, o3 = e4.time, r3 = e4.count, a3 = e4.direction, s3 = this.getLocalMessageList(t3), i3 = -1;
          if (t3.startsWith(gr.CONV_C2C) ? i3 = s3.findIndex(function(e5) {
            return e5.time === o3;
          }) : t3.startsWith(gr.CONV_GROUP) && (i3 = s3.findIndex(function(e5) {
            return e5.sequence === n3;
          })), -1 === i3)
            return [];
          var c3 = i3 + 1, u3 = c3 > r3 ? c3 - r3 : 0;
          return 1 === a3 && (u3 = i3, c3 = i3 + r3), s3.slice(u3, c3);
        } }, { key: "getConversationIDList", value: function(e4) {
          return v2(this.list.keys()).filter(function(t3) {
            return t3.startsWith(e4);
          });
        } }, { key: "traversal", value: function() {
          if (0 !== this.list.size && -1 === wl.getLevel()) {
            console.group("conversationID-messageCount");
            var e4, t3 = S2(this.list);
            try {
              for (t3.s(); !(e4 = t3.n()).done; ) {
                var n3 = m2(e4.value, 2), o3 = n3[0], r3 = n3[1];
                formatAppLog("log", "at node_modules/tim-js-sdk/tim-js.js:1", "".concat(o3, "-").concat(r3.size));
              }
            } catch (a3) {
              t3.e(a3);
            } finally {
              t3.f();
            }
            console.groupEnd();
          }
        } }, { key: "onMessageModified", value: function(e4, t3) {
          if (!this.list.has(e4))
            return { isUpdated: false, message: null };
          var n3 = this._getUniqueIDOfMessage(t3), o3 = this.list.get(e4).has(n3);
          if (wl.debug("".concat(this._className, ".onMessageModified conversationID:").concat(e4, " uniqueID:").concat(n3, " has:").concat(o3)), o3) {
            var r3 = this.list.get(e4).get(n3), a3 = t3.messageVersion, s3 = t3.elements, i3 = t3.cloudCustomData;
            return r3.version < a3 ? (r3.version = a3, r3._elements = JSON.parse(JSON.stringify(s3)), r3.payload = JSON.parse(JSON.stringify(s3[0].content)), r3.type = s3[0].type, r3.cloudCustomData = i3, r3.isModified = true, { isUpdated: true, message: r3 }) : { isUpdated: false, message: r3 };
          }
          return { isUpdated: false, message: null };
        } }, { key: "_getUniqueIDOfMessage", value: function(e4) {
          var t3 = e4.from, n3 = e4.to, o3 = e4.random, r3 = e4.sequence, a3 = e4.time;
          return "".concat(t3, "-").concat(n3, "-").concat(o3, "-").concat(r3, "-").concat(a3);
        } }, { key: "reset", value: function() {
          this.list.clear(), this._latestMessageSentByPeerMap.clear(), this._latestMessageSentByMeMap.clear(), this._groupLocalLastMessageSequenceMap.clear();
        } }]), e3;
      }(), Yv = "_a2KeyAndTinyIDUpdated", $v = "_cloudConfigUpdated", zv = "_profileUpdated";
      function Jv(e3) {
        this.mixin(e3);
      }
      Jv.mixin = function(e3) {
        var t3 = e3.prototype || e3;
        t3._isReady = false, t3.ready = function(e4) {
          var t4 = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
          if (e4)
            return this._isReady ? void (t4 ? e4.call(this) : setTimeout(e4, 1)) : (this._readyQueue = this._readyQueue || [], void this._readyQueue.push(e4));
        }, t3.triggerReady = function() {
          var e4 = this;
          this._isReady = true, setTimeout(function() {
            var t4 = e4._readyQueue;
            e4._readyQueue = [], t4 && t4.length > 0 && t4.forEach(function(e5) {
              e5.call(this);
            }, e4);
          }, 1);
        }, t3.resetReady = function() {
          this._isReady = false, this._readyQueue = [];
        }, t3.isReady = function() {
          return this._isReady;
        };
      };
      var Xv = ["jpg", "jpeg", "gif", "png", "bmp", "image", "webp"], Qv = ["mp4"], Zv = 1, eM = 2, tM = 3, nM = 255, oM = function() {
        function e3(t3) {
          var n3 = this;
          o2(this, e3), qd(t3) || (this.userID = t3.userID || "", this.nick = t3.nick || "", this.gender = t3.gender || "", this.birthday = t3.birthday || 0, this.location = t3.location || "", this.selfSignature = t3.selfSignature || "", this.allowType = t3.allowType || gr.ALLOW_TYPE_ALLOW_ANY, this.language = t3.language || 0, this.avatar = t3.avatar || "", this.messageSettings = t3.messageSettings || 0, this.adminForbidType = t3.adminForbidType || gr.FORBID_TYPE_NONE, this.level = t3.level || 0, this.role = t3.role || 0, this.lastUpdatedTime = 0, this.profileCustomField = [], qd(t3.profileCustomField) || t3.profileCustomField.forEach(function(e4) {
            n3.profileCustomField.push({ key: e4.key, value: e4.value });
          }));
        }
        return a2(e3, [{ key: "validate", value: function(e4) {
          var t3 = true, n3 = "";
          if (qd(e4))
            return { valid: false, tips: "empty options" };
          if (e4.profileCustomField)
            for (var o3 = e4.profileCustomField.length, r3 = null, a3 = 0; a3 < o3; a3++) {
              if (r3 = e4.profileCustomField[a3], !zl(r3.key) || -1 === r3.key.indexOf("Tag_Profile_Custom"))
                return { valid: false, tips: "自定义资料字段的前缀必须是 Tag_Profile_Custom" };
              if (!zl(r3.value))
                return { valid: false, tips: "自定义资料字段的 value 必须是字符串" };
            }
          for (var s3 in e4)
            if (Object.prototype.hasOwnProperty.call(e4, s3)) {
              if ("profileCustomField" === s3)
                continue;
              if (qd(e4[s3]) && !zl(e4[s3]) && !$l(e4[s3])) {
                n3 = "key:" + s3 + ", invalid value:" + e4[s3], t3 = false;
                continue;
              }
              switch (s3) {
                case "nick":
                  zl(e4[s3]) || (n3 = "nick should be a string", t3 = false), ud(e4[s3]) > 500 && (n3 = "nick name limited: must less than or equal to ".concat(500, " bytes, current size: ").concat(ud(e4[s3]), " bytes"), t3 = false);
                  break;
                case "gender":
                  gd(ql, e4.gender) || (n3 = "key:gender, invalid value:" + e4.gender, t3 = false);
                  break;
                case "birthday":
                  $l(e4.birthday) || (n3 = "birthday should be a number", t3 = false);
                  break;
                case "location":
                  zl(e4.location) || (n3 = "location should be a string", t3 = false);
                  break;
                case "selfSignature":
                  zl(e4.selfSignature) || (n3 = "selfSignature should be a string", t3 = false);
                  break;
                case "allowType":
                  gd(xl, e4.allowType) || (n3 = "key:allowType, invalid value:" + e4.allowType, t3 = false);
                  break;
                case "language":
                  $l(e4.language) || (n3 = "language should be a number", t3 = false);
                  break;
                case "avatar":
                  zl(e4.avatar) || (n3 = "avatar should be a string", t3 = false);
                  break;
                case "messageSettings":
                  0 !== e4.messageSettings && 1 !== e4.messageSettings && (n3 = "messageSettings should be 0 or 1", t3 = false);
                  break;
                case "adminForbidType":
                  gd(Vl, e4.adminForbidType) || (n3 = "key:adminForbidType, invalid value:" + e4.adminForbidType, t3 = false);
                  break;
                case "level":
                  $l(e4.level) || (n3 = "level should be a number", t3 = false);
                  break;
                case "role":
                  $l(e4.role) || (n3 = "role should be a number", t3 = false);
                  break;
                default:
                  n3 = "unknown key:" + s3 + "  " + e4[s3], t3 = false;
              }
            }
          return { valid: t3, tips: n3 };
        } }]), e3;
      }(), rM = a2(function e3(t3) {
        o2(this, e3), this.value = t3, this.next = null;
      }), aM = function() {
        function e3(t3) {
          o2(this, e3), this.MAX_LENGTH = t3, this.pTail = null, this.pNodeToDel = null, this.map = /* @__PURE__ */ new Map(), wl.debug("SinglyLinkedList init MAX_LENGTH:".concat(this.MAX_LENGTH));
        }
        return a2(e3, [{ key: "set", value: function(e4) {
          var t3 = new rM(e4);
          if (this.map.size < this.MAX_LENGTH)
            null === this.pTail ? (this.pTail = t3, this.pNodeToDel = t3) : (this.pTail.next = t3, this.pTail = t3), this.map.set(e4, 1);
          else {
            var n3 = this.pNodeToDel;
            this.pNodeToDel = this.pNodeToDel.next, this.map.delete(n3.value), n3.next = null, n3 = null, this.pTail.next = t3, this.pTail = t3, this.map.set(e4, 1);
          }
        } }, { key: "has", value: function(e4) {
          return this.map.has(e4);
        } }, { key: "delete", value: function(e4) {
          this.has(e4) && this.map.delete(e4);
        } }, { key: "tail", value: function() {
          return this.pTail;
        } }, { key: "size", value: function() {
          return this.map.size;
        } }, { key: "data", value: function() {
          return Array.from(this.map.keys());
        } }, { key: "reset", value: function() {
          for (var e4; null !== this.pNodeToDel; )
            e4 = this.pNodeToDel, this.pNodeToDel = this.pNodeToDel.next, e4.next = null, e4 = null;
          this.pTail = null, this.map.clear();
        } }]), e3;
      }(), sM = ["groupID", "name", "avatar", "type", "introduction", "notification", "ownerID", "selfInfo", "createTime", "infoSequence", "lastInfoTime", "lastMessage", "nextMessageSeq", "memberNum", "maxMemberNum", "memberList", "joinOption", "groupCustomField", "muteAllMembers", "isSupportTopic"], iM = function() {
        function e3(t3) {
          o2(this, e3), this.groupID = "", this.name = "", this.avatar = "", this.type = "", this.introduction = "", this.notification = "", this.ownerID = "", this.createTime = "", this.infoSequence = "", this.lastInfoTime = "", this.selfInfo = { messageRemindType: "", joinTime: "", nameCard: "", role: "", userID: "", memberCustomField: void 0, readedSequence: 0, excludedUnreadSequenceList: void 0 }, this.lastMessage = { lastTime: "", lastSequence: "", fromAccount: "", messageForShow: "" }, this.nextMessageSeq = "", this.memberNum = "", this.memberCount = "", this.maxMemberNum = "", this.maxMemberCount = "", this.joinOption = "", this.groupCustomField = [], this.muteAllMembers = false, this.isSupportTopic = false, this._initGroup(t3);
        }
        return a2(e3, [{ key: "memberNum", get: function() {
          return wl.warn("！！！v2.8.0起弃用memberNum，请使用 memberCount"), this.memberCount;
        }, set: function(e4) {
        } }, { key: "maxMemberNum", get: function() {
          return wl.warn("！！！v2.8.0起弃用maxMemberNum，请使用 maxMemberCount"), this.maxMemberCount;
        }, set: function(e4) {
        } }, { key: "_initGroup", value: function(e4) {
          for (var t3 in e4)
            sM.indexOf(t3) < 0 || ("selfInfo" !== t3 ? ("memberNum" === t3 && (this.memberCount = e4[t3]), "maxMemberNum" === t3 && (this.maxMemberCount = e4[t3]), "isSupportTopic" !== t3 ? this[t3] = e4[t3] : this.isSupportTopic = 1 === e4[t3]) : this.updateSelfInfo(e4[t3]));
        } }, { key: "updateGroup", value: function(e4) {
          var t3 = this, n3 = JSON.parse(JSON.stringify(e4));
          n3.lastMsgTime && (this.lastMessage.lastTime = n3.lastMsgTime), Zl(n3.muteAllMembers) || ("On" === n3.muteAllMembers ? n3.muteAllMembers = true : n3.muteAllMembers = false), n3.groupCustomField && vd(this.groupCustomField, n3.groupCustomField), Zl(n3.memberNum) || (this.memberCount = n3.memberNum), Zl(n3.maxMemberNum) || (this.maxMemberCount = n3.maxMemberNum), Zl(n3.isSupportTopic) || (this.isSupportTopic = $l(n3.isSupportTopic) ? 1 === n3.isSupportTopic : n3.isSupportTopic), id2(this, n3, ["members", "errorCode", "lastMsgTime", "groupCustomField", "memberNum", "maxMemberNum", "isSupportTopic"]), Ql(n3.members) && n3.members.length > 0 && n3.members.forEach(function(e5) {
            e5.userID === t3.selfInfo.userID && id2(t3.selfInfo, e5, ["sequence"]);
          });
        } }, { key: "updateSelfInfo", value: function(e4) {
          var n3 = { nameCard: e4.nameCard, joinTime: e4.joinTime, role: e4.role, messageRemindType: e4.messageRemindType, readedSequence: e4.readedSequence, excludedUnreadSequenceList: e4.excludedUnreadSequenceList };
          id2(this.selfInfo, t2({}, n3), [], ["", null, void 0, 0, NaN]);
        } }, { key: "setSelfNameCard", value: function(e4) {
          this.selfInfo.nameCard = e4;
        } }]), e3;
      }(), cM = function(e3) {
        return Zl(e3) ? { lastTime: 0, lastSequence: 0, fromAccount: 0, messageForShow: "", payload: null, type: "", isRevoked: false, cloudCustomData: "", onlineOnlyFlag: false, nick: "", nameCard: "", version: 0, isPeerRead: false } : e3 instanceof Mv ? { lastTime: e3.time || 0, lastSequence: e3.sequence || 0, fromAccount: e3.from || "", messageForShow: Ud(e3.type, e3.payload), payload: e3.payload || null, type: e3.type || null, isRevoked: e3.isRevoked || false, cloudCustomData: e3.cloudCustomData || "", onlineOnlyFlag: e3._onlineOnlyFlag || false, nick: e3.nick || "", nameCard: e3.nameCard || "", version: e3.version || 0, isPeerRead: e3.isPeerRead || false } : t2(t2({}, e3), {}, { messageForShow: Ud(e3.type, e3.payload) });
      }, uM = function() {
        function e3(t3) {
          o2(this, e3), this.conversationID = t3.conversationID || "", this.unreadCount = t3.unreadCount || 0, this.type = t3.type || "", this.lastMessage = cM(t3.lastMessage), t3.lastMsgTime && (this.lastMessage.lastTime = t3.lastMsgTime), this._isInfoCompleted = false, this.peerReadTime = t3.peerReadTime || 0, this.groupAtInfoList = [], this.remark = "", this.isPinned = t3.isPinned || false, this.messageRemindType = "", this._initProfile(t3);
        }
        return a2(e3, [{ key: "toAccount", get: function() {
          return this.conversationID.startsWith(gr.CONV_C2C) ? this.conversationID.replace(gr.CONV_C2C, "") : this.conversationID.startsWith(gr.CONV_GROUP) ? this.conversationID.replace(gr.CONV_GROUP, "") : "";
        } }, { key: "subType", get: function() {
          return this.groupProfile ? this.groupProfile.type : "";
        } }, { key: "_initProfile", value: function(e4) {
          var t3 = this;
          Object.keys(e4).forEach(function(n3) {
            switch (n3) {
              case "userProfile":
                t3.userProfile = e4.userProfile;
                break;
              case "groupProfile":
                t3.groupProfile = e4.groupProfile;
            }
          }), Zl(this.userProfile) && this.type === gr.CONV_C2C ? this.userProfile = new oM({ userID: e4.conversationID.replace("C2C", "") }) : Zl(this.groupProfile) && this.type === gr.CONV_GROUP && (this.groupProfile = new iM({ groupID: e4.conversationID.replace("GROUP", "") }));
        } }, { key: "updateUnreadCount", value: function(e4) {
          var t3 = e4.nextUnreadCount, n3 = e4.isFromGetConversations, o3 = e4.isUnreadC2CMessage;
          Zl(t3) || (yd(this.subType) ? this.unreadCount = 0 : n3 && this.type === gr.CONV_GROUP || n3 && this.type === gr.CONV_TOPIC || o3 && this.type === gr.CONV_C2C ? this.unreadCount = t3 : this.unreadCount = this.unreadCount + t3);
        } }, { key: "updateLastMessage", value: function(e4) {
          this.lastMessage = cM(e4);
        } }, { key: "updateGroupAtInfoList", value: function(e4) {
          var t3, n3 = (M2(t3 = e4.groupAtType) || y2(t3) || I2(t3) || T2()).slice(0);
          -1 !== n3.indexOf(gr.CONV_AT_ME) && -1 !== n3.indexOf(gr.CONV_AT_ALL) && (n3 = [gr.CONV_AT_ALL_AT_ME]);
          var o3 = { from: e4.from, groupID: e4.groupID, topicID: e4.topicID, messageSequence: e4.sequence, atTypeArray: n3, __random: e4.__random, __sequence: e4.__sequence };
          this.groupAtInfoList.push(o3), wl.debug("Conversation.updateGroupAtInfoList conversationID:".concat(this.conversationID), this.groupAtInfoList);
        } }, { key: "clearGroupAtInfoList", value: function() {
          this.groupAtInfoList.length = 0;
        } }, { key: "reduceUnreadCount", value: function() {
          this.unreadCount >= 1 && (this.unreadCount -= 1);
        } }, { key: "isLastMessageRevoked", value: function(e4) {
          var t3 = e4.sequence, n3 = e4.time;
          return this.type === gr.CONV_C2C && t3 === this.lastMessage.lastSequence && n3 === this.lastMessage.lastTime || this.type === gr.CONV_GROUP && t3 === this.lastMessage.lastSequence;
        } }, { key: "setLastMessageRevoked", value: function(e4) {
          this.lastMessage.isRevoked = e4;
        } }]), e3;
      }(), lM = function() {
        function e3(t3) {
          o2(this, e3), this._conversationModule = t3, this._className = "MessageRemindHandler", this._updateSequence = 0;
        }
        return a2(e3, [{ key: "getC2CMessageRemindType", value: function() {
          var e4 = this, t3 = "".concat(this._className, ".getC2CMessageRemindType");
          return this._conversationModule.request({ protocolName: Vg, updateSequence: this._updateSequence }).then(function(n3) {
            wl.log("".concat(t3, " ok"));
            var o3 = n3.data, r3 = o3.updateSequence, a3 = o3.muteFlagList;
            e4._updateSequence = r3, e4._patchC2CMessageRemindType(a3);
          }).catch(function(e5) {
            wl.error("".concat(t3, " failed. error:"), e5);
          });
        } }, { key: "_patchC2CMessageRemindType", value: function(e4) {
          var t3 = this, n3 = 0, o3 = "";
          Ql(e4) && e4.length > 0 && e4.forEach(function(e5) {
            var r3 = e5.userID, a3 = e5.muteFlag;
            0 === a3 ? o3 = gr.MSG_REMIND_ACPT_AND_NOTE : 1 === a3 ? o3 = gr.MSG_REMIND_DISCARD : 2 === a3 && (o3 = gr.MSG_REMIND_ACPT_NOT_NOTE), true === t3._conversationModule.patchMessageRemindType({ ID: r3, isC2CConversation: true, messageRemindType: o3 }) && (n3 += 1);
          }), wl.log("".concat(this._className, "._patchC2CMessageRemindType count:").concat(n3));
        } }, { key: "set", value: function(e4) {
          return e4.groupID ? this._setGroupMessageRemindType(e4) : Ql(e4.userIDList) ? this._setC2CMessageRemindType(e4) : void 0;
        } }, { key: "_setGroupMessageRemindType", value: function(e4) {
          var t3 = this, n3 = "".concat(this._className, "._setGroupMessageRemindType"), o3 = e4.groupID, r3 = e4.messageRemindType, a3 = "groupID:".concat(o3, " messageRemindType:").concat(r3), s3 = new __(f_.SET_MESSAGE_REMIND_TYPE);
          return s3.setMessage(a3), this._getModule(rg).modifyGroupMemberInfo({ groupID: o3, messageRemindType: r3, userID: this._conversationModule.getMyUserID() }).then(function() {
            s3.setNetworkType(t3._conversationModule.getNetworkType()).end(), wl.log("".concat(n3, " ok. ").concat(a3));
            var e5 = t3._getModule(ng).getLocalGroupProfile(o3);
            if (e5 && (e5.selfInfo.messageRemindType = r3), Ed(o3)) {
              var i3 = t3._getModule(ag), c3 = wd(o3), u3 = i3.getLocalTopic(c3, o3);
              return u3 && (u3.updateSelfInfo({ messageRemindType: r3 }), t3._conversationModule.emitOuterEvent(pr.TOPIC_UPDATED, { groupID: o3, topic: u3 })), yv({ group: e5 });
            }
            return t3._conversationModule.patchMessageRemindType({ ID: o3, isC2CConversation: false, messageRemindType: r3 }) && t3._emitConversationUpdate(), yv({ group: e5 });
          }).catch(function(e5) {
            return t3._conversationModule.probeNetwork().then(function(t4) {
              var n4 = m2(t4, 2), o4 = n4[0], r4 = n4[1];
              s3.setError(e5, o4, r4).end();
            }), wl.error("".concat(n3, " failed. error:"), e5), Rv(e5);
          });
        } }, { key: "_setC2CMessageRemindType", value: function(e4) {
          var t3 = this, n3 = "".concat(this._className, "._setC2CMessageRemindType"), o3 = e4.userIDList, r3 = e4.messageRemindType, a3 = o3.slice(0, 30), s3 = 0;
          r3 === gr.MSG_REMIND_DISCARD ? s3 = 1 : r3 === gr.MSG_REMIND_ACPT_NOT_NOTE && (s3 = 2);
          var i3 = "userIDList:".concat(a3, " messageRemindType:").concat(r3), c3 = new __(f_.SET_MESSAGE_REMIND_TYPE);
          return c3.setMessage(i3), this._conversationModule.request({ protocolName: qg, requestData: { userIDList: a3, muteFlag: s3 } }).then(function(e5) {
            c3.setNetworkType(t3._conversationModule.getNetworkType()).end();
            var o4 = e5.data, s4 = o4.updateSequence, i4 = o4.errorList;
            t3._updateSequence = s4;
            var u3 = [], l3 = [];
            Ql(i4) && i4.forEach(function(e6) {
              u3.push(e6.userID), l3.push({ userID: e6.userID, code: e6.errorCode });
            });
            var d3 = a3.filter(function(e6) {
              return -1 === u3.indexOf(e6);
            });
            wl.log("".concat(n3, " ok. successUserIDList:").concat(d3, " failureUserIDList:").concat(JSON.stringify(l3)));
            var p3 = 0;
            return d3.forEach(function(e6) {
              t3._conversationModule.patchMessageRemindType({ ID: e6, isC2CConversation: true, messageRemindType: r3 }) && (p3 += 1);
            }), p3 >= 1 && t3._emitConversationUpdate(), a3.length = u3.length = 0, Ov({ successUserIDList: d3.map(function(e6) {
              return { userID: e6 };
            }), failureUserIDList: l3 });
          }).catch(function(e5) {
            return t3._conversationModule.probeNetwork().then(function(t4) {
              var n4 = m2(t4, 2), o4 = n4[0], r4 = n4[1];
              c3.setError(e5, o4, r4).end();
            }), wl.error("".concat(n3, " failed. error:"), e5), Rv(e5);
          });
        } }, { key: "_getModule", value: function(e4) {
          return this._conversationModule.getModule(e4);
        } }, { key: "_emitConversationUpdate", value: function() {
          this._conversationModule.emitConversationUpdate(true, false);
        } }, { key: "setUpdateSequence", value: function(e4) {
          this._updateSequence = e4;
        } }, { key: "reset", value: function() {
          wl.log("".concat(this._className, ".reset")), this._updateSequence = 0;
        } }]), e3;
      }(), dM = function(e3) {
        i2(r3, e3);
        var n3 = f2(r3);
        function r3(e4) {
          var t3;
          return o2(this, r3), (t3 = n3.call(this, e4))._className = "ConversationModule", Jv.mixin(h2(t3)), t3._messageListHandler = new Wv(), t3._messageRemindHandler = new lM(h2(t3)), t3.singlyLinkedList = new aM(100), t3._pagingStatus = bp.NOT_START, t3._pagingTimeStamp = 0, t3._pagingStartIndex = 0, t3._pagingPinnedTimeStamp = 0, t3._pagingPinnedStartIndex = 0, t3._conversationMap = /* @__PURE__ */ new Map(), t3._tmpGroupList = [], t3._tmpGroupAtTipsList = [], t3._peerReadTimeMap = /* @__PURE__ */ new Map(), t3._completedMap = /* @__PURE__ */ new Map(), t3._roamingMessageKeyAndTimeMap = /* @__PURE__ */ new Map(), t3._roamingMessageSequenceMap = /* @__PURE__ */ new Map(), t3._remoteGroupReadSequenceMap = /* @__PURE__ */ new Map(), t3._initListeners(), t3;
        }
        return a2(r3, [{ key: "_initListeners", value: function() {
          var e4 = this.getInnerEmitterInstance();
          e4.on(Yv, this._initLocalConversationList, this), e4.on(zv, this._onProfileUpdated, this);
        } }, { key: "onCheckTimer", value: function(e4) {
          e4 % 60 == 0 && this._messageListHandler.traversal();
        } }, { key: "_initLocalConversationList", value: function() {
          var e4 = this, t3 = new __(f_.GET_CONVERSATION_LIST_IN_STORAGE);
          wl.log("".concat(this._className, "._initLocalConversationList."));
          var n4 = "", o3 = this._getStorageConversationList();
          if (o3) {
            for (var r4 = o3.length, a3 = 0; a3 < r4; a3++) {
              var s3 = o3[a3];
              if (s3) {
                if (s3.conversationID === "".concat(gr.CONV_C2C, "@TLS#ERROR") || s3.conversationID === "".concat(gr.CONV_C2C, "@TLS#NOT_FOUND"))
                  continue;
                if (s3.groupProfile) {
                  var i3 = s3.groupProfile.type;
                  if (yd(i3))
                    continue;
                }
              }
              this._conversationMap.set(o3[a3].conversationID, new uM(o3[a3]));
            }
            this.emitConversationUpdate(true, false), n4 = "count:".concat(r4);
          } else
            n4 = "count:0";
          t3.setNetworkType(this.getNetworkType()).setMessage(n4).end(), this.getModule(tg) || this.triggerReady(), this.ready(function() {
            e4._tmpGroupList.length > 0 && (e4.updateConversationGroupProfile(e4._tmpGroupList), e4._tmpGroupList.length = 0);
          }), this._syncConversationList();
        } }, { key: "onMessageSent", value: function(e4) {
          this._onSendOrReceiveMessage({ conversationOptionsList: e4.conversationOptionsList, isInstantMessage: true });
        } }, { key: "onNewMessage", value: function(e4) {
          this._onSendOrReceiveMessage(e4);
        } }, { key: "_onSendOrReceiveMessage", value: function(e4) {
          var t3 = this, n4 = e4.conversationOptionsList, o3 = e4.isInstantMessage, r4 = void 0 === o3 || o3, a3 = e4.isUnreadC2CMessage, s3 = void 0 !== a3 && a3;
          this._isReady ? 0 !== n4.length && (this._getC2CPeerReadTime(n4), this._updateLocalConversationList({ conversationOptionsList: n4, isInstantMessage: r4, isUnreadC2CMessage: s3, isFromGetConversations: false }), this._setStorageConversationList(), n4.filter(function(e5) {
            return e5.type === gr.CONV_TOPIC;
          }).length > 0 || this.emitConversationUpdate()) : this.ready(function() {
            t3._onSendOrReceiveMessage(e4);
          });
        } }, { key: "updateConversationGroupProfile", value: function(e4) {
          var t3 = this;
          if (!Ql(e4) || 0 !== e4.length)
            if (0 !== this._conversationMap.size) {
              var n4 = false;
              e4.forEach(function(e5) {
                var o3 = "GROUP".concat(e5.groupID);
                if (t3._conversationMap.has(o3)) {
                  n4 = true;
                  var r4 = t3._conversationMap.get(o3);
                  r4.groupProfile = JSON.parse(JSON.stringify(e5)), r4.lastMessage.lastSequence < e5.nextMessageSeq && (r4.lastMessage.lastSequence = e5.nextMessageSeq - 1), r4.subType || (r4.subType = e5.type);
                }
              }), n4 && this.emitConversationUpdate(true, false);
            } else
              this._tmpGroupList = e4;
        } }, { key: "_updateConversationUserProfile", value: function(e4) {
          var t3 = this;
          e4.data.forEach(function(e5) {
            var n4 = "C2C".concat(e5.userID);
            t3._conversationMap.has(n4) && (t3._conversationMap.get(n4).userProfile = e5);
          }), this.emitConversationUpdate(true, false);
        } }, { key: "onMessageRevoked", value: function(e4) {
          var t3 = this;
          if (0 !== e4.length) {
            var n4 = null, o3 = false;
            e4.forEach(function(e5) {
              (n4 = t3._conversationMap.get(e5.conversationID)) && (n4.reduceUnreadCount(), n4.isLastMessageRevoked(e5) && (o3 = true, n4.setLastMessageRevoked(true)));
            }), o3 && this.emitConversationUpdate(true, false);
          }
        } }, { key: "onMessageDeleted", value: function(e4) {
          var t3 = this;
          if (0 !== e4.length) {
            var n4 = null;
            e4.forEach(function(e5) {
              (n4 = t3._messageListHandler.getLocalMessage(e5.conversationID, e5.ID)) && (n4.isDeleted = true), e5 !== n4 && (e5.isDeleted = true);
            });
            for (var o3 = e4[0].conversationID, r4 = this._messageListHandler.getLocalMessageList(o3), a3 = {}, s3 = r4.length - 1; s3 >= 0; s3--)
              if (!r4[s3].isDeleted) {
                a3 = r4[s3];
                break;
              }
            var i3 = this._conversationMap.get(o3);
            if (i3) {
              var c3 = false;
              i3.lastMessage.lastSequence === a3.sequence && i3.lastMessage.lastTime === a3.time || (qd(a3) && (a3 = void 0), i3.updateLastMessage(a3), i3.type !== gr.CONV_TOPIC && (c3 = true), wl.log("".concat(this._className, ".onMessageDeleted. update conversationID:").concat(o3, " with lastMessage:"), i3.lastMessage)), o3.startsWith(gr.CONV_C2C) && this.updateUnreadCount(o3), c3 && this.emitConversationUpdate(true, false);
            }
          }
        } }, { key: "onMessageModified", value: function(e4) {
          var t3 = e4.conversationType, n4 = e4.from, o3 = e4.to, r4 = e4.time, a3 = e4.sequence, s3 = e4.elements, i3 = e4.cloudCustomData, c3 = e4.messageVersion, u3 = this.getMyUserID(), l3 = "".concat(t3).concat(o3);
          o3 === u3 && t3 === gr.CONV_C2C && (l3 = "".concat(t3).concat(n4));
          var d3 = this._messageListHandler.onMessageModified(l3, e4), p3 = d3.isUpdated, g3 = d3.message;
          true === p3 && this.emitOuterEvent(pr.MESSAGE_MODIFIED, [g3]);
          var h3 = Ed(o3);
          if (wl.log("".concat(this._className, ".onMessageModified isUpdated:").concat(p3, " isTopicMessage:").concat(h3, " from:").concat(n4, " to:").concat(o3)), h3) {
            this.getModule(ag).onMessageModified(e4);
          } else {
            var _3 = this._conversationMap.get(l3);
            if (_3) {
              var f3 = _3.lastMessage;
              wl.debug("".concat(this._className.onMessageModified, " lastMessage:"), JSON.stringify(f3), "options:", JSON.stringify(e4)), f3 && f3.lastTime === r4 && f3.lastSequence === a3 && f3.version !== c3 && (f3.type = s3[0].type, f3.payload = s3[0].content, f3.messageForShow = Ud(f3.type, f3.payload), f3.cloudCustomData = i3, f3.version = c3, this.emitConversationUpdate(true, false));
            }
          }
          return g3;
        } }, { key: "onNewGroupAtTips", value: function(e4) {
          var n4 = this, o3 = e4.dataList, r4 = null;
          o3.forEach(function(e5) {
            e5.groupAtTips ? r4 = e5.groupAtTips : e5.elements && (r4 = t2(t2({}, e5.elements), {}, { sync: true })), r4.__random = e5.random, r4.__sequence = e5.clientSequence, n4._tmpGroupAtTipsList.push(r4);
          }), wl.debug("".concat(this._className, ".onNewGroupAtTips isReady:").concat(this._isReady), this._tmpGroupAtTipsList), this._isReady && this._handleGroupAtTipsList();
        } }, { key: "_handleGroupAtTipsList", value: function() {
          var e4 = this;
          if (0 !== this._tmpGroupAtTipsList.length) {
            var t3 = false;
            this._tmpGroupAtTipsList.forEach(function(n4) {
              var o3 = n4.groupID, r4 = n4.from, a3 = n4.topicID, s3 = void 0 === a3 ? void 0 : a3, i3 = n4.sync, c3 = void 0 !== i3 && i3;
              if (r4 !== e4.getMyUserID())
                if (Zl(s3)) {
                  var u3 = e4._conversationMap.get("".concat(gr.CONV_GROUP).concat(o3));
                  u3 && (u3.updateGroupAtInfoList(n4), t3 = true);
                } else {
                  var l3 = e4._conversationMap.get("".concat(gr.CONV_GROUP).concat(s3));
                  if (l3) {
                    l3.updateGroupAtInfoList(n4);
                    var d3 = e4.getModule(ag), p3 = l3.groupAtInfoList;
                    d3.onConversationProxy({ topicID: s3, groupAtInfoList: p3 });
                  }
                  if (qd(l3) && c3)
                    e4.updateTopicConversation([{ conversationID: "".concat(gr.CONV_GROUP).concat(s3), type: gr.CONV_TOPIC }]), e4._conversationMap.get("".concat(gr.CONV_GROUP).concat(s3)).updateGroupAtInfoList(n4);
                }
            }), t3 && this.emitConversationUpdate(true, false), this._tmpGroupAtTipsList.length = 0;
          }
        } }, { key: "_getC2CPeerReadTime", value: function(e4) {
          var t3 = this, n4 = [];
          if (e4.forEach(function(e5) {
            t3._conversationMap.has(e5.conversationID) || e5.type !== gr.CONV_C2C || n4.push(e5.conversationID.replace(gr.CONV_C2C, ""));
          }), n4.length > 0) {
            wl.debug("".concat(this._className, "._getC2CPeerReadTime userIDList:").concat(n4));
            var o3 = this.getModule(tg);
            o3 && o3.getRemotePeerReadTime(n4);
          }
        } }, { key: "_getStorageConversationList", value: function() {
          return this.getModule(cg).getItem("conversationMap");
        } }, { key: "_setStorageConversationList", value: function() {
          var e4 = this.getLocalConversationList().slice(0, 20).map(function(e5) {
            return { conversationID: e5.conversationID, type: e5.type, subType: e5.subType, lastMessage: e5.lastMessage, groupProfile: e5.groupProfile, userProfile: e5.userProfile };
          });
          this.getModule(cg).setItem("conversationMap", e4);
        } }, { key: "emitConversationUpdate", value: function() {
          var e4 = !(arguments.length > 0 && void 0 !== arguments[0]) || arguments[0], t3 = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1], n4 = this.getLocalConversationList();
          if (t3) {
            var o3 = this.getModule(ng);
            o3 && o3.updateGroupLastMessage(n4);
          }
          e4 && this.emitOuterEvent(pr.CONVERSATION_LIST_UPDATED);
        } }, { key: "getLocalConversationList", value: function() {
          return v2(this._conversationMap.values()).filter(function(e4) {
            return e4.type !== gr.CONV_TOPIC;
          });
        } }, { key: "getLocalConversation", value: function(e4) {
          return this._conversationMap.get(e4);
        } }, { key: "getLocalOldestMessage", value: function(e4) {
          return this._messageListHandler.getLocalOldestMessage(e4);
        } }, { key: "_syncConversationList", value: function() {
          var e4 = this, t3 = new __(f_.SYNC_CONVERSATION_LIST);
          return this._pagingStatus === bp.NOT_START && this._conversationMap.clear(), this._pagingGetConversationList().then(function(n4) {
            return e4._pagingStatus = bp.RESOLVED, e4._setStorageConversationList(), e4._handleC2CPeerReadTime(), e4._patchConversationProperties(), t3.setMessage(e4._conversationMap.size).setNetworkType(e4.getNetworkType()).end(), n4;
          }).catch(function(n4) {
            return e4._pagingStatus = bp.REJECTED, t3.setMessage(e4._pagingTimeStamp), e4.probeNetwork().then(function(e5) {
              var o3 = m2(e5, 2), r4 = o3[0], a3 = o3[1];
              t3.setError(n4, r4, a3).end();
            }), Rv(n4);
          });
        } }, { key: "_patchConversationProperties", value: function() {
          var e4 = this, t3 = Date.now(), n4 = this.checkAndPatchRemark(), o3 = this._messageRemindHandler.getC2CMessageRemindType(), r4 = this.getModule(ng).getGroupList();
          Promise.all([n4, o3, r4]).then(function() {
            var n5 = Date.now() - t3;
            wl.log("".concat(e4._className, "._patchConversationProperties ok. cost ").concat(n5, " ms")), e4.emitConversationUpdate(true, false);
          });
        } }, { key: "_pagingGetConversationList", value: function() {
          var e4 = this, t3 = "".concat(this._className, "._pagingGetConversationList");
          return wl.log("".concat(t3, " timeStamp:").concat(this._pagingTimeStamp, " startIndex:").concat(this._pagingStartIndex) + " pinnedTimeStamp:".concat(this._pagingPinnedTimeStamp, " pinnedStartIndex:").concat(this._pagingPinnedStartIndex)), this._pagingStatus = bp.PENDING, this.request({ protocolName: jg, requestData: { fromAccount: this.getMyUserID(), timeStamp: this._pagingTimeStamp, startIndex: this._pagingStartIndex, pinnedTimeStamp: this._pagingPinnedTimeStamp, pinnedStartIndex: this._pagingStartIndex, orderType: 1 } }).then(function(n4) {
            var o3 = n4.data, r4 = o3.completeFlag, a3 = o3.conversations, s3 = void 0 === a3 ? [] : a3, i3 = o3.timeStamp, c3 = o3.startIndex, u3 = o3.pinnedTimeStamp, l3 = o3.pinnedStartIndex;
            if (wl.log("".concat(t3, " ok. completeFlag:").concat(r4, " count:").concat(s3.length, " isReady:").concat(e4._isReady)), s3.length > 0) {
              var d3 = e4._getConversationOptions(s3);
              e4._updateLocalConversationList({ conversationOptionsList: d3, isFromGetConversations: true }), e4.isLoggedIn() && e4.emitConversationUpdate();
            }
            if (!e4._isReady) {
              if (!e4.isLoggedIn())
                return Ov();
              e4.triggerReady();
            }
            return e4._pagingTimeStamp = i3, e4._pagingStartIndex = c3, e4._pagingPinnedTimeStamp = u3, e4._pagingPinnedStartIndex = l3, 1 !== r4 ? e4._pagingGetConversationList() : (e4._handleGroupAtTipsList(), Ov());
          }).catch(function(n4) {
            throw e4.isLoggedIn() && (e4._isReady || (wl.warn("".concat(t3, " failed. error:"), n4), e4.triggerReady())), n4;
          });
        } }, { key: "_updateLocalConversationList", value: function(e4) {
          var t3, n4 = e4.isFromGetConversations, o3 = Date.now();
          t3 = this._getTmpConversationListMapping(e4), this._conversationMap = new Map(this._sortConversationList([].concat(v2(t3.toBeUpdatedConversationList), v2(this._conversationMap)))), n4 || this._updateUserOrGroupProfile(t3.newConversationList), wl.debug("".concat(this._className, "._updateLocalConversationList cost ").concat(Date.now() - o3, " ms"));
        } }, { key: "_getTmpConversationListMapping", value: function(e4) {
          for (var t3 = e4.conversationOptionsList, n4 = e4.isFromGetConversations, o3 = e4.isInstantMessage, r4 = e4.isUnreadC2CMessage, a3 = void 0 !== r4 && r4, s3 = [], i3 = [], c3 = this.getModule(ng), u3 = this.getModule(og), l3 = 0, d3 = t3.length; l3 < d3; l3++) {
            var p3 = new uM(t3[l3]), g3 = p3.conversationID;
            if (g3 !== "".concat(gr.CONV_C2C, "@TLS#ERROR") && g3 !== "".concat(gr.CONV_C2C, "@TLS#NOT_FOUND"))
              if (this._conversationMap.has(g3)) {
                var h3 = this._conversationMap.get(g3), _3 = ["unreadCount", "allowType", "adminForbidType", "payload", "isPinned"];
                false === o3 && _3.push("lastMessage");
                var f3 = t3[l3].lastMessage, m3 = !Zl(f3);
                m3 || t3[l3].type === gr.CONV_TOPIC || this._onLastMessageNotExist(t3[l3]), Zl(o3) && m3 && null === h3.lastMessage.payload && (h3.lastMessage.payload = f3.payload), id2(h3, p3, _3, [null, void 0, "", 0, NaN]), h3.updateUnreadCount({ nextUnreadCount: p3.unreadCount, isFromGetConversations: n4, isUnreadC2CMessage: a3 }), o3 && m3 && (h3.lastMessage.payload = f3.payload, h3.type === gr.CONV_GROUP && (h3.lastMessage.nameCard = f3.nameCard, h3.lastMessage.nick = f3.nick)), m3 && h3.lastMessage.cloudCustomData !== f3.cloudCustomData && (h3.lastMessage.cloudCustomData = f3.cloudCustomData || ""), this._conversationMap.delete(g3), s3.push([g3, h3]);
              } else {
                if (p3.type === gr.CONV_GROUP && c3) {
                  var v3 = p3.groupProfile.groupID, M3 = c3.getLocalGroupProfile(v3);
                  M3 && (p3.groupProfile = M3, p3.updateUnreadCount({ nextUnreadCount: 0 }));
                } else if (p3.type === gr.CONV_C2C) {
                  var y3 = g3.replace(gr.CONV_C2C, "");
                  u3 && u3.isMyFriend(y3) && (p3.remark = u3.getFriendRemark(y3));
                }
                i3.push(p3), s3.push([g3, p3]);
              }
          }
          var I3 = this.getModule(ag);
          return s3.forEach(function(e5) {
            if (e5[1].type === gr.CONV_TOPIC) {
              var t4 = e5[1], n5 = t4.conversationID, o4 = t4.unreadCount, r5 = t4.groupAtInfoList;
              I3.onConversationProxy({ topicID: n5.replace(gr.CONV_GROUP, ""), unreadCount: o4, groupAtInfoList: qd(r5) ? void 0 : r5 });
            }
          }), { toBeUpdatedConversationList: s3, newConversationList: i3 };
        } }, { key: "_onLastMessageNotExist", value: function(e4) {
          new __(f_.LAST_MESSAGE_NOT_EXIST).setMessage("".concat(JSON.stringify(e4))).setNetworkType(this.getNetworkType()).end();
        } }, { key: "_sortConversationList", value: function(e4) {
          var t3 = [], n4 = [];
          return e4.forEach(function(e5) {
            true === e5[1].isPinned ? t3.push(e5) : n4.push(e5);
          }), t3.sort(function(e5, t4) {
            return t4[1].lastMessage.lastTime - e5[1].lastMessage.lastTime;
          }).concat(n4.sort(function(e5, t4) {
            return t4[1].lastMessage.lastTime - e5[1].lastMessage.lastTime;
          }));
        } }, { key: "_sortConversationListAndEmitEvent", value: function() {
          this._conversationMap = new Map(this._sortConversationList(v2(this._conversationMap))), this.emitConversationUpdate(true, false);
        } }, { key: "_updateUserOrGroupProfile", value: function(e4) {
          var t3 = this;
          if (0 !== e4.length) {
            var n4 = [], o3 = [], r4 = this.getModule(eg), a3 = this.getModule(ng);
            e4.forEach(function(e5) {
              if (e5.type === gr.CONV_C2C)
                n4.push(e5.toAccount);
              else if (e5.type === gr.CONV_GROUP) {
                var t4 = e5.toAccount;
                a3.hasLocalGroup(t4) ? e5.groupProfile = a3.getLocalGroupProfile(t4) : o3.push(t4);
              }
            }), wl.log("".concat(this._className, "._updateUserOrGroupProfile c2cUserIDList:").concat(n4, " groupIDList:").concat(o3)), n4.length > 0 && r4.getUserProfile({ userIDList: n4 }).then(function(e5) {
              var n5 = e5.data;
              Ql(n5) ? n5.forEach(function(e6) {
                t3._conversationMap.get("C2C".concat(e6.userID)).userProfile = e6;
              }) : t3._conversationMap.get("C2C".concat(n5.userID)).userProfile = n5;
            }), o3.length > 0 && a3.getGroupProfileAdvance({ groupIDList: o3, responseFilter: { groupBaseInfoFilter: ["Type", "Name", "FaceUrl"] } }).then(function(e5) {
              e5.data.successGroupList.forEach(function(e6) {
                var n5 = "GROUP".concat(e6.groupID);
                if (t3._conversationMap.has(n5)) {
                  var o4 = t3._conversationMap.get(n5);
                  id2(o4.groupProfile, e6, [], [null, void 0, "", 0, NaN]), !o4.subType && e6.type && (o4.subType = e6.type);
                }
              });
            });
          }
        } }, { key: "_getConversationOptions", value: function(e4) {
          var n4 = this, o3 = [], r4 = e4.filter(function(e5) {
            var t3 = e5.lastMsg;
            return Xl(t3);
          }).filter(function(e5) {
            var t3 = e5.type, n5 = e5.userID;
            return 1 === t3 && "@TLS#NOT_FOUND" !== n5 && "@TLS#ERROR" !== n5 || 2 === t3;
          }), a3 = this.getMyUserID(), s3 = r4.map(function(e5) {
            if (1 === e5.type) {
              var r5 = { userID: e5.userID, nick: e5.peerNick, avatar: e5.peerAvatar };
              return o3.push(r5), { conversationID: "C2C".concat(e5.userID), type: "C2C", lastMessage: { lastTime: e5.time, lastSequence: e5.sequence, fromAccount: e5.lastC2CMsgFromAccount, messageForShow: e5.messageShow, type: e5.lastMsg.elements[0] ? e5.lastMsg.elements[0].type : null, payload: e5.lastMsg.elements[0] ? e5.lastMsg.elements[0].content : null, cloudCustomData: e5.lastMsg.cloudCustomData || "", isRevoked: 8 === e5.lastMessageFlag, onlineOnlyFlag: false, nick: "", nameCard: "", version: 0, isPeerRead: e5.lastC2CMsgFromAccount === a3 && e5.time <= e5.c2cPeerReadTime }, userProfile: new oM(r5), peerReadTime: e5.c2cPeerReadTime, isPinned: 1 === e5.isPinned, messageRemindType: "" };
            }
            return { conversationID: "GROUP".concat(e5.groupID), type: "GROUP", lastMessage: t2(t2({ lastTime: e5.time, lastSequence: e5.messageReadSeq + e5.unreadCount, fromAccount: e5.msgGroupFromAccount, messageForShow: e5.messageShow }, n4._patchTypeAndPayload(e5)), {}, { cloudCustomData: e5.lastMsg.cloudCustomData || "", isRevoked: 2 === e5.lastMessageFlag, onlineOnlyFlag: false, nick: e5.senderNick || "", nameCard: e5.senderNameCard || "" }), groupProfile: new iM({ groupID: e5.groupID, name: e5.groupNick, avatar: e5.groupImage }), unreadCount: e5.unreadCount, peerReadTime: 0, isPinned: 1 === e5.isPinned, messageRemindType: "", version: 0 };
          });
          o3.length > 0 && this.getModule(eg).onConversationsProfileUpdated(o3);
          return s3;
        } }, { key: "_patchTypeAndPayload", value: function(e4) {
          var n4 = e4.lastMsg, o3 = n4.event, r4 = void 0 === o3 ? void 0 : o3, a3 = n4.elements, s3 = void 0 === a3 ? [] : a3, i3 = n4.groupTips, c3 = void 0 === i3 ? {} : i3;
          if (!Zl(r4) && !qd(c3)) {
            var u3 = new Mv(c3);
            u3.setElement({ type: gr.MSG_GRP_TIP, content: t2(t2({}, c3.elements), {}, { groupProfile: c3.groupProfile }) });
            var l3 = JSON.parse(JSON.stringify(u3.payload));
            return u3 = null, { type: gr.MSG_GRP_TIP, payload: l3 };
          }
          return { type: s3[0] ? s3[0].type : null, payload: s3[0] ? s3[0].content : null };
        } }, { key: "getLocalMessageList", value: function(e4) {
          return this._messageListHandler.getLocalMessageList(e4);
        } }, { key: "deleteLocalMessage", value: function(e4) {
          e4 instanceof Mv && this._messageListHandler.remove(e4);
        } }, { key: "onConversationDeleted", value: function(e4) {
          var t3 = this;
          wl.log("".concat(this._className, ".onConversationDeleted")), Ql(e4) && e4.forEach(function(e5) {
            var n4 = e5.type, o3 = e5.userID, r4 = e5.groupID, a3 = "";
            1 === n4 ? a3 = "".concat(gr.CONV_C2C).concat(o3) : 2 === n4 && (a3 = "".concat(gr.CONV_GROUP).concat(r4)), t3.deleteLocalConversation(a3);
          });
        } }, { key: "onConversationPinned", value: function(e4) {
          var t3 = this;
          if (Ql(e4)) {
            var n4 = false;
            e4.forEach(function(e5) {
              var o3, r4 = e5.type, a3 = e5.userID, s3 = e5.groupID;
              1 === r4 ? o3 = t3.getLocalConversation("".concat(gr.CONV_C2C).concat(a3)) : 2 === r4 && (o3 = t3.getLocalConversation("".concat(gr.CONV_GROUP).concat(s3))), o3 && (wl.log("".concat(t3._className, ".onConversationPinned conversationID:").concat(o3.conversationID, " isPinned:").concat(o3.isPinned)), o3.isPinned || (o3.isPinned = true, n4 = true));
            }), n4 && this._sortConversationListAndEmitEvent();
          }
        } }, { key: "onConversationUnpinned", value: function(e4) {
          var t3 = this;
          if (Ql(e4)) {
            var n4 = false;
            e4.forEach(function(e5) {
              var o3, r4 = e5.type, a3 = e5.userID, s3 = e5.groupID;
              1 === r4 ? o3 = t3.getLocalConversation("".concat(gr.CONV_C2C).concat(a3)) : 2 === r4 && (o3 = t3.getLocalConversation("".concat(gr.CONV_GROUP).concat(s3))), o3 && (wl.log("".concat(t3._className, ".onConversationUnpinned conversationID:").concat(o3.conversationID, " isPinned:").concat(o3.isPinned)), o3.isPinned && (o3.isPinned = false, n4 = true));
            }), n4 && this._sortConversationListAndEmitEvent();
          }
        } }, { key: "getMessageList", value: function(e4) {
          var t3 = this, n4 = e4.conversationID, o3 = e4.nextReqMessageID, r4 = e4.count, a3 = "".concat(this._className, ".getMessageList"), s3 = this.getLocalConversation(n4), i3 = "";
          if (s3 && s3.groupProfile && (i3 = s3.groupProfile.type), yd(i3))
            return wl.log("".concat(a3, " not available in avchatroom. conversationID:").concat(n4)), Ov({ messageList: [], nextReqMessageID: "", isCompleted: true });
          (Zl(r4) || r4 > 15) && (r4 = 15), this._isFirstGetTopicMessageWithUnJoined(n4, o3) && this.removeConversationMessageCache(n4);
          var c3 = this._computeRemainingCount({ conversationID: n4, nextReqMessageID: o3 }), u3 = this._completedMap.has(n4);
          if (wl.log("".concat(a3, " conversationID:").concat(n4, " nextReqMessageID:").concat(o3) + " remainingCount:".concat(c3, " count:").concat(r4, " isCompleted:").concat(u3)), this._needGetHistory({ conversationID: n4, remainingCount: c3, count: r4 }))
            return this.getHistoryMessages({ conversationID: n4, nextReqMessageID: o3, count: 20 }).then(function(e5) {
              var o4 = e5.nextReqID, r5 = e5.storedMessageList, s4 = t3._completedMap.has(n4), i4 = r5;
              c3 > 0 && (i4 = t3._messageListHandler.getLocalMessageList(n4).slice(0, r5.length + c3));
              var u4 = { nextReqMessageID: s4 ? "" : o4, messageList: i4, isCompleted: s4 };
              return wl.log("".concat(a3, " ret.nextReqMessageID:").concat(u4.nextReqMessageID, " ret.isCompleted:").concat(u4.isCompleted, " ret.length:").concat(i4.length)), yv(u4);
            });
          this.modifyMessageList(n4);
          var l3 = this._getMessageListFromMemory({ conversationID: n4, nextReqMessageID: o3, count: r4 });
          return Ov(l3);
        } }, { key: "_getMessageListFromMemory", value: function(e4) {
          var t3 = e4.conversationID, n4 = e4.nextReqMessageID, o3 = e4.count, r4 = "".concat(this._className, "._getMessageListFromMemory"), a3 = this._messageListHandler.getLocalMessageList(t3), s3 = a3.length, i3 = 0, c3 = { isCompleted: false, nextReqMessageID: "", messageList: [] };
          return n4 ? (i3 = a3.findIndex(function(e5) {
            return e5.ID === n4;
          })) > o3 ? (c3.messageList = a3.slice(i3 - o3, i3), c3.nextReqMessageID = a3[i3 - o3].ID) : (c3.messageList = a3.slice(0, i3), c3.isCompleted = true) : s3 > o3 ? (i3 = s3 - o3, c3.messageList = a3.slice(i3, s3), c3.nextReqMessageID = a3[i3].ID) : (c3.messageList = a3.slice(0, s3), c3.isCompleted = true), wl.log("".concat(r4, " conversationID:").concat(t3) + " ret.nextReqMessageID:".concat(c3.nextReqMessageID, " ret.isCompleted:").concat(c3.isCompleted, " ret.length:").concat(c3.messageList.length)), c3;
        } }, { key: "getMessageListHopping", value: function(e4) {
          var t3 = "".concat(this._className, ".getMessageListHopping"), n4 = e4.conversationID, o3 = e4.sequence, r4 = e4.time, a3 = e4.count, s3 = e4.direction, i3 = void 0 === s3 ? 0 : s3;
          (Zl(a3) || a3 > 15) && (a3 = 15);
          var c3 = this._messageListHandler.getLocalMessageListHopping({ conversationID: n4, sequence: o3, time: r4, count: a3, direction: i3 });
          if (!qd(c3)) {
            var u3 = c3.length;
            if (u3 === a3 || n4.startsWith(gr.CONV_GROUP) && 1 === c3[0].sequence)
              return wl.log("".concat(t3, ". conversationID:").concat(n4, " message from memory:").concat(c3.length)), Ov({ messageList: c3 });
            var l3 = a3 - u3 + 1, d3 = 1 === i3 ? c3.pop() : c3.shift();
            return this._getRoamingMessagesHopping({ conversationID: n4, sequence: d3.sequence, time: d3.time, count: l3, direction: i3 }).then(function(e5) {
              var o4, r5;
              (wl.log("".concat(t3, ". conversationID:").concat(n4, " message from memory:").concat(c3.length, ", message from remote:").concat(e5.length)), 1 === i3) ? (o4 = c3).push.apply(o4, v2(e5)) : (r5 = c3).unshift.apply(r5, v2(e5));
              if (n4.startsWith(gr.CONV_C2C)) {
                var a4 = [];
                c3.forEach(function(e6) {
                  a4.push([e6.ID, e6]);
                }), c3 = v2(new Map(a4).values());
              }
              return yv({ messageList: c3 });
            });
          }
          return this._getRoamingMessagesHopping({ conversationID: n4, sequence: o3, time: r4, count: a3, direction: i3 }).then(function(e5) {
            return wl.log("".concat(t3, ". conversationID:").concat(n4, " message from remote:").concat(e5.length)), yv({ messageList: e5 });
          });
        } }, { key: "_getRoamingMessagesHopping", value: function(e4) {
          var t3 = e4.conversationID, n4 = e4.sequence, o3 = e4.time, r4 = e4.count, a3 = e4.direction;
          if (t3.startsWith(gr.CONV_C2C)) {
            var s3 = this.getModule(tg), i3 = t3.replace(gr.CONV_C2C, "");
            return s3.getRoamingMessagesHopping({ peerAccount: i3, time: o3, count: r4, direction: a3 });
          }
          if (t3.startsWith(gr.CONV_GROUP)) {
            var c3 = this.getModule(ng), u3 = t3.replace(gr.CONV_GROUP, ""), l3 = n4;
            return 1 === a3 && (l3 = n4 + r4 - 1), c3.getRoamingMessagesHopping({ groupID: u3, sequence: l3, count: r4 }).then(function(e5) {
              var t4 = e5.findIndex(function(e6) {
                return e6.sequence === n4;
              });
              return 1 === a3 ? -1 === t4 ? [] : e5.slice(t4) : e5;
            });
          }
        } }, { key: "_computeRemainingCount", value: function(e4) {
          var t3 = e4.conversationID, n4 = e4.nextReqMessageID, o3 = this._messageListHandler.getLocalMessageList(t3), r4 = o3.length;
          if (!n4)
            return r4;
          var a3 = 0;
          return Td(t3) ? a3 = o3.findIndex(function(e5) {
            return e5.ID === n4;
          }) : Sd(t3) && (a3 = -1 !== n4.indexOf("-") ? o3.findIndex(function(e5) {
            return e5.ID === n4;
          }) : o3.findIndex(function(e5) {
            return e5.sequence === n4;
          })), -1 === a3 && (a3 = 0), a3;
        } }, { key: "_getMessageListSize", value: function(e4) {
          return this._messageListHandler.getLocalMessageList(e4).length;
        } }, { key: "_needGetHistory", value: function(e4) {
          var t3 = e4.conversationID, n4 = e4.remainingCount, o3 = e4.count, r4 = this.getLocalConversation(t3), a3 = "";
          return r4 && r4.groupProfile && (a3 = r4.groupProfile.type), !Cd(t3) && !yd(a3) && (n4 <= o3 && !this._completedMap.has(t3));
        } }, { key: "getHistoryMessages", value: function(e4) {
          var t3 = e4.conversationID, n4 = e4.count;
          if (t3 === gr.CONV_SYSTEM)
            return Ov();
          var o3 = 15;
          n4 > 20 && (o3 = 20);
          var r4 = null;
          if (Td(t3)) {
            var a3 = this._roamingMessageKeyAndTimeMap.has(t3);
            return (r4 = this.getModule(tg)) ? r4.getRoamingMessage({ conversationID: t3, peerAccount: t3.replace(gr.CONV_C2C, ""), count: o3, lastMessageTime: a3 ? this._roamingMessageKeyAndTimeMap.get(t3).lastMessageTime : 0, messageKey: a3 ? this._roamingMessageKeyAndTimeMap.get(t3).messageKey : "" }) : Rv({ code: Zh.CANNOT_FIND_MODULE, message: e_.CANNOT_FIND_MODULE });
          }
          if (Sd(t3)) {
            if (!(r4 = this.getModule(ng)))
              return Rv({ code: Zh.CANNOT_FIND_MODULE, message: e_.CANNOT_FIND_MODULE });
            var s3 = null;
            this._conversationMap.has(t3) && (s3 = this._conversationMap.get(t3).lastMessage);
            var i3 = 0;
            s3 && (i3 = s3.lastSequence);
            var c3 = this._roamingMessageSequenceMap.get(t3);
            return r4.getRoamingMessage({ conversationID: t3, groupID: t3.replace(gr.CONV_GROUP, ""), count: o3, sequence: c3 || i3 });
          }
          return Ov();
        } }, { key: "patchConversationLastMessage", value: function(e4) {
          var t3 = this.getLocalConversation(e4);
          if (t3) {
            var n4 = t3.lastMessage, o3 = n4.messageForShow, r4 = n4.payload;
            if (qd(o3) || qd(r4)) {
              var a3 = this._messageListHandler.getLocalMessageList(e4);
              if (0 === a3.length)
                return;
              var s3 = a3[a3.length - 1];
              wl.log("".concat(this._className, ".patchConversationLastMessage conversationID:").concat(e4, " payload:"), s3.payload), t3.updateLastMessage(s3);
            }
          }
        } }, { key: "onRoamingMessage", value: function() {
          var e4 = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [], n4 = arguments.length > 1 ? arguments[1] : void 0, o3 = !(arguments.length > 2 && void 0 !== arguments[2]) || arguments[2], r4 = n4.startsWith(gr.CONV_C2C) ? gr.CONV_C2C : gr.CONV_GROUP, a3 = null, s3 = [], i3 = [], c3 = 0, u3 = e4.length, l3 = null, d3 = r4 === gr.CONV_GROUP, p3 = this.getModule(dg), g3 = function() {
            c3 = d3 ? e4.length - 1 : 0, u3 = d3 ? 0 : e4.length;
          }, h3 = function() {
            d3 ? --c3 : ++c3;
          }, _3 = function() {
            return d3 ? c3 >= u3 : c3 < u3;
          };
          for (g3(); _3(); h3())
            if (d3 && 1 === e4[c3].sequence && o3 && this.setCompleted(n4), 1 !== e4[c3].isPlaceMessage)
              if ((a3 = new Mv(e4[c3])).to = e4[c3].to, r4 !== gr.CONV_GROUP || Zl(e4[c3].topicID) || (a3.to = e4[c3].topicID), a3.isSystemMessage = !!e4[c3].isSystemMessage, a3.conversationType = r4, 4 === e4[c3].event ? l3 = { type: gr.MSG_GRP_TIP, content: t2(t2({}, e4[c3].elements), {}, { groupProfile: e4[c3].groupProfile }) } : (e4[c3].elements = p3.parseElements(e4[c3].elements, e4[c3].from), l3 = e4[c3].elements), d3 || a3.setNickAndAvatar({ nick: e4[c3].nick, avatar: e4[c3].avatar }), qd(l3)) {
                var f3 = new __(f_.EMPTY_MESSAGE_BODY);
                f3.setMessage("from:".concat(a3.from, " to:").concat(a3.to, " sequence:").concat(a3.sequence, " event:").concat(e4[c3].event)), f3.setNetworkType(this.getNetworkType()).setLevel("warning").end();
              } else
                a3.setElement(l3), a3.reInitialize(this.getMyUserID()), s3.push(a3);
          return g3 = h3 = _3 = null, o3 ? (this._messageListHandler.unshift(s3, i3), s3 = null, i3) : (i3 = null, s3);
        } }, { key: "findMessage", value: function(e4) {
          return this._messageListHandler.findMessage(e4);
        } }, { key: "_isFirstGetTopicMessageWithUnJoined", value: function(e4, t3) {
          var n4 = false;
          if (!t3 && e4.startsWith(gr.CONV_GROUP)) {
            var o3 = e4.replace(gr.CONV_GROUP, "");
            if (Ed(o3)) {
              var r4 = wd(o3);
              this.getModule(ng).hasLocalGroup(r4) || (n4 = true);
            }
          }
          return n4;
        } }, { key: "removeConversationMessageCache", value: function(e4) {
          var t3 = this;
          this._messageListHandler.getConversationIDList(e4).forEach(function(e5) {
            t3._messageListHandler.removeByConversationID(e5), t3._completedMap.delete(e5);
          });
        } }, { key: "setMessageRead", value: function(e4) {
          var t3 = e4.conversationID, n4 = this.getLocalConversation(t3);
          if (wl.log("".concat(this._className, ".setMessageRead conversationID:").concat(t3, " unreadCount:").concat(n4 ? n4.unreadCount : 0)), !n4)
            return Ov();
          if (n4.type !== gr.CONV_GROUP && n4.type !== gr.CONV_TOPIC || qd(n4.groupAtInfoList) || this.deleteGroupAtTips(t3), 0 === n4.unreadCount)
            return Ov();
          var o3 = this._messageListHandler.getLocalLastMessage(t3), r4 = n4.lastMessage.lastTime;
          o3 && r4 < o3.time && (r4 = o3.time);
          var a3 = n4.lastMessage.lastSequence;
          if (o3 && a3 < o3.sequence && (a3 = o3.sequence), n4.type === gr.CONV_TOPIC && Zl(o3)) {
            var s3 = this.getModule(ag), i3 = t3.replace(gr.CONV_GROUP, ""), c3 = wd(i3), u3 = s3.getLocalTopic(c3, i3);
            u3 && (a3 = u3.nextMessageSeq - 1);
          }
          var l3 = null;
          switch (n4.type) {
            case gr.CONV_C2C:
              return (l3 = this.getModule(tg)) ? l3.setMessageRead({ conversationID: t3, lastMessageTime: r4 }) : Rv({ code: Zh.CANNOT_FIND_MODULE, message: e_.CANNOT_FIND_MODULE });
            case gr.CONV_GROUP:
            case gr.CONV_TOPIC:
              return (l3 = this.getModule(ng)) ? l3.setMessageRead({ conversationID: t3, lastMessageSeq: a3 }) : Rv({ code: Zh.CANNOT_FIND_MODULE, message: e_.CANNOT_FIND_MODULE });
            case gr.CONV_SYSTEM:
              return n4.unreadCount = 0, this.emitConversationUpdate(true, false), Ov();
            default:
              return Ov();
          }
        } }, { key: "setAllMessageRead", value: function() {
          var e4 = this, t3 = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, n4 = "".concat(this._className, ".setAllMessageRead");
          t3.scope || (t3.scope = gr.READ_ALL_MSG), wl.log("".concat(n4, " options:"), t3);
          var o3 = this._createSetAllMessageReadPack(t3);
          if (0 === o3.readAllC2CMessage && 0 === o3.groupMessageReadInfoList.length)
            return Ov();
          var r4 = new __(f_.SET_ALL_MESSAGE_READ);
          return this.request({ protocolName: lh, requestData: o3 }).then(function(n5) {
            var o4 = n5.data, a3 = e4._handleAllMessageRead(o4);
            return r4.setMessage("scope:".concat(t3.scope, " failureGroups:").concat(JSON.stringify(a3))).setNetworkType(e4.getNetworkType()).end(), Ov();
          }).catch(function(t4) {
            return e4.probeNetwork().then(function(e5) {
              var n5 = m2(e5, 2), o4 = n5[0], a3 = n5[1];
              r4.setError(t4, o4, a3).end();
            }), wl.warn("".concat(n4, " failed. error:"), t4), Rv({ code: t4 && t4.code ? t4.code : Zh.MESSAGE_UNREAD_ALL_FAIL, message: t4 && t4.message ? t4.message : e_.MESSAGE_UNREAD_ALL_FAIL });
          });
        } }, { key: "_getConversationLastMessageSequence", value: function(e4) {
          var t3 = this._messageListHandler.getLocalLastMessage(e4.conversationID), n4 = e4.lastMessage.lastSequence;
          return t3 && n4 < t3.sequence && (n4 = t3.sequence), n4;
        } }, { key: "_getConversationLastMessageTime", value: function(e4) {
          var t3 = this._messageListHandler.getLocalLastMessage(e4.conversationID), n4 = e4.lastMessage.lastTime;
          return t3 && n4 < t3.time && (n4 = t3.time), n4;
        } }, { key: "_createSetAllMessageReadPack", value: function(e4) {
          var t3, n4 = { readAllC2CMessage: 0, groupMessageReadInfoList: [] }, o3 = e4.scope, r4 = S2(this._conversationMap);
          try {
            for (r4.s(); !(t3 = r4.n()).done; ) {
              var a3 = m2(t3.value, 2)[1];
              if (a3.unreadCount > 0) {
                if (a3.type === gr.CONV_C2C && 0 === n4.readAllC2CMessage) {
                  if (o3 === gr.READ_ALL_MSG)
                    n4.readAllC2CMessage = 1;
                  else if (o3 === gr.READ_ALL_C2C_MSG) {
                    n4.readAllC2CMessage = 1;
                    break;
                  }
                } else if (a3.type === gr.CONV_GROUP && (o3 === gr.READ_ALL_GROUP_MSG || o3 === gr.READ_ALL_MSG)) {
                  var s3 = this._getConversationLastMessageSequence(a3);
                  n4.groupMessageReadInfoList.push({ groupID: a3.groupProfile.groupID, messageSequence: s3 });
                }
              }
            }
          } catch (i3) {
            r4.e(i3);
          } finally {
            r4.f();
          }
          return n4;
        } }, { key: "onPushedAllMessageRead", value: function(e4) {
          this._handleAllMessageRead(e4);
        } }, { key: "_handleAllMessageRead", value: function(e4) {
          var t3 = e4.groupMessageReadInfoList, n4 = e4.readAllC2CMessage, o3 = this._parseGroupReadInfo(t3);
          return this._updateAllConversationUnreadCount({ readAllC2CMessage: n4 }) >= 1 && this.emitConversationUpdate(true, false), o3;
        } }, { key: "_parseGroupReadInfo", value: function(e4) {
          var t3 = [];
          if (e4 && e4.length)
            for (var n4 = 0, o3 = e4.length; n4 < o3; n4++) {
              var r4 = e4[n4], a3 = r4.groupID, s3 = r4.sequence, i3 = r4.retCode, c3 = r4.lastMessageSeq;
              Zl(i3) ? this._remoteGroupReadSequenceMap.set(a3, c3) : (this._remoteGroupReadSequenceMap.set(a3, s3), 0 !== i3 && t3.push("".concat(a3, "-").concat(s3, "-").concat(i3)));
            }
          return t3;
        } }, { key: "_updateAllConversationUnreadCount", value: function(e4) {
          var t3, n4 = e4.readAllC2CMessage, o3 = 0, r4 = S2(this._conversationMap);
          try {
            for (r4.s(); !(t3 = r4.n()).done; ) {
              var a3 = m2(t3.value, 2), s3 = a3[0], i3 = a3[1];
              if (i3.unreadCount >= 1) {
                if (1 === n4 && i3.type === gr.CONV_C2C) {
                  var c3 = this._getConversationLastMessageTime(i3);
                  this.updateIsReadAfterReadReport({ conversationID: s3, lastMessageTime: c3 });
                } else if (i3.type === gr.CONV_GROUP) {
                  var u3 = s3.replace(gr.CONV_GROUP, "");
                  if (this._remoteGroupReadSequenceMap.has(u3)) {
                    var l3 = this._remoteGroupReadSequenceMap.get(u3), d3 = this._getConversationLastMessageSequence(i3);
                    this.updateIsReadAfterReadReport({ conversationID: s3, remoteReadSequence: l3 }), d3 >= l3 && this._remoteGroupReadSequenceMap.delete(u3);
                  }
                }
                this.updateUnreadCount(s3, false) && (o3 += 1);
              }
            }
          } catch (p3) {
            r4.e(p3);
          } finally {
            r4.f();
          }
          return o3;
        } }, { key: "isRemoteRead", value: function(e4) {
          var t3 = e4.conversationID, n4 = e4.sequence, o3 = t3.replace(gr.CONV_GROUP, ""), r4 = false;
          if (this._remoteGroupReadSequenceMap.has(o3)) {
            var a3 = this._remoteGroupReadSequenceMap.get(o3);
            n4 <= a3 && (r4 = true, wl.log("".concat(this._className, ".isRemoteRead conversationID:").concat(t3, " messageSequence:").concat(n4, " remoteReadSequence:").concat(a3))), n4 >= a3 + 10 && this._remoteGroupReadSequenceMap.delete(o3);
          }
          return r4;
        } }, { key: "updateIsReadAfterReadReport", value: function(e4) {
          var t3 = e4.conversationID, n4 = e4.lastMessageSeq, o3 = e4.lastMessageTime, r4 = this._messageListHandler.getLocalMessageList(t3);
          if (0 !== r4.length) {
            for (var a3, s3 = r4.length - 1; s3 >= 0; s3--)
              if (a3 = r4[s3], !(o3 && a3.time > o3 || n4 && a3.sequence > n4)) {
                if ("in" === a3.flow && a3.isRead)
                  break;
                a3.setIsRead(true);
              }
          }
        } }, { key: "updateUnreadCount", value: function(e4) {
          var t3 = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1], n4 = false, o3 = this.getLocalConversation(e4), r4 = this._messageListHandler.getLocalMessageList(e4);
          if (o3) {
            var a3 = o3.unreadCount, s3 = r4.filter(function(e5) {
              return !e5.isRead && !e5._onlineOnlyFlag && !e5.isDeleted;
            }).length;
            if (a3 !== s3 && (o3.unreadCount = s3, n4 = true, wl.log("".concat(this._className, ".updateUnreadCount from ").concat(a3, " to ").concat(s3, ", conversationID:").concat(e4)), true === t3 && this.emitConversationUpdate(true, false)), n4 && o3.type === gr.CONV_TOPIC) {
              var i3 = o3.unreadCount, c3 = o3.groupAtInfoList, u3 = this.getModule(ag), l3 = e4.replace(gr.CONV_GROUP, "");
              u3.onConversationProxy({ topicID: l3, unreadCount: i3, groupAtInfoList: c3 });
            }
            return n4;
          }
        } }, { key: "updateReadReceiptInfo", value: function(e4) {
          var t3 = this, n4 = e4.userID, o3 = void 0 === n4 ? void 0 : n4, r4 = e4.groupID, a3 = void 0 === r4 ? void 0 : r4, s3 = e4.readReceiptList;
          if (!qd(s3)) {
            var i3 = [];
            if (Zl(o3)) {
              if (!Zl(a3)) {
                var c3 = "".concat(gr.CONV_GROUP).concat(a3);
                s3.forEach(function(e5) {
                  var n5 = e5.tinyID, o4 = e5.clientTime, r5 = e5.random, s4 = e5.readCount, u4 = e5.unreadCount, l3 = "".concat(n5, "-").concat(o4, "-").concat(r5), d3 = t3._messageListHandler.getLocalMessage(c3, l3), p3 = { groupID: a3, messageID: l3, readCount: 0, unreadCount: 0 };
                  d3 && ($l(s4) && (d3.readReceiptInfo.readCount = s4, p3.readCount = s4), $l(u4) && (d3.readReceiptInfo.unreadCount = u4, p3.unreadCount = u4), i3.push(p3));
                });
              }
            } else {
              var u3 = "".concat(gr.CONV_C2C).concat(o3);
              s3.forEach(function(e5) {
                var n5 = e5.tinyID, r5 = e5.clientTime, a4 = e5.random, s4 = "".concat(n5, "-").concat(r5, "-").concat(a4), c4 = t3._messageListHandler.getLocalMessage(u3, s4);
                if (c4 && !c4.isPeerRead) {
                  c4.isPeerRead = true;
                  var l3 = { userID: o3, messageID: s4, isPeerRead: true };
                  i3.push(l3);
                }
              });
            }
            i3.length > 0 && this.emitOuterEvent(pr.MESSAGE_READ_RECEIPT_RECEIVED, i3);
          }
        } }, { key: "recomputeGroupUnreadCount", value: function(e4) {
          var t3 = e4.conversationID, n4 = e4.count, o3 = this.getLocalConversation(t3);
          if (o3) {
            var r4 = o3.unreadCount, a3 = r4 - n4;
            a3 < 0 && (a3 = 0), o3.unreadCount = a3, wl.log("".concat(this._className, ".recomputeGroupUnreadCount from ").concat(r4, " to ").concat(a3, ", conversationID:").concat(t3));
          }
        } }, { key: "updateIsRead", value: function(e4) {
          var t3 = this.getLocalConversation(e4), n4 = this.getLocalMessageList(e4);
          if (t3 && 0 !== n4.length && !Cd(t3.type)) {
            for (var o3 = [], r4 = 0, a3 = n4.length; r4 < a3; r4++)
              "in" !== n4[r4].flow ? "out" !== n4[r4].flow || n4[r4].isRead || n4[r4].setIsRead(true) : o3.push(n4[r4]);
            var s3 = 0;
            if (t3.type === gr.CONV_C2C) {
              var i3 = o3.slice(-t3.unreadCount).filter(function(e5) {
                return e5.isRevoked;
              }).length;
              s3 = o3.length - t3.unreadCount - i3;
            } else
              s3 = o3.length - t3.unreadCount;
            for (var c3 = 0; c3 < s3 && !o3[c3].isRead; c3++)
              o3[c3].setIsRead(true);
          }
        } }, { key: "deleteGroupAtTips", value: function(e4) {
          var t3 = this, n4 = "".concat(this._className, ".deleteGroupAtTips");
          wl.log("".concat(n4));
          var o3 = this._conversationMap.get(e4);
          if (!o3)
            return Promise.resolve();
          var r4 = o3.groupAtInfoList;
          if (0 === r4.length)
            return Promise.resolve();
          var a3 = this.getMyUserID();
          return this.request({ protocolName: zg, requestData: { messageListToDelete: r4.map(function(e5) {
            return { from: e5.from, to: a3, messageSeq: e5.__sequence, messageRandom: e5.__random, groupID: Zl(e5.topicID) ? e5.groupID : e5.topicID };
          }) } }).then(function() {
            if (wl.log("".concat(n4, " ok. count:").concat(r4.length)), o3.clearGroupAtInfoList(), e4.startsWith(gr.CONV_GROUP)) {
              var a4 = e4.replace(gr.CONV_GROUP, "");
              if (Ed(a4))
                t3.getModule(ag).onConversationProxy({ topicID: a4, groupAtInfoList: [] });
            }
            return Promise.resolve();
          }).catch(function(e5) {
            return wl.error("".concat(n4, " failed. error:"), e5), Rv(e5);
          });
        } }, { key: "appendToMessageList", value: function(e4) {
          this._messageListHandler.pushIn(e4);
        } }, { key: "setMessageRandom", value: function(e4) {
          this.singlyLinkedList.set(e4.random);
        } }, { key: "deleteMessageRandom", value: function(e4) {
          this.singlyLinkedList.delete(e4.random);
        } }, { key: "pushIntoMessageList", value: function(e4, t3, n4) {
          return !(!this._messageListHandler.pushIn(t3, n4) || this._isMessageFromCurrentInstance(t3) && !n4) && (e4.push(t3), true);
        } }, { key: "_isMessageFromCurrentInstance", value: function(e4) {
          return this.singlyLinkedList.has(e4.random);
        } }, { key: "revoke", value: function(e4, t3, n4) {
          return this._messageListHandler.revoke(e4, t3, n4);
        } }, { key: "getPeerReadTime", value: function(e4) {
          return this._peerReadTimeMap.get(e4);
        } }, { key: "recordPeerReadTime", value: function(e4, t3) {
          this._peerReadTimeMap.has(e4) ? this._peerReadTimeMap.get(e4) < t3 && this._peerReadTimeMap.set(e4, t3) : this._peerReadTimeMap.set(e4, t3);
        } }, { key: "updateMessageIsPeerReadProperty", value: function(e4, t3) {
          if (e4.startsWith(gr.CONV_C2C) && t3 > 0) {
            var n4 = this._messageListHandler.updateMessageIsPeerReadProperty(e4, t3);
            if (n4.length > 0 && this.emitOuterEvent(pr.MESSAGE_READ_BY_PEER, n4), this._conversationMap.has(e4)) {
              var o3 = this._conversationMap.get(e4).lastMessage;
              qd(o3) || o3.fromAccount === this.getMyUserID() && o3.lastTime <= t3 && !o3.isPeerRead && (o3.isPeerRead = true, this.emitConversationUpdate(true, false));
            }
          }
        } }, { key: "updateMessageIsModifiedProperty", value: function(e4) {
          this._messageListHandler.updateMessageIsModifiedProperty(e4);
        } }, { key: "setCompleted", value: function(e4) {
          wl.log("".concat(this._className, ".setCompleted. conversationID:").concat(e4)), this._completedMap.set(e4, true);
        } }, { key: "updateRoamingMessageKeyAndTime", value: function(e4, t3, n4) {
          this._roamingMessageKeyAndTimeMap.set(e4, { messageKey: t3, lastMessageTime: n4 });
        } }, { key: "updateRoamingMessageSequence", value: function(e4, t3) {
          this._roamingMessageSequenceMap.set(e4, t3);
        } }, { key: "getConversationList", value: function(e4) {
          var t3 = this, n4 = "".concat(this._className, ".getConversationList"), o3 = "pagingStatus:".concat(this._pagingStatus, ", local conversation count:").concat(this._conversationMap.size, ", options:").concat(e4);
          if (wl.log("".concat(n4, ". ").concat(o3)), this._pagingStatus === bp.REJECTED) {
            var r4 = new __(f_.GET_CONVERSATION_LIST);
            return r4.setMessage(o3), this._syncConversationList().then(function() {
              r4.setNetworkType(t3.getNetworkType()).end();
              var n5 = t3._getConversationList(e4);
              return yv({ conversationList: n5 });
            }).catch(function(e5) {
              return t3.probeNetwork().then(function(t4) {
                var n5 = m2(t4, 2), o4 = n5[0], a4 = n5[1];
                r4.setError(e5, o4, a4).end();
              }), wl.error("".concat(n4, " failed. error:"), e5), Rv(e5);
            });
          }
          if (0 === this._conversationMap.size) {
            var a3 = new __(f_.GET_CONVERSATION_LIST);
            return a3.setMessage(o3), this._syncConversationList().then(function() {
              a3.setNetworkType(t3.getNetworkType()).end();
              var n5 = t3._getConversationList(e4);
              return yv({ conversationList: n5 });
            }).catch(function(e5) {
              return t3.probeNetwork().then(function(t4) {
                var n5 = m2(t4, 2), o4 = n5[0], r5 = n5[1];
                a3.setError(e5, o4, r5).end();
              }), wl.error("".concat(n4, " failed. error:"), e5), Rv(e5);
            });
          }
          var s3 = this._getConversationList(e4);
          return wl.log("".concat(n4, ". returned conversation count:").concat(s3.length)), Ov({ conversationList: s3 });
        } }, { key: "_getConversationList", value: function(e4) {
          var t3 = this;
          if (Zl(e4))
            return this.getLocalConversationList();
          if (Ql(e4)) {
            var n4 = [];
            return e4.forEach(function(e5) {
              if (t3._conversationMap.has(e5)) {
                var o3 = t3.getLocalConversation(e5);
                n4.push(o3);
              }
            }), n4;
          }
        } }, { key: "_handleC2CPeerReadTime", value: function() {
          var e4, t3 = S2(this._conversationMap);
          try {
            for (t3.s(); !(e4 = t3.n()).done; ) {
              var n4 = m2(e4.value, 2), o3 = n4[0], r4 = n4[1];
              r4.type === gr.CONV_C2C && (wl.debug("".concat(this._className, "._handleC2CPeerReadTime conversationID:").concat(o3, " peerReadTime:").concat(r4.peerReadTime)), this.recordPeerReadTime(o3, r4.peerReadTime));
            }
          } catch (a3) {
            t3.e(a3);
          } finally {
            t3.f();
          }
        } }, { key: "getConversationProfile", value: function(e4) {
          var t3, n4 = this;
          if ((t3 = this._conversationMap.has(e4) ? this._conversationMap.get(e4) : new uM({ conversationID: e4, type: e4.slice(0, 3) === gr.CONV_C2C ? gr.CONV_C2C : gr.CONV_GROUP }))._isInfoCompleted || t3.type === gr.CONV_SYSTEM)
            return Ov({ conversation: t3 });
          var o3 = new __(f_.GET_CONVERSATION_PROFILE), r4 = "".concat(this._className, ".getConversationProfile");
          return wl.log("".concat(r4, ". conversationID:").concat(e4, " remark:").concat(t3.remark, " lastMessage:"), t3.lastMessage), this._updateUserOrGroupProfileCompletely(t3).then(function(a3) {
            o3.setNetworkType(n4.getNetworkType()).setMessage("conversationID:".concat(e4, " unreadCount:").concat(a3.data.conversation.unreadCount)).end();
            var s3 = n4.getModule(og);
            if (s3 && t3.type === gr.CONV_C2C) {
              var i3 = e4.replace(gr.CONV_C2C, "");
              if (s3.isMyFriend(i3)) {
                var c3 = s3.getFriendRemark(i3);
                t3.remark !== c3 && (t3.remark = c3, wl.log("".concat(r4, ". conversationID:").concat(e4, " patch remark:").concat(t3.remark)));
              }
            }
            return wl.log("".concat(r4, " ok. conversationID:").concat(e4)), a3;
          }).catch(function(t4) {
            return n4.probeNetwork().then(function(n5) {
              var r5 = m2(n5, 2), a3 = r5[0], s3 = r5[1];
              o3.setError(t4, a3, s3).setMessage("conversationID:".concat(e4)).end();
            }), wl.error("".concat(r4, " failed. error:"), t4), Rv(t4);
          });
        } }, { key: "_updateUserOrGroupProfileCompletely", value: function(e4) {
          var t3 = this;
          return e4.type === gr.CONV_C2C ? this.getModule(eg).getUserProfile({ userIDList: [e4.toAccount] }).then(function(n4) {
            var o3 = n4.data;
            return 0 === o3.length ? Rv(new Av({ code: Zh.USER_OR_GROUP_NOT_FOUND, message: e_.USER_OR_GROUP_NOT_FOUND })) : (e4.userProfile = o3[0], e4._isInfoCompleted = true, t3._unshiftConversation(e4), Ov({ conversation: e4 }));
          }) : this.getModule(ng).getGroupProfile({ groupID: e4.toAccount }).then(function(n4) {
            return e4.groupProfile = n4.data.group, e4._isInfoCompleted = true, t3._unshiftConversation(e4), Ov({ conversation: e4 });
          });
        } }, { key: "_unshiftConversation", value: function(e4) {
          e4 instanceof uM && !this._conversationMap.has(e4.conversationID) && (this._conversationMap = new Map([[e4.conversationID, e4]].concat(v2(this._conversationMap))), this._setStorageConversationList(), this.emitConversationUpdate(true, false));
        } }, { key: "_onProfileUpdated", value: function(e4) {
          var t3 = this;
          e4.data.forEach(function(e5) {
            var n4 = e5.userID;
            if (n4 === t3.getMyUserID())
              t3._onMyProfileModified({ latestNick: e5.nick, latestAvatar: e5.avatar });
            else {
              var o3 = t3._conversationMap.get("".concat(gr.CONV_C2C).concat(n4));
              o3 && (o3.userProfile = e5);
            }
          });
        } }, { key: "deleteConversation", value: function(e4) {
          var t3 = this, n4 = { fromAccount: this.getMyUserID(), toAccount: void 0, type: void 0 };
          if (!this._conversationMap.has(e4)) {
            var o3 = new Av({ code: Zh.CONVERSATION_NOT_FOUND, message: e_.CONVERSATION_NOT_FOUND });
            return Rv(o3);
          }
          switch (this._conversationMap.get(e4).type) {
            case gr.CONV_C2C:
              n4.type = 1, n4.toAccount = e4.replace(gr.CONV_C2C, "");
              break;
            case gr.CONV_GROUP:
              n4.type = 2, n4.toGroupID = e4.replace(gr.CONV_GROUP, "");
              break;
            case gr.CONV_SYSTEM:
              return this.getModule(ng).deleteGroupSystemNotice({ messageList: this._messageListHandler.getLocalMessageList(e4) }), this.deleteLocalConversation(e4), Ov({ conversationID: e4 });
            default:
              var r4 = new Av({ code: Zh.CONVERSATION_UN_RECORDED_TYPE, message: e_.CONVERSATION_UN_RECORDED_TYPE });
              return Rv(r4);
          }
          var a3 = new __(f_.DELETE_CONVERSATION);
          a3.setMessage("conversationID:".concat(e4));
          var s3 = "".concat(this._className, ".deleteConversation");
          return wl.log("".concat(s3, ". conversationID:").concat(e4)), this.setMessageRead({ conversationID: e4 }).then(function() {
            return t3.request({ protocolName: Yg, requestData: n4 });
          }).then(function() {
            return a3.setNetworkType(t3.getNetworkType()).end(), wl.log("".concat(s3, " ok")), t3.deleteLocalConversation(e4), Ov({ conversationID: e4 });
          }).catch(function(e5) {
            return t3.probeNetwork().then(function(t4) {
              var n5 = m2(t4, 2), o4 = n5[0], r5 = n5[1];
              a3.setError(e5, o4, r5).end();
            }), wl.error("".concat(s3, " failed. error:"), e5), Rv(e5);
          });
        } }, { key: "pinConversation", value: function(e4) {
          var t3 = this, n4 = e4.conversationID, o3 = e4.isPinned;
          if (!this._conversationMap.has(n4))
            return Rv({ code: Zh.CONVERSATION_NOT_FOUND, message: e_.CONVERSATION_NOT_FOUND });
          var r4 = this.getLocalConversation(n4);
          if (r4.isPinned === o3)
            return Ov({ conversationID: n4 });
          var a3 = new __(f_.PIN_CONVERSATION);
          a3.setMessage("conversationID:".concat(n4, " isPinned:").concat(o3));
          var s3 = "".concat(this._className, ".pinConversation");
          wl.log("".concat(s3, ". conversationID:").concat(n4, " isPinned:").concat(o3));
          var i3 = null;
          return Td(n4) ? i3 = { type: 1, toAccount: n4.replace(gr.CONV_C2C, "") } : Sd(n4) && (i3 = { type: 2, groupID: n4.replace(gr.CONV_GROUP, "") }), this.request({ protocolName: $g, requestData: { fromAccount: this.getMyUserID(), operationType: true === o3 ? 1 : 2, itemList: [i3] } }).then(function() {
            return a3.setNetworkType(t3.getNetworkType()).end(), wl.log("".concat(s3, " ok")), r4.isPinned !== o3 && (r4.isPinned = o3, t3._sortConversationListAndEmitEvent()), yv({ conversationID: n4 });
          }).catch(function(e5) {
            return t3.probeNetwork().then(function(t4) {
              var n5 = m2(t4, 2), o4 = n5[0], r5 = n5[1];
              a3.setError(e5, o4, r5).end();
            }), wl.error("".concat(s3, " failed. error:"), e5), Rv(e5);
          });
        } }, { key: "setMessageRemindType", value: function(e4) {
          return this._messageRemindHandler.set(e4);
        } }, { key: "patchMessageRemindType", value: function(e4) {
          var t3 = e4.ID, n4 = e4.isC2CConversation, o3 = e4.messageRemindType, r4 = false, a3 = this.getLocalConversation(n4 ? "".concat(gr.CONV_C2C).concat(t3) : "".concat(gr.CONV_GROUP).concat(t3));
          return a3 && a3.messageRemindType !== o3 && (a3.messageRemindType = o3, r4 = true), r4;
        } }, { key: "onC2CMessageRemindTypeSynced", value: function(e4) {
          var t3 = this;
          wl.debug("".concat(this._className, ".onC2CMessageRemindTypeSynced options:"), e4), e4.dataList.forEach(function(e5) {
            if (!qd(e5.muteNotificationsSync)) {
              var n4, o3 = e5.muteNotificationsSync, r4 = o3.to, a3 = o3.updateSequence, s3 = o3.muteFlag;
              t3._messageRemindHandler.setUpdateSequence(a3), 0 === s3 ? n4 = gr.MSG_REMIND_ACPT_AND_NOTE : 1 === s3 ? n4 = gr.MSG_REMIND_DISCARD : 2 === s3 && (n4 = gr.MSG_REMIND_ACPT_NOT_NOTE);
              var i3 = 0;
              t3.patchMessageRemindType({ ID: r4, isC2CConversation: true, messageRemindType: n4 }) && (i3 += 1), wl.log("".concat(t3._className, ".onC2CMessageRemindTypeSynced updateCount:").concat(i3)), i3 >= 1 && t3.emitConversationUpdate(true, false);
            }
          });
        } }, { key: "deleteLocalConversation", value: function(e4) {
          var t3 = this._conversationMap.has(e4);
          wl.log("".concat(this._className, ".deleteLocalConversation conversationID:").concat(e4, " has:").concat(t3)), t3 && (this._conversationMap.delete(e4), this._roamingMessageKeyAndTimeMap.has(e4) && this._roamingMessageKeyAndTimeMap.delete(e4), this._roamingMessageSequenceMap.has(e4) && this._roamingMessageSequenceMap.delete(e4), this._setStorageConversationList(), this._messageListHandler.removeByConversationID(e4), this._completedMap.delete(e4), this.emitConversationUpdate(true, false));
        } }, { key: "isMessageSentByCurrentInstance", value: function(e4) {
          return !(!this._messageListHandler.hasLocalMessage(e4.conversationID, e4.ID) && !this.singlyLinkedList.has(e4.random));
        } }, { key: "modifyMessageList", value: function(e4) {
          if (e4.startsWith(gr.CONV_C2C) && this._conversationMap.has(e4)) {
            var t3 = this._conversationMap.get(e4), n4 = Date.now();
            this._messageListHandler.modifyMessageSentByPeer({ conversationID: e4, latestNick: t3.userProfile.nick, latestAvatar: t3.userProfile.avatar });
            var o3 = this.getModule(eg).getNickAndAvatarByUserID(this.getMyUserID());
            this._messageListHandler.modifyMessageSentByMe({ conversationID: e4, latestNick: o3.nick, latestAvatar: o3.avatar }), wl.log("".concat(this._className, ".modifyMessageList conversationID:").concat(e4, " cost ").concat(Date.now() - n4, " ms"));
          }
        } }, { key: "updateUserProfileSpecifiedKey", value: function(e4) {
          wl.log("".concat(this._className, ".updateUserProfileSpecifiedKey options:"), e4);
          var t3 = e4.conversationID, n4 = e4.nick, o3 = e4.avatar;
          if (this._conversationMap.has(t3)) {
            var r4 = this._conversationMap.get(t3).userProfile;
            zl(n4) && r4.nick !== n4 && (r4.nick = n4), zl(o3) && r4.avatar !== o3 && (r4.avatar = o3), this.emitConversationUpdate(true, false);
          }
        } }, { key: "_onMyProfileModified", value: function(e4) {
          var n4 = this, o3 = this.getLocalConversationList(), r4 = Date.now();
          o3.forEach(function(o4) {
            n4.modifyMessageSentByMe(t2({ conversationID: o4.conversationID }, e4));
          }), wl.log("".concat(this._className, "._onMyProfileModified. modify all messages sent by me, cost ").concat(Date.now() - r4, " ms"));
        } }, { key: "modifyMessageSentByMe", value: function(e4) {
          this._messageListHandler.modifyMessageSentByMe(e4);
        } }, { key: "getLatestMessageSentByMe", value: function(e4) {
          return this._messageListHandler.getLatestMessageSentByMe(e4);
        } }, { key: "modifyMessageSentByPeer", value: function(e4) {
          this._messageListHandler.modifyMessageSentByPeer(e4);
        } }, { key: "getLatestMessageSentByPeer", value: function(e4) {
          return this._messageListHandler.getLatestMessageSentByPeer(e4);
        } }, { key: "pushIntoNoticeResult", value: function(e4, t3) {
          return !(!this._messageListHandler.pushIn(t3) || this.singlyLinkedList.has(t3.random)) && (e4.push(t3), true);
        } }, { key: "getGroupLocalLastMessageSequence", value: function(e4) {
          return this._messageListHandler.getGroupLocalLastMessageSequence(e4);
        } }, { key: "checkAndPatchRemark", value: function() {
          var e4 = Promise.resolve();
          if (0 === this._conversationMap.size)
            return e4;
          var t3 = this.getModule(og);
          if (!t3)
            return e4;
          var n4 = v2(this._conversationMap.values()).filter(function(e5) {
            return e5.type === gr.CONV_C2C;
          });
          if (0 === n4.length)
            return e4;
          var o3 = 0;
          return n4.forEach(function(e5) {
            var n5 = e5.conversationID.replace(gr.CONV_C2C, "");
            if (t3.isMyFriend(n5)) {
              var r4 = t3.getFriendRemark(n5);
              e5.remark !== r4 && (e5.remark = r4, o3 += 1);
            }
          }), wl.log("".concat(this._className, ".checkAndPatchRemark. c2c conversation count:").concat(n4.length, ", patched count:").concat(o3)), e4;
        } }, { key: "updateTopicConversation", value: function(e4) {
          this._updateLocalConversationList({ conversationOptionsList: e4, isFromGetConversations: true });
        } }, { key: "sendReadReceipt", value: function(e4) {
          var t3 = e4[0], n4 = null;
          return t3.conversationType === gr.CONV_C2C ? n4 = this._moduleManager.getModule(tg) : t3.conversationType === gr.CONV_GROUP && (n4 = this._moduleManager.getModule(ng)), n4 ? n4.sendReadReceipt(e4) : Rv({ code: Zh.CANNOT_FIND_MODULE, message: e_.CANNOT_FIND_MODULE });
        } }, { key: "getReadReceiptList", value: function(e4) {
          var t3 = e4[0], n4 = null;
          return t3.conversationType === gr.CONV_C2C ? n4 = this._moduleManager.getModule(tg) : t3.conversationType === gr.CONV_GROUP && (n4 = this._moduleManager.getModule(ng)), n4 ? n4.getReadReceiptList(e4) : Rv({ code: Zh.CANNOT_FIND_MODULE, message: e_.CANNOT_FIND_MODULE });
        } }, { key: "reset", value: function() {
          wl.log("".concat(this._className, ".reset")), this._pagingStatus = bp.NOT_START, this._messageListHandler.reset(), this._messageRemindHandler.reset(), this._roamingMessageKeyAndTimeMap.clear(), this._roamingMessageSequenceMap.clear(), this.singlyLinkedList.reset(), this._peerReadTimeMap.clear(), this._completedMap.clear(), this._conversationMap.clear(), this._pagingTimeStamp = 0, this._pagingStartIndex = 0, this._pagingPinnedTimeStamp = 0, this._pagingPinnedStartIndex = 0, this._remoteGroupReadSequenceMap.clear(), this.resetReady();
        } }]), r3;
      }(Tg), pM = function() {
        function e3(t3) {
          o2(this, e3), this._groupModule = t3, this._className = "GroupTipsHandler", this._cachedGroupTipsMap = /* @__PURE__ */ new Map(), this._checkCountMap = /* @__PURE__ */ new Map(), this.MAX_CHECK_COUNT = 4, this._getTopicPendingMap = /* @__PURE__ */ new Map();
        }
        return a2(e3, [{ key: "onCheckTimer", value: function(e4) {
          e4 % 1 == 0 && this._cachedGroupTipsMap.size > 0 && this._checkCachedGroupTips();
        } }, { key: "_checkCachedGroupTips", value: function() {
          var e4 = this;
          this._cachedGroupTipsMap.forEach(function(t3, n3) {
            var o3 = e4._checkCountMap.get(n3), r3 = e4._groupModule.hasLocalGroup(n3);
            wl.log("".concat(e4._className, "._checkCachedGroupTips groupID:").concat(n3, " hasLocalGroup:").concat(r3, " checkCount:").concat(o3)), r3 ? (e4._notifyCachedGroupTips(n3), e4._checkCountMap.delete(n3), e4._groupModule.deleteUnjoinedAVChatRoom(n3)) : o3 >= e4.MAX_CHECK_COUNT ? (e4._deleteCachedGroupTips(n3), e4._checkCountMap.delete(n3)) : (o3++, e4._checkCountMap.set(n3, o3));
          });
        } }, { key: "onNewGroupTips", value: function(e4) {
          wl.debug("".concat(this._className, ".onReceiveGroupTips count:").concat(e4.dataList.length));
          var t3 = this.newGroupTipsStoredAndSummary(e4), n3 = t3.eventDataList, o3 = t3.result, r3 = t3.AVChatRoomMessageList;
          (r3.length > 0 && this._groupModule.onAVChatRoomMessage(r3), n3.length > 0) && (this._groupModule.updateNextMessageSeq(n3), this._groupModule.getModule(sg).onNewMessage({ conversationOptionsList: n3, isInstantMessage: true }));
          o3.length > 0 && (this._groupModule.emitOuterEvent(pr.MESSAGE_RECEIVED, o3), this.handleMessageList(o3));
        } }, { key: "newGroupTipsStoredAndSummary", value: function(e4) {
          for (var n3 = this, o3 = e4.event, r3 = e4.dataList, a3 = null, s3 = [], i3 = [], c3 = {}, u3 = [], l3 = function(e5, l4) {
            var d4 = md(r3[e5]), p4 = d4.groupProfile, g3 = p4.groupID, h3 = p4.communityType, _3 = void 0 === h3 ? 0 : h3, f3 = p4.topicID, m3 = void 0 === f3 ? void 0 : f3, v3 = void 0, M3 = 2 === _3 && !qd(m3);
            if (M3) {
              v3 = gr.CONV_TOPIC, d4.to = m3;
              var y3 = n3._groupModule.getModule(ag);
              y3.hasLocalTopic(g3, m3) || n3._getTopicPendingMap.has(m3) || (n3._getTopicPendingMap.set(m3, 1), y3.getTopicList({ groupID: g3, topicIDList: [m3] }).finally(function() {
                n3._getTopicPendingMap.delete(m3);
              }));
            }
            if (2 === _3 && qd(m3))
              return "continue";
            var I3 = n3._groupModule.hasLocalGroup(g3);
            if (!I3 && n3._groupModule.isUnjoinedAVChatRoom(g3))
              return "continue";
            if (!I3 && !M3)
              return n3._cacheGroupTipsAndProbe({ groupID: g3, event: o3, item: d4 }), "continue";
            if (n3._groupModule.isMessageFromOrToAVChatroom(g3))
              return d4.event = o3, u3.push(d4), "continue";
            d4.currentUser = n3._groupModule.getMyUserID(), d4.conversationType = gr.CONV_GROUP, (a3 = new Mv(d4)).setElement({ type: gr.MSG_GRP_TIP, content: t2(t2({}, d4.elements), {}, { groupProfile: d4.groupProfile }) }), a3.isSystemMessage = false;
            var E3 = n3._groupModule.getModule(sg), T3 = a3, S3 = T3.conversationID, C3 = T3.sequence;
            if (6 === o3)
              a3._onlineOnlyFlag = true, i3.push(a3);
            else if (!E3.pushIntoNoticeResult(i3, a3))
              return "continue";
            if (6 === o3 && E3.getLocalConversation(S3))
              return "continue";
            6 !== o3 && n3._groupModule.getModule(Ig).addMessageSequence({ key: c_, message: a3 });
            var A3 = E3.isRemoteRead({ conversationID: S3, sequence: C3 });
            if (Zl(c3[S3])) {
              var D3 = 0;
              "in" === a3.flow && (a3._isExcludedFromUnreadCount || a3._onlineOnlyFlag || A3 || (D3 = 1)), c3[S3] = s3.push({ conversationID: S3, unreadCount: D3, type: Zl(v3) ? a3.conversationType : v3, subType: a3.conversationSubType, lastMessage: a3._isExcludedFromLastMessage ? "" : a3 }) - 1;
            } else {
              var N3 = c3[S3];
              s3[N3].type = a3.conversationType, s3[N3].subType = a3.conversationSubType, s3[N3].lastMessage = a3._isExcludedFromLastMessage ? "" : a3, "in" === a3.flow && (a3._isExcludedFromUnreadCount || a3._onlineOnlyFlag || A3 || s3[N3].unreadCount++);
            }
          }, d3 = 0, p3 = r3.length; d3 < p3; d3++)
            l3(d3);
          return { eventDataList: s3, result: i3, AVChatRoomMessageList: u3 };
        } }, { key: "handleMessageList", value: function(e4) {
          var t3 = this;
          e4.forEach(function(e5) {
            switch (e5.payload.operationType) {
              case 1:
                t3._onNewMemberComeIn(e5);
                break;
              case 2:
                t3._onMemberQuit(e5);
                break;
              case 3:
                t3._onMemberKickedOut(e5);
                break;
              case 4:
                t3._onMemberSetAdmin(e5);
                break;
              case 5:
                t3._onMemberCancelledAdmin(e5);
                break;
              case 6:
                t3._onGroupProfileModified(e5);
                break;
              case 7:
                t3._onMemberInfoModified(e5);
                break;
              case 8:
                t3._onTopicProfileUpdated(e5);
                break;
              default:
                wl.warn("".concat(t3._className, ".handleMessageList unknown operationType:").concat(e5.payload.operationType));
            }
          });
        } }, { key: "_onNewMemberComeIn", value: function(e4) {
          var t3 = e4.payload, n3 = t3.memberNum, o3 = t3.groupProfile.groupID, r3 = this._groupModule.getLocalGroupProfile(o3);
          r3 && $l(n3) && r3.memberCount !== n3 && (r3.memberCount = n3, this._updateConversationGroupProfile(r3));
        } }, { key: "_onMemberQuit", value: function(e4) {
          var t3 = e4.payload, n3 = t3.memberNum, o3 = t3.groupProfile.groupID, r3 = this._groupModule.getLocalGroupProfile(o3);
          r3 && $l(n3) && r3.memberCount !== n3 && (r3.memberCount = n3, this._updateConversationGroupProfile(r3)), this._groupModule.getModule(rg).deleteLocalGroupMembers(o3, e4.payload.userIDList);
        } }, { key: "_onMemberKickedOut", value: function(e4) {
          var t3 = e4.payload, n3 = t3.memberNum, o3 = t3.groupProfile.groupID, r3 = this._groupModule.getLocalGroupProfile(o3);
          r3 && $l(n3) && r3.memberCount !== n3 && (r3.memberCount = n3, this._updateConversationGroupProfile(r3)), this._groupModule.getModule(rg).deleteLocalGroupMembers(o3, e4.payload.userIDList);
        } }, { key: "_updateConversationGroupProfile", value: function(e4) {
          this._groupModule.getModule(sg).updateConversationGroupProfile([e4]);
        } }, { key: "_onMemberSetAdmin", value: function(e4) {
          var t3 = e4.payload.groupProfile.groupID, n3 = e4.payload.userIDList, o3 = this._groupModule.getModule(rg);
          n3.forEach(function(e5) {
            var n4 = o3.getLocalGroupMemberInfo(t3, e5);
            n4 && n4.updateRole(gr.GRP_MBR_ROLE_ADMIN);
          });
        } }, { key: "_onMemberCancelledAdmin", value: function(e4) {
          var t3 = e4.payload.groupProfile.groupID, n3 = e4.payload.userIDList, o3 = this._groupModule.getModule(rg);
          n3.forEach(function(e5) {
            var n4 = o3.getLocalGroupMemberInfo(t3, e5);
            n4 && n4.updateRole(gr.GRP_MBR_ROLE_MEMBER);
          });
        } }, { key: "_onGroupProfileModified", value: function(e4) {
          var t3 = this, n3 = e4.payload, o3 = n3.newGroupProfile, r3 = n3.groupProfile.groupID, a3 = this._groupModule.getLocalGroupProfile(r3);
          Object.keys(o3).forEach(function(e5) {
            switch (e5) {
              case "ownerID":
                t3._ownerChanged(a3, o3);
                break;
              case "muteAllMembers":
                a3.muteAllMembers = o3.muteAllMembers;
                break;
              default:
                a3[e5] = o3[e5];
            }
          });
          var s3 = !a3.isSupportTopic;
          this._groupModule.emitGroupListUpdate(true, s3);
        } }, { key: "_ownerChanged", value: function(e4, t3) {
          var n3 = e4.groupID, o3 = this._groupModule.getLocalGroupProfile(n3), r3 = this._groupModule.getMyUserID();
          if (r3 === t3.ownerID) {
            o3.updateGroup({ selfInfo: { role: gr.GRP_MBR_ROLE_OWNER } });
            var a3 = this._groupModule.getModule(rg), s3 = a3.getLocalGroupMemberInfo(n3, r3), i3 = this._groupModule.getLocalGroupProfile(n3).ownerID, c3 = a3.getLocalGroupMemberInfo(n3, i3);
            s3 && s3.updateRole(gr.GRP_MBR_ROLE_OWNER), c3 && c3.updateRole(gr.GRP_MBR_ROLE_MEMBER);
          }
        } }, { key: "_onMemberInfoModified", value: function(e4) {
          var t3 = e4.to, n3 = e4.payload, o3 = n3.groupProfile, r3 = n3.memberList, a3 = o3.groupID;
          Ed(t3) && this._updateTopicMuteTime(e4);
          var s3 = this._groupModule.getModule(rg);
          r3.forEach(function(e5) {
            var t4 = s3.getLocalGroupMemberInfo(a3, e5.userID);
            t4 && $l(e5.muteTime) && t4.updateMuteUntil(e5.muteTime);
          });
        } }, { key: "_updateTopicMuteTime", value: function(e4) {
          var t3 = e4.to, n3 = e4.payload, o3 = n3.groupProfile, r3 = n3.memberList, a3 = void 0 === r3 ? [] : r3, s3 = this._groupModule.getModule(ag), i3 = o3.groupID, c3 = s3.getLocalTopic(i3, t3);
          if (c3) {
            for (var u3 = false, l3 = 0; l3 < a3.length; l3++) {
              var d3 = a3[l3];
              if (d3.userID === this._groupModule.getMyUserID() && d3.muteTime >= 0) {
                c3.updateSelfInfo({ muteTime: d3.muteTime }), u3 = true;
                break;
              }
            }
            u3 && this._groupModule.emitOuterEvent(pr.TOPIC_UPDATED, { groupID: i3, topic: c3 });
          }
        } }, { key: "_onTopicProfileUpdated", value: function(e4) {
          var n3 = e4.payload, o3 = n3.groupProfile.groupID, r3 = n3.newTopicInfo;
          this._groupModule.getModule(ag).onTopicProfileUpdated(t2({ groupID: o3, topicID: e4.to }, r3));
        } }, { key: "_cacheGroupTips", value: function(e4, t3) {
          this._cachedGroupTipsMap.has(e4) || this._cachedGroupTipsMap.set(e4, []), this._cachedGroupTipsMap.get(e4).push(t3);
        } }, { key: "_deleteCachedGroupTips", value: function(e4) {
          this._cachedGroupTipsMap.has(e4) && this._cachedGroupTipsMap.delete(e4);
        } }, { key: "_notifyCachedGroupTips", value: function(e4) {
          var t3 = this, n3 = this._cachedGroupTipsMap.get(e4) || [];
          n3.forEach(function(e5) {
            t3.onNewGroupTips(e5);
          }), this._deleteCachedGroupTips(e4), wl.log("".concat(this._className, "._notifyCachedGroupTips groupID:").concat(e4, " count:").concat(n3.length));
        } }, { key: "_cacheGroupTipsAndProbe", value: function(e4) {
          var t3 = this, n3 = e4.groupID, o3 = e4.event, r3 = e4.item;
          this._cacheGroupTips(n3, { event: o3, dataList: [r3] }), this._groupModule.getGroupSimplifiedInfo(n3).then(function(e5) {
            e5.type === gr.GRP_AVCHATROOM ? t3._groupModule.hasLocalGroup(n3) ? t3._notifyCachedGroupTips(n3) : t3._groupModule.setUnjoinedAVChatRoom(n3) : (t3._groupModule.updateGroupMap([e5]), t3._notifyCachedGroupTips(n3));
          }), this._checkCountMap.has(n3) || this._checkCountMap.set(n3, 0), wl.log("".concat(this._className, "._cacheGroupTipsAndProbe groupID:").concat(n3));
        } }, { key: "reset", value: function() {
          this._cachedGroupTipsMap.clear(), this._checkCountMap.clear(), this._getTopicPendingMap.clear();
        } }]), e3;
      }(), gM = function() {
        function e3(t3) {
          o2(this, e3), this._groupModule = t3, this._className = "CommonGroupHandler", this.tempConversationList = null, this._cachedGroupMessageMap = /* @__PURE__ */ new Map(), this._checkCountMap = /* @__PURE__ */ new Map(), this.MAX_CHECK_COUNT = 4, this._getTopicPendingMap = /* @__PURE__ */ new Map(), t3.getInnerEmitterInstance().once(Yv, this._initGroupList, this);
        }
        return a2(e3, [{ key: "onCheckTimer", value: function(e4) {
          e4 % 1 == 0 && this._cachedGroupMessageMap.size > 0 && this._checkCachedGroupMessage();
        } }, { key: "_checkCachedGroupMessage", value: function() {
          var e4 = this;
          this._cachedGroupMessageMap.forEach(function(t3, n3) {
            var o3 = e4._checkCountMap.get(n3), r3 = e4._groupModule.hasLocalGroup(n3);
            wl.log("".concat(e4._className, "._checkCachedGroupMessage groupID:").concat(n3, " hasLocalGroup:").concat(r3, " checkCount:").concat(o3)), r3 ? (e4._notifyCachedGroupMessage(n3), e4._checkCountMap.delete(n3), e4._groupModule.deleteUnjoinedAVChatRoom(n3)) : o3 >= e4.MAX_CHECK_COUNT ? (e4._deleteCachedGroupMessage(n3), e4._checkCountMap.delete(n3)) : (o3++, e4._checkCountMap.set(n3, o3));
          });
        } }, { key: "_initGroupList", value: function() {
          var e4 = this;
          wl.log("".concat(this._className, "._initGroupList"));
          var t3 = new __(f_.GET_GROUP_LIST_IN_STORAGE), n3 = this._groupModule.getStorageGroupList();
          if (Ql(n3) && n3.length > 0) {
            n3.forEach(function(t4) {
              e4._groupModule.initGroupMap(t4);
            }), this._groupModule.emitGroupListUpdate(true, false);
            var o3 = this._groupModule.getLocalGroupList().length;
            t3.setNetworkType(this._groupModule.getNetworkType()).setMessage("group count:".concat(o3)).end();
          } else
            t3.setNetworkType(this._groupModule.getNetworkType()).setMessage("group count:0").end();
          wl.log("".concat(this._className, "._initGroupList ok"));
        } }, { key: "handleUpdateGroupLastMessage", value: function(e4) {
          var t3 = "".concat(this._className, ".handleUpdateGroupLastMessage");
          if (wl.debug("".concat(t3, " conversation count:").concat(e4.length, ", local group count:").concat(this._groupModule.getLocalGroupList().length)), 0 !== this._groupModule.getGroupMap().size) {
            for (var n3, o3, r3, a3 = false, s3 = 0, i3 = e4.length; s3 < i3; s3++)
              (n3 = e4[s3]).type === gr.CONV_GROUP && (o3 = n3.conversationID.split(/^GROUP/)[1], (r3 = this._groupModule.getLocalGroupProfile(o3)) && (r3.lastMessage = n3.lastMessage, a3 = true));
            a3 && (this._groupModule.sortLocalGroupList(), this._groupModule.emitGroupListUpdate(true, false));
          } else
            this.tempConversationList = e4;
        } }, { key: "onNewGroupMessage", value: function(e4) {
          wl.debug("".concat(this._className, ".onNewGroupMessage count:").concat(e4.dataList.length));
          var t3 = this._newGroupMessageStoredAndSummary(e4), n3 = t3.conversationOptionsList, o3 = t3.messageList, r3 = t3.AVChatRoomMessageList;
          (r3.length > 0 && this._groupModule.onAVChatRoomMessage(r3), this._groupModule.filterModifiedMessage(o3), n3.length > 0) && (this._groupModule.updateNextMessageSeq(n3), this._groupModule.getModule(sg).onNewMessage({ conversationOptionsList: n3, isInstantMessage: true }));
          var a3 = this._groupModule.filterUnmodifiedMessage(o3);
          a3.length > 0 && this._groupModule.emitOuterEvent(pr.MESSAGE_RECEIVED, a3), o3.length = 0;
        } }, { key: "_newGroupMessageStoredAndSummary", value: function(e4) {
          var t3 = this, n3 = e4.dataList, o3 = e4.event, r3 = e4.isInstantMessage, a3 = null, s3 = [], i3 = [], c3 = [], u3 = {}, l3 = this._groupModule.getModule(dg), d3 = this._groupModule.getModule(Ig), p3 = n3.length;
          p3 > 1 && n3.sort(function(e5, t4) {
            return e5.sequence - t4.sequence;
          });
          for (var g3 = function(e5) {
            var p4 = md(n3[e5]), g4 = p4.groupProfile, h4 = g4.groupID, _3 = g4.communityType, f3 = void 0 === _3 ? 0 : _3, m3 = g4.topicID, v3 = void 0 === m3 ? void 0 : m3, M3 = void 0, y3 = 2 === f3 && !qd(v3);
            if (y3) {
              M3 = gr.CONV_TOPIC, p4.to = v3;
              var I3 = t3._groupModule.getModule(ag);
              I3.hasLocalTopic(h4, v3) || t3._getTopicPendingMap.has(v3) || (t3._getTopicPendingMap.set(v3, 1), I3.getTopicList({ groupID: h4, topicIDList: [v3] }).finally(function() {
                t3._getTopicPendingMap.delete(v3);
              }));
            }
            if (2 === f3 && qd(v3))
              return "continue";
            var E3 = t3._groupModule.hasLocalGroup(h4);
            if (!E3 && t3._groupModule.isUnjoinedAVChatRoom(h4))
              return "continue";
            if (!E3 && !y3)
              return t3._cacheGroupMessageAndProbe({ groupID: h4, event: o3, item: p4 }), "continue";
            if (t3._groupModule.isMessageFromOrToAVChatroom(h4))
              return p4.event = o3, c3.push(p4), "continue";
            p4.currentUser = t3._groupModule.getMyUserID(), p4.conversationType = gr.CONV_GROUP, p4.isSystemMessage = !!p4.isSystemMessage, a3 = new Mv(p4), p4.elements = l3.parseElements(p4.elements, p4.from), a3.setElement(p4.elements);
            var T3 = 1 === n3[e5].isModified, S3 = t3._groupModule.getModule(sg);
            if (S3.isMessageSentByCurrentInstance(a3) ? a3.isModified = T3 : T3 = false, 1 === p4.onlineOnlyFlag)
              a3._onlineOnlyFlag = true, i3.push(a3);
            else {
              if (!S3.pushIntoMessageList(i3, a3, T3))
                return "continue";
              d3.addMessageSequence({ key: c_, message: a3 }), r3 && a3.clientTime > 0 && d3.addMessageDelay(a3.clientTime);
              var C3 = a3, A3 = C3.conversationID, D3 = C3.sequence, N3 = S3.isRemoteRead({ conversationID: A3, sequence: D3 });
              if (Zl(u3[A3])) {
                var O3 = 0;
                "in" === a3.flow && (a3._isExcludedFromUnreadCount || N3 || (O3 = 1)), u3[A3] = s3.push({ conversationID: A3, unreadCount: O3, type: Zl(M3) ? a3.conversationType : M3, subType: a3.conversationSubType, lastMessage: a3._isExcludedFromLastMessage ? "" : a3 }) - 1;
              } else {
                var R3 = u3[A3];
                s3[R3].type = Zl(M3) ? a3.conversationType : M3, s3[R3].subType = a3.conversationSubType, s3[R3].lastMessage = a3._isExcludedFromLastMessage ? "" : a3, "in" === a3.flow && (a3._isExcludedFromUnreadCount || N3 || s3[R3].unreadCount++);
              }
            }
          }, h3 = 0; h3 < p3; h3++)
            g3(h3);
          return { conversationOptionsList: s3, messageList: i3, AVChatRoomMessageList: c3 };
        } }, { key: "onGroupMessageRevoked", value: function(e4) {
          wl.debug("".concat(this._className, ".onGroupMessageRevoked nums:").concat(e4.dataList.length));
          var t3 = this._groupModule.getModule(sg), n3 = [], o3 = null;
          e4.dataList.forEach(function(e5) {
            var r3 = e5.elements.revokedInfos;
            Zl(r3) || r3.forEach(function(e6) {
              var r4 = Zl(e6.topicID) ? "GROUP".concat(e6.groupID) : "GROUP".concat(e6.topicID);
              (o3 = t3.revoke(r4, e6.sequence, e6.random)) && n3.push(o3);
            });
          }), 0 !== n3.length && (t3.onMessageRevoked(n3), this._groupModule.emitOuterEvent(pr.MESSAGE_REVOKED, n3));
        } }, { key: "_groupListTreeShaking", value: function(e4) {
          for (var t3 = new Map(v2(this._groupModule.getGroupMap())), n3 = 0, o3 = e4.length; n3 < o3; n3++)
            t3.delete(e4[n3].groupID);
          this._groupModule.hasJoinedAVChatRoom() && this._groupModule.getJoinedAVChatRoom().forEach(function(e5) {
            t3.delete(e5);
          });
          this._groupModule.getGroupMap().forEach(function(e5, n4) {
            e5.isSupportTopic && t3.delete(n4);
          });
          for (var r3 = v2(t3.keys()), a3 = 0, s3 = r3.length; a3 < s3; a3++)
            this._groupModule.deleteGroup(r3[a3]);
        } }, { key: "getGroupList", value: function(e4) {
          var t3 = this, n3 = "".concat(this._className, ".getGroupList"), o3 = new __(f_.GET_GROUP_LIST);
          wl.log("".concat(n3));
          var r3 = { introduction: "Introduction", notification: "Notification", createTime: "CreateTime", ownerID: "Owner_Account", lastInfoTime: "LastInfoTime", memberNum: "MemberNum", maxMemberNum: "MaxMemberNum", joinOption: "ApplyJoinOption", muteAllMembers: "ShutUpAllMember" }, a3 = ["Type", "Name", "FaceUrl", "NextMsgSeq", "LastMsgTime"], s3 = [];
          e4 && e4.groupProfileFilter && e4.groupProfileFilter.forEach(function(e5) {
            r3[e5] && a3.push(r3[e5]);
          });
          var i3 = (e4 || {}).isGroupWithTopicOnly, c3 = void 0 !== i3 && i3;
          return this._pagingGetGroupList({ limit: 50, offset: 0, groupBaseInfoFilter: a3, groupList: s3, isGroupWithTopicOnly: c3 }).then(function() {
            wl.log("".concat(n3, " ok. count:").concat(s3.length, " isGroupWithTopicOnly:").concat(c3)), c3 || t3._groupListTreeShaking(s3), t3._groupModule.updateGroupMap(s3);
            var e5 = t3._groupModule.getLocalGroupList().length;
            o3.setNetworkType(t3._groupModule.getNetworkType()).setMessage("remote count:".concat(s3.length, ", after tree shaking, local count:").concat(e5, ", isGroupWithTopicOnly:").concat(c3)).end(), t3.tempConversationList && (wl.log("".concat(n3, " update last message with tempConversationList, count:").concat(t3.tempConversationList.length)), t3.handleUpdateGroupLastMessage({ data: t3.tempConversationList }), t3.tempConversationList = null), t3._groupModule.patchGroupMessageRemindType(), t3._groupModule.recomputeUnreadCount(), t3._groupModule.emitGroupListUpdate(true, !c3);
            var r4 = t3._groupModule.getLocalGroupList();
            if (c3) {
              var a4 = r4.filter(function(e6) {
                return true === e6.isSupportTopic;
              });
              return yv({ groupList: a4 });
            }
            return yv({ groupList: r4 });
          }).catch(function(e5) {
            return t3._groupModule.probeNetwork().then(function(t4) {
              var n4 = m2(t4, 2), r4 = n4[0], a4 = n4[1];
              o3.setError(e5, r4, a4).end();
            }), wl.error("".concat(n3, " failed. error:"), e5), Rv(e5);
          });
        } }, { key: "_pagingGetGroupList", value: function(e4) {
          var t3 = this, n3 = "".concat(this._className, "._pagingGetGroupList"), o3 = e4.isCommunityRelay, r3 = void 0 !== o3 && o3, a3 = e4.isGroupWithTopicOnly, s3 = void 0 !== a3 && a3, i3 = e4.limit, c3 = e4.offset, u3 = e4.groupBaseInfoFilter, l3 = e4.groupList;
          if (s3)
            return this._pagingGetGroupListWithTopic({ limit: i3, offset: c3, groupBaseInfoFilter: u3, groupList: l3 });
          var d3 = new __(f_.PAGING_GET_GROUP_LIST);
          return this._groupModule.request({ protocolName: Jg, requestData: { type: r3 ? gr.GRP_COMMUNITY : void 0, memberAccount: this._groupModule.getMyUserID(), limit: i3, offset: c3, responseFilter: { groupBaseInfoFilter: u3, selfInfoFilter: ["Role", "JoinTime", "MsgFlag", "MsgSeq"] } } }).then(function(e5) {
            var o4 = e5.data, a4 = o4.groups, s4 = void 0 === a4 ? [] : a4, p3 = o4.totalCount;
            l3.push.apply(l3, v2(s4));
            var g3 = c3 + i3, h3 = !(p3 > g3), _3 = "offset:".concat(c3, " totalCount:").concat(p3, " isCompleted:").concat(h3, " ") + "currentCount:".concat(l3.length, " isCommunityRelay:").concat(r3);
            return d3.setNetworkType(t3._groupModule.getNetworkType()).setMessage("".concat(_3)).end(), r3 || h3 ? !r3 && h3 ? (wl.log("".concat(n3, " start to get community list")), c3 = 0, t3._pagingGetGroupList({ limit: i3, offset: c3, groupBaseInfoFilter: u3, groupList: l3, isCommunityRelay: true })) : r3 && !h3 ? (c3 = g3, t3._pagingGetGroupList({ limit: i3, offset: c3, groupBaseInfoFilter: u3, groupList: l3, isCommunityRelay: true })) : (wl.log("".concat(n3, " ok. totalCount:").concat(l3.length)), yv({ groupList: l3 })) : (c3 = g3, t3._pagingGetGroupList({ limit: i3, offset: c3, groupBaseInfoFilter: u3, groupList: l3 }));
          }).catch(function(e5) {
            return 11e3 !== e5.code && t3._groupModule.probeNetwork().then(function(t4) {
              var n4 = m2(t4, 2), o4 = n4[0], a4 = n4[1];
              d3.setMessage("isCommunityRelay:".concat(r3)).setError(e5, o4, a4).end();
            }), r3 ? (11e3 === e5.code && (d3 = null, wl.log("".concat(n3, " ok. community unavailable"))), Ov({ groupList: l3 })) : Rv(e5);
          });
        } }, { key: "_pagingGetGroupListWithTopic", value: function(e4) {
          var t3 = this, n3 = "".concat(this._className, "._pagingGetGroupListWithTopic"), o3 = e4.limit, r3 = e4.offset, a3 = e4.groupBaseInfoFilter, s3 = e4.groupList, i3 = new __(f_.PAGING_GET_GROUP_LIST_WITH_TOPIC);
          return this._groupModule.request({ protocolName: Jg, requestData: { type: gr.GRP_COMMUNITY, memberAccount: this._groupModule.getMyUserID(), limit: o3, offset: r3, responseFilter: { groupBaseInfoFilter: a3, selfInfoFilter: ["Role", "JoinTime", "MsgFlag", "MsgSeq"] }, isSupportTopic: 1 } }).then(function(e5) {
            var c3 = e5.data, u3 = c3.groups, l3 = void 0 === u3 ? [] : u3, d3 = c3.totalCount;
            s3.push.apply(s3, v2(l3));
            var p3 = r3 + o3, g3 = !(d3 > p3), h3 = "offset:".concat(r3, " totalCount:").concat(d3, " isCompleted:").concat(g3, " ") + "currentCount:".concat(s3.length);
            return i3.setNetworkType(t3._groupModule.getNetworkType()).setMessage("".concat(h3)).end(), g3 ? (wl.log("".concat(n3, " ok. totalCount:").concat(s3.length)), yv({ groupList: s3 })) : (r3 = p3, t3._pagingGetGroupListWithTopic({ limit: o3, offset: r3, groupBaseInfoFilter: a3, groupList: s3 }));
          }).catch(function(e5) {
            return t3._groupModule.probeNetwork().then(function(t4) {
              var n4 = m2(t4, 2), o4 = n4[0], r4 = n4[1];
              i3.setError(e5, o4, r4).end();
            }), Rv(e5);
          });
        } }, { key: "_cacheGroupMessage", value: function(e4, t3) {
          this._cachedGroupMessageMap.has(e4) || this._cachedGroupMessageMap.set(e4, []), this._cachedGroupMessageMap.get(e4).push(t3);
        } }, { key: "_deleteCachedGroupMessage", value: function(e4) {
          this._cachedGroupMessageMap.has(e4) && this._cachedGroupMessageMap.delete(e4);
        } }, { key: "_notifyCachedGroupMessage", value: function(e4) {
          var t3 = this, n3 = this._cachedGroupMessageMap.get(e4) || [];
          n3.forEach(function(e5) {
            t3.onNewGroupMessage(e5);
          }), this._deleteCachedGroupMessage(e4), wl.log("".concat(this._className, "._notifyCachedGroupMessage groupID:").concat(e4, " count:").concat(n3.length));
        } }, { key: "_cacheGroupMessageAndProbe", value: function(e4) {
          var t3 = this, n3 = e4.groupID, o3 = e4.event, r3 = e4.item;
          this._cacheGroupMessage(n3, { event: o3, dataList: [r3] }), this._groupModule.getGroupSimplifiedInfo(n3).then(function(e5) {
            e5.type === gr.GRP_AVCHATROOM ? t3._groupModule.hasLocalGroup(n3) ? t3._notifyCachedGroupMessage(n3) : t3._groupModule.setUnjoinedAVChatRoom(n3) : (t3._groupModule.updateGroupMap([e5]), t3._notifyCachedGroupMessage(n3));
          }), this._checkCountMap.has(n3) || this._checkCountMap.set(n3, 0), wl.log("".concat(this._className, "._cacheGroupMessageAndProbe groupID:").concat(n3));
        } }, { key: "reset", value: function() {
          this._cachedGroupMessageMap.clear(), this._checkCountMap.clear(), this._getTopicPendingMap.clear(), this._groupModule.getInnerEmitterInstance().once(Yv, this._initGroupList, this);
        } }]), e3;
      }(), hM = { 1: "init", 2: "modify", 3: "clear", 4: "delete" }, _M = function() {
        function e3(t3) {
          o2(this, e3), this._groupModule = t3, this._className = "GroupAttributesHandler", this._groupAttributesMap = /* @__PURE__ */ new Map(), this.CACHE_EXPIRE_TIME = 3e4, this._groupModule.getInnerEmitterInstance().on($v, this._onCloudConfigUpdated, this);
        }
        return a2(e3, [{ key: "_onCloudConfigUpdated", value: function() {
          var e4 = this._groupModule.getCloudConfig("grp_attr_cache_time");
          Zl(e4) || (this.CACHE_EXPIRE_TIME = Number(e4));
        } }, { key: "updateLocalMainSequenceOnReconnected", value: function() {
          this._groupAttributesMap.forEach(function(e4) {
            e4.localMainSequence = 0;
          });
        } }, { key: "onGroupAttributesUpdated", value: function(e4) {
          var t3 = this, n3 = e4.groupID, o3 = e4.groupAttributeOption, r3 = o3.mainSequence, a3 = o3.hasChangedAttributeInfo, s3 = o3.groupAttributeList, i3 = void 0 === s3 ? [] : s3, c3 = o3.operationType;
          if (wl.log("".concat(this._className, ".onGroupAttributesUpdated. hasChangedAttributeInfo:").concat(a3, " operationType:").concat(c3)), !Zl(c3)) {
            if (1 === a3) {
              if (4 === c3) {
                var u3 = [];
                i3.forEach(function(e5) {
                  u3.push(e5.key);
                }), i3 = v2(u3), u3 = null;
              }
              return this._refreshCachedGroupAttributes({ groupID: n3, remoteMainSequence: r3, groupAttributeList: i3, operationType: hM[c3] }), void this._emitGroupAttributesUpdated(n3);
            }
            if (this._groupAttributesMap.has(n3)) {
              var l3 = this._groupAttributesMap.get(n3).avChatRoomKey;
              this._getGroupAttributes({ groupID: n3, avChatRoomKey: l3 }).then(function() {
                t3._emitGroupAttributesUpdated(n3);
              });
            }
          }
        } }, { key: "initGroupAttributesCache", value: function(e4) {
          var t3 = e4.groupID, n3 = e4.avChatRoomKey;
          this._groupAttributesMap.set(t3, { lastUpdateTime: 0, localMainSequence: 0, remoteMainSequence: 0, attributes: /* @__PURE__ */ new Map(), avChatRoomKey: n3 }), wl.log("".concat(this._className, ".initGroupAttributesCache groupID:").concat(t3, " avChatRoomKey:").concat(n3));
        } }, { key: "initGroupAttributes", value: function(e4) {
          var t3 = this, n3 = e4.groupID, o3 = e4.groupAttributes, r3 = this._checkCachedGroupAttributes({ groupID: n3, funcName: "initGroupAttributes" });
          if (true !== r3)
            return Rv(r3);
          var a3 = this._groupAttributesMap.get(n3), s3 = a3.remoteMainSequence, i3 = a3.avChatRoomKey, c3 = new __(f_.INIT_GROUP_ATTRIBUTES);
          return c3.setMessage("groupID:".concat(n3, " mainSequence:").concat(s3, " groupAttributes:").concat(JSON.stringify(o3))), this._groupModule.request({ protocolName: Th, requestData: { groupID: n3, avChatRoomKey: i3, mainSequence: s3, groupAttributeList: this._transformGroupAttributes(o3) } }).then(function(e5) {
            var r4 = e5.data, a4 = r4.mainSequence, s4 = v2(r4.groupAttributeList);
            return s4.forEach(function(e6) {
              e6.value = o3[e6.key];
            }), t3._refreshCachedGroupAttributes({ groupID: n3, remoteMainSequence: a4, groupAttributeList: s4, operationType: "init" }), c3.setNetworkType(t3._groupModule.getNetworkType()).end(), wl.log("".concat(t3._className, ".initGroupAttributes ok. groupID:").concat(n3)), yv({ groupAttributes: o3 });
          }).catch(function(e5) {
            return t3._groupModule.probeNetwork().then(function(t4) {
              var n4 = m2(t4, 2), o4 = n4[0], r4 = n4[1];
              c3.setError(e5, o4, r4).end();
            }), Rv(e5);
          });
        } }, { key: "setGroupAttributes", value: function(e4) {
          var t3 = this, n3 = e4.groupID, o3 = e4.groupAttributes, r3 = this._checkCachedGroupAttributes({ groupID: n3, funcName: "setGroupAttributes" });
          if (true !== r3)
            return Rv(r3);
          var a3 = this._groupAttributesMap.get(n3), s3 = a3.remoteMainSequence, i3 = a3.avChatRoomKey, c3 = a3.attributes, u3 = this._transformGroupAttributes(o3);
          u3.forEach(function(e5) {
            var t4 = e5.key;
            e5.sequence = 0, c3.has(t4) && (e5.sequence = c3.get(t4).sequence);
          });
          var l3 = new __(f_.SET_GROUP_ATTRIBUTES);
          return l3.setMessage("groupID:".concat(n3, " mainSequence:").concat(s3, " groupAttributes:").concat(JSON.stringify(o3))), this._groupModule.request({ protocolName: Sh, requestData: { groupID: n3, avChatRoomKey: i3, mainSequence: s3, groupAttributeList: u3 } }).then(function(e5) {
            var r4 = e5.data, a4 = r4.mainSequence, s4 = v2(r4.groupAttributeList);
            return s4.forEach(function(e6) {
              e6.value = o3[e6.key];
            }), t3._refreshCachedGroupAttributes({ groupID: n3, remoteMainSequence: a4, groupAttributeList: s4, operationType: "modify" }), l3.setNetworkType(t3._groupModule.getNetworkType()).end(), wl.log("".concat(t3._className, ".setGroupAttributes ok. groupID:").concat(n3)), yv({ groupAttributes: o3 });
          }).catch(function(e5) {
            return t3._groupModule.probeNetwork().then(function(t4) {
              var n4 = m2(t4, 2), o4 = n4[0], r4 = n4[1];
              l3.setError(e5, o4, r4).end();
            }), Rv(e5);
          });
        } }, { key: "deleteGroupAttributes", value: function(e4) {
          var t3 = this, n3 = e4.groupID, o3 = e4.keyList, r3 = void 0 === o3 ? [] : o3, a3 = this._checkCachedGroupAttributes({ groupID: n3, funcName: "deleteGroupAttributes" });
          if (true !== a3)
            return Rv(a3);
          var s3 = this._groupAttributesMap.get(n3), i3 = s3.remoteMainSequence, c3 = s3.avChatRoomKey, u3 = s3.attributes, l3 = v2(u3.keys()), d3 = Ah, p3 = "clear", g3 = { groupID: n3, avChatRoomKey: c3, mainSequence: i3 };
          if (r3.length > 0) {
            var h3 = [];
            l3 = [], d3 = Ch, p3 = "delete", r3.forEach(function(e5) {
              var t4 = 0;
              u3.has(e5) && (t4 = u3.get(e5).sequence, l3.push(e5)), h3.push({ key: e5, sequence: t4 });
            }), g3.groupAttributeList = h3;
          }
          var _3 = new __(f_.DELETE_GROUP_ATTRIBUTES);
          return _3.setMessage("groupID:".concat(n3, " mainSequence:").concat(i3, " keyList:").concat(r3, " protocolName:").concat(d3)), this._groupModule.request({ protocolName: d3, requestData: g3 }).then(function(e5) {
            var o4 = e5.data.mainSequence;
            return t3._refreshCachedGroupAttributes({ groupID: n3, remoteMainSequence: o4, groupAttributeList: r3, operationType: p3 }), _3.setNetworkType(t3._groupModule.getNetworkType()).end(), wl.log("".concat(t3._className, ".deleteGroupAttributes ok. groupID:").concat(n3)), yv({ keyList: l3 });
          }).catch(function(e5) {
            return t3._groupModule.probeNetwork().then(function(t4) {
              var n4 = m2(t4, 2), o4 = n4[0], r4 = n4[1];
              _3.setError(e5, o4, r4).end();
            }), Rv(e5);
          });
        } }, { key: "getGroupAttributes", value: function(e4) {
          var t3 = this, n3 = e4.groupID, o3 = this._checkCachedGroupAttributes({ groupID: n3, funcName: "getGroupAttributes" });
          if (true !== o3)
            return Rv(o3);
          var r3 = this._groupAttributesMap.get(n3), a3 = r3.avChatRoomKey, s3 = r3.lastUpdateTime, i3 = r3.localMainSequence, c3 = r3.remoteMainSequence, u3 = new __(f_.GET_GROUP_ATTRIBUTES);
          if (u3.setMessage("groupID:".concat(n3, " localMainSequence:").concat(i3, " remoteMainSequence:").concat(c3, " keyList:").concat(e4.keyList)), Date.now() - s3 >= this.CACHE_EXPIRE_TIME || i3 < c3)
            return this._getGroupAttributes({ groupID: n3, avChatRoomKey: a3 }).then(function(o4) {
              u3.setMoreMessage("get attributes from remote. count:".concat(o4.length)).setNetworkType(t3._groupModule.getNetworkType()).end(), wl.log("".concat(t3._className, ".getGroupAttributes from remote. groupID:").concat(n3));
              var r4 = t3._getLocalGroupAttributes(e4);
              return yv({ groupAttributes: r4 });
            }).catch(function(e5) {
              return t3._groupModule.probeNetwork().then(function(t4) {
                var n4 = m2(t4, 2), o4 = n4[0], r4 = n4[1];
                u3.setError(e5, o4, r4).end();
              }), Rv(e5);
            });
          u3.setMoreMessage("get attributes from cache").setNetworkType(this._groupModule.getNetworkType()).end(), wl.log("".concat(this._className, ".getGroupAttributes from cache. groupID:").concat(n3));
          var l3 = this._getLocalGroupAttributes(e4);
          return Ov({ groupAttributes: l3 });
        } }, { key: "_getGroupAttributes", value: function(e4) {
          var n3 = this;
          return this._groupModule.request({ protocolName: Dh, requestData: t2({}, e4) }).then(function(t3) {
            var o3 = t3.data, r3 = o3.mainSequence, a3 = o3.groupAttributeList, s3 = v2(a3);
            return Zl(r3) || n3._refreshCachedGroupAttributes({ groupID: e4.groupID, remoteMainSequence: r3, groupAttributeList: s3, operationType: "get" }), wl.log("".concat(n3._className, "._getGroupAttributes ok. groupID:").concat(e4.groupID)), a3;
          }).catch(function(e5) {
            return Rv(e5);
          });
        } }, { key: "_getLocalGroupAttributes", value: function(e4) {
          var t3 = e4.groupID, n3 = e4.keyList, o3 = void 0 === n3 ? [] : n3, r3 = {};
          if (!this._groupAttributesMap.has(t3))
            return r3;
          var a3 = this._groupAttributesMap.get(t3).attributes;
          if (o3.length > 0)
            o3.forEach(function(e5) {
              a3.has(e5) && (r3[e5] = a3.get(e5).value);
            });
          else {
            var s3, i3 = S2(a3.keys());
            try {
              for (i3.s(); !(s3 = i3.n()).done; ) {
                var c3 = s3.value;
                r3[c3] = a3.get(c3).value;
              }
            } catch (u3) {
              i3.e(u3);
            } finally {
              i3.f();
            }
          }
          return r3;
        } }, { key: "_refreshCachedGroupAttributes", value: function(e4) {
          var t3 = e4.groupID, n3 = e4.remoteMainSequence, o3 = e4.groupAttributeList, r3 = e4.operationType;
          if (this._groupAttributesMap.has(t3)) {
            var a3 = this._groupAttributesMap.get(t3), s3 = a3.localMainSequence;
            if ("get" === r3 || n3 - s3 == 1)
              a3.remoteMainSequence = n3, a3.localMainSequence = n3, a3.lastUpdateTime = Date.now(), this._updateCachedAttributes({ groupAttributes: a3, groupAttributeList: o3, operationType: r3 });
            else {
              if (s3 === n3)
                return;
              a3.remoteMainSequence = n3;
            }
            this._groupAttributesMap.set(t3, a3);
            var i3 = "operationType:".concat(r3, " localMainSequence:").concat(s3, " remoteMainSequence:").concat(n3);
            wl.log("".concat(this._className, "._refreshCachedGroupAttributes. ").concat(i3));
          }
        } }, { key: "_updateCachedAttributes", value: function(e4) {
          var t3 = e4.groupAttributes, n3 = e4.groupAttributeList, o3 = e4.operationType;
          "clear" !== o3 ? "delete" !== o3 ? ("init" === o3 && t3.attributes.clear(), n3.forEach(function(e5) {
            var n4 = e5.key, o4 = e5.value, r3 = e5.sequence;
            t3.attributes.set(n4, { value: o4, sequence: r3 });
          })) : n3.forEach(function(e5) {
            t3.attributes.delete(e5);
          }) : t3.attributes.clear();
        } }, { key: "_checkCachedGroupAttributes", value: function(e4) {
          var t3 = e4.groupID, n3 = e4.funcName;
          if (this._groupModule.hasLocalGroup(t3) && this._groupModule.getLocalGroupProfile(t3).type !== gr.GRP_AVCHATROOM) {
            return wl.warn("".concat(this._className, "._checkCachedGroupAttributes. ").concat("非直播群不能使用群属性 API")), new Av({ code: Zh.CANNOT_USE_GRP_ATTR_NOT_AVCHATROOM, message: "非直播群不能使用群属性 API" });
          }
          var o3 = this._groupAttributesMap.get(t3);
          if (Zl(o3)) {
            var r3 = "如果 groupID:".concat(t3, " 是直播群，使用 ").concat(n3, " 前先使用 joinGroup 接口申请加入群组，详细请参考 https://web.sdk.qcloud.com/im/doc/zh-cn/SDK.html#joinGroup");
            return wl.warn("".concat(this._className, "._checkCachedGroupAttributes. ").concat(r3)), new Av({ code: Zh.CANNOT_USE_GRP_ATTR_AVCHATROOM_UNJOIN, message: r3 });
          }
          return true;
        } }, { key: "_transformGroupAttributes", value: function(e4) {
          var t3 = [];
          return Object.keys(e4).forEach(function(n3) {
            t3.push({ key: n3, value: e4[n3] });
          }), t3;
        } }, { key: "_emitGroupAttributesUpdated", value: function(e4) {
          var t3 = this._getLocalGroupAttributes({ groupID: e4 });
          this._groupModule.emitOuterEvent(pr.GROUP_ATTRIBUTES_UPDATED, { groupID: e4, groupAttributes: t3 });
        } }, { key: "reset", value: function() {
          this._groupAttributesMap.clear(), this.CACHE_EXPIRE_TIME = 3e4;
        } }]), e3;
      }(), fM = function() {
        function e3(t3) {
          o2(this, e3);
          var n3 = t3.manager, r3 = t3.groupID, a3 = t3.onInit, s3 = t3.onSuccess, i3 = t3.onFail;
          this._className = "Polling", this._manager = n3, this._groupModule = n3._groupModule, this._onInit = a3, this._onSuccess = s3, this._onFail = i3, this._groupID = r3, this._timeoutID = -1, this._isRunning = false, this._protocolName = vh;
        }
        return a2(e3, [{ key: "start", value: function() {
          var e4 = this._groupModule.isLoggedIn();
          e4 || (this._protocolName = Mh), wl.log("".concat(this._className, ".start pollingInterval:").concat(this._manager.getPollingInterval(), " isLoggedIn:").concat(e4)), this._isRunning = true, this._request();
        } }, { key: "isRunning", value: function() {
          return this._isRunning;
        } }, { key: "_request", value: function() {
          var e4 = this, t3 = this._onInit(this._groupID);
          this._groupModule.request({ protocolName: this._protocolName, requestData: t3 }).then(function(t4) {
            e4._onSuccess(e4._groupID, t4), e4.isRunning() && (clearTimeout(e4._timeoutID), e4._timeoutID = setTimeout(e4._request.bind(e4), e4._manager.getPollingInterval()));
          }).catch(function(t4) {
            e4._onFail(e4._groupID, t4), e4.isRunning() && (clearTimeout(e4._timeoutID), e4._timeoutID = setTimeout(e4._request.bind(e4), e4._manager.MAX_POLLING_INTERVAL));
          });
        } }, { key: "stop", value: function() {
          wl.log("".concat(this._className, ".stop")), this._timeoutID > 0 && (clearTimeout(this._timeoutID), this._timeoutID = -1), this._isRunning = false;
        } }]), e3;
      }(), mM = { 3: true, 4: true, 5: true, 6: true }, vM = function() {
        function e3(t3) {
          o2(this, e3), this._groupModule = t3, this._className = "AVChatRoomHandler", this._joinedGroupMap = /* @__PURE__ */ new Map(), this._pollingRequestInfoMap = /* @__PURE__ */ new Map(), this._pollingInstanceMap = /* @__PURE__ */ new Map(), this.sequencesLinkedList = new aM(200), this.messageIDLinkedList = new aM(100), this.receivedMessageCount = 0, this._reportMessageStackedCount = 0, this._onlineMemberCountMap = /* @__PURE__ */ new Map(), this.DEFAULT_EXPIRE_TIME = 60, this.DEFAULT_POLLING_INTERVAL = 300, this.MAX_POLLING_INTERVAL = 2e3, this._pollingInterval = this.DEFAULT_POLLING_INTERVAL, this.DEFAULT_POLLING_NO_MESSAGE_COUNT = 20, this.DEFAULT_POLLING_INTERVAL_PLUS = 2e3, this._pollingNoMessageCount = 0;
        }
        return a2(e3, [{ key: "hasJoinedAVChatRoom", value: function() {
          return this._joinedGroupMap.size > 0;
        } }, { key: "checkJoinedAVChatRoomByID", value: function(e4) {
          return this._joinedGroupMap.has(e4);
        } }, { key: "getJoinedAVChatRoom", value: function() {
          return this._joinedGroupMap.size > 0 ? v2(this._joinedGroupMap.keys()) : null;
        } }, { key: "_updateRequestData", value: function(e4) {
          return t2({}, this._pollingRequestInfoMap.get(e4));
        } }, { key: "_handleSuccess", value: function(e4, t3) {
          var n3 = t3.data, o3 = n3.key, r3 = n3.nextSeq, a3 = n3.rspMsgList;
          if (0 !== n3.errorCode) {
            var s3 = this._pollingRequestInfoMap.get(e4), i3 = new __(f_.LONG_POLLING_AV_ERROR), c3 = s3 ? "".concat(s3.key, "-").concat(s3.startSeq) : "requestInfo is undefined";
            i3.setMessage("".concat(e4, "-").concat(c3, "-").concat(t3.errorInfo)).setCode(t3.errorCode).setNetworkType(this._groupModule.getNetworkType()).end(true);
          } else {
            if (!this.checkJoinedAVChatRoomByID(e4))
              return;
            zl(o3) && $l(r3) && this._pollingRequestInfoMap.set(e4, { key: o3, startSeq: r3 }), Ql(a3) && a3.length > 0 ? (a3.forEach(function(e5) {
              e5.to = e5.groupID;
            }), this.onMessage(a3)) : (this._pollingNoMessageCount += 1, this._pollingNoMessageCount === this.DEFAULT_POLLING_NO_MESSAGE_COUNT && (this._pollingInterval = this.DEFAULT_POLLING_INTERVAL + this.DEFAULT_POLLING_INTERVAL_PLUS));
          }
        } }, { key: "_handleFailure", value: function(e4, t3) {
        } }, { key: "onMessage", value: function(e4) {
          if (Ql(e4) && 0 !== e4.length) {
            0 !== this._pollingNoMessageCount && (this._pollingNoMessageCount = 0, this._pollingInterval = this.DEFAULT_POLLING_INTERVAL);
            var t3 = null, n3 = [], o3 = this._getModule(sg), r3 = this._getModule(Ig), a3 = e4.length;
            a3 > 1 && e4.sort(function(e5, t4) {
              return e5.sequence - t4.sequence;
            });
            for (var s3 = this._getModule(ig), i3 = 0; i3 < a3; i3++)
              if (mM[e4[i3].event]) {
                this.receivedMessageCount += 1, t3 = this.packMessage(e4[i3], e4[i3].event);
                var c3 = 1 === e4[i3].isModified, u3 = 1 === e4[i3].isHistoryMessage;
                if ((s3.isUnlimitedAVChatRoom() || !this.sequencesLinkedList.has(t3.sequence)) && !this.messageIDLinkedList.has(t3.ID)) {
                  var l3 = t3.conversationID;
                  if (this.receivedMessageCount % 50 == 0 ? this._getModule(mg).detectFirstRound(l3, this.sequencesLinkedList.data()) : this.receivedMessageCount % 80 == 0 && this._getModule(mg).detectSecondRound(l3, this.sequencesLinkedList.data()), null !== this.sequencesLinkedList.tail()) {
                    var d3 = this.sequencesLinkedList.tail().value, p3 = t3.sequence - d3;
                    p3 > 1 && p3 <= 20 ? this._getModule(mg).onMessageMaybeLost(l3, d3 + 1, p3 - 1) : p3 < -1 && p3 >= -20 && this._getModule(mg).onMessageMaybeLost(l3, t3.sequence + 1, Math.abs(p3) - 1);
                  }
                  this.sequencesLinkedList.set(t3.sequence), this.messageIDLinkedList.set(t3.ID);
                  var g3 = false;
                  if (this._isMessageSentByCurrentInstance(t3) ? c3 && (g3 = true, t3.isModified = c3, o3.updateMessageIsModifiedProperty(t3)) : g3 = true, g3) {
                    if (!u3 && t3.conversationType !== gr.CONV_SYSTEM) {
                      var h3 = t3.conversationID.replace(gr.CONV_GROUP, "");
                      this._pollingInstanceMap.has(h3) ? r3.addMessageSequence({ key: l_, message: t3 }) : (t3.type !== gr.MSG_GRP_TIP && t3.clientTime > 0 && r3.addMessageDelay(t3.clientTime), r3.addMessageSequence({ key: u_, message: t3 }));
                    }
                    n3.push(t3);
                  }
                }
              } else
                wl.warn("".concat(this._className, ".onMessage 未处理的 event 类型: ").concat(e4[i3].event));
            if (0 !== n3.length) {
              this._groupModule.filterModifiedMessage(n3);
              var _3 = this.packConversationOption(n3);
              if (_3.length > 0)
                this._getModule(sg).onNewMessage({ conversationOptionsList: _3, isInstantMessage: true });
              wl.debug("".concat(this._className, ".onMessage count:").concat(n3.length)), this._checkMessageStacked(n3);
              var f3 = this._groupModule.filterUnmodifiedMessage(n3);
              f3.length > 0 && this._groupModule.emitOuterEvent(pr.MESSAGE_RECEIVED, f3), n3.length = 0;
            }
          }
        } }, { key: "_checkMessageStacked", value: function(e4) {
          var t3 = e4.length;
          t3 >= 100 && (wl.warn("".concat(this._className, "._checkMessageStacked 直播群消息堆积数:").concat(e4.length, '！可能会导致微信小程序渲染时遇到 "Dom limit exceeded" 的错误，建议接入侧此时只渲染最近的10条消息')), this._reportMessageStackedCount < 5 && (new __(f_.MESSAGE_STACKED).setNetworkType(this._groupModule.getNetworkType()).setMessage("count:".concat(t3, " groupID:").concat(v2(this._joinedGroupMap.keys()))).setLevel("warning").end(), this._reportMessageStackedCount += 1));
        } }, { key: "_isMessageSentByCurrentInstance", value: function(e4) {
          return !!this._getModule(sg).isMessageSentByCurrentInstance(e4);
        } }, { key: "packMessage", value: function(e4, t3) {
          e4.currentUser = this._groupModule.getMyUserID(), e4.conversationType = 5 === t3 ? gr.CONV_SYSTEM : gr.CONV_GROUP, e4.isSystemMessage = !!e4.isSystemMessage;
          var n3 = new Mv(e4), o3 = this.packElements(e4, t3);
          return n3.setElement(o3), n3;
        } }, { key: "packElements", value: function(e4, n3) {
          return 4 === n3 || 6 === n3 ? (this._updateMemberCountByGroupTips(e4), this._onGroupAttributesUpdated(e4), { type: gr.MSG_GRP_TIP, content: t2(t2({}, e4.elements), {}, { groupProfile: e4.groupProfile }) }) : 5 === n3 ? { type: gr.MSG_GRP_SYS_NOTICE, content: t2(t2({}, e4.elements), {}, { groupProfile: t2(t2({}, e4.groupProfile), {}, { groupID: e4.groupID }) }) } : this._getModule(dg).parseElements(e4.elements, e4.from);
        } }, { key: "packConversationOption", value: function(e4) {
          for (var t3 = /* @__PURE__ */ new Map(), n3 = 0; n3 < e4.length; n3++) {
            var o3 = e4[n3], r3 = o3.conversationID;
            if (t3.has(r3)) {
              var a3 = t3.get(r3);
              a3.lastMessage = o3, "in" === o3.flow && a3.unreadCount++;
            } else
              t3.set(r3, { conversationID: o3.conversationID, unreadCount: "out" === o3.flow ? 0 : 1, type: o3.conversationType, subType: o3.conversationSubType, lastMessage: o3 });
          }
          return v2(t3.values());
        } }, { key: "_updateMemberCountByGroupTips", value: function(e4) {
          var t3 = e4.groupProfile.groupID, n3 = e4.elements.onlineMemberInfo, o3 = void 0 === n3 ? void 0 : n3;
          if (!qd(o3)) {
            var r3 = o3.onlineMemberNum, a3 = void 0 === r3 ? 0 : r3, s3 = o3.expireTime, i3 = void 0 === s3 ? this.DEFAULT_EXPIRE_TIME : s3, c3 = this._onlineMemberCountMap.get(t3) || {}, u3 = Date.now();
            qd(c3) ? Object.assign(c3, { lastReqTime: 0, lastSyncTime: 0, latestUpdateTime: u3, memberCount: a3, expireTime: i3 }) : (c3.latestUpdateTime = u3, c3.memberCount = a3), wl.debug("".concat(this._className, "._updateMemberCountByGroupTips info:"), c3), this._onlineMemberCountMap.set(t3, c3);
          }
        } }, { key: "start", value: function(e4) {
          if (this._pollingInstanceMap.has(e4)) {
            var t3 = this._pollingInstanceMap.get(e4);
            t3.isRunning() || t3.start();
          } else {
            var n3 = new fM({ manager: this, groupID: e4, onInit: this._updateRequestData.bind(this), onSuccess: this._handleSuccess.bind(this), onFail: this._handleFailure.bind(this) });
            n3.start(), this._pollingInstanceMap.set(e4, n3), wl.log("".concat(this._className, ".start groupID:").concat(e4));
          }
        } }, { key: "handleJoinResult", value: function(e4) {
          var t3 = this;
          return this._preCheck().then(function() {
            var n3 = e4.longPollingKey, o3 = e4.group, r3 = o3.groupID;
            return t3._joinedGroupMap.set(r3, o3), t3._groupModule.updateGroupMap([o3]), t3._groupModule.deleteUnjoinedAVChatRoom(r3), t3._groupModule.emitGroupListUpdate(true, false), Zl(n3) ? Ov({ status: Kl, group: o3 }) : Promise.resolve();
          });
        } }, { key: "startRunLoop", value: function(e4) {
          var t3 = this;
          return this.handleJoinResult(e4).then(function() {
            var n3 = e4.longPollingKey, o3 = e4.group, r3 = o3.groupID;
            return t3._pollingRequestInfoMap.set(r3, { key: n3, startSeq: 0 }), t3.start(r3), t3._groupModule.isLoggedIn() ? Ov({ status: Kl, group: o3 }) : Ov({ status: Kl });
          });
        } }, { key: "_preCheck", value: function() {
          if (this._getModule(ig).isUnlimitedAVChatRoom())
            return Promise.resolve();
          if (!this.hasJoinedAVChatRoom())
            return Promise.resolve();
          var e4 = m2(this._joinedGroupMap.entries().next().value, 2), t3 = e4[0], n3 = e4[1];
          if (this._groupModule.isLoggedIn()) {
            if (!(n3.selfInfo.role === gr.GRP_MBR_ROLE_OWNER || n3.ownerID === this._groupModule.getMyUserID()))
              return this._groupModule.quitGroup(t3);
            this._groupModule.deleteLocalGroupAndConversation(t3);
          } else
            this._groupModule.deleteLocalGroupAndConversation(t3);
          return this.reset(t3), Promise.resolve();
        } }, { key: "joinWithoutAuth", value: function(e4) {
          var t3 = this, n3 = e4.groupID, o3 = "".concat(this._className, ".joinWithoutAuth"), r3 = new __(f_.JOIN_WITHOUT_AUTH);
          return this._groupModule.request({ protocolName: nh, requestData: e4 }).then(function(e5) {
            var a3 = e5.data.longPollingKey;
            if (t3._groupModule.probeNetwork().then(function(e6) {
              var t4 = m2(e6, 2), o4 = (t4[0], t4[1]);
              r3.setNetworkType(o4).setMessage("groupID:".concat(n3, " longPollingKey:").concat(a3)).end(true);
            }), Zl(a3))
              return Rv(new Av({ code: Zh.CANNOT_JOIN_NON_AVCHATROOM_WITHOUT_LOGIN, message: e_.CANNOT_JOIN_NON_AVCHATROOM_WITHOUT_LOGIN }));
            wl.log("".concat(o3, " ok. groupID:").concat(n3)), t3._getModule(sg).setCompleted("".concat(gr.CONV_GROUP).concat(n3));
            var s3 = new iM({ groupID: n3 });
            return t3.startRunLoop({ group: s3, longPollingKey: a3 }), yv({ status: Kl });
          }).catch(function(e5) {
            return wl.error("".concat(o3, " failed. groupID:").concat(n3, " error:"), e5), t3._groupModule.probeNetwork().then(function(t4) {
              var o4 = m2(t4, 2), a3 = o4[0], s3 = o4[1];
              r3.setError(e5, a3, s3).setMessage("groupID:".concat(n3)).end(true);
            }), Rv(e5);
          }).finally(function() {
            t3._groupModule.getModule(ug).reportAtOnce();
          });
        } }, { key: "getGroupOnlineMemberCount", value: function(e4) {
          var t3 = this._onlineMemberCountMap.get(e4) || {}, n3 = Date.now();
          return qd(t3) || n3 - t3.lastSyncTime > 1e3 * t3.expireTime && n3 - t3.latestUpdateTime > 1e4 && n3 - t3.lastReqTime > 3e3 ? (t3.lastReqTime = n3, this._onlineMemberCountMap.set(e4, t3), this._getGroupOnlineMemberCount(e4).then(function(e5) {
            return yv({ memberCount: e5.memberCount });
          }).catch(function(e5) {
            return Rv(e5);
          })) : Ov({ memberCount: t3.memberCount });
        } }, { key: "_getGroupOnlineMemberCount", value: function(e4) {
          var t3 = this, n3 = "".concat(this._className, "._getGroupOnlineMemberCount");
          return this._groupModule.request({ protocolName: yh, requestData: { groupID: e4 } }).then(function(o3) {
            var r3 = t3._onlineMemberCountMap.get(e4) || {}, a3 = o3.data, s3 = a3.onlineMemberNum, i3 = void 0 === s3 ? 0 : s3, c3 = a3.expireTime, u3 = void 0 === c3 ? t3.DEFAULT_EXPIRE_TIME : c3;
            wl.log("".concat(n3, " ok. groupID:").concat(e4, " memberCount:").concat(i3, " expireTime:").concat(u3));
            var l3 = Date.now();
            return qd(r3) && (r3.lastReqTime = l3), t3._onlineMemberCountMap.set(e4, Object.assign(r3, { lastSyncTime: l3, latestUpdateTime: l3, memberCount: i3, expireTime: u3 })), { memberCount: i3 };
          }).catch(function(o3) {
            return wl.warn("".concat(n3, " failed. error:"), o3), new __(f_.GET_GROUP_ONLINE_MEMBER_COUNT).setCode(o3.code).setMessage("groupID:".concat(e4, " error:").concat(JSON.stringify(o3))).setNetworkType(t3._groupModule.getNetworkType()).end(), Promise.reject(o3);
          });
        } }, { key: "_onGroupAttributesUpdated", value: function(e4) {
          var t3 = e4.groupProfile.groupID, n3 = e4.elements, o3 = n3.operationType, r3 = n3.newGroupProfile;
          if (6 === o3) {
            var a3 = (void 0 === r3 ? void 0 : r3).groupAttributeOption;
            qd(a3) || this._groupModule.onGroupAttributesUpdated({ groupID: t3, groupAttributeOption: a3 });
          }
        } }, { key: "_getModule", value: function(e4) {
          return this._groupModule.getModule(e4);
        } }, { key: "setPollingInterval", value: function(e4) {
          Zl(e4) || ($l(e4) ? this._pollingInterval = this.DEFAULT_POLLING_INTERVAL = e4 : this._pollingInterval = this.DEFAULT_POLLING_INTERVAL = parseInt(e4, 10));
        } }, { key: "setPollingIntervalPlus", value: function(e4) {
          Zl(e4) || ($l(e4) ? this.DEFAULT_POLLING_INTERVAL_PLUS = e4 : this.DEFAULT_POLLING_INTERVAL_PLUS = parseInt(e4, 10));
        } }, { key: "setPollingNoMessageCount", value: function(e4) {
          Zl(e4) || ($l(e4) ? this.DEFAULT_POLLING_NO_MESSAGE_COUNT = e4 : this.DEFAULT_POLLING_NO_MESSAGE_COUNT = parseInt(e4, 10));
        } }, { key: "getPollingInterval", value: function() {
          return this._pollingInterval;
        } }, { key: "reset", value: function(e4) {
          if (e4) {
            wl.log("".concat(this._className, ".reset groupID:").concat(e4));
            var t3 = this._pollingInstanceMap.get(e4);
            t3 && t3.stop(), this._pollingInstanceMap.delete(e4), this._joinedGroupMap.delete(e4), this._pollingRequestInfoMap.delete(e4), this._onlineMemberCountMap.delete(e4);
          } else {
            wl.log("".concat(this._className, ".reset all"));
            var n3, o3 = S2(this._pollingInstanceMap.values());
            try {
              for (o3.s(); !(n3 = o3.n()).done; ) {
                n3.value.stop();
              }
            } catch (r3) {
              o3.e(r3);
            } finally {
              o3.f();
            }
            this._pollingInstanceMap.clear(), this._joinedGroupMap.clear(), this._pollingRequestInfoMap.clear(), this._onlineMemberCountMap.clear();
          }
          this.sequencesLinkedList.reset(), this.messageIDLinkedList.reset(), this.receivedMessageCount = 0, this._reportMessageStackedCount = 0, this._pollingInterval = this.DEFAULT_POLLING_INTERVAL = 300, this.DEFAULT_POLLING_NO_MESSAGE_COUNT = 20, this.DEFAULT_POLLING_INTERVAL_PLUS = 2e3, this._pollingNoMessageCount = 0;
        } }]), e3;
      }(), MM = 1, yM = 15, IM = function() {
        function e3(t3) {
          o2(this, e3), this._groupModule = t3, this._className = "GroupSystemNoticeHandler", this.pendencyMap = /* @__PURE__ */ new Map();
        }
        return a2(e3, [{ key: "onNewGroupSystemNotice", value: function(e4) {
          var t3 = e4.dataList, n3 = e4.isSyncingEnded, o3 = e4.isInstantMessage;
          wl.debug("".concat(this._className, ".onReceiveSystemNotice count:").concat(t3.length));
          var r3 = this.newSystemNoticeStoredAndSummary({ notifiesList: t3, isInstantMessage: o3 }), a3 = r3.eventDataList, s3 = r3.result;
          a3.length > 0 && (this._groupModule.getModule(sg).onNewMessage({ conversationOptionsList: a3, isInstantMessage: o3 }), this._onReceivedGroupSystemNotice({ result: s3, isInstantMessage: o3 }));
          o3 ? s3.length > 0 && this._groupModule.emitOuterEvent(pr.MESSAGE_RECEIVED, s3) : true === n3 && this._clearGroupSystemNotice();
        } }, { key: "newSystemNoticeStoredAndSummary", value: function(e4) {
          var n3 = e4.notifiesList, o3 = e4.isInstantMessage, r3 = null, a3 = n3.length, s3 = 0, i3 = [], c3 = { conversationID: gr.CONV_SYSTEM, unreadCount: 0, type: gr.CONV_SYSTEM, subType: null, lastMessage: null };
          for (s3 = 0; s3 < a3; s3++) {
            var u3 = n3[s3], l3 = u3.groupProfile, d3 = l3.communityType, p3 = void 0 === d3 ? 0 : d3, g3 = l3.topicID, h3 = void 0 === g3 ? void 0 : g3, _3 = u3.elements.topicIDList, f3 = void 0 === _3 ? void 0 : _3;
            if (2 !== p3 || qd(h3) && qd(f3)) {
              if (u3.elements.operationType !== yM)
                u3.currentUser = this._groupModule.getMyUserID(), u3.conversationType = gr.CONV_SYSTEM, u3.conversationID = gr.CONV_SYSTEM, (r3 = new Mv(u3)).setElement({ type: gr.MSG_GRP_SYS_NOTICE, content: t2(t2({}, u3.elements), {}, { groupProfile: u3.groupProfile }) }), r3.isSystemMessage = true, (1 === r3.sequence && 1 === r3.random || 2 === r3.sequence && 2 === r3.random) && (r3.sequence = ld(), r3.random = ld(), r3.generateMessageID(), wl.log("".concat(this._className, ".newSystemNoticeStoredAndSummary sequence and random maybe duplicated, regenerate. ID:").concat(r3.ID))), this._groupModule.getModule(sg).pushIntoNoticeResult(i3, r3) && (o3 ? c3.unreadCount++ : r3.setIsRead(true), c3.subType = r3.conversationSubType);
            } else
              this._handleTopicSystemNotice(u3);
          }
          return c3.lastMessage = i3[i3.length - 1], { eventDataList: i3.length > 0 ? [c3] : [], result: i3 };
        } }, { key: "_clearGroupSystemNotice", value: function() {
          var e4 = this;
          this.getPendencyList().then(function(t3) {
            t3.forEach(function(t4) {
              e4.pendencyMap.set("".concat(t4.from, "_").concat(t4.groupID, "_").concat(t4.to), t4);
            });
            var n3 = e4._groupModule.getModule(sg).getLocalMessageList(gr.CONV_SYSTEM), o3 = [];
            n3.forEach(function(t4) {
              var n4 = t4.payload, r3 = n4.operatorID, a3 = n4.operationType, s3 = n4.groupProfile;
              if (a3 === MM) {
                var i3 = "".concat(r3, "_").concat(s3.groupID, "_").concat(s3.to), c3 = e4.pendencyMap.get(i3);
                c3 && $l(c3.handled) && 0 !== c3.handled && o3.push(t4);
              }
            }), e4.deleteGroupSystemNotice({ messageList: o3 });
          });
        } }, { key: "deleteGroupSystemNotice", value: function(e4) {
          var t3 = this, n3 = "".concat(this._className, ".deleteGroupSystemNotice");
          return Ql(e4.messageList) && 0 !== e4.messageList.length ? (wl.log("".concat(n3, " ") + e4.messageList.map(function(e5) {
            return e5.ID;
          })), this._groupModule.request({ protocolName: mh, requestData: { messageListToDelete: e4.messageList.map(function(e5) {
            return { from: gr.CONV_SYSTEM, messageSeq: e5.clientSequence, messageRandom: e5.random };
          }) } }).then(function() {
            wl.log("".concat(n3, " ok"));
            var o3 = t3._groupModule.getModule(sg);
            return e4.messageList.forEach(function(e5) {
              o3.deleteLocalMessage(e5);
            }), yv();
          }).catch(function(e5) {
            return wl.error("".concat(n3, " error:"), e5), Rv(e5);
          })) : Ov();
        } }, { key: "getPendencyList", value: function(e4) {
          var t3 = this;
          return this._groupModule.request({ protocolName: fh, requestData: { startTime: e4 && e4.startTime ? e4.startTime : 0, limit: e4 && e4.limit ? e4.limit : 10, handleAccount: this._groupModule.getMyUserID() } }).then(function(e5) {
            var n3 = e5.data.pendencyList;
            return 0 !== e5.data.nextStartTime ? t3.getPendencyList({ startTime: e5.data.nextStartTime }).then(function(e6) {
              return [].concat(v2(n3), v2(e6));
            }) : n3;
          });
        } }, { key: "_onReceivedGroupSystemNotice", value: function(e4) {
          var t3 = this, n3 = e4.result;
          e4.isInstantMessage && n3.forEach(function(e5) {
            switch (e5.payload.operationType) {
              case 1:
                break;
              case 2:
                t3._onApplyGroupRequestAgreed(e5);
                break;
              case 3:
                break;
              case 4:
                t3._onMemberKicked(e5);
                break;
              case 5:
                t3._onGroupDismissed(e5);
                break;
              case 6:
                break;
              case 7:
                t3._onInviteGroup(e5);
                break;
              case 8:
                t3._onQuitGroup(e5);
                break;
              case 9:
                t3._onSetManager(e5);
                break;
              case 10:
                t3._onDeleteManager(e5);
            }
          });
        } }, { key: "_onApplyGroupRequestAgreed", value: function(e4) {
          var t3 = this, n3 = e4.payload.groupProfile.groupID;
          this._groupModule.hasLocalGroup(n3) || this._groupModule.getGroupProfile({ groupID: n3 }).then(function(e5) {
            var n4 = e5.data.group;
            if (n4) {
              t3._groupModule.updateGroupMap([n4]);
              var o3 = !n4.isSupportTopic;
              t3._groupModule.emitGroupListUpdate(true, o3);
            }
          });
        } }, { key: "_onMemberKicked", value: function(e4) {
          var t3 = e4.payload.groupProfile.groupID;
          this._groupModule.hasLocalGroup(t3) && this._groupModule.deleteLocalGroupAndConversation(t3);
        } }, { key: "_onGroupDismissed", value: function(e4) {
          var t3 = e4.payload.groupProfile.groupID;
          this._groupModule.hasLocalGroup(t3) && this._groupModule.deleteLocalGroupAndConversation(t3);
          var n3 = this._groupModule._AVChatRoomHandler;
          n3 && n3.checkJoinedAVChatRoomByID(t3) && n3.reset(t3);
        } }, { key: "_onInviteGroup", value: function(e4) {
          var t3 = this, n3 = e4.payload.groupProfile.groupID;
          this._groupModule.hasLocalGroup(n3) || this._groupModule.getGroupProfile({ groupID: n3 }).then(function(e5) {
            var n4 = e5.data.group;
            n4 && (t3._groupModule.updateGroupMap([n4]), t3._groupModule.emitGroupListUpdate());
          });
        } }, { key: "_onQuitGroup", value: function(e4) {
          var t3 = e4.payload.groupProfile.groupID;
          this._groupModule.hasLocalGroup(t3) && this._groupModule.deleteLocalGroupAndConversation(t3);
        } }, { key: "_onSetManager", value: function(e4) {
          var t3 = e4.payload.groupProfile, n3 = t3.to, o3 = t3.groupID, r3 = this._groupModule.getModule(rg).getLocalGroupMemberInfo(o3, n3);
          r3 && r3.updateRole(gr.GRP_MBR_ROLE_ADMIN);
        } }, { key: "_onDeleteManager", value: function(e4) {
          var t3 = e4.payload.groupProfile, n3 = t3.to, o3 = t3.groupID, r3 = this._groupModule.getModule(rg).getLocalGroupMemberInfo(o3, n3);
          r3 && r3.updateRole(gr.GRP_MBR_ROLE_MEMBER);
        } }, { key: "_handleTopicSystemNotice", value: function(e4) {
          var t3 = e4.groupProfile, n3 = t3.groupID, o3 = t3.topicID, r3 = e4.elements, a3 = r3.operationType, s3 = r3.topicIDList, i3 = this._groupModule.getModule(ag);
          17 === a3 ? i3.onTopicCreated({ groupID: n3, topicID: o3 }) : 18 === a3 && i3.onTopicDeleted({ groupID: n3, topicIDList: s3 });
        } }, { key: "reset", value: function() {
          this.pendencyMap.clear();
        } }]), e3;
      }(), EM = ["relayFlag"], TM = function(e3) {
        i2(r3, e3);
        var n3 = f2(r3);
        function r3(e4) {
          var t3;
          return o2(this, r3), (t3 = n3.call(this, e4))._className = "GroupModule", t3._commonGroupHandler = null, t3._AVChatRoomHandler = null, t3._groupSystemNoticeHandler = null, t3._commonGroupHandler = new gM(h2(t3)), t3._groupAttributesHandler = new _M(h2(t3)), t3._AVChatRoomHandler = new vM(h2(t3)), t3._groupTipsHandler = new pM(h2(t3)), t3._groupSystemNoticeHandler = new IM(h2(t3)), t3.groupMap = /* @__PURE__ */ new Map(), t3._unjoinedAVChatRoomList = /* @__PURE__ */ new Map(), t3._receiptDetailCompleteMap = /* @__PURE__ */ new Map(), t3.getInnerEmitterInstance().on($v, t3._onCloudConfigUpdated, h2(t3)), t3;
        }
        return a2(r3, [{ key: "_onCloudConfigUpdated", value: function() {
          var e4 = this.getCloudConfig("polling_interval"), t3 = this.getCloudConfig("polling_interval_plus"), n4 = this.getCloudConfig("polling_no_msg_count");
          this._AVChatRoomHandler && (wl.log("".concat(this._className, "._onCloudConfigUpdated pollingInterval:").concat(e4) + " pollingIntervalPlus:".concat(t3, " pollingNoMessageCount:").concat(n4)), this._AVChatRoomHandler.setPollingInterval(e4), this._AVChatRoomHandler.setPollingIntervalPlus(t3), this._AVChatRoomHandler.setPollingNoMessageCount(n4));
        } }, { key: "onCheckTimer", value: function(e4) {
          this.isLoggedIn() && (this._commonGroupHandler.onCheckTimer(e4), this._groupTipsHandler.onCheckTimer(e4));
        } }, { key: "guardForAVChatRoom", value: function(e4) {
          var t3 = this;
          if (e4.conversationType === gr.CONV_GROUP) {
            var n4 = Ed(e4.to) ? wd(e4.to) : e4.to;
            return this.hasLocalGroup(n4) ? Ov() : this.getGroupProfile({ groupID: n4 }).then(function(o3) {
              var r4 = o3.data.group.type;
              if (wl.log("".concat(t3._className, ".guardForAVChatRoom. groupID:").concat(n4, " type:").concat(r4)), r4 === gr.GRP_AVCHATROOM) {
                var a3 = "userId:".concat(e4.from, " 未加入群 groupID:").concat(n4, "。发消息前先使用 joinGroup 接口申请加群，详细请参考 https://web.sdk.qcloud.com/im/doc/zh-cn/SDK.html#joinGroup");
                return wl.warn("".concat(t3._className, ".guardForAVChatRoom sendMessage not allowed. ").concat(a3)), Rv(new Av({ code: Zh.MESSAGE_SEND_FAIL, message: a3, data: { message: e4 } }));
              }
              return Ov();
            });
          }
          return Ov();
        } }, { key: "checkJoinedAVChatRoomByID", value: function(e4) {
          return !!this._AVChatRoomHandler && this._AVChatRoomHandler.checkJoinedAVChatRoomByID(e4);
        } }, { key: "onNewGroupMessage", value: function(e4) {
          this._commonGroupHandler && this._commonGroupHandler.onNewGroupMessage(e4);
        } }, { key: "updateNextMessageSeq", value: function(e4) {
          var t3 = this;
          if (Ql(e4)) {
            var n4 = this.getModule(ag);
            e4.forEach(function(e5) {
              var o3 = e5.conversationID.replace(gr.CONV_GROUP, "");
              if (Ed(o3)) {
                var r4 = e5.lastMessage.sequence + 1, a3 = wd(o3), s3 = n4.getLocalTopic(a3, o3);
                s3 && (s3.updateNextMessageSeq(r4), s3.updateLastMessage(e5.lastMessage));
              }
              t3.groupMap.has(o3) && (t3.groupMap.get(o3).nextMessageSeq = e5.lastMessage.sequence + 1);
            });
          }
        } }, { key: "onNewGroupTips", value: function(e4) {
          this._groupTipsHandler && this._groupTipsHandler.onNewGroupTips(e4);
        } }, { key: "onGroupMessageRevoked", value: function(e4) {
          this._commonGroupHandler && this._commonGroupHandler.onGroupMessageRevoked(e4);
        } }, { key: "onNewGroupSystemNotice", value: function(e4) {
          this._groupSystemNoticeHandler && this._groupSystemNoticeHandler.onNewGroupSystemNotice(e4);
        } }, { key: "onGroupMessageReadNotice", value: function(e4) {
          var t3 = this;
          e4.dataList.forEach(function(e5) {
            var n4 = e5.elements.groupMessageReadNotice;
            if (!Zl(n4)) {
              var o3 = t3.getModule(sg);
              n4.forEach(function(e6) {
                var n5 = e6.groupID, r4 = e6.topicID, a3 = void 0 === r4 ? void 0 : r4, s3 = e6.lastMessageSeq;
                wl.debug("".concat(t3._className, ".onGroupMessageReadNotice groupID:").concat(n5, " lastMessageSeq:").concat(s3));
                var i3 = "".concat(gr.CONV_GROUP).concat(n5), c3 = true;
                qd(a3) || (i3 = "".concat(gr.CONV_GROUP).concat(a3), c3 = false), o3.updateIsReadAfterReadReport({ conversationID: i3, lastMessageSeq: s3 }), o3.updateUnreadCount(i3, c3);
              });
            }
          });
        } }, { key: "onReadReceiptList", value: function(e4) {
          var t3 = this;
          wl.debug("".concat(this._className, ".onReadReceiptList options:"), JSON.stringify(e4)), e4.dataList.forEach(function(e5) {
            var n4 = e5.groupProfile, o3 = e5.elements, r4 = n4.groupID, a3 = t3.getModule(sg), s3 = o3.readReceiptList;
            a3.updateReadReceiptInfo({ groupID: r4, readReceiptList: s3 });
          });
        } }, { key: "onGroupMessageModified", value: function(e4) {
          wl.debug("".concat(this._className, ".onGroupMessageModified options:"), JSON.stringify(e4));
          var n4 = this.getModule(sg);
          e4.dataList.forEach(function(e5) {
            n4.onMessageModified(t2(t2({}, e5), {}, { conversationType: gr.CONV_GROUP, to: e5.topicID ? e5.topicID : e5.groupID }));
          });
        } }, { key: "deleteGroupSystemNotice", value: function(e4) {
          this._groupSystemNoticeHandler && this._groupSystemNoticeHandler.deleteGroupSystemNotice(e4);
        } }, { key: "initGroupMap", value: function(e4) {
          this.groupMap.set(e4.groupID, new iM(e4));
        } }, { key: "deleteGroup", value: function(e4) {
          this.groupMap.delete(e4);
        } }, { key: "updateGroupMap", value: function(e4) {
          var t3 = this;
          e4.forEach(function(e5) {
            t3.groupMap.has(e5.groupID) ? t3.groupMap.get(e5.groupID).updateGroup(e5) : t3.groupMap.set(e5.groupID, new iM(e5));
          });
          var n4, o3 = this.getMyUserID(), r4 = S2(this.groupMap);
          try {
            for (r4.s(); !(n4 = r4.n()).done; ) {
              m2(n4.value, 2)[1].selfInfo.userID = o3;
            }
          } catch (a3) {
            r4.e(a3);
          } finally {
            r4.f();
          }
          this._setStorageGroupList();
        } }, { key: "getStorageGroupList", value: function() {
          return this.getModule(cg).getItem("groupMap");
        } }, { key: "_setStorageGroupList", value: function() {
          var e4 = this.getLocalGroupList().filter(function(e5) {
            var t3 = e5.type;
            return !yd(t3);
          }).filter(function(e5) {
            return !e5.isSupportTopic;
          }).slice(0, 20).map(function(e5) {
            return { groupID: e5.groupID, name: e5.name, avatar: e5.avatar, type: e5.type };
          });
          this.getModule(cg).setItem("groupMap", e4);
        } }, { key: "getGroupMap", value: function() {
          return this.groupMap;
        } }, { key: "getLocalGroupList", value: function() {
          return v2(this.groupMap.values());
        } }, { key: "getLocalGroupProfile", value: function(e4) {
          return this.groupMap.get(e4);
        } }, { key: "sortLocalGroupList", value: function() {
          var e4 = v2(this.groupMap).filter(function(e5) {
            var t3 = m2(e5, 2);
            t3[0];
            return !qd(t3[1].lastMessage);
          });
          e4.sort(function(e5, t3) {
            return t3[1].lastMessage.lastTime - e5[1].lastMessage.lastTime;
          }), this.groupMap = new Map(v2(e4));
        } }, { key: "updateGroupLastMessage", value: function(e4) {
          this._commonGroupHandler && this._commonGroupHandler.handleUpdateGroupLastMessage(e4);
        } }, { key: "emitGroupListUpdate", value: function() {
          var e4 = !(arguments.length > 0 && void 0 !== arguments[0]) || arguments[0], t3 = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1], n4 = this.getLocalGroupList();
          if (e4 && this.emitOuterEvent(pr.GROUP_LIST_UPDATED), t3) {
            var o3 = JSON.parse(JSON.stringify(n4)), r4 = this.getModule(sg);
            r4.updateConversationGroupProfile(o3);
          }
        } }, { key: "patchGroupMessageRemindType", value: function() {
          var e4 = this.getLocalGroupList(), t3 = this.getModule(sg), n4 = 0;
          e4.forEach(function(e5) {
            true === t3.patchMessageRemindType({ ID: e5.groupID, isC2CConversation: false, messageRemindType: e5.selfInfo.messageRemindType }) && (n4 += 1);
          }), wl.log("".concat(this._className, ".patchGroupMessageRemindType count:").concat(n4));
        } }, { key: "recomputeUnreadCount", value: function() {
          var e4 = this.getLocalGroupList(), t3 = this.getModule(sg);
          e4.forEach(function(e5) {
            var n4 = e5.groupID, o3 = e5.selfInfo, r4 = o3.excludedUnreadSequenceList, a3 = o3.readedSequence;
            if (Ql(r4)) {
              var s3 = 0;
              r4.forEach(function(t4) {
                t4 >= a3 && t4 <= e5.nextMessageSeq - 1 && (s3 += 1);
              }), s3 >= 1 && t3.recomputeGroupUnreadCount({ conversationID: "".concat(gr.CONV_GROUP).concat(n4), count: s3 });
            }
          });
        } }, { key: "getMyNameCardByGroupID", value: function(e4) {
          var t3 = this.getLocalGroupProfile(e4);
          return t3 ? t3.selfInfo.nameCard : "";
        } }, { key: "getGroupList", value: function(e4) {
          return this._commonGroupHandler ? this._commonGroupHandler.getGroupList(e4) : Ov();
        } }, { key: "getGroupProfile", value: function(e4) {
          var t3 = this, n4 = new __(f_.GET_GROUP_PROFILE), o3 = "".concat(this._className, ".getGroupProfile"), r4 = e4.groupID, a3 = e4.groupCustomFieldFilter;
          wl.log("".concat(o3, " groupID:").concat(r4));
          var s3 = { groupIDList: [r4], responseFilter: { groupBaseInfoFilter: ["Type", "Name", "Introduction", "Notification", "FaceUrl", "Owner_Account", "CreateTime", "InfoSeq", "LastInfoTime", "LastMsgTime", "MemberNum", "MaxMemberNum", "ApplyJoinOption", "NextMsgSeq", "ShutUpAllMember"], groupCustomFieldFilter: a3, memberInfoFilter: ["Role", "JoinTime", "MsgSeq", "MsgFlag", "NameCard"] } };
          return this.getGroupProfileAdvance(s3).then(function(e5) {
            var a4, s4 = e5.data, i3 = s4.successGroupList, c3 = s4.failureGroupList;
            if (wl.log("".concat(o3, " ok")), c3.length > 0)
              return Rv(c3[0]);
            (yd(i3[0].type) && !t3.hasLocalGroup(r4) ? a4 = new iM(i3[0]) : (t3.updateGroupMap(i3), a4 = t3.getLocalGroupProfile(r4)), a4.isSupportTopic) || t3.getModule(sg).updateConversationGroupProfile([a4]);
            return n4.setNetworkType(t3.getNetworkType()).setMessage("groupID:".concat(r4, " type:").concat(a4.type, " muteAllMembers:").concat(a4.muteAllMembers, " ownerID:").concat(a4.ownerID)).end(), yv({ group: a4 });
          }).catch(function(r5) {
            return t3.probeNetwork().then(function(t4) {
              var o4 = m2(t4, 2), a4 = o4[0], s4 = o4[1];
              n4.setError(r5, a4, s4).setMessage("groupID:".concat(e4.groupID)).end();
            }), wl.error("".concat(o3, " failed. error:"), r5), Rv(r5);
          });
        } }, { key: "getGroupProfileAdvance", value: function(e4) {
          var n4 = this, o3 = "".concat(this._className, ".getGroupProfileAdvance"), r4 = e4.groupIDList;
          Ql(r4) && r4.length > 50 && (wl.warn("".concat(o3, " 获取群资料的数量不能超过50个")), r4.length = 50);
          var a3 = [], s3 = [];
          r4.forEach(function(e5) {
            Id({ groupID: e5 }) ? s3.push(e5) : a3.push(e5);
          });
          var i3 = [];
          if (a3.length > 0) {
            var c3 = this._getGroupProfileAdvance(t2(t2({}, e4), {}, { groupIDList: a3 }));
            i3.push(c3);
          }
          if (s3.length > 0) {
            var u3 = this._getGroupProfileAdvance(t2(t2({}, e4), {}, { groupIDList: s3, relayFlag: a3.length > 0 }));
            i3.push(u3);
          }
          return Promise.all(i3).then(function(e5) {
            var t3 = [], n5 = [];
            return e5.forEach(function(e6) {
              t3.push.apply(t3, v2(e6.successGroupList)), n5.push.apply(n5, v2(e6.failureGroupList));
            }), yv({ successGroupList: t3, failureGroupList: n5 });
          }).catch(function(e5) {
            return wl.error("".concat(n4._className, "._getGroupProfileAdvance failed. error:"), e5), Rv(e5);
          });
        } }, { key: "_getGroupProfileAdvance", value: function(e4) {
          var t3 = this, n4 = e4.relayFlag, o3 = void 0 !== n4 && n4, r4 = g2(e4, EM);
          return this.request({ protocolName: Xg, requestData: r4 }).then(function(e5) {
            wl.log("".concat(t3._className, "._getGroupProfileAdvance ok."));
            var n5 = e5.data.groups;
            return { successGroupList: n5.filter(function(e6) {
              return Zl(e6.errorCode) || 0 === e6.errorCode;
            }), failureGroupList: n5.filter(function(e6) {
              return e6.errorCode && 0 !== e6.errorCode;
            }).map(function(e6) {
              return new Av({ code: e6.errorCode, message: e6.errorInfo, data: { groupID: e6.groupID } });
            }) };
          }).catch(function(t4) {
            return o3 && Id({ groupID: e4.groupIDList[0] }) ? { successGroupList: [], failureGroupList: [] } : Rv(t4);
          });
        } }, { key: "createGroup", value: function(e4) {
          var n4 = this, o3 = "".concat(this._className, ".createGroup"), r4 = e4.type, a3 = e4.groupID;
          if (!["Public", "Private", "ChatRoom", "AVChatRoom", "Community"].includes(r4))
            return Rv({ code: Zh.ILLEGAL_GROUP_TYPE, message: e_.ILLEGAL_GROUP_TYPE });
          if (!Id({ type: r4 })) {
            if (!qd(a3) && Id({ groupID: a3 }))
              return Rv({ code: Zh.ILLEGAL_GROUP_ID, message: e_.ILLEGAL_GROUP_ID });
            e4.isSupportTopic = void 0;
          }
          if (yd(r4) && !Zl(e4.memberList) && e4.memberList.length > 0 && (wl.warn("".concat(o3, " 创建 AVChatRoom 时不能添加群成员，自动忽略该字段")), e4.memberList = void 0), Md(r4) || Zl(e4.joinOption) || (wl.warn("".concat(o3, " 创建 Work/Meeting/AVChatRoom/Community 群时不能设置字段 joinOption，自动忽略该字段")), e4.joinOption = void 0), Id({ type: r4 })) {
            if (!qd(a3) && !Id({ groupID: a3 }))
              return Rv({ code: Zh.ILLEGAL_GROUP_ID, message: e_.ILLEGAL_GROUP_ID });
            e4.isSupportTopic = true === e4.isSupportTopic ? 1 : 0;
          }
          var s3 = new __(f_.CREATE_GROUP);
          wl.log("".concat(o3, " options:"), e4);
          var i3 = [];
          return this.request({ protocolName: Qg, requestData: t2(t2({}, e4), {}, { ownerID: this.getMyUserID(), webPushFlag: 1 }) }).then(function(r5) {
            var a4 = r5.data, c3 = a4.groupID, u3 = a4.overLimitUserIDList, l3 = void 0 === u3 ? [] : u3;
            if (i3 = l3, s3.setNetworkType(n4.getNetworkType()).setMessage("groupType:".concat(e4.type, " groupID:").concat(c3, " overLimitUserIDList=").concat(l3)).end(), wl.log("".concat(o3, " ok groupID:").concat(c3, " overLimitUserIDList:"), l3), e4.type === gr.GRP_AVCHATROOM)
              return n4.getGroupProfile({ groupID: c3 });
            if (e4.type === gr.GRP_COMMUNITY && 1 === e4.isSupportTopic)
              return n4.getGroupProfile({ groupID: c3 });
            qd(e4.memberList) || qd(l3) || (e4.memberList = e4.memberList.filter(function(e5) {
              return -1 === l3.indexOf(e5.userID);
            })), n4.updateGroupMap([t2(t2({}, e4), {}, { groupID: c3 })]);
            var d3 = n4.getModule(Zp), p3 = d3.createCustomMessage({ to: c3, conversationType: gr.CONV_GROUP, payload: { data: "group_create", extension: "".concat(n4.getMyUserID(), "创建群组") } });
            return d3.sendMessageInstance(p3), n4.emitGroupListUpdate(), n4.getGroupProfile({ groupID: c3 });
          }).then(function(e5) {
            var t3 = e5.data.group, n5 = t3.selfInfo, o4 = n5.nameCard, r5 = n5.joinTime;
            return t3.updateSelfInfo({ nameCard: o4, joinTime: r5, messageRemindType: gr.MSG_REMIND_ACPT_AND_NOTE, role: gr.GRP_MBR_ROLE_OWNER }), yv({ group: t3, overLimitUserIDList: i3 });
          }).catch(function(t3) {
            return s3.setMessage("groupType:".concat(e4.type)), n4.probeNetwork().then(function(e5) {
              var n5 = m2(e5, 2), o4 = n5[0], r5 = n5[1];
              s3.setError(t3, o4, r5).end();
            }), wl.error("".concat(o3, " failed. error:"), t3), Rv(t3);
          });
        } }, { key: "dismissGroup", value: function(e4) {
          var t3 = this, n4 = "".concat(this._className, ".dismissGroup");
          if (this.hasLocalGroup(e4) && this.getLocalGroupProfile(e4).type === gr.GRP_WORK)
            return Rv(new Av({ code: Zh.CANNOT_DISMISS_WORK, message: e_.CANNOT_DISMISS_WORK }));
          var o3 = new __(f_.DISMISS_GROUP);
          return o3.setMessage("groupID:".concat(e4)), wl.log("".concat(n4, " groupID:").concat(e4)), this.request({ protocolName: Zg, requestData: { groupID: e4 } }).then(function() {
            return o3.setNetworkType(t3.getNetworkType()).end(), wl.log("".concat(n4, " ok")), t3.deleteLocalGroupAndConversation(e4), t3.checkJoinedAVChatRoomByID(e4) && t3._AVChatRoomHandler.reset(e4), yv({ groupID: e4 });
          }).catch(function(e5) {
            return t3.probeNetwork().then(function(t4) {
              var n5 = m2(t4, 2), r4 = n5[0], a3 = n5[1];
              o3.setError(e5, r4, a3).end();
            }), wl.error("".concat(n4, " failed. error:"), e5), Rv(e5);
          });
        } }, { key: "updateGroupProfile", value: function(e4) {
          var t3 = this, n4 = "".concat(this._className, ".updateGroupProfile");
          !this.hasLocalGroup(e4.groupID) || Md(this.getLocalGroupProfile(e4.groupID).type) || Zl(e4.joinOption) || (wl.warn("".concat(n4, " Work/Meeting/AVChatRoom/Community 群不能设置字段 joinOption，自动忽略该字段")), e4.joinOption = void 0), Zl(e4.muteAllMembers) || (e4.muteAllMembers ? e4.muteAllMembers = "On" : e4.muteAllMembers = "Off");
          var o3 = new __(f_.UPDATE_GROUP_PROFILE);
          return o3.setMessage(JSON.stringify(e4)), wl.log("".concat(n4, " groupID:").concat(e4.groupID)), this.request({ protocolName: eh, requestData: e4 }).then(function() {
            (o3.setNetworkType(t3.getNetworkType()).end(), wl.log("".concat(n4, " ok")), t3.hasLocalGroup(e4.groupID)) && (t3.groupMap.get(e4.groupID).updateGroup(e4), t3._setStorageGroupList());
            return yv({ group: t3.groupMap.get(e4.groupID) });
          }).catch(function(e5) {
            return t3.probeNetwork().then(function(t4) {
              var n5 = m2(t4, 2), r4 = n5[0], a3 = n5[1];
              o3.setError(e5, r4, a3).end();
            }), wl.log("".concat(n4, " failed. error:"), e5), Rv(e5);
          });
        } }, { key: "joinGroup", value: function(e4) {
          var t3 = this, n4 = e4.groupID, o3 = e4.type, r4 = "".concat(this._className, ".joinGroup");
          if (o3 === gr.GRP_WORK) {
            var a3 = new Av({ code: Zh.CANNOT_JOIN_WORK, message: e_.CANNOT_JOIN_WORK });
            return Rv(a3);
          }
          if (this.deleteUnjoinedAVChatRoom(n4), this.hasLocalGroup(n4)) {
            if (!this.isLoggedIn())
              return Ov({ status: gr.JOIN_STATUS_ALREADY_IN_GROUP });
            var s3 = new __(f_.APPLY_JOIN_GROUP);
            return this.getGroupProfile({ groupID: n4 }).then(function() {
              return s3.setNetworkType(t3.getNetworkType()).setMessage("groupID:".concat(n4, " joinedStatus:").concat(gr.JOIN_STATUS_ALREADY_IN_GROUP)).end(), Ov({ status: gr.JOIN_STATUS_ALREADY_IN_GROUP });
            }).catch(function(o4) {
              return s3.setNetworkType(t3.getNetworkType()).setMessage("groupID:".concat(n4, " unjoined")).end(), wl.warn("".concat(r4, " ").concat(n4, " was unjoined, now join!")), t3.groupMap.delete(n4), t3.applyJoinGroup(e4);
            });
          }
          return wl.log("".concat(r4, " groupID:").concat(n4)), this.isLoggedIn() ? this.applyJoinGroup(e4) : this._AVChatRoomHandler.joinWithoutAuth(e4);
        } }, { key: "applyJoinGroup", value: function(e4) {
          var n4 = this, o3 = "".concat(this._className, ".applyJoinGroup"), r4 = e4.groupID, a3 = new __(f_.APPLY_JOIN_GROUP), s3 = t2({}, e4), i3 = this.canIUse(bu.AVCHATROOM_HISTORY_MSG);
          return i3 && (s3.historyMessageFlag = 1), this.getModule(sg).removeConversationMessageCache("".concat(gr.CONV_GROUP).concat(r4)), this.request({ protocolName: th, requestData: s3 }).then(function(e5) {
            var t3 = e5.data, s4 = t3.joinedStatus, c3 = t3.longPollingKey, u3 = t3.avChatRoomFlag, l3 = t3.avChatRoomKey, d3 = t3.messageList, p3 = "groupID:".concat(r4, " joinedStatus:").concat(s4, " longPollingKey:").concat(c3) + " avChatRoomFlag:".concat(u3, " canGetAVChatRoomHistoryMessage:").concat(i3, ",") + " history message count:".concat(qd(d3) ? 0 : d3.length);
            switch (a3.setNetworkType(n4.getNetworkType()).setMessage("".concat(p3)).end(), wl.log("".concat(o3, " ok. ").concat(p3)), s4) {
              case Hl:
                return yv({ status: Hl });
              case Kl:
                return n4.getGroupProfile({ groupID: r4 }).then(function(e6) {
                  var t4, o4 = e6.data.group, a4 = { status: Kl, group: o4 };
                  return 1 === u3 ? (n4.getModule(sg).setCompleted("".concat(gr.CONV_GROUP).concat(r4)), n4._groupAttributesHandler.initGroupAttributesCache({ groupID: r4, avChatRoomKey: l3 }), (t4 = Zl(c3) ? n4._AVChatRoomHandler.handleJoinResult({ group: o4 }) : n4._AVChatRoomHandler.startRunLoop({ longPollingKey: c3, group: o4 })).then(function() {
                    n4._onAVChatRoomHistoryMessage(d3);
                  }), t4) : (n4.emitGroupListUpdate(true, false), yv(a4));
                });
              default:
                var g3 = new Av({ code: Zh.JOIN_GROUP_FAIL, message: e_.JOIN_GROUP_FAIL });
                return wl.error("".concat(o3, " error:"), g3), Rv(g3);
            }
          }).catch(function(t3) {
            return a3.setMessage("groupID:".concat(e4.groupID)), n4.probeNetwork().then(function(e5) {
              var n5 = m2(e5, 2), o4 = n5[0], r5 = n5[1];
              a3.setError(t3, o4, r5).end();
            }), wl.error("".concat(o3, " error:"), t3), Rv(t3);
          });
        } }, { key: "quitGroup", value: function(e4) {
          var t3 = this, n4 = "".concat(this._className, ".quitGroup");
          wl.log("".concat(n4, " groupID:").concat(e4));
          var o3 = this.checkJoinedAVChatRoomByID(e4);
          if (!o3 && !this.hasLocalGroup(e4)) {
            var r4 = new Av({ code: Zh.MEMBER_NOT_IN_GROUP, message: e_.MEMBER_NOT_IN_GROUP });
            return Rv(r4);
          }
          if (o3 && !this.isLoggedIn())
            return wl.log("".concat(n4, " anonymously ok. groupID:").concat(e4)), this.deleteLocalGroupAndConversation(e4), this._AVChatRoomHandler.reset(e4), Ov({ groupID: e4 });
          var a3 = new __(f_.QUIT_GROUP);
          return a3.setMessage("groupID:".concat(e4)), this.request({ protocolName: oh, requestData: { groupID: e4 } }).then(function() {
            return a3.setNetworkType(t3.getNetworkType()).end(), wl.log("".concat(n4, " ok")), o3 && t3._AVChatRoomHandler.reset(e4), t3.deleteLocalGroupAndConversation(e4), yv({ groupID: e4 });
          }).catch(function(e5) {
            return t3.probeNetwork().then(function(t4) {
              var n5 = m2(t4, 2), o4 = n5[0], r5 = n5[1];
              a3.setError(e5, o4, r5).end();
            }), wl.error("".concat(n4, " failed. error:"), e5), Rv(e5);
          });
        } }, { key: "searchGroupByID", value: function(e4) {
          var t3 = this, n4 = "".concat(this._className, ".searchGroupByID"), o3 = { groupIDList: [e4] }, r4 = new __(f_.SEARCH_GROUP_BY_ID);
          return r4.setMessage("groupID:".concat(e4)), wl.log("".concat(n4, " groupID:").concat(e4)), this.request({ protocolName: rh, requestData: o3 }).then(function(e5) {
            var o4 = e5.data.groupProfile;
            if (0 !== o4[0].errorCode)
              throw new Av({ code: o4[0].errorCode, message: o4[0].errorInfo });
            return r4.setNetworkType(t3.getNetworkType()).end(), wl.log("".concat(n4, " ok")), yv({ group: new iM(o4[0]) });
          }).catch(function(e5) {
            return t3.probeNetwork().then(function(t4) {
              var n5 = m2(t4, 2), o4 = n5[0], a3 = n5[1];
              r4.setError(e5, o4, a3).end();
            }), wl.warn("".concat(n4, " failed. error:"), e5), Rv(e5);
          });
        } }, { key: "changeGroupOwner", value: function(e4) {
          var t3 = this, n4 = "".concat(this._className, ".changeGroupOwner");
          if (this.hasLocalGroup(e4.groupID) && this.getLocalGroupProfile(e4.groupID).type === gr.GRP_AVCHATROOM)
            return Rv(new Av({ code: Zh.CANNOT_CHANGE_OWNER_IN_AVCHATROOM, message: e_.CANNOT_CHANGE_OWNER_IN_AVCHATROOM }));
          if (e4.newOwnerID === this.getMyUserID())
            return Rv(new Av({ code: Zh.CANNOT_CHANGE_OWNER_TO_SELF, message: e_.CANNOT_CHANGE_OWNER_TO_SELF }));
          var o3 = new __(f_.CHANGE_GROUP_OWNER);
          return o3.setMessage("groupID:".concat(e4.groupID, " newOwnerID:").concat(e4.newOwnerID)), wl.log("".concat(n4, " groupID:").concat(e4.groupID)), this.request({ protocolName: ah, requestData: e4 }).then(function() {
            o3.setNetworkType(t3.getNetworkType()).end(), wl.log("".concat(n4, " ok"));
            var r4 = e4.groupID, a3 = e4.newOwnerID;
            t3.groupMap.get(r4).ownerID = a3;
            var s3 = t3.getModule(rg).getLocalGroupMemberList(r4);
            if (s3 instanceof Map) {
              var i3 = s3.get(t3.getMyUserID());
              Zl(i3) || (i3.updateRole("Member"), t3.groupMap.get(r4).selfInfo.role = "Member");
              var c3 = s3.get(a3);
              Zl(c3) || c3.updateRole("Owner");
            }
            return t3.emitGroupListUpdate(true, false), yv({ group: t3.groupMap.get(r4) });
          }).catch(function(e5) {
            return t3.probeNetwork().then(function(t4) {
              var n5 = m2(t4, 2), r4 = n5[0], a3 = n5[1];
              o3.setError(e5, r4, a3).end();
            }), wl.error("".concat(n4, " failed. error:"), e5), Rv(e5);
          });
        } }, { key: "handleGroupApplication", value: function(e4) {
          var n4 = this, o3 = "".concat(this._className, ".handleGroupApplication"), r4 = e4.message.payload, a3 = r4.groupProfile.groupID, s3 = r4.authentication, i3 = r4.messageKey, c3 = r4.operatorID, u3 = new __(f_.HANDLE_GROUP_APPLICATION);
          return u3.setMessage("groupID:".concat(a3)), wl.log("".concat(o3, " groupID:").concat(a3)), this.request({ protocolName: sh, requestData: t2(t2({}, e4), {}, { applicant: c3, groupID: a3, authentication: s3, messageKey: i3 }) }).then(function() {
            return u3.setNetworkType(n4.getNetworkType()).end(), wl.log("".concat(o3, " ok")), n4._groupSystemNoticeHandler.deleteGroupSystemNotice({ messageList: [e4.message] }), yv({ group: n4.getLocalGroupProfile(a3) });
          }).catch(function(e5) {
            return n4.probeNetwork().then(function(t3) {
              var n5 = m2(t3, 2), o4 = n5[0], r5 = n5[1];
              u3.setError(e5, o4, r5).end();
            }), wl.error("".concat(o3, " failed. error"), e5), Rv(e5);
          });
        } }, { key: "handleGroupInvitation", value: function(e4) {
          var n4 = this, o3 = "".concat(this._className, ".handleGroupInvitation"), r4 = e4.message.payload, a3 = r4.groupProfile.groupID, s3 = r4.authentication, i3 = r4.messageKey, c3 = r4.operatorID, u3 = e4.handleAction, l3 = new __(f_.HANDLE_GROUP_INVITATION);
          return l3.setMessage("groupID:".concat(a3, " inviter:").concat(c3, " handleAction:").concat(u3)), wl.log("".concat(o3, " groupID:").concat(a3, " inviter:").concat(c3, " handleAction:").concat(u3)), this.request({ protocolName: ih, requestData: t2(t2({}, e4), {}, { inviter: c3, groupID: a3, authentication: s3, messageKey: i3 }) }).then(function() {
            return l3.setNetworkType(n4.getNetworkType()).end(), wl.log("".concat(o3, " ok")), n4._groupSystemNoticeHandler.deleteGroupSystemNotice({ messageList: [e4.message] }), yv({ group: n4.getLocalGroupProfile(a3) });
          }).catch(function(e5) {
            return n4.probeNetwork().then(function(t3) {
              var n5 = m2(t3, 2), o4 = n5[0], r5 = n5[1];
              l3.setError(e5, o4, r5).end();
            }), wl.error("".concat(o3, " failed. error"), e5), Rv(e5);
          });
        } }, { key: "getGroupOnlineMemberCount", value: function(e4) {
          return this._AVChatRoomHandler ? this._AVChatRoomHandler.checkJoinedAVChatRoomByID(e4) ? this._AVChatRoomHandler.getGroupOnlineMemberCount(e4) : Ov({ memberCount: 0 }) : Rv({ code: Zh.CANNOT_FIND_MODULE, message: e_.CANNOT_FIND_MODULE });
        } }, { key: "hasLocalGroup", value: function(e4) {
          return this.groupMap.has(e4);
        } }, { key: "deleteLocalGroupAndConversation", value: function(e4) {
          this._deleteLocalGroup(e4), this.getModule(sg).deleteLocalConversation("GROUP".concat(e4)), this.emitGroupListUpdate(true, false);
        } }, { key: "_deleteLocalGroup", value: function(e4) {
          this.groupMap.delete(e4), this.getModule(rg).deleteGroupMemberList(e4), this._setStorageGroupList();
        } }, { key: "sendMessage", value: function(e4, t3) {
          var n4 = this.createGroupMessagePack(e4, t3);
          return this.request(n4);
        } }, { key: "createGroupMessagePack", value: function(e4, t3) {
          var n4 = null;
          t3 && t3.offlinePushInfo && (n4 = t3.offlinePushInfo);
          var o3 = "";
          zl(e4.cloudCustomData) && e4.cloudCustomData.length > 0 && (o3 = e4.cloudCustomData);
          var r4 = [];
          if (Xl(t3) && Xl(t3.messageControlInfo)) {
            var a3 = t3.messageControlInfo, s3 = a3.excludedFromUnreadCount, i3 = a3.excludedFromLastMessage;
            true === s3 && r4.push("NoUnread"), true === i3 && r4.push("NoLastMsg");
          }
          var c3 = e4.getGroupAtInfoList(), u3 = { fromAccount: this.getMyUserID(), groupID: e4.to, msgBody: e4.getElements(), cloudCustomData: o3, random: e4.random, priority: e4.priority, clientSequence: e4.clientSequence, groupAtInfo: e4.type !== gr.MSG_TEXT || qd(c3) ? void 0 : c3, onlineOnlyFlag: this.isOnlineMessage(e4, t3) ? 1 : 0, clientTime: e4.clientTime, offlinePushInfo: n4 ? { pushFlag: true === n4.disablePush ? 1 : 0, title: n4.title || "", desc: n4.description || "", ext: n4.extension || "", apnsInfo: { badgeMode: true === n4.ignoreIOSBadge ? 1 : 0 }, androidInfo: { OPPOChannelID: n4.androidOPPOChannelID || "" } } : void 0, messageControlInfo: r4, needReadReceipt: true !== e4.needReadReceipt || this.isMessageFromOrToAVChatroom(e4.to) ? 0 : 1 };
          return Ed(e4.to) && (u3.groupID = wd(e4.to), u3.topicID = e4.to), { protocolName: Lg, tjgID: this.generateTjgID(e4), requestData: u3 };
        } }, { key: "revokeMessage", value: function(e4) {
          var t3 = { groupID: e4.to, msgSeqList: [{ msgSeq: e4.sequence }] };
          return Ed(e4.to) && (t3.groupID = wd(e4.to), t3.topicID = e4.to), this.request({ protocolName: ch, requestData: t3 });
        } }, { key: "deleteMessage", value: function(e4) {
          var t3 = e4.to, n4 = e4.keyList;
          wl.log("".concat(this._className, ".deleteMessage groupID:").concat(t3, " count:").concat(n4.length));
          var o3 = { groupID: t3, deleter: this.getMyUserID(), keyList: n4 };
          return Ed(t3) && (o3.groupID = wd(t3), o3.topicID = t3), this.request({ protocolName: Ih, requestData: o3 });
        } }, { key: "modifyRemoteMessage", value: function(e4) {
          var t3 = e4.to, n4 = e4.sequence, o3 = e4.payload, r4 = e4.type, a3 = e4.version, s3 = void 0 === a3 ? 0 : a3, i3 = e4.cloudCustomData, c3 = t3, u3 = void 0;
          return Ed(t3) && (c3 = wd(t3), u3 = t3), this.request({ protocolName: Eh, requestData: { groupID: c3, topicID: u3, sequence: n4, version: s3, elements: [{ type: r4, content: o3 }], cloudCustomData: i3 } });
        } }, { key: "getRoamingMessage", value: function(e4) {
          var t3 = this, n4 = "".concat(this._className, ".getRoamingMessage"), o3 = e4.conversationID, r4 = e4.groupID, a3 = e4.sequence, s3 = new __(f_.GET_GROUP_ROAMING_MESSAGES), i3 = 0, c3 = void 0;
          return Ed(r4) && (r4 = wd(c3 = r4)), this._computeLastSequence({ groupID: r4, topicID: c3, sequence: a3 }).then(function(e5) {
            return i3 = e5, wl.log("".concat(n4, " groupID:").concat(r4, " startSequence:").concat(i3)), t3.request({ protocolName: dh, requestData: { groupID: r4, count: 21, sequence: i3, topicID: c3 } });
          }).then(function(e5) {
            var a4 = e5.data, u3 = a4.messageList, l3 = a4.complete;
            Zl(u3) ? wl.log("".concat(n4, " ok. complete:").concat(l3, " but messageList is undefined!")) : wl.log("".concat(n4, " ok. complete:").concat(l3, " count:").concat(u3.length)), s3.setNetworkType(t3.getNetworkType()).setMessage("groupID:".concat(r4, " topicID:").concat(c3, " startSequence:").concat(i3, " complete:").concat(l3, " count:").concat(u3 ? u3.length : "undefined")).end();
            var d3 = t3.getModule(sg);
            if (2 === l3 || qd(u3))
              return d3.setCompleted(o3), { nextReqID: "", storedMessageList: [] };
            var p3 = u3[u3.length - 1].sequence - 1;
            d3.updateRoamingMessageSequence(o3, p3);
            var g3 = d3.onRoamingMessage(u3, o3);
            return d3.updateIsRead(o3), d3.patchConversationLastMessage(o3), wl.log("".concat(n4, " nextReqID:").concat(p3, " stored message count:").concat(g3.length)), { nextReqID: p3 + "", storedMessageList: g3 };
          }).catch(function(e5) {
            return t3.probeNetwork().then(function(t4) {
              var n5 = m2(t4, 2), o4 = n5[0], a4 = n5[1];
              s3.setError(e5, o4, a4).setMessage("groupID:".concat(r4, " topicID:").concat(c3, " startSequence:").concat(i3)).end();
            }), wl.warn("".concat(n4, " failed. error:"), e5), Rv(e5);
          });
        } }, { key: "_getGroupIDOfMessage", value: function(e4) {
          return e4.conversationID.replace(gr.CONV_GROUP, "");
        } }, { key: "getReadReceiptList", value: function(e4) {
          var t3 = this, n4 = "".concat(this._className, ".getReadReceiptList"), o3 = this._getGroupIDOfMessage(e4[0]), r4 = this.getMyUserID(), a3 = e4.filter(function(e5) {
            return e5.from === r4 && true === e5.needReadReceipt;
          }).map(function(e5) {
            return { sequence: e5.sequence };
          });
          if (wl.log("".concat(n4, " groupID:").concat(o3, " sequenceList:").concat(JSON.stringify(a3))), 0 === a3.length)
            return Ov({ messageList: e4 });
          var s3 = new __(f_.GET_READ_RECEIPT);
          return s3.setMessage("groupID:".concat(o3)), this.request({ protocolName: ph, requestData: { groupID: o3, sequenceList: a3 } }).then(function(t4) {
            s3.end(), wl.log("".concat(n4, " ok"));
            var o4 = t4.data.readReceiptList;
            return Ql(o4) && o4.forEach(function(t5) {
              e4.forEach(function(e5) {
                0 === t5.code && t5.sequence === e5.sequence && (e5.readReceiptInfo.readCount = t5.readCount, e5.readReceiptInfo.unreadCount = t5.unreadCount);
              });
            }), yv({ messageList: e4 });
          }).catch(function(e5) {
            return t3.probeNetwork().then(function(t4) {
              var n5 = m2(t4, 2), o4 = n5[0], r5 = n5[1];
              s3.setError(e5, o4, r5).end();
            }), wl.warn("".concat(n4, " failed. error:"), e5), Rv(e5);
          });
        } }, { key: "sendReadReceipt", value: function(e4) {
          var t3 = this, n4 = this._getGroupIDOfMessage(e4[0]), o3 = new __(f_.SEND_READ_RECEIPT);
          o3.setMessage("groupID:".concat(n4));
          var r4 = this.getMyUserID(), a3 = e4.filter(function(e5) {
            return e5.from !== r4 && true === e5.needReadReceipt;
          }).map(function(e5) {
            return { sequence: e5.sequence };
          });
          if (0 === a3.length)
            return Rv({ code: Zh.READ_RECEIPT_MESSAGE_LIST_EMPTY, message: e_.READ_RECEIPT_MESSAGE_LIST_EMPTY });
          var s3 = "".concat(this._className, ".sendReadReceipt");
          return wl.log("".concat(s3, ". sequenceList:").concat(JSON.stringify(a3))), this.request({ protocolName: gh, requestData: { groupID: n4, sequenceList: a3 } }).then(function(e5) {
            return o3.end(), wl.log("".concat(s3, " ok")), yv();
          }).catch(function(e5) {
            return t3.probeNetwork().then(function(t4) {
              var n5 = m2(t4, 2), r5 = n5[0], a4 = n5[1];
              o3.setError(e5, r5, a4).end();
            }), wl.warn("".concat(s3, " failed. error:"), e5), Rv(e5);
          });
        } }, { key: "getReadReceiptDetail", value: function(e4) {
          var t3 = this, n4 = e4.message, o3 = e4.filter, r4 = e4.cursor, a3 = e4.count, s3 = this._getGroupIDOfMessage(n4), i3 = n4.ID, c3 = n4.sequence, u3 = "".concat(this._className, ".getReadReceiptDetail"), l3 = this._receiptDetailCompleteMap.get(i3) || false, d3 = 0 !== o3 && 1 !== o3 ? 0 : o3, p3 = zl(r4) ? r4 : "", g3 = !$l(a3) || a3 <= 0 || a3 >= 100 ? 100 : a3, h3 = "groupID:".concat(s3, " sequence:").concat(c3, " cursor:").concat(p3, " filter:").concat(d3, " completeFlag:").concat(l3);
          wl.log("".concat(u3, " ").concat(h3));
          var _3 = { cursor: "", isCompleted: false, messageID: i3, unreadUserIDList: [], readUserIDList: [] }, f3 = new __(f_.GET_READ_RECEIPT_DETAIL);
          return f3.setMessage(h3), this.request({ protocolName: _h, requestData: { groupID: s3, sequence: c3, flag: d3, cursor: p3, count: g3 } }).then(function(e5) {
            f3.end();
            var n5 = e5.data, o4 = n5.cursor, r5 = n5.isCompleted, a4 = n5.unreadUserIDList, s4 = n5.readUserIDList;
            return _3.cursor = o4, 1 === r5 && (_3.isCompleted = true, t3._receiptDetailCompleteMap.set(i3, true)), 0 === d3 ? _3.readUserIDList = s4.map(function(e6) {
              return e6.userID;
            }) : 1 === d3 && (_3.unreadUserIDList = a4.map(function(e6) {
              return e6.userID;
            })), wl.log("".concat(u3, " ok")), yv(_3);
          }).catch(function(e5) {
            return t3.probeNetwork().then(function(t4) {
              var n5 = m2(t4, 2), o4 = n5[0], r5 = n5[1];
              f3.setError(e5, o4, r5).end();
            }), wl.warn("".concat(u3, " failed. error:"), e5), Rv(e5);
          });
        } }, { key: "getRoamingMessagesHopping", value: function(e4) {
          var t3 = this, n4 = "".concat(this._className, ".getRoamingMessagesHopping"), o3 = new __(f_.GET_GROUP_ROAMING_MESSAGES_HOPPING), r4 = e4.groupID, a3 = e4.count, s3 = e4.sequence, i3 = void 0;
          return Ed(r4) && (r4 = wd(i3 = r4)), this.request({ protocolName: dh, requestData: { groupID: r4, count: a3, sequence: s3, topicID: i3 } }).then(function(a4) {
            var c3 = a4.data, u3 = c3.messageList, l3 = c3.complete, d3 = "groupID:".concat(r4, " topicID:").concat(i3, " sequence:").concat(s3, " complete:").concat(l3, " count:").concat(u3 ? u3.length : 0);
            if (wl.log("".concat(n4, " ok. ").concat(d3)), o3.setNetworkType(t3.getNetworkType()).setMessage("".concat(d3)).end(), 2 === l3 || qd(u3))
              return [];
            var p3 = "".concat(gr.CONV_GROUP).concat(e4.groupID);
            return t3.getModule(sg).onRoamingMessage(u3, p3, false);
          }).catch(function(e5) {
            return t3.probeNetwork().then(function(t4) {
              var n5 = m2(t4, 2), i4 = n5[0], c3 = n5[1];
              o3.setError(e5, i4, c3).setMessage("groupID:".concat(r4, " sequence:").concat(s3, " count:").concat(a3)).end();
            }), wl.warn("".concat(n4, " failed. error:"), e5), Rv(e5);
          });
        } }, { key: "setMessageRead", value: function(e4) {
          var t3 = this, n4 = e4.conversationID, o3 = e4.lastMessageSeq, r4 = "".concat(this._className, ".setMessageRead");
          wl.log("".concat(r4, " conversationID:").concat(n4, " lastMessageSeq:").concat(o3)), $l(o3) || wl.warn("".concat(r4, " 请勿修改 Conversation.lastMessage.lastSequence，否则可能会导致已读上报结果不准确"));
          var a3 = new __(f_.SET_GROUP_MESSAGE_READ);
          a3.setMessage("".concat(n4, "-").concat(o3));
          var s3 = n4.replace(gr.CONV_GROUP, ""), i3 = void 0;
          return Ed(s3) && (s3 = wd(i3 = s3)), this.request({ protocolName: uh, requestData: { groupID: s3, topicID: i3, messageReadSeq: o3 } }).then(function() {
            a3.setNetworkType(t3.getNetworkType()).end(), wl.log("".concat(r4, " ok."));
            var e5 = t3.getModule(sg);
            e5.updateIsReadAfterReadReport({ conversationID: n4, lastMessageSeq: o3 });
            var c3 = true;
            if (!Zl(i3)) {
              c3 = false;
              var u3 = t3.getModule(ag).getLocalTopic(s3, i3);
              u3 && u3.updateSelfInfo({ readedSequence: o3 });
            }
            return e5.updateUnreadCount(n4, c3), yv();
          }).catch(function(e5) {
            return t3.probeNetwork().then(function(t4) {
              var n5 = m2(t4, 2), o4 = n5[0], r5 = n5[1];
              a3.setError(e5, o4, r5).end();
            }), wl.log("".concat(r4, " failed. error:"), e5), Rv(e5);
          });
        } }, { key: "_computeLastSequence", value: function(e4) {
          var t3 = e4.groupID, n4 = e4.topicID, o3 = void 0 === n4 ? void 0 : n4, r4 = e4.sequence;
          return r4 > 0 ? Promise.resolve(r4) : Zl(o3) || this.hasLocalGroup(t3) ? Zl(o3) ? this.getGroupLastSequence(t3) : this.getTopicLastSequence({ groupID: t3, topicID: o3 }) : Promise.resolve(0);
        } }, { key: "getGroupLastSequence", value: function(e4) {
          var t3 = this, n4 = "".concat(this._className, ".getGroupLastSequence"), o3 = new __(f_.GET_GROUP_LAST_SEQUENCE), r4 = 0, a3 = "";
          if (this.hasLocalGroup(e4)) {
            var s3 = this.getLocalGroupProfile(e4), i3 = s3.lastMessage;
            if (i3.lastSequence > 0 && false === i3.onlineOnlyFlag)
              return r4 = i3.lastSequence, a3 = "got lastSequence:".concat(r4, " from local group profile[lastMessage.lastSequence]. groupID:").concat(e4), wl.log("".concat(n4, " ").concat(a3)), o3.setNetworkType(this.getNetworkType()).setMessage("".concat(a3)).end(), Promise.resolve(r4);
            if (s3.nextMessageSeq > 1)
              return r4 = s3.nextMessageSeq - 1, a3 = "got lastSequence:".concat(r4, " from local group profile[nextMessageSeq]. groupID:").concat(e4), wl.log("".concat(n4, " ").concat(a3)), o3.setNetworkType(this.getNetworkType()).setMessage("".concat(a3)).end(), Promise.resolve(r4);
          }
          var c3 = "GROUP".concat(e4), u3 = this.getModule(sg).getLocalConversation(c3);
          if (u3 && u3.lastMessage.lastSequence && false === u3.lastMessage.onlineOnlyFlag)
            return r4 = u3.lastMessage.lastSequence, a3 = "got lastSequence:".concat(r4, " from local conversation profile[lastMessage.lastSequence]. groupID:").concat(e4), wl.log("".concat(n4, " ").concat(a3)), o3.setNetworkType(this.getNetworkType()).setMessage("".concat(a3)).end(), Promise.resolve(r4);
          var l3 = { groupIDList: [e4], responseFilter: { groupBaseInfoFilter: ["NextMsgSeq"] } };
          return this.getGroupProfileAdvance(l3).then(function(s4) {
            var i4 = s4.data.successGroupList;
            return qd(i4) ? wl.log("".concat(n4, " successGroupList is empty. groupID:").concat(e4)) : (r4 = i4[0].nextMessageSeq - 1, a3 = "got lastSequence:".concat(r4, " from getGroupProfileAdvance. groupID:").concat(e4), wl.log("".concat(n4, " ").concat(a3))), o3.setNetworkType(t3.getNetworkType()).setMessage("".concat(a3)).end(), r4;
          }).catch(function(r5) {
            return t3.probeNetwork().then(function(t4) {
              var n5 = m2(t4, 2), a4 = n5[0], s4 = n5[1];
              o3.setError(r5, a4, s4).setMessage("get lastSequence failed from getGroupProfileAdvance. groupID:".concat(e4)).end();
            }), wl.warn("".concat(n4, " failed. error:"), r5), Rv(r5);
          });
        } }, { key: "getTopicLastSequence", value: function(e4) {
          var t3 = this, n4 = e4.groupID, o3 = e4.topicID, r4 = "".concat(this._className, ".getTopicLastSequence"), a3 = new __(f_.GET_TOPIC_LAST_SEQUENCE), s3 = 0, i3 = "", c3 = this.getModule(ag);
          return c3.hasLocalTopic(n4, o3) ? (s3 = c3.getLocalTopic(n4, o3).nextMessageSeq - 1, i3 = "get lastSequence:".concat(s3, " from local topic info[nextMessageSeq]. topicID:").concat(o3), wl.log("".concat(r4, " ").concat(i3)), a3.setNetworkType(this.getNetworkType()).setMessage("".concat(i3)).end(), Promise.resolve(s3)) : c3.getTopicList({ groupID: n4, topicIDList: [o3] }).then(function(e5) {
            var n5 = e5.data.successTopicList;
            return qd(n5) ? wl.log("".concat(r4, " successTopicList is empty. topicID:").concat(o3)) : (s3 = n5[0].nextMessageSeq - 1, i3 = "get lastSequence:".concat(s3, " from getTopicList. topicID:").concat(o3), wl.log("".concat(r4, " ").concat(i3))), a3.setNetworkType(t3.getNetworkType()).setMessage("".concat(i3)).end(), s3;
          }).catch(function(e5) {
            return t3.probeNetwork().then(function(t4) {
              var n5 = m2(t4, 2), r5 = n5[0], s4 = n5[1];
              a3.setError(e5, r5, s4).setMessage("get lastSequence failed from getTopicList. topicID:".concat(o3)).end();
            }), wl.warn("".concat(r4, " failed. error:"), e5), Rv(e5);
          });
        } }, { key: "isMessageFromOrToAVChatroom", value: function(e4) {
          return !!this._AVChatRoomHandler && this._AVChatRoomHandler.checkJoinedAVChatRoomByID(e4);
        } }, { key: "hasJoinedAVChatRoom", value: function() {
          return this._AVChatRoomHandler ? this._AVChatRoomHandler.hasJoinedAVChatRoom() : 0;
        } }, { key: "getJoinedAVChatRoom", value: function() {
          return this._AVChatRoomHandler ? this._AVChatRoomHandler.getJoinedAVChatRoom() : [];
        } }, { key: "isOnlineMessage", value: function(e4, t3) {
          return !(!this._canIUseOnlineOnlyFlag(e4) || !t3 || true !== t3.onlineUserOnly);
        } }, { key: "_canIUseOnlineOnlyFlag", value: function(e4) {
          var t3 = this.getJoinedAVChatRoom();
          return !t3 || !t3.includes(e4.to) || e4.conversationType !== gr.CONV_GROUP;
        } }, { key: "_onAVChatRoomHistoryMessage", value: function(e4) {
          if (!qd(e4)) {
            wl.log("".concat(this._className, "._onAVChatRoomHistoryMessage count:").concat(e4.length));
            var n4 = [];
            e4.forEach(function(e5) {
              n4.push(t2(t2({}, e5), {}, { isHistoryMessage: 1 }));
            }), this.onAVChatRoomMessage(n4);
          }
        } }, { key: "onAVChatRoomMessage", value: function(e4) {
          this._AVChatRoomHandler && this._AVChatRoomHandler.onMessage(e4);
        } }, { key: "getGroupSimplifiedInfo", value: function(e4) {
          var t3 = this, n4 = new __(f_.GET_GROUP_SIMPLIFIED_INFO), o3 = { groupIDList: [e4], responseFilter: { groupBaseInfoFilter: ["Type", "Name"] } };
          return this.getGroupProfileAdvance(o3).then(function(o4) {
            var r4 = o4.data.successGroupList;
            return n4.setNetworkType(t3.getNetworkType()).setMessage("groupID:".concat(e4, " type:").concat(r4[0].type)).end(), r4[0];
          }).catch(function(o4) {
            t3.probeNetwork().then(function(t4) {
              var r4 = m2(t4, 2), a3 = r4[0], s3 = r4[1];
              n4.setError(o4, a3, s3).setMessage("groupID:".concat(e4)).end();
            });
          });
        } }, { key: "setUnjoinedAVChatRoom", value: function(e4) {
          this._unjoinedAVChatRoomList.set(e4, 1);
        } }, { key: "deleteUnjoinedAVChatRoom", value: function(e4) {
          this._unjoinedAVChatRoomList.has(e4) && this._unjoinedAVChatRoomList.delete(e4);
        } }, { key: "isUnjoinedAVChatRoom", value: function(e4) {
          return this._unjoinedAVChatRoomList.has(e4);
        } }, { key: "onGroupAttributesUpdated", value: function(e4) {
          this._groupAttributesHandler && this._groupAttributesHandler.onGroupAttributesUpdated(e4);
        } }, { key: "updateLocalMainSequenceOnReconnected", value: function() {
          this._groupAttributesHandler && this._groupAttributesHandler.updateLocalMainSequenceOnReconnected();
        } }, { key: "initGroupAttributes", value: function(e4) {
          return this._groupAttributesHandler.initGroupAttributes(e4);
        } }, { key: "setGroupAttributes", value: function(e4) {
          return this._groupAttributesHandler.setGroupAttributes(e4);
        } }, { key: "deleteGroupAttributes", value: function(e4) {
          return this._groupAttributesHandler.deleteGroupAttributes(e4);
        } }, { key: "getGroupAttributes", value: function(e4) {
          return this._groupAttributesHandler.getGroupAttributes(e4);
        } }, { key: "reset", value: function() {
          this.groupMap.clear(), this._unjoinedAVChatRoomList.clear(), this._receiptDetailCompleteMap.clear(), this._commonGroupHandler.reset(), this._groupSystemNoticeHandler.reset(), this._groupTipsHandler.reset(), this._AVChatRoomHandler && this._AVChatRoomHandler.reset();
        } }]), r3;
      }(Tg), SM = function() {
        function e3(t3) {
          o2(this, e3), this.userID = "", this.avatar = "", this.nick = "", this.role = "", this.joinTime = "", this.lastSendMsgTime = "", this.nameCard = "", this.muteUntil = 0, this.memberCustomField = [], this._initMember(t3);
        }
        return a2(e3, [{ key: "_initMember", value: function(e4) {
          this.updateMember(e4);
        } }, { key: "updateMember", value: function(e4) {
          var t3 = [null, void 0, "", 0, NaN];
          e4.memberCustomField && vd(this.memberCustomField, e4.memberCustomField), id2(this, e4, ["memberCustomField"], t3);
        } }, { key: "updateRole", value: function(e4) {
          ["Owner", "Admin", "Member"].indexOf(e4) < 0 || (this.role = e4);
        } }, { key: "updateMuteUntil", value: function(e4) {
          Zl(e4) || (this.muteUntil = Math.floor((Date.now() + 1e3 * e4) / 1e3));
        } }, { key: "updateNameCard", value: function(e4) {
          Zl(e4) || (this.nameCard = e4);
        } }, { key: "updateMemberCustomField", value: function(e4) {
          e4 && vd(this.memberCustomField, e4);
        } }]), e3;
      }(), CM = function(e3) {
        i2(r3, e3);
        var n3 = f2(r3);
        function r3(e4) {
          var t3;
          return o2(this, r3), (t3 = n3.call(this, e4))._className = "GroupMemberModule", t3.groupMemberListMap = /* @__PURE__ */ new Map(), t3.getInnerEmitterInstance().on(zv, t3._onProfileUpdated, h2(t3)), t3;
        }
        return a2(r3, [{ key: "_onProfileUpdated", value: function(e4) {
          for (var t3 = this, n4 = e4.data, o3 = function(e5) {
            var o4 = n4[e5];
            t3.groupMemberListMap.forEach(function(e6) {
              e6.has(o4.userID) && e6.get(o4.userID).updateMember({ nick: o4.nick, avatar: o4.avatar });
            });
          }, r4 = 0; r4 < n4.length; r4++)
            o3(r4);
        } }, { key: "deleteGroupMemberList", value: function(e4) {
          this.groupMemberListMap.delete(e4);
        } }, { key: "getGroupMemberList", value: function(e4) {
          var t3 = this, n4 = e4.groupID, o3 = e4.offset, r4 = void 0 === o3 ? 0 : o3, a3 = e4.count, s3 = void 0 === a3 ? 15 : a3, i3 = "".concat(this._className, ".getGroupMemberList"), c3 = new __(f_.GET_GROUP_MEMBER_LIST);
          wl.log("".concat(i3, " groupID:").concat(n4, " offset:").concat(r4, " count:").concat(s3));
          var u3 = 0, l3 = { groupID: n4, limit: s3 > 100 ? 100 : s3 };
          Id({ groupID: n4 }) ? l3.next = "".concat(r4) : (l3.offset = r4, u3 = r4 + 1);
          var d3 = [];
          return this.request({ protocolName: Nh, requestData: l3 }).then(function(e5) {
            var o4 = e5.data, r5 = o4.members, a4 = o4.memberNum, s4 = o4.next, i4 = void 0 === s4 ? void 0 : s4;
            if (Zl(i4) || (u3 = qd(i4) ? 0 : i4), !Ql(r5) || 0 === r5.length)
              return u3 = 0, Promise.resolve([]);
            var c4 = t3.getModule(ng);
            return c4.hasLocalGroup(n4) && (c4.getLocalGroupProfile(n4).memberNum = a4), d3 = t3._updateLocalGroupMemberMap(n4, r5), t3.getModule(eg).getUserProfile({ userIDList: r5.map(function(e6) {
              return e6.userID;
            }), tagList: [Fl.NICK, Fl.AVATAR] });
          }).then(function(e5) {
            var o4 = e5.data;
            if (!Ql(o4) || 0 === o4.length)
              return Ov({ memberList: [], offset: u3 });
            var r5 = o4.map(function(e6) {
              return { userID: e6.userID, nick: e6.nick, avatar: e6.avatar };
            });
            return t3._updateLocalGroupMemberMap(n4, r5), c3.setNetworkType(t3.getNetworkType()).setMessage("groupID:".concat(n4, " offset:").concat(u3, " count:").concat(s3)).end(), wl.log("".concat(i3, " ok.")), yv({ memberList: d3, offset: u3 });
          }).catch(function(e5) {
            return t3.probeNetwork().then(function(t4) {
              var n5 = m2(t4, 2), o4 = n5[0], r5 = n5[1];
              c3.setError(e5, o4, r5).end();
            }), wl.error("".concat(i3, " failed. error:"), e5), Rv(e5);
          });
        } }, { key: "getGroupMemberProfile", value: function(e4) {
          var n4 = this, o3 = "".concat(this._className, ".getGroupMemberProfile"), r4 = new __(f_.GET_GROUP_MEMBER_PROFILE);
          r4.setMessage(e4.userIDList.length > 5 ? "userIDList.length:".concat(e4.userIDList.length) : "userIDList:".concat(e4.userIDList)), wl.log("".concat(o3, " groupID:").concat(e4.groupID, " userIDList:").concat(e4.userIDList.join(","))), e4.userIDList.length > 50 && (e4.userIDList = e4.userIDList.slice(0, 50));
          var a3 = e4.groupID, s3 = e4.userIDList;
          return this._getGroupMemberProfileAdvance(t2(t2({}, e4), {}, { userIDList: s3 })).then(function(e5) {
            var t3 = e5.data.members;
            return Ql(t3) && 0 !== t3.length ? (n4._updateLocalGroupMemberMap(a3, t3), n4.getModule(eg).getUserProfile({ userIDList: t3.map(function(e6) {
              return e6.userID;
            }), tagList: [Fl.NICK, Fl.AVATAR] })) : Ov([]);
          }).then(function(e5) {
            var t3 = e5.data.map(function(e6) {
              return { userID: e6.userID, nick: e6.nick, avatar: e6.avatar };
            });
            n4._updateLocalGroupMemberMap(a3, t3);
            var o4 = s3.filter(function(e6) {
              return n4.hasLocalGroupMember(a3, e6);
            }).map(function(e6) {
              return n4.getLocalGroupMemberInfo(a3, e6);
            });
            return r4.setNetworkType(n4.getNetworkType()).end(), yv({ memberList: o4 });
          });
        } }, { key: "addGroupMember", value: function(e4) {
          var t3 = this, n4 = "".concat(this._className, ".addGroupMember"), o3 = e4.groupID, r4 = this.getModule(ng).getLocalGroupProfile(o3), a3 = r4.type, s3 = new __(f_.ADD_GROUP_MEMBER);
          if (s3.setMessage("groupID:".concat(o3, " groupType:").concat(a3)), yd(a3)) {
            var i3 = new Av({ code: Zh.CANNOT_ADD_MEMBER_IN_AVCHATROOM, message: e_.CANNOT_ADD_MEMBER_IN_AVCHATROOM });
            return s3.setCode(Zh.CANNOT_ADD_MEMBER_IN_AVCHATROOM).setError(e_.CANNOT_ADD_MEMBER_IN_AVCHATROOM).setNetworkType(this.getNetworkType()).end(), Rv(i3);
          }
          return e4.userIDList = e4.userIDList.map(function(e5) {
            return { userID: e5 };
          }), wl.log("".concat(n4, " groupID:").concat(o3)), this.request({ protocolName: Rh, requestData: e4 }).then(function(o4) {
            var a4 = o4.data.members;
            wl.log("".concat(n4, " ok"));
            var i4 = a4.filter(function(e5) {
              return 1 === e5.result;
            }).map(function(e5) {
              return e5.userID;
            }), c3 = a4.filter(function(e5) {
              return 0 === e5.result;
            }).map(function(e5) {
              return e5.userID;
            }), u3 = a4.filter(function(e5) {
              return 2 === e5.result;
            }).map(function(e5) {
              return e5.userID;
            }), l3 = a4.filter(function(e5) {
              return 4 === e5.result;
            }).map(function(e5) {
              return e5.userID;
            }), d3 = "groupID:".concat(e4.groupID, ", ") + "successUserIDList:".concat(i4, ", ") + "failureUserIDList:".concat(c3, ", ") + "existedUserIDList:".concat(u3, ", ") + "overLimitUserIDList:".concat(l3);
            return s3.setNetworkType(t3.getNetworkType()).setMoreMessage(d3).end(), 0 === i4.length ? yv({ successUserIDList: i4, failureUserIDList: c3, existedUserIDList: u3, overLimitUserIDList: l3 }) : (r4.memberCount += i4.length, t3._updateConversationGroupProfile(r4), yv({ successUserIDList: i4, failureUserIDList: c3, existedUserIDList: u3, overLimitUserIDList: l3, group: r4 }));
          }).catch(function(e5) {
            return t3.probeNetwork().then(function(t4) {
              var n5 = m2(t4, 2), o4 = n5[0], r5 = n5[1];
              s3.setError(e5, o4, r5).end();
            }), wl.error("".concat(n4, " failed. error:"), e5), Rv(e5);
          });
        } }, { key: "deleteGroupMember", value: function(e4) {
          var t3 = this, n4 = "".concat(this._className, ".deleteGroupMember"), o3 = e4.groupID, r4 = e4.userIDList, a3 = new __(f_.DELETE_GROUP_MEMBER), s3 = "groupID:".concat(o3, " ").concat(r4.length > 5 ? "userIDList.length:".concat(r4.length) : "userIDList:".concat(r4));
          a3.setMessage(s3), wl.log("".concat(n4, " groupID:").concat(o3, " userIDList:"), r4);
          var i3 = this.getModule(ng).getLocalGroupProfile(o3);
          return yd(i3.type) ? Rv(new Av({ code: Zh.CANNOT_KICK_MEMBER_IN_AVCHATROOM, message: e_.CANNOT_KICK_MEMBER_IN_AVCHATROOM })) : this.request({ protocolName: Lh, requestData: e4 }).then(function() {
            return a3.setNetworkType(t3.getNetworkType()).end(), wl.log("".concat(n4, " ok")), i3.memberCount -= 1, t3._updateConversationGroupProfile(i3), t3.deleteLocalGroupMembers(o3, r4), yv({ group: i3, userIDList: r4 });
          }).catch(function(e5) {
            return t3.probeNetwork().then(function(t4) {
              var n5 = m2(t4, 2), o4 = n5[0], r5 = n5[1];
              a3.setError(e5, o4, r5).end();
            }), wl.error("".concat(n4, " failed. error:"), e5), Rv(e5);
          });
        } }, { key: "_updateConversationGroupProfile", value: function(e4) {
          this.getModule(sg).updateConversationGroupProfile([e4]);
        } }, { key: "setGroupMemberMuteTime", value: function(e4) {
          var t3 = this, n4 = e4.groupID, o3 = e4.userID, r4 = e4.muteTime, a3 = "".concat(this._className, ".setGroupMemberMuteTime");
          if (o3 === this.getMyUserID())
            return Rv(new Av({ code: Zh.CANNOT_MUTE_SELF, message: e_.CANNOT_MUTE_SELF }));
          wl.log("".concat(a3, " groupID:").concat(n4, " userID:").concat(o3));
          var s3 = new __(f_.SET_GROUP_MEMBER_MUTE_TIME);
          return s3.setMessage("groupID:".concat(n4, " userID:").concat(o3, " muteTime:").concat(r4)), this.modifyGroupMemberInfo({ groupID: n4, userID: o3, muteTime: r4 }).then(function(e5) {
            s3.setNetworkType(t3.getNetworkType()).end(), wl.log("".concat(a3, " ok"));
            var o4 = t3.getModule(ng);
            return yv({ group: o4.getLocalGroupProfile(n4), member: e5 });
          }).catch(function(e5) {
            return t3.probeNetwork().then(function(t4) {
              var n5 = m2(t4, 2), o4 = n5[0], r5 = n5[1];
              s3.setError(e5, o4, r5).end();
            }), wl.error("".concat(a3, " failed. error:"), e5), Rv(e5);
          });
        } }, { key: "setGroupMemberRole", value: function(e4) {
          var t3 = this, n4 = "".concat(this._className, ".setGroupMemberRole"), o3 = e4.groupID, r4 = e4.userID, a3 = e4.role, s3 = this.getModule(ng).getLocalGroupProfile(o3);
          if (s3.selfInfo.role !== gr.GRP_MBR_ROLE_OWNER)
            return Rv({ code: Zh.NOT_OWNER, message: e_.NOT_OWNER });
          if ([gr.GRP_WORK, gr.GRP_AVCHATROOM].includes(s3.type))
            return Rv({ code: Zh.CANNOT_SET_MEMBER_ROLE_IN_WORK_AND_AVCHATROOM, message: e_.CANNOT_SET_MEMBER_ROLE_IN_WORK_AND_AVCHATROOM });
          var i3 = [gr.GRP_MBR_ROLE_ADMIN, gr.GRP_MBR_ROLE_MEMBER];
          if (Id({ groupID: o3 }) && i3.push(gr.GRP_MBR_ROLE_CUSTOM), i3.indexOf(a3) < 0)
            return Rv({ code: Zh.INVALID_MEMBER_ROLE, message: e_.INVALID_MEMBER_ROLE });
          if (r4 === this.getMyUserID())
            return Rv({ code: Zh.CANNOT_SET_SELF_MEMBER_ROLE, message: e_.CANNOT_SET_SELF_MEMBER_ROLE });
          var c3 = new __(f_.SET_GROUP_MEMBER_ROLE);
          return c3.setMessage("groupID:".concat(o3, " userID:").concat(r4, " role:").concat(a3)), wl.log("".concat(n4, " groupID:").concat(o3, " userID:").concat(r4)), this.modifyGroupMemberInfo({ groupID: o3, userID: r4, role: a3 }).then(function(e5) {
            return c3.setNetworkType(t3.getNetworkType()).end(), wl.log("".concat(n4, " ok")), yv({ group: s3, member: e5 });
          }).catch(function(e5) {
            return t3.probeNetwork().then(function(t4) {
              var n5 = m2(t4, 2), o4 = n5[0], r5 = n5[1];
              c3.setError(e5, o4, r5).end();
            }), wl.error("".concat(n4, " failed. error:"), e5), Rv(e5);
          });
        } }, { key: "setGroupMemberNameCard", value: function(e4) {
          var t3 = this, n4 = "".concat(this._className, ".setGroupMemberNameCard"), o3 = e4.groupID, r4 = e4.userID, a3 = void 0 === r4 ? this.getMyUserID() : r4, s3 = e4.nameCard;
          wl.log("".concat(n4, " groupID:").concat(o3, " userID:").concat(a3));
          var i3 = new __(f_.SET_GROUP_MEMBER_NAME_CARD);
          return i3.setMessage("groupID:".concat(o3, " userID:").concat(a3, " nameCard:").concat(s3)), this.modifyGroupMemberInfo({ groupID: o3, userID: a3, nameCard: s3 }).then(function(e5) {
            wl.log("".concat(n4, " ok")), i3.setNetworkType(t3.getNetworkType()).end();
            var r5 = t3.getModule(ng).getLocalGroupProfile(o3);
            return a3 === t3.getMyUserID() && r5 && r5.setSelfNameCard(s3), yv({ group: r5, member: e5 });
          }).catch(function(e5) {
            return t3.probeNetwork().then(function(t4) {
              var n5 = m2(t4, 2), o4 = n5[0], r5 = n5[1];
              i3.setError(e5, o4, r5).end();
            }), wl.error("".concat(n4, " failed. error:"), e5), Rv(e5);
          });
        } }, { key: "setGroupMemberCustomField", value: function(e4) {
          var t3 = this, n4 = "".concat(this._className, ".setGroupMemberCustomField"), o3 = e4.groupID, r4 = e4.userID, a3 = void 0 === r4 ? this.getMyUserID() : r4, s3 = e4.memberCustomField;
          wl.log("".concat(n4, " groupID:").concat(o3, " userID:").concat(a3));
          var i3 = new __(f_.SET_GROUP_MEMBER_CUSTOM_FIELD);
          return i3.setMessage("groupID:".concat(o3, " userID:").concat(a3, " memberCustomField:").concat(JSON.stringify(s3))), this.modifyGroupMemberInfo({ groupID: o3, userID: a3, memberCustomField: s3 }).then(function(e5) {
            i3.setNetworkType(t3.getNetworkType()).end(), wl.log("".concat(n4, " ok"));
            var r5 = t3.getModule(ng).getLocalGroupProfile(o3);
            return yv({ group: r5, member: e5 });
          }).catch(function(e5) {
            return t3.probeNetwork().then(function(t4) {
              var n5 = m2(t4, 2), o4 = n5[0], r5 = n5[1];
              i3.setError(e5, o4, r5).end();
            }), wl.error("".concat(n4, " failed. error:"), e5), Rv(e5);
          });
        } }, { key: "modifyGroupMemberInfo", value: function(e4) {
          var n4 = this, o3 = e4.groupID, r4 = e4.userID, a3 = void 0;
          return Ed(o3) && (o3 = wd(a3 = o3)), this.request({ protocolName: kh, requestData: t2(t2({}, e4), {}, { groupID: o3, topicID: a3 }) }).then(function() {
            if (n4.hasLocalGroupMember(o3, r4)) {
              var t3 = n4.getLocalGroupMemberInfo(o3, r4);
              return Zl(e4.muteTime) || t3.updateMuteUntil(e4.muteTime), Zl(e4.role) || t3.updateRole(e4.role), Zl(e4.nameCard) || t3.updateNameCard(e4.nameCard), Zl(e4.memberCustomField) || t3.updateMemberCustomField(e4.memberCustomField), t3;
            }
            return n4.getGroupMemberProfile({ groupID: o3, userIDList: [r4] }).then(function(e5) {
              return m2(e5.data.memberList, 1)[0];
            });
          });
        } }, { key: "_getGroupMemberProfileAdvance", value: function(e4) {
          return this.request({ protocolName: Oh, requestData: t2(t2({}, e4), {}, { memberInfoFilter: e4.memberInfoFilter ? e4.memberInfoFilter : ["Role", "JoinTime", "NameCard", "ShutUpUntil"] }) });
        } }, { key: "_updateLocalGroupMemberMap", value: function(e4, t3) {
          var n4 = this;
          return Ql(t3) && 0 !== t3.length ? t3.map(function(t4) {
            return n4.hasLocalGroupMember(e4, t4.userID) ? n4.getLocalGroupMemberInfo(e4, t4.userID).updateMember(t4) : n4.setLocalGroupMember(e4, new SM(t4)), n4.getLocalGroupMemberInfo(e4, t4.userID);
          }) : [];
        } }, { key: "deleteLocalGroupMembers", value: function(e4, t3) {
          var n4 = this.groupMemberListMap.get(e4);
          n4 && t3.forEach(function(e5) {
            n4.delete(e5);
          });
        } }, { key: "getLocalGroupMemberInfo", value: function(e4, t3) {
          return this.groupMemberListMap.has(e4) ? this.groupMemberListMap.get(e4).get(t3) : null;
        } }, { key: "setLocalGroupMember", value: function(e4, t3) {
          if (this.groupMemberListMap.has(e4))
            this.groupMemberListMap.get(e4).set(t3.userID, t3);
          else {
            var n4 = (/* @__PURE__ */ new Map()).set(t3.userID, t3);
            this.groupMemberListMap.set(e4, n4);
          }
        } }, { key: "getLocalGroupMemberList", value: function(e4) {
          return this.groupMemberListMap.get(e4);
        } }, { key: "hasLocalGroupMember", value: function(e4, t3) {
          return this.groupMemberListMap.has(e4) && this.groupMemberListMap.get(e4).has(t3);
        } }, { key: "hasLocalGroupMemberMap", value: function(e4) {
          return this.groupMemberListMap.has(e4);
        } }, { key: "reset", value: function() {
          this.groupMemberListMap.clear();
        } }]), r3;
      }(Tg), AM = ["topicID", "topicName", "avatar", "introduction", "notification", "unreadCount", "muteAllMembers", "customData", "groupAtInfoList", "nextMessageSeq", "selfInfo"], DM = function(e3) {
        return Zl(e3) ? { lastTime: 0, lastSequence: 0, fromAccount: "", payload: null, type: "", onlineOnlyFlag: false } : e3 ? { lastTime: e3.time || 0, lastSequence: e3.sequence || 0, fromAccount: e3.from || "", payload: e3.payload || null, type: e3.type || "", onlineOnlyFlag: e3._onlineOnlyFlag || false } : void 0;
      }, NM = function() {
        function e3(t3) {
          o2(this, e3), this.topicID = "", this.topicName = "", this.avatar = "", this.introduction = "", this.notification = "", this.unreadCount = 0, this.muteAllMembers = false, this.customData = "", this.groupAtInfoList = [], this.nextMessageSeq = 0, this.lastMessage = DM(t3.lastMessage), this.selfInfo = { muteTime: 0, readedSequence: 0, messageRemindType: "" }, this._initGroupTopic(t3);
        }
        return a2(e3, [{ key: "_initGroupTopic", value: function(e4) {
          for (var t3 in e4)
            AM.indexOf(t3) < 0 || ("selfInfo" === t3 ? this.updateSelfInfo(e4[t3]) : this[t3] = "muteAllMembers" === t3 ? 1 === e4[t3] : e4[t3]);
        } }, { key: "updateUnreadCount", value: function() {
          var e4 = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0;
          this.unreadCount = e4;
        } }, { key: "updateNextMessageSeq", value: function(e4) {
          this.nextMessageSeq = e4;
        } }, { key: "updateLastMessage", value: function(e4) {
          this.lastMessage = DM(e4);
        } }, { key: "updateGroupAtInfoList", value: function(e4) {
          this.groupAtInfoList = JSON.parse(JSON.stringify(e4));
        } }, { key: "updateTopic", value: function(e4) {
          Zl(e4.selfInfo) || this.updateSelfInfo(e4.selfInfo), Zl(e4.muteAllMembers) || (this.muteAllMembers = 1 === e4.muteAllMembers), id2(this, e4, ["groupID", "lastMessageTime", "selfInfo", "muteAllMembers"]);
        } }, { key: "updateSelfInfo", value: function(e4) {
          id2(this.selfInfo, e4, [], [""]);
        } }]), e3;
      }(), OM = function(e3) {
        i2(r3, e3);
        var n3 = f2(r3);
        function r3(e4) {
          var t3;
          return o2(this, r3), (t3 = n3.call(this, e4))._className = "TopicModule", t3._topicMap = /* @__PURE__ */ new Map(), t3._getTopicTimeMap = /* @__PURE__ */ new Map(), t3.TOPIC_CACHE_TIME = 300, t3.TOPIC_LAST_ACTIVE_TIME = 3600, t3.getInnerEmitterInstance().on($v, t3._onCloudConfigUpdated, h2(t3)), t3;
        }
        return a2(r3, [{ key: "_onCloudConfigUpdated", value: function() {
          var e4 = this.getCloudConfig("topic_cache_time"), t3 = this.getCloudConfig("topic_last_active_time");
          Zl(e4) || (this.TOPIC_CACHE_TIME = Number(e4)), Zl(t3) || (this.TOPIC_LAST_ACTIVE_TIME = Number(t3));
        } }, { key: "onTopicCreated", value: function(e4) {
          var t3 = e4.groupID;
          this.resetGetTopicTime(t3), this.emitOuterEvent(pr.TOPIC_CREATED, e4);
        } }, { key: "onTopicDeleted", value: function(e4) {
          var t3 = this, n4 = e4.groupID, o3 = e4.topicIDList;
          (void 0 === o3 ? [] : o3).forEach(function(e5) {
            t3._deleteLocalTopic(n4, e5);
          }), this.emitOuterEvent(pr.TOPIC_DELETED, e4);
        } }, { key: "onTopicProfileUpdated", value: function(e4) {
          var t3 = e4.groupID, n4 = e4.topicID, o3 = this.getLocalTopic(t3, n4);
          o3 && (o3.updateTopic(e4), this.emitOuterEvent(pr.TOPIC_UPDATED, { groupID: t3, topic: o3 }));
        } }, { key: "onConversationProxy", value: function(e4) {
          var t3 = e4.topicID, n4 = e4.unreadCount, o3 = e4.groupAtInfoList, r4 = wd(t3), a3 = this.getLocalTopic(r4, t3), s3 = false;
          a3 && (Zl(n4) || a3.unreadCount === n4 || (a3.updateUnreadCount(n4), s3 = true), Zl(o3) || (a3.updateGroupAtInfoList(o3), s3 = true)), s3 && this.emitOuterEvent(pr.TOPIC_UPDATED, { groupID: r4, topic: a3 });
        } }, { key: "onMessageSent", value: function(e4) {
          var t3 = e4.groupID, n4 = e4.topicID, o3 = e4.lastMessage, r4 = this.getLocalTopic(t3, n4);
          r4 && (r4.nextMessageSeq += 1, r4.updateLastMessage(o3), this.emitOuterEvent(pr.TOPIC_UPDATED, { groupID: t3, topic: r4 }));
        } }, { key: "onMessageModified", value: function(e4) {
          var t3 = e4.to, n4 = e4.time, o3 = e4.sequence, r4 = e4.elements, a3 = e4.cloudCustomData, s3 = e4.messageVersion, i3 = wd(t3), c3 = this.getLocalTopic(i3, t3);
          if (c3) {
            var u3 = c3.lastMessage;
            wl.debug("".concat(this._className, ".onMessageModified topicID:").concat(t3, " lastMessage:"), JSON.stringify(u3), "options:", JSON.stringify(e4)), u3 && (null === u3.payload || u3.lastTime === n4 && u3.lastSequence === o3 && u3.version !== s3) && (u3.type = r4[0].type, u3.payload = r4[0].content, u3.messageForShow = Ud(u3.type, u3.payload), u3.cloudCustomData = a3, u3.version = s3, u3.lastSequence = o3, u3.lastTime = n4, this.emitOuterEvent(pr.TOPIC_UPDATED, { groupID: i3, topic: c3 }));
          }
        } }, { key: "getJoinedCommunityList", value: function() {
          return this.getModule(ng).getGroupList({ isGroupWithTopicOnly: true }).then(function(e4) {
            var t3 = e4.data.groupList;
            return yv({ groupList: void 0 === t3 ? [] : t3 });
          }).catch(function(e4) {
            return Rv(e4);
          });
        } }, { key: "createTopicInCommunity", value: function(e4) {
          var n4 = this, o3 = "".concat(this._className, ".createTopicInCommunity"), r4 = e4.topicID;
          if (!Zl(r4) && !Ed(r4))
            return Rv({ code: Zh.ILLEGAL_TOPIC_ID, message: e_.ILLEGAL_TOPIC_ID });
          var a3 = new __(f_.CREATE_TOPIC);
          return this.request({ protocolName: zh, requestData: t2({}, e4) }).then(function(r5) {
            var s3 = r5.data.topicID;
            return a3.setMessage("topicID:".concat(s3)).setNetworkType(n4.getNetworkType()).end(), wl.log("".concat(o3, " ok")), n4._updateTopicMap([t2(t2({}, e4), {}, { topicID: s3 })]), yv({ topicID: s3 });
          }).catch(function(e5) {
            return n4.probeNetwork().then(function(t3) {
              var n5 = m2(t3, 2), o4 = n5[0], r5 = n5[1];
              a3.setError(e5, o4, r5).end();
            }), wl.error("".concat(o3, " failed. error:"), e5), Rv(e5);
          });
        } }, { key: "deleteTopicFromCommunity", value: function(e4) {
          var t3 = this, n4 = "".concat(this._className, ".deleteTopicFromCommunity"), o3 = e4.groupID, r4 = e4.topicIDList, a3 = void 0 === r4 ? [] : r4, s3 = new __(f_.DELETE_TOPIC);
          return s3.setMessage("groupID:".concat(o3, " topicIDList:").concat(a3)), this.request({ protocolName: Jh, requestData: { groupID: o3, topicIDList: a3 } }).then(function(e5) {
            var n5 = e5.data.resultList, r5 = void 0 === n5 ? [] : n5, a4 = r5.filter(function(e6) {
              return 0 === e6.code;
            }).map(function(e6) {
              return { topicID: e6.topicID };
            }), i3 = r5.filter(function(e6) {
              return 0 !== e6.code;
            }), c3 = "success count:".concat(a4.length, ", fail count:").concat(i3.length);
            return s3.setMoreMessage("".concat(c3)).setNetworkType(t3.getNetworkType()).end(), wl.log("".concat(c3)), a4.forEach(function(e6) {
              t3._deleteLocalTopic(o3, e6.topicID);
            }), yv({ successTopicList: a4, failureTopicList: i3 });
          }).catch(function(e5) {
            return t3.probeNetwork().then(function(t4) {
              var n5 = m2(t4, 2), o4 = n5[0], r5 = n5[1];
              s3.setError(e5, o4, r5).end();
            }), wl.error("".concat(n4, " failed. error:"), e5), Rv(e5);
          });
        } }, { key: "updateTopicProfile", value: function(e4) {
          var n4 = this, o3 = "".concat(this._className, ".updateTopicProfile"), r4 = new __(f_.UPDATE_TOPIC_PROFILE);
          return r4.setMessage("groupID:".concat(e4.groupID, " topicID:").concat(e4.topicID)), wl.log("".concat(o3, " options:"), e4), Zl(e4.muteAllMembers) || (e4.muteAllMembers = true === e4.muteAllMembers ? "On" : "Off"), this.request({ protocolName: Xh, requestData: t2({}, e4) }).then(function() {
            return r4.setNetworkType(n4.getNetworkType()).end(), wl.log("".concat(o3, " ok")), n4._updateTopicMap([e4]), yv({ topic: n4.getLocalTopic(e4.groupID, e4.topicID) });
          }).catch(function(e5) {
            return n4.probeNetwork().then(function(t3) {
              var n5 = m2(t3, 2), o4 = n5[0], a3 = n5[1];
              r4.setError(e5, o4, a3).end();
            }), wl.error("".concat(o3, " failed. error:"), e5), Rv(e5);
          });
        } }, { key: "getTopicList", value: function(e4) {
          var n4 = this, o3 = "".concat(this._className, ".getTopicList"), r4 = e4.groupID, a3 = e4.topicIDList, s3 = void 0 === a3 ? [] : a3, i3 = new __(f_.GET_TOPIC_LIST);
          if (i3.setMessage("groupID:".concat(r4)), this._getTopicTimeMap.has(r4)) {
            var c3 = this._getTopicTimeMap.get(r4);
            if (Date.now() - c3 < 1e3 * this.TOPIC_CACHE_TIME) {
              var u3 = this._getLocalTopicList(r4, s3);
              return i3.setNetworkType(this.getNetworkType()).setMoreMessage("from cache. topicList:".concat(u3.length)).end(), wl.log("".concat(o3, " groupID:").concat(r4, " from cache. topicList:").concat(u3.length)), Ov({ successTopicList: u3, failureTopicList: [] });
            }
          }
          return this.request({ protocolName: Qh, requestData: { groupID: r4, topicIDList: s3 } }).then(function(e5) {
            var a4 = e5.data.topicInfoList, c4 = [], u4 = [], l3 = [];
            (void 0 === a4 ? [] : a4).forEach(function(e6) {
              var n5 = e6.topic, o4 = e6.selfInfo, r5 = e6.code, a5 = e6.message, s4 = n5.topicID;
              0 === r5 ? (c4.push(t2(t2({}, n5), {}, { selfInfo: o4 })), u4.push(s4)) : l3.push({ topicID: s4, code: r5, message: a5 });
            }), n4._updateTopicMap(c4);
            var d3 = "successTopicList:".concat(u4.length, " failureTopicList:").concat(l3.length);
            i3.setNetworkType(n4.getNetworkType()).setMoreMessage("".concat(d3)).end(), wl.log("".concat(o3, " groupID:").concat(r4, " from remote. ").concat(d3)), qd(s3) && !qd(u4) && n4._getTopicTimeMap.set(r4, Date.now());
            var p3 = [];
            return qd(u4) || (p3 = n4._getLocalTopicList(r4, u4)), yv({ successTopicList: p3, failureTopicList: l3 });
          }).catch(function(e5) {
            return n4.probeNetwork(e5).then(function(t3) {
              var n5 = m2(t3, 2), o4 = n5[0], r5 = n5[1];
              i3.setError(e5, o4, r5).end();
            }), wl.error("".concat(o3, " failed. error:"), e5), Rv(e5);
          });
        } }, { key: "hasLocalTopic", value: function(e4, t3) {
          return !!this._topicMap.has(e4) && !!this._topicMap.get(e4).has(t3);
        } }, { key: "getLocalTopic", value: function(e4, t3) {
          var n4 = null;
          return this._topicMap.has(e4) && (n4 = this._topicMap.get(e4).get(t3)), n4;
        } }, { key: "_getLocalTopicList", value: function(e4) {
          var t3 = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : [], n4 = this._topicMap.get(e4), o3 = [];
          return n4 && (o3 = v2(n4.values())), 0 === t3.length ? o3 : o3.filter(function(e5) {
            return t3.includes(e5.topicID);
          });
        } }, { key: "_deleteLocalTopic", value: function(e4, t3) {
          this._topicMap.has(e4) && this._topicMap.get(e4).delete(t3);
        } }, { key: "_updateTopicMap", value: function(e4) {
          var t3 = this, n4 = [];
          (e4.forEach(function(e5) {
            var o3 = e5.groupID, r4 = e5.topicID, a3 = null;
            t3._topicMap.has(o3) || t3._topicMap.set(o3, /* @__PURE__ */ new Map()), t3._topicMap.get(o3).has(r4) ? (a3 = t3._topicMap.get(o3).get(r4)).updateTopic(e5) : (a3 = new NM(e5), t3._topicMap.get(o3).set(r4, a3));
            var s3 = a3.nextMessageSeq - a3.selfInfo.readedSequence - 1;
            n4.push({ conversationID: "".concat(gr.CONV_GROUP).concat(r4), type: gr.CONV_TOPIC, unreadCount: s3 > 0 ? s3 : 0 });
          }), n4.length > 0) && this.getModule(sg).updateTopicConversation(n4);
        } }, { key: "resetGetTopicTime", value: function(e4) {
          var t3 = this;
          Zl(e4) ? v2(this._getTopicTimeMap.keys()).forEach(function(e5) {
            t3._getTopicTimeMap.set(e5, 0);
          }) : this._getTopicTimeMap.set(e4, 0);
        } }, { key: "getTopicListOnReconnected", value: function() {
          var e4 = this, t3 = v2(this._topicMap.keys()), n4 = [];
          t3.forEach(function(t4) {
            var o3 = [];
            e4._getLocalTopicList(t4).forEach(function(t5) {
              var n5 = t5.lastMessage.lastTime, r4 = void 0 === n5 ? 0 : n5;
              Date.now() - 1e3 * r4 < 1e3 * e4.TOPIC_LAST_ACTIVE_TIME && o3.push(t5.topicID);
            }), o3.length > 0 && n4.push({ groupID: t4, topicIDList: o3 });
          }), wl.log("".concat(this._className, ".getTopicListOnReconnected. active community count:").concat(n4.length)), this._relayGetTopicList(n4);
        } }, { key: "_relayGetTopicList", value: function(e4) {
          var t3 = this;
          if (0 !== e4.length) {
            var n4 = e4.shift(), o3 = n4.topicIDList.length > 5 ? "topicIDList.length:".concat(n4.topicIDList.length) : "topicIDList:".concat(n4.topicIDList), r4 = new __(f_.RELAY_GET_TOPIC_LIST);
            r4.setMessage(o3), wl.log("".concat(this._className, "._relayGetTopicList. ").concat(o3)), this.getTopicList(n4).then(function() {
              r4.setNetworkType(t3.getNetworkType()).end(), t3._relayGetTopicList(e4);
            }).catch(function(n5) {
              t3.probeNetwork().then(function(e5) {
                var t4 = m2(e5, 2), o4 = t4[0], a3 = t4[1];
                r4.setError(n5, o4, a3).end();
              }), t3._relayGetTopicList(e4);
            });
          }
        } }, { key: "reset", value: function() {
          wl.log("".concat(this._className, ".reset")), this._topicMap.clear(), this._getTopicTimeMap.clear(), this.TOPIC_CACHE_TIME = 300, this.TOPIC_LAST_ACTIVE_TIME = 3600;
        } }]), r3;
      }(Tg), RM = function() {
        function e3(t3) {
          o2(this, e3), this._userModule = t3, this._className = "ProfileHandler", this.TAG = "profile", this.accountProfileMap = /* @__PURE__ */ new Map(), this.expirationTime = 864e5;
        }
        return a2(e3, [{ key: "setExpirationTime", value: function(e4) {
          this.expirationTime = e4;
        } }, { key: "getUserProfile", value: function(e4) {
          var t3 = this, n3 = e4.userIDList;
          e4.fromAccount = this._userModule.getMyAccount(), n3.length > 100 && (wl.warn("".concat(this._className, ".getUserProfile 获取用户资料人数不能超过100人")), n3.length = 100);
          for (var o3, r3 = [], a3 = [], s3 = 0, i3 = n3.length; s3 < i3; s3++)
            o3 = n3[s3], this._userModule.isMyFriend(o3) && this._containsAccount(o3) ? a3.push(this._getProfileFromMap(o3)) : r3.push(o3);
          if (0 === r3.length)
            return Ov(a3);
          e4.toAccount = r3;
          var c3 = e4.bFromGetMyProfile || false, u3 = [];
          e4.toAccount.forEach(function(e5) {
            u3.push({ toAccount: e5, standardSequence: 0, customSequence: 0 });
          }), e4.userItem = u3;
          var l3 = new __(f_.GET_USER_PROFILE);
          return l3.setMessage(n3.length > 5 ? "userIDList.length:".concat(n3.length) : "userIDList:".concat(n3)), this._userModule.request({ protocolName: kg, requestData: e4 }).then(function(e5) {
            l3.setNetworkType(t3._userModule.getNetworkType()).end(), wl.info("".concat(t3._className, ".getUserProfile ok"));
            var n4 = t3._handleResponse(e5).concat(a3);
            return yv(c3 ? n4[0] : n4);
          }).catch(function(e5) {
            return t3._userModule.probeNetwork().then(function(t4) {
              var n4 = m2(t4, 2), o4 = n4[0], r4 = n4[1];
              l3.setError(e5, o4, r4).end();
            }), wl.error("".concat(t3._className, ".getUserProfile failed. error:"), e5), Rv(e5);
          });
        } }, { key: "getMyProfile", value: function() {
          var e4 = this._userModule.getMyAccount();
          if (wl.log("".concat(this._className, ".getMyProfile myAccount:").concat(e4)), this._fillMap(), this._containsAccount(e4)) {
            var t3 = this._getProfileFromMap(e4);
            return wl.debug("".concat(this._className, ".getMyProfile from cache, myProfile:") + JSON.stringify(t3)), Ov(t3);
          }
          return this.getUserProfile({ fromAccount: e4, userIDList: [e4], bFromGetMyProfile: true });
        } }, { key: "_handleResponse", value: function(e4) {
          for (var t3, n3, o3 = sd.now(), r3 = e4.data.userProfileItem, a3 = [], s3 = 0, i3 = r3.length; s3 < i3; s3++)
            "@TLS#NOT_FOUND" !== r3[s3].to && "" !== r3[s3].to && (t3 = r3[s3].to, n3 = this._updateMap(t3, this._getLatestProfileFromResponse(t3, r3[s3].profileItem)), a3.push(n3));
          return wl.log("".concat(this._className, "._handleResponse cost ").concat(sd.now() - o3, " ms")), a3;
        } }, { key: "_getLatestProfileFromResponse", value: function(e4, t3) {
          var n3 = {};
          if (n3.userID = e4, n3.profileCustomField = [], !qd(t3))
            for (var o3 = 0, r3 = t3.length; o3 < r3; o3++)
              if (t3[o3].tag.indexOf("Tag_Profile_Custom") > -1)
                n3.profileCustomField.push({ key: t3[o3].tag, value: t3[o3].value });
              else
                switch (t3[o3].tag) {
                  case Fl.NICK:
                    n3.nick = t3[o3].value;
                    break;
                  case Fl.GENDER:
                    n3.gender = t3[o3].value;
                    break;
                  case Fl.BIRTHDAY:
                    n3.birthday = t3[o3].value;
                    break;
                  case Fl.LOCATION:
                    n3.location = t3[o3].value;
                    break;
                  case Fl.SELFSIGNATURE:
                    n3.selfSignature = t3[o3].value;
                    break;
                  case Fl.ALLOWTYPE:
                    n3.allowType = t3[o3].value;
                    break;
                  case Fl.LANGUAGE:
                    n3.language = t3[o3].value;
                    break;
                  case Fl.AVATAR:
                    n3.avatar = t3[o3].value;
                    break;
                  case Fl.MESSAGESETTINGS:
                    n3.messageSettings = t3[o3].value;
                    break;
                  case Fl.ADMINFORBIDTYPE:
                    n3.adminForbidType = t3[o3].value;
                    break;
                  case Fl.LEVEL:
                    n3.level = t3[o3].value;
                    break;
                  case Fl.ROLE:
                    n3.role = t3[o3].value;
                    break;
                  default:
                    wl.warn("".concat(this._className, "._handleResponse unknown tag:"), t3[o3].tag, t3[o3].value);
                }
          return n3;
        } }, { key: "updateMyProfile", value: function(e4) {
          var t3 = this, n3 = "".concat(this._className, ".updateMyProfile"), o3 = new __(f_.UPDATE_MY_PROFILE);
          o3.setMessage(JSON.stringify(e4));
          var r3 = new oM().validate(e4);
          if (!r3.valid)
            return o3.setCode(Zh.UPDATE_PROFILE_INVALID_PARAM).setMoreMessage("".concat(n3, " info:").concat(r3.tips)).setNetworkType(this._userModule.getNetworkType()).end(), wl.error("".concat(n3, " info:").concat(r3.tips, "，请参考 https://web.sdk.qcloud.com/im/doc/zh-cn/SDK.html#updateMyProfile")), Rv({ code: Zh.UPDATE_PROFILE_INVALID_PARAM, message: e_.UPDATE_PROFILE_INVALID_PARAM });
          var a3 = [];
          for (var s3 in e4)
            Object.prototype.hasOwnProperty.call(e4, s3) && ("profileCustomField" === s3 ? e4.profileCustomField.forEach(function(e5) {
              a3.push({ tag: e5.key, value: e5.value });
            }) : a3.push({ tag: Fl[s3.toUpperCase()], value: e4[s3] }));
          return 0 === a3.length ? (o3.setCode(Zh.UPDATE_PROFILE_NO_KEY).setMoreMessage(e_.UPDATE_PROFILE_NO_KEY).setNetworkType(this._userModule.getNetworkType()).end(), wl.error("".concat(n3, " info:").concat(e_.UPDATE_PROFILE_NO_KEY, "，请参考 https://web.sdk.qcloud.com/im/doc/zh-cn/SDK.html#updateMyProfile")), Rv({ code: Zh.UPDATE_PROFILE_NO_KEY, message: e_.UPDATE_PROFILE_NO_KEY })) : this._userModule.request({ protocolName: Pg, requestData: { fromAccount: this._userModule.getMyAccount(), profileItem: a3 } }).then(function(r4) {
            o3.setNetworkType(t3._userModule.getNetworkType()).end(), wl.info("".concat(n3, " ok"));
            var a4 = t3._updateMap(t3._userModule.getMyAccount(), e4);
            return t3._userModule.emitOuterEvent(pr.PROFILE_UPDATED, [a4]), Ov(a4);
          }).catch(function(e5) {
            return t3._userModule.probeNetwork().then(function(t4) {
              var n4 = m2(t4, 2), r4 = n4[0], a4 = n4[1];
              o3.setError(e5, r4, a4).end();
            }), wl.error("".concat(n3, " failed. error:"), e5), Rv(e5);
          });
        } }, { key: "onProfileModified", value: function(e4) {
          var t3 = e4.dataList;
          if (!qd(t3)) {
            var n3, o3, r3 = t3.length;
            wl.debug("".concat(this._className, ".onProfileModified count:").concat(r3, " dataList:"), e4.dataList);
            for (var a3 = [], s3 = 0; s3 < r3; s3++)
              n3 = t3[s3].userID, o3 = this._updateMap(n3, this._getLatestProfileFromResponse(n3, t3[s3].profileList)), a3.push(o3);
            a3.length > 0 && (this._userModule.emitInnerEvent(zv, a3), this._userModule.emitOuterEvent(pr.PROFILE_UPDATED, a3));
          }
        } }, { key: "_fillMap", value: function() {
          if (0 === this.accountProfileMap.size) {
            for (var e4 = this._getCachedProfiles(), t3 = Date.now(), n3 = 0, o3 = e4.length; n3 < o3; n3++)
              t3 - e4[n3].lastUpdatedTime < this.expirationTime && this.accountProfileMap.set(e4[n3].userID, e4[n3]);
            wl.log("".concat(this._className, "._fillMap from cache, map.size:").concat(this.accountProfileMap.size));
          }
        } }, { key: "_updateMap", value: function(e4, t3) {
          var n3, o3 = Date.now();
          return this._containsAccount(e4) ? (n3 = this._getProfileFromMap(e4), t3.profileCustomField && vd(n3.profileCustomField, t3.profileCustomField), id2(n3, t3, ["profileCustomField"]), n3.lastUpdatedTime = o3) : (n3 = new oM(t3), (this._userModule.isMyFriend(e4) || e4 === this._userModule.getMyAccount()) && (n3.lastUpdatedTime = o3, this.accountProfileMap.set(e4, n3))), this._flushMap(e4 === this._userModule.getMyAccount()), n3;
        } }, { key: "_flushMap", value: function(e4) {
          var t3 = v2(this.accountProfileMap.values()), n3 = this._userModule.getStorageModule();
          wl.debug("".concat(this._className, "._flushMap length:").concat(t3.length, " flushAtOnce:").concat(e4)), n3.setItem(this.TAG, t3, e4);
        } }, { key: "_containsAccount", value: function(e4) {
          return this.accountProfileMap.has(e4);
        } }, { key: "_getProfileFromMap", value: function(e4) {
          return this.accountProfileMap.get(e4);
        } }, { key: "_getCachedProfiles", value: function() {
          var e4 = this._userModule.getStorageModule().getItem(this.TAG);
          return qd(e4) ? [] : e4;
        } }, { key: "onConversationsProfileUpdated", value: function(e4) {
          for (var t3, n3, o3, r3 = [], a3 = 0, s3 = e4.length; a3 < s3; a3++)
            n3 = (t3 = e4[a3]).userID, this._userModule.isMyFriend(n3) || (this._containsAccount(n3) ? (o3 = this._getProfileFromMap(n3), id2(o3, t3) > 0 && r3.push(n3)) : r3.push(t3.userID));
          0 !== r3.length && (wl.info("".concat(this._className, ".onConversationsProfileUpdated toAccountList:").concat(r3)), this.getUserProfile({ userIDList: r3 }));
        } }, { key: "getNickAndAvatarByUserID", value: function(e4) {
          if (this._containsAccount(e4)) {
            var t3 = this._getProfileFromMap(e4);
            return { nick: t3.nick, avatar: t3.avatar };
          }
          return { nick: "", avatar: "" };
        } }, { key: "reset", value: function() {
          this._flushMap(true), this.accountProfileMap.clear();
        } }]), e3;
      }(), LM = a2(function e3(t3) {
        o2(this, e3), qd || (this.userID = t3.userID || "", this.timeStamp = t3.timeStamp || 0);
      }), kM = function() {
        function e3(t3) {
          o2(this, e3), this._userModule = t3, this._className = "BlacklistHandler", this._blacklistMap = /* @__PURE__ */ new Map(), this.startIndex = 0, this.maxLimited = 100, this.currentSequence = 0;
        }
        return a2(e3, [{ key: "getLocalBlacklist", value: function() {
          return v2(this._blacklistMap.keys());
        } }, { key: "getBlacklist", value: function() {
          var e4 = this, t3 = "".concat(this._className, ".getBlacklist"), n3 = { fromAccount: this._userModule.getMyAccount(), maxLimited: this.maxLimited, startIndex: 0, lastSequence: this.currentSequence }, o3 = new __(f_.GET_BLACKLIST);
          return this._userModule.request({ protocolName: Gg, requestData: n3 }).then(function(n4) {
            var r3 = n4.data, a3 = r3.blackListItem, s3 = r3.currentSequence, i3 = qd(a3) ? 0 : a3.length;
            o3.setNetworkType(e4._userModule.getNetworkType()).setMessage("blackList count:".concat(i3)).end(), wl.info("".concat(t3, " ok")), e4.currentSequence = s3, e4._handleResponse(a3, true), e4._userModule.emitOuterEvent(pr.BLACKLIST_UPDATED, v2(e4._blacklistMap.keys()));
          }).catch(function(n4) {
            return e4._userModule.probeNetwork().then(function(e5) {
              var t4 = m2(e5, 2), r3 = t4[0], a3 = t4[1];
              o3.setError(n4, r3, a3).end();
            }), wl.error("".concat(t3, " failed. error:"), n4), Rv(n4);
          });
        } }, { key: "addBlacklist", value: function(e4) {
          var t3 = this, n3 = "".concat(this._className, ".addBlacklist"), o3 = new __(f_.ADD_TO_BLACKLIST);
          if (!Ql(e4.userIDList))
            return o3.setCode(Zh.ADD_BLACKLIST_INVALID_PARAM).setMessage(e_.ADD_BLACKLIST_INVALID_PARAM).setNetworkType(this._userModule.getNetworkType()).end(), wl.error("".concat(n3, " options.userIDList 必需是数组")), Rv({ code: Zh.ADD_BLACKLIST_INVALID_PARAM, message: e_.ADD_BLACKLIST_INVALID_PARAM });
          var r3 = this._userModule.getMyAccount();
          return 1 === e4.userIDList.length && e4.userIDList[0] === r3 ? (o3.setCode(Zh.CANNOT_ADD_SELF_TO_BLACKLIST).setMessage(e_.CANNOT_ADD_SELF_TO_BLACKLIST).setNetworkType(this._userModule.getNetworkType()).end(), wl.error("".concat(n3, " 不能把自己拉黑")), Rv({ code: Zh.CANNOT_ADD_SELF_TO_BLACKLIST, message: e_.CANNOT_ADD_SELF_TO_BLACKLIST })) : (e4.userIDList.includes(r3) && (e4.userIDList = e4.userIDList.filter(function(e5) {
            return e5 !== r3;
          }), wl.warn("".concat(n3, " 不能把自己拉黑，已过滤"))), e4.fromAccount = this._userModule.getMyAccount(), e4.toAccount = e4.userIDList, this._userModule.request({ protocolName: bg, requestData: e4 }).then(function(r4) {
            return o3.setNetworkType(t3._userModule.getNetworkType()).setMessage(e4.userIDList.length > 5 ? "userIDList.length:".concat(e4.userIDList.length) : "userIDList:".concat(e4.userIDList)).end(), wl.info("".concat(n3, " ok")), t3._handleResponse(r4.resultItem, true), yv(v2(t3._blacklistMap.keys()));
          }).catch(function(e5) {
            return t3._userModule.probeNetwork().then(function(t4) {
              var n4 = m2(t4, 2), r4 = n4[0], a3 = n4[1];
              o3.setError(e5, r4, a3).end();
            }), wl.error("".concat(n3, " failed. error:"), e5), Rv(e5);
          }));
        } }, { key: "_handleResponse", value: function(e4, t3) {
          if (!qd(e4))
            for (var n3, o3, r3, a3 = 0, s3 = e4.length; a3 < s3; a3++)
              o3 = e4[a3].to, r3 = e4[a3].resultCode, (Zl(r3) || 0 === r3) && (t3 ? ((n3 = this._blacklistMap.has(o3) ? this._blacklistMap.get(o3) : new LM()).userID = o3, !qd(e4[a3].addBlackTimeStamp) && (n3.timeStamp = e4[a3].addBlackTimeStamp), this._blacklistMap.set(o3, n3)) : this._blacklistMap.has(o3) && (n3 = this._blacklistMap.get(o3), this._blacklistMap.delete(o3)));
          wl.log("".concat(this._className, "._handleResponse total:").concat(this._blacklistMap.size, " bAdd:").concat(t3));
        } }, { key: "deleteBlacklist", value: function(e4) {
          var t3 = this, n3 = "".concat(this._className, ".deleteBlacklist"), o3 = new __(f_.REMOVE_FROM_BLACKLIST);
          return Ql(e4.userIDList) ? (e4.fromAccount = this._userModule.getMyAccount(), e4.toAccount = e4.userIDList, this._userModule.request({ protocolName: wg, requestData: e4 }).then(function(r3) {
            return o3.setNetworkType(t3._userModule.getNetworkType()).setMessage(e4.userIDList.length > 5 ? "userIDList.length:".concat(e4.userIDList.length) : "userIDList:".concat(e4.userIDList)).end(), wl.info("".concat(n3, " ok")), t3._handleResponse(r3.data.resultItem, false), yv(v2(t3._blacklistMap.keys()));
          }).catch(function(e5) {
            return t3._userModule.probeNetwork().then(function(t4) {
              var n4 = m2(t4, 2), r3 = n4[0], a3 = n4[1];
              o3.setError(e5, r3, a3).end();
            }), wl.error("".concat(n3, " failed. error:"), e5), Rv(e5);
          })) : (o3.setCode(Zh.DEL_BLACKLIST_INVALID_PARAM).setMessage(e_.DEL_BLACKLIST_INVALID_PARAM).setNetworkType(this._userModule.getNetworkType()).end(), wl.error("".concat(n3, " options.userIDList 必需是数组")), Rv({ code: Zh.DEL_BLACKLIST_INVALID_PARAM, message: e_.DEL_BLACKLIST_INVALID_PARAM }));
        } }, { key: "onAccountDeleted", value: function(e4) {
          for (var t3, n3 = [], o3 = 0, r3 = e4.length; o3 < r3; o3++)
            t3 = e4[o3], this._blacklistMap.has(t3) && (this._blacklistMap.delete(t3), n3.push(t3));
          n3.length > 0 && (wl.log("".concat(this._className, ".onAccountDeleted count:").concat(n3.length, " userIDList:"), n3), this._userModule.emitOuterEvent(pr.BLACKLIST_UPDATED, v2(this._blacklistMap.keys())));
        } }, { key: "onAccountAdded", value: function(e4) {
          for (var t3, n3 = [], o3 = 0, r3 = e4.length; o3 < r3; o3++)
            t3 = e4[o3], this._blacklistMap.has(t3) || (this._blacklistMap.set(t3, new LM({ userID: t3 })), n3.push(t3));
          n3.length > 0 && (wl.log("".concat(this._className, ".onAccountAdded count:").concat(n3.length, " userIDList:"), n3), this._userModule.emitOuterEvent(pr.BLACKLIST_UPDATED, v2(this._blacklistMap.keys())));
        } }, { key: "reset", value: function() {
          this._blacklistMap.clear(), this.startIndex = 0, this.maxLimited = 100, this.currentSequence = 0;
        } }]), e3;
      }(), PM = function(e3) {
        i2(n3, e3);
        var t3 = f2(n3);
        function n3(e4) {
          var r3;
          return o2(this, n3), (r3 = t3.call(this, e4))._className = "UserModule", r3._profileHandler = new RM(h2(r3)), r3._blacklistHandler = new kM(h2(r3)), r3.getInnerEmitterInstance().on(Yv, r3.onContextUpdated, h2(r3)), r3;
        }
        return a2(n3, [{ key: "onContextUpdated", value: function(e4) {
          this._profileHandler.getMyProfile(), this._blacklistHandler.getBlacklist();
        } }, { key: "onProfileModified", value: function(e4) {
          this._profileHandler.onProfileModified(e4);
        } }, { key: "onRelationChainModified", value: function(e4) {
          var t4 = e4.dataList;
          if (!qd(t4)) {
            var n4 = [];
            t4.forEach(function(e5) {
              e5.blackListDelAccount && n4.push.apply(n4, v2(e5.blackListDelAccount));
            }), n4.length > 0 && this._blacklistHandler.onAccountDeleted(n4);
            var o3 = [];
            t4.forEach(function(e5) {
              e5.blackListAddAccount && o3.push.apply(o3, v2(e5.blackListAddAccount));
            }), o3.length > 0 && this._blacklistHandler.onAccountAdded(o3);
          }
        } }, { key: "onConversationsProfileUpdated", value: function(e4) {
          this._profileHandler.onConversationsProfileUpdated(e4);
        } }, { key: "getMyAccount", value: function() {
          return this.getMyUserID();
        } }, { key: "getMyProfile", value: function() {
          return this._profileHandler.getMyProfile();
        } }, { key: "getStorageModule", value: function() {
          return this.getModule(cg);
        } }, { key: "isMyFriend", value: function(e4) {
          var t4 = this.getModule(og);
          return !!t4 && t4.isMyFriend(e4);
        } }, { key: "getUserProfile", value: function(e4) {
          return this._profileHandler.getUserProfile(e4);
        } }, { key: "updateMyProfile", value: function(e4) {
          return this._profileHandler.updateMyProfile(e4);
        } }, { key: "getNickAndAvatarByUserID", value: function(e4) {
          return this._profileHandler.getNickAndAvatarByUserID(e4);
        } }, { key: "getLocalBlacklist", value: function() {
          var e4 = this._blacklistHandler.getLocalBlacklist();
          return Ov(e4);
        } }, { key: "addBlacklist", value: function(e4) {
          return this._blacklistHandler.addBlacklist(e4);
        } }, { key: "deleteBlacklist", value: function(e4) {
          return this._blacklistHandler.deleteBlacklist(e4);
        } }, { key: "reset", value: function() {
          wl.log("".concat(this._className, ".reset")), this._profileHandler.reset(), this._blacklistHandler.reset();
        } }]), n3;
      }(Tg), GM = function() {
        function e3(t3, n3) {
          o2(this, e3), this._moduleManager = t3, this._isLoggedIn = false, this._SDKAppID = n3.SDKAppID, this._userID = n3.userID || "", this._userSig = n3.userSig || "", this._version = "2.20.0", this._a2Key = "", this._tinyID = "", this._contentType = "json", this._unlimitedAVChatRoom = n3.unlimitedAVChatRoom, this._scene = n3.scene || "", this._oversea = n3.oversea, this._instanceID = n3.instanceID, this._statusInstanceID = 0, this._isDevMode = n3.devMode, this._proxyServer = n3.proxyServer;
        }
        return a2(e3, [{ key: "isLoggedIn", value: function() {
          return this._isLoggedIn;
        } }, { key: "isOversea", value: function() {
          return this._oversea;
        } }, { key: "isDevMode", value: function() {
          return this._isDevMode;
        } }, { key: "isSingaporeSite", value: function() {
          return this._SDKAppID >= 2e7 && this._SDKAppID < 3e7;
        } }, { key: "isKoreaSite", value: function() {
          return this._SDKAppID >= 3e7 && this._SDKAppID < 4e7;
        } }, { key: "isGermanySite", value: function() {
          return this._SDKAppID >= 4e7 && this._SDKAppID < 5e7;
        } }, { key: "isIndiaSite", value: function() {
          return this._SDKAppID >= 5e7 && this._SDKAppID < 6e7;
        } }, { key: "isUnlimitedAVChatRoom", value: function() {
          return this._unlimitedAVChatRoom;
        } }, { key: "getUserID", value: function() {
          return this._userID;
        } }, { key: "setUserID", value: function(e4) {
          this._userID = e4;
        } }, { key: "setUserSig", value: function(e4) {
          this._userSig = e4;
        } }, { key: "getUserSig", value: function() {
          return this._userSig;
        } }, { key: "getSDKAppID", value: function() {
          return this._SDKAppID;
        } }, { key: "getTinyID", value: function() {
          return this._tinyID;
        } }, { key: "setTinyID", value: function(e4) {
          this._tinyID = e4, this._isLoggedIn = true;
        } }, { key: "getScene", value: function() {
          return this._isTUIKit() ? "tuikit" : this._scene;
        } }, { key: "getInstanceID", value: function() {
          return this._instanceID;
        } }, { key: "getStatusInstanceID", value: function() {
          return this._statusInstanceID;
        } }, { key: "setStatusInstanceID", value: function(e4) {
          this._statusInstanceID = e4;
        } }, { key: "getVersion", value: function() {
          return this._version;
        } }, { key: "getA2Key", value: function() {
          return this._a2Key;
        } }, { key: "setA2Key", value: function(e4) {
          this._a2Key = e4;
        } }, { key: "getContentType", value: function() {
          return this._contentType;
        } }, { key: "getProxyServer", value: function() {
          return this._proxyServer;
        } }, { key: "_isTUIKit", value: function() {
          var e4 = false, t3 = false, n3 = false, o3 = false, r3 = [];
          Bu && (r3 = Object.keys(Wu)), ju && (r3 = Hu ? Object.keys(uni) : Object.keys(window));
          for (var a3 = 0, s3 = r3.length; a3 < s3; a3++)
            if (r3[a3].toLowerCase().includes("uikit")) {
              e4 = true;
              break;
            }
          if (r3 = null, Bu && td(getApp)) {
            var i3 = getApp().globalData;
            Xl(i3) && true === i3.isTUIKit && (t3 = true);
          }
          true === this._moduleManager.getModule(cg).getStorageSync("TIM_".concat(this._SDKAppID, "_isTUIKit")) && (n3 = true);
          var c3 = null;
          if (Uu && "undefined" == typeof uni && __wxConfig && (c3 = __wxConfig.pages), Fu && "undefined" == typeof uni && __qqConfig && (c3 = __qqConfig.pages), Ql(c3) && c3.length > 0) {
            for (var u3 = 0, l3 = c3.length; u3 < l3; u3++)
              if (c3[u3].toLowerCase().includes("tui")) {
                o3 = true;
                break;
              }
            c3 = null;
          }
          return e4 || t3 || n3 || o3;
        } }, { key: "reset", value: function() {
          this._isLoggedIn = false, this._userSig = "", this._a2Key = "", this._tinyID = "", this._statusInstanceID = 0;
        } }]), e3;
      }(), bM = function(e3) {
        i2(n3, e3);
        var t3 = f2(n3);
        function n3(e4) {
          var r3;
          return o2(this, n3), (r3 = t3.call(this, e4))._className = "SignModule", r3._helloInterval = 120, r3._lastLoginTs = 0, r3._lastWsHelloTs = 0, Jv.mixin(h2(r3)), r3;
        }
        return a2(n3, [{ key: "onCheckTimer", value: function(e4) {
          this.isLoggedIn() && e4 % this._helloInterval == 0 && this._hello();
        } }, { key: "login", value: function(e4) {
          if (this.isLoggedIn()) {
            var t4 = "您已经登录账号".concat(e4.userID, "！如需切换账号登录，请先调用 logout 接口登出，再调用 login 接口登录。");
            return wl.warn(t4), Ov({ actionStatus: "OK", errorCode: 0, errorInfo: t4, repeatLogin: true });
          }
          if (Date.now() - this._lastLoginTs <= 15e3)
            return wl.warn("您正在尝试登录账号".concat(e4.userID, "！请勿重复登录。")), Rv({ code: Zh.REPEAT_LOGIN, message: e_.REPEAT_LOGIN });
          wl.log("".concat(this._className, ".login userID:").concat(e4.userID));
          var n4 = this._checkLoginInfo(e4);
          if (0 !== n4.code)
            return Rv(n4);
          var o3 = this.getModule(ig), r3 = e4.userID, a3 = e4.userSig;
          return o3.setUserID(r3), o3.setUserSig(a3), this.getModule(_g).updateProtocolConfig(), this._login();
        } }, { key: "_login", value: function() {
          var e4 = this, t4 = this.getModule(ig), n4 = t4.getScene(), o3 = new __(f_.LOGIN);
          return o3.setMessage("".concat(n4)).setMoreMessage("identifier:".concat(this.getMyUserID())), Hu ? "tuikit" === n4 ? o3.setUIPlatform(4) : o3.setUIPlatform(3) : Bu ? "tuikit" === n4 ? o3.setUIPlatform(12) : o3.setUIPlatform(11) : ju && (pl ? "tuikit" === n4 ? o3.setUIPlatform(17) : o3.setUIPlatform(16) : "tuikit" === n4 ? o3.setUIPlatform(14) : o3.setUIPlatform(13)), this._lastLoginTs = Date.now(), this.request({ protocolName: Sg }).then(function(r3) {
            e4._lastLoginTs = 0;
            var a3 = Date.now(), s3 = null, i3 = r3.data, c3 = i3.a2Key, u3 = i3.tinyID, l3 = i3.helloInterval, d3 = i3.instanceID, p3 = i3.timeStamp;
            wl.log("".concat(e4._className, ".login ok. scene:").concat(n4, " helloInterval:").concat(l3, " instanceID:").concat(d3, " timeStamp:").concat(p3));
            var g3 = 1e3 * p3, h3 = a3 - o3.getStartTs(), _3 = g3 + parseInt(h3 / 2) - a3, f3 = o3.getStartTs() + _3;
            if (o3.start(f3), function(e5, t5) {
              Ol = t5;
              var n5 = /* @__PURE__ */ new Date();
              n5.setTime(e5), wl.info("baseTime from server: ".concat(n5, " offset: ").concat(Ol));
            }(g3, _3), !u3)
              throw s3 = new Av({ code: Zh.NO_TINYID, message: e_.NO_TINYID }), o3.setError(s3, true, e4.getNetworkType()).end(), s3;
            if (!c3)
              throw s3 = new Av({ code: Zh.NO_A2KEY, message: e_.NO_A2KEY }), o3.setError(s3, true, e4.getNetworkType()).end(), s3;
            return o3.setNetworkType(e4.getNetworkType()).setMoreMessage("helloInterval:".concat(l3, " instanceID:").concat(d3, " offset:").concat(_3)).end(), t4.setA2Key(c3), t4.setTinyID(u3), t4.setStatusInstanceID(d3), e4.getModule(_g).updateProtocolConfig(), e4.emitInnerEvent(Yv), e4._helloInterval = l3, e4.triggerReady(), e4._fetchCloudControlConfig(), r3;
          }).catch(function(t5) {
            return e4.probeNetwork().then(function(e5) {
              var n5 = m2(e5, 2), r3 = n5[0], a3 = n5[1];
              o3.setError(t5, r3, a3).end(true);
            }), e4._moduleManager.setNotReadyReason(Zh.LOGIN_FAILED), wl.error("".concat(e4._className, ".login failed. error:"), t5), e4._lastLoginTs = 0, e4._moduleManager.onLoginFailed(), Rv(t5);
          });
        } }, { key: "logout", value: function() {
          var e4 = this, t4 = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0;
          if (!this.isLoggedIn())
            return Rv({ code: Zh.USER_NOT_LOGGED_IN, message: e_.USER_NOT_LOGGED_IN });
          var n4 = new __(f_.LOGOUT);
          return n4.setNetworkType(this.getNetworkType()).setMessage("identifier:".concat(this.getMyUserID())).end(true), wl.info("".concat(this._className, ".logout type:").concat(t4)), 0 === t4 && this._moduleManager.setNotReadyReason(Zh.LOGGED_OUT), this.request({ protocolName: Cg, requestData: { type: t4 } }).then(function() {
            return e4.resetReady(), Ov({});
          }).catch(function(t5) {
            return wl.error("".concat(e4._className, "._logout error:"), t5), e4.resetReady(), Ov({});
          });
        } }, { key: "_fetchCloudControlConfig", value: function() {
          this.getModule(vg).fetchConfig();
        } }, { key: "_hello", value: function() {
          var e4 = this;
          this._lastWsHelloTs = Date.now(), this.request({ protocolName: Ag }).catch(function(t4) {
            wl.warn("".concat(e4._className, "._hello error:"), t4);
          });
        } }, { key: "getLastWsHelloTs", value: function() {
          return this._lastWsHelloTs;
        } }, { key: "_checkLoginInfo", value: function(e4) {
          var t4 = 0, n4 = "";
          return qd(this.getModule(ig).getSDKAppID()) ? (t4 = Zh.NO_SDKAPPID, n4 = e_.NO_SDKAPPID) : qd(e4.userID) ? (t4 = Zh.NO_IDENTIFIER, n4 = e_.NO_IDENTIFIER) : qd(e4.userSig) && (t4 = Zh.NO_USERSIG, n4 = e_.NO_USERSIG), { code: t4, message: n4 };
        } }, { key: "onMultipleAccountKickedOut", value: function(e4) {
          var t4 = this;
          new __(f_.KICKED_OUT).setNetworkType(this.getNetworkType()).setMessage("type:".concat(gr.KICKED_OUT_MULT_ACCOUNT, " newInstanceInfo:").concat(JSON.stringify(e4))).end(true), wl.warn("".concat(this._className, ".onMultipleAccountKickedOut userID:").concat(this.getMyUserID(), " newInstanceInfo:"), e4), this.logout(1).then(function() {
            t4.emitOuterEvent(pr.KICKED_OUT, { type: gr.KICKED_OUT_MULT_ACCOUNT }), t4._moduleManager.setNotReadyReason(Zh.KICKED_OUT_MULT_ACCOUNT), t4._moduleManager.reset();
          });
        } }, { key: "onMultipleDeviceKickedOut", value: function(e4) {
          var t4 = this;
          new __(f_.KICKED_OUT).setNetworkType(this.getNetworkType()).setMessage("type:".concat(gr.KICKED_OUT_MULT_DEVICE, " newInstanceInfo:").concat(JSON.stringify(e4))).end(true), wl.warn("".concat(this._className, ".onMultipleDeviceKickedOut userID:").concat(this.getMyUserID(), " newInstanceInfo:"), e4), this.logout(1).then(function() {
            t4.emitOuterEvent(pr.KICKED_OUT, { type: gr.KICKED_OUT_MULT_DEVICE }), t4._moduleManager.setNotReadyReason(Zh.KICKED_OUT_MULT_DEVICE), t4._moduleManager.reset();
          });
        } }, { key: "onUserSigExpired", value: function() {
          new __(f_.KICKED_OUT).setNetworkType(this.getNetworkType()).setMessage(gr.KICKED_OUT_USERSIG_EXPIRED).end(true), wl.warn("".concat(this._className, ".onUserSigExpired: userSig 签名过期被踢下线")), 0 !== this.getModule(ig).getStatusInstanceID() && (this.emitOuterEvent(pr.KICKED_OUT, { type: gr.KICKED_OUT_USERSIG_EXPIRED }), this._moduleManager.setNotReadyReason(Zh.KICKED_OUT_USERSIG_EXPIRED), this._moduleManager.reset());
        } }, { key: "onRestApiKickedOut", value: function(e4) {
          (new __(f_.KICKED_OUT).setNetworkType(this.getNetworkType()).setMessage("type:".concat(gr.KICKED_OUT_REST_API, " newInstanceInfo:").concat(JSON.stringify(e4))).end(true), wl.warn("".concat(this._className, ".onRestApiKickedOut userID:").concat(this.getMyUserID(), " newInstanceInfo:"), e4), 0 !== this.getModule(ig).getStatusInstanceID()) && (this.emitOuterEvent(pr.KICKED_OUT, { type: gr.KICKED_OUT_REST_API }), this._moduleManager.setNotReadyReason(Zh.KICKED_OUT_REST_API), this._moduleManager.reset(), this.getModule(fg).onRestApiKickedOut());
        } }, { key: "reset", value: function() {
          wl.log("".concat(this._className, ".reset")), this.resetReady(), this._helloInterval = 120, this._lastLoginTs = 0, this._lastWsHelloTs = 0;
        } }]), n3;
      }(Tg), wM = nt2.f;
      function UM() {
        return null;
      }
      nn2({ target: "Object", stat: true, forced: Object.defineProperty !== wM, sham: !k }, { defineProperty: wM });
      var FM = function() {
        function e3(t3) {
          o2(this, e3), this._moduleManager = t3, this._className = "StorageModule", this._storageQueue = /* @__PURE__ */ new Map(), this._errorTolerantHandle();
        }
        return a2(e3, [{ key: "_errorTolerantHandle", value: function() {
          Bu || !Zl(window) && !Zl(window.localStorage) || (this.getItem = UM, this.setItem = UM, this.removeItem = UM, this.clear = UM);
        } }, { key: "onCheckTimer", value: function(e4) {
          if (e4 % 20 == 0) {
            if (0 === this._storageQueue.size)
              return;
            this._doFlush();
          }
        } }, { key: "_doFlush", value: function() {
          try {
            var e4, t3 = S2(this._storageQueue);
            try {
              for (t3.s(); !(e4 = t3.n()).done; ) {
                var n3 = m2(e4.value, 2), o3 = n3[0], r3 = n3[1];
                this._setStorageSync(this._getKey(o3), r3);
              }
            } catch (a3) {
              t3.e(a3);
            } finally {
              t3.f();
            }
            this._storageQueue.clear();
          } catch (rS) {
            wl.warn("".concat(this._className, "._doFlush error:"), rS);
          }
        } }, { key: "_getPrefix", value: function() {
          var e4 = this._moduleManager.getModule(ig);
          return "TIM_".concat(e4.getSDKAppID(), "_").concat(e4.getUserID(), "_");
        } }, { key: "_getKey", value: function(e4) {
          return "".concat(this._getPrefix()).concat(e4);
        } }, { key: "getItem", value: function(e4) {
          var t3 = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1];
          try {
            var n3 = t3 ? this._getKey(e4) : e4;
            return this.getStorageSync(n3);
          } catch (rS) {
            return wl.warn("".concat(this._className, ".getItem error:"), rS), {};
          }
        } }, { key: "setItem", value: function(e4, t3) {
          var n3 = arguments.length > 2 && void 0 !== arguments[2] && arguments[2], o3 = !(arguments.length > 3 && void 0 !== arguments[3]) || arguments[3];
          if (n3) {
            var r3 = o3 ? this._getKey(e4) : e4;
            this._setStorageSync(r3, t3);
          } else
            this._storageQueue.set(e4, t3);
        } }, { key: "clear", value: function() {
          try {
            Bu ? Wu.clearStorageSync() : localStorage && localStorage.clear();
          } catch (rS) {
            wl.warn("".concat(this._className, ".clear error:"), rS);
          }
        } }, { key: "removeItem", value: function(e4) {
          var t3 = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1];
          try {
            var n3 = t3 ? this._getKey(e4) : e4;
            this._removeStorageSync(n3);
          } catch (rS) {
            wl.warn("".concat(this._className, ".removeItem error:"), rS);
          }
        } }, { key: "getSize", value: function(e4) {
          var t3 = this, n3 = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "b";
          try {
            var o3 = { size: 0, limitSize: 5242880, unit: n3 };
            if (Object.defineProperty(o3, "leftSize", { enumerable: true, get: function() {
              return o3.limitSize - o3.size;
            } }), Bu && (o3.limitSize = 1024 * Wu.getStorageInfoSync().limitSize), e4)
              o3.size = JSON.stringify(this.getItem(e4)).length + this._getKey(e4).length;
            else if (Bu) {
              var r3 = Wu.getStorageInfoSync(), a3 = r3.keys;
              a3.forEach(function(e5) {
                o3.size += JSON.stringify(t3.getStorageSync(e5)).length + t3._getKey(e5).length;
              });
            } else if (localStorage)
              for (var s3 in localStorage)
                localStorage.hasOwnProperty(s3) && (o3.size += localStorage.getItem(s3).length + s3.length);
            return this._convertUnit(o3);
          } catch (rS) {
            wl.warn("".concat(this._className, " error:"), rS);
          }
        } }, { key: "_convertUnit", value: function(e4) {
          var t3 = {}, n3 = e4.unit;
          for (var o3 in t3.unit = n3, e4)
            "number" == typeof e4[o3] && ("kb" === n3.toLowerCase() ? t3[o3] = Math.round(e4[o3] / 1024) : "mb" === n3.toLowerCase() ? t3[o3] = Math.round(e4[o3] / 1024 / 1024) : t3[o3] = e4[o3]);
          return t3;
        } }, { key: "_setStorageSync", value: function(e4, t3) {
          Bu ? xu ? my.setStorageSync({ key: e4, data: t3 }) : Wu.setStorageSync(e4, t3) : localStorage && localStorage.setItem(e4, JSON.stringify(t3));
        } }, { key: "getStorageSync", value: function(e4) {
          return Bu ? xu ? my.getStorageSync({ key: e4 }).data : Wu.getStorageSync(e4) : localStorage ? JSON.parse(localStorage.getItem(e4)) : {};
        } }, { key: "_removeStorageSync", value: function(e4) {
          Bu ? xu ? my.removeStorageSync({ key: e4 }) : Wu.removeStorageSync(e4) : localStorage && localStorage.removeItem(e4);
        } }, { key: "reset", value: function() {
          wl.log("".concat(this._className, ".reset")), this._doFlush();
        } }]), e3;
      }(), qM = function() {
        function e3(t3) {
          o2(this, e3), this._className = "SSOLogBody", this._report = [];
        }
        return a2(e3, [{ key: "pushIn", value: function(e4) {
          wl.debug("".concat(this._className, ".pushIn"), this._report.length, e4), this._report.push(e4);
        } }, { key: "backfill", value: function(e4) {
          var t3;
          Ql(e4) && 0 !== e4.length && (wl.debug("".concat(this._className, ".backfill"), this._report.length, e4.length), (t3 = this._report).unshift.apply(t3, v2(e4)));
        } }, { key: "getLogsNumInMemory", value: function() {
          return this._report.length;
        } }, { key: "isEmpty", value: function() {
          return 0 === this._report.length;
        } }, { key: "_reset", value: function() {
          this._report.length = 0, this._report = [];
        } }, { key: "getLogsInMemory", value: function() {
          var e4 = this._report.slice();
          return this._reset(), e4;
        } }]), e3;
      }(), VM = function(e3) {
        var t3 = e3.getModule(ig);
        return { SDKType: 10, SDKAppID: t3.getSDKAppID(), SDKVersion: t3.getVersion(), tinyID: Number(t3.getTinyID()), userID: t3.getUserID(), platform: e3.getPlatform(), instanceID: t3.getInstanceID(), traceID: Rl() };
      }, xM = function(e3) {
        i2(r3, e3);
        var n3 = f2(r3);
        function r3(e4) {
          var t3;
          o2(this, r3), (t3 = n3.call(this, e4))._className = "EventStatModule", t3.TAG = "im-ssolog-event", t3._reportBody = new qM(), t3.MIN_THRESHOLD = 20, t3.MAX_THRESHOLD = 100, t3.WAITING_TIME = 6e4, t3.REPORT_LEVEL = [4, 5, 6], t3.REPORT_SDKAPPID_BLACKLIST = [], t3.REPORT_TINYID_WHITELIST = [], t3._lastReportTime = Date.now();
          var a3 = t3.getInnerEmitterInstance();
          return a3.on(Yv, t3._onLoginSuccess, h2(t3)), a3.on($v, t3._onCloudConfigUpdated, h2(t3)), t3;
        }
        return a2(r3, [{ key: "reportAtOnce", value: function() {
          wl.debug("".concat(this._className, ".reportAtOnce")), this._report();
        } }, { key: "_onLoginSuccess", value: function() {
          var e4 = this, t3 = this.getModule(cg), n4 = t3.getItem(this.TAG, false);
          !qd(n4) && td(n4.forEach) && (wl.log("".concat(this._className, "._onLoginSuccess get ssolog in storage, count:").concat(n4.length)), n4.forEach(function(t4) {
            e4._reportBody.pushIn(t4);
          }), t3.removeItem(this.TAG, false));
        } }, { key: "_onCloudConfigUpdated", value: function() {
          var e4 = this.getCloudConfig("evt_rpt_threshold"), t3 = this.getCloudConfig("evt_rpt_waiting"), n4 = this.getCloudConfig("evt_rpt_level"), o3 = this.getCloudConfig("evt_rpt_sdkappid_bl"), r4 = this.getCloudConfig("evt_rpt_tinyid_wl");
          Zl(e4) || (this.MIN_THRESHOLD = Number(e4)), Zl(t3) || (this.WAITING_TIME = Number(t3)), Zl(n4) || (this.REPORT_LEVEL = n4.split(",").map(function(e5) {
            return Number(e5);
          })), Zl(o3) || (this.REPORT_SDKAPPID_BLACKLIST = o3.split(",").map(function(e5) {
            return Number(e5);
          })), Zl(r4) || (this.REPORT_TINYID_WHITELIST = r4.split(","));
        } }, { key: "pushIn", value: function(e4) {
          e4 instanceof __ && (e4.updateTimeStamp(), this._reportBody.pushIn(e4), this._reportBody.getLogsNumInMemory() >= this.MIN_THRESHOLD && this._report());
        } }, { key: "onCheckTimer", value: function() {
          Date.now() < this._lastReportTime + this.WAITING_TIME || this._reportBody.isEmpty() || this._report();
        } }, { key: "_filterLogs", value: function(e4) {
          var t3 = this, n4 = this.getModule(ig), o3 = n4.getSDKAppID(), r4 = n4.getTinyID();
          return Gd(this.REPORT_SDKAPPID_BLACKLIST, o3) && !bd(this.REPORT_TINYID_WHITELIST, r4) ? [] : e4.filter(function(e5) {
            return t3.REPORT_LEVEL.includes(e5.level);
          });
        } }, { key: "_report", value: function() {
          var e4 = this;
          if (!this._reportBody.isEmpty()) {
            var n4 = this._reportBody.getLogsInMemory(), o3 = this._filterLogs(n4);
            if (0 !== o3.length) {
              var r4 = { header: VM(this), event: o3 };
              this.request({ protocolName: wh, requestData: t2({}, r4) }).then(function() {
                e4._lastReportTime = Date.now();
              }).catch(function(t3) {
                wl.warn("".concat(e4._className, ".report failed. networkType:").concat(e4.getNetworkType(), " error:"), t3), e4._reportBody.backfill(n4), e4._reportBody.getLogsNumInMemory() > e4.MAX_THRESHOLD && e4._flushAtOnce();
              });
            } else
              this._lastReportTime = Date.now();
          }
        } }, { key: "_flushAtOnce", value: function() {
          var e4 = this.getModule(cg), t3 = e4.getItem(this.TAG, false), n4 = this._reportBody.getLogsInMemory();
          if (qd(t3))
            wl.log("".concat(this._className, "._flushAtOnce count:").concat(n4.length)), e4.setItem(this.TAG, n4, true, false);
          else {
            var o3 = n4.concat(t3);
            o3.length > this.MAX_THRESHOLD && (o3 = o3.slice(0, this.MAX_THRESHOLD)), wl.log("".concat(this._className, "._flushAtOnce count:").concat(o3.length)), e4.setItem(this.TAG, o3, true, false);
          }
        } }, { key: "reset", value: function() {
          wl.log("".concat(this._className, ".reset")), this._lastReportTime = 0, this._report(), this.REPORT_SDKAPPID_BLACKLIST = [], this.REPORT_TINYID_WHITELIST = [];
        } }]), r3;
      }(Tg), KM = "none", HM = "online", BM = [Zh.OVER_FREQUENCY_LIMIT, Zh.OPEN_SERVICE_OVERLOAD_ERROR], jM = function() {
        function e3(t3) {
          o2(this, e3), this._moduleManager = t3, this._networkType = "", this._className = "NetMonitorModule", this.MAX_WAIT_TIME = 3e3, this._mpNetworkStatusCallback = null, this._webOnlineCallback = null, this._webOfflineCallback = null;
        }
        return a2(e3, [{ key: "start", value: function() {
          var e4 = this;
          Bu ? (Wu.getNetworkType({ success: function(t3) {
            e4._networkType = t3.networkType, t3.networkType === KM ? wl.warn("".concat(e4._className, ".start no network, please check!")) : wl.info("".concat(e4._className, ".start networkType:").concat(t3.networkType));
          } }), this._mpNetworkStatusCallback = this._onNetworkStatusChange.bind(this), Wu.onNetworkStatusChange(this._mpNetworkStatusCallback)) : (this._networkType = HM, this._webOnlineCallback = this._onWebOnline.bind(this), this._webOfflineCallback = this._onWebOffline.bind(this), window && (window.addEventListener("online", this._webOnlineCallback), window.addEventListener("offline", this._webOfflineCallback)));
        } }, { key: "_onWebOnline", value: function() {
          this._onNetworkStatusChange({ isConnected: true, networkType: HM });
        } }, { key: "_onWebOffline", value: function() {
          this._onNetworkStatusChange({ isConnected: false, networkType: KM });
        } }, { key: "_onNetworkStatusChange", value: function(e4) {
          var t3 = e4.isConnected, n3 = e4.networkType, o3 = false;
          t3 ? (wl.info("".concat(this._className, "._onNetworkStatusChange previousNetworkType:").concat(this._networkType, " currentNetworkType:").concat(n3)), this._networkType !== n3 && (o3 = true, this._moduleManager.getModule(fg).reConnect(true))) : this._networkType !== n3 && (o3 = true, wl.warn("".concat(this._className, "._onNetworkStatusChange no network, please check!")), this._moduleManager.getModule(fg).offline());
          o3 && (new __(f_.NETWORK_CHANGE).setMessage("isConnected:".concat(t3, " previousNetworkType:").concat(this._networkType, " networkType:").concat(n3)).end(), this._networkType = n3);
        } }, { key: "probe", value: function(e4) {
          var t3 = this;
          return !Zl(e4) && BM.includes(e4.code) ? Promise.resolve([true, this._networkType]) : new Promise(function(e5, n3) {
            if (Bu)
              Wu.getNetworkType({ success: function(n4) {
                t3._networkType = n4.networkType, n4.networkType === KM ? (wl.warn("".concat(t3._className, ".probe no network, please check!")), e5([false, n4.networkType])) : (wl.info("".concat(t3._className, ".probe networkType:").concat(n4.networkType)), e5([true, n4.networkType]));
              } });
            else if (window && window.fetch)
              fetch("".concat(_d(), "//web.sdk.qcloud.com/im/assets/speed.xml?random=").concat(Math.random())).then(function(t4) {
                t4.ok ? e5([true, HM]) : e5([false, KM]);
              }).catch(function(t4) {
                e5([false, KM]);
              });
            else {
              var o3 = new XMLHttpRequest(), r3 = setTimeout(function() {
                wl.warn("".concat(t3._className, ".probe fetch timeout. Probably no network, please check!")), o3.abort(), t3._networkType = KM, e5([false, KM]);
              }, t3.MAX_WAIT_TIME);
              o3.onreadystatechange = function() {
                4 === o3.readyState && (clearTimeout(r3), 200 === o3.status || 304 === o3.status || 514 === o3.status ? (this._networkType = HM, e5([true, HM])) : (wl.warn("".concat(this.className, ".probe fetch status:").concat(o3.status, ". Probably no network, please check!")), this._networkType = KM, e5([false, KM])));
              }, o3.open("GET", "".concat(_d(), "//web.sdk.qcloud.com/im/assets/speed.xml?random=").concat(Math.random())), o3.send();
            }
          });
        } }, { key: "getNetworkType", value: function() {
          return this._networkType;
        } }, { key: "reset", value: function() {
          wl.log("".concat(this._className, ".reset")), Bu ? null !== this._mpNetworkStatusCallback && (Wu.offNetworkStatusChange && (Ku || qu ? Wu.offNetworkStatusChange(this._mpNetworkStatusCallback) : Wu.offNetworkStatusChange()), this._mpNetworkStatusCallback = null) : window && (null !== this._webOnlineCallback && (window.removeEventListener("online", this._webOnlineCallback), this._webOnlineCallback = null), null !== this._onWebOffline && (window.removeEventListener("offline", this._webOfflineCallback), this._webOfflineCallback = null));
        } }]), e3;
      }(), WM = A2(function(e3) {
        var t3 = Object.prototype.hasOwnProperty, n3 = "~";
        function o3() {
        }
        function r3(e4, t4, n4) {
          this.fn = e4, this.context = t4, this.once = n4 || false;
        }
        function a3(e4, t4, o4, a4, s4) {
          if ("function" != typeof o4)
            throw new TypeError("The listener must be a function");
          var i4 = new r3(o4, a4 || e4, s4), c3 = n3 ? n3 + t4 : t4;
          return e4._events[c3] ? e4._events[c3].fn ? e4._events[c3] = [e4._events[c3], i4] : e4._events[c3].push(i4) : (e4._events[c3] = i4, e4._eventsCount++), e4;
        }
        function s3(e4, t4) {
          0 == --e4._eventsCount ? e4._events = new o3() : delete e4._events[t4];
        }
        function i3() {
          this._events = new o3(), this._eventsCount = 0;
        }
        Object.create && (o3.prototype = /* @__PURE__ */ Object.create(null), new o3().__proto__ || (n3 = false)), i3.prototype.eventNames = function() {
          var e4, o4, r4 = [];
          if (0 === this._eventsCount)
            return r4;
          for (o4 in e4 = this._events)
            t3.call(e4, o4) && r4.push(n3 ? o4.slice(1) : o4);
          return Object.getOwnPropertySymbols ? r4.concat(Object.getOwnPropertySymbols(e4)) : r4;
        }, i3.prototype.listeners = function(e4) {
          var t4 = n3 ? n3 + e4 : e4, o4 = this._events[t4];
          if (!o4)
            return [];
          if (o4.fn)
            return [o4.fn];
          for (var r4 = 0, a4 = o4.length, s4 = new Array(a4); r4 < a4; r4++)
            s4[r4] = o4[r4].fn;
          return s4;
        }, i3.prototype.listenerCount = function(e4) {
          var t4 = n3 ? n3 + e4 : e4, o4 = this._events[t4];
          return o4 ? o4.fn ? 1 : o4.length : 0;
        }, i3.prototype.emit = function(e4, t4, o4, r4, a4, s4) {
          var i4 = n3 ? n3 + e4 : e4;
          if (!this._events[i4])
            return false;
          var c3, u3, l3 = this._events[i4], d3 = arguments.length;
          if (l3.fn) {
            switch (l3.once && this.removeListener(e4, l3.fn, void 0, true), d3) {
              case 1:
                return l3.fn.call(l3.context), true;
              case 2:
                return l3.fn.call(l3.context, t4), true;
              case 3:
                return l3.fn.call(l3.context, t4, o4), true;
              case 4:
                return l3.fn.call(l3.context, t4, o4, r4), true;
              case 5:
                return l3.fn.call(l3.context, t4, o4, r4, a4), true;
              case 6:
                return l3.fn.call(l3.context, t4, o4, r4, a4, s4), true;
            }
            for (u3 = 1, c3 = new Array(d3 - 1); u3 < d3; u3++)
              c3[u3 - 1] = arguments[u3];
            l3.fn.apply(l3.context, c3);
          } else {
            var p3, g3 = l3.length;
            for (u3 = 0; u3 < g3; u3++)
              switch (l3[u3].once && this.removeListener(e4, l3[u3].fn, void 0, true), d3) {
                case 1:
                  l3[u3].fn.call(l3[u3].context);
                  break;
                case 2:
                  l3[u3].fn.call(l3[u3].context, t4);
                  break;
                case 3:
                  l3[u3].fn.call(l3[u3].context, t4, o4);
                  break;
                case 4:
                  l3[u3].fn.call(l3[u3].context, t4, o4, r4);
                  break;
                default:
                  if (!c3)
                    for (p3 = 1, c3 = new Array(d3 - 1); p3 < d3; p3++)
                      c3[p3 - 1] = arguments[p3];
                  l3[u3].fn.apply(l3[u3].context, c3);
              }
          }
          return true;
        }, i3.prototype.on = function(e4, t4, n4) {
          return a3(this, e4, t4, n4, false);
        }, i3.prototype.once = function(e4, t4, n4) {
          return a3(this, e4, t4, n4, true);
        }, i3.prototype.removeListener = function(e4, t4, o4, r4) {
          var a4 = n3 ? n3 + e4 : e4;
          if (!this._events[a4])
            return this;
          if (!t4)
            return s3(this, a4), this;
          var i4 = this._events[a4];
          if (i4.fn)
            i4.fn !== t4 || r4 && !i4.once || o4 && i4.context !== o4 || s3(this, a4);
          else {
            for (var c3 = 0, u3 = [], l3 = i4.length; c3 < l3; c3++)
              (i4[c3].fn !== t4 || r4 && !i4[c3].once || o4 && i4[c3].context !== o4) && u3.push(i4[c3]);
            u3.length ? this._events[a4] = 1 === u3.length ? u3[0] : u3 : s3(this, a4);
          }
          return this;
        }, i3.prototype.removeAllListeners = function(e4) {
          var t4;
          return e4 ? (t4 = n3 ? n3 + e4 : e4, this._events[t4] && s3(this, t4)) : (this._events = new o3(), this._eventsCount = 0), this;
        }, i3.prototype.off = i3.prototype.removeListener, i3.prototype.addListener = i3.prototype.on, i3.prefixed = n3, i3.EventEmitter = i3, e3.exports = i3;
      }), YM = function(e3) {
        i2(n3, e3);
        var t3 = f2(n3);
        function n3(e4) {
          var r3;
          return o2(this, n3), (r3 = t3.call(this, e4))._className = "BigDataChannelModule", r3.FILETYPE = { SOUND: 2106, FILE: 2107, VIDEO: 2113 }, r3._bdh_download_server = "grouptalk.c2c.qq.com", r3._BDHBizID = 10001, r3._authKey = "", r3._expireTime = 0, r3.getInnerEmitterInstance().on(Yv, r3._getAuthKey, h2(r3)), r3;
        }
        return a2(n3, [{ key: "_getAuthKey", value: function() {
          var e4 = this;
          this.request({ protocolName: Og }).then(function(t4) {
            t4.data.authKey && (e4._authKey = t4.data.authKey, e4._expireTime = parseInt(t4.data.expireTime));
          });
        } }, { key: "_isFromOlderVersion", value: function(e4) {
          return !(!e4.content || 2 === e4.content.downloadFlag);
        } }, { key: "parseElements", value: function(e4, t4) {
          if (!Ql(e4) || !t4)
            return [];
          for (var n4 = [], o3 = null, r3 = 0; r3 < e4.length; r3++)
            o3 = e4[r3], this._needParse(o3) ? n4.push(this._parseElement(o3, t4)) : n4.push(e4[r3]);
          return n4;
        } }, { key: "_needParse", value: function(e4) {
          return !e4.cloudCustomData && !(!this._isFromOlderVersion(e4) || e4.type !== gr.MSG_AUDIO && e4.type !== gr.MSG_FILE && e4.type !== gr.MSG_VIDEO);
        } }, { key: "_parseElement", value: function(e4, t4) {
          switch (e4.type) {
            case gr.MSG_AUDIO:
              return this._parseAudioElement(e4, t4);
            case gr.MSG_FILE:
              return this._parseFileElement(e4, t4);
            case gr.MSG_VIDEO:
              return this._parseVideoElement(e4, t4);
          }
        } }, { key: "_parseAudioElement", value: function(e4, t4) {
          return e4.content.url = this._genAudioUrl(e4.content.uuid, t4), e4;
        } }, { key: "_parseFileElement", value: function(e4, t4) {
          return e4.content.url = this._genFileUrl(e4.content.uuid, t4, e4.content.fileName), e4;
        } }, { key: "_parseVideoElement", value: function(e4, t4) {
          return e4.content.url = this._genVideoUrl(e4.content.uuid, t4), e4;
        } }, { key: "_genAudioUrl", value: function(e4, t4) {
          if ("" === this._authKey)
            return wl.warn("".concat(this._className, "._genAudioUrl no authKey!")), "";
          var n4 = this.getModule(ig).getSDKAppID();
          return "https://".concat(this._bdh_download_server, "/asn.com/stddownload_common_file?authkey=").concat(this._authKey, "&bid=").concat(this._BDHBizID, "&subbid=").concat(n4, "&fileid=").concat(e4, "&filetype=").concat(this.FILETYPE.SOUND, "&openid=").concat(t4, "&ver=0");
        } }, { key: "_genFileUrl", value: function(e4, t4, n4) {
          if ("" === this._authKey)
            return wl.warn("".concat(this._className, "._genFileUrl no authKey!")), "";
          n4 || (n4 = "".concat(Math.floor(1e5 * Math.random()), "-").concat(Date.now()));
          var o3 = this.getModule(ig).getSDKAppID();
          return "https://".concat(this._bdh_download_server, "/asn.com/stddownload_common_file?authkey=").concat(this._authKey, "&bid=").concat(this._BDHBizID, "&subbid=").concat(o3, "&fileid=").concat(e4, "&filetype=").concat(this.FILETYPE.FILE, "&openid=").concat(t4, "&ver=0&filename=").concat(encodeURIComponent(n4));
        } }, { key: "_genVideoUrl", value: function(e4, t4) {
          if ("" === this._authKey)
            return wl.warn("".concat(this._className, "._genVideoUrl no authKey!")), "";
          var n4 = this.getModule(ig).getSDKAppID();
          return "https://".concat(this._bdh_download_server, "/asn.com/stddownload_common_file?authkey=").concat(this._authKey, "&bid=").concat(this._BDHBizID, "&subbid=").concat(n4, "&fileid=").concat(e4, "&filetype=").concat(this.FILETYPE.VIDEO, "&openid=").concat(t4, "&ver=0");
        } }, { key: "reset", value: function() {
          wl.log("".concat(this._className, ".reset")), this._authKey = "", this.expireTime = 0;
        } }]), n3;
      }(Tg), $M = ["requestSnapshotUrl"], zM = function(e3) {
        i2(r3, e3);
        var n3 = f2(r3);
        function r3(e4) {
          var t3;
          return o2(this, r3), (t3 = n3.call(this, e4))._className = "UploadModule", t3.TIMUploadPlugin = null, t3.timUploadPlugin = null, t3.COSSDK = null, t3._cosUploadMethod = null, t3.expiredTimeLimit = 600, t3.appid = 0, t3.bucketName = "", t3.ciUrl = "", t3.directory = "", t3.downloadUrl = "", t3.uploadUrl = "", t3.region = "ap-shanghai", t3.cos = null, t3.cosOptions = { secretId: "", secretKey: "", sessionToken: "", expiredTime: 0 }, t3.uploadFileType = "", t3.duration = 900, t3.tryCount = 0, t3.getInnerEmitterInstance().on(Yv, t3._init, h2(t3)), t3;
        }
        return a2(r3, [{ key: "_init", value: function() {
          var e4 = "".concat(this._className, "._init"), t3 = this.getModule(gg);
          if (this.TIMUploadPlugin = t3.getPlugin("tim-upload-plugin"), this.TIMUploadPlugin)
            this._initUploaderMethod();
          else {
            var n4 = Bu ? "cos-wx-sdk" : "cos-js-sdk";
            this.COSSDK = t3.getPlugin(n4), this.COSSDK ? (this._getAuthorizationKey(), wl.warn("".concat(e4, " v2.9.2起推荐使用 tim-upload-plugin 代替 ").concat(n4, "，上传更快更安全。详细请参考 https://web.sdk.qcloud.com/im/doc/zh-cn/SDK.html#registerPlugin"))) : wl.warn("".concat(e4, " 没有检测到上传插件，将无法发送图片、音频、视频、文件等类型的消息。详细请参考 https://web.sdk.qcloud.com/im/doc/zh-cn/SDK.html#registerPlugin"));
          }
        } }, { key: "_getAuthorizationKey", value: function() {
          var e4 = this, t3 = new __(f_.GET_COS_AUTH_KEY), n4 = Math.ceil(Date.now() / 1e3);
          this.request({ protocolName: Ph, requestData: { duration: this.expiredTimeLimit } }).then(function(o3) {
            var r4 = o3.data;
            wl.log("".concat(e4._className, "._getAuthorizationKey ok. data:"), r4);
            var a3 = r4.expiredTime - n4;
            t3.setMessage("requestId:".concat(r4.requestId, " requestTime:").concat(n4, " expiredTime:").concat(r4.expiredTime, " diff:").concat(a3, "s")).setNetworkType(e4.getNetworkType()).end(), !Bu && r4.region && (e4.region = r4.region), e4.appid = r4.appid, e4.bucketName = r4.bucketName, e4.ciUrl = r4.ciUrl, e4.directory = r4.directory, e4.downloadUrl = r4.downloadUrl, e4.uploadUrl = r4.uploadUrl, e4.cosOptions = { secretId: r4.secretId, secretKey: r4.secretKey, sessionToken: r4.sessionToken, expiredTime: r4.expiredTime }, wl.log("".concat(e4._className, "._getAuthorizationKey ok. region:").concat(e4.region, " bucketName:").concat(e4.bucketName)), e4._initUploaderMethod();
          }).catch(function(n5) {
            e4.probeNetwork().then(function(e5) {
              var o3 = m2(e5, 2), r4 = o3[0], a3 = o3[1];
              t3.setError(n5, r4, a3).end();
            }), wl.warn("".concat(e4._className, "._getAuthorizationKey failed. error:"), n5);
          });
        } }, { key: "_getCosPreSigUrl", value: function(e4) {
          var t3 = this, n4 = "".concat(this._className, "._getCosPreSigUrl"), o3 = Math.ceil(Date.now() / 1e3), r4 = new __(f_.GET_COS_PRE_SIG_URL);
          return this.request({ protocolName: Gh, requestData: { fileType: e4.fileType, fileName: e4.fileName, uploadMethod: e4.uploadMethod, duration: e4.duration } }).then(function(e5) {
            t3.tryCount = 0;
            var a3 = e5.data || {}, s3 = a3.expiredTime - o3;
            return wl.log("".concat(n4, " ok. data:"), a3), r4.setMessage("requestId:".concat(a3.requestId, " expiredTime:").concat(a3.expiredTime, " diff:").concat(s3, "s")).setNetworkType(t3.getNetworkType()).end(), a3;
          }).catch(function(o4) {
            return -1 === o4.code && (o4.code = Zh.COS_GET_SIG_FAIL), t3.probeNetwork().then(function(e5) {
              var t4 = m2(e5, 2), n5 = t4[0], a3 = t4[1];
              r4.setError(o4, n5, a3).end();
            }), wl.warn("".concat(n4, " failed. error:"), o4), t3.tryCount < 1 ? (t3.tryCount++, t3._getCosPreSigUrl(e4)) : (t3.tryCount = 0, Rv({ code: Zh.COS_GET_SIG_FAIL, message: e_.COS_GET_SIG_FAIL }));
          });
        } }, { key: "_initUploaderMethod", value: function() {
          var e4 = this;
          if (this.TIMUploadPlugin)
            return this.timUploadPlugin = new this.TIMUploadPlugin(), void (this._cosUploadMethod = function(t3, n4) {
              e4.timUploadPlugin.uploadFile(t3, n4);
            });
          this.appid && (this.cos = Bu ? new this.COSSDK({ ForcePathStyle: true, getAuthorization: this._getAuthorization.bind(this) }) : new this.COSSDK({ getAuthorization: this._getAuthorization.bind(this) }), this._cosUploadMethod = Bu ? function(t3, n4) {
            e4.cos.postObject(t3, n4);
          } : function(t3, n4) {
            e4.cos.uploadFiles(t3, n4);
          });
        } }, { key: "onCheckTimer", value: function(e4) {
          this.COSSDK && (this.TIMUploadPlugin || this.isLoggedIn() && e4 % 60 == 0 && Math.ceil(Date.now() / 1e3) >= this.cosOptions.expiredTime - 120 && this._getAuthorizationKey());
        } }, { key: "_getAuthorization", value: function(e4, t3) {
          t3({ TmpSecretId: this.cosOptions.secretId, TmpSecretKey: this.cosOptions.secretKey, XCosSecurityToken: this.cosOptions.sessionToken, ExpiredTime: this.cosOptions.expiredTime });
        } }, { key: "upload", value: function(e4) {
          if (true === e4.getRelayFlag())
            return Promise.resolve();
          var t3 = this.getModule(Ig);
          switch (e4.type) {
            case gr.MSG_IMAGE:
              return t3.addTotalCount(i_), this._uploadImage(e4);
            case gr.MSG_FILE:
              return t3.addTotalCount(i_), this._uploadFile(e4);
            case gr.MSG_AUDIO:
              return t3.addTotalCount(i_), this._uploadAudio(e4);
            case gr.MSG_VIDEO:
              return t3.addTotalCount(i_), this._uploadVideo(e4);
            default:
              return Promise.resolve();
          }
        } }, { key: "_uploadImage", value: function(e4) {
          var n4 = this.getModule(Zp), o3 = e4.getElements()[0], r4 = n4.getMessageOption(e4.clientSequence);
          return this.doUploadImage({ file: r4.payload.file, to: r4.to, onProgress: function(e5) {
            if (o3.updatePercent(e5), td(r4.onProgress))
              try {
                r4.onProgress(e5);
              } catch (t3) {
                return Rv({ code: Zh.MESSAGE_ONPROGRESS_FUNCTION_ERROR, message: e_.MESSAGE_ONPROGRESS_FUNCTION_ERROR });
              }
          } }).then(function(n5) {
            var r5 = n5.location, a3 = n5.fileType, s3 = n5.fileSize, i3 = n5.width, c3 = n5.height, u3 = fd(r5);
            o3.updateImageFormat(a3);
            var l3 = Rd({ originUrl: u3, originWidth: i3, originHeight: c3, min: 198 }), d3 = Rd({ originUrl: u3, originWidth: i3, originHeight: c3, min: 720 });
            return o3.updateImageInfoArray([{ size: s3, url: u3, width: i3, height: c3 }, t2({}, d3), t2({}, l3)]), e4;
          });
        } }, { key: "_uploadFile", value: function(e4) {
          var t3 = this.getModule(Zp), n4 = e4.getElements()[0], o3 = t3.getMessageOption(e4.clientSequence);
          return this.doUploadFile({ file: o3.payload.file, to: o3.to, onProgress: function(e5) {
            if (n4.updatePercent(e5), td(o3.onProgress))
              try {
                o3.onProgress(e5);
              } catch (t4) {
                return Rv({ code: Zh.MESSAGE_ONPROGRESS_FUNCTION_ERROR, message: e_.MESSAGE_ONPROGRESS_FUNCTION_ERROR });
              }
          } }).then(function(t4) {
            var o4 = t4.location, r4 = fd(o4);
            return n4.updateFileUrl(r4), e4;
          });
        } }, { key: "_uploadAudio", value: function(e4) {
          var t3 = this.getModule(Zp), n4 = e4.getElements()[0], o3 = t3.getMessageOption(e4.clientSequence);
          return this.doUploadAudio({ file: o3.payload.file, to: o3.to, onProgress: function(e5) {
            if (n4.updatePercent(e5), td(o3.onProgress))
              try {
                o3.onProgress(e5);
              } catch (t4) {
                return Rv({ code: Zh.MESSAGE_ONPROGRESS_FUNCTION_ERROR, message: e_.MESSAGE_ONPROGRESS_FUNCTION_ERROR });
              }
          } }).then(function(t4) {
            var o4 = t4.location, r4 = fd(o4);
            return n4.updateAudioUrl(r4), e4;
          });
        } }, { key: "_uploadVideo", value: function(e4) {
          var t3 = this.getModule(Zp), n4 = e4.getElements()[0], o3 = t3.getMessageOption(e4.clientSequence);
          return this.doUploadVideo({ file: o3.payload.file, to: o3.to, onProgress: function(e5) {
            if (n4.updatePercent(e5), td(o3.onProgress))
              try {
                o3.onProgress(e5);
              } catch (t4) {
                return Rv({ code: Zh.MESSAGE_ONPROGRESS_FUNCTION_ERROR, message: e_.MESSAGE_ONPROGRESS_FUNCTION_ERROR });
              }
          } }).then(function(t4) {
            var o4 = t4.location, r4 = t4.snapshotInfo, a3 = fd(o4);
            return n4.updateVideoUrl(a3), qd(r4) || n4.updateSnapshotInfo(r4), e4;
          });
        } }, { key: "doUploadImage", value: function(e4) {
          if (!e4.file)
            return Rv({ code: Zh.MESSAGE_IMAGE_SELECT_FILE_FIRST, message: e_.MESSAGE_IMAGE_SELECT_FILE_FIRST });
          var t3 = this._checkImageType(e4.file);
          if (true !== t3)
            return t3;
          var n4 = this._checkImageSize(e4.file);
          if (true !== n4)
            return n4;
          var o3 = null;
          return this._setUploadFileType(Zv), this.uploadByCOS(e4).then(function(e5) {
            return o3 = e5, Dd("https://".concat(e5.location));
          }).then(function(e5) {
            return o3.width = e5.width, o3.height = e5.height, Promise.resolve(o3);
          });
        } }, { key: "_checkImageType", value: function(e4) {
          var t3 = "";
          return t3 = Bu ? e4.url.slice(e4.url.lastIndexOf(".") + 1) : e4.files[0].name.slice(e4.files[0].name.lastIndexOf(".") + 1), Xv.indexOf(t3.toLowerCase()) >= 0 || Rv({ code: Zh.MESSAGE_IMAGE_TYPES_LIMIT, message: e_.MESSAGE_IMAGE_TYPES_LIMIT });
        } }, { key: "_checkImageSize", value: function(e4) {
          var t3 = 0;
          return 0 === (t3 = Bu ? e4.size : e4.files[0].size) ? Rv({ code: Zh.MESSAGE_FILE_IS_EMPTY, message: "".concat(e_.MESSAGE_FILE_IS_EMPTY) }) : t3 < 20971520 || Rv({ code: Zh.MESSAGE_IMAGE_SIZE_LIMIT, message: "".concat(e_.MESSAGE_IMAGE_SIZE_LIMIT) });
        } }, { key: "doUploadFile", value: function(e4) {
          var t3 = null;
          return e4.file ? e4.file.files[0].size > 104857600 ? Rv(t3 = { code: Zh.MESSAGE_FILE_SIZE_LIMIT, message: e_.MESSAGE_FILE_SIZE_LIMIT }) : 0 === e4.file.files[0].size ? (t3 = { code: Zh.MESSAGE_FILE_IS_EMPTY, message: "".concat(e_.MESSAGE_FILE_IS_EMPTY) }, Rv(t3)) : (this._setUploadFileType(nM), this.uploadByCOS(e4)) : Rv(t3 = { code: Zh.MESSAGE_FILE_SELECT_FILE_FIRST, message: e_.MESSAGE_FILE_SELECT_FILE_FIRST });
        } }, { key: "doUploadVideo", value: function(e4) {
          return e4.file.videoFile.size > 104857600 ? Rv({ code: Zh.MESSAGE_VIDEO_SIZE_LIMIT, message: "".concat(e_.MESSAGE_VIDEO_SIZE_LIMIT) }) : 0 === e4.file.videoFile.size ? Rv({ code: Zh.MESSAGE_FILE_IS_EMPTY, message: "".concat(e_.MESSAGE_FILE_IS_EMPTY) }) : -1 === Qv.indexOf(e4.file.videoFile.type) ? Rv({ code: Zh.MESSAGE_VIDEO_TYPES_LIMIT, message: "".concat(e_.MESSAGE_VIDEO_TYPES_LIMIT) }) : (this._setUploadFileType(eM), Bu ? this.handleVideoUpload({ file: e4.file.videoFile, onProgress: e4.onProgress }) : ju ? this.handleVideoUpload(e4) : void 0);
        } }, { key: "handleVideoUpload", value: function(e4) {
          var t3 = this;
          return new Promise(function(n4, o3) {
            t3.uploadByCOS(e4).then(function(e5) {
              n4(e5);
            }).catch(function() {
              t3.uploadByCOS(e4).then(function(e5) {
                n4(e5);
              }).catch(function() {
                o3(new Av({ code: Zh.MESSAGE_VIDEO_UPLOAD_FAIL, message: e_.MESSAGE_VIDEO_UPLOAD_FAIL }));
              });
            });
          });
        } }, { key: "doUploadAudio", value: function(e4) {
          return e4.file ? e4.file.size > 20971520 ? Rv(new Av({ code: Zh.MESSAGE_AUDIO_SIZE_LIMIT, message: "".concat(e_.MESSAGE_AUDIO_SIZE_LIMIT) })) : 0 === e4.file.size ? Rv(new Av({ code: Zh.MESSAGE_FILE_IS_EMPTY, message: "".concat(e_.MESSAGE_FILE_IS_EMPTY) })) : (this._setUploadFileType(tM), this.uploadByCOS(e4)) : Rv(new Av({ code: Zh.MESSAGE_AUDIO_UPLOAD_FAIL, message: e_.MESSAGE_AUDIO_UPLOAD_FAIL }));
        } }, { key: "uploadByCOS", value: function(e4) {
          var t3 = this, n4 = "".concat(this._className, ".uploadByCOS");
          if (!td(this._cosUploadMethod))
            return wl.warn("".concat(n4, " 没有检测到上传插件，将无法发送图片、音频、视频、文件等类型的消息。详细请参考 https://web.sdk.qcloud.com/im/doc/zh-cn/SDK.html#registerPlugin")), Rv({ code: Zh.COS_UNDETECTED, message: e_.COS_UNDETECTED });
          if (this.timUploadPlugin)
            return this._uploadWithPreSigUrl(e4);
          var o3 = new __(f_.UPLOAD), r4 = Date.now(), a3 = this._getFile(e4);
          return new Promise(function(s3, i3) {
            var c3 = Bu ? t3._createCosOptionsWXMiniApp(e4) : t3._createCosOptionsWeb(e4), u3 = t3;
            t3._cosUploadMethod(c3, function(e5, c4) {
              var l3 = /* @__PURE__ */ Object.create(null);
              if (c4) {
                if (e5 || Ql(c4.files) && c4.files[0].error) {
                  var d3 = new Av({ code: Zh.MESSAGE_FILE_UPLOAD_FAIL, message: e_.MESSAGE_FILE_UPLOAD_FAIL });
                  return o3.setError(d3, true, t3.getNetworkType()).end(), wl.log("".concat(n4, " failed. error:"), c4.files[0].error), 403 === c4.files[0].error.statusCode && (wl.warn("".concat(n4, " failed. cos AccessKeyId was invalid, regain auth key!")), t3._getAuthorizationKey()), void i3(d3);
                }
                l3.fileName = a3.name, l3.fileSize = a3.size, l3.fileType = a3.type.slice(a3.type.indexOf("/") + 1).toLowerCase(), l3.location = Bu ? c4.Location : c4.files[0].data.Location;
                var p3 = Date.now() - r4, g3 = u3._formatFileSize(a3.size), h3 = u3._formatSpeed(1e3 * a3.size / p3), _3 = "size:".concat(g3, " time:").concat(p3, "ms speed:").concat(h3);
                wl.log("".concat(n4, " success. name:").concat(a3.name, " ").concat(_3)), s3(l3);
                var f3 = t3.getModule(Ig);
                return f3.addCost(i_, p3), f3.addFileSize(i_, a3.size), void o3.setNetworkType(t3.getNetworkType()).setMessage(_3).end();
              }
              var m3 = new Av({ code: Zh.MESSAGE_FILE_UPLOAD_FAIL, message: e_.MESSAGE_FILE_UPLOAD_FAIL });
              o3.setError(m3, true, u3.getNetworkType()).end(), wl.warn("".concat(n4, " failed. error:"), e5), 403 === e5.statusCode && (wl.warn("".concat(n4, " failed. cos AccessKeyId was invalid, regain auth key!")), t3._getAuthorizationKey()), i3(m3);
            });
          });
        } }, { key: "_uploadWithPreSigUrl", value: function(e4) {
          var t3 = this, n4 = "".concat(this._className, "._uploadWithPreSigUrl"), o3 = this._getFile(e4);
          return this._createCosOptionsPreSigUrl(e4).then(function(e5) {
            return new Promise(function(r4, a3) {
              var s3 = new __(f_.UPLOAD), i3 = e5.requestSnapshotUrl, c3 = void 0 === i3 ? void 0 : i3, u3 = g2(e5, $M), l3 = Date.now();
              t3._cosUploadMethod(u3, function(e6, i4) {
                var u4 = /* @__PURE__ */ Object.create(null);
                if (e6 || 403 === i4.statusCode) {
                  var d3 = new Av({ code: Zh.MESSAGE_FILE_UPLOAD_FAIL, message: e_.MESSAGE_FILE_UPLOAD_FAIL });
                  return s3.setError(d3, true, t3.getNetworkType()).end(), wl.log("".concat(n4, " failed, error:"), e6), void a3(d3);
                }
                var p3 = i4.data.location || "";
                0 !== p3.indexOf("https://") && 0 !== p3.indexOf("http://") || (p3 = p3.split("//")[1]), u4.fileName = o3.name, u4.fileSize = o3.size, u4.fileType = o3.type.slice(o3.type.indexOf("/") + 1).toLowerCase(), u4.location = p3;
                var g3 = Date.now() - l3, h3 = t3._formatFileSize(o3.size), _3 = t3._formatSpeed(1e3 * o3.size / g3), f3 = "size:".concat(h3, ",time:").concat(g3, "ms,speed:").concat(_3, " res:").concat(JSON.stringify(i4.data));
                wl.log("".concat(n4, " success name:").concat(o3.name, ",").concat(f3)), s3.setNetworkType(t3.getNetworkType()).setMessage(f3).end();
                var m3 = t3.getModule(Ig);
                if (m3.addCost(i_, g3), m3.addFileSize(i_, o3.size), !qd(c3))
                  return t3._getSnapshotInfoByUrl(c3).then(function(e7) {
                    u4.snapshotInfo = e7, r4(u4);
                  });
                r4(u4);
              });
            });
          });
        } }, { key: "_getFile", value: function(e4) {
          var t3 = null;
          return Bu ? t3 = Ku && Ql(e4.file.files) ? e4.file.files[0] : e4.file : ju && (t3 = e4.file.files[0]), t3;
        } }, { key: "_formatFileSize", value: function(e4) {
          return e4 < 1024 ? e4 + "B" : e4 < 1048576 ? Math.floor(e4 / 1024) + "KB" : Math.floor(e4 / 1048576) + "MB";
        } }, { key: "_formatSpeed", value: function(e4) {
          return e4 <= 1048576 ? Pd(e4 / 1024, 1) + "KB/s" : Pd(e4 / 1048576, 1) + "MB/s";
        } }, { key: "_createCosOptionsWeb", value: function(e4) {
          var t3 = e4.file.files[0].name, n4 = t3.slice(t3.lastIndexOf(".")), o3 = this._genFileName("".concat(ld(999999)).concat(n4));
          return { files: [{ Bucket: "".concat(this.bucketName, "-").concat(this.appid), Region: this.region, Key: "".concat(this.directory, "/").concat(o3), Body: e4.file.files[0] }], SliceSize: 1048576, onProgress: function(t4) {
            if ("function" == typeof e4.onProgress)
              try {
                e4.onProgress(t4.percent);
              } catch (n5) {
                wl.warn("onProgress callback error:", n5);
              }
          }, onFileFinish: function(e5, t4, n5) {
          } };
        } }, { key: "_createCosOptionsWXMiniApp", value: function(e4) {
          var t3 = this._getFile(e4), n4 = this._genFileName(t3.name), o3 = t3.url;
          return { Bucket: "".concat(this.bucketName, "-").concat(this.appid), Region: this.region, Key: "".concat(this.directory, "/").concat(n4), FilePath: o3, onProgress: function(t4) {
            if (wl.log(JSON.stringify(t4)), "function" == typeof e4.onProgress)
              try {
                e4.onProgress(t4.percent);
              } catch (n5) {
                wl.warn("onProgress callback error:", n5);
              }
          } };
        } }, { key: "_createCosOptionsPreSigUrl", value: function(e4) {
          var t3 = this, n4 = "", o3 = "", r4 = 0;
          if (Bu) {
            var a3 = this._getFile(e4);
            n4 = this._genFileName(a3.name), o3 = a3.url, r4 = 1;
          } else {
            var s3 = e4.file.files[0].name, i3 = s3.slice(s3.lastIndexOf("."));
            n4 = this._genFileName("".concat(ld(999999)).concat(i3)), o3 = e4.file.files[0], r4 = 0;
          }
          return this._getCosPreSigUrl({ fileType: this.uploadFileType, fileName: n4, uploadMethod: r4, duration: this.duration }).then(function(r5) {
            var a4 = r5.uploadUrl, s4 = r5.downloadUrl, i4 = r5.requestSnapshotUrl, c3 = void 0 === i4 ? void 0 : i4;
            return { url: a4, fileType: t3.uploadFileType, fileName: n4, resources: o3, downloadUrl: s4, requestSnapshotUrl: c3, onProgress: function(t4) {
              if ("function" == typeof e4.onProgress)
                try {
                  e4.onProgress(t4.percent);
                } catch (n5) {
                  wl.warn("onProgress callback error:", n5), wl.error(n5);
                }
            } };
          });
        } }, { key: "_genFileName", value: function(e4) {
          return "".concat(Nd(), "-").concat(e4);
        } }, { key: "_setUploadFileType", value: function(e4) {
          this.uploadFileType = e4;
        } }, { key: "_getSnapshotInfoByUrl", value: function(e4) {
          var t3 = this, n4 = new __(f_.GET_SNAPSHOT_INFO);
          return this.request({ protocolName: bh, requestData: { platform: this.getPlatform(), coverName: this._genFileName(ld(99999)), requestSnapshotUrl: e4 } }).then(function(e5) {
            var t4 = (e5.data || {}).snapshotUrl;
            return n4.setMessage("snapshotUrl:".concat(t4)).end(), qd(t4) ? {} : Dd(t4).then(function(e6) {
              return { snapshotUrl: t4, snapshotWidth: e6.width, snapshotHeight: e6.height };
            });
          }).catch(function(e5) {
            return wl.warn("".concat(t3._className, "._getSnapshotInfoByUrl failed. error:"), e5), n4.setCode(e5.errorCode).setMessage(e5.errorInfo).end(), {};
          });
        } }, { key: "reset", value: function() {
          wl.log("".concat(this._className, ".reset"));
        } }]), r3;
      }(Tg), JM = ["downloadKey", "pbDownloadKey", "messageList"], XM = function() {
        function e3(t3) {
          o2(this, e3), this._className = "MergerMessageHandler", this._messageModule = t3;
        }
        return a2(e3, [{ key: "uploadMergerMessage", value: function(e4, t3) {
          var n3 = this;
          wl.debug("".concat(this._className, ".uploadMergerMessage message:"), e4, "messageBytes:".concat(t3));
          var o3 = e4.payload.messageList, r3 = o3.length, a3 = new __(f_.UPLOAD_MERGER_MESSAGE);
          return this._messageModule.request({ protocolName: Kh, requestData: { messageList: o3 } }).then(function(e5) {
            wl.debug("".concat(n3._className, ".uploadMergerMessage ok. response:"), e5.data);
            var o4 = e5.data, s3 = o4.pbDownloadKey, i3 = o4.downloadKey, c3 = { pbDownloadKey: s3, downloadKey: i3, messageNumber: r3 };
            return a3.setNetworkType(n3._messageModule.getNetworkType()).setMessage("".concat(r3, "-").concat(t3, "-").concat(i3)).end(), c3;
          }).catch(function(e5) {
            throw wl.warn("".concat(n3._className, ".uploadMergerMessage failed. error:"), e5), n3._messageModule.probeNetwork().then(function(t4) {
              var n4 = m2(t4, 2), o4 = n4[0], r4 = n4[1];
              a3.setError(e5, o4, r4).end();
            }), e5;
          });
        } }, { key: "downloadMergerMessage", value: function(e4) {
          var n3 = this;
          wl.debug("".concat(this._className, ".downloadMergerMessage message:"), e4);
          var o3 = e4.payload.downloadKey, r3 = new __(f_.DOWNLOAD_MERGER_MESSAGE);
          return r3.setMessage("downloadKey:".concat(o3)), this._messageModule.request({ protocolName: Hh, requestData: { downloadKey: o3 } }).then(function(o4) {
            if (wl.debug("".concat(n3._className, ".downloadMergerMessage ok. response:"), o4.data), td(e4.clearElement)) {
              var a3 = e4.payload, s3 = (a3.downloadKey, a3.pbDownloadKey, a3.messageList, g2(a3, JM));
              e4.clearElement(), e4.setElement({ type: e4.type, content: t2({ messageList: o4.data.messageList }, s3) });
            } else {
              var i3 = [];
              o4.data.messageList.forEach(function(e5) {
                if (!qd(e5)) {
                  var t3 = new fv(e5);
                  i3.push(t3);
                }
              }), e4.payload.messageList = i3, e4.payload.downloadKey = "", e4.payload.pbDownloadKey = "";
            }
            return r3.setNetworkType(n3._messageModule.getNetworkType()).end(), e4;
          }).catch(function(e5) {
            throw wl.warn("".concat(n3._className, ".downloadMergerMessage failed. key:").concat(o3, " error:"), e5), n3._messageModule.probeNetwork().then(function(t3) {
              var n4 = m2(t3, 2), o4 = n4[0], a3 = n4[1];
              r3.setError(e5, o4, a3).end();
            }), e5;
          });
        } }, { key: "createMergerMessagePack", value: function(e4, t3, n3) {
          return e4.conversationType === gr.CONV_C2C ? this._createC2CMergerMessagePack(e4, t3, n3) : this._createGroupMergerMessagePack(e4, t3, n3);
        } }, { key: "_createC2CMergerMessagePack", value: function(e4, t3, n3) {
          var o3 = null;
          t3 && (t3.offlinePushInfo && (o3 = t3.offlinePushInfo), true === t3.onlineUserOnly && (o3 ? o3.disablePush = true : o3 = { disablePush: true }));
          var r3 = "";
          zl(e4.cloudCustomData) && e4.cloudCustomData.length > 0 && (r3 = e4.cloudCustomData);
          var a3 = n3.pbDownloadKey, s3 = n3.downloadKey, i3 = n3.messageNumber, c3 = e4.payload, u3 = c3.title, l3 = c3.abstractList, d3 = c3.compatibleText, p3 = this._messageModule.getModule(tg);
          return { protocolName: Rg, tjgID: this._messageModule.generateTjgID(e4), requestData: { fromAccount: this._messageModule.getMyUserID(), toAccount: e4.to, msgBody: [{ msgType: e4.type, msgContent: { pbDownloadKey: a3, downloadKey: s3, title: u3, abstractList: l3, compatibleText: d3, messageNumber: i3 } }], cloudCustomData: r3, msgSeq: e4.sequence, msgRandom: e4.random, msgLifeTime: p3 && p3.isOnlineMessage(e4, t3) ? 0 : void 0, offlinePushInfo: o3 ? { pushFlag: true === o3.disablePush ? 1 : 0, title: o3.title || "", desc: o3.description || "", ext: o3.extension || "", apnsInfo: { badgeMode: true === o3.ignoreIOSBadge ? 1 : 0 }, androidInfo: { OPPOChannelID: o3.androidOPPOChannelID || "" } } : void 0 } };
        } }, { key: "_createGroupMergerMessagePack", value: function(e4, t3, n3) {
          var o3 = null;
          t3 && t3.offlinePushInfo && (o3 = t3.offlinePushInfo);
          var r3 = "";
          zl(e4.cloudCustomData) && e4.cloudCustomData.length > 0 && (r3 = e4.cloudCustomData);
          var a3 = n3.pbDownloadKey, s3 = n3.downloadKey, i3 = n3.messageNumber, c3 = e4.payload, u3 = c3.title, l3 = c3.abstractList, d3 = c3.compatibleText, p3 = this._messageModule.getModule(ng);
          return { protocolName: Lg, tjgID: this._messageModule.generateTjgID(e4), requestData: { fromAccount: this._messageModule.getMyUserID(), groupID: e4.to, msgBody: [{ msgType: e4.type, msgContent: { pbDownloadKey: a3, downloadKey: s3, title: u3, abstractList: l3, compatibleText: d3, messageNumber: i3 } }], random: e4.random, priority: e4.priority, clientSequence: e4.clientSequence, groupAtInfo: void 0, cloudCustomData: r3, onlineOnlyFlag: p3 && p3.isOnlineMessage(e4, t3) ? 1 : 0, offlinePushInfo: o3 ? { pushFlag: true === o3.disablePush ? 1 : 0, title: o3.title || "", desc: o3.description || "", ext: o3.extension || "", apnsInfo: { badgeMode: true === o3.ignoreIOSBadge ? 1 : 0 }, androidInfo: { OPPOChannelID: o3.androidOPPOChannelID || "" } } : void 0, clientTime: e4.clientTime, needReadReceipt: true !== e4.needReadReceipt || p3.isMessageFromOrToAVChatroom(e4.to) ? 0 : 1 } };
        } }]), e3;
      }(), QM = { ERR_SVR_COMM_SENSITIVE_TEXT: 80001, ERR_SVR_COMM_BODY_SIZE_LIMIT: 80002, OPEN_SERVICE_OVERLOAD_ERROR: 60022, ERR_SVR_MSG_PKG_PARSE_FAILED: 20001, ERR_SVR_MSG_INTERNAL_AUTH_FAILED: 20002, ERR_SVR_MSG_INVALID_ID: 20003, ERR_SVR_MSG_PUSH_DENY: 20006, ERR_SVR_MSG_IN_PEER_BLACKLIST: 20007, ERR_SVR_MSG_BOTH_NOT_FRIEND: 20009, ERR_SVR_MSG_NOT_PEER_FRIEND: 20010, ERR_SVR_MSG_NOT_SELF_FRIEND: 20011, ERR_SVR_MSG_SHUTUP_DENY: 20012, ERR_SVR_GROUP_INVALID_PARAMETERS: 10004, ERR_SVR_GROUP_PERMISSION_DENY: 10007, ERR_SVR_GROUP_NOT_FOUND: 10010, ERR_SVR_GROUP_INVALID_GROUPID: 10015, ERR_SVR_GROUP_REJECT_FROM_THIRDPARTY: 10016, ERR_SVR_GROUP_SHUTUP_DENY: 10017, MESSAGE_SEND_FAIL: 2100, OVER_FREQUENCY_LIMIT: 2996 }, ZM = [Zh.MESSAGE_ONPROGRESS_FUNCTION_ERROR, Zh.MESSAGE_IMAGE_SELECT_FILE_FIRST, Zh.MESSAGE_IMAGE_TYPES_LIMIT, Zh.MESSAGE_FILE_IS_EMPTY, Zh.MESSAGE_IMAGE_SIZE_LIMIT, Zh.MESSAGE_FILE_SELECT_FILE_FIRST, Zh.MESSAGE_FILE_SIZE_LIMIT, Zh.MESSAGE_VIDEO_SIZE_LIMIT, Zh.MESSAGE_VIDEO_TYPES_LIMIT, Zh.MESSAGE_AUDIO_UPLOAD_FAIL, Zh.MESSAGE_AUDIO_SIZE_LIMIT, Zh.COS_UNDETECTED];
      var ey, ty = function(e3) {
        i2(n3, e3);
        var t3 = f2(n3);
        function n3(e4) {
          var r3;
          return o2(this, n3), (r3 = t3.call(this, e4))._className = "MessageModule", r3._messageOptionsMap = /* @__PURE__ */ new Map(), r3._mergerMessageHandler = new XM(h2(r3)), r3;
        }
        return a2(n3, [{ key: "createTextMessage", value: function(e4) {
          var t4 = e4.to, n4 = e4.payload.atUserList, o3 = void 0 === n4 ? [] : n4;
          if ((Id({ groupID: t4 }) || Ed(t4)) && o3.includes(gr.MSG_AT_ALL))
            return Rv({ code: Zh.MESSAGE_AT_TYPE_INVALID, message: e_.MESSAGE_AT_TYPE_INVALID });
          var r3 = this.getMyUserID();
          e4.currentUser = r3, e4.senderTinyID = this.getMyTinyID();
          var a3 = new Mv(e4), s3 = "string" == typeof e4.payload ? e4.payload : e4.payload.text, i3 = new E_({ text: s3 }), c3 = this._getNickAndAvatarByUserID(r3);
          return a3.setElement(i3), a3.setNickAndAvatar(c3), a3.setNameCard(this._getNameCardByGroupID(a3)), a3;
        } }, { key: "createImageMessage", value: function(e4) {
          var t4 = this.getMyUserID();
          e4.currentUser = t4, e4.senderTinyID = this.getMyTinyID();
          var n4 = new Mv(e4);
          if (Bu) {
            var o3 = e4.payload.file;
            if (Yl(o3))
              return void wl.warn("小程序环境下调用 createImageMessage 接口时，payload.file 不支持传入 File 对象");
            var r3 = o3.tempFilePaths[0], a3 = { url: r3, name: r3.slice(r3.lastIndexOf("/") + 1), size: o3.tempFiles && o3.tempFiles[0].size || 1, type: r3.slice(r3.lastIndexOf(".") + 1).toLowerCase() };
            e4.payload.file = a3;
          } else if (ju) {
            if (Yl(e4.payload.file)) {
              var s3 = e4.payload.file;
              e4.payload.file = { files: [s3] };
            } else if (Xl(e4.payload.file) && "undefined" != typeof uni) {
              var i3 = e4.payload.file.tempFiles[0];
              e4.payload.file = { files: [i3] };
            }
          }
          var c3 = new ev({ imageFormat: Ul.UNKNOWN, uuid: this._generateUUID(), file: e4.payload.file }), u3 = this._getNickAndAvatarByUserID(t4);
          return n4.setElement(c3), n4.setNickAndAvatar(u3), n4.setNameCard(this._getNameCardByGroupID(n4)), this._messageOptionsMap.set(n4.clientSequence, e4), n4;
        } }, { key: "createAudioMessage", value: function(e4) {
          if (Bu) {
            var t4 = e4.payload.file;
            if (Bu) {
              var n4 = { url: t4.tempFilePath, name: t4.tempFilePath.slice(t4.tempFilePath.lastIndexOf("/") + 1), size: t4.fileSize, second: parseInt(t4.duration) / 1e3, type: t4.tempFilePath.slice(t4.tempFilePath.lastIndexOf(".") + 1).toLowerCase() };
              e4.payload.file = n4;
            }
            var o3 = this.getMyUserID();
            e4.currentUser = o3, e4.senderTinyID = this.getMyTinyID();
            var r3 = new Mv(e4), a3 = new nv({ second: Math.floor(t4.duration / 1e3), size: t4.fileSize, url: t4.tempFilePath, uuid: this._generateUUID() }), s3 = this._getNickAndAvatarByUserID(o3);
            return r3.setElement(a3), r3.setNickAndAvatar(s3), r3.setNameCard(this._getNameCardByGroupID(r3)), this._messageOptionsMap.set(r3.clientSequence, e4), r3;
          }
          wl.warn("createAudioMessage 目前只支持小程序环境下发语音消息");
        } }, { key: "createVideoMessage", value: function(e4) {
          var t4 = this.getMyUserID();
          e4.currentUser = t4, e4.senderTinyID = this.getMyTinyID(), e4.payload.file.thumbUrl = "https://web.sdk.qcloud.com/im/assets/images/transparent.png", e4.payload.file.thumbSize = 1668;
          var n4 = {};
          if (Bu) {
            if (xu)
              return void wl.warn("createVideoMessage 不支持在支付宝小程序环境下使用");
            if (Yl(e4.payload.file))
              return void wl.warn("小程序环境下调用 createVideoMessage 接口时，payload.file 不支持传入 File 对象");
            var o3 = e4.payload.file;
            n4.url = o3.tempFilePath, n4.name = o3.tempFilePath.slice(o3.tempFilePath.lastIndexOf("/") + 1), n4.size = o3.size, n4.second = o3.duration, n4.type = o3.tempFilePath.slice(o3.tempFilePath.lastIndexOf(".") + 1).toLowerCase();
          } else if (ju) {
            if (Yl(e4.payload.file)) {
              var r3 = e4.payload.file;
              e4.payload.file.files = [r3];
            } else if (Xl(e4.payload.file) && "undefined" != typeof uni) {
              var a3 = e4.payload.file.tempFile;
              e4.payload.file.files = [a3];
            }
            var s3 = e4.payload.file;
            n4.url = window.URL.createObjectURL(s3.files[0]), n4.name = s3.files[0].name, n4.size = s3.files[0].size, n4.second = s3.files[0].duration || 0, n4.type = s3.files[0].type.split("/")[1];
          }
          e4.payload.file.videoFile = n4;
          var i3 = new Mv(e4), c3 = new hv({ videoFormat: n4.type, videoSecond: Pd(n4.second, 0), videoSize: n4.size, remoteVideoUrl: "", videoUrl: n4.url, videoUUID: this._generateUUID(), thumbUUID: this._generateUUID(), thumbWidth: e4.payload.file.width || 200, thumbHeight: e4.payload.file.height || 200, thumbUrl: e4.payload.file.thumbUrl, thumbSize: e4.payload.file.thumbSize, thumbFormat: e4.payload.file.thumbUrl.slice(e4.payload.file.thumbUrl.lastIndexOf(".") + 1).toLowerCase() }), u3 = this._getNickAndAvatarByUserID(t4);
          return i3.setElement(c3), i3.setNickAndAvatar(u3), i3.setNameCard(this._getNameCardByGroupID(i3)), this._messageOptionsMap.set(i3.clientSequence, e4), i3;
        } }, { key: "createCustomMessage", value: function(e4) {
          var t4 = this.getMyUserID();
          e4.currentUser = t4, e4.senderTinyID = this.getMyTinyID();
          var n4 = new Mv(e4), o3 = new gv({ data: e4.payload.data, description: e4.payload.description, extension: e4.payload.extension }), r3 = this._getNickAndAvatarByUserID(t4);
          return n4.setElement(o3), n4.setNickAndAvatar(r3), n4.setNameCard(this._getNameCardByGroupID(n4)), n4;
        } }, { key: "createFaceMessage", value: function(e4) {
          var t4 = this.getMyUserID();
          e4.currentUser = t4, e4.senderTinyID = this.getMyTinyID();
          var n4 = new Mv(e4), o3 = new tv(e4.payload), r3 = this._getNickAndAvatarByUserID(t4);
          return n4.setElement(o3), n4.setNickAndAvatar(r3), n4.setNameCard(this._getNameCardByGroupID(n4)), n4;
        } }, { key: "createMergerMessage", value: function(e4) {
          var t4 = this.getMyUserID();
          e4.currentUser = t4, e4.senderTinyID = this.getMyTinyID();
          var n4 = this._getNickAndAvatarByUserID(t4), o3 = new Mv(e4), r3 = new mv(e4.payload);
          return o3.setElement(r3), o3.setNickAndAvatar(n4), o3.setNameCard(this._getNameCardByGroupID(o3)), o3.setRelayFlag(true), o3;
        } }, { key: "createForwardMessage", value: function(e4) {
          var t4 = e4.to, n4 = e4.conversationType, o3 = e4.priority, r3 = e4.payload, a3 = e4.needReadReceipt, s3 = this.getMyUserID(), i3 = this._getNickAndAvatarByUserID(s3);
          if (r3.type === gr.MSG_GRP_TIP)
            return Rv(new Av({ code: Zh.MESSAGE_FORWARD_TYPE_INVALID, message: e_.MESSAGE_FORWARD_TYPE_INVALID }));
          var c3 = { to: t4, conversationType: n4, conversationID: "".concat(n4).concat(t4), priority: o3, isPlaceMessage: 0, status: Gp.UNSEND, currentUser: s3, senderTinyID: this.getMyTinyID(), cloudCustomData: e4.cloudCustomData || r3.cloudCustomData || "", needReadReceipt: a3 }, u3 = new Mv(c3);
          return u3.setElement(r3.getElements()[0]), u3.setNickAndAvatar(i3), u3.setNameCard(this._getNameCardByGroupID(r3)), u3.setRelayFlag(true), u3;
        } }, { key: "downloadMergerMessage", value: function(e4) {
          return this._mergerMessageHandler.downloadMergerMessage(e4);
        } }, { key: "createFileMessage", value: function(e4) {
          if (!Bu || Ku) {
            if (ju || Ku) {
              if (Yl(e4.payload.file)) {
                var t4 = e4.payload.file;
                e4.payload.file = { files: [t4] };
              } else if (Xl(e4.payload.file) && "undefined" != typeof uni) {
                var n4 = e4.payload.file, o3 = n4.tempFiles, r3 = n4.files, a3 = null;
                Ql(o3) ? a3 = o3[0] : Ql(r3) && (a3 = r3[0]), e4.payload.file = { files: [a3] };
              }
            }
            var s3 = this.getMyUserID();
            e4.currentUser = s3, e4.senderTinyID = this.getMyTinyID();
            var i3 = new Mv(e4), c3 = new pv({ uuid: this._generateUUID(), file: e4.payload.file }), u3 = this._getNickAndAvatarByUserID(s3);
            return i3.setElement(c3), i3.setNickAndAvatar(u3), i3.setNameCard(this._getNameCardByGroupID(i3)), this._messageOptionsMap.set(i3.clientSequence, e4), i3;
          }
          wl.warn("小程序目前不支持选择文件， createFileMessage 接口不可用！");
        } }, { key: "createLocationMessage", value: function(e4) {
          var t4 = this.getMyUserID();
          e4.currentUser = t4, e4.senderTinyID = this.getMyTinyID();
          var n4 = new Mv(e4), o3 = new _v(e4.payload), r3 = this._getNickAndAvatarByUserID(t4);
          return n4.setElement(o3), n4.setNickAndAvatar(r3), n4.setNameCard(this._getNameCardByGroupID(n4)), n4;
        } }, { key: "_onCannotFindModule", value: function() {
          return Rv({ code: Zh.CANNOT_FIND_MODULE, message: e_.CANNOT_FIND_MODULE });
        } }, { key: "sendMessageInstance", value: function(e4, t4) {
          var n4, o3 = this, r3 = null;
          switch (e4.conversationType) {
            case gr.CONV_C2C:
              if (!(r3 = this.getModule(tg)))
                return this._onCannotFindModule();
              break;
            case gr.CONV_GROUP:
              if (!(r3 = this.getModule(ng)))
                return this._onCannotFindModule();
              if (Id({ groupID: e4.to })) {
                var a3 = r3.getLocalGroupProfile(e4.to);
                if (a3 && a3.isSupportTopic)
                  return Rv({ code: Zh.MESSAGE_SEND_GROUP_WITH_TOPIC_FAIL, message: e_.MESSAGE_SEND_GROUP_WITH_TOPIC_FAIL });
                if (!Zl(t4) && !Zl(t4.messageControlInfo))
                  return Rv({ code: Zh.MESSAGE_CONTROL_INFO_FAIL, message: e_.MESSAGE_CONTROL_INFO_FAIL });
              }
              break;
            default:
              return Rv({ code: Zh.MESSAGE_SEND_INVALID_CONVERSATION_TYPE, message: e_.MESSAGE_SEND_INVALID_CONVERSATION_TYPE });
          }
          var s3 = this.getModule(pg), i3 = this.getModule(ng);
          return s3.upload(e4).then(function() {
            o3._getSendMessageSpecifiedKey(e4) === s_ && o3.getModule(Ig).addSuccessCount(i_);
            return i3.guardForAVChatRoom(e4).then(function() {
              if (!e4.isSendable())
                return Rv({ code: Zh.MESSAGE_FILE_URL_IS_EMPTY, message: e_.MESSAGE_FILE_URL_IS_EMPTY });
              o3._addSendMessageTotalCount(e4), n4 = Date.now();
              var a4 = function(e5) {
                var t5 = "utf-8";
                ju && document && (t5 = document.charset.toLowerCase());
                var n5, o4, r4 = 0;
                if (o4 = e5.length, "utf-8" === t5 || "utf8" === t5)
                  for (var a5 = 0; a5 < o4; a5++)
                    (n5 = e5.codePointAt(a5)) <= 127 ? r4 += 1 : n5 <= 2047 ? r4 += 2 : n5 <= 65535 ? r4 += 3 : (r4 += 4, a5++);
                else if ("utf-16" === t5 || "utf16" === t5)
                  for (var s4 = 0; s4 < o4; s4++)
                    (n5 = e5.codePointAt(s4)) <= 65535 ? r4 += 2 : (r4 += 4, s4++);
                else
                  r4 = e5.replace(/[^\x00-\xff]/g, "aa").length;
                return r4;
              }(JSON.stringify(e4));
              return e4.type === gr.MSG_MERGER && a4 > 7e3 ? o3._mergerMessageHandler.uploadMergerMessage(e4, a4).then(function(n5) {
                var r4 = o3._mergerMessageHandler.createMergerMessagePack(e4, t4, n5);
                return o3.request(r4);
              }) : (o3.getModule(sg).setMessageRandom(e4), e4.conversationType === gr.CONV_C2C || e4.conversationType === gr.CONV_GROUP ? r3.sendMessage(e4, t4) : void 0);
            }).then(function(a4) {
              var s4 = a4.data, i4 = s4.time, c3 = s4.sequence, u3 = s4.readReceiptCode;
              $l(u3) && 0 !== u3 && (new __(f_.SEND_MESSAGE_WITH_RECEIPT).setMessage("from:".concat(e4.from, " to:").concat(e4.to, " sequence:").concat(c3, " readReceiptCode:").concat(u3)).end(), wl.warn("".concat(o3._className, ".sendMessageInstance readReceiptCode:").concat(u3, " message:").concat(Cv[u3])));
              o3._addSendMessageSuccessCount(e4, n4), o3._messageOptionsMap.delete(e4.clientSequence);
              var l3 = o3.getModule(sg);
              e4.status = Gp.SUCCESS, e4.time = i4;
              var d3 = false;
              if (e4.conversationType === gr.CONV_GROUP)
                e4.sequence = c3;
              else if (e4.conversationType === gr.CONV_C2C) {
                var p3 = l3.getLatestMessageSentByMe(e4.conversationID);
                if (p3) {
                  var g3 = p3.nick, h3 = p3.avatar;
                  g3 === e4.nick && h3 === e4.avatar || (d3 = true);
                }
              }
              if (l3.appendToMessageList(e4), d3 && l3.modifyMessageSentByMe({ conversationID: e4.conversationID, latestNick: e4.nick, latestAvatar: e4.avatar }), r3.isOnlineMessage(e4, t4))
                e4._onlineOnlyFlag = true;
              else {
                var _3 = e4;
                Xl(t4) && Xl(t4.messageControlInfo) && (true === t4.messageControlInfo.excludedFromLastMessage && (e4._isExcludedFromLastMessage = true, _3 = ""), true === t4.messageControlInfo.excludedFromUnreadCount && (e4._isExcludedFromUnreadCount = true));
                var f3 = e4.conversationType;
                if (Ed(e4.to))
                  f3 = gr.CONV_TOPIC, o3.getModule(ag).onMessageSent({ groupID: wd(e4.to), topicID: e4.to, lastMessage: _3 });
                l3.onMessageSent({ conversationOptionsList: [{ conversationID: e4.conversationID, unreadCount: 0, type: f3, subType: e4.conversationSubType, lastMessage: _3 }] });
              }
              return e4.getRelayFlag() || "TIMImageElem" !== e4.type || Ld(e4.payload.imageInfoArray), yv({ message: e4 });
            });
          }).catch(function(t5) {
            return o3._onSendMessageFailed(e4, t5);
          });
        } }, { key: "_onSendMessageFailed", value: function(e4, t4) {
          e4.status = Gp.FAIL, this.getModule(sg).deleteMessageRandom(e4), this._addSendMessageFailCountOnUser(e4, t4);
          var n4 = new __(f_.SEND_MESSAGE);
          return n4.setMessage("tjg_id:".concat(this.generateTjgID(e4), " type:").concat(e4.type, " from:").concat(e4.from, " to:").concat(e4.to)), this.probeNetwork().then(function(e5) {
            var o3 = m2(e5, 2), r3 = o3[0], a3 = o3[1];
            n4.setError(t4, r3, a3).end();
          }), wl.error("".concat(this._className, "._onSendMessageFailed error:"), t4), Rv(new Av({ code: t4 && t4.code ? t4.code : Zh.MESSAGE_SEND_FAIL, message: t4 && t4.message ? t4.message : e_.MESSAGE_SEND_FAIL, data: { message: e4 } }));
        } }, { key: "_getSendMessageSpecifiedKey", value: function(e4) {
          if ([gr.MSG_IMAGE, gr.MSG_AUDIO, gr.MSG_VIDEO, gr.MSG_FILE].includes(e4.type))
            return s_;
          if (e4.conversationType === gr.CONV_C2C)
            return o_;
          if (e4.conversationType === gr.CONV_GROUP) {
            var t4 = this.getModule(ng).getLocalGroupProfile(e4.to);
            if (!t4)
              return;
            var n4 = t4.type;
            return yd(n4) ? a_ : r_;
          }
        } }, { key: "_addSendMessageTotalCount", value: function(e4) {
          var t4 = this._getSendMessageSpecifiedKey(e4);
          t4 && this.getModule(Ig).addTotalCount(t4);
        } }, { key: "_addSendMessageSuccessCount", value: function(e4, t4) {
          var n4 = Math.abs(Date.now() - t4), o3 = this._getSendMessageSpecifiedKey(e4);
          if (o3) {
            var r3 = this.getModule(Ig);
            r3.addSuccessCount(o3), r3.addCost(o3, n4);
          }
        } }, { key: "_addSendMessageFailCountOnUser", value: function(e4, t4) {
          var n4, o3, r3 = t4.code, a3 = void 0 === r3 ? -1 : r3, s3 = this.getModule(Ig), i3 = this._getSendMessageSpecifiedKey(e4);
          i3 === s_ && (n4 = a3, o3 = false, ZM.includes(n4) && (o3 = true), o3) ? s3.addFailedCountOfUserSide(i_) : function(e5) {
            var t5 = false;
            return Object.values(QM).includes(e5) && (t5 = true), (e5 >= 120001 && e5 <= 13e4 || e5 >= 10100 && e5 <= 10200) && (t5 = true), t5;
          }(a3) && i3 && s3.addFailedCountOfUserSide(i3);
        } }, { key: "resendMessage", value: function(e4) {
          return e4.isResend = true, e4.status = Gp.UNSEND, e4.random = ld(), e4.clientTime = kl(), e4.generateMessageID(), this.sendMessageInstance(e4);
        } }, { key: "revokeMessage", value: function(e4) {
          var t4 = this, n4 = null;
          if (e4.conversationType === gr.CONV_C2C) {
            if (!(n4 = this.getModule(tg)))
              return this._onCannotFindModule();
          } else if (e4.conversationType === gr.CONV_GROUP && !(n4 = this.getModule(ng)))
            return this._onCannotFindModule();
          var o3 = new __(f_.REVOKE_MESSAGE);
          return o3.setMessage("tjg_id:".concat(this.generateTjgID(e4), " type:").concat(e4.type, " from:").concat(e4.from, " to:").concat(e4.to)), n4.revokeMessage(e4).then(function(n5) {
            var r3 = n5.data.recallRetList;
            if (!qd(r3) && 0 !== r3[0].retCode) {
              var a3 = new Av({ code: r3[0].retCode, message: Cv[r3[0].retCode] || e_.MESSAGE_REVOKE_FAIL, data: { message: e4 } });
              return o3.setCode(a3.code).setMoreMessage(a3.message).end(), Rv(a3);
            }
            return wl.info("".concat(t4._className, ".revokeMessage ok. ID:").concat(e4.ID)), e4.isRevoked = true, o3.end(), t4.getModule(sg).onMessageRevoked([e4]), yv({ message: e4 });
          }).catch(function(n5) {
            t4.probeNetwork().then(function(e5) {
              var t5 = m2(e5, 2), r4 = t5[0], a3 = t5[1];
              o3.setError(n5, r4, a3).end();
            });
            var r3 = new Av({ code: n5 && n5.code ? n5.code : Zh.MESSAGE_REVOKE_FAIL, message: n5 && n5.message ? n5.message : e_.MESSAGE_REVOKE_FAIL, data: { message: e4 } });
            return wl.warn("".concat(t4._className, ".revokeMessage failed. error:"), n5), Rv(r3);
          });
        } }, { key: "deleteMessage", value: function(e4) {
          var t4 = this, n4 = null, o3 = e4[0], r3 = o3.conversationID, a3 = "", s3 = [], i3 = [];
          if (o3.conversationType === gr.CONV_C2C ? (n4 = this.getModule(tg), a3 = r3.replace(gr.CONV_C2C, ""), e4.forEach(function(e5) {
            e5 && e5.status === Gp.SUCCESS && e5.conversationID === r3 && (e5._onlineOnlyFlag || s3.push("".concat(e5.sequence, "_").concat(e5.random, "_").concat(e5.time)), i3.push(e5));
          })) : o3.conversationType === gr.CONV_GROUP && (n4 = this.getModule(ng), a3 = r3.replace(gr.CONV_GROUP, ""), e4.forEach(function(e5) {
            e5 && e5.status === Gp.SUCCESS && e5.conversationID === r3 && (e5._onlineOnlyFlag || s3.push("".concat(e5.sequence)), i3.push(e5));
          })), !n4)
            return this._onCannotFindModule();
          if (0 === s3.length)
            return this._onMessageDeleted(i3);
          s3.length > 30 && (s3 = s3.slice(0, 30), i3 = i3.slice(0, 30));
          var c3 = new __(f_.DELETE_MESSAGE);
          return c3.setMessage("to:".concat(a3, " count:").concat(s3.length)), n4.deleteMessage({ to: a3, keyList: s3 }).then(function(e5) {
            return c3.end(), wl.info("".concat(t4._className, ".deleteMessage ok")), t4._onMessageDeleted(i3);
          }).catch(function(e5) {
            t4.probeNetwork().then(function(t5) {
              var n6 = m2(t5, 2), o4 = n6[0], r4 = n6[1];
              c3.setError(e5, o4, r4).end();
            }), wl.warn("".concat(t4._className, ".deleteMessage failed. error:"), e5);
            var n5 = new Av({ code: e5 && e5.code ? e5.code : Zh.MESSAGE_DELETE_FAIL, message: e5 && e5.message ? e5.message : e_.MESSAGE_DELETE_FAIL });
            return Rv(n5);
          });
        } }, { key: "_onMessageDeleted", value: function(e4) {
          return this.getModule(sg).onMessageDeleted(e4), Ov({ messageList: e4 });
        } }, { key: "modifyRemoteMessage", value: function(e4) {
          var t4 = this, n4 = null, o3 = e4.conversationType, r3 = e4.to;
          if (this.getModule(ng).isMessageFromOrToAVChatroom(r3))
            return Rv({ code: Zh.MESSAGE_MODIFY_DISABLED_IN_AVCHATROOM, message: e_.MESSAGE_MODIFY_DISABLED_IN_AVCHATROOM, data: { message: e4 } });
          o3 === gr.CONV_C2C ? n4 = this.getModule(tg) : o3 === gr.CONV_GROUP && (n4 = this.getModule(ng));
          var a3 = new __(f_.MODIFY_MESSAGE);
          return a3.setMessage("to:".concat(r3)), n4.modifyRemoteMessage(e4).then(function(n5) {
            a3.end(), wl.info("".concat(t4._className, ".modifyRemoteMessage ok"));
            var o4 = t4._onModifyRemoteMessageResp(e4, n5.data);
            return yv({ message: o4 });
          }).catch(function(n5) {
            if (a3.setCode(n5.code).setMoreMessage(n5.message).end(), wl.warn("".concat(t4._className, ".modifyRemoteMessage failed. error:"), n5), 20027 === n5.code) {
              var o4 = t4._onModifyRemoteMessageResp(e4, n5.data);
              return Rv({ code: Zh.MESSAGE_MODIFY_CONFLICT, message: e_.MESSAGE_MODIFY_CONFLICT, data: { message: o4 } });
            }
            return Rv({ code: n5.code, message: n5.message, data: { message: e4 } });
          });
        } }, { key: "_onModifyRemoteMessageResp", value: function(e4, t4) {
          wl.debug("".concat(this._className, "._onModifyRemoteMessageResp options:"), t4);
          var n4 = e4.conversationType, o3 = e4.from, r3 = e4.to, a3 = e4.random, s3 = e4.sequence, i3 = e4.time, c3 = t4.elements, u3 = t4.messageVersion, l3 = t4.cloudCustomData, d3 = void 0 === l3 ? "" : l3;
          return this.getModule(sg).onMessageModified({ conversationType: n4, from: o3, to: r3, time: i3, random: a3, sequence: s3, elements: c3, cloudCustomData: d3, messageVersion: u3 });
        } }, { key: "_generateUUID", value: function() {
          var e4 = this.getModule(ig);
          return "".concat(e4.getSDKAppID(), "-").concat(e4.getUserID(), "-").concat(function() {
            for (var e5 = "", t4 = 32; t4 > 0; --t4)
              e5 += dd[Math.floor(Math.random() * pd)];
            return e5;
          }());
        } }, { key: "getMessageOption", value: function(e4) {
          return this._messageOptionsMap.get(e4);
        } }, { key: "_getNickAndAvatarByUserID", value: function(e4) {
          return this.getModule(eg).getNickAndAvatarByUserID(e4);
        } }, { key: "_getNameCardByGroupID", value: function(e4) {
          if (e4.conversationType === gr.CONV_GROUP) {
            var t4 = this.getModule(ng);
            if (t4)
              return t4.getMyNameCardByGroupID(e4.to);
          }
          return "";
        } }, { key: "reset", value: function() {
          wl.log("".concat(this._className, ".reset")), this._messageOptionsMap.clear();
        } }]), n3;
      }(Tg), ny = function(e3) {
        i2(n3, e3);
        var t3 = f2(n3);
        function n3(e4) {
          var r3;
          return o2(this, n3), (r3 = t3.call(this, e4))._className = "PluginModule", r3.plugins = {}, r3;
        }
        return a2(n3, [{ key: "registerPlugin", value: function(e4) {
          var t4 = this;
          Object.keys(e4).forEach(function(n4) {
            t4.plugins[n4] = e4[n4];
          }), new __(f_.REGISTER_PLUGIN).setMessage("key=".concat(Object.keys(e4))).end();
        } }, { key: "getPlugin", value: function(e4) {
          return this.plugins[e4];
        } }, { key: "reset", value: function() {
          wl.log("".concat(this._className, ".reset"));
        } }]), n3;
      }(Tg), oy = function(e3) {
        i2(n3, e3);
        var t3 = f2(n3);
        function n3(e4) {
          var r3;
          return o2(this, n3), (r3 = t3.call(this, e4))._className = "SyncUnreadMessageModule", r3._cookie = "", r3._onlineSyncFlag = false, r3.getInnerEmitterInstance().on(Yv, r3._onLoginSuccess, h2(r3)), r3;
        }
        return a2(n3, [{ key: "_onLoginSuccess", value: function(e4) {
          this._startSync({ cookie: this._cookie, syncFlag: 0, isOnlineSync: 0 });
        } }, { key: "_startSync", value: function(e4) {
          var t4 = this, n4 = e4.cookie, o3 = e4.syncFlag, r3 = e4.isOnlineSync;
          wl.log("".concat(this._className, "._startSync cookie:").concat(n4, " syncFlag:").concat(o3, " isOnlineSync:").concat(r3)), this.request({ protocolName: Ng, requestData: { cookie: n4, syncFlag: o3, isOnlineSync: r3 } }).then(function(e5) {
            var n5 = e5.data, o4 = n5.cookie, r4 = n5.syncFlag, a3 = n5.eventArray, s3 = n5.messageList, i3 = n5.C2CRemainingUnreadList, c3 = n5.C2CPairUnreadList;
            if (t4._cookie = o4, qd(o4))
              ;
            else if (0 === r4 || 1 === r4) {
              if (a3)
                t4.getModule(_g).onMessage({ head: {}, body: { eventArray: a3, isInstantMessage: t4._onlineSyncFlag, isSyncingEnded: false } });
              t4.getModule(tg).onNewC2CMessage({ dataList: s3, isInstantMessage: false, C2CRemainingUnreadList: i3, C2CPairUnreadList: c3 }), t4._startSync({ cookie: o4, syncFlag: r4, isOnlineSync: 0 });
            } else if (2 === r4) {
              if (a3)
                t4.getModule(_g).onMessage({ head: {}, body: { eventArray: a3, isInstantMessage: t4._onlineSyncFlag, isSyncingEnded: true } });
              t4.getModule(tg).onNewC2CMessage({ dataList: s3, isInstantMessage: t4._onlineSyncFlag, C2CRemainingUnreadList: i3, C2CPairUnreadList: c3 });
            }
          }).catch(function(e5) {
            wl.error("".concat(t4._className, "._startSync failed. error:"), e5);
          });
        } }, { key: "startOnlineSync", value: function() {
          wl.log("".concat(this._className, ".startOnlineSync")), this._onlineSyncFlag = true, this._startSync({ cookie: this._cookie, syncFlag: 0, isOnlineSync: 1 });
        } }, { key: "startSyncOnReconnected", value: function() {
          wl.log("".concat(this._className, ".startSyncOnReconnected.")), this._onlineSyncFlag = true, this._startSync({ cookie: this._cookie, syncFlag: 0, isOnlineSync: 0 });
        } }, { key: "reset", value: function() {
          wl.log("".concat(this._className, ".reset")), this._onlineSyncFlag = false, this._cookie = "";
        } }]), n3;
      }(Tg), ry = { request: { toAccount: "To_Account", fromAccount: "From_Account", to: "To_Account", from: "From_Account", groupID: "GroupId", groupAtUserID: "GroupAt_Account", extension: "Ext", data: "Data", description: "Desc", elements: "MsgBody", sizeType: "Type", downloadFlag: "Download_Flag", thumbUUID: "ThumbUUID", videoUUID: "VideoUUID", remoteAudioUrl: "Url", remoteVideoUrl: "VideoUrl", videoUrl: "", imageUrl: "URL", fileUrl: "Url", uuid: "UUID", priority: "MsgPriority", receiverUserID: "To_Account", receiverGroupID: "GroupId", messageSender: "SenderId", messageReceiver: "ReceiverId", nick: "From_AccountNick", avatar: "From_AccountHeadurl", messageNumber: "MsgNum", pbDownloadKey: "PbMsgKey", downloadKey: "JsonMsgKey", applicationType: "PendencyType", userIDList: "To_Account", groupNameList: "GroupName", userID: "To_Account", groupAttributeList: "GroupAttr", mainSequence: "AttrMainSeq", avChatRoomKey: "BytesKey", attributeControl: "AttrControl", sequence: "seq", messageControlInfo: "SendMsgControl", updateSequence: "UpdateSeq", clientTime: "MsgClientTime", sequenceList: "MsgSeqList", topicID: "TopicId", customData: "CustomString", isSupportTopic: "SupportTopic" }, response: { MsgPriority: "priority", ThumbUUID: "thumbUUID", VideoUUID: "videoUUID", Download_Flag: "downloadFlag", GroupId: "groupID", Member_Account: "userID", MsgList: "messageList", SyncFlag: "syncFlag", To_Account: "to", From_Account: "from", MsgSeq: "sequence", MsgRandom: "random", MsgTime: "time", MsgTimeStamp: "time", MsgContent: "content", MsgBody: "elements", From_AccountNick: "nick", From_AccountHeadurl: "avatar", GroupWithdrawInfoArray: "revokedInfos", GroupReadInfoArray: "groupMessageReadNotice", LastReadMsgSeq: "lastMessageSeq", WithdrawC2cMsgNotify: "c2cMessageRevokedNotify", C2cWithdrawInfoArray: "revokedInfos", C2cReadedReceipt: "c2cMessageReadReceipt", ReadC2cMsgNotify: "c2cMessageReadNotice", LastReadTime: "peerReadTime", MsgRand: "random", MsgType: "type", MsgShow: "messageShow", NextMsgSeq: "nextMessageSeq", FaceUrl: "avatar", ProfileDataMod: "profileModify", Profile_Account: "userID", ValueBytes: "value", ValueNum: "value", NoticeSeq: "noticeSequence", NotifySeq: "notifySequence", MsgFrom_AccountExtraInfo: "messageFromAccountExtraInformation", Operator_Account: "operatorID", OpType: "operationType", ReportType: "operationType", UserId: "userID", User_Account: "userID", List_Account: "userIDList", MsgOperatorMemberExtraInfo: "operatorInfo", MsgMemberExtraInfo: "memberInfoList", ImageUrl: "avatar", NickName: "nick", MsgGroupNewInfo: "newGroupProfile", MsgAppDefinedData: "groupCustomField", Owner_Account: "ownerID", GroupFaceUrl: "avatar", GroupIntroduction: "introduction", GroupNotification: "notification", GroupApplyJoinOption: "joinOption", MsgKey: "messageKey", GroupInfo: "groupProfile", ShutupTime: "muteTime", Desc: "description", Ext: "extension", GroupAt_Account: "groupAtUserID", MsgNum: "messageNumber", PbMsgKey: "pbDownloadKey", JsonMsgKey: "downloadKey", MsgModifiedFlag: "isModified", PendencyItem: "applicationItem", PendencyType: "applicationType", AddTime: "time", AddSource: "source", AddWording: "wording", ProfileImImage: "avatar", PendencyAdd: "friendApplicationAdded", FrienPencydDel_Account: "friendApplicationDeletedUserIDList", Peer_Account: "userID", GroupAttr: "groupAttributeList", GroupAttrAry: "groupAttributeList", AttrMainSeq: "mainSequence", seq: "sequence", GroupAttrOption: "groupAttributeOption", BytesChangedKeys: "changedKeyList", GroupAttrInfo: "groupAttributeList", GroupAttrSeq: "mainSequence", PushChangedAttrValFlag: "hasChangedAttributeInfo", SubKeySeq: "sequence", Val: "value", MsgGroupFromCardName: "senderNameCard", MsgGroupFromNickName: "senderNick", C2cNick: "peerNick", C2cImage: "peerAvatar", SendMsgControl: "messageControlInfo", NoLastMsg: "excludedFromLastMessage", NoUnread: "excludedFromUnreadCount", UpdateSeq: "updateSequence", MuteNotifications: "muteFlag", MsgClientTime: "clientTime", TinyId: "tinyID", GroupMsgReceiptList: "readReceiptList", ReadNum: "readCount", UnreadNum: "unreadCount", TopicId: "topicID", MillionGroupFlag: "communityType", SupportTopic: "isSupportTopic", MsgTopicNewInfo: "newTopicInfo", ShutupAll: "muteAllMembers", CustomString: "customData", TopicFaceUrl: "avatar", TopicIntroduction: "introduction", TopicNotification: "notification", TopicIdArray: "topicIDList", MsgVersion: "messageVersion", C2cMsgModNotifys: "c2cMessageModified", GroupMsgModNotifys: "groupMessageModified" }, ignoreKeyWord: ["C2C", "ID", "USP"] }, ay = Ct2.PROPER, sy = vn.trim;
      function iy(e3, t3) {
        if ("string" != typeof e3 && !Array.isArray(e3))
          throw new TypeError("Expected the input to be `string | string[]`");
        t3 = Object.assign({ pascalCase: false }, t3);
        var n3;
        return 0 === (e3 = Array.isArray(e3) ? e3.map(function(e4) {
          return e4.trim();
        }).filter(function(e4) {
          return e4.length;
        }).join("-") : e3.trim()).length ? "" : 1 === e3.length ? t3.pascalCase ? e3.toUpperCase() : e3.toLowerCase() : (e3 !== e3.toLowerCase() && (e3 = cy(e3)), e3 = e3.replace(/^[_.\- ]+/, "").toLowerCase().replace(/[_.\- ]+(\w|$)/g, function(e4, t4) {
          return t4.toUpperCase();
        }).replace(/\d+(\w|$)/g, function(e4) {
          return e4.toUpperCase();
        }), n3 = e3, t3.pascalCase ? n3.charAt(0).toUpperCase() + n3.slice(1) : n3);
      }
      nn2({ target: "String", proto: true, forced: (ey = "trim", L2(function() {
        return !!pn[ey]() || "​᠎" !== "​᠎"[ey]() || ay && pn[ey].name !== ey;
      })) }, { trim: function() {
        return sy(this);
      } });
      var cy = function(e3) {
        for (var t3 = false, n3 = false, o3 = false, r3 = 0; r3 < e3.length; r3++) {
          var a3 = e3[r3];
          t3 && /[a-zA-Z]/.test(a3) && a3.toUpperCase() === a3 ? (e3 = e3.slice(0, r3) + "-" + e3.slice(r3), t3 = false, o3 = n3, n3 = true, r3++) : n3 && o3 && /[a-zA-Z]/.test(a3) && a3.toLowerCase() === a3 ? (e3 = e3.slice(0, r3 - 1) + "-" + e3.slice(r3 - 1), o3 = n3, n3 = false, t3 = true) : (t3 = a3.toLowerCase() === a3 && a3.toUpperCase() !== a3, o3 = n3, n3 = a3.toUpperCase() === a3 && a3.toLowerCase() !== a3);
        }
        return e3;
      };
      function uy(e3, t3) {
        var n3 = 0;
        return function e4(t4, o3) {
          if (++n3 > 100)
            return n3--, t4;
          if (Ql(t4)) {
            var r3 = t4.map(function(t5) {
              return Jl(t5) ? e4(t5, o3) : t5;
            });
            return n3--, r3;
          }
          if (Jl(t4)) {
            var a3 = (s3 = t4, i3 = function(e5, t5) {
              if (!rd(t5))
                return false;
              if ((r4 = t5) !== iy(r4))
                for (var n4 = 0; n4 < ry.ignoreKeyWord.length && !t5.includes(ry.ignoreKeyWord[n4]); n4++)
                  ;
              var r4;
              return Zl(o3[t5]) ? function(e6) {
                return "OPPOChannelID" === e6 ? e6 : e6[0].toUpperCase() + iy(e6).slice(1);
              }(t5) : o3[t5];
            }, c3 = /* @__PURE__ */ Object.create(null), Object.keys(s3).forEach(function(e5) {
              var t5 = i3(s3[e5], e5);
              t5 && (c3[t5] = s3[e5]);
            }), c3);
            return a3 = Ad(a3, function(t5, n4) {
              return Ql(t5) || Jl(t5) ? e4(t5, o3) : t5;
            }), n3--, a3;
          }
          var s3, i3, c3;
        }(e3, t3);
      }
      function ly(e3, t3) {
        if (Ql(e3))
          return e3.map(function(e4) {
            return Jl(e4) ? ly(e4, t3) : e4;
          });
        if (Jl(e3)) {
          var n3 = (o3 = e3, r3 = function(e4, n4) {
            return Zl(t3[n4]) ? iy(n4) : t3[n4];
          }, a3 = {}, Object.keys(o3).forEach(function(e4) {
            a3[r3(o3[e4], e4)] = o3[e4];
          }), a3);
          return n3 = Ad(n3, function(e4) {
            return Ql(e4) || Jl(e4) ? ly(e4, t3) : e4;
          });
        }
        var o3, r3, a3;
      }
      var dy = "undefined" != typeof ArrayBuffer && "undefined" != typeof DataView, py = R2.RangeError, gy = function(e3) {
        if (void 0 === e3)
          return 0;
        var t3 = Ot2(e3), n3 = Gt2(t3);
        if (t3 !== n3)
          throw py("Wrong length or index");
        return n3;
      }, hy = R2.Array, _y = Math.abs, fy = Math.pow, vy = Math.floor, My = Math.log, yy = Math.LN2, Iy = function(e3, t3, n3) {
        var o3, r3, a3, s3 = hy(n3), i3 = 8 * n3 - t3 - 1, c3 = (1 << i3) - 1, u3 = c3 >> 1, l3 = 23 === t3 ? fy(2, -24) - fy(2, -77) : 0, d3 = e3 < 0 || 0 === e3 && 1 / e3 < 0 ? 1 : 0, p3 = 0;
        for ((e3 = _y(e3)) != e3 || Infinity === e3 ? (r3 = e3 != e3 ? 1 : 0, o3 = c3) : (o3 = vy(My(e3) / yy), e3 * (a3 = fy(2, -o3)) < 1 && (o3--, a3 *= 2), (e3 += o3 + u3 >= 1 ? l3 / a3 : l3 * fy(2, 1 - u3)) * a3 >= 2 && (o3++, a3 /= 2), o3 + u3 >= c3 ? (r3 = 0, o3 = c3) : o3 + u3 >= 1 ? (r3 = (e3 * a3 - 1) * fy(2, t3), o3 += u3) : (r3 = e3 * fy(2, u3 - 1) * fy(2, t3), o3 = 0)); t3 >= 8; )
          s3[p3++] = 255 & r3, r3 /= 256, t3 -= 8;
        for (o3 = o3 << t3 | r3, i3 += t3; i3 > 0; )
          s3[p3++] = 255 & o3, o3 /= 256, i3 -= 8;
        return s3[--p3] |= 128 * d3, s3;
      }, Ey = function(e3, t3) {
        var n3, o3 = e3.length, r3 = 8 * o3 - t3 - 1, a3 = (1 << r3) - 1, s3 = a3 >> 1, i3 = r3 - 7, c3 = o3 - 1, u3 = e3[c3--], l3 = 127 & u3;
        for (u3 >>= 7; i3 > 0; )
          l3 = 256 * l3 + e3[c3--], i3 -= 8;
        for (n3 = l3 & (1 << -i3) - 1, l3 >>= -i3, i3 += t3; i3 > 0; )
          n3 = 256 * n3 + e3[c3--], i3 -= 8;
        if (0 === l3)
          l3 = 1 - s3;
        else {
          if (l3 === a3)
            return n3 ? NaN : u3 ? -Infinity : Infinity;
          n3 += fy(2, t3), l3 -= s3;
        }
        return (u3 ? -1 : 1) * n3 * fy(2, l3 - t3);
      }, Ty = function(e3) {
        for (var t3 = Ae2(this), n3 = bt2(t3), o3 = arguments.length, r3 = kt2(o3 > 1 ? arguments[1] : void 0, n3), a3 = o3 > 2 ? arguments[2] : void 0, s3 = void 0 === a3 ? n3 : kt2(a3, n3); s3 > r3; )
          t3[r3++] = e3;
        return t3;
      }, Sy = Ht2.f, Cy = nt2.f, Ay = Ct2.PROPER, Dy = Ct2.CONFIGURABLE, Ny = It2.get, Oy = It2.set, Ry = R2.ArrayBuffer, Ly = Ry, ky = Ly && Ly.prototype, Py = R2.DataView, Gy = Py && Py.prototype, by = Object.prototype, wy = R2.Array, Uy = R2.RangeError, Fy = B2(Ty), qy = B2([].reverse), Vy = Iy, xy = Ey, Ky = function(e3) {
        return [255 & e3];
      }, Hy = function(e3) {
        return [255 & e3, e3 >> 8 & 255];
      }, By = function(e3) {
        return [255 & e3, e3 >> 8 & 255, e3 >> 16 & 255, e3 >> 24 & 255];
      }, jy = function(e3) {
        return e3[3] << 24 | e3[2] << 16 | e3[1] << 8 | e3[0];
      }, Wy = function(e3) {
        return Vy(e3, 23, 4);
      }, Yy = function(e3) {
        return Vy(e3, 52, 8);
      }, $y = function(e3, t3) {
        Cy(e3.prototype, t3, { get: function() {
          return Ny(this)[t3];
        } });
      }, zy = function(e3, t3, n3, o3) {
        var r3 = gy(n3), a3 = Ny(e3);
        if (r3 + t3 > a3.byteLength)
          throw Uy("Wrong index");
        var s3 = Ny(a3.buffer).bytes, i3 = r3 + a3.byteOffset, c3 = ci(s3, i3, i3 + t3);
        return o3 ? c3 : qy(c3);
      }, Jy = function(e3, t3, n3, o3, r3, a3) {
        var s3 = gy(n3), i3 = Ny(e3);
        if (s3 + t3 > i3.byteLength)
          throw Uy("Wrong index");
        for (var c3 = Ny(i3.buffer).bytes, u3 = s3 + i3.byteOffset, l3 = o3(+r3), d3 = 0; d3 < t3; d3++)
          c3[u3 + d3] = l3[a3 ? d3 : t3 - d3 - 1];
      };
      if (dy) {
        var Xy = Ay && "ArrayBuffer" !== Ry.name;
        if (L2(function() {
          Ry(1);
        }) && L2(function() {
          new Ry(-1);
        }) && !L2(function() {
          return new Ry(), new Ry(1.5), new Ry(NaN), Xy && !Dy;
        }))
          Xy && Dy && ot2(Ry, "name", "ArrayBuffer");
        else {
          (Ly = function(e3) {
            return ki(this, ky), new Ry(gy(e3));
          }).prototype = ky;
          for (var Qy, Zy = Sy(Ry), eI = 0; Zy.length > eI; )
            (Qy = Zy[eI++]) in Ly || ot2(Ly, Qy, Ry[Qy]);
          ky.constructor = Ly;
        }
        tr2 && Ho(Gy) !== by && tr2(Gy, by);
        var tI = new Py(new Ly(2)), nI = B2(Gy.setInt8);
        tI.setInt8(0, 2147483648), tI.setInt8(1, 2147483649), !tI.getInt8(0) && tI.getInt8(1) || Ni(Gy, { setInt8: function(e3, t3) {
          nI(this, e3, t3 << 24 >> 24);
        }, setUint8: function(e3, t3) {
          nI(this, e3, t3 << 24 >> 24);
        } }, { unsafe: true });
      } else
        ky = (Ly = function(e3) {
          ki(this, ky);
          var t3 = gy(e3);
          Oy(this, { bytes: Fy(wy(t3), 0), byteLength: t3 }), k || (this.byteLength = t3);
        }).prototype, Gy = (Py = function(e3, t3, n3) {
          ki(this, Gy), ki(e3, ky);
          var o3 = Ny(e3).byteLength, r3 = Ot2(t3);
          if (r3 < 0 || r3 > o3)
            throw Uy("Wrong offset");
          if (r3 + (n3 = void 0 === n3 ? o3 - r3 : Gt2(n3)) > o3)
            throw Uy("Wrong length");
          Oy(this, { buffer: e3, byteLength: n3, byteOffset: r3 }), k || (this.buffer = e3, this.byteLength = n3, this.byteOffset = r3);
        }).prototype, k && ($y(Ly, "byteLength"), $y(Py, "buffer"), $y(Py, "byteLength"), $y(Py, "byteOffset")), Ni(Gy, { getInt8: function(e3) {
          return zy(this, 1, e3)[0] << 24 >> 24;
        }, getUint8: function(e3) {
          return zy(this, 1, e3)[0];
        }, getInt16: function(e3) {
          var t3 = zy(this, 2, e3, arguments.length > 1 ? arguments[1] : void 0);
          return (t3[1] << 8 | t3[0]) << 16 >> 16;
        }, getUint16: function(e3) {
          var t3 = zy(this, 2, e3, arguments.length > 1 ? arguments[1] : void 0);
          return t3[1] << 8 | t3[0];
        }, getInt32: function(e3) {
          return jy(zy(this, 4, e3, arguments.length > 1 ? arguments[1] : void 0));
        }, getUint32: function(e3) {
          return jy(zy(this, 4, e3, arguments.length > 1 ? arguments[1] : void 0)) >>> 0;
        }, getFloat32: function(e3) {
          return xy(zy(this, 4, e3, arguments.length > 1 ? arguments[1] : void 0), 23);
        }, getFloat64: function(e3) {
          return xy(zy(this, 8, e3, arguments.length > 1 ? arguments[1] : void 0), 52);
        }, setInt8: function(e3, t3) {
          Jy(this, 1, e3, Ky, t3);
        }, setUint8: function(e3, t3) {
          Jy(this, 1, e3, Ky, t3);
        }, setInt16: function(e3, t3) {
          Jy(this, 2, e3, Hy, t3, arguments.length > 2 ? arguments[2] : void 0);
        }, setUint16: function(e3, t3) {
          Jy(this, 2, e3, Hy, t3, arguments.length > 2 ? arguments[2] : void 0);
        }, setInt32: function(e3, t3) {
          Jy(this, 4, e3, By, t3, arguments.length > 2 ? arguments[2] : void 0);
        }, setUint32: function(e3, t3) {
          Jy(this, 4, e3, By, t3, arguments.length > 2 ? arguments[2] : void 0);
        }, setFloat32: function(e3, t3) {
          Jy(this, 4, e3, Wy, t3, arguments.length > 2 ? arguments[2] : void 0);
        }, setFloat64: function(e3, t3) {
          Jy(this, 8, e3, Yy, t3, arguments.length > 2 ? arguments[2] : void 0);
        } });
      zo(Ly, "ArrayBuffer"), zo(Py, "DataView");
      var oI = { ArrayBuffer: Ly, DataView: Py }, rI = oI.ArrayBuffer, aI = oI.DataView, sI = aI.prototype, iI = B2(rI.prototype.slice), cI = B2(sI.getUint8), uI = B2(sI.setUint8), lI = L2(function() {
        return !new rI(2).slice(1, void 0).byteLength;
      });
      nn2({ target: "ArrayBuffer", proto: true, unsafe: true, forced: lI }, { slice: function(e3, t3) {
        if (iI && void 0 === t3)
          return iI(Xe2(this), e3);
        for (var n3 = Xe2(this).byteLength, o3 = kt2(e3, n3), r3 = kt2(void 0 === t3 ? n3 : t3, n3), a3 = new (Vi(this, rI))(Gt2(r3 - o3)), s3 = new aI(this), i3 = new aI(a3), c3 = 0; o3 < r3; )
          uI(i3, c3++, cI(s3, o3++));
        return a3;
      } });
      var dI, pI, gI, hI = nt2.f, _I = R2.Int8Array, fI = _I && _I.prototype, mI = R2.Uint8ClampedArray, vI = mI && mI.prototype, MI = _I && Ho(_I), yI = fI && Ho(fI), II = Object.prototype, EI = R2.TypeError, TI = Ue2("toStringTag"), SI = ke2("TYPED_ARRAY_TAG"), CI = ke2("TYPED_ARRAY_CONSTRUCTOR"), AI = dy && !!tr2 && "Opera" !== un(R2.opera), DI = false, NI = { Int8Array: 1, Uint8Array: 1, Uint8ClampedArray: 1, Int16Array: 2, Uint16Array: 2, Int32Array: 4, Uint32Array: 4, Float32Array: 4, Float64Array: 8 }, OI = { BigInt64Array: 8, BigUint64Array: 8 }, RI = function(e3) {
        if (!te2(e3))
          return false;
        var t3 = un(e3);
        return Ne2(NI, t3) || Ne2(OI, t3);
      };
      for (dI in NI)
        (gI = (pI = R2[dI]) && pI.prototype) ? ot2(gI, CI, pI) : AI = false;
      for (dI in OI)
        (gI = (pI = R2[dI]) && pI.prototype) && ot2(gI, CI, pI);
      if ((!AI || !ee2(MI) || MI === Function.prototype) && (MI = function() {
        throw EI("Incorrect invocation");
      }, AI))
        for (dI in NI)
          R2[dI] && tr2(R2[dI], MI);
      if ((!AI || !yI || yI === II) && (yI = MI.prototype, AI))
        for (dI in NI)
          R2[dI] && tr2(R2[dI].prototype, yI);
      if (AI && Ho(vI) !== yI && tr2(vI, yI), k && !Ne2(yI, TI))
        for (dI in DI = true, hI(yI, TI, { get: function() {
          return te2(this) ? this[SI] : void 0;
        } }), NI)
          R2[dI] && ot2(R2[dI], SI, dI);
      var LI = { NATIVE_ARRAY_BUFFER_VIEWS: AI, TYPED_ARRAY_CONSTRUCTOR: CI, TYPED_ARRAY_TAG: DI && SI, aTypedArray: function(e3) {
        if (RI(e3))
          return e3;
        throw EI("Target is not a typed array");
      }, aTypedArrayConstructor: function(e3) {
        if (ee2(e3) && (!tr2 || re2(MI, e3)))
          return e3;
        throw EI(fe2(e3) + " is not a typed array constructor");
      }, exportTypedArrayMethod: function(e3, t3, n3, o3) {
        if (k) {
          if (n3)
            for (var r3 in NI) {
              var a3 = R2[r3];
              if (a3 && Ne2(a3.prototype, e3))
                try {
                  delete a3.prototype[e3];
                } catch (rS) {
                  try {
                    a3.prototype[e3] = t3;
                  } catch (s3) {
                  }
                }
            }
          yI[e3] && !n3 || At2(yI, e3, n3 ? t3 : AI && fI[e3] || t3, o3);
        }
      }, exportTypedArrayStaticMethod: function(e3, t3, n3) {
        var o3, r3;
        if (k) {
          if (tr2) {
            if (n3) {
              for (o3 in NI)
                if ((r3 = R2[o3]) && Ne2(r3, e3))
                  try {
                    delete r3[e3];
                  } catch (rS) {
                  }
            }
            if (MI[e3] && !n3)
              return;
            try {
              return At2(MI, e3, n3 ? t3 : AI && MI[e3] || t3);
            } catch (rS) {
            }
          }
          for (o3 in NI)
            !(r3 = R2[o3]) || r3[e3] && !n3 || At2(r3, e3, t3);
        }
      }, isView: function(e3) {
        if (!te2(e3))
          return false;
        var t3 = un(e3);
        return "DataView" === t3 || Ne2(NI, t3) || Ne2(OI, t3);
      }, isTypedArray: RI, TypedArray: MI, TypedArrayPrototype: yI }, kI = LI.NATIVE_ARRAY_BUFFER_VIEWS, PI = R2.ArrayBuffer, GI = R2.Int8Array, bI = !kI || !L2(function() {
        GI(1);
      }) || !L2(function() {
        new GI(-1);
      }) || !Oo(function(e3) {
        new GI(), new GI(null), new GI(1.5), new GI(e3);
      }, true) || L2(function() {
        return 1 !== new GI(new PI(2), 1, void 0).length;
      }), wI = Math.floor, UI = Number.isInteger || function(e3) {
        return !te2(e3) && isFinite(e3) && wI(e3) === e3;
      }, FI = R2.RangeError, qI = R2.RangeError, VI = function(e3, t3) {
        var n3 = function(e4) {
          var t4 = Ot2(e4);
          if (t4 < 0)
            throw FI("The argument can't be less than 0");
          return t4;
        }(e3);
        if (n3 % t3)
          throw qI("Wrong offset");
        return n3;
      }, xI = LI.aTypedArrayConstructor, KI = function(e3) {
        var t3, n3, o3, r3, a3, s3, i3 = Fi(this), c3 = Ae2(e3), u3 = arguments.length, l3 = u3 > 1 ? arguments[1] : void 0, d3 = void 0 !== l3, p3 = yo(c3);
        if (p3 && !mo(p3))
          for (s3 = (a3 = Eo(c3, p3)).next, c3 = []; !(r3 = b2(s3, a3)).done; )
            c3.push(r3.value);
        for (d3 && u3 > 2 && (l3 = Un(l3, arguments[2])), n3 = bt2(c3), o3 = new (xI(i3))(n3), t3 = 0; n3 > t3; t3++)
          o3[t3] = d3 ? l3(c3[t3], t3) : c3[t3];
        return o3;
      };
      A2(function(e3) {
        var t3 = Ht2.f, n3 = Zn2.forEach, o3 = It2.get, r3 = It2.set, a3 = nt2.f, s3 = Ye2.f, i3 = Math.round, c3 = R2.RangeError, u3 = oI.ArrayBuffer, l3 = u3.prototype, d3 = oI.DataView, p3 = LI.NATIVE_ARRAY_BUFFER_VIEWS, g3 = LI.TYPED_ARRAY_CONSTRUCTOR, h3 = LI.TYPED_ARRAY_TAG, _3 = LI.TypedArray, f3 = LI.TypedArrayPrototype, m3 = LI.aTypedArrayConstructor, v3 = LI.isTypedArray, M3 = function(e4, t4) {
          m3(e4);
          for (var n4 = 0, o4 = t4.length, r4 = new e4(o4); o4 > n4; )
            r4[n4] = t4[n4++];
          return r4;
        }, y3 = function(e4, t4) {
          a3(e4, t4, { get: function() {
            return o3(this)[t4];
          } });
        }, I3 = function(e4) {
          var t4;
          return re2(l3, e4) || "ArrayBuffer" == (t4 = un(e4)) || "SharedArrayBuffer" == t4;
        }, E3 = function(e4, t4) {
          return v3(e4) && !he2(t4) && t4 in e4 && UI(+t4) && t4 >= 0;
        }, T3 = function(e4, t4) {
          return t4 = xe2(t4), E3(e4, t4) ? q2(2, e4[t4]) : s3(e4, t4);
        }, S3 = function(e4, t4, n4) {
          return t4 = xe2(t4), !(E3(e4, t4) && te2(n4) && Ne2(n4, "value")) || Ne2(n4, "get") || Ne2(n4, "set") || n4.configurable || Ne2(n4, "writable") && !n4.writable || Ne2(n4, "enumerable") && !n4.enumerable ? a3(e4, t4, n4) : (e4[t4] = n4.value, e4);
        };
        k ? (p3 || (Ye2.f = T3, nt2.f = S3, y3(f3, "buffer"), y3(f3, "byteOffset"), y3(f3, "byteLength"), y3(f3, "length")), nn2({ target: "Object", stat: true, forced: !p3 }, { getOwnPropertyDescriptor: T3, defineProperty: S3 }), e3.exports = function(e4, s4, l4) {
          var m4 = e4.match(/\d+$/)[0] / 8, y4 = e4 + (l4 ? "Clamped" : "") + "Array", E4 = "get" + e4, T4 = "set" + e4, S4 = R2[y4], C3 = S4, A3 = C3 && C3.prototype, D3 = {}, N3 = function(e5, t4) {
            a3(e5, t4, { get: function() {
              return function(e6, t5) {
                var n4 = o3(e6);
                return n4.view[E4](t5 * m4 + n4.byteOffset, true);
              }(this, t4);
            }, set: function(e6) {
              return function(e7, t5, n4) {
                var r4 = o3(e7);
                l4 && (n4 = (n4 = i3(n4)) < 0 ? 0 : n4 > 255 ? 255 : 255 & n4), r4.view[T4](t5 * m4 + r4.byteOffset, n4, true);
              }(this, t4, e6);
            }, enumerable: true });
          };
          p3 ? bI && (C3 = s4(function(e5, t4, n4, o4) {
            return ki(e5, A3), Fr(te2(t4) ? I3(t4) ? void 0 !== o4 ? new S4(t4, VI(n4, m4), o4) : void 0 !== n4 ? new S4(t4, VI(n4, m4)) : new S4(t4) : v3(t4) ? M3(C3, t4) : b2(KI, C3, t4) : new S4(gy(t4)), e5, C3);
          }), tr2 && tr2(C3, _3), n3(t3(S4), function(e5) {
            e5 in C3 || ot2(C3, e5, S4[e5]);
          }), C3.prototype = A3) : (C3 = s4(function(e5, t4, n4, o4) {
            ki(e5, A3);
            var a4, s5, i4, l5 = 0, p4 = 0;
            if (te2(t4)) {
              if (!I3(t4))
                return v3(t4) ? M3(C3, t4) : b2(KI, C3, t4);
              a4 = t4, p4 = VI(n4, m4);
              var g4 = t4.byteLength;
              if (void 0 === o4) {
                if (g4 % m4)
                  throw c3("Wrong length");
                if ((s5 = g4 - p4) < 0)
                  throw c3("Wrong length");
              } else if ((s5 = Gt2(o4) * m4) + p4 > g4)
                throw c3("Wrong length");
              i4 = s5 / m4;
            } else
              i4 = gy(t4), a4 = new u3(s5 = i4 * m4);
            for (r3(e5, { buffer: a4, byteOffset: p4, byteLength: s5, length: i4, view: new d3(a4) }); l5 < i4; )
              N3(e5, l5++);
          }), tr2 && tr2(C3, _3), A3 = C3.prototype = bn(f3)), A3.constructor !== C3 && ot2(A3, "constructor", C3), ot2(A3, g3, C3), h3 && ot2(A3, h3, y4), D3[y4] = C3, nn2({ global: true, forced: C3 != S4, sham: !p3 }, D3), "BYTES_PER_ELEMENT" in C3 || ot2(C3, "BYTES_PER_ELEMENT", m4), "BYTES_PER_ELEMENT" in A3 || ot2(A3, "BYTES_PER_ELEMENT", m4), Ri(y4);
        }) : e3.exports = function() {
        };
      })("Uint8", function(e3) {
        return function(t3, n3, o3) {
          return e3(this, t3, n3, o3);
        };
      });
      var HI = Math.min, BI = B2([].copyWithin || function(e3, t3) {
        var n3 = Ae2(this), o3 = bt2(n3), r3 = kt2(e3, o3), a3 = kt2(t3, o3), s3 = arguments.length > 2 ? arguments[2] : void 0, i3 = HI((void 0 === s3 ? o3 : kt2(s3, o3)) - a3, o3 - r3), c3 = 1;
        for (a3 < r3 && r3 < a3 + i3 && (c3 = -1, a3 += i3 - 1, r3 += i3 - 1); i3-- > 0; )
          a3 in n3 ? n3[r3] = n3[a3] : delete n3[r3], r3 += c3, a3 += c3;
        return n3;
      }), jI = LI.aTypedArray;
      (0, LI.exportTypedArrayMethod)("copyWithin", function(e3, t3) {
        return BI(jI(this), e3, t3, arguments.length > 2 ? arguments[2] : void 0);
      });
      var WI = Zn2.every, YI = LI.aTypedArray;
      (0, LI.exportTypedArrayMethod)("every", function(e3) {
        return WI(YI(this), e3, arguments.length > 1 ? arguments[1] : void 0);
      });
      var $I = LI.aTypedArray;
      (0, LI.exportTypedArrayMethod)("fill", function(e3) {
        var t3 = arguments.length;
        return b2(Ty, $I(this), e3, t3 > 1 ? arguments[1] : void 0, t3 > 2 ? arguments[2] : void 0);
      });
      var zI = LI.TYPED_ARRAY_CONSTRUCTOR, JI = LI.aTypedArrayConstructor, XI = function(e3) {
        return JI(Vi(e3, e3[zI]));
      }, QI = function(e3, t3) {
        return function(e4, t4) {
          for (var n3 = 0, o3 = bt2(t4), r3 = new e4(o3); o3 > n3; )
            r3[n3] = t4[n3++];
          return r3;
        }(XI(e3), t3);
      }, ZI = Zn2.filter, eE = LI.aTypedArray;
      (0, LI.exportTypedArrayMethod)("filter", function(e3) {
        var t3 = ZI(eE(this), e3, arguments.length > 1 ? arguments[1] : void 0);
        return QI(this, t3);
      });
      var tE = Zn2.find, nE = LI.aTypedArray;
      (0, LI.exportTypedArrayMethod)("find", function(e3) {
        return tE(nE(this), e3, arguments.length > 1 ? arguments[1] : void 0);
      });
      var oE = Zn2.findIndex, rE = LI.aTypedArray;
      (0, LI.exportTypedArrayMethod)("findIndex", function(e3) {
        return oE(rE(this), e3, arguments.length > 1 ? arguments[1] : void 0);
      });
      var aE = Zn2.forEach, sE = LI.aTypedArray;
      (0, LI.exportTypedArrayMethod)("forEach", function(e3) {
        aE(sE(this), e3, arguments.length > 1 ? arguments[1] : void 0);
      });
      var iE = Ut2.includes, cE = LI.aTypedArray;
      (0, LI.exportTypedArrayMethod)("includes", function(e3) {
        return iE(cE(this), e3, arguments.length > 1 ? arguments[1] : void 0);
      });
      var uE = Ut2.indexOf, lE = LI.aTypedArray;
      (0, LI.exportTypedArrayMethod)("indexOf", function(e3) {
        return uE(lE(this), e3, arguments.length > 1 ? arguments[1] : void 0);
      });
      var dE = Ue2("iterator"), pE = R2.Uint8Array, gE = B2(Ks2.values), hE = B2(Ks2.keys), _E = B2(Ks2.entries), fE = LI.aTypedArray, mE = LI.exportTypedArrayMethod, vE = pE && pE.prototype, ME = !L2(function() {
        vE[dE].call([1]);
      }), yE = !!vE && vE.values && vE[dE] === vE.values && "values" === vE.values.name, IE = function() {
        return gE(fE(this));
      };
      mE("entries", function() {
        return _E(fE(this));
      }, ME), mE("keys", function() {
        return hE(fE(this));
      }, ME), mE("values", IE, ME || !yE, { name: "values" }), mE(dE, IE, ME || !yE, { name: "values" });
      var EE = LI.aTypedArray, TE = LI.exportTypedArrayMethod, SE = B2([].join);
      TE("join", function(e3) {
        return SE(EE(this), e3);
      });
      var CE = LI.aTypedArray;
      (0, LI.exportTypedArrayMethod)("lastIndexOf", function(e3) {
        var t3 = arguments.length;
        return Es2(dv, CE(this), t3 > 1 ? [e3, arguments[1]] : [e3]);
      });
      var AE = Zn2.map, DE = LI.aTypedArray;
      (0, LI.exportTypedArrayMethod)("map", function(e3) {
        return AE(DE(this), e3, arguments.length > 1 ? arguments[1] : void 0, function(e4, t3) {
          return new (XI(e4))(t3);
        });
      });
      var NE = R2.TypeError, OE = function(e3) {
        return function(t3, n3, o3, r3) {
          ve2(n3);
          var a3 = Ae2(t3), s3 = J2(a3), i3 = bt2(a3), c3 = e3 ? i3 - 1 : 0, u3 = e3 ? -1 : 1;
          if (o3 < 2)
            for (; ; ) {
              if (c3 in s3) {
                r3 = s3[c3], c3 += u3;
                break;
              }
              if (c3 += u3, e3 ? c3 < 0 : i3 <= c3)
                throw NE("Reduce of empty array with no initial value");
            }
          for (; e3 ? c3 >= 0 : i3 > c3; c3 += u3)
            c3 in s3 && (r3 = n3(r3, s3[c3], c3, a3));
          return r3;
        };
      }, RE = { left: OE(false), right: OE(true) }, LE = RE.left, kE = LI.aTypedArray;
      (0, LI.exportTypedArrayMethod)("reduce", function(e3) {
        var t3 = arguments.length;
        return LE(kE(this), e3, t3, t3 > 1 ? arguments[1] : void 0);
      });
      var PE = RE.right, GE = LI.aTypedArray;
      (0, LI.exportTypedArrayMethod)("reduceRight", function(e3) {
        var t3 = arguments.length;
        return PE(GE(this), e3, t3, t3 > 1 ? arguments[1] : void 0);
      });
      var bE = LI.aTypedArray, wE = LI.exportTypedArrayMethod, UE = Math.floor;
      wE("reverse", function() {
        for (var e3, t3 = bE(this).length, n3 = UE(t3 / 2), o3 = 0; o3 < n3; )
          e3 = this[o3], this[o3++] = this[--t3], this[t3] = e3;
        return this;
      });
      var FE = R2.RangeError, qE = R2.Int8Array, VE = qE && qE.prototype, xE = VE && VE.set, KE = LI.aTypedArray, HE = LI.exportTypedArrayMethod, BE = !L2(function() {
        var e3 = new Uint8ClampedArray(2);
        return b2(xE, e3, { length: 1, 0: 3 }, 1), 3 !== e3[1];
      }), jE = BE && LI.NATIVE_ARRAY_BUFFER_VIEWS && L2(function() {
        var e3 = new qE(2);
        return e3.set(1), e3.set("2", 1), 0 !== e3[0] || 2 !== e3[1];
      });
      HE("set", function(e3) {
        KE(this);
        var t3 = VI(arguments.length > 1 ? arguments[1] : void 0, 1), n3 = Ae2(e3);
        if (BE)
          return b2(xE, this, n3, t3);
        var o3 = this.length, r3 = bt2(n3), a3 = 0;
        if (r3 + t3 > o3)
          throw FE("Wrong length");
        for (; a3 < r3; )
          this[t3 + a3] = n3[a3++];
      }, !BE || jE);
      var WE = LI.aTypedArray;
      (0, LI.exportTypedArrayMethod)("slice", function(e3, t3) {
        for (var n3 = hr(WE(this), e3, t3), o3 = XI(this), r3 = 0, a3 = n3.length, s3 = new o3(a3); a3 > r3; )
          s3[r3] = n3[r3++];
        return s3;
      }, L2(function() {
        new Int8Array(1).slice();
      }));
      var YE = Zn2.some, $E = LI.aTypedArray;
      (0, LI.exportTypedArrayMethod)("some", function(e3) {
        return YE($E(this), e3, arguments.length > 1 ? arguments[1] : void 0);
      });
      var zE = R2.Array, JE = LI.aTypedArray, XE = LI.exportTypedArrayMethod, QE = R2.Uint16Array, ZE = QE && B2(QE.prototype.sort), eT = !(!ZE || L2(function() {
        ZE(new QE(2), null);
      }) && L2(function() {
        ZE(new QE(2), {});
      })), tT = !!ZE && !L2(function() {
        if (le2)
          return le2 < 74;
        if (Pv)
          return Pv < 67;
        if (Gv)
          return true;
        if (wv)
          return wv < 602;
        var e3, t3, n3 = new QE(516), o3 = zE(516);
        for (e3 = 0; e3 < 516; e3++)
          t3 = e3 % 4, n3[e3] = 515 - e3, o3[e3] = e3 - 2 * t3 + 3;
        for (ZE(n3, function(e4, t4) {
          return (e4 / 4 | 0) - (t4 / 4 | 0);
        }), e3 = 0; e3 < 516; e3++)
          if (n3[e3] !== o3[e3])
            return true;
      });
      XE("sort", function(e3) {
        return void 0 !== e3 && ve2(e3), tT ? ZE(this, e3) : z_(JE(this), /* @__PURE__ */ function(e4) {
          return function(t3, n3) {
            return void 0 !== e4 ? +e4(t3, n3) || 0 : n3 != n3 ? -1 : t3 != t3 ? 1 : 0 === t3 && 0 === n3 ? 1 / t3 > 0 && 1 / n3 < 0 ? 1 : -1 : t3 > n3;
          };
        }(e3));
      }, !tT || eT);
      var nT = LI.aTypedArray;
      (0, LI.exportTypedArrayMethod)("subarray", function(e3, t3) {
        var n3 = nT(this), o3 = n3.length, r3 = kt2(e3, o3);
        return new (XI(n3))(n3.buffer, n3.byteOffset + r3 * n3.BYTES_PER_ELEMENT, Gt2((void 0 === t3 ? o3 : kt2(t3, o3)) - r3));
      });
      var oT = R2.Int8Array, rT = LI.aTypedArray, aT = LI.exportTypedArrayMethod, sT = [].toLocaleString, iT = !!oT && L2(function() {
        sT.call(new oT(1));
      });
      aT("toLocaleString", function() {
        return Es2(sT, iT ? hr(rT(this)) : rT(this), hr(arguments));
      }, L2(function() {
        return [1, 2].toLocaleString() != new oT([1, 2]).toLocaleString();
      }) || !L2(function() {
        oT.prototype.toLocaleString.call([1, 2]);
      }));
      var cT = LI.exportTypedArrayMethod, uT = R2.Uint8Array, lT = uT && uT.prototype || {}, dT = [].toString, pT = B2([].join);
      L2(function() {
        dT.call({});
      }) && (dT = function() {
        return pT(this);
      });
      var gT = lT.toString != dT;
      cT("toString", dT, gT);
      var hT = R2.RangeError, _T = String.fromCharCode, fT = String.fromCodePoint, mT = B2([].join), vT = !!fT && 1 != fT.length;
      nn2({ target: "String", stat: true, forced: vT }, { fromCodePoint: function(e3) {
        for (var t3, n3 = [], o3 = arguments.length, r3 = 0; o3 > r3; ) {
          if (t3 = +arguments[r3++], kt2(t3, 1114111) !== t3)
            throw hT(t3 + " is not a valid code point");
          n3[r3] = t3 < 65536 ? _T(t3) : _T(55296 + ((t3 -= 65536) >> 10), t3 % 1024 + 56320);
        }
        return mT(n3, "");
      } });
      var MT = String.fromCharCode, yT = function(e3) {
        var t3 = 0 | e3.charCodeAt(0);
        if (55296 <= t3)
          if (t3 < 56320) {
            var n3 = 0 | e3.charCodeAt(1);
            if (56320 <= n3 && n3 <= 57343) {
              if ((t3 = (t3 << 10) + n3 - 56613888 | 0) > 65535)
                return MT(240 | t3 >>> 18, 128 | t3 >>> 12 & 63, 128 | t3 >>> 6 & 63, 128 | 63 & t3);
            } else
              t3 = 65533;
          } else
            t3 <= 57343 && (t3 = 65533);
        return t3 <= 2047 ? MT(192 | t3 >>> 6, 128 | 63 & t3) : MT(224 | t3 >>> 12, 128 | t3 >>> 6 & 63, 128 | 63 & t3);
      }, IT = function(e3) {
        for (var t3 = void 0 === e3 ? "" : ("" + e3).replace(/[\x80-\uD7ff\uDC00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]?/g, yT), n3 = 0 | t3.length, o3 = new Uint8Array(n3), r3 = 0; r3 < n3; r3 = r3 + 1 | 0)
          o3[r3] = 0 | t3.charCodeAt(r3);
        return o3;
      }, ET = function(e3) {
        for (var t3 = new Uint8Array(e3), n3 = "", o3 = 0, r3 = t3.length; o3 < r3; ) {
          var a3 = t3[o3], s3 = 0, i3 = 0;
          if (a3 <= 127 ? (s3 = 0, i3 = 255 & a3) : a3 <= 223 ? (s3 = 1, i3 = 31 & a3) : a3 <= 239 ? (s3 = 2, i3 = 15 & a3) : a3 <= 244 && (s3 = 3, i3 = 7 & a3), r3 - o3 - s3 > 0)
            for (var c3 = 0; c3 < s3; )
              i3 = i3 << 6 | 63 & (a3 = t3[o3 + c3 + 1]), c3 += 1;
          else
            i3 = 65533, s3 = r3 - o3;
          n3 += String.fromCodePoint(i3), o3 += s3 + 1;
        }
        return n3;
      }, TT = function() {
        function e3(t3) {
          o2(this, e3), this._handler = t3;
          var n3 = t3.getURL();
          if (this._socket = null, this._workerSocket = null, this._id = ld(), this._handler.getIsWorkerEnabled()) {
            var r3 = URL.createObjectURL(new Blob([';let _socket = null;onmessage = function(event) {  if (event.data.cmd === "start") {    const url = event.data.url;    _socket = new WebSocket(url);    _socket.binaryType = "arraybuffer";    _socket.onopen = function() {      postMessage({ callback: "onOpen" });    };    _socket.onclose = function(e) {      postMessage({ callback: "onOpen", e: { code: e.code, reason: e.reason } });    };    _socket.onmessage = function(e) {      postMessage({ callback: "onMessage", data: e.data });    };    _socket.onerror = function(e) {      postMessage({ callback: "onError", e: { isTrusted: "true" } });    };  } else if (event.data.cmd === "sendMessage") {    if (_socket !== null) {      _socket.send(event.data.data);    }  } else if (event.data.cmd === "stop") {    if (_socket !== null) {      _socket.close(event.data.code);      _socket = null;    }  }};'], { type: "application/javascript; charset=utf-8" }));
            this._workerSocket = new Worker(r3);
            var a3 = this;
            this._workerSocket.onmessage = function(e4) {
              var t4 = e4.data, n4 = t4.callback, o3 = t4.e;
              "onOpen" === n4 ? a3._onOpen() : "onClose" === n4 ? a3._onClose(o3) : "onError" === n4 ? a3._onError(o3) : "onMessage" === n4 && a3._onMessage(e4.data);
            }, this._workerSocket.postMessage({ cmd: "start", id: this._id, url: n3 });
          } else
            Bu ? xu ? (Wu.connectSocket({ url: n3, header: { "content-type": "application/json" } }), Wu.onSocketClose(this._onClose.bind(this)), Wu.onSocketOpen(this._onOpen.bind(this)), Wu.onSocketMessage(this._onMessage.bind(this)), Wu.onSocketError(this._onError.bind(this))) : (this._socket = Wu.connectSocket({ url: n3, header: { "content-type": "application/json" }, complete: function() {
            } }), this._socket.onClose(this._onClose.bind(this)), this._socket.onOpen(this._onOpen.bind(this)), this._socket.onMessage(this._onMessage.bind(this)), this._socket.onError(this._onError.bind(this))) : ju && (this._socket = new WebSocket(n3), this._socket.binaryType = "arraybuffer", this._socket.onopen = this._onOpen.bind(this), this._socket.onmessage = this._onMessage.bind(this), this._socket.onclose = this._onClose.bind(this), this._socket.onerror = this._onError.bind(this));
          this._canIUseBinaryFrame = t3.canIUseBinaryFrame();
        }
        return a2(e3, [{ key: "getID", value: function() {
          return this._id;
        } }, { key: "_onOpen", value: function() {
          this._handler.onOpen({ id: this._id });
        } }, { key: "_onClose", value: function(e4) {
          this._handler.onClose({ id: this._id, e: e4 });
        } }, { key: "_onMessage", value: function(e4) {
          this._handler.onMessage({ data: this._canIUseBinaryFrame ? ET(e4.data) : e4.data });
        } }, { key: "_onError", value: function(e4) {
          this._handler.onError({ id: this._id, e: e4 });
        } }, { key: "setIsWorkerEnabled", value: function(e4) {
          this._isWorkerEnabled = true;
        } }, { key: "close", value: function(e4) {
          if (this._workerSocket && (this._workerSocket.postMessage({ cmd: "stop", code: e4 }), this._workerSocket.terminate(), this._workerSocket = null), xu)
            return Wu.offSocketClose(), Wu.offSocketMessage(), Wu.offSocketOpen(), Wu.offSocketError(), void Wu.closeSocket();
          this._socket && (Bu ? (this._socket.onClose(function() {
          }), this._socket.onOpen(function() {
          }), this._socket.onMessage(function() {
          }), this._socket.onError(function() {
          })) : ju && (this._socket.onopen = null, this._socket.onmessage = null, this._socket.onclose = null, this._socket.onerror = null), Vu ? this._socket.close({ code: e4 }) : this._socket.close(e4), this._socket = null);
        } }, { key: "send", value: function(e4) {
          if (this._workerSocket)
            this._workerSocket.postMessage({ cmd: "sendMessage", data: this._canIUseBinaryFrame ? IT(e4.data).buffer : e4.data });
          else {
            if (xu)
              return void Wu.sendSocketMessage({ data: e4.data, fail: function() {
                e4.fail && e4.requestID && e4.fail(e4.requestID);
              } });
            this._socket && (Bu ? this._socket.send({ data: this._canIUseBinaryFrame ? IT(e4.data).buffer : e4.data, fail: function() {
              e4.fail && e4.requestID && e4.fail(e4.requestID);
            } }) : ju && this._socket.send(this._canIUseBinaryFrame ? IT(e4.data).buffer : e4.data));
          }
        } }]), e3;
      }(), ST = 4e3, CT = 4001, AT = ["keyMap"], DT = ["keyMap"], NT = "connected", OT = "connecting", RT = "disconnected", LT = function() {
        function e3(t3) {
          o2(this, e3), this._channelModule = t3, this._className = "SocketHandler", this._promiseMap = /* @__PURE__ */ new Map(), this._readyState = RT, this._simpleRequestMap = /* @__PURE__ */ new Map(), this.MAX_SIZE = 100, this._startSequence = ld(), this._startTs = 0, this._reConnectFlag = false, this._nextPingTs = 0, this._reConnectCount = 0, this.MAX_RECONNECT_COUNT = 3, this._socketID = -1, this._random = 0, this._socket = null, this._url = "", this._onOpenTs = 0, this._canIUseBinaryFrame = true, this._isWorkerEnabled = true, this._setWebsocketHost(), this._initConnection();
        }
        return a2(e3, [{ key: "_setWebsocketHost", value: function() {
          var e4 = this._channelModule.getModule(ig), t3 = Nu;
          this._channelModule.isOversea() && (t3 = Ou), e4.isSingaporeSite() ? t3 = Ru : e4.isKoreaSite() ? t3 = Lu : e4.isGermanySite() ? t3 = ku : e4.isIndiaSite() && (t3 = Pu), Gu.HOST.setCurrent(t3);
        } }, { key: "_initConnection", value: function() {
          Zl(Gu.HOST.CURRENT.BACKUP) || "" === this._url ? this._url = Gu.HOST.CURRENT.DEFAULT : this._url === Gu.HOST.CURRENT.DEFAULT ? this._url = Gu.HOST.CURRENT.BACKUP : this._url === Gu.HOST.CURRENT.BACKUP && (this._url = Gu.HOST.CURRENT.DEFAULT);
          var e4 = this._channelModule.getModule(ig).getProxyServer();
          qd(e4) || (this._url = e4), this._connect(), this._nextPingTs = 0;
        } }, { key: "onCheckTimer", value: function(e4) {
          e4 % 1 == 0 && this._checkPromiseMap();
        } }, { key: "_checkPromiseMap", value: function() {
          var e4 = this;
          0 !== this._promiseMap.size && this._promiseMap.forEach(function(t3, n3) {
            var o3 = t3.reject, r3 = t3.timestamp, a3 = 15e3;
            -1 !== n3.indexOf(Sg) && (a3 = 9e4), Date.now() - r3 >= a3 && (wl.log("".concat(e4._className, "._checkPromiseMap request timeout, delete requestID:").concat(n3)), e4._promiseMap.delete(n3), o3(new Av({ code: Zh.NETWORK_TIMEOUT, message: e_.NETWORK_TIMEOUT })), e4._channelModule.onRequestTimeout(n3));
          });
        } }, { key: "onOpen", value: function(e4) {
          if ("" !== this._readyState) {
            this._onOpenTs = Date.now();
            var t3 = e4.id;
            this._socketID = t3;
            var n3 = Date.now() - this._startTs;
            wl.log("".concat(this._className, "._onOpen cost ").concat(n3, " ms. socketID:").concat(t3)), new __(f_.WS_ON_OPEN).setMessage(n3).setCostTime(n3).setMoreMessage("socketID:".concat(t3)).end(), e4.id === this._socketID && (this._readyState = NT, this._reConnectCount = 0, this._resend(), true === this._reConnectFlag && (this._channelModule.onReconnected(), this._reConnectFlag = false), this._channelModule.onOpen());
          }
        } }, { key: "onClose", value: function(e4) {
          var t3 = new __(f_.WS_ON_CLOSE), n3 = e4.id, o3 = e4.e, r3 = "sourceSocketID:".concat(n3, " currentSocketID:").concat(this._socketID, " code:").concat(o3.code, " reason:").concat(o3.reason), a3 = 0;
          0 !== this._onOpenTs && (a3 = Date.now() - this._onOpenTs), t3.setMessage(a3).setCostTime(a3).setMoreMessage(r3).setCode(o3.code).end(), wl.log("".concat(this._className, "._onClose ").concat(r3, " onlineTime:").concat(a3)), n3 === this._socketID && (this._readyState = RT, a3 < 1e3 ? this._channelModule.onReconnectFailed() : this._channelModule.onClose());
        } }, { key: "onError", value: function(e4) {
          var t3 = e4.id, n3 = e4.e, o3 = "sourceSocketID:".concat(t3, " currentSocketID:").concat(this._socketID);
          new __(f_.WS_ON_ERROR).setMessage(n3.errMsg || cd(n3)).setMoreMessage(o3).setLevel("error").end(), wl.warn("".concat(this._className, "._onError"), n3, o3), t3 === this._socketID && (this._readyState = "", this._channelModule.onError());
        } }, { key: "onMessage", value: function(e4) {
          var t3;
          try {
            t3 = JSON.parse(e4.data);
          } catch (rS) {
            new __(f_.JSON_PARSE_ERROR).setMessage(e4.data).end();
          }
          if (t3 && t3.head) {
            var n3 = this._getRequestIDFromHead(t3.head), o3 = kd(t3.head), r3 = ly(t3.body, this._getResponseKeyMap(o3));
            if (wl.debug("".concat(this._className, ".onMessage ret:").concat(JSON.stringify(r3), " requestID:").concat(n3, " has:").concat(this._promiseMap.has(n3))), this._setNextPingTs(), this._promiseMap.has(n3)) {
              var a3 = this._promiseMap.get(n3), s3 = a3.resolve, i3 = a3.reject, c3 = a3.timestamp;
              return this._promiseMap.delete(n3), this._calcRTT(c3), void (r3.errorCode && 0 !== r3.errorCode ? (this._channelModule.onErrorCodeNotZero(r3), i3(new Av({ code: r3.errorCode, message: r3.errorInfo || "", data: { elements: r3.elements, messageVersion: r3.messageVersion, cloudCustomData: r3.cloudCustomData } }))) : s3(yv(r3)));
            }
            this._channelModule.onMessage({ head: t3.head, body: r3 });
          }
        } }, { key: "_calcRTT", value: function(e4) {
          var t3 = Date.now() - e4;
          this._channelModule.getModule(Ig).addRTT(t3);
        } }, { key: "_connect", value: function() {
          this._startTs = Date.now(), this._onOpenTs = 0, this._socket = new TT(this), this._socketID = this._socket.getID(), this._readyState = OT, wl.log("".concat(this._className, "._connect isWorkerEnabled:").concat(this.getIsWorkerEnabled(), " socketID:").concat(this._socketID, " url:").concat(this.getURL())), new __(f_.WS_CONNECT).setMessage("socketID:".concat(this._socketID, " url:").concat(this.getURL())).end();
        } }, { key: "getURL", value: function() {
          var e4 = this._channelModule.getModule(ig);
          e4.isDevMode() && (this._canIUseBinaryFrame = false);
          var t3 = Od();
          (xu || Uu && "windows" === t3 || Ku) && (this._canIUseBinaryFrame = false);
          var n3 = -1;
          "ios" === t3 ? n3 = el || -1 : "android" === t3 && (n3 = nl || -1);
          var o3 = this._channelModule.getPlatform(), r3 = e4.getSDKAppID(), a3 = e4.getInstanceID();
          return this._canIUseBinaryFrame ? "".concat(this._url, "/binfo?sdkappid=").concat(r3, "&instanceid=").concat(a3, "&random=").concat(this._getRandom(), "&platform=").concat(o3, "&host=").concat(t3, "&version=").concat(n3) : "".concat(this._url, "/info?sdkappid=").concat(r3, "&instanceid=").concat(a3, "&random=").concat(this._getRandom(), "&platform=").concat(o3, "&host=").concat(t3, "&version=").concat(n3);
        } }, { key: "_closeConnection", value: function(e4) {
          wl.log("".concat(this._className, "._closeConnection socketID:").concat(this._socketID)), this._socket && (this._socket.close(e4), this._socketID = -1, this._socket = null, this._readyState = RT);
        } }, { key: "_resend", value: function() {
          var e4 = this;
          if (wl.log("".concat(this._className, "._resend reConnectFlag:").concat(this._reConnectFlag), "promiseMap.size:".concat(this._promiseMap.size, " simpleRequestMap.size:").concat(this._simpleRequestMap.size)), this._promiseMap.size > 0 && this._promiseMap.forEach(function(t4, n4) {
            var o4 = t4.uplinkData, r4 = t4.resolve, a4 = t4.reject;
            e4._promiseMap.set(n4, { resolve: r4, reject: a4, timestamp: Date.now(), uplinkData: o4 }), e4._execute(n4, o4);
          }), this._simpleRequestMap.size > 0) {
            var t3, n3 = S2(this._simpleRequestMap);
            try {
              for (n3.s(); !(t3 = n3.n()).done; ) {
                var o3 = m2(t3.value, 2), r3 = o3[0], a3 = o3[1];
                this._execute(r3, a3);
              }
            } catch (s3) {
              n3.e(s3);
            } finally {
              n3.f();
            }
            this._simpleRequestMap.clear();
          }
        } }, { key: "send", value: function(e4) {
          var t3 = this;
          e4.head.seq = this._getSequence(), e4.head.reqtime = Math.floor(Date.now() / 1e3);
          e4.keyMap;
          var n3 = g2(e4, AT), o3 = this._getRequestIDFromHead(e4.head), r3 = JSON.stringify(n3);
          return new Promise(function(e5, a3) {
            (t3._promiseMap.set(o3, { resolve: e5, reject: a3, timestamp: Date.now(), uplinkData: r3 }), wl.debug("".concat(t3._className, ".send uplinkData:").concat(JSON.stringify(n3), " requestID:").concat(o3, " readyState:").concat(t3._readyState)), t3._readyState !== NT) ? t3._reConnect() : (t3._execute(o3, r3), t3._channelModule.getModule(Ig).addRequestCount());
          });
        } }, { key: "simplySend", value: function(e4) {
          e4.head.seq = this._getSequence(), e4.head.reqtime = Math.floor(Date.now() / 1e3);
          e4.keyMap;
          var t3 = g2(e4, DT), n3 = this._getRequestIDFromHead(e4.head), o3 = JSON.stringify(t3);
          this._readyState !== NT ? (this._simpleRequestMap.size < this.MAX_SIZE ? this._simpleRequestMap.set(n3, o3) : wl.log("".concat(this._className, ".simplySend. simpleRequestMap is full, drop request!")), this._reConnect()) : this._execute(n3, o3);
        } }, { key: "_execute", value: function(e4, t3) {
          this._socket.send({ data: t3, fail: Bu ? this._onSendFail.bind(this) : void 0, requestID: e4 });
        } }, { key: "_onSendFail", value: function(e4) {
          wl.log("".concat(this._className, "._onSendFail requestID:").concat(e4));
        } }, { key: "_getSequence", value: function() {
          var e4;
          if (this._startSequence < 2415919103)
            return e4 = this._startSequence, this._startSequence += 1, 2415919103 === this._startSequence && (this._startSequence = ld()), e4;
        } }, { key: "_getRequestIDFromHead", value: function(e4) {
          return e4.servcmd + e4.seq;
        } }, { key: "_getResponseKeyMap", value: function(e4) {
          var n3 = this._channelModule.getKeyMap(e4);
          return t2(t2({}, ry.response), n3.response);
        } }, { key: "_reConnect", value: function() {
          this._readyState !== NT && this._readyState !== OT && this.forcedReconnect();
        } }, { key: "forcedReconnect", value: function() {
          var e4 = this;
          wl.log("".concat(this._className, ".forcedReconnect count:").concat(this._reConnectCount, " readyState:").concat(this._readyState)), this._reConnectFlag = true, this._resetRandom(), this._reConnectCount < this.MAX_RECONNECT_COUNT ? (this._reConnectCount += 1, this._closeConnection(CT), this._initConnection()) : (this._reConnectCount = 0, this._channelModule.probeNetwork().then(function(t3) {
            var n3 = m2(t3, 2), o3 = n3[0];
            n3[1];
            o3 ? (wl.warn("".concat(e4._className, ".forcedReconnect disconnected from wsserver but network is ok, continue...")), e4._closeConnection(CT), e4._initConnection()) : e4._channelModule.onReconnectFailed();
          }));
        } }, { key: "getReconnectFlag", value: function() {
          return this._reConnectFlag;
        } }, { key: "_setNextPingTs", value: function() {
          this._nextPingTs = Date.now() + 1e4;
        } }, { key: "getNextPingTs", value: function() {
          return this._nextPingTs;
        } }, { key: "isConnected", value: function() {
          return this._readyState === NT;
        } }, { key: "canIUseBinaryFrame", value: function() {
          return this._canIUseBinaryFrame;
        } }, { key: "setIsWorkerEnabled", value: function(e4) {
          wl.log("".concat(this._className, ".setIsWorkerEnabled flag:").concat(e4)), this._isWorkerEnabled = e4;
        } }, { key: "getIsWorkerEnabled", value: function() {
          return this._isWorkerEnabled && dl;
        } }, { key: "_getRandom", value: function() {
          return 0 === this._random && (this._random = Math.random()), this._random;
        } }, { key: "_resetRandom", value: function() {
          this._random = 0;
        } }, { key: "close", value: function() {
          wl.log("".concat(this._className, ".close")), this._closeConnection(ST), this._promiseMap.clear(), this._startSequence = ld(), this._readyState = RT, this._simpleRequestMap.clear(), this._reConnectFlag = false, this._reConnectCount = 0, this._onOpenTs = 0, this._url = "", this._random = 0, this._canIUseBinaryFrame = true, this._isWorkerEnabled = true;
        } }]), e3;
      }(), kT = function(e3) {
        i2(n3, e3);
        var t3 = f2(n3);
        function n3(e4) {
          var r3;
          if (o2(this, n3), (r3 = t3.call(this, e4))._className = "ChannelModule", r3._socketHandler = new LT(h2(r3)), r3._probing = false, r3._isAppShowing = true, r3._previousState = gr.NET_STATE_CONNECTED, Bu && "function" == typeof Wu.onAppShow && "function" == typeof Wu.onAppHide) {
            var a3 = r3._onAppHide.bind(h2(r3)), s3 = r3._onAppShow.bind(h2(r3));
            "function" == typeof Wu.offAppHide && Wu.offAppHide(a3), "function" == typeof Wu.offAppShow && Wu.offAppShow(s3), Wu.onAppHide(a3), Wu.onAppShow(s3);
          }
          return r3._timerForNotLoggedIn = -1, r3._timerForNotLoggedIn = setInterval(r3.onCheckTimer.bind(h2(r3)), 1e3), r3._fatalErrorFlag = false, r3;
        }
        return a2(n3, [{ key: "onCheckTimer", value: function(e4) {
          this._socketHandler && (this.isLoggedIn() ? (this._timerForNotLoggedIn > 0 && (clearInterval(this._timerForNotLoggedIn), this._timerForNotLoggedIn = -1), this._socketHandler.onCheckTimer(e4)) : this._socketHandler.onCheckTimer(1), this._checkNextPing());
        } }, { key: "onErrorCodeNotZero", value: function(e4) {
          this.getModule(_g).onErrorCodeNotZero(e4);
        } }, { key: "onMessage", value: function(e4) {
          this.getModule(_g).onMessage(e4);
        } }, { key: "send", value: function(e4) {
          return this._socketHandler ? this._previousState !== gr.NET_STATE_CONNECTED && e4.head.servcmd.includes(wh) ? (this.reConnect(), this._sendLogViaHTTP(e4)) : this._socketHandler.send(e4) : Promise.reject();
        } }, { key: "_sendLogViaHTTP", value: function(e4) {
          var t4 = Gu.HOST.CURRENT.STAT;
          return new Promise(function(n4, o3) {
            var r3 = "".concat(t4, "/v4/imopenstat/tim_web_report_v2?sdkappid=").concat(e4.head.sdkappid, "&reqtime=").concat(Date.now()), a3 = JSON.stringify(e4.body), s3 = "application/x-www-form-urlencoded;charset=UTF-8";
            if (Bu)
              Wu.request({ url: r3, data: a3, method: "POST", timeout: 3e3, header: { "content-type": s3 }, success: function() {
                n4();
              }, fail: function() {
                o3(new Av({ code: Zh.NETWORK_ERROR, message: e_.NETWORK_ERROR }));
              } });
            else {
              var i3 = new XMLHttpRequest(), c3 = setTimeout(function() {
                i3.abort(), o3(new Av({ code: Zh.NETWORK_TIMEOUT, message: e_.NETWORK_TIMEOUT }));
              }, 3e3);
              i3.onreadystatechange = function() {
                4 === i3.readyState && (clearTimeout(c3), 200 === i3.status || 304 === i3.status ? n4() : o3(new Av({ code: Zh.NETWORK_ERROR, message: e_.NETWORK_ERROR })));
              }, i3.open("POST", r3, true), i3.setRequestHeader("Content-type", s3), i3.send(a3);
            }
          });
        } }, { key: "simplySend", value: function(e4) {
          return this._socketHandler ? this._socketHandler.simplySend(e4) : Promise.reject();
        } }, { key: "onOpen", value: function() {
          this._ping();
        } }, { key: "onClose", value: function() {
          this._socketHandler && (this._socketHandler.getReconnectFlag() && this._emitNetStateChangeEvent(gr.NET_STATE_DISCONNECTED));
          this.reConnect();
        } }, { key: "onError", value: function() {
          Bu && !Ku && wl.error("".concat(this._className, ".onError 从v2.11.2起，SDK 支持了 WebSocket，如您未添加相关受信域名，请先添加！(如已添加请忽略)，升级指引: https://web.sdk.qcloud.com/im/doc/zh-cn/tutorial-02-upgradeguideline.html")), this._emitNetStateChangeEvent(gr.NET_STATE_DISCONNECTED);
        } }, { key: "getKeyMap", value: function(e4) {
          return this.getModule(_g).getKeyMap(e4);
        } }, { key: "_onAppHide", value: function() {
          this._isAppShowing = false;
        } }, { key: "_onAppShow", value: function() {
          this._isAppShowing = true;
        } }, { key: "onRequestTimeout", value: function(e4) {
        } }, { key: "onReconnected", value: function() {
          wl.log("".concat(this._className, ".onReconnected")), this.getModule(_g).onReconnected(), this._emitNetStateChangeEvent(gr.NET_STATE_CONNECTED);
        } }, { key: "onReconnectFailed", value: function() {
          wl.log("".concat(this._className, ".onReconnectFailed")), this._emitNetStateChangeEvent(gr.NET_STATE_DISCONNECTED);
        } }, { key: "setIsWorkerEnabled", value: function(e4) {
          this._socketHandler && this._socketHandler.setIsWorkerEnabled(false);
        } }, { key: "offline", value: function() {
          this._emitNetStateChangeEvent(gr.NET_STATE_DISCONNECTED);
        } }, { key: "reConnect", value: function() {
          var e4 = arguments.length > 0 && void 0 !== arguments[0] && arguments[0], t4 = false;
          this._socketHandler && (t4 = this._socketHandler.getReconnectFlag());
          var n4 = "forcedFlag:".concat(e4, " fatalErrorFlag:").concat(this._fatalErrorFlag, " previousState:").concat(this._previousState, " reconnectFlag:").concat(t4);
          if (wl.log("".concat(this._className, ".reConnect ").concat(n4)), !this._fatalErrorFlag && this._socketHandler) {
            if (true === e4)
              this._socketHandler.forcedReconnect();
            else {
              if (this._previousState === gr.NET_STATE_CONNECTING && t4)
                return;
              this._socketHandler.forcedReconnect();
            }
            this._emitNetStateChangeEvent(gr.NET_STATE_CONNECTING);
          }
        } }, { key: "_emitNetStateChangeEvent", value: function(e4) {
          this._previousState !== e4 && (wl.log("".concat(this._className, "._emitNetStateChangeEvent from ").concat(this._previousState, " to ").concat(e4)), this._previousState = e4, this.emitOuterEvent(pr.NET_STATE_CHANGE, { state: e4 }));
        } }, { key: "_ping", value: function() {
          var e4 = this;
          if (true !== this._probing) {
            this._probing = true;
            var t4 = this.getModule(_g).getProtocolData({ protocolName: Uh });
            this.send(t4).then(function() {
              e4._probing = false;
            }).catch(function(t5) {
              if (wl.warn("".concat(e4._className, "._ping failed. error:"), t5), e4._probing = false, t5 && 60002 === t5.code)
                return new __(f_.ERROR).setMessage("code:".concat(t5.code, " message:").concat(t5.message)).setNetworkType(e4.getModule(lg).getNetworkType()).end(), e4._fatalErrorFlag = true, void e4._emitNetStateChangeEvent(gr.NET_STATE_DISCONNECTED);
              e4.probeNetwork().then(function(t6) {
                var n4 = m2(t6, 2), o3 = n4[0], r3 = n4[1];
                wl.log("".concat(e4._className, "._ping failed. probe network, isAppShowing:").concat(e4._isAppShowing, " online:").concat(o3, " networkType:").concat(r3)), o3 ? e4.reConnect() : e4._emitNetStateChangeEvent(gr.NET_STATE_DISCONNECTED);
              });
            });
          }
        } }, { key: "_checkNextPing", value: function() {
          this._socketHandler && (this._socketHandler.isConnected() && Date.now() >= this._socketHandler.getNextPingTs() && this._ping());
        } }, { key: "dealloc", value: function() {
          this._socketHandler && (this._socketHandler.close(), this._socketHandler = null), this._timerForNotLoggedIn > -1 && clearInterval(this._timerForNotLoggedIn);
        } }, { key: "onRestApiKickedOut", value: function() {
          this._socketHandler && (this._socketHandler.close(), this.reConnect(true));
        } }, { key: "reset", value: function() {
          wl.log("".concat(this._className, ".reset")), this._previousState = gr.NET_STATE_CONNECTED, this._probing = false, this._fatalErrorFlag = false, this._timerForNotLoggedIn = setInterval(this.onCheckTimer.bind(this), 1e3);
        } }]), n3;
      }(Tg), PT = ["a2", "tinyid"], GT = ["a2", "tinyid"], bT = function() {
        function e3(t3) {
          o2(this, e3), this._className = "ProtocolHandler", this._sessionModule = t3, this._configMap = /* @__PURE__ */ new Map(), this._fillConfigMap();
        }
        return a2(e3, [{ key: "_fillConfigMap", value: function() {
          this._configMap.clear();
          var e4 = this._sessionModule.genCommonHead(), n3 = this._sessionModule.genCosSpecifiedHead(), o3 = this._sessionModule.genSSOReportHead();
          this._configMap.set(Sg, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.IM_OPEN_STATUS, ".").concat(Gu.CMD.LOGIN) }), body: { state: "Online" }, keyMap: { response: { InstId: "instanceID", HelloInterval: "helloInterval" } } };
          }(e4)), this._configMap.set(Cg, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.IM_OPEN_STATUS, ".").concat(Gu.CMD.LOGOUT) }), body: { type: 0 }, keyMap: { request: { type: "wslogout_type" } } };
          }(e4)), this._configMap.set(Ag, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.IM_OPEN_STATUS, ".").concat(Gu.CMD.HELLO) }), body: {}, keyMap: { response: { NewInstInfo: "newInstanceInfo" } } };
          }(e4)), this._configMap.set(Dg, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.STAT_SERVICE, ".").concat(Gu.CMD.KICK_OTHER) }), body: {} };
          }(e4)), this._configMap.set(Ph, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.IM_COS_SIGN, ".").concat(Gu.CMD.COS_SIGN) }), body: { cmd: "open_im_cos_svc", subCmd: "get_cos_token", duration: 300, version: 2 }, keyMap: { request: { userSig: "usersig", subCmd: "sub_cmd", cmd: "cmd", duration: "duration", version: "version" }, response: { expired_time: "expiredTime", bucket_name: "bucketName", session_token: "sessionToken", tmp_secret_id: "secretId", tmp_secret_key: "secretKey" } } };
          }(n3)), this._configMap.set(Gh, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.CUSTOM_UPLOAD, ".").concat(Gu.CMD.COS_PRE_SIG) }), body: { fileType: void 0, fileName: void 0, uploadMethod: 0, duration: 900 }, keyMap: { request: { userSig: "usersig", fileType: "file_type", fileName: "file_name", uploadMethod: "upload_method" }, response: { expired_time: "expiredTime", request_id: "requestId", head_url: "headUrl", upload_url: "uploadUrl", download_url: "downloadUrl", ci_url: "ciUrl", snapshot_url: "requestSnapshotUrl" } } };
          }(n3)), this._configMap.set(bh, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.CUSTOM_UPLOAD, ".").concat(Gu.CMD.VIDEO_COVER) }), body: { version: 1, platform: void 0, coverName: void 0, requestSnapshotUrl: void 0 }, keyMap: { request: { version: "version", platform: "platform", coverName: "cover_name", requestSnapshotUrl: "snapshot_url" }, response: { error_code: "errorCode", error_msg: "errorInfo", download_url: "snapshotUrl" } } };
          }(n3)), this._configMap.set(Wh, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.IM_CONFIG_MANAGER, ".").concat(Gu.CMD.FETCH_COMMERCIAL_CONFIG) }), body: { SDKAppID: 0 }, keyMap: { request: { SDKAppID: "uint32_sdkappid" }, response: { int32_error_code: "errorCode", str_error_message: "errorMessage", str_purchase_bits: "purchaseBits", uint32_expired_time: "expiredTime" } } };
          }(e4)), this._configMap.set(Yh, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.IM_CONFIG_MANAGER, ".").concat(Gu.CMD.PUSHED_COMMERCIAL_CONFIG) }), body: {}, keyMap: { response: { int32_error_code: "errorCode", str_error_message: "errorMessage", str_purchase_bits: "purchaseBits", uint32_expired_time: "expiredTime" } } };
          }(e4)), this._configMap.set(Bh, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.IM_CONFIG_MANAGER, ".").concat(Gu.CMD.FETCH_CLOUD_CONTROL_CONFIG) }), body: { SDKAppID: 0, version: 0 }, keyMap: { request: { SDKAppID: "uint32_sdkappid", version: "uint64_version" }, response: { int32_error_code: "errorCode", str_error_message: "errorMessage", str_json_config: "cloudControlConfig", uint32_expired_time: "expiredTime", uint32_sdkappid: "SDKAppID", uint64_version: "version" } } };
          }(e4)), this._configMap.set(jh, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.IM_CONFIG_MANAGER, ".").concat(Gu.CMD.PUSHED_CLOUD_CONTROL_CONFIG) }), body: {}, keyMap: { response: { int32_error_code: "errorCode", str_error_message: "errorMessage", str_json_config: "cloudControlConfig", uint32_expired_time: "expiredTime", uint32_sdkappid: "SDKAppID", uint64_version: "version" } } };
          }(e4)), this._configMap.set($h, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.OVERLOAD_PUSH, ".").concat(Gu.CMD.OVERLOAD_NOTIFY) }), body: {}, keyMap: { response: { OverLoadServCmd: "overloadCommand", DelaySecs: "waitingTime" } } };
          }(e4)), this._configMap.set(Ng, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.OPEN_IM, ".").concat(Gu.CMD.GET_MESSAGES) }), body: { cookie: "", syncFlag: 0, needAbstract: 1, isOnlineSync: 0 }, keyMap: { request: { fromAccount: "From_Account", toAccount: "To_Account", from: "From_Account", to: "To_Account", time: "MsgTimeStamp", sequence: "MsgSeq", random: "MsgRandom", elements: "MsgBody" }, response: { MsgList: "messageList", SyncFlag: "syncFlag", To_Account: "to", From_Account: "from", ClientSeq: "clientSequence", MsgSeq: "sequence", NoticeSeq: "noticeSequence", NotifySeq: "notifySequence", MsgRandom: "random", MsgTimeStamp: "time", MsgContent: "content", ToGroupId: "groupID", MsgKey: "messageKey", GroupTips: "groupTips", MsgBody: "elements", MsgType: "type", C2CRemainingUnreadCount: "C2CRemainingUnreadList", C2CPairUnreadCount: "C2CPairUnreadList" } } };
          }(e4)), this._configMap.set(Og, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.OPEN_IM, ".").concat(Gu.CMD.BIG_DATA_HALLWAY_AUTH_KEY) }), body: {} };
          }(e4)), this._configMap.set(Rg, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.OPEN_IM, ".").concat(Gu.CMD.SEND_MESSAGE) }), body: { fromAccount: "", toAccount: "", msgSeq: 0, msgRandom: 0, msgBody: [], cloudCustomData: void 0, nick: "", avatar: "", msgLifeTime: void 0, offlinePushInfo: { pushFlag: 0, title: "", desc: "", ext: "", apnsInfo: { badgeMode: 0 }, androidInfo: { OPPOChannelID: "" } }, messageControlInfo: void 0, clientTime: void 0, needReadReceipt: 0 }, keyMap: { request: { fromAccount: "From_Account", toAccount: "To_Account", msgTimeStamp: "MsgTimeStamp", msgSeq: "MsgSeq", msgRandom: "MsgRandom", msgBody: "MsgBody", count: "MaxCnt", lastMessageTime: "LastMsgTime", messageKey: "MsgKey", peerAccount: "Peer_Account", data: "Data", description: "Desc", extension: "Ext", type: "MsgType", content: "MsgContent", sizeType: "Type", uuid: "UUID", url: "", imageUrl: "URL", fileUrl: "Url", remoteAudioUrl: "Url", remoteVideoUrl: "VideoUrl", thumbUUID: "ThumbUUID", videoUUID: "VideoUUID", videoUrl: "", downloadFlag: "Download_Flag", nick: "From_AccountNick", avatar: "From_AccountHeadurl", from: "From_Account", time: "MsgTimeStamp", messageRandom: "MsgRandom", messageSequence: "MsgSeq", elements: "MsgBody", clientSequence: "ClientSeq", payload: "MsgContent", messageList: "MsgList", messageNumber: "MsgNum", abstractList: "AbstractList", messageBody: "MsgBody", needReadReceipt: "IsNeedReadReceipt" } } };
          }(e4)), this._configMap.set(Lg, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.GROUP, ".").concat(Gu.CMD.SEND_GROUP_MESSAGE) }), body: { fromAccount: "", groupID: "", random: 0, clientSequence: 0, priority: "", msgBody: [], cloudCustomData: void 0, onlineOnlyFlag: 0, offlinePushInfo: { pushFlag: 0, title: "", desc: "", ext: "", apnsInfo: { badgeMode: 0 }, androidInfo: { OPPOChannelID: "" } }, groupAtInfo: [], messageControlInfo: void 0, clientTime: void 0, needReadReceipt: 0, topicID: void 0 }, keyMap: { request: { to: "GroupId", extension: "Ext", data: "Data", description: "Desc", random: "Random", sequence: "ReqMsgSeq", count: "ReqMsgNumber", type: "MsgType", priority: "MsgPriority", content: "MsgContent", elements: "MsgBody", sizeType: "Type", uuid: "UUID", url: "", imageUrl: "URL", fileUrl: "Url", remoteAudioUrl: "Url", remoteVideoUrl: "VideoUrl", thumbUUID: "ThumbUUID", videoUUID: "VideoUUID", videoUrl: "", downloadFlag: "Download_Flag", clientSequence: "ClientSeq", from: "From_Account", time: "MsgTimeStamp", messageRandom: "MsgRandom", messageSequence: "MsgSeq", payload: "MsgContent", messageList: "MsgList", messageNumber: "MsgNum", abstractList: "AbstractList", messageBody: "MsgBody", needReadReceipt: "NeedReadReceipt" }, response: { MsgTime: "time", MsgSeq: "sequence" } } };
          }(e4)), this._configMap.set(Ug, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.OPEN_IM, ".").concat(Gu.CMD.REVOKE_C2C_MESSAGE) }), body: { msgInfo: { fromAccount: "", toAccount: "", msgTimeStamp: 0, msgSeq: 0, msgRandom: 0 } }, keyMap: { request: { msgInfo: "MsgInfo", msgTimeStamp: "MsgTimeStamp", msgSeq: "MsgSeq", msgRandom: "MsgRandom" } } };
          }(e4)), this._configMap.set(ch, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.GROUP, ".").concat(Gu.CMD.REVOKE_GROUP_MESSAGE) }), body: { groupID: "", msgSeqList: void 0, topicID: "" }, keyMap: { request: { msgSeqList: "MsgSeqList", msgSeq: "MsgSeq" } } };
          }(e4)), this._configMap.set(xg, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.OPEN_IM, ".").concat(Gu.CMD.GET_C2C_ROAM_MESSAGES) }), body: { peerAccount: "", count: 15, lastMessageTime: 0, messageKey: "", withRecalledMessage: 1, direction: 0 }, keyMap: { request: { messageKey: "MsgKey", peerAccount: "Peer_Account", count: "MaxCnt", lastMessageTime: "LastMsgTime", withRecalledMessage: "WithRecalledMsg", direction: "GetDirection" }, response: { LastMsgTime: "lastMessageTime", IsNeedReadReceipt: "needReadReceipt" } } };
          }(e4)), this._configMap.set(Bg, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.OPEN_IM, ".").concat(Gu.CMD.MODIFY_C2C_MESSAGE) }), body: { from: "", to: "", sequence: 0, random: 0, time: 0, version: 0, elements: void 0, cloudCustomData: void 0 }, keyMap: { request: { sequence: "MsgSeq", random: "MsgRandom", time: "MsgTime", version: "MsgVersion", type: "MsgType", content: "MsgContent" } } };
          }(e4)), this._configMap.set(dh, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.GROUP, ".").concat(Gu.CMD.GET_GROUP_ROAM_MESSAGES) }), body: { withRecalledMsg: 1, groupID: "", count: 15, sequence: "", topicID: void 0 }, keyMap: { request: { sequence: "ReqMsgSeq", count: "ReqMsgNumber", withRecalledMessage: "WithRecalledMsg" }, response: { Random: "random", MsgTime: "time", MsgSeq: "sequence", ReqMsgSeq: "sequence", RspMsgList: "messageList", IsPlaceMsg: "isPlaceMessage", IsSystemMsg: "isSystemMessage", ToGroupId: "to", EnumFrom_AccountType: "fromAccountType", EnumTo_AccountType: "toAccountType", GroupCode: "groupCode", MsgPriority: "priority", MsgBody: "elements", MsgType: "type", MsgContent: "content", IsFinished: "complete", Download_Flag: "downloadFlag", ClientSeq: "clientSequence", ThumbUUID: "thumbUUID", VideoUUID: "videoUUID", ToTopicId: "topicID" } } };
          }(e4)), this._configMap.set(Fg, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.OPEN_IM, ".").concat(Gu.CMD.SET_C2C_MESSAGE_READ) }), body: { C2CMsgReaded: void 0 }, keyMap: { request: { lastMessageTime: "LastedMsgTime" } } };
          }(e4)), this._configMap.set(qg, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.OPEN_IM, ".").concat(Gu.CMD.SET_C2C_PEER_MUTE_NOTIFICATIONS) }), body: { userIDList: void 0, muteFlag: 0 }, keyMap: { request: { userIDList: "Peer_Account", muteFlag: "Mute_Notifications" } } };
          }(e4)), this._configMap.set(Vg, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.OPEN_IM, ".").concat(Gu.CMD.GET_C2C_PEER_MUTE_NOTIFICATIONS) }), body: { updateSequence: 0 }, keyMap: { response: { MuteNotificationsList: "muteFlagList" } } };
          }(e4)), this._configMap.set(uh, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.GROUP, ".").concat(Gu.CMD.SET_GROUP_MESSAGE_READ) }), body: { groupID: void 0, messageReadSeq: void 0, topicID: void 0 }, keyMap: { request: { messageReadSeq: "MsgReadedSeq" } } };
          }(e4)), this._configMap.set(lh, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.OPEN_IM, ".").concat(Gu.CMD.SET_ALL_MESSAGE_READ) }), body: { readAllC2CMessage: 0, groupMessageReadInfoList: [] }, keyMap: { request: { readAllC2CMessage: "C2CReadAllMsg", groupMessageReadInfoList: "GroupReadInfo", messageSequence: "MsgSeq" }, response: { C2CReadAllMsg: "readAllC2CMessage", GroupReadInfoArray: "groupMessageReadInfoList" } } };
          }(e4)), this._configMap.set(Hg, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.OPEN_IM, ".").concat(Gu.CMD.DELETE_C2C_MESSAGE) }), body: { fromAccount: "", to: "", keyList: void 0 }, keyMap: { request: { keyList: "MsgKeyList" } } };
          }(e4)), this._configMap.set(Ih, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.GROUP, ".").concat(Gu.CMD.DELETE_GROUP_MESSAGE) }), body: { groupID: "", deleter: "", keyList: void 0, topicID: void 0 }, keyMap: { request: { deleter: "Deleter_Account", keyList: "Seqs" } } };
          }(e4)), this._configMap.set(Eh, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.OPEN_IM, ".").concat(Gu.CMD.MODIFY_GROUP_MESSAGE) }), body: { groupID: "", topicID: void 0, sequence: 0, version: 0, elements: void 0, cloudCustomData: void 0 }, keyMap: { request: { sequence: "MsgSeq", version: "MsgVersion", type: "MsgType", content: "MsgContent" } } };
          }(e4)), this._configMap.set(ph, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.GROUP, ".").concat(Gu.CMD.GET_READ_RECEIPT) }), body: { groupID: "", sequenceList: void 0 }, keyMap: { request: { sequence: "MsgSeq" } } };
          }(e4)), this._configMap.set(hh, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.OPEN_IM, ".").concat(Gu.CMD.SEND_C2C_READ_RECEIPT) }), body: { peerAccount: "", messageInfoList: void 0 }, keyMap: { request: { peerAccount: "Peer_Account", messageInfoList: "C2CMsgInfo", fromAccount: "From_Account", toAccount: "To_Account", sequence: "MsgSeq", random: "MsgRandom", time: "MsgTime", clientTime: "MsgClientTime" } } };
          }(e4)), this._configMap.set(gh, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.GROUP, ".").concat(Gu.CMD.SEND_READ_RECEIPT) }), body: { groupID: "", sequenceList: void 0 }, keyMap: { request: { sequenceList: "MsgSeqList", sequence: "MsgSeq" } } };
          }(e4)), this._configMap.set(_h, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.GROUP, ".").concat(Gu.CMD.GET_READ_RECEIPT_DETAIL) }), body: { groupID: "", sequence: void 0, flag: 0, cursor: 0, count: 0 }, keyMap: { request: { sequence: "MsgSeq", count: "Num" }, response: { ReadList: "readUserIDList", Read_Account: "userID", UnreadList: "unreadUserIDList", Unread_Account: "userID", IsFinish: "isCompleted" } } };
          }(e4)), this._configMap.set(Kg, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.OPEN_IM, ".").concat(Gu.CMD.GET_PEER_READ_TIME) }), body: { userIDList: void 0 }, keyMap: { request: { userIDList: "To_Account" }, response: { ReadTime: "peerReadTimeList" } } };
          }(e4)), this._configMap.set(Wg, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.RECENT_CONTACT, ".").concat(Gu.CMD.GET_CONVERSATION_LIST) }), body: { fromAccount: void 0, count: 0 }, keyMap: { request: {}, response: { SessionItem: "conversations", ToAccount: "groupID", To_Account: "userID", UnreadMsgCount: "unreadCount", MsgGroupReadedSeq: "messageReadSeq", C2cPeerReadTime: "c2cPeerReadTime" } } };
          }(e4)), this._configMap.set(jg, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.RECENT_CONTACT, ".").concat(Gu.CMD.PAGING_GET_CONVERSATION_LIST) }), body: { fromAccount: void 0, timeStamp: void 0, startIndex: void 0, pinnedTimeStamp: void 0, pinnedStartIndex: void 0, orderType: void 0, messageAssistFlag: 4, assistFlag: 15 }, keyMap: { request: { messageAssistFlag: "MsgAssistFlags", assistFlag: "AssistFlags", pinnedTimeStamp: "TopTimeStamp", pinnedStartIndex: "TopStartIndex" }, response: { SessionItem: "conversations", ToAccount: "groupID", To_Account: "userID", UnreadMsgCount: "unreadCount", MsgGroupReadedSeq: "messageReadSeq", C2cPeerReadTime: "c2cPeerReadTime", LastMsgFlags: "lastMessageFlag", TopFlags: "isPinned", TopTimeStamp: "pinnedTimeStamp", TopStartIndex: "pinnedStartIndex" } } };
          }(e4)), this._configMap.set(Yg, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.RECENT_CONTACT, ".").concat(Gu.CMD.DELETE_CONVERSATION) }), body: { fromAccount: "", toAccount: void 0, type: 1, toGroupID: void 0, clearHistoryMessage: 1 }, keyMap: { request: { toGroupID: "ToGroupid", clearHistoryMessage: "ClearRamble" } } };
          }(e4)), this._configMap.set($g, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.RECENT_CONTACT, ".").concat(Gu.CMD.PIN_CONVERSATION) }), body: { fromAccount: "", operationType: 1, itemList: void 0 }, keyMap: { request: { itemList: "RecentContactItem" } } };
          }(e4)), this._configMap.set(zg, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.OPEN_IM, ".").concat(Gu.CMD.DELETE_GROUP_AT_TIPS) }), body: { messageListToDelete: void 0 }, keyMap: { request: { messageListToDelete: "DelMsgList", messageSeq: "MsgSeq", messageRandom: "MsgRandom" } } };
          }(e4)), this._configMap.set(kg, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.PROFILE, ".").concat(Gu.CMD.PORTRAIT_GET) }), body: { fromAccount: "", userItem: [] }, keyMap: { request: { toAccount: "To_Account", standardSequence: "StandardSequence", customSequence: "CustomSequence" } } };
          }(e4)), this._configMap.set(Pg, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.PROFILE, ".").concat(Gu.CMD.PORTRAIT_SET) }), body: { fromAccount: "", profileItem: [{ tag: Fl.NICK, value: "" }, { tag: Fl.GENDER, value: "" }, { tag: Fl.ALLOWTYPE, value: "" }, { tag: Fl.AVATAR, value: "" }] }, keyMap: { request: { toAccount: "To_Account", standardSequence: "StandardSequence", customSequence: "CustomSequence" } } };
          }(e4)), this._configMap.set(Gg, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.FRIEND, ".").concat(Gu.CMD.GET_BLACKLIST) }), body: { fromAccount: "", startIndex: 0, maxLimited: 30, lastSequence: 0 }, keyMap: { response: { CurruentSequence: "currentSequence" } } };
          }(e4)), this._configMap.set(bg, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.FRIEND, ".").concat(Gu.CMD.ADD_BLACKLIST) }), body: { fromAccount: "", toAccount: [] } };
          }(e4)), this._configMap.set(wg, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.FRIEND, ".").concat(Gu.CMD.DELETE_BLACKLIST) }), body: { fromAccount: "", toAccount: [] } };
          }(e4)), this._configMap.set(Jg, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.GROUP, ".").concat(Gu.CMD.GET_JOINED_GROUPS) }), body: { memberAccount: "", limit: void 0, offset: void 0, groupType: void 0, responseFilter: { groupBaseInfoFilter: void 0, selfInfoFilter: void 0 }, isSupportTopic: 0 }, keyMap: { request: { memberAccount: "Member_Account" }, response: { GroupIdList: "groups", MsgFlag: "messageRemindType", NoUnreadSeqList: "excludedUnreadSequenceList", MsgSeq: "readedSequence" } } };
          }(e4)), this._configMap.set(Xg, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.GROUP, ".").concat(Gu.CMD.GET_GROUP_INFO) }), body: { groupIDList: void 0, responseFilter: { groupBaseInfoFilter: ["Type", "Name", "Introduction", "Notification", "FaceUrl", "Owner_Account", "CreateTime", "InfoSeq", "LastInfoTime", "LastMsgTime", "MemberNum", "MaxMemberNum", "ApplyJoinOption", "NextMsgSeq", "ShutUpAllMember"], groupCustomFieldFilter: void 0, memberInfoFilter: void 0, memberCustomFieldFilter: void 0 } }, keyMap: { request: { groupIDList: "GroupIdList", groupCustomField: "AppDefinedData", memberCustomField: "AppMemberDefinedData", groupCustomFieldFilter: "AppDefinedDataFilter_Group", memberCustomFieldFilter: "AppDefinedDataFilter_GroupMember" }, response: { GroupIdList: "groups", MsgFlag: "messageRemindType", AppDefinedData: "groupCustomField", AppMemberDefinedData: "memberCustomField", AppDefinedDataFilter_Group: "groupCustomFieldFilter", AppDefinedDataFilter_GroupMember: "memberCustomFieldFilter", InfoSeq: "infoSequence", MemberList: "members", GroupInfo: "groups", ShutUpUntil: "muteUntil", ShutUpAllMember: "muteAllMembers", ApplyJoinOption: "joinOption" } } };
          }(e4)), this._configMap.set(Qg, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.GROUP, ".").concat(Gu.CMD.CREATE_GROUP) }), body: { type: void 0, name: void 0, groupID: void 0, ownerID: void 0, introduction: void 0, notification: void 0, maxMemberNum: void 0, joinOption: void 0, memberList: void 0, groupCustomField: void 0, memberCustomField: void 0, webPushFlag: 1, avatar: "", isSupportTopic: void 0 }, keyMap: { request: { ownerID: "Owner_Account", userID: "Member_Account", avatar: "FaceUrl", maxMemberNum: "MaxMemberCount", joinOption: "ApplyJoinOption", groupCustomField: "AppDefinedData", memberCustomField: "AppMemberDefinedData" }, response: { HugeGroupFlag: "avChatRoomFlag", OverJoinedGroupLimit_Account: "overLimitUserIDList" } } };
          }(e4)), this._configMap.set(Zg, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.GROUP, ".").concat(Gu.CMD.DESTROY_GROUP) }), body: { groupID: void 0 } };
          }(e4)), this._configMap.set(eh, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.GROUP, ".").concat(Gu.CMD.MODIFY_GROUP_INFO) }), body: { groupID: void 0, name: void 0, introduction: void 0, notification: void 0, avatar: void 0, maxMemberNum: void 0, joinOption: void 0, groupCustomField: void 0, muteAllMembers: void 0 }, keyMap: { request: { maxMemberNum: "MaxMemberCount", groupCustomField: "AppDefinedData", muteAllMembers: "ShutUpAllMember", joinOption: "ApplyJoinOption", avatar: "FaceUrl" }, response: { AppDefinedData: "groupCustomField", ShutUpAllMember: "muteAllMembers", ApplyJoinOption: "joinOption" } } };
          }(e4)), this._configMap.set(th, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.GROUP, ".").concat(Gu.CMD.APPLY_JOIN_GROUP) }), body: { groupID: void 0, applyMessage: void 0, userDefinedField: void 0, webPushFlag: 1, historyMessageFlag: void 0 }, keyMap: { request: { applyMessage: "ApplyMsg", historyMessageFlag: "HugeGroupHistoryMsgFlag" }, response: { HugeGroupFlag: "avChatRoomFlag", AVChatRoomKey: "avChatRoomKey", RspMsgList: "messageList", ToGroupId: "to" } } };
          }(e4)), this._configMap.set(nh, function(e5) {
            e5.a2, e5.tinyid;
            return { head: t2(t2({}, g2(e5, PT)), {}, { servcmd: "".concat(Gu.NAME.BIG_GROUP_NO_AUTH, ".").concat(Gu.CMD.APPLY_JOIN_GROUP) }), body: { groupID: void 0, applyMessage: void 0, userDefinedField: void 0, webPushFlag: 1 }, keyMap: { request: { applyMessage: "ApplyMsg" }, response: { HugeGroupFlag: "avChatRoomFlag" } } };
          }(e4)), this._configMap.set(oh, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.GROUP, ".").concat(Gu.CMD.QUIT_GROUP) }), body: { groupID: void 0 } };
          }(e4)), this._configMap.set(rh, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.GROUP, ".").concat(Gu.CMD.SEARCH_GROUP_BY_ID) }), body: { groupIDList: void 0, responseFilter: { groupBasePublicInfoFilter: ["Type", "Name", "Introduction", "Notification", "FaceUrl", "CreateTime", "Owner_Account", "LastInfoTime", "LastMsgTime", "NextMsgSeq", "MemberNum", "MaxMemberNum", "ApplyJoinOption"] } }, keyMap: { response: { ApplyJoinOption: "joinOption" } } };
          }(e4)), this._configMap.set(ah, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.GROUP, ".").concat(Gu.CMD.CHANGE_GROUP_OWNER) }), body: { groupID: void 0, newOwnerID: void 0 }, keyMap: { request: { newOwnerID: "NewOwner_Account" } } };
          }(e4)), this._configMap.set(sh, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.GROUP, ".").concat(Gu.CMD.HANDLE_APPLY_JOIN_GROUP) }), body: { groupID: void 0, applicant: void 0, handleAction: void 0, handleMessage: void 0, authentication: void 0, messageKey: void 0, userDefinedField: void 0 }, keyMap: { request: { applicant: "Applicant_Account", handleAction: "HandleMsg", handleMessage: "ApprovalMsg", messageKey: "MsgKey" } } };
          }(e4)), this._configMap.set(ih, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.GROUP, ".").concat(Gu.CMD.HANDLE_GROUP_INVITATION) }), body: { groupID: void 0, inviter: void 0, handleAction: void 0, handleMessage: void 0, authentication: void 0, messageKey: void 0, userDefinedField: void 0 }, keyMap: { request: { inviter: "Inviter_Account", handleAction: "HandleMsg", handleMessage: "ApprovalMsg", messageKey: "MsgKey" } } };
          }(e4)), this._configMap.set(fh, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.GROUP, ".").concat(Gu.CMD.GET_GROUP_APPLICATION) }), body: { startTime: void 0, limit: void 0, handleAccount: void 0 }, keyMap: { request: { handleAccount: "Handle_Account" } } };
          }(e4)), this._configMap.set(mh, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.OPEN_IM, ".").concat(Gu.CMD.DELETE_GROUP_SYSTEM_MESSAGE) }), body: { messageListToDelete: void 0 }, keyMap: { request: { messageListToDelete: "DelMsgList", messageSeq: "MsgSeq", messageRandom: "MsgRandom" } } };
          }(e4)), this._configMap.set(vh, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.BIG_GROUP_LONG_POLLING, ".").concat(Gu.CMD.AVCHATROOM_LONG_POLL) }), body: { USP: 1, startSeq: 1, holdTime: 90, key: void 0 }, keyMap: { request: { USP: "USP" }, response: { ToGroupId: "groupID" } } };
          }(e4)), this._configMap.set(Mh, function(e5) {
            e5.a2, e5.tinyid;
            return { head: t2(t2({}, g2(e5, GT)), {}, { servcmd: "".concat(Gu.NAME.BIG_GROUP_LONG_POLLING_NO_AUTH, ".").concat(Gu.CMD.AVCHATROOM_LONG_POLL) }), body: { USP: 1, startSeq: 1, holdTime: 90, key: void 0 }, keyMap: { request: { USP: "USP" }, response: { ToGroupId: "groupID" } } };
          }(e4)), this._configMap.set(yh, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.GROUP, ".").concat(Gu.CMD.GET_ONLINE_MEMBER_NUM) }), body: { groupID: void 0 } };
          }(e4)), this._configMap.set(Th, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.GROUP, ".").concat(Gu.CMD.SET_GROUP_ATTRIBUTES) }), body: { groupID: void 0, groupAttributeList: void 0, mainSequence: void 0, avChatRoomKey: void 0, attributeControl: ["RaceConflict"] }, keyMap: { request: { key: "key", value: "value" } } };
          }(e4)), this._configMap.set(Sh, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.GROUP, ".").concat(Gu.CMD.MODIFY_GROUP_ATTRIBUTES) }), body: { groupID: void 0, groupAttributeList: void 0, mainSequence: void 0, avChatRoomKey: void 0, attributeControl: ["RaceConflict"] }, keyMap: { request: { key: "key", value: "value" } } };
          }(e4)), this._configMap.set(Ch, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.GROUP, ".").concat(Gu.CMD.DELETE_GROUP_ATTRIBUTES) }), body: { groupID: void 0, groupAttributeList: void 0, mainSequence: void 0, avChatRoomKey: void 0, attributeControl: ["RaceConflict"] }, keyMap: { request: { key: "key" } } };
          }(e4)), this._configMap.set(Ah, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.GROUP, ".").concat(Gu.CMD.CLEAR_GROUP_ATTRIBUTES) }), body: { groupID: void 0, mainSequence: void 0, avChatRoomKey: void 0, attributeControl: ["RaceConflict"] } };
          }(e4)), this._configMap.set(Dh, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.GROUP_ATTR, ".").concat(Gu.CMD.GET_GROUP_ATTRIBUTES) }), body: { groupID: void 0, avChatRoomKey: void 0, groupType: 1 }, keyMap: { request: { avChatRoomKey: "Key", groupType: "GroupType" } } };
          }(e4)), this._configMap.set(zh, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.GROUP_COMMUNITY, ".").concat(Gu.CMD.CREATE_TOPIC) }), body: { groupID: void 0, topicName: void 0, avatar: void 0, customData: void 0, topicID: void 0, notification: void 0, introduction: void 0 }, keyMap: { request: { avatar: "FaceUrl" } } };
          }(e4)), this._configMap.set(Jh, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.GROUP_COMMUNITY, ".").concat(Gu.CMD.DELETE_TOPIC) }), body: { groupID: void 0, topicIDList: void 0 }, keyMap: { request: { topicIDList: "TopicIdList" }, response: { DestroyResultItem: "resultList", ErrorCode: "code", ErrorInfo: "message" } } };
          }(e4)), this._configMap.set(Xh, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.GROUP_COMMUNITY, ".").concat(Gu.CMD.UPDATE_TOPIC_PROFILE) }), body: { groupID: void 0, topicID: void 0, avatar: void 0, customData: void 0, notification: void 0, introduction: void 0, muteAllMembers: void 0, topicName: void 0 }, keyMap: { request: { avatar: "FaceUrl", muteAllMembers: "ShutUpAllMember" } } };
          }(e4)), this._configMap.set(Qh, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.GROUP_COMMUNITY, ".").concat(Gu.CMD.GET_TOPIC_LIST) }), body: { groupID: void 0, topicIDList: void 0 }, keyMap: { request: { topicIDList: "TopicIdList" }, response: { TopicAndSelfInfo: "topicInfoList", TopicInfo: "topic", GroupID: "groupID", ShutUpTime: "muteTime", ShutUpAllFlag: "muteAllMembers", LastMsgTime: "lastMessageTime", MsgSeq: "readedSequence", MsgFlag: "messageRemindType", ErrorCode: "code", ErrorInfo: "message" } } };
          }(e4)), this._configMap.set(Nh, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.GROUP, ".").concat(Gu.CMD.GET_GROUP_MEMBER_LIST) }), body: { groupID: void 0, limit: 0, offset: void 0, next: void 0, memberRoleFilter: void 0, memberInfoFilter: ["Role", "NameCard", "ShutUpUntil", "JoinTime"], memberCustomFieldFilter: void 0 }, keyMap: { request: { memberCustomFieldFilter: "AppDefinedDataFilter_GroupMember" }, response: { AppMemberDefinedData: "memberCustomField", AppDefinedDataFilter_GroupMember: "memberCustomFieldFilter", MemberList: "members", ShutUpUntil: "muteUntil" } } };
          }(e4)), this._configMap.set(Oh, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.GROUP, ".").concat(Gu.CMD.GET_GROUP_MEMBER_INFO) }), body: { groupID: void 0, userIDList: void 0, memberInfoFilter: void 0, memberCustomFieldFilter: void 0 }, keyMap: { request: { userIDList: "Member_List_Account", memberCustomFieldFilter: "AppDefinedDataFilter_GroupMember" }, response: { MemberList: "members", ShutUpUntil: "muteUntil", AppDefinedDataFilter_GroupMember: "memberCustomFieldFilter", AppMemberDefinedData: "memberCustomField" } } };
          }(e4)), this._configMap.set(Rh, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.GROUP, ".").concat(Gu.CMD.ADD_GROUP_MEMBER) }), body: { groupID: void 0, silence: void 0, userIDList: void 0 }, keyMap: { request: { userID: "Member_Account", userIDList: "MemberList" }, response: { MemberList: "members" } } };
          }(e4)), this._configMap.set(Lh, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.GROUP, ".").concat(Gu.CMD.DELETE_GROUP_MEMBER) }), body: { groupID: void 0, userIDList: void 0, reason: void 0 }, keyMap: { request: { userIDList: "MemberToDel_Account" } } };
          }(e4)), this._configMap.set(kh, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.GROUP, ".").concat(Gu.CMD.MODIFY_GROUP_MEMBER_INFO) }), body: { groupID: void 0, topicID: void 0, userID: void 0, messageRemindType: void 0, nameCard: void 0, role: void 0, memberCustomField: void 0, muteTime: void 0 }, keyMap: { request: { userID: "Member_Account", memberCustomField: "AppMemberDefinedData", muteTime: "ShutUpTime", messageRemindType: "MsgFlag" } } };
          }(e4)), this._configMap.set(wh, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.IM_OPEN_STAT, ".").concat(Gu.CMD.TIM_WEB_REPORT_V2) }), body: { header: {}, event: [], quality: [] }, keyMap: { request: { SDKType: "sdk_type", SDKVersion: "sdk_version", deviceType: "device_type", platform: "platform", instanceID: "instance_id", traceID: "trace_id", SDKAppID: "sdk_app_id", userID: "user_id", tinyID: "tiny_id", extension: "extension", timestamp: "timestamp", networkType: "network_type", eventType: "event_type", code: "error_code", message: "error_message", moreMessage: "more_message", duplicate: "duplicate", costTime: "cost_time", level: "level", qualityType: "quality_type", reportIndex: "report_index", wholePeriod: "whole_period", totalCount: "total_count", rttCount: "success_count_business", successRateOfRequest: "percent_business", countLessThan1Second: "success_count_business", percentOfCountLessThan1Second: "percent_business", countLessThan3Second: "success_count_platform", percentOfCountLessThan3Second: "percent_platform", successCountOfBusiness: "success_count_business", successRateOfBusiness: "percent_business", successCountOfPlatform: "success_count_platform", successRateOfPlatform: "percent_platform", successCountOfMessageReceived: "success_count_business", successRateOfMessageReceived: "percent_business", avgRTT: "average_value", avgDelay: "average_value", avgValue: "average_value", uiPlatform: "ui_platform" } } };
          }(o3)), this._configMap.set(Uh, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.HEARTBEAT, ".").concat(Gu.CMD.ALIVE) }), body: {} };
          }(e4)), this._configMap.set(Fh, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.IM_OPEN_PUSH, ".").concat(Gu.CMD.MESSAGE_PUSH) }), body: {}, keyMap: { response: { C2cMsgArray: "C2CMessageArray", GroupMsgArray: "groupMessageArray", GroupTips: "groupTips", C2cNotifyMsgArray: "C2CNotifyMessageArray", C2cMsgInfo: "C2CReadReceiptArray", ClientSeq: "clientSequence", MsgPriority: "priority", NoticeSeq: "noticeSequence", MsgContent: "content", MsgType: "type", MsgBody: "elements", ToGroupId: "to", Desc: "description", Ext: "extension", IsSyncMsg: "isSyncMessage", Flag: "needSync", NeedAck: "needAck", PendencyAdd_Account: "userID", ProfileImNick: "nick", PendencyType: "applicationType", C2CReadAllMsg: "readAllC2CMessage", IsNeedReadReceipt: "needReadReceipt" } } };
          }(e4)), this._configMap.set(qh, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.IM_OPEN_PUSH, ".").concat(Gu.CMD.MULTI_MESSAGE_PUSH) }), body: {}, keyMap: { response: { GroupMsgArray: "groupMessageArray", GroupTips: "groupTips", ClientSeq: "clientSequence", MsgPriority: "priority", NoticeSeq: "noticeSequence", MsgContent: "content", MsgType: "type", MsgBody: "elements", ToGroupId: "to", Desc: "description", Ext: "extension", IsSyncMsg: "isSyncMessage", Flag: "needSync", NeedAck: "needAck", PendencyType: "applicationType" } } };
          }(e4)), this._configMap.set(Vh, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.OPEN_IM, ".").concat(Gu.CMD.MESSAGE_PUSH_ACK) }), body: { sessionData: void 0 }, keyMap: { request: { sessionData: "SessionData" } } };
          }(e4)), this._configMap.set(xh, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.IM_OPEN_STATUS, ".").concat(Gu.CMD.STATUS_FORCE_OFFLINE) }), body: {}, keyMap: { response: { C2cNotifyMsgArray: "C2CNotifyMessageArray", NoticeSeq: "noticeSequence", KickoutMsgNotify: "kickoutMsgNotify", NewInstInfo: "newInstanceInfo" } } };
          }(e4)), this._configMap.set(Hh, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.IM_LONG_MESSAGE, ".").concat(Gu.CMD.DOWNLOAD_MERGER_MESSAGE) }), body: { downloadKey: "" }, keyMap: { response: { Data: "data", Desc: "description", Ext: "extension", Download_Flag: "downloadFlag", ThumbUUID: "thumbUUID", VideoUUID: "videoUUID" } } };
          }(e4)), this._configMap.set(Kh, function(e5) {
            return { head: t2(t2({}, e5), {}, { servcmd: "".concat(Gu.NAME.IM_LONG_MESSAGE, ".").concat(Gu.CMD.UPLOAD_MERGER_MESSAGE) }), body: { messageList: [] }, keyMap: { request: { fromAccount: "From_Account", toAccount: "To_Account", msgTimeStamp: "MsgTimeStamp", msgSeq: "MsgSeq", msgRandom: "MsgRandom", msgBody: "MsgBody", type: "MsgType", content: "MsgContent", data: "Data", description: "Desc", extension: "Ext", sizeType: "Type", uuid: "UUID", url: "", imageUrl: "URL", fileUrl: "Url", remoteAudioUrl: "Url", remoteVideoUrl: "VideoUrl", thumbUUID: "ThumbUUID", videoUUID: "VideoUUID", videoUrl: "", downloadFlag: "Download_Flag", from: "From_Account", time: "MsgTimeStamp", messageRandom: "MsgRandom", messageSequence: "MsgSeq", elements: "MsgBody", clientSequence: "ClientSeq", payload: "MsgContent", messageList: "MsgList", messageNumber: "MsgNum", abstractList: "AbstractList", messageBody: "MsgBody" } } };
          }(e4));
        } }, { key: "has", value: function(e4) {
          return this._configMap.has(e4);
        } }, { key: "get", value: function(e4) {
          return this._configMap.get(e4);
        } }, { key: "update", value: function() {
          this._fillConfigMap();
        } }, { key: "getKeyMap", value: function(e4) {
          return this.has(e4) ? this.get(e4).keyMap || {} : (wl.warn("".concat(this._className, ".getKeyMap unknown protocolName:").concat(e4)), {});
        } }, { key: "getProtocolData", value: function(e4) {
          var t3 = e4.protocolName, n3 = e4.requestData, o3 = this.get(t3), r3 = null;
          if (n3) {
            var a3 = this._simpleDeepCopy(o3), s3 = this._updateService(n3, a3), i3 = s3.body, c3 = /* @__PURE__ */ Object.create(null);
            for (var u3 in i3)
              if (Object.prototype.hasOwnProperty.call(i3, u3)) {
                if (c3[u3] = i3[u3], void 0 === n3[u3])
                  continue;
                c3[u3] = n3[u3];
              }
            s3.body = c3, r3 = this._getUplinkData(s3);
          } else
            r3 = this._getUplinkData(o3);
          return r3;
        } }, { key: "_getUplinkData", value: function(e4) {
          var t3 = this._requestDataCleaner(e4), n3 = kd(t3.head), o3 = uy(t3.body, this._getRequestKeyMap(n3));
          return t3.body = o3, t3;
        } }, { key: "_updateService", value: function(e4, t3) {
          var n3 = kd(t3.head);
          if (t3.head.servcmd.includes(Gu.NAME.GROUP)) {
            var o3 = e4.type, r3 = e4.groupID, a3 = void 0 === r3 ? void 0 : r3, s3 = e4.groupIDList, i3 = void 0 === s3 ? [] : s3;
            Zl(a3) && (a3 = i3[0] || ""), Id({ type: o3, groupID: a3 }) && (t3.head.servcmd = "".concat(Gu.NAME.GROUP_COMMUNITY, ".").concat(n3));
          }
          return t3;
        } }, { key: "_getRequestKeyMap", value: function(e4) {
          var n3 = this.getKeyMap(e4);
          return t2(t2({}, ry.request), n3.request);
        } }, { key: "_requestDataCleaner", value: function(e4) {
          var t3 = Array.isArray(e4) ? [] : /* @__PURE__ */ Object.create(null);
          for (var o3 in e4)
            Object.prototype.hasOwnProperty.call(e4, o3) && rd(o3) && null !== e4[o3] && void 0 !== e4[o3] && ("object" !== n2(e4[o3]) ? t3[o3] = e4[o3] : t3[o3] = this._requestDataCleaner.bind(this)(e4[o3]));
          return t3;
        } }, { key: "_simpleDeepCopy", value: function(e4) {
          for (var t3, n3 = Object.keys(e4), o3 = {}, r3 = 0, a3 = n3.length; r3 < a3; r3++)
            t3 = n3[r3], Ql(e4[t3]) ? o3[t3] = Array.from(e4[t3]) : Jl(e4[t3]) ? o3[t3] = this._simpleDeepCopy(e4[t3]) : o3[t3] = e4[t3];
          return o3;
        } }]), e3;
      }(), wT = [Vh], UT = function() {
        function e3(t3) {
          o2(this, e3), this._sessionModule = t3, this._className = "DownlinkHandler", this._eventHandlerMap = /* @__PURE__ */ new Map(), this._eventHandlerMap.set("C2CMessageArray", this._c2cMessageArrayHandler.bind(this)), this._eventHandlerMap.set("groupMessageArray", this._groupMessageArrayHandler.bind(this)), this._eventHandlerMap.set("groupTips", this._groupTipsHandler.bind(this)), this._eventHandlerMap.set("C2CNotifyMessageArray", this._C2CNotifyMessageArrayHandler.bind(this)), this._eventHandlerMap.set("C2CReadReceiptArray", this._C2CReadReceiptArrayHandler.bind(this)), this._eventHandlerMap.set("profileModify", this._profileHandler.bind(this)), this._eventHandlerMap.set("friendListMod", this._relationChainHandler.bind(this)), this._eventHandlerMap.set("recentContactMod", this._recentContactHandler.bind(this)), this._eventHandlerMap.set("readAllC2CMessage", this._allMessageReadHandler.bind(this)), this._eventHandlerMap.set("c2cMessageModified", this._c2cMessageModifiedHandler.bind(this)), this._eventHandlerMap.set("groupMessageModified", this._groupMessageModifiedHandler.bind(this)), this._keys = v2(this._eventHandlerMap.keys());
        }
        return a2(e3, [{ key: "_c2cMessageArrayHandler", value: function(e4) {
          var t3 = this._sessionModule.getModule(tg);
          if (t3) {
            if (e4.dataList.forEach(function(e5) {
              if (1 === e5.isSyncMessage) {
                var t4 = e5.from;
                e5.from = e5.to, e5.to = t4;
              }
            }), 1 === e4.needSync)
              this._sessionModule.getModule(hg).startOnlineSync();
            t3.onNewC2CMessage({ dataList: e4.dataList, isInstantMessage: true });
          }
        } }, { key: "_c2cMessageModifiedHandler", value: function(e4) {
          var t3 = this._sessionModule.getModule(tg);
          t3 && t3.onC2CMessageModified(e4);
        } }, { key: "_groupMessageArrayHandler", value: function(e4) {
          var t3 = this._sessionModule.getModule(ng);
          t3 && t3.onNewGroupMessage({ event: e4.event, dataList: e4.dataList, isInstantMessage: true });
        } }, { key: "_groupMessageModifiedHandler", value: function(e4) {
          var t3 = this._sessionModule.getModule(ng);
          t3 && t3.onGroupMessageModified(e4);
        } }, { key: "_groupTipsHandler", value: function(e4) {
          var t3 = this._sessionModule.getModule(ng);
          if (t3) {
            var n3 = e4.event, o3 = e4.dataList, r3 = e4.isInstantMessage, a3 = void 0 === r3 || r3, s3 = e4.isSyncingEnded;
            switch (n3) {
              case 4:
              case 6:
                t3.onNewGroupTips({ event: n3, dataList: o3 });
                break;
              case 5:
                o3.forEach(function(e5) {
                  Ql(e5.elements.revokedInfos) ? t3.onGroupMessageRevoked({ dataList: o3 }) : Ql(e5.elements.groupMessageReadNotice) ? t3.onGroupMessageReadNotice({ dataList: o3 }) : Ql(e5.elements.readReceiptList) ? t3.onReadReceiptList({ dataList: o3 }) : t3.onNewGroupSystemNotice({ dataList: o3, isInstantMessage: a3, isSyncingEnded: s3 });
                });
                break;
              case 12:
                this._sessionModule.getModule(sg).onNewGroupAtTips({ dataList: o3 });
                break;
              default:
                wl.log("".concat(this._className, "._groupTipsHandler unknown event:").concat(n3, " dataList:"), o3);
            }
          }
        } }, { key: "_C2CNotifyMessageArrayHandler", value: function(e4) {
          var t3 = this, n3 = e4.dataList;
          if (Ql(n3)) {
            var o3 = this._sessionModule.getModule(tg);
            n3.forEach(function(e5) {
              if (Xl(e5)) {
                if (e5.hasOwnProperty("kickoutMsgNotify")) {
                  var r3 = e5.kickoutMsgNotify, a3 = r3.kickType, s3 = r3.newInstanceInfo, i3 = void 0 === s3 ? {} : s3;
                  1 === a3 ? t3._sessionModule.onMultipleAccountKickedOut(i3) : 2 === a3 ? t3._sessionModule.onMultipleDeviceKickedOut(i3) : 3 === a3 && t3._sessionModule.onRestApiKickedOut(i3);
                } else if (e5.hasOwnProperty("c2cMessageRevokedNotify"))
                  o3 && o3.onC2CMessageRevoked({ dataList: n3 });
                else if (e5.hasOwnProperty("c2cMessageReadReceipt"))
                  o3 && o3.onC2CMessageReadReceipt({ dataList: n3 });
                else if (e5.hasOwnProperty("c2cMessageReadNotice"))
                  o3 && o3.onC2CMessageReadNotice({ dataList: n3 });
                else if (e5.hasOwnProperty("muteNotificationsSync")) {
                  t3._sessionModule.getModule(sg).onC2CMessageRemindTypeSynced({ dataList: n3 });
                }
              }
            });
          }
        } }, { key: "_C2CReadReceiptArrayHandler", value: function(e4) {
          this._sessionModule.getModule(tg).onReadReceiptList(e4);
        } }, { key: "_profileHandler", value: function(e4) {
          this._sessionModule.getModule(eg).onProfileModified({ dataList: e4.dataList });
          var t3 = this._sessionModule.getModule(og);
          t3 && t3.onFriendProfileModified({ dataList: e4.dataList });
        } }, { key: "_relationChainHandler", value: function(e4) {
          this._sessionModule.getModule(eg).onRelationChainModified({ dataList: e4.dataList });
          var t3 = this._sessionModule.getModule(og);
          t3 && t3.onRelationChainModified({ dataList: e4.dataList });
        } }, { key: "_recentContactHandler", value: function(e4) {
          var t3 = e4.dataList;
          if (Ql(t3)) {
            var n3 = this._sessionModule.getModule(sg);
            n3 && t3.forEach(function(e5) {
              var t4 = e5.pushType, o3 = e5.recentContactTopItem, r3 = e5.recentContactDeleteItem;
              1 === t4 ? n3.onConversationDeleted(r3.recentContactList) : 2 === t4 ? n3.onConversationPinned(o3.recentContactList) : 3 === t4 && n3.onConversationUnpinned(o3.recentContactList);
            });
          }
        } }, { key: "_allMessageReadHandler", value: function(e4) {
          var t3 = e4.dataList, n3 = this._sessionModule.getModule(sg);
          n3 && n3.onPushedAllMessageRead(t3);
        } }, { key: "onMessage", value: function(e4) {
          var t3 = this, n3 = e4.body;
          if (this._filterMessageFromIMOpenPush(e4)) {
            var o3 = n3.eventArray, r3 = n3.isInstantMessage, a3 = n3.isSyncingEnded, s3 = n3.needSync;
            if (Ql(o3))
              for (var i3 = null, c3 = null, u3 = 0, l3 = 0, d3 = o3.length; l3 < d3; l3++) {
                u3 = (i3 = o3[l3]).event;
                var p3 = Object.keys(i3).find(function(e5) {
                  return -1 !== t3._keys.indexOf(e5);
                });
                p3 ? (c3 = 14 === u3 ? { readAllC2CMessage: i3[p3], groupMessageReadInfoList: i3.groupMessageReadNotice || [] } : 16 === u3 ? { userID: i3.userID, readReceiptList: i3[p3] } : i3[p3], this._eventHandlerMap.get(p3)({ event: u3, dataList: c3, isInstantMessage: r3, isSyncingEnded: a3, needSync: s3 })) : wl.log("".concat(this._className, ".onMessage unknown eventItem:").concat(i3));
              }
          }
        } }, { key: "_filterMessageFromIMOpenPush", value: function(e4) {
          var t3 = e4.head, n3 = e4.body, o3 = t3.servcmd, r3 = false;
          if (Zl(o3) || (r3 = o3.includes(Gu.NAME.IM_CONFIG_MANAGER) || o3.includes(Gu.NAME.OVERLOAD_PUSH) || o3.includes(Gu.NAME.STAT_SERVICE)), !r3)
            return true;
          if (o3.includes(Gu.CMD.PUSHED_CLOUD_CONTROL_CONFIG))
            this._sessionModule.getModule(vg).onPushedCloudControlConfig(n3);
          else if (o3.includes(Gu.CMD.PUSHED_COMMERCIAL_CONFIG)) {
            this._sessionModule.getModule(Eg).onPushedConfig(n3);
          } else if (o3.includes(Gu.CMD.OVERLOAD_NOTIFY))
            this._sessionModule.onPushedServerOverload(n3);
          else if (o3.includes(Gu.CMD.KICK_OTHER)) {
            var a3 = Date.now();
            this._sessionModule.reLoginOnKickOther();
            var s3 = new __(f_.KICK_OTHER), i3 = this._sessionModule.getModule(Qp).getLastWsHelloTs(), c3 = a3 - i3;
            s3.setMessage("last wshello time:".concat(i3, " diff:").concat(c3, "ms")).setNetworkType(this._sessionModule.getNetworkType()).end();
          }
          return false;
        } }]), e3;
      }(), FT = [{ cmd: Gu.CMD.GET_GROUP_INFO, interval: 1, count: 20 }, { cmd: Gu.CMD.GET_GROUP_TOPIC_LIST, interval: 1, count: 10 }, { cmd: Gu.CMD.SET_GROUP_ATTRIBUTES, interval: 5, count: 10 }, { cmd: Gu.CMD.MODIFY_GROUP_ATTRIBUTES, interval: 5, count: 10 }, { cmd: Gu.CMD.DELETE_GROUP_ATTRIBUTES, interval: 5, count: 10 }, { cmd: Gu.CMD.CLEAR_GROUP_ATTRIBUTES, interval: 5, count: 10 }, { cmd: Gu.CMD.GET_GROUP_ATTRIBUTES, interval: 5, count: 20 }, { cmd: Gu.CMD.SET_ALL_MESSAGE_READ, interval: 1, count: 1 }], qT = function(e3) {
        i2(n3, e3);
        var t3 = f2(n3);
        function n3(e4) {
          var r3;
          return o2(this, n3), (r3 = t3.call(this, e4))._className = "SessionModule", r3._platform = r3.getPlatform(), r3._protocolHandler = new bT(h2(r3)), r3._messageDispatcher = new UT(h2(r3)), r3._commandFrequencyLimitMap = /* @__PURE__ */ new Map(), r3._commandRequestInfoMap = /* @__PURE__ */ new Map(), r3._serverOverloadInfoMap = /* @__PURE__ */ new Map(), r3._init(), r3.getInnerEmitterInstance().on($v, r3._onCloudConfigUpdated, h2(r3)), r3;
        }
        return a2(n3, [{ key: "_init", value: function() {
          this._updateCommandFrequencyLimitMap(FT);
        } }, { key: "_onCloudConfigUpdated", value: function() {
          var e4 = this.getCloudConfig("cmd_frequency_limit");
          Zl(e4) || (e4 = JSON.parse(e4), this._updateCommandFrequencyLimitMap(e4));
        } }, { key: "_updateCommandFrequencyLimitMap", value: function(e4) {
          var t4 = this;
          e4.forEach(function(e5) {
            t4._commandFrequencyLimitMap.set(e5.cmd, { interval: e5.interval, count: e5.count });
          });
        } }, { key: "updateProtocolConfig", value: function() {
          this._protocolHandler.update();
        } }, { key: "request", value: function(e4) {
          wl.debug("".concat(this._className, ".request options:"), e4);
          var t4 = e4.protocolName, n4 = e4.tjgID;
          if (!this._protocolHandler.has(t4))
            return wl.warn("".concat(this._className, ".request unknown protocol:").concat(t4)), Rv({ code: Zh.CANNOT_FIND_PROTOCOL, message: e_.CANNOT_FIND_PROTOCOL });
          var o3 = this.getProtocolData(e4), r3 = o3.head.servcmd;
          if (this._isFrequencyOverLimit(r3))
            return Rv({ code: Zh.OVER_FREQUENCY_LIMIT, message: e_.OVER_FREQUENCY_LIMIT });
          if (this._isServerOverload(r3))
            return Rv({ code: Zh.OPEN_SERVICE_OVERLOAD_ERROR, message: e_.OPEN_SERVICE_OVERLOAD_ERROR });
          qd(n4) || (o3.head.tjgID = n4);
          var a3 = this.getModule(fg);
          return wT.includes(t4) ? a3.simplySend(o3) : a3.send(o3);
        } }, { key: "getKeyMap", value: function(e4) {
          return this._protocolHandler.getKeyMap(e4);
        } }, { key: "genCommonHead", value: function() {
          var e4 = this.getModule(ig);
          return { ver: "v4", platform: this._platform, websdkappid: Du, websdkversion: Au, a2: e4.getA2Key() || void 0, tinyid: e4.getTinyID() || void 0, status_instid: e4.getStatusInstanceID(), sdkappid: e4.getSDKAppID(), contenttype: e4.getContentType(), reqtime: 0, identifier: e4.getA2Key() ? void 0 : e4.getUserID(), usersig: e4.getA2Key() ? void 0 : e4.getUserSig(), sdkability: 1587, tjgID: "" };
        } }, { key: "genCosSpecifiedHead", value: function() {
          var e4 = this.getModule(ig);
          return { ver: "v4", platform: this._platform, websdkappid: Du, websdkversion: Au, sdkappid: e4.getSDKAppID(), contenttype: e4.getContentType(), reqtime: 0, identifier: e4.getUserID(), usersig: e4.getUserSig(), status_instid: e4.getStatusInstanceID(), sdkability: 1587 };
        } }, { key: "genSSOReportHead", value: function() {
          var e4 = this.getModule(ig);
          return { ver: "v4", platform: this._platform, websdkappid: Du, websdkversion: Au, sdkappid: e4.getSDKAppID(), contenttype: "", reqtime: 0, identifier: "", usersig: "", status_instid: e4.getStatusInstanceID(), sdkability: 1587 };
        } }, { key: "getProtocolData", value: function(e4) {
          return this._protocolHandler.getProtocolData(e4);
        } }, { key: "onErrorCodeNotZero", value: function(e4) {
          var t4 = e4.errorCode;
          if (t4 === Zh.HELLO_ANSWER_KICKED_OUT) {
            var n4 = e4.kickType, o3 = e4.newInstanceInfo, r3 = void 0 === o3 ? {} : o3;
            1 === n4 ? this.onMultipleAccountKickedOut(r3) : 2 === n4 ? this.onMultipleDeviceKickedOut(r3) : 3 === n4 && this.onRestApiKickedOut(r3);
          }
          t4 !== Zh.MESSAGE_A2KEY_EXPIRED && t4 !== Zh.ACCOUNT_A2KEY_EXPIRED || (this._onUserSigExpired(), this.getModule(fg).reConnect());
        } }, { key: "onMessage", value: function(e4) {
          var t4 = e4.body, n4 = t4.needAck, o3 = void 0 === n4 ? 0 : n4, r3 = t4.sessionData;
          1 === o3 && this._sendACK(r3), this._messageDispatcher.onMessage(e4);
        } }, { key: "onReconnected", value: function() {
          this._reLoginOnReconnected();
        } }, { key: "reLoginOnKickOther", value: function() {
          wl.log("".concat(this._className, ".reLoginOnKickOther")), this._reLogin();
        } }, { key: "_reLoginOnReconnected", value: function() {
          wl.log("".concat(this._className, "._reLoginOnReconnected")), this._reLogin();
        } }, { key: "_reLogin", value: function() {
          var e4 = this;
          this.isLoggedIn() && this.request({ protocolName: Sg }).then(function(t4) {
            var n4 = t4.data.instanceID;
            e4.getModule(ig).setStatusInstanceID(n4), wl.log("".concat(e4._className, "._reLogin ok. start to sync unread messages")), e4.getModule(hg).startSyncOnReconnected(), e4.getModule(yg).startPull(), e4.getModule(ng).updateLocalMainSequenceOnReconnected();
            var o3 = e4.getModule(ag);
            o3.resetGetTopicTime(), o3.getTopicListOnReconnected();
          });
        } }, { key: "onMultipleAccountKickedOut", value: function(e4) {
          this.getModule(Qp).onMultipleAccountKickedOut(e4);
        } }, { key: "onMultipleDeviceKickedOut", value: function(e4) {
          this.getModule(Qp).onMultipleDeviceKickedOut(e4);
        } }, { key: "_onUserSigExpired", value: function() {
          this.getModule(Qp).onUserSigExpired();
        } }, { key: "onRestApiKickedOut", value: function(e4) {
          this.getModule(Qp).onRestApiKickedOut(e4);
        } }, { key: "_sendACK", value: function(e4) {
          this.request({ protocolName: Vh, requestData: { sessionData: e4 } });
        } }, { key: "_isFrequencyOverLimit", value: function(e4) {
          var t4 = e4.split(".")[1];
          if (!this._commandFrequencyLimitMap.has(t4))
            return false;
          if (!this._commandRequestInfoMap.has(t4))
            return this._commandRequestInfoMap.set(t4, { startTime: Date.now(), requestCount: 1 }), false;
          var n4 = this._commandFrequencyLimitMap.get(t4), o3 = n4.count, r3 = n4.interval, a3 = this._commandRequestInfoMap.get(t4), s3 = a3.startTime, i3 = a3.requestCount;
          if (Date.now() - s3 > 1e3 * r3)
            return this._commandRequestInfoMap.set(t4, { startTime: Date.now(), requestCount: 1 }), false;
          i3 += 1, this._commandRequestInfoMap.set(t4, { startTime: s3, requestCount: i3 });
          var c3 = false;
          return i3 > o3 && (c3 = true), c3;
        } }, { key: "_isServerOverload", value: function(e4) {
          if (!this._serverOverloadInfoMap.has(e4))
            return false;
          var t4 = this._serverOverloadInfoMap.get(e4), n4 = t4.overloadTime, o3 = t4.waitingTime, r3 = false;
          return Date.now() - n4 <= 1e3 * o3 ? r3 = true : (this._serverOverloadInfoMap.delete(e4), r3 = false), r3;
        } }, { key: "onPushedServerOverload", value: function(e4) {
          var t4 = e4.overloadCommand, n4 = e4.waitingTime;
          this._serverOverloadInfoMap.set(t4, { overloadTime: Date.now(), waitingTime: n4 }), wl.warn("".concat(this._className, ".onPushedServerOverload waitingTime:").concat(n4, "s"));
        } }, { key: "reset", value: function() {
          wl.log("".concat(this._className, ".reset")), this._updateCommandFrequencyLimitMap(FT), this._commandRequestInfoMap.clear(), this._serverOverloadInfoMap.clear();
        } }]), n3;
      }(Tg), VT = function(e3) {
        i2(n3, e3);
        var t3 = f2(n3);
        function n3(e4) {
          var r3;
          return o2(this, n3), (r3 = t3.call(this, e4))._className = "MessageLossDetectionModule", r3._maybeLostSequencesMap = /* @__PURE__ */ new Map(), r3._firstRoundRet = [], r3;
        }
        return a2(n3, [{ key: "onMessageMaybeLost", value: function(e4, t4, n4) {
          this._maybeLostSequencesMap.has(e4) || this._maybeLostSequencesMap.set(e4, []);
          for (var o3 = this._maybeLostSequencesMap.get(e4), r3 = 0; r3 < n4; r3++)
            -1 === o3.indexOf(t4 + r3) && o3.push(t4 + r3);
        } }, { key: "detectFirstRound", value: function(e4, t4) {
          var n4 = this._maybeLostSequencesMap.get(e4);
          if (!qd(n4) && !qd(t4)) {
            var o3 = n4.filter(function(e5) {
              return -1 === t4.indexOf(e5);
            });
            0 === o3.length ? wl.info("".concat(this._className, ".detectFirstRound no message loss. conversationID:").concat(e4)) : this._firstRoundRet = this._firstRoundRet.concat(o3), n4.length = 0;
          }
        } }, { key: "detectSecondRound", value: function(e4, t4) {
          if (!qd(this._firstRoundRet) && !qd(t4)) {
            var n4 = this._firstRoundRet.filter(function(e5) {
              return -1 === t4.indexOf(e5);
            });
            this._firstRoundRet.length = 0;
            var o3, r3 = n4.length;
            if (0 !== r3)
              r3 <= 5 ? o3 = e4 + "-" + n4.join("-") : (n4.sort(function(e5, t5) {
                return e5 - t5;
              }), o3 = e4 + " start:" + n4[0] + " end:" + n4[r3 - 1] + " count:" + r3), new __(f_.MESSAGE_LOSS).setMessage(o3).setNetworkType(this.getNetworkType()).setLevel("warning").end(), wl.info("".concat(this._className, ".detectSecondRound message loss detected. conversationID:").concat(e4, " lostSequences:").concat(n4));
          }
        } }, { key: "reset", value: function() {
          wl.log("".concat(this._className, ".reset")), this._maybeLostSequencesMap.clear(), this._firstRoundRet.length = 0;
        } }]), n3;
      }(Tg), xT = function(e3) {
        i2(n3, e3);
        var t3 = f2(n3);
        function n3(e4) {
          var r3;
          return o2(this, n3), (r3 = t3.call(this, e4))._className = "CloudControlModule", r3._cloudConfig = /* @__PURE__ */ new Map(), r3._expiredTime = 0, r3._version = 0, r3._isFetching = false, r3;
        }
        return a2(n3, [{ key: "getCloudConfig", value: function(e4) {
          return Zl(e4) ? this._cloudConfig : this._cloudConfig.has(e4) ? this._cloudConfig.get(e4) : void 0;
        } }, { key: "_canFetchConfig", value: function() {
          return this.isLoggedIn() && !this._isFetching && Date.now() >= this._expiredTime;
        } }, { key: "fetchConfig", value: function() {
          var e4 = this, t4 = this._canFetchConfig();
          if (wl.log("".concat(this._className, ".fetchConfig canFetchConfig:").concat(t4)), t4) {
            var n4 = new __(f_.FETCH_CLOUD_CONTROL_CONFIG), o3 = this.getModule(ig).getSDKAppID();
            this._isFetching = true, this.request({ protocolName: Bh, requestData: { SDKAppID: o3, version: this._version } }).then(function(t5) {
              e4._isFetching = false, n4.setMessage("version:".concat(e4._version, " newVersion:").concat(t5.data.version, " config:").concat(t5.data.cloudControlConfig)).setNetworkType(e4.getNetworkType()).end(), wl.log("".concat(e4._className, ".fetchConfig ok")), e4._parseCloudControlConfig(t5.data);
            }).catch(function(t5) {
              e4._isFetching = false, e4.probeNetwork().then(function(e5) {
                var o4 = m2(e5, 2), r3 = o4[0], a3 = o4[1];
                n4.setError(t5, r3, a3).end();
              }), wl.log("".concat(e4._className, ".fetchConfig failed. error:"), t5), e4._setExpiredTimeOnResponseError(12e4);
            });
          }
        } }, { key: "onPushedCloudControlConfig", value: function(e4) {
          wl.log("".concat(this._className, ".onPushedCloudControlConfig")), new __(f_.PUSHED_CLOUD_CONTROL_CONFIG).setNetworkType(this.getNetworkType()).setMessage("newVersion:".concat(e4.version, " config:").concat(e4.cloudControlConfig)).end(), this._parseCloudControlConfig(e4);
        } }, { key: "onCheckTimer", value: function(e4) {
          this._canFetchConfig() && this.fetchConfig();
        } }, { key: "_parseCloudControlConfig", value: function(e4) {
          var t4 = this, n4 = "".concat(this._className, "._parseCloudControlConfig"), o3 = e4.errorCode, r3 = e4.errorMessage, a3 = e4.cloudControlConfig, s3 = e4.version, i3 = e4.expiredTime;
          if (0 === o3) {
            if (this._version !== s3) {
              var c3 = null;
              try {
                c3 = JSON.parse(a3);
              } catch (rS) {
                wl.error("".concat(n4, " JSON parse error:").concat(a3));
              }
              c3 && (this._cloudConfig.clear(), Object.keys(c3).forEach(function(e5) {
                t4._cloudConfig.set(e5, c3[e5]);
              }), this._version = s3, this.emitInnerEvent($v));
            }
            this._expiredTime = Date.now() + 1e3 * i3;
          } else
            Zl(o3) ? (wl.log("".concat(n4, " failed. Invalid message format:"), e4), this._setExpiredTimeOnResponseError(36e5)) : (wl.error("".concat(n4, " errorCode:").concat(o3, " errorMessage:").concat(r3)), this._setExpiredTimeOnResponseError(12e4));
        } }, { key: "_setExpiredTimeOnResponseError", value: function(e4) {
          this._expiredTime = Date.now() + e4;
        } }, { key: "reset", value: function() {
          wl.log("".concat(this._className, ".reset")), this._cloudConfig.clear(), this._expiredTime = 0, this._version = 0, this._isFetching = false;
        } }]), n3;
      }(Tg), KT = function(e3) {
        i2(n3, e3);
        var t3 = f2(n3);
        function n3(e4) {
          var r3;
          return o2(this, n3), (r3 = t3.call(this, e4))._className = "PullGroupMessageModule", r3._remoteLastMessageSequenceMap = /* @__PURE__ */ new Map(), r3.PULL_LIMIT_COUNT = 15, r3;
        }
        return a2(n3, [{ key: "startPull", value: function() {
          var e4 = this, t4 = this._getNeedPullConversationList();
          this._getRemoteLastMessageSequenceList().then(function() {
            var n4 = e4.getModule(sg);
            t4.forEach(function(t5) {
              var o3 = t5.conversationID, r3 = o3.replace(gr.CONV_GROUP, ""), a3 = n4.getGroupLocalLastMessageSequence(o3), s3 = e4._remoteLastMessageSequenceMap.get(r3) || 0, i3 = s3 - a3;
              wl.log("".concat(e4._className, ".startPull groupID:").concat(r3, " localLastMessageSequence:").concat(a3, " ") + "remoteLastMessageSequence:".concat(s3, " diff:").concat(i3)), a3 > 0 && i3 >= 1 && i3 < 300 && e4._pullMissingMessage({ groupID: r3, localLastMessageSequence: a3, remoteLastMessageSequence: s3, diff: i3 });
            });
          });
        } }, { key: "_getNeedPullConversationList", value: function() {
          return this.getModule(sg).getLocalConversationList().filter(function(e4) {
            return e4.type === gr.CONV_GROUP && e4.groupProfile.type !== gr.GRP_AVCHATROOM;
          });
        } }, { key: "_getRemoteLastMessageSequenceList", value: function() {
          var e4 = this;
          return this.getModule(ng).getGroupList().then(function(t4) {
            for (var n4 = t4.data.groupList, o3 = void 0 === n4 ? [] : n4, r3 = 0; r3 < o3.length; r3++) {
              var a3 = o3[r3], s3 = a3.groupID, i3 = a3.nextMessageSeq;
              if (a3.type !== gr.GRP_AVCHATROOM) {
                var c3 = i3 - 1;
                e4._remoteLastMessageSequenceMap.set(s3, c3);
              }
            }
          });
        } }, { key: "_pullMissingMessage", value: function(e4) {
          var t4 = this, n4 = e4.localLastMessageSequence, o3 = e4.remoteLastMessageSequence, r3 = e4.diff;
          e4.count = r3 > this.PULL_LIMIT_COUNT ? this.PULL_LIMIT_COUNT : r3, e4.sequence = r3 > this.PULL_LIMIT_COUNT ? n4 + this.PULL_LIMIT_COUNT : n4 + r3, this._getGroupMissingMessage(e4).then(function(a3) {
            a3.length > 0 && (a3[0].sequence + 1 <= o3 && (e4.localLastMessageSequence = n4 + t4.PULL_LIMIT_COUNT, e4.diff = r3 - t4.PULL_LIMIT_COUNT, t4._pullMissingMessage(e4)), t4.getModule(ng).onNewGroupMessage({ dataList: a3, isInstantMessage: false }));
          });
        } }, { key: "_getGroupMissingMessage", value: function(e4) {
          var t4 = this, n4 = new __(f_.GET_GROUP_MISSING_MESSAGE);
          return this.request({ protocolName: dh, requestData: { groupID: e4.groupID, count: e4.count, sequence: e4.sequence } }).then(function(o3) {
            var r3 = o3.data.messageList, a3 = void 0 === r3 ? [] : r3;
            return n4.setNetworkType(t4.getNetworkType()).setMessage("groupID:".concat(e4.groupID, " count:").concat(e4.count, " sequence:").concat(e4.sequence, " messageList length:").concat(a3.length)).end(), a3;
          }).catch(function(e5) {
            t4.probeNetwork().then(function(t5) {
              var o3 = m2(t5, 2), r3 = o3[0], a3 = o3[1];
              n4.setError(e5, r3, a3).end();
            });
          });
        } }, { key: "reset", value: function() {
          wl.log("".concat(this._className, ".reset")), this._remoteLastMessageSequenceMap.clear();
        } }]), n3;
      }(Tg), HT = function() {
        function e3() {
          o2(this, e3), this._className = "AvgE2EDelay", this._e2eDelayArray = [];
        }
        return a2(e3, [{ key: "addMessageDelay", value: function(e4) {
          var t3 = kl() - e4;
          t3 >= 0 && this._e2eDelayArray.push(t3);
        } }, { key: "_calcAvg", value: function(e4, t3) {
          if (0 === t3)
            return 0;
          var n3 = 0;
          return e4.forEach(function(e5) {
            n3 += e5;
          }), Pd(n3 / t3, 1);
        } }, { key: "_calcCountWithLimit", value: function(e4) {
          var t3 = e4.e2eDelayArray, n3 = e4.min, o3 = e4.max;
          return t3.filter(function(e5) {
            return n3 <= e5 && e5 < o3;
          }).length;
        } }, { key: "_calcPercent", value: function(e4, t3) {
          var n3 = Pd(e4 / t3 * 100, 2);
          return n3 > 100 && (n3 = 100), n3;
        } }, { key: "_checkE2EDelayException", value: function(e4, t3) {
          var n3 = e4.filter(function(e5) {
            return e5 > t3;
          });
          if (n3.length > 0) {
            var o3 = n3.length, r3 = Math.min.apply(Math, v2(n3)), a3 = Math.max.apply(Math, v2(n3)), s3 = this._calcAvg(n3, o3), i3 = Pd(o3 / e4.length * 100, 2);
            if (i3 > 50)
              new __(f_.MESSAGE_E2E_DELAY_EXCEPTION).setMessage("message e2e delay exception. count:".concat(o3, " min:").concat(r3, " max:").concat(a3, " avg:").concat(s3, " percent:").concat(i3)).setLevel("warning").end();
          }
        } }, { key: "getStatResult", value: function() {
          var e4 = this._e2eDelayArray.length;
          if (0 === e4)
            return null;
          var t3 = v2(this._e2eDelayArray), n3 = this._calcCountWithLimit({ e2eDelayArray: t3, min: 0, max: 1 }), o3 = this._calcCountWithLimit({ e2eDelayArray: t3, min: 1, max: 3 }), r3 = this._calcPercent(n3, e4), a3 = this._calcPercent(o3, e4), s3 = this._calcAvg(t3, e4);
          return this._checkE2EDelayException(t3, 3), t3.length = 0, this.reset(), { totalCount: e4, countLessThan1Second: n3, percentOfCountLessThan1Second: r3, countLessThan3Second: o3, percentOfCountLessThan3Second: a3, avgDelay: s3 };
        } }, { key: "reset", value: function() {
          this._e2eDelayArray.length = 0;
        } }]), e3;
      }(), BT = function() {
        function e3() {
          o2(this, e3), this._className = "AvgRTT", this._requestCount = 0, this._rttArray = [];
        }
        return a2(e3, [{ key: "addRequestCount", value: function() {
          this._requestCount += 1;
        } }, { key: "addRTT", value: function(e4) {
          this._rttArray.push(e4);
        } }, { key: "_calcTotalCount", value: function() {
          return this._requestCount;
        } }, { key: "_calcRTTCount", value: function(e4) {
          return e4.length;
        } }, { key: "_calcSuccessRateOfRequest", value: function(e4, t3) {
          if (0 === t3)
            return 0;
          var n3 = Pd(e4 / t3 * 100, 2);
          return n3 > 100 && (n3 = 100), n3;
        } }, { key: "_calcAvg", value: function(e4, t3) {
          if (0 === t3)
            return 0;
          var n3 = 0;
          return e4.forEach(function(e5) {
            n3 += e5;
          }), parseInt(n3 / t3);
        } }, { key: "_calcMax", value: function() {
          return Math.max.apply(Math, v2(this._rttArray));
        } }, { key: "_calcMin", value: function() {
          return Math.min.apply(Math, v2(this._rttArray));
        } }, { key: "getStatResult", value: function() {
          var e4 = this._calcTotalCount(), t3 = v2(this._rttArray);
          if (0 === e4)
            return null;
          var n3 = this._calcRTTCount(t3), o3 = this._calcSuccessRateOfRequest(n3, e4), r3 = this._calcAvg(t3, n3);
          return wl.log("".concat(this._className, ".getStatResult max:").concat(this._calcMax(), " min:").concat(this._calcMin(), " avg:").concat(r3)), this.reset(), { totalCount: e4, rttCount: n3, successRateOfRequest: o3, avgRTT: r3 };
        } }, { key: "reset", value: function() {
          this._requestCount = 0, this._rttArray.length = 0;
        } }]), e3;
      }(), jT = function() {
        function e3() {
          o2(this, e3), this._map = /* @__PURE__ */ new Map();
        }
        return a2(e3, [{ key: "initMap", value: function(e4) {
          var t3 = this;
          e4.forEach(function(e5) {
            t3._map.set(e5, { totalCount: 0, successCount: 0, failedCountOfUserSide: 0, costArray: [], fileSizeArray: [] });
          });
        } }, { key: "addTotalCount", value: function(e4) {
          return !(Zl(e4) || !this._map.has(e4)) && (this._map.get(e4).totalCount += 1, true);
        } }, { key: "addSuccessCount", value: function(e4) {
          return !(Zl(e4) || !this._map.has(e4)) && (this._map.get(e4).successCount += 1, true);
        } }, { key: "addFailedCountOfUserSide", value: function(e4) {
          return !(Zl(e4) || !this._map.has(e4)) && (this._map.get(e4).failedCountOfUserSide += 1, true);
        } }, { key: "addCost", value: function(e4, t3) {
          return !(Zl(e4) || !this._map.has(e4)) && (this._map.get(e4).costArray.push(t3), true);
        } }, { key: "addFileSize", value: function(e4, t3) {
          return !(Zl(e4) || !this._map.has(e4)) && (this._map.get(e4).fileSizeArray.push(t3), true);
        } }, { key: "_calcSuccessRateOfBusiness", value: function(e4) {
          if (Zl(e4) || !this._map.has(e4))
            return -1;
          var t3 = this._map.get(e4), n3 = Pd(t3.successCount / t3.totalCount * 100, 2);
          return n3 > 100 && (n3 = 100), n3;
        } }, { key: "_calcSuccessRateOfPlatform", value: function(e4) {
          if (Zl(e4) || !this._map.has(e4))
            return -1;
          var t3 = this._map.get(e4), n3 = this._calcSuccessCountOfPlatform(e4) / t3.totalCount * 100;
          return (n3 = Pd(n3, 2)) > 100 && (n3 = 100), n3;
        } }, { key: "_calcTotalCount", value: function(e4) {
          return Zl(e4) || !this._map.has(e4) ? -1 : this._map.get(e4).totalCount;
        } }, { key: "_calcSuccessCountOfBusiness", value: function(e4) {
          return Zl(e4) || !this._map.has(e4) ? -1 : this._map.get(e4).successCount;
        } }, { key: "_calcSuccessCountOfPlatform", value: function(e4) {
          if (Zl(e4) || !this._map.has(e4))
            return -1;
          var t3 = this._map.get(e4);
          return t3.successCount + t3.failedCountOfUserSide;
        } }, { key: "_calcAvg", value: function(e4) {
          return Zl(e4) || !this._map.has(e4) ? -1 : e4 === i_ ? this._calcAvgSpeed(e4) : this._calcAvgCost(e4);
        } }, { key: "_calcAvgCost", value: function(e4) {
          var t3 = this._map.get(e4).costArray.length;
          if (0 === t3)
            return 0;
          var n3 = 0;
          return this._map.get(e4).costArray.forEach(function(e5) {
            n3 += e5;
          }), parseInt(n3 / t3);
        } }, { key: "_calcAvgSpeed", value: function(e4) {
          var t3 = 0, n3 = 0;
          return this._map.get(e4).costArray.forEach(function(e5) {
            t3 += e5;
          }), this._map.get(e4).fileSizeArray.forEach(function(e5) {
            n3 += e5;
          }), parseInt(1e3 * n3 / t3);
        } }, { key: "getStatResult", value: function(e4) {
          var t3 = this._calcTotalCount(e4);
          if (0 === t3)
            return null;
          var n3 = this._calcSuccessCountOfBusiness(e4), o3 = this._calcSuccessRateOfBusiness(e4), r3 = this._calcSuccessCountOfPlatform(e4), a3 = this._calcSuccessRateOfPlatform(e4), s3 = this._calcAvg(e4);
          return this.reset(e4), { totalCount: t3, successCountOfBusiness: n3, successRateOfBusiness: o3, successCountOfPlatform: r3, successRateOfPlatform: a3, avgValue: s3 };
        } }, { key: "reset", value: function(e4) {
          Zl(e4) ? this._map.clear() : this._map.set(e4, { totalCount: 0, successCount: 0, failedCountOfUserSide: 0, costArray: [], fileSizeArray: [] });
        } }]), e3;
      }(), WT = function() {
        function e3() {
          o2(this, e3), this._lastMap = /* @__PURE__ */ new Map(), this._currentMap = /* @__PURE__ */ new Map();
        }
        return a2(e3, [{ key: "initMap", value: function(e4) {
          var t3 = this;
          e4.forEach(function(e5) {
            t3._lastMap.set(e5, /* @__PURE__ */ new Map()), t3._currentMap.set(e5, /* @__PURE__ */ new Map());
          });
        } }, { key: "addMessageSequence", value: function(e4) {
          var t3 = e4.key, n3 = e4.message;
          if (Zl(t3) || !this._lastMap.has(t3) || !this._currentMap.has(t3))
            return false;
          var o3 = n3.conversationID, r3 = n3.sequence, a3 = o3.replace(gr.CONV_GROUP, "");
          if (0 === this._lastMap.get(t3).size)
            this._addCurrentMap(e4);
          else if (this._lastMap.get(t3).has(a3)) {
            var s3 = this._lastMap.get(t3).get(a3), i3 = s3.length - 1;
            r3 > s3[0] && r3 < s3[i3] ? (s3.push(r3), s3.sort(), this._lastMap.get(t3).set(a3, s3)) : this._addCurrentMap(e4);
          } else
            this._addCurrentMap(e4);
          return true;
        } }, { key: "_addCurrentMap", value: function(e4) {
          var t3 = e4.key, n3 = e4.message, o3 = n3.conversationID, r3 = n3.sequence, a3 = o3.replace(gr.CONV_GROUP, "");
          this._currentMap.get(t3).has(a3) || this._currentMap.get(t3).set(a3, []), this._currentMap.get(t3).get(a3).push(r3);
        } }, { key: "_copyData", value: function(e4) {
          if (!Zl(e4)) {
            this._lastMap.set(e4, /* @__PURE__ */ new Map());
            var t3, n3 = this._lastMap.get(e4), o3 = S2(this._currentMap.get(e4));
            try {
              for (o3.s(); !(t3 = o3.n()).done; ) {
                var r3 = m2(t3.value, 2), a3 = r3[0], s3 = r3[1];
                n3.set(a3, s3);
              }
            } catch (i3) {
              o3.e(i3);
            } finally {
              o3.f();
            }
            n3 = null, this._currentMap.set(e4, /* @__PURE__ */ new Map());
          }
        } }, { key: "getStatResult", value: function(e4) {
          if (Zl(this._currentMap.get(e4)) || Zl(this._lastMap.get(e4)))
            return null;
          if (0 === this._lastMap.get(e4).size)
            return this._copyData(e4), null;
          var t3 = 0, n3 = 0;
          if (this._lastMap.get(e4).forEach(function(e5, o4) {
            var r3 = v2(e5.values()), a3 = r3.length, s3 = r3[a3 - 1] - r3[0] + 1;
            t3 += s3, n3 += a3;
          }), 0 === t3)
            return null;
          var o3 = Pd(n3 / t3 * 100, 2);
          return o3 > 100 && (o3 = 100), this._copyData(e4), { totalCount: t3, successCountOfMessageReceived: n3, successRateOfMessageReceived: o3 };
        } }, { key: "reset", value: function() {
          this._currentMap.clear(), this._lastMap.clear();
        } }]), e3;
      }(), YT = function(e3) {
        i2(r3, e3);
        var n3 = f2(r3);
        function r3(e4) {
          var t3;
          o2(this, r3), (t3 = n3.call(this, e4))._className = "QualityStatModule", t3.TAG = "im-ssolog-quality-stat", t3.reportIndex = 0, t3.wholePeriod = false, t3._qualityItems = [t_, n_, o_, r_, a_, s_, i_, c_, u_, l_], t3._messageSentItems = [o_, r_, a_, s_, i_], t3._messageReceivedItems = [c_, u_, l_], t3.REPORT_INTERVAL = 120, t3.REPORT_SDKAPPID_BLACKLIST = [], t3.REPORT_TINYID_WHITELIST = [], t3._statInfoArr = [], t3._avgRTT = new BT(), t3._avgE2EDelay = new HT(), t3._rateMessageSent = new jT(), t3._rateMessageReceived = new WT();
          var a3 = t3.getInnerEmitterInstance();
          return a3.on(Yv, t3._onLoginSuccess, h2(t3)), a3.on($v, t3._onCloudConfigUpdated, h2(t3)), t3;
        }
        return a2(r3, [{ key: "_onLoginSuccess", value: function() {
          var e4 = this;
          this._rateMessageSent.initMap(this._messageSentItems), this._rateMessageReceived.initMap(this._messageReceivedItems);
          var t3 = this.getModule(cg), n4 = t3.getItem(this.TAG, false);
          !qd(n4) && td(n4.forEach) && (wl.log("".concat(this._className, "._onLoginSuccess.get quality stat log in storage, nums=").concat(n4.length)), n4.forEach(function(t4) {
            e4._statInfoArr.push(t4);
          }), t3.removeItem(this.TAG, false));
        } }, { key: "_onCloudConfigUpdated", value: function() {
          var e4 = this.getCloudConfig("q_rpt_interval"), t3 = this.getCloudConfig("q_rpt_sdkappid_bl"), n4 = this.getCloudConfig("q_rpt_tinyid_wl");
          Zl(e4) || (this.REPORT_INTERVAL = Number(e4)), Zl(t3) || (this.REPORT_SDKAPPID_BLACKLIST = t3.split(",").map(function(e5) {
            return Number(e5);
          })), Zl(n4) || (this.REPORT_TINYID_WHITELIST = n4.split(","));
        } }, { key: "onCheckTimer", value: function(e4) {
          this.isLoggedIn() && e4 % this.REPORT_INTERVAL == 0 && (this.wholePeriod = true, this._report());
        } }, { key: "addRequestCount", value: function() {
          this._avgRTT.addRequestCount();
        } }, { key: "addRTT", value: function(e4) {
          this._avgRTT.addRTT(e4);
        } }, { key: "addMessageDelay", value: function(e4) {
          this._avgE2EDelay.addMessageDelay(e4);
        } }, { key: "addTotalCount", value: function(e4) {
          this._rateMessageSent.addTotalCount(e4) || wl.warn("".concat(this._className, ".addTotalCount invalid key:"), e4);
        } }, { key: "addSuccessCount", value: function(e4) {
          this._rateMessageSent.addSuccessCount(e4) || wl.warn("".concat(this._className, ".addSuccessCount invalid key:"), e4);
        } }, { key: "addFailedCountOfUserSide", value: function(e4) {
          this._rateMessageSent.addFailedCountOfUserSide(e4) || wl.warn("".concat(this._className, ".addFailedCountOfUserSide invalid key:"), e4);
        } }, { key: "addCost", value: function(e4, t3) {
          this._rateMessageSent.addCost(e4, t3) || wl.warn("".concat(this._className, ".addCost invalid key or cost:"), e4, t3);
        } }, { key: "addFileSize", value: function(e4, t3) {
          this._rateMessageSent.addFileSize(e4, t3) || wl.warn("".concat(this._className, ".addFileSize invalid key or size:"), e4, t3);
        } }, { key: "addMessageSequence", value: function(e4) {
          this._rateMessageReceived.addMessageSequence(e4) || wl.warn("".concat(this._className, ".addMessageSequence invalid key:"), e4.key);
        } }, { key: "_getQualityItem", value: function(e4) {
          var n4 = {}, o3 = g_[this.getNetworkType()];
          Zl(o3) && (o3 = 8);
          var r4 = { qualityType: d_[e4], timestamp: Rl(), networkType: o3, extension: "" };
          switch (e4) {
            case t_:
              n4 = this._avgRTT.getStatResult();
              break;
            case n_:
              n4 = this._avgE2EDelay.getStatResult();
              break;
            case o_:
            case r_:
            case a_:
            case s_:
            case i_:
              n4 = this._rateMessageSent.getStatResult(e4);
              break;
            case c_:
            case u_:
            case l_:
              n4 = this._rateMessageReceived.getStatResult(e4);
          }
          return null === n4 ? null : t2(t2({}, r4), n4);
        } }, { key: "_report", value: function(e4) {
          var t3 = this, n4 = [], o3 = null;
          Zl(e4) ? this._qualityItems.forEach(function(e5) {
            null !== (o3 = t3._getQualityItem(e5)) && (o3.reportIndex = t3.reportIndex, o3.wholePeriod = t3.wholePeriod, n4.push(o3));
          }) : null !== (o3 = this._getQualityItem(e4)) && (o3.reportIndex = this.reportIndex, o3.wholePeriod = this.wholePeriod, n4.push(o3)), wl.debug("".concat(this._className, "._report"), n4), this._statInfoArr.length > 0 && (n4 = n4.concat(this._statInfoArr), this._statInfoArr = []);
          var r4 = this.getModule(ig), a3 = r4.getSDKAppID(), s3 = r4.getTinyID();
          Gd(this.REPORT_SDKAPPID_BLACKLIST, a3) && !bd(this.REPORT_TINYID_WHITELIST, s3) && (n4 = []), n4.length > 0 && this._doReport(n4);
        } }, { key: "_doReport", value: function(e4) {
          var n4 = this, o3 = { header: VM(this), quality: e4 };
          this.request({ protocolName: wh, requestData: t2({}, o3) }).then(function() {
            n4.reportIndex++, n4.wholePeriod = false;
          }).catch(function(t3) {
            wl.warn("".concat(n4._className, "._doReport, online:").concat(n4.getNetworkType(), " error:"), t3), n4._statInfoArr = n4._statInfoArr.concat(e4), n4._flushAtOnce();
          });
        } }, { key: "_flushAtOnce", value: function() {
          var e4 = this.getModule(cg), t3 = e4.getItem(this.TAG, false), n4 = this._statInfoArr;
          if (qd(t3))
            wl.log("".concat(this._className, "._flushAtOnce count:").concat(n4.length)), e4.setItem(this.TAG, n4, true, false);
          else {
            var o3 = n4.concat(t3);
            o3.length > 10 && (o3 = o3.slice(0, 10)), wl.log("".concat(this.className, "._flushAtOnce count:").concat(o3.length)), e4.setItem(this.TAG, o3, true, false);
          }
          this._statInfoArr = [];
        } }, { key: "reset", value: function() {
          wl.log("".concat(this._className, ".reset")), this._report(), this.reportIndex = 0, this.wholePeriod = false, this.REPORT_SDKAPPID_BLACKLIST = [], this.REPORT_TINYID_WHITELIST = [], this._avgRTT.reset(), this._avgE2EDelay.reset(), this._rateMessageSent.reset(), this._rateMessageReceived.reset();
        } }]), r3;
      }(Tg), $T = function(e3) {
        i2(n3, e3);
        var t3 = f2(n3);
        function n3(e4) {
          var r3;
          return o2(this, n3), (r3 = t3.call(this, e4))._className = "WorkerTimerModule", r3._isWorkerEnabled = true, r3._workerTimer = null, r3._init(), r3.getInnerEmitterInstance().on($v, r3._onCloudConfigUpdated, h2(r3)), r3;
        }
        return a2(n3, [{ key: "isWorkerEnabled", value: function() {
          return this._isWorkerEnabled && dl;
        } }, { key: "startWorkerTimer", value: function() {
          wl.log("".concat(this._className, ".startWorkerTimer")), this._workerTimer && this._workerTimer.postMessage("start");
        } }, { key: "stopWorkerTimer", value: function() {
          wl.log("".concat(this._className, ".stopWorkerTimer")), this._workerTimer && this._workerTimer.postMessage("stop");
        } }, { key: "_init", value: function() {
          if (dl) {
            var e4 = URL.createObjectURL(new Blob(['let interval = -1;onmessage = function(event) {  if (event.data === "start") {    if (interval > 0) {      clearInterval(interval);    }    interval = setInterval(() => {      postMessage("");    }, 1000)  } else if (event.data === "stop") {    clearInterval(interval);    interval = -1;  }};'], { type: "application/javascript; charset=utf-8" }));
            this._workerTimer = new Worker(e4);
            var t4 = this;
            this._workerTimer.onmessage = function() {
              t4._moduleManager.onCheckTimer();
            };
          }
        } }, { key: "_onCloudConfigUpdated", value: function() {
          var e4 = this.getCloudConfig("enable_worker");
          wl.log("".concat(this._className, "._onCloudConfigUpdated enableWorker:").concat(e4)), "1" === e4 ? !this._isWorkerEnabled && dl && (this._isWorkerEnabled = true, this.startWorkerTimer(), this._moduleManager.onWorkerTimerEnabled()) : this._isWorkerEnabled && dl && (this._isWorkerEnabled = false, this.stopWorkerTimer(), this._moduleManager.onWorkerTimerDisabled());
        } }, { key: "terminate", value: function() {
          wl.log("".concat(this._className, ".terminate")), this._workerTimer && (this._workerTimer.terminate(), this._workerTimer = null);
        } }, { key: "reset", value: function() {
          wl.log("".concat(this._className, ".reset"));
        } }]), n3;
      }(Tg), zT = function() {
        function e3() {
          o2(this, e3), this._className = "PurchasedFeatureHandler", this._purchasedFeatureMap = /* @__PURE__ */ new Map();
        }
        return a2(e3, [{ key: "isValidPurchaseBits", value: function(e4) {
          return e4 && "string" == typeof e4 && e4.length >= 1 && e4.length <= 64 && /[01]{1,64}/.test(e4);
        } }, { key: "parsePurchaseBits", value: function(e4) {
          var t3 = "".concat(this._className, ".parsePurchaseBits");
          if (this.isValidPurchaseBits(e4)) {
            this._purchasedFeatureMap.clear();
            for (var n3 = Object.values(bu), o3 = null, r3 = e4.length - 1, a3 = 0; r3 >= 0; r3--, a3++)
              o3 = a3 < 32 ? new Tu(0, Math.pow(2, a3)).toString() : new Tu(Math.pow(2, a3 - 32), 0).toString(), -1 !== n3.indexOf(o3) && ("1" === e4[r3] ? this._purchasedFeatureMap.set(o3, true) : this._purchasedFeatureMap.set(o3, false));
          } else
            wl.warn("".concat(t3, " invalid purchase bits:").concat(e4));
        } }, { key: "hasPurchasedFeature", value: function(e4) {
          return !!this._purchasedFeatureMap.get(e4);
        } }, { key: "clear", value: function() {
          this._purchasedFeatureMap.clear();
        } }]), e3;
      }(), JT = function(e3) {
        i2(n3, e3);
        var t3 = f2(n3);
        function n3(e4) {
          var r3;
          return o2(this, n3), (r3 = t3.call(this, e4))._className = "CommercialConfigModule", r3._expiredTime = 0, r3._isFetching = false, r3._purchasedFeatureHandler = new zT(), r3;
        }
        return a2(n3, [{ key: "_canFetch", value: function() {
          return this.isLoggedIn() ? !this._isFetching && Date.now() >= this._expiredTime : (this._expiredTime = Date.now() + 2e3, false);
        } }, { key: "onCheckTimer", value: function(e4) {
          this._canFetch() && this.fetchConfig();
        } }, { key: "fetchConfig", value: function() {
          var e4 = this, t4 = this._canFetch(), n4 = "".concat(this._className, ".fetchConfig");
          if (wl.log("".concat(n4, " canFetch:").concat(t4)), t4) {
            var o3 = new __(f_.FETCH_COMMERCIAL_CONFIG);
            o3.setNetworkType(this.getNetworkType());
            var r3 = this.getModule(ig).getSDKAppID();
            this._isFetching = true, this.request({ protocolName: Wh, requestData: { SDKAppID: r3 } }).then(function(t5) {
              o3.setMessage("purchaseBits:".concat(t5.data.purchaseBits)).end(), wl.log("".concat(n4, " ok.")), e4._parseConfig(t5.data), e4._isFetching = false;
            }).catch(function(t5) {
              e4.probeNetwork().then(function(e5) {
                var n5 = m2(e5, 2), r4 = n5[0], a3 = n5[1];
                o3.setError(t5, r4, a3).end();
              }), e4._isFetching = false;
            });
          }
        } }, { key: "onPushedConfig", value: function(e4) {
          var t4 = "".concat(this._className, ".onPushedConfig");
          wl.log("".concat(t4)), new __(f_.PUSHED_COMMERCIAL_CONFIG).setNetworkType(this.getNetworkType()).setMessage("purchaseBits:".concat(e4.purchaseBits)).end(), this._parseConfig(e4);
        } }, { key: "_parseConfig", value: function(e4) {
          var t4 = "".concat(this._className, "._parseConfig"), n4 = e4.errorCode, o3 = e4.errorMessage, r3 = e4.purchaseBits, a3 = e4.expiredTime;
          0 === n4 ? (this._purchasedFeatureHandler.parsePurchaseBits(r3), this._expiredTime = Date.now() + 1e3 * a3) : Zl(n4) ? (wl.log("".concat(t4, " failed. Invalid message format:"), e4), this._setExpiredTimeOnResponseError(36e5)) : (wl.error("".concat(t4, " errorCode:").concat(n4, " errorMessage:").concat(o3)), this._setExpiredTimeOnResponseError(12e4));
        } }, { key: "_setExpiredTimeOnResponseError", value: function(e4) {
          this._expiredTime = Date.now() + e4;
        } }, { key: "hasPurchasedFeature", value: function(e4) {
          return this._purchasedFeatureHandler.hasPurchasedFeature(e4);
        } }, { key: "reset", value: function() {
          wl.log("".concat(this._className, ".reset")), this._expiredTime = 0, this._isFetching = false, this._purchasedFeatureHandler.clear();
        } }]), n3;
      }(Tg), XT = function() {
        function e3(t3) {
          o2(this, e3);
          var n3 = new __(f_.SDK_CONSTRUCT);
          this._className = "ModuleManager", this._isReady = false, this._reason = Zh.USER_NOT_LOGGED_IN, this._startLoginTs = 0, this._moduleMap = /* @__PURE__ */ new Map(), this._innerEmitter = null, this._outerEmitter = null, this._checkCount = 0, this._checkTimer = -1, this._moduleMap.set(ig, new GM(this, t3)), this._moduleMap.set(Eg, new JT(this)), this._moduleMap.set(vg, new xT(this)), this._moduleMap.set(Mg, new $T(this)), this._moduleMap.set(Ig, new YT(this)), this._moduleMap.set(fg, new kT(this)), this._moduleMap.set(_g, new qT(this)), this._moduleMap.set(Qp, new bM(this)), this._moduleMap.set(Zp, new ty(this)), this._moduleMap.set(eg, new PM(this)), this._moduleMap.set(tg, new Lv(this)), this._moduleMap.set(sg, new dM(this)), this._moduleMap.set(ng, new TM(this)), this._moduleMap.set(rg, new CM(this)), this._moduleMap.set(ag, new OM(this)), this._moduleMap.set(cg, new FM(this)), this._moduleMap.set(ug, new xM(this)), this._moduleMap.set(lg, new jM(this)), this._moduleMap.set(dg, new YM(this)), this._moduleMap.set(pg, new zM(this)), this._moduleMap.set(gg, new ny(this)), this._moduleMap.set(hg, new oy(this)), this._moduleMap.set(mg, new VT(this)), this._moduleMap.set(yg, new KT(this)), this._eventThrottleMap = /* @__PURE__ */ new Map();
          var r3 = t3.instanceID, a3 = t3.oversea, s3 = t3.SDKAppID, i3 = "instanceID:".concat(r3, " SDKAppID:").concat(s3, " host:").concat(Od(), " oversea:").concat(a3, " inBrowser:").concat(ju, " inMiniApp:").concat(Bu) + " workerAvailable:".concat(dl, " UserAgent:").concat($u2);
          __.bindEventStatModule(this._moduleMap.get(ug)), n3.setMessage("".concat(i3, " ").concat(function() {
            var e4 = "";
            if (Bu)
              try {
                var t4 = Wu.getSystemInfoSync(), n4 = t4.model, o3 = t4.version, r4 = t4.system, a4 = t4.platform, s4 = t4.SDKVersion;
                e4 = "model:".concat(n4, " version:").concat(o3, " system:").concat(r4, " platform:").concat(a4, " SDKVersion:").concat(s4);
              } catch (rS) {
                e4 = "";
              }
            return e4;
          }())).end(), wl.info("SDK ".concat(i3)), this._readyList = void 0, this._ssoLogForReady = null, this._initReadyList();
        }
        return a2(e3, [{ key: "_startTimer", value: function() {
          var e4 = this._moduleMap.get(Mg), t3 = e4.isWorkerEnabled();
          wl.log("".concat(this._className, ".startTimer isWorkerEnabled:").concat(t3, " seed:").concat(this._checkTimer)), t3 ? e4.startWorkerTimer() : this._startMainThreadTimer();
        } }, { key: "_startMainThreadTimer", value: function() {
          wl.log("".concat(this._className, "._startMainThreadTimer")), this._checkTimer < 0 && (this._checkTimer = setInterval(this.onCheckTimer.bind(this), 1e3));
        } }, { key: "stopTimer", value: function() {
          var e4 = this._moduleMap.get(Mg), t3 = e4.isWorkerEnabled();
          wl.log("".concat(this._className, ".stopTimer isWorkerEnabled:").concat(t3, " seed:").concat(this._checkTimer)), t3 ? e4.stopWorkerTimer() : this._stopMainThreadTimer();
        } }, { key: "_stopMainThreadTimer", value: function() {
          wl.log("".concat(this._className, "._stopMainThreadTimer")), this._checkTimer > 0 && (clearInterval(this._checkTimer), this._checkTimer = -1, this._checkCount = 0);
        } }, { key: "_stopMainThreadSocket", value: function() {
          wl.log("".concat(this._className, "._stopMainThreadSocket"));
          var e4 = this._moduleMap.get(fg);
          e4.setIsWorkerEnabled(true), e4.reConnect();
        } }, { key: "_startMainThreadSocket", value: function() {
          wl.log("".concat(this._className, "._startMainThreadSocket"));
          var e4 = this._moduleMap.get(fg);
          e4.setIsWorkerEnabled(false), e4.reConnect();
        } }, { key: "onWorkerTimerEnabled", value: function() {
          wl.log("".concat(this._className, ".onWorkerTimerEnabled, disable main thread timer and socket")), this._stopMainThreadTimer(), this._stopMainThreadSocket();
        } }, { key: "onWorkerTimerDisabled", value: function() {
          wl.log("".concat(this._className, ".onWorkerTimerDisabled, enable main thread timer and socket")), this._startMainThreadTimer(), this._startMainThreadSocket();
        } }, { key: "onCheckTimer", value: function() {
          this._checkCount += 1;
          var e4, t3 = S2(this._moduleMap);
          try {
            for (t3.s(); !(e4 = t3.n()).done; ) {
              var n3 = m2(e4.value, 2)[1];
              n3.onCheckTimer && n3.onCheckTimer(this._checkCount);
            }
          } catch (o3) {
            t3.e(o3);
          } finally {
            t3.f();
          }
        } }, { key: "_initReadyList", value: function() {
          var e4 = this;
          this._readyList = [this._moduleMap.get(Qp), this._moduleMap.get(sg)], this._readyList.forEach(function(t3) {
            t3.ready(function() {
              return e4._onModuleReady();
            });
          });
        } }, { key: "_onModuleReady", value: function() {
          var e4 = true;
          if (this._readyList.forEach(function(t4) {
            t4.isReady() || (e4 = false);
          }), e4 && !this._isReady) {
            this._isReady = true, this._outerEmitter.emit(pr.SDK_READY);
            var t3 = Date.now() - this._startLoginTs;
            wl.warn("SDK is ready. cost ".concat(t3, " ms")), this._startLoginTs = Date.now();
            var n3 = this._moduleMap.get(lg).getNetworkType(), o3 = this._ssoLogForReady.getStartTs() + Ol;
            this._ssoLogForReady.setNetworkType(n3).setMessage(t3).start(o3).end();
          }
        } }, { key: "login", value: function() {
          0 === this._startLoginTs && (Ll(), this._startLoginTs = Date.now(), this._startTimer(), this._moduleMap.get(lg).start(), this._ssoLogForReady = new __(f_.SDK_READY), this._reason = Zh.LOGGING_IN);
        } }, { key: "onLoginFailed", value: function() {
          this._startLoginTs = 0;
        } }, { key: "getOuterEmitterInstance", value: function() {
          return null === this._outerEmitter && (this._outerEmitter = new WM(), Nv(this._outerEmitter), this._outerEmitter._emit = this._outerEmitter.emit, this._outerEmitter.emit = (function(e4, t3) {
            var n3 = this;
            if (e4 === pr.CONVERSATION_LIST_UPDATED || e4 === pr.FRIEND_LIST_UPDATED || e4 === pr.GROUP_LIST_UPDATED)
              if (this._eventThrottleMap.has(e4)) {
                var o3 = Date.now(), r3 = this._eventThrottleMap.get(e4);
                o3 - r3.last < 1e3 ? (r3.timeoutID && clearTimeout(r3.timeoutID), r3.timeoutID = setTimeout(function() {
                  r3.last = o3, n3._outerEmitter._emit.apply(n3._outerEmitter, [e4, { name: e4, data: n3._getEventData(e4) }]);
                }, 500)) : (r3.last = o3, this._outerEmitter._emit.apply(this._outerEmitter, [e4, { name: e4, data: this._getEventData(e4) }]));
              } else
                this._eventThrottleMap.set(e4, { last: Date.now(), timeoutID: -1 }), this._outerEmitter._emit.apply(this._outerEmitter, [e4, { name: e4, data: this._getEventData(e4) }]);
            else
              this._outerEmitter._emit.apply(this._outerEmitter, [e4, { name: e4, data: arguments[1] }]);
          }).bind(this)), this._outerEmitter;
        } }, { key: "_getEventData", value: function(e4) {
          return e4 === pr.CONVERSATION_LIST_UPDATED ? this._moduleMap.get(sg).getLocalConversationList() : e4 === pr.FRIEND_LIST_UPDATED ? this._moduleMap.get(og).getLocalFriendList(false) : e4 === pr.GROUP_LIST_UPDATED ? this._moduleMap.get(ng).getLocalGroupList() : void 0;
        } }, { key: "getInnerEmitterInstance", value: function() {
          return null === this._innerEmitter && (this._innerEmitter = new WM(), this._innerEmitter._emit = this._innerEmitter.emit, this._innerEmitter.emit = (function(e4, t3) {
            var n3;
            Xl(arguments[1]) && arguments[1].data ? (wl.warn("inner eventData has data property, please check!"), n3 = [e4, { name: arguments[0], data: arguments[1].data }]) : n3 = [e4, { name: arguments[0], data: arguments[1] }], this._innerEmitter._emit.apply(this._innerEmitter, n3);
          }).bind(this)), this._innerEmitter;
        } }, { key: "hasModule", value: function(e4) {
          return this._moduleMap.has(e4);
        } }, { key: "getModule", value: function(e4) {
          return this._moduleMap.get(e4);
        } }, { key: "isReady", value: function() {
          return this._isReady;
        } }, { key: "getNotReadyReason", value: function() {
          return this._reason;
        } }, { key: "setNotReadyReason", value: function(e4) {
          this._reason = e4;
        } }, { key: "onError", value: function(e4) {
          wl.warn("Oops! code:".concat(e4.code, " message:").concat(e4.message)), new __(f_.ERROR).setMessage("code:".concat(e4.code, " message:").concat(e4.message)).setNetworkType(this.getModule(lg).getNetworkType()).setLevel("error").end(), this.getOuterEmitterInstance().emit(pr.ERROR, e4);
        } }, { key: "reset", value: function() {
          wl.log("".concat(this._className, ".reset")), Ll();
          var e4, t3 = S2(this._moduleMap);
          try {
            for (t3.s(); !(e4 = t3.n()).done; ) {
              var n3 = m2(e4.value, 2)[1];
              n3.reset && n3.reset();
            }
          } catch (s3) {
            t3.e(s3);
          } finally {
            t3.f();
          }
          this._startLoginTs = 0, this._initReadyList(), this._isReady = false, this.stopTimer(), this._outerEmitter.emit(pr.SDK_NOT_READY);
          var o3, r3 = S2(this._eventThrottleMap);
          try {
            for (r3.s(); !(o3 = r3.n()).done; ) {
              var a3 = m2(o3.value, 2)[1];
              a3.timeoutID && clearTimeout(a3.timeoutID);
            }
          } catch (s3) {
            r3.e(s3);
          } finally {
            r3.f();
          }
          this._eventThrottleMap.clear();
        } }]), e3;
      }(), QT = function() {
        function e3() {
          o2(this, e3), this._funcMap = /* @__PURE__ */ new Map();
        }
        return a2(e3, [{ key: "defense", value: function(e4, t3) {
          var n3 = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : void 0;
          if ("string" != typeof e4)
            return null;
          if (0 === e4.length)
            return null;
          if ("function" != typeof t3)
            return null;
          if (this._funcMap.has(e4) && this._funcMap.get(e4).has(t3))
            return this._funcMap.get(e4).get(t3);
          this._funcMap.has(e4) || this._funcMap.set(e4, /* @__PURE__ */ new Map());
          var o3 = null;
          return this._funcMap.get(e4).has(t3) ? o3 = this._funcMap.get(e4).get(t3) : (o3 = this._pack(e4, t3, n3), this._funcMap.get(e4).set(t3, o3)), o3;
        } }, { key: "defenseOnce", value: function(e4, t3) {
          var n3 = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : void 0;
          return "function" != typeof t3 ? null : this._pack(e4, t3, n3);
        } }, { key: "find", value: function(e4, t3) {
          return "string" != typeof e4 || 0 === e4.length || "function" != typeof t3 ? null : this._funcMap.has(e4) ? this._funcMap.get(e4).has(t3) ? this._funcMap.get(e4).get(t3) : (wl.log("SafetyCallback.find: 找不到 func —— ".concat(e4, "/").concat("" !== t3.name ? t3.name : "[anonymous]")), null) : (wl.log("SafetyCallback.find: 找不到 eventName-".concat(e4, " 对应的 func")), null);
        } }, { key: "delete", value: function(e4, t3) {
          return "function" == typeof t3 && (!!this._funcMap.has(e4) && (!!this._funcMap.get(e4).has(t3) && (this._funcMap.get(e4).delete(t3), 0 === this._funcMap.get(e4).size && this._funcMap.delete(e4), true)));
        } }, { key: "_pack", value: function(e4, t3, n3) {
          return function() {
            try {
              t3.apply(n3, Array.from(arguments));
            } catch (s3) {
              var o3 = Object.values(pr).indexOf(e4);
              if (-1 !== o3) {
                var r3 = Object.keys(pr)[o3];
                wl.warn("接入侧事件 TIM.EVENT.".concat(r3, " 对应的回调函数逻辑存在问题，请检查！"), s3);
              }
              var a3 = new __(f_.CALLBACK_FUNCTION_ERROR);
              a3.setMessage("eventName:".concat(e4)).setMoreMessage(s3.message).end();
            }
          };
        } }]), e3;
      }(), ZT = function() {
        function e3(t3) {
          o2(this, e3);
          var n3 = { SDKAppID: t3.SDKAppID, unlimitedAVChatRoom: t3.unlimitedAVChatRoom || false, scene: t3.scene || "", oversea: t3.oversea || false, instanceID: Nd(), devMode: t3.devMode || false, proxyServer: t3.proxyServer || void 0 };
          this._moduleManager = new XT(n3), this._safetyCallbackFactory = new QT();
        }
        return a2(e3, [{ key: "onError", value: function(e4) {
          this._moduleManager.onError(e4);
        } }, { key: "login", value: function(e4) {
          return this._moduleManager.login(), this._moduleManager.getModule(Qp).login(e4);
        } }, { key: "logout", value: function() {
          var e4 = this;
          return this._moduleManager.getModule(Qp).logout().then(function(t3) {
            return e4._moduleManager.reset(), t3;
          });
        } }, { key: "isReady", value: function() {
          return this._moduleManager.isReady();
        } }, { key: "getNotReadyReason", value: function() {
          return this._moduleManager.getNotReadyReason();
        } }, { key: "destroy", value: function() {
          var e4 = this;
          return this.logout().finally(function() {
            e4._moduleManager.stopTimer(), e4._moduleManager.getModule(Mg).terminate(), e4._moduleManager.getModule(fg).dealloc();
            var t3 = e4._moduleManager.getOuterEmitterInstance(), n3 = e4._moduleManager.getModule(ig);
            t3.emit(pr.SDK_DESTROY, { SDKAppID: n3.getSDKAppID() });
          });
        } }, { key: "on", value: function(e4, t3, n3) {
          e4 === pr.GROUP_SYSTEM_NOTICE_RECEIVED && wl.warn("！！！TIM.EVENT.GROUP_SYSTEM_NOTICE_RECEIVED v2.6.0起弃用，为了更好的体验，请在 TIM.EVENT.MESSAGE_RECEIVED 事件回调内接收处理群系统通知，详细请参考：https://web.sdk.qcloud.com/im/doc/zh-cn/Message.html#.GroupSystemNoticePayload"), wl.debug("on", "eventName:".concat(e4)), this._moduleManager.getOuterEmitterInstance().on(e4, this._safetyCallbackFactory.defense(e4, t3, n3), n3);
        } }, { key: "once", value: function(e4, t3, n3) {
          wl.debug("once", "eventName:".concat(e4)), this._moduleManager.getOuterEmitterInstance().once(e4, this._safetyCallbackFactory.defenseOnce(e4, t3, n3), n3 || this);
        } }, { key: "off", value: function(e4, t3, n3, o3) {
          wl.debug("off", "eventName:".concat(e4));
          var r3 = this._safetyCallbackFactory.find(e4, t3);
          null !== r3 && (this._moduleManager.getOuterEmitterInstance().off(e4, r3, n3, o3), this._safetyCallbackFactory.delete(e4, t3));
        } }, { key: "registerPlugin", value: function(e4) {
          this._moduleManager.getModule(gg).registerPlugin(e4);
        } }, { key: "setLogLevel", value: function(e4) {
          if (e4 <= 0) {
            formatAppLog("log", "at node_modules/tim-js-sdk/tim-js.js:1", ["", " ________  ______  __       __  __       __  ________  _______", "|        \\|      \\|  \\     /  \\|  \\  _  |  \\|        \\|       \\", " \\$$$$$$$$ \\$$$$$$| $$\\   /  $$| $$ / \\ | $$| $$$$$$$$| $$$$$$$\\", "   | $$     | $$  | $$$\\ /  $$$| $$/  $\\| $$| $$__    | $$__/ $$", "   | $$     | $$  | $$$$\\  $$$$| $$  $$$\\ $$| $$  \\   | $$    $$", "   | $$     | $$  | $$\\$$ $$ $$| $$ $$\\$$\\$$| $$$$$   | $$$$$$$\\", "   | $$    _| $$_ | $$ \\$$$| $$| $$$$  \\$$$$| $$_____ | $$__/ $$", "   | $$   |   $$ \\| $$  \\$ | $$| $$$    \\$$$| $$     \\| $$    $$", "    \\$$    \\$$$$$$ \\$$      \\$$ \\$$      \\$$ \\$$$$$$$$ \\$$$$$$$", "", ""].join("\n")), formatAppLog("log", "at node_modules/tim-js-sdk/tim-js.js:1", "%cIM 智能客服，随时随地解决您的问题 →_→ https://cloud.tencent.com/act/event/smarty-service?from=im-doc", "color:#006eff"), formatAppLog("log", "at node_modules/tim-js-sdk/tim-js.js:1", "%c从v2.11.2起，SDK 支持了 WebSocket，小程序需要添加受信域名！升级指引: https://web.sdk.qcloud.com/im/doc/zh-cn/tutorial-02-upgradeguideline.html", "color:#ff0000");
            formatAppLog("log", "at node_modules/tim-js-sdk/tim-js.js:1", ["", "参考以下文档，会更快解决问题哦！(#^.^#)\n", "SDK 更新日志: https://cloud.tencent.com/document/product/269/38492\n", "SDK 接口文档: https://web.sdk.qcloud.com/im/doc/zh-cn/SDK.html\n", "常见问题: https://web.sdk.qcloud.com/im/doc/zh-cn/tutorial-01-faq.html\n", "反馈问题？戳我提 issue: https://github.com/tencentyun/TIMSDK/issues\n", "如果您需要在生产环境关闭上面的日志，请 tim.setLogLevel(1)\n"].join("\n"));
          }
          wl.setLevel(e4);
        } }, { key: "createTextMessage", value: function(e4) {
          return this._moduleManager.getModule(Zp).createTextMessage(e4);
        } }, { key: "createTextAtMessage", value: function(e4) {
          return this._moduleManager.getModule(Zp).createTextMessage(e4);
        } }, { key: "createImageMessage", value: function(e4) {
          return this._moduleManager.getModule(Zp).createImageMessage(e4);
        } }, { key: "createAudioMessage", value: function(e4) {
          return this._moduleManager.getModule(Zp).createAudioMessage(e4);
        } }, { key: "createVideoMessage", value: function(e4) {
          return this._moduleManager.getModule(Zp).createVideoMessage(e4);
        } }, { key: "createCustomMessage", value: function(e4) {
          return this._moduleManager.getModule(Zp).createCustomMessage(e4);
        } }, { key: "createFaceMessage", value: function(e4) {
          return this._moduleManager.getModule(Zp).createFaceMessage(e4);
        } }, { key: "createFileMessage", value: function(e4) {
          return this._moduleManager.getModule(Zp).createFileMessage(e4);
        } }, { key: "createLocationMessage", value: function(e4) {
          return this._moduleManager.getModule(Zp).createLocationMessage(e4);
        } }, { key: "createMergerMessage", value: function(e4) {
          return this._moduleManager.getModule(Zp).createMergerMessage(e4);
        } }, { key: "downloadMergerMessage", value: function(e4) {
          return e4.type !== gr.MSG_MERGER ? Rv(new Av({ code: Zh.MESSAGE_MERGER_TYPE_INVALID, message: e_.MESSAGE_MERGER_TYPE_INVALID })) : qd(e4.payload.downloadKey) ? Rv(new Av({ code: Zh.MESSAGE_MERGER_KEY_INVALID, message: e_.MESSAGE_MERGER_KEY_INVALID })) : this._moduleManager.getModule(Zp).downloadMergerMessage(e4).catch(function(e5) {
            return Rv(new Av({ code: Zh.MESSAGE_MERGER_DOWNLOAD_FAIL, message: e_.MESSAGE_MERGER_DOWNLOAD_FAIL }));
          });
        } }, { key: "createForwardMessage", value: function(e4) {
          return this._moduleManager.getModule(Zp).createForwardMessage(e4);
        } }, { key: "sendMessage", value: function(e4, t3) {
          return e4 instanceof Mv ? this._moduleManager.getModule(Zp).sendMessageInstance(e4, t3) : Rv(new Av({ code: Zh.MESSAGE_SEND_NEED_MESSAGE_INSTANCE, message: e_.MESSAGE_SEND_NEED_MESSAGE_INSTANCE }));
        } }, { key: "callExperimentalAPI", value: function(e4, t3) {
          return "handleGroupInvitation" === e4 ? this._moduleManager.getModule(ng).handleGroupInvitation(t3) : Rv(new Av({ code: Zh.INVALID_OPERATION, message: e_.INVALID_OPERATION }));
        } }, { key: "revokeMessage", value: function(e4) {
          return this._moduleManager.getModule(Zp).revokeMessage(e4);
        } }, { key: "resendMessage", value: function(e4) {
          return this._moduleManager.getModule(Zp).resendMessage(e4);
        } }, { key: "deleteMessage", value: function(e4) {
          return this._moduleManager.getModule(Zp).deleteMessage(e4);
        } }, { key: "modifyMessage", value: function(e4) {
          return this._moduleManager.getModule(Zp).modifyRemoteMessage(e4);
        } }, { key: "getMessageList", value: function(e4) {
          return this._moduleManager.getModule(sg).getMessageList(e4);
        } }, { key: "getMessageListHopping", value: function(e4) {
          return this._moduleManager.getModule(sg).getMessageListHopping(e4);
        } }, { key: "sendMessageReadReceipt", value: function(e4) {
          return this._moduleManager.getModule(sg).sendReadReceipt(e4);
        } }, { key: "getMessageReadReceiptList", value: function(e4) {
          return this._moduleManager.getModule(sg).getReadReceiptList(e4);
        } }, { key: "getGroupMessageReadMemberList", value: function(e4) {
          return this._moduleManager.getModule(ng).getReadReceiptDetail(e4);
        } }, { key: "findMessage", value: function(e4) {
          return this._moduleManager.getModule(sg).findMessage(e4);
        } }, { key: "setMessageRead", value: function(e4) {
          return this._moduleManager.getModule(sg).setMessageRead(e4);
        } }, { key: "getConversationList", value: function(e4) {
          return this._moduleManager.getModule(sg).getConversationList(e4);
        } }, { key: "getConversationProfile", value: function(e4) {
          return this._moduleManager.getModule(sg).getConversationProfile(e4);
        } }, { key: "deleteConversation", value: function(e4) {
          return this._moduleManager.getModule(sg).deleteConversation(e4);
        } }, { key: "pinConversation", value: function(e4) {
          return this._moduleManager.getModule(sg).pinConversation(e4);
        } }, { key: "setAllMessageRead", value: function(e4) {
          return this._moduleManager.getModule(sg).setAllMessageRead(e4);
        } }, { key: "setMessageRemindType", value: function(e4) {
          return this._moduleManager.getModule(sg).setMessageRemindType(e4);
        } }, { key: "getMyProfile", value: function() {
          return this._moduleManager.getModule(eg).getMyProfile();
        } }, { key: "getUserProfile", value: function(e4) {
          return this._moduleManager.getModule(eg).getUserProfile(e4);
        } }, { key: "updateMyProfile", value: function(e4) {
          return this._moduleManager.getModule(eg).updateMyProfile(e4);
        } }, { key: "getBlacklist", value: function() {
          return this._moduleManager.getModule(eg).getLocalBlacklist();
        } }, { key: "addToBlacklist", value: function(e4) {
          return this._moduleManager.getModule(eg).addBlacklist(e4);
        } }, { key: "removeFromBlacklist", value: function(e4) {
          return this._moduleManager.getModule(eg).deleteBlacklist(e4);
        } }, { key: "getFriendList", value: function() {
          var e4 = this._moduleManager.getModule(og);
          return e4 ? e4.getLocalFriendList() : Rv({ code: Zh.CANNOT_FIND_MODULE, message: e_.CANNOT_FIND_MODULE });
        } }, { key: "addFriend", value: function(e4) {
          var t3 = this._moduleManager.getModule(og);
          return t3 ? t3.addFriend(e4) : Rv({ code: Zh.CANNOT_FIND_MODULE, message: e_.CANNOT_FIND_MODULE });
        } }, { key: "deleteFriend", value: function(e4) {
          var t3 = this._moduleManager.getModule(og);
          return t3 ? t3.deleteFriend(e4) : Rv({ code: Zh.CANNOT_FIND_MODULE, message: e_.CANNOT_FIND_MODULE });
        } }, { key: "checkFriend", value: function(e4) {
          var t3 = this._moduleManager.getModule(og);
          return t3 ? t3.checkFriend(e4) : Rv({ code: Zh.CANNOT_FIND_MODULE, message: e_.CANNOT_FIND_MODULE });
        } }, { key: "getFriendProfile", value: function(e4) {
          var t3 = this._moduleManager.getModule(og);
          return t3 ? t3.getFriendProfile(e4) : Rv({ code: Zh.CANNOT_FIND_MODULE, message: e_.CANNOT_FIND_MODULE });
        } }, { key: "updateFriend", value: function(e4) {
          var t3 = this._moduleManager.getModule(og);
          return t3 ? t3.updateFriend(e4) : Rv({ code: Zh.CANNOT_FIND_MODULE, message: e_.CANNOT_FIND_MODULE });
        } }, { key: "getFriendApplicationList", value: function() {
          var e4 = this._moduleManager.getModule(og);
          return e4 ? e4.getLocalFriendApplicationList() : Rv({ code: Zh.CANNOT_FIND_MODULE, message: e_.CANNOT_FIND_MODULE });
        } }, { key: "acceptFriendApplication", value: function(e4) {
          var t3 = this._moduleManager.getModule(og);
          return t3 ? t3.acceptFriendApplication(e4) : Rv({ code: Zh.CANNOT_FIND_MODULE, message: e_.CANNOT_FIND_MODULE });
        } }, { key: "refuseFriendApplication", value: function(e4) {
          var t3 = this._moduleManager.getModule(og);
          return t3 ? t3.refuseFriendApplication(e4) : Rv({ code: Zh.CANNOT_FIND_MODULE, message: e_.CANNOT_FIND_MODULE });
        } }, { key: "deleteFriendApplication", value: function(e4) {
          var t3 = this._moduleManager.getModule(og);
          return t3 ? t3.deleteFriendApplication(e4) : Rv({ code: Zh.CANNOT_FIND_MODULE, message: e_.CANNOT_FIND_MODULE });
        } }, { key: "setFriendApplicationRead", value: function() {
          var e4 = this._moduleManager.getModule(og);
          return e4 ? e4.setFriendApplicationRead() : Rv({ code: Zh.CANNOT_FIND_MODULE, message: e_.CANNOT_FIND_MODULE });
        } }, { key: "getFriendGroupList", value: function() {
          var e4 = this._moduleManager.getModule(og);
          return e4 ? e4.getLocalFriendGroupList() : Rv({ code: Zh.CANNOT_FIND_MODULE, message: e_.CANNOT_FIND_MODULE });
        } }, { key: "createFriendGroup", value: function(e4) {
          var t3 = this._moduleManager.getModule(og);
          return t3 ? t3.createFriendGroup(e4) : Rv({ code: Zh.CANNOT_FIND_MODULE, message: e_.CANNOT_FIND_MODULE });
        } }, { key: "deleteFriendGroup", value: function(e4) {
          var t3 = this._moduleManager.getModule(og);
          return t3 ? t3.deleteFriendGroup(e4) : Rv({ code: Zh.CANNOT_FIND_MODULE, message: e_.CANNOT_FIND_MODULE });
        } }, { key: "addToFriendGroup", value: function(e4) {
          var t3 = this._moduleManager.getModule(og);
          return t3 ? t3.addToFriendGroup(e4) : Rv({ code: Zh.CANNOT_FIND_MODULE, message: e_.CANNOT_FIND_MODULE });
        } }, { key: "removeFromFriendGroup", value: function(e4) {
          var t3 = this._moduleManager.getModule(og);
          return t3 ? t3.removeFromFriendGroup(e4) : Rv({ code: Zh.CANNOT_FIND_MODULE, message: e_.CANNOT_FIND_MODULE });
        } }, { key: "renameFriendGroup", value: function(e4) {
          var t3 = this._moduleManager.getModule(og);
          return t3 ? t3.renameFriendGroup(e4) : Rv({ code: Zh.CANNOT_FIND_MODULE, message: e_.CANNOT_FIND_MODULE });
        } }, { key: "getGroupList", value: function(e4) {
          return this._moduleManager.getModule(ng).getGroupList(e4);
        } }, { key: "getGroupProfile", value: function(e4) {
          return this._moduleManager.getModule(ng).getGroupProfile(e4);
        } }, { key: "createGroup", value: function(e4) {
          return this._moduleManager.getModule(ng).createGroup(e4);
        } }, { key: "dismissGroup", value: function(e4) {
          return this._moduleManager.getModule(ng).dismissGroup(e4);
        } }, { key: "updateGroupProfile", value: function(e4) {
          return this._moduleManager.getModule(ng).updateGroupProfile(e4);
        } }, { key: "joinGroup", value: function(e4) {
          return this._moduleManager.getModule(ng).joinGroup(e4);
        } }, { key: "quitGroup", value: function(e4) {
          return this._moduleManager.getModule(ng).quitGroup(e4);
        } }, { key: "searchGroupByID", value: function(e4) {
          return this._moduleManager.getModule(ng).searchGroupByID(e4);
        } }, { key: "getGroupOnlineMemberCount", value: function(e4) {
          return this._moduleManager.getModule(ng).getGroupOnlineMemberCount(e4);
        } }, { key: "changeGroupOwner", value: function(e4) {
          return this._moduleManager.getModule(ng).changeGroupOwner(e4);
        } }, { key: "handleGroupApplication", value: function(e4) {
          return this._moduleManager.getModule(ng).handleGroupApplication(e4);
        } }, { key: "initGroupAttributes", value: function(e4) {
          return this._moduleManager.getModule(ng).initGroupAttributes(e4);
        } }, { key: "setGroupAttributes", value: function(e4) {
          return this._moduleManager.getModule(ng).setGroupAttributes(e4);
        } }, { key: "deleteGroupAttributes", value: function(e4) {
          return this._moduleManager.getModule(ng).deleteGroupAttributes(e4);
        } }, { key: "getGroupAttributes", value: function(e4) {
          return this._moduleManager.getModule(ng).getGroupAttributes(e4);
        } }, { key: "getGroupMemberList", value: function(e4) {
          return this._moduleManager.getModule(rg).getGroupMemberList(e4);
        } }, { key: "getGroupMemberProfile", value: function(e4) {
          return this._moduleManager.getModule(rg).getGroupMemberProfile(e4);
        } }, { key: "addGroupMember", value: function(e4) {
          return this._moduleManager.getModule(rg).addGroupMember(e4);
        } }, { key: "deleteGroupMember", value: function(e4) {
          return this._moduleManager.getModule(rg).deleteGroupMember(e4);
        } }, { key: "setGroupMemberMuteTime", value: function(e4) {
          return this._moduleManager.getModule(rg).setGroupMemberMuteTime(e4);
        } }, { key: "setGroupMemberRole", value: function(e4) {
          return this._moduleManager.getModule(rg).setGroupMemberRole(e4);
        } }, { key: "setGroupMemberNameCard", value: function(e4) {
          return this._moduleManager.getModule(rg).setGroupMemberNameCard(e4);
        } }, { key: "setGroupMemberCustomField", value: function(e4) {
          return this._moduleManager.getModule(rg).setGroupMemberCustomField(e4);
        } }, { key: "getJoinedCommunityList", value: function() {
          return this._moduleManager.getModule(ag).getJoinedCommunityList();
        } }, { key: "createTopicInCommunity", value: function(e4) {
          return this._moduleManager.getModule(ag).createTopicInCommunity(e4);
        } }, { key: "deleteTopicFromCommunity", value: function(e4) {
          return this._moduleManager.getModule(ag).deleteTopicFromCommunity(e4);
        } }, { key: "updateTopicProfile", value: function(e4) {
          return this._moduleManager.getModule(ag).updateTopicProfile(e4);
        } }, { key: "getTopicList", value: function(e4) {
          return this._moduleManager.getModule(ag).getTopicList(e4);
        } }]), e3;
      }(), eS = { login: "login", logout: "logout", destroy: "destroy", on: "on", off: "off", ready: "ready", setLogLevel: "setLogLevel", joinGroup: "joinGroup", quitGroup: "quitGroup", registerPlugin: "registerPlugin", getGroupOnlineMemberCount: "getGroupOnlineMemberCount" };
      function tS(e3, t3) {
        if (e3.isReady() || void 0 !== eS[t3])
          return true;
        var n3 = e3.getNotReadyReason(), o3 = "";
        Object.getOwnPropertyNames(Zh).forEach(function(e4) {
          Zh[e4] === n3 && (o3 = e_[e4]);
        });
        var r3 = { code: n3, message: "".concat(o3, "导致 sdk not ready。").concat(t3, " ").concat(e_.SDK_IS_NOT_READY, "，请参考 https://web.sdk.qcloud.com/im/doc/zh-cn/module-EVENT.html#.SDK_READY") };
        return e3.onError(r3), r3;
      }
      var nS = {}, oS = {};
      return oS.create = function(e3) {
        var n3 = 0;
        if ($l(e3.SDKAppID))
          n3 = e3.SDKAppID;
        else if (wl.warn("TIM.create SDKAppID 的类型应该为 Number，请修改！"), n3 = parseInt(e3.SDKAppID), isNaN(n3))
          return wl.error("TIM.create failed. 解析 SDKAppID 失败，请检查传参！"), null;
        if (n3 && nS[n3])
          return nS[n3];
        wl.log("TIM.create");
        var o3 = new ZT(t2(t2({}, e3), {}, { SDKAppID: n3 }));
        o3.on(pr.SDK_DESTROY, function(e4) {
          nS[e4.data.SDKAppID] = null, delete nS[e4.data.SDKAppID];
        });
        var r3 = function(e4) {
          var t3 = /* @__PURE__ */ Object.create(null);
          return Object.keys(Hp).forEach(function(n4) {
            if (e4[n4]) {
              var o4 = Hp[n4], r4 = new Cr();
              t3[o4] = function() {
                var t4 = Array.from(arguments);
                return r4.use(function(t5, o5) {
                  var r5 = tS(e4, n4);
                  return true === r5 ? o5() : Rv(r5);
                }).use(function(e5, t5) {
                  if (true === Vd(e5, Kp[n4], o4))
                    return t5();
                }).use(function(t5, o5) {
                  return e4[n4].apply(e4, t5);
                }), r4.run(t4);
              };
            }
          }), t3;
        }(o3);
        return nS[n3] = r3, wl.log("TIM.create ok"), r3;
      }, oS.TYPES = gr, oS.EVENT = pr, oS.VERSION = "2.20.0", wl.log("TIM.VERSION: ".concat(oS.VERSION)), oS;
    });
  })(timJs);
  var timJsExports = timJs.exports;
  const TIM = /* @__PURE__ */ getDefaultExportFromCjs(timJsExports);
  var cosJsSdkV5 = { exports: {} };
  (function(module, exports) {
    (function webpackUniversalModuleDefinition(root2, factory) {
      module.exports = factory();
    })(window, function() {
      return (
        /******/
        function(modules) {
          var installedModules = {};
          function __webpack_require__2(moduleId) {
            if (installedModules[moduleId]) {
              return installedModules[moduleId].exports;
            }
            var module2 = installedModules[moduleId] = {
              /******/
              i: moduleId,
              /******/
              l: false,
              /******/
              exports: {}
              /******/
            };
            modules[moduleId].call(module2.exports, module2, module2.exports, __webpack_require__2);
            module2.l = true;
            return module2.exports;
          }
          __webpack_require__2.m = modules;
          __webpack_require__2.c = installedModules;
          __webpack_require__2.d = function(exports2, name, getter) {
            if (!__webpack_require__2.o(exports2, name)) {
              Object.defineProperty(exports2, name, { enumerable: true, get: getter });
            }
          };
          __webpack_require__2.r = function(exports2) {
            if (typeof Symbol !== "undefined" && Symbol.toStringTag) {
              Object.defineProperty(exports2, Symbol.toStringTag, { value: "Module" });
            }
            Object.defineProperty(exports2, "__esModule", { value: true });
          };
          __webpack_require__2.t = function(value, mode) {
            if (mode & 1)
              value = __webpack_require__2(value);
            if (mode & 8)
              return value;
            if (mode & 4 && typeof value === "object" && value && value.__esModule)
              return value;
            var ns2 = /* @__PURE__ */ Object.create(null);
            __webpack_require__2.r(ns2);
            Object.defineProperty(ns2, "default", { enumerable: true, value });
            if (mode & 2 && typeof value != "string")
              for (var key in value)
                __webpack_require__2.d(ns2, key, (function(key2) {
                  return value[key2];
                }).bind(null, key));
            return ns2;
          };
          __webpack_require__2.n = function(module2) {
            var getter = module2 && module2.__esModule ? (
              /******/
              function getDefault() {
                return module2["default"];
              }
            ) : (
              /******/
              function getModuleExports() {
                return module2;
              }
            );
            __webpack_require__2.d(getter, "a", getter);
            return getter;
          };
          __webpack_require__2.o = function(object2, property) {
            return Object.prototype.hasOwnProperty.call(object2, property);
          };
          __webpack_require__2.p = "/dist/";
          return __webpack_require__2(__webpack_require__2.s = "./index.js");
        }({
          /***/
          "./index.js": (
            /*!******************!*\
              !*** ./index.js ***!
              \******************/
            /*! no static exports found */
            /***/
            function(module2, exports2, __webpack_require__2) {
              var COS2 = __webpack_require__2(
                /*! ./src/cos */
                "./src/cos.js"
              );
              module2.exports = COS2;
            }
          ),
          /***/
          "./lib/beacon.min.js": (
            /*!***************************!*\
              !*** ./lib/beacon.min.js ***!
              \***************************/
            /*! no static exports found */
            /***/
            function(module2, exports2, __webpack_require__2) {
              var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__2;
              var _typeof2 = __webpack_require__2(
                /*! @babel/runtime/helpers/typeof */
                "./node_modules/@babel/runtime/helpers/typeof.js"
              );
              !function(t2, e2) {
                "object" == _typeof2(exports2) && "undefined" != typeof module2 ? module2.exports = e2() : !(__WEBPACK_AMD_DEFINE_FACTORY__ = e2, __WEBPACK_AMD_DEFINE_RESULT__2 = typeof __WEBPACK_AMD_DEFINE_FACTORY__ === "function" ? __WEBPACK_AMD_DEFINE_FACTORY__.call(exports2, __webpack_require__2, exports2, module2) : __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__2 !== void 0 && (module2.exports = __WEBPACK_AMD_DEFINE_RESULT__2));
              }(this, function() {
                var _t2 = function t2(e2, n22) {
                  return _t2 = Object.setPrototypeOf || {
                    __proto__: []
                  } instanceof Array && function(t22, e22) {
                    t22.__proto__ = e22;
                  } || function(t22, e22) {
                    for (var n3 in e22) {
                      Object.prototype.hasOwnProperty.call(e22, n3) && (t22[n3] = e22[n3]);
                    }
                  }, _t2(e2, n22);
                };
                var _e2 = function e2() {
                  return _e2 = Object.assign || function(t2) {
                    for (var e22, n22 = 1, r22 = arguments.length; n22 < r22; n22++) {
                      for (var o22 in e22 = arguments[n22]) {
                        Object.prototype.hasOwnProperty.call(e22, o22) && (t2[o22] = e22[o22]);
                      }
                    }
                    return t2;
                  }, _e2.apply(this, arguments);
                };
                function n2(t2, e2, n22, r22) {
                  return new (n22 || (n22 = Promise))(function(o22, i22) {
                    function s22(t22) {
                      try {
                        u22(r22.next(t22));
                      } catch (t3) {
                        i22(t3);
                      }
                    }
                    function a22(t22) {
                      try {
                        u22(r22.throw(t22));
                      } catch (t3) {
                        i22(t3);
                      }
                    }
                    function u22(t22) {
                      var e22;
                      t22.done ? o22(t22.value) : (e22 = t22.value, e22 instanceof n22 ? e22 : new n22(function(t3) {
                        t3(e22);
                      })).then(s22, a22);
                    }
                    u22((r22 = r22.apply(t2, e2 || [])).next());
                  });
                }
                function r2(t2, e2) {
                  var n22, r22, o22, i22, s22 = {
                    label: 0,
                    sent: function sent() {
                      if (1 & o22[0])
                        throw o22[1];
                      return o22[1];
                    },
                    trys: [],
                    ops: []
                  };
                  return i22 = {
                    next: a22(0),
                    throw: a22(1),
                    return: a22(2)
                  }, "function" == typeof Symbol && (i22[Symbol.iterator] = function() {
                    return this;
                  }), i22;
                  function a22(i3) {
                    return function(a3) {
                      return function(i4) {
                        if (n22)
                          throw new TypeError("Generator is already executing.");
                        for (; s22; ) {
                          try {
                            if (n22 = 1, r22 && (o22 = 2 & i4[0] ? r22.return : i4[0] ? r22.throw || ((o22 = r22.return) && o22.call(r22), 0) : r22.next) && !(o22 = o22.call(r22, i4[1])).done)
                              return o22;
                            switch (r22 = 0, o22 && (i4 = [2 & i4[0], o22.value]), i4[0]) {
                              case 0:
                              case 1:
                                o22 = i4;
                                break;
                              case 4:
                                return s22.label++, {
                                  value: i4[1],
                                  done: false
                                };
                              case 5:
                                s22.label++, r22 = i4[1], i4 = [0];
                                continue;
                              case 7:
                                i4 = s22.ops.pop(), s22.trys.pop();
                                continue;
                              default:
                                if (!(o22 = s22.trys, (o22 = o22.length > 0 && o22[o22.length - 1]) || 6 !== i4[0] && 2 !== i4[0])) {
                                  s22 = 0;
                                  continue;
                                }
                                if (3 === i4[0] && (!o22 || i4[1] > o22[0] && i4[1] < o22[3])) {
                                  s22.label = i4[1];
                                  break;
                                }
                                if (6 === i4[0] && s22.label < o22[1]) {
                                  s22.label = o22[1], o22 = i4;
                                  break;
                                }
                                if (o22 && s22.label < o22[2]) {
                                  s22.label = o22[2], s22.ops.push(i4);
                                  break;
                                }
                                o22[2] && s22.ops.pop(), s22.trys.pop();
                                continue;
                            }
                            i4 = e2.call(t2, s22);
                          } catch (t22) {
                            i4 = [6, t22], r22 = 0;
                          } finally {
                            n22 = o22 = 0;
                          }
                        }
                        if (5 & i4[0])
                          throw i4[1];
                        return {
                          value: i4[0] ? i4[1] : void 0,
                          done: true
                        };
                      }([i3, a3]);
                    };
                  }
                }
                var o2 = "__BEACON_", i2 = "__BEACON_deviceId", s2 = "last_report_time", a2 = "sending_event_ids", u2 = "beacon_config", c2 = "beacon_config_request_time", l2 = function() {
                  function t2() {
                    var t22 = this;
                    this.emit = function(e2, n22) {
                      if (t22) {
                        var r22, o22 = t22.__EventsList[e2];
                        if (null == o22 ? void 0 : o22.length) {
                          o22 = o22.slice();
                          for (var i22 = 0; i22 < o22.length; i22++) {
                            r22 = o22[i22];
                            try {
                              var s22 = r22.callback.apply(t22, [n22]);
                              if (1 === r22.type && t22.remove(e2, r22.callback), false === s22)
                                break;
                            } catch (t3) {
                              throw t3;
                            }
                          }
                        }
                        return t22;
                      }
                    }, this.__EventsList = {};
                  }
                  return t2.prototype.indexOf = function(t22, e2) {
                    for (var n22 = 0; n22 < t22.length; n22++) {
                      if (t22[n22].callback === e2)
                        return n22;
                    }
                    return -1;
                  }, t2.prototype.on = function(t22, e2, n22) {
                    if (void 0 === n22 && (n22 = 0), this) {
                      var r22 = this.__EventsList[t22];
                      if (r22 || (r22 = this.__EventsList[t22] = []), -1 === this.indexOf(r22, e2)) {
                        var o22 = {
                          name: t22,
                          type: n22 || 0,
                          callback: e2
                        };
                        return r22.push(o22), this;
                      }
                      return this;
                    }
                  }, t2.prototype.one = function(t22, e2) {
                    this.on(t22, e2, 1);
                  }, t2.prototype.remove = function(t22, e2) {
                    if (this) {
                      var n22 = this.__EventsList[t22];
                      if (!n22)
                        return null;
                      if (!e2) {
                        try {
                          delete this.__EventsList[t22];
                        } catch (t3) {
                        }
                        return null;
                      }
                      if (n22.length) {
                        var r22 = this.indexOf(n22, e2);
                        n22.splice(r22, 1);
                      }
                      return this;
                    }
                  }, t2;
                }();
                function p2(t2, e2) {
                  for (var n22 = {}, r22 = 0, o22 = Object.keys(t2); r22 < o22.length; r22++) {
                    var i22 = o22[r22], s22 = t2[i22];
                    if ("string" == typeof s22)
                      n22[h2(i22)] = h2(s22);
                    else {
                      if (e2)
                        throw new Error("value mast be string  !!!!");
                      n22[h2(String(i22))] = h2(String(s22));
                    }
                  }
                  return n22;
                }
                function h2(t2) {
                  if ("string" != typeof t2)
                    return t2;
                  try {
                    return t2.replace(new RegExp("\\|", "g"), "%7C").replace(new RegExp("\\&", "g"), "%26").replace(new RegExp("\\=", "g"), "%3D").replace(new RegExp("\\+", "g"), "%2B");
                  } catch (t22) {
                    return "";
                  }
                }
                function f2(t2) {
                  return String(t2.A99) + String(t2.A100);
                }
                var d2 = function d22() {
                };
                var v2 = function() {
                  function t2(t22) {
                    var n22 = this;
                    this.lifeCycle = new l2(), this.uploadJobQueue = [], this.additionalParams = {}, this.delayTime = 0, this._normalLogPipeline = function(t3) {
                      if (!t3 || !t3.reduce || !t3.length)
                        throw new TypeError("createPipeline 方法需要传入至少有一个 pipe 的数组");
                      return 1 === t3.length ? function(e2, n3) {
                        t3[0](e2, n3 || d2);
                      } : t3.reduce(function(t4, e2) {
                        return function(n3, r22) {
                          return void 0 === r22 && (r22 = d2), t4(n3, function(t5) {
                            return null == e2 ? void 0 : e2(t5, r22);
                          });
                        };
                      });
                    }([function(t3) {
                      n22.send({
                        url: n22.strategy.getUploadUrl(),
                        data: t3,
                        method: "post",
                        contentType: "application/json;charset=UTF-8"
                      }, function() {
                        var e2 = n22.config.onReportSuccess;
                        "function" == typeof e2 && e2(JSON.stringify(t3.events));
                      }, function() {
                        var e2 = n22.config.onReportFail;
                        "function" == typeof e2 && e2(JSON.stringify(t3.events));
                      });
                    }]), function(t3, e2) {
                      if (!t3)
                        throw e2 instanceof Error ? e2 : new Error(e2);
                    }(Boolean(t22.appkey), "appkey must be initial"), this.config = _e2({}, t22);
                  }
                  return t2.prototype.onUserAction = function(t22, e2) {
                    this.preReport(t22, e2, false);
                  }, t2.prototype.onDirectUserAction = function(t22, e2) {
                    this.preReport(t22, e2, true);
                  }, t2.prototype.preReport = function(t22, e2, n22) {
                    t22 ? this.strategy.isEventUpOnOff() && (this.strategy.isBlackEvent(t22) || this.strategy.isSampleEvent(t22) || this.onReport(t22, e2, n22)) : this.errorReport.reportError("602", " no eventCode");
                  }, t2.prototype.addAdditionalParams = function(t22) {
                    for (var e2 = 0, n22 = Object.keys(t22); e2 < n22.length; e2++) {
                      var r22 = n22[e2];
                      this.additionalParams[r22] = t22[r22];
                    }
                  }, t2.prototype.setChannelId = function(t22) {
                    this.commonInfo.channelID = String(t22);
                  }, t2.prototype.setOpenId = function(t22) {
                    this.commonInfo.openid = String(t22);
                  }, t2.prototype.setUnionid = function(t22) {
                    this.commonInfo.unid = String(t22);
                  }, t2.prototype.getDeviceId = function() {
                    return this.commonInfo.deviceId;
                  }, t2.prototype.getCommonInfo = function() {
                    return this.commonInfo;
                  }, t2.prototype.removeSendingId = function(t22) {
                    try {
                      var e2 = JSON.parse(this.storage.getItem(a2)), n22 = e2.indexOf(t22);
                      -1 != n22 && (e2.splice(n22, 1), this.storage.setItem(a2, JSON.stringify(e2)));
                    } catch (t3) {
                    }
                  }, t2;
                }(), g2 = function() {
                  function t2(t22, e2, n22, r22) {
                    this.requestParams = {}, this.network = r22, this.requestParams.attaid = "00400014144", this.requestParams.token = "6478159937", this.requestParams.product_id = t22.appkey, this.requestParams.platform = n22, this.requestParams.uin = e2.deviceId, this.requestParams.model = "", this.requestParams.os = n22, this.requestParams.app_version = t22.appVersion, this.requestParams.sdk_version = e2.sdkVersion, this.requestParams.error_stack = "", this.uploadUrl = t22.isOversea ? "https://htrace.wetvinfo.com/kv" : "https://h.trace.qq.com/kv";
                  }
                  return t2.prototype.reportError = function(t22, e2) {
                    this.requestParams._dc = Math.random(), this.requestParams.error_msg = e2, this.requestParams.error_code = t22, this.network.get(this.uploadUrl, {
                      params: this.requestParams
                    }).catch(function(t3) {
                    });
                  }, t2;
                }(), y2 = function() {
                  function t2(t22, e2, n22, r22, o22) {
                    this.strategy = {
                      isEventUpOnOff: true,
                      httpsUploadUrl: "https://otheve.beacon.qq.com/analytics/v2_upload",
                      requestInterval: 30,
                      blacklist: [],
                      samplelist: []
                    }, this.realSample = {}, this.appkey = "", this.needQueryConfig = true, this.appkey = e2.appkey, this.storage = r22, this.needQueryConfig = t22;
                    try {
                      var i22 = JSON.parse(this.storage.getItem(u2));
                      i22 && this.processData(i22);
                    } catch (t3) {
                    }
                    e2.isOversea && (this.strategy.httpsUploadUrl = "https://svibeacon.onezapp.com/analytics/v2_upload"), !e2.isOversea && this.needRequestConfig() && this.requestConfig(e2.appVersion, n22, o22);
                  }
                  return t2.prototype.requestConfig = function(t22, e2, n22) {
                    var r22 = this;
                    this.storage.setItem(c2, Date.now().toString()), n22.post("https://oth.str.beacon.qq.com/trpc.beacon.configserver.BeaconConfigService/QueryConfig", {
                      platformId: "undefined" == typeof wx ? "3" : "4",
                      mainAppKey: this.appkey,
                      appVersion: t22,
                      sdkVersion: e2.sdkVersion,
                      osVersion: e2.userAgent,
                      model: "",
                      packageName: "",
                      params: {
                        A3: e2.deviceId
                      }
                    }).then(function(t3) {
                      if (0 == t3.data.ret)
                        try {
                          var e22 = JSON.parse(t3.data.beaconConfig);
                          e22 && (r22.processData(e22), r22.storage.setItem(u2, t3.data.beaconConfig));
                        } catch (t4) {
                        }
                      else
                        r22.processData(null), r22.storage.setItem(u2, "");
                    }).catch(function(t3) {
                    });
                  }, t2.prototype.processData = function(t22) {
                    var e2, n22, r22, o22, i22;
                    this.strategy.isEventUpOnOff = null !== (e2 = null == t22 ? void 0 : t22.isEventUpOnOff) && void 0 !== e2 ? e2 : this.strategy.isEventUpOnOff, this.strategy.httpsUploadUrl = null !== (n22 = null == t22 ? void 0 : t22.httpsUploadUrl) && void 0 !== n22 ? n22 : this.strategy.httpsUploadUrl, this.strategy.requestInterval = null !== (r22 = null == t22 ? void 0 : t22.requestInterval) && void 0 !== r22 ? r22 : this.strategy.requestInterval, this.strategy.blacklist = null !== (o22 = null == t22 ? void 0 : t22.blacklist) && void 0 !== o22 ? o22 : this.strategy.blacklist, this.strategy.samplelist = null !== (i22 = null == t22 ? void 0 : t22.samplelist) && void 0 !== i22 ? i22 : this.strategy.samplelist;
                    for (var s22 = 0, a22 = this.strategy.samplelist; s22 < a22.length; s22++) {
                      var u22 = a22[s22].split(",");
                      2 == u22.length && (this.realSample[u22[0]] = u22[1]);
                    }
                  }, t2.prototype.needRequestConfig = function() {
                    if (!this.needQueryConfig)
                      return false;
                    var t22 = Number(this.storage.getItem(c2));
                    return Date.now() - t22 > 60 * this.strategy.requestInterval * 1e3;
                  }, t2.prototype.getUploadUrl = function() {
                    return this.strategy.httpsUploadUrl + "?appkey=" + this.appkey;
                  }, t2.prototype.isBlackEvent = function(t22) {
                    return -1 != this.strategy.blacklist.indexOf(t22);
                  }, t2.prototype.isEventUpOnOff = function() {
                    return this.strategy.isEventUpOnOff;
                  }, t2.prototype.isSampleEvent = function(t22) {
                    return !!Object.prototype.hasOwnProperty.call(this.realSample, t22) && this.realSample[t22] < Math.floor(Math.random() * Math.floor(1e4));
                  }, t2;
                }(), m2 = "session_storage_key", w2 = function() {
                  function t2(t22, e2, n22) {
                    this.getSessionStackDepth = 0, this.beacon = n22, this.storage = t22, this.duration = e2, this.appkey = n22.config.appkey;
                  }
                  return t2.prototype.getSession = function() {
                    this.getSessionStackDepth += 1;
                    var t22 = this.storage.getItem(m2);
                    if (!t22)
                      return this.createSession();
                    var e2 = "", n22 = 0;
                    try {
                      var r22 = JSON.parse(t22) || {
                        sessionId: void 0,
                        sessionStart: void 0
                      };
                      if (!r22.sessionId || !r22.sessionStart)
                        return this.createSession();
                      var o22 = Number(this.storage.getItem(s2));
                      if (Date.now() - o22 > this.duration)
                        return this.createSession();
                      e2 = r22.sessionId, n22 = r22.sessionStart, this.getSessionStackDepth = 0;
                    } catch (t3) {
                    }
                    return {
                      sessionId: e2,
                      sessionStart: n22
                    };
                  }, t2.prototype.createSession = function() {
                    var t22 = Date.now(), e2 = {
                      sessionId: this.appkey + "_" + t22.toString(),
                      sessionStart: t22
                    };
                    this.storage.setItem(m2, JSON.stringify(e2)), this.storage.setItem(s2, t22.toString());
                    var n22 = "is_new_user", r22 = this.storage.getItem(n22);
                    return this.getSessionStackDepth <= 1 && this.beacon.onDirectUserAction("rqd_applaunched", {
                      A21: r22 ? "N" : "Y"
                    }), this.storage.setItem(n22, JSON.stringify(false)), e2;
                  }, t2;
                }();
                function b2() {
                  var t2 = navigator.userAgent, e2 = t2.indexOf("compatible") > -1 && t2.indexOf("MSIE") > -1, n22 = t2.indexOf("Edge") > -1 && !e2, r22 = t2.indexOf("Trident") > -1 && t2.indexOf("rv:11.0") > -1;
                  if (e2) {
                    new RegExp("MSIE (\\d+\\.\\d+);").test(t2);
                    var o22 = parseFloat(RegExp.$1);
                    return 7 == o22 ? 7 : 8 == o22 ? 8 : 9 == o22 ? 9 : 10 == o22 ? 10 : 6;
                  }
                  return n22 ? -2 : r22 ? 11 : -1;
                }
                function S2(t2, e2) {
                  var n22, r22;
                  return (n22 = "https://tun-cos-1258344701.file.myqcloud.com/fp.js", void 0 === r22 && (r22 = Date.now() + "-" + Math.random()), new Promise(function(t22, e22) {
                    if (document.getElementById(r22))
                      t22(void 0);
                    else {
                      var o22 = document.getElementsByTagName("head")[0], i22 = document.createElement("script");
                      i22.onload = function() {
                        return function() {
                          i22.onload = null, t22(void 0);
                        };
                      }, i22.onerror = function(t3) {
                        i22.onerror = null, o22.removeChild(i22), e22(t3);
                      }, i22.src = n22, i22.id = r22, o22.appendChild(i22);
                    }
                  })).then(function() {
                    new Fingerprint().getQimei36(t2, e2);
                  }).catch(function(t22) {
                  }), "";
                }
                var _I = function I2() {
                  return (_I = Object.assign || function(t2) {
                    for (var e2, n22 = 1, r22 = arguments.length; n22 < r22; n22++) {
                      for (var o22 in e2 = arguments[n22]) {
                        Object.prototype.hasOwnProperty.call(e2, o22) && (t2[o22] = e2[o22]);
                      }
                    }
                    return t2;
                  }).apply(this, arguments);
                };
                var E2, k = function() {
                  function t2(t22, e2) {
                    void 0 === e2 && (e2 = {}), this.reportOptions = {}, this.config = t22, this.reportOptions = e2;
                  }
                  return t2.canUseDB = function() {
                    return !!(null === window || void 0 === window ? void 0 : window.indexedDB);
                  }, t2.prototype.openDB = function() {
                    var e2 = this;
                    return new Promise(function(n22, r22) {
                      if (!t2.canUseDB())
                        return r22({
                          message: "当前不支持 indexeddb"
                        });
                      var o22 = e2.config, i22 = o22.name, s22 = o22.version, a22 = o22.stores, u22 = indexedDB.open(i22, s22);
                      u22.onsuccess = function() {
                        e2.db = u22.result, n22(), _I({
                          result: 1,
                          func: "open",
                          params: JSON.stringify(e2.config)
                        }, e2.reportOptions);
                      }, u22.onerror = function(t22) {
                        var n3, o3;
                        r22(t22), _I({
                          result: 0,
                          func: "open",
                          params: JSON.stringify(e2.config),
                          error_msg: null === (o3 = null === (n3 = t22.target) || void 0 === n3 ? void 0 : n3.error) || void 0 === o3 ? void 0 : o3.message
                        }, e2.reportOptions);
                      }, u22.onupgradeneeded = function() {
                        e2.db = u22.result;
                        try {
                          null == a22 || a22.forEach(function(t22) {
                            e2.createStore(t22);
                          });
                        } catch (t22) {
                          _I({
                            result: 0,
                            func: "open",
                            params: JSON.stringify(e2.config),
                            error_msg: t22.message
                          }, e2.reportOptions), r22(t22);
                        }
                      };
                    });
                  }, t2.prototype.useStore = function(t22) {
                    return this.storeName = t22, this;
                  }, t2.prototype.deleteDB = function() {
                    var t22 = this;
                    return this.closeDB(), new Promise(function(e2, n22) {
                      var r22 = indexedDB.deleteDatabase(t22.config.name);
                      r22.onsuccess = function() {
                        return e2();
                      }, r22.onerror = n22;
                    });
                  }, t2.prototype.closeDB = function() {
                    var t22;
                    null === (t22 = this.db) || void 0 === t22 || t22.close(), this.db = null;
                  }, t2.prototype.getStoreCount = function() {
                    var t22 = this;
                    return new Promise(function(e2, n22) {
                      var r22 = t22.getStore("readonly").count();
                      r22.onsuccess = function() {
                        return e2(r22.result);
                      }, r22.onerror = n22;
                    });
                  }, t2.prototype.clearStore = function() {
                    var t22 = this;
                    return new Promise(function(e2, n22) {
                      var r22 = t22.getStore("readwrite").clear();
                      r22.onsuccess = function() {
                        return e2();
                      }, r22.onerror = n22;
                    });
                  }, t2.prototype.add = function(t22, e2) {
                    var n22 = this;
                    return new Promise(function(r22, o22) {
                      var i22 = n22.getStore("readwrite").add(t22, e2);
                      i22.onsuccess = function() {
                        r22(i22.result);
                      }, i22.onerror = o22;
                    });
                  }, t2.prototype.put = function(t22, e2) {
                    var n22 = this;
                    return new Promise(function(r22, o22) {
                      var i22 = n22.getStore("readwrite").put(t22, e2);
                      i22.onsuccess = function() {
                        r22(i22.result);
                      }, i22.onerror = o22;
                    });
                  }, t2.prototype.getStoreAllData = function() {
                    var t22 = this;
                    return new Promise(function(e2, n22) {
                      var r22 = t22.getStore("readonly").openCursor(), o22 = [];
                      r22.onsuccess = function() {
                        var t3;
                        if (null === (t3 = r22.result) || void 0 === t3 ? void 0 : t3.value) {
                          var n3 = r22.result.value;
                          o22.push(n3), r22.result.continue();
                        } else
                          e2(o22);
                      }, r22.onerror = n22;
                    });
                  }, t2.prototype.getDataRangeByIndex = function(t22, e2, n22, r22, o22) {
                    var i22 = this;
                    return new Promise(function(s22, a22) {
                      var u22 = i22.getStore().index(t22), c22 = IDBKeyRange.bound(e2, n22, r22, o22), l22 = [], p22 = u22.openCursor(c22);
                      p22.onsuccess = function() {
                        var t3;
                        (null === (t3 = null == p22 ? void 0 : p22.result) || void 0 === t3 ? void 0 : t3.value) ? (l22.push(null == p22 ? void 0 : p22.result.value), null == p22 || p22.result.continue()) : s22(l22);
                      }, p22.onerror = a22;
                    });
                  }, t2.prototype.removeDataByIndex = function(t22, e2, n22, r22, o22) {
                    var i22 = this;
                    return new Promise(function(s22, a22) {
                      var u22 = i22.getStore("readwrite").index(t22), c22 = IDBKeyRange.bound(e2, n22, r22, o22), l22 = u22.openCursor(c22), p22 = 0;
                      l22.onsuccess = function(t3) {
                        var e22 = t3.target.result;
                        e22 ? (p22 += 1, e22.delete(), e22.continue()) : s22(p22);
                      }, l22.onerror = a22;
                    });
                  }, t2.prototype.createStore = function(t22) {
                    var e2 = t22.name, n22 = t22.indexes, r22 = void 0 === n22 ? [] : n22, o22 = t22.options;
                    if (this.db) {
                      this.db.objectStoreNames.contains(e2) && this.db.deleteObjectStore(e2);
                      var i22 = this.db.createObjectStore(e2, o22);
                      r22.forEach(function(t3) {
                        i22.createIndex(t3.indexName, t3.keyPath, t3.options);
                      });
                    }
                  }, t2.prototype.getStore = function(t22) {
                    var e2;
                    return void 0 === t22 && (t22 = "readonly"), null === (e2 = this.db) || void 0 === e2 ? void 0 : e2.transaction(this.storeName, t22).objectStore(this.storeName);
                  }, t2;
                }(), O2 = "event_table_v3", C2 = "eventId", D2 = function() {
                  function t2(t22) {
                    this.isReady = false, this.taskQueue = Promise.resolve(), this.db = new k({
                      name: "Beacon_" + t22 + "_V3",
                      version: 1,
                      stores: [{
                        name: O2,
                        options: {
                          keyPath: C2
                        },
                        indexes: [{
                          indexName: C2,
                          keyPath: C2,
                          options: {
                            unique: true
                          }
                        }]
                      }]
                    }), this.open();
                  }
                  return t2.prototype.getCount = function() {
                    var t22 = this;
                    return this.readyExec(function() {
                      return t22.db.getStoreCount();
                    });
                  }, t2.prototype.setItem = function(t22, e2) {
                    var n22 = this;
                    return this.readyExec(function() {
                      return n22.db.add({
                        eventId: t22,
                        value: e2
                      });
                    });
                  }, t2.prototype.getItem = function(t22) {
                    return n2(this, void 0, void 0, function() {
                      var e2 = this;
                      return r2(this, function(n22) {
                        return [2, this.readyExec(function() {
                          return e2.db.getDataRangeByIndex(C2, t22, t22);
                        })];
                      });
                    });
                  }, t2.prototype.removeItem = function(t22) {
                    var e2 = this;
                    return this.readyExec(function() {
                      return e2.db.removeDataByIndex(C2, t22, t22);
                    });
                  }, t2.prototype.updateItem = function(t22, e2) {
                    var n22 = this;
                    return this.readyExec(function() {
                      return n22.db.put({
                        eventId: t22,
                        value: e2
                      });
                    });
                  }, t2.prototype.iterate = function(t22) {
                    var e2 = this;
                    return this.readyExec(function() {
                      return e2.db.getStoreAllData().then(function(e22) {
                        e22.forEach(function(e3) {
                          t22(e3.value);
                        });
                      });
                    });
                  }, t2.prototype.open = function() {
                    return n2(this, void 0, void 0, function() {
                      var t22 = this;
                      return r2(this, function(e2) {
                        switch (e2.label) {
                          case 0:
                            return this.taskQueue = this.taskQueue.then(function() {
                              return t22.db.openDB();
                            }), [4, this.taskQueue];
                          case 1:
                            return e2.sent(), this.isReady = true, this.db.useStore(O2), [2];
                        }
                      });
                    });
                  }, t2.prototype.readyExec = function(t22) {
                    return this.isReady ? t22() : (this.taskQueue = this.taskQueue.then(function() {
                      return t22();
                    }), this.taskQueue);
                  }, t2;
                }(), x = function() {
                  function t2(t22) {
                    this.keyObject = {}, this.storage = t22;
                  }
                  return t2.prototype.getCount = function() {
                    return this.storage.getStoreCount();
                  }, t2.prototype.removeItem = function(t22) {
                    this.storage.removeItem(t22), delete this.keyObject[t22];
                  }, t2.prototype.setItem = function(t22, e2) {
                    var n22 = JSON.stringify(e2);
                    this.storage.setItem(t22, n22), this.keyObject[t22] = e2;
                  }, t2.prototype.iterate = function(t22) {
                    for (var e2 = Object.keys(this.keyObject), n22 = 0; n22 < e2.length; n22++) {
                      var r22 = this.storage.getItem(e2[n22]);
                      t22(JSON.parse(r22));
                    }
                  }, t2;
                }(), _2 = function() {
                  function t2(t22, e2) {
                    var n22 = this;
                    this.dbEventCount = 0, b2() > 0 || !window.indexedDB || /X5Lite/.test(navigator.userAgent) ? (this.store = new x(e2), this.dbEventCount = this.store.getCount()) : (this.store = new D2(t22), this.getCount().then(function(t3) {
                      n22.dbEventCount = t3;
                    }).catch(function(t3) {
                    }));
                  }
                  return t2.prototype.getCount = function() {
                    return n2(this, void 0, void 0, function() {
                      return r2(this, function(t22) {
                        switch (t22.label) {
                          case 0:
                            return t22.trys.push([0, 2, , 3]), [4, this.store.getCount()];
                          case 1:
                            return [2, t22.sent()];
                          case 2:
                            return t22.sent(), [2, Promise.reject()];
                          case 3:
                            return [2];
                        }
                      });
                    });
                  }, t2.prototype.insertEvent = function(t22, e2) {
                    return n2(this, void 0, void 0, function() {
                      var n22, o22;
                      return r2(this, function(r22) {
                        switch (r22.label) {
                          case 0:
                            if (this.dbEventCount >= 1e4)
                              return [2, Promise.reject()];
                            n22 = f2(t22.mapValue), r22.label = 1;
                          case 1:
                            return r22.trys.push([1, 3, , 4]), this.dbEventCount++, [4, this.store.setItem(n22, t22)];
                          case 2:
                            return [2, r22.sent()];
                          case 3:
                            return o22 = r22.sent(), e2 && e2(o22, t22), this.dbEventCount--, [2, Promise.reject()];
                          case 4:
                            return [2];
                        }
                      });
                    });
                  }, t2.prototype.getEvents = function() {
                    return n2(this, void 0, void 0, function() {
                      var t22;
                      return r2(this, function(e2) {
                        switch (e2.label) {
                          case 0:
                            t22 = [], e2.label = 1;
                          case 1:
                            return e2.trys.push([1, 3, , 4]), [4, this.store.iterate(function(e22) {
                              t22.push(e22);
                            })];
                          case 2:
                            return e2.sent(), [2, Promise.all(t22)];
                          case 3:
                            return e2.sent(), [2, Promise.all(t22)];
                          case 4:
                            return [2];
                        }
                      });
                    });
                  }, t2.prototype.removeEvent = function(t22) {
                    return n2(this, void 0, void 0, function() {
                      var e2;
                      return r2(this, function(n22) {
                        switch (n22.label) {
                          case 0:
                            e2 = f2(t22.mapValue), n22.label = 1;
                          case 1:
                            return n22.trys.push([1, 3, , 4]), this.dbEventCount--, [4, this.store.removeItem(e2)];
                          case 2:
                            return [2, n22.sent()];
                          case 3:
                            return n22.sent(), this.dbEventCount++, [2, Promise.reject()];
                          case 4:
                            return [2];
                        }
                      });
                    });
                  }, t2;
                }(), _P = function P2() {
                  return (_P = Object.assign || function(t2) {
                    for (var e2, n22 = 1, r22 = arguments.length; n22 < r22; n22++) {
                      for (var o22 in e2 = arguments[n22]) {
                        Object.prototype.hasOwnProperty.call(e2, o22) && (t2[o22] = e2[o22]);
                      }
                    }
                    return t2;
                  }).apply(this, arguments);
                };
                function T2(t2) {
                  try {
                    return decodeURIComponent(t2.replace(/\+/g, " "));
                  } catch (t22) {
                    return null;
                  }
                }
                function U2(t2, e2) {
                  var n22 = [null, void 0, "", NaN].includes(t2);
                  if (e2.isSkipEmpty && n22)
                    return null;
                  var r22 = !e2.isSkipEmpty && n22 ? "" : t2;
                  try {
                    return e2.encode ? encodeURIComponent(r22) : r22;
                  } catch (t22) {
                    return null;
                  }
                }
                function N2(t2, e2) {
                  void 0 === e2 && (e2 = {
                    encode: true,
                    isSkipEmpty: false
                  });
                  var n22 = t2.url, r22 = t2.query, o22 = void 0 === r22 ? {} : r22, i22 = t2.hash, s22 = n22.split("#"), a22 = s22[0], u22 = s22[1], c22 = void 0 === u22 ? "" : u22, l22 = a22.split("?")[0], p22 = [], h22 = U2(i22 || c22, e2), f22 = _P(_P({}, function(t22) {
                    var e22 = t22.split("#"), n3 = e22[0], r3 = e22[1], o3 = void 0 === r3 ? "" : r3, i3 = n3.split("?"), s3 = i3[0], a3 = i3[1], u3 = void 0 === a3 ? "" : a3, c3 = T2(o3), l3 = /* @__PURE__ */ Object.create(null);
                    return u3.split("&").forEach(function(t3) {
                      var e3 = t3.split("="), n4 = e3[0], r4 = e3[1], o4 = void 0 === r4 ? "" : r4, i4 = T2(n4), s4 = T2(o4);
                      null === i4 || null === s4 || "" === i4 && "" === s4 || l3[i4] || (l3[i4] = s4);
                    }), {
                      url: s3,
                      query: l3,
                      hash: c3
                    };
                  }(n22).query), o22);
                  return Object.keys(f22).forEach(function(t22) {
                    var n3 = U2(t22, e2), r3 = U2(f22[t22], e2);
                    null !== n3 && null !== r3 && p22.push(n3 + "=" + r3);
                  }), l22 + (p22.length ? "?" + p22.join("&") : "") + (h22 ? "#" + h22 : "");
                }
                function j2(t2, e2) {
                  return new Promise(function(n22, r22) {
                    if (e2 && document.querySelectorAll("script[data-tag=" + e2 + "]").length)
                      return n22();
                    var o22 = document.createElement("script"), i22 = _P({
                      type: "text/javascript",
                      charset: "utf-8"
                    }, t2);
                    Object.keys(i22).forEach(function(t22) {
                      return function(t3, e22, n3) {
                        if (t3)
                          return void 0 === n3 ? t3.getAttribute(e22) : t3.setAttribute(e22, n3);
                      }(o22, t22, i22[t22]);
                    }), e2 && (o22.dataset.tag = e2), o22.onload = function() {
                      return n22();
                    }, o22.onreadystatechange = function() {
                      var t22 = o22.readyState;
                      ["complete", "loaded"].includes(t22) && (o22.onreadystatechange = null, n22());
                    }, o22.onerror = r22, document.body.appendChild(o22);
                  });
                }
                !function(t2) {
                  t2[t2.equal = 0] = "equal", t2[t2.low = -1] = "low", t2[t2.high = 1] = "high";
                }(E2 || (E2 = {}));
                var _q = function q2() {
                  return (_q = Object.assign || function(t2) {
                    for (var e2, n22 = 1, r22 = arguments.length; n22 < r22; n22++) {
                      for (var o22 in e2 = arguments[n22]) {
                        Object.prototype.hasOwnProperty.call(e2, o22) && (t2[o22] = e2[o22]);
                      }
                    }
                    return t2;
                  }).apply(this, arguments);
                };
                function A2(t2, e2, n22, r22) {
                  return new (n22 || (n22 = Promise))(function(o22, i22) {
                    function s22(t22) {
                      try {
                        u22(r22.next(t22));
                      } catch (t3) {
                        i22(t3);
                      }
                    }
                    function a22(t22) {
                      try {
                        u22(r22.throw(t22));
                      } catch (t3) {
                        i22(t3);
                      }
                    }
                    function u22(t22) {
                      var e22;
                      t22.done ? o22(t22.value) : (e22 = t22.value, e22 instanceof n22 ? e22 : new n22(function(t3) {
                        t3(e22);
                      })).then(s22, a22);
                    }
                    u22((r22 = r22.apply(t2, e2 || [])).next());
                  });
                }
                function R2(t2, e2) {
                  var n22, r22, o22, i22, s22 = {
                    label: 0,
                    sent: function sent() {
                      if (1 & o22[0])
                        throw o22[1];
                      return o22[1];
                    },
                    trys: [],
                    ops: []
                  };
                  return i22 = {
                    next: a22(0),
                    throw: a22(1),
                    return: a22(2)
                  }, "function" == typeof Symbol && (i22[Symbol.iterator] = function() {
                    return this;
                  }), i22;
                  function a22(i3) {
                    return function(a3) {
                      return function(i4) {
                        if (n22)
                          throw new TypeError("Generator is already executing.");
                        for (; s22; ) {
                          try {
                            if (n22 = 1, r22 && (o22 = 2 & i4[0] ? r22.return : i4[0] ? r22.throw || ((o22 = r22.return) && o22.call(r22), 0) : r22.next) && !(o22 = o22.call(r22, i4[1])).done)
                              return o22;
                            switch (r22 = 0, o22 && (i4 = [2 & i4[0], o22.value]), i4[0]) {
                              case 0:
                              case 1:
                                o22 = i4;
                                break;
                              case 4:
                                return s22.label++, {
                                  value: i4[1],
                                  done: false
                                };
                              case 5:
                                s22.label++, r22 = i4[1], i4 = [0];
                                continue;
                              case 7:
                                i4 = s22.ops.pop(), s22.trys.pop();
                                continue;
                              default:
                                if (!((o22 = (o22 = s22.trys).length > 0 && o22[o22.length - 1]) || 6 !== i4[0] && 2 !== i4[0])) {
                                  s22 = 0;
                                  continue;
                                }
                                if (3 === i4[0] && (!o22 || i4[1] > o22[0] && i4[1] < o22[3])) {
                                  s22.label = i4[1];
                                  break;
                                }
                                if (6 === i4[0] && s22.label < o22[1]) {
                                  s22.label = o22[1], o22 = i4;
                                  break;
                                }
                                if (o22 && s22.label < o22[2]) {
                                  s22.label = o22[2], s22.ops.push(i4);
                                  break;
                                }
                                o22[2] && s22.ops.pop(), s22.trys.pop();
                                continue;
                            }
                            i4 = e2.call(t2, s22);
                          } catch (t22) {
                            i4 = [6, t22], r22 = 0;
                          } finally {
                            n22 = o22 = 0;
                          }
                        }
                        if (5 & i4[0])
                          throw i4[1];
                        return {
                          value: i4[0] ? i4[1] : void 0,
                          done: true
                        };
                      }([i3, a3]);
                    };
                  }
                }
                var B2 = function() {
                  function t2() {
                    this.interceptors = [];
                  }
                  return t2.prototype.use = function(t22, e2) {
                    return this.interceptors.push({
                      resolved: t22,
                      rejected: e2
                    }), this.interceptors.length - 1;
                  }, t2.prototype.traverse = function(t22, e2) {
                    void 0 === e2 && (e2 = false);
                    var n22 = Promise.resolve(t22);
                    return (e2 ? Array.prototype.reduceRight : Array.prototype.reduce).call(this.interceptors, function(t3, e22) {
                      if (e22) {
                        var r22 = e22.resolved, o22 = e22.rejected;
                        n22 = n22.then(r22, o22);
                      }
                      return t3;
                    }, ""), n22;
                  }, t2.prototype.eject = function(t22) {
                    this.interceptors[t22] && (this.interceptors[t22] = null);
                  }, t2;
                }(), J2 = {
                  defaults: {
                    timeout: 0,
                    method: "GET",
                    mode: "cors",
                    redirect: "follow",
                    credentials: "same-origin"
                  },
                  headers: {
                    common: {
                      Accept: "application/json, text/plain, */*"
                    },
                    POST: {
                      "Content-Type": "application/x-www-form-urlencoded"
                    },
                    PUT: {
                      "Content-Type": "application/x-www-form-urlencoded"
                    },
                    PATCH: {
                      "Content-Type": "application/x-www-form-urlencoded"
                    }
                  },
                  baseURL: "",
                  polyfillUrl: "https://vm.gtimg.cn/comps/script/fetch.min.js",
                  interceptors: {
                    request: new B2(),
                    response: new B2()
                  }
                }, V2 = /^([a-z][a-z\d+\-.]*:)?\/\//i, Q2 = Object.prototype.toString;
                function L2(t2) {
                  return A2(this, void 0, void 0, function() {
                    var e2;
                    return R2(this, function(n22) {
                      switch (n22.label) {
                        case 0:
                          if (window.fetch)
                            return [2];
                          n22.label = 1;
                        case 1:
                          return n22.trys.push([1, 3, , 4]), [4, j2({
                            src: t2
                          })];
                        case 2:
                          return n22.sent(), [3, 4];
                        case 3:
                          throw e2 = n22.sent(), new Error("加载 polyfill " + t2 + " 失败: " + e2.message);
                        case 4:
                          return [2];
                      }
                    });
                  });
                }
                function M2(t2) {
                  return ["Accept", "Content-Type"].forEach(function(e2) {
                    return n22 = e2, void ((r22 = t2.headers) && Object.keys(r22).forEach(function(t22) {
                      t22 !== n22 && t22.toUpperCase() === n22.toUpperCase() && (r22[n22] = r22[t22], delete r22[t22]);
                    }));
                    var n22, r22;
                  }), function(t22) {
                    if ("[object Object]" !== Q2.call(t22))
                      return false;
                    var e2 = Object.getPrototypeOf(t22);
                    return null === e2 || e2 === Object.prototype;
                  }(t2.body) && (t2.body = JSON.stringify(t2.body), t2.headers && (t2.headers["Content-Type"] = "application/json;charset=utf-8")), t2;
                }
                function K2(t2) {
                  return A2(this, void 0, void 0, function() {
                    var e2, n22, r22, o22, i22, s22, a22, u22, c22, l22, p22, h22, f22, d22, v22, g22, y22;
                    return R2(this, function(m22) {
                      switch (m22.label) {
                        case 0:
                          return e2 = J2.baseURL, n22 = J2.defaults, r22 = J2.interceptors, [4, L2(J2.polyfillUrl)];
                        case 1:
                          return m22.sent(), (o22 = _q(_q({}, n22), t2)).headers || (o22.headers = function(t22) {
                            void 0 === t22 && (t22 = "GET");
                            var e22 = J2.headers[t22] || {};
                            return _q(_q({}, J2.headers.common), e22);
                          }(o22.method)), M2(o22), [4, r22.request.traverse(o22, true)];
                        case 2:
                          if ((i22 = m22.sent()) instanceof Error)
                            throw i22;
                          return i22.url = function(t22, e22) {
                            return !t22 || V2.test(e22) ? e22 : t22.replace(/\/+$/, "") + "/" + e22.replace(/^\/+/, "");
                          }(e2, i22.url), s22 = i22.url, a22 = i22.timeout, u22 = i22.params, c22 = i22.method, l22 = ["GET", "DELETE", "OPTIONS", "HEAD"].includes(void 0 === c22 ? "GET" : c22) && !!u22, p22 = l22 ? N2({
                            url: s22,
                            query: u22
                          }) : s22, h22 = [], a22 && !i22.signal && (v22 = new Promise(function(t22) {
                            f22 = setTimeout(function() {
                              t22(new Error("timeout"));
                            }, a22);
                          }), h22.push(v22), d22 = new AbortController(), i22.signal = d22.signal), h22.push(fetch(p22, i22).catch(function(t22) {
                            return t22;
                          })), [4, Promise.race(h22)];
                        case 3:
                          return g22 = m22.sent(), f22 && clearTimeout(f22), [4, r22.response.traverse(g22)];
                        case 4:
                          if ((y22 = m22.sent()) instanceof Error)
                            throw null == d22 || d22.abort(), y22;
                          return [2, y22];
                      }
                    });
                  });
                }
                var F2 = function() {
                  function t2(t22) {
                    J2.interceptors.request.use(function(n22) {
                      var r22 = n22.url, o22 = n22.method, i22 = n22.body, s22 = i22;
                      if (t22.onReportBeforeSend) {
                        var a22 = t22.onReportBeforeSend({
                          url: r22,
                          method: o22,
                          data: i22 ? JSON.parse(i22) : null
                        });
                        s22 = (null == a22 ? void 0 : a22.data) ? JSON.stringify(a22.data) : null;
                      }
                      return "GET" != o22 && s22 ? _e2(_e2({}, n22), {
                        body: s22
                      }) : n22;
                    });
                  }
                  return t2.prototype.get = function(t22, o22) {
                    return n2(this, void 0, void 0, function() {
                      var n22, i22;
                      return r2(this, function(r22) {
                        switch (r22.label) {
                          case 0:
                            return [4, K2(_e2({
                              url: t22
                            }, o22))];
                          case 1:
                            return [4, (n22 = r22.sent()).json()];
                          case 2:
                            return i22 = r22.sent(), [2, Promise.resolve({
                              data: i22,
                              status: n22.status,
                              statusText: n22.statusText,
                              headers: n22.headers
                            })];
                        }
                      });
                    });
                  }, t2.prototype.post = function(t22, o22, i22) {
                    return n2(this, void 0, void 0, function() {
                      var n22, s22;
                      return r2(this, function(r22) {
                        switch (r22.label) {
                          case 0:
                            return [4, K2(_e2({
                              url: t22,
                              body: o22,
                              method: "POST"
                            }, i22))];
                          case 1:
                            return [4, (n22 = r22.sent()).json()];
                          case 2:
                            return s22 = r22.sent(), [2, Promise.resolve({
                              data: s22,
                              status: n22.status,
                              statusText: n22.statusText,
                              headers: n22.headers
                            })];
                        }
                      });
                    });
                  }, t2;
                }(), G2 = function() {
                  function t2(t22) {
                    this.appkey = t22;
                  }
                  return t2.prototype.getItem = function(t22) {
                    try {
                      return window.localStorage.getItem(this.getStoreKey(t22));
                    } catch (t3) {
                      return "";
                    }
                  }, t2.prototype.removeItem = function(t22) {
                    try {
                      window.localStorage.removeItem(this.getStoreKey(t22));
                    } catch (t3) {
                    }
                  }, t2.prototype.setItem = function(t22, e2) {
                    try {
                      window.localStorage.setItem(this.getStoreKey(t22), e2);
                    } catch (t3) {
                    }
                  }, t2.prototype.setSessionItem = function(t22, e2) {
                    try {
                      window.sessionStorage.setItem(this.getStoreKey(t22), e2);
                    } catch (t3) {
                    }
                  }, t2.prototype.getSessionItem = function(t22) {
                    try {
                      return window.sessionStorage.getItem(this.getStoreKey(t22));
                    } catch (t3) {
                      return "";
                    }
                  }, t2.prototype.getStoreKey = function(t22) {
                    return o2 + this.appkey + "_" + t22;
                  }, t2.prototype.createDeviceId = function() {
                    try {
                      var t22 = window.localStorage.getItem(i2);
                      return t22 || (t22 = function(t3) {
                        for (var e2 = "ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz0123456789", n22 = "", r22 = 0; r22 < t3; r22++) {
                          n22 += e2.charAt(Math.floor(Math.random() * e2.length));
                        }
                        return n22;
                      }(32), window.localStorage.setItem(i2, t22)), t22;
                    } catch (t3) {
                      return "";
                    }
                  }, t2.prototype.clear = function() {
                    try {
                      for (var t22 = window.localStorage.length, e2 = 0; e2 < t22; e2++) {
                        var n22 = window.localStorage.key(e2);
                        (null == n22 ? void 0 : n22.substr(0, 9)) == o2 && window.localStorage.removeItem(n22);
                      }
                    } catch (t3) {
                    }
                  }, t2.prototype.getStoreCount = function() {
                    var t22 = 0;
                    try {
                      t22 = window.localStorage.length;
                    } catch (t3) {
                    }
                    return t22;
                  }, t2;
                }(), z2 = "logid_start", W2 = "4.5.14-web";
                return function(n22) {
                  function r22(t2) {
                    var e2 = n22.call(this, t2) || this;
                    e2.qimei36 = "", e2.uselessCycleTaskNum = 0, e2.underWeakNet = false, e2.pauseSearching = false, e2.send = function(t22, n3, r4) {
                      e2.storage.setItem(s2, Date.now().toString()), e2.network.post(e2.uploadUrl || e2.strategy.getUploadUrl(), t22.data).then(function(r5) {
                        var o3;
                        100 == (null === (o3 = null == r5 ? void 0 : r5.data) || void 0 === o3 ? void 0 : o3.result) ? e2.delayTime = 1e3 * r5.data.delayTime : e2.delayTime = 0, n3 && n3(t22.data), t22.data.events.forEach(function(t3) {
                          e2.store.removeEvent(t3).then(function() {
                            e2.removeSendingId(f2(t3.mapValue));
                          });
                        }), e2.doCustomCycleTask();
                      }).catch(function(n4) {
                        var o3 = t22.data.events;
                        e2.errorReport.reportError(n4.code ? n4.code.toString() : "600", n4.message), r4 && r4(t22.data);
                        var i3 = JSON.parse(e2.storage.getItem(a2));
                        o3.forEach(function(t3) {
                          i3 && -1 != i3.indexOf(f2(t3)) && e2.store.insertEvent(t3, function(t4, n5) {
                            t4 && e2.errorReport.reportError("604", "insertEvent fail!");
                          }), e2.removeSendingId(f2(t3));
                        }), e2.monitorUploadFailed();
                      });
                    };
                    var r3, o22, i22 = b2();
                    return e2.isUnderIE8 = i22 > 0 && i22 < 8, e2.isUnderIE8 || (e2.isUnderIE = i22 > 0, t2.needInitQimei && S2(t2.appkey, function(t22) {
                      e2.qimei36 = t22.q36;
                    }), e2.network = new F2(t2), e2.storage = new G2(t2.appkey), e2.initCommonInfo(t2), e2.store = new _2(t2.appkey, e2.storage), e2.errorReport = new g2(e2.config, e2.commonInfo, "web", e2.network), e2.strategy = new y2(null == t2.needQueryConfig || t2.needQueryConfig, e2.config, e2.commonInfo, e2.storage, e2.network), e2.logidStartTime = e2.storage.getItem(z2), e2.logidStartTime || (e2.logidStartTime = Date.now().toString(), e2.storage.setItem(z2, e2.logidStartTime)), r3 = e2.logidStartTime, o22 = Date.now() - Number.parseFloat(r3), Math.floor(o22 / 864e5) >= 365 && e2.storage.clear(), e2.initSession(t2), e2.onDirectUserAction("rqd_js_init", {}), setTimeout(function() {
                      return e2.lifeCycle.emit("init");
                    }, 0), e2.initDelayTime = t2.delay ? t2.delay : 1e3, e2.cycleTask(e2.initDelayTime)), e2;
                  }
                  return function(e2, n3) {
                    if ("function" != typeof n3 && null !== n3)
                      throw new TypeError("Class extends value " + String(n3) + " is not a constructor or null");
                    function r3() {
                      this.constructor = e2;
                    }
                    _t2(e2, n3), e2.prototype = null === n3 ? Object.create(n3) : (r3.prototype = n3.prototype, new r3());
                  }(r22, n22), r22.prototype.initSession = function(t2) {
                    var e2 = 18e5;
                    t2.sessionDuration && t2.sessionDuration > 3e4 && (e2 = t2.sessionDuration), this.beaconSession = new w2(this.storage, e2, this);
                  }, r22.prototype.initCommonInfo = function(t2) {
                    var e2 = Number(this.storage.getItem(s2));
                    try {
                      var n3 = JSON.parse(this.storage.getItem(a2));
                      (Date.now() - e2 > 3e4 || !n3) && this.storage.setItem(a2, JSON.stringify([]));
                    } catch (t22) {
                    }
                    t2.uploadUrl && (this.uploadUrl = t2.uploadUrl + "?appkey=" + t2.appkey);
                    var r3 = [window.screen.width, window.screen.height];
                    window.devicePixelRatio && r3.push(window.devicePixelRatio), this.commonInfo = {
                      deviceId: this.storage.createDeviceId(),
                      language: navigator && navigator.language || "zh_CN",
                      query: window.location.search,
                      userAgent: navigator.userAgent,
                      pixel: r3.join("*"),
                      channelID: t2.channelID ? String(t2.channelID) : "",
                      openid: t2.openid ? String(t2.openid) : "",
                      unid: t2.unionid ? String(t2.unionid) : "",
                      sdkVersion: W2
                    }, this.config.appVersion = t2.versionCode ? String(t2.versionCode) : "", this.config.strictMode = t2.strictMode;
                  }, r22.prototype.cycleTask = function(t2) {
                    var e2 = this;
                    this.intervalID = window.setInterval(function() {
                      e2.pauseSearching || e2.store.getEvents().then(function(t22) {
                        0 == t22.length && (e2.pauseSearching = true);
                        var n3 = [], r3 = JSON.parse(e2.storage.getItem(a2));
                        r3 || (r3 = []), t22 && t22.forEach(function(t3) {
                          var e22 = f2(t3.mapValue);
                          -1 == r3.indexOf(e22) && (n3.push(t3), r3.push(e22));
                        }), 0 != n3.length && (e2.storage.setItem(a2, JSON.stringify(r3)), e2._normalLogPipeline(e2.assembleData(n3)));
                      }).catch(function(t22) {
                      });
                    }, t2);
                  }, r22.prototype.onReport = function(t2, e2, n3) {
                    var r3 = this;
                    if (this.isUnderIE8)
                      this.errorReport.reportError("601", "UnderIE8");
                    else {
                      this.pauseSearching = false;
                      var o22 = this.generateData(t2, e2, n3);
                      if (n3 && 0 == this.delayTime && !this.underWeakNet)
                        this._normalLogPipeline(this.assembleData(o22));
                      else {
                        var i22 = o22.shift();
                        i22 && this.store.insertEvent(i22, function(t22) {
                          t22 && r3.errorReport.reportError("604", "insertEvent fail!");
                        }).catch(function(t22) {
                          r3._normalLogPipeline(r3.assembleData(o22));
                        });
                      }
                    }
                  }, r22.prototype.onSendBeacon = function(t2, e2) {
                    if (this.isUnderIE)
                      this.errorReport.reportError("605", "UnderIE");
                    else {
                      this.pauseSearching = false;
                      var n3 = this.assembleData(this.generateData(t2, e2, true));
                      "function" == typeof navigator.sendBeacon && navigator.sendBeacon(this.uploadUrl || this.strategy.getUploadUrl(), JSON.stringify(n3));
                    }
                  }, r22.prototype.generateData = function(t2, n3, r3) {
                    var o22 = [], i22 = "4.5.14-web_" + (r3 ? "direct_log_id" : "normal_log_id"), s22 = Number(this.storage.getItem(i22));
                    return s22 = s22 || 1, n3 = _e2(_e2({}, n3), {
                      A99: r3 ? "Y" : "N",
                      A100: s22.toString(),
                      A72: W2,
                      A88: this.logidStartTime
                    }), s22++, this.storage.setItem(i22, s22.toString()), o22.push({
                      eventCode: t2,
                      eventTime: Date.now().toString(),
                      mapValue: p2(n3, this.config.strictMode)
                    }), o22;
                  }, r22.prototype.assembleData = function(t2) {
                    var n3 = this.beaconSession.getSession();
                    return {
                      appVersion: this.config.appVersion ? h2(this.config.appVersion) : "",
                      sdkId: "js",
                      sdkVersion: W2,
                      mainAppKey: this.config.appkey,
                      platformId: 3,
                      common: p2(_e2(_e2({}, this.additionalParams), {
                        A2: this.commonInfo.deviceId,
                        A8: this.commonInfo.openid,
                        A12: this.commonInfo.language,
                        A17: this.commonInfo.pixel,
                        A23: this.commonInfo.channelID,
                        A50: this.commonInfo.unid,
                        A76: n3.sessionId,
                        A101: this.commonInfo.userAgent,
                        A102: window.location.href,
                        A104: document.referrer,
                        A119: this.commonInfo.query,
                        A153: this.qimei36
                      }), false),
                      events: t2
                    };
                  }, r22.prototype.monitorUploadFailed = function() {
                    this.uselessCycleTaskNum++, this.uselessCycleTaskNum >= 5 && (window.clearInterval(this.intervalID), this.cycleTask(6e4), this.underWeakNet = true);
                  }, r22.prototype.doCustomCycleTask = function() {
                    this.uselessCycleTaskNum >= 5 && (window.clearInterval(this.intervalID), this.cycleTask(this.initDelayTime)), this.uselessCycleTaskNum = 0, this.underWeakNet = false;
                  }, r22;
                }(v2);
              });
            }
          ),
          /***/
          "./lib/crypto.js": (
            /*!***********************!*\
              !*** ./lib/crypto.js ***!
              \***********************/
            /*! no static exports found */
            /***/
            function(module2, exports2, __webpack_require__2) {
              (function(module3) {
                var _typeof2 = __webpack_require__2(
                  /*! @babel/runtime/helpers/typeof */
                  "./node_modules/@babel/runtime/helpers/typeof.js"
                );
                var CryptoJS = CryptoJS || function(g2, l2) {
                  var e2 = {}, d2 = e2.lib = {}, m2 = function m22() {
                  }, k = d2.Base = {
                    extend: function extend(a2) {
                      m2.prototype = this;
                      var c2 = new m2();
                      a2 && c2.mixIn(a2);
                      c2.hasOwnProperty("init") || (c2.init = function() {
                        c2.$super.init.apply(this, arguments);
                      });
                      c2.init.prototype = c2;
                      c2.$super = this;
                      return c2;
                    },
                    create: function create() {
                      var a2 = this.extend();
                      a2.init.apply(a2, arguments);
                      return a2;
                    },
                    init: function init() {
                    },
                    mixIn: function mixIn(a2) {
                      for (var c2 in a2) {
                        a2.hasOwnProperty(c2) && (this[c2] = a2[c2]);
                      }
                      a2.hasOwnProperty("toString") && (this.toString = a2.toString);
                    },
                    clone: function clone() {
                      return this.init.prototype.extend(this);
                    }
                  }, p2 = d2.WordArray = k.extend({
                    init: function init(a2, c2) {
                      a2 = this.words = a2 || [];
                      this.sigBytes = c2 != l2 ? c2 : 4 * a2.length;
                    },
                    toString: function toString2(a2) {
                      return (a2 || n2).stringify(this);
                    },
                    concat: function concat(a2) {
                      var c2 = this.words, q2 = a2.words, f2 = this.sigBytes;
                      a2 = a2.sigBytes;
                      this.clamp();
                      if (f2 % 4)
                        for (var b22 = 0; b22 < a2; b22++) {
                          c2[f2 + b22 >>> 2] |= (q2[b22 >>> 2] >>> 24 - 8 * (b22 % 4) & 255) << 24 - 8 * ((f2 + b22) % 4);
                        }
                      else if (65535 < q2.length)
                        for (b22 = 0; b22 < a2; b22 += 4) {
                          c2[f2 + b22 >>> 2] = q2[b22 >>> 2];
                        }
                      else
                        c2.push.apply(c2, q2);
                      this.sigBytes += a2;
                      return this;
                    },
                    clamp: function clamp() {
                      var a2 = this.words, c2 = this.sigBytes;
                      a2[c2 >>> 2] &= 4294967295 << 32 - 8 * (c2 % 4);
                      a2.length = g2.ceil(c2 / 4);
                    },
                    clone: function clone() {
                      var a2 = k.clone.call(this);
                      a2.words = this.words.slice(0);
                      return a2;
                    },
                    random: function random2(a2) {
                      for (var c2 = [], b22 = 0; b22 < a2; b22 += 4) {
                        c2.push(4294967296 * g2.random() | 0);
                      }
                      return new p2.init(c2, a2);
                    }
                  }), b2 = e2.enc = {}, n2 = b2.Hex = {
                    stringify: function stringify2(a2) {
                      var c2 = a2.words;
                      a2 = a2.sigBytes;
                      for (var b22 = [], f2 = 0; f2 < a2; f2++) {
                        var d22 = c2[f2 >>> 2] >>> 24 - 8 * (f2 % 4) & 255;
                        b22.push((d22 >>> 4).toString(16));
                        b22.push((d22 & 15).toString(16));
                      }
                      return b22.join("");
                    },
                    parse: function parse2(a2) {
                      for (var c2 = a2.length, b22 = [], f2 = 0; f2 < c2; f2 += 2) {
                        b22[f2 >>> 3] |= parseInt(a2.substr(f2, 2), 16) << 24 - 4 * (f2 % 8);
                      }
                      return new p2.init(b22, c2 / 2);
                    }
                  }, j2 = b2.Latin1 = {
                    stringify: function stringify2(a2) {
                      var c2 = a2.words;
                      a2 = a2.sigBytes;
                      for (var b22 = [], f2 = 0; f2 < a2; f2++) {
                        b22.push(String.fromCharCode(c2[f2 >>> 2] >>> 24 - 8 * (f2 % 4) & 255));
                      }
                      return b22.join("");
                    },
                    parse: function parse2(a2) {
                      for (var c2 = a2.length, b22 = [], f2 = 0; f2 < c2; f2++) {
                        b22[f2 >>> 2] |= (a2.charCodeAt(f2) & 255) << 24 - 8 * (f2 % 4);
                      }
                      return new p2.init(b22, c2);
                    }
                  }, h2 = b2.Utf8 = {
                    stringify: function stringify2(a2) {
                      try {
                        return decodeURIComponent(escape(j2.stringify(a2)));
                      } catch (c2) {
                        throw Error("Malformed UTF-8 data");
                      }
                    },
                    parse: function parse2(a2) {
                      return j2.parse(unescape(encodeURIComponent(a2)));
                    }
                  }, r2 = d2.BufferedBlockAlgorithm = k.extend({
                    reset: function reset() {
                      this._data = new p2.init();
                      this._nDataBytes = 0;
                    },
                    _append: function _append(a2) {
                      "string" == typeof a2 && (a2 = h2.parse(a2));
                      this._data.concat(a2);
                      this._nDataBytes += a2.sigBytes;
                    },
                    _process: function _process(a2) {
                      var c2 = this._data, b22 = c2.words, f2 = c2.sigBytes, d22 = this.blockSize, e22 = f2 / (4 * d22), e22 = a2 ? g2.ceil(e22) : g2.max((e22 | 0) - this._minBufferSize, 0);
                      a2 = e22 * d22;
                      f2 = g2.min(4 * a2, f2);
                      if (a2) {
                        for (var k2 = 0; k2 < a2; k2 += d22) {
                          this._doProcessBlock(b22, k2);
                        }
                        k2 = b22.splice(0, a2);
                        c2.sigBytes -= f2;
                      }
                      return new p2.init(k2, f2);
                    },
                    clone: function clone() {
                      var a2 = k.clone.call(this);
                      a2._data = this._data.clone();
                      return a2;
                    },
                    _minBufferSize: 0
                  });
                  d2.Hasher = r2.extend({
                    cfg: k.extend(),
                    init: function init(a2) {
                      this.cfg = this.cfg.extend(a2);
                      this.reset();
                    },
                    reset: function reset() {
                      r2.reset.call(this);
                      this._doReset();
                    },
                    update: function update(a2) {
                      this._append(a2);
                      this._process();
                      return this;
                    },
                    finalize: function finalize(a2) {
                      a2 && this._append(a2);
                      return this._doFinalize();
                    },
                    blockSize: 16,
                    _createHelper: function _createHelper(a2) {
                      return function(b22, d22) {
                        return new a2.init(d22).finalize(b22);
                      };
                    },
                    _createHmacHelper: function _createHmacHelper(a2) {
                      return function(b22, d22) {
                        return new s2.HMAC.init(a2, d22).finalize(b22);
                      };
                    }
                  });
                  var s2 = e2.algo = {};
                  return e2;
                }(Math);
                (function() {
                  var g2 = CryptoJS, l2 = g2.lib, e2 = l2.WordArray, d2 = l2.Hasher, m2 = [], l2 = g2.algo.SHA1 = d2.extend({
                    _doReset: function _doReset() {
                      this._hash = new e2.init([1732584193, 4023233417, 2562383102, 271733878, 3285377520]);
                    },
                    _doProcessBlock: function _doProcessBlock(d22, e22) {
                      for (var b2 = this._hash.words, n2 = b2[0], j2 = b2[1], h2 = b2[2], g22 = b2[3], l22 = b2[4], a2 = 0; 80 > a2; a2++) {
                        if (16 > a2)
                          m2[a2] = d22[e22 + a2] | 0;
                        else {
                          var c2 = m2[a2 - 3] ^ m2[a2 - 8] ^ m2[a2 - 14] ^ m2[a2 - 16];
                          m2[a2] = c2 << 1 | c2 >>> 31;
                        }
                        c2 = (n2 << 5 | n2 >>> 27) + l22 + m2[a2];
                        c2 = 20 > a2 ? c2 + ((j2 & h2 | ~j2 & g22) + 1518500249) : 40 > a2 ? c2 + ((j2 ^ h2 ^ g22) + 1859775393) : 60 > a2 ? c2 + ((j2 & h2 | j2 & g22 | h2 & g22) - 1894007588) : c2 + ((j2 ^ h2 ^ g22) - 899497514);
                        l22 = g22;
                        g22 = h2;
                        h2 = j2 << 30 | j2 >>> 2;
                        j2 = n2;
                        n2 = c2;
                      }
                      b2[0] = b2[0] + n2 | 0;
                      b2[1] = b2[1] + j2 | 0;
                      b2[2] = b2[2] + h2 | 0;
                      b2[3] = b2[3] + g22 | 0;
                      b2[4] = b2[4] + l22 | 0;
                    },
                    _doFinalize: function _doFinalize() {
                      var d22 = this._data, e22 = d22.words, b2 = 8 * this._nDataBytes, g22 = 8 * d22.sigBytes;
                      e22[g22 >>> 5] |= 128 << 24 - g22 % 32;
                      e22[(g22 + 64 >>> 9 << 4) + 14] = Math.floor(b2 / 4294967296);
                      e22[(g22 + 64 >>> 9 << 4) + 15] = b2;
                      d22.sigBytes = 4 * e22.length;
                      this._process();
                      return this._hash;
                    },
                    clone: function clone() {
                      var e22 = d2.clone.call(this);
                      e22._hash = this._hash.clone();
                      return e22;
                    }
                  });
                  g2.SHA1 = d2._createHelper(l2);
                  g2.HmacSHA1 = d2._createHmacHelper(l2);
                })();
                (function() {
                  var g2 = CryptoJS, l2 = g2.enc.Utf8;
                  g2.algo.HMAC = g2.lib.Base.extend({
                    init: function init(e2, d2) {
                      e2 = this._hasher = new e2.init();
                      "string" == typeof d2 && (d2 = l2.parse(d2));
                      var g22 = e2.blockSize, k = 4 * g22;
                      d2.sigBytes > k && (d2 = e2.finalize(d2));
                      d2.clamp();
                      for (var p2 = this._oKey = d2.clone(), b2 = this._iKey = d2.clone(), n2 = p2.words, j2 = b2.words, h2 = 0; h2 < g22; h2++) {
                        n2[h2] ^= 1549556828, j2[h2] ^= 909522486;
                      }
                      p2.sigBytes = b2.sigBytes = k;
                      this.reset();
                    },
                    reset: function reset() {
                      var e2 = this._hasher;
                      e2.reset();
                      e2.update(this._iKey);
                    },
                    update: function update(e2) {
                      this._hasher.update(e2);
                      return this;
                    },
                    finalize: function finalize(e2) {
                      var d2 = this._hasher;
                      e2 = d2.finalize(e2);
                      d2.reset();
                      return d2.finalize(this._oKey.clone().concat(e2));
                    }
                  });
                })();
                (function() {
                  var C2 = CryptoJS;
                  var C_lib = C2.lib;
                  var WordArray = C_lib.WordArray;
                  var C_enc = C2.enc;
                  C_enc.Base64 = {
                    /**
                     * Converts a word array to a Base64 string.
                     *
                     * @param {WordArray} wordArray The word array.
                     *
                     * @return {string} The Base64 string.
                     *
                     * @static
                     *
                     * @example
                     *
                     *     var base64String = CryptoJS.enc.Base64.stringify(wordArray);
                     */
                    stringify: function stringify2(wordArray) {
                      var words = wordArray.words;
                      var sigBytes = wordArray.sigBytes;
                      var map = this._map;
                      wordArray.clamp();
                      var base64Chars = [];
                      for (var i2 = 0; i2 < sigBytes; i2 += 3) {
                        var byte1 = words[i2 >>> 2] >>> 24 - i2 % 4 * 8 & 255;
                        var byte2 = words[i2 + 1 >>> 2] >>> 24 - (i2 + 1) % 4 * 8 & 255;
                        var byte3 = words[i2 + 2 >>> 2] >>> 24 - (i2 + 2) % 4 * 8 & 255;
                        var triplet = byte1 << 16 | byte2 << 8 | byte3;
                        for (var j2 = 0; j2 < 4 && i2 + j2 * 0.75 < sigBytes; j2++) {
                          base64Chars.push(map.charAt(triplet >>> 6 * (3 - j2) & 63));
                        }
                      }
                      var paddingChar = map.charAt(64);
                      if (paddingChar) {
                        while (base64Chars.length % 4) {
                          base64Chars.push(paddingChar);
                        }
                      }
                      return base64Chars.join("");
                    },
                    /**
                     * Converts a Base64 string to a word array.
                     *
                     * @param {string} base64Str The Base64 string.
                     *
                     * @return {WordArray} The word array.
                     *
                     * @static
                     *
                     * @example
                     *
                     *     var wordArray = CryptoJS.enc.Base64.parse(base64String);
                     */
                    parse: function parse2(base64Str) {
                      var base64StrLength = base64Str.length;
                      var map = this._map;
                      var paddingChar = map.charAt(64);
                      if (paddingChar) {
                        var paddingIndex = base64Str.indexOf(paddingChar);
                        if (paddingIndex != -1) {
                          base64StrLength = paddingIndex;
                        }
                      }
                      var words = [];
                      var nBytes = 0;
                      for (var i2 = 0; i2 < base64StrLength; i2++) {
                        if (i2 % 4) {
                          var bits1 = map.indexOf(base64Str.charAt(i2 - 1)) << i2 % 4 * 2;
                          var bits2 = map.indexOf(base64Str.charAt(i2)) >>> 6 - i2 % 4 * 2;
                          words[nBytes >>> 2] |= (bits1 | bits2) << 24 - nBytes % 4 * 8;
                          nBytes++;
                        }
                      }
                      return WordArray.create(words, nBytes);
                    },
                    _map: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="
                  };
                })();
                if (_typeof2(module3) === "object") {
                  module3.exports = CryptoJS;
                } else {
                  window.CryptoJS = CryptoJS;
                }
              }).call(this, __webpack_require__2(
                /*! ./../node_modules/webpack/buildin/module.js */
                "./node_modules/webpack/buildin/module.js"
              )(module2));
            }
          ),
          /***/
          "./lib/json2xml.js": (
            /*!*************************!*\
              !*** ./lib/json2xml.js ***!
              \*************************/
            /*! no static exports found */
            /***/
            function(module2, exports2, __webpack_require__2) {
              var _typeof2 = __webpack_require__2(
                /*! @babel/runtime/helpers/typeof */
                "./node_modules/@babel/runtime/helpers/typeof.js"
              );
              var element_start_char = "a-zA-Z_À-ÖØ-öø-ÿͰ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿿、-퟿豈-﷏ﷰ-�";
              var element_non_start_char = "-.0-9·̀-ͯ‿⁀";
              var element_replace = new RegExp("^([^" + element_start_char + "])|^((x|X)(m|M)(l|L))|([^" + element_start_char + element_non_start_char + "])", "g");
              var not_safe_in_xml = /[^\x09\x0A\x0D\x20-\xFF\x85\xA0-\uD7FF\uE000-\uFDCF\uFDE0-\uFFFD]/gm;
              var objKeys = function objKeys2(obj) {
                var l2 = [];
                if (obj instanceof Object) {
                  for (var k in obj) {
                    if (obj.hasOwnProperty(k)) {
                      l2.push(k);
                    }
                  }
                }
                return l2;
              };
              var process_to_xml = function process_to_xml2(node_data, options) {
                var makeNode = function makeNode2(name, content, attributes, level, hasSubNodes) {
                  var indent_value = options.indent !== void 0 ? options.indent : "	";
                  var indent = options.prettyPrint ? "\n" + new Array(level).join(indent_value) : "";
                  if (options.removeIllegalNameCharacters) {
                    name = name.replace(element_replace, "_");
                  }
                  var node = [indent, "<", name, attributes || ""];
                  if (content && content.length > 0) {
                    node.push(">");
                    node.push(content);
                    hasSubNodes && node.push(indent);
                    node.push("</");
                    node.push(name);
                    node.push(">");
                  } else {
                    node.push("/>");
                  }
                  return node.join("");
                };
                return function fn(node_data2, node_descriptor, level) {
                  var type = _typeof2(node_data2);
                  if (Array.isArray ? Array.isArray(node_data2) : node_data2 instanceof Array) {
                    type = "array";
                  } else if (node_data2 instanceof Date) {
                    type = "date";
                  }
                  switch (type) {
                    case "array":
                      var ret = [];
                      node_data2.map(function(v2) {
                        ret.push(fn(v2, 1, level + 1));
                      });
                      options.prettyPrint && ret.push("\n");
                      return ret.join("");
                    case "date":
                      return node_data2.toJSON ? node_data2.toJSON() : node_data2 + "";
                    case "object":
                      var nodes = [];
                      for (var name in node_data2) {
                        if (node_data2.hasOwnProperty(name)) {
                          if (node_data2[name] instanceof Array) {
                            for (var j2 = 0; j2 < node_data2[name].length; j2++) {
                              if (node_data2[name].hasOwnProperty(j2)) {
                                nodes.push(makeNode(name, fn(node_data2[name][j2], 0, level + 1), null, level + 1, objKeys(node_data2[name][j2]).length));
                              }
                            }
                          } else {
                            nodes.push(makeNode(name, fn(node_data2[name], 0, level + 1), null, level + 1));
                          }
                        }
                      }
                      options.prettyPrint && nodes.length > 0 && nodes.push("\n");
                      return nodes.join("");
                    case "function":
                      return node_data2();
                    default:
                      return options.escape ? esc(node_data2) : "" + node_data2;
                  }
                }(node_data, 0, 0);
              };
              var xml_header = function xml_header2(standalone) {
                var ret = ['<?xml version="1.0" encoding="UTF-8"'];
                if (standalone) {
                  ret.push(' standalone="yes"');
                }
                ret.push("?>");
                return ret.join("");
              };
              function esc(str) {
                return ("" + str).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/'/g, "&apos;").replace(/"/g, "&quot;").replace(not_safe_in_xml, "");
              }
              module2.exports = function(obj, options) {
                if (!options) {
                  options = {
                    xmlHeader: {
                      standalone: true
                    },
                    prettyPrint: true,
                    indent: "  ",
                    escape: true
                  };
                }
                if (typeof obj == "string") {
                  try {
                    obj = JSON.parse(obj.toString());
                  } catch (e2) {
                    return false;
                  }
                }
                var xmlheader = "";
                var docType = "";
                if (options) {
                  if (_typeof2(options) == "object") {
                    if (options.xmlHeader) {
                      xmlheader = xml_header(!!options.xmlHeader.standalone);
                    }
                    if (typeof options.docType != "undefined") {
                      docType = "<!DOCTYPE " + options.docType + ">";
                    }
                  } else {
                    xmlheader = xml_header();
                  }
                }
                options = options || {};
                var ret = [xmlheader, options.prettyPrint && docType ? "\n" : "", docType, process_to_xml(obj, options)];
                return ret.join("").replace(/\n{2,}/g, "\n").replace(/\s+$/g, "");
              };
            }
          ),
          /***/
          "./lib/md5.js": (
            /*!********************!*\
              !*** ./lib/md5.js ***!
              \********************/
            /*! no static exports found */
            /***/
            function(module, exports, __webpack_require__) {
              (function(process, global, module) {
                var __WEBPACK_AMD_DEFINE_RESULT__;
                var _typeof = __webpack_require__(
                  /*! @babel/runtime/helpers/typeof */
                  "./node_modules/@babel/runtime/helpers/typeof.js"
                );
                (function() {
                  var ERROR = "input is invalid type";
                  var WINDOW = (typeof window === "undefined" ? "undefined" : _typeof(window)) === "object";
                  var root = WINDOW ? window : {};
                  if (root.JS_MD5_NO_WINDOW) {
                    WINDOW = false;
                  }
                  var WEB_WORKER = !WINDOW && (typeof self === "undefined" ? "undefined" : _typeof(self)) === "object";
                  var NODE_JS = !root.JS_MD5_NO_NODE_JS && (typeof process === "undefined" ? "undefined" : _typeof(process)) === "object" && process.versions && process.versions.node;
                  if (NODE_JS) {
                    root = global;
                  } else if (WEB_WORKER) {
                    root = self;
                  }
                  var COMMON_JS = !root.JS_MD5_NO_COMMON_JS && _typeof(module) === "object" && module.exports;
                  var AMD = __webpack_require__(
                    /*! !webpack amd options */
                    "./node_modules/webpack/buildin/amd-options.js"
                  );
                  var ARRAY_BUFFER = !root.JS_MD5_NO_ARRAY_BUFFER && typeof ArrayBuffer !== "undefined";
                  var HEX_CHARS = "0123456789abcdef".split("");
                  var EXTRA = [128, 32768, 8388608, -2147483648];
                  var SHIFT = [0, 8, 16, 24];
                  var OUTPUT_TYPES = ["hex", "array", "digest", "buffer", "arrayBuffer", "base64"];
                  var BASE64_ENCODE_CHAR = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");
                  var blocks = [], buffer8;
                  if (ARRAY_BUFFER) {
                    var buffer = new ArrayBuffer(68);
                    buffer8 = new Uint8Array(buffer);
                    blocks = new Uint32Array(buffer);
                  }
                  if (root.JS_MD5_NO_NODE_JS || !Array.isArray) {
                    Array.isArray = function(obj) {
                      return Object.prototype.toString.call(obj) === "[object Array]";
                    };
                  }
                  if (ARRAY_BUFFER && (root.JS_MD5_NO_ARRAY_BUFFER_IS_VIEW || !ArrayBuffer.isView)) {
                    ArrayBuffer.isView = function(obj) {
                      return _typeof(obj) === "object" && obj.buffer && obj.buffer.constructor === ArrayBuffer;
                    };
                  }
                  var createOutputMethod = function createOutputMethod2(outputType) {
                    return function(message2, isBinStr) {
                      return new Md5(true).update(message2, isBinStr)[outputType]();
                    };
                  };
                  var createMethod = function createMethod2() {
                    var method2 = createOutputMethod("hex");
                    if (NODE_JS) {
                      method2 = nodeWrap(method2);
                    }
                    method2.getCtx = method2.create = function() {
                      return new Md5();
                    };
                    method2.update = function(message2) {
                      return method2.create().update(message2);
                    };
                    for (var i2 = 0; i2 < OUTPUT_TYPES.length; ++i2) {
                      var type = OUTPUT_TYPES[i2];
                      method2[type] = createOutputMethod(type);
                    }
                    return method2;
                  };
                  var nodeWrap = function nodeWrap(method) {
                    var crypto = eval("require('crypto')");
                    var Buffer = eval("require('buffer').Buffer");
                    var nodeMethod = function nodeMethod2(message2) {
                      if (typeof message2 === "string") {
                        return crypto.createHash("md5").update(message2, "utf8").digest("hex");
                      } else {
                        if (message2 === null || message2 === void 0) {
                          throw ERROR;
                        } else if (message2.constructor === ArrayBuffer) {
                          message2 = new Uint8Array(message2);
                        }
                      }
                      if (Array.isArray(message2) || ArrayBuffer.isView(message2) || message2.constructor === Buffer) {
                        return crypto.createHash("md5").update(new Buffer(message2)).digest("hex");
                      } else {
                        return method(message2);
                      }
                    };
                    return nodeMethod;
                  };
                  function Md5(sharedMemory) {
                    if (sharedMemory) {
                      blocks[0] = blocks[16] = blocks[1] = blocks[2] = blocks[3] = blocks[4] = blocks[5] = blocks[6] = blocks[7] = blocks[8] = blocks[9] = blocks[10] = blocks[11] = blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;
                      this.blocks = blocks;
                      this.buffer8 = buffer8;
                    } else {
                      if (ARRAY_BUFFER) {
                        var buffer2 = new ArrayBuffer(68);
                        this.buffer8 = new Uint8Array(buffer2);
                        this.blocks = new Uint32Array(buffer2);
                      } else {
                        this.blocks = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
                      }
                    }
                    this.h0 = this.h1 = this.h2 = this.h3 = this.start = this.bytes = this.hBytes = 0;
                    this.finalized = this.hashed = false;
                    this.first = true;
                  }
                  Md5.prototype.update = function(message2, isBinStr) {
                    if (this.finalized) {
                      return;
                    }
                    var code2, index = 0, i2, length = message2.length, blocks2 = this.blocks;
                    var buffer82 = this.buffer8;
                    while (index < length) {
                      if (this.hashed) {
                        this.hashed = false;
                        blocks2[0] = blocks2[16];
                        blocks2[16] = blocks2[1] = blocks2[2] = blocks2[3] = blocks2[4] = blocks2[5] = blocks2[6] = blocks2[7] = blocks2[8] = blocks2[9] = blocks2[10] = blocks2[11] = blocks2[12] = blocks2[13] = blocks2[14] = blocks2[15] = 0;
                      }
                      if (ARRAY_BUFFER) {
                        for (i2 = this.start; index < length && i2 < 64; ++index) {
                          code2 = message2.charCodeAt(index);
                          if (isBinStr || code2 < 128) {
                            buffer82[i2++] = code2;
                          } else if (code2 < 2048) {
                            buffer82[i2++] = 192 | code2 >> 6;
                            buffer82[i2++] = 128 | code2 & 63;
                          } else if (code2 < 55296 || code2 >= 57344) {
                            buffer82[i2++] = 224 | code2 >> 12;
                            buffer82[i2++] = 128 | code2 >> 6 & 63;
                            buffer82[i2++] = 128 | code2 & 63;
                          } else {
                            code2 = 65536 + ((code2 & 1023) << 10 | message2.charCodeAt(++index) & 1023);
                            buffer82[i2++] = 240 | code2 >> 18;
                            buffer82[i2++] = 128 | code2 >> 12 & 63;
                            buffer82[i2++] = 128 | code2 >> 6 & 63;
                            buffer82[i2++] = 128 | code2 & 63;
                          }
                        }
                      } else {
                        for (i2 = this.start; index < length && i2 < 64; ++index) {
                          code2 = message2.charCodeAt(index);
                          if (isBinStr || code2 < 128) {
                            blocks2[i2 >> 2] |= code2 << SHIFT[i2++ & 3];
                          } else if (code2 < 2048) {
                            blocks2[i2 >> 2] |= (192 | code2 >> 6) << SHIFT[i2++ & 3];
                            blocks2[i2 >> 2] |= (128 | code2 & 63) << SHIFT[i2++ & 3];
                          } else if (code2 < 55296 || code2 >= 57344) {
                            blocks2[i2 >> 2] |= (224 | code2 >> 12) << SHIFT[i2++ & 3];
                            blocks2[i2 >> 2] |= (128 | code2 >> 6 & 63) << SHIFT[i2++ & 3];
                            blocks2[i2 >> 2] |= (128 | code2 & 63) << SHIFT[i2++ & 3];
                          } else {
                            code2 = 65536 + ((code2 & 1023) << 10 | message2.charCodeAt(++index) & 1023);
                            blocks2[i2 >> 2] |= (240 | code2 >> 18) << SHIFT[i2++ & 3];
                            blocks2[i2 >> 2] |= (128 | code2 >> 12 & 63) << SHIFT[i2++ & 3];
                            blocks2[i2 >> 2] |= (128 | code2 >> 6 & 63) << SHIFT[i2++ & 3];
                            blocks2[i2 >> 2] |= (128 | code2 & 63) << SHIFT[i2++ & 3];
                          }
                        }
                      }
                      this.lastByteIndex = i2;
                      this.bytes += i2 - this.start;
                      if (i2 >= 64) {
                        this.start = i2 - 64;
                        this.hash();
                        this.hashed = true;
                      } else {
                        this.start = i2;
                      }
                    }
                    if (this.bytes > 4294967295) {
                      this.hBytes += this.bytes / 4294967296 << 0;
                      this.bytes = this.bytes % 4294967296;
                    }
                    return this;
                  };
                  Md5.prototype.finalize = function() {
                    if (this.finalized) {
                      return;
                    }
                    this.finalized = true;
                    var blocks2 = this.blocks, i2 = this.lastByteIndex;
                    blocks2[i2 >> 2] |= EXTRA[i2 & 3];
                    if (i2 >= 56) {
                      if (!this.hashed) {
                        this.hash();
                      }
                      blocks2[0] = blocks2[16];
                      blocks2[16] = blocks2[1] = blocks2[2] = blocks2[3] = blocks2[4] = blocks2[5] = blocks2[6] = blocks2[7] = blocks2[8] = blocks2[9] = blocks2[10] = blocks2[11] = blocks2[12] = blocks2[13] = blocks2[14] = blocks2[15] = 0;
                    }
                    blocks2[14] = this.bytes << 3;
                    blocks2[15] = this.hBytes << 3 | this.bytes >>> 29;
                    this.hash();
                  };
                  Md5.prototype.hash = function() {
                    var a2, b2, c2, d2, bc, da, blocks2 = this.blocks;
                    if (this.first) {
                      a2 = blocks2[0] - 680876937;
                      a2 = (a2 << 7 | a2 >>> 25) - 271733879 << 0;
                      d2 = (-1732584194 ^ a2 & 2004318071) + blocks2[1] - 117830708;
                      d2 = (d2 << 12 | d2 >>> 20) + a2 << 0;
                      c2 = (-271733879 ^ d2 & (a2 ^ -271733879)) + blocks2[2] - 1126478375;
                      c2 = (c2 << 17 | c2 >>> 15) + d2 << 0;
                      b2 = (a2 ^ c2 & (d2 ^ a2)) + blocks2[3] - 1316259209;
                      b2 = (b2 << 22 | b2 >>> 10) + c2 << 0;
                    } else {
                      a2 = this.h0;
                      b2 = this.h1;
                      c2 = this.h2;
                      d2 = this.h3;
                      a2 += (d2 ^ b2 & (c2 ^ d2)) + blocks2[0] - 680876936;
                      a2 = (a2 << 7 | a2 >>> 25) + b2 << 0;
                      d2 += (c2 ^ a2 & (b2 ^ c2)) + blocks2[1] - 389564586;
                      d2 = (d2 << 12 | d2 >>> 20) + a2 << 0;
                      c2 += (b2 ^ d2 & (a2 ^ b2)) + blocks2[2] + 606105819;
                      c2 = (c2 << 17 | c2 >>> 15) + d2 << 0;
                      b2 += (a2 ^ c2 & (d2 ^ a2)) + blocks2[3] - 1044525330;
                      b2 = (b2 << 22 | b2 >>> 10) + c2 << 0;
                    }
                    a2 += (d2 ^ b2 & (c2 ^ d2)) + blocks2[4] - 176418897;
                    a2 = (a2 << 7 | a2 >>> 25) + b2 << 0;
                    d2 += (c2 ^ a2 & (b2 ^ c2)) + blocks2[5] + 1200080426;
                    d2 = (d2 << 12 | d2 >>> 20) + a2 << 0;
                    c2 += (b2 ^ d2 & (a2 ^ b2)) + blocks2[6] - 1473231341;
                    c2 = (c2 << 17 | c2 >>> 15) + d2 << 0;
                    b2 += (a2 ^ c2 & (d2 ^ a2)) + blocks2[7] - 45705983;
                    b2 = (b2 << 22 | b2 >>> 10) + c2 << 0;
                    a2 += (d2 ^ b2 & (c2 ^ d2)) + blocks2[8] + 1770035416;
                    a2 = (a2 << 7 | a2 >>> 25) + b2 << 0;
                    d2 += (c2 ^ a2 & (b2 ^ c2)) + blocks2[9] - 1958414417;
                    d2 = (d2 << 12 | d2 >>> 20) + a2 << 0;
                    c2 += (b2 ^ d2 & (a2 ^ b2)) + blocks2[10] - 42063;
                    c2 = (c2 << 17 | c2 >>> 15) + d2 << 0;
                    b2 += (a2 ^ c2 & (d2 ^ a2)) + blocks2[11] - 1990404162;
                    b2 = (b2 << 22 | b2 >>> 10) + c2 << 0;
                    a2 += (d2 ^ b2 & (c2 ^ d2)) + blocks2[12] + 1804603682;
                    a2 = (a2 << 7 | a2 >>> 25) + b2 << 0;
                    d2 += (c2 ^ a2 & (b2 ^ c2)) + blocks2[13] - 40341101;
                    d2 = (d2 << 12 | d2 >>> 20) + a2 << 0;
                    c2 += (b2 ^ d2 & (a2 ^ b2)) + blocks2[14] - 1502002290;
                    c2 = (c2 << 17 | c2 >>> 15) + d2 << 0;
                    b2 += (a2 ^ c2 & (d2 ^ a2)) + blocks2[15] + 1236535329;
                    b2 = (b2 << 22 | b2 >>> 10) + c2 << 0;
                    a2 += (c2 ^ d2 & (b2 ^ c2)) + blocks2[1] - 165796510;
                    a2 = (a2 << 5 | a2 >>> 27) + b2 << 0;
                    d2 += (b2 ^ c2 & (a2 ^ b2)) + blocks2[6] - 1069501632;
                    d2 = (d2 << 9 | d2 >>> 23) + a2 << 0;
                    c2 += (a2 ^ b2 & (d2 ^ a2)) + blocks2[11] + 643717713;
                    c2 = (c2 << 14 | c2 >>> 18) + d2 << 0;
                    b2 += (d2 ^ a2 & (c2 ^ d2)) + blocks2[0] - 373897302;
                    b2 = (b2 << 20 | b2 >>> 12) + c2 << 0;
                    a2 += (c2 ^ d2 & (b2 ^ c2)) + blocks2[5] - 701558691;
                    a2 = (a2 << 5 | a2 >>> 27) + b2 << 0;
                    d2 += (b2 ^ c2 & (a2 ^ b2)) + blocks2[10] + 38016083;
                    d2 = (d2 << 9 | d2 >>> 23) + a2 << 0;
                    c2 += (a2 ^ b2 & (d2 ^ a2)) + blocks2[15] - 660478335;
                    c2 = (c2 << 14 | c2 >>> 18) + d2 << 0;
                    b2 += (d2 ^ a2 & (c2 ^ d2)) + blocks2[4] - 405537848;
                    b2 = (b2 << 20 | b2 >>> 12) + c2 << 0;
                    a2 += (c2 ^ d2 & (b2 ^ c2)) + blocks2[9] + 568446438;
                    a2 = (a2 << 5 | a2 >>> 27) + b2 << 0;
                    d2 += (b2 ^ c2 & (a2 ^ b2)) + blocks2[14] - 1019803690;
                    d2 = (d2 << 9 | d2 >>> 23) + a2 << 0;
                    c2 += (a2 ^ b2 & (d2 ^ a2)) + blocks2[3] - 187363961;
                    c2 = (c2 << 14 | c2 >>> 18) + d2 << 0;
                    b2 += (d2 ^ a2 & (c2 ^ d2)) + blocks2[8] + 1163531501;
                    b2 = (b2 << 20 | b2 >>> 12) + c2 << 0;
                    a2 += (c2 ^ d2 & (b2 ^ c2)) + blocks2[13] - 1444681467;
                    a2 = (a2 << 5 | a2 >>> 27) + b2 << 0;
                    d2 += (b2 ^ c2 & (a2 ^ b2)) + blocks2[2] - 51403784;
                    d2 = (d2 << 9 | d2 >>> 23) + a2 << 0;
                    c2 += (a2 ^ b2 & (d2 ^ a2)) + blocks2[7] + 1735328473;
                    c2 = (c2 << 14 | c2 >>> 18) + d2 << 0;
                    b2 += (d2 ^ a2 & (c2 ^ d2)) + blocks2[12] - 1926607734;
                    b2 = (b2 << 20 | b2 >>> 12) + c2 << 0;
                    bc = b2 ^ c2;
                    a2 += (bc ^ d2) + blocks2[5] - 378558;
                    a2 = (a2 << 4 | a2 >>> 28) + b2 << 0;
                    d2 += (bc ^ a2) + blocks2[8] - 2022574463;
                    d2 = (d2 << 11 | d2 >>> 21) + a2 << 0;
                    da = d2 ^ a2;
                    c2 += (da ^ b2) + blocks2[11] + 1839030562;
                    c2 = (c2 << 16 | c2 >>> 16) + d2 << 0;
                    b2 += (da ^ c2) + blocks2[14] - 35309556;
                    b2 = (b2 << 23 | b2 >>> 9) + c2 << 0;
                    bc = b2 ^ c2;
                    a2 += (bc ^ d2) + blocks2[1] - 1530992060;
                    a2 = (a2 << 4 | a2 >>> 28) + b2 << 0;
                    d2 += (bc ^ a2) + blocks2[4] + 1272893353;
                    d2 = (d2 << 11 | d2 >>> 21) + a2 << 0;
                    da = d2 ^ a2;
                    c2 += (da ^ b2) + blocks2[7] - 155497632;
                    c2 = (c2 << 16 | c2 >>> 16) + d2 << 0;
                    b2 += (da ^ c2) + blocks2[10] - 1094730640;
                    b2 = (b2 << 23 | b2 >>> 9) + c2 << 0;
                    bc = b2 ^ c2;
                    a2 += (bc ^ d2) + blocks2[13] + 681279174;
                    a2 = (a2 << 4 | a2 >>> 28) + b2 << 0;
                    d2 += (bc ^ a2) + blocks2[0] - 358537222;
                    d2 = (d2 << 11 | d2 >>> 21) + a2 << 0;
                    da = d2 ^ a2;
                    c2 += (da ^ b2) + blocks2[3] - 722521979;
                    c2 = (c2 << 16 | c2 >>> 16) + d2 << 0;
                    b2 += (da ^ c2) + blocks2[6] + 76029189;
                    b2 = (b2 << 23 | b2 >>> 9) + c2 << 0;
                    bc = b2 ^ c2;
                    a2 += (bc ^ d2) + blocks2[9] - 640364487;
                    a2 = (a2 << 4 | a2 >>> 28) + b2 << 0;
                    d2 += (bc ^ a2) + blocks2[12] - 421815835;
                    d2 = (d2 << 11 | d2 >>> 21) + a2 << 0;
                    da = d2 ^ a2;
                    c2 += (da ^ b2) + blocks2[15] + 530742520;
                    c2 = (c2 << 16 | c2 >>> 16) + d2 << 0;
                    b2 += (da ^ c2) + blocks2[2] - 995338651;
                    b2 = (b2 << 23 | b2 >>> 9) + c2 << 0;
                    a2 += (c2 ^ (b2 | ~d2)) + blocks2[0] - 198630844;
                    a2 = (a2 << 6 | a2 >>> 26) + b2 << 0;
                    d2 += (b2 ^ (a2 | ~c2)) + blocks2[7] + 1126891415;
                    d2 = (d2 << 10 | d2 >>> 22) + a2 << 0;
                    c2 += (a2 ^ (d2 | ~b2)) + blocks2[14] - 1416354905;
                    c2 = (c2 << 15 | c2 >>> 17) + d2 << 0;
                    b2 += (d2 ^ (c2 | ~a2)) + blocks2[5] - 57434055;
                    b2 = (b2 << 21 | b2 >>> 11) + c2 << 0;
                    a2 += (c2 ^ (b2 | ~d2)) + blocks2[12] + 1700485571;
                    a2 = (a2 << 6 | a2 >>> 26) + b2 << 0;
                    d2 += (b2 ^ (a2 | ~c2)) + blocks2[3] - 1894986606;
                    d2 = (d2 << 10 | d2 >>> 22) + a2 << 0;
                    c2 += (a2 ^ (d2 | ~b2)) + blocks2[10] - 1051523;
                    c2 = (c2 << 15 | c2 >>> 17) + d2 << 0;
                    b2 += (d2 ^ (c2 | ~a2)) + blocks2[1] - 2054922799;
                    b2 = (b2 << 21 | b2 >>> 11) + c2 << 0;
                    a2 += (c2 ^ (b2 | ~d2)) + blocks2[8] + 1873313359;
                    a2 = (a2 << 6 | a2 >>> 26) + b2 << 0;
                    d2 += (b2 ^ (a2 | ~c2)) + blocks2[15] - 30611744;
                    d2 = (d2 << 10 | d2 >>> 22) + a2 << 0;
                    c2 += (a2 ^ (d2 | ~b2)) + blocks2[6] - 1560198380;
                    c2 = (c2 << 15 | c2 >>> 17) + d2 << 0;
                    b2 += (d2 ^ (c2 | ~a2)) + blocks2[13] + 1309151649;
                    b2 = (b2 << 21 | b2 >>> 11) + c2 << 0;
                    a2 += (c2 ^ (b2 | ~d2)) + blocks2[4] - 145523070;
                    a2 = (a2 << 6 | a2 >>> 26) + b2 << 0;
                    d2 += (b2 ^ (a2 | ~c2)) + blocks2[11] - 1120210379;
                    d2 = (d2 << 10 | d2 >>> 22) + a2 << 0;
                    c2 += (a2 ^ (d2 | ~b2)) + blocks2[2] + 718787259;
                    c2 = (c2 << 15 | c2 >>> 17) + d2 << 0;
                    b2 += (d2 ^ (c2 | ~a2)) + blocks2[9] - 343485551;
                    b2 = (b2 << 21 | b2 >>> 11) + c2 << 0;
                    if (this.first) {
                      this.h0 = a2 + 1732584193 << 0;
                      this.h1 = b2 - 271733879 << 0;
                      this.h2 = c2 - 1732584194 << 0;
                      this.h3 = d2 + 271733878 << 0;
                      this.first = false;
                    } else {
                      this.h0 = this.h0 + a2 << 0;
                      this.h1 = this.h1 + b2 << 0;
                      this.h2 = this.h2 + c2 << 0;
                      this.h3 = this.h3 + d2 << 0;
                    }
                  };
                  Md5.prototype.hex = function() {
                    this.finalize();
                    var h0 = this.h0, h1 = this.h1, h2 = this.h2, h3 = this.h3;
                    return HEX_CHARS[h0 >> 4 & 15] + HEX_CHARS[h0 & 15] + HEX_CHARS[h0 >> 12 & 15] + HEX_CHARS[h0 >> 8 & 15] + HEX_CHARS[h0 >> 20 & 15] + HEX_CHARS[h0 >> 16 & 15] + HEX_CHARS[h0 >> 28 & 15] + HEX_CHARS[h0 >> 24 & 15] + HEX_CHARS[h1 >> 4 & 15] + HEX_CHARS[h1 & 15] + HEX_CHARS[h1 >> 12 & 15] + HEX_CHARS[h1 >> 8 & 15] + HEX_CHARS[h1 >> 20 & 15] + HEX_CHARS[h1 >> 16 & 15] + HEX_CHARS[h1 >> 28 & 15] + HEX_CHARS[h1 >> 24 & 15] + HEX_CHARS[h2 >> 4 & 15] + HEX_CHARS[h2 & 15] + HEX_CHARS[h2 >> 12 & 15] + HEX_CHARS[h2 >> 8 & 15] + HEX_CHARS[h2 >> 20 & 15] + HEX_CHARS[h2 >> 16 & 15] + HEX_CHARS[h2 >> 28 & 15] + HEX_CHARS[h2 >> 24 & 15] + HEX_CHARS[h3 >> 4 & 15] + HEX_CHARS[h3 & 15] + HEX_CHARS[h3 >> 12 & 15] + HEX_CHARS[h3 >> 8 & 15] + HEX_CHARS[h3 >> 20 & 15] + HEX_CHARS[h3 >> 16 & 15] + HEX_CHARS[h3 >> 28 & 15] + HEX_CHARS[h3 >> 24 & 15];
                  };
                  Md5.prototype.toString = Md5.prototype.hex;
                  Md5.prototype.digest = function(format) {
                    if (format === "hex")
                      return this.hex();
                    this.finalize();
                    var h0 = this.h0, h1 = this.h1, h2 = this.h2, h3 = this.h3;
                    var res2 = [h0 & 255, h0 >> 8 & 255, h0 >> 16 & 255, h0 >> 24 & 255, h1 & 255, h1 >> 8 & 255, h1 >> 16 & 255, h1 >> 24 & 255, h2 & 255, h2 >> 8 & 255, h2 >> 16 & 255, h2 >> 24 & 255, h3 & 255, h3 >> 8 & 255, h3 >> 16 & 255, h3 >> 24 & 255];
                    return res2;
                  };
                  Md5.prototype.array = Md5.prototype.digest;
                  Md5.prototype.arrayBuffer = function() {
                    this.finalize();
                    var buffer2 = new ArrayBuffer(16);
                    var blocks2 = new Uint32Array(buffer2);
                    blocks2[0] = this.h0;
                    blocks2[1] = this.h1;
                    blocks2[2] = this.h2;
                    blocks2[3] = this.h3;
                    return buffer2;
                  };
                  Md5.prototype.buffer = Md5.prototype.arrayBuffer;
                  Md5.prototype.base64 = function() {
                    var v1, v2, v3, base64Str = "", bytes = this.array();
                    for (var i2 = 0; i2 < 15; ) {
                      v1 = bytes[i2++];
                      v2 = bytes[i2++];
                      v3 = bytes[i2++];
                      base64Str += BASE64_ENCODE_CHAR[v1 >>> 2] + BASE64_ENCODE_CHAR[(v1 << 4 | v2 >>> 4) & 63] + BASE64_ENCODE_CHAR[(v2 << 2 | v3 >>> 6) & 63] + BASE64_ENCODE_CHAR[v3 & 63];
                    }
                    v1 = bytes[i2];
                    base64Str += BASE64_ENCODE_CHAR[v1 >>> 2] + BASE64_ENCODE_CHAR[v1 << 4 & 63] + "==";
                    return base64Str;
                  };
                  var exports = createMethod();
                  if (COMMON_JS) {
                    module.exports = exports;
                  } else {
                    root.md5 = exports;
                    if (AMD) {
                      !(__WEBPACK_AMD_DEFINE_RESULT__ = (function() {
                        return exports;
                      }).call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== void 0 && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
                    }
                  }
                })();
              }).call(this, __webpack_require__(
                /*! ./../node_modules/process/browser.js */
                "./node_modules/process/browser.js"
              ), __webpack_require__(
                /*! ./../node_modules/webpack/buildin/global.js */
                "./node_modules/webpack/buildin/global.js"
              ), __webpack_require__(
                /*! ./../node_modules/webpack/buildin/module.js */
                "./node_modules/webpack/buildin/module.js"
              )(module));
            }
          ),
          /***/
          "./lib/request.js": (
            /*!************************!*\
              !*** ./lib/request.js ***!
              \************************/
            /*! no static exports found */
            /***/
            function(module2, exports2, __webpack_require__2) {
              var _typeof2 = __webpack_require__2(
                /*! @babel/runtime/helpers/typeof */
                "./node_modules/@babel/runtime/helpers/typeof.js"
              );
              var stringifyPrimitive = function stringifyPrimitive2(v2) {
                switch (_typeof2(v2)) {
                  case "string":
                    return v2;
                  case "boolean":
                    return v2 ? "true" : "false";
                  case "number":
                    return isFinite(v2) ? v2 : "";
                  default:
                    return "";
                }
              };
              var queryStringify = function queryStringify2(obj, sep, eq, name) {
                sep = sep || "&";
                eq = eq || "=";
                if (obj === null) {
                  obj = void 0;
                }
                if (_typeof2(obj) === "object") {
                  return Object.keys(obj).map(function(k) {
                    var ks2 = encodeURIComponent(stringifyPrimitive(k)) + eq;
                    if (Array.isArray(obj[k])) {
                      return obj[k].map(function(v2) {
                        return ks2 + encodeURIComponent(stringifyPrimitive(v2));
                      }).join(sep);
                    } else {
                      return ks2 + encodeURIComponent(stringifyPrimitive(obj[k]));
                    }
                  }).filter(Boolean).join(sep);
                }
                if (!name)
                  return "";
                return encodeURIComponent(stringifyPrimitive(name)) + eq + encodeURIComponent(stringifyPrimitive(obj));
              };
              var xhrRes = function xhrRes2(err, xhr, body) {
                var headers = {};
                xhr.getAllResponseHeaders().trim().split("\n").forEach(function(item) {
                  if (item) {
                    var index = item.indexOf(":");
                    var key = item.substr(0, index).trim().toLowerCase();
                    var val2 = item.substr(index + 1).trim();
                    headers[key] = val2;
                  }
                });
                return {
                  error: err,
                  statusCode: xhr.status,
                  statusMessage: xhr.statusText,
                  headers,
                  body
                };
              };
              var xhrBody = function xhrBody2(xhr, dataType) {
                return !dataType && dataType === "text" ? xhr.responseText : xhr.response;
              };
              var request2 = function request22(opt, callback) {
                var method2 = (opt.method || "GET").toUpperCase();
                var url2 = opt.url;
                if (opt.qs) {
                  var qsStr = queryStringify(opt.qs);
                  if (qsStr) {
                    url2 += (url2.indexOf("?") === -1 ? "?" : "&") + qsStr;
                  }
                }
                var xhr = new XMLHttpRequest();
                xhr.open(method2, url2, true);
                xhr.responseType = opt.dataType || "text";
                if (opt.xhrFields) {
                  for (var xhrField in opt.xhrFields) {
                    xhr[xhrField] = opt.xhrFields[xhrField];
                  }
                }
                var headers = opt.headers;
                if (headers) {
                  for (var key in headers) {
                    if (headers.hasOwnProperty(key) && key.toLowerCase() !== "content-length" && key.toLowerCase() !== "user-agent" && key.toLowerCase() !== "origin" && key.toLowerCase() !== "host") {
                      xhr.setRequestHeader(key, headers[key]);
                    }
                  }
                }
                if (opt.onProgress && xhr.upload)
                  xhr.upload.onprogress = opt.onProgress;
                if (opt.onDownloadProgress)
                  xhr.onprogress = opt.onDownloadProgress;
                if (opt.timeout)
                  xhr.timeout = opt.timeout;
                xhr.ontimeout = function(event) {
                  var error = new Error("timeout");
                  callback(xhrRes(error, xhr));
                };
                xhr.onload = function() {
                  callback(xhrRes(null, xhr, xhrBody(xhr, opt.dataType)));
                };
                xhr.onerror = function(err) {
                  var body = xhrBody(xhr, opt.dataType);
                  if (body) {
                    callback(xhrRes(null, xhr, body));
                  } else {
                    var error = xhr.statusText;
                    if (!error && xhr.status === 0)
                      error = new Error("CORS blocked or network error");
                    callback(xhrRes(error, xhr, body));
                  }
                };
                xhr.send(opt.body || "");
                return xhr;
              };
              module2.exports = request2;
            }
          ),
          /***/
          "./lib/xml2json.js": (
            /*!*************************!*\
              !*** ./lib/xml2json.js ***!
              \*************************/
            /*! no static exports found */
            /***/
            function(module2, exports2, __webpack_require__2) {
              var DOMParser = __webpack_require__2(
                /*! @xmldom/xmldom */
                "./node_modules/@xmldom/xmldom/lib/index.js"
              ).DOMParser;
              var xmlToJSON = (function() {
                this.version = "1.3.5";
                var options = {
                  // set up the default options
                  mergeCDATA: true,
                  // extract cdata and merge with text
                  normalize: true,
                  // collapse multiple spaces to single space
                  stripElemPrefix: true
                  // for elements of same name in diff namespaces, you can enable namespaces and access the nskey property
                };
                var prefixMatch = new RegExp(/(?!xmlns)^.*:/);
                this.grokType = function(sValue) {
                  if (/^\s*$/.test(sValue)) {
                    return null;
                  }
                  if (/^(?:true|false)$/i.test(sValue)) {
                    return sValue.toLowerCase() === "true";
                  }
                  if (isFinite(sValue)) {
                    return parseFloat(sValue);
                  }
                  return sValue;
                };
                this.parseString = function(xmlString, opt) {
                  if (xmlString) {
                    var xml = this.stringToXML(xmlString);
                    if (xml.getElementsByTagName("parsererror").length) {
                      return null;
                    } else {
                      return this.parseXML(xml, opt);
                    }
                  } else {
                    return null;
                  }
                };
                this.parseXML = function(oXMLParent, opt) {
                  for (var key in opt) {
                    options[key] = opt[key];
                  }
                  var vResult = {}, nLength = 0, sCollectedTxt = "";
                  var childNum = oXMLParent.childNodes.length;
                  if (childNum) {
                    for (var oNode, sProp, vContent, nItem = 0; nItem < oXMLParent.childNodes.length; nItem++) {
                      oNode = oXMLParent.childNodes.item(nItem);
                      if (oNode.nodeType === 4) {
                        if (options.mergeCDATA) {
                          sCollectedTxt += oNode.nodeValue;
                        }
                      } else if (oNode.nodeType === 3) {
                        sCollectedTxt += oNode.nodeValue;
                      } else if (oNode.nodeType === 1) {
                        if (nLength === 0) {
                          vResult = {};
                        }
                        if (options.stripElemPrefix) {
                          sProp = oNode.nodeName.replace(prefixMatch, "");
                        } else {
                          sProp = oNode.nodeName;
                        }
                        vContent = xmlToJSON.parseXML(oNode);
                        if (vResult.hasOwnProperty(sProp)) {
                          if (vResult[sProp].constructor !== Array) {
                            vResult[sProp] = [vResult[sProp]];
                          }
                          vResult[sProp].push(vContent);
                        } else {
                          vResult[sProp] = vContent;
                          nLength++;
                        }
                      }
                    }
                  }
                  if (!Object.keys(vResult).length) {
                    vResult = sCollectedTxt || "";
                  }
                  return vResult;
                };
                this.xmlToString = function(xmlDoc) {
                  try {
                    var xmlString = xmlDoc.xml ? xmlDoc.xml : new XMLSerializer().serializeToString(xmlDoc);
                    return xmlString;
                  } catch (err) {
                    return null;
                  }
                };
                this.stringToXML = function(xmlString) {
                  try {
                    var xmlDoc = null;
                    if (window.DOMParser) {
                      var parser2 = new DOMParser();
                      xmlDoc = parser2.parseFromString(xmlString, "text/xml");
                      return xmlDoc;
                    } else {
                      xmlDoc = new ActiveXObject("Microsoft.XMLDOM");
                      xmlDoc.async = false;
                      xmlDoc.loadXML(xmlString);
                      return xmlDoc;
                    }
                  } catch (e2) {
                    return null;
                  }
                };
                return this;
              }).call({});
              var xml2json = function xml2json2(xmlString) {
                return xmlToJSON.parseString(xmlString);
              };
              module2.exports = xml2json;
            }
          ),
          /***/
          "./node_modules/@babel/runtime/helpers/classCallCheck.js": (
            /*!***************************************************************!*\
              !*** ./node_modules/@babel/runtime/helpers/classCallCheck.js ***!
              \***************************************************************/
            /*! no static exports found */
            /***/
            function(module2, exports2) {
              function _classCallCheck(instance, Constructor) {
                if (!(instance instanceof Constructor)) {
                  throw new TypeError("Cannot call a class as a function");
                }
              }
              module2.exports = _classCallCheck, module2.exports.__esModule = true, module2.exports["default"] = module2.exports;
            }
          ),
          /***/
          "./node_modules/@babel/runtime/helpers/createClass.js": (
            /*!************************************************************!*\
              !*** ./node_modules/@babel/runtime/helpers/createClass.js ***!
              \************************************************************/
            /*! no static exports found */
            /***/
            function(module2, exports2) {
              function _defineProperties(target, props) {
                for (var i2 = 0; i2 < props.length; i2++) {
                  var descriptor = props[i2];
                  descriptor.enumerable = descriptor.enumerable || false;
                  descriptor.configurable = true;
                  if ("value" in descriptor)
                    descriptor.writable = true;
                  Object.defineProperty(target, descriptor.key, descriptor);
                }
              }
              function _createClass(Constructor, protoProps, staticProps) {
                if (protoProps)
                  _defineProperties(Constructor.prototype, protoProps);
                if (staticProps)
                  _defineProperties(Constructor, staticProps);
                Object.defineProperty(Constructor, "prototype", {
                  writable: false
                });
                return Constructor;
              }
              module2.exports = _createClass, module2.exports.__esModule = true, module2.exports["default"] = module2.exports;
            }
          ),
          /***/
          "./node_modules/@babel/runtime/helpers/typeof.js": (
            /*!*******************************************************!*\
              !*** ./node_modules/@babel/runtime/helpers/typeof.js ***!
              \*******************************************************/
            /*! no static exports found */
            /***/
            function(module2, exports2) {
              function _typeof2(obj) {
                "@babel/helpers - typeof";
                return module2.exports = _typeof2 = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(obj2) {
                  return typeof obj2;
                } : function(obj2) {
                  return obj2 && "function" == typeof Symbol && obj2.constructor === Symbol && obj2 !== Symbol.prototype ? "symbol" : typeof obj2;
                }, module2.exports.__esModule = true, module2.exports["default"] = module2.exports, _typeof2(obj);
              }
              module2.exports = _typeof2, module2.exports.__esModule = true, module2.exports["default"] = module2.exports;
            }
          ),
          /***/
          "./node_modules/@xmldom/xmldom/lib/conventions.js": (
            /*!********************************************************!*\
              !*** ./node_modules/@xmldom/xmldom/lib/conventions.js ***!
              \********************************************************/
            /*! no static exports found */
            /***/
            function(module2, exports2, __webpack_require__2) {
              function find(list, predicate, ac) {
                if (ac === void 0) {
                  ac = Array.prototype;
                }
                if (list && typeof ac.find === "function") {
                  return ac.find.call(list, predicate);
                }
                for (var i2 = 0; i2 < list.length; i2++) {
                  if (Object.prototype.hasOwnProperty.call(list, i2)) {
                    var item = list[i2];
                    if (predicate.call(void 0, item, i2, list)) {
                      return item;
                    }
                  }
                }
              }
              function freeze(object2, oc) {
                if (oc === void 0) {
                  oc = Object;
                }
                return oc && typeof oc.freeze === "function" ? oc.freeze(object2) : object2;
              }
              function assign2(target, source) {
                if (target === null || typeof target !== "object") {
                  throw new TypeError("target is not an object");
                }
                for (var key in source) {
                  if (Object.prototype.hasOwnProperty.call(source, key)) {
                    target[key] = source[key];
                  }
                }
                return target;
              }
              var MIME_TYPE = freeze({
                /**
                 * `text/html`, the only mime type that triggers treating an XML document as HTML.
                 *
                 * @see DOMParser.SupportedType.isHTML
                 * @see https://www.iana.org/assignments/media-types/text/html IANA MimeType registration
                 * @see https://en.wikipedia.org/wiki/HTML Wikipedia
                 * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMParser/parseFromString MDN
                 * @see https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#dom-domparser-parsefromstring WHATWG HTML Spec
                 */
                HTML: "text/html",
                /**
                 * Helper method to check a mime type if it indicates an HTML document
                 *
                 * @param {string} [value]
                 * @returns {boolean}
                 *
                 * @see https://www.iana.org/assignments/media-types/text/html IANA MimeType registration
                 * @see https://en.wikipedia.org/wiki/HTML Wikipedia
                 * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMParser/parseFromString MDN
                 * @see https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#dom-domparser-parsefromstring 	 */
                isHTML: function(value) {
                  return value === MIME_TYPE.HTML;
                },
                /**
                 * `application/xml`, the standard mime type for XML documents.
                 *
                 * @see https://www.iana.org/assignments/media-types/application/xml IANA MimeType registration
                 * @see https://tools.ietf.org/html/rfc7303#section-9.1 RFC 7303
                 * @see https://en.wikipedia.org/wiki/XML_and_MIME Wikipedia
                 */
                XML_APPLICATION: "application/xml",
                /**
                 * `text/html`, an alias for `application/xml`.
                 *
                 * @see https://tools.ietf.org/html/rfc7303#section-9.2 RFC 7303
                 * @see https://www.iana.org/assignments/media-types/text/xml IANA MimeType registration
                 * @see https://en.wikipedia.org/wiki/XML_and_MIME Wikipedia
                 */
                XML_TEXT: "text/xml",
                /**
                 * `application/xhtml+xml`, indicates an XML document that has the default HTML namespace,
                 * but is parsed as an XML document.
                 *
                 * @see https://www.iana.org/assignments/media-types/application/xhtml+xml IANA MimeType registration
                 * @see https://dom.spec.whatwg.org/#dom-domimplementation-createdocument WHATWG DOM Spec
                 * @see https://en.wikipedia.org/wiki/XHTML Wikipedia
                 */
                XML_XHTML_APPLICATION: "application/xhtml+xml",
                /**
                 * `image/svg+xml`,
                 *
                 * @see https://www.iana.org/assignments/media-types/image/svg+xml IANA MimeType registration
                 * @see https://www.w3.org/TR/SVG11/ W3C SVG 1.1
                 * @see https://en.wikipedia.org/wiki/Scalable_Vector_Graphics Wikipedia
                 */
                XML_SVG_IMAGE: "image/svg+xml"
              });
              var NAMESPACE = freeze({
                /**
                 * The XHTML namespace.
                 *
                 * @see http://www.w3.org/1999/xhtml
                 */
                HTML: "http://www.w3.org/1999/xhtml",
                /**
                 * Checks if `uri` equals `NAMESPACE.HTML`.
                 *
                 * @param {string} [uri]
                 *
                 * @see NAMESPACE.HTML
                 */
                isHTML: function(uri) {
                  return uri === NAMESPACE.HTML;
                },
                /**
                 * The SVG namespace.
                 *
                 * @see http://www.w3.org/2000/svg
                 */
                SVG: "http://www.w3.org/2000/svg",
                /**
                 * The `xml:` namespace.
                 *
                 * @see http://www.w3.org/XML/1998/namespace
                 */
                XML: "http://www.w3.org/XML/1998/namespace",
                /**
                 * The `xmlns:` namespace
                 *
                 * @see https://www.w3.org/2000/xmlns/
                 */
                XMLNS: "http://www.w3.org/2000/xmlns/"
              });
              exports2.assign = assign2;
              exports2.find = find;
              exports2.freeze = freeze;
              exports2.MIME_TYPE = MIME_TYPE;
              exports2.NAMESPACE = NAMESPACE;
            }
          ),
          /***/
          "./node_modules/@xmldom/xmldom/lib/dom-parser.js": (
            /*!*******************************************************!*\
              !*** ./node_modules/@xmldom/xmldom/lib/dom-parser.js ***!
              \*******************************************************/
            /*! no static exports found */
            /***/
            function(module2, exports2, __webpack_require__2) {
              var conventions = __webpack_require__2(
                /*! ./conventions */
                "./node_modules/@xmldom/xmldom/lib/conventions.js"
              );
              var dom2 = __webpack_require__2(
                /*! ./dom */
                "./node_modules/@xmldom/xmldom/lib/dom.js"
              );
              var entities = __webpack_require__2(
                /*! ./entities */
                "./node_modules/@xmldom/xmldom/lib/entities.js"
              );
              var sax = __webpack_require__2(
                /*! ./sax */
                "./node_modules/@xmldom/xmldom/lib/sax.js"
              );
              var DOMImplementation = dom2.DOMImplementation;
              var NAMESPACE = conventions.NAMESPACE;
              var ParseError = sax.ParseError;
              var XMLReader = sax.XMLReader;
              function normalizeLineEndings(input) {
                return input.replace(/\r[\n\u0085]/g, "\n").replace(/[\r\u0085\u2028]/g, "\n");
              }
              function DOMParser(options) {
                this.options = options || { locator: {} };
              }
              DOMParser.prototype.parseFromString = function(source, mimeType) {
                var options = this.options;
                var sax2 = new XMLReader();
                var domBuilder = options.domBuilder || new DOMHandler();
                var errorHandler = options.errorHandler;
                var locator = options.locator;
                var defaultNSMap = options.xmlns || {};
                var isHTML = /\/x?html?$/.test(mimeType);
                var entityMap = isHTML ? entities.HTML_ENTITIES : entities.XML_ENTITIES;
                if (locator) {
                  domBuilder.setDocumentLocator(locator);
                }
                sax2.errorHandler = buildErrorHandler(errorHandler, domBuilder, locator);
                sax2.domBuilder = options.domBuilder || domBuilder;
                if (isHTML) {
                  defaultNSMap[""] = NAMESPACE.HTML;
                }
                defaultNSMap.xml = defaultNSMap.xml || NAMESPACE.XML;
                var normalize = options.normalizeLineEndings || normalizeLineEndings;
                if (source && typeof source === "string") {
                  sax2.parse(
                    normalize(source),
                    defaultNSMap,
                    entityMap
                  );
                } else {
                  sax2.errorHandler.error("invalid doc source");
                }
                return domBuilder.doc;
              };
              function buildErrorHandler(errorImpl, domBuilder, locator) {
                if (!errorImpl) {
                  if (domBuilder instanceof DOMHandler) {
                    return domBuilder;
                  }
                  errorImpl = domBuilder;
                }
                var errorHandler = {};
                var isCallback = errorImpl instanceof Function;
                locator = locator || {};
                function build(key) {
                  var fn = errorImpl[key];
                  if (!fn && isCallback) {
                    fn = errorImpl.length == 2 ? function(msg) {
                      errorImpl(key, msg);
                    } : errorImpl;
                  }
                  errorHandler[key] = fn && function(msg) {
                    fn("[xmldom " + key + "]	" + msg + _locator(locator));
                  } || function() {
                  };
                }
                build("warning");
                build("error");
                build("fatalError");
                return errorHandler;
              }
              function DOMHandler() {
                this.cdata = false;
              }
              function position(locator, node) {
                node.lineNumber = locator.lineNumber;
                node.columnNumber = locator.columnNumber;
              }
              DOMHandler.prototype = {
                startDocument: function() {
                  this.doc = new DOMImplementation().createDocument(null, null, null);
                  if (this.locator) {
                    this.doc.documentURI = this.locator.systemId;
                  }
                },
                startElement: function(namespaceURI, localName, qName, attrs) {
                  var doc = this.doc;
                  var el = doc.createElementNS(namespaceURI, qName || localName);
                  var len = attrs.length;
                  appendElement(this, el);
                  this.currentElement = el;
                  this.locator && position(this.locator, el);
                  for (var i2 = 0; i2 < len; i2++) {
                    var namespaceURI = attrs.getURI(i2);
                    var value = attrs.getValue(i2);
                    var qName = attrs.getQName(i2);
                    var attr = doc.createAttributeNS(namespaceURI, qName);
                    this.locator && position(attrs.getLocator(i2), attr);
                    attr.value = attr.nodeValue = value;
                    el.setAttributeNode(attr);
                  }
                },
                endElement: function(namespaceURI, localName, qName) {
                  var current = this.currentElement;
                  current.tagName;
                  this.currentElement = current.parentNode;
                },
                startPrefixMapping: function(prefix, uri) {
                },
                endPrefixMapping: function(prefix) {
                },
                processingInstruction: function(target, data) {
                  var ins = this.doc.createProcessingInstruction(target, data);
                  this.locator && position(this.locator, ins);
                  appendElement(this, ins);
                },
                ignorableWhitespace: function(ch, start, length) {
                },
                characters: function(chars, start, length) {
                  chars = _toString.apply(this, arguments);
                  if (chars) {
                    if (this.cdata) {
                      var charNode = this.doc.createCDATASection(chars);
                    } else {
                      var charNode = this.doc.createTextNode(chars);
                    }
                    if (this.currentElement) {
                      this.currentElement.appendChild(charNode);
                    } else if (/^\s*$/.test(chars)) {
                      this.doc.appendChild(charNode);
                    }
                    this.locator && position(this.locator, charNode);
                  }
                },
                skippedEntity: function(name) {
                },
                endDocument: function() {
                  this.doc.normalize();
                },
                setDocumentLocator: function(locator) {
                  if (this.locator = locator) {
                    locator.lineNumber = 0;
                  }
                },
                //LexicalHandler
                comment: function(chars, start, length) {
                  chars = _toString.apply(this, arguments);
                  var comm = this.doc.createComment(chars);
                  this.locator && position(this.locator, comm);
                  appendElement(this, comm);
                },
                startCDATA: function() {
                  this.cdata = true;
                },
                endCDATA: function() {
                  this.cdata = false;
                },
                startDTD: function(name, publicId, systemId) {
                  var impl = this.doc.implementation;
                  if (impl && impl.createDocumentType) {
                    var dt2 = impl.createDocumentType(name, publicId, systemId);
                    this.locator && position(this.locator, dt2);
                    appendElement(this, dt2);
                    this.doc.doctype = dt2;
                  }
                },
                /**
                 * @see org.xml.sax.ErrorHandler
                 * @link http://www.saxproject.org/apidoc/org/xml/sax/ErrorHandler.html
                 */
                warning: function(error) {
                  formatAppLog("warn", "at node_modules/cos-js-sdk-v5/dist/cos-js-sdk-v5.js:3780", "[xmldom warning]	" + error, _locator(this.locator));
                },
                error: function(error) {
                  formatAppLog("error", "at node_modules/cos-js-sdk-v5/dist/cos-js-sdk-v5.js:3783", "[xmldom error]	" + error, _locator(this.locator));
                },
                fatalError: function(error) {
                  throw new ParseError(error, this.locator);
                }
              };
              function _locator(l2) {
                if (l2) {
                  return "\n@" + (l2.systemId || "") + "#[line:" + l2.lineNumber + ",col:" + l2.columnNumber + "]";
                }
              }
              function _toString(chars, start, length) {
                if (typeof chars == "string") {
                  return chars.substr(start, length);
                } else {
                  if (chars.length >= start + length || start) {
                    return new java.lang.String(chars, start, length) + "";
                  }
                  return chars;
                }
              }
              "endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g, function(key) {
                DOMHandler.prototype[key] = function() {
                  return null;
                };
              });
              function appendElement(hander, node) {
                if (!hander.currentElement) {
                  hander.doc.appendChild(node);
                } else {
                  hander.currentElement.appendChild(node);
                }
              }
              exports2.__DOMHandler = DOMHandler;
              exports2.normalizeLineEndings = normalizeLineEndings;
              exports2.DOMParser = DOMParser;
            }
          ),
          /***/
          "./node_modules/@xmldom/xmldom/lib/dom.js": (
            /*!************************************************!*\
              !*** ./node_modules/@xmldom/xmldom/lib/dom.js ***!
              \************************************************/
            /*! no static exports found */
            /***/
            function(module2, exports2, __webpack_require__2) {
              var conventions = __webpack_require__2(
                /*! ./conventions */
                "./node_modules/@xmldom/xmldom/lib/conventions.js"
              );
              var find = conventions.find;
              var NAMESPACE = conventions.NAMESPACE;
              function notEmptyString(input) {
                return input !== "";
              }
              function splitOnASCIIWhitespace(input) {
                return input ? input.split(/[\t\n\f\r ]+/).filter(notEmptyString) : [];
              }
              function orderedSetReducer(current, element) {
                if (!current.hasOwnProperty(element)) {
                  current[element] = true;
                }
                return current;
              }
              function toOrderedSet(input) {
                if (!input)
                  return [];
                var list = splitOnASCIIWhitespace(input);
                return Object.keys(list.reduce(orderedSetReducer, {}));
              }
              function arrayIncludes(list) {
                return function(element) {
                  return list && list.indexOf(element) !== -1;
                };
              }
              function copy(src, dest) {
                for (var p2 in src) {
                  if (Object.prototype.hasOwnProperty.call(src, p2)) {
                    dest[p2] = src[p2];
                  }
                }
              }
              function _extends(Class, Super) {
                var pt2 = Class.prototype;
                if (!(pt2 instanceof Super)) {
                  let t2 = function() {
                  };
                  t2.prototype = Super.prototype;
                  t2 = new t2();
                  copy(pt2, t2);
                  Class.prototype = pt2 = t2;
                }
                if (pt2.constructor != Class) {
                  if (typeof Class != "function") {
                    formatAppLog("error", "at node_modules/cos-js-sdk-v5/dist/cos-js-sdk-v5.js:3949", "unknown Class:" + Class);
                  }
                  pt2.constructor = Class;
                }
              }
              var NodeType = {};
              var ELEMENT_NODE = NodeType.ELEMENT_NODE = 1;
              var ATTRIBUTE_NODE = NodeType.ATTRIBUTE_NODE = 2;
              var TEXT_NODE = NodeType.TEXT_NODE = 3;
              var CDATA_SECTION_NODE = NodeType.CDATA_SECTION_NODE = 4;
              var ENTITY_REFERENCE_NODE = NodeType.ENTITY_REFERENCE_NODE = 5;
              var ENTITY_NODE = NodeType.ENTITY_NODE = 6;
              var PROCESSING_INSTRUCTION_NODE = NodeType.PROCESSING_INSTRUCTION_NODE = 7;
              var COMMENT_NODE = NodeType.COMMENT_NODE = 8;
              var DOCUMENT_NODE = NodeType.DOCUMENT_NODE = 9;
              var DOCUMENT_TYPE_NODE = NodeType.DOCUMENT_TYPE_NODE = 10;
              var DOCUMENT_FRAGMENT_NODE = NodeType.DOCUMENT_FRAGMENT_NODE = 11;
              var NOTATION_NODE = NodeType.NOTATION_NODE = 12;
              var ExceptionCode = {};
              var ExceptionMessage = {};
              ExceptionCode.INDEX_SIZE_ERR = (ExceptionMessage[1] = "Index size error", 1);
              ExceptionCode.DOMSTRING_SIZE_ERR = (ExceptionMessage[2] = "DOMString size error", 2);
              var HIERARCHY_REQUEST_ERR = ExceptionCode.HIERARCHY_REQUEST_ERR = (ExceptionMessage[3] = "Hierarchy request error", 3);
              ExceptionCode.WRONG_DOCUMENT_ERR = (ExceptionMessage[4] = "Wrong document", 4);
              ExceptionCode.INVALID_CHARACTER_ERR = (ExceptionMessage[5] = "Invalid character", 5);
              ExceptionCode.NO_DATA_ALLOWED_ERR = (ExceptionMessage[6] = "No data allowed", 6);
              ExceptionCode.NO_MODIFICATION_ALLOWED_ERR = (ExceptionMessage[7] = "No modification allowed", 7);
              var NOT_FOUND_ERR = ExceptionCode.NOT_FOUND_ERR = (ExceptionMessage[8] = "Not found", 8);
              ExceptionCode.NOT_SUPPORTED_ERR = (ExceptionMessage[9] = "Not supported", 9);
              var INUSE_ATTRIBUTE_ERR = ExceptionCode.INUSE_ATTRIBUTE_ERR = (ExceptionMessage[10] = "Attribute in use", 10);
              ExceptionCode.INVALID_STATE_ERR = (ExceptionMessage[11] = "Invalid state", 11);
              ExceptionCode.SYNTAX_ERR = (ExceptionMessage[12] = "Syntax error", 12);
              ExceptionCode.INVALID_MODIFICATION_ERR = (ExceptionMessage[13] = "Invalid modification", 13);
              ExceptionCode.NAMESPACE_ERR = (ExceptionMessage[14] = "Invalid namespace", 14);
              ExceptionCode.INVALID_ACCESS_ERR = (ExceptionMessage[15] = "Invalid access", 15);
              function DOMException(code2, message2) {
                if (message2 instanceof Error) {
                  var error = message2;
                } else {
                  error = this;
                  Error.call(this, ExceptionMessage[code2]);
                  this.message = ExceptionMessage[code2];
                  if (Error.captureStackTrace)
                    Error.captureStackTrace(this, DOMException);
                }
                error.code = code2;
                if (message2)
                  this.message = this.message + ": " + message2;
                return error;
              }
              DOMException.prototype = Error.prototype;
              copy(ExceptionCode, DOMException);
              function NodeList() {
              }
              NodeList.prototype = {
                /**
                 * The number of nodes in the list. The range of valid child node indices is 0 to length-1 inclusive.
                 * @standard level1
                 */
                length: 0,
                /**
                 * Returns the indexth item in the collection. If index is greater than or equal to the number of nodes in the list, this returns null.
                 * @standard level1
                 * @param index  unsigned long
                 *   Index into the collection.
                 * @return Node
                 * 	The node at the indexth position in the NodeList, or null if that is not a valid index.
                 */
                item: function(index) {
                  return this[index] || null;
                },
                toString: function(isHTML, nodeFilter) {
                  for (var buf = [], i2 = 0; i2 < this.length; i2++) {
                    serializeToString(this[i2], buf, isHTML, nodeFilter);
                  }
                  return buf.join("");
                },
                /**
                 * @private
                 * @param {function (Node):boolean} predicate
                 * @returns {Node[]}
                 */
                filter: function(predicate) {
                  return Array.prototype.filter.call(this, predicate);
                },
                /**
                 * @private
                 * @param {Node} item
                 * @returns {number}
                 */
                indexOf: function(item) {
                  return Array.prototype.indexOf.call(this, item);
                }
              };
              function LiveNodeList(node, refresh) {
                this._node = node;
                this._refresh = refresh;
                _updateLiveList(this);
              }
              function _updateLiveList(list) {
                var inc = list._node._inc || list._node.ownerDocument._inc;
                if (list._inc != inc) {
                  var ls2 = list._refresh(list._node);
                  __set__(list, "length", ls2.length);
                  copy(ls2, list);
                  list._inc = inc;
                }
              }
              LiveNodeList.prototype.item = function(i2) {
                _updateLiveList(this);
                return this[i2];
              };
              _extends(LiveNodeList, NodeList);
              function NamedNodeMap() {
              }
              function _findNodeIndex(list, node) {
                var i2 = list.length;
                while (i2--) {
                  if (list[i2] === node) {
                    return i2;
                  }
                }
              }
              function _addNamedNode(el, list, newAttr, oldAttr) {
                if (oldAttr) {
                  list[_findNodeIndex(list, oldAttr)] = newAttr;
                } else {
                  list[list.length++] = newAttr;
                }
                if (el) {
                  newAttr.ownerElement = el;
                  var doc = el.ownerDocument;
                  if (doc) {
                    oldAttr && _onRemoveAttribute(doc, el, oldAttr);
                    _onAddAttribute(doc, el, newAttr);
                  }
                }
              }
              function _removeNamedNode(el, list, attr) {
                var i2 = _findNodeIndex(list, attr);
                if (i2 >= 0) {
                  var lastIndex = list.length - 1;
                  while (i2 < lastIndex) {
                    list[i2] = list[++i2];
                  }
                  list.length = lastIndex;
                  if (el) {
                    var doc = el.ownerDocument;
                    if (doc) {
                      _onRemoveAttribute(doc, el, attr);
                      attr.ownerElement = null;
                    }
                  }
                } else {
                  throw new DOMException(NOT_FOUND_ERR, new Error(el.tagName + "@" + attr));
                }
              }
              NamedNodeMap.prototype = {
                length: 0,
                item: NodeList.prototype.item,
                getNamedItem: function(key) {
                  var i2 = this.length;
                  while (i2--) {
                    var attr = this[i2];
                    if (attr.nodeName == key) {
                      return attr;
                    }
                  }
                },
                setNamedItem: function(attr) {
                  var el = attr.ownerElement;
                  if (el && el != this._ownerElement) {
                    throw new DOMException(INUSE_ATTRIBUTE_ERR);
                  }
                  var oldAttr = this.getNamedItem(attr.nodeName);
                  _addNamedNode(this._ownerElement, this, attr, oldAttr);
                  return oldAttr;
                },
                /* returns Node */
                setNamedItemNS: function(attr) {
                  var el = attr.ownerElement, oldAttr;
                  if (el && el != this._ownerElement) {
                    throw new DOMException(INUSE_ATTRIBUTE_ERR);
                  }
                  oldAttr = this.getNamedItemNS(attr.namespaceURI, attr.localName);
                  _addNamedNode(this._ownerElement, this, attr, oldAttr);
                  return oldAttr;
                },
                /* returns Node */
                removeNamedItem: function(key) {
                  var attr = this.getNamedItem(key);
                  _removeNamedNode(this._ownerElement, this, attr);
                  return attr;
                },
                // raises: NOT_FOUND_ERR,NO_MODIFICATION_ALLOWED_ERR
                //for level2
                removeNamedItemNS: function(namespaceURI, localName) {
                  var attr = this.getNamedItemNS(namespaceURI, localName);
                  _removeNamedNode(this._ownerElement, this, attr);
                  return attr;
                },
                getNamedItemNS: function(namespaceURI, localName) {
                  var i2 = this.length;
                  while (i2--) {
                    var node = this[i2];
                    if (node.localName == localName && node.namespaceURI == namespaceURI) {
                      return node;
                    }
                  }
                  return null;
                }
              };
              function DOMImplementation() {
              }
              DOMImplementation.prototype = {
                /**
                 * The DOMImplementation.hasFeature() method returns a Boolean flag indicating if a given feature is supported.
                 * The different implementations fairly diverged in what kind of features were reported.
                 * The latest version of the spec settled to force this method to always return true, where the functionality was accurate and in use.
                 *
                 * @deprecated It is deprecated and modern browsers return true in all cases.
                 *
                 * @param {string} feature
                 * @param {string} [version]
                 * @returns {boolean} always true
                 *
                 * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMImplementation/hasFeature MDN
                 * @see https://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#ID-5CED94D7 DOM Level 1 Core
                 * @see https://dom.spec.whatwg.org/#dom-domimplementation-hasfeature DOM Living Standard
                 */
                hasFeature: function(feature, version2) {
                  return true;
                },
                /**
                 * Creates an XML Document object of the specified type with its document element.
                 *
                 * __It behaves slightly different from the description in the living standard__:
                 * - There is no interface/class `XMLDocument`, it returns a `Document` instance.
                 * - `contentType`, `encoding`, `mode`, `origin`, `url` fields are currently not declared.
                 * - this implementation is not validating names or qualified names
                 *   (when parsing XML strings, the SAX parser takes care of that)
                 *
                 * @param {string|null} namespaceURI
                 * @param {string} qualifiedName
                 * @param {DocumentType=null} doctype
                 * @returns {Document}
                 *
                 * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMImplementation/createDocument MDN
                 * @see https://www.w3.org/TR/DOM-Level-2-Core/core.html#Level-2-Core-DOM-createDocument DOM Level 2 Core (initial)
                 * @see https://dom.spec.whatwg.org/#dom-domimplementation-createdocument  DOM Level 2 Core
                 *
                 * @see https://dom.spec.whatwg.org/#validate-and-extract DOM: Validate and extract
                 * @see https://www.w3.org/TR/xml/#NT-NameStartChar XML Spec: Names
                 * @see https://www.w3.org/TR/xml-names/#ns-qualnames XML Namespaces: Qualified names
                 */
                createDocument: function(namespaceURI, qualifiedName, doctype) {
                  var doc = new Document();
                  doc.implementation = this;
                  doc.childNodes = new NodeList();
                  doc.doctype = doctype || null;
                  if (doctype) {
                    doc.appendChild(doctype);
                  }
                  if (qualifiedName) {
                    var root2 = doc.createElementNS(namespaceURI, qualifiedName);
                    doc.appendChild(root2);
                  }
                  return doc;
                },
                /**
                 * Returns a doctype, with the given `qualifiedName`, `publicId`, and `systemId`.
                 *
                 * __This behavior is slightly different from the in the specs__:
                 * - this implementation is not validating names or qualified names
                 *   (when parsing XML strings, the SAX parser takes care of that)
                 *
                 * @param {string} qualifiedName
                 * @param {string} [publicId]
                 * @param {string} [systemId]
                 * @returns {DocumentType} which can either be used with `DOMImplementation.createDocument` upon document creation
                 * 				  or can be put into the document via methods like `Node.insertBefore()` or `Node.replaceChild()`
                 *
                 * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMImplementation/createDocumentType MDN
                 * @see https://www.w3.org/TR/DOM-Level-2-Core/core.html#Level-2-Core-DOM-createDocType DOM Level 2 Core
                 * @see https://dom.spec.whatwg.org/#dom-domimplementation-createdocumenttype DOM Living Standard
                 *
                 * @see https://dom.spec.whatwg.org/#validate-and-extract DOM: Validate and extract
                 * @see https://www.w3.org/TR/xml/#NT-NameStartChar XML Spec: Names
                 * @see https://www.w3.org/TR/xml-names/#ns-qualnames XML Namespaces: Qualified names
                 */
                createDocumentType: function(qualifiedName, publicId, systemId) {
                  var node = new DocumentType();
                  node.name = qualifiedName;
                  node.nodeName = qualifiedName;
                  node.publicId = publicId || "";
                  node.systemId = systemId || "";
                  return node;
                }
              };
              function Node() {
              }
              Node.prototype = {
                firstChild: null,
                lastChild: null,
                previousSibling: null,
                nextSibling: null,
                attributes: null,
                parentNode: null,
                childNodes: null,
                ownerDocument: null,
                nodeValue: null,
                namespaceURI: null,
                prefix: null,
                localName: null,
                // Modified in DOM Level 2:
                insertBefore: function(newChild, refChild) {
                  return _insertBefore(this, newChild, refChild);
                },
                replaceChild: function(newChild, oldChild) {
                  _insertBefore(this, newChild, oldChild, assertPreReplacementValidityInDocument);
                  if (oldChild) {
                    this.removeChild(oldChild);
                  }
                },
                removeChild: function(oldChild) {
                  return _removeChild(this, oldChild);
                },
                appendChild: function(newChild) {
                  return this.insertBefore(newChild, null);
                },
                hasChildNodes: function() {
                  return this.firstChild != null;
                },
                cloneNode: function(deep) {
                  return cloneNode(this.ownerDocument || this, this, deep);
                },
                // Modified in DOM Level 2:
                normalize: function() {
                  var child = this.firstChild;
                  while (child) {
                    var next = child.nextSibling;
                    if (next && next.nodeType == TEXT_NODE && child.nodeType == TEXT_NODE) {
                      this.removeChild(next);
                      child.appendData(next.data);
                    } else {
                      child.normalize();
                      child = next;
                    }
                  }
                },
                // Introduced in DOM Level 2:
                isSupported: function(feature, version2) {
                  return this.ownerDocument.implementation.hasFeature(feature, version2);
                },
                // Introduced in DOM Level 2:
                hasAttributes: function() {
                  return this.attributes.length > 0;
                },
                /**
                 * Look up the prefix associated to the given namespace URI, starting from this node.
                 * **The default namespace declarations are ignored by this method.**
                 * See Namespace Prefix Lookup for details on the algorithm used by this method.
                 *
                 * _Note: The implementation seems to be incomplete when compared to the algorithm described in the specs._
                 *
                 * @param {string | null} namespaceURI
                 * @returns {string | null}
                 * @see https://www.w3.org/TR/DOM-Level-3-Core/core.html#Node3-lookupNamespacePrefix
                 * @see https://www.w3.org/TR/DOM-Level-3-Core/namespaces-algorithms.html#lookupNamespacePrefixAlgo
                 * @see https://dom.spec.whatwg.org/#dom-node-lookupprefix
                 * @see https://github.com/xmldom/xmldom/issues/322
                 */
                lookupPrefix: function(namespaceURI) {
                  var el = this;
                  while (el) {
                    var map = el._nsMap;
                    if (map) {
                      for (var n2 in map) {
                        if (Object.prototype.hasOwnProperty.call(map, n2) && map[n2] === namespaceURI) {
                          return n2;
                        }
                      }
                    }
                    el = el.nodeType == ATTRIBUTE_NODE ? el.ownerDocument : el.parentNode;
                  }
                  return null;
                },
                // Introduced in DOM Level 3:
                lookupNamespaceURI: function(prefix) {
                  var el = this;
                  while (el) {
                    var map = el._nsMap;
                    if (map) {
                      if (Object.prototype.hasOwnProperty.call(map, prefix)) {
                        return map[prefix];
                      }
                    }
                    el = el.nodeType == ATTRIBUTE_NODE ? el.ownerDocument : el.parentNode;
                  }
                  return null;
                },
                // Introduced in DOM Level 3:
                isDefaultNamespace: function(namespaceURI) {
                  var prefix = this.lookupPrefix(namespaceURI);
                  return prefix == null;
                }
              };
              function _xmlEncoder(c2) {
                return c2 == "<" && "&lt;" || c2 == ">" && "&gt;" || c2 == "&" && "&amp;" || c2 == '"' && "&quot;" || "&#" + c2.charCodeAt() + ";";
              }
              copy(NodeType, Node);
              copy(NodeType, Node.prototype);
              function _visitNode(node, callback) {
                if (callback(node)) {
                  return true;
                }
                if (node = node.firstChild) {
                  do {
                    if (_visitNode(node, callback)) {
                      return true;
                    }
                  } while (node = node.nextSibling);
                }
              }
              function Document() {
                this.ownerDocument = this;
              }
              function _onAddAttribute(doc, el, newAttr) {
                doc && doc._inc++;
                var ns2 = newAttr.namespaceURI;
                if (ns2 === NAMESPACE.XMLNS) {
                  el._nsMap[newAttr.prefix ? newAttr.localName : ""] = newAttr.value;
                }
              }
              function _onRemoveAttribute(doc, el, newAttr, remove) {
                doc && doc._inc++;
                var ns2 = newAttr.namespaceURI;
                if (ns2 === NAMESPACE.XMLNS) {
                  delete el._nsMap[newAttr.prefix ? newAttr.localName : ""];
                }
              }
              function _onUpdateChild(doc, el, newChild) {
                if (doc && doc._inc) {
                  doc._inc++;
                  var cs2 = el.childNodes;
                  if (newChild) {
                    cs2[cs2.length++] = newChild;
                  } else {
                    var child = el.firstChild;
                    var i2 = 0;
                    while (child) {
                      cs2[i2++] = child;
                      child = child.nextSibling;
                    }
                    cs2.length = i2;
                    delete cs2[cs2.length];
                  }
                }
              }
              function _removeChild(parentNode, child) {
                var previous = child.previousSibling;
                var next = child.nextSibling;
                if (previous) {
                  previous.nextSibling = next;
                } else {
                  parentNode.firstChild = next;
                }
                if (next) {
                  next.previousSibling = previous;
                } else {
                  parentNode.lastChild = previous;
                }
                child.parentNode = null;
                child.previousSibling = null;
                child.nextSibling = null;
                _onUpdateChild(parentNode.ownerDocument, parentNode);
                return child;
              }
              function hasValidParentNodeType(node) {
                return node && (node.nodeType === Node.DOCUMENT_NODE || node.nodeType === Node.DOCUMENT_FRAGMENT_NODE || node.nodeType === Node.ELEMENT_NODE);
              }
              function hasInsertableNodeType(node) {
                return node && (isElementNode(node) || isTextNode(node) || isDocTypeNode(node) || node.nodeType === Node.DOCUMENT_FRAGMENT_NODE || node.nodeType === Node.COMMENT_NODE || node.nodeType === Node.PROCESSING_INSTRUCTION_NODE);
              }
              function isDocTypeNode(node) {
                return node && node.nodeType === Node.DOCUMENT_TYPE_NODE;
              }
              function isElementNode(node) {
                return node && node.nodeType === Node.ELEMENT_NODE;
              }
              function isTextNode(node) {
                return node && node.nodeType === Node.TEXT_NODE;
              }
              function isElementInsertionPossible(doc, child) {
                var parentChildNodes = doc.childNodes || [];
                if (find(parentChildNodes, isElementNode) || isDocTypeNode(child)) {
                  return false;
                }
                var docTypeNode = find(parentChildNodes, isDocTypeNode);
                return !(child && docTypeNode && parentChildNodes.indexOf(docTypeNode) > parentChildNodes.indexOf(child));
              }
              function isElementReplacementPossible(doc, child) {
                var parentChildNodes = doc.childNodes || [];
                function hasElementChildThatIsNotChild(node) {
                  return isElementNode(node) && node !== child;
                }
                if (find(parentChildNodes, hasElementChildThatIsNotChild)) {
                  return false;
                }
                var docTypeNode = find(parentChildNodes, isDocTypeNode);
                return !(child && docTypeNode && parentChildNodes.indexOf(docTypeNode) > parentChildNodes.indexOf(child));
              }
              function assertPreInsertionValidity1to5(parent, node, child) {
                if (!hasValidParentNodeType(parent)) {
                  throw new DOMException(HIERARCHY_REQUEST_ERR, "Unexpected parent node type " + parent.nodeType);
                }
                if (child && child.parentNode !== parent) {
                  throw new DOMException(NOT_FOUND_ERR, "child not in parent");
                }
                if (
                  // 4. If `node` is not a DocumentFragment, DocumentType, Element, or CharacterData node, then throw a "HierarchyRequestError" DOMException.
                  !hasInsertableNodeType(node) || // 5. If either `node` is a Text node and `parent` is a document,
                  // the sax parser currently adds top level text nodes, this will be fixed in 0.9.0
                  // || (node.nodeType === Node.TEXT_NODE && parent.nodeType === Node.DOCUMENT_NODE)
                  // or `node` is a doctype and `parent` is not a document, then throw a "HierarchyRequestError" DOMException.
                  isDocTypeNode(node) && parent.nodeType !== Node.DOCUMENT_NODE
                ) {
                  throw new DOMException(
                    HIERARCHY_REQUEST_ERR,
                    "Unexpected node type " + node.nodeType + " for parent node type " + parent.nodeType
                  );
                }
              }
              function assertPreInsertionValidityInDocument(parent, node, child) {
                var parentChildNodes = parent.childNodes || [];
                var nodeChildNodes = node.childNodes || [];
                if (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {
                  var nodeChildElements = nodeChildNodes.filter(isElementNode);
                  if (nodeChildElements.length > 1 || find(nodeChildNodes, isTextNode)) {
                    throw new DOMException(HIERARCHY_REQUEST_ERR, "More than one element or text in fragment");
                  }
                  if (nodeChildElements.length === 1 && !isElementInsertionPossible(parent, child)) {
                    throw new DOMException(HIERARCHY_REQUEST_ERR, "Element in fragment can not be inserted before doctype");
                  }
                }
                if (isElementNode(node)) {
                  if (!isElementInsertionPossible(parent, child)) {
                    throw new DOMException(HIERARCHY_REQUEST_ERR, "Only one element can be added and only after doctype");
                  }
                }
                if (isDocTypeNode(node)) {
                  if (find(parentChildNodes, isDocTypeNode)) {
                    throw new DOMException(HIERARCHY_REQUEST_ERR, "Only one doctype is allowed");
                  }
                  var parentElementChild = find(parentChildNodes, isElementNode);
                  if (child && parentChildNodes.indexOf(parentElementChild) < parentChildNodes.indexOf(child)) {
                    throw new DOMException(HIERARCHY_REQUEST_ERR, "Doctype can only be inserted before an element");
                  }
                  if (!child && parentElementChild) {
                    throw new DOMException(HIERARCHY_REQUEST_ERR, "Doctype can not be appended since element is present");
                  }
                }
              }
              function assertPreReplacementValidityInDocument(parent, node, child) {
                var parentChildNodes = parent.childNodes || [];
                var nodeChildNodes = node.childNodes || [];
                if (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {
                  var nodeChildElements = nodeChildNodes.filter(isElementNode);
                  if (nodeChildElements.length > 1 || find(nodeChildNodes, isTextNode)) {
                    throw new DOMException(HIERARCHY_REQUEST_ERR, "More than one element or text in fragment");
                  }
                  if (nodeChildElements.length === 1 && !isElementReplacementPossible(parent, child)) {
                    throw new DOMException(HIERARCHY_REQUEST_ERR, "Element in fragment can not be inserted before doctype");
                  }
                }
                if (isElementNode(node)) {
                  if (!isElementReplacementPossible(parent, child)) {
                    throw new DOMException(HIERARCHY_REQUEST_ERR, "Only one element can be added and only after doctype");
                  }
                }
                if (isDocTypeNode(node)) {
                  let hasDoctypeChildThatIsNotChild2 = function(node2) {
                    return isDocTypeNode(node2) && node2 !== child;
                  };
                  if (find(parentChildNodes, hasDoctypeChildThatIsNotChild2)) {
                    throw new DOMException(HIERARCHY_REQUEST_ERR, "Only one doctype is allowed");
                  }
                  var parentElementChild = find(parentChildNodes, isElementNode);
                  if (child && parentChildNodes.indexOf(parentElementChild) < parentChildNodes.indexOf(child)) {
                    throw new DOMException(HIERARCHY_REQUEST_ERR, "Doctype can only be inserted before an element");
                  }
                }
              }
              function _insertBefore(parent, node, child, _inDocumentAssertion) {
                assertPreInsertionValidity1to5(parent, node, child);
                if (parent.nodeType === Node.DOCUMENT_NODE) {
                  (_inDocumentAssertion || assertPreInsertionValidityInDocument)(parent, node, child);
                }
                var cp = node.parentNode;
                if (cp) {
                  cp.removeChild(node);
                }
                if (node.nodeType === DOCUMENT_FRAGMENT_NODE) {
                  var newFirst = node.firstChild;
                  if (newFirst == null) {
                    return node;
                  }
                  var newLast = node.lastChild;
                } else {
                  newFirst = newLast = node;
                }
                var pre = child ? child.previousSibling : parent.lastChild;
                newFirst.previousSibling = pre;
                newLast.nextSibling = child;
                if (pre) {
                  pre.nextSibling = newFirst;
                } else {
                  parent.firstChild = newFirst;
                }
                if (child == null) {
                  parent.lastChild = newLast;
                } else {
                  child.previousSibling = newLast;
                }
                do {
                  newFirst.parentNode = parent;
                } while (newFirst !== newLast && (newFirst = newFirst.nextSibling));
                _onUpdateChild(parent.ownerDocument || parent, parent);
                if (node.nodeType == DOCUMENT_FRAGMENT_NODE) {
                  node.firstChild = node.lastChild = null;
                }
                return node;
              }
              function _appendSingleChild(parentNode, newChild) {
                if (newChild.parentNode) {
                  newChild.parentNode.removeChild(newChild);
                }
                newChild.parentNode = parentNode;
                newChild.previousSibling = parentNode.lastChild;
                newChild.nextSibling = null;
                if (newChild.previousSibling) {
                  newChild.previousSibling.nextSibling = newChild;
                } else {
                  parentNode.firstChild = newChild;
                }
                parentNode.lastChild = newChild;
                _onUpdateChild(parentNode.ownerDocument, parentNode, newChild);
                return newChild;
              }
              Document.prototype = {
                //implementation : null,
                nodeName: "#document",
                nodeType: DOCUMENT_NODE,
                /**
                 * The DocumentType node of the document.
                 *
                 * @readonly
                 * @type DocumentType
                 */
                doctype: null,
                documentElement: null,
                _inc: 1,
                insertBefore: function(newChild, refChild) {
                  if (newChild.nodeType == DOCUMENT_FRAGMENT_NODE) {
                    var child = newChild.firstChild;
                    while (child) {
                      var next = child.nextSibling;
                      this.insertBefore(child, refChild);
                      child = next;
                    }
                    return newChild;
                  }
                  _insertBefore(this, newChild, refChild);
                  newChild.ownerDocument = this;
                  if (this.documentElement === null && newChild.nodeType === ELEMENT_NODE) {
                    this.documentElement = newChild;
                  }
                  return newChild;
                },
                removeChild: function(oldChild) {
                  if (this.documentElement == oldChild) {
                    this.documentElement = null;
                  }
                  return _removeChild(this, oldChild);
                },
                replaceChild: function(newChild, oldChild) {
                  _insertBefore(this, newChild, oldChild, assertPreReplacementValidityInDocument);
                  newChild.ownerDocument = this;
                  if (oldChild) {
                    this.removeChild(oldChild);
                  }
                  if (isElementNode(newChild)) {
                    this.documentElement = newChild;
                  }
                },
                // Introduced in DOM Level 2:
                importNode: function(importedNode, deep) {
                  return importNode(this, importedNode, deep);
                },
                // Introduced in DOM Level 2:
                getElementById: function(id2) {
                  var rtv = null;
                  _visitNode(this.documentElement, function(node) {
                    if (node.nodeType == ELEMENT_NODE) {
                      if (node.getAttribute("id") == id2) {
                        rtv = node;
                        return true;
                      }
                    }
                  });
                  return rtv;
                },
                /**
                 * The `getElementsByClassName` method of `Document` interface returns an array-like object
                 * of all child elements which have **all** of the given class name(s).
                 *
                 * Returns an empty list if `classeNames` is an empty string or only contains HTML white space characters.
                 *
                 *
                 * Warning: This is a live LiveNodeList.
                 * Changes in the DOM will reflect in the array as the changes occur.
                 * If an element selected by this array no longer qualifies for the selector,
                 * it will automatically be removed. Be aware of this for iteration purposes.
                 *
                 * @param {string} classNames is a string representing the class name(s) to match; multiple class names are separated by (ASCII-)whitespace
                 *
                 * @see https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementsByClassName
                 * @see https://dom.spec.whatwg.org/#concept-getelementsbyclassname
                 */
                getElementsByClassName: function(classNames) {
                  var classNamesSet = toOrderedSet(classNames);
                  return new LiveNodeList(this, function(base) {
                    var ls2 = [];
                    if (classNamesSet.length > 0) {
                      _visitNode(base.documentElement, function(node) {
                        if (node !== base && node.nodeType === ELEMENT_NODE) {
                          var nodeClassNames = node.getAttribute("class");
                          if (nodeClassNames) {
                            var matches = classNames === nodeClassNames;
                            if (!matches) {
                              var nodeClassNamesSet = toOrderedSet(nodeClassNames);
                              matches = classNamesSet.every(arrayIncludes(nodeClassNamesSet));
                            }
                            if (matches) {
                              ls2.push(node);
                            }
                          }
                        }
                      });
                    }
                    return ls2;
                  });
                },
                //document factory method:
                createElement: function(tagName) {
                  var node = new Element();
                  node.ownerDocument = this;
                  node.nodeName = tagName;
                  node.tagName = tagName;
                  node.localName = tagName;
                  node.childNodes = new NodeList();
                  var attrs = node.attributes = new NamedNodeMap();
                  attrs._ownerElement = node;
                  return node;
                },
                createDocumentFragment: function() {
                  var node = new DocumentFragment();
                  node.ownerDocument = this;
                  node.childNodes = new NodeList();
                  return node;
                },
                createTextNode: function(data) {
                  var node = new Text();
                  node.ownerDocument = this;
                  node.appendData(data);
                  return node;
                },
                createComment: function(data) {
                  var node = new Comment();
                  node.ownerDocument = this;
                  node.appendData(data);
                  return node;
                },
                createCDATASection: function(data) {
                  var node = new CDATASection();
                  node.ownerDocument = this;
                  node.appendData(data);
                  return node;
                },
                createProcessingInstruction: function(target, data) {
                  var node = new ProcessingInstruction();
                  node.ownerDocument = this;
                  node.tagName = node.target = target;
                  node.nodeValue = node.data = data;
                  return node;
                },
                createAttribute: function(name) {
                  var node = new Attr();
                  node.ownerDocument = this;
                  node.name = name;
                  node.nodeName = name;
                  node.localName = name;
                  node.specified = true;
                  return node;
                },
                createEntityReference: function(name) {
                  var node = new EntityReference();
                  node.ownerDocument = this;
                  node.nodeName = name;
                  return node;
                },
                // Introduced in DOM Level 2:
                createElementNS: function(namespaceURI, qualifiedName) {
                  var node = new Element();
                  var pl = qualifiedName.split(":");
                  var attrs = node.attributes = new NamedNodeMap();
                  node.childNodes = new NodeList();
                  node.ownerDocument = this;
                  node.nodeName = qualifiedName;
                  node.tagName = qualifiedName;
                  node.namespaceURI = namespaceURI;
                  if (pl.length == 2) {
                    node.prefix = pl[0];
                    node.localName = pl[1];
                  } else {
                    node.localName = qualifiedName;
                  }
                  attrs._ownerElement = node;
                  return node;
                },
                // Introduced in DOM Level 2:
                createAttributeNS: function(namespaceURI, qualifiedName) {
                  var node = new Attr();
                  var pl = qualifiedName.split(":");
                  node.ownerDocument = this;
                  node.nodeName = qualifiedName;
                  node.name = qualifiedName;
                  node.namespaceURI = namespaceURI;
                  node.specified = true;
                  if (pl.length == 2) {
                    node.prefix = pl[0];
                    node.localName = pl[1];
                  } else {
                    node.localName = qualifiedName;
                  }
                  return node;
                }
              };
              _extends(Document, Node);
              function Element() {
                this._nsMap = {};
              }
              Element.prototype = {
                nodeType: ELEMENT_NODE,
                hasAttribute: function(name) {
                  return this.getAttributeNode(name) != null;
                },
                getAttribute: function(name) {
                  var attr = this.getAttributeNode(name);
                  return attr && attr.value || "";
                },
                getAttributeNode: function(name) {
                  return this.attributes.getNamedItem(name);
                },
                setAttribute: function(name, value) {
                  var attr = this.ownerDocument.createAttribute(name);
                  attr.value = attr.nodeValue = "" + value;
                  this.setAttributeNode(attr);
                },
                removeAttribute: function(name) {
                  var attr = this.getAttributeNode(name);
                  attr && this.removeAttributeNode(attr);
                },
                //four real opeartion method
                appendChild: function(newChild) {
                  if (newChild.nodeType === DOCUMENT_FRAGMENT_NODE) {
                    return this.insertBefore(newChild, null);
                  } else {
                    return _appendSingleChild(this, newChild);
                  }
                },
                setAttributeNode: function(newAttr) {
                  return this.attributes.setNamedItem(newAttr);
                },
                setAttributeNodeNS: function(newAttr) {
                  return this.attributes.setNamedItemNS(newAttr);
                },
                removeAttributeNode: function(oldAttr) {
                  return this.attributes.removeNamedItem(oldAttr.nodeName);
                },
                //get real attribute name,and remove it by removeAttributeNode
                removeAttributeNS: function(namespaceURI, localName) {
                  var old = this.getAttributeNodeNS(namespaceURI, localName);
                  old && this.removeAttributeNode(old);
                },
                hasAttributeNS: function(namespaceURI, localName) {
                  return this.getAttributeNodeNS(namespaceURI, localName) != null;
                },
                getAttributeNS: function(namespaceURI, localName) {
                  var attr = this.getAttributeNodeNS(namespaceURI, localName);
                  return attr && attr.value || "";
                },
                setAttributeNS: function(namespaceURI, qualifiedName, value) {
                  var attr = this.ownerDocument.createAttributeNS(namespaceURI, qualifiedName);
                  attr.value = attr.nodeValue = "" + value;
                  this.setAttributeNode(attr);
                },
                getAttributeNodeNS: function(namespaceURI, localName) {
                  return this.attributes.getNamedItemNS(namespaceURI, localName);
                },
                getElementsByTagName: function(tagName) {
                  return new LiveNodeList(this, function(base) {
                    var ls2 = [];
                    _visitNode(base, function(node) {
                      if (node !== base && node.nodeType == ELEMENT_NODE && (tagName === "*" || node.tagName == tagName)) {
                        ls2.push(node);
                      }
                    });
                    return ls2;
                  });
                },
                getElementsByTagNameNS: function(namespaceURI, localName) {
                  return new LiveNodeList(this, function(base) {
                    var ls2 = [];
                    _visitNode(base, function(node) {
                      if (node !== base && node.nodeType === ELEMENT_NODE && (namespaceURI === "*" || node.namespaceURI === namespaceURI) && (localName === "*" || node.localName == localName)) {
                        ls2.push(node);
                      }
                    });
                    return ls2;
                  });
                }
              };
              Document.prototype.getElementsByTagName = Element.prototype.getElementsByTagName;
              Document.prototype.getElementsByTagNameNS = Element.prototype.getElementsByTagNameNS;
              _extends(Element, Node);
              function Attr() {
              }
              Attr.prototype.nodeType = ATTRIBUTE_NODE;
              _extends(Attr, Node);
              function CharacterData() {
              }
              CharacterData.prototype = {
                data: "",
                substringData: function(offset, count) {
                  return this.data.substring(offset, offset + count);
                },
                appendData: function(text) {
                  text = this.data + text;
                  this.nodeValue = this.data = text;
                  this.length = text.length;
                },
                insertData: function(offset, text) {
                  this.replaceData(offset, 0, text);
                },
                appendChild: function(newChild) {
                  throw new Error(ExceptionMessage[HIERARCHY_REQUEST_ERR]);
                },
                deleteData: function(offset, count) {
                  this.replaceData(offset, count, "");
                },
                replaceData: function(offset, count, text) {
                  var start = this.data.substring(0, offset);
                  var end = this.data.substring(offset + count);
                  text = start + text + end;
                  this.nodeValue = this.data = text;
                  this.length = text.length;
                }
              };
              _extends(CharacterData, Node);
              function Text() {
              }
              Text.prototype = {
                nodeName: "#text",
                nodeType: TEXT_NODE,
                splitText: function(offset) {
                  var text = this.data;
                  var newText = text.substring(offset);
                  text = text.substring(0, offset);
                  this.data = this.nodeValue = text;
                  this.length = text.length;
                  var newNode = this.ownerDocument.createTextNode(newText);
                  if (this.parentNode) {
                    this.parentNode.insertBefore(newNode, this.nextSibling);
                  }
                  return newNode;
                }
              };
              _extends(Text, CharacterData);
              function Comment() {
              }
              Comment.prototype = {
                nodeName: "#comment",
                nodeType: COMMENT_NODE
              };
              _extends(Comment, CharacterData);
              function CDATASection() {
              }
              CDATASection.prototype = {
                nodeName: "#cdata-section",
                nodeType: CDATA_SECTION_NODE
              };
              _extends(CDATASection, CharacterData);
              function DocumentType() {
              }
              DocumentType.prototype.nodeType = DOCUMENT_TYPE_NODE;
              _extends(DocumentType, Node);
              function Notation() {
              }
              Notation.prototype.nodeType = NOTATION_NODE;
              _extends(Notation, Node);
              function Entity() {
              }
              Entity.prototype.nodeType = ENTITY_NODE;
              _extends(Entity, Node);
              function EntityReference() {
              }
              EntityReference.prototype.nodeType = ENTITY_REFERENCE_NODE;
              _extends(EntityReference, Node);
              function DocumentFragment() {
              }
              DocumentFragment.prototype.nodeName = "#document-fragment";
              DocumentFragment.prototype.nodeType = DOCUMENT_FRAGMENT_NODE;
              _extends(DocumentFragment, Node);
              function ProcessingInstruction() {
              }
              ProcessingInstruction.prototype.nodeType = PROCESSING_INSTRUCTION_NODE;
              _extends(ProcessingInstruction, Node);
              function XMLSerializer2() {
              }
              XMLSerializer2.prototype.serializeToString = function(node, isHtml, nodeFilter) {
                return nodeSerializeToString.call(node, isHtml, nodeFilter);
              };
              Node.prototype.toString = nodeSerializeToString;
              function nodeSerializeToString(isHtml, nodeFilter) {
                var buf = [];
                var refNode = this.nodeType == 9 && this.documentElement || this;
                var prefix = refNode.prefix;
                var uri = refNode.namespaceURI;
                if (uri && prefix == null) {
                  var prefix = refNode.lookupPrefix(uri);
                  if (prefix == null) {
                    var visibleNamespaces = [
                      { namespace: uri, prefix: null }
                      //{namespace:uri,prefix:''}
                    ];
                  }
                }
                serializeToString(this, buf, isHtml, nodeFilter, visibleNamespaces);
                return buf.join("");
              }
              function needNamespaceDefine(node, isHTML, visibleNamespaces) {
                var prefix = node.prefix || "";
                var uri = node.namespaceURI;
                if (!uri) {
                  return false;
                }
                if (prefix === "xml" && uri === NAMESPACE.XML || uri === NAMESPACE.XMLNS) {
                  return false;
                }
                var i2 = visibleNamespaces.length;
                while (i2--) {
                  var ns2 = visibleNamespaces[i2];
                  if (ns2.prefix === prefix) {
                    return ns2.namespace !== uri;
                  }
                }
                return true;
              }
              function addSerializedAttribute(buf, qualifiedName, value) {
                buf.push(" ", qualifiedName, '="', value.replace(/[<>&"\t\n\r]/g, _xmlEncoder), '"');
              }
              function serializeToString(node, buf, isHTML, nodeFilter, visibleNamespaces) {
                if (!visibleNamespaces) {
                  visibleNamespaces = [];
                }
                if (nodeFilter) {
                  node = nodeFilter(node);
                  if (node) {
                    if (typeof node == "string") {
                      buf.push(node);
                      return;
                    }
                  } else {
                    return;
                  }
                }
                switch (node.nodeType) {
                  case ELEMENT_NODE:
                    var attrs = node.attributes;
                    var len = attrs.length;
                    var child = node.firstChild;
                    var nodeName = node.tagName;
                    isHTML = NAMESPACE.isHTML(node.namespaceURI) || isHTML;
                    var prefixedNodeName = nodeName;
                    if (!isHTML && !node.prefix && node.namespaceURI) {
                      var defaultNS;
                      for (var ai = 0; ai < attrs.length; ai++) {
                        if (attrs.item(ai).name === "xmlns") {
                          defaultNS = attrs.item(ai).value;
                          break;
                        }
                      }
                      if (!defaultNS) {
                        for (var nsi = visibleNamespaces.length - 1; nsi >= 0; nsi--) {
                          var namespace = visibleNamespaces[nsi];
                          if (namespace.prefix === "" && namespace.namespace === node.namespaceURI) {
                            defaultNS = namespace.namespace;
                            break;
                          }
                        }
                      }
                      if (defaultNS !== node.namespaceURI) {
                        for (var nsi = visibleNamespaces.length - 1; nsi >= 0; nsi--) {
                          var namespace = visibleNamespaces[nsi];
                          if (namespace.namespace === node.namespaceURI) {
                            if (namespace.prefix) {
                              prefixedNodeName = namespace.prefix + ":" + nodeName;
                            }
                            break;
                          }
                        }
                      }
                    }
                    buf.push("<", prefixedNodeName);
                    for (var i2 = 0; i2 < len; i2++) {
                      var attr = attrs.item(i2);
                      if (attr.prefix == "xmlns") {
                        visibleNamespaces.push({ prefix: attr.localName, namespace: attr.value });
                      } else if (attr.nodeName == "xmlns") {
                        visibleNamespaces.push({ prefix: "", namespace: attr.value });
                      }
                    }
                    for (var i2 = 0; i2 < len; i2++) {
                      var attr = attrs.item(i2);
                      if (needNamespaceDefine(attr, isHTML, visibleNamespaces)) {
                        var prefix = attr.prefix || "";
                        var uri = attr.namespaceURI;
                        addSerializedAttribute(buf, prefix ? "xmlns:" + prefix : "xmlns", uri);
                        visibleNamespaces.push({ prefix, namespace: uri });
                      }
                      serializeToString(attr, buf, isHTML, nodeFilter, visibleNamespaces);
                    }
                    if (nodeName === prefixedNodeName && needNamespaceDefine(node, isHTML, visibleNamespaces)) {
                      var prefix = node.prefix || "";
                      var uri = node.namespaceURI;
                      addSerializedAttribute(buf, prefix ? "xmlns:" + prefix : "xmlns", uri);
                      visibleNamespaces.push({ prefix, namespace: uri });
                    }
                    if (child || isHTML && !/^(?:meta|link|img|br|hr|input)$/i.test(nodeName)) {
                      buf.push(">");
                      if (isHTML && /^script$/i.test(nodeName)) {
                        while (child) {
                          if (child.data) {
                            buf.push(child.data);
                          } else {
                            serializeToString(child, buf, isHTML, nodeFilter, visibleNamespaces.slice());
                          }
                          child = child.nextSibling;
                        }
                      } else {
                        while (child) {
                          serializeToString(child, buf, isHTML, nodeFilter, visibleNamespaces.slice());
                          child = child.nextSibling;
                        }
                      }
                      buf.push("</", prefixedNodeName, ">");
                    } else {
                      buf.push("/>");
                    }
                    return;
                  case DOCUMENT_NODE:
                  case DOCUMENT_FRAGMENT_NODE:
                    var child = node.firstChild;
                    while (child) {
                      serializeToString(child, buf, isHTML, nodeFilter, visibleNamespaces.slice());
                      child = child.nextSibling;
                    }
                    return;
                  case ATTRIBUTE_NODE:
                    return addSerializedAttribute(buf, node.name, node.value);
                  case TEXT_NODE:
                    return buf.push(
                      node.data.replace(/[<&>]/g, _xmlEncoder)
                    );
                  case CDATA_SECTION_NODE:
                    return buf.push("<![CDATA[", node.data, "]]>");
                  case COMMENT_NODE:
                    return buf.push("<!--", node.data, "-->");
                  case DOCUMENT_TYPE_NODE:
                    var pubid = node.publicId;
                    var sysid = node.systemId;
                    buf.push("<!DOCTYPE ", node.name);
                    if (pubid) {
                      buf.push(" PUBLIC ", pubid);
                      if (sysid && sysid != ".") {
                        buf.push(" ", sysid);
                      }
                      buf.push(">");
                    } else if (sysid && sysid != ".") {
                      buf.push(" SYSTEM ", sysid, ">");
                    } else {
                      var sub = node.internalSubset;
                      if (sub) {
                        buf.push(" [", sub, "]");
                      }
                      buf.push(">");
                    }
                    return;
                  case PROCESSING_INSTRUCTION_NODE:
                    return buf.push("<?", node.target, " ", node.data, "?>");
                  case ENTITY_REFERENCE_NODE:
                    return buf.push("&", node.nodeName, ";");
                  default:
                    buf.push("??", node.nodeName);
                }
              }
              function importNode(doc, node, deep) {
                var node2;
                switch (node.nodeType) {
                  case ELEMENT_NODE:
                    node2 = node.cloneNode(false);
                    node2.ownerDocument = doc;
                  case DOCUMENT_FRAGMENT_NODE:
                    break;
                  case ATTRIBUTE_NODE:
                    deep = true;
                    break;
                }
                if (!node2) {
                  node2 = node.cloneNode(false);
                }
                node2.ownerDocument = doc;
                node2.parentNode = null;
                if (deep) {
                  var child = node.firstChild;
                  while (child) {
                    node2.appendChild(importNode(doc, child, deep));
                    child = child.nextSibling;
                  }
                }
                return node2;
              }
              function cloneNode(doc, node, deep) {
                var node2 = new node.constructor();
                for (var n2 in node) {
                  if (Object.prototype.hasOwnProperty.call(node, n2)) {
                    var v2 = node[n2];
                    if (typeof v2 != "object") {
                      if (v2 != node2[n2]) {
                        node2[n2] = v2;
                      }
                    }
                  }
                }
                if (node.childNodes) {
                  node2.childNodes = new NodeList();
                }
                node2.ownerDocument = doc;
                switch (node2.nodeType) {
                  case ELEMENT_NODE:
                    var attrs = node.attributes;
                    var attrs2 = node2.attributes = new NamedNodeMap();
                    var len = attrs.length;
                    attrs2._ownerElement = node2;
                    for (var i2 = 0; i2 < len; i2++) {
                      node2.setAttributeNode(cloneNode(doc, attrs.item(i2), true));
                    }
                    break;
                  case ATTRIBUTE_NODE:
                    deep = true;
                }
                if (deep) {
                  var child = node.firstChild;
                  while (child) {
                    node2.appendChild(cloneNode(doc, child, deep));
                    child = child.nextSibling;
                  }
                }
                return node2;
              }
              function __set__(object2, key, value) {
                object2[key] = value;
              }
              try {
                if (Object.defineProperty) {
                  let getTextContent2 = function(node) {
                    switch (node.nodeType) {
                      case ELEMENT_NODE:
                      case DOCUMENT_FRAGMENT_NODE:
                        var buf = [];
                        node = node.firstChild;
                        while (node) {
                          if (node.nodeType !== 7 && node.nodeType !== 8) {
                            buf.push(getTextContent2(node));
                          }
                          node = node.nextSibling;
                        }
                        return buf.join("");
                      default:
                        return node.nodeValue;
                    }
                  };
                  var getTextContent = getTextContent2;
                  Object.defineProperty(LiveNodeList.prototype, "length", {
                    get: function() {
                      _updateLiveList(this);
                      return this.$$length;
                    }
                  });
                  Object.defineProperty(Node.prototype, "textContent", {
                    get: function() {
                      return getTextContent2(this);
                    },
                    set: function(data) {
                      switch (this.nodeType) {
                        case ELEMENT_NODE:
                        case DOCUMENT_FRAGMENT_NODE:
                          while (this.firstChild) {
                            this.removeChild(this.firstChild);
                          }
                          if (data || String(data)) {
                            this.appendChild(this.ownerDocument.createTextNode(data));
                          }
                          break;
                        default:
                          this.data = data;
                          this.value = data;
                          this.nodeValue = data;
                      }
                    }
                  });
                  __set__ = function(object2, key, value) {
                    object2["$$" + key] = value;
                  };
                }
              } catch (e2) {
              }
              exports2.DocumentType = DocumentType;
              exports2.DOMException = DOMException;
              exports2.DOMImplementation = DOMImplementation;
              exports2.Element = Element;
              exports2.Node = Node;
              exports2.NodeList = NodeList;
              exports2.XMLSerializer = XMLSerializer2;
            }
          ),
          /***/
          "./node_modules/@xmldom/xmldom/lib/entities.js": (
            /*!*****************************************************!*\
              !*** ./node_modules/@xmldom/xmldom/lib/entities.js ***!
              \*****************************************************/
            /*! no static exports found */
            /***/
            function(module2, exports2, __webpack_require__2) {
              var freeze = __webpack_require__2(
                /*! ./conventions */
                "./node_modules/@xmldom/xmldom/lib/conventions.js"
              ).freeze;
              exports2.XML_ENTITIES = freeze({ amp: "&", apos: "'", gt: ">", lt: "<", quot: '"' });
              exports2.HTML_ENTITIES = freeze({
                lt: "<",
                gt: ">",
                amp: "&",
                quot: '"',
                apos: "'",
                Agrave: "À",
                Aacute: "Á",
                Acirc: "Â",
                Atilde: "Ã",
                Auml: "Ä",
                Aring: "Å",
                AElig: "Æ",
                Ccedil: "Ç",
                Egrave: "È",
                Eacute: "É",
                Ecirc: "Ê",
                Euml: "Ë",
                Igrave: "Ì",
                Iacute: "Í",
                Icirc: "Î",
                Iuml: "Ï",
                ETH: "Ð",
                Ntilde: "Ñ",
                Ograve: "Ò",
                Oacute: "Ó",
                Ocirc: "Ô",
                Otilde: "Õ",
                Ouml: "Ö",
                Oslash: "Ø",
                Ugrave: "Ù",
                Uacute: "Ú",
                Ucirc: "Û",
                Uuml: "Ü",
                Yacute: "Ý",
                THORN: "Þ",
                szlig: "ß",
                agrave: "à",
                aacute: "á",
                acirc: "â",
                atilde: "ã",
                auml: "ä",
                aring: "å",
                aelig: "æ",
                ccedil: "ç",
                egrave: "è",
                eacute: "é",
                ecirc: "ê",
                euml: "ë",
                igrave: "ì",
                iacute: "í",
                icirc: "î",
                iuml: "ï",
                eth: "ð",
                ntilde: "ñ",
                ograve: "ò",
                oacute: "ó",
                ocirc: "ô",
                otilde: "õ",
                ouml: "ö",
                oslash: "ø",
                ugrave: "ù",
                uacute: "ú",
                ucirc: "û",
                uuml: "ü",
                yacute: "ý",
                thorn: "þ",
                yuml: "ÿ",
                nbsp: " ",
                iexcl: "¡",
                cent: "¢",
                pound: "£",
                curren: "¤",
                yen: "¥",
                brvbar: "¦",
                sect: "§",
                uml: "¨",
                copy: "©",
                ordf: "ª",
                laquo: "«",
                not: "¬",
                shy: "­­",
                reg: "®",
                macr: "¯",
                deg: "°",
                plusmn: "±",
                sup2: "²",
                sup3: "³",
                acute: "´",
                micro: "µ",
                para: "¶",
                middot: "·",
                cedil: "¸",
                sup1: "¹",
                ordm: "º",
                raquo: "»",
                frac14: "¼",
                frac12: "½",
                frac34: "¾",
                iquest: "¿",
                times: "×",
                divide: "÷",
                forall: "∀",
                part: "∂",
                exist: "∃",
                empty: "∅",
                nabla: "∇",
                isin: "∈",
                notin: "∉",
                ni: "∋",
                prod: "∏",
                sum: "∑",
                minus: "−",
                lowast: "∗",
                radic: "√",
                prop: "∝",
                infin: "∞",
                ang: "∠",
                and: "∧",
                or: "∨",
                cap: "∩",
                cup: "∪",
                "int": "∫",
                there4: "∴",
                sim: "∼",
                cong: "≅",
                asymp: "≈",
                ne: "≠",
                equiv: "≡",
                le: "≤",
                ge: "≥",
                sub: "⊂",
                sup: "⊃",
                nsub: "⊄",
                sube: "⊆",
                supe: "⊇",
                oplus: "⊕",
                otimes: "⊗",
                perp: "⊥",
                sdot: "⋅",
                Alpha: "Α",
                Beta: "Β",
                Gamma: "Γ",
                Delta: "Δ",
                Epsilon: "Ε",
                Zeta: "Ζ",
                Eta: "Η",
                Theta: "Θ",
                Iota: "Ι",
                Kappa: "Κ",
                Lambda: "Λ",
                Mu: "Μ",
                Nu: "Ν",
                Xi: "Ξ",
                Omicron: "Ο",
                Pi: "Π",
                Rho: "Ρ",
                Sigma: "Σ",
                Tau: "Τ",
                Upsilon: "Υ",
                Phi: "Φ",
                Chi: "Χ",
                Psi: "Ψ",
                Omega: "Ω",
                alpha: "α",
                beta: "β",
                gamma: "γ",
                delta: "δ",
                epsilon: "ε",
                zeta: "ζ",
                eta: "η",
                theta: "θ",
                iota: "ι",
                kappa: "κ",
                lambda: "λ",
                mu: "μ",
                nu: "ν",
                xi: "ξ",
                omicron: "ο",
                pi: "π",
                rho: "ρ",
                sigmaf: "ς",
                sigma: "σ",
                tau: "τ",
                upsilon: "υ",
                phi: "φ",
                chi: "χ",
                psi: "ψ",
                omega: "ω",
                thetasym: "ϑ",
                upsih: "ϒ",
                piv: "ϖ",
                OElig: "Œ",
                oelig: "œ",
                Scaron: "Š",
                scaron: "š",
                Yuml: "Ÿ",
                fnof: "ƒ",
                circ: "ˆ",
                tilde: "˜",
                ensp: " ",
                emsp: " ",
                thinsp: " ",
                zwnj: "‌",
                zwj: "‍",
                lrm: "‎",
                rlm: "‏",
                ndash: "–",
                mdash: "—",
                lsquo: "‘",
                rsquo: "’",
                sbquo: "‚",
                ldquo: "“",
                rdquo: "”",
                bdquo: "„",
                dagger: "†",
                Dagger: "‡",
                bull: "•",
                hellip: "…",
                permil: "‰",
                prime: "′",
                Prime: "″",
                lsaquo: "‹",
                rsaquo: "›",
                oline: "‾",
                euro: "€",
                trade: "™",
                larr: "←",
                uarr: "↑",
                rarr: "→",
                darr: "↓",
                harr: "↔",
                crarr: "↵",
                lceil: "⌈",
                rceil: "⌉",
                lfloor: "⌊",
                rfloor: "⌋",
                loz: "◊",
                spades: "♠",
                clubs: "♣",
                hearts: "♥",
                diams: "♦"
              });
              exports2.entityMap = exports2.HTML_ENTITIES;
            }
          ),
          /***/
          "./node_modules/@xmldom/xmldom/lib/index.js": (
            /*!**************************************************!*\
              !*** ./node_modules/@xmldom/xmldom/lib/index.js ***!
              \**************************************************/
            /*! no static exports found */
            /***/
            function(module2, exports2, __webpack_require__2) {
              var dom2 = __webpack_require__2(
                /*! ./dom */
                "./node_modules/@xmldom/xmldom/lib/dom.js"
              );
              exports2.DOMImplementation = dom2.DOMImplementation;
              exports2.XMLSerializer = dom2.XMLSerializer;
              exports2.DOMParser = __webpack_require__2(
                /*! ./dom-parser */
                "./node_modules/@xmldom/xmldom/lib/dom-parser.js"
              ).DOMParser;
            }
          ),
          /***/
          "./node_modules/@xmldom/xmldom/lib/sax.js": (
            /*!************************************************!*\
              !*** ./node_modules/@xmldom/xmldom/lib/sax.js ***!
              \************************************************/
            /*! no static exports found */
            /***/
            function(module2, exports2, __webpack_require__2) {
              var NAMESPACE = __webpack_require__2(
                /*! ./conventions */
                "./node_modules/@xmldom/xmldom/lib/conventions.js"
              ).NAMESPACE;
              var nameStartChar = /[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/;
              var nameChar = new RegExp("[\\-\\.0-9" + nameStartChar.source.slice(1, -1) + "\\u00B7\\u0300-\\u036F\\u203F-\\u2040]");
              var tagNamePattern = new RegExp("^" + nameStartChar.source + nameChar.source + "*(?::" + nameStartChar.source + nameChar.source + "*)?$");
              var S_TAG = 0;
              var S_ATTR = 1;
              var S_ATTR_SPACE = 2;
              var S_EQ = 3;
              var S_ATTR_NOQUOT_VALUE = 4;
              var S_ATTR_END = 5;
              var S_TAG_SPACE = 6;
              var S_TAG_CLOSE = 7;
              function ParseError(message2, locator) {
                this.message = message2;
                this.locator = locator;
                if (Error.captureStackTrace)
                  Error.captureStackTrace(this, ParseError);
              }
              ParseError.prototype = new Error();
              ParseError.prototype.name = ParseError.name;
              function XMLReader() {
              }
              XMLReader.prototype = {
                parse: function(source, defaultNSMap, entityMap) {
                  var domBuilder = this.domBuilder;
                  domBuilder.startDocument();
                  _copy(defaultNSMap, defaultNSMap = {});
                  parse2(
                    source,
                    defaultNSMap,
                    entityMap,
                    domBuilder,
                    this.errorHandler
                  );
                  domBuilder.endDocument();
                }
              };
              function parse2(source, defaultNSMapCopy, entityMap, domBuilder, errorHandler) {
                function fixedFromCharCode(code2) {
                  if (code2 > 65535) {
                    code2 -= 65536;
                    var surrogate1 = 55296 + (code2 >> 10), surrogate2 = 56320 + (code2 & 1023);
                    return String.fromCharCode(surrogate1, surrogate2);
                  } else {
                    return String.fromCharCode(code2);
                  }
                }
                function entityReplacer(a22) {
                  var k = a22.slice(1, -1);
                  if (Object.hasOwnProperty.call(entityMap, k)) {
                    return entityMap[k];
                  } else if (k.charAt(0) === "#") {
                    return fixedFromCharCode(parseInt(k.substr(1).replace("x", "0x")));
                  } else {
                    errorHandler.error("entity not found:" + a22);
                    return a22;
                  }
                }
                function appendText(end2) {
                  if (end2 > start) {
                    var xt2 = source.substring(start, end2).replace(/&#?\w+;/g, entityReplacer);
                    locator && position(start);
                    domBuilder.characters(xt2, 0, end2 - start);
                    start = end2;
                  }
                }
                function position(p2, m2) {
                  while (p2 >= lineEnd && (m2 = linePattern.exec(source))) {
                    lineStart = m2.index;
                    lineEnd = lineStart + m2[0].length;
                    locator.lineNumber++;
                  }
                  locator.columnNumber = p2 - lineStart + 1;
                }
                var lineStart = 0;
                var lineEnd = 0;
                var linePattern = /.*(?:\r\n?|\n)|.*$/g;
                var locator = domBuilder.locator;
                var parseStack = [{ currentNSMap: defaultNSMapCopy }];
                var closeMap = {};
                var start = 0;
                while (true) {
                  try {
                    var tagStart = source.indexOf("<", start);
                    if (tagStart < 0) {
                      if (!source.substr(start).match(/^\s*$/)) {
                        var doc = domBuilder.doc;
                        var text = doc.createTextNode(source.substr(start));
                        doc.appendChild(text);
                        domBuilder.currentElement = text;
                      }
                      return;
                    }
                    if (tagStart > start) {
                      appendText(tagStart);
                    }
                    switch (source.charAt(tagStart + 1)) {
                      case "/":
                        var end = source.indexOf(">", tagStart + 3);
                        var tagName = source.substring(tagStart + 2, end).replace(/[ \t\n\r]+$/g, "");
                        var config2 = parseStack.pop();
                        if (end < 0) {
                          tagName = source.substring(tagStart + 2).replace(/[\s<].*/, "");
                          errorHandler.error("end tag name: " + tagName + " is not complete:" + config2.tagName);
                          end = tagStart + 1 + tagName.length;
                        } else if (tagName.match(/\s</)) {
                          tagName = tagName.replace(/[\s<].*/, "");
                          errorHandler.error("end tag name: " + tagName + " maybe not complete");
                          end = tagStart + 1 + tagName.length;
                        }
                        var localNSMap = config2.localNSMap;
                        var endMatch = config2.tagName == tagName;
                        var endIgnoreCaseMach = endMatch || config2.tagName && config2.tagName.toLowerCase() == tagName.toLowerCase();
                        if (endIgnoreCaseMach) {
                          domBuilder.endElement(config2.uri, config2.localName, tagName);
                          if (localNSMap) {
                            for (var prefix in localNSMap) {
                              if (Object.prototype.hasOwnProperty.call(localNSMap, prefix)) {
                                domBuilder.endPrefixMapping(prefix);
                              }
                            }
                          }
                          if (!endMatch) {
                            errorHandler.fatalError("end tag name: " + tagName + " is not match the current start tagName:" + config2.tagName);
                          }
                        } else {
                          parseStack.push(config2);
                        }
                        end++;
                        break;
                      case "?":
                        locator && position(tagStart);
                        end = parseInstruction(source, tagStart, domBuilder);
                        break;
                      case "!":
                        locator && position(tagStart);
                        end = parseDCC(source, tagStart, domBuilder, errorHandler);
                        break;
                      default:
                        locator && position(tagStart);
                        var el = new ElementAttributes();
                        var currentNSMap = parseStack[parseStack.length - 1].currentNSMap;
                        var end = parseElementStartPart(source, tagStart, el, currentNSMap, entityReplacer, errorHandler);
                        var len = el.length;
                        if (!el.closed && fixSelfClosed(source, end, el.tagName, closeMap)) {
                          el.closed = true;
                          if (!entityMap.nbsp) {
                            errorHandler.warning("unclosed xml attribute");
                          }
                        }
                        if (locator && len) {
                          var locator2 = copyLocator(locator, {});
                          for (var i2 = 0; i2 < len; i2++) {
                            var a2 = el[i2];
                            position(a2.offset);
                            a2.locator = copyLocator(locator, {});
                          }
                          domBuilder.locator = locator2;
                          if (appendElement(el, domBuilder, currentNSMap)) {
                            parseStack.push(el);
                          }
                          domBuilder.locator = locator;
                        } else {
                          if (appendElement(el, domBuilder, currentNSMap)) {
                            parseStack.push(el);
                          }
                        }
                        if (NAMESPACE.isHTML(el.uri) && !el.closed) {
                          end = parseHtmlSpecialContent(source, end, el.tagName, entityReplacer, domBuilder);
                        } else {
                          end++;
                        }
                    }
                  } catch (e2) {
                    if (e2 instanceof ParseError) {
                      throw e2;
                    }
                    errorHandler.error("element parse error: " + e2);
                    end = -1;
                  }
                  if (end > start) {
                    start = end;
                  } else {
                    appendText(Math.max(tagStart, start) + 1);
                  }
                }
              }
              function copyLocator(f2, t2) {
                t2.lineNumber = f2.lineNumber;
                t2.columnNumber = f2.columnNumber;
                return t2;
              }
              function parseElementStartPart(source, start, el, currentNSMap, entityReplacer, errorHandler) {
                function addAttribute(qname, value2, startIndex) {
                  if (el.attributeNames.hasOwnProperty(qname)) {
                    errorHandler.fatalError("Attribute " + qname + " redefined");
                  }
                  el.addValue(
                    qname,
                    // @see https://www.w3.org/TR/xml/#AVNormalize
                    // since the xmldom sax parser does not "interpret" DTD the following is not implemented:
                    // - recursive replacement of (DTD) entity references
                    // - trimming and collapsing multiple spaces into a single one for attributes that are not of type CDATA
                    value2.replace(/[\t\n\r]/g, " ").replace(/&#?\w+;/g, entityReplacer),
                    startIndex
                  );
                }
                var attrName;
                var value;
                var p2 = ++start;
                var s2 = S_TAG;
                while (true) {
                  var c2 = source.charAt(p2);
                  switch (c2) {
                    case "=":
                      if (s2 === S_ATTR) {
                        attrName = source.slice(start, p2);
                        s2 = S_EQ;
                      } else if (s2 === S_ATTR_SPACE) {
                        s2 = S_EQ;
                      } else {
                        throw new Error("attribute equal must after attrName");
                      }
                      break;
                    case "'":
                    case '"':
                      if (s2 === S_EQ || s2 === S_ATTR) {
                        if (s2 === S_ATTR) {
                          errorHandler.warning('attribute value must after "="');
                          attrName = source.slice(start, p2);
                        }
                        start = p2 + 1;
                        p2 = source.indexOf(c2, start);
                        if (p2 > 0) {
                          value = source.slice(start, p2);
                          addAttribute(attrName, value, start - 1);
                          s2 = S_ATTR_END;
                        } else {
                          throw new Error("attribute value no end '" + c2 + "' match");
                        }
                      } else if (s2 == S_ATTR_NOQUOT_VALUE) {
                        value = source.slice(start, p2);
                        addAttribute(attrName, value, start);
                        errorHandler.warning('attribute "' + attrName + '" missed start quot(' + c2 + ")!!");
                        start = p2 + 1;
                        s2 = S_ATTR_END;
                      } else {
                        throw new Error('attribute value must after "="');
                      }
                      break;
                    case "/":
                      switch (s2) {
                        case S_TAG:
                          el.setTagName(source.slice(start, p2));
                        case S_ATTR_END:
                        case S_TAG_SPACE:
                        case S_TAG_CLOSE:
                          s2 = S_TAG_CLOSE;
                          el.closed = true;
                        case S_ATTR_NOQUOT_VALUE:
                        case S_ATTR:
                        case S_ATTR_SPACE:
                          break;
                        default:
                          throw new Error("attribute invalid close char('/')");
                      }
                      break;
                    case "":
                      errorHandler.error("unexpected end of input");
                      if (s2 == S_TAG) {
                        el.setTagName(source.slice(start, p2));
                      }
                      return p2;
                    case ">":
                      switch (s2) {
                        case S_TAG:
                          el.setTagName(source.slice(start, p2));
                        case S_ATTR_END:
                        case S_TAG_SPACE:
                        case S_TAG_CLOSE:
                          break;
                        case S_ATTR_NOQUOT_VALUE:
                        case S_ATTR:
                          value = source.slice(start, p2);
                          if (value.slice(-1) === "/") {
                            el.closed = true;
                            value = value.slice(0, -1);
                          }
                        case S_ATTR_SPACE:
                          if (s2 === S_ATTR_SPACE) {
                            value = attrName;
                          }
                          if (s2 == S_ATTR_NOQUOT_VALUE) {
                            errorHandler.warning('attribute "' + value + '" missed quot(")!');
                            addAttribute(attrName, value, start);
                          } else {
                            if (!NAMESPACE.isHTML(currentNSMap[""]) || !value.match(/^(?:disabled|checked|selected)$/i)) {
                              errorHandler.warning('attribute "' + value + '" missed value!! "' + value + '" instead!!');
                            }
                            addAttribute(value, value, start);
                          }
                          break;
                        case S_EQ:
                          throw new Error("attribute value missed!!");
                      }
                      return p2;
                    case "":
                      c2 = " ";
                    default:
                      if (c2 <= " ") {
                        switch (s2) {
                          case S_TAG:
                            el.setTagName(source.slice(start, p2));
                            s2 = S_TAG_SPACE;
                            break;
                          case S_ATTR:
                            attrName = source.slice(start, p2);
                            s2 = S_ATTR_SPACE;
                            break;
                          case S_ATTR_NOQUOT_VALUE:
                            var value = source.slice(start, p2);
                            errorHandler.warning('attribute "' + value + '" missed quot(")!!');
                            addAttribute(attrName, value, start);
                          case S_ATTR_END:
                            s2 = S_TAG_SPACE;
                            break;
                        }
                      } else {
                        switch (s2) {
                          case S_ATTR_SPACE:
                            el.tagName;
                            if (!NAMESPACE.isHTML(currentNSMap[""]) || !attrName.match(/^(?:disabled|checked|selected)$/i)) {
                              errorHandler.warning('attribute "' + attrName + '" missed value!! "' + attrName + '" instead2!!');
                            }
                            addAttribute(attrName, attrName, start);
                            start = p2;
                            s2 = S_ATTR;
                            break;
                          case S_ATTR_END:
                            errorHandler.warning('attribute space is required"' + attrName + '"!!');
                          case S_TAG_SPACE:
                            s2 = S_ATTR;
                            start = p2;
                            break;
                          case S_EQ:
                            s2 = S_ATTR_NOQUOT_VALUE;
                            start = p2;
                            break;
                          case S_TAG_CLOSE:
                            throw new Error("elements closed character '/' and '>' must be connected to");
                        }
                      }
                  }
                  p2++;
                }
              }
              function appendElement(el, domBuilder, currentNSMap) {
                var tagName = el.tagName;
                var localNSMap = null;
                var i2 = el.length;
                while (i2--) {
                  var a2 = el[i2];
                  var qName = a2.qName;
                  var value = a2.value;
                  var nsp = qName.indexOf(":");
                  if (nsp > 0) {
                    var prefix = a2.prefix = qName.slice(0, nsp);
                    var localName = qName.slice(nsp + 1);
                    var nsPrefix = prefix === "xmlns" && localName;
                  } else {
                    localName = qName;
                    prefix = null;
                    nsPrefix = qName === "xmlns" && "";
                  }
                  a2.localName = localName;
                  if (nsPrefix !== false) {
                    if (localNSMap == null) {
                      localNSMap = {};
                      _copy(currentNSMap, currentNSMap = {});
                    }
                    currentNSMap[nsPrefix] = localNSMap[nsPrefix] = value;
                    a2.uri = NAMESPACE.XMLNS;
                    domBuilder.startPrefixMapping(nsPrefix, value);
                  }
                }
                var i2 = el.length;
                while (i2--) {
                  a2 = el[i2];
                  var prefix = a2.prefix;
                  if (prefix) {
                    if (prefix === "xml") {
                      a2.uri = NAMESPACE.XML;
                    }
                    if (prefix !== "xmlns") {
                      a2.uri = currentNSMap[prefix || ""];
                    }
                  }
                }
                var nsp = tagName.indexOf(":");
                if (nsp > 0) {
                  prefix = el.prefix = tagName.slice(0, nsp);
                  localName = el.localName = tagName.slice(nsp + 1);
                } else {
                  prefix = null;
                  localName = el.localName = tagName;
                }
                var ns2 = el.uri = currentNSMap[prefix || ""];
                domBuilder.startElement(ns2, localName, tagName, el);
                if (el.closed) {
                  domBuilder.endElement(ns2, localName, tagName);
                  if (localNSMap) {
                    for (prefix in localNSMap) {
                      if (Object.prototype.hasOwnProperty.call(localNSMap, prefix)) {
                        domBuilder.endPrefixMapping(prefix);
                      }
                    }
                  }
                } else {
                  el.currentNSMap = currentNSMap;
                  el.localNSMap = localNSMap;
                  return true;
                }
              }
              function parseHtmlSpecialContent(source, elStartEnd, tagName, entityReplacer, domBuilder) {
                if (/^(?:script|textarea)$/i.test(tagName)) {
                  var elEndStart = source.indexOf("</" + tagName + ">", elStartEnd);
                  var text = source.substring(elStartEnd + 1, elEndStart);
                  if (/[&<]/.test(text)) {
                    if (/^script$/i.test(tagName)) {
                      domBuilder.characters(text, 0, text.length);
                      return elEndStart;
                    }
                    text = text.replace(/&#?\w+;/g, entityReplacer);
                    domBuilder.characters(text, 0, text.length);
                    return elEndStart;
                  }
                }
                return elStartEnd + 1;
              }
              function fixSelfClosed(source, elStartEnd, tagName, closeMap) {
                var pos = closeMap[tagName];
                if (pos == null) {
                  pos = source.lastIndexOf("</" + tagName + ">");
                  if (pos < elStartEnd) {
                    pos = source.lastIndexOf("</" + tagName);
                  }
                  closeMap[tagName] = pos;
                }
                return pos < elStartEnd;
              }
              function _copy(source, target) {
                for (var n2 in source) {
                  if (Object.prototype.hasOwnProperty.call(source, n2)) {
                    target[n2] = source[n2];
                  }
                }
              }
              function parseDCC(source, start, domBuilder, errorHandler) {
                var next = source.charAt(start + 2);
                switch (next) {
                  case "-":
                    if (source.charAt(start + 3) === "-") {
                      var end = source.indexOf("-->", start + 4);
                      if (end > start) {
                        domBuilder.comment(source, start + 4, end - start - 4);
                        return end + 3;
                      } else {
                        errorHandler.error("Unclosed comment");
                        return -1;
                      }
                    } else {
                      return -1;
                    }
                  default:
                    if (source.substr(start + 3, 6) == "CDATA[") {
                      var end = source.indexOf("]]>", start + 9);
                      domBuilder.startCDATA();
                      domBuilder.characters(source, start + 9, end - start - 9);
                      domBuilder.endCDATA();
                      return end + 3;
                    }
                    var matchs = split(source, start);
                    var len = matchs.length;
                    if (len > 1 && /!doctype/i.test(matchs[0][0])) {
                      var name = matchs[1][0];
                      var pubid = false;
                      var sysid = false;
                      if (len > 3) {
                        if (/^public$/i.test(matchs[2][0])) {
                          pubid = matchs[3][0];
                          sysid = len > 4 && matchs[4][0];
                        } else if (/^system$/i.test(matchs[2][0])) {
                          sysid = matchs[3][0];
                        }
                      }
                      var lastMatch = matchs[len - 1];
                      domBuilder.startDTD(name, pubid, sysid);
                      domBuilder.endDTD();
                      return lastMatch.index + lastMatch[0].length;
                    }
                }
                return -1;
              }
              function parseInstruction(source, start, domBuilder) {
                var end = source.indexOf("?>", start);
                if (end) {
                  var match = source.substring(start, end).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);
                  if (match) {
                    match[0].length;
                    domBuilder.processingInstruction(match[1], match[2]);
                    return end + 2;
                  } else {
                    return -1;
                  }
                }
                return -1;
              }
              function ElementAttributes() {
                this.attributeNames = {};
              }
              ElementAttributes.prototype = {
                setTagName: function(tagName) {
                  if (!tagNamePattern.test(tagName)) {
                    throw new Error("invalid tagName:" + tagName);
                  }
                  this.tagName = tagName;
                },
                addValue: function(qName, value, offset) {
                  if (!tagNamePattern.test(qName)) {
                    throw new Error("invalid attribute:" + qName);
                  }
                  this.attributeNames[qName] = this.length;
                  this[this.length++] = { qName, value, offset };
                },
                length: 0,
                getLocalName: function(i2) {
                  return this[i2].localName;
                },
                getLocator: function(i2) {
                  return this[i2].locator;
                },
                getQName: function(i2) {
                  return this[i2].qName;
                },
                getURI: function(i2) {
                  return this[i2].uri;
                },
                getValue: function(i2) {
                  return this[i2].value;
                }
                //	,getIndex:function(uri, localName)){
                //		if(localName){
                //
                //		}else{
                //			var qName = uri
                //		}
                //	},
                //	getValue:function(){return this.getValue(this.getIndex.apply(this,arguments))},
                //	getType:function(uri,localName){}
                //	getType:function(i){},
              };
              function split(source, start) {
                var match;
                var buf = [];
                var reg = /'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;
                reg.lastIndex = start;
                reg.exec(source);
                while (match = reg.exec(source)) {
                  buf.push(match);
                  if (match[1])
                    return buf;
                }
              }
              exports2.XMLReader = XMLReader;
              exports2.ParseError = ParseError;
            }
          ),
          /***/
          "./node_modules/process/browser.js": (
            /*!*****************************************!*\
              !*** ./node_modules/process/browser.js ***!
              \*****************************************/
            /*! no static exports found */
            /***/
            function(module2, exports2) {
              var process2 = module2.exports = {};
              var cachedSetTimeout;
              var cachedClearTimeout;
              function defaultSetTimout() {
                throw new Error("setTimeout has not been defined");
              }
              function defaultClearTimeout() {
                throw new Error("clearTimeout has not been defined");
              }
              (function() {
                try {
                  if (typeof setTimeout === "function") {
                    cachedSetTimeout = setTimeout;
                  } else {
                    cachedSetTimeout = defaultSetTimout;
                  }
                } catch (e2) {
                  cachedSetTimeout = defaultSetTimout;
                }
                try {
                  if (typeof clearTimeout === "function") {
                    cachedClearTimeout = clearTimeout;
                  } else {
                    cachedClearTimeout = defaultClearTimeout;
                  }
                } catch (e2) {
                  cachedClearTimeout = defaultClearTimeout;
                }
              })();
              function runTimeout(fun) {
                if (cachedSetTimeout === setTimeout) {
                  return setTimeout(fun, 0);
                }
                if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {
                  cachedSetTimeout = setTimeout;
                  return setTimeout(fun, 0);
                }
                try {
                  return cachedSetTimeout(fun, 0);
                } catch (e2) {
                  try {
                    return cachedSetTimeout.call(null, fun, 0);
                  } catch (e22) {
                    return cachedSetTimeout.call(this, fun, 0);
                  }
                }
              }
              function runClearTimeout(marker) {
                if (cachedClearTimeout === clearTimeout) {
                  return clearTimeout(marker);
                }
                if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {
                  cachedClearTimeout = clearTimeout;
                  return clearTimeout(marker);
                }
                try {
                  return cachedClearTimeout(marker);
                } catch (e2) {
                  try {
                    return cachedClearTimeout.call(null, marker);
                  } catch (e22) {
                    return cachedClearTimeout.call(this, marker);
                  }
                }
              }
              var queue = [];
              var draining = false;
              var currentQueue;
              var queueIndex = -1;
              function cleanUpNextTick() {
                if (!draining || !currentQueue) {
                  return;
                }
                draining = false;
                if (currentQueue.length) {
                  queue = currentQueue.concat(queue);
                } else {
                  queueIndex = -1;
                }
                if (queue.length) {
                  drainQueue();
                }
              }
              function drainQueue() {
                if (draining) {
                  return;
                }
                var timeout2 = runTimeout(cleanUpNextTick);
                draining = true;
                var len = queue.length;
                while (len) {
                  currentQueue = queue;
                  queue = [];
                  while (++queueIndex < len) {
                    if (currentQueue) {
                      currentQueue[queueIndex].run();
                    }
                  }
                  queueIndex = -1;
                  len = queue.length;
                }
                currentQueue = null;
                draining = false;
                runClearTimeout(timeout2);
              }
              process2.nextTick = function(fun) {
                var args = new Array(arguments.length - 1);
                if (arguments.length > 1) {
                  for (var i2 = 1; i2 < arguments.length; i2++) {
                    args[i2 - 1] = arguments[i2];
                  }
                }
                queue.push(new Item(fun, args));
                if (queue.length === 1 && !draining) {
                  runTimeout(drainQueue);
                }
              };
              function Item(fun, array2) {
                this.fun = fun;
                this.array = array2;
              }
              Item.prototype.run = function() {
                this.fun.apply(null, this.array);
              };
              process2.title = "browser";
              process2.browser = true;
              process2.env = {};
              process2.argv = [];
              process2.version = "";
              process2.versions = {};
              function noop2() {
              }
              process2.on = noop2;
              process2.addListener = noop2;
              process2.once = noop2;
              process2.off = noop2;
              process2.removeListener = noop2;
              process2.removeAllListeners = noop2;
              process2.emit = noop2;
              process2.prependListener = noop2;
              process2.prependOnceListener = noop2;
              process2.listeners = function(name) {
                return [];
              };
              process2.binding = function(name) {
                throw new Error("process.binding is not supported");
              };
              process2.cwd = function() {
                return "/";
              };
              process2.chdir = function(dir) {
                throw new Error("process.chdir is not supported");
              };
              process2.umask = function() {
                return 0;
              };
            }
          ),
          /***/
          "./node_modules/webpack/buildin/amd-options.js": (
            /*!****************************************!*\
              !*** (webpack)/buildin/amd-options.js ***!
              \****************************************/
            /*! no static exports found */
            /***/
            function(module2, exports2) {
              (function(__webpack_amd_options__) {
                module2.exports = __webpack_amd_options__;
              }).call(this, {});
            }
          ),
          /***/
          "./node_modules/webpack/buildin/global.js": (
            /*!***********************************!*\
              !*** (webpack)/buildin/global.js ***!
              \***********************************/
            /*! no static exports found */
            /***/
            function(module2, exports2) {
              var g2;
              g2 = /* @__PURE__ */ function() {
                return this;
              }();
              try {
                g2 = g2 || new Function("return this")();
              } catch (e2) {
                if (typeof window === "object")
                  g2 = window;
              }
              module2.exports = g2;
            }
          ),
          /***/
          "./node_modules/webpack/buildin/module.js": (
            /*!***********************************!*\
              !*** (webpack)/buildin/module.js ***!
              \***********************************/
            /*! no static exports found */
            /***/
            function(module2, exports2) {
              module2.exports = function(module3) {
                if (!module3.webpackPolyfill) {
                  module3.deprecate = function() {
                  };
                  module3.paths = [];
                  if (!module3.children)
                    module3.children = [];
                  Object.defineProperty(module3, "loaded", {
                    enumerable: true,
                    get: function() {
                      return module3.l;
                    }
                  });
                  Object.defineProperty(module3, "id", {
                    enumerable: true,
                    get: function() {
                      return module3.i;
                    }
                  });
                  module3.webpackPolyfill = 1;
                }
                return module3;
              };
            }
          ),
          /***/
          "./package.json": (
            /*!**********************!*\
              !*** ./package.json ***!
              \**********************/
            /*! exports provided: name, version, description, main, types, scripts, repository, keywords, author, license, bugs, homepage, dependencies, devDependencies, default */
            /***/
            function(module2) {
              module2.exports = JSON.parse('{"name":"cos-js-sdk-v5","version":"1.4.13","description":"JavaScript SDK for [腾讯云对象存储](https://cloud.tencent.com/product/cos)","main":"dist/cos-js-sdk-v5.js","types":"index.d.ts","scripts":{"server":"node server/sts.js","dev":"cross-env NODE_ENV=development webpack -w --mode=development","build":"cross-env NODE_ENV=production webpack --mode=production","cos-auth.min.js":"uglifyjs ./demo/common/cos-auth.js -o ./demo/common/cos-auth.min.js -c -m"},"repository":{"type":"git","url":"git+https://github.com/tencentyun/cos-js-sdk-v5.git"},"keywords":[],"author":"carsonxu","license":"ISC","bugs":{"url":"https://github.com/tencentyun/cos-js-sdk-v5/issues"},"homepage":"https://github.com/tencentyun/cos-js-sdk-v5#readme","dependencies":{"@xmldom/xmldom":"^0.8.6"},"devDependencies":{"@babel/core":"7.17.9","@babel/plugin-transform-runtime":"7.18.10","@babel/preset-env":"7.16.11","babel-loader":"8.2.5","body-parser":"^1.18.3","cross-env":"^5.2.0","express":"^4.16.4","qcloud-cos-sts":"^3.0.2","request":"^2.87.0","terser-webpack-plugin":"4.2.3","webpack":"4.46.0","webpack-cli":"4.10.0"}}');
            }
          ),
          /***/
          "./src/advance.js": (
            /*!************************!*\
              !*** ./src/advance.js ***!
              \************************/
            /*! no static exports found */
            /***/
            function(module2, exports2, __webpack_require__2) {
              var _typeof2 = __webpack_require__2(
                /*! @babel/runtime/helpers/typeof */
                "./node_modules/@babel/runtime/helpers/typeof.js"
              );
              var session = __webpack_require__2(
                /*! ./session */
                "./src/session.js"
              );
              var Async = __webpack_require__2(
                /*! ./async */
                "./src/async.js"
              );
              var EventProxy = __webpack_require__2(
                /*! ./event */
                "./src/event.js"
              ).EventProxy;
              var util = __webpack_require__2(
                /*! ./util */
                "./src/util.js"
              );
              var Tracker = __webpack_require__2(
                /*! ./tracker */
                "./src/tracker.js"
              );
              function sliceUploadFile(params, callback) {
                var self2 = this;
                var ep = new EventProxy();
                var TaskId = params.TaskId;
                var Bucket = params.Bucket;
                var Region = params.Region;
                var Key = params.Key;
                var Body = params.Body;
                var ChunkSize = params.ChunkSize || params.SliceSize || self2.options.ChunkSize;
                var AsyncLimit = params.AsyncLimit;
                var StorageClass = params.StorageClass;
                var ServerSideEncryption = params.ServerSideEncryption;
                var FileSize;
                var onProgress;
                var onHashProgress = params.onHashProgress;
                var tracker = params.tracker;
                tracker && tracker.setParams({
                  chunkSize: ChunkSize
                });
                ep.on("error", function(err) {
                  if (!self2._isRunningTask(TaskId))
                    return;
                  err.UploadId = params.UploadData.UploadId || "";
                  return callback(err);
                });
                ep.on("upload_complete", function(UploadCompleteData) {
                  var _UploadCompleteData = util.extend({
                    UploadId: params.UploadData.UploadId || ""
                  }, UploadCompleteData);
                  callback(null, _UploadCompleteData);
                });
                ep.on("upload_slice_complete", function(UploadData) {
                  var metaHeaders = {};
                  util.each(params.Headers, function(val2, k) {
                    var shortKey = k.toLowerCase();
                    if (shortKey.indexOf("x-cos-meta-") === 0 || shortKey === "pic-operations")
                      metaHeaders[k] = val2;
                  });
                  uploadSliceComplete.call(self2, {
                    Bucket,
                    Region,
                    Key,
                    UploadId: UploadData.UploadId,
                    SliceList: UploadData.SliceList,
                    Headers: metaHeaders,
                    tracker
                  }, function(err, data) {
                    if (!self2._isRunningTask(TaskId))
                      return;
                    session.removeUsing(UploadData.UploadId);
                    if (err) {
                      onProgress(null, true);
                      return ep.emit("error", err);
                    }
                    session.removeUploadId.call(self2, UploadData.UploadId);
                    onProgress({
                      loaded: FileSize,
                      total: FileSize
                    }, true);
                    ep.emit("upload_complete", data);
                  });
                });
                ep.on("get_upload_data_finish", function(UploadData) {
                  var uuid = session.getFileId(Body, params.ChunkSize, Bucket, Key);
                  uuid && session.saveUploadId.call(self2, uuid, UploadData.UploadId, self2.options.UploadIdCacheLimit);
                  session.setUsing(UploadData.UploadId);
                  onProgress(null, true);
                  uploadSliceList.call(self2, {
                    TaskId,
                    Bucket,
                    Region,
                    Key,
                    Body,
                    FileSize,
                    SliceSize: ChunkSize,
                    AsyncLimit,
                    ServerSideEncryption,
                    UploadData,
                    Headers: params.Headers,
                    onProgress,
                    tracker
                  }, function(err, data) {
                    if (!self2._isRunningTask(TaskId))
                      return;
                    if (err) {
                      onProgress(null, true);
                      return ep.emit("error", err);
                    }
                    ep.emit("upload_slice_complete", data);
                  });
                });
                ep.on("get_file_size_finish", function() {
                  onProgress = util.throttleOnProgress.call(self2, FileSize, params.onProgress);
                  if (params.UploadData.UploadId) {
                    ep.emit("get_upload_data_finish", params.UploadData);
                  } else {
                    var _params = util.extend({
                      TaskId,
                      Bucket,
                      Region,
                      Key,
                      Headers: params.Headers,
                      StorageClass,
                      Body,
                      FileSize,
                      SliceSize: ChunkSize,
                      onHashProgress,
                      tracker
                    }, params);
                    getUploadIdAndPartList.call(self2, _params, function(err, UploadData) {
                      if (!self2._isRunningTask(TaskId))
                        return;
                      if (err)
                        return ep.emit("error", err);
                      params.UploadData.UploadId = UploadData.UploadId;
                      params.UploadData.PartList = UploadData.PartList;
                      ep.emit("get_upload_data_finish", params.UploadData);
                    });
                  }
                });
                FileSize = params.ContentLength;
                delete params.ContentLength;
                !params.Headers && (params.Headers = {});
                util.each(params.Headers, function(item, key) {
                  if (key.toLowerCase() === "content-length") {
                    delete params.Headers[key];
                  }
                });
                (function() {
                  var SIZE = [1, 2, 4, 8, 16, 32, 64, 128, 256, 512, 1024, 1024 * 2, 1024 * 4, 1024 * 5];
                  var AutoChunkSize = 1024 * 1024;
                  for (var i2 = 0; i2 < SIZE.length; i2++) {
                    AutoChunkSize = SIZE[i2] * 1024 * 1024;
                    if (FileSize / AutoChunkSize <= self2.options.MaxPartNumber)
                      break;
                  }
                  params.ChunkSize = params.SliceSize = ChunkSize = Math.max(ChunkSize, AutoChunkSize);
                })();
                if (FileSize === 0) {
                  params.Body = "";
                  params.ContentLength = 0;
                  params.SkipTask = true;
                  self2.putObject(params, callback);
                } else {
                  ep.emit("get_file_size_finish");
                }
              }
              function getUploadIdAndPartList(params, callback) {
                var TaskId = params.TaskId;
                var Bucket = params.Bucket;
                var Region = params.Region;
                var Key = params.Key;
                var StorageClass = params.StorageClass;
                var self2 = this;
                var ETagMap = {};
                var FileSize = params.FileSize;
                var SliceSize = params.SliceSize;
                var SliceCount = Math.ceil(FileSize / SliceSize);
                var FinishSize = 0;
                var onHashProgress = util.throttleOnProgress.call(self2, FileSize, params.onHashProgress);
                var getChunkETag = function getChunkETag2(PartNumber, callback2) {
                  var start = SliceSize * (PartNumber - 1);
                  var end = Math.min(start + SliceSize, FileSize);
                  var ChunkSize = end - start;
                  if (ETagMap[PartNumber]) {
                    callback2(null, {
                      PartNumber,
                      ETag: ETagMap[PartNumber],
                      Size: ChunkSize
                    });
                  } else {
                    util.fileSlice(params.Body, start, end, false, function(chunkItem) {
                      util.getFileMd5(chunkItem, function(err, md5) {
                        if (err)
                          return callback2(util.error(err));
                        var ETag = '"' + md5 + '"';
                        ETagMap[PartNumber] = ETag;
                        FinishSize += ChunkSize;
                        onHashProgress({
                          loaded: FinishSize,
                          total: FileSize
                        });
                        callback2(null, {
                          PartNumber,
                          ETag,
                          Size: ChunkSize
                        });
                      });
                    });
                  }
                };
                var isAvailableUploadList = function isAvailableUploadList2(PartList, callback2) {
                  var PartCount = PartList.length;
                  if (PartCount === 0) {
                    return callback2(null, true);
                  }
                  if (PartCount > SliceCount) {
                    return callback2(null, false);
                  }
                  if (PartCount > 1) {
                    var PartSliceSize = Math.max(PartList[0].Size, PartList[1].Size);
                    if (PartSliceSize !== SliceSize) {
                      return callback2(null, false);
                    }
                  }
                  var next = function next2(index) {
                    if (index < PartCount) {
                      var Part = PartList[index];
                      getChunkETag(Part.PartNumber, function(err, chunk) {
                        if (chunk && chunk.ETag === Part.ETag && chunk.Size === Part.Size) {
                          next2(index + 1);
                        } else {
                          callback2(null, false);
                        }
                      });
                    } else {
                      callback2(null, true);
                    }
                  };
                  next(0);
                };
                var ep = new EventProxy();
                ep.on("error", function(errData) {
                  if (!self2._isRunningTask(TaskId))
                    return;
                  return callback(errData);
                });
                ep.on("upload_id_available", function(UploadData) {
                  var map = {};
                  var list = [];
                  util.each(UploadData.PartList, function(item2) {
                    map[item2.PartNumber] = item2;
                  });
                  for (var PartNumber = 1; PartNumber <= SliceCount; PartNumber++) {
                    var item = map[PartNumber];
                    if (item) {
                      item.PartNumber = PartNumber;
                      item.Uploaded = true;
                    } else {
                      item = {
                        PartNumber,
                        ETag: null,
                        Uploaded: false
                      };
                    }
                    list.push(item);
                  }
                  UploadData.PartList = list;
                  callback(null, UploadData);
                });
                ep.on("no_available_upload_id", function() {
                  if (!self2._isRunningTask(TaskId))
                    return;
                  var _params = util.extend({
                    Bucket,
                    Region,
                    Key,
                    Query: util.clone(params.Query),
                    StorageClass,
                    Body: params.Body,
                    calledBySdk: "sliceUploadFile",
                    tracker: params.tracker
                  }, params);
                  var headers = util.clone(params.Headers);
                  delete headers["x-cos-mime-limit"];
                  _params.Headers = headers;
                  self2.multipartInit(_params, function(err, data) {
                    if (!self2._isRunningTask(TaskId))
                      return;
                    if (err)
                      return ep.emit("error", err);
                    var UploadId = data.UploadId;
                    if (!UploadId) {
                      return callback(util.error(new Error("no such upload id")));
                    }
                    ep.emit("upload_id_available", {
                      UploadId,
                      PartList: []
                    });
                  });
                });
                ep.on("has_and_check_upload_id", function(UploadIdList) {
                  UploadIdList = UploadIdList.reverse();
                  Async.eachLimit(UploadIdList, 1, function(UploadId, asyncCallback) {
                    if (!self2._isRunningTask(TaskId))
                      return;
                    if (session.using[UploadId]) {
                      asyncCallback();
                      return;
                    }
                    wholeMultipartListPart.call(self2, {
                      Bucket,
                      Region,
                      Key,
                      UploadId,
                      tracker: params.tracker
                    }, function(err, PartListData) {
                      if (!self2._isRunningTask(TaskId))
                        return;
                      if (err) {
                        session.removeUsing(UploadId);
                        return ep.emit("error", err);
                      }
                      var PartList = PartListData.PartList;
                      PartList.forEach(function(item) {
                        item.PartNumber *= 1;
                        item.Size *= 1;
                        item.ETag = item.ETag || "";
                      });
                      isAvailableUploadList(PartList, function(err2, isAvailable) {
                        if (!self2._isRunningTask(TaskId))
                          return;
                        if (err2)
                          return ep.emit("error", err2);
                        if (isAvailable) {
                          asyncCallback({
                            UploadId,
                            PartList
                          });
                        } else {
                          asyncCallback();
                        }
                      });
                    });
                  }, function(AvailableUploadData) {
                    if (!self2._isRunningTask(TaskId))
                      return;
                    onHashProgress(null, true);
                    if (AvailableUploadData && AvailableUploadData.UploadId) {
                      ep.emit("upload_id_available", AvailableUploadData);
                    } else {
                      ep.emit("no_available_upload_id");
                    }
                  });
                });
                ep.on("seek_local_avail_upload_id", function(RemoteUploadIdList) {
                  var uuid = session.getFileId(params.Body, params.ChunkSize, Bucket, Key);
                  var LocalUploadIdList = session.getUploadIdList.call(self2, uuid);
                  if (!uuid || !LocalUploadIdList) {
                    ep.emit("has_and_check_upload_id", RemoteUploadIdList);
                    return;
                  }
                  var next = function next2(index) {
                    if (index >= LocalUploadIdList.length) {
                      ep.emit("has_and_check_upload_id", RemoteUploadIdList);
                      return;
                    }
                    var UploadId = LocalUploadIdList[index];
                    if (!util.isInArray(RemoteUploadIdList, UploadId)) {
                      session.removeUploadId.call(self2, UploadId);
                      next2(index + 1);
                      return;
                    }
                    if (session.using[UploadId]) {
                      next2(index + 1);
                      return;
                    }
                    wholeMultipartListPart.call(self2, {
                      Bucket,
                      Region,
                      Key,
                      UploadId,
                      tracker: params.tracker
                    }, function(err, PartListData) {
                      if (!self2._isRunningTask(TaskId))
                        return;
                      if (err) {
                        session.removeUploadId.call(self2, UploadId);
                        next2(index + 1);
                      } else {
                        ep.emit("upload_id_available", {
                          UploadId,
                          PartList: PartListData.PartList
                        });
                      }
                    });
                  };
                  next(0);
                });
                ep.on("get_remote_upload_id_list", function() {
                  wholeMultipartList.call(self2, {
                    Bucket,
                    Region,
                    Key,
                    tracker: params.tracker
                  }, function(err, data) {
                    if (!self2._isRunningTask(TaskId))
                      return;
                    if (err)
                      return ep.emit("error", err);
                    var RemoteUploadIdList = util.filter(data.UploadList, function(item) {
                      return item.Key === Key && (!StorageClass || item.StorageClass.toUpperCase() === StorageClass.toUpperCase());
                    }).reverse().map(function(item) {
                      return item.UploadId || item.UploadID;
                    });
                    if (RemoteUploadIdList.length) {
                      ep.emit("seek_local_avail_upload_id", RemoteUploadIdList);
                    } else {
                      var uuid = session.getFileId(params.Body, params.ChunkSize, Bucket, Key), LocalUploadIdList;
                      if (uuid && (LocalUploadIdList = session.getUploadIdList.call(self2, uuid))) {
                        util.each(LocalUploadIdList, function(UploadId) {
                          session.removeUploadId.call(self2, UploadId);
                        });
                      }
                      ep.emit("no_available_upload_id");
                    }
                  });
                });
                ep.emit("get_remote_upload_id_list");
              }
              function wholeMultipartList(params, callback) {
                var self2 = this;
                var UploadList = [];
                var sendParams = {
                  Bucket: params.Bucket,
                  Region: params.Region,
                  Prefix: params.Key,
                  calledBySdk: params.calledBySdk || "sliceUploadFile",
                  tracker: params.tracker
                };
                var next = function next2() {
                  self2.multipartList(sendParams, function(err, data) {
                    if (err)
                      return callback(err);
                    UploadList.push.apply(UploadList, data.Upload || []);
                    if (data.IsTruncated === "true") {
                      sendParams.KeyMarker = data.NextKeyMarker;
                      sendParams.UploadIdMarker = data.NextUploadIdMarker;
                      next2();
                    } else {
                      callback(null, {
                        UploadList
                      });
                    }
                  });
                };
                next();
              }
              function wholeMultipartListPart(params, callback) {
                var self2 = this;
                var PartList = [];
                var sendParams = {
                  Bucket: params.Bucket,
                  Region: params.Region,
                  Key: params.Key,
                  UploadId: params.UploadId,
                  calledBySdk: "sliceUploadFile",
                  tracker: params.tracker
                };
                var next = function next2() {
                  self2.multipartListPart(sendParams, function(err, data) {
                    if (err)
                      return callback(err);
                    PartList.push.apply(PartList, data.Part || []);
                    if (data.IsTruncated === "true") {
                      sendParams.PartNumberMarker = data.NextPartNumberMarker;
                      next2();
                    } else {
                      callback(null, {
                        PartList
                      });
                    }
                  });
                };
                next();
              }
              function uploadSliceList(params, cb) {
                var self2 = this;
                var TaskId = params.TaskId;
                var Bucket = params.Bucket;
                var Region = params.Region;
                var Key = params.Key;
                var UploadData = params.UploadData;
                var FileSize = params.FileSize;
                var SliceSize = params.SliceSize;
                var ChunkParallel = Math.min(params.AsyncLimit || self2.options.ChunkParallelLimit || 1, 256);
                var Body = params.Body;
                var SliceCount = Math.ceil(FileSize / SliceSize);
                var FinishSize = 0;
                var ServerSideEncryption = params.ServerSideEncryption;
                var Headers = params.Headers;
                var needUploadSlices = util.filter(UploadData.PartList, function(SliceItem) {
                  if (SliceItem["Uploaded"]) {
                    FinishSize += SliceItem["PartNumber"] >= SliceCount ? FileSize % SliceSize || SliceSize : SliceSize;
                  }
                  return !SliceItem["Uploaded"];
                });
                var _onProgress2 = params.onProgress;
                Async.eachLimit(needUploadSlices, ChunkParallel, function(SliceItem, asyncCallback) {
                  if (!self2._isRunningTask(TaskId))
                    return;
                  var PartNumber = SliceItem["PartNumber"];
                  var currentSize = Math.min(FileSize, SliceItem["PartNumber"] * SliceSize) - (SliceItem["PartNumber"] - 1) * SliceSize;
                  var preAddSize = 0;
                  uploadSliceItem.call(self2, {
                    TaskId,
                    Bucket,
                    Region,
                    Key,
                    SliceSize,
                    FileSize,
                    PartNumber,
                    ServerSideEncryption,
                    Body,
                    UploadData,
                    Headers,
                    onProgress: function onProgress(data) {
                      FinishSize += data.loaded - preAddSize;
                      preAddSize = data.loaded;
                      _onProgress2({
                        loaded: FinishSize,
                        total: FileSize
                      });
                    },
                    tracker: params.tracker
                  }, function(err, data) {
                    if (!self2._isRunningTask(TaskId))
                      return;
                    if (!err && !data.ETag)
                      err = 'get ETag error, please add "ETag" to CORS ExposeHeader setting.( 获取ETag失败，请在CORS ExposeHeader设置中添加ETag，请参考文档：https://cloud.tencent.com/document/product/436/13318 )';
                    if (err) {
                      FinishSize -= preAddSize;
                    } else {
                      FinishSize += currentSize - preAddSize;
                      SliceItem.ETag = data.ETag;
                    }
                    _onProgress2({
                      loaded: FinishSize,
                      total: FileSize
                    });
                    asyncCallback(err || null, data);
                  });
                }, function(err) {
                  if (!self2._isRunningTask(TaskId))
                    return;
                  if (err)
                    return cb(err);
                  cb(null, {
                    UploadId: UploadData.UploadId,
                    SliceList: UploadData.PartList
                  });
                });
              }
              function uploadSliceItem(params, callback) {
                var self2 = this;
                var TaskId = params.TaskId;
                var Bucket = params.Bucket;
                var Region = params.Region;
                var Key = params.Key;
                var FileSize = params.FileSize;
                var FileBody = params.Body;
                var PartNumber = params.PartNumber * 1;
                var SliceSize = params.SliceSize;
                var ServerSideEncryption = params.ServerSideEncryption;
                var UploadData = params.UploadData;
                var Headers = params.Headers || {};
                var ChunkRetryTimes = self2.options.ChunkRetryTimes + 1;
                var start = SliceSize * (PartNumber - 1);
                var ContentLength = SliceSize;
                var end = start + SliceSize;
                if (end > FileSize) {
                  end = FileSize;
                  ContentLength = end - start;
                }
                var headersWhiteList = ["x-cos-traffic-limit", "x-cos-mime-limit"];
                var headers = {};
                util.each(Headers, function(v2, k) {
                  if (headersWhiteList.indexOf(k) > -1) {
                    headers[k] = v2;
                  }
                });
                var PartItem = UploadData.PartList[PartNumber - 1];
                Async.retry(ChunkRetryTimes, function(tryCallback) {
                  if (!self2._isRunningTask(TaskId))
                    return;
                  util.fileSlice(FileBody, start, end, true, function(Body) {
                    self2.multipartUpload({
                      TaskId,
                      Bucket,
                      Region,
                      Key,
                      ContentLength,
                      PartNumber,
                      UploadId: UploadData.UploadId,
                      ServerSideEncryption,
                      Body,
                      Headers: headers,
                      onProgress: params.onProgress,
                      calledBySdk: "sliceUploadFile",
                      tracker: params.tracker
                    }, function(err, data) {
                      if (!self2._isRunningTask(TaskId))
                        return;
                      if (err)
                        return tryCallback(err);
                      PartItem.Uploaded = true;
                      return tryCallback(null, data);
                    });
                  });
                }, function(err, data) {
                  if (!self2._isRunningTask(TaskId))
                    return;
                  return callback(err, data);
                });
              }
              function uploadSliceComplete(params, callback) {
                var Bucket = params.Bucket;
                var Region = params.Region;
                var Key = params.Key;
                var UploadId = params.UploadId;
                var SliceList = params.SliceList;
                var self2 = this;
                var ChunkRetryTimes = this.options.ChunkRetryTimes + 1;
                var Headers = params.Headers;
                var Parts = SliceList.map(function(item) {
                  return {
                    PartNumber: item.PartNumber,
                    ETag: item.ETag
                  };
                });
                Async.retry(ChunkRetryTimes, function(tryCallback) {
                  self2.multipartComplete({
                    Bucket,
                    Region,
                    Key,
                    UploadId,
                    Parts,
                    Headers,
                    calledBySdk: "sliceUploadFile",
                    tracker: params.tracker
                  }, tryCallback);
                }, function(err, data) {
                  callback(err, data);
                });
              }
              function abortUploadTask(params, callback) {
                var Bucket = params.Bucket;
                var Region = params.Region;
                var Key = params.Key;
                var UploadId = params.UploadId;
                var Level = params.Level || "task";
                var AsyncLimit = params.AsyncLimit;
                var self2 = this;
                var ep = new EventProxy();
                ep.on("error", function(errData) {
                  return callback(errData);
                });
                ep.on("get_abort_array", function(AbortArray) {
                  abortUploadTaskArray.call(self2, {
                    Bucket,
                    Region,
                    Key,
                    Headers: params.Headers,
                    AsyncLimit,
                    AbortArray
                  }, callback);
                });
                if (Level === "bucket") {
                  wholeMultipartList.call(self2, {
                    Bucket,
                    Region,
                    calledBySdk: "abortUploadTask"
                  }, function(err, data) {
                    if (err)
                      return callback(err);
                    ep.emit("get_abort_array", data.UploadList || []);
                  });
                } else if (Level === "file") {
                  if (!Key)
                    return callback(util.error(new Error("abort_upload_task_no_key")));
                  wholeMultipartList.call(self2, {
                    Bucket,
                    Region,
                    Key,
                    calledBySdk: "abortUploadTask"
                  }, function(err, data) {
                    if (err)
                      return callback(err);
                    ep.emit("get_abort_array", data.UploadList || []);
                  });
                } else if (Level === "task") {
                  if (!UploadId)
                    return callback(util.error(new Error("abort_upload_task_no_id")));
                  if (!Key)
                    return callback(util.error(new Error("abort_upload_task_no_key")));
                  ep.emit("get_abort_array", [{
                    Key,
                    UploadId
                  }]);
                } else {
                  return callback(util.error(new Error("abort_unknown_level")));
                }
              }
              function abortUploadTaskArray(params, callback) {
                var Bucket = params.Bucket;
                var Region = params.Region;
                var Key = params.Key;
                var AbortArray = params.AbortArray;
                var AsyncLimit = params.AsyncLimit || 1;
                var self2 = this;
                var index = 0;
                var resultList = new Array(AbortArray.length);
                Async.eachLimit(AbortArray, AsyncLimit, function(AbortItem, nextItem) {
                  var eachIndex = index;
                  if (Key && Key !== AbortItem.Key) {
                    resultList[eachIndex] = {
                      error: {
                        KeyNotMatch: true
                      }
                    };
                    nextItem(null);
                    return;
                  }
                  var UploadId = AbortItem.UploadId || AbortItem.UploadID;
                  self2.multipartAbort({
                    Bucket,
                    Region,
                    Key: AbortItem.Key,
                    Headers: params.Headers,
                    UploadId
                  }, function(err) {
                    var task = {
                      Bucket,
                      Region,
                      Key: AbortItem.Key,
                      UploadId
                    };
                    resultList[eachIndex] = {
                      error: err,
                      task
                    };
                    nextItem(null);
                  });
                  index++;
                }, function(err) {
                  if (err)
                    return callback(err);
                  var successList = [];
                  var errorList = [];
                  for (var i2 = 0, len = resultList.length; i2 < len; i2++) {
                    var item = resultList[i2];
                    if (item["task"]) {
                      if (item["error"]) {
                        errorList.push(item["task"]);
                      } else {
                        successList.push(item["task"]);
                      }
                    }
                  }
                  return callback(null, {
                    successList,
                    errorList
                  });
                });
              }
              function uploadFile2(params, callback) {
                var self2 = this;
                var SliceSize = params.SliceSize === void 0 ? self2.options.SliceSize : params.SliceSize;
                var taskList = [];
                var Body = params.Body;
                var FileSize = Body.size || Body.length || 0;
                var fileInfo = {
                  TaskId: ""
                };
                if (self2.options.EnableTracker) {
                  var accelerate = self2.options.UseAccelerate || typeof self2.options.Domain === "string" && self2.options.Domain.includes("accelerate.");
                  params.tracker = new Tracker({
                    bucket: params.Bucket,
                    region: params.Region,
                    apiName: "uploadFile",
                    fileKey: params.Key,
                    fileSize: FileSize,
                    accelerate,
                    deepTracker: self2.options.DeepTracker,
                    customId: self2.options.CustomId,
                    delay: self2.options.TrackerDelay
                  });
                }
                util.each(params, function(v2, k) {
                  if (_typeof2(v2) !== "object" && typeof v2 !== "function") {
                    fileInfo[k] = v2;
                  }
                });
                var _onTaskReady = params.onTaskReady;
                var onTaskReady = function onTaskReady2(tid) {
                  fileInfo.TaskId = tid;
                  _onTaskReady && _onTaskReady(tid);
                };
                params.onTaskReady = onTaskReady;
                var api = FileSize > SliceSize ? "sliceUploadFile" : "putObject";
                var _onFileFinish = params.onFileFinish;
                var onFileFinish = function onFileFinish2(err, data) {
                  params.tracker && params.tracker.formatResult(err, data);
                  _onFileFinish && _onFileFinish(err, data, fileInfo);
                  callback && callback(err, data);
                };
                taskList.push({
                  api,
                  params,
                  callback: onFileFinish
                });
                self2._addTasks(taskList);
              }
              function uploadFiles(params, callback) {
                var self2 = this;
                var SliceSize = params.SliceSize === void 0 ? self2.options.SliceSize : params.SliceSize;
                var TotalSize = 0;
                var TotalFinish = 0;
                var onTotalProgress = util.throttleOnProgress.call(self2, TotalFinish, params.onProgress);
                var unFinishCount = params.files.length;
                var _onTotalFileFinish = params.onFileFinish;
                var resultList = Array(unFinishCount);
                var onTotalFileFinish = function onTotalFileFinish2(err, data, options) {
                  onTotalProgress(null, true);
                  _onTotalFileFinish && _onTotalFileFinish(err, data, options);
                  resultList[options.Index] = {
                    options,
                    error: err,
                    data
                  };
                  if (--unFinishCount <= 0 && callback) {
                    callback(null, {
                      files: resultList
                    });
                  }
                };
                var taskList = [];
                util.each(params.files, function(fileParams, index) {
                  (function() {
                    var Body = fileParams.Body;
                    var FileSize = Body.size || Body.length || 0;
                    var fileInfo = {
                      Index: index,
                      TaskId: ""
                    };
                    TotalSize += FileSize;
                    if (self2.options.EnableTracker) {
                      var accelerate = self2.options.UseAccelerate || typeof self2.options.Domain === "string" && self2.options.Domain.includes("accelerate.");
                      fileParams.tracker = new Tracker({
                        bucket: fileParams.Bucket,
                        region: fileParams.Region,
                        apiName: "uploadFiles",
                        fileKey: fileParams.Key,
                        fileSize: FileSize,
                        accelerate,
                        deepTracker: self2.options.DeepTracker,
                        customId: self2.options.CustomId,
                        delay: self2.options.TrackerDelay
                      });
                    }
                    util.each(fileParams, function(v2, k) {
                      if (_typeof2(v2) !== "object" && typeof v2 !== "function") {
                        fileInfo[k] = v2;
                      }
                    });
                    var _onTaskReady = fileParams.onTaskReady;
                    var onTaskReady = function onTaskReady2(tid) {
                      fileInfo.TaskId = tid;
                      _onTaskReady && _onTaskReady(tid);
                    };
                    fileParams.onTaskReady = onTaskReady;
                    var PreAddSize = 0;
                    var _onProgress = fileParams.onProgress;
                    var onProgress = function onProgress2(info) {
                      TotalFinish = TotalFinish - PreAddSize + info.loaded;
                      PreAddSize = info.loaded;
                      _onProgress && _onProgress(info);
                      onTotalProgress({
                        loaded: TotalFinish,
                        total: TotalSize
                      });
                    };
                    fileParams.onProgress = onProgress;
                    var api = FileSize > SliceSize ? "sliceUploadFile" : "putObject";
                    var _onFileFinish = fileParams.onFileFinish;
                    var onFileFinish = function onFileFinish2(err, data) {
                      fileParams.tracker && fileParams.tracker.formatResult(err, data);
                      _onFileFinish && _onFileFinish(err, data);
                      onTotalFileFinish && onTotalFileFinish(err, data, fileInfo);
                    };
                    taskList.push({
                      api,
                      params: fileParams,
                      callback: onFileFinish
                    });
                  })();
                });
                self2._addTasks(taskList);
              }
              function sliceCopyFile(params, callback) {
                var ep = new EventProxy();
                var self2 = this;
                var Bucket = params.Bucket;
                var Region = params.Region;
                var Key = params.Key;
                var CopySource = params.CopySource;
                var m2 = util.getSourceParams.call(this, CopySource);
                if (!m2) {
                  callback(util.error(new Error("CopySource format error")));
                  return;
                }
                var SourceBucket = m2.Bucket;
                var SourceRegion = m2.Region;
                var SourceKey = decodeURIComponent(m2.Key);
                var CopySliceSize = params.CopySliceSize === void 0 ? self2.options.CopySliceSize : params.CopySliceSize;
                CopySliceSize = Math.max(0, CopySliceSize);
                var ChunkSize = params.CopyChunkSize || this.options.CopyChunkSize;
                var ChunkParallel = this.options.CopyChunkParallelLimit;
                var ChunkRetryTimes = this.options.ChunkRetryTimes + 1;
                var ChunkCount = 0;
                var FinishSize = 0;
                var FileSize;
                var onProgress;
                var SourceResHeaders = {};
                var SourceHeaders = {};
                var TargetHeader = {};
                ep.on("copy_slice_complete", function(UploadData) {
                  util.each(params.Headers, function(val2, k) {
                    if (k.toLowerCase().indexOf("x-cos-meta-") === 0)
                      ;
                  });
                  var Parts = util.map(UploadData.PartList, function(item) {
                    return {
                      PartNumber: item.PartNumber,
                      ETag: item.ETag
                    };
                  });
                  Async.retry(ChunkRetryTimes, function(tryCallback) {
                    self2.multipartComplete({
                      Bucket,
                      Region,
                      Key,
                      UploadId: UploadData.UploadId,
                      Parts,
                      calledBySdk: "sliceCopyFile"
                    }, tryCallback);
                  }, function(err, data) {
                    session.removeUsing(UploadData.UploadId);
                    if (err) {
                      onProgress(null, true);
                      return callback(err);
                    }
                    session.removeUploadId(UploadData.UploadId);
                    onProgress({
                      loaded: FileSize,
                      total: FileSize
                    }, true);
                    callback(null, data);
                  });
                });
                ep.on("get_copy_data_finish", function(UploadData) {
                  var uuid = session.getCopyFileId(CopySource, SourceResHeaders, ChunkSize, Bucket, Key);
                  uuid && session.saveUploadId(uuid, UploadData.UploadId, self2.options.UploadIdCacheLimit);
                  session.setUsing(UploadData.UploadId);
                  var needCopySlices = util.filter(UploadData.PartList, function(SliceItem) {
                    if (SliceItem["Uploaded"]) {
                      FinishSize += SliceItem["PartNumber"] >= ChunkCount ? FileSize % ChunkSize || ChunkSize : ChunkSize;
                    }
                    return !SliceItem["Uploaded"];
                  });
                  Async.eachLimit(needCopySlices, ChunkParallel, function(SliceItem, asyncCallback) {
                    var PartNumber = SliceItem.PartNumber;
                    var CopySourceRange = SliceItem.CopySourceRange;
                    var currentSize = SliceItem.end - SliceItem.start;
                    Async.retry(ChunkRetryTimes, function(tryCallback) {
                      copySliceItem.call(self2, {
                        Bucket,
                        Region,
                        Key,
                        CopySource,
                        UploadId: UploadData.UploadId,
                        PartNumber,
                        CopySourceRange
                      }, tryCallback);
                    }, function(err, data) {
                      if (err)
                        return asyncCallback(err);
                      FinishSize += currentSize;
                      onProgress({
                        loaded: FinishSize,
                        total: FileSize
                      });
                      SliceItem.ETag = data.ETag;
                      asyncCallback(err || null, data);
                    });
                  }, function(err) {
                    if (err) {
                      session.removeUsing(UploadData.UploadId);
                      onProgress(null, true);
                      return callback(err);
                    }
                    ep.emit("copy_slice_complete", UploadData);
                  });
                });
                ep.on("get_chunk_size_finish", function() {
                  var createNewUploadId = function createNewUploadId2() {
                    self2.multipartInit({
                      Bucket,
                      Region,
                      Key,
                      Headers: TargetHeader
                    }, function(err, data) {
                      if (err)
                        return callback(err);
                      params.UploadId = data.UploadId;
                      ep.emit("get_copy_data_finish", {
                        UploadId: params.UploadId,
                        PartList: params.PartList
                      });
                    });
                  };
                  var uuid = session.getCopyFileId(CopySource, SourceResHeaders, ChunkSize, Bucket, Key);
                  var LocalUploadIdList = session.getUploadIdList(uuid);
                  if (!uuid || !LocalUploadIdList)
                    return createNewUploadId();
                  var next = function next2(index) {
                    if (index >= LocalUploadIdList.length)
                      return createNewUploadId();
                    var UploadId = LocalUploadIdList[index];
                    if (session.using[UploadId])
                      return next2(index + 1);
                    wholeMultipartListPart.call(self2, {
                      Bucket,
                      Region,
                      Key,
                      UploadId
                    }, function(err, PartListData) {
                      if (err) {
                        session.removeUploadId(UploadId);
                        next2(index + 1);
                      } else {
                        if (session.using[UploadId])
                          return next2(index + 1);
                        var finishETagMap = {};
                        var offset = 0;
                        util.each(PartListData.PartList, function(PartItem) {
                          var size = parseInt(PartItem.Size);
                          var end = offset + size - 1;
                          finishETagMap[PartItem.PartNumber + "|" + offset + "|" + end] = PartItem.ETag;
                          offset += size;
                        });
                        util.each(params.PartList, function(PartItem) {
                          var ETag = finishETagMap[PartItem.PartNumber + "|" + PartItem.start + "|" + PartItem.end];
                          if (ETag) {
                            PartItem.ETag = ETag;
                            PartItem.Uploaded = true;
                          }
                        });
                        ep.emit("get_copy_data_finish", {
                          UploadId,
                          PartList: params.PartList
                        });
                      }
                    });
                  };
                  next(0);
                });
                ep.on("get_file_size_finish", function() {
                  (function() {
                    var SIZE = [1, 2, 4, 8, 16, 32, 64, 128, 256, 512, 1024, 1024 * 2, 1024 * 4, 1024 * 5];
                    var AutoChunkSize = 1024 * 1024;
                    for (var i2 = 0; i2 < SIZE.length; i2++) {
                      AutoChunkSize = SIZE[i2] * 1024 * 1024;
                      if (FileSize / AutoChunkSize <= self2.options.MaxPartNumber)
                        break;
                    }
                    params.ChunkSize = ChunkSize = Math.max(ChunkSize, AutoChunkSize);
                    ChunkCount = Math.ceil(FileSize / ChunkSize);
                    var list = [];
                    for (var partNumber = 1; partNumber <= ChunkCount; partNumber++) {
                      var start = (partNumber - 1) * ChunkSize;
                      var end = partNumber * ChunkSize < FileSize ? partNumber * ChunkSize - 1 : FileSize - 1;
                      var item = {
                        PartNumber: partNumber,
                        start,
                        end,
                        CopySourceRange: "bytes=" + start + "-" + end
                      };
                      list.push(item);
                    }
                    params.PartList = list;
                  })();
                  if (params.Headers["x-cos-metadata-directive"] === "Replaced") {
                    TargetHeader = params.Headers;
                  } else {
                    TargetHeader = SourceHeaders;
                  }
                  TargetHeader["x-cos-storage-class"] = params.Headers["x-cos-storage-class"] || SourceHeaders["x-cos-storage-class"];
                  TargetHeader = util.clearKey(TargetHeader);
                  if (SourceHeaders["x-cos-storage-class"] === "ARCHIVE" || SourceHeaders["x-cos-storage-class"] === "DEEP_ARCHIVE") {
                    var restoreHeader = SourceHeaders["x-cos-restore"];
                    if (!restoreHeader || restoreHeader === 'ongoing-request="true"') {
                      callback(util.error(new Error("Unrestored archive object is not allowed to be copied")));
                      return;
                    }
                  }
                  delete TargetHeader["x-cos-copy-source"];
                  delete TargetHeader["x-cos-metadata-directive"];
                  delete TargetHeader["x-cos-copy-source-If-Modified-Since"];
                  delete TargetHeader["x-cos-copy-source-If-Unmodified-Since"];
                  delete TargetHeader["x-cos-copy-source-If-Match"];
                  delete TargetHeader["x-cos-copy-source-If-None-Match"];
                  ep.emit("get_chunk_size_finish");
                });
                self2.headObject({
                  Bucket: SourceBucket,
                  Region: SourceRegion,
                  Key: SourceKey
                }, function(err, data) {
                  if (err) {
                    if (err.statusCode && err.statusCode === 404) {
                      callback(util.error(err, {
                        ErrorStatus: SourceKey + " Not Exist"
                      }));
                    } else {
                      callback(err);
                    }
                    return;
                  }
                  FileSize = params.FileSize = data.headers["content-length"];
                  if (FileSize === void 0 || !FileSize) {
                    callback(util.error(new Error('get Content-Length error, please add "Content-Length" to CORS ExposeHeader setting.（ 获取Content-Length失败，请在CORS ExposeHeader设置中添加Content-Length，请参考文档：https://cloud.tencent.com/document/product/436/13318 ）')));
                    return;
                  }
                  onProgress = util.throttleOnProgress.call(self2, FileSize, params.onProgress);
                  if (FileSize <= CopySliceSize) {
                    if (!params.Headers["x-cos-metadata-directive"]) {
                      params.Headers["x-cos-metadata-directive"] = "Copy";
                    }
                    self2.putObjectCopy(params, function(err2, data2) {
                      if (err2) {
                        onProgress(null, true);
                        return callback(err2);
                      }
                      onProgress({
                        loaded: FileSize,
                        total: FileSize
                      }, true);
                      callback(err2, data2);
                    });
                  } else {
                    var resHeaders = data.headers;
                    SourceResHeaders = resHeaders;
                    SourceHeaders = {
                      "Cache-Control": resHeaders["cache-control"],
                      "Content-Disposition": resHeaders["content-disposition"],
                      "Content-Encoding": resHeaders["content-encoding"],
                      "Content-Type": resHeaders["content-type"],
                      "Expires": resHeaders["expires"],
                      "x-cos-storage-class": resHeaders["x-cos-storage-class"]
                    };
                    util.each(resHeaders, function(v2, k) {
                      var metaPrefix = "x-cos-meta-";
                      if (k.indexOf(metaPrefix) === 0 && k.length > metaPrefix.length) {
                        SourceHeaders[k] = v2;
                      }
                    });
                    ep.emit("get_file_size_finish");
                  }
                });
              }
              function copySliceItem(params, callback) {
                var TaskId = params.TaskId;
                var Bucket = params.Bucket;
                var Region = params.Region;
                var Key = params.Key;
                var CopySource = params.CopySource;
                var UploadId = params.UploadId;
                var PartNumber = params.PartNumber * 1;
                var CopySourceRange = params.CopySourceRange;
                var ChunkRetryTimes = this.options.ChunkRetryTimes + 1;
                var self2 = this;
                Async.retry(ChunkRetryTimes, function(tryCallback) {
                  self2.uploadPartCopy({
                    TaskId,
                    Bucket,
                    Region,
                    Key,
                    CopySource,
                    UploadId,
                    PartNumber,
                    CopySourceRange
                  }, function(err, data) {
                    tryCallback(err || null, data);
                  });
                }, function(err, data) {
                  return callback(err, data);
                });
              }
              var API_MAP = {
                sliceUploadFile,
                abortUploadTask,
                uploadFile: uploadFile2,
                uploadFiles,
                sliceCopyFile
              };
              module2.exports.init = function(COS2, task) {
                task.transferToTaskMethod(API_MAP, "sliceUploadFile");
                util.each(API_MAP, function(fn, apiName) {
                  COS2.prototype[apiName] = util.apiWrapper(apiName, fn);
                });
              };
            }
          ),
          /***/
          "./src/async.js": (
            /*!**********************!*\
              !*** ./src/async.js ***!
              \**********************/
            /*! no static exports found */
            /***/
            function(module2, exports2) {
              var eachLimit = function eachLimit2(arr, limit, iterator, callback) {
                callback = callback || function() {
                };
                if (!arr.length || limit <= 0) {
                  return callback();
                }
                var completed = 0;
                var started = 0;
                var running = 0;
                (function replenish() {
                  if (completed >= arr.length) {
                    return callback();
                  }
                  while (running < limit && started < arr.length) {
                    started += 1;
                    running += 1;
                    iterator(arr[started - 1], function(err) {
                      if (err) {
                        callback(err);
                        callback = function callback2() {
                        };
                      } else {
                        completed += 1;
                        running -= 1;
                        if (completed >= arr.length) {
                          callback();
                        } else {
                          replenish();
                        }
                      }
                    });
                  }
                })();
              };
              var retry = function retry2(times, iterator, callback) {
                var next = function next2(index) {
                  iterator(function(err, data) {
                    if (err && index < times) {
                      next2(index + 1);
                    } else {
                      callback(err, data);
                    }
                  });
                };
                if (times < 1) {
                  callback();
                } else {
                  next(1);
                }
              };
              var async = {
                eachLimit,
                retry
              };
              module2.exports = async;
            }
          ),
          /***/
          "./src/base.js": (
            /*!*********************!*\
              !*** ./src/base.js ***!
              \*********************/
            /*! no static exports found */
            /***/
            function(module2, exports2, __webpack_require__2) {
              var REQUEST = __webpack_require__2(
                /*! ../lib/request */
                "./lib/request.js"
              );
              var util = __webpack_require__2(
                /*! ./util */
                "./src/util.js"
              );
              function getService(params, callback) {
                if (typeof params === "function") {
                  callback = params;
                  params = {};
                }
                var protocol = this.options.Protocol || (util.isBrowser && location.protocol === "http:" ? "http:" : "https:");
                var domain = this.options.ServiceDomain;
                var appId = params.AppId || this.options.appId;
                var region = params.Region;
                if (domain) {
                  domain = domain.replace(/\{\{AppId\}\}/ig, appId || "").replace(/\{\{Region\}\}/ig, region || "").replace(/\{\{.*?\}\}/ig, "");
                  if (!/^[a-zA-Z]+:\/\//.test(domain)) {
                    domain = protocol + "//" + domain;
                  }
                  if (domain.slice(-1) === "/") {
                    domain = domain.slice(0, -1);
                  }
                } else if (region) {
                  domain = protocol + "//cos." + region + ".myqcloud.com";
                } else {
                  domain = protocol + "//service.cos.myqcloud.com";
                }
                var SignHost = "";
                var standardHost = region ? "cos." + region + ".myqcloud.com" : "service.cos.myqcloud.com";
                var urlHost = domain.replace(/^https?:\/\/([^/]+)(\/.*)?$/, "$1");
                if (standardHost === urlHost)
                  SignHost = standardHost;
                submitRequest.call(this, {
                  Action: "name/cos:GetService",
                  url: domain,
                  method: "GET",
                  headers: params.Headers,
                  SignHost
                }, function(err, data) {
                  if (err)
                    return callback(err);
                  var buckets = data && data.ListAllMyBucketsResult && data.ListAllMyBucketsResult.Buckets && data.ListAllMyBucketsResult.Buckets.Bucket || [];
                  buckets = util.isArray(buckets) ? buckets : [buckets];
                  var owner = data && data.ListAllMyBucketsResult && data.ListAllMyBucketsResult.Owner || {};
                  callback(null, {
                    Buckets: buckets,
                    Owner: owner,
                    statusCode: data.statusCode,
                    headers: data.headers
                  });
                });
              }
              function putBucket(params, callback) {
                var self2 = this;
                var xml = "";
                if (params["BucketAZConfig"]) {
                  var CreateBucketConfiguration = {
                    BucketAZConfig: params.BucketAZConfig
                  };
                  xml = util.json2xml({
                    CreateBucketConfiguration
                  });
                }
                submitRequest.call(this, {
                  Action: "name/cos:PutBucket",
                  method: "PUT",
                  Bucket: params.Bucket,
                  Region: params.Region,
                  headers: params.Headers,
                  body: xml
                }, function(err, data) {
                  if (err)
                    return callback(err);
                  var url2 = getUrl({
                    protocol: self2.options.Protocol,
                    domain: self2.options.Domain,
                    bucket: params.Bucket,
                    region: params.Region,
                    isLocation: true
                  });
                  callback(null, {
                    Location: url2,
                    statusCode: data.statusCode,
                    headers: data.headers
                  });
                });
              }
              function headBucket(params, callback) {
                submitRequest.call(this, {
                  Action: "name/cos:HeadBucket",
                  Bucket: params.Bucket,
                  Region: params.Region,
                  headers: params.Headers,
                  method: "HEAD"
                }, callback);
              }
              function getBucket(params, callback) {
                var reqParams = {};
                reqParams["prefix"] = params["Prefix"] || "";
                reqParams["delimiter"] = params["Delimiter"];
                reqParams["marker"] = params["Marker"];
                reqParams["max-keys"] = params["MaxKeys"];
                reqParams["encoding-type"] = params["EncodingType"];
                submitRequest.call(this, {
                  Action: "name/cos:GetBucket",
                  ResourceKey: reqParams["prefix"],
                  method: "GET",
                  Bucket: params.Bucket,
                  Region: params.Region,
                  headers: params.Headers,
                  qs: reqParams
                }, function(err, data) {
                  if (err)
                    return callback(err);
                  var ListBucketResult = data.ListBucketResult || {};
                  var Contents = ListBucketResult.Contents || [];
                  var CommonPrefixes = ListBucketResult.CommonPrefixes || [];
                  Contents = util.isArray(Contents) ? Contents : [Contents];
                  CommonPrefixes = util.isArray(CommonPrefixes) ? CommonPrefixes : [CommonPrefixes];
                  var result = util.clone(ListBucketResult);
                  util.extend(result, {
                    Contents,
                    CommonPrefixes,
                    statusCode: data.statusCode,
                    headers: data.headers
                  });
                  callback(null, result);
                });
              }
              function deleteBucket(params, callback) {
                submitRequest.call(this, {
                  Action: "name/cos:DeleteBucket",
                  Bucket: params.Bucket,
                  Region: params.Region,
                  headers: params.Headers,
                  method: "DELETE"
                }, function(err, data) {
                  if (err && err.statusCode === 204) {
                    return callback(null, {
                      statusCode: err.statusCode
                    });
                  } else if (err) {
                    return callback(err);
                  }
                  callback(null, {
                    statusCode: data.statusCode,
                    headers: data.headers
                  });
                });
              }
              function putBucketAcl(params, callback) {
                var headers = params.Headers;
                var xml = "";
                if (params["AccessControlPolicy"]) {
                  var AccessControlPolicy = util.clone(params["AccessControlPolicy"] || {});
                  var Grants = AccessControlPolicy.Grants || AccessControlPolicy.Grant;
                  Grants = util.isArray(Grants) ? Grants : [Grants];
                  delete AccessControlPolicy.Grant;
                  delete AccessControlPolicy.Grants;
                  AccessControlPolicy.AccessControlList = {
                    Grant: Grants
                  };
                  xml = util.json2xml({
                    AccessControlPolicy
                  });
                  headers["Content-Type"] = "application/xml";
                  headers["Content-MD5"] = util.binaryBase64(util.md5(xml));
                }
                util.each(headers, function(val2, key) {
                  if (key.indexOf("x-cos-grant-") === 0) {
                    headers[key] = uniqGrant(headers[key]);
                  }
                });
                submitRequest.call(this, {
                  Action: "name/cos:PutBucketACL",
                  method: "PUT",
                  Bucket: params.Bucket,
                  Region: params.Region,
                  headers,
                  action: "acl",
                  body: xml
                }, function(err, data) {
                  if (err)
                    return callback(err);
                  callback(null, {
                    statusCode: data.statusCode,
                    headers: data.headers
                  });
                });
              }
              function getBucketAcl(params, callback) {
                submitRequest.call(this, {
                  Action: "name/cos:GetBucketACL",
                  method: "GET",
                  Bucket: params.Bucket,
                  Region: params.Region,
                  headers: params.Headers,
                  action: "acl"
                }, function(err, data) {
                  if (err)
                    return callback(err);
                  var AccessControlPolicy = data.AccessControlPolicy || {};
                  var Owner = AccessControlPolicy.Owner || {};
                  var Grant = AccessControlPolicy.AccessControlList.Grant || [];
                  Grant = util.isArray(Grant) ? Grant : [Grant];
                  var result = decodeAcl(AccessControlPolicy);
                  if (data.headers && data.headers["x-cos-acl"]) {
                    result.ACL = data.headers["x-cos-acl"];
                  }
                  result = util.extend(result, {
                    Owner,
                    Grants: Grant,
                    statusCode: data.statusCode,
                    headers: data.headers
                  });
                  callback(null, result);
                });
              }
              function putBucketCors(params, callback) {
                var CORSConfiguration = params["CORSConfiguration"] || {};
                var CORSRules = CORSConfiguration["CORSRules"] || params["CORSRules"] || [];
                CORSRules = util.clone(util.isArray(CORSRules) ? CORSRules : [CORSRules]);
                util.each(CORSRules, function(rule) {
                  util.each(["AllowedOrigin", "AllowedHeader", "AllowedMethod", "ExposeHeader"], function(key) {
                    var sKey = key + "s";
                    var val2 = rule[sKey] || rule[key] || [];
                    delete rule[sKey];
                    rule[key] = util.isArray(val2) ? val2 : [val2];
                  });
                });
                var Conf = {
                  CORSRule: CORSRules
                };
                if (params.ResponseVary)
                  Conf.ResponseVary = params.ResponseVary;
                var xml = util.json2xml({
                  CORSConfiguration: Conf
                });
                var headers = params.Headers;
                headers["Content-Type"] = "application/xml";
                headers["Content-MD5"] = util.binaryBase64(util.md5(xml));
                submitRequest.call(this, {
                  Action: "name/cos:PutBucketCORS",
                  method: "PUT",
                  Bucket: params.Bucket,
                  Region: params.Region,
                  body: xml,
                  action: "cors",
                  headers
                }, function(err, data) {
                  if (err)
                    return callback(err);
                  callback(null, {
                    statusCode: data.statusCode,
                    headers: data.headers
                  });
                });
              }
              function getBucketCors(params, callback) {
                submitRequest.call(this, {
                  Action: "name/cos:GetBucketCORS",
                  method: "GET",
                  Bucket: params.Bucket,
                  Region: params.Region,
                  headers: params.Headers,
                  action: "cors"
                }, function(err, data) {
                  if (err) {
                    if (err.statusCode === 404 && err.error && err.error.Code === "NoSuchCORSConfiguration") {
                      var result = {
                        CORSRules: [],
                        statusCode: err.statusCode
                      };
                      err.headers && (result.headers = err.headers);
                      callback(null, result);
                    } else {
                      callback(err);
                    }
                    return;
                  }
                  var CORSConfiguration = data.CORSConfiguration || {};
                  var CORSRules = CORSConfiguration.CORSRules || CORSConfiguration.CORSRule || [];
                  CORSRules = util.clone(util.isArray(CORSRules) ? CORSRules : [CORSRules]);
                  var ResponseVary = CORSConfiguration.ResponseVary;
                  util.each(CORSRules, function(rule) {
                    util.each(["AllowedOrigin", "AllowedHeader", "AllowedMethod", "ExposeHeader"], function(key) {
                      var sKey = key + "s";
                      var val2 = rule[sKey] || rule[key] || [];
                      delete rule[key];
                      rule[sKey] = util.isArray(val2) ? val2 : [val2];
                    });
                  });
                  callback(null, {
                    CORSRules,
                    ResponseVary,
                    statusCode: data.statusCode,
                    headers: data.headers
                  });
                });
              }
              function deleteBucketCors(params, callback) {
                submitRequest.call(this, {
                  Action: "name/cos:DeleteBucketCORS",
                  method: "DELETE",
                  Bucket: params.Bucket,
                  Region: params.Region,
                  headers: params.Headers,
                  action: "cors"
                }, function(err, data) {
                  if (err && err.statusCode === 204) {
                    return callback(null, {
                      statusCode: err.statusCode
                    });
                  } else if (err) {
                    return callback(err);
                  }
                  callback(null, {
                    statusCode: data.statusCode || err.statusCode,
                    headers: data.headers
                  });
                });
              }
              function getBucketLocation(params, callback) {
                submitRequest.call(this, {
                  Action: "name/cos:GetBucketLocation",
                  method: "GET",
                  Bucket: params.Bucket,
                  Region: params.Region,
                  headers: params.Headers,
                  action: "location"
                }, callback);
              }
              function putBucketPolicy(params, callback) {
                var Policy = params["Policy"];
                try {
                  if (typeof Policy === "string")
                    Policy = JSON.parse(Policy);
                } catch (e2) {
                }
                if (!Policy || typeof Policy === "string")
                  return callback(util.error(new Error("Policy format error")));
                var PolicyStr = JSON.stringify(Policy);
                if (!Policy.version)
                  Policy.version = "2.0";
                var headers = params.Headers;
                headers["Content-Type"] = "application/json";
                headers["Content-MD5"] = util.binaryBase64(util.md5(PolicyStr));
                submitRequest.call(this, {
                  Action: "name/cos:PutBucketPolicy",
                  method: "PUT",
                  Bucket: params.Bucket,
                  Region: params.Region,
                  action: "policy",
                  body: PolicyStr,
                  headers
                }, function(err, data) {
                  if (err && err.statusCode === 204) {
                    return callback(null, {
                      statusCode: err.statusCode
                    });
                  } else if (err) {
                    return callback(err);
                  }
                  callback(null, {
                    statusCode: data.statusCode,
                    headers: data.headers
                  });
                });
              }
              function getBucketPolicy(params, callback) {
                submitRequest.call(this, {
                  Action: "name/cos:GetBucketPolicy",
                  method: "GET",
                  Bucket: params.Bucket,
                  Region: params.Region,
                  headers: params.Headers,
                  action: "policy",
                  rawBody: true
                }, function(err, data) {
                  if (err) {
                    if (err.statusCode && err.statusCode === 403) {
                      return callback(util.error(err, {
                        ErrorStatus: "Access Denied"
                      }));
                    }
                    if (err.statusCode && err.statusCode === 405) {
                      return callback(util.error(err, {
                        ErrorStatus: "Method Not Allowed"
                      }));
                    }
                    if (err.statusCode && err.statusCode === 404) {
                      return callback(util.error(err, {
                        ErrorStatus: "Policy Not Found"
                      }));
                    }
                    return callback(err);
                  }
                  var Policy = {};
                  try {
                    Policy = JSON.parse(data.body);
                  } catch (e2) {
                  }
                  callback(null, {
                    Policy,
                    statusCode: data.statusCode,
                    headers: data.headers
                  });
                });
              }
              function deleteBucketPolicy(params, callback) {
                submitRequest.call(this, {
                  Action: "name/cos:DeleteBucketPolicy",
                  method: "DELETE",
                  Bucket: params.Bucket,
                  Region: params.Region,
                  headers: params.Headers,
                  action: "policy"
                }, function(err, data) {
                  if (err && err.statusCode === 204) {
                    return callback(null, {
                      statusCode: err.statusCode
                    });
                  } else if (err) {
                    return callback(err);
                  }
                  callback(null, {
                    statusCode: data.statusCode || err.statusCode,
                    headers: data.headers
                  });
                });
              }
              function putBucketTagging(params, callback) {
                var Tagging = params["Tagging"] || {};
                var Tags = Tagging.TagSet || Tagging.Tags || params["Tags"] || [];
                Tags = util.clone(util.isArray(Tags) ? Tags : [Tags]);
                var xml = util.json2xml({
                  Tagging: {
                    TagSet: {
                      Tag: Tags
                    }
                  }
                });
                var headers = params.Headers;
                headers["Content-Type"] = "application/xml";
                headers["Content-MD5"] = util.binaryBase64(util.md5(xml));
                submitRequest.call(this, {
                  Action: "name/cos:PutBucketTagging",
                  method: "PUT",
                  Bucket: params.Bucket,
                  Region: params.Region,
                  body: xml,
                  action: "tagging",
                  headers
                }, function(err, data) {
                  if (err && err.statusCode === 204) {
                    return callback(null, {
                      statusCode: err.statusCode
                    });
                  } else if (err) {
                    return callback(err);
                  }
                  callback(null, {
                    statusCode: data.statusCode,
                    headers: data.headers
                  });
                });
              }
              function getBucketTagging(params, callback) {
                submitRequest.call(this, {
                  Action: "name/cos:GetBucketTagging",
                  method: "GET",
                  Bucket: params.Bucket,
                  Region: params.Region,
                  headers: params.Headers,
                  action: "tagging"
                }, function(err, data) {
                  if (err) {
                    if (err.statusCode === 404 && err.error && (err.error === "Not Found" || err.error.Code === "NoSuchTagSet")) {
                      var result = {
                        Tags: [],
                        statusCode: err.statusCode
                      };
                      err.headers && (result.headers = err.headers);
                      callback(null, result);
                    } else {
                      callback(err);
                    }
                    return;
                  }
                  var Tags = [];
                  try {
                    Tags = data.Tagging.TagSet.Tag || [];
                  } catch (e2) {
                  }
                  Tags = util.clone(util.isArray(Tags) ? Tags : [Tags]);
                  callback(null, {
                    Tags,
                    statusCode: data.statusCode,
                    headers: data.headers
                  });
                });
              }
              function deleteBucketTagging(params, callback) {
                submitRequest.call(this, {
                  Action: "name/cos:DeleteBucketTagging",
                  method: "DELETE",
                  Bucket: params.Bucket,
                  Region: params.Region,
                  headers: params.Headers,
                  action: "tagging"
                }, function(err, data) {
                  if (err && err.statusCode === 204) {
                    return callback(null, {
                      statusCode: err.statusCode
                    });
                  } else if (err) {
                    return callback(err);
                  }
                  callback(null, {
                    statusCode: data.statusCode,
                    headers: data.headers
                  });
                });
              }
              function putBucketLifecycle(params, callback) {
                var LifecycleConfiguration = params["LifecycleConfiguration"] || {};
                var Rules = LifecycleConfiguration.Rules || params.Rules || [];
                Rules = util.clone(Rules);
                var xml = util.json2xml({
                  LifecycleConfiguration: {
                    Rule: Rules
                  }
                });
                var headers = params.Headers;
                headers["Content-Type"] = "application/xml";
                headers["Content-MD5"] = util.binaryBase64(util.md5(xml));
                submitRequest.call(this, {
                  Action: "name/cos:PutBucketLifecycle",
                  method: "PUT",
                  Bucket: params.Bucket,
                  Region: params.Region,
                  body: xml,
                  action: "lifecycle",
                  headers
                }, function(err, data) {
                  if (err && err.statusCode === 204) {
                    return callback(null, {
                      statusCode: err.statusCode
                    });
                  } else if (err) {
                    return callback(err);
                  }
                  callback(null, {
                    statusCode: data.statusCode,
                    headers: data.headers
                  });
                });
              }
              function getBucketLifecycle(params, callback) {
                submitRequest.call(this, {
                  Action: "name/cos:GetBucketLifecycle",
                  method: "GET",
                  Bucket: params.Bucket,
                  Region: params.Region,
                  headers: params.Headers,
                  action: "lifecycle"
                }, function(err, data) {
                  if (err) {
                    if (err.statusCode === 404 && err.error && err.error.Code === "NoSuchLifecycleConfiguration") {
                      var result = {
                        Rules: [],
                        statusCode: err.statusCode
                      };
                      err.headers && (result.headers = err.headers);
                      callback(null, result);
                    } else {
                      callback(err);
                    }
                    return;
                  }
                  var Rules = [];
                  try {
                    Rules = data.LifecycleConfiguration.Rule || [];
                  } catch (e2) {
                  }
                  Rules = util.clone(util.isArray(Rules) ? Rules : [Rules]);
                  callback(null, {
                    Rules,
                    statusCode: data.statusCode,
                    headers: data.headers
                  });
                });
              }
              function deleteBucketLifecycle(params, callback) {
                submitRequest.call(this, {
                  Action: "name/cos:DeleteBucketLifecycle",
                  method: "DELETE",
                  Bucket: params.Bucket,
                  Region: params.Region,
                  headers: params.Headers,
                  action: "lifecycle"
                }, function(err, data) {
                  if (err && err.statusCode === 204) {
                    return callback(null, {
                      statusCode: err.statusCode
                    });
                  } else if (err) {
                    return callback(err);
                  }
                  callback(null, {
                    statusCode: data.statusCode,
                    headers: data.headers
                  });
                });
              }
              function putBucketVersioning(params, callback) {
                if (!params["VersioningConfiguration"]) {
                  callback(util.error(new Error("missing param VersioningConfiguration")));
                  return;
                }
                var VersioningConfiguration = params["VersioningConfiguration"] || {};
                var xml = util.json2xml({
                  VersioningConfiguration
                });
                var headers = params.Headers;
                headers["Content-Type"] = "application/xml";
                headers["Content-MD5"] = util.binaryBase64(util.md5(xml));
                submitRequest.call(this, {
                  Action: "name/cos:PutBucketVersioning",
                  method: "PUT",
                  Bucket: params.Bucket,
                  Region: params.Region,
                  body: xml,
                  action: "versioning",
                  headers
                }, function(err, data) {
                  if (err && err.statusCode === 204) {
                    return callback(null, {
                      statusCode: err.statusCode
                    });
                  } else if (err) {
                    return callback(err);
                  }
                  callback(null, {
                    statusCode: data.statusCode,
                    headers: data.headers
                  });
                });
              }
              function getBucketVersioning(params, callback) {
                submitRequest.call(this, {
                  Action: "name/cos:GetBucketVersioning",
                  method: "GET",
                  Bucket: params.Bucket,
                  Region: params.Region,
                  headers: params.Headers,
                  action: "versioning"
                }, function(err, data) {
                  if (!err) {
                    !data.VersioningConfiguration && (data.VersioningConfiguration = {});
                  }
                  callback(err, data);
                });
              }
              function putBucketReplication(params, callback) {
                var ReplicationConfiguration = util.clone(params.ReplicationConfiguration);
                var xml = util.json2xml({
                  ReplicationConfiguration
                });
                xml = xml.replace(/<(\/?)Rules>/ig, "<$1Rule>");
                xml = xml.replace(/<(\/?)Tags>/ig, "<$1Tag>");
                var headers = params.Headers;
                headers["Content-Type"] = "application/xml";
                headers["Content-MD5"] = util.binaryBase64(util.md5(xml));
                submitRequest.call(this, {
                  Action: "name/cos:PutBucketReplication",
                  method: "PUT",
                  Bucket: params.Bucket,
                  Region: params.Region,
                  body: xml,
                  action: "replication",
                  headers
                }, function(err, data) {
                  if (err && err.statusCode === 204) {
                    return callback(null, {
                      statusCode: err.statusCode
                    });
                  } else if (err) {
                    return callback(err);
                  }
                  callback(null, {
                    statusCode: data.statusCode,
                    headers: data.headers
                  });
                });
              }
              function getBucketReplication(params, callback) {
                submitRequest.call(this, {
                  Action: "name/cos:GetBucketReplication",
                  method: "GET",
                  Bucket: params.Bucket,
                  Region: params.Region,
                  headers: params.Headers,
                  action: "replication"
                }, function(err, data) {
                  if (err) {
                    if (err.statusCode === 404 && err.error && (err.error === "Not Found" || err.error.Code === "ReplicationConfigurationnotFoundError")) {
                      var result = {
                        ReplicationConfiguration: {
                          Rules: []
                        },
                        statusCode: err.statusCode
                      };
                      err.headers && (result.headers = err.headers);
                      callback(null, result);
                    } else {
                      callback(err);
                    }
                    return;
                  }
                  !data.ReplicationConfiguration && (data.ReplicationConfiguration = {});
                  if (data.ReplicationConfiguration.Rule) {
                    data.ReplicationConfiguration.Rules = util.makeArray(data.ReplicationConfiguration.Rule);
                    delete data.ReplicationConfiguration.Rule;
                  }
                  callback(err, data);
                });
              }
              function deleteBucketReplication(params, callback) {
                submitRequest.call(this, {
                  Action: "name/cos:DeleteBucketReplication",
                  method: "DELETE",
                  Bucket: params.Bucket,
                  Region: params.Region,
                  headers: params.Headers,
                  action: "replication"
                }, function(err, data) {
                  if (err && err.statusCode === 204) {
                    return callback(null, {
                      statusCode: err.statusCode
                    });
                  } else if (err) {
                    return callback(err);
                  }
                  callback(null, {
                    statusCode: data.statusCode,
                    headers: data.headers
                  });
                });
              }
              function putBucketWebsite(params, callback) {
                if (!params["WebsiteConfiguration"]) {
                  callback(util.error(new Error("missing param WebsiteConfiguration")));
                  return;
                }
                var WebsiteConfiguration = util.clone(params["WebsiteConfiguration"] || {});
                var RoutingRules = WebsiteConfiguration["RoutingRules"] || WebsiteConfiguration["RoutingRule"] || [];
                RoutingRules = util.isArray(RoutingRules) ? RoutingRules : [RoutingRules];
                delete WebsiteConfiguration.RoutingRule;
                delete WebsiteConfiguration.RoutingRules;
                if (RoutingRules.length)
                  WebsiteConfiguration.RoutingRules = {
                    RoutingRule: RoutingRules
                  };
                var xml = util.json2xml({
                  WebsiteConfiguration
                });
                var headers = params.Headers;
                headers["Content-Type"] = "application/xml";
                headers["Content-MD5"] = util.binaryBase64(util.md5(xml));
                submitRequest.call(this, {
                  Action: "name/cos:PutBucketWebsite",
                  method: "PUT",
                  Bucket: params.Bucket,
                  Region: params.Region,
                  body: xml,
                  action: "website",
                  headers
                }, function(err, data) {
                  if (err && err.statusCode === 204) {
                    return callback(null, {
                      statusCode: err.statusCode
                    });
                  } else if (err) {
                    return callback(err);
                  }
                  callback(null, {
                    statusCode: data.statusCode,
                    headers: data.headers
                  });
                });
              }
              function getBucketWebsite(params, callback) {
                submitRequest.call(this, {
                  Action: "name/cos:GetBucketWebsite",
                  method: "GET",
                  Bucket: params.Bucket,
                  Region: params.Region,
                  Key: params.Key,
                  headers: params.Headers,
                  action: "website"
                }, function(err, data) {
                  if (err) {
                    if (err.statusCode === 404 && err.error.Code === "NoSuchWebsiteConfiguration") {
                      var result = {
                        WebsiteConfiguration: {},
                        statusCode: err.statusCode
                      };
                      err.headers && (result.headers = err.headers);
                      callback(null, result);
                    } else {
                      callback(err);
                    }
                    return;
                  }
                  var WebsiteConfiguration = data.WebsiteConfiguration || {};
                  if (WebsiteConfiguration["RoutingRules"]) {
                    var RoutingRules = util.clone(WebsiteConfiguration["RoutingRules"].RoutingRule || []);
                    RoutingRules = util.makeArray(RoutingRules);
                    WebsiteConfiguration.RoutingRules = RoutingRules;
                  }
                  callback(null, {
                    WebsiteConfiguration,
                    statusCode: data.statusCode,
                    headers: data.headers
                  });
                });
              }
              function deleteBucketWebsite(params, callback) {
                submitRequest.call(this, {
                  Action: "name/cos:DeleteBucketWebsite",
                  method: "DELETE",
                  Bucket: params.Bucket,
                  Region: params.Region,
                  headers: params.Headers,
                  action: "website"
                }, function(err, data) {
                  if (err && err.statusCode === 204) {
                    return callback(null, {
                      statusCode: err.statusCode
                    });
                  } else if (err) {
                    return callback(err);
                  }
                  callback(null, {
                    statusCode: data.statusCode,
                    headers: data.headers
                  });
                });
              }
              function putBucketReferer(params, callback) {
                if (!params["RefererConfiguration"]) {
                  callback(util.error(new Error("missing param RefererConfiguration")));
                  return;
                }
                var RefererConfiguration = util.clone(params["RefererConfiguration"] || {});
                var DomainList = RefererConfiguration["DomainList"] || {};
                var Domains = DomainList["Domains"] || DomainList["Domain"] || [];
                Domains = util.isArray(Domains) ? Domains : [Domains];
                if (Domains.length)
                  RefererConfiguration.DomainList = {
                    Domain: Domains
                  };
                var xml = util.json2xml({
                  RefererConfiguration
                });
                var headers = params.Headers;
                headers["Content-Type"] = "application/xml";
                headers["Content-MD5"] = util.binaryBase64(util.md5(xml));
                submitRequest.call(this, {
                  Action: "name/cos:PutBucketReferer",
                  method: "PUT",
                  Bucket: params.Bucket,
                  Region: params.Region,
                  body: xml,
                  action: "referer",
                  headers
                }, function(err, data) {
                  if (err && err.statusCode === 204) {
                    return callback(null, {
                      statusCode: err.statusCode
                    });
                  } else if (err) {
                    return callback(err);
                  }
                  callback(null, {
                    statusCode: data.statusCode,
                    headers: data.headers
                  });
                });
              }
              function getBucketReferer(params, callback) {
                submitRequest.call(this, {
                  Action: "name/cos:GetBucketReferer",
                  method: "GET",
                  Bucket: params.Bucket,
                  Region: params.Region,
                  Key: params.Key,
                  headers: params.Headers,
                  action: "referer"
                }, function(err, data) {
                  if (err) {
                    if (err.statusCode === 404 && err.error.Code === "NoSuchRefererConfiguration") {
                      var result = {
                        WebsiteConfiguration: {},
                        statusCode: err.statusCode
                      };
                      err.headers && (result.headers = err.headers);
                      callback(null, result);
                    } else {
                      callback(err);
                    }
                    return;
                  }
                  var RefererConfiguration = data.RefererConfiguration || {};
                  if (RefererConfiguration["DomainList"]) {
                    var Domains = util.makeArray(RefererConfiguration["DomainList"].Domain || []);
                    RefererConfiguration.DomainList = {
                      Domains
                    };
                  }
                  callback(null, {
                    RefererConfiguration,
                    statusCode: data.statusCode,
                    headers: data.headers
                  });
                });
              }
              function putBucketDomain(params, callback) {
                var DomainConfiguration = params["DomainConfiguration"] || {};
                var DomainRule = DomainConfiguration.DomainRule || params.DomainRule || [];
                DomainRule = util.clone(DomainRule);
                var xml = util.json2xml({
                  DomainConfiguration: {
                    DomainRule
                  }
                });
                var headers = params.Headers;
                headers["Content-Type"] = "application/xml";
                headers["Content-MD5"] = util.binaryBase64(util.md5(xml));
                submitRequest.call(this, {
                  Action: "name/cos:PutBucketDomain",
                  method: "PUT",
                  Bucket: params.Bucket,
                  Region: params.Region,
                  body: xml,
                  action: "domain",
                  headers
                }, function(err, data) {
                  if (err && err.statusCode === 204) {
                    return callback(null, {
                      statusCode: err.statusCode
                    });
                  } else if (err) {
                    return callback(err);
                  }
                  callback(null, {
                    statusCode: data.statusCode,
                    headers: data.headers
                  });
                });
              }
              function getBucketDomain(params, callback) {
                submitRequest.call(this, {
                  Action: "name/cos:GetBucketDomain",
                  method: "GET",
                  Bucket: params.Bucket,
                  Region: params.Region,
                  headers: params.Headers,
                  action: "domain"
                }, function(err, data) {
                  if (err)
                    return callback(err);
                  var DomainRule = [];
                  try {
                    DomainRule = data.DomainConfiguration.DomainRule || [];
                  } catch (e2) {
                  }
                  DomainRule = util.clone(util.isArray(DomainRule) ? DomainRule : [DomainRule]);
                  callback(null, {
                    DomainRule,
                    statusCode: data.statusCode,
                    headers: data.headers
                  });
                });
              }
              function deleteBucketDomain(params, callback) {
                submitRequest.call(this, {
                  Action: "name/cos:DeleteBucketDomain",
                  method: "DELETE",
                  Bucket: params.Bucket,
                  Region: params.Region,
                  headers: params.Headers,
                  action: "domain"
                }, function(err, data) {
                  if (err && err.statusCode === 204) {
                    return callback(null, {
                      statusCode: err.statusCode
                    });
                  } else if (err) {
                    return callback(err);
                  }
                  callback(null, {
                    statusCode: data.statusCode,
                    headers: data.headers
                  });
                });
              }
              function putBucketOrigin(params, callback) {
                var OriginConfiguration = params["OriginConfiguration"] || {};
                var OriginRule = OriginConfiguration.OriginRule || params.OriginRule || [];
                OriginRule = util.clone(OriginRule);
                var xml = util.json2xml({
                  OriginConfiguration: {
                    OriginRule
                  }
                });
                var headers = params.Headers;
                headers["Content-Type"] = "application/xml";
                headers["Content-MD5"] = util.binaryBase64(util.md5(xml));
                submitRequest.call(this, {
                  Action: "name/cos:PutBucketOrigin",
                  method: "PUT",
                  Bucket: params.Bucket,
                  Region: params.Region,
                  body: xml,
                  action: "origin",
                  headers
                }, function(err, data) {
                  if (err && err.statusCode === 204) {
                    return callback(null, {
                      statusCode: err.statusCode
                    });
                  } else if (err) {
                    return callback(err);
                  }
                  callback(null, {
                    statusCode: data.statusCode,
                    headers: data.headers
                  });
                });
              }
              function getBucketOrigin(params, callback) {
                submitRequest.call(this, {
                  Action: "name/cos:GetBucketOrigin",
                  method: "GET",
                  Bucket: params.Bucket,
                  Region: params.Region,
                  headers: params.Headers,
                  action: "origin"
                }, function(err, data) {
                  if (err)
                    return callback(err);
                  var OriginRule = [];
                  try {
                    OriginRule = data.OriginConfiguration.OriginRule || [];
                  } catch (e2) {
                  }
                  OriginRule = util.clone(util.isArray(OriginRule) ? OriginRule : [OriginRule]);
                  callback(null, {
                    OriginRule,
                    statusCode: data.statusCode,
                    headers: data.headers
                  });
                });
              }
              function deleteBucketOrigin(params, callback) {
                submitRequest.call(this, {
                  Action: "name/cos:DeleteBucketOrigin",
                  method: "DELETE",
                  Bucket: params.Bucket,
                  Region: params.Region,
                  headers: params.Headers,
                  action: "origin"
                }, function(err, data) {
                  if (err && err.statusCode === 204) {
                    return callback(null, {
                      statusCode: err.statusCode
                    });
                  } else if (err) {
                    return callback(err);
                  }
                  callback(null, {
                    statusCode: data.statusCode,
                    headers: data.headers
                  });
                });
              }
              function putBucketLogging(params, callback) {
                var xml = util.json2xml({
                  BucketLoggingStatus: params["BucketLoggingStatus"] || ""
                });
                var headers = params.Headers;
                headers["Content-Type"] = "application/xml";
                headers["Content-MD5"] = util.binaryBase64(util.md5(xml));
                submitRequest.call(this, {
                  Action: "name/cos:PutBucketLogging",
                  method: "PUT",
                  Bucket: params.Bucket,
                  Region: params.Region,
                  body: xml,
                  action: "logging",
                  headers
                }, function(err, data) {
                  if (err && err.statusCode === 204) {
                    return callback(null, {
                      statusCode: err.statusCode
                    });
                  } else if (err) {
                    return callback(err);
                  }
                  callback(null, {
                    statusCode: data.statusCode,
                    headers: data.headers
                  });
                });
              }
              function getBucketLogging(params, callback) {
                submitRequest.call(this, {
                  Action: "name/cos:GetBucketLogging",
                  method: "GET",
                  Bucket: params.Bucket,
                  Region: params.Region,
                  headers: params.Headers,
                  action: "logging"
                }, function(err, data) {
                  if (err)
                    return callback(err);
                  callback(null, {
                    BucketLoggingStatus: data.BucketLoggingStatus,
                    statusCode: data.statusCode,
                    headers: data.headers
                  });
                });
              }
              function putBucketInventory(params, callback) {
                var InventoryConfiguration = util.clone(params["InventoryConfiguration"]);
                if (InventoryConfiguration.OptionalFields) {
                  var Field = InventoryConfiguration.OptionalFields || [];
                  InventoryConfiguration.OptionalFields = {
                    Field
                  };
                }
                if (InventoryConfiguration.Destination && InventoryConfiguration.Destination.COSBucketDestination && InventoryConfiguration.Destination.COSBucketDestination.Encryption) {
                  var Encryption = InventoryConfiguration.Destination.COSBucketDestination.Encryption;
                  if (Object.keys(Encryption).indexOf("SSECOS") > -1) {
                    Encryption["SSE-COS"] = Encryption["SSECOS"];
                    delete Encryption["SSECOS"];
                  }
                }
                var xml = util.json2xml({
                  InventoryConfiguration
                });
                var headers = params.Headers;
                headers["Content-Type"] = "application/xml";
                headers["Content-MD5"] = util.binaryBase64(util.md5(xml));
                submitRequest.call(this, {
                  Action: "name/cos:PutBucketInventory",
                  method: "PUT",
                  Bucket: params.Bucket,
                  Region: params.Region,
                  body: xml,
                  action: "inventory",
                  qs: {
                    id: params["Id"]
                  },
                  headers
                }, function(err, data) {
                  if (err && err.statusCode === 204) {
                    return callback(null, {
                      statusCode: err.statusCode
                    });
                  } else if (err) {
                    return callback(err);
                  }
                  callback(null, {
                    statusCode: data.statusCode,
                    headers: data.headers
                  });
                });
              }
              function getBucketInventory(params, callback) {
                submitRequest.call(this, {
                  Action: "name/cos:GetBucketInventory",
                  method: "GET",
                  Bucket: params.Bucket,
                  Region: params.Region,
                  headers: params.Headers,
                  action: "inventory",
                  qs: {
                    id: params["Id"]
                  }
                }, function(err, data) {
                  if (err)
                    return callback(err);
                  var InventoryConfiguration = data["InventoryConfiguration"];
                  if (InventoryConfiguration && InventoryConfiguration.OptionalFields && InventoryConfiguration.OptionalFields.Field) {
                    var Field = InventoryConfiguration.OptionalFields.Field;
                    if (!util.isArray(Field)) {
                      Field = [Field];
                    }
                    InventoryConfiguration.OptionalFields = Field;
                  }
                  if (InventoryConfiguration.Destination && InventoryConfiguration.Destination.COSBucketDestination && InventoryConfiguration.Destination.COSBucketDestination.Encryption) {
                    var Encryption = InventoryConfiguration.Destination.COSBucketDestination.Encryption;
                    if (Object.keys(Encryption).indexOf("SSE-COS") > -1) {
                      Encryption["SSECOS"] = Encryption["SSE-COS"];
                      delete Encryption["SSE-COS"];
                    }
                  }
                  callback(null, {
                    InventoryConfiguration,
                    statusCode: data.statusCode,
                    headers: data.headers
                  });
                });
              }
              function listBucketInventory(params, callback) {
                submitRequest.call(this, {
                  Action: "name/cos:ListBucketInventory",
                  method: "GET",
                  Bucket: params.Bucket,
                  Region: params.Region,
                  headers: params.Headers,
                  action: "inventory",
                  qs: {
                    "continuation-token": params["ContinuationToken"]
                  }
                }, function(err, data) {
                  if (err)
                    return callback(err);
                  var ListInventoryConfigurationResult = data["ListInventoryConfigurationResult"];
                  var InventoryConfigurations = ListInventoryConfigurationResult.InventoryConfiguration || [];
                  InventoryConfigurations = util.isArray(InventoryConfigurations) ? InventoryConfigurations : [InventoryConfigurations];
                  delete ListInventoryConfigurationResult["InventoryConfiguration"];
                  util.each(InventoryConfigurations, function(InventoryConfiguration) {
                    if (InventoryConfiguration && InventoryConfiguration.OptionalFields && InventoryConfiguration.OptionalFields.Field) {
                      var Field = InventoryConfiguration.OptionalFields.Field;
                      if (!util.isArray(Field)) {
                        Field = [Field];
                      }
                      InventoryConfiguration.OptionalFields = Field;
                    }
                    if (InventoryConfiguration.Destination && InventoryConfiguration.Destination.COSBucketDestination && InventoryConfiguration.Destination.COSBucketDestination.Encryption) {
                      var Encryption = InventoryConfiguration.Destination.COSBucketDestination.Encryption;
                      if (Object.keys(Encryption).indexOf("SSE-COS") > -1) {
                        Encryption["SSECOS"] = Encryption["SSE-COS"];
                        delete Encryption["SSE-COS"];
                      }
                    }
                  });
                  ListInventoryConfigurationResult.InventoryConfigurations = InventoryConfigurations;
                  util.extend(ListInventoryConfigurationResult, {
                    statusCode: data.statusCode,
                    headers: data.headers
                  });
                  callback(null, ListInventoryConfigurationResult);
                });
              }
              function deleteBucketInventory(params, callback) {
                submitRequest.call(this, {
                  Action: "name/cos:DeleteBucketInventory",
                  method: "DELETE",
                  Bucket: params.Bucket,
                  Region: params.Region,
                  headers: params.Headers,
                  action: "inventory",
                  qs: {
                    id: params["Id"]
                  }
                }, function(err, data) {
                  if (err && err.statusCode === 204) {
                    return callback(null, {
                      statusCode: err.statusCode
                    });
                  } else if (err) {
                    return callback(err);
                  }
                  callback(null, {
                    statusCode: data.statusCode,
                    headers: data.headers
                  });
                });
              }
              function putBucketAccelerate(params, callback) {
                if (!params["AccelerateConfiguration"]) {
                  callback(util.error(new Error("missing param AccelerateConfiguration")));
                  return;
                }
                var configuration = {
                  AccelerateConfiguration: params.AccelerateConfiguration || {}
                };
                var xml = util.json2xml(configuration);
                var headers = {};
                headers["Content-Type"] = "application/xml";
                headers["Content-MD5"] = util.binaryBase64(util.md5(xml));
                submitRequest.call(this, {
                  Action: "name/cos:PutBucketAccelerate",
                  method: "PUT",
                  Bucket: params.Bucket,
                  Region: params.Region,
                  body: xml,
                  action: "accelerate",
                  headers
                }, function(err, data) {
                  if (err)
                    return callback(err);
                  callback(null, {
                    statusCode: data.statusCode,
                    headers: data.headers
                  });
                });
              }
              function getBucketAccelerate(params, callback) {
                submitRequest.call(this, {
                  Action: "name/cos:GetBucketAccelerate",
                  method: "GET",
                  Bucket: params.Bucket,
                  Region: params.Region,
                  action: "accelerate"
                }, function(err, data) {
                  if (!err) {
                    !data.AccelerateConfiguration && (data.AccelerateConfiguration = {});
                  }
                  callback(err, data);
                });
              }
              function putBucketEncryption(params, callback) {
                var conf = params.ServerSideEncryptionConfiguration || {};
                var Rules = conf.Rule || conf.Rules || [];
                var xml = util.json2xml({
                  ServerSideEncryptionConfiguration: {
                    Rule: Rules
                  }
                });
                var headers = params.Headers;
                headers["Content-Type"] = "application/xml";
                headers["Content-MD5"] = util.binaryBase64(util.md5(xml));
                submitRequest.call(this, {
                  Action: "name/cos:PutBucketEncryption",
                  method: "PUT",
                  Bucket: params.Bucket,
                  Region: params.Region,
                  body: xml,
                  action: "encryption",
                  headers
                }, function(err, data) {
                  if (err && err.statusCode === 204) {
                    return callback(null, {
                      statusCode: err.statusCode
                    });
                  } else if (err) {
                    return callback(err);
                  }
                  callback(null, {
                    statusCode: data.statusCode,
                    headers: data.headers
                  });
                });
              }
              function getBucketEncryption(params, callback) {
                submitRequest.call(this, {
                  Action: "name/cos:GetBucketEncryption",
                  method: "GET",
                  Bucket: params.Bucket,
                  Region: params.Region,
                  headers: params.Headers,
                  action: "encryption"
                }, function(err, data) {
                  if (err) {
                    if (err.statusCode === 404 && err.code === "NoSuchEncryptionConfiguration") {
                      var result = {
                        EncryptionConfiguration: {
                          Rules: []
                        },
                        statusCode: err.statusCode
                      };
                      err.headers && (result.headers = err.headers);
                      callback(null, result);
                    } else {
                      callback(err);
                    }
                    return;
                  }
                  var Rules = util.makeArray(data.EncryptionConfiguration && data.EncryptionConfiguration.Rule || []);
                  data.EncryptionConfiguration = {
                    Rules
                  };
                  callback(err, data);
                });
              }
              function deleteBucketEncryption(params, callback) {
                submitRequest.call(this, {
                  Action: "name/cos:DeleteBucketReplication",
                  method: "DELETE",
                  Bucket: params.Bucket,
                  Region: params.Region,
                  headers: params.Headers,
                  action: "encryption"
                }, function(err, data) {
                  if (err && err.statusCode === 204) {
                    return callback(null, {
                      statusCode: err.statusCode
                    });
                  } else if (err) {
                    return callback(err);
                  }
                  callback(null, {
                    statusCode: data.statusCode,
                    headers: data.headers
                  });
                });
              }
              function headObject(params, callback) {
                submitRequest.call(this, {
                  Action: "name/cos:HeadObject",
                  method: "HEAD",
                  Bucket: params.Bucket,
                  Region: params.Region,
                  Key: params.Key,
                  VersionId: params.VersionId,
                  headers: params.Headers
                }, function(err, data) {
                  if (err) {
                    var statusCode = err.statusCode;
                    if (params.Headers["If-Modified-Since"] && statusCode && statusCode === 304) {
                      return callback(null, {
                        NotModified: true,
                        statusCode
                      });
                    }
                    return callback(err);
                  }
                  data.ETag = util.attr(data.headers, "etag", "");
                  callback(null, data);
                });
              }
              function listObjectVersions(params, callback) {
                var reqParams = {};
                reqParams["prefix"] = params["Prefix"] || "";
                reqParams["delimiter"] = params["Delimiter"];
                reqParams["key-marker"] = params["KeyMarker"];
                reqParams["version-id-marker"] = params["VersionIdMarker"];
                reqParams["max-keys"] = params["MaxKeys"];
                reqParams["encoding-type"] = params["EncodingType"];
                submitRequest.call(this, {
                  Action: "name/cos:GetBucketObjectVersions",
                  ResourceKey: reqParams["prefix"],
                  method: "GET",
                  Bucket: params.Bucket,
                  Region: params.Region,
                  headers: params.Headers,
                  qs: reqParams,
                  action: "versions"
                }, function(err, data) {
                  if (err)
                    return callback(err);
                  var ListVersionsResult = data.ListVersionsResult || {};
                  var DeleteMarkers = ListVersionsResult.DeleteMarker || [];
                  DeleteMarkers = util.isArray(DeleteMarkers) ? DeleteMarkers : [DeleteMarkers];
                  var Versions = ListVersionsResult.Version || [];
                  Versions = util.isArray(Versions) ? Versions : [Versions];
                  var result = util.clone(ListVersionsResult);
                  delete result.DeleteMarker;
                  delete result.Version;
                  util.extend(result, {
                    DeleteMarkers,
                    Versions,
                    statusCode: data.statusCode,
                    headers: data.headers
                  });
                  callback(null, result);
                });
              }
              function getObject(params, callback) {
                var reqParams = params.Query || {};
                var reqParamsStr = params.QueryString || "";
                var onProgress = util.throttleOnProgress.call(this, 0, params.onProgress);
                var tracker = params.tracker;
                tracker && tracker.setParams({
                  signStartTime: (/* @__PURE__ */ new Date()).getTime()
                });
                reqParams["response-content-type"] = params["ResponseContentType"];
                reqParams["response-content-language"] = params["ResponseContentLanguage"];
                reqParams["response-expires"] = params["ResponseExpires"];
                reqParams["response-cache-control"] = params["ResponseCacheControl"];
                reqParams["response-content-disposition"] = params["ResponseContentDisposition"];
                reqParams["response-content-encoding"] = params["ResponseContentEncoding"];
                submitRequest.call(this, {
                  Action: "name/cos:GetObject",
                  method: "GET",
                  Bucket: params.Bucket,
                  Region: params.Region,
                  Key: params.Key,
                  VersionId: params.VersionId,
                  DataType: params.DataType,
                  headers: params.Headers,
                  qs: reqParams,
                  qsStr: reqParamsStr,
                  rawBody: true,
                  onDownloadProgress: onProgress,
                  tracker
                }, function(err, data) {
                  onProgress(null, true);
                  if (err) {
                    var statusCode = err.statusCode;
                    if (params.Headers["If-Modified-Since"] && statusCode && statusCode === 304) {
                      return callback(null, {
                        NotModified: true
                      });
                    }
                    return callback(err);
                  }
                  callback(null, {
                    Body: data.body,
                    ETag: util.attr(data.headers, "etag", ""),
                    statusCode: data.statusCode,
                    headers: data.headers
                  });
                });
              }
              function putObject(params, callback) {
                var self2 = this;
                var FileSize = params.ContentLength;
                var onProgress = util.throttleOnProgress.call(self2, FileSize, params.onProgress);
                var headers = params.Headers;
                if (!headers["Cache-Control"] && !headers["cache-control"])
                  headers["Cache-Control"] = "";
                if (!headers["Content-Type"] && !headers["content-type"])
                  headers["Content-Type"] = params.Body && params.Body.type || "";
                var needCalcMd5 = params.UploadAddMetaMd5 || self2.options.UploadAddMetaMd5 || self2.options.UploadCheckContentMd5;
                var tracker = params.tracker;
                needCalcMd5 && tracker && tracker.setParams({
                  md5StartTime: (/* @__PURE__ */ new Date()).getTime()
                });
                util.getBodyMd5(needCalcMd5, params.Body, function(md5) {
                  if (md5) {
                    tracker && tracker.setParams({
                      md5EndTime: (/* @__PURE__ */ new Date()).getTime()
                    });
                    if (self2.options.UploadCheckContentMd5)
                      headers["Content-MD5"] = util.binaryBase64(md5);
                    if (params.UploadAddMetaMd5 || self2.options.UploadAddMetaMd5)
                      headers["x-cos-meta-md5"] = md5;
                  }
                  if (params.ContentLength !== void 0)
                    headers["Content-Length"] = params.ContentLength;
                  onProgress(null, true);
                  submitRequest.call(self2, {
                    Action: "name/cos:PutObject",
                    TaskId: params.TaskId,
                    method: "PUT",
                    Bucket: params.Bucket,
                    Region: params.Region,
                    Key: params.Key,
                    headers: params.Headers,
                    qs: params.Query,
                    body: params.Body,
                    onProgress,
                    tracker
                  }, function(err, data) {
                    if (err) {
                      onProgress(null, true);
                      return callback(err);
                    }
                    onProgress({
                      loaded: FileSize,
                      total: FileSize
                    }, true);
                    var url2 = getUrl({
                      ForcePathStyle: self2.options.ForcePathStyle,
                      protocol: self2.options.Protocol,
                      domain: self2.options.Domain,
                      bucket: params.Bucket,
                      region: !self2.options.UseAccelerate ? params.Region : "accelerate",
                      object: params.Key
                    });
                    url2 = url2.substr(url2.indexOf("://") + 3);
                    data.Location = url2;
                    data.ETag = util.attr(data.headers, "etag", "");
                    callback(null, data);
                  });
                }, params.onHashProgress);
              }
              function deleteObject(params, callback) {
                submitRequest.call(this, {
                  Action: "name/cos:DeleteObject",
                  method: "DELETE",
                  Bucket: params.Bucket,
                  Region: params.Region,
                  Key: params.Key,
                  headers: params.Headers,
                  VersionId: params.VersionId,
                  action: params.Recursive ? "recursive" : ""
                }, function(err, data) {
                  if (err) {
                    var statusCode = err.statusCode;
                    if (statusCode && statusCode === 404) {
                      return callback(null, {
                        BucketNotFound: true,
                        statusCode
                      });
                    } else {
                      return callback(err);
                    }
                  }
                  callback(null, {
                    statusCode: data.statusCode,
                    headers: data.headers
                  });
                });
              }
              function getObjectAcl(params, callback) {
                var reqParams = {};
                if (params.VersionId) {
                  reqParams.versionId = params.VersionId;
                }
                submitRequest.call(this, {
                  Action: "name/cos:GetObjectACL",
                  method: "GET",
                  Bucket: params.Bucket,
                  Region: params.Region,
                  Key: params.Key,
                  headers: params.Headers,
                  qs: reqParams,
                  action: "acl"
                }, function(err, data) {
                  if (err)
                    return callback(err);
                  var AccessControlPolicy = data.AccessControlPolicy || {};
                  var Owner = AccessControlPolicy.Owner || {};
                  var Grant = AccessControlPolicy.AccessControlList && AccessControlPolicy.AccessControlList.Grant || [];
                  Grant = util.isArray(Grant) ? Grant : [Grant];
                  var result = decodeAcl(AccessControlPolicy);
                  delete result.GrantWrite;
                  if (data.headers && data.headers["x-cos-acl"]) {
                    result.ACL = data.headers["x-cos-acl"];
                  }
                  result = util.extend(result, {
                    Owner,
                    Grants: Grant,
                    statusCode: data.statusCode,
                    headers: data.headers
                  });
                  callback(null, result);
                });
              }
              function putObjectAcl(params, callback) {
                var headers = params.Headers;
                var xml = "";
                if (params["AccessControlPolicy"]) {
                  var AccessControlPolicy = util.clone(params["AccessControlPolicy"] || {});
                  var Grants = AccessControlPolicy.Grants || AccessControlPolicy.Grant;
                  Grants = util.isArray(Grants) ? Grants : [Grants];
                  delete AccessControlPolicy.Grant;
                  delete AccessControlPolicy.Grants;
                  AccessControlPolicy.AccessControlList = {
                    Grant: Grants
                  };
                  xml = util.json2xml({
                    AccessControlPolicy
                  });
                  headers["Content-Type"] = "application/xml";
                  headers["Content-MD5"] = util.binaryBase64(util.md5(xml));
                }
                util.each(headers, function(val2, key) {
                  if (key.indexOf("x-cos-grant-") === 0) {
                    headers[key] = uniqGrant(headers[key]);
                  }
                });
                submitRequest.call(this, {
                  Action: "name/cos:PutObjectACL",
                  method: "PUT",
                  Bucket: params.Bucket,
                  Region: params.Region,
                  Key: params.Key,
                  action: "acl",
                  headers,
                  body: xml
                }, function(err, data) {
                  if (err)
                    return callback(err);
                  callback(null, {
                    statusCode: data.statusCode,
                    headers: data.headers
                  });
                });
              }
              function optionsObject(params, callback) {
                var headers = params.Headers;
                headers["Origin"] = params["Origin"];
                headers["Access-Control-Request-Method"] = params["AccessControlRequestMethod"];
                headers["Access-Control-Request-Headers"] = params["AccessControlRequestHeaders"];
                submitRequest.call(this, {
                  Action: "name/cos:OptionsObject",
                  method: "OPTIONS",
                  Bucket: params.Bucket,
                  Region: params.Region,
                  Key: params.Key,
                  headers
                }, function(err, data) {
                  if (err) {
                    if (err.statusCode && err.statusCode === 403) {
                      return callback(null, {
                        OptionsForbidden: true,
                        statusCode: err.statusCode
                      });
                    }
                    return callback(err);
                  }
                  var headers2 = data.headers || {};
                  callback(null, {
                    AccessControlAllowOrigin: headers2["access-control-allow-origin"],
                    AccessControlAllowMethods: headers2["access-control-allow-methods"],
                    AccessControlAllowHeaders: headers2["access-control-allow-headers"],
                    AccessControlExposeHeaders: headers2["access-control-expose-headers"],
                    AccessControlMaxAge: headers2["access-control-max-age"],
                    statusCode: data.statusCode,
                    headers: data.headers
                  });
                });
              }
              function putObjectCopy(params, callback) {
                var self2 = this;
                var headers = params.Headers;
                if (!headers["Cache-Control"] && !headers["cache-control"])
                  headers["Cache-Control"] = "";
                var CopySource = params.CopySource || "";
                var m2 = util.getSourceParams.call(this, CopySource);
                if (!m2) {
                  callback(util.error(new Error("CopySource format error")));
                  return;
                }
                var SourceBucket = m2.Bucket;
                var SourceRegion = m2.Region;
                var SourceKey = decodeURIComponent(m2.Key);
                submitRequest.call(this, {
                  Scope: [{
                    action: "name/cos:GetObject",
                    bucket: SourceBucket,
                    region: SourceRegion,
                    prefix: SourceKey
                  }, {
                    action: "name/cos:PutObject",
                    bucket: params.Bucket,
                    region: params.Region,
                    prefix: params.Key
                  }],
                  method: "PUT",
                  Bucket: params.Bucket,
                  Region: params.Region,
                  Key: params.Key,
                  VersionId: params.VersionId,
                  headers: params.Headers
                }, function(err, data) {
                  if (err)
                    return callback(err);
                  var result = util.clone(data.CopyObjectResult || {});
                  var url2 = getUrl({
                    ForcePathStyle: self2.options.ForcePathStyle,
                    protocol: self2.options.Protocol,
                    domain: self2.options.Domain,
                    bucket: params.Bucket,
                    region: params.Region,
                    object: params.Key,
                    isLocation: true
                  });
                  util.extend(result, {
                    Location: url2,
                    statusCode: data.statusCode,
                    headers: data.headers
                  });
                  callback(null, result);
                });
              }
              function uploadPartCopy(params, callback) {
                var CopySource = params.CopySource || "";
                var m2 = util.getSourceParams.call(this, CopySource);
                if (!m2) {
                  callback(util.error(new Error("CopySource format error")));
                  return;
                }
                var SourceBucket = m2.Bucket;
                var SourceRegion = m2.Region;
                var SourceKey = decodeURIComponent(m2.Key);
                submitRequest.call(this, {
                  Scope: [{
                    action: "name/cos:GetObject",
                    bucket: SourceBucket,
                    region: SourceRegion,
                    prefix: SourceKey
                  }, {
                    action: "name/cos:PutObject",
                    bucket: params.Bucket,
                    region: params.Region,
                    prefix: params.Key
                  }],
                  method: "PUT",
                  Bucket: params.Bucket,
                  Region: params.Region,
                  Key: params.Key,
                  VersionId: params.VersionId,
                  qs: {
                    partNumber: params["PartNumber"],
                    uploadId: params["UploadId"]
                  },
                  headers: params.Headers
                }, function(err, data) {
                  if (err)
                    return callback(err);
                  var result = util.clone(data.CopyPartResult || {});
                  util.extend(result, {
                    statusCode: data.statusCode,
                    headers: data.headers
                  });
                  callback(null, result);
                });
              }
              function deleteMultipleObject(params, callback) {
                var Objects = params.Objects || [];
                var Quiet = params.Quiet;
                Objects = util.isArray(Objects) ? Objects : [Objects];
                var xml = util.json2xml({
                  Delete: {
                    Object: Objects,
                    Quiet: Quiet || false
                  }
                });
                var headers = params.Headers;
                headers["Content-Type"] = "application/xml";
                headers["Content-MD5"] = util.binaryBase64(util.md5(xml));
                var Scope = util.map(Objects, function(v2) {
                  return {
                    action: "name/cos:DeleteObject",
                    bucket: params.Bucket,
                    region: params.Region,
                    prefix: v2.Key
                  };
                });
                submitRequest.call(this, {
                  Scope,
                  method: "POST",
                  Bucket: params.Bucket,
                  Region: params.Region,
                  body: xml,
                  action: "delete",
                  headers
                }, function(err, data) {
                  if (err)
                    return callback(err);
                  var DeleteResult = data.DeleteResult || {};
                  var Deleted = DeleteResult.Deleted || [];
                  var Errors = DeleteResult.Error || [];
                  Deleted = util.isArray(Deleted) ? Deleted : [Deleted];
                  Errors = util.isArray(Errors) ? Errors : [Errors];
                  var result = util.clone(DeleteResult);
                  util.extend(result, {
                    Error: Errors,
                    Deleted,
                    statusCode: data.statusCode,
                    headers: data.headers
                  });
                  callback(null, result);
                });
              }
              function restoreObject(params, callback) {
                var headers = params.Headers;
                if (!params["RestoreRequest"]) {
                  callback(util.error(new Error("missing param RestoreRequest")));
                  return;
                }
                var RestoreRequest = params.RestoreRequest || {};
                var xml = util.json2xml({
                  RestoreRequest
                });
                headers["Content-Type"] = "application/xml";
                headers["Content-MD5"] = util.binaryBase64(util.md5(xml));
                submitRequest.call(this, {
                  Action: "name/cos:RestoreObject",
                  method: "POST",
                  Bucket: params.Bucket,
                  Region: params.Region,
                  Key: params.Key,
                  VersionId: params.VersionId,
                  body: xml,
                  action: "restore",
                  headers
                }, callback);
              }
              function putObjectTagging(params, callback) {
                var Tagging = params["Tagging"] || {};
                var Tags = Tagging.TagSet || Tagging.Tags || params["Tags"] || [];
                Tags = util.clone(util.isArray(Tags) ? Tags : [Tags]);
                var xml = util.json2xml({
                  Tagging: {
                    TagSet: {
                      Tag: Tags
                    }
                  }
                });
                var headers = params.Headers;
                headers["Content-Type"] = "application/xml";
                headers["Content-MD5"] = util.binaryBase64(util.md5(xml));
                submitRequest.call(this, {
                  Action: "name/cos:PutObjectTagging",
                  method: "PUT",
                  Bucket: params.Bucket,
                  Key: params.Key,
                  Region: params.Region,
                  body: xml,
                  action: "tagging",
                  headers,
                  VersionId: params.VersionId
                }, function(err, data) {
                  if (err && err.statusCode === 204) {
                    return callback(null, {
                      statusCode: err.statusCode
                    });
                  } else if (err) {
                    return callback(err);
                  }
                  callback(null, {
                    statusCode: data.statusCode,
                    headers: data.headers
                  });
                });
              }
              function getObjectTagging(params, callback) {
                submitRequest.call(this, {
                  Action: "name/cos:GetObjectTagging",
                  method: "GET",
                  Key: params.Key,
                  Bucket: params.Bucket,
                  Region: params.Region,
                  headers: params.Headers,
                  action: "tagging",
                  VersionId: params.VersionId
                }, function(err, data) {
                  if (err) {
                    if (err.statusCode === 404 && err.error && (err.error === "Not Found" || err.error.Code === "NoSuchTagSet")) {
                      var result = {
                        Tags: [],
                        statusCode: err.statusCode
                      };
                      err.headers && (result.headers = err.headers);
                      callback(null, result);
                    } else {
                      callback(err);
                    }
                    return;
                  }
                  var Tags = [];
                  try {
                    Tags = data.Tagging.TagSet.Tag || [];
                  } catch (e2) {
                  }
                  Tags = util.clone(util.isArray(Tags) ? Tags : [Tags]);
                  callback(null, {
                    Tags,
                    statusCode: data.statusCode,
                    headers: data.headers
                  });
                });
              }
              function deleteObjectTagging(params, callback) {
                submitRequest.call(this, {
                  Action: "name/cos:DeleteObjectTagging",
                  method: "DELETE",
                  Bucket: params.Bucket,
                  Region: params.Region,
                  Key: params.Key,
                  headers: params.Headers,
                  action: "tagging",
                  VersionId: params.VersionId
                }, function(err, data) {
                  if (err && err.statusCode === 204) {
                    return callback(null, {
                      statusCode: err.statusCode
                    });
                  } else if (err) {
                    return callback(err);
                  }
                  callback(null, {
                    statusCode: data.statusCode,
                    headers: data.headers
                  });
                });
              }
              function selectObjectContent(params, callback) {
                var SelectType = params["SelectType"];
                if (!SelectType)
                  return callback(util.error(new Error("missing param SelectType")));
                var SelectRequest = params["SelectRequest"] || {};
                var xml = util.json2xml({
                  SelectRequest
                });
                var headers = params.Headers;
                headers["Content-Type"] = "application/xml";
                headers["Content-MD5"] = util.binaryBase64(util.md5(xml));
                submitRequest.call(this, {
                  Action: "name/cos:GetObject",
                  method: "POST",
                  Bucket: params.Bucket,
                  Region: params.Region,
                  Key: params.Key,
                  headers: params.Headers,
                  action: "select",
                  qs: {
                    "select-type": params["SelectType"]
                  },
                  VersionId: params.VersionId,
                  body: xml,
                  DataType: "arraybuffer",
                  rawBody: true
                }, function(err, data) {
                  if (err && err.statusCode === 204) {
                    return callback(null, {
                      statusCode: err.statusCode
                    });
                  } else if (err) {
                    return callback(err);
                  }
                  var result = util.parseSelectPayload(data.body);
                  callback(null, {
                    statusCode: data.statusCode,
                    headers: data.headers,
                    Body: result.body,
                    Payload: result.payload
                  });
                });
              }
              function multipartInit(params, callback) {
                var self2 = this;
                var headers = params.Headers;
                var tracker = params.tracker;
                if (!headers["Cache-Control"] && !headers["cache-control"])
                  headers["Cache-Control"] = "";
                if (!headers["Content-Type"] && !headers["content-type"])
                  headers["Content-Type"] = params.Body && params.Body.type || "";
                var needCalcMd5 = params.Body && (params.UploadAddMetaMd5 || self2.options.UploadAddMetaMd5);
                needCalcMd5 && tracker && tracker.setParams({
                  md5StartTime: (/* @__PURE__ */ new Date()).getTime()
                });
                util.getBodyMd5(needCalcMd5, params.Body, function(md5) {
                  if (md5)
                    params.Headers["x-cos-meta-md5"] = md5;
                  needCalcMd5 && tracker && tracker.setParams({
                    md5EndTime: (/* @__PURE__ */ new Date()).getTime()
                  });
                  submitRequest.call(self2, {
                    Action: "name/cos:InitiateMultipartUpload",
                    method: "POST",
                    Bucket: params.Bucket,
                    Region: params.Region,
                    Key: params.Key,
                    action: "uploads",
                    headers: params.Headers,
                    qs: params.Query,
                    tracker
                  }, function(err, data) {
                    if (err) {
                      tracker && tracker.parent && tracker.parent.setParams({
                        errorNode: "multipartInit"
                      });
                      return callback(err);
                    }
                    data = util.clone(data || {});
                    if (data && data.InitiateMultipartUploadResult) {
                      return callback(null, util.extend(data.InitiateMultipartUploadResult, {
                        statusCode: data.statusCode,
                        headers: data.headers
                      }));
                    }
                    callback(null, data);
                  });
                }, params.onHashProgress);
              }
              function multipartUpload(params, callback) {
                var self2 = this;
                util.getFileSize("multipartUpload", params, function() {
                  var tracker = params.tracker;
                  var needCalcMd5 = self2.options.UploadCheckContentMd5;
                  needCalcMd5 && tracker && tracker.setParams({
                    md5StartTime: (/* @__PURE__ */ new Date()).getTime()
                  });
                  util.getBodyMd5(needCalcMd5, params.Body, function(md5) {
                    if (md5)
                      params.Headers["Content-MD5"] = util.binaryBase64(md5);
                    needCalcMd5 && tracker && tracker.setParams({
                      md5EndTime: (/* @__PURE__ */ new Date()).getTime()
                    });
                    tracker && tracker.setParams({
                      partNumber: params.PartNumber
                    });
                    submitRequest.call(self2, {
                      Action: "name/cos:UploadPart",
                      TaskId: params.TaskId,
                      method: "PUT",
                      Bucket: params.Bucket,
                      Region: params.Region,
                      Key: params.Key,
                      qs: {
                        partNumber: params["PartNumber"],
                        uploadId: params["UploadId"]
                      },
                      headers: params.Headers,
                      onProgress: params.onProgress,
                      body: params.Body || null,
                      tracker
                    }, function(err, data) {
                      if (err) {
                        tracker && tracker.parent && tracker.parent.setParams({
                          errorNode: "multipartUpload"
                        });
                        return callback(err);
                      }
                      callback(null, {
                        ETag: util.attr(data.headers, "etag", ""),
                        statusCode: data.statusCode,
                        headers: data.headers
                      });
                    });
                  });
                });
              }
              function multipartComplete(params, callback) {
                var self2 = this;
                var UploadId = params.UploadId;
                var Parts = params["Parts"];
                var tracker = params.tracker;
                for (var i2 = 0, len = Parts.length; i2 < len; i2++) {
                  if (Parts[i2]["ETag"] && Parts[i2]["ETag"].indexOf('"') === 0) {
                    continue;
                  }
                  Parts[i2]["ETag"] = '"' + Parts[i2]["ETag"] + '"';
                }
                var xml = util.json2xml({
                  CompleteMultipartUpload: {
                    Part: Parts
                  }
                });
                xml = xml.replace(/\n\s*/g, "");
                var headers = params.Headers;
                headers["Content-Type"] = "application/xml";
                headers["Content-MD5"] = util.binaryBase64(util.md5(xml));
                submitRequest.call(this, {
                  Action: "name/cos:CompleteMultipartUpload",
                  method: "POST",
                  Bucket: params.Bucket,
                  Region: params.Region,
                  Key: params.Key,
                  qs: {
                    uploadId: UploadId
                  },
                  body: xml,
                  headers,
                  tracker
                }, function(err, data) {
                  if (err) {
                    tracker && tracker.parent && tracker.parent.setParams({
                      errorNode: "multipartComplete"
                    });
                    return callback(err);
                  }
                  var url2 = getUrl({
                    ForcePathStyle: self2.options.ForcePathStyle,
                    protocol: self2.options.Protocol,
                    domain: self2.options.Domain,
                    bucket: params.Bucket,
                    region: params.Region,
                    object: params.Key,
                    isLocation: true
                  });
                  var res2 = data.CompleteMultipartUploadResult || {};
                  if (res2.ProcessResults) {
                    if (res2 && res2.ProcessResults) {
                      res2.UploadResult = {
                        OriginalInfo: {
                          Key: res2.Key,
                          Location: url2,
                          ETag: res2.ETag,
                          ImageInfo: res2.ImageInfo
                        },
                        ProcessResults: res2.ProcessResults
                      };
                      delete res2.ImageInfo;
                      delete res2.ProcessResults;
                    }
                  }
                  var result = util.extend(res2, {
                    Location: url2,
                    statusCode: data.statusCode,
                    headers: data.headers
                  });
                  callback(null, result);
                });
              }
              function multipartList(params, callback) {
                var reqParams = {};
                reqParams["delimiter"] = params["Delimiter"];
                reqParams["encoding-type"] = params["EncodingType"];
                reqParams["prefix"] = params["Prefix"] || "";
                reqParams["max-uploads"] = params["MaxUploads"];
                reqParams["key-marker"] = params["KeyMarker"];
                reqParams["upload-id-marker"] = params["UploadIdMarker"];
                reqParams = util.clearKey(reqParams);
                var tracker = params.tracker;
                tracker && tracker.setParams({
                  signStartTime: (/* @__PURE__ */ new Date()).getTime()
                });
                submitRequest.call(this, {
                  Action: "name/cos:ListMultipartUploads",
                  ResourceKey: reqParams["prefix"],
                  method: "GET",
                  Bucket: params.Bucket,
                  Region: params.Region,
                  headers: params.Headers,
                  qs: reqParams,
                  action: "uploads",
                  tracker
                }, function(err, data) {
                  if (err) {
                    tracker && tracker.parent && tracker.parent.setParams({
                      errorNode: "multipartList"
                    });
                    return callback(err);
                  }
                  if (data && data.ListMultipartUploadsResult) {
                    var Upload = data.ListMultipartUploadsResult.Upload || [];
                    Upload = util.isArray(Upload) ? Upload : [Upload];
                    data.ListMultipartUploadsResult.Upload = Upload;
                  }
                  var result = util.clone(data.ListMultipartUploadsResult || {});
                  util.extend(result, {
                    statusCode: data.statusCode,
                    headers: data.headers
                  });
                  callback(null, result);
                });
              }
              function multipartListPart(params, callback) {
                var reqParams = {};
                var tracker = params.tracker;
                reqParams["uploadId"] = params["UploadId"];
                reqParams["encoding-type"] = params["EncodingType"];
                reqParams["max-parts"] = params["MaxParts"];
                reqParams["part-number-marker"] = params["PartNumberMarker"];
                submitRequest.call(this, {
                  Action: "name/cos:ListParts",
                  method: "GET",
                  Bucket: params.Bucket,
                  Region: params.Region,
                  Key: params.Key,
                  headers: params.Headers,
                  qs: reqParams
                }, function(err, data) {
                  if (err) {
                    tracker && tracker.parent && tracker.parent.setParams({
                      errorNode: "multipartListPart"
                    });
                    return callback(err);
                  }
                  var ListPartsResult = data.ListPartsResult || {};
                  var Part = ListPartsResult.Part || [];
                  Part = util.isArray(Part) ? Part : [Part];
                  ListPartsResult.Part = Part;
                  var result = util.clone(ListPartsResult);
                  util.extend(result, {
                    statusCode: data.statusCode,
                    headers: data.headers
                  });
                  callback(null, result);
                });
              }
              function multipartAbort(params, callback) {
                var reqParams = {};
                reqParams["uploadId"] = params["UploadId"];
                submitRequest.call(this, {
                  Action: "name/cos:AbortMultipartUpload",
                  method: "DELETE",
                  Bucket: params.Bucket,
                  Region: params.Region,
                  Key: params.Key,
                  headers: params.Headers,
                  qs: reqParams
                }, function(err, data) {
                  if (err)
                    return callback(err);
                  callback(null, {
                    statusCode: data.statusCode,
                    headers: data.headers
                  });
                });
              }
              function request2(params, callback) {
                submitRequest.call(this, {
                  method: params.Method,
                  Bucket: params.Bucket,
                  Region: params.Region,
                  Key: params.Key,
                  action: params.Action,
                  headers: params.Headers,
                  qs: params.Query,
                  body: params.Body,
                  Url: params.Url,
                  rawBody: params.RawBody,
                  DataType: params.DataType
                }, function(err, data) {
                  if (err)
                    return callback(err);
                  if (data && data.body) {
                    data.Body = data.body;
                    delete data.body;
                  }
                  callback(err, data);
                });
              }
              function appendObject(params, callback) {
                var headers = params.Headers;
                if (!headers["Cache-Control"] && !headers["cache-control"])
                  headers["Cache-Control"] = "";
                if (!headers["Content-Type"] && !headers["content-type"])
                  headers["Content-Type"] = params.Body && params.Body.type || "";
                submitRequest.call(this, {
                  Action: "name/cos:AppendObject",
                  method: "POST",
                  Bucket: params.Bucket,
                  Region: params.Region,
                  action: "append",
                  Key: params.Key,
                  body: params.Body,
                  qs: {
                    position: params.Position
                  },
                  headers: params.Headers
                }, function(err, data) {
                  if (err)
                    return callback(err);
                  callback(null, data);
                });
              }
              function getAuth(params) {
                var self2 = this;
                return util.getAuth({
                  SecretId: params.SecretId || this.options.SecretId || "",
                  SecretKey: params.SecretKey || this.options.SecretKey || "",
                  Bucket: params.Bucket,
                  Region: params.Region,
                  Method: params.Method,
                  Key: params.Key,
                  Query: params.Query,
                  Headers: params.Headers,
                  Expires: params.Expires,
                  UseRawKey: self2.options.UseRawKey,
                  SystemClockOffset: self2.options.SystemClockOffset
                });
              }
              function getObjectUrl(params, callback) {
                var self2 = this;
                var useAccelerate = params.UseAccelerate === void 0 ? self2.options.UseAccelerate : params.UseAccelerate;
                var url2 = getUrl({
                  ForcePathStyle: self2.options.ForcePathStyle,
                  protocol: params.Protocol || self2.options.Protocol,
                  domain: params.Domain || self2.options.Domain,
                  bucket: params.Bucket,
                  region: useAccelerate ? "accelerate" : params.Region,
                  object: params.Key
                });
                var queryParamsStr = "";
                if (params.Query) {
                  queryParamsStr += util.obj2str(params.Query);
                }
                if (params.QueryString) {
                  queryParamsStr += (queryParamsStr ? "&" : "") + params.QueryString;
                }
                var syncUrl = url2;
                if (params.Sign !== void 0 && !params.Sign) {
                  queryParamsStr && (syncUrl += "?" + queryParamsStr);
                  callback(null, {
                    Url: syncUrl
                  });
                  return syncUrl;
                }
                var SignHost = getSignHost.call(this, {
                  Bucket: params.Bucket,
                  Region: params.Region,
                  UseAccelerate: params.UseAccelerate,
                  Url: url2
                });
                var AuthData = getAuthorizationAsync.call(this, {
                  Action: (params.Method || "").toUpperCase() === "PUT" ? "name/cos:PutObject" : "name/cos:GetObject",
                  Bucket: params.Bucket || "",
                  Region: params.Region || "",
                  Method: params.Method || "get",
                  Key: params.Key,
                  Expires: params.Expires,
                  Headers: params.Headers,
                  Query: params.Query,
                  SignHost,
                  ForceSignHost: params.ForceSignHost === false ? false : self2.options.ForceSignHost
                  // getObjectUrl支持传参ForceSignHost
                }, function(err, AuthData2) {
                  if (!callback)
                    return;
                  if (err) {
                    callback(err);
                    return;
                  }
                  var replaceUrlParamList = function replaceUrlParamList2(url22) {
                    var urlParams = url22.match(/q-url-param-list.*?(?=&)/g)[0];
                    var encodedParams = "q-url-param-list=" + encodeURIComponent(urlParams.replace(/q-url-param-list=/, "")).toLowerCase();
                    var reg = new RegExp(urlParams, "g");
                    var replacedUrl = url22.replace(reg, encodedParams);
                    return replacedUrl;
                  };
                  var signUrl = url2;
                  signUrl += "?" + (AuthData2.Authorization.indexOf("q-signature") > -1 ? replaceUrlParamList(AuthData2.Authorization) : "sign=" + encodeURIComponent(AuthData2.Authorization));
                  AuthData2.SecurityToken && (signUrl += "&x-cos-security-token=" + AuthData2.SecurityToken);
                  AuthData2.ClientIP && (signUrl += "&clientIP=" + AuthData2.ClientIP);
                  AuthData2.ClientUA && (signUrl += "&clientUA=" + AuthData2.ClientUA);
                  AuthData2.Token && (signUrl += "&token=" + AuthData2.Token);
                  queryParamsStr && (signUrl += "&" + queryParamsStr);
                  setTimeout(function() {
                    callback(null, {
                      Url: signUrl
                    });
                  });
                });
                if (AuthData) {
                  syncUrl += "?" + AuthData.Authorization + (AuthData.SecurityToken ? "&x-cos-security-token=" + AuthData.SecurityToken : "");
                  queryParamsStr && (syncUrl += "&" + queryParamsStr);
                } else {
                  queryParamsStr && (syncUrl += "?" + queryParamsStr);
                }
                return syncUrl;
              }
              function decodeAcl(AccessControlPolicy) {
                var result = {
                  GrantFullControl: [],
                  GrantWrite: [],
                  GrantRead: [],
                  GrantReadAcp: [],
                  GrantWriteAcp: [],
                  ACL: ""
                };
                var GrantMap = {
                  "FULL_CONTROL": "GrantFullControl",
                  "WRITE": "GrantWrite",
                  "READ": "GrantRead",
                  "READ_ACP": "GrantReadAcp",
                  "WRITE_ACP": "GrantWriteAcp"
                };
                var AccessControlList = AccessControlPolicy && AccessControlPolicy.AccessControlList || {};
                var Grant = AccessControlList.Grant;
                if (Grant) {
                  Grant = util.isArray(Grant) ? Grant : [Grant];
                }
                var PublicAcl = {
                  READ: 0,
                  WRITE: 0,
                  FULL_CONTROL: 0
                };
                Grant && Grant.length && util.each(Grant, function(item) {
                  if (item.Grantee.ID === "qcs::cam::anyone:anyone" || item.Grantee.URI === "http://cam.qcloud.com/groups/global/AllUsers") {
                    PublicAcl[item.Permission] = 1;
                  } else if (item.Grantee.ID !== AccessControlPolicy.Owner.ID) {
                    result[GrantMap[item.Permission]].push('id="' + item.Grantee.ID + '"');
                  }
                });
                if (PublicAcl.FULL_CONTROL || PublicAcl.WRITE && PublicAcl.READ) {
                  result.ACL = "public-read-write";
                } else if (PublicAcl.READ) {
                  result.ACL = "public-read";
                } else {
                  result.ACL = "private";
                }
                util.each(GrantMap, function(item) {
                  result[item] = uniqGrant(result[item].join(","));
                });
                return result;
              }
              function uniqGrant(str) {
                var arr = str.split(",");
                var exist = {};
                var i2, item;
                for (i2 = 0; i2 < arr.length; ) {
                  item = arr[i2].trim();
                  if (exist[item]) {
                    arr.splice(i2, 1);
                  } else {
                    exist[item] = true;
                    arr[i2] = item;
                    i2++;
                  }
                }
                return arr.join(",");
              }
              function getUrl(params) {
                var region = params.region || "";
                var longBucket = params.bucket || "";
                var shortBucket = longBucket.substr(0, longBucket.lastIndexOf("-"));
                var appId = longBucket.substr(longBucket.lastIndexOf("-") + 1);
                var domain = params.domain;
                var object2 = params.object;
                if (typeof domain === "function") {
                  domain = domain({
                    Bucket: longBucket,
                    Region: region
                  });
                }
                if (["http", "https"].includes(params.protocol)) {
                  params.protocol = params.protocol + ":";
                }
                var protocol = params.protocol || (util.isBrowser && location.protocol === "http:" ? "http:" : "https:");
                if (!domain) {
                  if (["cn-south", "cn-south-2", "cn-north", "cn-east", "cn-southwest", "sg"].indexOf(region) > -1) {
                    domain = "{Region}.myqcloud.com";
                  } else {
                    domain = "cos.{Region}.myqcloud.com";
                  }
                  if (!params.ForcePathStyle) {
                    domain = "{Bucket}." + domain;
                  }
                }
                domain = domain.replace(/\{\{AppId\}\}/ig, appId).replace(/\{\{Bucket\}\}/ig, shortBucket).replace(/\{\{Region\}\}/ig, region).replace(/\{\{.*?\}\}/ig, "");
                domain = domain.replace(/\{AppId\}/ig, appId).replace(/\{BucketName\}/ig, shortBucket).replace(/\{Bucket\}/ig, longBucket).replace(/\{Region\}/ig, region).replace(/\{.*?\}/ig, "");
                if (!/^[a-zA-Z]+:\/\//.test(domain)) {
                  domain = protocol + "//" + domain;
                }
                if (domain.slice(-1) === "/") {
                  domain = domain.slice(0, -1);
                }
                var url2 = domain;
                if (params.ForcePathStyle) {
                  url2 += "/" + longBucket;
                }
                url2 += "/";
                if (object2) {
                  url2 += util.camSafeUrlEncode(object2).replace(/%2F/g, "/");
                }
                if (params.isLocation) {
                  url2 = url2.replace(/^https?:\/\//, "");
                }
                return url2;
              }
              var getSignHost = function getSignHost2(opt) {
                if (!opt.Bucket || !opt.Region)
                  return "";
                var useAccelerate = opt.UseAccelerate === void 0 ? this.options.UseAccelerate : opt.UseAccelerate;
                var url2 = opt.Url || getUrl({
                  ForcePathStyle: this.options.ForcePathStyle,
                  protocol: this.options.Protocol,
                  domain: this.options.Domain,
                  bucket: opt.Bucket,
                  region: useAccelerate ? "accelerate" : opt.Region
                });
                var urlHost = url2.replace(/^https?:\/\/([^/]+)(\/.*)?$/, "$1");
                var standardHostReg = new RegExp("^([a-z\\d-]+-\\d+\\.)?(cos|cosv6|ci|pic)\\.([a-z\\d-]+)\\.myqcloud\\.com$");
                if (standardHostReg.test(urlHost))
                  return urlHost;
                return "";
              };
              function getAuthorizationAsync(params, callback) {
                var headers = util.clone(params.Headers);
                var headerHost = "";
                util.each(headers, function(v2, k) {
                  (v2 === "" || ["content-type", "cache-control", "expires"].indexOf(k.toLowerCase()) > -1) && delete headers[k];
                  if (k.toLowerCase() === "host")
                    headerHost = v2;
                });
                var forceSignHost = params.ForceSignHost === false ? false : true;
                if (!headerHost && params.SignHost && forceSignHost)
                  headers.Host = params.SignHost;
                var cbDone = false;
                var cb = function cb2(err, AuthData) {
                  if (cbDone)
                    return;
                  cbDone = true;
                  if (AuthData && AuthData.XCosSecurityToken && !AuthData.SecurityToken) {
                    AuthData = util.clone(AuthData);
                    AuthData.SecurityToken = AuthData.XCosSecurityToken;
                    delete AuthData.XCosSecurityToken;
                  }
                  callback && callback(err, AuthData);
                };
                var self2 = this;
                var Bucket = params.Bucket || "";
                var Region = params.Region || "";
                var KeyName = params.Key || "";
                if (self2.options.ForcePathStyle && Bucket) {
                  KeyName = Bucket + "/" + KeyName;
                }
                var Pathname = "/" + KeyName;
                var StsData = {};
                var Scope = params.Scope;
                if (!Scope) {
                  var Action = params.Action || "";
                  var ResourceKey = params.ResourceKey || params.Key || "";
                  Scope = params.Scope || [{
                    action: Action,
                    bucket: Bucket,
                    region: Region,
                    prefix: ResourceKey
                  }];
                }
                var ScopeKey = util.md5(JSON.stringify(Scope));
                self2._StsCache = self2._StsCache || [];
                (function() {
                  var i2, AuthData;
                  for (i2 = self2._StsCache.length - 1; i2 >= 0; i2--) {
                    AuthData = self2._StsCache[i2];
                    var compareTime = Math.round(util.getSkewTime(self2.options.SystemClockOffset) / 1e3) + 30;
                    if (AuthData.StartTime && compareTime < AuthData.StartTime || compareTime >= AuthData.ExpiredTime) {
                      self2._StsCache.splice(i2, 1);
                      continue;
                    }
                    if (!AuthData.ScopeLimit || AuthData.ScopeLimit && AuthData.ScopeKey === ScopeKey) {
                      StsData = AuthData;
                      break;
                    }
                  }
                })();
                var calcAuthByTmpKey = function calcAuthByTmpKey2() {
                  var KeyTime = "";
                  if (StsData.StartTime && params.Expires)
                    KeyTime = StsData.StartTime + ";" + (StsData.StartTime + params.Expires * 1);
                  else if (StsData.StartTime && StsData.ExpiredTime)
                    KeyTime = StsData.StartTime + ";" + StsData.ExpiredTime;
                  var Authorization = util.getAuth({
                    SecretId: StsData.TmpSecretId,
                    SecretKey: StsData.TmpSecretKey,
                    Method: params.Method,
                    Pathname,
                    Query: params.Query,
                    Headers: headers,
                    Expires: params.Expires,
                    UseRawKey: self2.options.UseRawKey,
                    SystemClockOffset: self2.options.SystemClockOffset,
                    KeyTime,
                    ForceSignHost: forceSignHost
                  });
                  var AuthData = {
                    Authorization,
                    SecurityToken: StsData.SecurityToken || StsData.XCosSecurityToken || "",
                    Token: StsData.Token || "",
                    ClientIP: StsData.ClientIP || "",
                    ClientUA: StsData.ClientUA || ""
                  };
                  cb(null, AuthData);
                };
                var checkAuthError = function checkAuthError2(AuthData) {
                  if (AuthData.Authorization) {
                    var formatAllow = false;
                    var auth = AuthData.Authorization;
                    if (auth) {
                      if (auth.indexOf(" ") > -1) {
                        formatAllow = false;
                      } else if (auth.indexOf("q-sign-algorithm=") > -1 && auth.indexOf("q-ak=") > -1 && auth.indexOf("q-sign-time=") > -1 && auth.indexOf("q-key-time=") > -1 && auth.indexOf("q-url-param-list=") > -1) {
                        formatAllow = true;
                      } else {
                        try {
                          auth = atob(auth);
                          if (auth.indexOf("a=") > -1 && auth.indexOf("k=") > -1 && auth.indexOf("t=") > -1 && auth.indexOf("r=") > -1 && auth.indexOf("b=") > -1) {
                            formatAllow = true;
                          }
                        } catch (e2) {
                        }
                      }
                    }
                    if (!formatAllow)
                      return util.error(new Error("getAuthorization callback params format error"));
                  } else {
                    if (!AuthData.TmpSecretId)
                      return util.error(new Error('getAuthorization callback params missing "TmpSecretId"'));
                    if (!AuthData.TmpSecretKey)
                      return util.error(new Error('getAuthorization callback params missing "TmpSecretKey"'));
                    if (!AuthData.SecurityToken && !AuthData.XCosSecurityToken)
                      return util.error(new Error('getAuthorization callback params missing "SecurityToken"'));
                    if (!AuthData.ExpiredTime)
                      return util.error(new Error('getAuthorization callback params missing "ExpiredTime"'));
                    if (AuthData.ExpiredTime && AuthData.ExpiredTime.toString().length !== 10)
                      return util.error(new Error('getAuthorization callback params "ExpiredTime" should be 10 digits'));
                    if (AuthData.StartTime && AuthData.StartTime.toString().length !== 10)
                      return util.error(new Error('getAuthorization callback params "StartTime" should be 10 StartTime'));
                  }
                  return false;
                };
                if (StsData.ExpiredTime && StsData.ExpiredTime - util.getSkewTime(self2.options.SystemClockOffset) / 1e3 > 60) {
                  calcAuthByTmpKey();
                } else if (self2.options.getAuthorization) {
                  self2.options.getAuthorization.call(self2, {
                    Bucket,
                    Region,
                    Method: params.Method,
                    Key: KeyName,
                    Pathname,
                    Query: params.Query,
                    Headers: headers,
                    Scope,
                    SystemClockOffset: self2.options.SystemClockOffset,
                    ForceSignHost: forceSignHost
                  }, function(AuthData) {
                    if (typeof AuthData === "string")
                      AuthData = {
                        Authorization: AuthData
                      };
                    var AuthError = checkAuthError(AuthData);
                    if (AuthError)
                      return cb(AuthError);
                    if (AuthData.Authorization) {
                      cb(null, AuthData);
                    } else {
                      StsData = AuthData || {};
                      StsData.Scope = Scope;
                      StsData.ScopeKey = ScopeKey;
                      self2._StsCache.push(StsData);
                      calcAuthByTmpKey();
                    }
                  });
                } else if (self2.options.getSTS) {
                  self2.options.getSTS.call(self2, {
                    Bucket,
                    Region
                  }, function(data) {
                    StsData = data || {};
                    StsData.Scope = Scope;
                    StsData.ScopeKey = ScopeKey;
                    if (!StsData.TmpSecretId)
                      StsData.TmpSecretId = StsData.SecretId;
                    if (!StsData.TmpSecretKey)
                      StsData.TmpSecretKey = StsData.SecretKey;
                    var AuthError = checkAuthError(StsData);
                    if (AuthError)
                      return cb(AuthError);
                    self2._StsCache.push(StsData);
                    calcAuthByTmpKey();
                  });
                } else {
                  return function() {
                    var Authorization = util.getAuth({
                      SecretId: params.SecretId || self2.options.SecretId,
                      SecretKey: params.SecretKey || self2.options.SecretKey,
                      Method: params.Method,
                      Pathname,
                      Query: params.Query,
                      Headers: headers,
                      Expires: params.Expires,
                      UseRawKey: self2.options.UseRawKey,
                      SystemClockOffset: self2.options.SystemClockOffset,
                      ForceSignHost: forceSignHost
                    });
                    var AuthData = {
                      Authorization,
                      SecurityToken: self2.options.SecurityToken || self2.options.XCosSecurityToken
                    };
                    cb(null, AuthData);
                    return AuthData;
                  }();
                }
                return "";
              }
              function allowRetry(err) {
                var allowRetry2 = false;
                var isTimeError = false;
                var serverDate = err.headers && (err.headers.date || err.headers.Date) || err.error && err.error.ServerTime;
                try {
                  var errorCode = err.error.Code;
                  var errorMessage = err.error.Message;
                  if (errorCode === "RequestTimeTooSkewed" || errorCode === "AccessDenied" && errorMessage === "Request has expired") {
                    isTimeError = true;
                  }
                } catch (e2) {
                }
                if (err) {
                  if (isTimeError && serverDate) {
                    var serverTime = Date.parse(serverDate);
                    if (this.options.CorrectClockSkew && Math.abs(util.getSkewTime(this.options.SystemClockOffset) - serverTime) >= 3e4) {
                      formatAppLog("error", "at node_modules/cos-js-sdk-v5/dist/cos-js-sdk-v5.js:12184", "error: Local time is too skewed.");
                      this.options.SystemClockOffset = serverTime - Date.now();
                      allowRetry2 = true;
                    }
                  } else if (Math.floor(err.statusCode / 100) === 5) {
                    allowRetry2 = true;
                  }
                }
                return allowRetry2;
              }
              function submitRequest(params, callback) {
                var self2 = this;
                !params.headers && (params.headers = {});
                !params.qs && (params.qs = {});
                params.VersionId && (params.qs.versionId = params.VersionId);
                params.qs = util.clearKey(params.qs);
                params.headers && (params.headers = util.clearKey(params.headers));
                params.qs && (params.qs = util.clearKey(params.qs));
                var Query = util.clone(params.qs);
                params.action && (Query[params.action] = "");
                var paramsUrl = params.url || params.Url;
                var SignHost = params.SignHost || getSignHost.call(this, {
                  Bucket: params.Bucket,
                  Region: params.Region,
                  Url: paramsUrl
                });
                var tracker = params.tracker;
                var next = function next2(tryTimes) {
                  var oldClockOffset = self2.options.SystemClockOffset;
                  tracker && tracker.setParams({
                    signStartTime: (/* @__PURE__ */ new Date()).getTime(),
                    retryTimes: tryTimes - 1
                  });
                  getAuthorizationAsync.call(self2, {
                    Bucket: params.Bucket || "",
                    Region: params.Region || "",
                    Method: params.method,
                    Key: params.Key,
                    Query,
                    Headers: params.headers,
                    SignHost,
                    Action: params.Action,
                    ResourceKey: params.ResourceKey,
                    Scope: params.Scope,
                    ForceSignHost: self2.options.ForceSignHost
                  }, function(err, AuthData) {
                    if (err) {
                      callback(err);
                      return;
                    }
                    tracker && tracker.setParams({
                      signEndTime: (/* @__PURE__ */ new Date()).getTime(),
                      httpStartTime: (/* @__PURE__ */ new Date()).getTime()
                    });
                    params.AuthData = AuthData;
                    _submitRequest.call(self2, params, function(err2, data) {
                      tracker && tracker.setParams({
                        httpEndTime: (/* @__PURE__ */ new Date()).getTime()
                      });
                      if (err2 && tryTimes < 2 && (oldClockOffset !== self2.options.SystemClockOffset || allowRetry.call(self2, err2))) {
                        if (params.headers) {
                          delete params.headers.Authorization;
                          delete params.headers["token"];
                          delete params.headers["clientIP"];
                          delete params.headers["clientUA"];
                          params.headers["x-cos-security-token"] && delete params.headers["x-cos-security-token"];
                          params.headers["x-ci-security-token"] && delete params.headers["x-ci-security-token"];
                        }
                        next2(tryTimes + 1);
                      } else {
                        callback(err2, data);
                      }
                    });
                  });
                };
                next(1);
              }
              function _submitRequest(params, callback) {
                var self2 = this;
                var TaskId = params.TaskId;
                if (TaskId && !self2._isRunningTask(TaskId))
                  return;
                var bucket = params.Bucket;
                var region = params.Region;
                var object2 = params.Key;
                var method2 = params.method || "GET";
                var url2 = params.Url || params.url;
                var body = params.body;
                var rawBody = params.rawBody;
                if (self2.options.UseAccelerate) {
                  region = "accelerate";
                }
                url2 = url2 || getUrl({
                  ForcePathStyle: self2.options.ForcePathStyle,
                  protocol: self2.options.Protocol,
                  domain: self2.options.Domain,
                  bucket,
                  region,
                  object: object2
                });
                if (params.action) {
                  url2 = url2 + "?" + (util.isIOS_QQ ? "".concat(params.action, "=") : params.action);
                }
                if (params.qsStr) {
                  if (url2.indexOf("?") > -1) {
                    url2 = url2 + "&" + params.qsStr;
                  } else {
                    url2 = url2 + "?" + params.qsStr;
                  }
                }
                var opt = {
                  method: method2,
                  url: url2,
                  headers: params.headers,
                  qs: params.qs,
                  body
                };
                var token = "x-cos-security-token";
                if (util.isCIHost(url2)) {
                  token = "x-ci-security-token";
                }
                opt.headers.Authorization = params.AuthData.Authorization;
                params.AuthData.Token && (opt.headers["token"] = params.AuthData.Token);
                params.AuthData.ClientIP && (opt.headers["clientIP"] = params.AuthData.ClientIP);
                params.AuthData.ClientUA && (opt.headers["clientUA"] = params.AuthData.ClientUA);
                params.AuthData.SecurityToken && (opt.headers[token] = params.AuthData.SecurityToken);
                opt.headers && (opt.headers = util.clearKey(opt.headers));
                opt = util.clearKey(opt);
                if (params.onProgress && typeof params.onProgress === "function") {
                  var contentLength = body && (body.size || body.length) || 0;
                  opt.onProgress = function(e2) {
                    if (TaskId && !self2._isRunningTask(TaskId))
                      return;
                    var loaded = e2 ? e2.loaded : 0;
                    params.onProgress({
                      loaded,
                      total: contentLength
                    });
                  };
                }
                if (params.onDownloadProgress) {
                  opt.onDownloadProgress = params.onDownloadProgress;
                }
                if (params.DataType) {
                  opt.dataType = params.DataType;
                }
                if (this.options.Timeout) {
                  opt.timeout = this.options.Timeout;
                }
                self2.options.ForcePathStyle && (opt.pathStyle = self2.options.ForcePathStyle);
                self2.emit("before-send", opt);
                var useAccelerate = opt.url.includes("accelerate.");
                var queryString = opt.qs ? Object.keys(opt.qs).map(function(key) {
                  return "".concat(key, "=").concat(opt.qs[key]);
                }).join("&") : "";
                var fullUrl = queryString ? opt.url + "?" + queryString : opt.url;
                params.tracker && params.tracker.setParams({
                  reqUrl: fullUrl,
                  accelerate: useAccelerate ? "Y" : "N"
                });
                params.tracker && params.tracker.parent && params.tracker.parent.setParams({
                  reqUrl: fullUrl,
                  accelerate: useAccelerate ? "Y" : "N"
                });
                var sender = (self2.options.Request || REQUEST)(opt, function(r2) {
                  if (r2.error === "abort")
                    return;
                  var receive = {
                    options: opt,
                    error: err,
                    statusCode: response && response.statusCode || 0,
                    headers: response && response.headers || {},
                    body: body2
                  };
                  self2.emit("after-receive", receive);
                  err = receive.error;
                  body2 = receive.body;
                  response = {
                    statusCode: receive.statusCode,
                    headers: receive.headers
                  };
                  self2.emit("after-receive", r2);
                  var response = {
                    statusCode: r2.statusCode,
                    statusMessage: r2.statusMessage,
                    headers: r2.headers
                  };
                  var err = r2.error;
                  var body2 = r2.body;
                  var hasReturned;
                  var cb = function cb2(err2, data) {
                    TaskId && self2.off("inner-kill-task", killTask);
                    if (hasReturned)
                      return;
                    hasReturned = true;
                    var attrs = {};
                    response && response.statusCode && (attrs.statusCode = response.statusCode);
                    response && response.headers && (attrs.headers = response.headers);
                    if (err2) {
                      err2 = util.extend(err2 || {}, attrs);
                      callback(err2, null);
                    } else {
                      data = util.extend(data || {}, attrs);
                      callback(null, data);
                    }
                    sender = null;
                  };
                  if (err)
                    return cb(util.error(err));
                  var statusCode = response.statusCode;
                  var statusSuccess = Math.floor(statusCode / 100) === 2;
                  if (rawBody && statusSuccess)
                    return cb(null, {
                      body: body2
                    });
                  var json;
                  try {
                    json = body2 && body2.indexOf("<") > -1 && body2.indexOf(">") > -1 && util.xml2json(body2) || {};
                  } catch (e2) {
                    json = {};
                  }
                  var xmlError = json && json.Error;
                  if (statusSuccess) {
                    cb(null, json);
                  } else if (xmlError) {
                    cb(util.error(new Error(xmlError.Message), {
                      code: xmlError.Code,
                      error: xmlError
                    }));
                  } else if (statusCode) {
                    cb(util.error(new Error(response.statusMessage), {
                      code: "" + statusCode
                    }));
                  } else if (statusCode) {
                    cb(util.error(new Error("statusCode error")));
                  }
                });
                var killTask = function killTask2(data) {
                  if (data.TaskId === TaskId) {
                    sender && sender.abort && sender.abort();
                    self2.off("inner-kill-task", killTask2);
                  }
                };
                TaskId && self2.on("inner-kill-task", killTask);
              }
              var API_MAP = {
                // Bucket 相关方法
                getService,
                // Bucket
                putBucket,
                headBucket,
                // Bucket
                getBucket,
                deleteBucket,
                putBucketAcl,
                // BucketACL
                getBucketAcl,
                putBucketCors,
                // BucketCors
                getBucketCors,
                deleteBucketCors,
                getBucketLocation,
                // BucketLocation
                getBucketPolicy,
                // BucketPolicy
                putBucketPolicy,
                deleteBucketPolicy,
                putBucketTagging,
                // BucketTagging
                getBucketTagging,
                deleteBucketTagging,
                putBucketLifecycle,
                // BucketLifecycle
                getBucketLifecycle,
                deleteBucketLifecycle,
                putBucketVersioning,
                // BucketVersioning
                getBucketVersioning,
                putBucketReplication,
                // BucketReplication
                getBucketReplication,
                deleteBucketReplication,
                putBucketWebsite,
                // BucketWebsite
                getBucketWebsite,
                deleteBucketWebsite,
                putBucketReferer,
                // BucketReferer
                getBucketReferer,
                putBucketDomain,
                // BucketDomain
                getBucketDomain,
                deleteBucketDomain,
                putBucketOrigin,
                // BucketOrigin
                getBucketOrigin,
                deleteBucketOrigin,
                putBucketLogging,
                // BucketLogging
                getBucketLogging,
                putBucketInventory,
                // BucketInventory
                getBucketInventory,
                listBucketInventory,
                deleteBucketInventory,
                putBucketAccelerate,
                getBucketAccelerate,
                putBucketEncryption,
                getBucketEncryption,
                deleteBucketEncryption,
                // Object 相关方法
                getObject,
                headObject,
                listObjectVersions,
                putObject,
                deleteObject,
                getObjectAcl,
                putObjectAcl,
                optionsObject,
                putObjectCopy,
                deleteMultipleObject,
                restoreObject,
                putObjectTagging,
                getObjectTagging,
                deleteObjectTagging,
                selectObjectContent,
                appendObject,
                // 分块上传相关方法
                uploadPartCopy,
                multipartInit,
                multipartUpload,
                multipartComplete,
                multipartList,
                multipartListPart,
                multipartAbort,
                // 工具方法
                request: request2,
                getObjectUrl,
                getAuth
              };
              function warnOldApi(apiName, fn, proto) {
                util.each(["Cors", "Acl"], function(suffix) {
                  if (apiName.slice(-suffix.length) === suffix) {
                    var oldName = apiName.slice(0, -suffix.length) + suffix.toUpperCase();
                    var apiFn = util.apiWrapper(apiName, fn);
                    var warned = false;
                    proto[oldName] = function() {
                      !warned && formatAppLog("warn", "at node_modules/cos-js-sdk-v5/dist/cos-js-sdk-v5.js:12581", "warning: cos." + oldName + " has been deprecated. Please Use cos." + apiName + " instead.");
                      warned = true;
                      apiFn.apply(this, arguments);
                    };
                  }
                });
              }
              module2.exports.init = function(COS2, task) {
                task.transferToTaskMethod(API_MAP, "putObject");
                util.each(API_MAP, function(fn, apiName) {
                  COS2.prototype[apiName] = util.apiWrapper(apiName, fn);
                  warnOldApi(apiName, fn, COS2.prototype);
                });
              };
            }
          ),
          /***/
          "./src/cos.js": (
            /*!********************!*\
              !*** ./src/cos.js ***!
              \********************/
            /*! no static exports found */
            /***/
            function(module2, exports2, __webpack_require__2) {
              var util = __webpack_require__2(
                /*! ./util */
                "./src/util.js"
              );
              var event = __webpack_require__2(
                /*! ./event */
                "./src/event.js"
              );
              var task = __webpack_require__2(
                /*! ./task */
                "./src/task.js"
              );
              var base = __webpack_require__2(
                /*! ./base */
                "./src/base.js"
              );
              var advance = __webpack_require__2(
                /*! ./advance */
                "./src/advance.js"
              );
              var pkg = __webpack_require__2(
                /*! ../package.json */
                "./package.json"
              );
              var defaultOptions = {
                AppId: "",
                // AppId 已废弃，请拼接到 Bucket 后传入，例如：test-1250000000
                SecretId: "",
                SecretKey: "",
                SecurityToken: "",
                // 使用临时密钥需要注意自行刷新 Token
                ChunkRetryTimes: 2,
                FileParallelLimit: 3,
                ChunkParallelLimit: 3,
                ChunkSize: 1024 * 1024,
                SliceSize: 1024 * 1024,
                CopyChunkParallelLimit: 20,
                CopyChunkSize: 1024 * 1024 * 10,
                CopySliceSize: 1024 * 1024 * 10,
                MaxPartNumber: 1e4,
                ProgressInterval: 1e3,
                Domain: "",
                ServiceDomain: "",
                Protocol: "",
                CompatibilityMode: false,
                ForcePathStyle: false,
                UseRawKey: false,
                Timeout: 0,
                // 单位毫秒，0 代表不设置超时时间
                CorrectClockSkew: true,
                SystemClockOffset: 0,
                // 单位毫秒，ms
                UploadCheckContentMd5: false,
                UploadQueueSize: 1e4,
                UploadAddMetaMd5: false,
                UploadIdCacheLimit: 50,
                UseAccelerate: false,
                ForceSignHost: true,
                // 默认将host加入签名计算，关闭后可能导致越权风险，建议保持为true
                EnableTracker: false,
                // 默认关闭上报
                DeepTracker: false,
                // 上报时是否对每个分块上传做单独上报
                TrackerDelay: 5e3,
                // 周期性上报，单位毫秒。0代表实时上报
                CustomId: ""
                // 自定义上报id
              };
              var COS2 = function COS22(options) {
                this.options = util.extend(util.clone(defaultOptions), options || {});
                this.options.FileParallelLimit = Math.max(1, this.options.FileParallelLimit);
                this.options.ChunkParallelLimit = Math.max(1, this.options.ChunkParallelLimit);
                this.options.ChunkRetryTimes = Math.max(0, this.options.ChunkRetryTimes);
                this.options.ChunkSize = Math.max(1024 * 1024, this.options.ChunkSize);
                this.options.CopyChunkParallelLimit = Math.max(1, this.options.CopyChunkParallelLimit);
                this.options.CopyChunkSize = Math.max(1024 * 1024, this.options.CopyChunkSize);
                this.options.CopySliceSize = Math.max(0, this.options.CopySliceSize);
                this.options.MaxPartNumber = Math.max(1024, Math.min(1e4, this.options.MaxPartNumber));
                this.options.Timeout = Math.max(0, this.options.Timeout);
                if (this.options.AppId) {
                  formatAppLog("warn", "at node_modules/cos-js-sdk-v5/dist/cos-js-sdk-v5.js:12679", 'warning: AppId has been deprecated, Please put it at the end of parameter Bucket(E.g: "test-1250000000").');
                }
                if (this.options.SecretId && this.options.SecretId.indexOf(" ") > -1) {
                  formatAppLog("error", "at node_modules/cos-js-sdk-v5/dist/cos-js-sdk-v5.js:12683", "error: SecretId格式错误，请检查");
                  formatAppLog("error", "at node_modules/cos-js-sdk-v5/dist/cos-js-sdk-v5.js:12684", "error: SecretId format is incorrect. Please check");
                }
                if (this.options.SecretKey && this.options.SecretKey.indexOf(" ") > -1) {
                  formatAppLog("error", "at node_modules/cos-js-sdk-v5/dist/cos-js-sdk-v5.js:12688", "error: SecretKey格式错误，请检查");
                  formatAppLog("error", "at node_modules/cos-js-sdk-v5/dist/cos-js-sdk-v5.js:12689", "error: SecretKey format is incorrect. Please check");
                }
                if (util.isNode()) {
                  formatAppLog("warn", "at node_modules/cos-js-sdk-v5/dist/cos-js-sdk-v5.js:12693", "warning: cos-js-sdk-v5 不支持 nodejs 环境使用，请改用 cos-nodejs-sdk-v5，参考文档： https://cloud.tencent.com/document/product/436/8629");
                  formatAppLog("warn", "at node_modules/cos-js-sdk-v5/dist/cos-js-sdk-v5.js:12694", "warning: cos-js-sdk-v5 does not support nodejs environment. Please use cos-nodejs-sdk-v5 instead. See: https://cloud.tencent.com/document/product/436/8629");
                }
                event.init(this);
                task.init(this);
              };
              base.init(COS2, task);
              advance.init(COS2, task);
              COS2.util = {
                md5: util.md5,
                xml2json: util.xml2json,
                json2xml: util.json2xml
              };
              COS2.getAuthorization = util.getAuth;
              COS2.version = pkg.version;
              module2.exports = COS2;
            }
          ),
          /***/
          "./src/event.js": (
            /*!**********************!*\
              !*** ./src/event.js ***!
              \**********************/
            /*! no static exports found */
            /***/
            function(module2, exports2) {
              var initEvent = function initEvent2(cos) {
                var listeners = {};
                var getList = function getList2(action) {
                  !listeners[action] && (listeners[action] = []);
                  return listeners[action];
                };
                cos.on = function(action, callback) {
                  if (action === "task-list-update") {
                    formatAppLog("warn", "at node_modules/cos-js-sdk-v5/dist/cos-js-sdk-v5.js:12731", 'warning: Event "' + action + '" has been deprecated. Please use "list-update" instead.');
                  }
                  getList(action).push(callback);
                };
                cos.off = function(action, callback) {
                  var list = getList(action);
                  for (var i2 = list.length - 1; i2 >= 0; i2--) {
                    callback === list[i2] && list.splice(i2, 1);
                  }
                };
                cos.emit = function(action, data) {
                  var list = getList(action).map(function(cb) {
                    return cb;
                  });
                  for (var i2 = 0; i2 < list.length; i2++) {
                    list[i2](data);
                  }
                };
              };
              var EventProxy = function EventProxy2() {
                initEvent(this);
              };
              module2.exports.init = initEvent;
              module2.exports.EventProxy = EventProxy;
            }
          ),
          /***/
          "./src/session.js": (
            /*!************************!*\
              !*** ./src/session.js ***!
              \************************/
            /*! no static exports found */
            /***/
            function(module2, exports2, __webpack_require__2) {
              var util = __webpack_require__2(
                /*! ./util */
                "./src/util.js"
              );
              var cacheKey = "cos_sdk_upload_cache";
              var expires = 30 * 24 * 3600;
              var cache;
              var timer;
              var getCache = function getCache2() {
                try {
                  var val2 = JSON.parse(localStorage.getItem(cacheKey));
                } catch (e2) {
                }
                if (!val2)
                  val2 = [];
                cache = val2;
              };
              var setCache = function setCache2() {
                try {
                  if (cache.length)
                    localStorage.setItem(cacheKey, JSON.stringify(cache));
                  else
                    localStorage.removeItem(cacheKey);
                } catch (e2) {
                }
              };
              var init = function init2() {
                if (cache)
                  return;
                getCache.call(this);
                var changed = false;
                var now2 = Math.round(Date.now() / 1e3);
                for (var i2 = cache.length - 1; i2 >= 0; i2--) {
                  var mtime = cache[i2][2];
                  if (!mtime || mtime + expires < now2) {
                    cache.splice(i2, 1);
                    changed = true;
                  }
                }
                changed && setCache();
              };
              var save = function save2() {
                if (timer)
                  return;
                timer = setTimeout(function() {
                  setCache();
                  timer = null;
                }, 400);
              };
              var mod = {
                using: {},
                // 标记 UploadId 正在使用
                setUsing: function setUsing(uuid) {
                  mod.using[uuid] = true;
                },
                // 标记 UploadId 已经没在使用
                removeUsing: function removeUsing(uuid) {
                  delete mod.using[uuid];
                },
                // 用上传参数生成哈希值
                getFileId: function getFileId(file, ChunkSize, Bucket, Key) {
                  if (file.name && file.size && file.lastModifiedDate && ChunkSize) {
                    return util.md5([file.name, file.size, file.lastModifiedDate, ChunkSize, Bucket, Key].join("::"));
                  } else {
                    return null;
                  }
                },
                // 用上传参数生成哈希值
                getCopyFileId: function getCopyFileId(copySource, sourceHeaders, ChunkSize, Bucket, Key) {
                  var size = sourceHeaders["content-length"];
                  var etag = sourceHeaders.etag || "";
                  var lastModified = sourceHeaders["last-modified"];
                  if (copySource && ChunkSize) {
                    return util.md5([copySource, size, etag, lastModified, ChunkSize, Bucket, Key].join("::"));
                  } else {
                    return null;
                  }
                },
                // 获取文件对应的 UploadId 列表
                getUploadIdList: function getUploadIdList(uuid) {
                  if (!uuid)
                    return null;
                  init.call(this);
                  var list = [];
                  for (var i2 = 0; i2 < cache.length; i2++) {
                    if (cache[i2][0] === uuid)
                      list.push(cache[i2][1]);
                  }
                  return list.length ? list : null;
                },
                // 缓存 UploadId
                saveUploadId: function saveUploadId(uuid, UploadId, limit) {
                  init.call(this);
                  if (!uuid)
                    return;
                  for (var i2 = cache.length - 1; i2 >= 0; i2--) {
                    var item = cache[i2];
                    if (item[0] === uuid && item[1] === UploadId) {
                      cache.splice(i2, 1);
                    }
                  }
                  cache.unshift([uuid, UploadId, Math.round(Date.now() / 1e3)]);
                  if (cache.length > limit)
                    cache.splice(limit);
                  save();
                },
                // UploadId 已用完，移除掉
                removeUploadId: function removeUploadId(UploadId) {
                  init.call(this);
                  delete mod.using[UploadId];
                  for (var i2 = cache.length - 1; i2 >= 0; i2--) {
                    if (cache[i2][1] === UploadId)
                      cache.splice(i2, 1);
                  }
                  save();
                }
              };
              module2.exports = mod;
            }
          ),
          /***/
          "./src/task.js": (
            /*!*********************!*\
              !*** ./src/task.js ***!
              \*********************/
            /*! no static exports found */
            /***/
            function(module2, exports2, __webpack_require__2) {
              var session = __webpack_require__2(
                /*! ./session */
                "./src/session.js"
              );
              var util = __webpack_require__2(
                /*! ./util */
                "./src/util.js"
              );
              var originApiMap = {};
              var transferToTaskMethod = function transferToTaskMethod2(apiMap, apiName) {
                originApiMap[apiName] = apiMap[apiName];
                apiMap[apiName] = function(params, callback) {
                  if (params.SkipTask) {
                    originApiMap[apiName].call(this, params, callback);
                  } else {
                    this._addTask(apiName, params, callback);
                  }
                };
              };
              var initTask = function initTask2(cos) {
                var queue = [];
                var tasks = {};
                var uploadingFileCount = 0;
                var nextUploadIndex = 0;
                var formatTask = function formatTask2(task) {
                  var t2 = {
                    id: task.id,
                    Bucket: task.Bucket,
                    Region: task.Region,
                    Key: task.Key,
                    FilePath: task.FilePath,
                    state: task.state,
                    loaded: task.loaded,
                    size: task.size,
                    speed: task.speed,
                    percent: task.percent,
                    hashPercent: task.hashPercent,
                    error: task.error
                  };
                  if (task.FilePath)
                    t2.FilePath = task.FilePath;
                  if (task._custom)
                    t2._custom = task._custom;
                  return t2;
                };
                var emitListUpdate = /* @__PURE__ */ function() {
                  var timer;
                  var emit = function emit2() {
                    timer = 0;
                    cos.emit("task-list-update", {
                      list: util.map(queue, formatTask)
                    });
                    cos.emit("list-update", {
                      list: util.map(queue, formatTask)
                    });
                  };
                  return function() {
                    if (!timer)
                      timer = setTimeout(emit);
                  };
                }();
                var clearQueue = function clearQueue2() {
                  if (queue.length <= cos.options.UploadQueueSize)
                    return;
                  for (var i2 = 0; i2 < nextUploadIndex && // 小于当前操作的 index 才清理
                  i2 < queue.length && // 大于队列才清理
                  queue.length > cos.options.UploadQueueSize; ) {
                    var isActive = queue[i2].state === "waiting" || queue[i2].state === "checking" || queue[i2].state === "uploading";
                    if (!queue[i2] || !isActive) {
                      tasks[queue[i2].id] && delete tasks[queue[i2].id];
                      queue.splice(i2, 1);
                      nextUploadIndex--;
                    } else {
                      i2++;
                    }
                  }
                  emitListUpdate();
                };
                var startNextTask = function startNextTask2() {
                  if (uploadingFileCount >= cos.options.FileParallelLimit)
                    return;
                  while (queue[nextUploadIndex] && queue[nextUploadIndex].state !== "waiting") {
                    nextUploadIndex++;
                  }
                  if (nextUploadIndex >= queue.length)
                    return;
                  var task = queue[nextUploadIndex];
                  nextUploadIndex++;
                  uploadingFileCount++;
                  task.state = "checking";
                  task.params.onTaskStart && task.params.onTaskStart(formatTask(task));
                  !task.params.UploadData && (task.params.UploadData = {});
                  var apiParams = util.formatParams(task.api, task.params);
                  originApiMap[task.api].call(cos, apiParams, function(err, data) {
                    if (!cos._isRunningTask(task.id))
                      return;
                    if (task.state === "checking" || task.state === "uploading") {
                      task.state = err ? "error" : "success";
                      err && (task.error = err);
                      uploadingFileCount--;
                      emitListUpdate();
                      startNextTask2();
                      task.callback && task.callback(err, data);
                      if (task.state === "success") {
                        if (task.params) {
                          delete task.params.UploadData;
                          delete task.params.Body;
                          delete task.params;
                        }
                        delete task.callback;
                      }
                    }
                    clearQueue();
                  });
                  emitListUpdate();
                  setTimeout(startNextTask2);
                };
                var killTask = function killTask2(id2, switchToState) {
                  var task = tasks[id2];
                  if (!task)
                    return;
                  var waiting = task && task.state === "waiting";
                  var running = task && (task.state === "checking" || task.state === "uploading");
                  if (switchToState === "canceled" && task.state !== "canceled" || switchToState === "paused" && waiting || switchToState === "paused" && running) {
                    if (switchToState === "paused" && task.params.Body && typeof task.params.Body.pipe === "function") {
                      formatAppLog("error", "at node_modules/cos-js-sdk-v5/dist/cos-js-sdk-v5.js:13044", "stream not support pause");
                      return;
                    }
                    task.state = switchToState;
                    cos.emit("inner-kill-task", {
                      TaskId: id2,
                      toState: switchToState
                    });
                    try {
                      var UploadId = task && task.params && task.params.UploadData.UploadId;
                    } catch (e2) {
                    }
                    if (switchToState === "canceled" && UploadId)
                      session.removeUsing(UploadId);
                    emitListUpdate();
                    if (running) {
                      uploadingFileCount--;
                      startNextTask();
                    }
                    if (switchToState === "canceled") {
                      if (task.params) {
                        delete task.params.UploadData;
                        delete task.params.Body;
                        delete task.params;
                      }
                      delete task.callback;
                    }
                  }
                  clearQueue();
                };
                cos._addTasks = function(taskList) {
                  util.each(taskList, function(task) {
                    cos._addTask(task.api, task.params, task.callback, true);
                  });
                  emitListUpdate();
                };
                var isTaskReadyWarning = true;
                cos._addTask = function(api, params, callback, ignoreAddEvent) {
                  params = util.formatParams(api, params);
                  var id2 = util.uuid();
                  params.TaskId = id2;
                  params.onTaskReady && params.onTaskReady(id2);
                  if (params.TaskReady) {
                    params.TaskReady(id2);
                    isTaskReadyWarning && formatAppLog("warn", "at node_modules/cos-js-sdk-v5/dist/cos-js-sdk-v5.js:13099", 'warning: Param "TaskReady" has been deprecated. Please use "onTaskReady" instead.');
                    isTaskReadyWarning = false;
                  }
                  var task = {
                    // env
                    params,
                    callback,
                    api,
                    index: queue.length,
                    // task
                    id: id2,
                    Bucket: params.Bucket,
                    Region: params.Region,
                    Key: params.Key,
                    FilePath: params.FilePath || "",
                    state: "waiting",
                    loaded: 0,
                    size: 0,
                    speed: 0,
                    percent: 0,
                    hashPercent: 0,
                    error: null,
                    _custom: params._custom
                  };
                  var onHashProgress = params.onHashProgress;
                  params.onHashProgress = function(info) {
                    if (!cos._isRunningTask(task.id))
                      return;
                    task.hashPercent = info.percent;
                    onHashProgress && onHashProgress(info);
                    emitListUpdate();
                  };
                  var onProgress = params.onProgress;
                  params.onProgress = function(info) {
                    if (!cos._isRunningTask(task.id))
                      return;
                    task.state === "checking" && (task.state = "uploading");
                    task.loaded = info.loaded;
                    task.speed = info.speed;
                    task.percent = info.percent;
                    onProgress && onProgress(info);
                    emitListUpdate();
                  };
                  util.getFileSize(api, params, function(err, size) {
                    if (err)
                      return callback(util.error(err));
                    tasks[id2] = task;
                    queue.push(task);
                    task.size = size;
                    !ignoreAddEvent && emitListUpdate();
                    startNextTask();
                    clearQueue();
                  });
                  return id2;
                };
                cos._isRunningTask = function(id2) {
                  var task = tasks[id2];
                  return !!(task && (task.state === "checking" || task.state === "uploading"));
                };
                cos.getTaskList = function() {
                  return util.map(queue, formatTask);
                };
                cos.cancelTask = function(id2) {
                  killTask(id2, "canceled");
                };
                cos.pauseTask = function(id2) {
                  killTask(id2, "paused");
                };
                cos.restartTask = function(id2) {
                  var task = tasks[id2];
                  if (task && (task.state === "paused" || task.state === "error")) {
                    task.state = "waiting";
                    emitListUpdate();
                    nextUploadIndex = Math.min(nextUploadIndex, task.index);
                    startNextTask();
                  }
                };
                cos.isUploadRunning = function() {
                  return uploadingFileCount || nextUploadIndex < queue.length;
                };
              };
              module2.exports.transferToTaskMethod = transferToTaskMethod;
              module2.exports.init = initTask;
            }
          ),
          /***/
          "./src/tracker.js": (
            /*!************************!*\
              !*** ./src/tracker.js ***!
              \************************/
            /*! no static exports found */
            /***/
            function(module2, exports2, __webpack_require__2) {
              var _classCallCheck = __webpack_require__2(
                /*! @babel/runtime/helpers/classCallCheck */
                "./node_modules/@babel/runtime/helpers/classCallCheck.js"
              );
              var _createClass = __webpack_require__2(
                /*! @babel/runtime/helpers/createClass */
                "./node_modules/@babel/runtime/helpers/createClass.js"
              );
              var _typeof2 = __webpack_require__2(
                /*! @babel/runtime/helpers/typeof */
                "./node_modules/@babel/runtime/helpers/typeof.js"
              );
              var pkg = __webpack_require__2(
                /*! ../package.json */
                "./package.json"
              );
              var beacon = null;
              var getBeacon = function getBeacon2(delay) {
                if (!beacon) {
                  var BeaconAction = __webpack_require__2(
                    /*! ../lib/beacon.min */
                    "./lib/beacon.min.js"
                  );
                  beacon = new BeaconAction({
                    appkey: "0AND0VEVB24UBGDU",
                    versionCode: pkg.version,
                    channelID: "js_sdk",
                    //渠道,选填
                    openid: "openid",
                    // 用户id, 选填
                    unionid: "unid",
                    //用户unionid , 类似idfv,选填
                    strictMode: false,
                    //严苛模式开关, 打开严苛模式会主动抛出异常, 上线请务必关闭!!!
                    delay,
                    // 普通事件延迟上报时间(单位毫秒), 默认1000(1秒),选填
                    sessionDuration: 60 * 1e3
                    // session变更的时间间隔, 一个用户持续30分钟(默认值)没有任何上报则算另一次 session,每变更一次session上报一次启动事件(rqd_applaunched),使用毫秒(ms),最小值30秒,选填
                  });
                }
                return beacon;
              };
              var utils = {
                // 生成uid 每个链路对应唯一一条uid
                getUid: function getUid() {
                  var S4 = function S42() {
                    return ((1 + Math.random()) * 65536 | 0).toString(16).substring(1);
                  };
                  return S4() + S4() + "-" + S4() + "-" + S4() + "-" + S4() + "-" + S4() + S4() + S4();
                },
                // 获取网络类型
                getNetType: function getNetType() {
                  if ((typeof navigator === "undefined" ? "undefined" : _typeof2(navigator)) === "object") {
                    var connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
                    return (connection === null || connection === void 0 ? void 0 : connection.type) || (connection === null || connection === void 0 ? void 0 : connection.effectiveType) || "unknown";
                  }
                  return "unknown";
                },
                // 获取pc端操作系统类型
                getOsType: function getOsType() {
                  if ((typeof navigator === "undefined" ? "undefined" : _typeof2(navigator)) !== "object") {
                    return "unknown os";
                  }
                  var agent = navigator.userAgent.toLowerCase();
                  var isMac = /macintosh|mac os x/i.test(navigator.userAgent);
                  if (agent.indexOf("win32") >= 0 || agent.indexOf("wow32") >= 0) {
                    return "win32";
                  }
                  if (agent.indexOf("win64") >= 0 || agent.indexOf("wow64") >= 0) {
                    return "win64";
                  }
                  if (isMac) {
                    return "mac";
                  }
                  return "unknown os";
                },
                isMobile: function isMobile2() {
                  var exp = /(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i;
                  if ((typeof navigator === "undefined" ? "undefined" : _typeof2(navigator)) === "object" && navigator.userAgent.match(exp)) {
                    return true;
                  }
                  return false;
                },
                isAndroid: function isAndroid2() {
                  var exp = /(Android|Adr|Linux)/i;
                  if ((typeof navigator === "undefined" ? "undefined" : _typeof2(navigator)) === "object" && navigator.userAgent.match(exp)) {
                    return true;
                  }
                  return false;
                },
                isIOS: function isIOS2() {
                  var exp = /(iPhone|iPod|iPad|iOS)/i;
                  if ((typeof navigator === "undefined" ? "undefined" : _typeof2(navigator)) === "object" && navigator.userAgent.match(exp)) {
                    return true;
                  }
                  return false;
                },
                isOtherMobile: function isOtherMobile() {
                  return isMobile && !isAndroid && !isIOS;
                },
                // 获取浏览器类型
                getDeviceName: function getDeviceName() {
                  if ((typeof navigator === "undefined" ? "undefined" : _typeof2(navigator)) !== "object") {
                    return "unknown device";
                  }
                  var explorer = navigator.userAgent.toLowerCase();
                  if (explorer.includes("app/tencent_wemeet")) {
                    return "tencent_wemeet";
                  }
                  if (explorer.indexOf("maxthon") >= 0) {
                    var match = explorer.match(/maxthon\/([\d.]+)/);
                    var ver = match && match[1] || "";
                    return "傲游浏览器 ".concat(ver).trim();
                  }
                  if (explorer.indexOf("qqbrowser") >= 0) {
                    var _match = explorer.match(/qqbrowser\/([\d.]+)/);
                    var _ver = _match && _match[1] || "";
                    return "QQ浏览器 ".concat(_ver).trim();
                  }
                  if (explorer.indexOf("se 2.x") >= 0) {
                    return "搜狗浏览器";
                  }
                  if (explorer.indexOf("wxwork") >= 0) {
                    return "微信内置浏览器";
                  }
                  if (explorer.indexOf("msie") >= 0) {
                    var _match2 = explorer.match(/msie ([\d.]+)/);
                    var _ver2 = _match2 && _match2[1] || "";
                    return "IE ".concat(_ver2).trim();
                  }
                  if (explorer.indexOf("firefox") >= 0) {
                    var _match3 = explorer.match(/firefox\/([\d.]+)/);
                    var _ver3 = _match3 && _match3[1] || "";
                    return "Firefox ".concat(_ver3).trim();
                  }
                  if (explorer.indexOf("chrome") >= 0) {
                    var _match4 = explorer.match(/chrome\/([\d.]+)/);
                    var _ver4 = _match4 && _match4[1] || "";
                    return "Chrome ".concat(_ver4).trim();
                  }
                  if (explorer.indexOf("opera") >= 0) {
                    var _match5 = explorer.match(/opera.([\d.]+)/);
                    var _ver5 = _match5 && _match5[1] || "";
                    return "Opera ".concat(_ver5).trim();
                  }
                  if (explorer.indexOf("safari") >= 0) {
                    var _match6 = explorer.match(/version\/([\d.]+)/);
                    var _ver6 = _match6 && _match6[1] || "";
                    return "Safari ".concat(_ver6).trim();
                  }
                  if (explorer.indexOf("edge") >= 0) {
                    var _match7 = explorer.match(/edge\/([\d.]+)/);
                    var _ver7 = _match7 && _match7[1] || "";
                    return "edge ".concat(_ver7).trim();
                  }
                  return explorer.substr(0, 200);
                }
              };
              var constant2 = {
                isMobile: utils.isMobile(),
                isBrowser: !utils.isMobile(),
                mobileOsType: utils.isAndroid() ? "android" : utils.isIOS ? "ios" : "other_mobile",
                pcOsType: utils.getOsType()
              };
              var deviceInfo = {
                // ↓上报项
                deviceType: constant2.isMobile ? "mobile" : constant2.isBrowser ? "browser" : "unknown",
                devicePlatform: constant2.isMobile ? constant2.mobileOsType : constant2.pcOsType,
                deviceName: utils.getDeviceName()
                //浏览器名称
              };
              var sliceUploadMethods = ["multipartInit", "multipartUpload", "multipartComplete", "multipartList", "multipartListPart", "multipartAbort"];
              var uploadApi = ["putObject", "postObject", "appendObject", "sliceUploadFile", "uploadFile", "uploadFiles"].concat(sliceUploadMethods);
              var downloadApi = ["getObject"];
              function getEventCode(apiName) {
                if (uploadApi.includes(apiName)) {
                  return "cos_upload";
                }
                if (downloadApi.includes(apiName)) {
                  return "cos_download";
                }
                return "base_service";
              }
              function camel2underline(key) {
                return key.replace(/([A-Z])/g, "_$1").toLowerCase();
              }
              function formatParams(params) {
                var formattedParams = {};
                var allReporterKeys = ["tracePlatform", "cossdkVersion", "region", "networkType", "host", "accelerate", "requestPath", "size", "httpMd5", "httpSign", "httpFull", "name", "result", "tookTime", "errorNode", "errorCode", "errorMessage", "errorRequestId", "errorStatusCode", "errorServiceName", "errorType", "traceId", "bucket", "appid", "partNumber", "retryTimes", "reqUrl", "customId", "fullError", "deviceType", "devicePlatform", "deviceName"];
                var successKeys = ["tracePlatform", "cossdkVersion", "region", "bucket", "appid", "networkType", "host", "accelerate", "requestPath", "partNumber", "size", "name", "result", "tookTime", "errorRequestId", "retryTimes", "reqUrl", "customId", "deviceType", "devicePlatform", "deviceName"];
                var reporterKeys = params.result === "Success" ? successKeys : allReporterKeys;
                for (var key in params) {
                  if (!reporterKeys.includes(key))
                    continue;
                  var formattedKey = camel2underline(key);
                  formattedParams[formattedKey] = params[key];
                }
                return formattedParams;
              }
              var Tracker = /* @__PURE__ */ function() {
                function Tracker2(opt) {
                  _classCallCheck(this, Tracker2);
                  var parent = opt.parent, traceId = opt.traceId, bucket = opt.bucket, region = opt.region, apiName = opt.apiName, fileKey = opt.fileKey, fileSize = opt.fileSize, accelerate = opt.accelerate, customId = opt.customId, delay = opt.delay, deepTracker = opt.deepTracker;
                  var appid = bucket && bucket.substr(bucket.lastIndexOf("-") + 1) || "";
                  this.parent = parent;
                  this.deepTracker = deepTracker;
                  this.delay = delay;
                  this.params = {
                    // 通用字段
                    cossdkVersion: pkg.version,
                    region,
                    networkType: "",
                    host: "",
                    accelerate: accelerate ? "Y" : "N",
                    requestPath: fileKey || "",
                    size: fileSize || -1,
                    httpMd5: 0,
                    // MD5耗时
                    httpSign: 0,
                    // 计算签名耗时
                    httpFull: 0,
                    // http请求耗时
                    name: apiName || "",
                    result: "",
                    // sdk api调用结果Success、Fail
                    tookTime: 0,
                    // 总耗时
                    errorNode: "",
                    errorCode: "",
                    errorMessage: "",
                    errorRequestId: "",
                    errorStatusCode: 0,
                    errorServiceName: "",
                    // js补充字段
                    tracePlatform: "cos-js-sdk-v5",
                    // 上报平台=js
                    traceId: traceId || utils.getUid(),
                    // 每条上报唯一标识
                    bucket,
                    appid,
                    partNumber: 0,
                    // 分块上传编号
                    retryTimes: 0,
                    // sdk内部发起的请求重试
                    reqUrl: "",
                    // 请求url
                    customId: customId || "",
                    // 业务id
                    deviceType: deviceInfo.deviceType,
                    // 设备类型 移动端浏览器、web浏览器
                    devicePlatform: deviceInfo.devicePlatform,
                    deviceName: deviceInfo.deviceName,
                    md5StartTime: 0,
                    // md5计算开始时间
                    md5EndTime: 0,
                    // md5计算结束时间
                    signStartTime: 0,
                    // 计算签名开始时间
                    signEndTime: 0,
                    // 计算签名结束时间
                    httpStartTime: 0,
                    // 发起网络请求开始时间
                    httpEndTime: 0,
                    // 网路请求结束时间
                    startTime: (/* @__PURE__ */ new Date()).getTime(),
                    // sdk api调用起始时间，不是纯网络耗时
                    endTime: 0
                    //  sdk api调用结束时间，不是纯网络耗时
                  };
                  this.beacon = getBeacon(delay);
                }
                _createClass(Tracker2, [{
                  key: "formatResult",
                  value: function formatResult(err, data) {
                    var _err$error, _err$error2, _err$error3, _err$error4, _err$error5, _err$error6;
                    var now2 = (/* @__PURE__ */ new Date()).getTime();
                    var tookTime = now2 - this.params.startTime;
                    var networkType = utils.getNetType();
                    var errorCode = err ? (err === null || err === void 0 ? void 0 : err.code) || (err === null || err === void 0 ? void 0 : (_err$error = err.error) === null || _err$error === void 0 ? void 0 : _err$error.code) || (err === null || err === void 0 ? void 0 : (_err$error2 = err.error) === null || _err$error2 === void 0 ? void 0 : _err$error2.Code) : "";
                    var errorMessage = err ? (err === null || err === void 0 ? void 0 : err.message) || (err === null || err === void 0 ? void 0 : (_err$error3 = err.error) === null || _err$error3 === void 0 ? void 0 : _err$error3.message) || (err === null || err === void 0 ? void 0 : (_err$error4 = err.error) === null || _err$error4 === void 0 ? void 0 : _err$error4.Message) : "";
                    var errorServiceName = err ? (err === null || err === void 0 ? void 0 : err.resource) || (err === null || err === void 0 ? void 0 : (_err$error5 = err.error) === null || _err$error5 === void 0 ? void 0 : _err$error5.resource) || (err === null || err === void 0 ? void 0 : (_err$error6 = err.error) === null || _err$error6 === void 0 ? void 0 : _err$error6.Resource) : "";
                    var errorStatusCode = err ? err === null || err === void 0 ? void 0 : err.statusCode : data.statusCode;
                    var requestId = err ? (err === null || err === void 0 ? void 0 : err.headers) && (err === null || err === void 0 ? void 0 : err.headers["x-cos-request-id"]) : (data === null || data === void 0 ? void 0 : data.headers) && (data === null || data === void 0 ? void 0 : data.headers["x-cos-request-id"]);
                    var errorType = err ? requestId ? "Server" : "Client" : "";
                    Object.assign(this.params, {
                      tookTime,
                      networkType,
                      httpMd5: this.params.md5EndTime - this.params.md5StartTime,
                      httpSign: this.params.signEndTime - this.params.signStartTime,
                      httpFull: this.params.httpEndTime - this.params.httpStartTime,
                      result: err ? "Fail" : "Success",
                      errorType,
                      errorCode,
                      errorStatusCode,
                      errorMessage,
                      errorServiceName,
                      errorRequestId: requestId
                    });
                    if (err && (!errorCode || !errorMessage)) {
                      this.params.fullError = err ? JSON.stringify(err) : "";
                    }
                    if (this.params.name === "getObject") {
                      this.params.size = data ? data.headers && data.headers["content-length"] : -1;
                    }
                    if (this.params.reqUrl) {
                      try {
                        var execRes = /^http(s)?:\/\/(.*?)\//.exec(this.params.reqUrl);
                        this.params.host = execRes[2];
                      } catch (e2) {
                        this.params.host = this.params.reqUrl;
                      }
                    }
                    this.sendEvents();
                  }
                  // 设置当前链路的参数
                }, {
                  key: "setParams",
                  value: function setParams(params) {
                    Object.assign(this.params, params);
                  }
                  // 使用灯塔延时上报
                }, {
                  key: "sendEvents",
                  value: function sendEvents() {
                    if (sliceUploadMethods.includes(this.params.name) && !this.deepTracker) {
                      return;
                    }
                    var eventCode = getEventCode(this.params.name);
                    var formattedParams = formatParams(this.params);
                    if (!this.beacon) {
                      this.beacon = getBeacon(this.delay || 5e3);
                    }
                    if (this.delay === 0) {
                      this.beacon && this.beacon.onDirectUserAction(eventCode, formattedParams);
                    } else {
                      this.beacon && this.beacon.onUserAction(eventCode, formattedParams);
                    }
                  }
                  // 生成子实例，与父所属一个链路，可用于分块上传内部流程上报单个分块操作
                }, {
                  key: "generateSubTracker",
                  value: function generateSubTracker(subParams) {
                    Object.assign(subParams, {
                      parent: this,
                      deepTracker: this.deepTracker,
                      traceId: this.params.traceId,
                      bucket: this.params.bucket,
                      region: this.params.region,
                      fileKey: this.params.requestPath,
                      customId: this.params.customId,
                      delay: this.delay
                    });
                    return new Tracker2(subParams);
                  }
                }]);
                return Tracker2;
              }();
              module2.exports = Tracker;
            }
          ),
          /***/
          "./src/util.js": (
            /*!*********************!*\
              !*** ./src/util.js ***!
              \*********************/
            /*! no static exports found */
            /***/
            function(module2, exports2, __webpack_require__2) {
              (function(process2) {
                var _typeof2 = __webpack_require__2(
                  /*! @babel/runtime/helpers/typeof */
                  "./node_modules/@babel/runtime/helpers/typeof.js"
                );
                var md5 = __webpack_require__2(
                  /*! ../lib/md5 */
                  "./lib/md5.js"
                );
                var CryptoJS = __webpack_require__2(
                  /*! ../lib/crypto */
                  "./lib/crypto.js"
                );
                var xml2json = __webpack_require__2(
                  /*! ../lib/xml2json */
                  "./lib/xml2json.js"
                );
                var json2xml = __webpack_require__2(
                  /*! ../lib/json2xml */
                  "./lib/json2xml.js"
                );
                var Tracker = __webpack_require__2(
                  /*! ./tracker */
                  "./src/tracker.js"
                );
                function camSafeUrlEncode(str) {
                  return encodeURIComponent(str).replace(/!/g, "%21").replace(/'/g, "%27").replace(/\(/g, "%28").replace(/\)/g, "%29").replace(/\*/g, "%2A");
                }
                function getObjectKeys(obj, forKey) {
                  var list = [];
                  for (var key in obj) {
                    if (obj.hasOwnProperty(key)) {
                      list.push(forKey ? camSafeUrlEncode(key).toLowerCase() : key);
                    }
                  }
                  return list.sort(function(a2, b2) {
                    a2 = a2.toLowerCase();
                    b2 = b2.toLowerCase();
                    return a2 === b2 ? 0 : a2 > b2 ? 1 : -1;
                  });
                }
                var obj2str = function obj2str2(obj, lowerCaseKey) {
                  var i2, key, val2;
                  var list = [];
                  var keyList = getObjectKeys(obj);
                  for (i2 = 0; i2 < keyList.length; i2++) {
                    key = keyList[i2];
                    val2 = obj[key] === void 0 || obj[key] === null ? "" : "" + obj[key];
                    key = lowerCaseKey ? camSafeUrlEncode(key).toLowerCase() : camSafeUrlEncode(key);
                    val2 = camSafeUrlEncode(val2) || "";
                    list.push(key + "=" + val2);
                  }
                  return list.join("&");
                };
                var signHeaders = ["content-disposition", "content-encoding", "content-length", "content-md5", "expect", "host", "if-match", "if-modified-since", "if-none-match", "if-unmodified-since", "origin", "range", "response-cache-control", "response-content-disposition", "response-content-encoding", "response-content-language", "response-content-type", "response-expires", "transfer-encoding", "versionid"];
                var getSignHeaderObj = function getSignHeaderObj2(headers) {
                  var signHeaderObj = {};
                  for (var i2 in headers) {
                    var key = i2.toLowerCase();
                    if (key.indexOf("x-cos-") > -1 || signHeaders.indexOf(key) > -1) {
                      signHeaderObj[i2] = headers[i2];
                    }
                  }
                  return signHeaderObj;
                };
                var getAuth = function getAuth2(opt) {
                  opt = opt || {};
                  var SecretId = opt.SecretId;
                  var SecretKey = opt.SecretKey;
                  var KeyTime = opt.KeyTime;
                  var method2 = (opt.method || opt.Method || "get").toLowerCase();
                  var queryParams2 = clone(opt.Query || opt.params || {});
                  var headers = getSignHeaderObj(clone(opt.Headers || opt.headers || {}));
                  var Key = opt.Key || "";
                  var pathname;
                  if (opt.UseRawKey) {
                    pathname = opt.Pathname || opt.pathname || "/" + Key;
                  } else {
                    pathname = opt.Pathname || opt.pathname || Key;
                    pathname.indexOf("/") !== 0 && (pathname = "/" + pathname);
                  }
                  var forceSignHost = opt.ForceSignHost === false ? false : true;
                  if (!headers.Host && !headers.host && opt.Bucket && opt.Region && forceSignHost)
                    headers.Host = opt.Bucket + ".cos." + opt.Region + ".myqcloud.com";
                  if (!SecretId)
                    throw new Error("missing param SecretId");
                  if (!SecretKey)
                    throw new Error("missing param SecretKey");
                  var now2 = Math.round(getSkewTime(opt.SystemClockOffset) / 1e3) - 1;
                  var exp = now2;
                  var Expires = opt.Expires || opt.expires;
                  if (Expires === void 0) {
                    exp += 900;
                  } else {
                    exp += Expires * 1 || 0;
                  }
                  var qSignAlgorithm = "sha1";
                  var qAk = SecretId;
                  var qSignTime = KeyTime || now2 + ";" + exp;
                  var qKeyTime = KeyTime || now2 + ";" + exp;
                  var qHeaderList = getObjectKeys(headers, true).join(";").toLowerCase();
                  var qUrlParamList = getObjectKeys(queryParams2, true).join(";").toLowerCase();
                  var signKey = CryptoJS.HmacSHA1(qKeyTime, SecretKey).toString();
                  var formatString = [method2, pathname, util.obj2str(queryParams2, true), util.obj2str(headers, true), ""].join("\n");
                  var stringToSign = ["sha1", qSignTime, CryptoJS.SHA1(formatString).toString(), ""].join("\n");
                  var qSignature = CryptoJS.HmacSHA1(stringToSign, signKey).toString();
                  var authorization = ["q-sign-algorithm=" + qSignAlgorithm, "q-ak=" + qAk, "q-sign-time=" + qSignTime, "q-key-time=" + qKeyTime, "q-header-list=" + qHeaderList, "q-url-param-list=" + qUrlParamList, "q-signature=" + qSignature].join("&");
                  return authorization;
                };
                var readIntBE = function readIntBE2(chunk, size, offset) {
                  var bytes = size / 8;
                  var buf = chunk.slice(offset, offset + bytes);
                  new Uint8Array(buf).reverse();
                  return new {
                    8: Uint8Array,
                    16: Uint16Array,
                    32: Uint32Array
                  }[size](buf)[0];
                };
                var buf2str = function buf2str2(chunk, start, end, isUtf8) {
                  var buf = chunk.slice(start, end);
                  var str = "";
                  new Uint8Array(buf).forEach(function(charCode) {
                    str += String.fromCharCode(charCode);
                  });
                  if (isUtf8)
                    str = decodeURIComponent(escape(str));
                  return str;
                };
                var parseSelectPayload = function parseSelectPayload2(chunk) {
                  var header = {};
                  var body = buf2str(chunk);
                  var result = {
                    records: []
                  };
                  while (chunk.byteLength) {
                    var totalLength = readIntBE(chunk, 32, 0);
                    var headerLength = readIntBE(chunk, 32, 4);
                    var payloadRestLength = totalLength - headerLength - 16;
                    var offset = 0;
                    var content;
                    chunk = chunk.slice(12);
                    while (offset < headerLength) {
                      var headerNameLength = readIntBE(chunk, 8, offset);
                      var headerName = buf2str(chunk, offset + 1, offset + 1 + headerNameLength);
                      var headerValueLength = readIntBE(chunk, 16, offset + headerNameLength + 2);
                      var headerValue = buf2str(chunk, offset + headerNameLength + 4, offset + headerNameLength + 4 + headerValueLength);
                      header[headerName] = headerValue;
                      offset += headerNameLength + 4 + headerValueLength;
                    }
                    if (header[":event-type"] === "Records") {
                      content = buf2str(chunk, offset, offset + payloadRestLength, true);
                      result.records.push(content);
                    } else if (header[":event-type"] === "Stats") {
                      content = buf2str(chunk, offset, offset + payloadRestLength, true);
                      result.stats = util.xml2json(content).Stats;
                    } else if (header[":event-type"] === "error") {
                      var errCode = header[":error-code"];
                      var errMessage = header[":error-message"];
                      var err = new Error(errMessage);
                      err.message = errMessage;
                      err.name = err.code = errCode;
                      result.error = err;
                    } else
                      ;
                    chunk = chunk.slice(offset + payloadRestLength + 4);
                  }
                  return {
                    payload: result.records.join(""),
                    body
                  };
                };
                var getSourceParams = function getSourceParams2(source) {
                  var parser2 = this.options.CopySourceParser;
                  if (parser2)
                    return parser2(source);
                  var m2 = source.match(/^([^.]+-\d+)\.cos(v6|-cdc|-cdz|-internal)?\.([^.]+)\.((myqcloud\.com)|(tencentcos\.cn))\/(.+)$/);
                  if (!m2)
                    return null;
                  return {
                    Bucket: m2[1],
                    Region: m2[3],
                    Key: m2[7]
                  };
                };
                var noop2 = function noop22() {
                };
                var clearKey = function clearKey2(obj) {
                  var retObj = {};
                  for (var key in obj) {
                    if (obj.hasOwnProperty(key) && obj[key] !== void 0 && obj[key] !== null) {
                      retObj[key] = obj[key];
                    }
                  }
                  return retObj;
                };
                var readAsBinaryString = function readAsBinaryString2(blob, callback) {
                  var readFun;
                  var fr = new FileReader();
                  if (FileReader.prototype.readAsBinaryString) {
                    readFun = FileReader.prototype.readAsBinaryString;
                    fr.onload = function() {
                      callback(this.result);
                    };
                  } else if (FileReader.prototype.readAsArrayBuffer) {
                    readFun = function readFun2(fileData) {
                      var binary = "";
                      var reader = new FileReader();
                      reader.onload = function(e2) {
                        var bytes = new Uint8Array(reader.result);
                        var length = bytes.byteLength;
                        for (var i2 = 0; i2 < length; i2++) {
                          binary += String.fromCharCode(bytes[i2]);
                        }
                        callback(binary);
                      };
                      reader.readAsArrayBuffer(fileData);
                    };
                  } else {
                    formatAppLog("error", "at node_modules/cos-js-sdk-v5/dist/cos-js-sdk-v5.js:13920", "FileReader not support readAsBinaryString");
                  }
                  readFun.call(fr, blob);
                };
                var fileSliceNeedCopy = function() {
                  var compareVersion = function compareVersion2(a2, b2) {
                    a2 = a2.split(".");
                    b2 = b2.split(".");
                    for (var i2 = 0; i2 < b2.length; i2++) {
                      if (a2[i2] !== b2[i2]) {
                        return parseInt(a2[i2]) > parseInt(b2[i2]) ? 1 : -1;
                      }
                    }
                    return 0;
                  };
                  var check = function check2(ua) {
                    if (!ua)
                      return false;
                    var ChromeVersion = (ua.match(/Chrome\/([.\d]+)/) || [])[1];
                    var QBCoreVersion = (ua.match(/QBCore\/([.\d]+)/) || [])[1];
                    var QQBrowserVersion = (ua.match(/QQBrowser\/([.\d]+)/) || [])[1];
                    var need = ChromeVersion && compareVersion(ChromeVersion, "53.0.2785.116") < 0 && QBCoreVersion && compareVersion(QBCoreVersion, "3.53.991.400") < 0 && QQBrowserVersion && compareVersion(QQBrowserVersion, "9.0.2524.400") <= 0 || false;
                    return need;
                  };
                  return check(typeof navigator !== "undefined" && navigator.userAgent);
                }();
                var fileSlice = function fileSlice2(file, start, end, isUseToUpload, callback) {
                  var blob;
                  if (file.slice) {
                    blob = file.slice(start, end);
                  } else if (file.mozSlice) {
                    blob = file.mozSlice(start, end);
                  } else if (file.webkitSlice) {
                    blob = file.webkitSlice(start, end);
                  }
                  if (isUseToUpload && fileSliceNeedCopy) {
                    var reader = new FileReader();
                    reader.onload = function(e2) {
                      blob = null;
                      callback(new Blob([reader.result]));
                    };
                    reader.readAsArrayBuffer(blob);
                  } else {
                    callback(blob);
                  }
                };
                var getBodyMd5 = function getBodyMd52(UploadCheckContentMd5, Body, callback, onProgress) {
                  callback = callback || noop2;
                  if (UploadCheckContentMd5) {
                    if (typeof Body === "string") {
                      callback(util.md5(Body, true));
                    } else if (Blob && Body instanceof Blob) {
                      util.getFileMd5(Body, function(err, md52) {
                        callback(md52);
                      }, onProgress);
                    } else {
                      callback();
                    }
                  } else {
                    callback();
                  }
                };
                var md5ChunkSize = 1024 * 1024;
                var getFileMd5 = function getFileMd52(blob, callback, onProgress) {
                  var size = blob.size;
                  var loaded = 0;
                  var md5ctx = md5.getCtx();
                  var next = function next2(start) {
                    if (start >= size) {
                      var hash = md5ctx.digest("hex");
                      callback(null, hash);
                      return;
                    }
                    var end = Math.min(size, start + md5ChunkSize);
                    util.fileSlice(blob, start, end, false, function(chunk) {
                      readAsBinaryString(chunk, function(content) {
                        chunk = null;
                        md5ctx = md5ctx.update(content, true);
                        loaded += content.length;
                        content = null;
                        if (onProgress)
                          onProgress({
                            loaded,
                            total: size,
                            percent: Math.round(loaded / size * 1e4) / 1e4
                          });
                        next2(start + md5ChunkSize);
                      });
                    });
                  };
                  next(0);
                };
                function clone(obj) {
                  return map(obj, function(v2) {
                    return _typeof2(v2) === "object" && v2 !== null ? clone(v2) : v2;
                  });
                }
                function attr(obj, name, defaultValue) {
                  return obj && name in obj ? obj[name] : defaultValue;
                }
                function extend(target, source) {
                  each(source, function(val2, key) {
                    target[key] = source[key];
                  });
                  return target;
                }
                function isArray2(arr) {
                  return arr instanceof Array;
                }
                function isInArray(arr, item) {
                  var flag = false;
                  for (var i2 = 0; i2 < arr.length; i2++) {
                    if (item === arr[i2]) {
                      flag = true;
                      break;
                    }
                  }
                  return flag;
                }
                function makeArray(arr) {
                  return isArray2(arr) ? arr : [arr];
                }
                function each(obj, fn) {
                  for (var i2 in obj) {
                    if (obj.hasOwnProperty(i2)) {
                      fn(obj[i2], i2);
                    }
                  }
                }
                function map(obj, fn) {
                  var o2 = isArray2(obj) ? [] : {};
                  for (var i2 in obj) {
                    if (obj.hasOwnProperty(i2)) {
                      o2[i2] = fn(obj[i2], i2);
                    }
                  }
                  return o2;
                }
                function filter(obj, fn) {
                  var iaArr = isArray2(obj);
                  var o2 = iaArr ? [] : {};
                  for (var i2 in obj) {
                    if (obj.hasOwnProperty(i2)) {
                      if (fn(obj[i2], i2)) {
                        if (iaArr) {
                          o2.push(obj[i2]);
                        } else {
                          o2[i2] = obj[i2];
                        }
                      }
                    }
                  }
                  return o2;
                }
                var binaryBase64 = function binaryBase642(str) {
                  var i2, len, char, res2 = "";
                  for (i2 = 0, len = str.length / 2; i2 < len; i2++) {
                    char = parseInt(str[i2 * 2] + str[i2 * 2 + 1], 16);
                    res2 += String.fromCharCode(char);
                  }
                  return btoa(res2);
                };
                var uuid = function uuid2() {
                  var S4 = function S42() {
                    return ((1 + Math.random()) * 65536 | 0).toString(16).substring(1);
                  };
                  return S4() + S4() + "-" + S4() + "-" + S4() + "-" + S4() + "-" + S4() + S4() + S4();
                };
                var hasMissingParams = function hasMissingParams2(apiName, params) {
                  var Bucket = params.Bucket;
                  var Region = params.Region;
                  var Key = params.Key;
                  var Domain = this.options.Domain;
                  var checkBucket = !Domain || typeof Domain === "string" && Domain.indexOf("{Bucket}") > -1;
                  var checkRegion = !Domain || typeof Domain === "string" && Domain.indexOf("{Region}") > -1;
                  if (apiName.indexOf("Bucket") > -1 || apiName === "deleteMultipleObject" || apiName === "multipartList" || apiName === "listObjectVersions") {
                    if (checkBucket && !Bucket)
                      return "Bucket";
                    if (checkRegion && !Region)
                      return "Region";
                  } else if (apiName.indexOf("Object") > -1 || apiName.indexOf("multipart") > -1 || apiName === "sliceUploadFile" || apiName === "abortUploadTask") {
                    if (checkBucket && !Bucket)
                      return "Bucket";
                    if (checkRegion && !Region)
                      return "Region";
                    if (!Key)
                      return "Key";
                  }
                  return false;
                };
                var formatParams = function formatParams2(apiName, params) {
                  params = extend({}, params);
                  if (apiName !== "getAuth" && apiName !== "getV4Auth" && apiName !== "getObjectUrl") {
                    var Headers = params.Headers || {};
                    if (params && _typeof2(params) === "object") {
                      (function() {
                        for (var key in params) {
                          if (params.hasOwnProperty(key) && key.indexOf("x-cos-") > -1) {
                            Headers[key] = params[key];
                          }
                        }
                      })();
                      var headerMap = {
                        // params headers
                        "x-cos-mfa": "MFA",
                        "Content-MD5": "ContentMD5",
                        "Content-Length": "ContentLength",
                        "Content-Type": "ContentType",
                        "Expect": "Expect",
                        "Expires": "Expires",
                        "Cache-Control": "CacheControl",
                        "Content-Disposition": "ContentDisposition",
                        "Content-Encoding": "ContentEncoding",
                        "Range": "Range",
                        "If-Modified-Since": "IfModifiedSince",
                        "If-Unmodified-Since": "IfUnmodifiedSince",
                        "If-Match": "IfMatch",
                        "If-None-Match": "IfNoneMatch",
                        "x-cos-copy-source": "CopySource",
                        "x-cos-copy-source-Range": "CopySourceRange",
                        "x-cos-metadata-directive": "MetadataDirective",
                        "x-cos-copy-source-If-Modified-Since": "CopySourceIfModifiedSince",
                        "x-cos-copy-source-If-Unmodified-Since": "CopySourceIfUnmodifiedSince",
                        "x-cos-copy-source-If-Match": "CopySourceIfMatch",
                        "x-cos-copy-source-If-None-Match": "CopySourceIfNoneMatch",
                        "x-cos-acl": "ACL",
                        "x-cos-grant-read": "GrantRead",
                        "x-cos-grant-write": "GrantWrite",
                        "x-cos-grant-full-control": "GrantFullControl",
                        "x-cos-grant-read-acp": "GrantReadAcp",
                        "x-cos-grant-write-acp": "GrantWriteAcp",
                        "x-cos-storage-class": "StorageClass",
                        "x-cos-traffic-limit": "TrafficLimit",
                        "x-cos-mime-limit": "MimeLimit",
                        // SSE-C
                        "x-cos-server-side-encryption-customer-algorithm": "SSECustomerAlgorithm",
                        "x-cos-server-side-encryption-customer-key": "SSECustomerKey",
                        "x-cos-server-side-encryption-customer-key-MD5": "SSECustomerKeyMD5",
                        // SSE-COS、SSE-KMS
                        "x-cos-server-side-encryption": "ServerSideEncryption",
                        "x-cos-server-side-encryption-cos-kms-key-id": "SSEKMSKeyId",
                        "x-cos-server-side-encryption-context": "SSEContext"
                      };
                      util.each(headerMap, function(paramKey, headerKey) {
                        if (params[paramKey] !== void 0) {
                          Headers[headerKey] = params[paramKey];
                        }
                      });
                      params.Headers = clearKey(Headers);
                    }
                  }
                  return params;
                };
                var apiWrapper = function apiWrapper2(apiName, apiFn) {
                  return function(params, callback) {
                    var self2 = this;
                    if (typeof params === "function") {
                      callback = params;
                      params = {};
                    }
                    params = formatParams(apiName, params);
                    var tracker;
                    if (self2.options.EnableTracker) {
                      if (params.calledBySdk === "sliceUploadFile") {
                        tracker = params.tracker && params.tracker.generateSubTracker({
                          apiName
                        });
                      } else if (["uploadFile", "uploadFiles"].includes(apiName)) {
                        tracker = null;
                      } else {
                        var fileSize = -1;
                        if (params.Body) {
                          fileSize = typeof params.Body === "string" ? params.Body.length : params.Body.size || params.Body.byteLength || -1;
                        }
                        tracker = new Tracker({
                          bucket: params.Bucket,
                          region: params.Region,
                          apiName,
                          fileKey: params.Key,
                          fileSize,
                          deepTracker: self2.options.DeepTracker,
                          customId: self2.options.CustomId,
                          delay: self2.options.TrackerDelay
                        });
                      }
                    }
                    params.tracker = tracker;
                    var formatResult = function formatResult2(result) {
                      if (result && result.headers) {
                        result.headers["x-cos-request-id"] && (result.RequestId = result.headers["x-cos-request-id"]);
                        result.headers["x-ci-request-id"] && (result.RequestId = result.headers["x-ci-request-id"]);
                        result.headers["x-cos-version-id"] && (result.VersionId = result.headers["x-cos-version-id"]);
                        result.headers["x-cos-delete-marker"] && (result.DeleteMarker = result.headers["x-cos-delete-marker"]);
                      }
                      return result;
                    };
                    var _callback = function _callback2(err, data) {
                      tracker && tracker.formatResult(err, data);
                      callback && callback(formatResult(err), formatResult(data));
                    };
                    var checkParams = function checkParams2() {
                      if (apiName !== "getService" && apiName !== "abortUploadTask") {
                        var missingResult = hasMissingParams.call(self2, apiName, params);
                        if (missingResult) {
                          return "missing param " + missingResult;
                        }
                        if (params.Region) {
                          if (self2.options.CompatibilityMode) {
                            if (!/^([a-z\d-.]+)$/.test(params.Region)) {
                              return "Region format error.";
                            }
                          } else {
                            if (params.Region.indexOf("cos.") > -1) {
                              return 'param Region should not be start with "cos."';
                            } else if (!/^([a-z\d-]+)$/.test(params.Region)) {
                              return "Region format error.";
                            }
                          }
                          if (!self2.options.CompatibilityMode && params.Region.indexOf("-") === -1 && params.Region !== "yfb" && params.Region !== "default" && params.Region !== "accelerate") {
                            formatAppLog("warn", "at node_modules/cos-js-sdk-v5/dist/cos-js-sdk-v5.js:14307", "warning: param Region format error, find help here: https://cloud.tencent.com/document/product/436/6224");
                          }
                        }
                        if (params.Bucket) {
                          if (!/^([a-z\d-]+)-(\d+)$/.test(params.Bucket)) {
                            if (params.AppId) {
                              params.Bucket = params.Bucket + "-" + params.AppId;
                            } else if (self2.options.AppId) {
                              params.Bucket = params.Bucket + "-" + self2.options.AppId;
                            } else {
                              return 'Bucket should format as "test-1250000000".';
                            }
                          }
                          if (params.AppId) {
                            formatAppLog("warn", "at node_modules/cos-js-sdk-v5/dist/cos-js-sdk-v5.js:14324", 'warning: AppId has been deprecated, Please put it at the end of parameter Bucket(E.g Bucket:"test-1250000000" ).');
                            delete params.AppId;
                          }
                        }
                        if (!self2.options.UseRawKey && params.Key && params.Key.substr(0, 1) === "/") {
                          params.Key = params.Key.substr(1);
                        }
                      }
                    };
                    var errMsg = checkParams();
                    var isSync = ["getAuth", "getObjectUrl"].includes(apiName);
                    if (typeof Promise === "function" && !isSync && !callback) {
                      return new Promise(function(resolve, reject) {
                        callback = function callback2(err, data) {
                          err ? reject(err) : resolve(data);
                        };
                        if (errMsg)
                          return _callback(util.error(new Error(errMsg)));
                        apiFn.call(self2, params, _callback);
                      });
                    } else {
                      if (errMsg)
                        return _callback(util.error(new Error(errMsg)));
                      var res2 = apiFn.call(self2, params, _callback);
                      if (isSync)
                        return res2;
                    }
                  };
                };
                var throttleOnProgress = function throttleOnProgress2(total, onProgress) {
                  var self2 = this;
                  var size0 = 0;
                  var size1 = 0;
                  var time0 = Date.now();
                  var time1;
                  var timer;
                  function update() {
                    timer = 0;
                    if (onProgress && typeof onProgress === "function") {
                      time1 = Date.now();
                      var speed = Math.max(0, Math.round((size1 - size0) / ((time1 - time0) / 1e3) * 100) / 100) || 0;
                      var percent;
                      if (size1 === 0 && total === 0) {
                        percent = 1;
                      } else {
                        percent = Math.floor(size1 / total * 100) / 100 || 0;
                      }
                      time0 = time1;
                      size0 = size1;
                      try {
                        onProgress({
                          loaded: size1,
                          total,
                          speed,
                          percent
                        });
                      } catch (e2) {
                      }
                    }
                  }
                  return function(info, immediately) {
                    if (info) {
                      size1 = info.loaded;
                      total = info.total;
                    }
                    if (immediately) {
                      clearTimeout(timer);
                      update();
                    } else {
                      if (timer)
                        return;
                      timer = setTimeout(update, self2.options.ProgressInterval);
                    }
                  };
                };
                var getFileSize = function getFileSize2(api, params, callback) {
                  var size;
                  if (typeof params.Body === "string") {
                    params.Body = new Blob([params.Body], {
                      type: "text/plain"
                    });
                  } else if (params.Body instanceof ArrayBuffer) {
                    params.Body = new Blob([params.Body]);
                  }
                  if (params.Body && (params.Body instanceof Blob || params.Body.toString() === "[object File]" || params.Body.toString() === "[object Blob]")) {
                    size = params.Body.size;
                  } else {
                    callback(util.error(new Error("params body format error, Only allow File|Blob|String.")));
                    return;
                  }
                  params.ContentLength = size;
                  callback(null, size);
                };
                var getSkewTime = function getSkewTime2(offset) {
                  return Date.now() + (offset || 0);
                };
                var error = function error2(err, opt) {
                  var sourceErr = err;
                  err.message = err.message || null;
                  if (typeof opt === "string") {
                    err.error = opt;
                    err.message = opt;
                  } else if (_typeof2(opt) === "object" && opt !== null) {
                    extend(err, opt);
                    if (opt.code || opt.name)
                      err.code = opt.code || opt.name;
                    if (opt.message)
                      err.message = opt.message;
                    if (opt.stack)
                      err.stack = opt.stack;
                  }
                  if (typeof Object.defineProperty === "function") {
                    Object.defineProperty(err, "name", {
                      writable: true,
                      enumerable: false
                    });
                    Object.defineProperty(err, "message", {
                      enumerable: true
                    });
                  }
                  err.name = opt && opt.name || err.name || err.code || "Error";
                  if (!err.code)
                    err.code = err.name;
                  if (!err.error)
                    err.error = clone(sourceErr);
                  return err;
                };
                var isWebWorker = function isWebWorker2() {
                  return (typeof globalThis === "undefined" ? "undefined" : _typeof2(globalThis)) === "object" && (globalThis.constructor.name === "DedicatedWorkerGlobalScope" || globalThis.FileReaderSync);
                };
                var isNode = function isNode2() {
                  return (typeof window === "undefined" ? "undefined" : _typeof2(window)) !== "object" && (typeof process2 === "undefined" ? "undefined" : _typeof2(process2)) === "object" && true && !isWebWorker();
                };
                var isCIHost = function isCIHost2(url2) {
                  return /^https?:\/\/([^/]+\.)?ci\.[^/]+/.test(url2);
                };
                var isIOS2 = function() {
                  if ((typeof navigator === "undefined" ? "undefined" : _typeof2(navigator)) !== "object") {
                    return false;
                  }
                  var u2 = navigator.userAgent;
                  var isIOS3 = !!u2.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);
                  return isIOS3;
                }();
                var isQQ = function() {
                  if ((typeof navigator === "undefined" ? "undefined" : _typeof2(navigator)) !== "object") {
                    return false;
                  }
                  return /\sQQ/i.test(navigator.userAgent);
                }();
                var util = {
                  noop: noop2,
                  formatParams,
                  apiWrapper,
                  xml2json,
                  json2xml,
                  md5,
                  clearKey,
                  fileSlice,
                  getBodyMd5,
                  getFileMd5,
                  binaryBase64,
                  extend,
                  isArray: isArray2,
                  isInArray,
                  makeArray,
                  each,
                  map,
                  filter,
                  clone,
                  attr,
                  uuid,
                  camSafeUrlEncode,
                  throttleOnProgress,
                  getFileSize,
                  getSkewTime,
                  error,
                  obj2str,
                  getAuth,
                  parseSelectPayload,
                  getSourceParams,
                  isBrowser: true,
                  isNode,
                  isCIHost,
                  isIOS_QQ: isIOS2 && isQQ
                };
                module2.exports = util;
              }).call(this, __webpack_require__2(
                /*! ./../node_modules/process/browser.js */
                "./node_modules/process/browser.js"
              ));
            }
          )
          /******/
        })
      );
    });
  })(cosJsSdkV5);
  var cosJsSdkV5Exports = cosJsSdkV5.exports;
  const COS = /* @__PURE__ */ getDefaultExportFromCjs(cosJsSdkV5Exports);
  const getConsultantList = (params, config2 = {}) => http$1.post("/api/consultant/consultant/getConsultantList", params, config2);
  const getCommentInfo$1 = (params, config2 = {}) => http$1.get(`/api/consultant/consultant/commentInfo?id=${params.id}`, params, config2);
  const getCommentList$1 = (params, config2 = {}) => http$1.get("/api/consultant/consultant/commentList", params, config2);
  const getServiceExperienceCon = (params, config2 = {}) => http$1.get(`/api/consultant/consultant/serviceExperience?id=${params.id}`, params, config2);
  const getConsultantById = (params, config2 = {}) => http$1.post("/api/consultant/consultant/getConsultantById", params, config2);
  const registerConsultantStep1 = (params, config2 = {}) => http$1.post("/api/consultant/consultant/step1", params, config2);
  const registerConsultantStep2 = (params, config2 = {}) => http$1.post("/api/consultant/consultant/step2", params, config2);
  const registerConsultantStep3 = (params, config2 = {}) => http$1.post("/api/consultant/consultant/step3", params, config2);
  const getConsultantByUserId = (params, config2 = {}) => http$1.post("/api/consultant/consultant/getConsultantByUserId", params, config2);
  const consultMenus = (params, config2 = {}) => http$1.get("api/consultant/consultant/menu");
  const tencentSigIm = (params, config2 = {}) => http$1.post("/api/tencent/sig/im", params, config2);
  const tencentSigTrtc = (params, config2 = {}) => http$1.post("/api/tencent/sig/trtc", params, config2);
  const checkPolicy = (params, config2 = {}) => http$1.post("/api/chat/policy/check", params, config2);
  const postAdminList = (params, config2 = {}) => http$1.post("/exam/api/sys/user-admin/paging", params, config2);
  const CONFIG = {
    SDKAPPID: 1600116083,
    // 腾讯云IM应用ID
    MSG_PAGE_SIZE: 20,
    // 历史消息每页条数
    VOICE_TIME_MAX: 60,
    // 语音最长录制秒数
    VOICE_FORMAT: "mp3"
    // 语音格式
  };
  const TIM_CONST = {
    EVENT: {
      MESSAGE_RECEIVED: "MESSAGE_RECEIVED",
      SDK_READY: "SDK_READY",
      SDK_NOT_READY: "SDK_NOT_READY",
      KICKED_OUT: "KICKED_OUT",
      NET_STATE_CHANGE: "NET_STATE_CHANGE"
    },
    CONV_C2C: "C2C",
    // 单聊会话类型
    MSG_TYPE: {
      TEXT: "TIMTextElem",
      IMAGE: "TIMImageElem",
      VOICE: "TIMSoundElem"
    }
  };
  const showToast$1 = (title) => uni.showToast({ title, icon: "none", duration: 2e3 });
  class TencentIm {
    constructor() {
      this.timInstance = null;
      this.callKitInstance = null;
      this.imStatus = { isLogin: false, userId: "", userSig: "", trtcSig: "" };
      this.chatCache = { currentToUserId: "", messageList: [], lastMsgSeq: "" };
      this.initIM();
      this.initTUICallKit();
    }
    /**
     * 初始化腾讯云IM SDK ✅ 标准tim-js-sdk初始化方式 + COS依赖配置
     */
    initIM() {
      try {
        this.timInstance = TIM.create({
          SDKAppID: CONFIG.SDKAPPID
        });
        if (!this.timInstance) {
          showToast$1("IM实例初始化失败");
          return;
        }
        this.timInstance.registerPlugin({ "cos-js-sdk": COS });
        this.timInstance.setLogLevel(1);
        this.registerImEvent();
      } catch (err) {
        formatAppLog("error", "at utils/imSdk.js:75", "IM初始化异常:", err);
        showToast$1("IM初始化异常，请重试");
      }
    }
    /**
     * 初始化TUICallKit音视频插件 (不变)
     */
    initTUICallKit() {
      try {
        this.callKitInstance = uni.requirePlugin("TencentCloud-TUICallKit");
        if (!this.callKitInstance) {
          showToast$1("音视频插件加载失败");
          return;
        }
        this.callKitInstance.init({
          SDKAppID: CONFIG.SDKAPPID,
          timInstance: this.timInstance
        });
      } catch (err) {
        formatAppLog("error", "at utils/imSdk.js:96", "音视频插件初始化异常:", err);
      }
    }
    /**
     * 注册IM全局事件监听 ✅ 无任何undefined风险
     */
    registerImEvent() {
      if (!this.timInstance)
        return;
      const { EVENT } = TIM_CONST;
      this.timInstance.on(EVENT.MESSAGE_RECEIVED, (event) => {
        const newMsgList = event.data || [];
        if (newMsgList.length === 0)
          return;
        this.handleNewMessage(newMsgList);
        uni.$emit("im_message_received", newMsgList);
      });
      this.timInstance.on(EVENT.SDK_READY, () => {
        this.imStatus.isLogin = true;
        uni.$emit("im_login_success");
      });
      this.timInstance.on(EVENT.SDK_NOT_READY, () => {
        this.imStatus.isLogin = false;
        uni.$emit("im_login_fail");
      });
      this.timInstance.on(EVENT.KICKED_OUT, () => {
        showToast$1("你的账号已在其他设备登录");
        this.loginOutIm();
        uni.$emit("im_kicked_out");
      });
      this.timInstance.on(EVENT.NET_STATE_CHANGE, (event) => {
        if (event.data.state === "DISCONNECTED") {
          showToast$1("网络断开，消息将暂存本地");
        }
      });
    }
    /**
     * 用户登录成功后 登录IM【核心入口】
     * @param {String} userId 用户ID
     * @returns {Promise<Boolean>}
     */
    async loginIm(userId) {
      if (!userId) {
        showToast$1("用户ID不能为空");
        return false;
      }
      if (this.imStatus.isLogin && this.imStatus.userId === userId)
        return true;
      if (!this.timInstance) {
        showToast$1("IM未初始化");
        return false;
      }
      try {
        const { data: imSigData } = await tencentSigIm({ userId });
        if (!(imSigData == null ? void 0 : imSigData.userSig)) {
          showToast$1("IM签名获取失败");
          return false;
        }
        this.imStatus.userId = userId;
        this.imStatus.userSig = imSigData.userSig;
        await this.timInstance.login({ userID: userId, userSig: imSigData.userSig });
        this.imStatus.isLogin = true;
        return true;
      } catch (err) {
        this.imStatus.isLogin = false;
        formatAppLog("error", "at utils/imSdk.js:163", "IM登录失败:", err);
        showToast$1(`IM登录失败：${err.message || "签名异常"}`);
        return false;
      }
    }
    /**
     * 拉取历史聊天记录【分页加载】
     * @param {String} toUserId 对方用户ID
     * @param {Boolean} isLoadMore 是否加载更多
     * @returns {Promise<Array>}
     */
    async getHistoryMessage(toUserId, isLoadMore = false) {
      if (!this.imStatus.isLogin || !toUserId || !this.timInstance)
        return [];
      this.chatCache.currentToUserId = toUserId;
      try {
        const reqParams = {
          conversationID: `C2C${toUserId}`,
          count: CONFIG.MSG_PAGE_SIZE,
          nextReqMessageID: isLoadMore ? this.chatCache.lastMsgSeq : ""
        };
        const { data } = await this.timInstance.getMessageList(reqParams);
        this.chatCache.lastMsgSeq = data.nextReqMessageID || "";
        const formatMsg = this.formatMessage(data.messageList || []);
        this.chatCache.messageList = isLoadMore ? [...this.chatCache.messageList, ...formatMsg] : formatMsg;
        return this.chatCache.messageList;
      } catch (err) {
        formatAppLog("error", "at utils/imSdk.js:191", "拉取历史消息失败:", err);
        showToast$1("历史消息加载失败");
        return [];
      }
    }
    /**
     * 发送消息前置校验【必调】- 你的接口完整适配
     * @param {String} content 消息内容
     * @param {String} toUserId 对方ID
     * @returns {Promise<Boolean>}
     */
    async checkSendPolicy(content, toUserId) {
      const params = {
        content,
        expireSeconds: 0,
        fromUserId: this.imStatus.userId,
        ordered: true,
        toUserId
      };
      try {
        const { data } = await checkPolicy(params);
        if (data == null ? void 0 : data.allowed)
          return true;
        const tipMap = {
          SENSITIVE: "消息包含敏感词，禁止发送",
          FREE_LIMIT: "未下单，消息发送次数已达上限",
          RATE_LIMIT: "发送频率过高，请稍后再试",
          COMPLAINT_RESTRICT: "你已被投诉，暂时禁止发送消息",
          BANNED: "账号已被封禁，无法发送消息"
        };
        const tipText = tipMap[data.limitType] || data.message || "发送权限校验失败";
        showToast$1(tipText);
        return false;
      } catch (err) {
        formatAppLog("error", "at utils/imSdk.js:225", "发送校验失败:", err);
        showToast$1("发送校验失败，请重试");
        return false;
      }
    }
    /**
     * 发送文字消息 ✅ 带校验
     */
    async sendTextMsg(text, toUserId) {
      const trimText = text.trim();
      if (!trimText || !toUserId) {
        showToast$1("消息内容不能为空");
        return false;
      }
      const isAllow = await this.checkSendPolicy(trimText, toUserId);
      if (!isAllow)
        return false;
      try {
        const message2 = this.timInstance.createTextMessage({
          to: toUserId,
          conversationType: TIM_CONST.CONV_C2C,
          payload: { text: trimText }
        });
        await this.timInstance.sendMessage(message2);
        return true;
      } catch (err) {
        formatAppLog("error", "at utils/imSdk.js:249", "文字消息发送失败:", err);
        showToast$1("文字消息发送失败");
        return false;
      }
    }
    /**
     * 发送图片消息 ✅ 带校验 + 自动上传COS
     */
    async sendImageMsg(toUserId) {
      if (!toUserId) {
        showToast$1("参数异常");
        return false;
      }
      const isAllow = await this.checkSendPolicy("图片消息", toUserId);
      if (!isAllow)
        return false;
      try {
        const { tempFiles } = await uni.chooseImage({
          count: 1,
          sizeType: ["compressed"],
          sourceType: ["album", "camera"]
        });
        formatAppLog("log", "at utils/imSdk.js:269", tempFiles);
        if (!tempFiles.length)
          return false;
        const message2 = this.timInstance.createImageMessage({
          to: toUserId,
          conversationType: TIM_CONST.CONV_C2C,
          payload: { file: tempFiles[0] }
        });
        await this.timInstance.sendMessage(message2);
        return true;
      } catch (err) {
        formatAppLog("error", "at utils/imSdk.js:280", "图片消息发送失败:", err);
        showToast$1("图片发送失败");
        return false;
      }
    }
    /**
     * 发送语音消息 ✅ 带校验 + 完整录音逻辑
     */
    async sendVoiceMsg(toUserId) {
      if (!toUserId) {
        showToast$1("参数异常");
        return false;
      }
      const isAllow = await this.checkSendPolicy("语音消息", toUserId);
      if (!isAllow)
        return false;
      return new Promise((resolve) => {
        const recorderManager = uni.getRecorderManager();
        recorderManager.start({
          duration: CONFIG.VOICE_TIME_MAX * 1e3,
          format: CONFIG.VOICE_FORMAT,
          sampleRate: 16e3,
          numberOfChannels: 1
        });
        recorderManager.onStop(async (res2) => {
          try {
            const message2 = this.timInstance.createSoundMessage({
              to: toUserId,
              conversationType: TIM_CONST.CONV_C2C,
              payload: { file: res2 }
            });
            await this.timInstance.sendMessage(message2);
            showToast$1("语音发送成功");
            resolve(true);
          } catch (err) {
            formatAppLog("error", "at utils/imSdk.js:314", "语音消息发送失败:", err);
            showToast$1("语音发送失败");
            resolve(false);
          }
        });
        recorderManager.onError(() => {
          showToast$1("录音失败，请重试");
          resolve(false);
        });
        uni.$once("im_voice_stop", () => recorderManager.stop());
      });
    }
    /**
     * 发起音视频通话 ✅ TUICallKit完整集成
     * @param {String} toUserId 对方ID
     * @param {Boolean} isVideo true=视频 false=语音
     */
    async callUser(toUserId, isVideo = false) {
      if (!this.imStatus.isLogin || !toUserId || !this.callKitInstance) {
        showToast$1("请先完成IM登录");
        return false;
      }
      try {
        const { data: trtcData } = await tencentSigTrtc({ userId: this.imStatus.userId });
        if (!(trtcData == null ? void 0 : trtcData.userSig)) {
          showToast$1("音视频签名获取失败");
          return false;
        }
        this.imStatus.trtcSig = trtcData.userSig;
        this.callKitInstance.call({
          userID: toUserId,
          type: isVideo ? 2 : 1,
          userSig: this.imStatus.trtcSig
        });
        return true;
      } catch (err) {
        formatAppLog("error", "at utils/imSdk.js:352", "发起通话失败:", err);
        showToast$1("通话发起失败，请重试");
        return false;
      }
    }
    /**
     * ✅ 新增：对外暴露TIM实例的【推荐方法】- 最稳妥，统一入口
     */
    getTimInstance() {
      return this.timInstance;
    }
    /**
     * ✅ 新增：对外暴露TUICallKit实例
     */
    getCallKitInstance() {
      return this.callKitInstance;
    }
    /**
     * 消息格式化处理
     */
    formatMessage(msgList) {
      if (!msgList.length)
        return [];
      return msgList.reverse().map((item) => ({
        ...item,
        isSelf: item.from === this.imStatus.userId,
        time: this.formatMsgTime(item.time)
      }));
    }
    /**
     * 处理实时接收的新消息
     */
    handleNewMessage(newMsgList) {
      const formatMsg = this.formatMessage(newMsgList);
      this.chatCache.messageList.push(...formatMsg);
    }
    /**
     * 格式化消息时间
     */
    formatMsgTime(timestamp) {
      const date2 = new Date(timestamp * 1e3);
      return `${date2.getHours().toString().padStart(2, 0)}:${date2.getMinutes().toString().padStart(2, 0)}`;
    }
    /**
     * 退出IM登录
     */
    async loginOutIm() {
      if (this.timInstance && this.imStatus.isLogin) {
        await this.timInstance.logout();
      }
      this.imStatus.isLogin = false;
      this.imStatus.userId = "";
      this.imStatus.userSig = "";
      this.chatCache.messageList = [];
      this.chatCache.lastMsgSeq = "";
      uni.$emit("im_logout");
    }
    // 暴露状态和缓存
    getImStatus() {
      return { ...this.imStatus };
    }
    getChatCache() {
      return { ...this.chatCache };
    }
  }
  let TencentImSdk = null;
  try {
    TencentImSdk = new TencentIm();
  } catch (err) {
    formatAppLog("error", "at utils/imSdk.js:425", "IM单例初始化失败:", err);
    TencentImSdk = {
      loginIm: () => {
        showToast$1("IM初始化异常");
        return false;
      },
      getHistoryMessage: () => [],
      sendTextMsg: () => false,
      sendImageMsg: () => false,
      sendVoiceMsg: () => false,
      callUser: () => false,
      loginOutIm: () => {
      },
      getTimInstance: () => null,
      timInstance: null
    };
  }
  const _imports_0$t = "/static/login/bg-top.png";
  const _imports_1$i = "/static/login/logo.png";
  const _imports_2$9 = "/static/login/code-active.png";
  const _imports_3$6 = "/static/login/code.png";
  const _imports_4$6 = "/static/login/psd-active.png";
  const _imports_5$3 = "/static/login/psd.png";
  const _imports_6$2 = "/static/login/wechat.png";
  const _export_sfc = (sfc, props) => {
    const target = sfc.__vccOpts || sfc;
    for (const [key, val2] of props) {
      target[key] = val2;
    }
    return target;
  };
  const _sfc_main$2d = {
    __name: "login",
    setup(__props, { expose: __expose }) {
      __expose();
      const store = useGlobalDataStore();
      let type = vue.ref(1);
      const state = vue.ref({
        userName: "",
        password: "",
        code: ""
      });
      const gotoPrivacy = (type2) => {
        uni.navigateTo({
          url: `/pages/webview/webview?type=${type2}`
        });
      };
      const changeLoginTypeFn = (val2) => {
        type.value = val2;
      };
      const loginFn = async () => {
        if (type.value == 1) {
          if (!state.value.userName || !state.value.code)
            return uni.showToast({ title: `请输入账号或验证码`, icon: "error" });
        }
        if (type.value == 2) {
          if (!state.value.userName || !state.value.password)
            return uni.showToast({ title: `请输入账号或密码`, icon: "error" });
        }
        try {
          const api = type.value == 1 ? smsLogin : login;
          const { data } = await api(state.value);
          uni.setStorageSync("token", data.token);
          store.setToken(data.token);
          uni.setStorageSync("currentUser", data);
          getMallSwitchApi();
          uni.switchTab({
            url: "/pages/index/index"
          });
          const isImLogin = await TencentImSdk.loginIm(data.id);
        } catch (error) {
          formatAppLog("log", "at pages/login/login.vue:139", error);
        }
      };
      const getMallSwitchApi = async () => {
        try {
          const { data } = await getMallSwitch();
          uni.setStorageSync("mallSwitch", data);
          store.setMallSwitch(data);
        } catch (error) {
          formatAppLog("log", "at pages/login/login.vue:149", error);
        }
      };
      const gotoRegister = () => {
        uni.navigateTo({
          url: "/pages/register/register"
        });
      };
      const userInfo = vue.ref(null);
      const wxAppLogin = async () => {
        try {
          const loginRes = await uni.login({
            provider: "weixin"
          });
          const infoRes = await uni.getUserInfo({
            provider: "weixin"
          });
          userInfo.value = {
            ...infoRes.userInfo,
            openid: infoRes.userInfo.openId,
            unionid: infoRes.userInfo.unionId
          };
          const res2 = await login({
            openid: userInfo.value.openid,
            logintype: "wxApp"
          });
          if (res2.success) {
            uni.setStorageSync("token", res2.data.token);
            uni.setStorageSync("currentUser", res2.data);
            let user = res2.data;
            getMallSwitchApi();
            uni.switchTab({
              url: "/pages/index/index"
            });
          } else {
            uni.navigateTo({
              url: `../wx-bind/wx-bind?userInfo=${JSON.stringify(userInfo.value)}`
            });
          }
        } catch (error) {
          formatAppLog("error", "at pages/login/login.vue:204", "Login failed:", error);
        }
      };
      const onSendSms = async () => {
        if (disabled.value)
          return;
        let res2 = await sendSms({
          phone: state.value.userName,
          type: 1
        });
        if (res2.code == 0) {
          getCurrentDown();
        }
        formatAppLog("log", "at pages/login/login.vue:222", res2);
      };
      const disabled = vue.ref(false);
      const btnText = vue.ref("获取验证码");
      const second = vue.ref(60);
      const getCurrentDown = () => {
        disabled.value = true;
        var interval = setInterval(() => {
          btnText.value = second.value + "s 重新获取";
          second.value--;
          if (second.value == 0) {
            clearInterval(interval);
            second.value = 60;
            btnText.value = "获取验证码";
            disabled.value = false;
          }
        }, 1e3);
      };
      const __returned__ = { store, get type() {
        return type;
      }, set type(v2) {
        type = v2;
      }, state, gotoPrivacy, changeLoginTypeFn, loginFn, getMallSwitchApi, gotoRegister, userInfo, wxAppLogin, onSendSms, disabled, btnText, second, getCurrentDown, get login() {
        return login;
      }, get sendSms() {
        return sendSms;
      }, get smsLogin() {
        return smsLogin;
      }, get getMallSwitch() {
        return getMallSwitch;
      }, get useGlobalDataStore() {
        return useGlobalDataStore;
      }, get TencentImSdk() {
        return TencentImSdk;
      }, ref: vue.ref };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$2c(_ctx, _cache, $props, $setup, $data, $options) {
    return vue.openBlock(), vue.createElementBlock("view", { class: "login-box" }, [
      vue.createElementVNode("view", { class: "login-bg" }, [
        vue.createElementVNode("view", { class: "bg-top" }, [
          vue.createElementVNode("image", {
            src: _imports_0$t,
            class: "image"
          })
        ]),
        vue.createElementVNode("view", { class: "bg-top-content" }, [
          vue.createElementVNode("image", {
            src: _imports_1$i,
            class: "logo"
          }),
          vue.createElementVNode("view", { class: "welcome" }, [
            vue.createElementVNode("text", null, "欢迎来到"),
            vue.createTextVNode(),
            vue.createElementVNode("text", { class: "txt" }, "「麦苗倾诉」")
          ]),
          vue.createElementVNode("view", { class: "msg" }, "欢迎登录麦苗App")
        ])
      ]),
      vue.createElementVNode("view", { class: "login-area" }, [
        vue.createElementVNode("view", { class: "change-login-type" }, [
          vue.createElementVNode("view", {
            class: "phone-type login-type",
            onClick: _cache[0] || (_cache[0] = ($event) => $setup.changeLoginTypeFn(1))
          }, [
            $setup.type == 1 ? (vue.openBlock(), vue.createElementBlock("image", {
              key: 0,
              src: _imports_2$9,
              class: "image"
            })) : (vue.openBlock(), vue.createElementBlock("image", {
              key: 1,
              src: _imports_3$6,
              class: "image"
            })),
            vue.createElementVNode(
              "text",
              {
                class: vue.normalizeClass(["login-msg", $setup.type == 1 ? "active" : ""])
              },
              "手机快速登录",
              2
              /* CLASS */
            )
          ]),
          vue.createElementVNode("view", {
            class: "code-type login-type",
            onClick: _cache[1] || (_cache[1] = ($event) => $setup.changeLoginTypeFn(2))
          }, [
            $setup.type == 2 ? (vue.openBlock(), vue.createElementBlock("image", {
              key: 0,
              src: _imports_4$6,
              class: "image"
            })) : (vue.openBlock(), vue.createElementBlock("image", {
              key: 1,
              src: _imports_5$3,
              class: "image"
            })),
            vue.createElementVNode(
              "text",
              {
                class: vue.normalizeClass(["login-msg", $setup.type == 2 ? "active" : ""])
              },
              "账号密码登录",
              2
              /* CLASS */
            )
          ])
        ]),
        vue.createElementVNode("view", { class: "login-content" }, [
          vue.createElementVNode("view", { class: "phone" }, [
            vue.withDirectives(vue.createElementVNode(
              "input",
              {
                class: "uni-input",
                type: "number",
                "onUpdate:modelValue": _cache[2] || (_cache[2] = ($event) => $setup.state.userName = $event),
                placeholder: "请输入手机号",
                "placeholder-class": "msg",
                maxlength: "11"
              },
              null,
              512
              /* NEED_PATCH */
            ), [
              [vue.vModelText, $setup.state.userName]
            ])
          ]),
          $setup.type == 1 ? (vue.openBlock(), vue.createElementBlock("view", {
            key: 0,
            class: "code"
          }, [
            vue.withDirectives(vue.createElementVNode(
              "input",
              {
                class: "code-input",
                "onUpdate:modelValue": _cache[3] || (_cache[3] = ($event) => $setup.state.code = $event),
                placeholder: "请输入验证码",
                "placeholder-class": "msg"
              },
              null,
              512
              /* NEED_PATCH */
            ), [
              [vue.vModelText, $setup.state.code]
            ]),
            vue.createElementVNode("text", {
              class: "send-code",
              disabled: $setup.disabled,
              onClick: $setup.onSendSms
            }, vue.toDisplayString($setup.btnText), 9, ["disabled"])
          ])) : (vue.openBlock(), vue.createElementBlock("view", {
            key: 1,
            class: "psd"
          }, [
            vue.withDirectives(vue.createElementVNode(
              "input",
              {
                class: "uni-input",
                type: "password",
                "onUpdate:modelValue": _cache[4] || (_cache[4] = ($event) => $setup.state.password = $event),
                placeholder: "请输入密码",
                "placeholder-class": "msg"
              },
              null,
              512
              /* NEED_PATCH */
            ), [
              [vue.vModelText, $setup.state.password]
            ])
          ])),
          vue.createElementVNode("view", {
            class: "login-btn",
            onClick: $setup.loginFn
          }, "立即登录"),
          vue.createElementVNode("view", { class: "register" }, [
            vue.createElementVNode("text", { class: "register-msg" }, "还没有账号？现在去"),
            vue.createElementVNode("text", {
              onClick: $setup.gotoRegister,
              style: { "color": "#34a755" }
            }, "注册>>")
          ])
        ]),
        vue.createElementVNode("view", { class: "wechat-login" }, [
          vue.createElementVNode("text", { class: "wechat-msg" }, "第三方登录"),
          vue.createElementVNode("view", {
            class: "wechat-content",
            onClick: $setup.wxAppLogin
          }, [
            vue.createElementVNode("image", {
              src: _imports_6$2,
              class: "wechat"
            })
          ])
        ])
      ]),
      vue.createElementVNode("view", { class: "agree" }, [
        vue.createTextVNode(" 注册即代表同意 "),
        vue.createElementVNode("text", {
          class: "txt",
          onClick: _cache[5] || (_cache[5] = ($event) => $setup.gotoPrivacy("用户注册协议"))
        }, "《用户注册协议》"),
        vue.createTextVNode("和"),
        vue.createElementVNode("text", {
          class: "txt",
          onClick: _cache[6] || (_cache[6] = ($event) => $setup.gotoPrivacy("隐私协议"))
        }, "《隐私协议》")
      ])
    ]);
  }
  const PagesLoginLogin = /* @__PURE__ */ _export_sfc(_sfc_main$2d, [["render", _sfc_render$2c], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/login/login.vue"]]);
  const fontData = [
    {
      "font_class": "arrow-down",
      "unicode": ""
    },
    {
      "font_class": "arrow-left",
      "unicode": ""
    },
    {
      "font_class": "arrow-right",
      "unicode": ""
    },
    {
      "font_class": "arrow-up",
      "unicode": ""
    },
    {
      "font_class": "auth",
      "unicode": ""
    },
    {
      "font_class": "auth-filled",
      "unicode": ""
    },
    {
      "font_class": "back",
      "unicode": ""
    },
    {
      "font_class": "bars",
      "unicode": ""
    },
    {
      "font_class": "calendar",
      "unicode": ""
    },
    {
      "font_class": "calendar-filled",
      "unicode": ""
    },
    {
      "font_class": "camera",
      "unicode": ""
    },
    {
      "font_class": "camera-filled",
      "unicode": ""
    },
    {
      "font_class": "cart",
      "unicode": ""
    },
    {
      "font_class": "cart-filled",
      "unicode": ""
    },
    {
      "font_class": "chat",
      "unicode": ""
    },
    {
      "font_class": "chat-filled",
      "unicode": ""
    },
    {
      "font_class": "chatboxes",
      "unicode": ""
    },
    {
      "font_class": "chatboxes-filled",
      "unicode": ""
    },
    {
      "font_class": "chatbubble",
      "unicode": ""
    },
    {
      "font_class": "chatbubble-filled",
      "unicode": ""
    },
    {
      "font_class": "checkbox",
      "unicode": ""
    },
    {
      "font_class": "checkbox-filled",
      "unicode": ""
    },
    {
      "font_class": "checkmarkempty",
      "unicode": ""
    },
    {
      "font_class": "circle",
      "unicode": ""
    },
    {
      "font_class": "circle-filled",
      "unicode": ""
    },
    {
      "font_class": "clear",
      "unicode": ""
    },
    {
      "font_class": "close",
      "unicode": ""
    },
    {
      "font_class": "closeempty",
      "unicode": ""
    },
    {
      "font_class": "cloud-download",
      "unicode": ""
    },
    {
      "font_class": "cloud-download-filled",
      "unicode": ""
    },
    {
      "font_class": "cloud-upload",
      "unicode": ""
    },
    {
      "font_class": "cloud-upload-filled",
      "unicode": ""
    },
    {
      "font_class": "color",
      "unicode": ""
    },
    {
      "font_class": "color-filled",
      "unicode": ""
    },
    {
      "font_class": "compose",
      "unicode": ""
    },
    {
      "font_class": "contact",
      "unicode": ""
    },
    {
      "font_class": "contact-filled",
      "unicode": ""
    },
    {
      "font_class": "down",
      "unicode": ""
    },
    {
      "font_class": "bottom",
      "unicode": ""
    },
    {
      "font_class": "download",
      "unicode": ""
    },
    {
      "font_class": "download-filled",
      "unicode": ""
    },
    {
      "font_class": "email",
      "unicode": ""
    },
    {
      "font_class": "email-filled",
      "unicode": ""
    },
    {
      "font_class": "eye",
      "unicode": ""
    },
    {
      "font_class": "eye-filled",
      "unicode": ""
    },
    {
      "font_class": "eye-slash",
      "unicode": ""
    },
    {
      "font_class": "eye-slash-filled",
      "unicode": ""
    },
    {
      "font_class": "fire",
      "unicode": ""
    },
    {
      "font_class": "fire-filled",
      "unicode": ""
    },
    {
      "font_class": "flag",
      "unicode": ""
    },
    {
      "font_class": "flag-filled",
      "unicode": ""
    },
    {
      "font_class": "folder-add",
      "unicode": ""
    },
    {
      "font_class": "folder-add-filled",
      "unicode": ""
    },
    {
      "font_class": "font",
      "unicode": ""
    },
    {
      "font_class": "forward",
      "unicode": ""
    },
    {
      "font_class": "gear",
      "unicode": ""
    },
    {
      "font_class": "gear-filled",
      "unicode": ""
    },
    {
      "font_class": "gift",
      "unicode": ""
    },
    {
      "font_class": "gift-filled",
      "unicode": ""
    },
    {
      "font_class": "hand-down",
      "unicode": ""
    },
    {
      "font_class": "hand-down-filled",
      "unicode": ""
    },
    {
      "font_class": "hand-up",
      "unicode": ""
    },
    {
      "font_class": "hand-up-filled",
      "unicode": ""
    },
    {
      "font_class": "headphones",
      "unicode": ""
    },
    {
      "font_class": "heart",
      "unicode": ""
    },
    {
      "font_class": "heart-filled",
      "unicode": ""
    },
    {
      "font_class": "help",
      "unicode": ""
    },
    {
      "font_class": "help-filled",
      "unicode": ""
    },
    {
      "font_class": "home",
      "unicode": ""
    },
    {
      "font_class": "home-filled",
      "unicode": ""
    },
    {
      "font_class": "image",
      "unicode": ""
    },
    {
      "font_class": "image-filled",
      "unicode": ""
    },
    {
      "font_class": "images",
      "unicode": ""
    },
    {
      "font_class": "images-filled",
      "unicode": ""
    },
    {
      "font_class": "info",
      "unicode": ""
    },
    {
      "font_class": "info-filled",
      "unicode": ""
    },
    {
      "font_class": "left",
      "unicode": ""
    },
    {
      "font_class": "link",
      "unicode": ""
    },
    {
      "font_class": "list",
      "unicode": ""
    },
    {
      "font_class": "location",
      "unicode": ""
    },
    {
      "font_class": "location-filled",
      "unicode": ""
    },
    {
      "font_class": "locked",
      "unicode": ""
    },
    {
      "font_class": "locked-filled",
      "unicode": ""
    },
    {
      "font_class": "loop",
      "unicode": ""
    },
    {
      "font_class": "mail-open",
      "unicode": ""
    },
    {
      "font_class": "mail-open-filled",
      "unicode": ""
    },
    {
      "font_class": "map",
      "unicode": ""
    },
    {
      "font_class": "map-filled",
      "unicode": ""
    },
    {
      "font_class": "map-pin",
      "unicode": ""
    },
    {
      "font_class": "map-pin-ellipse",
      "unicode": ""
    },
    {
      "font_class": "medal",
      "unicode": ""
    },
    {
      "font_class": "medal-filled",
      "unicode": ""
    },
    {
      "font_class": "mic",
      "unicode": ""
    },
    {
      "font_class": "mic-filled",
      "unicode": ""
    },
    {
      "font_class": "micoff",
      "unicode": ""
    },
    {
      "font_class": "micoff-filled",
      "unicode": ""
    },
    {
      "font_class": "minus",
      "unicode": ""
    },
    {
      "font_class": "minus-filled",
      "unicode": ""
    },
    {
      "font_class": "more",
      "unicode": ""
    },
    {
      "font_class": "more-filled",
      "unicode": ""
    },
    {
      "font_class": "navigate",
      "unicode": ""
    },
    {
      "font_class": "navigate-filled",
      "unicode": ""
    },
    {
      "font_class": "notification",
      "unicode": ""
    },
    {
      "font_class": "notification-filled",
      "unicode": ""
    },
    {
      "font_class": "paperclip",
      "unicode": ""
    },
    {
      "font_class": "paperplane",
      "unicode": ""
    },
    {
      "font_class": "paperplane-filled",
      "unicode": ""
    },
    {
      "font_class": "person",
      "unicode": ""
    },
    {
      "font_class": "person-filled",
      "unicode": ""
    },
    {
      "font_class": "personadd",
      "unicode": ""
    },
    {
      "font_class": "personadd-filled",
      "unicode": ""
    },
    {
      "font_class": "personadd-filled-copy",
      "unicode": ""
    },
    {
      "font_class": "phone",
      "unicode": ""
    },
    {
      "font_class": "phone-filled",
      "unicode": ""
    },
    {
      "font_class": "plus",
      "unicode": ""
    },
    {
      "font_class": "plus-filled",
      "unicode": ""
    },
    {
      "font_class": "plusempty",
      "unicode": ""
    },
    {
      "font_class": "pulldown",
      "unicode": ""
    },
    {
      "font_class": "pyq",
      "unicode": ""
    },
    {
      "font_class": "qq",
      "unicode": ""
    },
    {
      "font_class": "redo",
      "unicode": ""
    },
    {
      "font_class": "redo-filled",
      "unicode": ""
    },
    {
      "font_class": "refresh",
      "unicode": ""
    },
    {
      "font_class": "refresh-filled",
      "unicode": ""
    },
    {
      "font_class": "refreshempty",
      "unicode": ""
    },
    {
      "font_class": "reload",
      "unicode": ""
    },
    {
      "font_class": "right",
      "unicode": ""
    },
    {
      "font_class": "scan",
      "unicode": ""
    },
    {
      "font_class": "search",
      "unicode": ""
    },
    {
      "font_class": "settings",
      "unicode": ""
    },
    {
      "font_class": "settings-filled",
      "unicode": ""
    },
    {
      "font_class": "shop",
      "unicode": ""
    },
    {
      "font_class": "shop-filled",
      "unicode": ""
    },
    {
      "font_class": "smallcircle",
      "unicode": ""
    },
    {
      "font_class": "smallcircle-filled",
      "unicode": ""
    },
    {
      "font_class": "sound",
      "unicode": ""
    },
    {
      "font_class": "sound-filled",
      "unicode": ""
    },
    {
      "font_class": "spinner-cycle",
      "unicode": ""
    },
    {
      "font_class": "staff",
      "unicode": ""
    },
    {
      "font_class": "staff-filled",
      "unicode": ""
    },
    {
      "font_class": "star",
      "unicode": ""
    },
    {
      "font_class": "star-filled",
      "unicode": ""
    },
    {
      "font_class": "starhalf",
      "unicode": ""
    },
    {
      "font_class": "trash",
      "unicode": ""
    },
    {
      "font_class": "trash-filled",
      "unicode": ""
    },
    {
      "font_class": "tune",
      "unicode": ""
    },
    {
      "font_class": "tune-filled",
      "unicode": ""
    },
    {
      "font_class": "undo",
      "unicode": ""
    },
    {
      "font_class": "undo-filled",
      "unicode": ""
    },
    {
      "font_class": "up",
      "unicode": ""
    },
    {
      "font_class": "top",
      "unicode": ""
    },
    {
      "font_class": "upload",
      "unicode": ""
    },
    {
      "font_class": "upload-filled",
      "unicode": ""
    },
    {
      "font_class": "videocam",
      "unicode": ""
    },
    {
      "font_class": "videocam-filled",
      "unicode": ""
    },
    {
      "font_class": "vip",
      "unicode": ""
    },
    {
      "font_class": "vip-filled",
      "unicode": ""
    },
    {
      "font_class": "wallet",
      "unicode": ""
    },
    {
      "font_class": "wallet-filled",
      "unicode": ""
    },
    {
      "font_class": "weibo",
      "unicode": ""
    },
    {
      "font_class": "weixin",
      "unicode": ""
    }
  ];
  const getVal$1 = (val2) => {
    const reg = /^[0-9]*$/g;
    return typeof val2 === "number" || reg.test(val2) ? val2 + "px" : val2;
  };
  const _sfc_main$2c = {
    name: "UniIcons",
    emits: ["click"],
    props: {
      type: {
        type: String,
        default: ""
      },
      color: {
        type: String,
        default: "#333333"
      },
      size: {
        type: [Number, String],
        default: 16
      },
      customPrefix: {
        type: String,
        default: ""
      },
      fontFamily: {
        type: String,
        default: ""
      }
    },
    data() {
      return {
        icons: fontData
      };
    },
    computed: {
      unicode() {
        let code2 = this.icons.find((v2) => v2.font_class === this.type);
        if (code2) {
          return code2.unicode;
        }
        return "";
      },
      iconSize() {
        return getVal$1(this.size);
      },
      styleObj() {
        if (this.fontFamily !== "") {
          return `color: ${this.color}; font-size: ${this.iconSize}; font-family: ${this.fontFamily};`;
        }
        return `color: ${this.color}; font-size: ${this.iconSize};`;
      }
    },
    methods: {
      _onClick() {
        this.$emit("click");
      }
    }
  };
  function _sfc_render$2b(_ctx, _cache, $props, $setup, $data, $options) {
    return vue.openBlock(), vue.createElementBlock(
      "text",
      {
        style: vue.normalizeStyle($options.styleObj),
        class: vue.normalizeClass(["uni-icons", ["uniui-" + $props.type, $props.customPrefix, $props.customPrefix ? $props.type : ""]]),
        onClick: _cache[0] || (_cache[0] = (...args) => $options._onClick && $options._onClick(...args))
      },
      [
        vue.renderSlot(_ctx.$slots, "default", {}, void 0, true)
      ],
      6
      /* CLASS, STYLE */
    );
  }
  const __easycom_0$7 = /* @__PURE__ */ _export_sfc(_sfc_main$2c, [["render", _sfc_render$2b], ["__scopeId", "data-v-d31e1c47"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/uni_modules/uni-icons/components/uni-icons/uni-icons.vue"]]);
  const isObject$1 = (val2) => val2 !== null && typeof val2 === "object";
  const defaultDelimiters = ["{", "}"];
  class BaseFormatter {
    constructor() {
      this._caches = /* @__PURE__ */ Object.create(null);
    }
    interpolate(message2, values, delimiters = defaultDelimiters) {
      if (!values) {
        return [message2];
      }
      let tokens = this._caches[message2];
      if (!tokens) {
        tokens = parse(message2, delimiters);
        this._caches[message2] = tokens;
      }
      return compile(tokens, values);
    }
  }
  const RE_TOKEN_LIST_VALUE = /^(?:\d)+/;
  const RE_TOKEN_NAMED_VALUE = /^(?:\w)+/;
  function parse(format, [startDelimiter, endDelimiter]) {
    const tokens = [];
    let position = 0;
    let text = "";
    while (position < format.length) {
      let char = format[position++];
      if (char === startDelimiter) {
        if (text) {
          tokens.push({ type: "text", value: text });
        }
        text = "";
        let sub = "";
        char = format[position++];
        while (char !== void 0 && char !== endDelimiter) {
          sub += char;
          char = format[position++];
        }
        const isClosed = char === endDelimiter;
        const type = RE_TOKEN_LIST_VALUE.test(sub) ? "list" : isClosed && RE_TOKEN_NAMED_VALUE.test(sub) ? "named" : "unknown";
        tokens.push({ value: sub, type });
      } else {
        text += char;
      }
    }
    text && tokens.push({ type: "text", value: text });
    return tokens;
  }
  function compile(tokens, values) {
    const compiled = [];
    let index = 0;
    const mode = Array.isArray(values) ? "list" : isObject$1(values) ? "named" : "unknown";
    if (mode === "unknown") {
      return compiled;
    }
    while (index < tokens.length) {
      const token = tokens[index];
      switch (token.type) {
        case "text":
          compiled.push(token.value);
          break;
        case "list":
          compiled.push(values[parseInt(token.value, 10)]);
          break;
        case "named":
          if (mode === "named") {
            compiled.push(values[token.value]);
          } else {
            {
              console.warn(`Type of token '${token.type}' and format of value '${mode}' don't match!`);
            }
          }
          break;
        case "unknown":
          {
            console.warn(`Detect 'unknown' type of token!`);
          }
          break;
      }
      index++;
    }
    return compiled;
  }
  const LOCALE_ZH_HANS = "zh-Hans";
  const LOCALE_ZH_HANT = "zh-Hant";
  const LOCALE_EN = "en";
  const LOCALE_FR = "fr";
  const LOCALE_ES = "es";
  const hasOwnProperty$2 = Object.prototype.hasOwnProperty;
  const hasOwn = (val2, key) => hasOwnProperty$2.call(val2, key);
  const defaultFormatter = new BaseFormatter();
  function include(str, parts) {
    return !!parts.find((part) => str.indexOf(part) !== -1);
  }
  function startsWith(str, parts) {
    return parts.find((part) => str.indexOf(part) === 0);
  }
  function normalizeLocale(locale, messages2) {
    if (!locale) {
      return;
    }
    locale = locale.trim().replace(/_/g, "-");
    if (messages2 && messages2[locale]) {
      return locale;
    }
    locale = locale.toLowerCase();
    if (locale === "chinese") {
      return LOCALE_ZH_HANS;
    }
    if (locale.indexOf("zh") === 0) {
      if (locale.indexOf("-hans") > -1) {
        return LOCALE_ZH_HANS;
      }
      if (locale.indexOf("-hant") > -1) {
        return LOCALE_ZH_HANT;
      }
      if (include(locale, ["-tw", "-hk", "-mo", "-cht"])) {
        return LOCALE_ZH_HANT;
      }
      return LOCALE_ZH_HANS;
    }
    let locales = [LOCALE_EN, LOCALE_FR, LOCALE_ES];
    if (messages2 && Object.keys(messages2).length > 0) {
      locales = Object.keys(messages2);
    }
    const lang = startsWith(locale, locales);
    if (lang) {
      return lang;
    }
  }
  class I18n {
    constructor({ locale, fallbackLocale, messages: messages2, watcher, formater: formater2 }) {
      this.locale = LOCALE_EN;
      this.fallbackLocale = LOCALE_EN;
      this.message = {};
      this.messages = {};
      this.watchers = [];
      if (fallbackLocale) {
        this.fallbackLocale = fallbackLocale;
      }
      this.formater = formater2 || defaultFormatter;
      this.messages = messages2 || {};
      this.setLocale(locale || LOCALE_EN);
      if (watcher) {
        this.watchLocale(watcher);
      }
    }
    setLocale(locale) {
      const oldLocale = this.locale;
      this.locale = normalizeLocale(locale, this.messages) || this.fallbackLocale;
      if (!this.messages[this.locale]) {
        this.messages[this.locale] = {};
      }
      this.message = this.messages[this.locale];
      if (oldLocale !== this.locale) {
        this.watchers.forEach((watcher) => {
          watcher(this.locale, oldLocale);
        });
      }
    }
    getLocale() {
      return this.locale;
    }
    watchLocale(fn) {
      const index = this.watchers.push(fn) - 1;
      return () => {
        this.watchers.splice(index, 1);
      };
    }
    add(locale, message2, override = true) {
      const curMessages = this.messages[locale];
      if (curMessages) {
        if (override) {
          Object.assign(curMessages, message2);
        } else {
          Object.keys(message2).forEach((key) => {
            if (!hasOwn(curMessages, key)) {
              curMessages[key] = message2[key];
            }
          });
        }
      } else {
        this.messages[locale] = message2;
      }
    }
    f(message2, values, delimiters) {
      return this.formater.interpolate(message2, values, delimiters).join("");
    }
    t(key, locale, values) {
      let message2 = this.message;
      if (typeof locale === "string") {
        locale = normalizeLocale(locale, this.messages);
        locale && (message2 = this.messages[locale]);
      } else {
        values = locale;
      }
      if (!hasOwn(message2, key)) {
        console.warn(`Cannot translate the value of keypath ${key}. Use the value of keypath as default.`);
        return key;
      }
      return this.formater.interpolate(message2[key], values).join("");
    }
  }
  function watchAppLocale(appVm, i18n) {
    if (appVm.$watchLocale) {
      appVm.$watchLocale((newLocale) => {
        i18n.setLocale(newLocale);
      });
    } else {
      appVm.$watch(() => appVm.$locale, (newLocale) => {
        i18n.setLocale(newLocale);
      });
    }
  }
  function getDefaultLocale() {
    if (typeof uni !== "undefined" && uni.getLocale) {
      return uni.getLocale();
    }
    if (typeof global !== "undefined" && global.getLocale) {
      return global.getLocale();
    }
    return LOCALE_EN;
  }
  function initVueI18n(locale, messages2 = {}, fallbackLocale, watcher) {
    if (typeof locale !== "string") {
      const options = [
        messages2,
        locale
      ];
      locale = options[0];
      messages2 = options[1];
    }
    if (typeof locale !== "string") {
      locale = getDefaultLocale();
    }
    if (typeof fallbackLocale !== "string") {
      fallbackLocale = typeof __uniConfig !== "undefined" && __uniConfig.fallbackLocale || LOCALE_EN;
    }
    const i18n = new I18n({
      locale,
      fallbackLocale,
      messages: messages2,
      watcher
    });
    let t2 = (key, values) => {
      if (typeof getApp !== "function") {
        t2 = function(key2, values2) {
          return i18n.t(key2, values2);
        };
      } else {
        let isWatchedAppLocale = false;
        t2 = function(key2, values2) {
          const appVm = getApp().$vm;
          if (appVm) {
            appVm.$locale;
            if (!isWatchedAppLocale) {
              isWatchedAppLocale = true;
              watchAppLocale(appVm, i18n);
            }
          }
          return i18n.t(key2, values2);
        };
      }
      return t2(key, values);
    };
    return {
      i18n,
      f(message2, values, delimiters) {
        return i18n.f(message2, values, delimiters);
      },
      t(key, values) {
        return t2(key, values);
      },
      add(locale2, message2, override = true) {
        return i18n.add(locale2, message2, override);
      },
      watch(fn) {
        return i18n.watchLocale(fn);
      },
      getLocale() {
        return i18n.getLocale();
      },
      setLocale(newLocale) {
        return i18n.setLocale(newLocale);
      }
    };
  }
  const en$3 = {
    "uni-search-bar.cancel": "cancel",
    "uni-search-bar.placeholder": "Search enter content"
  };
  const zhHans$2 = {
    "uni-search-bar.cancel": "取消",
    "uni-search-bar.placeholder": "请输入搜索内容"
  };
  const zhHant$2 = {
    "uni-search-bar.cancel": "取消",
    "uni-search-bar.placeholder": "請輸入搜索內容"
  };
  const messages$1 = {
    en: en$3,
    "zh-Hans": zhHans$2,
    "zh-Hant": zhHant$2
  };
  const {
    t: t$4
  } = initVueI18n(messages$1);
  const _sfc_main$2b = {
    name: "UniSearchBar",
    emits: ["input", "update:modelValue", "clear", "cancel", "confirm", "blur", "focus"],
    props: {
      placeholder: {
        type: String,
        default: ""
      },
      radius: {
        type: [Number, String],
        default: 5
      },
      clearButton: {
        type: String,
        default: "auto"
      },
      cancelButton: {
        type: String,
        default: "auto"
      },
      cancelText: {
        type: String,
        default: ""
      },
      bgColor: {
        type: String,
        default: "#F8F8F8"
      },
      textColor: {
        type: String,
        default: "#000000"
      },
      maxlength: {
        type: [Number, String],
        default: 100
      },
      value: {
        type: [Number, String],
        default: ""
      },
      modelValue: {
        type: [Number, String],
        default: ""
      },
      focus: {
        type: Boolean,
        default: false
      },
      readonly: {
        type: Boolean,
        default: false
      }
    },
    data() {
      return {
        show: false,
        showSync: false,
        searchVal: ""
      };
    },
    computed: {
      cancelTextI18n() {
        return this.cancelText || t$4("uni-search-bar.cancel");
      },
      placeholderText() {
        return this.placeholder || t$4("uni-search-bar.placeholder");
      }
    },
    watch: {
      modelValue: {
        immediate: true,
        handler(newVal) {
          this.searchVal = newVal;
          if (newVal) {
            this.show = true;
          }
        }
      },
      focus: {
        immediate: true,
        handler(newVal) {
          if (newVal) {
            if (this.readonly)
              return;
            this.show = true;
            this.$nextTick(() => {
              this.showSync = true;
            });
          }
        }
      },
      searchVal(newVal, oldVal) {
        this.$emit("input", newVal);
        this.$emit("update:modelValue", newVal);
      }
    },
    methods: {
      searchClick() {
        if (this.readonly)
          return;
        if (this.show) {
          return;
        }
        this.show = true;
        this.$nextTick(() => {
          this.showSync = true;
        });
      },
      clear() {
        this.searchVal = "";
        this.$nextTick(() => {
          this.$emit("clear", { value: "" });
        });
      },
      cancel() {
        if (this.readonly)
          return;
        this.$emit("cancel", {
          value: this.searchVal
        });
        this.searchVal = "";
        this.show = false;
        this.showSync = false;
        plus.key.hideSoftKeybord();
      },
      confirm() {
        plus.key.hideSoftKeybord();
        this.$emit("confirm", {
          value: this.searchVal
        });
      },
      blur() {
        plus.key.hideSoftKeybord();
        this.$emit("blur", {
          value: this.searchVal
        });
      },
      emitFocus(e2) {
        this.$emit("focus", e2.detail);
      }
    }
  };
  function _sfc_render$2a(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    return vue.openBlock(), vue.createElementBlock("view", { class: "uni-searchbar" }, [
      vue.createElementVNode(
        "view",
        {
          style: vue.normalizeStyle({ borderRadius: $props.radius + "px", backgroundColor: $props.bgColor }),
          class: "uni-searchbar__box",
          onClick: _cache[5] || (_cache[5] = (...args) => $options.searchClick && $options.searchClick(...args))
        },
        [
          vue.createElementVNode("view", { class: "uni-searchbar__box-icon-search" }, [
            vue.renderSlot(_ctx.$slots, "searchIcon", {}, () => [
              vue.createVNode(_component_uni_icons, {
                color: "#c0c4cc",
                size: "18",
                type: "search"
              })
            ], true)
          ]),
          $data.show || $data.searchVal ? vue.withDirectives((vue.openBlock(), vue.createElementBlock("input", {
            key: 0,
            focus: $data.showSync,
            disabled: $props.readonly,
            placeholder: $options.placeholderText,
            maxlength: $props.maxlength,
            class: "uni-searchbar__box-search-input",
            "confirm-type": "search",
            type: "text",
            "onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => $data.searchVal = $event),
            style: vue.normalizeStyle({ color: $props.textColor }),
            onConfirm: _cache[1] || (_cache[1] = (...args) => $options.confirm && $options.confirm(...args)),
            onBlur: _cache[2] || (_cache[2] = (...args) => $options.blur && $options.blur(...args)),
            onFocus: _cache[3] || (_cache[3] = (...args) => $options.emitFocus && $options.emitFocus(...args))
          }, null, 44, ["focus", "disabled", "placeholder", "maxlength"])), [
            [vue.vModelText, $data.searchVal]
          ]) : (vue.openBlock(), vue.createElementBlock(
            "text",
            {
              key: 1,
              class: "uni-searchbar__text-placeholder"
            },
            vue.toDisplayString($props.placeholder),
            1
            /* TEXT */
          )),
          $data.show && ($props.clearButton === "always" || $props.clearButton === "auto" && $data.searchVal !== "") && !$props.readonly ? (vue.openBlock(), vue.createElementBlock("view", {
            key: 2,
            class: "uni-searchbar__box-icon-clear",
            onClick: _cache[4] || (_cache[4] = (...args) => $options.clear && $options.clear(...args))
          }, [
            vue.renderSlot(_ctx.$slots, "clearIcon", {}, () => [
              vue.createVNode(_component_uni_icons, {
                color: "#c0c4cc",
                size: "20",
                type: "clear"
              })
            ], true)
          ])) : vue.createCommentVNode("v-if", true)
        ],
        4
        /* STYLE */
      ),
      $props.cancelButton === "always" || $data.show && $props.cancelButton === "auto" ? (vue.openBlock(), vue.createElementBlock(
        "text",
        {
          key: 0,
          onClick: _cache[6] || (_cache[6] = (...args) => $options.cancel && $options.cancel(...args)),
          class: "uni-searchbar__cancel"
        },
        vue.toDisplayString($options.cancelTextI18n),
        1
        /* TEXT */
      )) : vue.createCommentVNode("v-if", true)
    ]);
  }
  const __easycom_0$6 = /* @__PURE__ */ _export_sfc(_sfc_main$2b, [["render", _sfc_render$2a], ["__scopeId", "data-v-f07ef577"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/uni_modules/uni-search-bar/components/uni-search-bar/uni-search-bar.vue"]]);
  const _sfc_main$2a = {
    name: "u-sticky",
    emits: ["fixed", "unfixed"],
    props: {
      // 吸顶容器到顶部某个距离的时候，进行吸顶，在H5平台，NavigationBar为44px
      offsetTop: {
        type: [Number, String],
        default: 0
      },
      //列表中的索引值
      index: {
        type: [Number, String],
        default: ""
      },
      // 是否开启吸顶功能
      enable: {
        type: Boolean,
        default: true
      },
      // h5顶部导航栏的高度
      h5NavHeight: {
        type: [Number, String],
        default: 44
      },
      // 吸顶区域的背景颜色
      bgColor: {
        type: String,
        default: "#ffffff"
      },
      // z-index值
      zIndex: {
        type: [Number, String],
        default: ""
      }
    },
    data() {
      return {
        fixed: false,
        height: "auto",
        stickyTop: 0,
        elClass: this.$u.guid(),
        left: 0,
        width: "auto"
      };
    },
    watch: {
      offsetTop(val2) {
        this.initObserver();
      },
      enable(val2) {
        if (val2 == false) {
          this.fixed = false;
          this.disconnectObserver("contentObserver");
        } else {
          this.initObserver();
        }
      }
    },
    computed: {
      uZIndex() {
        return this.zIndex ? this.zIndex : this.$u.zIndex.sticky;
      }
    },
    mounted() {
      this.initObserver();
    },
    methods: {
      initObserver() {
        if (!this.enable)
          return;
        this.stickyTop = this.offsetTop != 0 ? uni.upx2px(this.offsetTop) : 0;
        this.disconnectObserver("contentObserver");
        this.$uGetRect("." + this.elClass).then((res2) => {
          this.height = res2.height;
          this.left = res2.left;
          this.width = res2.width;
          this.$nextTick(() => {
            this.observeContent();
          });
        });
      },
      observeContent() {
        this.disconnectObserver("contentObserver");
        const contentObserver = uni.createIntersectionObserver(this, {
          thresholds: [0.95, 0.98, 1]
        });
        contentObserver.relativeToViewport({
          top: -this.stickyTop
        });
        contentObserver.observe("." + this.elClass, (res2) => {
          if (!this.enable)
            return;
          this.setFixed(res2.boundingClientRect.top);
        });
        this.contentObserver = contentObserver;
      },
      setFixed(top) {
        const fixed = top < this.stickyTop;
        if (fixed)
          this.$emit("fixed", this.index);
        else if (this.fixed)
          this.$emit("unfixed", this.index);
        this.fixed = fixed;
      },
      disconnectObserver(observerName) {
        const observer = this[observerName];
        observer && observer.disconnect();
      }
    },
    beforeUnmount() {
      this.disconnectObserver("contentObserver");
    }
  };
  function _sfc_render$29(_ctx, _cache, $props, $setup, $data, $options) {
    return vue.openBlock(), vue.createElementBlock("view", { class: "" }, [
      vue.createElementVNode(
        "view",
        {
          class: vue.normalizeClass(["u-sticky-wrap", [$data.elClass]]),
          style: vue.normalizeStyle({
            height: $data.fixed ? $data.height + "px" : "auto",
            backgroundColor: $props.bgColor
          })
        },
        [
          vue.createElementVNode(
            "view",
            {
              class: "u-sticky",
              style: vue.normalizeStyle({
                position: $data.fixed ? "fixed" : "static",
                top: $data.stickyTop + "px",
                left: $data.left + "px",
                width: $data.width == "auto" ? "auto" : $data.width + "px",
                zIndex: $options.uZIndex
              })
            },
            [
              vue.renderSlot(_ctx.$slots, "default", {}, void 0, true)
            ],
            4
            /* STYLE */
          )
        ],
        6
        /* CLASS, STYLE */
      )
    ]);
  }
  const __easycom_2$c = /* @__PURE__ */ _export_sfc(_sfc_main$2a, [["render", _sfc_render$29], ["__scopeId", "data-v-0087e446"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/uni_modules/vk-uview-ui/components/u-sticky/u-sticky.vue"]]);
  const pages = [
    {
      path: "pages/login/login",
      style: {
        navigationBarTitleText: "登录",
        navigationStyle: "custom"
      }
    },
    {
      path: "pages/confide/index",
      style: {
        navigationBarTitleText: "倾听师首页"
      }
    },
    {
      path: "pages/confide/detail",
      style: {
        navigationBarTitleText: "倾听师详情"
      }
    },
    {
      path: "pages/consult/index",
      style: {
        navigationBarTitleText: "咨询师首页"
      }
    },
    {
      path: "pages/consult/detail",
      style: {
        navigationBarTitleText: "咨询师详情"
      }
    },
    {
      path: "pages/index/index",
      style: {
        navigationBarTitleText: "首页"
      }
    },
    {
      path: "pages/message/index",
      style: {
        navigationBarTitleText: "消息"
      }
    },
    {
      path: "pages/my/index",
      style: {
        navigationStyle: "custom",
        backgroundColor: "#F4F6F8",
        navigationBarTitleText: "我的"
      }
    },
    {
      path: "pages/readArticle/readArticle",
      style: {
        navigationBarTitleText: "文章列表"
      }
    },
    {
      path: "pages/readArticle/articleDetail",
      style: {
        navigationBarTitleText: "文章详情"
      }
    },
    {
      path: "pages/settled/settled",
      style: {
        navigationBarTitleText: "入驻"
      }
    },
    {
      path: "pages/settled/application",
      style: {
        navigationStyle: "custom"
      }
    },
    {
      path: "pages/consult-feel/consult-feel",
      style: {
        navigationBarTitleText: "咨询感受"
      }
    },
    {
      path: "pages/evaluate/evaluate",
      style: {
        navigationBarTitleText: "评价列表"
      }
    },
    {
      path: "pages/forum/index/index",
      style: {
        navigationBarTitleText: "论坛首页"
      }
    },
    {
      path: "pages/forum/write/write",
      style: {
        navigationBarTitleText: "写"
      }
    },
    {
      path: "pages/forum/my/my",
      style: {
        navigationBarTitleText: "个人空间"
      }
    },
    {
      path: "pages/forum/other/other",
      style: {
        navigationBarTitleText: "其他人空间"
      }
    },
    {
      path: "pages/forum/mailbox/mailbox",
      style: {
        navigationBarTitleText: "信箱详情"
      }
    },
    {
      path: "pages/forum/write/ask-question/ask-question",
      style: {
        navigationBarTitleText: "提问题"
      }
    },
    {
      path: "pages/forum/write/send-dynamics/send-dynamics",
      style: {
        navigationBarTitleText: "发动态"
      }
    },
    {
      path: "pages/forum/write/write-mailbox/write-mailbox",
      style: {
        navigationBarTitleText: "写信"
      }
    },
    {
      path: "pages/forum/my/userInfo",
      style: {
        navigationBarTitleText: "用户信息"
      }
    },
    {
      path: "pages/forum/my/info",
      style: {
        navigationBarTitleText: "用户信息"
      }
    },
    {
      path: "pages/forum/write/choose-topic/choose-topic",
      style: {
        navigationBarTitleText: "选择话题"
      }
    },
    {
      path: "pages/forum/index/qaDetail",
      style: {
        navigationBarTitleText: "问答详情"
      }
    },
    {
      path: "pages/psychological-test/index/index",
      style: {
        navigationBarTitleText: "心理测试"
      }
    },
    {
      path: "pages/psychological-test/order/order",
      style: {
        navigationBarTitleText: "我的评测"
      }
    },
    {
      path: "pages/psychological-test/test-type/test-type",
      style: {
        navigationBarTitleText: "评测类型"
      }
    },
    {
      path: "pages/psychological-test/start-test/start-test",
      style: {
        navigationBarTitleText: "潜意识投射测试"
      }
    },
    {
      path: "pages/psychological-test/comment/comment",
      style: {
        navigationBarTitleText: "评论"
      }
    },
    {
      path: "pages/psychological-test/contact-consult/contact-consult",
      style: {
        navigationBarTitleText: "联系咨询师"
      }
    },
    {
      path: "pages/psychological-test/test-result/test-result",
      style: {
        navigationBarTitleText: "测试结果"
      }
    },
    {
      path: "pages/psychological-test/charge-test/charge-test",
      style: {
        navigationBarTitleText: "收费测试"
      }
    },
    {
      path: "pages/psychological-test/free-test/free-test",
      style: {
        navigationBarTitleText: "免费测试"
      }
    },
    {
      path: "pages/message/private-chat",
      style: {
        navigationStyle: "custom"
      }
    },
    {
      path: "pages/supplementInfo/supplementInfo",
      style: {
        navigationBarTitleText: "补充资料",
        navigationStyle: "custom"
      }
    },
    {
      path: "pages/settings/serviceSettings",
      style: {
        navigationStyle: "default",
        navigationBarTitleText: "服务设置"
      }
    },
    {
      path: "pages/settings/help-center",
      style: {
        navigationStyle: "custom"
      }
    },
    {
      path: "pages/settings/service-setup",
      style: {
        navigationStyle: "custom"
      }
    },
    {
      path: "pages/settings/service-price",
      style: {
        navigationStyle: "custom"
      }
    },
    {
      path: "pages/settings/feedback",
      style: {
        navigationStyle: "custom"
      }
    },
    {
      path: "pages/settings/complaint",
      style: {
        navigationStyle: "custom"
      }
    },
    {
      path: "pages/payment/order/refund-order",
      style: {
        navigationStyle: "custom"
      }
    },
    {
      path: "pages/settings/record",
      style: {
        navigationStyle: "custom"
      }
    },
    {
      path: "pages/payment/order/consult-order",
      style: {
        navigationStyle: "custom"
      }
    },
    {
      path: "pages/payment/order/exam-order",
      style: {
        navigationStyle: "custom"
      }
    },
    {
      path: "pages/payment/order/listener-order",
      style: {
        navigationStyle: "custom"
      }
    },
    {
      path: "pages/payment/order/bill-order",
      style: {
        navigationStyle: "custom"
      }
    },
    {
      path: "pages/payment/order/evaluation-order",
      style: {
        navigationStyle: "custom"
      }
    },
    {
      path: "pages/settings/services",
      style: {
        navigationStyle: "custom",
        navigationBarTitleText: "服务资料"
      }
    },
    {
      path: "pages/auth/auth",
      style: {
        navigationBarTitleText: "认证",
        navigationBarBackgroundColor: "#F4F6F8",
        navigationStyle: "default",
        navigationBarTextStyle: "black"
      }
    },
    {
      path: "pages/auth/cityChoose",
      style: {
        navigationBarTitleText: "城市选择",
        navigationBarBackgroundColor: "#F4F6F8",
        navigationBarTextStyle: "black"
      }
    },
    {
      path: "pages/payment/payment",
      style: {
        navigationBarTitleText: "订单支付",
        navigationBarBackgroundColor: "#F4F6F8",
        navigationBarTextStyle: "black"
      }
    },
    {
      path: "pages/payment/payment-records",
      style: {
        navigationBarTitleText: "我的订单",
        navigationBarBackgroundColor: "#F4F6F8",
        navigationBarTextStyle: "black"
      }
    },
    {
      path: "pages/payment/order-details",
      style: {
        navigationStyle: "custom"
      }
    },
    {
      path: "pages/register/register",
      style: {
        navigationBarTitleText: "",
        navigationStyle: "custom"
      }
    },
    {
      path: "pages/settings/settings",
      style: {
        navigationBarTitleText: "设置",
        navigationStyle: "default"
      }
    },
    {
      path: "pages/account/security",
      style: {
        navigationBarTitleText: "账号安全",
        navigationStyle: "default"
      }
    },
    {
      path: "pages/webview/webview",
      style: {
        navigationBarTitleText: "",
        navigationStyle: "default"
      }
    },
    {
      path: "pages/my/wallet/bill",
      style: {
        navigationStyle: "custom"
      }
    },
    {
      path: "pages/my/wallet/withdrawal",
      style: {
        navigationStyle: "custom"
      }
    },
    {
      path: "pages/my/wallet/bank-card",
      style: {
        navigationStyle: "custom"
      }
    },
    {
      path: "pages/my/wallet/mine",
      style: {
        navigationStyle: "custom"
      }
    },
    {
      path: "pages/shopping-mall/mall-home",
      style: {
        navigationStyle: "custom"
      }
    },
    {
      path: "pages/shopping-mall/product-details",
      style: {
        navigationStyle: "custom"
      }
    },
    {
      path: "pages/shopping-mall/shopping-cart",
      style: {
        navigationStyle: "custom"
      }
    },
    {
      path: "pages/shopping-mall/delivery-address",
      style: {
        navigationStyle: "custom"
      }
    },
    {
      path: "pages/shopping-mall/operation-address",
      style: {
        navigationStyle: "custom"
      }
    },
    {
      path: "pages/shopping-mall/order-details",
      style: {
        navigationStyle: "custom"
      }
    },
    {
      path: "pages/shopping-mall/order-list",
      style: {
        navigationStyle: "custom"
      }
    },
    {
      path: "pages/shopping-mall/order-confirmation",
      style: {
        navigationStyle: "custom"
      }
    },
    {
      path: "pages/confide/recommendations",
      style: {
        navigationStyle: "custom"
      }
    },
    {
      path: "pages/consult/recommendations",
      style: {
        navigationStyle: "custom"
      }
    },
    {
      path: "pages/forum/service/auth",
      style: {
        navigationStyle: "custom"
      }
    }
  ];
  const tabBar = {
    color: "#7A7E83",
    selectedColor: "#3cc51f",
    borderStyle: "black",
    backgroundColor: "#ffffff",
    list: [
      {
        pagePath: "pages/index/index",
        iconPath: "/static/switchIcon/index.png",
        selectedIconPath: "/static/switchIcon/index-active.png",
        text: "首页"
      },
      {
        pagePath: "pages/consult/index",
        iconPath: "/static/switchIcon/consult.png",
        selectedIconPath: "/static/switchIcon/consult-active.png",
        text: "咨询"
      },
      {
        pagePath: "pages/confide/index",
        iconPath: "/static/switchIcon/confide.png",
        selectedIconPath: "/static/switchIcon/confide-active.png",
        text: "倾诉"
      },
      {
        pagePath: "pages/message/index",
        iconPath: "/static/switchIcon/message.png",
        selectedIconPath: "/static/switchIcon/message-active.png",
        text: "消息"
      },
      {
        pagePath: "pages/my/index",
        iconPath: "/static/switchIcon/my.png",
        selectedIconPath: "/static/switchIcon/my-active.png",
        text: "我的"
      }
    ]
  };
  const globalStyle = {
    navigationBarTitleText: "",
    navigationStyle: "custom",
    navigationBarBackgroundColor: "#ffffff",
    pageOrientation: "portrait",
    navigationBarTextStyle: "black",
    backgroundColor: "#F4F6F8",
    backgroundColorTop: "#F4F5F6",
    backgroundColorBottom: "#F4F5F6",
    h5: {
      maxWidth: 1190,
      navigationBarTextStyle: "white",
      navigationBarBackgroundColor: "#007AFF"
    },
    bounce: "none"
  };
  const uniIdRouter = {};
  const condition = {
    current: 0,
    list: [
      {
        name: "",
        path: "pages/login/login",
        query: ""
      }
    ]
  };
  const e = {
    pages,
    tabBar,
    globalStyle,
    uniIdRouter,
    condition
  };
  var define_process_env_UNI_SECURE_NETWORK_CONFIG_default = [];
  function t$3(e2) {
    return e2 && e2.__esModule && Object.prototype.hasOwnProperty.call(e2, "default") ? e2.default : e2;
  }
  function n(e2, t2, n2) {
    return e2(n2 = { path: t2, exports: {}, require: function(e3, t3) {
      return function() {
        throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs");
      }(null == t3 && n2.path);
    } }, n2.exports), n2.exports;
  }
  var s = n(function(e2, t2) {
    var n2;
    e2.exports = (n2 = n2 || function(e3, t3) {
      var n3 = Object.create || /* @__PURE__ */ function() {
        function e4() {
        }
        return function(t4) {
          var n4;
          return e4.prototype = t4, n4 = new e4(), e4.prototype = null, n4;
        };
      }(), s2 = {}, r2 = s2.lib = {}, i2 = r2.Base = { extend: function(e4) {
        var t4 = n3(this);
        return e4 && t4.mixIn(e4), t4.hasOwnProperty("init") && this.init !== t4.init || (t4.init = function() {
          t4.$super.init.apply(this, arguments);
        }), t4.init.prototype = t4, t4.$super = this, t4;
      }, create: function() {
        var e4 = this.extend();
        return e4.init.apply(e4, arguments), e4;
      }, init: function() {
      }, mixIn: function(e4) {
        for (var t4 in e4)
          e4.hasOwnProperty(t4) && (this[t4] = e4[t4]);
        e4.hasOwnProperty("toString") && (this.toString = e4.toString);
      }, clone: function() {
        return this.init.prototype.extend(this);
      } }, o2 = r2.WordArray = i2.extend({ init: function(e4, n4) {
        e4 = this.words = e4 || [], this.sigBytes = n4 != t3 ? n4 : 4 * e4.length;
      }, toString: function(e4) {
        return (e4 || c2).stringify(this);
      }, concat: function(e4) {
        var t4 = this.words, n4 = e4.words, s3 = this.sigBytes, r3 = e4.sigBytes;
        if (this.clamp(), s3 % 4)
          for (var i3 = 0; i3 < r3; i3++) {
            var o3 = n4[i3 >>> 2] >>> 24 - i3 % 4 * 8 & 255;
            t4[s3 + i3 >>> 2] |= o3 << 24 - (s3 + i3) % 4 * 8;
          }
        else
          for (i3 = 0; i3 < r3; i3 += 4)
            t4[s3 + i3 >>> 2] = n4[i3 >>> 2];
        return this.sigBytes += r3, this;
      }, clamp: function() {
        var t4 = this.words, n4 = this.sigBytes;
        t4[n4 >>> 2] &= 4294967295 << 32 - n4 % 4 * 8, t4.length = e3.ceil(n4 / 4);
      }, clone: function() {
        var e4 = i2.clone.call(this);
        return e4.words = this.words.slice(0), e4;
      }, random: function(t4) {
        for (var n4, s3 = [], r3 = function(t5) {
          var n5 = 987654321, s4 = 4294967295;
          return function() {
            var r4 = ((n5 = 36969 * (65535 & n5) + (n5 >> 16) & s4) << 16) + (t5 = 18e3 * (65535 & t5) + (t5 >> 16) & s4) & s4;
            return r4 /= 4294967296, (r4 += 0.5) * (e3.random() > 0.5 ? 1 : -1);
          };
        }, i3 = 0; i3 < t4; i3 += 4) {
          var a3 = r3(4294967296 * (n4 || e3.random()));
          n4 = 987654071 * a3(), s3.push(4294967296 * a3() | 0);
        }
        return new o2.init(s3, t4);
      } }), a2 = s2.enc = {}, c2 = a2.Hex = { stringify: function(e4) {
        for (var t4 = e4.words, n4 = e4.sigBytes, s3 = [], r3 = 0; r3 < n4; r3++) {
          var i3 = t4[r3 >>> 2] >>> 24 - r3 % 4 * 8 & 255;
          s3.push((i3 >>> 4).toString(16)), s3.push((15 & i3).toString(16));
        }
        return s3.join("");
      }, parse: function(e4) {
        for (var t4 = e4.length, n4 = [], s3 = 0; s3 < t4; s3 += 2)
          n4[s3 >>> 3] |= parseInt(e4.substr(s3, 2), 16) << 24 - s3 % 8 * 4;
        return new o2.init(n4, t4 / 2);
      } }, u2 = a2.Latin1 = { stringify: function(e4) {
        for (var t4 = e4.words, n4 = e4.sigBytes, s3 = [], r3 = 0; r3 < n4; r3++) {
          var i3 = t4[r3 >>> 2] >>> 24 - r3 % 4 * 8 & 255;
          s3.push(String.fromCharCode(i3));
        }
        return s3.join("");
      }, parse: function(e4) {
        for (var t4 = e4.length, n4 = [], s3 = 0; s3 < t4; s3++)
          n4[s3 >>> 2] |= (255 & e4.charCodeAt(s3)) << 24 - s3 % 4 * 8;
        return new o2.init(n4, t4);
      } }, h2 = a2.Utf8 = { stringify: function(e4) {
        try {
          return decodeURIComponent(escape(u2.stringify(e4)));
        } catch (e5) {
          throw new Error("Malformed UTF-8 data");
        }
      }, parse: function(e4) {
        return u2.parse(unescape(encodeURIComponent(e4)));
      } }, l2 = r2.BufferedBlockAlgorithm = i2.extend({ reset: function() {
        this._data = new o2.init(), this._nDataBytes = 0;
      }, _append: function(e4) {
        "string" == typeof e4 && (e4 = h2.parse(e4)), this._data.concat(e4), this._nDataBytes += e4.sigBytes;
      }, _process: function(t4) {
        var n4 = this._data, s3 = n4.words, r3 = n4.sigBytes, i3 = this.blockSize, a3 = r3 / (4 * i3), c3 = (a3 = t4 ? e3.ceil(a3) : e3.max((0 | a3) - this._minBufferSize, 0)) * i3, u3 = e3.min(4 * c3, r3);
        if (c3) {
          for (var h3 = 0; h3 < c3; h3 += i3)
            this._doProcessBlock(s3, h3);
          var l3 = s3.splice(0, c3);
          n4.sigBytes -= u3;
        }
        return new o2.init(l3, u3);
      }, clone: function() {
        var e4 = i2.clone.call(this);
        return e4._data = this._data.clone(), e4;
      }, _minBufferSize: 0 });
      r2.Hasher = l2.extend({ cfg: i2.extend(), init: function(e4) {
        this.cfg = this.cfg.extend(e4), this.reset();
      }, reset: function() {
        l2.reset.call(this), this._doReset();
      }, update: function(e4) {
        return this._append(e4), this._process(), this;
      }, finalize: function(e4) {
        return e4 && this._append(e4), this._doFinalize();
      }, blockSize: 16, _createHelper: function(e4) {
        return function(t4, n4) {
          return new e4.init(n4).finalize(t4);
        };
      }, _createHmacHelper: function(e4) {
        return function(t4, n4) {
          return new d2.HMAC.init(e4, n4).finalize(t4);
        };
      } });
      var d2 = s2.algo = {};
      return s2;
    }(Math), n2);
  }), r = s, i = (n(function(e2, t2) {
    var n2;
    e2.exports = (n2 = r, function(e3) {
      var t3 = n2, s2 = t3.lib, r2 = s2.WordArray, i2 = s2.Hasher, o2 = t3.algo, a2 = [];
      !function() {
        for (var t4 = 0; t4 < 64; t4++)
          a2[t4] = 4294967296 * e3.abs(e3.sin(t4 + 1)) | 0;
      }();
      var c2 = o2.MD5 = i2.extend({ _doReset: function() {
        this._hash = new r2.init([1732584193, 4023233417, 2562383102, 271733878]);
      }, _doProcessBlock: function(e4, t4) {
        for (var n3 = 0; n3 < 16; n3++) {
          var s3 = t4 + n3, r3 = e4[s3];
          e4[s3] = 16711935 & (r3 << 8 | r3 >>> 24) | 4278255360 & (r3 << 24 | r3 >>> 8);
        }
        var i3 = this._hash.words, o3 = e4[t4 + 0], c3 = e4[t4 + 1], p2 = e4[t4 + 2], f2 = e4[t4 + 3], g2 = e4[t4 + 4], m2 = e4[t4 + 5], y2 = e4[t4 + 6], _2 = e4[t4 + 7], w2 = e4[t4 + 8], I2 = e4[t4 + 9], v2 = e4[t4 + 10], S2 = e4[t4 + 11], T2 = e4[t4 + 12], b2 = e4[t4 + 13], E2 = e4[t4 + 14], k2 = e4[t4 + 15], A2 = i3[0], P2 = i3[1], C2 = i3[2], O2 = i3[3];
        A2 = u2(A2, P2, C2, O2, o3, 7, a2[0]), O2 = u2(O2, A2, P2, C2, c3, 12, a2[1]), C2 = u2(C2, O2, A2, P2, p2, 17, a2[2]), P2 = u2(P2, C2, O2, A2, f2, 22, a2[3]), A2 = u2(A2, P2, C2, O2, g2, 7, a2[4]), O2 = u2(O2, A2, P2, C2, m2, 12, a2[5]), C2 = u2(C2, O2, A2, P2, y2, 17, a2[6]), P2 = u2(P2, C2, O2, A2, _2, 22, a2[7]), A2 = u2(A2, P2, C2, O2, w2, 7, a2[8]), O2 = u2(O2, A2, P2, C2, I2, 12, a2[9]), C2 = u2(C2, O2, A2, P2, v2, 17, a2[10]), P2 = u2(P2, C2, O2, A2, S2, 22, a2[11]), A2 = u2(A2, P2, C2, O2, T2, 7, a2[12]), O2 = u2(O2, A2, P2, C2, b2, 12, a2[13]), C2 = u2(C2, O2, A2, P2, E2, 17, a2[14]), A2 = h2(A2, P2 = u2(P2, C2, O2, A2, k2, 22, a2[15]), C2, O2, c3, 5, a2[16]), O2 = h2(O2, A2, P2, C2, y2, 9, a2[17]), C2 = h2(C2, O2, A2, P2, S2, 14, a2[18]), P2 = h2(P2, C2, O2, A2, o3, 20, a2[19]), A2 = h2(A2, P2, C2, O2, m2, 5, a2[20]), O2 = h2(O2, A2, P2, C2, v2, 9, a2[21]), C2 = h2(C2, O2, A2, P2, k2, 14, a2[22]), P2 = h2(P2, C2, O2, A2, g2, 20, a2[23]), A2 = h2(A2, P2, C2, O2, I2, 5, a2[24]), O2 = h2(O2, A2, P2, C2, E2, 9, a2[25]), C2 = h2(C2, O2, A2, P2, f2, 14, a2[26]), P2 = h2(P2, C2, O2, A2, w2, 20, a2[27]), A2 = h2(A2, P2, C2, O2, b2, 5, a2[28]), O2 = h2(O2, A2, P2, C2, p2, 9, a2[29]), C2 = h2(C2, O2, A2, P2, _2, 14, a2[30]), A2 = l2(A2, P2 = h2(P2, C2, O2, A2, T2, 20, a2[31]), C2, O2, m2, 4, a2[32]), O2 = l2(O2, A2, P2, C2, w2, 11, a2[33]), C2 = l2(C2, O2, A2, P2, S2, 16, a2[34]), P2 = l2(P2, C2, O2, A2, E2, 23, a2[35]), A2 = l2(A2, P2, C2, O2, c3, 4, a2[36]), O2 = l2(O2, A2, P2, C2, g2, 11, a2[37]), C2 = l2(C2, O2, A2, P2, _2, 16, a2[38]), P2 = l2(P2, C2, O2, A2, v2, 23, a2[39]), A2 = l2(A2, P2, C2, O2, b2, 4, a2[40]), O2 = l2(O2, A2, P2, C2, o3, 11, a2[41]), C2 = l2(C2, O2, A2, P2, f2, 16, a2[42]), P2 = l2(P2, C2, O2, A2, y2, 23, a2[43]), A2 = l2(A2, P2, C2, O2, I2, 4, a2[44]), O2 = l2(O2, A2, P2, C2, T2, 11, a2[45]), C2 = l2(C2, O2, A2, P2, k2, 16, a2[46]), A2 = d2(A2, P2 = l2(P2, C2, O2, A2, p2, 23, a2[47]), C2, O2, o3, 6, a2[48]), O2 = d2(O2, A2, P2, C2, _2, 10, a2[49]), C2 = d2(C2, O2, A2, P2, E2, 15, a2[50]), P2 = d2(P2, C2, O2, A2, m2, 21, a2[51]), A2 = d2(A2, P2, C2, O2, T2, 6, a2[52]), O2 = d2(O2, A2, P2, C2, f2, 10, a2[53]), C2 = d2(C2, O2, A2, P2, v2, 15, a2[54]), P2 = d2(P2, C2, O2, A2, c3, 21, a2[55]), A2 = d2(A2, P2, C2, O2, w2, 6, a2[56]), O2 = d2(O2, A2, P2, C2, k2, 10, a2[57]), C2 = d2(C2, O2, A2, P2, y2, 15, a2[58]), P2 = d2(P2, C2, O2, A2, b2, 21, a2[59]), A2 = d2(A2, P2, C2, O2, g2, 6, a2[60]), O2 = d2(O2, A2, P2, C2, S2, 10, a2[61]), C2 = d2(C2, O2, A2, P2, p2, 15, a2[62]), P2 = d2(P2, C2, O2, A2, I2, 21, a2[63]), i3[0] = i3[0] + A2 | 0, i3[1] = i3[1] + P2 | 0, i3[2] = i3[2] + C2 | 0, i3[3] = i3[3] + O2 | 0;
      }, _doFinalize: function() {
        var t4 = this._data, n3 = t4.words, s3 = 8 * this._nDataBytes, r3 = 8 * t4.sigBytes;
        n3[r3 >>> 5] |= 128 << 24 - r3 % 32;
        var i3 = e3.floor(s3 / 4294967296), o3 = s3;
        n3[15 + (r3 + 64 >>> 9 << 4)] = 16711935 & (i3 << 8 | i3 >>> 24) | 4278255360 & (i3 << 24 | i3 >>> 8), n3[14 + (r3 + 64 >>> 9 << 4)] = 16711935 & (o3 << 8 | o3 >>> 24) | 4278255360 & (o3 << 24 | o3 >>> 8), t4.sigBytes = 4 * (n3.length + 1), this._process();
        for (var a3 = this._hash, c3 = a3.words, u3 = 0; u3 < 4; u3++) {
          var h3 = c3[u3];
          c3[u3] = 16711935 & (h3 << 8 | h3 >>> 24) | 4278255360 & (h3 << 24 | h3 >>> 8);
        }
        return a3;
      }, clone: function() {
        var e4 = i2.clone.call(this);
        return e4._hash = this._hash.clone(), e4;
      } });
      function u2(e4, t4, n3, s3, r3, i3, o3) {
        var a3 = e4 + (t4 & n3 | ~t4 & s3) + r3 + o3;
        return (a3 << i3 | a3 >>> 32 - i3) + t4;
      }
      function h2(e4, t4, n3, s3, r3, i3, o3) {
        var a3 = e4 + (t4 & s3 | n3 & ~s3) + r3 + o3;
        return (a3 << i3 | a3 >>> 32 - i3) + t4;
      }
      function l2(e4, t4, n3, s3, r3, i3, o3) {
        var a3 = e4 + (t4 ^ n3 ^ s3) + r3 + o3;
        return (a3 << i3 | a3 >>> 32 - i3) + t4;
      }
      function d2(e4, t4, n3, s3, r3, i3, o3) {
        var a3 = e4 + (n3 ^ (t4 | ~s3)) + r3 + o3;
        return (a3 << i3 | a3 >>> 32 - i3) + t4;
      }
      t3.MD5 = i2._createHelper(c2), t3.HmacMD5 = i2._createHmacHelper(c2);
    }(Math), n2.MD5);
  }), n(function(e2, t2) {
    var n2;
    e2.exports = (n2 = r, void function() {
      var e3 = n2, t3 = e3.lib.Base, s2 = e3.enc.Utf8;
      e3.algo.HMAC = t3.extend({ init: function(e4, t4) {
        e4 = this._hasher = new e4.init(), "string" == typeof t4 && (t4 = s2.parse(t4));
        var n3 = e4.blockSize, r2 = 4 * n3;
        t4.sigBytes > r2 && (t4 = e4.finalize(t4)), t4.clamp();
        for (var i2 = this._oKey = t4.clone(), o2 = this._iKey = t4.clone(), a2 = i2.words, c2 = o2.words, u2 = 0; u2 < n3; u2++)
          a2[u2] ^= 1549556828, c2[u2] ^= 909522486;
        i2.sigBytes = o2.sigBytes = r2, this.reset();
      }, reset: function() {
        var e4 = this._hasher;
        e4.reset(), e4.update(this._iKey);
      }, update: function(e4) {
        return this._hasher.update(e4), this;
      }, finalize: function(e4) {
        var t4 = this._hasher, n3 = t4.finalize(e4);
        return t4.reset(), t4.finalize(this._oKey.clone().concat(n3));
      } });
    }());
  }), n(function(e2, t2) {
    e2.exports = r.HmacMD5;
  })), o = n(function(e2, t2) {
    e2.exports = r.enc.Utf8;
  }), a = n(function(e2, t2) {
    var n2;
    e2.exports = (n2 = r, function() {
      var e3 = n2, t3 = e3.lib.WordArray;
      function s2(e4, n3, s3) {
        for (var r2 = [], i2 = 0, o2 = 0; o2 < n3; o2++)
          if (o2 % 4) {
            var a2 = s3[e4.charCodeAt(o2 - 1)] << o2 % 4 * 2, c2 = s3[e4.charCodeAt(o2)] >>> 6 - o2 % 4 * 2;
            r2[i2 >>> 2] |= (a2 | c2) << 24 - i2 % 4 * 8, i2++;
          }
        return t3.create(r2, i2);
      }
      e3.enc.Base64 = { stringify: function(e4) {
        var t4 = e4.words, n3 = e4.sigBytes, s3 = this._map;
        e4.clamp();
        for (var r2 = [], i2 = 0; i2 < n3; i2 += 3)
          for (var o2 = (t4[i2 >>> 2] >>> 24 - i2 % 4 * 8 & 255) << 16 | (t4[i2 + 1 >>> 2] >>> 24 - (i2 + 1) % 4 * 8 & 255) << 8 | t4[i2 + 2 >>> 2] >>> 24 - (i2 + 2) % 4 * 8 & 255, a2 = 0; a2 < 4 && i2 + 0.75 * a2 < n3; a2++)
            r2.push(s3.charAt(o2 >>> 6 * (3 - a2) & 63));
        var c2 = s3.charAt(64);
        if (c2)
          for (; r2.length % 4; )
            r2.push(c2);
        return r2.join("");
      }, parse: function(e4) {
        var t4 = e4.length, n3 = this._map, r2 = this._reverseMap;
        if (!r2) {
          r2 = this._reverseMap = [];
          for (var i2 = 0; i2 < n3.length; i2++)
            r2[n3.charCodeAt(i2)] = i2;
        }
        var o2 = n3.charAt(64);
        if (o2) {
          var a2 = e4.indexOf(o2);
          -1 !== a2 && (t4 = a2);
        }
        return s2(e4, t4, r2);
      }, _map: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=" };
    }(), n2.enc.Base64);
  });
  const c = "uni_id_token", u = "uni_id_token_expired", h = "uniIdToken", l = { DEFAULT: "FUNCTION", FUNCTION: "FUNCTION", OBJECT: "OBJECT", CLIENT_DB: "CLIENT_DB" }, d = "pending", p = "fulfilled", f = "rejected";
  function g(e2) {
    return Object.prototype.toString.call(e2).slice(8, -1).toLowerCase();
  }
  function m(e2) {
    return "object" === g(e2);
  }
  function y(e2) {
    return "function" == typeof e2;
  }
  function _(e2) {
    return function() {
      try {
        return e2.apply(e2, arguments);
      } catch (e3) {
        console.error(e3);
      }
    };
  }
  const w = "REJECTED", I = "NOT_PENDING";
  class v {
    constructor({ createPromise: e2, retryRule: t2 = w } = {}) {
      this.createPromise = e2, this.status = null, this.promise = null, this.retryRule = t2;
    }
    get needRetry() {
      if (!this.status)
        return true;
      switch (this.retryRule) {
        case w:
          return this.status === f;
        case I:
          return this.status !== d;
      }
    }
    exec() {
      return this.needRetry ? (this.status = d, this.promise = this.createPromise().then((e2) => (this.status = p, Promise.resolve(e2)), (e2) => (this.status = f, Promise.reject(e2))), this.promise) : this.promise;
    }
  }
  class S {
    constructor() {
      this._callback = {};
    }
    addListener(e2, t2) {
      this._callback[e2] || (this._callback[e2] = []), this._callback[e2].push(t2);
    }
    on(e2, t2) {
      return this.addListener(e2, t2);
    }
    removeListener(e2, t2) {
      if (!t2)
        throw new Error('The "listener" argument must be of type function. Received undefined');
      const n2 = this._callback[e2];
      if (!n2)
        return;
      const s2 = function(e3, t3) {
        for (let n3 = e3.length - 1; n3 >= 0; n3--)
          if (e3[n3] === t3)
            return n3;
        return -1;
      }(n2, t2);
      n2.splice(s2, 1);
    }
    off(e2, t2) {
      return this.removeListener(e2, t2);
    }
    removeAllListener(e2) {
      delete this._callback[e2];
    }
    emit(e2, ...t2) {
      const n2 = this._callback[e2];
      if (n2)
        for (let e3 = 0; e3 < n2.length; e3++)
          n2[e3](...t2);
    }
  }
  function T(e2) {
    return e2 && "string" == typeof e2 ? JSON.parse(e2) : e2;
  }
  const b = true, E = "app", A = T(define_process_env_UNI_SECURE_NETWORK_CONFIG_default), P = E, C = T(""), O = T("[]") || [];
  let N = "";
  try {
    N = "__UNI__6548FAC";
  } catch (e2) {
  }
  let R, L = {};
  function U(e2, t2 = {}) {
    var n2, s2;
    return n2 = L, s2 = e2, Object.prototype.hasOwnProperty.call(n2, s2) || (L[e2] = t2), L[e2];
  }
  function D() {
    return R || (R = function() {
      if ("undefined" != typeof globalThis)
        return globalThis;
      if ("undefined" != typeof self)
        return self;
      if ("undefined" != typeof window)
        return window;
      function e2() {
        return this;
      }
      return void 0 !== e2() ? e2() : new Function("return this")();
    }(), R);
  }
  L = uni._globalUniCloudObj ? uni._globalUniCloudObj : uni._globalUniCloudObj = {};
  const M = ["invoke", "success", "fail", "complete"], q = U("_globalUniCloudInterceptor");
  function F(e2, t2) {
    q[e2] || (q[e2] = {}), m(t2) && Object.keys(t2).forEach((n2) => {
      M.indexOf(n2) > -1 && function(e3, t3, n3) {
        let s2 = q[e3][t3];
        s2 || (s2 = q[e3][t3] = []), -1 === s2.indexOf(n3) && y(n3) && s2.push(n3);
      }(e2, n2, t2[n2]);
    });
  }
  function K(e2, t2) {
    q[e2] || (q[e2] = {}), m(t2) ? Object.keys(t2).forEach((n2) => {
      M.indexOf(n2) > -1 && function(e3, t3, n3) {
        const s2 = q[e3][t3];
        if (!s2)
          return;
        const r2 = s2.indexOf(n3);
        r2 > -1 && s2.splice(r2, 1);
      }(e2, n2, t2[n2]);
    }) : delete q[e2];
  }
  function j(e2, t2) {
    return e2 && 0 !== e2.length ? e2.reduce((e3, n2) => e3.then(() => n2(t2)), Promise.resolve()) : Promise.resolve();
  }
  function $(e2, t2) {
    return q[e2] && q[e2][t2] || [];
  }
  function B(e2) {
    F("callObject", e2);
  }
  const W = U("_globalUniCloudListener"), H = { RESPONSE: "response", NEED_LOGIN: "needLogin", REFRESH_TOKEN: "refreshToken" }, J = { CLIENT_DB: "clientdb", CLOUD_FUNCTION: "cloudfunction", CLOUD_OBJECT: "cloudobject" };
  function z(e2) {
    return W[e2] || (W[e2] = []), W[e2];
  }
  function V(e2, t2) {
    const n2 = z(e2);
    n2.includes(t2) || n2.push(t2);
  }
  function G(e2, t2) {
    const n2 = z(e2), s2 = n2.indexOf(t2);
    -1 !== s2 && n2.splice(s2, 1);
  }
  function Y(e2, t2) {
    const n2 = z(e2);
    for (let e3 = 0; e3 < n2.length; e3++) {
      (0, n2[e3])(t2);
    }
  }
  let Q, X = false;
  function Z() {
    return Q || (Q = new Promise((e2) => {
      X && e2(), function t2() {
        if ("function" == typeof getCurrentPages) {
          const t3 = getCurrentPages();
          t3 && t3[0] && (X = true, e2());
        }
        X || setTimeout(() => {
          t2();
        }, 30);
      }();
    }), Q);
  }
  function ee(e2) {
    const t2 = {};
    for (const n2 in e2) {
      const s2 = e2[n2];
      y(s2) && (t2[n2] = _(s2));
    }
    return t2;
  }
  class te extends Error {
    constructor(e2) {
      const t2 = e2.message || e2.errMsg || "unknown system error";
      super(t2), this.errMsg = t2, this.code = this.errCode = e2.code || e2.errCode || "SYSTEM_ERROR", this.errSubject = this.subject = e2.subject || e2.errSubject, this.cause = e2.cause, this.requestId = e2.requestId;
    }
    toJson(e2 = 0) {
      if (!(e2 >= 10))
        return e2++, { errCode: this.errCode, errMsg: this.errMsg, errSubject: this.errSubject, cause: this.cause && this.cause.toJson ? this.cause.toJson(e2) : this.cause };
    }
  }
  var ne = { request: (e2) => uni.request(e2), uploadFile: (e2) => uni.uploadFile(e2), setStorageSync: (e2, t2) => uni.setStorageSync(e2, t2), getStorageSync: (e2) => uni.getStorageSync(e2), removeStorageSync: (e2) => uni.removeStorageSync(e2), clearStorageSync: () => uni.clearStorageSync(), connectSocket: (e2) => uni.connectSocket(e2) };
  function se(e2) {
    return e2 && se(e2.__v_raw) || e2;
  }
  function re() {
    return { token: ne.getStorageSync(c) || ne.getStorageSync(h), tokenExpired: ne.getStorageSync(u) };
  }
  function ie({ token: e2, tokenExpired: t2 } = {}) {
    e2 && ne.setStorageSync(c, e2), t2 && ne.setStorageSync(u, t2);
  }
  let oe, ae;
  function ce() {
    return oe || (oe = uni.getSystemInfoSync()), oe;
  }
  function ue() {
    let e2, t2;
    try {
      if (uni.getLaunchOptionsSync) {
        if (uni.getLaunchOptionsSync.toString().indexOf("not yet implemented") > -1)
          return;
        const { scene: n2, channel: s2 } = uni.getLaunchOptionsSync();
        e2 = s2, t2 = n2;
      }
    } catch (e3) {
    }
    return { channel: e2, scene: t2 };
  }
  let he = {};
  function le() {
    const e2 = uni.getLocale && uni.getLocale() || "en";
    if (ae)
      return { ...he, ...ae, locale: e2, LOCALE: e2 };
    const t2 = ce(), { deviceId: n2, osName: s2, uniPlatform: r2, appId: i2 } = t2, o2 = ["appId", "appLanguage", "appName", "appVersion", "appVersionCode", "appWgtVersion", "browserName", "browserVersion", "deviceBrand", "deviceId", "deviceModel", "deviceType", "osName", "osVersion", "romName", "romVersion", "ua", "hostName", "hostVersion", "uniPlatform", "uniRuntimeVersion", "uniRuntimeVersionCode", "uniCompilerVersion", "uniCompilerVersionCode"];
    for (const e3 in t2)
      Object.hasOwnProperty.call(t2, e3) && -1 === o2.indexOf(e3) && delete t2[e3];
    return ae = { PLATFORM: r2, OS: s2, APPID: i2, DEVICEID: n2, ...ue(), ...t2 }, { ...he, ...ae, locale: e2, LOCALE: e2 };
  }
  var de = { sign: function(e2, t2) {
    let n2 = "";
    return Object.keys(e2).sort().forEach(function(t3) {
      e2[t3] && (n2 = n2 + "&" + t3 + "=" + e2[t3]);
    }), n2 = n2.slice(1), i(n2, t2).toString();
  }, wrappedRequest: function(e2, t2) {
    return new Promise((n2, s2) => {
      t2(Object.assign(e2, { complete(e3) {
        e3 || (e3 = {});
        const t3 = e3.data && e3.data.header && e3.data.header["x-serverless-request-id"] || e3.header && e3.header["request-id"];
        if (!e3.statusCode || e3.statusCode >= 400) {
          const n3 = e3.data && e3.data.error && e3.data.error.code || "SYS_ERR", r3 = e3.data && e3.data.error && e3.data.error.message || e3.errMsg || "request:fail";
          return s2(new te({ code: n3, message: r3, requestId: t3 }));
        }
        const r2 = e3.data;
        if (r2.error)
          return s2(new te({ code: r2.error.code, message: r2.error.message, requestId: t3 }));
        r2.result = r2.data, r2.requestId = t3, delete r2.data, n2(r2);
      } }));
    });
  }, toBase64: function(e2) {
    return a.stringify(o.parse(e2));
  } };
  var pe = class {
    constructor(e2) {
      ["spaceId", "clientSecret"].forEach((t2) => {
        if (!Object.prototype.hasOwnProperty.call(e2, t2))
          throw new Error(`${t2} required`);
      }), this.config = Object.assign({}, { endpoint: 0 === e2.spaceId.indexOf("mp-") ? "https://api.next.bspapp.com" : "https://api.bspapp.com" }, e2), this.config.provider = "aliyun", this.config.requestUrl = this.config.endpoint + "/client", this.config.envType = this.config.envType || "public", this.config.accessTokenKey = "access_token_" + this.config.spaceId, this.adapter = ne, this._getAccessTokenPromiseHub = new v({ createPromise: () => this.requestAuth(this.setupRequest({ method: "serverless.auth.user.anonymousAuthorize", params: "{}" }, "auth")).then((e3) => {
        if (!e3.result || !e3.result.accessToken)
          throw new te({ code: "AUTH_FAILED", message: "获取accessToken失败" });
        this.setAccessToken(e3.result.accessToken);
      }), retryRule: I });
    }
    get hasAccessToken() {
      return !!this.accessToken;
    }
    setAccessToken(e2) {
      this.accessToken = e2;
    }
    requestWrapped(e2) {
      return de.wrappedRequest(e2, this.adapter.request);
    }
    requestAuth(e2) {
      return this.requestWrapped(e2);
    }
    request(e2, t2) {
      return Promise.resolve().then(() => this.hasAccessToken ? t2 ? this.requestWrapped(e2) : this.requestWrapped(e2).catch((t3) => new Promise((e3, n2) => {
        !t3 || "GATEWAY_INVALID_TOKEN" !== t3.code && "InvalidParameter.InvalidToken" !== t3.code ? n2(t3) : e3();
      }).then(() => this.getAccessToken()).then(() => {
        const t4 = this.rebuildRequest(e2);
        return this.request(t4, true);
      })) : this.getAccessToken().then(() => {
        const t3 = this.rebuildRequest(e2);
        return this.request(t3, true);
      }));
    }
    rebuildRequest(e2) {
      const t2 = Object.assign({}, e2);
      return t2.data.token = this.accessToken, t2.header["x-basement-token"] = this.accessToken, t2.header["x-serverless-sign"] = de.sign(t2.data, this.config.clientSecret), t2;
    }
    setupRequest(e2, t2) {
      const n2 = Object.assign({}, e2, { spaceId: this.config.spaceId, timestamp: Date.now() }), s2 = { "Content-Type": "application/json" };
      return "auth" !== t2 && (n2.token = this.accessToken, s2["x-basement-token"] = this.accessToken), s2["x-serverless-sign"] = de.sign(n2, this.config.clientSecret), { url: this.config.requestUrl, method: "POST", data: n2, dataType: "json", header: s2 };
    }
    getAccessToken() {
      return this._getAccessTokenPromiseHub.exec();
    }
    async authorize() {
      await this.getAccessToken();
    }
    callFunction(e2) {
      const t2 = { method: "serverless.function.runtime.invoke", params: JSON.stringify({ functionTarget: e2.name, functionArgs: e2.data || {} }) };
      return this.request({ ...this.setupRequest(t2), timeout: e2.timeout });
    }
    getOSSUploadOptionsFromPath(e2) {
      const t2 = { method: "serverless.file.resource.generateProximalSign", params: JSON.stringify(e2) };
      return this.request(this.setupRequest(t2));
    }
    uploadFileToOSS({ url: e2, formData: t2, name: n2, filePath: s2, fileType: r2, onUploadProgress: i2 }) {
      return new Promise((o2, a2) => {
        const c2 = this.adapter.uploadFile({ url: e2, formData: t2, name: n2, filePath: s2, fileType: r2, header: { "X-OSS-server-side-encrpytion": "AES256" }, success(e3) {
          e3 && e3.statusCode < 400 ? o2(e3) : a2(new te({ code: "UPLOAD_FAILED", message: "文件上传失败" }));
        }, fail(e3) {
          a2(new te({ code: e3.code || "UPLOAD_FAILED", message: e3.message || e3.errMsg || "文件上传失败" }));
        } });
        "function" == typeof i2 && c2 && "function" == typeof c2.onProgressUpdate && c2.onProgressUpdate((e3) => {
          i2({ loaded: e3.totalBytesSent, total: e3.totalBytesExpectedToSend });
        });
      });
    }
    reportOSSUpload(e2) {
      const t2 = { method: "serverless.file.resource.report", params: JSON.stringify(e2) };
      return this.request(this.setupRequest(t2));
    }
    async uploadFile({ filePath: e2, cloudPath: t2, fileType: n2 = "image", cloudPathAsRealPath: s2 = false, onUploadProgress: r2, config: i2 }) {
      if ("string" !== g(t2))
        throw new te({ code: "INVALID_PARAM", message: "cloudPath必须为字符串类型" });
      if (!(t2 = t2.trim()))
        throw new te({ code: "INVALID_PARAM", message: "cloudPath不可为空" });
      if (/:\/\//.test(t2))
        throw new te({ code: "INVALID_PARAM", message: "cloudPath不合法" });
      const o2 = i2 && i2.envType || this.config.envType;
      if (s2 && ("/" !== t2[0] && (t2 = "/" + t2), t2.indexOf("\\") > -1))
        throw new te({ code: "INVALID_PARAM", message: "使用cloudPath作为路径时，cloudPath不可包含“\\”" });
      const a2 = (await this.getOSSUploadOptionsFromPath({ env: o2, filename: s2 ? t2.split("/").pop() : t2, fileId: s2 ? t2 : void 0 })).result, c2 = "https://" + a2.cdnDomain + "/" + a2.ossPath, { securityToken: u2, accessKeyId: h2, signature: l2, host: d2, ossPath: p2, id: f2, policy: m2, ossCallbackUrl: y2 } = a2, _2 = { "Cache-Control": "max-age=2592000", "Content-Disposition": "attachment", OSSAccessKeyId: h2, Signature: l2, host: d2, id: f2, key: p2, policy: m2, success_action_status: 200 };
      if (u2 && (_2["x-oss-security-token"] = u2), y2) {
        const e3 = JSON.stringify({ callbackUrl: y2, callbackBody: JSON.stringify({ fileId: f2, spaceId: this.config.spaceId }), callbackBodyType: "application/json" });
        _2.callback = de.toBase64(e3);
      }
      const w2 = { url: "https://" + a2.host, formData: _2, fileName: "file", name: "file", filePath: e2, fileType: n2 };
      if (await this.uploadFileToOSS(Object.assign({}, w2, { onUploadProgress: r2 })), y2)
        return { success: true, filePath: e2, fileID: c2 };
      if ((await this.reportOSSUpload({ id: f2 })).success)
        return { success: true, filePath: e2, fileID: c2 };
      throw new te({ code: "UPLOAD_FAILED", message: "文件上传失败" });
    }
    getTempFileURL({ fileList: e2 } = {}) {
      return new Promise((t2, n2) => {
        Array.isArray(e2) && 0 !== e2.length || n2(new te({ code: "INVALID_PARAM", message: "fileList的元素必须是非空的字符串" })), this.getFileInfo({ fileList: e2 }).then((n3) => {
          t2({ fileList: e2.map((e3, t3) => {
            const s2 = n3.fileList[t3];
            return { fileID: e3, tempFileURL: s2 && s2.url || e3 };
          }) });
        });
      });
    }
    async getFileInfo({ fileList: e2 } = {}) {
      if (!Array.isArray(e2) || 0 === e2.length)
        throw new te({ code: "INVALID_PARAM", message: "fileList的元素必须是非空的字符串" });
      const t2 = { method: "serverless.file.resource.info", params: JSON.stringify({ id: e2.map((e3) => e3.split("?")[0]).join(",") }) };
      return { fileList: (await this.request(this.setupRequest(t2))).result };
    }
  };
  var fe = { init(e2) {
    const t2 = new pe(e2), n2 = { signInAnonymously: function() {
      return t2.authorize();
    }, getLoginState: function() {
      return Promise.resolve(false);
    } };
    return t2.auth = function() {
      return n2;
    }, t2.customAuth = t2.auth, t2;
  } };
  const ge = "undefined" != typeof location && "http:" === location.protocol ? "http:" : "https:";
  var me;
  !function(e2) {
    e2.local = "local", e2.none = "none", e2.session = "session";
  }(me || (me = {}));
  var ye = function() {
  }, _e = n(function(e2, t2) {
    var n2;
    e2.exports = (n2 = r, function(e3) {
      var t3 = n2, s2 = t3.lib, r2 = s2.WordArray, i2 = s2.Hasher, o2 = t3.algo, a2 = [], c2 = [];
      !function() {
        function t4(t5) {
          for (var n4 = e3.sqrt(t5), s4 = 2; s4 <= n4; s4++)
            if (!(t5 % s4))
              return false;
          return true;
        }
        function n3(e4) {
          return 4294967296 * (e4 - (0 | e4)) | 0;
        }
        for (var s3 = 2, r3 = 0; r3 < 64; )
          t4(s3) && (r3 < 8 && (a2[r3] = n3(e3.pow(s3, 0.5))), c2[r3] = n3(e3.pow(s3, 1 / 3)), r3++), s3++;
      }();
      var u2 = [], h2 = o2.SHA256 = i2.extend({ _doReset: function() {
        this._hash = new r2.init(a2.slice(0));
      }, _doProcessBlock: function(e4, t4) {
        for (var n3 = this._hash.words, s3 = n3[0], r3 = n3[1], i3 = n3[2], o3 = n3[3], a3 = n3[4], h3 = n3[5], l2 = n3[6], d2 = n3[7], p2 = 0; p2 < 64; p2++) {
          if (p2 < 16)
            u2[p2] = 0 | e4[t4 + p2];
          else {
            var f2 = u2[p2 - 15], g2 = (f2 << 25 | f2 >>> 7) ^ (f2 << 14 | f2 >>> 18) ^ f2 >>> 3, m2 = u2[p2 - 2], y2 = (m2 << 15 | m2 >>> 17) ^ (m2 << 13 | m2 >>> 19) ^ m2 >>> 10;
            u2[p2] = g2 + u2[p2 - 7] + y2 + u2[p2 - 16];
          }
          var _2 = s3 & r3 ^ s3 & i3 ^ r3 & i3, w2 = (s3 << 30 | s3 >>> 2) ^ (s3 << 19 | s3 >>> 13) ^ (s3 << 10 | s3 >>> 22), I2 = d2 + ((a3 << 26 | a3 >>> 6) ^ (a3 << 21 | a3 >>> 11) ^ (a3 << 7 | a3 >>> 25)) + (a3 & h3 ^ ~a3 & l2) + c2[p2] + u2[p2];
          d2 = l2, l2 = h3, h3 = a3, a3 = o3 + I2 | 0, o3 = i3, i3 = r3, r3 = s3, s3 = I2 + (w2 + _2) | 0;
        }
        n3[0] = n3[0] + s3 | 0, n3[1] = n3[1] + r3 | 0, n3[2] = n3[2] + i3 | 0, n3[3] = n3[3] + o3 | 0, n3[4] = n3[4] + a3 | 0, n3[5] = n3[5] + h3 | 0, n3[6] = n3[6] + l2 | 0, n3[7] = n3[7] + d2 | 0;
      }, _doFinalize: function() {
        var t4 = this._data, n3 = t4.words, s3 = 8 * this._nDataBytes, r3 = 8 * t4.sigBytes;
        return n3[r3 >>> 5] |= 128 << 24 - r3 % 32, n3[14 + (r3 + 64 >>> 9 << 4)] = e3.floor(s3 / 4294967296), n3[15 + (r3 + 64 >>> 9 << 4)] = s3, t4.sigBytes = 4 * n3.length, this._process(), this._hash;
      }, clone: function() {
        var e4 = i2.clone.call(this);
        return e4._hash = this._hash.clone(), e4;
      } });
      t3.SHA256 = i2._createHelper(h2), t3.HmacSHA256 = i2._createHmacHelper(h2);
    }(Math), n2.SHA256);
  }), we = _e, Ie = n(function(e2, t2) {
    e2.exports = r.HmacSHA256;
  });
  const ve = () => {
    let e2;
    if (!Promise) {
      e2 = () => {
      }, e2.promise = {};
      const t3 = () => {
        throw new te({ message: 'Your Node runtime does support ES6 Promises. Set "global.Promise" to your preferred implementation of promises.' });
      };
      return Object.defineProperty(e2.promise, "then", { get: t3 }), Object.defineProperty(e2.promise, "catch", { get: t3 }), e2;
    }
    const t2 = new Promise((t3, n2) => {
      e2 = (e3, s2) => e3 ? n2(e3) : t3(s2);
    });
    return e2.promise = t2, e2;
  };
  function Se(e2) {
    return void 0 === e2;
  }
  function Te(e2) {
    return "[object Null]" === Object.prototype.toString.call(e2);
  }
  function be(e2 = "") {
    return e2.replace(/([\s\S]+)\s+(请前往云开发AI小助手查看问题：.*)/, "$1");
  }
  function Ee(e2 = 32) {
    const t2 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
    let n2 = "";
    for (let s2 = 0; s2 < e2; s2++)
      n2 += t2.charAt(Math.floor(62 * Math.random()));
    return n2;
  }
  var ke;
  function Ae(e2) {
    const t2 = (n2 = e2, "[object Array]" === Object.prototype.toString.call(n2) ? e2 : [e2]);
    var n2;
    for (const e3 of t2) {
      const { isMatch: t3, genAdapter: n3, runtime: s2 } = e3;
      if (t3())
        return { adapter: n3(), runtime: s2 };
    }
  }
  !function(e2) {
    e2.WEB = "web", e2.WX_MP = "wx_mp";
  }(ke || (ke = {}));
  const Pe = { adapter: null, runtime: void 0 }, Ce = ["anonymousUuidKey"];
  class Oe extends ye {
    constructor() {
      super(), Pe.adapter.root.tcbObject || (Pe.adapter.root.tcbObject = {});
    }
    setItem(e2, t2) {
      Pe.adapter.root.tcbObject[e2] = t2;
    }
    getItem(e2) {
      return Pe.adapter.root.tcbObject[e2];
    }
    removeItem(e2) {
      delete Pe.adapter.root.tcbObject[e2];
    }
    clear() {
      delete Pe.adapter.root.tcbObject;
    }
  }
  function xe(e2, t2) {
    switch (e2) {
      case "local":
        return t2.localStorage || new Oe();
      case "none":
        return new Oe();
      default:
        return t2.sessionStorage || new Oe();
    }
  }
  class Ne {
    constructor(e2) {
      if (!this._storage) {
        this._persistence = Pe.adapter.primaryStorage || e2.persistence, this._storage = xe(this._persistence, Pe.adapter);
        const t2 = `access_token_${e2.env}`, n2 = `access_token_expire_${e2.env}`, s2 = `refresh_token_${e2.env}`, r2 = `anonymous_uuid_${e2.env}`, i2 = `login_type_${e2.env}`, o2 = "device_id", a2 = `token_type_${e2.env}`, c2 = `user_info_${e2.env}`;
        this.keys = { accessTokenKey: t2, accessTokenExpireKey: n2, refreshTokenKey: s2, anonymousUuidKey: r2, loginTypeKey: i2, userInfoKey: c2, deviceIdKey: o2, tokenTypeKey: a2 };
      }
    }
    updatePersistence(e2) {
      if (e2 === this._persistence)
        return;
      const t2 = "local" === this._persistence;
      this._persistence = e2;
      const n2 = xe(e2, Pe.adapter);
      for (const e3 in this.keys) {
        const s2 = this.keys[e3];
        if (t2 && Ce.includes(e3))
          continue;
        const r2 = this._storage.getItem(s2);
        Se(r2) || Te(r2) || (n2.setItem(s2, r2), this._storage.removeItem(s2));
      }
      this._storage = n2;
    }
    setStore(e2, t2, n2) {
      if (!this._storage)
        return;
      const s2 = { version: n2 || "localCachev1", content: t2 }, r2 = JSON.stringify(s2);
      try {
        this._storage.setItem(e2, r2);
      } catch (e3) {
        throw e3;
      }
    }
    getStore(e2, t2) {
      try {
        if (!this._storage)
          return;
      } catch (e3) {
        return "";
      }
      t2 = t2 || "localCachev1";
      const n2 = this._storage.getItem(e2);
      if (!n2)
        return "";
      if (n2.indexOf(t2) >= 0) {
        return JSON.parse(n2).content;
      }
      return "";
    }
    removeStore(e2) {
      this._storage.removeItem(e2);
    }
  }
  const Re = {}, Le = {};
  function Ue(e2) {
    return Re[e2];
  }
  class De {
    constructor(e2, t2) {
      this.data = t2 || null, this.name = e2;
    }
  }
  class Me extends De {
    constructor(e2, t2) {
      super("error", { error: e2, data: t2 }), this.error = e2;
    }
  }
  const qe = new class {
    constructor() {
      this._listeners = {};
    }
    on(e2, t2) {
      return function(e3, t3, n2) {
        n2[e3] = n2[e3] || [], n2[e3].push(t3);
      }(e2, t2, this._listeners), this;
    }
    off(e2, t2) {
      return function(e3, t3, n2) {
        if (n2 && n2[e3]) {
          const s2 = n2[e3].indexOf(t3);
          -1 !== s2 && n2[e3].splice(s2, 1);
        }
      }(e2, t2, this._listeners), this;
    }
    fire(e2, t2) {
      if (e2 instanceof Me)
        return console.error(e2.error), this;
      const n2 = "string" == typeof e2 ? new De(e2, t2 || {}) : e2;
      const s2 = n2.name;
      if (this._listens(s2)) {
        n2.target = this;
        const e3 = this._listeners[s2] ? [...this._listeners[s2]] : [];
        for (const t3 of e3)
          t3.call(this, n2);
      }
      return this;
    }
    _listens(e2) {
      return this._listeners[e2] && this._listeners[e2].length > 0;
    }
  }();
  function Fe(e2, t2) {
    qe.on(e2, t2);
  }
  function Ke(e2, t2 = {}) {
    qe.fire(e2, t2);
  }
  function je(e2, t2) {
    qe.off(e2, t2);
  }
  const $e = "loginStateChanged", Be = "loginStateExpire", We = "loginTypeChanged", He = "anonymousConverted", Je = "refreshAccessToken";
  var ze;
  !function(e2) {
    e2.ANONYMOUS = "ANONYMOUS", e2.WECHAT = "WECHAT", e2.WECHAT_PUBLIC = "WECHAT-PUBLIC", e2.WECHAT_OPEN = "WECHAT-OPEN", e2.CUSTOM = "CUSTOM", e2.EMAIL = "EMAIL", e2.USERNAME = "USERNAME", e2.NULL = "NULL";
  }(ze || (ze = {}));
  class Ve {
    constructor() {
      this._fnPromiseMap = /* @__PURE__ */ new Map();
    }
    async run(e2, t2) {
      let n2 = this._fnPromiseMap.get(e2);
      return n2 || (n2 = new Promise(async (n3, s2) => {
        try {
          await this._runIdlePromise();
          const e3 = t2();
          n3(await e3);
        } catch (e3) {
          s2(e3);
        } finally {
          this._fnPromiseMap.delete(e2);
        }
      }), this._fnPromiseMap.set(e2, n2)), n2;
    }
    _runIdlePromise() {
      return Promise.resolve();
    }
  }
  class Ge {
    constructor(e2) {
      this._singlePromise = new Ve(), this._cache = Ue(e2.env), this._baseURL = `https://${e2.env}.ap-shanghai.tcb-api.tencentcloudapi.com`, this._reqClass = new Pe.adapter.reqClass({ timeout: e2.timeout, timeoutMsg: `请求在${e2.timeout / 1e3}s内未完成，已中断`, restrictedMethods: ["post"] });
    }
    _getDeviceId() {
      if (this._deviceID)
        return this._deviceID;
      const { deviceIdKey: e2 } = this._cache.keys;
      let t2 = this._cache.getStore(e2);
      return "string" == typeof t2 && t2.length >= 16 && t2.length <= 48 || (t2 = Ee(), this._cache.setStore(e2, t2)), this._deviceID = t2, t2;
    }
    async _request(e2, t2, n2 = {}) {
      const s2 = { "x-request-id": Ee(), "x-device-id": this._getDeviceId() };
      if (n2.withAccessToken) {
        const { tokenTypeKey: e3 } = this._cache.keys, t3 = await this.getAccessToken(), n3 = this._cache.getStore(e3);
        s2.authorization = `${n3} ${t3}`;
      }
      return this._reqClass["get" === n2.method ? "get" : "post"]({ url: `${this._baseURL}${e2}`, data: t2, headers: s2 });
    }
    async _fetchAccessToken() {
      const { loginTypeKey: e2, accessTokenKey: t2, accessTokenExpireKey: n2, tokenTypeKey: s2 } = this._cache.keys, r2 = this._cache.getStore(e2);
      if (r2 && r2 !== ze.ANONYMOUS)
        throw new te({ code: "INVALID_OPERATION", message: "非匿名登录不支持刷新 access token" });
      const i2 = await this._singlePromise.run("fetchAccessToken", async () => (await this._request("/auth/v1/signin/anonymously", {}, { method: "post" })).data), { access_token: o2, expires_in: a2, token_type: c2 } = i2;
      return this._cache.setStore(s2, c2), this._cache.setStore(t2, o2), this._cache.setStore(n2, Date.now() + 1e3 * a2), o2;
    }
    isAccessTokenExpired(e2, t2) {
      let n2 = true;
      return e2 && t2 && (n2 = t2 < Date.now()), n2;
    }
    async getAccessToken() {
      const { accessTokenKey: e2, accessTokenExpireKey: t2 } = this._cache.keys, n2 = this._cache.getStore(e2), s2 = this._cache.getStore(t2);
      return this.isAccessTokenExpired(n2, s2) ? this._fetchAccessToken() : n2;
    }
    async refreshAccessToken() {
      const { accessTokenKey: e2, accessTokenExpireKey: t2, loginTypeKey: n2 } = this._cache.keys;
      return this._cache.removeStore(e2), this._cache.removeStore(t2), this._cache.setStore(n2, ze.ANONYMOUS), this.getAccessToken();
    }
    async getUserInfo() {
      return this._singlePromise.run("getUserInfo", async () => (await this._request("/auth/v1/user/me", {}, { withAccessToken: true, method: "get" })).data);
    }
  }
  const Ye = ["auth.getJwt", "auth.logout", "auth.signInWithTicket", "auth.signInAnonymously", "auth.signIn", "auth.fetchAccessTokenWithRefreshToken", "auth.signUpWithEmailAndPassword", "auth.activateEndUserMail", "auth.sendPasswordResetEmail", "auth.resetPasswordWithToken", "auth.isUsernameRegistered"], Qe = { "X-SDK-Version": "1.3.5" };
  function Xe(e2, t2, n2) {
    const s2 = e2[t2];
    e2[t2] = function(t3) {
      const r2 = {}, i2 = {};
      n2.forEach((n3) => {
        const { data: s3, headers: o3 } = n3.call(e2, t3);
        Object.assign(r2, s3), Object.assign(i2, o3);
      });
      const o2 = t3.data;
      return o2 && (() => {
        var e3;
        if (e3 = o2, "[object FormData]" !== Object.prototype.toString.call(e3))
          t3.data = { ...o2, ...r2 };
        else
          for (const e4 in r2)
            o2.append(e4, r2[e4]);
      })(), t3.headers = { ...t3.headers || {}, ...i2 }, s2.call(e2, t3);
    };
  }
  function Ze() {
    const e2 = Math.random().toString(16).slice(2);
    return { data: { seqId: e2 }, headers: { ...Qe, "x-seqid": e2 } };
  }
  class et {
    constructor(e2 = {}) {
      var t2;
      this.config = e2, this._reqClass = new Pe.adapter.reqClass({ timeout: this.config.timeout, timeoutMsg: `请求在${this.config.timeout / 1e3}s内未完成，已中断`, restrictedMethods: ["post"] }), this._cache = Ue(this.config.env), this._localCache = (t2 = this.config.env, Le[t2]), this.oauth = new Ge(this.config), Xe(this._reqClass, "post", [Ze]), Xe(this._reqClass, "upload", [Ze]), Xe(this._reqClass, "download", [Ze]);
    }
    async post(e2) {
      return await this._reqClass.post(e2);
    }
    async upload(e2) {
      return await this._reqClass.upload(e2);
    }
    async download(e2) {
      return await this._reqClass.download(e2);
    }
    async refreshAccessToken() {
      let e2, t2;
      this._refreshAccessTokenPromise || (this._refreshAccessTokenPromise = this._refreshAccessToken());
      try {
        e2 = await this._refreshAccessTokenPromise;
      } catch (e3) {
        t2 = e3;
      }
      if (this._refreshAccessTokenPromise = null, this._shouldRefreshAccessTokenHook = null, t2)
        throw t2;
      return e2;
    }
    async _refreshAccessToken() {
      const { accessTokenKey: e2, accessTokenExpireKey: t2, refreshTokenKey: n2, loginTypeKey: s2, anonymousUuidKey: r2 } = this._cache.keys;
      this._cache.removeStore(e2), this._cache.removeStore(t2);
      let i2 = this._cache.getStore(n2);
      if (!i2)
        throw new te({ message: "未登录CloudBase" });
      const o2 = { refresh_token: i2 }, a2 = await this.request("auth.fetchAccessTokenWithRefreshToken", o2);
      if (a2.data.code) {
        const { code: e3 } = a2.data;
        if ("SIGN_PARAM_INVALID" === e3 || "REFRESH_TOKEN_EXPIRED" === e3 || "INVALID_REFRESH_TOKEN" === e3) {
          if (this._cache.getStore(s2) === ze.ANONYMOUS && "INVALID_REFRESH_TOKEN" === e3) {
            const e4 = this._cache.getStore(r2), t3 = this._cache.getStore(n2), s3 = await this.send("auth.signInAnonymously", { anonymous_uuid: e4, refresh_token: t3 });
            return this.setRefreshToken(s3.refresh_token), this._refreshAccessToken();
          }
          Ke(Be), this._cache.removeStore(n2);
        }
        throw new te({ code: a2.data.code, message: `刷新access token失败：${a2.data.code}` });
      }
      if (a2.data.access_token)
        return Ke(Je), this._cache.setStore(e2, a2.data.access_token), this._cache.setStore(t2, a2.data.access_token_expire + Date.now()), { accessToken: a2.data.access_token, accessTokenExpire: a2.data.access_token_expire };
      a2.data.refresh_token && (this._cache.removeStore(n2), this._cache.setStore(n2, a2.data.refresh_token), this._refreshAccessToken());
    }
    async getAccessToken() {
      const { accessTokenKey: e2, accessTokenExpireKey: t2, refreshTokenKey: n2 } = this._cache.keys;
      if (!this._cache.getStore(n2))
        throw new te({ message: "refresh token不存在，登录状态异常" });
      let s2 = this._cache.getStore(e2), r2 = this._cache.getStore(t2), i2 = true;
      return this._shouldRefreshAccessTokenHook && !await this._shouldRefreshAccessTokenHook(s2, r2) && (i2 = false), (!s2 || !r2 || r2 < Date.now()) && i2 ? this.refreshAccessToken() : { accessToken: s2, accessTokenExpire: r2 };
    }
    async request(e2, t2, n2) {
      const s2 = `x-tcb-trace_${this.config.env}`;
      let r2 = "application/x-www-form-urlencoded";
      const i2 = { action: e2, env: this.config.env, dataVersion: "2019-08-16", ...t2 };
      let o2;
      if (-1 === Ye.indexOf(e2) && (this._cache.keys, i2.access_token = await this.oauth.getAccessToken()), "storage.uploadFile" === e2) {
        o2 = new FormData();
        for (let e3 in o2)
          o2.hasOwnProperty(e3) && void 0 !== o2[e3] && o2.append(e3, i2[e3]);
        r2 = "multipart/form-data";
      } else {
        r2 = "application/json", o2 = {};
        for (let e3 in i2)
          void 0 !== i2[e3] && (o2[e3] = i2[e3]);
      }
      let a2 = { headers: { "content-type": r2 } };
      n2 && n2.timeout && (a2.timeout = n2.timeout), n2 && n2.onUploadProgress && (a2.onUploadProgress = n2.onUploadProgress);
      const c2 = this._localCache.getStore(s2);
      c2 && (a2.headers["X-TCB-Trace"] = c2);
      const { parse: u2, inQuery: h2, search: l2 } = t2;
      let d2 = { env: this.config.env };
      u2 && (d2.parse = true), h2 && (d2 = { ...h2, ...d2 });
      let p2 = function(e3, t3, n3 = {}) {
        const s3 = /\?/.test(t3);
        let r3 = "";
        for (let e4 in n3)
          "" === r3 ? !s3 && (t3 += "?") : r3 += "&", r3 += `${e4}=${encodeURIComponent(n3[e4])}`;
        return /^http(s)?\:\/\//.test(t3 += r3) ? t3 : `${e3}${t3}`;
      }(ge, "//tcb-api.tencentcloudapi.com/web", d2);
      l2 && (p2 += l2);
      const f2 = await this.post({ url: p2, data: o2, ...a2 }), g2 = f2.header && f2.header["x-tcb-trace"];
      if (g2 && this._localCache.setStore(s2, g2), 200 !== Number(f2.status) && 200 !== Number(f2.statusCode) || !f2.data)
        throw new te({ code: "NETWORK_ERROR", message: "network request error" });
      return f2;
    }
    async send(e2, t2 = {}, n2 = {}) {
      const s2 = await this.request(e2, t2, { ...n2, onUploadProgress: t2.onUploadProgress });
      if (("ACCESS_TOKEN_DISABLED" === s2.data.code || "ACCESS_TOKEN_EXPIRED" === s2.data.code) && -1 === Ye.indexOf(e2)) {
        await this.oauth.refreshAccessToken();
        const s3 = await this.request(e2, t2, { ...n2, onUploadProgress: t2.onUploadProgress });
        if (s3.data.code)
          throw new te({ code: s3.data.code, message: be(s3.data.message) });
        return s3.data;
      }
      if (s2.data.code)
        throw new te({ code: s2.data.code, message: be(s2.data.message) });
      return s2.data;
    }
    setRefreshToken(e2) {
      const { accessTokenKey: t2, accessTokenExpireKey: n2, refreshTokenKey: s2 } = this._cache.keys;
      this._cache.removeStore(t2), this._cache.removeStore(n2), this._cache.setStore(s2, e2);
    }
  }
  const tt$1 = {};
  function nt(e2) {
    return tt$1[e2];
  }
  class st {
    constructor(e2) {
      this.config = e2, this._cache = Ue(e2.env), this._request = nt(e2.env);
    }
    setRefreshToken(e2) {
      const { accessTokenKey: t2, accessTokenExpireKey: n2, refreshTokenKey: s2 } = this._cache.keys;
      this._cache.removeStore(t2), this._cache.removeStore(n2), this._cache.setStore(s2, e2);
    }
    setAccessToken(e2, t2) {
      const { accessTokenKey: n2, accessTokenExpireKey: s2 } = this._cache.keys;
      this._cache.setStore(n2, e2), this._cache.setStore(s2, t2);
    }
    async refreshUserInfo() {
      const { data: e2 } = await this._request.send("auth.getUserInfo", {});
      return this.setLocalUserInfo(e2), e2;
    }
    setLocalUserInfo(e2) {
      const { userInfoKey: t2 } = this._cache.keys;
      this._cache.setStore(t2, e2);
    }
  }
  class rt {
    constructor(e2) {
      if (!e2)
        throw new te({ code: "PARAM_ERROR", message: "envId is not defined" });
      this._envId = e2, this._cache = Ue(this._envId), this._request = nt(this._envId), this.setUserInfo();
    }
    linkWithTicket(e2) {
      if ("string" != typeof e2)
        throw new te({ code: "PARAM_ERROR", message: "ticket must be string" });
      return this._request.send("auth.linkWithTicket", { ticket: e2 });
    }
    linkWithRedirect(e2) {
      e2.signInWithRedirect();
    }
    updatePassword(e2, t2) {
      return this._request.send("auth.updatePassword", { oldPassword: t2, newPassword: e2 });
    }
    updateEmail(e2) {
      return this._request.send("auth.updateEmail", { newEmail: e2 });
    }
    updateUsername(e2) {
      if ("string" != typeof e2)
        throw new te({ code: "PARAM_ERROR", message: "username must be a string" });
      return this._request.send("auth.updateUsername", { username: e2 });
    }
    async getLinkedUidList() {
      const { data: e2 } = await this._request.send("auth.getLinkedUidList", {});
      let t2 = false;
      const { users: n2 } = e2;
      return n2.forEach((e3) => {
        e3.wxOpenId && e3.wxPublicId && (t2 = true);
      }), { users: n2, hasPrimaryUid: t2 };
    }
    setPrimaryUid(e2) {
      return this._request.send("auth.setPrimaryUid", { uid: e2 });
    }
    unlink(e2) {
      return this._request.send("auth.unlink", { platform: e2 });
    }
    async update(e2) {
      const { nickName: t2, gender: n2, avatarUrl: s2, province: r2, country: i2, city: o2 } = e2, { data: a2 } = await this._request.send("auth.updateUserInfo", { nickName: t2, gender: n2, avatarUrl: s2, province: r2, country: i2, city: o2 });
      this.setLocalUserInfo(a2);
    }
    async refresh() {
      const e2 = await this._request.oauth.getUserInfo();
      return this.setLocalUserInfo(e2), e2;
    }
    setUserInfo() {
      const { userInfoKey: e2 } = this._cache.keys, t2 = this._cache.getStore(e2);
      ["uid", "loginType", "openid", "wxOpenId", "wxPublicId", "unionId", "qqMiniOpenId", "email", "hasPassword", "customUserId", "nickName", "gender", "avatarUrl"].forEach((e3) => {
        this[e3] = t2[e3];
      }), this.location = { country: t2.country, province: t2.province, city: t2.city };
    }
    setLocalUserInfo(e2) {
      const { userInfoKey: t2 } = this._cache.keys;
      this._cache.setStore(t2, e2), this.setUserInfo();
    }
  }
  class it {
    constructor(e2) {
      if (!e2)
        throw new te({ code: "PARAM_ERROR", message: "envId is not defined" });
      this._cache = Ue(e2);
      const { refreshTokenKey: t2, accessTokenKey: n2, accessTokenExpireKey: s2 } = this._cache.keys, r2 = this._cache.getStore(t2), i2 = this._cache.getStore(n2), o2 = this._cache.getStore(s2);
      this.credential = { refreshToken: r2, accessToken: i2, accessTokenExpire: o2 }, this.user = new rt(e2);
    }
    get isAnonymousAuth() {
      return this.loginType === ze.ANONYMOUS;
    }
    get isCustomAuth() {
      return this.loginType === ze.CUSTOM;
    }
    get isWeixinAuth() {
      return this.loginType === ze.WECHAT || this.loginType === ze.WECHAT_OPEN || this.loginType === ze.WECHAT_PUBLIC;
    }
    get loginType() {
      return this._cache.getStore(this._cache.keys.loginTypeKey);
    }
  }
  class ot extends st {
    async signIn() {
      this._cache.updatePersistence("local"), await this._request.oauth.getAccessToken(), Ke($e), Ke(We, { env: this.config.env, loginType: ze.ANONYMOUS, persistence: "local" });
      const e2 = new it(this.config.env);
      return await e2.user.refresh(), e2;
    }
    async linkAndRetrieveDataWithTicket(e2) {
      const { anonymousUuidKey: t2, refreshTokenKey: n2 } = this._cache.keys, s2 = this._cache.getStore(t2), r2 = this._cache.getStore(n2), i2 = await this._request.send("auth.linkAndRetrieveDataWithTicket", { anonymous_uuid: s2, refresh_token: r2, ticket: e2 });
      if (i2.refresh_token)
        return this._clearAnonymousUUID(), this.setRefreshToken(i2.refresh_token), await this._request.refreshAccessToken(), Ke(He, { env: this.config.env }), Ke(We, { loginType: ze.CUSTOM, persistence: "local" }), { credential: { refreshToken: i2.refresh_token } };
      throw new te({ message: "匿名转化失败" });
    }
    _setAnonymousUUID(e2) {
      const { anonymousUuidKey: t2, loginTypeKey: n2 } = this._cache.keys;
      this._cache.removeStore(t2), this._cache.setStore(t2, e2), this._cache.setStore(n2, ze.ANONYMOUS);
    }
    _clearAnonymousUUID() {
      this._cache.removeStore(this._cache.keys.anonymousUuidKey);
    }
  }
  class at extends st {
    async signIn(e2) {
      if ("string" != typeof e2)
        throw new te({ code: "PARAM_ERROR", message: "ticket must be a string" });
      const { refreshTokenKey: t2 } = this._cache.keys, n2 = await this._request.send("auth.signInWithTicket", { ticket: e2, refresh_token: this._cache.getStore(t2) || "" });
      if (n2.refresh_token)
        return this.setRefreshToken(n2.refresh_token), await this._request.refreshAccessToken(), Ke($e), Ke(We, { env: this.config.env, loginType: ze.CUSTOM, persistence: this.config.persistence }), await this.refreshUserInfo(), new it(this.config.env);
      throw new te({ message: "自定义登录失败" });
    }
  }
  class ct extends st {
    async signIn(e2, t2) {
      if ("string" != typeof e2)
        throw new te({ code: "PARAM_ERROR", message: "email must be a string" });
      const { refreshTokenKey: n2 } = this._cache.keys, s2 = await this._request.send("auth.signIn", { loginType: "EMAIL", email: e2, password: t2, refresh_token: this._cache.getStore(n2) || "" }), { refresh_token: r2, access_token: i2, access_token_expire: o2 } = s2;
      if (r2)
        return this.setRefreshToken(r2), i2 && o2 ? this.setAccessToken(i2, o2) : await this._request.refreshAccessToken(), await this.refreshUserInfo(), Ke($e), Ke(We, { env: this.config.env, loginType: ze.EMAIL, persistence: this.config.persistence }), new it(this.config.env);
      throw s2.code ? new te({ code: s2.code, message: `邮箱登录失败: ${s2.message}` }) : new te({ message: "邮箱登录失败" });
    }
    async activate(e2) {
      return this._request.send("auth.activateEndUserMail", { token: e2 });
    }
    async resetPasswordWithToken(e2, t2) {
      return this._request.send("auth.resetPasswordWithToken", { token: e2, newPassword: t2 });
    }
  }
  class ut extends st {
    async signIn(e2, t2) {
      if ("string" != typeof e2)
        throw new te({ code: "PARAM_ERROR", message: "username must be a string" });
      "string" != typeof t2 && (t2 = "", console.warn("password is empty"));
      const { refreshTokenKey: n2 } = this._cache.keys, s2 = await this._request.send("auth.signIn", { loginType: ze.USERNAME, username: e2, password: t2, refresh_token: this._cache.getStore(n2) || "" }), { refresh_token: r2, access_token_expire: i2, access_token: o2 } = s2;
      if (r2)
        return this.setRefreshToken(r2), o2 && i2 ? this.setAccessToken(o2, i2) : await this._request.refreshAccessToken(), await this.refreshUserInfo(), Ke($e), Ke(We, { env: this.config.env, loginType: ze.USERNAME, persistence: this.config.persistence }), new it(this.config.env);
      throw s2.code ? new te({ code: s2.code, message: `用户名密码登录失败: ${s2.message}` }) : new te({ message: "用户名密码登录失败" });
    }
  }
  class ht {
    constructor(e2) {
      this.config = e2, this._cache = Ue(e2.env), this._request = nt(e2.env), this._onAnonymousConverted = this._onAnonymousConverted.bind(this), this._onLoginTypeChanged = this._onLoginTypeChanged.bind(this), Fe(We, this._onLoginTypeChanged);
    }
    get currentUser() {
      const e2 = this.hasLoginState();
      return e2 && e2.user || null;
    }
    get loginType() {
      return this._cache.getStore(this._cache.keys.loginTypeKey);
    }
    anonymousAuthProvider() {
      return new ot(this.config);
    }
    customAuthProvider() {
      return new at(this.config);
    }
    emailAuthProvider() {
      return new ct(this.config);
    }
    usernameAuthProvider() {
      return new ut(this.config);
    }
    async signInAnonymously() {
      return new ot(this.config).signIn();
    }
    async signInWithEmailAndPassword(e2, t2) {
      return new ct(this.config).signIn(e2, t2);
    }
    signInWithUsernameAndPassword(e2, t2) {
      return new ut(this.config).signIn(e2, t2);
    }
    async linkAndRetrieveDataWithTicket(e2) {
      this._anonymousAuthProvider || (this._anonymousAuthProvider = new ot(this.config)), Fe(He, this._onAnonymousConverted);
      return await this._anonymousAuthProvider.linkAndRetrieveDataWithTicket(e2);
    }
    async signOut() {
      if (this.loginType === ze.ANONYMOUS)
        throw new te({ message: "匿名用户不支持登出操作" });
      const { refreshTokenKey: e2, accessTokenKey: t2, accessTokenExpireKey: n2 } = this._cache.keys, s2 = this._cache.getStore(e2);
      if (!s2)
        return;
      const r2 = await this._request.send("auth.logout", { refresh_token: s2 });
      return this._cache.removeStore(e2), this._cache.removeStore(t2), this._cache.removeStore(n2), Ke($e), Ke(We, { env: this.config.env, loginType: ze.NULL, persistence: this.config.persistence }), r2;
    }
    async signUpWithEmailAndPassword(e2, t2) {
      return this._request.send("auth.signUpWithEmailAndPassword", { email: e2, password: t2 });
    }
    async sendPasswordResetEmail(e2) {
      return this._request.send("auth.sendPasswordResetEmail", { email: e2 });
    }
    onLoginStateChanged(e2) {
      Fe($e, () => {
        const t3 = this.hasLoginState();
        e2.call(this, t3);
      });
      const t2 = this.hasLoginState();
      e2.call(this, t2);
    }
    onLoginStateExpired(e2) {
      Fe(Be, e2.bind(this));
    }
    onAccessTokenRefreshed(e2) {
      Fe(Je, e2.bind(this));
    }
    onAnonymousConverted(e2) {
      Fe(He, e2.bind(this));
    }
    onLoginTypeChanged(e2) {
      Fe(We, () => {
        const t2 = this.hasLoginState();
        e2.call(this, t2);
      });
    }
    async getAccessToken() {
      return { accessToken: (await this._request.getAccessToken()).accessToken, env: this.config.env };
    }
    hasLoginState() {
      const { accessTokenKey: e2, accessTokenExpireKey: t2 } = this._cache.keys, n2 = this._cache.getStore(e2), s2 = this._cache.getStore(t2);
      return this._request.oauth.isAccessTokenExpired(n2, s2) ? null : new it(this.config.env);
    }
    async isUsernameRegistered(e2) {
      if ("string" != typeof e2)
        throw new te({ code: "PARAM_ERROR", message: "username must be a string" });
      const { data: t2 } = await this._request.send("auth.isUsernameRegistered", { username: e2 });
      return t2 && t2.isRegistered;
    }
    getLoginState() {
      return Promise.resolve(this.hasLoginState());
    }
    async signInWithTicket(e2) {
      return new at(this.config).signIn(e2);
    }
    shouldRefreshAccessToken(e2) {
      this._request._shouldRefreshAccessTokenHook = e2.bind(this);
    }
    getUserInfo() {
      return this._request.send("auth.getUserInfo", {}).then((e2) => e2.code ? e2 : { ...e2.data, requestId: e2.seqId });
    }
    getAuthHeader() {
      const { refreshTokenKey: e2, accessTokenKey: t2 } = this._cache.keys, n2 = this._cache.getStore(e2);
      return { "x-cloudbase-credentials": this._cache.getStore(t2) + "/@@/" + n2 };
    }
    _onAnonymousConverted(e2) {
      const { env: t2 } = e2.data;
      t2 === this.config.env && this._cache.updatePersistence(this.config.persistence);
    }
    _onLoginTypeChanged(e2) {
      const { loginType: t2, persistence: n2, env: s2 } = e2.data;
      s2 === this.config.env && (this._cache.updatePersistence(n2), this._cache.setStore(this._cache.keys.loginTypeKey, t2));
    }
  }
  const lt = function(e2, t2) {
    t2 = t2 || ve();
    const n2 = nt(this.config.env), { cloudPath: s2, filePath: r2, onUploadProgress: i2, fileType: o2 = "image" } = e2;
    return n2.send("storage.getUploadMetadata", { path: s2 }).then((e3) => {
      const { data: { url: a2, authorization: c2, token: u2, fileId: h2, cosFileId: l2 }, requestId: d2 } = e3, p2 = { key: s2, signature: c2, "x-cos-meta-fileid": l2, success_action_status: "201", "x-cos-security-token": u2 };
      n2.upload({ url: a2, data: p2, file: r2, name: s2, fileType: o2, onUploadProgress: i2 }).then((e4) => {
        201 === e4.statusCode ? t2(null, { fileID: h2, requestId: d2 }) : t2(new te({ code: "STORAGE_REQUEST_FAIL", message: `STORAGE_REQUEST_FAIL: ${e4.data}` }));
      }).catch((e4) => {
        t2(e4);
      });
    }).catch((e3) => {
      t2(e3);
    }), t2.promise;
  }, dt = function(e2, t2) {
    t2 = t2 || ve();
    const n2 = nt(this.config.env), { cloudPath: s2 } = e2;
    return n2.send("storage.getUploadMetadata", { path: s2 }).then((e3) => {
      t2(null, e3);
    }).catch((e3) => {
      t2(e3);
    }), t2.promise;
  }, pt = function({ fileList: e2 }, t2) {
    if (t2 = t2 || ve(), !e2 || !Array.isArray(e2))
      return { code: "INVALID_PARAM", message: "fileList必须是非空的数组" };
    for (let t3 of e2)
      if (!t3 || "string" != typeof t3)
        return { code: "INVALID_PARAM", message: "fileList的元素必须是非空的字符串" };
    const n2 = { fileid_list: e2 };
    return nt(this.config.env).send("storage.batchDeleteFile", n2).then((e3) => {
      e3.code ? t2(null, e3) : t2(null, { fileList: e3.data.delete_list, requestId: e3.requestId });
    }).catch((e3) => {
      t2(e3);
    }), t2.promise;
  }, ft = function({ fileList: e2 }, t2) {
    t2 = t2 || ve(), e2 && Array.isArray(e2) || t2(null, { code: "INVALID_PARAM", message: "fileList必须是非空的数组" });
    let n2 = [];
    for (let s3 of e2)
      "object" == typeof s3 ? (s3.hasOwnProperty("fileID") && s3.hasOwnProperty("maxAge") || t2(null, { code: "INVALID_PARAM", message: "fileList的元素必须是包含fileID和maxAge的对象" }), n2.push({ fileid: s3.fileID, max_age: s3.maxAge })) : "string" == typeof s3 ? n2.push({ fileid: s3 }) : t2(null, { code: "INVALID_PARAM", message: "fileList的元素必须是字符串" });
    const s2 = { file_list: n2 };
    return nt(this.config.env).send("storage.batchGetDownloadUrl", s2).then((e3) => {
      e3.code ? t2(null, e3) : t2(null, { fileList: e3.data.download_list, requestId: e3.requestId });
    }).catch((e3) => {
      t2(e3);
    }), t2.promise;
  }, gt = async function({ fileID: e2 }, t2) {
    const n2 = (await ft.call(this, { fileList: [{ fileID: e2, maxAge: 600 }] })).fileList[0];
    if ("SUCCESS" !== n2.code)
      return t2 ? t2(n2) : new Promise((e3) => {
        e3(n2);
      });
    const s2 = nt(this.config.env);
    let r2 = n2.download_url;
    if (r2 = encodeURI(r2), !t2)
      return s2.download({ url: r2 });
    t2(await s2.download({ url: r2 }));
  }, mt = function({ name: e2, data: t2, query: n2, parse: s2, search: r2, timeout: i2 }, o2) {
    const a2 = o2 || ve();
    let c2;
    try {
      c2 = t2 ? JSON.stringify(t2) : "";
    } catch (e3) {
      return Promise.reject(e3);
    }
    if (!e2)
      return Promise.reject(new te({ code: "PARAM_ERROR", message: "函数名不能为空" }));
    const u2 = { inQuery: n2, parse: s2, search: r2, function_name: e2, request_data: c2 };
    return nt(this.config.env).send("functions.invokeFunction", u2, { timeout: i2 }).then((e3) => {
      if (e3.code)
        a2(null, e3);
      else {
        let t3 = e3.data.response_data;
        if (s2)
          a2(null, { result: t3, requestId: e3.requestId });
        else
          try {
            t3 = JSON.parse(e3.data.response_data), a2(null, { result: t3, requestId: e3.requestId });
          } catch (e4) {
            a2(new te({ message: "response data must be json" }));
          }
      }
      return a2.promise;
    }).catch((e3) => {
      a2(e3);
    }), a2.promise;
  }, yt = { timeout: 15e3, persistence: "session" }, _t = 6e5, wt = {};
  class It {
    constructor(e2) {
      this.config = e2 || this.config, this.authObj = void 0;
    }
    init(e2) {
      switch (Pe.adapter || (this.requestClient = new Pe.adapter.reqClass({ timeout: e2.timeout || 5e3, timeoutMsg: `请求在${(e2.timeout || 5e3) / 1e3}s内未完成，已中断` })), this.config = { ...yt, ...e2 }, true) {
        case this.config.timeout > _t:
          console.warn("timeout大于可配置上限[10分钟]，已重置为上限数值"), this.config.timeout = _t;
          break;
        case this.config.timeout < 100:
          console.warn("timeout小于可配置下限[100ms]，已重置为下限数值"), this.config.timeout = 100;
      }
      return new It(this.config);
    }
    auth({ persistence: e2 } = {}) {
      if (this.authObj)
        return this.authObj;
      const t2 = e2 || Pe.adapter.primaryStorage || yt.persistence;
      var n2;
      return t2 !== this.config.persistence && (this.config.persistence = t2), function(e3) {
        const { env: t3 } = e3;
        Re[t3] = new Ne(e3), Le[t3] = new Ne({ ...e3, persistence: "local" });
      }(this.config), n2 = this.config, tt$1[n2.env] = new et(n2), this.authObj = new ht(this.config), this.authObj;
    }
    on(e2, t2) {
      return Fe.apply(this, [e2, t2]);
    }
    off(e2, t2) {
      return je.apply(this, [e2, t2]);
    }
    callFunction(e2, t2) {
      return mt.apply(this, [e2, t2]);
    }
    deleteFile(e2, t2) {
      return pt.apply(this, [e2, t2]);
    }
    getTempFileURL(e2, t2) {
      return ft.apply(this, [e2, t2]);
    }
    downloadFile(e2, t2) {
      return gt.apply(this, [e2, t2]);
    }
    uploadFile(e2, t2) {
      return lt.apply(this, [e2, t2]);
    }
    getUploadMetadata(e2, t2) {
      return dt.apply(this, [e2, t2]);
    }
    registerExtension(e2) {
      wt[e2.name] = e2;
    }
    async invokeExtension(e2, t2) {
      const n2 = wt[e2];
      if (!n2)
        throw new te({ message: `扩展${e2} 必须先注册` });
      return await n2.invoke(t2, this);
    }
    useAdapters(e2) {
      const { adapter: t2, runtime: n2 } = Ae(e2) || {};
      t2 && (Pe.adapter = t2), n2 && (Pe.runtime = n2);
    }
  }
  var vt = new It();
  function St(e2, t2, n2) {
    void 0 === n2 && (n2 = {});
    var s2 = /\?/.test(t2), r2 = "";
    for (var i2 in n2)
      "" === r2 ? !s2 && (t2 += "?") : r2 += "&", r2 += i2 + "=" + encodeURIComponent(n2[i2]);
    return /^http(s)?:\/\//.test(t2 += r2) ? t2 : "" + e2 + t2;
  }
  class Tt {
    get(e2) {
      const { url: t2, data: n2, headers: s2, timeout: r2 } = e2;
      return new Promise((e3, i2) => {
        ne.request({ url: St("https:", t2), data: n2, method: "GET", header: s2, timeout: r2, success(t3) {
          e3(t3);
        }, fail(e4) {
          i2(e4);
        } });
      });
    }
    post(e2) {
      const { url: t2, data: n2, headers: s2, timeout: r2 } = e2;
      return new Promise((e3, i2) => {
        ne.request({ url: St("https:", t2), data: n2, method: "POST", header: s2, timeout: r2, success(t3) {
          e3(t3);
        }, fail(e4) {
          i2(e4);
        } });
      });
    }
    upload(e2) {
      return new Promise((t2, n2) => {
        const { url: s2, file: r2, data: i2, headers: o2, fileType: a2 } = e2, c2 = ne.uploadFile({ url: St("https:", s2), name: "file", formData: Object.assign({}, i2), filePath: r2, fileType: a2, header: o2, success(e3) {
          const n3 = { statusCode: e3.statusCode, data: e3.data || {} };
          200 === e3.statusCode && i2.success_action_status && (n3.statusCode = parseInt(i2.success_action_status, 10)), t2(n3);
        }, fail(e3) {
          n2(new Error(e3.errMsg || "uploadFile:fail"));
        } });
        "function" == typeof e2.onUploadProgress && c2 && "function" == typeof c2.onProgressUpdate && c2.onProgressUpdate((t3) => {
          e2.onUploadProgress({ loaded: t3.totalBytesSent, total: t3.totalBytesExpectedToSend });
        });
      });
    }
  }
  const bt = { setItem(e2, t2) {
    ne.setStorageSync(e2, t2);
  }, getItem: (e2) => ne.getStorageSync(e2), removeItem(e2) {
    ne.removeStorageSync(e2);
  }, clear() {
    ne.clearStorageSync();
  } };
  var Et = { genAdapter: function() {
    return { root: {}, reqClass: Tt, localStorage: bt, primaryStorage: "local" };
  }, isMatch: function() {
    return true;
  }, runtime: "uni_app" };
  vt.useAdapters(Et);
  const kt = vt, At = kt.init;
  kt.init = function(e2) {
    e2.env = e2.spaceId;
    const t2 = At.call(this, e2);
    t2.config.provider = "tencent", t2.config.spaceId = e2.spaceId;
    const n2 = t2.auth;
    return t2.auth = function(e3) {
      const t3 = n2.call(this, e3);
      return ["linkAndRetrieveDataWithTicket", "signInAnonymously", "signOut", "getAccessToken", "getLoginState", "signInWithTicket", "getUserInfo"].forEach((e4) => {
        var n3;
        t3[e4] = (n3 = t3[e4], function(e5) {
          e5 = e5 || {};
          const { success: t4, fail: s2, complete: r2 } = ee(e5);
          if (!(t4 || s2 || r2))
            return n3.call(this, e5);
          n3.call(this, e5).then((e6) => {
            t4 && t4(e6), r2 && r2(e6);
          }, (e6) => {
            s2 && s2(e6), r2 && r2(e6);
          });
        }).bind(t3);
      }), t3;
    }, t2.customAuth = t2.auth, t2;
  };
  var Pt = kt;
  async function Ct(e2, t2) {
    const n2 = `http://${e2}:${t2}/system/ping`;
    try {
      const e3 = await (s2 = { url: n2, timeout: 500 }, new Promise((e4, t3) => {
        ne.request({ ...s2, success(t4) {
          e4(t4);
        }, fail(e5) {
          t3(e5);
        } });
      }));
      return !(!e3.data || 0 !== e3.data.code);
    } catch (e3) {
      return false;
    }
    var s2;
  }
  async function Ot(e2, t2) {
    let n2;
    for (let s2 = 0; s2 < e2.length; s2++) {
      const r2 = e2[s2];
      if (await Ct(r2, t2)) {
        n2 = r2;
        break;
      }
    }
    return { address: n2, port: t2 };
  }
  const xt = { "serverless.file.resource.generateProximalSign": "storage/generate-proximal-sign", "serverless.file.resource.report": "storage/report", "serverless.file.resource.delete": "storage/delete", "serverless.file.resource.getTempFileURL": "storage/get-temp-file-url" };
  var Nt = class {
    constructor(e2) {
      if (["spaceId", "clientSecret"].forEach((t2) => {
        if (!Object.prototype.hasOwnProperty.call(e2, t2))
          throw new Error(`${t2} required`);
      }), !e2.endpoint)
        throw new Error("集群空间未配置ApiEndpoint，配置后需要重新关联服务空间后生效");
      this.config = Object.assign({}, e2), this.config.provider = "dcloud", this.config.requestUrl = this.config.endpoint + "/client", this.config.envType = this.config.envType || "public", this.adapter = ne;
    }
    async request(e2, t2 = true) {
      const n2 = t2;
      return e2 = n2 ? await this.setupLocalRequest(e2) : this.setupRequest(e2), Promise.resolve().then(() => n2 ? this.requestLocal(e2) : de.wrappedRequest(e2, this.adapter.request));
    }
    requestLocal(e2) {
      return new Promise((t2, n2) => {
        this.adapter.request(Object.assign(e2, { complete(e3) {
          if (e3 || (e3 = {}), !e3.statusCode || e3.statusCode >= 400) {
            const t3 = e3.data && e3.data.code || "SYS_ERR", s2 = e3.data && e3.data.message || "request:fail";
            return n2(new te({ code: t3, message: s2 }));
          }
          t2({ success: true, result: e3.data });
        } }));
      });
    }
    setupRequest(e2) {
      const t2 = Object.assign({}, e2, { spaceId: this.config.spaceId, timestamp: Date.now() }), n2 = { "Content-Type": "application/json" };
      n2["x-serverless-sign"] = de.sign(t2, this.config.clientSecret);
      const s2 = le();
      n2["x-client-info"] = encodeURIComponent(JSON.stringify(s2));
      const { token: r2 } = re();
      return n2["x-client-token"] = r2, { url: this.config.requestUrl, method: "POST", data: t2, dataType: "json", header: JSON.parse(JSON.stringify(n2)) };
    }
    async setupLocalRequest(e2) {
      const t2 = le(), { token: n2 } = re(), s2 = Object.assign({}, e2, { spaceId: this.config.spaceId, timestamp: Date.now(), clientInfo: t2, token: n2 }), { address: r2, servePort: i2 } = this.__dev__ && this.__dev__.debugInfo || {}, { address: o2 } = await Ot(r2, i2);
      return { url: `http://${o2}:${i2}/${xt[e2.method]}`, method: "POST", data: s2, dataType: "json", header: JSON.parse(JSON.stringify({ "Content-Type": "application/json" })) };
    }
    callFunction(e2) {
      const t2 = { method: "serverless.function.runtime.invoke", params: JSON.stringify({ functionTarget: e2.name, functionArgs: e2.data || {} }) };
      return this.request(t2, false);
    }
    getUploadFileOptions(e2) {
      const t2 = { method: "serverless.file.resource.generateProximalSign", params: JSON.stringify(e2) };
      return this.request(t2);
    }
    reportUploadFile(e2) {
      const t2 = { method: "serverless.file.resource.report", params: JSON.stringify(e2) };
      return this.request(t2);
    }
    uploadFile({ filePath: e2, cloudPath: t2, fileType: n2 = "image", onUploadProgress: s2 }) {
      if (!t2)
        throw new te({ code: "CLOUDPATH_REQUIRED", message: "cloudPath不可为空" });
      let r2;
      return this.getUploadFileOptions({ cloudPath: t2 }).then((t3) => {
        const { url: i2, formData: o2, name: a2 } = t3.result;
        return r2 = t3.result.fileUrl, new Promise((t4, r3) => {
          const c2 = this.adapter.uploadFile({ url: i2, formData: o2, name: a2, filePath: e2, fileType: n2, success(e3) {
            e3 && e3.statusCode < 400 ? t4(e3) : r3(new te({ code: "UPLOAD_FAILED", message: "文件上传失败" }));
          }, fail(e3) {
            r3(new te({ code: e3.code || "UPLOAD_FAILED", message: e3.message || e3.errMsg || "文件上传失败" }));
          } });
          "function" == typeof s2 && c2 && "function" == typeof c2.onProgressUpdate && c2.onProgressUpdate((e3) => {
            s2({ loaded: e3.totalBytesSent, total: e3.totalBytesExpectedToSend });
          });
        });
      }).then(() => this.reportUploadFile({ cloudPath: t2 })).then((t3) => new Promise((n3, s3) => {
        t3.success ? n3({ success: true, filePath: e2, fileID: r2 }) : s3(new te({ code: "UPLOAD_FAILED", message: "文件上传失败" }));
      }));
    }
    deleteFile({ fileList: e2 }) {
      const t2 = { method: "serverless.file.resource.delete", params: JSON.stringify({ fileList: e2 }) };
      return this.request(t2).then((e3) => {
        if (e3.success)
          return e3.result;
        throw new te({ code: "DELETE_FILE_FAILED", message: "删除文件失败" });
      });
    }
    getTempFileURL({ fileList: e2, maxAge: t2 } = {}) {
      if (!Array.isArray(e2) || 0 === e2.length)
        throw new te({ code: "INVALID_PARAM", message: "fileList的元素必须是非空的字符串" });
      const n2 = { method: "serverless.file.resource.getTempFileURL", params: JSON.stringify({ fileList: e2, maxAge: t2 }) };
      return this.request(n2).then((e3) => {
        if (e3.success)
          return { fileList: e3.result.fileList.map((e4) => ({ fileID: e4.fileID, tempFileURL: e4.tempFileURL })) };
        throw new te({ code: "GET_TEMP_FILE_URL_FAILED", message: "获取临时文件链接失败" });
      });
    }
  };
  var Rt = { init(e2) {
    const t2 = new Nt(e2), n2 = { signInAnonymously: function() {
      return Promise.resolve();
    }, getLoginState: function() {
      return Promise.resolve(false);
    } };
    return t2.auth = function() {
      return n2;
    }, t2.customAuth = t2.auth, t2;
  } }, Lt = n(function(e2, t2) {
    e2.exports = r.enc.Hex;
  });
  function Ut() {
    return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function(e2) {
      var t2 = 16 * Math.random() | 0;
      return ("x" === e2 ? t2 : 3 & t2 | 8).toString(16);
    });
  }
  function Dt(e2 = "", t2 = {}) {
    const { data: n2, functionName: s2, method: r2, headers: i2, signHeaderKeys: o2 = [], config: a2 } = t2, c2 = String(Date.now()), u2 = Ut(), h2 = Object.assign({}, i2, { "x-from-app-id": a2.spaceAppId, "x-from-env-id": a2.spaceId, "x-to-env-id": a2.spaceId, "x-from-instance-id": c2, "x-from-function-name": s2, "x-client-timestamp": c2, "x-alipay-source": "client", "x-request-id": u2, "x-alipay-callid": u2, "x-trace-id": u2 }), l2 = ["x-from-app-id", "x-from-env-id", "x-to-env-id", "x-from-instance-id", "x-from-function-name", "x-client-timestamp"].concat(o2), [d2 = "", p2 = ""] = e2.split("?") || [], f2 = function(e3) {
      const t3 = "HMAC-SHA256", n3 = e3.signedHeaders.join(";"), s3 = e3.signedHeaders.map((t4) => `${t4.toLowerCase()}:${e3.headers[t4]}
`).join(""), r3 = we(e3.body).toString(Lt), i3 = `${e3.method.toUpperCase()}
${e3.path}
${e3.query}
${s3}
${n3}
${r3}
`, o3 = we(i3).toString(Lt), a3 = `${t3}
${e3.timestamp}
${o3}
`, c3 = Ie(a3, e3.secretKey).toString(Lt);
      return `${t3} Credential=${e3.secretId}, SignedHeaders=${n3}, Signature=${c3}`;
    }({ path: d2, query: p2, method: r2, headers: h2, timestamp: c2, body: JSON.stringify(n2), secretId: a2.accessKey, secretKey: a2.secretKey, signedHeaders: l2.sort() });
    return { url: `${a2.endpoint}${e2}`, headers: Object.assign({}, h2, { Authorization: f2 }) };
  }
  function Mt({ url: e2, data: t2, method: n2 = "POST", headers: s2 = {}, timeout: r2 }) {
    return new Promise((i2, o2) => {
      ne.request({ url: e2, method: n2, data: "object" == typeof t2 ? JSON.stringify(t2) : t2, header: s2, dataType: "json", timeout: r2, complete: (e3 = {}) => {
        const t3 = s2["x-trace-id"] || "";
        if (!e3.statusCode || e3.statusCode >= 400) {
          const { message: n3, errMsg: s3, trace_id: r3 } = e3.data || {};
          return o2(new te({ code: "SYS_ERR", message: n3 || s3 || "request:fail", requestId: r3 || t3 }));
        }
        i2({ status: e3.statusCode, data: e3.data, headers: e3.header, requestId: t3 });
      } });
    });
  }
  function qt(e2, t2) {
    const { path: n2, data: s2, method: r2 = "GET" } = e2, { url: i2, headers: o2 } = Dt(n2, { functionName: "", data: s2, method: r2, headers: { "x-alipay-cloud-mode": "oss", "x-data-api-type": "oss", "x-expire-timestamp": String(Date.now() + 6e4) }, signHeaderKeys: ["x-data-api-type", "x-expire-timestamp"], config: t2 });
    return Mt({ url: i2, data: s2, method: r2, headers: o2 }).then((e3) => {
      const t3 = e3.data || {};
      if (!t3.success)
        throw new te({ code: e3.errCode, message: e3.errMsg, requestId: e3.requestId });
      return t3.data || {};
    }).catch((e3) => {
      throw new te({ code: e3.errCode, message: e3.errMsg, requestId: e3.requestId });
    });
  }
  function Ft(e2 = "") {
    const t2 = e2.trim().replace(/^cloud:\/\//, ""), n2 = t2.indexOf("/");
    if (n2 <= 0)
      throw new te({ code: "INVALID_PARAM", message: "fileID不合法" });
    const s2 = t2.substring(0, n2), r2 = t2.substring(n2 + 1);
    return s2 !== this.config.spaceId && console.warn("file ".concat(e2, " does not belong to env ").concat(this.config.spaceId)), r2;
  }
  function Kt(e2 = "") {
    return "cloud://".concat(this.config.spaceId, "/").concat(e2.replace(/^\/+/, ""));
  }
  class jt {
    constructor(e2) {
      this.config = e2;
    }
    signedURL(e2, t2 = {}) {
      const n2 = `/ws/function/${e2}`, s2 = this.config.wsEndpoint.replace(/^ws(s)?:\/\//, ""), r2 = Object.assign({}, t2, { accessKeyId: this.config.accessKey, signatureNonce: Ut(), timestamp: "" + Date.now() }), i2 = [n2, ["accessKeyId", "authorization", "signatureNonce", "timestamp"].sort().map(function(e3) {
        return r2[e3] ? "".concat(e3, "=").concat(r2[e3]) : null;
      }).filter(Boolean).join("&"), `host:${s2}`].join("\n"), o2 = ["HMAC-SHA256", we(i2).toString(Lt)].join("\n"), a2 = Ie(o2, this.config.secretKey).toString(Lt), c2 = Object.keys(r2).map((e3) => `${e3}=${encodeURIComponent(r2[e3])}`).join("&");
      return `${this.config.wsEndpoint}${n2}?${c2}&signature=${a2}`;
    }
  }
  var $t = class {
    constructor(e2) {
      if (["spaceId", "spaceAppId", "accessKey", "secretKey"].forEach((t2) => {
        if (!Object.prototype.hasOwnProperty.call(e2, t2))
          throw new Error(`${t2} required`);
      }), e2.endpoint) {
        if ("string" != typeof e2.endpoint)
          throw new Error("endpoint must be string");
        if (!/^https:\/\//.test(e2.endpoint))
          throw new Error("endpoint must start with https://");
        e2.endpoint = e2.endpoint.replace(/\/$/, "");
      }
      this.config = Object.assign({}, e2, { endpoint: e2.endpoint || `https://${e2.spaceId}.api-hz.cloudbasefunction.cn`, wsEndpoint: e2.wsEndpoint || `wss://${e2.spaceId}.api-hz.cloudbasefunction.cn` }), this._websocket = new jt(this.config);
    }
    callFunction(e2) {
      return function(e3, t2) {
        const { name: n2, data: s2, async: r2 = false, timeout: i2 } = e3, o2 = "POST", a2 = { "x-to-function-name": n2 };
        r2 && (a2["x-function-invoke-type"] = "async");
        const { url: c2, headers: u2 } = Dt("/functions/invokeFunction", { functionName: n2, data: s2, method: o2, headers: a2, signHeaderKeys: ["x-to-function-name"], config: t2 });
        return Mt({ url: c2, data: s2, method: o2, headers: u2, timeout: i2 }).then((e4) => {
          let t3 = 0;
          if (r2) {
            const n3 = e4.data || {};
            t3 = "200" === n3.errCode ? 0 : n3.errCode, e4.data = n3.data || {}, e4.errMsg = n3.errMsg;
          }
          if (0 !== t3)
            throw new te({ code: t3, message: e4.errMsg, requestId: e4.requestId });
          return { errCode: t3, success: 0 === t3, requestId: e4.requestId, result: e4.data };
        }).catch((e4) => {
          throw new te({ code: e4.errCode, message: e4.errMsg, requestId: e4.requestId });
        });
      }(e2, this.config);
    }
    uploadFileToOSS({ url: e2, filePath: t2, fileType: n2, formData: s2, onUploadProgress: r2 }) {
      return new Promise((i2, o2) => {
        const a2 = ne.uploadFile({ url: e2, filePath: t2, fileType: n2, formData: s2, name: "file", success(e3) {
          e3 && e3.statusCode < 400 ? i2(e3) : o2(new te({ code: "UPLOAD_FAILED", message: "文件上传失败" }));
        }, fail(e3) {
          o2(new te({ code: e3.code || "UPLOAD_FAILED", message: e3.message || e3.errMsg || "文件上传失败" }));
        } });
        "function" == typeof r2 && a2 && "function" == typeof a2.onProgressUpdate && a2.onProgressUpdate((e3) => {
          r2({ loaded: e3.totalBytesSent, total: e3.totalBytesExpectedToSend });
        });
      });
    }
    async uploadFile({ filePath: e2, cloudPath: t2 = "", fileType: n2 = "image", onUploadProgress: s2 }) {
      if ("string" !== g(t2))
        throw new te({ code: "INVALID_PARAM", message: "cloudPath必须为字符串类型" });
      if (!(t2 = t2.trim()))
        throw new te({ code: "INVALID_PARAM", message: "cloudPath不可为空" });
      if (/:\/\//.test(t2))
        throw new te({ code: "INVALID_PARAM", message: "cloudPath不合法" });
      const r2 = await qt({ path: "/".concat(t2.replace(/^\//, ""), "?post_url") }, this.config), { file_id: i2, upload_url: o2, form_data: a2 } = r2, c2 = a2 && a2.reduce((e3, t3) => (e3[t3.key] = t3.value, e3), {});
      return this.uploadFileToOSS({ url: o2, filePath: e2, fileType: n2, formData: c2, onUploadProgress: s2 }).then(() => ({ fileID: i2 }));
    }
    async getTempFileURL({ fileList: e2 }) {
      return new Promise((t2, n2) => {
        (!e2 || e2.length < 0) && t2({ code: "INVALID_PARAM", message: "fileList不能为空数组" }), e2.length > 50 && t2({ code: "INVALID_PARAM", message: "fileList数组长度不能超过50" });
        const s2 = [];
        for (const n3 of e2) {
          let e3;
          "string" !== g(n3) && t2({ code: "INVALID_PARAM", message: "fileList的元素必须是非空的字符串" });
          try {
            e3 = Ft.call(this, n3);
          } catch (t3) {
            console.warn(t3.errCode, t3.errMsg), e3 = n3;
          }
          s2.push({ file_id: e3, expire: 600 });
        }
        qt({ path: "/?download_url", data: { file_list: s2 }, method: "POST" }, this.config).then((e3) => {
          const { file_list: n3 = [] } = e3;
          t2({ fileList: n3.map((e4) => ({ fileID: Kt.call(this, e4.file_id), tempFileURL: e4.download_url })) });
        }).catch((e3) => n2(e3));
      });
    }
    async connectWebSocket(e2) {
      const { name: t2, query: n2 } = e2;
      return ne.connectSocket({ url: this._websocket.signedURL(t2, n2), complete: () => {
      } });
    }
  };
  var Bt = { init: (e2) => {
    e2.provider = "alipay";
    const t2 = new $t(e2);
    return t2.auth = function() {
      return { signInAnonymously: function() {
        return Promise.resolve();
      }, getLoginState: function() {
        return Promise.resolve(true);
      } };
    }, t2;
  } };
  function Wt({ data: e2 }) {
    let t2;
    t2 = le();
    const n2 = JSON.parse(JSON.stringify(e2 || {}));
    if (Object.assign(n2, { clientInfo: t2 }), !n2.uniIdToken) {
      const { token: e3 } = re();
      e3 && (n2.uniIdToken = e3);
    }
    return n2;
  }
  async function Ht(e2 = {}) {
    await this.__dev__.initLocalNetwork();
    const { localAddress: t2, localPort: n2 } = this.__dev__, s2 = { aliyun: "aliyun", tencent: "tcb", alipay: "alipay", dcloud: "dcloud" }[this.config.provider], r2 = this.config.spaceId, i2 = `http://${t2}:${n2}/system/check-function`, o2 = `http://${t2}:${n2}/cloudfunctions/${e2.name}`;
    return new Promise((t3, n3) => {
      ne.request({ method: "POST", url: i2, data: { name: e2.name, platform: P, provider: s2, spaceId: r2 }, timeout: 3e3, success(e3) {
        t3(e3);
      }, fail() {
        t3({ data: { code: "NETWORK_ERROR", message: "连接本地调试服务失败，请检查客户端是否和主机在同一局域网下，自动切换为已部署的云函数。" } });
      } });
    }).then(({ data: e3 } = {}) => {
      const { code: t3, message: n3 } = e3 || {};
      return { code: 0 === t3 ? 0 : t3 || "SYS_ERR", message: n3 || "SYS_ERR" };
    }).then(({ code: t3, message: n3 }) => {
      if (0 !== t3) {
        switch (t3) {
          case "MODULE_ENCRYPTED":
            console.error(`此云函数（${e2.name}）依赖加密公共模块不可本地调试，自动切换为云端已部署的云函数`);
            break;
          case "FUNCTION_ENCRYPTED":
            console.error(`此云函数（${e2.name}）已加密不可本地调试，自动切换为云端已部署的云函数`);
            break;
          case "ACTION_ENCRYPTED":
            console.error(n3 || "需要访问加密的uni-clientDB-action，自动切换为云端环境");
            break;
          case "NETWORK_ERROR":
            console.error(n3 || "连接本地调试服务失败，请检查客户端是否和主机在同一局域网下");
            break;
          case "SWITCH_TO_CLOUD":
            break;
          default: {
            const e3 = `检测本地调试服务出现错误：${n3}，请检查网络环境或重启客户端再试`;
            throw console.error(e3), new Error(e3);
          }
        }
        return this._callCloudFunction(e2);
      }
      return new Promise((t4, n4) => {
        const r3 = Wt.call(this, { data: e2.data });
        ne.request({ method: "POST", url: o2, data: { provider: s2, platform: P, param: r3 }, timeout: e2.timeout, success: ({ statusCode: e3, data: s3 } = {}) => !e3 || e3 >= 400 ? n4(new te({ code: s3.code || "SYS_ERR", message: s3.message || "request:fail" })) : t4({ result: s3 }), fail(e3) {
          n4(new te({ code: e3.code || e3.errCode || "SYS_ERR", message: e3.message || e3.errMsg || "request:fail" }));
        } });
      });
    });
  }
  const Jt = [{ rule: /fc_function_not_found|FUNCTION_NOT_FOUND/, content: "，云函数[{functionName}]在云端不存在，请检查此云函数名称是否正确以及该云函数是否已上传到服务空间", mode: "append" }];
  var zt = /[\\^$.*+?()[\]{}|]/g, Vt = RegExp(zt.source);
  function Gt(e2, t2, n2) {
    return e2.replace(new RegExp((s2 = t2) && Vt.test(s2) ? s2.replace(zt, "\\$&") : s2, "g"), n2);
    var s2;
  }
  const Yt = { NONE: "none", REQUEST: "request", RESPONSE: "response", BOTH: "both" }, Qt = "_globalUniCloudStatus", Xt = "_globalUniCloudSecureNetworkCache__{spaceId}", Zt = "uni-secure-network", en$2 = { SYSTEM_ERROR: { code: 2e4, message: "System error" }, APP_INFO_INVALID: { code: 20101, message: "Invalid client" }, GET_ENCRYPT_KEY_FAILED: { code: 20102, message: "Get encrypt key failed" } };
  function nn(e2) {
    const { errSubject: t2, subject: n2, errCode: s2, errMsg: r2, code: i2, message: o2, cause: a2 } = e2 || {};
    return new te({ subject: t2 || n2 || Zt, code: s2 || i2 || en$2.SYSTEM_ERROR.code, message: r2 || o2, cause: a2 });
  }
  let Kn;
  function Hn({ secretType: e2 } = {}) {
    return e2 === Yt.REQUEST || e2 === Yt.RESPONSE || e2 === Yt.BOTH;
  }
  function Jn({ name: e2, data: t2 = {} } = {}) {
    return "DCloud-clientDB" === e2 && "encryption" === t2.redirectTo && "getAppClientKey" === t2.action;
  }
  function zn({ provider: e2, spaceId: t2, functionName: n2 } = {}) {
    const { appId: s2, uniPlatform: r2, osName: i2 } = ce();
    let o2 = r2;
    "app" === r2 && (o2 = i2);
    const a2 = function({ provider: e3, spaceId: t3 } = {}) {
      const n3 = A;
      if (!n3)
        return {};
      e3 = /* @__PURE__ */ function(e4) {
        return "tencent" === e4 ? "tcb" : e4;
      }(e3);
      const s3 = n3.find((n4) => n4.provider === e3 && n4.spaceId === t3);
      return s3 && s3.config;
    }({ provider: e2, spaceId: t2 });
    if (!a2 || !a2.accessControl || !a2.accessControl.enable)
      return false;
    const c2 = a2.accessControl.function || {}, u2 = Object.keys(c2);
    if (0 === u2.length)
      return true;
    const h2 = function(e3, t3) {
      let n3, s3, r3;
      for (let i3 = 0; i3 < e3.length; i3++) {
        const o3 = e3[i3];
        o3 !== t3 ? "*" !== o3 ? o3.split(",").map((e4) => e4.trim()).indexOf(t3) > -1 && (s3 = o3) : r3 = o3 : n3 = o3;
      }
      return n3 || s3 || r3;
    }(u2, n2);
    if (!h2)
      return false;
    if ((c2[h2] || []).find((e3 = {}) => e3.appId === s2 && (e3.platform || "").toLowerCase() === o2.toLowerCase()))
      return true;
    throw console.error(`此应用[appId: ${s2}, platform: ${o2}]不在云端配置的允许访问的应用列表内，参考：https://uniapp.dcloud.net.cn/uniCloud/secure-network.html#verify-client`), nn(en$2.APP_INFO_INVALID);
  }
  function Vn({ functionName: e2, result: t2, logPvd: n2 }) {
    if (this.__dev__.debugLog && t2 && t2.requestId) {
      const s2 = JSON.stringify({ spaceId: this.config.spaceId, functionName: e2, requestId: t2.requestId });
      console.log(`[${n2}-request]${s2}[/${n2}-request]`);
    }
  }
  function Gn(e2) {
    const t2 = e2.callFunction, n2 = function(n3) {
      const s2 = n3.name;
      n3.data = Wt.call(e2, { data: n3.data });
      const r2 = { aliyun: "aliyun", tencent: "tcb", tcb: "tcb", alipay: "alipay", dcloud: "dcloud" }[this.config.provider], i2 = Hn(n3), o2 = Jn(n3), a2 = i2 || o2;
      return t2.call(this, n3).then((e3) => (e3.errCode = 0, !a2 && Vn.call(this, { functionName: s2, result: e3, logPvd: r2 }), Promise.resolve(e3)), (e3) => (!a2 && Vn.call(this, { functionName: s2, result: e3, logPvd: r2 }), e3 && e3.message && (e3.message = function({ message: e4 = "", extraInfo: t3 = {}, formatter: n4 = [] } = {}) {
        for (let s3 = 0; s3 < n4.length; s3++) {
          const { rule: r3, content: i3, mode: o3 } = n4[s3], a3 = e4.match(r3);
          if (!a3)
            continue;
          let c2 = i3;
          for (let e5 = 1; e5 < a3.length; e5++)
            c2 = Gt(c2, `{$${e5}}`, a3[e5]);
          for (const e5 in t3)
            c2 = Gt(c2, `{${e5}}`, t3[e5]);
          return "replace" === o3 ? c2 : e4 + c2;
        }
        return e4;
      }({ message: `[${n3.name}]: ${e3.message}`, formatter: Jt, extraInfo: { functionName: s2 } })), Promise.reject(e3)));
    };
    e2.callFunction = function(t3) {
      const { provider: s2, spaceId: r2 } = e2.config, i2 = t3.name;
      let o2, a2;
      if (t3.data = t3.data || {}, e2.__dev__.debugInfo && !e2.__dev__.debugInfo.forceRemote && O ? (e2._callCloudFunction || (e2._callCloudFunction = n2, e2._callLocalFunction = Ht), o2 = Ht) : o2 = n2, o2 = o2.bind(e2), Jn(t3))
        a2 = n2.call(e2, t3);
      else if (Hn(t3)) {
        a2 = new Kn({ secretType: t3.secretType, uniCloudIns: e2 }).wrapEncryptDataCallFunction(n2.bind(e2))(t3);
      } else if (zn({ provider: s2, spaceId: r2, functionName: i2 })) {
        a2 = new Kn({ secretType: t3.secretType, uniCloudIns: e2 }).wrapVerifyClientCallFunction(n2.bind(e2))(t3);
      } else
        a2 = o2(t3);
      return Object.defineProperty(a2, "result", { get: () => (console.warn("当前返回结果为Promise类型，不可直接访问其result属性，详情请参考：https://uniapp.dcloud.net.cn/uniCloud/faq?id=promise"), {}) }), a2.then((e3) => e3);
    };
  }
  Kn = class {
    constructor() {
      throw nn({ message: `Platform ${P} is not enabled, please check whether secure network module is enabled in your manifest.json` });
    }
  };
  const Yn = Symbol("CLIENT_DB_INTERNAL");
  function Qn(e2, t2) {
    return e2.then = "DoNotReturnProxyWithAFunctionNamedThen", e2._internalType = Yn, e2.inspect = null, e2.__v_raw = void 0, new Proxy(e2, { get(e3, n2, s2) {
      if ("_uniClient" === n2)
        return null;
      if ("symbol" == typeof n2)
        return e3[n2];
      if (n2 in e3 || "string" != typeof n2) {
        const t3 = e3[n2];
        return "function" == typeof t3 ? t3.bind(e3) : t3;
      }
      return t2.get(e3, n2, s2);
    } });
  }
  function Xn(e2) {
    return { on: (t2, n2) => {
      e2[t2] = e2[t2] || [], e2[t2].indexOf(n2) > -1 || e2[t2].push(n2);
    }, off: (t2, n2) => {
      e2[t2] = e2[t2] || [];
      const s2 = e2[t2].indexOf(n2);
      -1 !== s2 && e2[t2].splice(s2, 1);
    } };
  }
  const Zn = ["db.Geo", "db.command", "command.aggregate"];
  function es(e2, t2) {
    return Zn.indexOf(`${e2}.${t2}`) > -1;
  }
  function ts(e2) {
    switch (g(e2 = se(e2))) {
      case "array":
        return e2.map((e3) => ts(e3));
      case "object":
        return e2._internalType === Yn || Object.keys(e2).forEach((t2) => {
          e2[t2] = ts(e2[t2]);
        }), e2;
      case "regexp":
        return { $regexp: { source: e2.source, flags: e2.flags } };
      case "date":
        return { $date: e2.toISOString() };
      default:
        return e2;
    }
  }
  function ns(e2) {
    return e2 && e2.content && e2.content.$method;
  }
  class ss {
    constructor(e2, t2, n2) {
      this.content = e2, this.prevStage = t2 || null, this.udb = null, this._database = n2;
    }
    toJSON() {
      let e2 = this;
      const t2 = [e2.content];
      for (; e2.prevStage; )
        e2 = e2.prevStage, t2.push(e2.content);
      return { $db: t2.reverse().map((e3) => ({ $method: e3.$method, $param: ts(e3.$param) })) };
    }
    toString() {
      return JSON.stringify(this.toJSON());
    }
    getAction() {
      const e2 = this.toJSON().$db.find((e3) => "action" === e3.$method);
      return e2 && e2.$param && e2.$param[0];
    }
    getCommand() {
      return { $db: this.toJSON().$db.filter((e2) => "action" !== e2.$method) };
    }
    get isAggregate() {
      let e2 = this;
      for (; e2; ) {
        const t2 = ns(e2), n2 = ns(e2.prevStage);
        if ("aggregate" === t2 && "collection" === n2 || "pipeline" === t2)
          return true;
        e2 = e2.prevStage;
      }
      return false;
    }
    get isCommand() {
      let e2 = this;
      for (; e2; ) {
        if ("command" === ns(e2))
          return true;
        e2 = e2.prevStage;
      }
      return false;
    }
    get isAggregateCommand() {
      let e2 = this;
      for (; e2; ) {
        const t2 = ns(e2), n2 = ns(e2.prevStage);
        if ("aggregate" === t2 && "command" === n2)
          return true;
        e2 = e2.prevStage;
      }
      return false;
    }
    getNextStageFn(e2) {
      const t2 = this;
      return function() {
        return rs({ $method: e2, $param: ts(Array.from(arguments)) }, t2, t2._database);
      };
    }
    get count() {
      return this.isAggregate ? this.getNextStageFn("count") : function() {
        return this._send("count", Array.from(arguments));
      };
    }
    get remove() {
      return this.isCommand ? this.getNextStageFn("remove") : function() {
        return this._send("remove", Array.from(arguments));
      };
    }
    get() {
      return this._send("get", Array.from(arguments));
    }
    get add() {
      return this.isCommand ? this.getNextStageFn("add") : function() {
        return this._send("add", Array.from(arguments));
      };
    }
    update() {
      return this._send("update", Array.from(arguments));
    }
    end() {
      return this._send("end", Array.from(arguments));
    }
    get set() {
      return this.isCommand ? this.getNextStageFn("set") : function() {
        throw new Error("JQL禁止使用set方法");
      };
    }
    _send(e2, t2) {
      const n2 = this.getAction(), s2 = this.getCommand();
      if (s2.$db.push({ $method: e2, $param: ts(t2) }), b) {
        const e3 = s2.$db.find((e4) => "collection" === e4.$method), t3 = e3 && e3.$param;
        t3 && 1 === t3.length && "string" == typeof e3.$param[0] && e3.$param[0].indexOf(",") > -1 && console.warn("检测到使用JQL语法联表查询时，未使用getTemp先过滤主表数据，在主表数据量大的情况下可能会查询缓慢。\n- 如何优化请参考此文档：https://uniapp.dcloud.net.cn/uniCloud/jql?id=lookup-with-temp \n- 如果主表数据量很小请忽略此信息，项目发行时不会出现此提示。");
      }
      return this._database._callCloudFunction({ action: n2, command: s2 });
    }
  }
  function rs(e2, t2, n2) {
    return Qn(new ss(e2, t2, n2), { get(e3, t3) {
      let s2 = "db";
      return e3 && e3.content && (s2 = e3.content.$method), es(s2, t3) ? rs({ $method: t3 }, e3, n2) : function() {
        return rs({ $method: t3, $param: ts(Array.from(arguments)) }, e3, n2);
      };
    } });
  }
  function is({ path: e2, method: t2 }) {
    return class {
      constructor() {
        this.param = Array.from(arguments);
      }
      toJSON() {
        return { $newDb: [...e2.map((e3) => ({ $method: e3 })), { $method: t2, $param: this.param }] };
      }
      toString() {
        return JSON.stringify(this.toJSON());
      }
    };
  }
  let os$1 = class os {
    constructor({ uniClient: e2 = {}, isJQL: t2 = false } = {}) {
      this._uniClient = e2, this._authCallBacks = {}, this._dbCallBacks = {}, e2._isDefault && (this._dbCallBacks = U("_globalUniCloudDatabaseCallback")), t2 || (this.auth = Xn(this._authCallBacks)), this._isJQL = t2, Object.assign(this, Xn(this._dbCallBacks)), this.env = Qn({}, { get: (e3, t3) => ({ $env: t3 }) }), this.Geo = Qn({}, { get: (e3, t3) => is({ path: ["Geo"], method: t3 }) }), this.serverDate = is({ path: [], method: "serverDate" }), this.RegExp = is({ path: [], method: "RegExp" });
    }
    getCloudEnv(e2) {
      if ("string" != typeof e2 || !e2.trim())
        throw new Error("getCloudEnv参数错误");
      return { $env: e2.replace("$cloudEnv_", "") };
    }
    _callback(e2, t2) {
      const n2 = this._dbCallBacks;
      n2[e2] && n2[e2].forEach((e3) => {
        e3(...t2);
      });
    }
    _callbackAuth(e2, t2) {
      const n2 = this._authCallBacks;
      n2[e2] && n2[e2].forEach((e3) => {
        e3(...t2);
      });
    }
    multiSend() {
      const e2 = Array.from(arguments), t2 = e2.map((e3) => {
        const t3 = e3.getAction(), n2 = e3.getCommand();
        if ("getTemp" !== n2.$db[n2.$db.length - 1].$method)
          throw new Error("multiSend只支持子命令内使用getTemp");
        return { action: t3, command: n2 };
      });
      return this._callCloudFunction({ multiCommand: t2, queryList: e2 });
    }
  };
  function as(e2, t2 = {}) {
    return Qn(new e2(t2), { get: (e3, t3) => es("db", t3) ? rs({ $method: t3 }, null, e3) : function() {
      return rs({ $method: t3, $param: ts(Array.from(arguments)) }, null, e3);
    } });
  }
  class cs extends os$1 {
    _parseResult(e2) {
      return this._isJQL ? e2.result : e2;
    }
    _callCloudFunction({ action: e2, command: t2, multiCommand: n2, queryList: s2 }) {
      function r2(e3, t3) {
        if (n2 && s2)
          for (let n3 = 0; n3 < s2.length; n3++) {
            const r3 = s2[n3];
            r3.udb && "function" == typeof r3.udb.setResult && (t3 ? r3.udb.setResult(t3) : r3.udb.setResult(e3.result.dataList[n3]));
          }
      }
      const i2 = this, o2 = this._isJQL ? "databaseForJQL" : "database";
      function a2(e3) {
        return i2._callback("error", [e3]), j($(o2, "fail"), e3).then(() => j($(o2, "complete"), e3)).then(() => (r2(null, e3), Y(H.RESPONSE, { type: J.CLIENT_DB, content: e3 }), Promise.reject(e3)));
      }
      const c2 = j($(o2, "invoke")), u2 = this._uniClient;
      return c2.then(() => u2.callFunction({ name: "DCloud-clientDB", type: l.CLIENT_DB, data: { action: e2, command: t2, multiCommand: n2 } })).then((e3) => {
        const { code: t3, message: n3, token: s3, tokenExpired: c3, systemInfo: u3 = [] } = e3.result;
        if (u3)
          for (let e4 = 0; e4 < u3.length; e4++) {
            const { level: t4, message: n4, detail: s4 } = u3[e4];
            let r3 = "[System Info]" + n4;
            s4 && (r3 = `${r3}
详细信息：${s4}`), (console["warn" === t4 ? "error" : t4] || console.log)(r3);
          }
        if (t3) {
          return a2(new te({ code: t3, message: n3, requestId: e3.requestId }));
        }
        e3.result.errCode = e3.result.errCode || e3.result.code, e3.result.errMsg = e3.result.errMsg || e3.result.message, s3 && c3 && (ie({ token: s3, tokenExpired: c3 }), this._callbackAuth("refreshToken", [{ token: s3, tokenExpired: c3 }]), this._callback("refreshToken", [{ token: s3, tokenExpired: c3 }]), Y(H.REFRESH_TOKEN, { token: s3, tokenExpired: c3 }));
        const h2 = [{ prop: "affectedDocs", tips: "affectedDocs不再推荐使用，请使用inserted/deleted/updated/data.length替代" }, { prop: "code", tips: "code不再推荐使用，请使用errCode替代" }, { prop: "message", tips: "message不再推荐使用，请使用errMsg替代" }];
        for (let t4 = 0; t4 < h2.length; t4++) {
          const { prop: n4, tips: s4 } = h2[t4];
          if (n4 in e3.result) {
            const t5 = e3.result[n4];
            Object.defineProperty(e3.result, n4, { get: () => (console.warn(s4), t5) });
          }
        }
        return function(e4) {
          return j($(o2, "success"), e4).then(() => j($(o2, "complete"), e4)).then(() => {
            r2(e4, null);
            const t4 = i2._parseResult(e4);
            return Y(H.RESPONSE, { type: J.CLIENT_DB, content: t4 }), Promise.resolve(t4);
          });
        }(e3);
      }, (e3) => {
        /fc_function_not_found|FUNCTION_NOT_FOUND/g.test(e3.message) && console.warn("clientDB未初始化，请在web控制台保存一次schema以开启clientDB");
        return a2(new te({ code: e3.code || "SYSTEM_ERROR", message: e3.message, requestId: e3.requestId }));
      });
    }
  }
  const us = "token无效，跳转登录页面", hs = "token过期，跳转登录页面", ls = { TOKEN_INVALID_TOKEN_EXPIRED: hs, TOKEN_INVALID_INVALID_CLIENTID: us, TOKEN_INVALID: us, TOKEN_INVALID_WRONG_TOKEN: us, TOKEN_INVALID_ANONYMOUS_USER: us }, ds = { "uni-id-token-expired": hs, "uni-id-check-token-failed": us, "uni-id-token-not-exist": us, "uni-id-check-device-feature-failed": us }, ps = { ...ls, ...ds, default: "用户未登录或登录状态过期，自动跳转登录页面" };
  function fs(e2, t2) {
    let n2 = "";
    return n2 = e2 ? `${e2}/${t2}` : t2, n2.replace(/^\//, "");
  }
  function gs(e2 = [], t2 = "") {
    const n2 = [], s2 = [];
    return e2.forEach((e3) => {
      true === e3.needLogin ? n2.push(fs(t2, e3.path)) : false === e3.needLogin && s2.push(fs(t2, e3.path));
    }), { needLoginPage: n2, notNeedLoginPage: s2 };
  }
  function ms(e2) {
    return e2.split("?")[0].replace(/^\//, "");
  }
  function ys() {
    return function(e2) {
      let t2 = e2 && e2.$page && e2.$page.fullPath;
      return t2 ? ("/" !== t2.charAt(0) && (t2 = "/" + t2), t2) : "";
    }(function() {
      const e2 = getCurrentPages();
      return e2[e2.length - 1];
    }());
  }
  function _s() {
    return ms(ys());
  }
  function ws(e2 = "", t2 = {}) {
    if (!e2)
      return false;
    if (!(t2 && t2.list && t2.list.length))
      return false;
    const n2 = t2.list, s2 = ms(e2);
    return n2.some((e3) => e3.pagePath === s2);
  }
  const Is = !!e.uniIdRouter;
  const { loginPage: vs, routerNeedLogin: Ss, resToLogin: Ts, needLoginPage: bs, notNeedLoginPage: Es, loginPageInTabBar: ks } = function({ pages: t2 = [], subPackages: n2 = [], uniIdRouter: s2 = {}, tabBar: r2 = {} } = e) {
    const { loginPage: i2, needLogin: o2 = [], resToLogin: a2 = true } = s2, { needLoginPage: c2, notNeedLoginPage: u2 } = gs(t2), { needLoginPage: h2, notNeedLoginPage: l2 } = function(e2 = []) {
      const t3 = [], n3 = [];
      return e2.forEach((e3) => {
        const { root: s3, pages: r3 = [] } = e3, { needLoginPage: i3, notNeedLoginPage: o3 } = gs(r3, s3);
        t3.push(...i3), n3.push(...o3);
      }), { needLoginPage: t3, notNeedLoginPage: n3 };
    }(n2);
    return { loginPage: i2, routerNeedLogin: o2, resToLogin: a2, needLoginPage: [...c2, ...h2], notNeedLoginPage: [...u2, ...l2], loginPageInTabBar: ws(i2, r2) };
  }();
  if (bs.indexOf(vs) > -1)
    throw new Error(`Login page [${vs}] should not be "needLogin", please check your pages.json`);
  function As(e2) {
    const t2 = _s();
    if ("/" === e2.charAt(0))
      return e2;
    const [n2, s2] = e2.split("?"), r2 = n2.replace(/^\//, "").split("/"), i2 = t2.split("/");
    i2.pop();
    for (let e3 = 0; e3 < r2.length; e3++) {
      const t3 = r2[e3];
      ".." === t3 ? i2.pop() : "." !== t3 && i2.push(t3);
    }
    return "" === i2[0] && i2.shift(), "/" + i2.join("/") + (s2 ? "?" + s2 : "");
  }
  function Ps(e2) {
    const t2 = ms(As(e2));
    return !(Es.indexOf(t2) > -1) && (bs.indexOf(t2) > -1 || Ss.some((t3) => function(e3, t4) {
      return new RegExp(t4).test(e3);
    }(e2, t3)));
  }
  function Cs({ redirect: e2 }) {
    const t2 = ms(e2), n2 = ms(vs);
    return _s() !== n2 && t2 !== n2;
  }
  function Os({ api: e2, redirect: t2 } = {}) {
    if (!t2 || !Cs({ redirect: t2 }))
      return;
    const n2 = function(e3, t3) {
      return "/" !== e3.charAt(0) && (e3 = "/" + e3), t3 ? e3.indexOf("?") > -1 ? e3 + `&uniIdRedirectUrl=${encodeURIComponent(t3)}` : e3 + `?uniIdRedirectUrl=${encodeURIComponent(t3)}` : e3;
    }(vs, t2);
    ks ? "navigateTo" !== e2 && "redirectTo" !== e2 || (e2 = "switchTab") : "switchTab" === e2 && (e2 = "navigateTo");
    const s2 = { navigateTo: uni.navigateTo, redirectTo: uni.redirectTo, switchTab: uni.switchTab, reLaunch: uni.reLaunch };
    setTimeout(() => {
      s2[e2]({ url: n2 });
    }, 0);
  }
  function xs({ url: e2 } = {}) {
    const t2 = { abortLoginPageJump: false, autoToLoginPage: false }, n2 = function() {
      const { token: e3, tokenExpired: t3 } = re();
      let n3;
      if (e3) {
        if (t3 < Date.now()) {
          const e4 = "uni-id-token-expired";
          n3 = { errCode: e4, errMsg: ps[e4] };
        }
      } else {
        const e4 = "uni-id-check-token-failed";
        n3 = { errCode: e4, errMsg: ps[e4] };
      }
      return n3;
    }();
    if (Ps(e2) && n2) {
      n2.uniIdRedirectUrl = e2;
      if (z(H.NEED_LOGIN).length > 0)
        return setTimeout(() => {
          Y(H.NEED_LOGIN, n2);
        }, 0), t2.abortLoginPageJump = true, t2;
      t2.autoToLoginPage = true;
    }
    return t2;
  }
  function Ns() {
    !function() {
      const e3 = ys(), { abortLoginPageJump: t2, autoToLoginPage: n2 } = xs({ url: e3 });
      t2 || n2 && Os({ api: "redirectTo", redirect: e3 });
    }();
    const e2 = ["navigateTo", "redirectTo", "reLaunch", "switchTab"];
    for (let t2 = 0; t2 < e2.length; t2++) {
      const n2 = e2[t2];
      uni.addInterceptor(n2, { invoke(e3) {
        const { abortLoginPageJump: t3, autoToLoginPage: s2 } = xs({ url: e3.url });
        return t3 ? e3 : s2 ? (Os({ api: n2, redirect: As(e3.url) }), false) : e3;
      } });
    }
  }
  function Rs() {
    this.onResponse((e2) => {
      const { type: t2, content: n2 } = e2;
      let s2 = false;
      switch (t2) {
        case "cloudobject":
          s2 = function(e3) {
            if ("object" != typeof e3)
              return false;
            const { errCode: t3 } = e3 || {};
            return t3 in ps;
          }(n2);
          break;
        case "clientdb":
          s2 = function(e3) {
            if ("object" != typeof e3)
              return false;
            const { errCode: t3 } = e3 || {};
            return t3 in ls;
          }(n2);
      }
      s2 && function(e3 = {}) {
        const t3 = z(H.NEED_LOGIN);
        Z().then(() => {
          const n3 = ys();
          if (n3 && Cs({ redirect: n3 }))
            return t3.length > 0 ? Y(H.NEED_LOGIN, Object.assign({ uniIdRedirectUrl: n3 }, e3)) : void (vs && Os({ api: "navigateTo", redirect: n3 }));
        });
      }(n2);
    });
  }
  function Ls(e2) {
    !function(e3) {
      e3.onResponse = function(e4) {
        V(H.RESPONSE, e4);
      }, e3.offResponse = function(e4) {
        G(H.RESPONSE, e4);
      };
    }(e2), function(e3) {
      e3.onNeedLogin = function(e4) {
        V(H.NEED_LOGIN, e4);
      }, e3.offNeedLogin = function(e4) {
        G(H.NEED_LOGIN, e4);
      }, Is && (U(Qt).needLoginInit || (U(Qt).needLoginInit = true, Z().then(() => {
        Ns.call(e3);
      }), Ts && Rs.call(e3)));
    }(e2), function(e3) {
      e3.onRefreshToken = function(e4) {
        V(H.REFRESH_TOKEN, e4);
      }, e3.offRefreshToken = function(e4) {
        G(H.REFRESH_TOKEN, e4);
      };
    }(e2);
  }
  let Us;
  const Ds = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=", Ms = /^(?:[A-Za-z\d+/]{4})*?(?:[A-Za-z\d+/]{2}(?:==)?|[A-Za-z\d+/]{3}=?)?$/;
  function qs() {
    const e2 = re().token || "", t2 = e2.split(".");
    if (!e2 || 3 !== t2.length)
      return { uid: null, role: [], permission: [], tokenExpired: 0 };
    let n2;
    try {
      n2 = JSON.parse((s2 = t2[1], decodeURIComponent(Us(s2).split("").map(function(e3) {
        return "%" + ("00" + e3.charCodeAt(0).toString(16)).slice(-2);
      }).join(""))));
    } catch (e3) {
      throw new Error("获取当前用户信息出错，详细错误信息为：" + e3.message);
    }
    var s2;
    return n2.tokenExpired = 1e3 * n2.exp, delete n2.exp, delete n2.iat, n2;
  }
  Us = "function" != typeof atob ? function(e2) {
    if (e2 = String(e2).replace(/[\t\n\f\r ]+/g, ""), !Ms.test(e2))
      throw new Error("Failed to execute 'atob' on 'Window': The string to be decoded is not correctly encoded.");
    var t2;
    e2 += "==".slice(2 - (3 & e2.length));
    for (var n2, s2, r2 = "", i2 = 0; i2 < e2.length; )
      t2 = Ds.indexOf(e2.charAt(i2++)) << 18 | Ds.indexOf(e2.charAt(i2++)) << 12 | (n2 = Ds.indexOf(e2.charAt(i2++))) << 6 | (s2 = Ds.indexOf(e2.charAt(i2++))), r2 += 64 === n2 ? String.fromCharCode(t2 >> 16 & 255) : 64 === s2 ? String.fromCharCode(t2 >> 16 & 255, t2 >> 8 & 255) : String.fromCharCode(t2 >> 16 & 255, t2 >> 8 & 255, 255 & t2);
    return r2;
  } : atob;
  var Fs = n(function(e2, t2) {
    Object.defineProperty(t2, "__esModule", { value: true });
    const n2 = "chooseAndUploadFile:ok", s2 = "chooseAndUploadFile:fail";
    function r2(e3, t3) {
      return e3.tempFiles.forEach((e4, n3) => {
        e4.name || (e4.name = e4.path.substring(e4.path.lastIndexOf("/") + 1)), t3 && (e4.fileType = t3), e4.cloudPath = Date.now() + "_" + n3 + e4.name.substring(e4.name.lastIndexOf("."));
      }), e3.tempFilePaths || (e3.tempFilePaths = e3.tempFiles.map((e4) => e4.path)), e3;
    }
    function i2(e3, t3, { onChooseFile: s3, onUploadProgress: r3 }) {
      return t3.then((e4) => {
        if (s3) {
          const t4 = s3(e4);
          if (void 0 !== t4)
            return Promise.resolve(t4).then((t5) => void 0 === t5 ? e4 : t5);
        }
        return e4;
      }).then((t4) => false === t4 ? { errMsg: n2, tempFilePaths: [], tempFiles: [] } : function(e4, t5, s4 = 5, r4) {
        (t5 = Object.assign({}, t5)).errMsg = n2;
        const i3 = t5.tempFiles, o2 = i3.length;
        let a2 = 0;
        return new Promise((n3) => {
          for (; a2 < s4; )
            c2();
          function c2() {
            const s5 = a2++;
            if (s5 >= o2)
              return void (!i3.find((e5) => !e5.url && !e5.errMsg) && n3(t5));
            const u2 = i3[s5];
            e4.uploadFile({ provider: u2.provider, filePath: u2.path, cloudPath: u2.cloudPath, fileType: u2.fileType, cloudPathAsRealPath: u2.cloudPathAsRealPath, onUploadProgress(e5) {
              e5.index = s5, e5.tempFile = u2, e5.tempFilePath = u2.path, r4 && r4(e5);
            } }).then((e5) => {
              u2.url = e5.fileID, s5 < o2 && c2();
            }).catch((e5) => {
              u2.errMsg = e5.errMsg || e5.message, s5 < o2 && c2();
            });
          }
        });
      }(e3, t4, 5, r3));
    }
    t2.initChooseAndUploadFile = function(e3) {
      return function(t3 = { type: "all" }) {
        return "image" === t3.type ? i2(e3, function(e4) {
          const { count: t4, sizeType: n3, sourceType: i3 = ["album", "camera"], extension: o2 } = e4;
          return new Promise((e5, a2) => {
            uni.chooseImage({ count: t4, sizeType: n3, sourceType: i3, extension: o2, success(t5) {
              e5(r2(t5, "image"));
            }, fail(e6) {
              a2({ errMsg: e6.errMsg.replace("chooseImage:fail", s2) });
            } });
          });
        }(t3), t3) : "video" === t3.type ? i2(e3, function(e4) {
          const { camera: t4, compressed: n3, maxDuration: i3, sourceType: o2 = ["album", "camera"], extension: a2 } = e4;
          return new Promise((e5, c2) => {
            uni.chooseVideo({ camera: t4, compressed: n3, maxDuration: i3, sourceType: o2, extension: a2, success(t5) {
              const { tempFilePath: n4, duration: s3, size: i4, height: o3, width: a3 } = t5;
              e5(r2({ errMsg: "chooseVideo:ok", tempFilePaths: [n4], tempFiles: [{ name: t5.tempFile && t5.tempFile.name || "", path: n4, size: i4, type: t5.tempFile && t5.tempFile.type || "", width: a3, height: o3, duration: s3, fileType: "video", cloudPath: "" }] }, "video"));
            }, fail(e6) {
              c2({ errMsg: e6.errMsg.replace("chooseVideo:fail", s2) });
            } });
          });
        }(t3), t3) : i2(e3, function(e4) {
          const { count: t4, extension: n3 } = e4;
          return new Promise((e5, i3) => {
            let o2 = uni.chooseFile;
            if ("undefined" != typeof wx && "function" == typeof wx.chooseMessageFile && (o2 = wx.chooseMessageFile), "function" != typeof o2)
              return i3({ errMsg: s2 + " 请指定 type 类型，该平台仅支持选择 image 或 video。" });
            o2({ type: "all", count: t4, extension: n3, success(t5) {
              e5(r2(t5));
            }, fail(e6) {
              i3({ errMsg: e6.errMsg.replace("chooseFile:fail", s2) });
            } });
          });
        }(t3), t3);
      };
    };
  }), Ks = t$3(Fs);
  const js = { auto: "auto", onready: "onready", manual: "manual" };
  function $s(e2) {
    return { props: { localdata: { type: Array, default: () => [] }, options: { type: [Object, Array], default: () => ({}) }, spaceInfo: { type: Object, default: () => ({}) }, collection: { type: [String, Array], default: "" }, action: { type: String, default: "" }, field: { type: String, default: "" }, orderby: { type: String, default: "" }, where: { type: [String, Object], default: "" }, pageData: { type: String, default: "add" }, pageCurrent: { type: Number, default: 1 }, pageSize: { type: Number, default: 20 }, getcount: { type: [Boolean, String], default: false }, gettree: { type: [Boolean, String], default: false }, gettreepath: { type: [Boolean, String], default: false }, startwith: { type: String, default: "" }, limitlevel: { type: Number, default: 10 }, groupby: { type: String, default: "" }, groupField: { type: String, default: "" }, distinct: { type: [Boolean, String], default: false }, foreignKey: { type: String, default: "" }, loadtime: { type: String, default: "auto" }, manual: { type: Boolean, default: false } }, data: () => ({ mixinDatacomLoading: false, mixinDatacomHasMore: false, mixinDatacomResData: [], mixinDatacomErrorMessage: "", mixinDatacomPage: {}, mixinDatacomError: null }), created() {
      this.mixinDatacomPage = { current: this.pageCurrent, size: this.pageSize, count: 0 }, this.$watch(() => {
        var e3 = [];
        return ["pageCurrent", "pageSize", "localdata", "collection", "action", "field", "orderby", "where", "getont", "getcount", "gettree", "groupby", "groupField", "distinct"].forEach((t2) => {
          e3.push(this[t2]);
        }), e3;
      }, (e3, t2) => {
        if (this.loadtime === js.manual)
          return;
        let n2 = false;
        const s2 = [];
        for (let r2 = 2; r2 < e3.length; r2++)
          e3[r2] !== t2[r2] && (s2.push(e3[r2]), n2 = true);
        e3[0] !== t2[0] && (this.mixinDatacomPage.current = this.pageCurrent), this.mixinDatacomPage.size = this.pageSize, this.onMixinDatacomPropsChange(n2, s2);
      });
    }, methods: { onMixinDatacomPropsChange(e3, t2) {
    }, mixinDatacomEasyGet({ getone: e3 = false, success: t2, fail: n2 } = {}) {
      this.mixinDatacomLoading || (this.mixinDatacomLoading = true, this.mixinDatacomErrorMessage = "", this.mixinDatacomError = null, this.mixinDatacomGet().then((n3) => {
        this.mixinDatacomLoading = false;
        const { data: s2, count: r2 } = n3.result;
        this.getcount && (this.mixinDatacomPage.count = r2), this.mixinDatacomHasMore = s2.length < this.pageSize;
        const i2 = e3 ? s2.length ? s2[0] : void 0 : s2;
        this.mixinDatacomResData = i2, t2 && t2(i2);
      }).catch((e4) => {
        this.mixinDatacomLoading = false, this.mixinDatacomErrorMessage = e4, this.mixinDatacomError = e4, n2 && n2(e4);
      }));
    }, mixinDatacomGet(t2 = {}) {
      let n2;
      t2 = t2 || {}, n2 = "undefined" != typeof __uniX && __uniX ? e2.databaseForJQL(this.spaceInfo) : e2.database(this.spaceInfo);
      const s2 = t2.action || this.action;
      s2 && (n2 = n2.action(s2));
      const r2 = t2.collection || this.collection;
      n2 = Array.isArray(r2) ? n2.collection(...r2) : n2.collection(r2);
      const i2 = t2.where || this.where;
      i2 && Object.keys(i2).length && (n2 = n2.where(i2));
      const o2 = t2.field || this.field;
      o2 && (n2 = n2.field(o2));
      const a2 = t2.foreignKey || this.foreignKey;
      a2 && (n2 = n2.foreignKey(a2));
      const c2 = t2.groupby || this.groupby;
      c2 && (n2 = n2.groupBy(c2));
      const u2 = t2.groupField || this.groupField;
      u2 && (n2 = n2.groupField(u2));
      true === (void 0 !== t2.distinct ? t2.distinct : this.distinct) && (n2 = n2.distinct());
      const h2 = t2.orderby || this.orderby;
      h2 && (n2 = n2.orderBy(h2));
      const l2 = void 0 !== t2.pageCurrent ? t2.pageCurrent : this.mixinDatacomPage.current, d2 = void 0 !== t2.pageSize ? t2.pageSize : this.mixinDatacomPage.size, p2 = void 0 !== t2.getcount ? t2.getcount : this.getcount, f2 = void 0 !== t2.gettree ? t2.gettree : this.gettree, g2 = void 0 !== t2.gettreepath ? t2.gettreepath : this.gettreepath, m2 = { getCount: p2 }, y2 = { limitLevel: void 0 !== t2.limitlevel ? t2.limitlevel : this.limitlevel, startWith: void 0 !== t2.startwith ? t2.startwith : this.startwith };
      return f2 && (m2.getTree = y2), g2 && (m2.getTreePath = y2), n2 = n2.skip(d2 * (l2 - 1)).limit(d2).get(m2), n2;
    } } };
  }
  function Bs(e2) {
    return function(t2, n2 = {}) {
      n2 = function(e3, t3 = {}) {
        return e3.customUI = t3.customUI || e3.customUI, e3.parseSystemError = t3.parseSystemError || e3.parseSystemError, Object.assign(e3.loadingOptions, t3.loadingOptions), Object.assign(e3.errorOptions, t3.errorOptions), "object" == typeof t3.secretMethods && (e3.secretMethods = t3.secretMethods), e3;
      }({ customUI: false, loadingOptions: { title: "加载中...", mask: true }, errorOptions: { type: "modal", retry: false } }, n2);
      const { customUI: s2, loadingOptions: r2, errorOptions: i2, parseSystemError: o2 } = n2, a2 = !s2;
      return new Proxy({}, { get(s3, c2) {
        switch (c2) {
          case "toString":
            return "[object UniCloudObject]";
          case "toJSON":
            return {};
        }
        return function({ fn: e3, interceptorName: t3, getCallbackArgs: n3 } = {}) {
          return async function(...s4) {
            const r3 = n3 ? n3({ params: s4 }) : {};
            let i3, o3;
            try {
              return await j($(t3, "invoke"), { ...r3 }), i3 = await e3(...s4), await j($(t3, "success"), { ...r3, result: i3 }), i3;
            } catch (e4) {
              throw o3 = e4, await j($(t3, "fail"), { ...r3, error: o3 }), o3;
            } finally {
              await j($(t3, "complete"), o3 ? { ...r3, error: o3 } : { ...r3, result: i3 });
            }
          };
        }({ fn: async function s4(...u2) {
          let h2;
          a2 && uni.showLoading({ title: r2.title, mask: r2.mask });
          const d2 = { name: t2, type: l.OBJECT, data: { method: c2, params: u2 } };
          "object" == typeof n2.secretMethods && function(e3, t3) {
            const n3 = t3.data.method, s5 = e3.secretMethods || {}, r3 = s5[n3] || s5["*"];
            r3 && (t3.secretType = r3);
          }(n2, d2);
          let p2 = false;
          try {
            h2 = await e2.callFunction(d2);
          } catch (e3) {
            p2 = true, h2 = { result: new te(e3) };
          }
          const { errSubject: f2, errCode: g2, errMsg: m2, newToken: y2 } = h2.result || {};
          if (a2 && uni.hideLoading(), y2 && y2.token && y2.tokenExpired && (ie(y2), Y(H.REFRESH_TOKEN, { ...y2 })), g2) {
            let e3 = m2;
            if (p2 && o2) {
              e3 = (await o2({ objectName: t2, methodName: c2, params: u2, errSubject: f2, errCode: g2, errMsg: m2 })).errMsg || m2;
            }
            if (a2)
              if ("toast" === i2.type)
                uni.showToast({ title: e3, icon: "none" });
              else {
                if ("modal" !== i2.type)
                  throw new Error(`Invalid errorOptions.type: ${i2.type}`);
                {
                  const { confirm: t3 } = await async function({ title: e4, content: t4, showCancel: n4, cancelText: s5, confirmText: r3 } = {}) {
                    return new Promise((i3, o3) => {
                      uni.showModal({ title: e4, content: t4, showCancel: n4, cancelText: s5, confirmText: r3, success(e5) {
                        i3(e5);
                      }, fail() {
                        i3({ confirm: false, cancel: true });
                      } });
                    });
                  }({ title: "提示", content: e3, showCancel: i2.retry, cancelText: "取消", confirmText: i2.retry ? "重试" : "确定" });
                  if (i2.retry && t3)
                    return s4(...u2);
                }
              }
            const n3 = new te({ subject: f2, code: g2, message: m2, requestId: h2.requestId });
            throw n3.detail = h2.result, Y(H.RESPONSE, { type: J.CLOUD_OBJECT, content: n3 }), n3;
          }
          return Y(H.RESPONSE, { type: J.CLOUD_OBJECT, content: h2.result }), h2.result;
        }, interceptorName: "callObject", getCallbackArgs: function({ params: e3 } = {}) {
          return { objectName: t2, methodName: c2, params: e3 };
        } });
      } });
    };
  }
  function Ws(e2) {
    return U(Xt.replace("{spaceId}", e2.config.spaceId));
  }
  async function Hs({ openid: e2, callLoginByWeixin: t2 = false } = {}) {
    Ws(this);
    throw new Error(`[SecureNetwork] API \`initSecureNetworkByWeixin\` is not supported on platform \`${P}\``);
  }
  async function Js(e2) {
    const t2 = Ws(this);
    return t2.initPromise || (t2.initPromise = Hs.call(this, e2).then((e3) => e3).catch((e3) => {
      throw delete t2.initPromise, e3;
    })), t2.initPromise;
  }
  function zs(e2) {
    return function({ openid: t2, callLoginByWeixin: n2 = false } = {}) {
      return Js.call(e2, { openid: t2, callLoginByWeixin: n2 });
    };
  }
  function Vs(e2) {
    !function(e3) {
      he = e3;
    }(e2);
  }
  function Gs(e2) {
    const n2 = { getAppBaseInfo: uni.getSystemInfo, getPushClientId: uni.getPushClientId };
    return function(s2) {
      return new Promise((r2, i2) => {
        n2[e2]({ ...s2, success(e3) {
          r2(e3);
        }, fail(e3) {
          i2(e3);
        } });
      });
    };
  }
  class Ys extends S {
    constructor() {
      super(), this._uniPushMessageCallback = this._receivePushMessage.bind(this), this._currentMessageId = -1, this._payloadQueue = [];
    }
    init() {
      return Promise.all([Gs("getAppBaseInfo")(), Gs("getPushClientId")()]).then(([{ appId: e2 } = {}, { cid: t2 } = {}] = []) => {
        if (!e2)
          throw new Error("Invalid appId, please check the manifest.json file");
        if (!t2)
          throw new Error("Invalid push client id");
        this._appId = e2, this._pushClientId = t2, this._seqId = Date.now() + "-" + Math.floor(9e5 * Math.random() + 1e5), this.emit("open"), this._initMessageListener();
      }, (e2) => {
        throw this.emit("error", e2), this.close(), e2;
      });
    }
    async open() {
      return this.init();
    }
    _isUniCloudSSE(e2) {
      if ("receive" !== e2.type)
        return false;
      const t2 = e2 && e2.data && e2.data.payload;
      return !(!t2 || "UNI_CLOUD_SSE" !== t2.channel || t2.seqId !== this._seqId);
    }
    _receivePushMessage(e2) {
      if (!this._isUniCloudSSE(e2))
        return;
      const t2 = e2 && e2.data && e2.data.payload, { action: n2, messageId: s2, message: r2 } = t2;
      this._payloadQueue.push({ action: n2, messageId: s2, message: r2 }), this._consumMessage();
    }
    _consumMessage() {
      for (; ; ) {
        const e2 = this._payloadQueue.find((e3) => e3.messageId === this._currentMessageId + 1);
        if (!e2)
          break;
        this._currentMessageId++, this._parseMessagePayload(e2);
      }
    }
    _parseMessagePayload(e2) {
      const { action: t2, messageId: n2, message: s2 } = e2;
      "end" === t2 ? this._end({ messageId: n2, message: s2 }) : "message" === t2 && this._appendMessage({ messageId: n2, message: s2 });
    }
    _appendMessage({ messageId: e2, message: t2 } = {}) {
      this.emit("message", t2);
    }
    _end({ messageId: e2, message: t2 } = {}) {
      this.emit("end", t2), this.close();
    }
    _initMessageListener() {
      uni.onPushMessage(this._uniPushMessageCallback);
    }
    _destroy() {
      uni.offPushMessage(this._uniPushMessageCallback);
    }
    toJSON() {
      return { appId: this._appId, pushClientId: this._pushClientId, seqId: this._seqId };
    }
    close() {
      this._destroy(), this.emit("close");
    }
  }
  async function Qs(e2) {
    {
      const { osName: e3, osVersion: t3 } = ce();
      "ios" === e3 && function(e4) {
        if (!e4 || "string" != typeof e4)
          return 0;
        const t4 = e4.match(/^(\d+)./);
        return t4 && t4[1] ? parseInt(t4[1]) : 0;
      }(t3) >= 14 && console.warn("iOS 14及以上版本连接uniCloud本地调试服务需要允许客户端查找并连接到本地网络上的设备（仅开发期间需要，发行后不需要）");
    }
    const t2 = e2.__dev__;
    if (!t2.debugInfo)
      return;
    const { address: n2, servePort: s2 } = t2.debugInfo, { address: r2 } = await Ot(n2, s2);
    if (r2)
      return t2.localAddress = r2, void (t2.localPort = s2);
    const i2 = console["error"];
    let o2 = "";
    if ("remote" === t2.debugInfo.initialLaunchType ? (t2.debugInfo.forceRemote = true, o2 = "当前客户端和HBuilderX不在同一局域网下（或其他网络原因无法连接HBuilderX），uniCloud本地调试服务不对当前客户端生效。\n- 如果不使用uniCloud本地调试服务，请直接忽略此信息。\n- 如需使用uniCloud本地调试服务，请将客户端与主机连接到同一局域网下并重新运行到客户端。") : o2 = "无法连接uniCloud本地调试服务，请检查当前客户端是否与主机在同一局域网下。\n- 如需使用uniCloud本地调试服务，请将客户端与主机连接到同一局域网下并重新运行到客户端。", o2 += "\n- 如果在HBuilderX开启的状态下切换过网络环境，请重启HBuilderX后再试\n- 检查系统防火墙是否拦截了HBuilderX自带的nodejs\n- 检查是否错误的使用拦截器修改uni.request方法的参数", 0 === P.indexOf("mp-") && (o2 += "\n- 小程序中如何使用uniCloud，请参考：https://uniapp.dcloud.net.cn/uniCloud/publish.html#useinmp"), !t2.debugInfo.forceRemote)
      throw new Error(o2);
    i2(o2);
  }
  function Xs(e2) {
    e2._initPromiseHub || (e2._initPromiseHub = new v({ createPromise: function() {
      let t2 = Promise.resolve();
      var n2;
      n2 = 1, t2 = new Promise((e3) => {
        setTimeout(() => {
          e3();
        }, n2);
      });
      const s2 = e2.auth();
      return t2.then(() => s2.getLoginState()).then((e3) => e3 ? Promise.resolve() : s2.signInAnonymously());
    } }));
  }
  const Zs = { tcb: Pt, tencent: Pt, aliyun: fe, private: Rt, dcloud: Rt, alipay: Bt };
  let er = new class {
    init(e2) {
      let t2 = {};
      const n2 = Zs[e2.provider];
      if (!n2)
        throw new Error("未提供正确的provider参数");
      t2 = n2.init(e2), function(e3) {
        const t3 = {};
        e3.__dev__ = t3, t3.debugLog = "app" === P;
        const n3 = C;
        n3 && !n3.code && (t3.debugInfo = n3);
        const s2 = new v({ createPromise: function() {
          return Qs(e3);
        } });
        t3.initLocalNetwork = function() {
          return s2.exec();
        };
      }(t2), Xs(t2), Gn(t2), function(e3) {
        const t3 = e3.uploadFile;
        e3.uploadFile = function(e4) {
          return t3.call(this, e4);
        };
      }(t2), function(e3) {
        e3.database = function(t3) {
          if (t3 && Object.keys(t3).length > 0)
            return e3.init(t3).database();
          if (this._database)
            return this._database;
          const n3 = as(cs, { uniClient: e3 });
          return this._database = n3, n3;
        }, e3.databaseForJQL = function(t3) {
          if (t3 && Object.keys(t3).length > 0)
            return e3.init(t3).databaseForJQL();
          if (this._databaseForJQL)
            return this._databaseForJQL;
          const n3 = as(cs, { uniClient: e3, isJQL: true });
          return this._databaseForJQL = n3, n3;
        };
      }(t2), function(e3) {
        e3.getCurrentUserInfo = qs, e3.chooseAndUploadFile = Ks.initChooseAndUploadFile(e3), Object.assign(e3, { get mixinDatacom() {
          return $s(e3);
        } }), e3.SSEChannel = Ys, e3.initSecureNetworkByWeixin = zs(e3), e3.setCustomClientInfo = Vs, e3.importObject = Bs(e3);
      }(t2);
      return ["callFunction", "uploadFile", "deleteFile", "getTempFileURL", "downloadFile", "chooseAndUploadFile"].forEach((e3) => {
        if (!t2[e3])
          return;
        const n3 = t2[e3];
        t2[e3] = function() {
          return n3.apply(t2, Array.from(arguments));
        }, t2[e3] = (/* @__PURE__ */ function(e4, t3) {
          return function(n4) {
            let s2 = false;
            if ("callFunction" === t3) {
              const e5 = n4 && n4.type || l.DEFAULT;
              s2 = e5 !== l.DEFAULT;
            }
            const r2 = "callFunction" === t3 && !s2, i2 = this._initPromiseHub.exec();
            n4 = n4 || {};
            const { success: o2, fail: a2, complete: c2 } = ee(n4), u2 = i2.then(() => s2 ? Promise.resolve() : j($(t3, "invoke"), n4)).then(() => e4.call(this, n4)).then((e5) => s2 ? Promise.resolve(e5) : j($(t3, "success"), e5).then(() => j($(t3, "complete"), e5)).then(() => (r2 && Y(H.RESPONSE, { type: J.CLOUD_FUNCTION, content: e5 }), Promise.resolve(e5))), (e5) => s2 ? Promise.reject(e5) : j($(t3, "fail"), e5).then(() => j($(t3, "complete"), e5)).then(() => (Y(H.RESPONSE, { type: J.CLOUD_FUNCTION, content: e5 }), Promise.reject(e5))));
            if (!(o2 || a2 || c2))
              return u2;
            u2.then((e5) => {
              o2 && o2(e5), c2 && c2(e5), r2 && Y(H.RESPONSE, { type: J.CLOUD_FUNCTION, content: e5 });
            }, (e5) => {
              a2 && a2(e5), c2 && c2(e5), r2 && Y(H.RESPONSE, { type: J.CLOUD_FUNCTION, content: e5 });
            });
          };
        }(t2[e3], e3)).bind(t2);
      }), t2.init = this.init, t2;
    }
  }();
  (() => {
    const e2 = O;
    let t2 = {};
    if (e2 && 1 === e2.length)
      t2 = e2[0], er = er.init(t2), er._isDefault = true;
    else {
      const t3 = ["auth", "callFunction", "uploadFile", "deleteFile", "getTempFileURL", "downloadFile"], n2 = ["database", "getCurrentUserInfo", "importObject"];
      let s2;
      s2 = e2 && e2.length > 0 ? "应用有多个服务空间，请通过uniCloud.init方法指定要使用的服务空间" : "应用未关联服务空间，请在uniCloud目录右键关联服务空间", [...t3, ...n2].forEach((e3) => {
        er[e3] = function() {
          if (console.error(s2), -1 === n2.indexOf(e3))
            return Promise.reject(new te({ code: "SYS_ERR", message: s2 }));
          console.error(s2);
        };
      });
    }
    if (Object.assign(er, { get mixinDatacom() {
      return $s(er);
    } }), Ls(er), er.addInterceptor = F, er.removeInterceptor = K, er.interceptObject = B, uni.__uniCloud = er, "app" === P) {
      const e3 = D();
      e3.uniCloud = er, e3.UniCloudError = te;
    }
  })();
  var tr = er;
  const en$1 = {
    "uni-load-more.contentdown": "Pull up to show more",
    "uni-load-more.contentrefresh": "loading...",
    "uni-load-more.contentnomore": "No more data"
  };
  const zhHans$1 = {
    "uni-load-more.contentdown": "上拉显示更多",
    "uni-load-more.contentrefresh": "正在加载...",
    "uni-load-more.contentnomore": "没有更多数据了"
  };
  const zhHant$1 = {
    "uni-load-more.contentdown": "上拉顯示更多",
    "uni-load-more.contentrefresh": "正在加載...",
    "uni-load-more.contentnomore": "沒有更多數據了"
  };
  const messages = {
    en: en$1,
    "zh-Hans": zhHans$1,
    "zh-Hant": zhHant$1
  };
  let platform;
  setTimeout(() => {
    platform = uni.getSystemInfoSync().platform;
  }, 16);
  const {
    t: t$2
  } = initVueI18n(messages);
  const _sfc_main$29 = {
    name: "UniLoadMore",
    emits: ["clickLoadMore"],
    props: {
      status: {
        // 上拉的状态：more-loading前；loading-loading中；noMore-没有更多了
        type: String,
        default: "more"
      },
      showIcon: {
        type: Boolean,
        default: true
      },
      iconType: {
        type: String,
        default: "auto"
      },
      iconSize: {
        type: Number,
        default: 24
      },
      color: {
        type: String,
        default: "#777777"
      },
      contentText: {
        type: Object,
        default() {
          return {
            contentdown: "",
            contentrefresh: "",
            contentnomore: ""
          };
        }
      },
      showText: {
        type: Boolean,
        default: true
      }
    },
    data() {
      return {
        webviewHide: false,
        platform,
        imgBase64: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QzlBMzU3OTlEOUM0MTFFOUI0NTZDNERBQURBQzI4RkUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QzlBMzU3OUFEOUM0MTFFOUI0NTZDNERBQURBQzI4RkUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpDOUEzNTc5N0Q5QzQxMUU5QjQ1NkM0REFBREFDMjhGRSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpDOUEzNTc5OEQ5QzQxMUU5QjQ1NkM0REFBREFDMjhGRSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pt+ALSwAAA6CSURBVHja1FsLkFZVHb98LM+F5bHL8khA1iSeiyQBCRM+YGqKUnnJTDLGI0BGZlKDIU2MMglUiDApEZvSsZnQtBRJtKwQNKQMFYeRDR10WOLd8ljYXdh+v8v5fR3Od+797t1dnOnO/Ofce77z+J//+b/P+ZqtXbs2sJ9MJhNUV1cHJ06cCJo3bx7EPc2aNcvpy7pWrVoF+/fvDyoqKoI2bdoE9fX1F7TjN8a+EXBn/fkfvw942Tf+wYMHg9mzZwfjxo0LDhw4EPa1x2MbFw/fOGfPng1qa2tzcCkILsLDydq2bRsunpOTMM7TD/W/tZDZhPdeKD+yGxHhdu3aBV27dg3OnDlzMVANMheLAO3btw8KCwuDmpoaX5OxbgUIMEq7K8IcPnw4KCsrC/r37x8cP378/4cAXAB3vqSkJMuiDhTkw+XcuXNhOWbMmKBly5YhUT8xArhyFvP0BfwRsAuwxJZJsm/nzp2DTp06he/OU+cZ64K6o0ePBkOHDg2GDx8e6gEbJ5Q/NHNuAJQ1hgBeHUDlR7nVTkY8rQAvAi4z34vR/mPs1FoRsaCgIJThI0eOBC1atEiFGGV+5MiRoS45efJkqFjJFXV1dQuA012m2WcwTw98fy6CqBdsaiIO4CScrGPHjvk4odhavPquRtFWXEC25VgkREKOCh/qDSq+vn37htzD/mZTOmOc5U7zKzBPEedygWshcDyWvs30igAbU+6oyMgJBCFhwQE0fccxN60Ay9iebbjoDh06hMowjQxT4fXq1SskArmHZpkArvixp/kWzHdMeArExSJEaiXIjjRjRJ4DaAGWpibLzXN3Fm1vA5teBgh3j1Rv3bp1YgKwPdmf2p9zcyNYYgPKMfY0T5f5nNYdw158nJ8QawW4CLKwiOBSEgO/hok2eBydR+3dYH+PLxA5J8Vv0KBBwenTp0P2JWAx6+yFEBfs8lMY+y0SWMBNI9E4ThKi58VKTg3FQZS1RQF1cz27eC0QHMu+3E0SkUowjhVt5VdaWhp07949ZHv2Qd1EjDXM2cla1M0nl3GxAs3J9yREzyTdFVKVFOaE9qRA8GM0WebRuo9JGZKA7Mv2SeS/Z8+eoQ9BArMfFrLGo6jvxbhHbJZnKX2Rzz1O7QhJJ9Cs2ZMaWIyq/zhdeqPNfIoHd58clIQD+JSXl4dKlyIAuBdVXZwFVWKspSSoxE++h8x4k3uCnEhE4I5KwRiFWGOU0QWKiCYLbdoRMRKAu2kQ9vkfLU6dOhX06NEjlH+yMRZSinnuyWnYosVcji8CEA/6Cg2JF+IIUBqnGKUTCNwtwBN4f89RiK1R96DEgO2o0NDmtEdvVFdVVYV+P3UAPUEs6GFwV3PHmXkD4vh74iDFJysVI/MlaQhwKeBNTLYX5VuA8T4/gZxA4MRGFxDB6R7OmYPfyykGRJbyie+XnGYnQIC/coH9+vULiYrxrkL9ZA9+0ykaHIfEpM7ge8TiJ2CsHYwyMfafAF1yCGBHYIbCVDjDjKt7BeB51D+LgQa6OkG7IDYEEtvQ7lnXLKLtLdLuJBpE4gPUXcW2+PkZwOex+4cGDhwYDBkyRL7/HFcEwUGPo/8uWRUpYnfxGHco8HkewLHLyYmAawAPuIFZxhOpDfJQ8gbUv41yORAptMWBNr6oqMhWird5+u+iHmBb2nhjDV7HWBNQTgK8y11l5NetWzc5ULscAtSj7nbNI0skhWeUZCc0W4nyH/jO4Vz0u1IeYhbk4AiwM6tjxIWByHsoZ9qcIBPJd/y+DwPfBESOmCa/QF3WiZHucLlEDpNxcNhmheEOPgdQNx6/VZFQzFZ5TN08AHXQt2Ii3EdyFuUsPtTcGPhW5iMiCNELvz+Gdn9huG4HUJaW/w3g0wxV0XaG7arG2WeKiUWYM4Y7GO5ezshTARbbWGw/DvXkpp/ivVvE0JVoMxN4rpGzJMhE5Pl+xlATsDIqikP9F9D2z3h9nOksEUFhK+qO4rcPkoalMQ/HqJLIyb3F3JdjrCcw1yZ8joyJLR5gCo54etlag7qIoeNh1N1BRYj3DTFJ0elotxPlVzkGuYAmL0VSJVGAJA41c4Z6A3BzTLfn0HYwYKEI6CUAMzZEWvLsIcQOo1AmmyyM72nHJCfYsogflGV6jEk9vyQZXSuq6w4c16NsGcGZbwOPr+H1RkOk2LEzjNepxQkihHSCQ4ynAYNRx2zMKV92CQMWqj8J0BRE8EShxRFN6YrfCRhC0x3r/Zm4IbQCcmJoV0kMamllccR6FjHqUC5F2R/wS2dcymOlfAKOS4KmzQb5cpNC2MC7JhVn5wjXoJ44rYhLh8n0eXOCorJxa7POjbSlCGVczr34/RsAmrcvo9s+wGp3tzVhntxiXiJ4nvEYb4FJkf0O8HocAePmLvCxnL0AORraVekJk6TYjDabRVXfRE2lCN1h6ZQRN1+InUbsCpKwoBZHh0dODN9JBCUffItXxEavTQkUtnfTVAplCWL3JISz29h4NjotnuSsQKJCk8dF+kJR6RARjrqFVmfPnj3ZbK8cIJ0msd6jgHPGtfVTQ8VLmlvh4mct9sobRmPic0DyDQQnx/NlfYUgyz59+oScsH379pAwXABD32nTpoUHIToESeI5mnbE/UqDdyLcafEBf2MCqgC7NwxIbMREJQ0g4D4sfJwnD+AmRrII05cfMWJE+L1169bQr+fip06dGp4oJ83lmYd5wj/EmMa4TaHivo4EeCguYZBnkB5g2aWA69OIEnUHOaGysjIYMGBAMGnSpODYsWPZwCpFmm4lNq+4gSLQA7jcX8DwtjEyRC8wjabnXEx9kfWnTJkSJkAo90xpJVV+FmcVNeYAF5zWngS4C4O91MBxmAv8blLEpbjI5sz9MTdAhcgkCT1RO8mZkAjfiYpTEvStAS53Uw1vAiUGgZ3GpuQEYvoiBqlIan7kSDHnTwJQFNiPu0+5VxCVYhcZIjNrdXUDdp+Eq5AZ3Gkg8QAyVZRZIk4Tl4QAbF9cXJxNYZMAtAokgs4BrNxEpCtteXg7DDTMDKYNSuQdKsnJBek7HxewvxaosWxLYXtw+cJp18217wql4aKCfBNoEu0O5VU+PhctJ0YeXD4C6JQpyrlpSLTojpGGGN5YwNziChdIZLk4lvLcFJ9jMX3QdiImY9bmGQU+TRUL5CHITTRlgF8D9ouD1MfmLoEPl5xokIumZ2cfgMpHt47IW9N64Hsh7wQYYjyIugWuF5fCqYncXRd5vPMWyizzvhi/32+nvG0dZc9vR6fZOu0md5e+uC408FvKSIOZwXlGvxPv95izA2Vtvg1xKFWARI+vMX66HUhpQQb643uW1bSjuTWyw2SBvDrBvjFic1eGGlz5esq3ko9uSIlBRqPuFcCv8F4WIcN12nVaBd0SaYwI6PDDImR11JkqgHcPmQssjxIn6bUshygDFJUTxPMpHk+jfjPgupgdnYV2R/g7xSjtpah8RJBewhwf0gGK6XI92u4wXFEU40afJ4DN4h5LcAd+40HI3JgJecuT0c062W0i2hQJUTcxan3/CMW1PF2K6bbA+Daz4xRs1D3Br1Cm0OihKCqizW78/nXAF/G5TXrEcVzaNMH6CyMswqsAHqDyDLEyou8lwOXnKF8DjI6KjV3KzMBiXkDH8ij/H214J5A596ekrZ3F0zXlWeL7+P5eUrNo3/QwC15uxthuzidy7DzKRwEDaAViiDgKbTbz7CJnzo0bN7pIfIiid8SuPwn25o3QCmpnyjlZkyxPP8EomCJzrGb7GJMx7tNsq4MT2xMUYaiErZOluTzKsnz3gwCeCZyVRZJfYplNEokEjwrPtxlxjeYAk+F1F74VAzPxQRNYYdtpOUvWs8J1sGhBJMNsb7igN8plJs1eSmLIhLKE4rvaCX27gOhLpLOsIzJ7qn/i+wZzcvSOZ23/du8TZjwV8zHIXoP4R3ifBxiFz1dcVpa3aPntPE+c6TmIWE9EtcMmAcPdWAhYhAXxcLOQi9L1WhD1Sc8p1d2oL7XGiRKp8F4A2i8K/nfI+y/gsTDJ/YC/8+AD5Uh04KHiGl+cIFPnBDDrPMjwRGkLXyxO4VGbfQWnDH2v0bVWE3C9QOXlepbgjEfIJQI6XDG3z5ahD9cw2pS78ipB85wyScNTvsVzlzzhL8/jRrnmVjfFJK/m3m4nj9vbgQTguT8XZTjsm672R5uJKEaQmBI/c58gyus8ZDagLpEVSJBIyHp4jn++xqPV71OgQgJYEWOtZ/haxRtKmWOBu8xdBLftWltsY84zE6WIEy/eIOWL+BaayMx+KHtL7EAkqdNDLiEXmEMUHniedtJqg9HmZtfvt26vNi0BdG3Ft3g8ZOf7PAu59TxtzivLNIekyi+wD1i8CuUiD9FXAa8C+/xS3JPmZnomyc7H+fb4/Se0bk41Fel621r4cgVxbq91V4jVqwB7HTe2M7jgB+QWHavZkDRPmZcASoZEmBx6i75bGjPcMdL4/VKGFAGWZkGzPG0XAbdL9A81G5LOmUnC9hHKJeO7dcUMjblSl12867ElFTtaGl20xvvLGPdVz/8TVuU7y0x1PG7vtNg24oz9Uo/Z412++VFWI7Fcog9tu9Lm6gvRmIPv9x1xmQAu6RDkXtbOtlGEmpgD5Nvnyc0dcv0EE6cfdi1HmhMf9wDF3k3gtRvEedhxjpgfqPb9PU9iEJHnyOUA7bQUXh6kq/D7l2iTjWv7XOD530BDr8jIrus+srXjt4MzumJMHuTsBa63YKE1+RR5lBjEikCCnWKWiHdzOgKO+nRIBAF88za/IFmJ3eMZov4CYxGBabcpGL8EYx+SeMXJeRwHNsV/h+vdxeuhEpN3ZyNY78Gm2fknJxVGhyjixPiQvVkNzT1elD9Py/aTAL64Hb9vcYmC9zfdXdT/C1LeGbg4rnBaAihDFJH12W5ulfNCNe/xTsP3bp8ikzJs5BF+5PNfAQYAPaseTdsEcaYAAAAASUVORK5CYII="
      };
    },
    computed: {
      iconSnowWidth() {
        return (Math.floor(this.iconSize / 24) || 1) * 2;
      },
      contentdownText() {
        return this.contentText.contentdown || t$2("uni-load-more.contentdown");
      },
      contentrefreshText() {
        return this.contentText.contentrefresh || t$2("uni-load-more.contentrefresh");
      },
      contentnomoreText() {
        return this.contentText.contentnomore || t$2("uni-load-more.contentnomore");
      }
    },
    mounted() {
      var pages2 = getCurrentPages();
      var page = pages2[pages2.length - 1];
      var currentWebview = page.$getAppWebview();
      currentWebview.addEventListener("hide", () => {
        this.webviewHide = true;
      });
      currentWebview.addEventListener("show", () => {
        this.webviewHide = false;
      });
    },
    methods: {
      onClick() {
        this.$emit("clickLoadMore", {
          detail: {
            status: this.status
          }
        });
      }
    }
  };
  function _sfc_render$28(_ctx, _cache, $props, $setup, $data, $options) {
    return vue.openBlock(), vue.createElementBlock("view", {
      class: "uni-load-more",
      onClick: _cache[0] || (_cache[0] = (...args) => $options.onClick && $options.onClick(...args))
    }, [
      !$data.webviewHide && ($props.iconType === "circle" || $props.iconType === "auto" && $data.platform === "android") && $props.status === "loading" && $props.showIcon ? (vue.openBlock(), vue.createElementBlock(
        "view",
        {
          key: 0,
          style: vue.normalizeStyle({ width: $props.iconSize + "px", height: $props.iconSize + "px" }),
          class: "uni-load-more__img uni-load-more__img--android-MP"
        },
        [
          vue.createElementVNode(
            "view",
            {
              class: "uni-load-more__img-icon",
              style: vue.normalizeStyle({ borderTopColor: $props.color, borderTopWidth: $props.iconSize / 12 })
            },
            null,
            4
            /* STYLE */
          ),
          vue.createElementVNode(
            "view",
            {
              class: "uni-load-more__img-icon",
              style: vue.normalizeStyle({ borderTopColor: $props.color, borderTopWidth: $props.iconSize / 12 })
            },
            null,
            4
            /* STYLE */
          ),
          vue.createElementVNode(
            "view",
            {
              class: "uni-load-more__img-icon",
              style: vue.normalizeStyle({ borderTopColor: $props.color, borderTopWidth: $props.iconSize / 12 })
            },
            null,
            4
            /* STYLE */
          )
        ],
        4
        /* STYLE */
      )) : !$data.webviewHide && $props.status === "loading" && $props.showIcon ? (vue.openBlock(), vue.createElementBlock(
        "view",
        {
          key: 1,
          style: vue.normalizeStyle({ width: $props.iconSize + "px", height: $props.iconSize + "px" }),
          class: "uni-load-more__img uni-load-more__img--ios-H5"
        },
        [
          vue.createElementVNode("image", {
            src: $data.imgBase64,
            mode: "widthFix"
          }, null, 8, ["src"])
        ],
        4
        /* STYLE */
      )) : vue.createCommentVNode("v-if", true),
      $props.showText ? (vue.openBlock(), vue.createElementBlock(
        "text",
        {
          key: 2,
          class: "uni-load-more__text",
          style: vue.normalizeStyle({ color: $props.color })
        },
        vue.toDisplayString($props.status === "more" ? $options.contentdownText : $props.status === "loading" ? $options.contentrefreshText : $options.contentnomoreText),
        5
        /* TEXT, STYLE */
      )) : vue.createCommentVNode("v-if", true)
    ]);
  }
  const __easycom_3$6 = /* @__PURE__ */ _export_sfc(_sfc_main$29, [["render", _sfc_render$28], ["__scopeId", "data-v-9245e42c"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/uni_modules/uni-load-more/components/uni-load-more/uni-load-more.vue"]]);
  const _sfc_main$28 = {
    name: "uniDataChecklist",
    mixins: [tr.mixinDatacom || {}],
    emits: ["input", "update:modelValue", "change"],
    props: {
      mode: {
        type: String,
        default: "default"
      },
      multiple: {
        type: Boolean,
        default: false
      },
      value: {
        type: [Array, String, Number],
        default() {
          return "";
        }
      },
      // TODO vue3
      modelValue: {
        type: [Array, String, Number],
        default() {
          return "";
        }
      },
      localdata: {
        type: Array,
        default() {
          return [];
        }
      },
      min: {
        type: [Number, String],
        default: ""
      },
      max: {
        type: [Number, String],
        default: ""
      },
      wrap: {
        type: Boolean,
        default: false
      },
      icon: {
        type: String,
        default: "left"
      },
      selectedColor: {
        type: String,
        default: ""
      },
      selectedTextColor: {
        type: String,
        default: ""
      },
      emptyText: {
        type: String,
        default: "暂无数据"
      },
      disabled: {
        type: Boolean,
        default: false
      },
      map: {
        type: Object,
        default() {
          return {
            text: "text",
            value: "value"
          };
        }
      }
    },
    watch: {
      localdata: {
        handler(newVal) {
          this.range = newVal;
          this.dataList = this.getDataList(this.getSelectedValue(newVal));
        },
        deep: true
      },
      mixinDatacomResData(newVal) {
        this.range = newVal;
        this.dataList = this.getDataList(this.getSelectedValue(newVal));
      },
      value(newVal) {
        this.dataList = this.getDataList(newVal);
      },
      modelValue(newVal) {
        this.dataList = this.getDataList(newVal);
      }
    },
    data() {
      return {
        dataList: [],
        range: [],
        contentText: {
          contentdown: "查看更多",
          contentrefresh: "加载中",
          contentnomore: "没有更多"
        },
        isLocal: true,
        styles: {
          selectedColor: "#2979ff",
          selectedTextColor: "#666"
        },
        isTop: 0
      };
    },
    computed: {
      dataValue() {
        if (this.value === "")
          return this.modelValue;
        if (this.modelValue === "")
          return this.value;
        return this.value;
      }
    },
    created() {
      if (this.localdata && this.localdata.length !== 0) {
        this.isLocal = true;
        this.range = this.localdata;
        this.dataList = this.getDataList(this.getSelectedValue(this.range));
      } else {
        if (this.collection) {
          this.isLocal = false;
          this.loadData();
        }
      }
    },
    methods: {
      loadData() {
        this.mixinDatacomGet().then((res2) => {
          this.mixinDatacomResData = res2.result.data;
          if (this.mixinDatacomResData.length === 0) {
            this.isLocal = false;
            this.mixinDatacomErrorMessage = this.emptyText;
          } else {
            this.isLocal = true;
          }
        }).catch((err) => {
          this.mixinDatacomErrorMessage = err.message;
        });
      },
      /**
       * 获取父元素实例
       */
      getForm(name = "uniForms") {
        let parent = this.$parent;
        let parentName = parent.$options.name;
        while (parentName !== name) {
          parent = parent.$parent;
          if (!parent)
            return false;
          parentName = parent.$options.name;
        }
        return parent;
      },
      change(e2) {
        const values = e2.detail.value;
        let detail = {
          value: [],
          data: []
        };
        if (this.multiple) {
          this.range.forEach((item) => {
            if (values.includes(item[this.map.value] + "")) {
              detail.value.push(item[this.map.value]);
              detail.data.push(item);
            }
          });
        } else {
          const range2 = this.range.find((item) => item[this.map.value] + "" === values);
          if (range2) {
            detail = {
              value: range2[this.map.value],
              data: range2
            };
          }
        }
        this.$emit("input", detail.value);
        this.$emit("update:modelValue", detail.value);
        this.$emit("change", {
          detail
        });
        if (this.multiple) {
          this.dataList = this.getDataList(detail.value, true);
        } else {
          this.dataList = this.getDataList(detail.value);
        }
      },
      /**
       * 获取渲染的新数组
       * @param {Object} value 选中内容
       */
      getDataList(value) {
        let dataList = JSON.parse(JSON.stringify(this.range));
        let list = [];
        if (this.multiple) {
          if (!Array.isArray(value)) {
            value = [];
          }
        } else {
          if (Array.isArray(value) && value.length) {
            value = value[0];
          }
        }
        dataList.forEach((item, index) => {
          item.disabled = item.disable || item.disabled || false;
          if (this.multiple) {
            if (value.length > 0) {
              let have = value.find((val2) => val2 === item[this.map.value]);
              item.selected = have !== void 0;
            } else {
              item.selected = false;
            }
          } else {
            item.selected = value === item[this.map.value];
          }
          list.push(item);
        });
        return this.setRange(list);
      },
      /**
       * 处理最大最小值
       * @param {Object} list
       */
      setRange(list) {
        let selectList = list.filter((item) => item.selected);
        let min = Number(this.min) || 0;
        let max = Number(this.max) || "";
        list.forEach((item, index) => {
          if (this.multiple) {
            if (selectList.length <= min) {
              let have = selectList.find((val2) => val2[this.map.value] === item[this.map.value]);
              if (have !== void 0) {
                item.disabled = true;
              }
            }
            if (selectList.length >= max && max !== "") {
              let have = selectList.find((val2) => val2[this.map.value] === item[this.map.value]);
              if (have === void 0) {
                item.disabled = true;
              }
            }
          }
          this.setStyles(item, index);
          list[index] = item;
        });
        return list;
      },
      /**
       * 设置 class
       * @param {Object} item
       * @param {Object} index
       */
      setStyles(item, index) {
        item.styleBackgroud = this.setStyleBackgroud(item);
        item.styleIcon = this.setStyleIcon(item);
        item.styleIconText = this.setStyleIconText(item);
        item.styleRightIcon = this.setStyleRightIcon(item);
      },
      /**
       * 获取选中值
       * @param {Object} range
       */
      getSelectedValue(range2) {
        if (!this.multiple)
          return this.dataValue;
        let selectedArr = [];
        range2.forEach((item) => {
          if (item.selected) {
            selectedArr.push(item[this.map.value]);
          }
        });
        return this.dataValue.length > 0 ? this.dataValue : selectedArr;
      },
      /**
       * 设置背景样式
       */
      setStyleBackgroud(item) {
        let styles = {};
        let selectedColor = this.selectedColor ? this.selectedColor : "#2979ff";
        if (this.selectedColor) {
          if (this.mode !== "list") {
            styles["border-color"] = item.selected ? selectedColor : "#DCDFE6";
          }
          if (this.mode === "tag") {
            styles["background-color"] = item.selected ? selectedColor : "#f5f5f5";
          }
        }
        let classles = "";
        for (let i2 in styles) {
          classles += `${i2}:${styles[i2]};`;
        }
        return classles;
      },
      setStyleIcon(item) {
        let styles = {};
        let classles = "";
        if (this.selectedColor) {
          let selectedColor = this.selectedColor ? this.selectedColor : "#2979ff";
          styles["background-color"] = item.selected ? selectedColor : "#fff";
          styles["border-color"] = item.selected ? selectedColor : "#DCDFE6";
          if (!item.selected && item.disabled) {
            styles["background-color"] = "#F2F6FC";
            styles["border-color"] = item.selected ? selectedColor : "#DCDFE6";
          }
        }
        for (let i2 in styles) {
          classles += `${i2}:${styles[i2]};`;
        }
        return classles;
      },
      setStyleIconText(item) {
        let styles = {};
        let classles = "";
        if (this.selectedColor) {
          let selectedColor = this.selectedColor ? this.selectedColor : "#2979ff";
          if (this.mode === "tag") {
            styles.color = item.selected ? this.selectedTextColor ? this.selectedTextColor : "#fff" : "#666";
          } else {
            styles.color = item.selected ? this.selectedTextColor ? this.selectedTextColor : selectedColor : "#666";
          }
          if (!item.selected && item.disabled) {
            styles.color = "#999";
          }
        }
        for (let i2 in styles) {
          classles += `${i2}:${styles[i2]};`;
        }
        return classles;
      },
      setStyleRightIcon(item) {
        let styles = {};
        let classles = "";
        if (this.mode === "list") {
          styles["border-color"] = item.selected ? this.styles.selectedColor : "#DCDFE6";
        }
        for (let i2 in styles) {
          classles += `${i2}:${styles[i2]};`;
        }
        return classles;
      }
    }
  };
  function _sfc_render$27(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_load_more = resolveEasycom(vue.resolveDynamicComponent("uni-load-more"), __easycom_3$6);
    return vue.openBlock(), vue.createElementBlock(
      "view",
      {
        class: "uni-data-checklist",
        style: vue.normalizeStyle({ "margin-top": $data.isTop + "px" })
      },
      [
        !$data.isLocal ? (vue.openBlock(), vue.createElementBlock("view", {
          key: 0,
          class: "uni-data-loading"
        }, [
          !_ctx.mixinDatacomErrorMessage ? (vue.openBlock(), vue.createBlock(_component_uni_load_more, {
            key: 0,
            status: "loading",
            iconType: "snow",
            iconSize: 18,
            "content-text": $data.contentText
          }, null, 8, ["content-text"])) : (vue.openBlock(), vue.createElementBlock(
            "text",
            { key: 1 },
            vue.toDisplayString(_ctx.mixinDatacomErrorMessage),
            1
            /* TEXT */
          ))
        ])) : (vue.openBlock(), vue.createElementBlock(
          vue.Fragment,
          { key: 1 },
          [
            $props.multiple ? (vue.openBlock(), vue.createElementBlock(
              "checkbox-group",
              {
                key: 0,
                class: vue.normalizeClass(["checklist-group", { "is-list": $props.mode === "list" || $props.wrap }]),
                onChange: _cache[0] || (_cache[0] = (...args) => $options.change && $options.change(...args))
              },
              [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($data.dataList, (item, index) => {
                    return vue.openBlock(), vue.createElementBlock(
                      "label",
                      {
                        class: vue.normalizeClass(["checklist-box", ["is--" + $props.mode, item.selected ? "is-checked" : "", $props.disabled || !!item.disabled ? "is-disable" : "", index !== 0 && $props.mode === "list" ? "is-list-border" : ""]]),
                        style: vue.normalizeStyle(item.styleBackgroud),
                        key: index
                      },
                      [
                        vue.createElementVNode("checkbox", {
                          class: "hidden",
                          hidden: "",
                          disabled: $props.disabled || !!item.disabled,
                          value: item[$props.map.value] + "",
                          checked: item.selected
                        }, null, 8, ["disabled", "value", "checked"]),
                        $props.mode !== "tag" && $props.mode !== "list" || $props.mode === "list" && $props.icon === "left" ? (vue.openBlock(), vue.createElementBlock(
                          "view",
                          {
                            key: 0,
                            class: "checkbox__inner",
                            style: vue.normalizeStyle(item.styleIcon)
                          },
                          [
                            vue.createElementVNode("view", { class: "checkbox__inner-icon" })
                          ],
                          4
                          /* STYLE */
                        )) : vue.createCommentVNode("v-if", true),
                        vue.createElementVNode(
                          "view",
                          {
                            class: vue.normalizeClass(["checklist-content", { "list-content": $props.mode === "list" && $props.icon === "left" }])
                          },
                          [
                            vue.createElementVNode(
                              "text",
                              {
                                class: "checklist-text",
                                style: vue.normalizeStyle(item.styleIconText)
                              },
                              vue.toDisplayString(item[$props.map.text]),
                              5
                              /* TEXT, STYLE */
                            ),
                            $props.mode === "list" && $props.icon === "right" ? (vue.openBlock(), vue.createElementBlock(
                              "view",
                              {
                                key: 0,
                                class: "checkobx__list",
                                style: vue.normalizeStyle(item.styleBackgroud)
                              },
                              null,
                              4
                              /* STYLE */
                            )) : vue.createCommentVNode("v-if", true)
                          ],
                          2
                          /* CLASS */
                        )
                      ],
                      6
                      /* CLASS, STYLE */
                    );
                  }),
                  128
                  /* KEYED_FRAGMENT */
                ))
              ],
              34
              /* CLASS, NEED_HYDRATION */
            )) : (vue.openBlock(), vue.createElementBlock(
              "radio-group",
              {
                key: 1,
                class: vue.normalizeClass(["checklist-group", { "is-list": $props.mode === "list", "is-wrap": $props.wrap }]),
                onChange: _cache[1] || (_cache[1] = (...args) => $options.change && $options.change(...args))
              },
              [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($data.dataList, (item, index) => {
                    return vue.openBlock(), vue.createElementBlock(
                      "label",
                      {
                        class: vue.normalizeClass(["checklist-box", ["is--" + $props.mode, item.selected ? "is-checked" : "", $props.disabled || !!item.disabled ? "is-disable" : "", index !== 0 && $props.mode === "list" ? "is-list-border" : ""]]),
                        style: vue.normalizeStyle(item.styleBackgroud),
                        key: index
                      },
                      [
                        vue.createElementVNode("radio", {
                          class: "hidden",
                          hidden: "",
                          disabled: $props.disabled || item.disabled,
                          value: item[$props.map.value] + "",
                          checked: item.selected
                        }, null, 8, ["disabled", "value", "checked"]),
                        $props.mode !== "tag" && $props.mode !== "list" || $props.mode === "list" && $props.icon === "left" ? (vue.openBlock(), vue.createElementBlock(
                          "view",
                          {
                            key: 0,
                            class: "radio__inner",
                            style: vue.normalizeStyle(item.styleBackgroud)
                          },
                          [
                            vue.createElementVNode(
                              "view",
                              {
                                class: "radio__inner-icon",
                                style: vue.normalizeStyle(item.styleIcon)
                              },
                              null,
                              4
                              /* STYLE */
                            )
                          ],
                          4
                          /* STYLE */
                        )) : vue.createCommentVNode("v-if", true),
                        vue.createElementVNode(
                          "view",
                          {
                            class: vue.normalizeClass(["checklist-content", { "list-content": $props.mode === "list" && $props.icon === "left" }])
                          },
                          [
                            vue.createElementVNode(
                              "text",
                              {
                                class: "checklist-text",
                                style: vue.normalizeStyle(item.styleIconText)
                              },
                              vue.toDisplayString(item[$props.map.text]),
                              5
                              /* TEXT, STYLE */
                            ),
                            $props.mode === "list" && $props.icon === "right" ? (vue.openBlock(), vue.createElementBlock(
                              "view",
                              {
                                key: 0,
                                style: vue.normalizeStyle(item.styleRightIcon),
                                class: "checkobx__list"
                              },
                              null,
                              4
                              /* STYLE */
                            )) : vue.createCommentVNode("v-if", true)
                          ],
                          2
                          /* CLASS */
                        )
                      ],
                      6
                      /* CLASS, STYLE */
                    );
                  }),
                  128
                  /* KEYED_FRAGMENT */
                ))
              ],
              34
              /* CLASS, NEED_HYDRATION */
            ))
          ],
          64
          /* STABLE_FRAGMENT */
        ))
      ],
      4
      /* STYLE */
    );
  }
  const __easycom_0$5 = /* @__PURE__ */ _export_sfc(_sfc_main$28, [["render", _sfc_render$27], ["__scopeId", "data-v-2f788efd"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/uni_modules/uni-data-checkbox/components/uni-data-checkbox/uni-data-checkbox.vue"]]);
  const _imports_0$s = "/static/auth/current-address.png";
  const _sfc_main$27 = {
    __name: "SingleLinageSelector",
    props: {
      categories: { type: Array, default: () => [] },
      colorType: { type: Number, default: 1 }
    },
    emits: ["update:selected"],
    setup(__props, { expose: __expose, emit: __emit }) {
      vue.useCssVars((_ctx) => ({
        "034e6136-colorSelected": colorSelected.value
      }));
      const props = __props;
      const instance = vue.getCurrentInstance();
      const emit = __emit;
      const currentCategoryIndex = vue.ref(0);
      const rightScrollTop = vue.ref(0);
      const leftScrollTop = vue.ref(0);
      const localCategories = vue.ref([]);
      const selectedText = vue.ref("");
      const getCurrentCity = async () => {
        uni.getLocation({
          type: "gcj02",
          // 国测局坐标系，国内地图必用，无偏移
          altitude: false,
          // 定位成功回调
          success: async (res2) => {
            const { data } = await uni.request({
              url: "https://apis.map.qq.com/ws/geocoder/v1/",
              method: "GET",
              data: {
                location: `${res2.latitude},${res2.longitude}`,
                key: "OB4BZ-D4W3U-B7VVO-4PJWW-6TKDJ-WPB77",
                get_poi: 0
              }
            });
            if (data.status === 0) {
              const address = data.result.address_component;
              selectedText.value = address.city || address.province;
            } else {
              uni.showToast({ title: "城市解析失败", icon: "none", duration: 2e3 });
            }
          },
          // 定位失败/授权拒绝
          fail: (err) => {
            formatAppLog("log", "at components/SingleLinageSelector.vue:120", "定位失败：", err);
            const errMsg = err.errMsg || "";
            if (errMsg.includes("auth deny")) {
              uni.showModal({
                title: "权限提示",
                content: "你已拒绝定位权限，无法获取城市信息",
                confirmText: "去开启",
                cancelText: "取消",
                success: (modalRes) => {
                  if (modalRes.confirm)
                    uni.openSetting();
                }
              });
            } else {
              uni.showToast({ title: "定位失败，请检查网络和GPS", icon: "none", duration: 2e3 });
            }
          }
        });
      };
      const colorSelected = vue.ref("#35c996");
      vue.onMounted(() => {
        getCurrentCity();
        props.colorType == 1 ? colorSelected.value = "#35c996" : colorSelected.value = "#ffa767";
        localCategories.value = props.categories.map((cat) => ({
          ...cat,
          allSelected: false,
          children: (cat.children || []).map((c2) => ({ ...c2, selected: false }))
        }));
      });
      const handleProvinceClick = (index) => {
        currentCategoryIndex.value = index;
        rightScrollTop.value = 0;
        localCategories.value.forEach((cat) => {
          cat.allSelected = false;
          if (cat.children)
            cat.children.forEach((c2) => c2.selected = false);
        });
        localCategories.value[index].allSelected = true;
        emitSelectedChange();
      };
      const onRightScroll = (e2) => {
        rightScrollTop.value = e2.detail.scrollTop;
      };
      const onLeftScroll = (e2) => {
        leftScrollTop.value = e2.detail.scrollTop;
      };
      const selectChild = (catIdx, childIdx) => {
        localCategories.value.forEach((cat2) => {
          cat2.allSelected = false;
          if (cat2.children)
            cat2.children.forEach((c2) => c2.selected = false);
        });
        const cat = localCategories.value[catIdx];
        if (childIdx === -1)
          cat.allSelected = true;
        else
          cat.children[childIdx].selected = true;
        emitSelectedChange();
      };
      const emitSelectedChange = () => {
        const selected = [];
        localCategories.value.forEach((cat) => {
          if (cat.allSelected)
            selected.push({ catId: cat.id, childId: "all", name: cat.name });
          else if (cat.children) {
            cat.children.forEach((c2) => {
              if (c2.selected)
                selected.push({ catId: cat.id, childId: c2.id, name: c2.name });
            });
          }
        });
        selectedText.value = selected[0].name;
        emit("update:selected", selected);
      };
      const reset = () => {
        localCategories.value.forEach((e2) => {
          e2.allSelected = false;
          e2.children.forEach((d2) => {
            d2.selected = false;
          });
        });
        if (localCategories.value.length > 0) {
          handleProvinceClick(0);
        }
      };
      const getCurrentSelectedRegion = vue.computed(() => {
        var _a;
        const currentCat = localCategories.value[currentCategoryIndex.value];
        if (!currentCat)
          return "未选择";
        if (currentCat.allSelected)
          return currentCat.name;
        const selectedChild = (_a = currentCat.children) == null ? void 0 : _a.find((c2) => c2.selected);
        return selectedChild ? `${currentCat.name} / ${selectedChild.name}` : currentCat.name;
      });
      __expose({
        reset
      });
      const __returned__ = { props, instance, emit, currentCategoryIndex, rightScrollTop, leftScrollTop, localCategories, selectedText, getCurrentCity, colorSelected, handleProvinceClick, onRightScroll, onLeftScroll, selectChild, emitSelectedChange, reset, getCurrentSelectedRegion, ref: vue.ref, onMounted: vue.onMounted, getCurrentInstance: vue.getCurrentInstance, computed: vue.computed };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$26(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    return vue.openBlock(), vue.createElementBlock("view", { class: "container" }, [
      vue.createElementVNode("view", { class: "top-region-bar" }, [
        vue.createElementVNode("view", { class: "current-region" }, [
          vue.createElementVNode("text", { class: "region-label" }, "当前地区："),
          vue.createElementVNode(
            "text",
            { class: "region-value" },
            vue.toDisplayString($setup.selectedText),
            1
            /* TEXT */
          )
        ]),
        vue.createElementVNode("view", {
          class: "locate-btn",
          onClick: $setup.getCurrentCity
        }, [
          vue.createElementVNode("image", {
            src: _imports_0$s,
            class: "img",
            style: { "width": "30rpx", "height": "30rpx" }
          }),
          vue.createElementVNode("view", null, "自动定位")
        ])
      ]),
      vue.createElementVNode("view", { class: "select-title" }, "选择地区"),
      vue.createElementVNode("view", { class: "top-region-bar" }, [
        vue.createElementVNode(
          "text",
          { class: "region-label" },
          vue.toDisplayString($setup.getCurrentSelectedRegion),
          1
          /* TEXT */
        )
      ]),
      vue.createElementVNode("view", { class: "selector-wrap" }, [
        vue.createElementVNode("scroll-view", {
          class: "left-scroll",
          "scroll-y": "",
          "scroll-top": $setup.leftScrollTop,
          onScroll: $setup.onLeftScroll
        }, [
          (vue.openBlock(true), vue.createElementBlock(
            vue.Fragment,
            null,
            vue.renderList($setup.localCategories, (cat, idx) => {
              return vue.openBlock(), vue.createElementBlock("view", {
                key: cat.id,
                class: vue.normalizeClass(["province-item", { "province-item--active": $setup.currentCategoryIndex === idx }]),
                onClick: ($event) => $setup.handleProvinceClick(idx)
              }, [
                vue.createElementVNode(
                  "view",
                  null,
                  vue.toDisplayString(cat.name),
                  1
                  /* TEXT */
                ),
                vue.createVNode(_component_uni_icons, {
                  type: "right",
                  size: "16",
                  color: $setup.currentCategoryIndex === idx ? $setup.colorSelected : "#333",
                  class: "arrow-icon"
                }, null, 8, ["color"])
              ], 10, ["onClick"]);
            }),
            128
            /* KEYED_FRAGMENT */
          ))
        ], 40, ["scroll-top"]),
        vue.createElementVNode("view", { class: "split-line" }),
        vue.createElementVNode("scroll-view", {
          class: "right-scroll",
          "scroll-y": "",
          onScroll: $setup.onRightScroll,
          "scroll-top": $setup.rightScrollTop
        }, [
          $setup.localCategories[$setup.currentCategoryIndex] ? (vue.openBlock(), vue.createElementBlock("view", {
            key: 0,
            class: "city-block"
          }, [
            vue.createElementVNode(
              "view",
              {
                class: vue.normalizeClass(["city-item", { "city-item--selected-1": $setup.localCategories[$setup.currentCategoryIndex].allSelected }]),
                onClick: _cache[0] || (_cache[0] = vue.withModifiers(($event) => $setup.selectChild($setup.currentCategoryIndex, -1), ["stop"]))
              },
              " 全部 ",
              2
              /* CLASS */
            ),
            (vue.openBlock(true), vue.createElementBlock(
              vue.Fragment,
              null,
              vue.renderList($setup.localCategories[$setup.currentCategoryIndex].children, (child, cidx) => {
                return vue.openBlock(), vue.createElementBlock("view", {
                  key: child.id,
                  class: vue.normalizeClass(["city-item", { "city-item--selected": child.selected }]),
                  onClick: vue.withModifiers(($event) => $setup.selectChild($setup.currentCategoryIndex, cidx), ["stop"])
                }, vue.toDisplayString(child.name), 11, ["onClick"]);
              }),
              128
              /* KEYED_FRAGMENT */
            ))
          ])) : vue.createCommentVNode("v-if", true)
        ], 40, ["scroll-top"])
      ])
    ]);
  }
  const SingleLinageSelector = /* @__PURE__ */ _export_sfc(_sfc_main$27, [["render", _sfc_render$26], ["__scopeId", "data-v-034e6136"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/components/SingleLinageSelector.vue"]]);
  const _sfc_main$26 = {
    name: "u-icon",
    emits: ["click", "touchstart"],
    props: {
      // 图标类名
      name: {
        type: String,
        default: ""
      },
      // 图标颜色，可接受主题色
      color: {
        type: [String, null],
        default: ""
      },
      // 字体大小，单位rpx
      size: {
        type: [Number, String],
        default: "inherit"
      },
      // 是否显示粗体
      bold: {
        type: Boolean,
        default: false
      },
      // 点击图标的时候传递事件出去的index（用于区分点击了哪一个）
      index: {
        type: [Number, String],
        default: ""
      },
      // 触摸图标时的类名
      hoverClass: {
        type: String,
        default: ""
      },
      // 自定义扩展前缀，方便用户扩展自己的图标库
      customPrefix: {
        type: String,
        default: "uicon"
      },
      // 图标右边或者下面的文字
      label: {
        type: [String, Number],
        default: ""
      },
      // label的位置，只能右边或者下边
      labelPos: {
        type: String,
        default: "right"
      },
      // label的大小
      labelSize: {
        type: [String, Number],
        default: "28"
      },
      // label的颜色
      labelColor: {
        type: String,
        default: "#606266"
      },
      // label与图标的距离(横向排列)
      marginLeft: {
        type: [String, Number],
        default: "6"
      },
      // label与图标的距离(竖向排列)
      marginTop: {
        type: [String, Number],
        default: "6"
      },
      // label与图标的距离(竖向排列)
      marginRight: {
        type: [String, Number],
        default: "6"
      },
      // label与图标的距离(竖向排列)
      marginBottom: {
        type: [String, Number],
        default: "6"
      },
      // 图片的mode
      imgMode: {
        type: String,
        default: "widthFix"
      },
      // 自定义样式
      customStyle: {
        type: Object,
        default() {
          return {};
        }
      },
      // 用于显示图片小图标时，图片的宽度
      width: {
        type: [String, Number],
        default: ""
      },
      // 用于显示图片小图标时，图片的高度
      height: {
        type: [String, Number],
        default: ""
      },
      // 用于解决某些情况下，让图标垂直居中的用途
      top: {
        type: [String, Number],
        default: 0
      },
      // 是否为DecimalIcon
      showDecimalIcon: {
        type: Boolean,
        default: false
      },
      // 背景颜色，可接受主题色，仅Decimal时有效
      inactiveColor: {
        type: String,
        default: "#ececec"
      },
      // 显示的百分比，仅Decimal时有效
      percent: {
        type: [Number, String],
        default: "50"
      }
    },
    computed: {
      customClass() {
        let classes = [];
        let { customPrefix, name } = this;
        let index = name.indexOf("-icon-");
        if (index > -1) {
          customPrefix = name.substring(0, index + 5);
          classes.push(name);
        } else {
          classes.push(`${customPrefix}-${name}`);
        }
        if (customPrefix === "uicon") {
          classes.push("u-iconfont");
        } else {
          classes.push(customPrefix);
        }
        if (this.showDecimalIcon && this.inactiveColor && this.$u.config.type.includes(this.inactiveColor)) {
          classes.push("u-icon__icon--" + this.inactiveColor);
        } else if (this.color && this.$u.config.type.includes(this.color))
          classes.push("u-icon__icon--" + this.color);
        return classes;
      },
      iconStyle() {
        let style = {};
        style = {
          fontSize: this.size == "inherit" ? "inherit" : this.$u.addUnit(this.size),
          fontWeight: this.bold ? "bold" : "normal",
          // 某些特殊情况需要设置一个到顶部的距离，才能更好的垂直居中
          top: this.$u.addUnit(this.top)
        };
        if (this.showDecimalIcon && this.inactiveColor && !this.$u.config.type.includes(this.inactiveColor)) {
          style.color = this.inactiveColor;
        } else if (this.color && !this.$u.config.type.includes(this.color))
          style.color = this.color;
        return style;
      },
      // 判断传入的name属性，是否图片路径，只要带有"/"均认为是图片形式
      isImg() {
        return this.name.indexOf("/") !== -1;
      },
      imgStyle() {
        let style = {};
        style.width = this.width ? this.$u.addUnit(this.width) : this.$u.addUnit(this.size);
        style.height = this.height ? this.$u.addUnit(this.height) : this.$u.addUnit(this.size);
        return style;
      },
      decimalIconStyle() {
        let style = {};
        style = {
          fontSize: this.size == "inherit" ? "inherit" : this.$u.addUnit(this.size),
          fontWeight: this.bold ? "bold" : "normal",
          // 某些特殊情况需要设置一个到顶部的距离，才能更好的垂直居中
          top: this.$u.addUnit(this.top),
          width: this.percent + "%"
        };
        if (this.color && !this.$u.config.type.includes(this.color))
          style.color = this.color;
        return style;
      },
      decimalIconClass() {
        let classes = [];
        classes.push(this.customPrefix + "-" + this.name);
        if (this.customPrefix == "uicon") {
          classes.push("u-iconfont");
        } else {
          classes.push(this.customPrefix);
        }
        if (this.color && this.$u.config.type.includes(this.color))
          classes.push("u-icon__icon--" + this.color);
        else
          classes.push("u-icon__icon--primary");
        return classes;
      }
    },
    methods: {
      click() {
        this.$emit("click", this.index);
      },
      touchstart() {
        this.$emit("touchstart", this.index);
      }
    }
  };
  function _sfc_render$25(_ctx, _cache, $props, $setup, $data, $options) {
    return vue.openBlock(), vue.createElementBlock(
      "view",
      {
        style: vue.normalizeStyle([$props.customStyle]),
        class: vue.normalizeClass(["u-icon", ["u-icon--" + $props.labelPos]]),
        onClick: _cache[1] || (_cache[1] = (...args) => $options.click && $options.click(...args))
      },
      [
        $options.isImg ? (vue.openBlock(), vue.createElementBlock("image", {
          key: 0,
          class: "u-icon__img",
          src: $props.name,
          mode: $props.imgMode,
          style: vue.normalizeStyle([$options.imgStyle])
        }, null, 12, ["src", "mode"])) : (vue.openBlock(), vue.createElementBlock("view", {
          key: 1,
          class: vue.normalizeClass(["u-icon__icon", $options.customClass]),
          style: vue.normalizeStyle([$options.iconStyle]),
          "hover-class": $props.hoverClass,
          onTouchstart: _cache[0] || (_cache[0] = (...args) => $options.touchstart && $options.touchstart(...args))
        }, [
          $props.showDecimalIcon ? (vue.openBlock(), vue.createElementBlock("text", {
            key: 0,
            style: vue.normalizeStyle([$options.decimalIconStyle]),
            class: vue.normalizeClass([$options.decimalIconClass, "u-icon__decimal"]),
            "hover-class": $props.hoverClass
          }, null, 14, ["hover-class"])) : vue.createCommentVNode("v-if", true)
        ], 46, ["hover-class"])),
        $props.label !== "" && $props.label !== null ? (vue.openBlock(), vue.createElementBlock(
          "text",
          {
            key: 2,
            class: "u-icon__label",
            style: vue.normalizeStyle({
              color: $props.labelColor,
              fontSize: _ctx.$u.addUnit($props.labelSize),
              marginLeft: $props.labelPos == "right" ? _ctx.$u.addUnit($props.marginLeft) : 0,
              marginTop: $props.labelPos == "bottom" ? _ctx.$u.addUnit($props.marginTop) : 0,
              marginRight: $props.labelPos == "left" ? _ctx.$u.addUnit($props.marginRight) : 0,
              marginBottom: $props.labelPos == "top" ? _ctx.$u.addUnit($props.marginBottom) : 0
            })
          },
          vue.toDisplayString($props.label),
          5
          /* TEXT, STYLE */
        )) : vue.createCommentVNode("v-if", true)
      ],
      6
      /* CLASS, STYLE */
    );
  }
  const __easycom_2$b = /* @__PURE__ */ _export_sfc(_sfc_main$26, [["render", _sfc_render$25], ["__scopeId", "data-v-5de67484"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/uni_modules/vk-uview-ui/components/u-icon/u-icon.vue"]]);
  var freeGlobal = typeof global == "object" && global && global.Object === Object && global;
  var freeSelf = typeof self == "object" && self && self.Object === Object && self;
  var root = freeGlobal || freeSelf || Function("return this")();
  var Symbol$1 = root.Symbol;
  var objectProto$2 = Object.prototype;
  var hasOwnProperty$1 = objectProto$2.hasOwnProperty;
  var nativeObjectToString$1 = objectProto$2.toString;
  var symToStringTag$1 = Symbol$1 ? Symbol$1.toStringTag : void 0;
  function getRawTag(value) {
    var isOwn = hasOwnProperty$1.call(value, symToStringTag$1), tag = value[symToStringTag$1];
    try {
      value[symToStringTag$1] = void 0;
      var unmasked = true;
    } catch (e2) {
    }
    var result = nativeObjectToString$1.call(value);
    if (unmasked) {
      if (isOwn) {
        value[symToStringTag$1] = tag;
      } else {
        delete value[symToStringTag$1];
      }
    }
    return result;
  }
  var objectProto$1 = Object.prototype;
  var nativeObjectToString = objectProto$1.toString;
  function objectToString(value) {
    return nativeObjectToString.call(value);
  }
  var nullTag = "[object Null]", undefinedTag = "[object Undefined]";
  var symToStringTag = Symbol$1 ? Symbol$1.toStringTag : void 0;
  function baseGetTag(value) {
    if (value == null) {
      return value === void 0 ? undefinedTag : nullTag;
    }
    return symToStringTag && symToStringTag in Object(value) ? getRawTag(value) : objectToString(value);
  }
  function isObjectLike(value) {
    return value != null && typeof value == "object";
  }
  var symbolTag = "[object Symbol]";
  function isSymbol(value) {
    return typeof value == "symbol" || isObjectLike(value) && baseGetTag(value) == symbolTag;
  }
  var reWhitespace = /\s/;
  function trimmedEndIndex(string2) {
    var index = string2.length;
    while (index-- && reWhitespace.test(string2.charAt(index))) {
    }
    return index;
  }
  var reTrimStart = /^\s+/;
  function baseTrim(string2) {
    return string2 ? string2.slice(0, trimmedEndIndex(string2) + 1).replace(reTrimStart, "") : string2;
  }
  function isObject(value) {
    var type = typeof value;
    return value != null && (type == "object" || type == "function");
  }
  var NAN = 0 / 0;
  var reIsBadHex = /^[-+]0x[0-9a-f]+$/i;
  var reIsBinary = /^0b[01]+$/i;
  var reIsOctal = /^0o[0-7]+$/i;
  var freeParseInt = parseInt;
  function toNumber(value) {
    if (typeof value == "number") {
      return value;
    }
    if (isSymbol(value)) {
      return NAN;
    }
    if (isObject(value)) {
      var other = typeof value.valueOf == "function" ? value.valueOf() : value;
      value = isObject(other) ? other + "" : other;
    }
    if (typeof value != "string") {
      return value === 0 ? value : +value;
    }
    value = baseTrim(value);
    var isBinary = reIsBinary.test(value);
    return isBinary || reIsOctal.test(value) ? freeParseInt(value.slice(2), isBinary ? 2 : 8) : reIsBadHex.test(value) ? NAN : +value;
  }
  var INFINITY = 1 / 0, MAX_INTEGER = 17976931348623157e292;
  function toFinite(value) {
    if (!value) {
      return value === 0 ? value : 0;
    }
    value = toNumber(value);
    if (value === INFINITY || value === -INFINITY) {
      var sign = value < 0 ? -1 : 1;
      return sign * MAX_INTEGER;
    }
    return value === value ? value : 0;
  }
  function toInteger(value) {
    var result = toFinite(value), remainder = result % 1;
    return result === result ? remainder ? result - remainder : result : 0;
  }
  function identity(value) {
    return value;
  }
  var asyncTag = "[object AsyncFunction]", funcTag = "[object Function]", genTag = "[object GeneratorFunction]", proxyTag = "[object Proxy]";
  function isFunction(value) {
    if (!isObject(value)) {
      return false;
    }
    var tag = baseGetTag(value);
    return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;
  }
  var coreJsData = root["__core-js_shared__"];
  var maskSrcKey = function() {
    var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || "");
    return uid ? "Symbol(src)_1." + uid : "";
  }();
  function isMasked(func2) {
    return !!maskSrcKey && maskSrcKey in func2;
  }
  var funcProto$1 = Function.prototype;
  var funcToString$1 = funcProto$1.toString;
  function toSource(func2) {
    if (func2 != null) {
      try {
        return funcToString$1.call(func2);
      } catch (e2) {
      }
      try {
        return func2 + "";
      } catch (e2) {
      }
    }
    return "";
  }
  var reRegExpChar = /[\\^$.*+?()[\]{}|]/g;
  var reIsHostCtor = /^\[object .+?Constructor\]$/;
  var funcProto = Function.prototype, objectProto = Object.prototype;
  var funcToString = funcProto.toString;
  var hasOwnProperty = objectProto.hasOwnProperty;
  var reIsNative = RegExp(
    "^" + funcToString.call(hasOwnProperty).replace(reRegExpChar, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"
  );
  function baseIsNative(value) {
    if (!isObject(value) || isMasked(value)) {
      return false;
    }
    var pattern2 = isFunction(value) ? reIsNative : reIsHostCtor;
    return pattern2.test(toSource(value));
  }
  function getValue$1(object2, key) {
    return object2 == null ? void 0 : object2[key];
  }
  function getNative(object2, key) {
    var value = getValue$1(object2, key);
    return baseIsNative(value) ? value : void 0;
  }
  function apply$1(func2, thisArg, args) {
    switch (args.length) {
      case 0:
        return func2.call(thisArg);
      case 1:
        return func2.call(thisArg, args[0]);
      case 2:
        return func2.call(thisArg, args[0], args[1]);
      case 3:
        return func2.call(thisArg, args[0], args[1], args[2]);
    }
    return func2.apply(thisArg, args);
  }
  var HOT_COUNT = 800, HOT_SPAN = 16;
  var nativeNow = Date.now;
  function shortOut(func2) {
    var count = 0, lastCalled = 0;
    return function() {
      var stamp = nativeNow(), remaining = HOT_SPAN - (stamp - lastCalled);
      lastCalled = stamp;
      if (remaining > 0) {
        if (++count >= HOT_COUNT) {
          return arguments[0];
        }
      } else {
        count = 0;
      }
      return func2.apply(void 0, arguments);
    };
  }
  function constant(value) {
    return function() {
      return value;
    };
  }
  var defineProperty = function() {
    try {
      var func2 = getNative(Object, "defineProperty");
      func2({}, "", {});
      return func2;
    } catch (e2) {
    }
  }();
  var baseSetToString = !defineProperty ? identity : function(func2, string2) {
    return defineProperty(func2, "toString", {
      "configurable": true,
      "enumerable": false,
      "value": constant(string2),
      "writable": true
    });
  };
  const baseSetToString$1 = baseSetToString;
  var setToString = shortOut(baseSetToString$1);
  var nativeMax$1 = Math.max;
  function overRest(func2, start, transform) {
    start = nativeMax$1(start === void 0 ? func2.length - 1 : start, 0);
    return function() {
      var args = arguments, index = -1, length = nativeMax$1(args.length - start, 0), array2 = Array(length);
      while (++index < length) {
        array2[index] = args[start + index];
      }
      index = -1;
      var otherArgs = Array(start + 1);
      while (++index < start) {
        otherArgs[index] = args[index];
      }
      otherArgs[start] = transform(array2);
      return apply$1(func2, this, otherArgs);
    };
  }
  function baseRest(func2, start) {
    return setToString(overRest(func2, start, identity), func2 + "");
  }
  function arrayPush(array2, values) {
    var index = -1, length = values.length, offset = array2.length;
    while (++index < length) {
      array2[offset + index] = values[index];
    }
    return array2;
  }
  function baseSlice(array2, start, end) {
    var index = -1, length = array2.length;
    if (start < 0) {
      start = -start > length ? 0 : length + start;
    }
    end = end > length ? length : end;
    if (end < 0) {
      end += length;
    }
    length = start > end ? 0 : end - start >>> 0;
    start >>>= 0;
    var result = Array(length);
    while (++index < length) {
      result[index] = array2[index + start];
    }
    return result;
  }
  function castSlice(array2, start, end) {
    var length = array2.length;
    end = end === void 0 ? length : end;
    return !start && end >= length ? array2 : baseSlice(array2, start, end);
  }
  var FUNC_ERROR_TEXT = "Expected a function";
  var nativeMax = Math.max;
  function spread(func2, start) {
    if (typeof func2 != "function") {
      throw new TypeError(FUNC_ERROR_TEXT);
    }
    start = start == null ? 0 : nativeMax(toInteger(start), 0);
    return baseRest(function(args) {
      var array2 = args[start], otherArgs = castSlice(args, 0, start);
      if (array2) {
        arrayPush(otherArgs, array2);
      }
      return apply$1(func2, this, otherArgs);
    });
  }
  const _sfc_main$25 = {
    __name: "LinkageSelector",
    props: {
      categories: {
        type: Array,
        default: () => []
      },
      maxSelect: {
        type: Number,
        default: 5
      },
      colorType: {
        type: Number,
        default: 1
      }
    },
    emits: ["update:selected"],
    setup(__props, { expose: __expose, emit: __emit }) {
      __expose();
      vue.useCssVars((_ctx) => ({
        "bb75eca2-colorChange": colorChange.value
      }));
      const emit = __emit;
      const instance = vue.getCurrentInstance();
      const props = __props;
      const colorChange = vue.computed(() => {
        if (props.colorType == 1) {
          return "#35CA95";
        }
        return "#ffa767";
      });
      const activeIndex = vue.ref(0);
      const leftScrollId = vue.ref("");
      const rightScrollId = vue.ref("");
      const rightHeights = vue.ref([]);
      const currentCategoryIndex = vue.ref(0);
      const scrollIntoView = vue.ref("");
      const rightScrollTop = vue.ref(0);
      const localCategories = vue.ref([]);
      const updateActiveIndex = () => {
        for (let i2 = 0; i2 < rightHeights.value.length; i2++) {
          const { top, bottom } = rightHeights.value[i2];
          if (rightScrollTop.value >= top && rightScrollTop.value < bottom) {
            activeIndex.value = i2;
            return;
          }
        }
      };
      const scrollToRight = (index) => {
        activeIndex.value = index;
        rightScrollId.value = "right-" + props.categories[index].id;
        leftScrollId.value = "left-" + props.categories[index].id;
      };
      const toggleSelect = (catId, childId) => {
        const cat = props.categories.find((c2) => c2.id === catId);
        if (!cat)
          return;
        const item = cat.children.find((ch) => ch.id === childId);
        if (item)
          item.selected = !item.selected;
        vue.nextTick(() => {
        });
      };
      const ensureTagVisible = (catId, childId) => {
        const query = uni.createSelectorQuery().in(instance == null ? void 0 : instance.proxy);
        query.select(".right-content").boundingClientRect((rightRect) => {
          query.select(`#tag-${catId}-${childId}`).boundingClientRect((tagRect) => {
            if (!tagRect || !rightRect)
              return;
            if (tagRect.top < rightRect.top || tagRect.bottom > rightRect.bottom) {
              const scrollOffset = tagRect.top - rightRect.top - rightRect.height / 3;
              query.select(".right-content").scrollOffset((scroll) => {
                uni.pageScrollTo({
                  scrollTop: scroll.scrollTop + scrollOffset,
                  duration: 300
                });
              }).exec();
            }
          }).exec();
        }).exec();
      };
      const calcHeights = () => {
        const query = uni.createSelectorQuery().in(this);
        let total = 0;
        query.selectAll(".right-group").boundingClientRect((rects) => {
          rightHeights.value = rects.map((rect) => {
            const top = total;
            total += rect.height;
            return { top, bottom: total };
          });
        }).exec();
      };
      const scrollToCategory = (index) => {
        currentCategoryIndex.value = index;
        scrollIntoView.value = "cat-" + index;
      };
      const onRightScroll = (e2) => {
        uni.createSelectorQuery().selectAll(".category-block").boundingClientRect((res2) => {
          const visible = res2.findIndex((r2) => r2.top >= 0 && r2.top < 400);
          if (visible !== -1)
            currentCategoryIndex.value = visible;
        }).exec();
      };
      const toggleExpand = (index) => {
        localCategories.value[index].spread = !localCategories.value[index].spread;
      };
      const visibleChildren = (cat) => {
        const allTag = { id: "all", name: "全部", selected: cat.children.every((c2) => c2.selected) };
        const children = cat.spread ? [...cat.children] : cat.children.slice(0, 9);
        return [allTag, ...children];
      };
      const selectedCount = vue.computed(() => {
        let count = 0;
        localCategories.value.forEach((cat) => {
          if (cat.allSelected)
            count++;
          else if (cat.children) {
            cat.children.forEach((c2) => {
              if (c2.selected)
                count++;
            });
          }
        });
        return count;
      });
      const selectChild = (catIdx, childIdx) => {
        const cat = localCategories.value[catIdx];
        if (childIdx === -1) {
          if (selectedCount.value >= props.maxSelect && !cat.allSelected) {
            uni.showToast({ title: `最多选择 ${props.maxSelect} 个标签`, icon: "none" });
            return;
          }
          cat.allSelected = !cat.allSelected;
          cat.children.forEach((c2) => c2.selected = false);
        } else {
          if (selectedCount.value >= props.maxSelect && !cat.children[childIdx].selected) {
            uni.showToast({ title: `最多选择 ${props.maxSelect} 个标签`, icon: "none" });
            return;
          }
          cat.children[childIdx].selected = !cat.children[childIdx].selected;
          if (cat.children[childIdx].selected)
            cat.allSelected = false;
        }
        const selected = [];
        localCategories.value.forEach((cat2) => {
          if (cat2.allSelected)
            selected.push({ catId: cat2.id, childId: "all", name: cat2.name });
          else if (cat2.children) {
            cat2.children.forEach((c2) => {
              if (c2.selected)
                selected.push({ catId: cat2.id, childId: c2.id, name: c2.name });
            });
          }
        });
        emit("update:selected", selected);
      };
      vue.onMounted(() => {
        localCategories.value = props.categories.map((item) => ({
          ...item,
          spread: false,
          children: item.children.map((c2) => ({ ...c2, selected: false }))
        }));
        vue.nextTick(() => {
          setTimeout(calcHeights, 300);
        });
      });
      const __returned__ = { emit, instance, props, colorChange, activeIndex, leftScrollId, rightScrollId, rightHeights, currentCategoryIndex, scrollIntoView, rightScrollTop, localCategories, updateActiveIndex, scrollToRight, toggleSelect, ensureTagVisible, calcHeights, scrollToCategory, onRightScroll, toggleExpand, visibleChildren, selectedCount, selectChild, get spread() {
        return spread;
      }, ref: vue.ref, nextTick: vue.nextTick, onMounted: vue.onMounted, computed: vue.computed, getCurrentInstance: vue.getCurrentInstance };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$24(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_u_icon = resolveEasycom(vue.resolveDynamicComponent("u-icon"), __easycom_2$b);
    return vue.openBlock(), vue.createElementBlock("view", { class: "container" }, [
      vue.createElementVNode("scroll-view", {
        class: "left-menu",
        "scroll-y": ""
      }, [
        (vue.openBlock(true), vue.createElementBlock(
          vue.Fragment,
          null,
          vue.renderList($setup.localCategories, (cat, idx) => {
            return vue.openBlock(), vue.createElementBlock("view", {
              key: cat.id,
              class: vue.normalizeClass(["left-item", { active: $setup.currentCategoryIndex == idx }]),
              onClick: ($event) => $setup.scrollToCategory(idx)
            }, vue.toDisplayString(cat.name), 11, ["onClick"]);
          }),
          128
          /* KEYED_FRAGMENT */
        ))
      ]),
      vue.createElementVNode("scroll-view", {
        class: "right-content",
        "scroll-y": "",
        "scroll-into-view": $setup.scrollIntoView,
        onScroll: $setup.onRightScroll
      }, [
        (vue.openBlock(true), vue.createElementBlock(
          vue.Fragment,
          null,
          vue.renderList($setup.localCategories, (cat, idx) => {
            return vue.openBlock(), vue.createElementBlock("view", {
              key: cat.id,
              class: "category-block",
              id: "cat-" + idx
            }, [
              vue.createElementVNode("view", { class: "category-header" }, [
                vue.createElementVNode(
                  "view",
                  { class: "header-title" },
                  vue.toDisplayString(cat.name),
                  1
                  /* TEXT */
                ),
                cat.children.length > 9 ? (vue.openBlock(), vue.createElementBlock("view", {
                  key: 0,
                  class: vue.normalizeClass(["toggle-btn", $props.colorType == 2 ? "toggle-btn-color" : ""]),
                  onClick: vue.withModifiers(($event) => $setup.toggleExpand(idx), ["stop"])
                }, [
                  vue.createTextVNode(
                    vue.toDisplayString(cat.spread ? "收起" : "更多") + " ",
                    1
                    /* TEXT */
                  ),
                  vue.createVNode(_component_u_icon, {
                    name: cat.spread ? "arrow-up" : "arrow-down",
                    size: "14",
                    color: $props.colorType == 2 ? "#ffa967" : "#35C996"
                  }, null, 8, ["name", "color"])
                ], 10, ["onClick"])) : vue.createCommentVNode("v-if", true)
              ]),
              vue.createElementVNode("view", { class: "child-wrap" }, [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($setup.visibleChildren(cat), (child, cidx) => {
                    return vue.openBlock(), vue.createElementBlock("view", {
                      key: child.id,
                      class: vue.normalizeClass(["child-item", { selected: child.id === "all" ? cat.allSelected : child.selected }]),
                      onClick: vue.withModifiers(($event) => $setup.selectChild(idx, cidx - 1), ["stop"])
                    }, vue.toDisplayString(child.name), 11, ["onClick"]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                ))
              ])
            ], 8, ["id"]);
          }),
          128
          /* KEYED_FRAGMENT */
        ))
      ], 40, ["scroll-into-view"])
    ]);
  }
  const LinkageSelector = /* @__PURE__ */ _export_sfc(_sfc_main$25, [["render", _sfc_render$24], ["__scopeId", "data-v-bb75eca2"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/components/LinkageSelector.vue"]]);
  const _sfc_main$24 = {
    __name: "range-slider",
    props: {
      // 金额最小值
      min: {
        type: Number,
        default: 0
      },
      // 金额最大值
      max: {
        type: Number,
        default: 100
      },
      // 滑块轨道宽度
      width: {
        type: Number,
        default: 300
      },
      // 步长（每次变化的金额）
      step: {
        type: Number,
        default: 1
      },
      // 初始最小值
      initMin: {
        type: Number,
        default: 0
      },
      // 初始最大值
      initMax: {
        type: Number,
        default: 50
      },
      colorChange: {
        type: String,
        default: "#35CA95"
      }
    },
    emits: ["change", "update:minValue", "update:maxValue"],
    setup(__props, { expose: __expose, emit: __emit }) {
      __expose();
      const props = __props;
      const emit = __emit;
      const trackRef = vue.ref(null);
      const trackInfo = vue.ref({ width: 0, left: 0 });
      const leftPercent = vue.ref(0);
      const rightPercent = vue.ref(0);
      const minValue = vue.ref(props.initMin);
      const maxValue = vue.ref(props.initMax);
      const isDragging = vue.ref(false);
      const draggingType = vue.ref("");
      const activeWidth = vue.computed(() => {
        return rightPercent.value - leftPercent.value;
      });
      const initSlider = () => {
        leftPercent.value = (props.initMin - props.min) / (props.max - props.min) * 100;
        rightPercent.value = (props.initMax - props.min) / (props.max - props.min) * 100;
        minValue.value = props.initMin;
        maxValue.value = props.initMax;
      };
      const getTrackInfo = () => {
        return new Promise((resolve) => {
          const query = uni.createSelectorQuery().in(vue.getCurrentInstance());
          query.select(".slider-track").boundingClientRect((rect) => {
            trackInfo.value = {
              width: rect.width,
              left: rect.left
            };
            resolve(trackInfo.value);
          }).exec();
        });
      };
      vue.onMounted(async () => {
        await getTrackInfo();
        initSlider();
      });
      vue.watch([() => props.min, () => props.max, () => props.initMin, () => props.initMax], () => {
        initSlider();
      });
      const handleTouchStart = (e2, type) => {
        isDragging.value = true;
        draggingType.value = type;
        e2.preventDefault();
      };
      const handleMouseDown = (e2, type) => {
        isDragging.value = true;
        draggingType.value = type;
        e2.preventDefault();
      };
      const handleTouchMove = (e2, type) => {
        if (!isDragging.value || !trackInfo.value.width)
          return;
        const touchX = e2.touches[0].clientX;
        calculatePosition(touchX, draggingType.value);
      };
      const handleMouseMove = (e2, type) => {
        if (!isDragging.value || !trackInfo.value.width)
          return;
        const mouseX = e2.clientX;
        calculatePosition(mouseX, draggingType.value);
      };
      const calculatePosition = (clientX, type) => {
        let currentX = clientX - trackInfo.value.left;
        currentX = Math.max(0, Math.min(currentX, trackInfo.value.width));
        const percent = currentX / trackInfo.value.width * 100;
        const value = Math.round(((props.max - props.min) * percent / 100 + props.min) / props.step) * props.step;
        if (type === "left") {
          if (value >= maxValue.value)
            return;
          minValue.value = value;
          leftPercent.value = percent;
        } else {
          if (value <= minValue.value)
            return;
          maxValue.value = value;
          rightPercent.value = percent;
        }
        emit("change", { min: minValue.value, max: maxValue.value });
        emit("update:minValue", minValue.value);
        emit("update:maxValue", maxValue.value);
      };
      const handleTouchEnd = () => {
        isDragging.value = false;
        draggingType.value = "";
      };
      const handleMouseUp = () => {
        isDragging.value = false;
        draggingType.value = "";
      };
      const __returned__ = { props, emit, trackRef, trackInfo, leftPercent, rightPercent, minValue, maxValue, isDragging, draggingType, activeWidth, initSlider, getTrackInfo, handleTouchStart, handleMouseDown, handleTouchMove, handleMouseMove, calculatePosition, handleTouchEnd, handleMouseUp, ref: vue.ref, watch: vue.watch, computed: vue.computed, onMounted: vue.onMounted, getCurrentInstance: vue.getCurrentInstance };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$23(_ctx, _cache, $props, $setup, $data, $options) {
    return vue.openBlock(), vue.createElementBlock(
      "view",
      {
        class: "range-slider-container",
        style: vue.normalizeStyle({ width: $props.width + "px" })
      },
      [
        vue.createElementVNode(
          "view",
          {
            class: "slider-track",
            ref: "trackRef"
          },
          [
            vue.createElementVNode(
              "view",
              {
                class: "slider-track-active",
                style: vue.normalizeStyle({ left: $setup.leftPercent + "%", width: $setup.activeWidth + "%", backgroundColor: $props.colorChange })
              },
              null,
              4
              /* STYLE */
            )
          ],
          512
          /* NEED_PATCH */
        ),
        vue.createElementVNode(
          "view",
          {
            class: vue.normalizeClass(["slider-handle left-handle", $props.colorChange == "#35CA95" ? "slider-img2" : "slider-img"]),
            style: vue.normalizeStyle({ left: $setup.leftPercent + "%" }),
            onTouchstart: _cache[0] || (_cache[0] = (e2) => $setup.handleTouchStart(e2, "left")),
            onTouchmove: _cache[1] || (_cache[1] = (e2) => $setup.handleTouchMove(e2, "left")),
            onTouchend: $setup.handleTouchEnd,
            onMousedown: _cache[2] || (_cache[2] = (e2) => $setup.handleMouseDown(e2, "left")),
            onMousemove: _cache[3] || (_cache[3] = (e2) => $setup.handleMouseMove(e2, "left")),
            onMouseup: $setup.handleMouseUp,
            onMouseleave: $setup.handleMouseUp
          },
          null,
          38
          /* CLASS, STYLE, NEED_HYDRATION */
        ),
        vue.createElementVNode(
          "view",
          {
            class: "slider-value-text left-value",
            style: vue.normalizeStyle({ left: $setup.leftPercent + "%" })
          },
          vue.toDisplayString($setup.minValue),
          5
          /* TEXT, STYLE */
        ),
        vue.createElementVNode(
          "view",
          {
            class: vue.normalizeClass(["slider-handle right-handle", $props.colorChange == "#35CA95" ? "slider-img2" : "slider-img"]),
            style: vue.normalizeStyle({ left: $setup.rightPercent + "%" }),
            onTouchstart: _cache[4] || (_cache[4] = (e2) => $setup.handleTouchStart(e2, "right")),
            onTouchmove: _cache[5] || (_cache[5] = (e2) => $setup.handleTouchMove(e2, "right")),
            onTouchend: $setup.handleTouchEnd,
            onMousedown: _cache[6] || (_cache[6] = (e2) => $setup.handleMouseDown(e2, "right")),
            onMousemove: _cache[7] || (_cache[7] = (e2) => $setup.handleMouseMove(e2, "right")),
            onMouseup: $setup.handleMouseUp,
            onMouseleave: $setup.handleMouseUp
          },
          null,
          38
          /* CLASS, STYLE, NEED_HYDRATION */
        ),
        vue.createElementVNode(
          "view",
          {
            class: "slider-value-text right-value",
            style: vue.normalizeStyle({ left: $setup.rightPercent + "%" })
          },
          vue.toDisplayString($setup.maxValue),
          5
          /* TEXT, STYLE */
        )
      ],
      4
      /* STYLE */
    );
  }
  const RangeSlider = /* @__PURE__ */ _export_sfc(_sfc_main$24, [["render", _sfc_render$23], ["__scopeId", "data-v-e4116359"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/components/range-slider.vue"]]);
  const _sfc_main$23 = {
    __name: "List-Filtering",
    props: {
      colorType: {
        type: Number,
        default: 1
      },
      layoutType: {
        type: Number,
        default: 1
        // 1排序 2筛选
      },
      serviceTypes: {
        type: Array,
        default: () => []
      },
      confusionList: {
        type: Array,
        default: () => []
      }
    },
    setup(__props, { expose: __expose }) {
      const props = __props;
      const colorChange = vue.computed(() => {
        if (props.colorType == 1) {
          return "#35CA95";
        }
        return "#ffa767";
      });
      const colorCheckbox = vue.computed(() => {
        if (props.colorType == 1) {
          return "#ebf9f5";
        }
        return "#f9f4ea";
      });
      const colorCheckboxText = vue.computed(() => {
        if (props.colorType == 1) {
          return "#35CA95";
        }
        return "#ffa767";
      });
      const sortType = vue.ref(1);
      const sortLsit = vue.ref([
        { value: 1, text: "综合排序" },
        { value: 2, text: "价格高优先" },
        { value: 3, text: "价格低优先" },
        { value: 4, text: "好评率高" },
        { value: 5, text: "经验最多" },
        { value: 6, text: "从业年限" }
      ]);
      const screeningArry = vue.ref([
        {
          id: 1,
          title: "咨询师性别",
          arrSelect: [
            { value: "", text: "不限" },
            { value: "男", text: "男性咨询师" },
            { value: "女", text: "女性咨询师" }
          ]
        },
        {
          id: 2,
          title: "年龄筛选",
          arrSelect: [
            { value: "", text: "不限" },
            { value: "60后", text: "60后" },
            { value: "70后", text: "70后" },
            { value: "80后", text: "80后" },
            { value: "90后", text: "90后" },
            { value: "00后", text: "00后" }
          ]
        },
        {
          id: 3,
          title: "星座筛选",
          arrSelect: [
            { value: "", text: "不限" },
            { value: "白羊座", text: "白羊座" },
            { value: "金牛座", text: "金牛座" },
            { value: "双子座", text: "双子座" },
            { value: "巨蟹座", text: "巨蟹座" },
            { value: "狮子座", text: "狮子座" },
            { value: "处女座", text: "处女座" },
            { value: "天秤座", text: "天秤座" },
            { value: "天蝎座", text: "天蝎座" },
            { value: "射手座", text: "射手座" },
            { value: "摩羯座", text: "摩羯座" },
            { value: "水瓶座", text: "水瓶座" },
            { value: "双鱼座", text: "双鱼座" }
          ]
        },
        {
          id: 4,
          title: "学历筛选",
          arrSelect: [
            { value: 0, text: "不限" },
            { value: 2, text: "本科" },
            { value: 3, text: "研究生" },
            { value: 4, text: "博士" }
          ]
        },
        {
          id: 5,
          title: "资质筛选",
          arrSelect: [
            { value: 0, text: "不限" },
            { value: 2, text: "资质" },
            { value: 3, text: "资质" },
            { value: 4, text: "资质" }
          ]
        }
      ]);
      const distressId = vue.ref([]);
      const changeServiceType = (e2) => {
        distressId.value = e2.map((item) => item.childId).join(",");
      };
      const city = vue.ref(null);
      const changeCity = (e2) => {
        city.value = e2[0].name;
      };
      const currentRange = vue.ref({ minPrice: 10, maxPrice: 60 });
      const onRangeChange = (range2) => {
        const { min, max } = range2;
        currentRange.value = { minPrice: min, maxPrice: max };
      };
      const idToKeyMap = {
        1: "sex",
        // itemId=1 → sex属性
        2: "maxAge",
        // itemId=2 → maxAge属性
        3: "constellation"
        // itemId=3 → constellation属性
      };
      const resultObj = {};
      const change = (itemId, e2) => {
        const key = idToKeyMap[itemId];
        if (!key) {
          formatAppLog("warn", "at components/List-Filtering.vue:203", `未找到itemId=${itemId}对应的属性名`);
          return;
        }
        const value = e2.detail.value;
        resultObj[key] = value;
      };
      __expose({
        distressId,
        city,
        currentRange,
        sortType,
        resultObj
      });
      const __returned__ = { props, colorChange, colorCheckbox, colorCheckboxText, sortType, sortLsit, screeningArry, distressId, changeServiceType, city, changeCity, currentRange, onRangeChange, idToKeyMap, resultObj, change, ref: vue.ref, computed: vue.computed, SingleLinageSelector, LinkageSelector, RangeSlider };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$22(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_data_checkbox = resolveEasycom(vue.resolveDynamicComponent("uni-data-checkbox"), __easycom_0$5);
    return vue.openBlock(), vue.createElementBlock(
      "div",
      {
        class: vue.normalizeClass(["layout-container", `layout-type-${$props.layoutType}`])
      },
      [
        $props.layoutType == 1 ? (vue.openBlock(), vue.createElementBlock("div", { key: 0 }, [
          vue.createVNode($setup["LinkageSelector"], {
            "onUpdate:selected": $setup.changeServiceType,
            colorType: $props.colorType,
            categories: $props.serviceTypes
          }, null, 8, ["colorType", "categories"])
        ])) : vue.createCommentVNode("v-if", true),
        $props.layoutType == 2 ? (vue.openBlock(), vue.createElementBlock("div", { key: 1 }, [
          vue.createVNode($setup["SingleLinageSelector"], {
            "onUpdate:selected": $setup.changeCity,
            categories: $props.confusionList,
            colorType: $props.colorType
          }, null, 8, ["categories", "colorType"])
        ])) : vue.createCommentVNode("v-if", true),
        $props.layoutType == 3 ? (vue.openBlock(), vue.createElementBlock("div", { key: 2 }, [
          vue.createVNode($setup["RangeSlider"], {
            minPrice: 0,
            maxPrice: 100,
            width: 300,
            step: 1,
            initMin: 10,
            initMax: 60,
            colorChange: $setup.colorChange,
            onChange: $setup.onRangeChange
          }, null, 8, ["colorChange"]),
          vue.createElementVNode("div", { class: "slider-value" }, [
            vue.createElementVNode(
              "div",
              { class: "text-value" },
              vue.toDisplayString($setup.currentRange.minPrice),
              1
              /* TEXT */
            ),
            vue.createElementVNode("div", { class: "slider-value-line" }, "至"),
            vue.createElementVNode(
              "div",
              { class: "text-value" },
              vue.toDisplayString($setup.currentRange.maxPrice),
              1
              /* TEXT */
            )
          ])
        ])) : vue.createCommentVNode("v-if", true),
        $props.layoutType == 4 ? (vue.openBlock(), vue.createElementBlock("div", { key: 3 }, [
          vue.createVNode(_component_uni_data_checkbox, {
            selectedColor: $setup.colorChange,
            modelValue: $setup.sortType,
            "onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => $setup.sortType = $event),
            localdata: $setup.sortLsit
          }, null, 8, ["selectedColor", "modelValue", "localdata"])
        ])) : vue.createCommentVNode("v-if", true),
        $props.layoutType == 5 ? (vue.openBlock(), vue.createElementBlock("div", { key: 4 }, [
          (vue.openBlock(true), vue.createElementBlock(
            vue.Fragment,
            null,
            vue.renderList($setup.screeningArry, (item, index) => {
              return vue.openBlock(), vue.createElementBlock("div", { key: index }, [
                vue.createElementVNode(
                  "div",
                  null,
                  vue.toDisplayString(item.title),
                  1
                  /* TEXT */
                ),
                vue.createVNode(_component_uni_data_checkbox, {
                  mode: "tag",
                  modelValue: item.selected,
                  "onUpdate:modelValue": ($event) => item.selected = $event,
                  localdata: item.arrSelect,
                  selectedColor: $setup.colorCheckbox,
                  selectedTextColor: $setup.colorCheckboxText,
                  onChange: (e2) => $setup.change(item.id, e2)
                }, null, 8, ["modelValue", "onUpdate:modelValue", "localdata", "selectedColor", "selectedTextColor", "onChange"])
              ]);
            }),
            128
            /* KEYED_FRAGMENT */
          ))
        ])) : vue.createCommentVNode("v-if", true)
      ],
      2
      /* CLASS */
    );
  }
  const ListFiltering = /* @__PURE__ */ _export_sfc(_sfc_main$23, [["render", _sfc_render$22], ["__scopeId", "data-v-d5740161"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/components/List-Filtering.vue"]]);
  const getListenerList = (params, config2 = {}) => http$1.post("/api/listener/getListenerList", params, config2);
  const getListenerById = (params, config2 = {}) => http$1.post("/api/listener/getListenerByUserId", params, config2);
  const registerListenerStep1 = (params, config2 = {}) => http$1.post("/api/listener/step1", params, config2);
  const registerListenerStep2 = (params, config2 = {}) => http$1.post("/api/listener/step2", params, config2);
  const registerListenerStep3 = (params, config2 = {}) => http$1.post("/api/listener/step3", params, config2);
  const getListenerByUserId = (params, config2 = {}) => http$1.post("/api/listener/getListenerByUserId", params, config2);
  const getOccupation = (params, config2 = {}) => http$1.get("/api/admin/occupation/list", params, config2);
  const getQualification = (params, config2 = {}) => http$1.get("/api/admin/qualification/list", params, config2);
  const getCommentInfo = (params, config2 = {}) => http$1.get(`/api/listener/commentInfo?id=${params.id}`, params, config2);
  const getCommentList = (params, config2 = {}) => http$1.get("/api/listener/commentList", params, config2);
  const getServiceExperience = (params, config2 = {}) => http$1.get(`/api/listener/serviceExperience?id=${params.id}`, params, config2);
  const formatDate$1 = (timestamp) => {
    const targetDate = new Date(timestamp * 1e3);
    const now2 = /* @__PURE__ */ new Date();
    const padZero = (num) => num.toString().padStart(2, "0");
    const targetYear = targetDate.getFullYear();
    const targetMonth = targetDate.getMonth() + 1;
    const targetDay = targetDate.getDate();
    const targetHours = targetDate.getHours();
    const targetMinutes = targetDate.getMinutes();
    const nowYear = now2.getFullYear();
    const nowMonth = now2.getMonth() + 1;
    const nowDay = now2.getDate();
    const targetDateStr = `${targetYear}-${padZero(targetMonth)}-${padZero(targetDay)}`;
    const nowDateStr = `${nowYear}-${padZero(nowMonth)}-${padZero(nowDay)}`;
    const yesterday = new Date(now2);
    yesterday.setDate(nowDay - 1);
    const yesterdayYear = yesterday.getFullYear();
    const yesterdayMonth = yesterday.getMonth() + 1;
    const yesterdayDay = yesterday.getDate();
    const yesterdayDateStr = `${yesterdayYear}-${padZero(yesterdayMonth)}-${padZero(yesterdayDay)}`;
    if (targetDateStr === nowDateStr) {
      return `${padZero(targetHours)}:${padZero(targetMinutes)}`;
    } else if (targetDateStr === yesterdayDateStr) {
      return "昨天";
    } else {
      return `${padZero(targetMonth)}/${padZero(targetDay)}`;
    }
  };
  const formatTimeToYearMonth = (timeStr) => {
    if (!timeStr || typeof timeStr !== "string") {
      return "未知时间";
    }
    const datePart = timeStr.split(" ")[0];
    const [year, month] = datePart.split("-");
    if (!year || !month) {
      return "格式错误";
    }
    return `${year}.${month}`;
  };
  const handleCareerList = (careerList = []) => {
    return careerList.map((item) => {
      const formattedStartTime = formatTimeToYearMonth(item.startTime);
      const formattedEndTime = formatTimeToYearMonth(item.endTime);
      return {
        title: `${formattedStartTime} - ${formattedEndTime}`,
        desc: item.career || "无职业信息"
      };
    });
  };
  const getGenerationByBirthdate = (birthdate) => {
    if (!birthdate || typeof birthdate !== "string") {
      return "出生年月格式错误";
    }
    const [yearStr, monthStr] = birthdate.split("-");
    if (!yearStr || !monthStr || yearStr.length !== 4 || monthStr.length !== 2) {
      return "出生年月格式错误（需为YYYY-MM）";
    }
    const birthYear = Number(yearStr);
    if (isNaN(birthYear)) {
      return "出生年份不是有效数字";
    }
    if (birthYear >= 1980 && birthYear <= 1989) {
      return "80后";
    } else if (birthYear >= 1990 && birthYear <= 1999) {
      return "90后";
    } else if (birthYear >= 2e3 && birthYear <= 2009) {
      return "00后";
    } else if (birthYear >= 2010 && birthYear <= 2019) {
      return "10后";
    } else if (birthYear >= 2020 && birthYear <= 2029) {
      return "20后";
    } else if (birthYear >= 1970 && birthYear <= 1979) {
      return "70后";
    } else {
      return `${Math.floor(birthYear / 10) * 10}后`;
    }
  };
  const timeStrToSecondTimestamp = (timeStr) => {
    if (typeof timeStr !== "string" || timeStr.trim() === "") {
      formatAppLog("error", "at lib/utils.js:148", "输入的时间必须是非空字符串");
      return null;
    }
    const isoTimeStr = timeStr.replace(" ", "T");
    const date2 = new Date(isoTimeStr);
    const timestampMs = date2.getTime();
    if (isNaN(timestampMs)) {
      formatAppLog("error", "at lib/utils.js:156", "输入的时间格式无效，请检查时间字符串");
      return null;
    }
    const timestampSecond = Math.floor(timestampMs / 1e3);
    return timestampSecond;
  };
  const formatTime = (timestamp) => {
    const date2 = new Date(timestamp * 1e3);
    const Y2 = date2.getFullYear();
    const M2 = (date2.getMonth() + 1 + "").padStart(2, "0");
    const D2 = (date2.getDate() + "").padStart(2, "0");
    const h2 = (date2.getHours() + "").padStart(2, "0");
    const m2 = (date2.getMinutes() + "").padStart(2, "0");
    const s2 = (date2.getSeconds() + "").padStart(2, "0");
    return `${Y2}-${M2}-${D2} ${h2}:${m2}:${s2}`;
  };
  const formatAddress = (addr) => {
    if (!addr || typeof addr !== "string")
      return "";
    const address = addr.trim();
    const municipalities = ["上海市", "北京市", "天津市", "重庆市"];
    for (const city of municipalities) {
      if (address.startsWith(city)) {
        const replaceAddr = address.replace(city + city, city);
        const cityReg = new RegExp(`(${city})(.*?(区|县|旗))`);
        if (cityReg.test(replaceAddr)) {
          const [, mCity, mArea] = replaceAddr.match(cityReg);
          return `${mCity} • ${mArea}`;
        }
        return city;
      }
    }
    const provinceCityReg = /(.*?(省|自治区))(.*?市)/;
    if (provinceCityReg.test(address)) {
      const [, province, , city] = address.match(provinceCityReg);
      return `${province} • ${city}`;
    }
    const cityAreaReg = /(.*?市)(.*?(区|县|旗|镇))/;
    if (cityAreaReg.test(address)) {
      const [, city, area] = address.match(cityAreaReg);
      return `${city} • ${area}`;
    }
    return address;
  };
  const getCityFromAddress = (address) => {
    const reg = /[^\s省市区县盟旗街道镇乡]{2,8}市/g;
    const matchArr = address.match(reg);
    return matchArr ? matchArr[0] : "";
  };
  const bannerList = (params, config2 = {}) => http$1.get("/api/banner/list", params, config2);
  const getConsultantMenus = (params, config2 = {}) => http$1.get("/api/appMenu/menus", params, config2);
  const listHomeExams = (params, config2 = {}) => http$1.get("/api/psychology/exam/listHome", params, config2);
  const serviceTypes = (params, config2 = {}) => http$1.get("/api/appMenu/allServices");
  const serviceList = (params, config2 = {}) => http$1.get("/api/admin/consultant/services");
  class MPAnimation {
    constructor(options, _this) {
      this.options = options;
      this.animation = uni.createAnimation({
        ...options
      });
      this.currentStepAnimates = {};
      this.next = 0;
      this.$ = _this;
    }
    _nvuePushAnimates(type, args) {
      let aniObj = this.currentStepAnimates[this.next];
      let styles = {};
      if (!aniObj) {
        styles = {
          styles: {},
          config: {}
        };
      } else {
        styles = aniObj;
      }
      if (animateTypes1.includes(type)) {
        if (!styles.styles.transform) {
          styles.styles.transform = "";
        }
        let unit = "";
        if (type === "rotate") {
          unit = "deg";
        }
        styles.styles.transform += `${type}(${args + unit}) `;
      } else {
        styles.styles[type] = `${args}`;
      }
      this.currentStepAnimates[this.next] = styles;
    }
    _animateRun(styles = {}, config2 = {}) {
      let ref = this.$.$refs["ani"].ref;
      if (!ref)
        return;
      return new Promise((resolve, reject) => {
        nvueAnimation.transition(ref, {
          styles,
          ...config2
        }, (res2) => {
          resolve();
        });
      });
    }
    _nvueNextAnimate(animates, step = 0, fn) {
      let obj = animates[step];
      if (obj) {
        let {
          styles,
          config: config2
        } = obj;
        this._animateRun(styles, config2).then(() => {
          step += 1;
          this._nvueNextAnimate(animates, step, fn);
        });
      } else {
        this.currentStepAnimates = {};
        typeof fn === "function" && fn();
        this.isEnd = true;
      }
    }
    step(config2 = {}) {
      this.animation.step(config2);
      return this;
    }
    run(fn) {
      this.$.animationData = this.animation.export();
      this.$.timer = setTimeout(() => {
        typeof fn === "function" && fn();
      }, this.$.durationTime);
    }
  }
  const animateTypes1 = [
    "matrix",
    "matrix3d",
    "rotate",
    "rotate3d",
    "rotateX",
    "rotateY",
    "rotateZ",
    "scale",
    "scale3d",
    "scaleX",
    "scaleY",
    "scaleZ",
    "skew",
    "skewX",
    "skewY",
    "translate",
    "translate3d",
    "translateX",
    "translateY",
    "translateZ"
  ];
  const animateTypes2 = ["opacity", "backgroundColor"];
  const animateTypes3 = ["width", "height", "left", "right", "top", "bottom"];
  animateTypes1.concat(animateTypes2, animateTypes3).forEach((type) => {
    MPAnimation.prototype[type] = function(...args) {
      this.animation[type](...args);
      return this;
    };
  });
  function createAnimation(option, _this) {
    if (!_this)
      return;
    clearTimeout(_this.timer);
    return new MPAnimation(option, _this);
  }
  const _sfc_main$22 = {
    name: "uniTransition",
    emits: ["click", "change"],
    props: {
      show: {
        type: Boolean,
        default: false
      },
      modeClass: {
        type: [Array, String],
        default() {
          return "fade";
        }
      },
      duration: {
        type: Number,
        default: 300
      },
      styles: {
        type: Object,
        default() {
          return {};
        }
      },
      customClass: {
        type: String,
        default: ""
      },
      onceRender: {
        type: Boolean,
        default: false
      }
    },
    data() {
      return {
        isShow: false,
        transform: "",
        opacity: 1,
        animationData: {},
        durationTime: 300,
        config: {}
      };
    },
    watch: {
      show: {
        handler(newVal) {
          if (newVal) {
            this.open();
          } else {
            if (this.isShow) {
              this.close();
            }
          }
        },
        immediate: true
      }
    },
    computed: {
      // 生成样式数据
      stylesObject() {
        let styles = {
          ...this.styles,
          "transition-duration": this.duration / 1e3 + "s"
        };
        let transform = "";
        for (let i2 in styles) {
          let line = this.toLine(i2);
          transform += line + ":" + styles[i2] + ";";
        }
        return transform;
      },
      // 初始化动画条件
      transformStyles() {
        return "transform:" + this.transform + ";opacity:" + this.opacity + ";" + this.stylesObject;
      }
    },
    created() {
      this.config = {
        duration: this.duration,
        timingFunction: "ease",
        transformOrigin: "50% 50%",
        delay: 0
      };
      this.durationTime = this.duration;
    },
    methods: {
      /**
       *  ref 触发 初始化动画
       */
      init(obj = {}) {
        if (obj.duration) {
          this.durationTime = obj.duration;
        }
        this.animation = createAnimation(Object.assign(this.config, obj), this);
      },
      /**
       * 点击组件触发回调
       */
      onClick() {
        this.$emit("click", {
          detail: this.isShow
        });
      },
      /**
       * ref 触发 动画分组
       * @param {Object} obj
       */
      step(obj, config2 = {}) {
        if (!this.animation)
          return;
        for (let i2 in obj) {
          try {
            if (typeof obj[i2] === "object") {
              this.animation[i2](...obj[i2]);
            } else {
              this.animation[i2](obj[i2]);
            }
          } catch (e2) {
            formatAppLog("error", "at uni_modules/uni-transition/components/uni-transition/uni-transition.vue:148", `方法 ${i2} 不存在`);
          }
        }
        this.animation.step(config2);
        return this;
      },
      /**
       *  ref 触发 执行动画
       */
      run(fn) {
        if (!this.animation)
          return;
        this.animation.run(fn);
      },
      // 开始过度动画
      open() {
        clearTimeout(this.timer);
        this.transform = "";
        this.isShow = true;
        let { opacity, transform } = this.styleInit(false);
        if (typeof opacity !== "undefined") {
          this.opacity = opacity;
        }
        this.transform = transform;
        this.$nextTick(() => {
          this.timer = setTimeout(() => {
            this.animation = createAnimation(this.config, this);
            this.tranfromInit(false).step();
            this.animation.run(() => {
              this.transform = "";
              this.opacity = opacity || 1;
            });
            this.$emit("change", {
              detail: this.isShow
            });
          }, 20);
        });
      },
      // 关闭过度动画
      close(type) {
        if (!this.animation)
          return;
        this.tranfromInit(true).step().run(() => {
          this.isShow = false;
          this.animationData = null;
          this.animation = null;
          let { opacity, transform } = this.styleInit(false);
          this.opacity = opacity || 1;
          this.transform = transform;
          this.$emit("change", {
            detail: this.isShow
          });
        });
      },
      // 处理动画开始前的默认样式
      styleInit(type) {
        let styles = {
          transform: ""
        };
        let buildStyle = (type2, mode) => {
          if (mode === "fade") {
            styles.opacity = this.animationType(type2)[mode];
          } else {
            styles.transform += this.animationType(type2)[mode] + " ";
          }
        };
        if (typeof this.modeClass === "string") {
          buildStyle(type, this.modeClass);
        } else {
          this.modeClass.forEach((mode) => {
            buildStyle(type, mode);
          });
        }
        return styles;
      },
      // 处理内置组合动画
      tranfromInit(type) {
        let buildTranfrom = (type2, mode) => {
          let aniNum = null;
          if (mode === "fade") {
            aniNum = type2 ? 0 : 1;
          } else {
            aniNum = type2 ? "-100%" : "0";
            if (mode === "zoom-in") {
              aniNum = type2 ? 0.8 : 1;
            }
            if (mode === "zoom-out") {
              aniNum = type2 ? 1.2 : 1;
            }
            if (mode === "slide-right") {
              aniNum = type2 ? "100%" : "0";
            }
            if (mode === "slide-bottom") {
              aniNum = type2 ? "100%" : "0";
            }
          }
          this.animation[this.animationMode()[mode]](aniNum);
        };
        if (typeof this.modeClass === "string") {
          buildTranfrom(type, this.modeClass);
        } else {
          this.modeClass.forEach((mode) => {
            buildTranfrom(type, mode);
          });
        }
        return this.animation;
      },
      animationType(type) {
        return {
          fade: type ? 0 : 1,
          "slide-top": `translateY(${type ? "0" : "-100%"})`,
          "slide-right": `translateX(${type ? "0" : "100%"})`,
          "slide-bottom": `translateY(${type ? "0" : "100%"})`,
          "slide-left": `translateX(${type ? "0" : "-100%"})`,
          "zoom-in": `scaleX(${type ? 1 : 0.8}) scaleY(${type ? 1 : 0.8})`,
          "zoom-out": `scaleX(${type ? 1 : 1.2}) scaleY(${type ? 1 : 1.2})`
        };
      },
      // 内置动画类型与实际动画对应字典
      animationMode() {
        return {
          fade: "opacity",
          "slide-top": "translateY",
          "slide-right": "translateX",
          "slide-bottom": "translateY",
          "slide-left": "translateX",
          "zoom-in": "scale",
          "zoom-out": "scale"
        };
      },
      // 驼峰转中横线
      toLine(name) {
        return name.replace(/([A-Z])/g, "-$1").toLowerCase();
      }
    }
  };
  function _sfc_render$21(_ctx, _cache, $props, $setup, $data, $options) {
    return vue.withDirectives((vue.openBlock(), vue.createElementBlock("view", {
      ref: "ani",
      animation: $data.animationData,
      class: vue.normalizeClass($props.customClass),
      style: vue.normalizeStyle($options.transformStyles),
      onClick: _cache[0] || (_cache[0] = (...args) => $options.onClick && $options.onClick(...args))
    }, [
      vue.renderSlot(_ctx.$slots, "default")
    ], 14, ["animation"])), [
      [vue.vShow, $data.isShow]
    ]);
  }
  const __easycom_0$4 = /* @__PURE__ */ _export_sfc(_sfc_main$22, [["render", _sfc_render$21], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/uni_modules/uni-transition/components/uni-transition/uni-transition.vue"]]);
  const _sfc_main$21 = {
    name: "uniPopup",
    components: {},
    emits: ["change", "maskClick"],
    props: {
      // 开启动画
      animation: {
        type: Boolean,
        default: true
      },
      // 弹出层类型，可选值，top: 顶部弹出层；bottom：底部弹出层；center：全屏弹出层
      // message: 消息提示 ; dialog : 对话框
      type: {
        type: String,
        default: "center"
      },
      // maskClick
      isMaskClick: {
        type: Boolean,
        default: null
      },
      // TODO 2 个版本后废弃属性 ，使用 isMaskClick
      maskClick: {
        type: Boolean,
        default: null
      },
      backgroundColor: {
        type: String,
        default: "none"
      },
      safeArea: {
        type: Boolean,
        default: true
      },
      maskBackgroundColor: {
        type: String,
        default: "rgba(0, 0, 0, 0.4)"
      },
      borderRadius: {
        type: String
      }
    },
    watch: {
      /**
       * 监听type类型
       */
      type: {
        handler: function(type) {
          if (!this.config[type])
            return;
          this[this.config[type]](true);
        },
        immediate: true
      },
      isDesktop: {
        handler: function(newVal) {
          if (!this.config[newVal])
            return;
          this[this.config[this.type]](true);
        },
        immediate: true
      },
      /**
       * 监听遮罩是否可点击
       * @param {Object} val
       */
      maskClick: {
        handler: function(val2) {
          this.mkclick = val2;
        },
        immediate: true
      },
      isMaskClick: {
        handler: function(val2) {
          this.mkclick = val2;
        },
        immediate: true
      },
      // H5 下禁止底部滚动
      showPopup(show) {
      }
    },
    data() {
      return {
        duration: 300,
        ani: [],
        showPopup: false,
        showTrans: false,
        popupWidth: 0,
        popupHeight: 0,
        config: {
          top: "top",
          bottom: "bottom",
          center: "center",
          left: "left",
          right: "right",
          message: "top",
          dialog: "center",
          share: "bottom"
        },
        maskClass: {
          position: "fixed",
          bottom: 0,
          top: 0,
          left: 0,
          right: 0,
          backgroundColor: "rgba(0, 0, 0, 0.4)"
        },
        transClass: {
          backgroundColor: "transparent",
          borderRadius: this.borderRadius || "0",
          position: "fixed",
          left: 0,
          right: 0
        },
        maskShow: true,
        mkclick: true,
        popupstyle: "top"
      };
    },
    computed: {
      getStyles() {
        let res2 = { backgroundColor: this.bg };
        if (this.borderRadius || "0") {
          res2 = Object.assign(res2, { borderRadius: this.borderRadius });
        }
        return res2;
      },
      isDesktop() {
        return this.popupWidth >= 500 && this.popupHeight >= 500;
      },
      bg() {
        if (this.backgroundColor === "" || this.backgroundColor === "none") {
          return "transparent";
        }
        return this.backgroundColor;
      }
    },
    mounted() {
      const fixSize = () => {
        const {
          windowWidth,
          windowHeight,
          windowTop,
          safeArea,
          screenHeight,
          safeAreaInsets
        } = uni.getSystemInfoSync();
        this.popupWidth = windowWidth;
        this.popupHeight = windowHeight + (windowTop || 0);
        if (safeArea && this.safeArea) {
          this.safeAreaInsets = safeAreaInsets.bottom;
        } else {
          this.safeAreaInsets = 0;
        }
      };
      fixSize();
    },
    // TODO vue3
    unmounted() {
      this.setH5Visible();
    },
    activated() {
      this.setH5Visible(!this.showPopup);
    },
    deactivated() {
      this.setH5Visible(true);
    },
    created() {
      if (this.isMaskClick === null && this.maskClick === null) {
        this.mkclick = true;
      } else {
        this.mkclick = this.isMaskClick !== null ? this.isMaskClick : this.maskClick;
      }
      if (this.animation) {
        this.duration = 300;
      } else {
        this.duration = 0;
      }
      this.messageChild = null;
      this.clearPropagation = false;
      this.maskClass.backgroundColor = this.maskBackgroundColor;
    },
    methods: {
      setH5Visible(visible = true) {
      },
      /**
       * 公用方法，不显示遮罩层
       */
      closeMask() {
        this.maskShow = false;
      },
      /**
       * 公用方法，遮罩层禁止点击
       */
      disableMask() {
        this.mkclick = false;
      },
      // TODO nvue 取消冒泡
      clear(e2) {
        e2.stopPropagation();
        this.clearPropagation = true;
      },
      open(direction) {
        if (this.showPopup) {
          return;
        }
        let innerType = ["top", "center", "bottom", "left", "right", "message", "dialog", "share"];
        if (!(direction && innerType.indexOf(direction) !== -1)) {
          direction = this.type;
        }
        if (!this.config[direction]) {
          formatAppLog("error", "at uni_modules/uni-popup/components/uni-popup/uni-popup.vue:310", "缺少类型：", direction);
          return;
        }
        this[this.config[direction]]();
        this.$emit("change", {
          show: true,
          type: direction
        });
      },
      close(type) {
        this.showTrans = false;
        this.$emit("change", {
          show: false,
          type: this.type
        });
        clearTimeout(this.timer);
        this.timer = setTimeout(() => {
          this.showPopup = false;
        }, 300);
      },
      // TODO 处理冒泡事件，头条的冒泡事件有问题 ，先这样兼容
      touchstart() {
        this.clearPropagation = false;
      },
      onTap() {
        if (this.clearPropagation) {
          this.clearPropagation = false;
          return;
        }
        this.$emit("maskClick");
        if (!this.mkclick)
          return;
        this.close();
      },
      /**
       * 顶部弹出样式处理
       */
      top(type) {
        this.popupstyle = this.isDesktop ? "fixforpc-top" : "top";
        this.ani = ["slide-top"];
        this.transClass = {
          position: "fixed",
          left: 0,
          right: 0,
          backgroundColor: this.bg,
          borderRadius: this.borderRadius || "0"
        };
        if (type)
          return;
        this.showPopup = true;
        this.showTrans = true;
        this.$nextTick(() => {
          this.showPoptrans();
          if (this.messageChild && this.type === "message") {
            this.messageChild.timerClose();
          }
        });
      },
      /**
       * 底部弹出样式处理
       */
      bottom(type) {
        this.popupstyle = "bottom";
        this.ani = ["slide-bottom"];
        this.transClass = {
          position: "fixed",
          left: 0,
          right: 0,
          bottom: 0,
          paddingBottom: this.safeAreaInsets + "px",
          backgroundColor: this.bg,
          borderRadius: this.borderRadius || "0"
        };
        if (type)
          return;
        this.showPoptrans();
      },
      /**
       * 中间弹出样式处理
       */
      center(type) {
        this.popupstyle = "center";
        this.ani = ["zoom-out", "fade"];
        this.transClass = {
          position: "fixed",
          display: "flex",
          flexDirection: "column",
          bottom: 0,
          left: 0,
          right: 0,
          top: 0,
          justifyContent: "center",
          alignItems: "center",
          borderRadius: this.borderRadius || "0"
        };
        if (type)
          return;
        this.showPoptrans();
      },
      left(type) {
        this.popupstyle = "left";
        this.ani = ["slide-left"];
        this.transClass = {
          position: "fixed",
          left: 0,
          bottom: 0,
          top: 0,
          backgroundColor: this.bg,
          borderRadius: this.borderRadius || "0",
          display: "flex",
          flexDirection: "column"
        };
        if (type)
          return;
        this.showPoptrans();
      },
      right(type) {
        this.popupstyle = "right";
        this.ani = ["slide-right"];
        this.transClass = {
          position: "fixed",
          bottom: 0,
          right: 0,
          top: 0,
          backgroundColor: this.bg,
          borderRadius: this.borderRadius || "0",
          display: "flex",
          flexDirection: "column"
        };
        if (type)
          return;
        this.showPoptrans();
      },
      showPoptrans() {
        this.$nextTick(() => {
          this.showPopup = true;
          this.showTrans = true;
        });
      }
    }
  };
  function _sfc_render$20(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_transition = resolveEasycom(vue.resolveDynamicComponent("uni-transition"), __easycom_0$4);
    return $data.showPopup ? (vue.openBlock(), vue.createElementBlock(
      "view",
      {
        key: 0,
        class: vue.normalizeClass(["uni-popup", [$data.popupstyle, $options.isDesktop ? "fixforpc-z-index" : ""]])
      },
      [
        vue.createElementVNode(
          "view",
          {
            onTouchstart: _cache[1] || (_cache[1] = (...args) => $options.touchstart && $options.touchstart(...args))
          },
          [
            $data.maskShow ? (vue.openBlock(), vue.createBlock(_component_uni_transition, {
              key: "1",
              name: "mask",
              "mode-class": "fade",
              styles: $data.maskClass,
              duration: $data.duration,
              show: $data.showTrans,
              onClick: $options.onTap
            }, null, 8, ["styles", "duration", "show", "onClick"])) : vue.createCommentVNode("v-if", true),
            vue.createVNode(_component_uni_transition, {
              key: "2",
              "mode-class": $data.ani,
              name: "content",
              styles: $data.transClass,
              duration: $data.duration,
              show: $data.showTrans,
              onClick: $options.onTap
            }, {
              default: vue.withCtx(() => [
                vue.createElementVNode(
                  "view",
                  {
                    class: vue.normalizeClass(["uni-popup__wrapper", [$data.popupstyle]]),
                    style: vue.normalizeStyle($options.getStyles),
                    onClick: _cache[0] || (_cache[0] = (...args) => $options.clear && $options.clear(...args))
                  },
                  [
                    vue.renderSlot(_ctx.$slots, "default", {}, void 0, true)
                  ],
                  6
                  /* CLASS, STYLE */
                )
              ]),
              _: 3
              /* FORWARDED */
            }, 8, ["mode-class", "styles", "duration", "show", "onClick"])
          ],
          32
          /* NEED_HYDRATION */
        )
      ],
      2
      /* CLASS */
    )) : vue.createCommentVNode("v-if", true);
  }
  const __easycom_3$5 = /* @__PURE__ */ _export_sfc(_sfc_main$21, [["render", _sfc_render$20], ["__scopeId", "data-v-4dd3c44b"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/uni_modules/uni-popup/components/uni-popup/uni-popup.vue"]]);
  const getWorryList = (params, config2 = {}) => http$1.post("/api/emotion/emotion/getEmotionList", params, config2);
  const complaintType = (params, config2 = {}) => http$1.post("/api/admin/complaint/type/page", params, config2);
  const consultantAdd = (params, config2 = {}) => http$1.post("/api/admin/consultant/quote/add", params, config2);
  const listenerAdd = (params, config2 = {}) => http$1.post("/api/admin/listener/quote/add", params, config2);
  const consultantList = (params, config2 = {}) => http$1.get(`/api/admin/consultant/quote/list?userId=${params}`, {}, config2);
  const listenerList = (params, config2 = {}) => http$1.get(`/api/admin/listener/quote/list?userId=${params}`, {}, config2);
  const listenerDelete = (params, config2 = {}) => http$1.post(`/api/admin/listener/quote/delete?id=${params}`, {}, config2);
  const consultantDelete = (params, config2 = {}) => http$1.post(`/api/admin/consultant/quote/delete?id=${params}`, {}, config2);
  const getAgreement = (params, config2 = {}) => http$1.get(`/api/agreement/page`, params, config2);
  const getOperation = (params, config2 = {}) => http$1.get(`/api/operation-settings/page?current=1&size=10`, params, config2);
  const listenerUpdate = (params, config2 = {}) => http$1.post(`/api/admin/listener/quote/update`, params, config2);
  const consultantUpdate = (params, config2 = {}) => http$1.post(`/api/admin/consultant/quote/update`, params, config2);
  const getCommentByTargetUserId = (params, config2 = {}) => http$1.get(`/api/comment/comment/getCommentByTargetUserId`, params, config2);
  const setBatch = (params, config2 = {}) => http$1.post(`/api/consultant/schedule/setBatch`, params, config2);
  const getSchedule = (params, config2 = {}) => http$1.get("/api/consultant/schedule/available?consultantId=", params, config2);
  const _imports_0$r = "/static/my/robot.png";
  const _imports_1$h = "/static/my/save.png";
  const _sfc_main$20 = {
    __name: "Customer-Service",
    setup(__props, { expose: __expose }) {
      const imageUrl = vue.ref();
      const operationList = async () => {
        const { data } = await getOperation();
        const { customerServiceQrcode } = data.records[0];
        imageUrl.value = customerServiceQrcode;
      };
      operationList();
      const popup = vue.ref(null);
      const open2 = () => {
        popup.value.open("bottom");
      };
      const close = () => {
        popup.value.close();
      };
      __expose({
        open: open2
      });
      const handleLongPress = async () => {
        try {
          const downloadRes = await uni.downloadFile({
            url: imageUrl.value
          });
          if (downloadRes.statusCode !== 200) {
            throw new Error("下载失败");
          }
          await uni.saveImageToPhotosAlbum({
            filePath: downloadRes.tempFilePath
          });
          uni.showToast({ title: "保存成功", icon: "success" });
        } catch (err) {
          formatAppLog("error", "at components/Customer-Service.vue:53", "保存失败:", err);
          uni.showToast({ title: "保存失败", icon: "none" });
        }
      };
      const __returned__ = { imageUrl, operationList, popup, open: open2, close, handleLongPress, ref: vue.ref, get getOperation() {
        return getOperation;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$1$(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    const _component_uni_popup = resolveEasycom(vue.resolveDynamicComponent("uni-popup"), __easycom_3$5);
    return vue.openBlock(), vue.createBlock(
      _component_uni_popup,
      {
        ref: "popup",
        type: "message"
      },
      {
        default: vue.withCtx(() => [
          vue.createElementVNode("view", { class: "popup-content" }, [
            vue.createVNode(_component_uni_icons, {
              type: "closeempty",
              size: "20",
              color: "#A6A6A6",
              class: "close-icon",
              onClick: $setup.close
            }),
            vue.createElementVNode("view", { class: "title" }, [
              vue.createElementVNode("view", { class: "title-text" }, "您的专属客服"),
              vue.createElementVNode("image", {
                src: _imports_0$r,
                class: "title-robot"
              })
            ]),
            vue.createElementVNode("image", {
              src: $setup.imageUrl,
              onLongpress: $setup.handleLongPress,
              class: "QRcode"
            }, null, 40, ["src"]),
            vue.createElementVNode("view", { class: "save-code" }, [
              vue.createElementVNode("image", {
                src: _imports_1$h,
                class: "title-save"
              }),
              vue.createElementVNode("view", null, [
                vue.createElementVNode("text", null, "长按保存"),
                vue.createTextVNode("到相册")
              ])
            ])
          ])
        ]),
        _: 1
        /* STABLE */
      },
      512
      /* NEED_PATCH */
    );
  }
  const CustomerService = /* @__PURE__ */ _export_sfc(_sfc_main$20, [["render", _sfc_render$1$], ["__scopeId", "data-v-d93a6781"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/components/Customer-Service.vue"]]);
  const _imports_0$q = "/static/my/contect.png";
  const _imports_1$g = "/static/consult/filter.png";
  const _imports_2$8 = "/static/consult/address.png";
  const _sfc_main$1$ = {
    __name: "index",
    setup(__props, { expose: __expose }) {
      __expose();
      vue.useCssVars((_ctx) => ({
        "882f34cc-statusBarHeight": statusBarHeight.value
      }));
      const globalStore = useGlobalDataStore();
      const scrollTop = vue.ref(0);
      const stickyOffsetTop = vue.ref(0);
      const showCityBox = vue.ref(false);
      const statusBarHeight = vue.ref(globalStore.statusBarHeight + "rpx");
      const banners = vue.ref([]);
      const sticky = vue.ref([
        { id: 1, name: "倾听方向", open: false },
        { id: 2, name: "城市", open: false },
        { id: 3, name: "价格", open: false },
        { id: 4, name: "排序", open: false },
        { id: 5, name: "筛选", open: false }
      ]);
      const serviceRef = vue.ref(null);
      const customerService = () => {
        serviceRef.value.open();
      };
      const getBanners = async () => {
        let res2 = await bannerList();
        banners.value = res2.data;
      };
      const fixed = vue.ref(false);
      const avatarImg = (item) => {
        const { masterGallery } = item;
        if (!masterGallery) {
          return "/static/consult/user.png";
        } else {
          return JSON.parse(masterGallery)[0].url;
        }
      };
      const data = vue.reactive({
        listParams: {
          current: 1,
          size: 10
        },
        list: []
      });
      const searchParams = vue.ref({
        serviceTypes: [],
        city: ""
      });
      const closeCityFilter = () => {
        showCityBox.value = false;
      };
      const blursearchFn = () => {
        getList();
      };
      const fixedTop = () => {
        fixed.value = true;
      };
      const unFixedTop = () => {
        fixed.value = false;
        scrollTop.value = 0;
      };
      const instance = vue.getCurrentInstance();
      const proxy = instance == null ? void 0 : instance.proxy;
      const currentScroll = vue.ref(0);
      const currentFilter = vue.ref(null);
      const city = vue.ref("");
      const showBox = async (type) => {
        currentFilter.value = type;
        if (!fixed.value) {
          await vue.nextTick();
          const query = uni.createSelectorQuery().in(proxy);
          query.select("#stickyBox").boundingClientRect();
          query.selectViewport().scrollOffset();
          query.exec((res2) => {
            if (!res2 || !res2[0])
              return;
            const boxTop = res2[0].top;
            const scrollOffset = currentScroll.value;
            scrollTop.value = scrollOffset + boxTop - 90;
            setTimeout(() => {
              openFilter(type);
            }, 300);
          });
        } else {
          openFilter(type);
        }
      };
      const typeColor = vue.ref("");
      const openFilter = (type) => {
        typeColor.value = type;
        showCityBox.value = true;
      };
      const onScroll = (e2) => {
        currentScroll.value = e2.detail.scrollTop;
      };
      const openDetail = (item) => {
        const { id: id2, userId } = item;
        uni.navigateTo({
          url: `/pages/confide/detail?id=${id2}&userId=${userId}`
        });
      };
      vue.watch(
        showCityBox,
        () => {
          if (!showCityBox.value) {
            typeColor.value = "";
          }
        }
      );
      const formData = vue.ref({
        current: 1,
        size: 10,
        consultantName: ""
      });
      onReachBottom(() => {
        data.listParams.current += 1;
        getList();
      });
      const getList = async () => {
        let params = {
          ...data.listParams,
          ...searchParams.value,
          params: formData.value
        };
        const res2 = await getListenerList(params);
        data.list = [...data.list, ...res2.data.records];
      };
      const listFiltering = vue.ref(null);
      const closeFilter = () => {
        data.list = [];
        const { distressId, city: city2, currentRange, sortType, resultObj } = listFiltering.value;
        if (currentFilter.value === 1) {
          formData.value.distressId = distressId;
        }
        if (currentFilter.value === 2) {
          formData.value.city = city2;
        }
        if (currentFilter.value === 3) {
          formData.value = { ...currentRange };
        }
        if (currentFilter.value === 4) {
          formData.value.sortType = sortType;
        }
        if (currentFilter.value === 5) {
          formData.value = { ...resultObj };
        }
        showCityBox.value = false;
        getList();
      };
      const resetOption = () => {
        formData.value = {
          current: 1,
          size: 10,
          consultantName: ""
        };
        data.list = [];
        showCityBox.value = false;
        getList();
      };
      const serviceTypes2 = vue.ref([]);
      const getConsultMenu = async () => {
        let resp = await consultMenus();
        const data2 = resp.data || [];
        const result = data2.map((group) => ({
          id: group.id,
          name: group.name,
          children: JSON.parse(group.children),
          spread: false
        }));
        serviceTypes2.value = result;
      };
      const allCity = vue.ref([]);
      const getCityInfo = async () => {
        let resp = await cities();
        const data2 = resp.data || [];
        const result = data2.map((group, index) => ({
          id: index + 1,
          name: group.name,
          children: JSON.parse(group.cities)
        }));
        allCity.value = result;
      };
      vue.onMounted(() => {
        stickyOffsetTop.value = globalStore.statusBarHeight + 88;
        getList();
        getConsultMenu();
        getCityInfo();
        getBanners();
      });
      const __returned__ = { globalStore, scrollTop, stickyOffsetTop, showCityBox, statusBarHeight, banners, sticky, serviceRef, customerService, getBanners, fixed, avatarImg, data, searchParams, closeCityFilter, blursearchFn, fixedTop, unFixedTop, instance, proxy, currentScroll, currentFilter, city, showBox, typeColor, openFilter, onScroll, openDetail, formData, getList, listFiltering, closeFilter, resetOption, serviceTypes: serviceTypes2, getConsultMenu, allCity, getCityInfo, ListFiltering, ref: vue.ref, reactive: vue.reactive, watch: vue.watch, getCurrentInstance: vue.getCurrentInstance, nextTick: vue.nextTick, onMounted: vue.onMounted, get getListenerList() {
        return getListenerList;
      }, get getGenerationByBirthdate() {
        return getGenerationByBirthdate;
      }, get formatAddress() {
        return formatAddress;
      }, get cities() {
        return cities;
      }, get consultMenus() {
        return consultMenus;
      }, get useGlobalDataStore() {
        return useGlobalDataStore;
      }, get onReachBottom() {
        return onReachBottom;
      }, get bannerList() {
        return bannerList;
      }, CustomerService };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$1_(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_search_bar = resolveEasycom(vue.resolveDynamicComponent("uni-search-bar"), __easycom_0$6);
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    const _component_u_sticky = resolveEasycom(vue.resolveDynamicComponent("u-sticky"), __easycom_2$c);
    return vue.openBlock(), vue.createElementBlock("view", { class: "consult-box" }, [
      vue.createElementVNode("scroll-view", {
        class: "scroll-content",
        "scroll-y": "",
        "scroll-top": $setup.scrollTop,
        "show-scrollbar": false,
        onScroll: $setup.onScroll
      }, [
        vue.createElementVNode(
          "view",
          {
            class: vue.normalizeClass(["search-content", $setup.currentScroll > 15 ? "activeClass" : ""])
          },
          [
            vue.createElementVNode("view", { class: "search" }, [
              vue.createVNode(_component_uni_search_bar, {
                modelValue: $setup.formData.consultantName,
                "onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => $setup.formData.consultantName = $event),
                radius: "100",
                placeholder: "请输入咨询师姓名",
                clearButton: "auto",
                cancelButton: "none",
                onBlur: _cache[1] || (_cache[1] = ($event) => $setup.blursearchFn())
              }, null, 8, ["modelValue"])
            ]),
            vue.createElementVNode("view", {
              class: "contact",
              onClick: $setup.customerService
            }, [
              vue.createElementVNode("image", { src: _imports_0$q }),
              vue.createElementVNode("text", null, "客服")
            ])
          ],
          2
          /* CLASS */
        ),
        vue.createElementVNode("view", { class: "operate-box" }, [
          vue.createElementVNode("view", { class: "uni-margin-wrap" }, [
            vue.createElementVNode("swiper", {
              class: "swiper",
              circular: "",
              "indicator-dots": true,
              autoplay: true,
              interval: 5e3,
              duration: 500
            }, [
              (vue.openBlock(true), vue.createElementBlock(
                vue.Fragment,
                null,
                vue.renderList($setup.banners, (i2, index) => {
                  return vue.openBlock(), vue.createElementBlock("swiper-item", {
                    key: index,
                    class: "swiper-item"
                  }, [
                    vue.createElementVNode("view", { class: "swiper-item uni-bg-red" }, [
                      vue.createElementVNode("image", {
                        src: i2.image,
                        mode: "aspectFill",
                        class: "img"
                      }, null, 8, ["src"])
                    ])
                  ]);
                }),
                128
                /* KEYED_FRAGMENT */
              ))
            ])
          ])
        ]),
        vue.createVNode(_component_u_sticky, {
          "offset-top": $setup.stickyOffsetTop,
          onFixed: $setup.fixedTop,
          onUnfixed: $setup.unFixedTop
        }, {
          default: vue.withCtx(() => [
            vue.createElementVNode("view", { id: "stickyBox" }, [
              vue.createElementVNode("view", { class: "filter-box" }, [
                vue.createElementVNode("view", { class: "filter-box-1" }, [
                  vue.createElementVNode("view", { class: "filter-box-1-1" }, [
                    (vue.openBlock(true), vue.createElementBlock(
                      vue.Fragment,
                      null,
                      vue.renderList($setup.sticky, (item, index) => {
                        return vue.openBlock(), vue.createElementBlock("view", {
                          class: "filter-box-1-item",
                          key: index,
                          style: vue.normalizeStyle({ color: $setup.typeColor == item.id ? "#ffa867" : "black" }),
                          onClick: ($event) => $setup.showBox(item.id)
                        }, [
                          vue.createTextVNode(
                            vue.toDisplayString(item.name) + " ",
                            1
                            /* TEXT */
                          ),
                          item.id != 5 ? (vue.openBlock(), vue.createBlock(_component_uni_icons, {
                            key: 0,
                            type: $setup.typeColor == item.id ? "up" : "down",
                            color: $setup.typeColor == item.id ? "#ffa867" : "",
                            size: "12",
                            class: "icon"
                          }, null, 8, ["type", "color"])) : vue.createCommentVNode("v-if", true),
                          item.id == 5 ? (vue.openBlock(), vue.createElementBlock("image", {
                            key: 1,
                            src: _imports_1$g,
                            style: { "width": "25rpx", "height": "25rpx" },
                            class: "filter icon"
                          })) : vue.createCommentVNode("v-if", true)
                        ], 12, ["onClick"]);
                      }),
                      128
                      /* KEYED_FRAGMENT */
                    ))
                  ])
                ])
              ])
            ])
          ]),
          _: 1
          /* STABLE */
        }, 8, ["offset-top"]),
        vue.createElementVNode("view", { class: "doctor-list" }, [
          (vue.openBlock(true), vue.createElementBlock(
            vue.Fragment,
            null,
            vue.renderList($setup.data.list, (item, index) => {
              return vue.openBlock(), vue.createElementBlock("view", {
                class: "doctor-item",
                key: index,
                onClick: ($event) => $setup.openDetail(item)
              }, [
                vue.createElementVNode("view", { class: "doctor-auture" }, [
                  vue.createElementVNode("image", {
                    src: $setup.avatarImg(item)
                  }, null, 8, ["src"])
                ]),
                vue.createElementVNode("view", { class: "doctor-info" }, [
                  vue.createElementVNode("view", { class: "doctor-info-1" }, [
                    vue.createElementVNode(
                      "view",
                      { class: "name" },
                      vue.toDisplayString(item.name),
                      1
                      /* TEXT */
                    )
                  ]),
                  vue.createElementVNode("view", { class: "doctor-info-1" }, [
                    vue.createElementVNode("view", { class: "info" }, [
                      vue.createElementVNode(
                        "text",
                        { class: "age item" },
                        vue.toDisplayString($setup.getGenerationByBirthdate(item.birthdate)),
                        1
                        /* TEXT */
                      ),
                      vue.createElementVNode("text", { class: "line" }),
                      vue.createElementVNode(
                        "text",
                        { class: "edu item" },
                        vue.toDisplayString(item.education) + "硕士",
                        1
                        /* TEXT */
                      ),
                      vue.createElementVNode("text", { class: "line" }),
                      vue.createElementVNode(
                        "text",
                        { class: "star item" },
                        vue.toDisplayString(item.constellation || "水瓶座"),
                        1
                        /* TEXT */
                      )
                    ])
                  ]),
                  vue.createElementVNode("view", { class: "doctor-info-1" }, [
                    vue.createElementVNode("view", { class: "exprise" }, [
                      vue.createElementVNode(
                        "text",
                        null,
                        vue.toDisplayString(item.commentCount),
                        1
                        /* TEXT */
                      ),
                      vue.createTextVNode(" 服务人次 "),
                      vue.createElementVNode(
                        "text",
                        null,
                        vue.toDisplayString(item.platformHours) + "+",
                        1
                        /* TEXT */
                      ),
                      vue.createTextVNode(" 小时经验 "),
                      vue.createElementVNode(
                        "text",
                        null,
                        vue.toDisplayString(item.rating),
                        1
                        /* TEXT */
                      ),
                      vue.createTextVNode(" 评分 ")
                    ])
                  ]),
                  vue.createElementVNode("view", { class: "doctor-info-1" }, [
                    vue.createElementVNode("view", { class: "point-list" }, [
                      (vue.openBlock(true), vue.createElementBlock(
                        vue.Fragment,
                        null,
                        vue.renderList(item.serviceTypes.slice(0, 3), (item2, index2) => {
                          return vue.openBlock(), vue.createElementBlock(
                            "view",
                            {
                              class: "point-item",
                              key: index2
                            },
                            vue.toDisplayString(item2),
                            1
                            /* TEXT */
                          );
                        }),
                        128
                        /* KEYED_FRAGMENT */
                      ))
                    ])
                  ]),
                  vue.createElementVNode("view", { class: "doctor-info-1" }, [
                    item.price ? (vue.openBlock(), vue.createElementBlock("view", {
                      key: 0,
                      class: "price"
                    }, [
                      item.price ? (vue.openBlock(), vue.createElementBlock("text", {
                        key: 0,
                        class: "unit"
                      }, "¥")) : vue.createCommentVNode("v-if", true),
                      vue.createTextVNode(
                        vue.toDisplayString(item.price),
                        1
                        /* TEXT */
                      )
                    ])) : vue.createCommentVNode("v-if", true),
                    item.quoteList[0] ? (vue.openBlock(), vue.createElementBlock("view", {
                      key: 1,
                      class: "price"
                    }, [
                      vue.createElementVNode(
                        "text",
                        null,
                        vue.toDisplayString(item.quoteList[0].quoteAmount || 0),
                        1
                        /* TEXT */
                      ),
                      vue.createElementVNode("text", {
                        class: "unit",
                        style: { "color": "rgba(0, 0, 0, 0.5)" }
                      }, " /分钟起")
                    ])) : vue.createCommentVNode("v-if", true),
                    vue.createElementVNode("view", { class: "address" }, [
                      vue.createElementVNode("image", { src: _imports_2$8 }),
                      vue.createElementVNode(
                        "text",
                        null,
                        vue.toDisplayString($setup.formatAddress(item.address)),
                        1
                        /* TEXT */
                      )
                    ])
                  ])
                ]),
                vue.createElementVNode("view", { class: "server-box" }, [
                  vue.createElementVNode("view", { class: "server-status" }, "服务中")
                ])
              ], 8, ["onClick"]);
            }),
            128
            /* KEYED_FRAGMENT */
          ))
        ])
      ], 40, ["scroll-top"]),
      vue.withDirectives(vue.createElementVNode(
        "view",
        {
          class: "mask",
          onClick: $setup.closeCityFilter
        },
        [
          vue.createElementVNode("view", {
            class: "filter-popup",
            onClick: _cache[4] || (_cache[4] = vue.withModifiers(() => {
            }, ["stop"]))
          }, [
            vue.createElementVNode("view", { class: "popup-body" }, [
              vue.createVNode($setup["ListFiltering"], {
                ref: "listFiltering",
                colorType: 2,
                serviceTypes: $setup.serviceTypes,
                confusionList: $setup.allCity,
                layoutType: $setup.currentFilter
              }, null, 8, ["serviceTypes", "confusionList", "layoutType"])
            ]),
            vue.createElementVNode("view", { class: "popup-footer" }, [
              vue.createElementVNode("button", {
                class: "btn btn-reset",
                size: "mini",
                onClick: _cache[2] || (_cache[2] = ($event) => $setup.resetOption())
              }, " 重置 "),
              vue.createElementVNode("button", {
                class: "btn btn-confirm",
                size: "mini",
                onClick: _cache[3] || (_cache[3] = ($event) => $setup.closeFilter())
              }, " 完成 ")
            ])
          ])
        ],
        512
        /* NEED_PATCH */
      ), [
        [vue.vShow, $setup.showCityBox]
      ]),
      vue.createVNode(
        $setup["CustomerService"],
        { ref: "serviceRef" },
        null,
        512
        /* NEED_PATCH */
      )
    ]);
  }
  const PagesConfideIndex = /* @__PURE__ */ _export_sfc(_sfc_main$1$, [["render", _sfc_render$1_], ["__scopeId", "data-v-882f34cc"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/confide/index.vue"]]);
  const _sfc_main$1_ = {
    name: "UniStatusBar",
    data() {
      return {
        statusBarHeight: uni.getSystemInfoSync().statusBarHeight + "px"
      };
    }
  };
  function _sfc_render$1Z(_ctx, _cache, $props, $setup, $data, $options) {
    return vue.openBlock(), vue.createElementBlock(
      "view",
      {
        style: vue.normalizeStyle({ height: $data.statusBarHeight }),
        class: "uni-status-bar"
      },
      [
        vue.renderSlot(_ctx.$slots, "default", {}, void 0, true)
      ],
      4
      /* STYLE */
    );
  }
  const statusBar = /* @__PURE__ */ _export_sfc(_sfc_main$1_, [["render", _sfc_render$1Z], ["__scopeId", "data-v-7920e3e0"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/uni_modules/uni-nav-bar/components/uni-nav-bar/uni-status-bar.vue"]]);
  const getVal = (val2) => typeof val2 === "number" ? val2 + "px" : val2;
  const _sfc_main$1Z = {
    name: "UniNavBar",
    components: {
      statusBar
    },
    emits: ["clickLeft", "clickRight", "clickTitle"],
    props: {
      dark: {
        type: Boolean,
        default: false
      },
      title: {
        type: String,
        default: ""
      },
      leftText: {
        type: String,
        default: ""
      },
      rightText: {
        type: String,
        default: ""
      },
      leftIcon: {
        type: String,
        default: ""
      },
      rightIcon: {
        type: String,
        default: ""
      },
      fixed: {
        type: [Boolean, String],
        default: false
      },
      color: {
        type: String,
        default: ""
      },
      backgroundColor: {
        type: String,
        default: ""
      },
      statusBar: {
        type: [Boolean, String],
        default: false
      },
      shadow: {
        type: [Boolean, String],
        default: false
      },
      border: {
        type: [Boolean, String],
        default: true
      },
      height: {
        type: [Number, String],
        default: 44
      },
      leftWidth: {
        type: [Number, String],
        default: 60
      },
      rightWidth: {
        type: [Number, String],
        default: 60
      },
      stat: {
        type: [Boolean, String],
        default: ""
      }
    },
    computed: {
      themeBgColor() {
        if (this.dark) {
          if (this.backgroundColor) {
            return this.backgroundColor;
          } else {
            return this.dark ? "#333" : "#FFF";
          }
        }
        return this.backgroundColor || "#FFF";
      },
      themeColor() {
        if (this.dark) {
          if (this.color) {
            return this.color;
          } else {
            return this.dark ? "#fff" : "#333";
          }
        }
        return this.color || "#333";
      },
      navbarHeight() {
        return getVal(this.height);
      },
      leftIconWidth() {
        return getVal(this.leftWidth);
      },
      rightIconWidth() {
        return getVal(this.rightWidth);
      }
    },
    mounted() {
      if (uni.report && this.stat && this.title !== "") {
        uni.report("title", this.title);
      }
    },
    methods: {
      onClickLeft() {
        this.$emit("clickLeft");
      },
      onClickRight() {
        this.$emit("clickRight");
      },
      onClickTitle() {
        this.$emit("clickTitle");
      }
    }
  };
  function _sfc_render$1Y(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_status_bar = vue.resolveComponent("status-bar");
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    return vue.openBlock(), vue.createElementBlock(
      "view",
      {
        class: vue.normalizeClass(["uni-navbar", { "uni-dark": $props.dark, "uni-nvue-fixed": $props.fixed }])
      },
      [
        vue.createElementVNode(
          "view",
          {
            class: vue.normalizeClass(["uni-navbar__content", { "uni-navbar--fixed": $props.fixed, "uni-navbar--shadow": $props.shadow, "uni-navbar--border": $props.border }]),
            style: vue.normalizeStyle({ "background-color": $options.themeBgColor, "border-bottom-color": $options.themeColor })
          },
          [
            $props.statusBar ? (vue.openBlock(), vue.createBlock(_component_status_bar, { key: 0 })) : vue.createCommentVNode("v-if", true),
            vue.createElementVNode(
              "view",
              {
                style: vue.normalizeStyle({ color: $options.themeColor, backgroundColor: $options.themeBgColor, height: $options.navbarHeight }),
                class: "uni-navbar__header"
              },
              [
                vue.createElementVNode(
                  "view",
                  {
                    onClick: _cache[0] || (_cache[0] = (...args) => $options.onClickLeft && $options.onClickLeft(...args)),
                    class: "uni-navbar__header-btns uni-navbar__header-btns-left",
                    style: vue.normalizeStyle({ width: $options.leftIconWidth })
                  },
                  [
                    vue.renderSlot(_ctx.$slots, "left", {}, () => [
                      $props.leftIcon.length > 0 ? (vue.openBlock(), vue.createElementBlock("view", {
                        key: 0,
                        class: "uni-navbar__content_view"
                      }, [
                        vue.createVNode(_component_uni_icons, {
                          color: $options.themeColor,
                          type: $props.leftIcon,
                          size: "20"
                        }, null, 8, ["color", "type"])
                      ])) : vue.createCommentVNode("v-if", true),
                      $props.leftText.length ? (vue.openBlock(), vue.createElementBlock(
                        "view",
                        {
                          key: 1,
                          class: vue.normalizeClass([{ "uni-navbar-btn-icon-left": !$props.leftIcon.length > 0 }, "uni-navbar-btn-text"])
                        },
                        [
                          vue.createElementVNode(
                            "text",
                            {
                              style: vue.normalizeStyle({ color: $options.themeColor, fontSize: "12px" })
                            },
                            vue.toDisplayString($props.leftText),
                            5
                            /* TEXT, STYLE */
                          )
                        ],
                        2
                        /* CLASS */
                      )) : vue.createCommentVNode("v-if", true)
                    ], true)
                  ],
                  4
                  /* STYLE */
                ),
                vue.createElementVNode("view", {
                  class: "uni-navbar__header-container",
                  onClick: _cache[1] || (_cache[1] = (...args) => $options.onClickTitle && $options.onClickTitle(...args))
                }, [
                  vue.renderSlot(_ctx.$slots, "default", {}, () => [
                    $props.title.length > 0 ? (vue.openBlock(), vue.createElementBlock("view", {
                      key: 0,
                      class: "uni-navbar__header-container-inner"
                    }, [
                      vue.createElementVNode(
                        "text",
                        {
                          class: "uni-nav-bar-text uni-ellipsis-1",
                          style: vue.normalizeStyle({ color: $options.themeColor })
                        },
                        vue.toDisplayString($props.title),
                        5
                        /* TEXT, STYLE */
                      )
                    ])) : vue.createCommentVNode("v-if", true)
                  ], true)
                ]),
                vue.createElementVNode(
                  "view",
                  {
                    onClick: _cache[2] || (_cache[2] = (...args) => $options.onClickRight && $options.onClickRight(...args)),
                    class: "uni-navbar__header-btns uni-navbar__header-btns-right",
                    style: vue.normalizeStyle({ width: $options.rightIconWidth })
                  },
                  [
                    vue.renderSlot(_ctx.$slots, "right", {}, () => [
                      $props.rightIcon.length ? (vue.openBlock(), vue.createElementBlock("view", { key: 0 }, [
                        vue.createVNode(_component_uni_icons, {
                          color: $options.themeColor,
                          type: $props.rightIcon,
                          size: "22"
                        }, null, 8, ["color", "type"])
                      ])) : vue.createCommentVNode("v-if", true),
                      $props.rightText.length && !$props.rightIcon.length ? (vue.openBlock(), vue.createElementBlock("view", {
                        key: 1,
                        class: "uni-navbar-btn-text"
                      }, [
                        vue.createElementVNode(
                          "text",
                          {
                            class: "uni-nav-bar-right-text",
                            style: vue.normalizeStyle({ color: $options.themeColor })
                          },
                          vue.toDisplayString($props.rightText),
                          5
                          /* TEXT, STYLE */
                        )
                      ])) : vue.createCommentVNode("v-if", true)
                    ], true)
                  ],
                  4
                  /* STYLE */
                )
              ],
              4
              /* STYLE */
            )
          ],
          6
          /* CLASS, STYLE */
        ),
        $props.fixed ? (vue.openBlock(), vue.createElementBlock("view", {
          key: 0,
          class: "uni-navbar__placeholder"
        }, [
          $props.statusBar ? (vue.openBlock(), vue.createBlock(_component_status_bar, { key: 0 })) : vue.createCommentVNode("v-if", true),
          vue.createElementVNode(
            "view",
            {
              class: "uni-navbar__placeholder-view",
              style: vue.normalizeStyle({ height: $options.navbarHeight })
            },
            null,
            4
            /* STYLE */
          )
        ])) : vue.createCommentVNode("v-if", true)
      ],
      2
      /* CLASS */
    );
  }
  const __easycom_1$4 = /* @__PURE__ */ _export_sfc(_sfc_main$1Z, [["render", _sfc_render$1Y], ["__scopeId", "data-v-26544265"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/uni_modules/uni-nav-bar/components/uni-nav-bar/uni-nav-bar.vue"]]);
  const _sfc_main$1Y = {
    name: "UniSteps",
    props: {
      direction: {
        // 排列方向 row column
        type: String,
        default: "row"
      },
      activeColor: {
        // 激活状态颜色
        type: String,
        default: "#2979FF"
      },
      deactiveColor: {
        // 未激活状态颜色
        type: String,
        default: "#B7BDC6"
      },
      active: {
        // 当前步骤
        type: Number,
        default: 0
      },
      activeIcon: {
        // 当前步骤
        type: String,
        default: "checkbox-filled"
      },
      options: {
        type: Array,
        default() {
          return [];
        }
      }
      // 数据
    },
    data() {
      return {
        heightArr: []
      };
    },
    mounted() {
      if (this.direction === "column") {
        let that = this;
        uni.createSelectorQuery().in(this).selectAll(".uni-steps__column-text").boundingClientRect((data) => {
          that.heightArr = data.map((item) => item.height + 1);
        }).exec();
      }
    }
  };
  function _sfc_render$1X(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    return vue.openBlock(), vue.createElementBlock("view", { class: "uni-steps" }, [
      vue.createElementVNode(
        "view",
        {
          class: vue.normalizeClass([$props.direction === "column" ? "uni-steps__column" : "uni-steps__row"])
        },
        [
          vue.createElementVNode(
            "view",
            {
              class: vue.normalizeClass([$props.direction === "column" ? "uni-steps__column-text-container" : "uni-steps__row-text-container"])
            },
            [
              (vue.openBlock(true), vue.createElementBlock(
                vue.Fragment,
                null,
                vue.renderList($props.options, (item, index) => {
                  return vue.openBlock(), vue.createElementBlock(
                    "view",
                    {
                      key: index,
                      class: vue.normalizeClass([$props.direction === "column" ? "uni-steps__column-text" : "uni-steps__row-text"])
                    },
                    [
                      vue.createElementVNode(
                        "text",
                        {
                          style: vue.normalizeStyle({ color: index === $props.active ? $props.activeColor : $props.deactiveColor }),
                          class: vue.normalizeClass([$props.direction === "column" ? "uni-steps__column-title" : "uni-steps__row-title"])
                        },
                        vue.toDisplayString(item.title),
                        7
                        /* TEXT, CLASS, STYLE */
                      ),
                      vue.createElementVNode(
                        "text",
                        {
                          style: vue.normalizeStyle({ color: $props.deactiveColor }),
                          class: vue.normalizeClass([$props.direction === "column" ? "uni-steps__column-desc" : "uni-steps__row-desc"])
                        },
                        vue.toDisplayString(item.desc),
                        7
                        /* TEXT, CLASS, STYLE */
                      )
                    ],
                    2
                    /* CLASS */
                  );
                }),
                128
                /* KEYED_FRAGMENT */
              ))
            ],
            2
            /* CLASS */
          ),
          vue.createElementVNode(
            "view",
            {
              class: vue.normalizeClass([$props.direction === "column" ? "uni-steps__column-container" : "uni-steps__row-container"])
            },
            [
              (vue.openBlock(true), vue.createElementBlock(
                vue.Fragment,
                null,
                vue.renderList($props.options, (item, index) => {
                  return vue.openBlock(), vue.createElementBlock(
                    "view",
                    {
                      class: vue.normalizeClass([$props.direction === "column" ? "uni-steps__column-line-item" : "uni-steps__row-line-item"]),
                      key: index,
                      style: vue.normalizeStyle({ height: $props.direction === "column" ? $data.heightArr[index] + "px" : "14px" })
                    },
                    [
                      vue.createElementVNode(
                        "view",
                        {
                          class: vue.normalizeClass([$props.direction === "column" ? "uni-steps__column-line" : "uni-steps__row-line", $props.direction === "column" ? "uni-steps__column-line--before" : "uni-steps__row-line--before"]),
                          style: vue.normalizeStyle({ backgroundColor: index <= $props.active && index !== 0 ? $props.activeColor : index === 0 ? "transparent" : $props.deactiveColor })
                        },
                        null,
                        6
                        /* CLASS, STYLE */
                      ),
                      index === $props.active ? (vue.openBlock(), vue.createElementBlock(
                        "view",
                        {
                          key: 0,
                          class: vue.normalizeClass([$props.direction === "column" ? "uni-steps__column-check" : "uni-steps__row-check"])
                        },
                        [
                          vue.createVNode(_component_uni_icons, {
                            color: $props.activeColor,
                            type: $props.activeIcon,
                            size: "14"
                          }, null, 8, ["color", "type"])
                        ],
                        2
                        /* CLASS */
                      )) : (vue.openBlock(), vue.createElementBlock(
                        "view",
                        {
                          key: 1,
                          class: vue.normalizeClass([$props.direction === "column" ? "uni-steps__column-circle" : "uni-steps__row-circle"]),
                          style: vue.normalizeStyle({ backgroundColor: index < $props.active ? $props.activeColor : $props.deactiveColor })
                        },
                        null,
                        6
                        /* CLASS, STYLE */
                      )),
                      vue.createElementVNode(
                        "view",
                        {
                          class: vue.normalizeClass([$props.direction === "column" ? "uni-steps__column-line" : "uni-steps__row-line", $props.direction === "column" ? "uni-steps__column-line--after" : "uni-steps__row-line--after"]),
                          style: vue.normalizeStyle({ backgroundColor: index < $props.active && index !== $props.options.length - 1 ? $props.activeColor : index === $props.options.length - 1 ? "transparent" : $props.deactiveColor })
                        },
                        null,
                        6
                        /* CLASS, STYLE */
                      )
                    ],
                    6
                    /* CLASS, STYLE */
                  );
                }),
                128
                /* KEYED_FRAGMENT */
              ))
            ],
            2
            /* CLASS */
          )
        ],
        2
        /* CLASS */
      )
    ]);
  }
  const __easycom_2$a = /* @__PURE__ */ _export_sfc(_sfc_main$1Y, [["render", _sfc_render$1X], ["__scopeId", "data-v-c0a11c53"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/uni_modules/uni-steps/components/uni-steps/uni-steps.vue"]]);
  const _sfc_main$1X = {
    name: "UniRate",
    props: {
      isFill: {
        // 星星的类型，是否镂空
        type: [Boolean, String],
        default: true
      },
      color: {
        // 星星未选中的颜色
        type: String,
        default: "#ececec"
      },
      activeColor: {
        // 星星选中状态颜色
        type: String,
        default: "#ffca3e"
      },
      disabledColor: {
        // 星星禁用状态颜色
        type: String,
        default: "#c0c0c0"
      },
      size: {
        // 星星的大小
        type: [Number, String],
        default: 24
      },
      value: {
        // 当前评分
        type: [Number, String],
        default: 0
      },
      modelValue: {
        // 当前评分
        type: [Number, String],
        default: 0
      },
      max: {
        // 最大评分
        type: [Number, String],
        default: 5
      },
      margin: {
        // 星星的间距
        type: [Number, String],
        default: 0
      },
      disabled: {
        // 是否可点击
        type: [Boolean, String],
        default: false
      },
      readonly: {
        // 是否只读
        type: [Boolean, String],
        default: false
      },
      allowHalf: {
        // 是否显示半星
        type: [Boolean, String],
        default: false
      },
      touchable: {
        // 是否支持滑动手势
        type: [Boolean, String],
        default: true
      }
    },
    data() {
      return {
        valueSync: "",
        userMouseFristMove: true,
        userRated: false,
        userLastRate: 1
      };
    },
    watch: {
      value(newVal) {
        this.valueSync = Number(newVal);
      },
      modelValue(newVal) {
        this.valueSync = Number(newVal);
      }
    },
    computed: {
      stars() {
        const value = this.valueSync ? this.valueSync : 0;
        const starList = [];
        const floorValue = Math.floor(value);
        const ceilValue = Math.ceil(value);
        for (let i2 = 0; i2 < this.max; i2++) {
          if (floorValue > i2) {
            starList.push({
              activeWitch: "100%"
            });
          } else if (ceilValue - 1 === i2) {
            starList.push({
              activeWitch: (value - floorValue) * 100 + "%"
            });
          } else {
            starList.push({
              activeWitch: "0"
            });
          }
        }
        return starList;
      },
      marginNumber() {
        return Number(this.margin);
      }
    },
    created() {
      this.valueSync = Number(this.value || this.modelValue);
      this._rateBoxLeft = 0;
      this._oldValue = null;
    },
    mounted() {
      setTimeout(() => {
        this._getSize();
      }, 100);
    },
    methods: {
      touchstart(e2) {
        if (this.readonly || this.disabled)
          return;
        const {
          clientX,
          screenX
        } = e2.changedTouches[0];
        this._getRateCount(clientX || screenX);
      },
      touchmove(e2) {
        if (this.readonly || this.disabled || !this.touchable)
          return;
        const {
          clientX,
          screenX
        } = e2.changedTouches[0];
        this._getRateCount(clientX || screenX);
      },
      /**
       * 兼容 PC @tian
       */
      mousedown(e2) {
      },
      mousemove(e2) {
      },
      mouseleave(e2) {
      },
      /**
       * 获取星星个数
       */
      _getRateCount(clientX) {
        this._getSize();
        const size = Number(this.size);
        if (isNaN(size)) {
          return new Error("size 属性只能设置为数字");
        }
        const rateMoveRange = clientX - this._rateBoxLeft;
        let index = parseInt(rateMoveRange / (size + this.marginNumber));
        index = index < 0 ? 0 : index;
        index = index > this.max ? this.max : index;
        const range2 = parseInt(rateMoveRange - (size + this.marginNumber) * index);
        let value = 0;
        if (this._oldValue === index && !this.PC)
          return;
        this._oldValue = index;
        if (this.allowHalf) {
          if (range2 > size / 2) {
            value = index + 1;
          } else {
            value = index + 0.5;
          }
        } else {
          value = index + 1;
        }
        value = Math.max(0.5, Math.min(value, this.max));
        this.valueSync = value;
        this._onChange();
      },
      /**
       * 触发动态修改
       */
      _onChange() {
        this.$emit("input", this.valueSync);
        this.$emit("update:modelValue", this.valueSync);
        this.$emit("change", {
          value: this.valueSync
        });
      },
      /**
       * 获取星星距离屏幕左侧距离
       */
      _getSize() {
        uni.createSelectorQuery().in(this).select(".uni-rate").boundingClientRect().exec((ret) => {
          if (ret) {
            this._rateBoxLeft = ret[0].left;
          }
        });
      }
    }
  };
  function _sfc_render$1W(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    return vue.openBlock(), vue.createElementBlock("view", null, [
      vue.createElementVNode(
        "view",
        {
          ref: "uni-rate",
          class: "uni-rate"
        },
        [
          (vue.openBlock(true), vue.createElementBlock(
            vue.Fragment,
            null,
            vue.renderList($options.stars, (star, index) => {
              return vue.openBlock(), vue.createElementBlock(
                "view",
                {
                  class: vue.normalizeClass(["uni-rate__icon", { "uni-cursor-not-allowed": $props.disabled }]),
                  style: vue.normalizeStyle({ "margin-right": $options.marginNumber + "px" }),
                  key: index,
                  onTouchstart: _cache[0] || (_cache[0] = vue.withModifiers((...args) => $options.touchstart && $options.touchstart(...args), ["stop"])),
                  onTouchmove: _cache[1] || (_cache[1] = vue.withModifiers((...args) => $options.touchmove && $options.touchmove(...args), ["stop"])),
                  onMousedown: _cache[2] || (_cache[2] = vue.withModifiers((...args) => $options.mousedown && $options.mousedown(...args), ["stop"])),
                  onMousemove: _cache[3] || (_cache[3] = vue.withModifiers((...args) => $options.mousemove && $options.mousemove(...args), ["stop"])),
                  onMouseleave: _cache[4] || (_cache[4] = (...args) => $options.mouseleave && $options.mouseleave(...args))
                },
                [
                  vue.createVNode(_component_uni_icons, {
                    color: $props.color,
                    size: $props.size,
                    type: $props.isFill ? "star-filled" : "star"
                  }, null, 8, ["color", "size", "type"]),
                  vue.createElementVNode(
                    "view",
                    {
                      style: vue.normalizeStyle({ width: star.activeWitch }),
                      class: "uni-rate__icon-on"
                    },
                    [
                      vue.createVNode(_component_uni_icons, {
                        color: $props.disabled ? $props.disabledColor : $props.activeColor,
                        size: $props.size,
                        type: "star-filled"
                      }, null, 8, ["color", "size"])
                    ],
                    4
                    /* STYLE */
                  )
                ],
                38
                /* CLASS, STYLE, NEED_HYDRATION */
              );
            }),
            128
            /* KEYED_FRAGMENT */
          ))
        ],
        512
        /* NEED_PATCH */
      )
    ]);
  }
  const __easycom_2$9 = /* @__PURE__ */ _export_sfc(_sfc_main$1X, [["render", _sfc_render$1W], ["__scopeId", "data-v-5c8fbdf3"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/uni_modules/uni-rate/components/uni-rate/uni-rate.vue"]]);
  const _sfc_main$1W = {
    data() {
      return {
        // 是否隐藏多余行。初始状态不隐藏
        isHide: true,
        // 全量所占文本高度
        textHeight: 0,
        // 单行文本所占高度
        lineHeight: 1,
        // 占位文本
        placeholder: ""
      };
    },
    props: {
      // 展示多少行
      line: {
        type: [Number, String],
        default: 1
      },
      // 文本
      dt: {
        type: [String],
        default: ""
      },
      enableButton: {
        type: Boolean,
        default: true
      },
      // 自定义展开提示
      expandText: {
        type: String,
        default: "展开"
      },
      // 自定义收起提示
      foldHint: {
        type: String,
        default: "收起"
      }
    },
    watch: {
      dt() {
        let that = this;
        setTimeout(() => {
          let query = uni.createSelectorQuery().in(that);
          query.select(".content").boundingClientRect((data) => {
            that.textHeight = data.height;
          }).exec();
        }, 100);
      }
    },
    mounted() {
      if (this.enableButton) {
        let query = uni.createSelectorQuery().in(this);
        query.select(".content").boundingClientRect((data) => {
          this.textHeight = data.height;
        }).exec();
        query.select(".placeholder").boundingClientRect((data) => {
          this.lineHeight = data.height;
        }).exec();
      }
      this.placeholder = "";
    },
    computed: {
      // 全文本所占总行数
      lines() {
        if (!this.enableButton) {
          return this.line;
        }
        return Math.floor(this.textHeight > 0 && this.lineHeight > 0 ? this.textHeight / this.lineHeight : 0);
      }
    }
  };
  function _sfc_render$1V(_ctx, _cache, $props, $setup, $data, $options) {
    return vue.openBlock(), vue.createElementBlock("view", null, [
      $data.isHide ? (vue.openBlock(), vue.createElementBlock("view", {
        key: 0,
        style: { "position": "relative" }
      }, [
        vue.createElementVNode(
          "view",
          {
            class: "dt-content",
            style: vue.normalizeStyle("-webkit-line-clamp:" + $props.line)
          },
          [
            vue.createElementVNode("text", { class: "content" }, [
              vue.renderSlot(_ctx.$slots, "default", {}, () => [
                vue.createTextVNode(
                  vue.toDisplayString($props.dt ? $props.dt : ""),
                  1
                  /* TEXT */
                )
              ], true)
            ])
          ],
          4
          /* STYLE */
        ),
        $props.enableButton && $options.lines > $props.line ? (vue.openBlock(), vue.createElementBlock("view", {
          key: 0,
          class: "button-show",
          onClick: _cache[0] || (_cache[0] = ($event) => $data.isHide = false)
        }, [
          vue.createElementVNode(
            "text",
            { style: { "color": "#35CA95" } },
            vue.toDisplayString($props.expandText),
            1
            /* TEXT */
          )
        ])) : vue.createCommentVNode("v-if", true)
      ])) : (vue.openBlock(), vue.createElementBlock("view", { key: 1 }, [
        vue.createElementVNode("view", null, [
          vue.createElementVNode("text", { class: "content" }, [
            vue.renderSlot(_ctx.$slots, "default", {}, () => [
              vue.createTextVNode(
                vue.toDisplayString($props.dt ? $props.dt : ""),
                1
                /* TEXT */
              )
            ], true)
          ])
        ]),
        $props.foldHint ? (vue.openBlock(), vue.createElementBlock("view", {
          key: 0,
          class: "fold-hint"
        }, [
          vue.createElementVNode(
            "view",
            {
              onClick: _cache[1] || (_cache[1] = ($event) => $data.isHide = true)
            },
            vue.toDisplayString($props.foldHint),
            1
            /* TEXT */
          )
        ])) : vue.createCommentVNode("v-if", true)
      ])),
      vue.createElementVNode("view", null, [
        vue.createElementVNode(
          "text",
          { class: "placeholder" },
          vue.toDisplayString($data.placeholder),
          1
          /* TEXT */
        )
      ])
    ]);
  }
  const MoteLinesDivide = /* @__PURE__ */ _export_sfc(_sfc_main$1W, [["render", _sfc_render$1V], ["__scopeId", "data-v-8964ac41"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/components/mote-lines-divide/mote-lines-divide.vue"]]);
  const _imports_0$p = "/static/common/back_circle.png";
  const _imports_0$o = "/static/confide/share.png";
  const _imports_2$7 = "/static/common/share_circle.png";
  const _imports_3$5 = "/static/common/yellow-follow.png";
  const _imports_4$5 = "/static/common/follwer-yellow.png";
  const _imports_5$2 = "/static/common/voice.png";
  const _imports_6$1 = "/static/common/message.png";
  const _imports_0$n = "/static/my/profile.png";
  const _sfc_main$1V = {
    __name: "detail",
    setup(__props, { expose: __expose }) {
      __expose();
      vue.useCssVars((_ctx) => ({
        "0094f2d4-statusBarHeight": statusBarHeight.value
      }));
      const globalStore = useGlobalDataStore();
      const statusBarHeight = vue.ref(globalStore.statusBarHeight + "px");
      const scrollTop = vue.ref(0);
      const tabIndex = vue.ref(0);
      const fixedActive = vue.ref(false);
      const listenerInfo = vue.ref({
        masterGallery: "[]",
        name: "",
        occupationName: "",
        address: "",
        birthdate: "",
        constellation: "",
        signature: "",
        profile: "",
        certificateList: [],
        educationList: [],
        serviceTypes: [],
        careerList: [],
        id: "",
        userId: "",
        avatar: ""
      });
      const maxHeight = vue.ref("832rpx");
      const instance = vue.getCurrentInstance();
      const top = vue.ref(0);
      const scrollToTargetInScroll = async (targetId) => {
        await vue.nextTick();
        const query = uni.createSelectorQuery().in(instance);
        query.select(`#${targetId}`).boundingClientRect().select(`#scrollView`).boundingClientRect().exec((res2) => {
          const targetRect = res2[0];
          const scrollViewRect = res2[1];
          if (targetRect && scrollViewRect) {
            top.value = targetRect.top - scrollViewRect.top;
          }
        });
      };
      const userIds = vue.ref("");
      onLoad((options) => {
        userIds.value = options.userId;
        consultInfo(options.id);
        getListenerInfo(options.userId);
        getCommentByTargetUserIdApi(options.userId);
      });
      const more = () => {
        maxHeight.value = "none";
      };
      const backFn = () => {
        uni.navigateBack({
          delta: 1
        });
      };
      const shareFn = () => {
        formatAppLog("log", "at pages/confide/detail.vue:448", "点击关注/分享");
      };
      const tabsList = vue.ref([
        {
          label: "服务",
          id: "tab-1",
          class: "tab6"
        },
        {
          label: "介绍",
          id: "tab-2",
          class: "tab7"
        },
        {
          label: "经历",
          id: "tab-3",
          class: "tab8"
        },
        {
          label: "擅长",
          id: "tab-4",
          class: "tab9"
        },
        {
          label: `评价(0)`,
          id: "tab-5",
          class: "tab10"
        }
      ]);
      const stepList = vue.ref([]);
      const evaluationList = vue.ref({
        total: 0,
        records: []
      });
      const getCommentByTargetUserIdApi = async (id2) => {
        try {
          let { data } = await getCommentByTargetUserId({ targetUserId: id2, page: 1, pageSize: 10 });
          evaluationList.value = data || { total: 0, records: [] };
          tabsList.value[4].label = `评价(${evaluationList.value.total || 0})`;
        } catch (e2) {
          formatAppLog("error", "at pages/confide/detail.vue:491", "获取评价列表失败：", e2);
          evaluationList.value = { total: 0, records: [] };
          tabsList.value[4].label = `评价(0)`;
        }
      };
      const stepActive = vue.ref(0);
      const openEvaluate = () => {
        uni.navigateTo({
          url: `/pages/evaluate/evaluate?userId=${userIds.value}`
        });
      };
      const getListenerInfo = async (userId) => {
        var _a;
        try {
          let res2 = await getListenerById({
            userId
          });
          listenerInfo.value = { ...listenerInfo.value, ...res2.data || {} };
          formatAppLog("log", "at pages/confide/detail.vue:514", res2.data);
          stepList.value = handleCareerList(((_a = listenerInfo.value) == null ? void 0 : _a.careerList) || []);
          stepActive.value = stepList.value.length;
        } catch (e2) {
          formatAppLog("error", "at pages/confide/detail.vue:520", "获取倾听师信息失败：", e2);
          listenerInfo.value = {
            masterGallery: "[]",
            name: "",
            occupationName: "",
            address: "",
            birthdate: "",
            constellation: "",
            signature: "",
            profile: "",
            certificateList: [],
            educationList: [],
            serviceTypes: [],
            careerList: [],
            id: "",
            userId: "",
            avatar: ""
          };
          stepList.value = [];
          stepActive.value = 0;
        }
      };
      const service = vue.ref({});
      const expData = vue.ref({
        retainedCustomers: 0,
        listenHours: 0,
        rating: 0
      });
      const consultInfo = async (id2) => {
        try {
          const info = await getCommentInfo({ id: id2 });
          const list = await getCommentList({ id: id2, page: 1, count: 10 });
          const exp = await getServiceExperience({ id: id2 });
          service.value = info.data || {};
          expData.value = exp.data || { retainedCustomers: 0, listenHours: 0, rating: 0 };
          formatAppLog("log", "at pages/confide/detail.vue:557", info, list, exp, "info");
        } catch (e2) {
          formatAppLog("error", "at pages/confide/detail.vue:559", "获取咨询信息失败：", e2);
          service.value = {};
          expData.value = { retainedCustomers: 0, listenHours: 0, rating: 0 };
        }
      };
      const openReservation = () => {
        const { userId, name, avatar, id: id2 } = listenerInfo.value || {};
        if (!userId)
          return uni.showToast({ title: "数据加载中，请稍后", icon: "none" });
        uni.navigateTo({
          url: `/pages/payment/payment-records?id=${id2}&userId=${userId}&name=${name}&avatar=${avatar}`
        });
      };
      const toChat = () => {
        const { userId, name, avatar } = listenerInfo.value || {};
        if (!userId)
          return uni.showToast({ title: "数据加载中，请稍后", icon: "none" });
        uni.navigateTo({
          url: `/pages/message/private-chat?to=${userId}&name=${name}&avatar=${avatar}`
        });
      };
      const handleTagStr = (tagStr) => {
        return (tagStr ?? "").trim().split(",").filter((tag) => tag.trim());
      };
      const onScroll = (e2) => {
        scrollTop.value = e2.detail.scrollTop;
      };
      const __returned__ = { globalStore, statusBarHeight, scrollTop, tabIndex, fixedActive, listenerInfo, maxHeight, instance, top, scrollToTargetInScroll, userIds, more, backFn, shareFn, tabsList, stepList, evaluationList, getCommentByTargetUserIdApi, stepActive, openEvaluate, getListenerInfo, service, expData, consultInfo, openReservation, toChat, handleTagStr, onScroll, ref: vue.ref, nextTick: vue.nextTick, onMounted: vue.onMounted, getCurrentInstance: vue.getCurrentInstance, get onLoad() {
        return onLoad;
      }, get useGlobalDataStore() {
        return useGlobalDataStore;
      }, get handleCareerList() {
        return handleCareerList;
      }, get getCityFromAddress() {
        return getCityFromAddress;
      }, get getGenerationByBirthdate() {
        return getGenerationByBirthdate;
      }, get getCommentByTargetUserId() {
        return getCommentByTargetUserId;
      }, get getListenerById() {
        return getListenerById;
      }, get getCommentInfo() {
        return getCommentInfo;
      }, get getCommentList() {
        return getCommentList;
      }, get getServiceExperience() {
        return getServiceExperience;
      }, get MoteLinesDivide() {
        return MoteLinesDivide;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$1U(_ctx, _cache, $props, $setup, $data, $options) {
    var _a, _b, _c, _d, _e2, _f, _g, _h, _i, _j, _k, _l, _m, _n, _o, _p, _q, _r, _s2, _t2, _u, _v;
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    const _component_uni_nav_bar = resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"), __easycom_1$4);
    const _component_uni_steps = resolveEasycom(vue.resolveDynamicComponent("uni-steps"), __easycom_2$a);
    const _component_uni_rate = resolveEasycom(vue.resolveDynamicComponent("uni-rate"), __easycom_2$9);
    return vue.openBlock(), vue.createElementBlock("view", { class: "consult-detail-box" }, [
      vue.createElementVNode("scroll-view", {
        "scroll-y": "",
        class: "scroll-content",
        "scroll-top": $setup.top,
        "show-scrollbar": false,
        "scroll-with-animation": "",
        id: "scrollView",
        onScroll: $setup.onScroll
      }, [
        vue.createVNode(_component_uni_nav_bar, {
          backgroundColor: $setup.scrollTop > 15 ? "#fff" : "transparent",
          border: false,
          title: $setup.scrollTop > 15 ? $setup.listenerInfo.name : "",
          class: "header-bar",
          statusBar: true,
          fixed: ""
        }, {
          left: vue.withCtx(() => {
            var _a2, _b2, _c2, _d2;
            return [
              vue.createElementVNode("view", { class: "right" }, [
                $setup.scrollTop > 15 ? (vue.openBlock(), vue.createElementBlock("view", {
                  key: 0,
                  class: "nav-right"
                }, [
                  vue.createVNode(_component_uni_icons, {
                    type: "left",
                    size: "24",
                    onClick: $setup.backFn
                  }),
                  vue.createElementVNode("view", { class: "line" }, [
                    vue.createElementVNode("img", {
                      src: (_b2 = JSON.parse(((_a2 = $setup.listenerInfo) == null ? void 0 : _a2.masterGallery) || "[]")[0]) == null ? void 0 : _b2.url
                    }, null, 8, ["src"]),
                    vue.createElementVNode("view", null, [
                      vue.createElementVNode(
                        "view",
                        { class: "line-name" },
                        vue.toDisplayString((_c2 = $setup.listenerInfo) == null ? void 0 : _c2.name),
                        1
                        /* TEXT */
                      ),
                      vue.createElementVNode(
                        "view",
                        { class: "line-job" },
                        vue.toDisplayString((_d2 = $setup.listenerInfo) == null ? void 0 : _d2.occupationName),
                        1
                        /* TEXT */
                      )
                    ])
                  ])
                ])) : (vue.openBlock(), vue.createElementBlock("image", {
                  key: 1,
                  onClick: $setup.backFn,
                  src: _imports_0$p,
                  style: { "width": "56rpx", "height": "56rpx" }
                }))
              ])
            ];
          }),
          right: vue.withCtx(() => [
            vue.createElementVNode("view", { class: "right" }, [
              $setup.scrollTop > 15 ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 0,
                class: "nav-right"
              }, [
                vue.createElementVNode("view", {
                  class: "share",
                  onClick: $setup.shareFn
                }, "+ 关注"),
                vue.createElementVNode("image", {
                  src: _imports_0$o,
                  style: { "width": "40rpx", "height": "40rpx" }
                })
              ])) : (vue.openBlock(), vue.createElementBlock("image", {
                key: 1,
                src: _imports_2$7,
                style: { "width": "56rpx", "height": "56rpx" }
              }))
            ])
          ]),
          _: 1
          /* STABLE */
        }, 8, ["backgroundColor", "title"]),
        vue.createElementVNode("view", { class: "consult-detail-content" }, [
          vue.createElementVNode("view", { class: "swiper-content" }, [
            vue.createElementVNode("view", { class: "uni-margin-wrap" }, [
              vue.createElementVNode("swiper", {
                class: "swiper",
                circular: "",
                "indicator-dots": true,
                autoplay: true,
                interval: 5e3,
                duration: 500
              }, [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList(JSON.parse(((_a = $setup.listenerInfo) == null ? void 0 : _a.masterGallery) || "[]"), (item, index) => {
                    return vue.openBlock(), vue.createElementBlock("swiper-item", {
                      key: index,
                      class: "swiper-item"
                    }, [
                      vue.createElementVNode("image", {
                        src: item.url,
                        mode: "aspectFill",
                        style: { "width": "100%", "height": "100%" }
                      }, null, 8, ["src"])
                    ]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                ))
              ])
            ])
          ]),
          vue.createElementVNode("view", { class: "consult-detail-info" }, [
            vue.createElementVNode("view", { class: "detail-item-line-1" }, [
              vue.createElementVNode("view", { class: "name" }, [
                vue.createElementVNode(
                  "text",
                  { class: "name-a" },
                  vue.toDisplayString((_b = $setup.listenerInfo) == null ? void 0 : _b.name),
                  1
                  /* TEXT */
                ),
                ((_c = $setup.listenerInfo) == null ? void 0 : _c.occupationName) ? (vue.openBlock(), vue.createElementBlock(
                  "text",
                  {
                    key: 0,
                    class: "name-b"
                  },
                  vue.toDisplayString((_d = $setup.listenerInfo) == null ? void 0 : _d.occupationName),
                  1
                  /* TEXT */
                )) : vue.createCommentVNode("v-if", true)
              ]),
              vue.createElementVNode("view", { class: "money" }, [
                vue.createElementVNode("image", {
                  src: _imports_3$5,
                  class: "img"
                }),
                vue.createElementVNode("text", { class: "txt" }, "关注")
              ])
            ]),
            vue.createElementVNode("view", { class: "detail-item-line-2" }, [
              vue.createElementVNode(
                "text",
                null,
                vue.toDisplayString($setup.getCityFromAddress((_e2 = $setup.listenerInfo) == null ? void 0 : _e2.address)) + " | " + vue.toDisplayString($setup.getGenerationByBirthdate((_f = $setup.listenerInfo) == null ? void 0 : _f.birthdate)) + " | " + vue.toDisplayString((_g = $setup.listenerInfo) == null ? void 0 : _g.constellation),
                1
                /* TEXT */
              )
            ]),
            vue.createElementVNode(
              "view",
              { class: "detail-item-line-3" },
              vue.toDisplayString((_h = $setup.listenerInfo) == null ? void 0 : _h.signature),
              1
              /* TEXT */
            ),
            vue.createElementVNode("view", { class: "detail-item-line-4" }, [
              vue.createElementVNode("view", { class: "content" }, [
                vue.createElementVNode("view", { class: "list" }, [
                  vue.createElementVNode("view", { class: "item" }, [
                    vue.createElementVNode("view", null, [
                      vue.createElementVNode(
                        "text",
                        { class: "num" },
                        vue.toDisplayString(((_i = $setup.expData) == null ? void 0 : _i.retainedCustomers) || 0),
                        1
                        /* TEXT */
                      ),
                      vue.createElementVNode("text", { class: "unit" }, "次")
                    ]),
                    vue.createElementVNode("view", { class: "txt" }, "服务人次")
                  ]),
                  vue.createElementVNode("view", { class: "item" }, [
                    vue.createElementVNode("view", null, [
                      vue.createElementVNode(
                        "text",
                        { class: "num" },
                        vue.toDisplayString(((_j = $setup.expData) == null ? void 0 : _j.listenHours) || 0),
                        1
                        /* TEXT */
                      ),
                      vue.createElementVNode("text", { class: "unit" }, "小时")
                    ]),
                    vue.createElementVNode("view", { class: "txt" }, "倾听时长")
                  ]),
                  vue.createElementVNode("view", { class: "item" }, [
                    vue.createElementVNode("view", null, [
                      vue.createElementVNode(
                        "text",
                        { class: "num" },
                        vue.toDisplayString(((_k = $setup.expData) == null ? void 0 : _k.retainedCustomers) || 0),
                        1
                        /* TEXT */
                      ),
                      vue.createElementVNode("text", { class: "unit" }, "次")
                    ]),
                    vue.createElementVNode("view", { class: "txt" }, "回头客")
                  ]),
                  vue.createElementVNode("view", { class: "item" }, [
                    vue.createElementVNode("view", null, [
                      vue.createElementVNode(
                        "text",
                        { class: "num" },
                        vue.toDisplayString(((_l = $setup.expData) == null ? void 0 : _l.rating) || 0),
                        1
                        /* TEXT */
                      ),
                      vue.createElementVNode("text", { class: "unit" }, "分")
                    ]),
                    vue.createElementVNode("view", { class: "txt" }, "综合评分")
                  ])
                ]),
                vue.createElementVNode("view", { class: "tips" }, [
                  vue.createElementVNode("image", { src: _imports_4$5 }),
                  vue.createElementVNode("text", { class: "txt" }, "服务经验")
                ])
              ])
            ]),
            vue.createElementVNode(
              "view",
              {
                class: vue.normalizeClass(["detail-item-line-5", $setup.fixedActive ? "tabsFixed" : ""]),
                id: "tabs"
              },
              [
                vue.createElementVNode("view", { class: "tabs" }, [
                  (vue.openBlock(true), vue.createElementBlock(
                    vue.Fragment,
                    null,
                    vue.renderList($setup.tabsList, (item, index) => {
                      return vue.openBlock(), vue.createElementBlock("view", {
                        class: vue.normalizeClass(["tab-item", $setup.tabIndex == index ? "active" : ""]),
                        key: index,
                        onClick: ($event) => $setup.scrollToTargetInScroll(`tab-${index + 1}`)
                      }, vue.toDisplayString(item.label), 11, ["onClick"]);
                    }),
                    128
                    /* KEYED_FRAGMENT */
                  ))
                ])
              ],
              2
              /* CLASS */
            ),
            vue.createElementVNode("view", {
              class: "detail-item-line-6 tab5",
              id: "tab-1"
            }, [
              vue.createElementVNode("view", { class: "tab5-content" }, [
                vue.createElementVNode("view", { class: "info" }, [
                  vue.createElementVNode("view", { class: "voice-box" }, [
                    vue.createElementVNode("view", { class: "voice-info" }, [
                      vue.createElementVNode("view", { class: "title" }, [
                        vue.createTextVNode("语音咨询"),
                        vue.createElementVNode("text", { class: "money" }, "250"),
                        vue.createElementVNode("text", { class: "unit" }, "元/50分钟")
                      ]),
                      vue.createElementVNode("view", { class: "txt" }, "仅提供语音消息，咨询效果有一定影响")
                    ]),
                    vue.createElementVNode("view", { class: "voice-img" }, [
                      vue.createElementVNode("image", {
                        src: _imports_5$2,
                        class: "img"
                      })
                    ])
                  ]),
                  vue.createElementVNode("view", { class: "voice-box text-box" }, [
                    vue.createElementVNode("view", { class: "voice-info" }, [
                      vue.createElementVNode("view", { class: "title" }, [
                        vue.createTextVNode("文字咨询"),
                        vue.createElementVNode("text", { class: "money" }, "250"),
                        vue.createElementVNode("text", { class: "unit" }, "元/50分钟")
                      ]),
                      vue.createElementVNode("view", { class: "txt" }, "擅长个人成长、情绪管理")
                    ]),
                    vue.createElementVNode("view", { class: "voice-img" }, [
                      vue.createElementVNode("image", {
                        src: _imports_6$1,
                        class: "img"
                      })
                    ])
                  ])
                ])
              ])
            ]),
            vue.createElementVNode("view", {
              class: "detail-item-line-6",
              id: "tab-2"
            }, [
              vue.createElementVNode("view", { class: "content" }, [
                vue.createElementVNode("view", { class: "title" }, "个人介绍"),
                vue.createElementVNode(
                  "view",
                  { class: "info" },
                  vue.toDisplayString((_m = $setup.listenerInfo) == null ? void 0 : _m.profile),
                  1
                  /* TEXT */
                )
              ])
            ]),
            vue.createElementVNode("view", {
              class: "detail-item-line-6 detail-item-line-8",
              id: "tab-3"
            }, [
              vue.createElementVNode("view", { class: "content" }, [
                vue.createElementVNode(
                  "view",
                  {
                    class: "info",
                    style: vue.normalizeStyle({ "max-height": $setup.maxHeight, overflow: "hidden" })
                  },
                  [
                    ((_n = $setup.listenerInfo) == null ? void 0 : _n.certificateList) && $setup.listenerInfo.certificateList.length ? (vue.openBlock(true), vue.createElementBlock(
                      vue.Fragment,
                      { key: 0 },
                      vue.renderList($setup.listenerInfo.certificateList, (item, index) => {
                        return vue.openBlock(), vue.createElementBlock("view", {
                          class: "certificate-detail",
                          key: index
                        }, [
                          vue.createElementVNode("view", { class: "tag" }, "资质"),
                          vue.createElementVNode("view", { class: "tag-info" }, [
                            vue.createElementVNode(
                              "view",
                              { class: "tag-title" },
                              vue.toDisplayString(item.name),
                              1
                              /* TEXT */
                            ),
                            vue.createElementVNode("view", { class: "certificate-info" }, [
                              vue.createElementVNode(
                                "view",
                                null,
                                "发证时间：" + vue.toDisplayString(item.date),
                                1
                                /* TEXT */
                              ),
                              vue.createElementVNode(
                                "view",
                                null,
                                "证书编号：" + vue.toDisplayString(item.number),
                                1
                                /* TEXT */
                              )
                            ])
                          ])
                        ]);
                      }),
                      128
                      /* KEYED_FRAGMENT */
                    )) : vue.createCommentVNode("v-if", true),
                    ((_o = $setup.listenerInfo) == null ? void 0 : _o.educationList) && $setup.listenerInfo.educationList.length ? (vue.openBlock(true), vue.createElementBlock(
                      vue.Fragment,
                      { key: 1 },
                      vue.renderList($setup.listenerInfo.educationList, (item, index) => {
                        return vue.openBlock(), vue.createElementBlock("view", {
                          class: "eduication-detail",
                          key: index
                        }, [
                          vue.createElementVNode("view", { class: "tag" }, "学历"),
                          vue.createElementVNode("view", { class: "tag-info" }, [
                            vue.createElementVNode(
                              "view",
                              { class: "tag-title" },
                              vue.toDisplayString(item.schoolName),
                              1
                              /* TEXT */
                            ),
                            vue.createElementVNode("view", { class: "eduication-info" }, [
                              vue.createElementVNode("view"),
                              vue.createElementVNode(
                                "view",
                                null,
                                "发证时间：" + vue.toDisplayString(item.startTime),
                                1
                                /* TEXT */
                              ),
                              vue.createElementVNode(
                                "view",
                                null,
                                "证书编号：" + vue.toDisplayString(item.code),
                                1
                                /* TEXT */
                              )
                            ])
                          ])
                        ]);
                      }),
                      128
                      /* KEYED_FRAGMENT */
                    )) : vue.createCommentVNode("v-if", true),
                    vue.createElementVNode("view", { class: "step-detail" }, [
                      vue.createElementVNode("view", { class: "training" }, [
                        vue.createElementVNode("view", { class: "training-title" }, "伦理培训"),
                        vue.createElementVNode(
                          "view",
                          { class: "training-timer" },
                          vue.toDisplayString((_p = $setup.stepList) == null ? void 0 : _p.length) + "项培训，累计40小时",
                          1
                          /* TEXT */
                        )
                      ]),
                      vue.createElementVNode("view", { class: "step-box" }, [
                        vue.createVNode(_component_uni_steps, {
                          options: $setup.stepList,
                          "active-color": "#EB9516",
                          active: $setup.stepActive,
                          direction: "column"
                        }, null, 8, ["options", "active"])
                      ])
                    ])
                  ],
                  4
                  /* STYLE */
                ),
                vue.createElementVNode("view", {
                  class: "more",
                  onClick: $setup.more,
                  style: { "background-color": "#fff !important" }
                }, "查看更多")
              ])
            ]),
            vue.createElementVNode("view", {
              class: "detail-item-line-6 detail-item-line-7",
              id: "tab-4"
            }, [
              vue.createElementVNode("view", { class: "content" }, [
                vue.createElementVNode("view", { class: "title" }, "擅长领域"),
                vue.createElementVNode("view", { class: "info" }, [
                  (vue.openBlock(true), vue.createElementBlock(
                    vue.Fragment,
                    null,
                    vue.renderList(((_q = $setup.listenerInfo) == null ? void 0 : _q.serviceTypes) || [], (item, index) => {
                      return vue.openBlock(), vue.createElementBlock("view", {
                        style: { "display": "flex", "flex-direction": "row" },
                        key: index
                      }, [
                        vue.createTextVNode(
                          vue.toDisplayString(item) + " ",
                          1
                          /* TEXT */
                        ),
                        vue.createElementVNode("view", { class: "detail-title" }),
                        vue.createElementVNode("view", { class: "detail-content" }, "沟通不畅、社交恐惧、社交技巧、人际冲突、不合群、人际边界、社会适应难、信任危机、设有关系")
                      ]);
                    }),
                    128
                    /* KEYED_FRAGMENT */
                  )),
                  (vue.openBlock(true), vue.createElementBlock(
                    vue.Fragment,
                    null,
                    vue.renderList(((_r = $setup.listenerInfo) == null ? void 0 : _r.serviceTypes) || [], (item, index) => {
                      return vue.openBlock(), vue.createElementBlock(
                        "text",
                        {
                          style: { "padding": "5rpx 15rpx", "background-color": "bisque", "border-radius": "8rpx", "margin-right": "10rpx", "margin-bottom": "10rpx" },
                          key: index
                        },
                        vue.toDisplayString(item),
                        1
                        /* TEXT */
                      );
                    }),
                    128
                    /* KEYED_FRAGMENT */
                  ))
                ]),
                vue.createElementVNode("view", null, [
                  vue.createElementVNode("view", { class: "title" }, "擅长疗法"),
                  vue.createElementVNode("view", { class: "tags" }, [
                    vue.createElementVNode("text", { class: "tag-item" }, "沙盘疗法"),
                    vue.createElementVNode("text", { class: "tag-item" }, "心理动力取向")
                  ])
                ])
              ])
            ]),
            vue.createElementVNode("view", {
              class: "detail-item-line-6 detail-item-line-9",
              id: "tab-5"
            }, [
              vue.createElementVNode("view", { class: "content" }, [
                vue.createElementVNode("view", { class: "title" }, [
                  vue.createElementVNode("view", { class: "txt" }, [
                    vue.createTextVNode("评价"),
                    vue.createElementVNode(
                      "text",
                      null,
                      "(" + vue.toDisplayString(((_s2 = $setup.evaluationList) == null ? void 0 : _s2.total) || 0) + ")",
                      1
                      /* TEXT */
                    )
                  ]),
                  vue.createElementVNode("view", {
                    class: "more",
                    onClick: $setup.openEvaluate
                  }, [
                    vue.createTextVNode("查看更多真实评价"),
                    vue.createVNode(_component_uni_icons, {
                      type: "right",
                      size: "12",
                      color: "rgba(0, 0, 0, 0.5)"
                    })
                  ])
                ]),
                vue.createElementVNode("view", { class: "info" }, [
                  vue.createElementVNode("view", { class: "feel-type-box" }, [
                    vue.createElementVNode("view", { class: "first" }, [
                      vue.createElementVNode("view", { class: "percent" }, [
                        vue.createTextVNode("99"),
                        vue.createElementVNode("text", { class: "txt" }, "%好评率")
                      ])
                    ]),
                    vue.createElementVNode("view", { class: "second" }, [
                      vue.createElementVNode("view", { class: "second-item" }, [
                        vue.createElementVNode("text", { class: "txt-1" }, "真实评价"),
                        vue.createElementVNode(
                          "text",
                          { class: "txt-2" },
                          vue.toDisplayString(((_t2 = $setup.evaluationList) == null ? void 0 : _t2.total) || 0) + "条",
                          1
                          /* TEXT */
                        )
                      ]),
                      vue.createElementVNode("view", { class: "second-item" }, [
                        vue.createElementVNode("text", { class: "txt-1" }, "用户推荐"),
                        vue.createElementVNode("text", { class: "txt-2" }, "100%")
                      ])
                    ])
                  ]),
                  vue.createElementVNode("view", { class: "comment-list" }, [
                    ((_v = (_u = $setup.evaluationList) == null ? void 0 : _u.records) == null ? void 0 : _v.length) ? (vue.openBlock(), vue.createElementBlock("view", { key: 0 }, [
                      (vue.openBlock(true), vue.createElementBlock(
                        vue.Fragment,
                        null,
                        vue.renderList($setup.evaluationList.records.slice(0, 3), (item, index) => {
                          return vue.openBlock(), vue.createElementBlock("view", {
                            class: "comment-item",
                            key: item.id
                          }, [
                            vue.createElementVNode("view", { class: "user-box" }, [
                              vue.createElementVNode("view", { class: "user-info" }, [
                                vue.createElementVNode("image", {
                                  src: _imports_0$n,
                                  class: "img"
                                }),
                                vue.createElementVNode(
                                  "text",
                                  { class: "txt" },
                                  vue.toDisplayString(item.nickname),
                                  1
                                  /* TEXT */
                                )
                              ]),
                              vue.createElementVNode("view", { class: "star" }, [
                                vue.createVNode(_component_uni_rate, {
                                  disabled: true,
                                  disabledColor: "#FFC300",
                                  value: item.star,
                                  size: "12"
                                }, null, 8, ["value"])
                              ])
                            ]),
                            vue.createElementVNode("view", { class: "comment-content" }, [
                              vue.createVNode(
                                $setup["MoteLinesDivide"],
                                {
                                  line: 3,
                                  expandText: "展开",
                                  foldHint: "收起"
                                },
                                {
                                  default: vue.withCtx(() => [
                                    vue.createTextVNode(
                                      vue.toDisplayString(item.content),
                                      1
                                      /* TEXT */
                                    )
                                  ]),
                                  _: 2
                                  /* DYNAMIC */
                                },
                                1024
                                /* DYNAMIC_SLOTS */
                              )
                            ]),
                            (vue.openBlock(true), vue.createElementBlock(
                              vue.Fragment,
                              null,
                              vue.renderList($setup.handleTagStr(item.tags), (tag, index2) => {
                                return vue.openBlock(), vue.createElementBlock("view", {
                                  class: "tags",
                                  key: index2
                                }, [
                                  vue.createElementVNode(
                                    "text",
                                    { class: "tag-item" },
                                    vue.toDisplayString(tag),
                                    1
                                    /* TEXT */
                                  )
                                ]);
                              }),
                              128
                              /* KEYED_FRAGMENT */
                            )),
                            vue.createElementVNode("view", { class: "theme-date" }, [
                              vue.createElementVNode("view", { class: "theme" }, [
                                vue.createTextVNode(" 咨询主题："),
                                vue.createElementVNode("text", { class: "txt" }, "心理压抑")
                              ]),
                              vue.createElementVNode(
                                "view",
                                { class: "date" },
                                vue.toDisplayString(item.createTime),
                                1
                                /* TEXT */
                              )
                            ])
                          ]);
                        }),
                        128
                        /* KEYED_FRAGMENT */
                      ))
                    ])) : (vue.openBlock(), vue.createElementBlock("view", {
                      key: 1,
                      style: { "margin-top": "10rpx", "text-align": "center" }
                    }, "暂无咨询感受"))
                  ])
                ])
              ])
            ])
          ])
        ])
      ], 40, ["scroll-top"]),
      vue.createElementVNode("view", { class: "footer" }, [
        vue.createElementVNode("view", {
          class: "message",
          onClick: $setup.toChat
        }, " 私信ta "),
        vue.createElementVNode("view", {
          class: "reservation",
          onClick: $setup.openReservation
        }, " 立即咨询 ")
      ])
    ]);
  }
  const PagesConfideDetail = /* @__PURE__ */ _export_sfc(_sfc_main$1V, [["render", _sfc_render$1U], ["__scopeId", "data-v-0094f2d4"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/confide/detail.vue"]]);
  const _sfc_main$1U = {
    __name: "index",
    setup(__props, { expose: __expose }) {
      __expose();
      vue.useCssVars((_ctx) => ({
        "7a0095d3-statusBarHeight": statusBarHeight.value
      }));
      const globalStore = useGlobalDataStore();
      const scrollTop = vue.ref(0);
      const stickyOffsetTop = vue.ref(0);
      const showCityBox = vue.ref(false);
      const statusBarHeight = vue.ref(globalStore.statusBarHeight + "rpx");
      const banners = vue.ref([]);
      const sticky = vue.ref([
        { id: 1, name: "困扰", open: false },
        { id: 2, name: "城市", open: false },
        { id: 3, name: "价格", open: false },
        { id: 4, name: "排序", open: false },
        { id: 5, name: "筛选", open: false }
      ]);
      const serviceRef = vue.ref(null);
      const customerService = () => {
        serviceRef.value.open();
      };
      const getBanners = async () => {
        let res2 = await bannerList();
        banners.value = res2.data;
      };
      const fixed = vue.ref(false);
      const data = vue.reactive({
        listParams: {
          current: 1,
          size: 10
        },
        list: []
      });
      const avatarImg = (item) => {
        const { masterGallery } = item;
        if (!masterGallery) {
          return "/static/consult/user.png";
        } else {
          return JSON.parse(masterGallery)[0].url;
        }
      };
      const searchParams = vue.ref({
        serviceTypes: [],
        city: ""
      });
      const closeCityFilter = () => {
        showCityBox.value = false;
      };
      const blursearchFn = () => {
        getList();
      };
      const fixedTop = () => {
        fixed.value = true;
      };
      const unFixedTop = () => {
        fixed.value = false;
        scrollTop.value = 0;
      };
      const instance = vue.getCurrentInstance();
      const proxy = instance == null ? void 0 : instance.proxy;
      const currentScroll = vue.ref(0);
      const currentFilter = vue.ref(null);
      const city = vue.ref("");
      const showBox = async (type) => {
        currentFilter.value = type;
        if (!fixed.value) {
          await vue.nextTick();
          const query = uni.createSelectorQuery().in(proxy);
          query.select("#stickyBox").boundingClientRect();
          query.selectViewport().scrollOffset();
          query.exec((res2) => {
            if (!res2 || !res2[0])
              return;
            const boxTop = res2[0].top;
            const scrollOffset = currentScroll.value;
            scrollTop.value = scrollOffset + boxTop - 65;
            setTimeout(() => {
              openFilter(type);
            }, 300);
          });
        } else {
          openFilter(type);
        }
      };
      const typeColor = vue.ref("");
      const openFilter = (type) => {
        typeColor.value = type;
        showCityBox.value = true;
      };
      const onScroll = (e2) => {
        currentScroll.value = e2.detail.scrollTop;
      };
      const openDetail = (item) => {
        var _a, _b;
        const { id: id2, userId, quoteList } = item;
        const quote = {
          quoteAmount: (_a = quoteList[0]) == null ? void 0 : _a.quoteAmount,
          serviceDuration: (_b = quoteList[0]) == null ? void 0 : _b.serviceDuration
        };
        const url2 = `id=${id2}&userId=${userId}&quoteList=${JSON.stringify(quote)}`;
        uni.navigateTo({
          url: `/pages/consult/detail?${url2}`
        });
      };
      vue.watch(
        showCityBox,
        () => {
          if (!showCityBox.value) {
            typeColor.value = "";
          }
        }
      );
      const formData = vue.ref({
        current: 1,
        size: 10,
        consultantName: ""
      });
      onReachBottom(() => {
        data.listParams.current += 1;
        formData.value.current = data.listParams.current;
        getList();
      });
      const getList = async () => {
        let params = {
          ...data.listParams,
          ...searchParams.value,
          params: formData.value
        };
        formatAppLog("log", "at pages/consult/index.vue:315", params, "params");
        const res2 = await getConsultantList(params);
        data.list = [...data.list, ...res2.data.records];
      };
      const listFiltering = vue.ref(null);
      const closeFilter = () => {
        const { distressId, city: city2, currentRange, sortType, resultObj } = listFiltering.value;
        if (currentFilter.value === 1) {
          formData.value.distressId = distressId;
        }
        if (currentFilter.value === 2) {
          formData.value.city = city2;
        }
        if (currentFilter.value === 3) {
          formData.value = { ...currentRange };
        }
        if (currentFilter.value === 4) {
          formData.value.sortType = sortType;
        }
        if (currentFilter.value === 5) {
          formData.value = { ...resultObj };
        }
        showCityBox.value = false;
        getList();
      };
      const resetOption = () => {
        formData.value = {
          current: 1,
          size: 10,
          consultantName: ""
        };
        showCityBox.value = false;
        getList();
      };
      const serviceTypes2 = vue.ref([]);
      const getConsultMenu = async () => {
        let resp = await consultMenus();
        const data2 = resp.data || [];
        const result = data2.map((group) => ({
          id: group.id,
          name: group.name,
          children: JSON.parse(group.children),
          spread: false
        }));
        serviceTypes2.value = result;
      };
      const allCity = vue.ref([]);
      const getCityInfo = async () => {
        let resp = await cities();
        const data2 = resp.data || [];
        const result = data2.map((group, index) => ({
          id: index + 1,
          name: group.name,
          children: JSON.parse(group.cities)
        }));
        allCity.value = result;
      };
      vue.onMounted(() => {
        stickyOffsetTop.value = globalStore.statusBarHeight + 88;
        getList();
        getConsultMenu();
        getCityInfo();
        getBanners();
      });
      const __returned__ = { globalStore, scrollTop, stickyOffsetTop, showCityBox, statusBarHeight, banners, sticky, serviceRef, customerService, getBanners, fixed, data, avatarImg, searchParams, closeCityFilter, blursearchFn, fixedTop, unFixedTop, instance, proxy, currentScroll, currentFilter, city, showBox, typeColor, openFilter, onScroll, openDetail, formData, getList, listFiltering, closeFilter, resetOption, serviceTypes: serviceTypes2, getConsultMenu, allCity, getCityInfo, ListFiltering, ref: vue.ref, reactive: vue.reactive, watch: vue.watch, getCurrentInstance: vue.getCurrentInstance, nextTick: vue.nextTick, onMounted: vue.onMounted, get getConsultantList() {
        return getConsultantList;
      }, get consultMenus() {
        return consultMenus;
      }, get cities() {
        return cities;
      }, get formatAddress() {
        return formatAddress;
      }, get useGlobalDataStore() {
        return useGlobalDataStore;
      }, get bannerList() {
        return bannerList;
      }, get onReachBottom() {
        return onReachBottom;
      }, CustomerService };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$1T(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_search_bar = resolveEasycom(vue.resolveDynamicComponent("uni-search-bar"), __easycom_0$6);
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    const _component_u_sticky = resolveEasycom(vue.resolveDynamicComponent("u-sticky"), __easycom_2$c);
    return vue.openBlock(), vue.createElementBlock("view", { class: "consult-box" }, [
      vue.createElementVNode("scroll-view", {
        class: "scroll-content",
        "scroll-y": "",
        "scroll-top": $setup.scrollTop,
        "show-scrollbar": false,
        onScroll: $setup.onScroll
      }, [
        vue.createElementVNode(
          "view",
          {
            class: vue.normalizeClass(["search-content", $setup.currentScroll > 15 ? "activeClass" : ""])
          },
          [
            vue.createElementVNode("view", { class: "search" }, [
              vue.createVNode(_component_uni_search_bar, {
                modelValue: $setup.formData.consultantName,
                "onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => $setup.formData.consultantName = $event),
                radius: "100",
                placeholder: "请输入咨询师姓名",
                clearButton: "auto",
                cancelButton: "none",
                onBlur: _cache[1] || (_cache[1] = ($event) => $setup.blursearchFn())
              }, null, 8, ["modelValue"])
            ]),
            vue.createElementVNode("view", {
              class: "contact",
              onClick: $setup.customerService
            }, [
              vue.createElementVNode("image", { src: _imports_0$q }),
              vue.createElementVNode("text", null, "客服")
            ])
          ],
          2
          /* CLASS */
        ),
        vue.createElementVNode("view", { class: "operate-box" }, [
          vue.createElementVNode("view", { class: "uni-margin-wrap" }, [
            vue.createElementVNode("swiper", {
              class: "swiper",
              circular: "",
              "indicator-dots": true,
              autoplay: true,
              interval: 5e3,
              duration: 500
            }, [
              (vue.openBlock(true), vue.createElementBlock(
                vue.Fragment,
                null,
                vue.renderList($setup.banners, (i2, index) => {
                  return vue.openBlock(), vue.createElementBlock("swiper-item", {
                    key: index,
                    class: "swiper-item"
                  }, [
                    vue.createElementVNode("view", { class: "swiper-item uni-bg-red" }, [
                      vue.createElementVNode("image", {
                        src: i2.image,
                        mode: "aspectFill",
                        class: "img"
                      }, null, 8, ["src"])
                    ])
                  ]);
                }),
                128
                /* KEYED_FRAGMENT */
              ))
            ])
          ])
        ]),
        vue.createVNode(_component_u_sticky, {
          "offset-top": $setup.stickyOffsetTop,
          onFixed: $setup.fixedTop,
          onUnfixed: $setup.unFixedTop
        }, {
          default: vue.withCtx(() => [
            vue.createElementVNode("view", { id: "stickyBox" }, [
              vue.createElementVNode("view", { class: "filter-box" }, [
                vue.createElementVNode("view", { class: "filter-box-1" }, [
                  vue.createElementVNode("view", { class: "filter-box-1-1" }, [
                    (vue.openBlock(true), vue.createElementBlock(
                      vue.Fragment,
                      null,
                      vue.renderList($setup.sticky, (item, index) => {
                        return vue.openBlock(), vue.createElementBlock("view", {
                          class: "filter-box-1-item",
                          key: index,
                          style: vue.normalizeStyle({ color: $setup.typeColor == item.id ? "#35C996" : "black" }),
                          onClick: ($event) => $setup.showBox(item.id)
                        }, [
                          vue.createTextVNode(
                            vue.toDisplayString(item.name) + " ",
                            1
                            /* TEXT */
                          ),
                          item.id != 5 ? (vue.openBlock(), vue.createBlock(_component_uni_icons, {
                            key: 0,
                            type: $setup.typeColor == item.id ? "up" : "down",
                            color: $setup.typeColor == item.id ? "#35C996" : "",
                            size: "12",
                            class: "icon"
                          }, null, 8, ["type", "color"])) : vue.createCommentVNode("v-if", true),
                          item.id == 5 ? (vue.openBlock(), vue.createElementBlock("image", {
                            key: 1,
                            src: _imports_1$g,
                            style: { "width": "25rpx", "height": "25rpx" },
                            class: "filter icon"
                          })) : vue.createCommentVNode("v-if", true)
                        ], 12, ["onClick"]);
                      }),
                      128
                      /* KEYED_FRAGMENT */
                    ))
                  ])
                ])
              ])
            ])
          ]),
          _: 1
          /* STABLE */
        }, 8, ["offset-top"]),
        vue.createElementVNode("view", { class: "doctor-list" }, [
          (vue.openBlock(true), vue.createElementBlock(
            vue.Fragment,
            null,
            vue.renderList($setup.data.list, (item, index) => {
              return vue.openBlock(), vue.createElementBlock("view", {
                class: "doctor-item",
                key: index,
                onClick: ($event) => $setup.openDetail(item)
              }, [
                vue.createElementVNode("view", { class: "doctor-auture" }, [
                  vue.createElementVNode("image", {
                    src: $setup.avatarImg(item),
                    style: { "border-radius": "20rpx" }
                  }, null, 8, ["src"])
                ]),
                vue.createElementVNode("view", { class: "doctor-info" }, [
                  vue.createElementVNode("view", { class: "doctor-info-1" }, [
                    vue.createElementVNode(
                      "view",
                      { class: "name" },
                      vue.toDisplayString(item.name),
                      1
                      /* TEXT */
                    ),
                    vue.createElementVNode("view", { class: "date" }, "今天可约")
                  ]),
                  vue.createElementVNode("view", { class: "doctor-info-1" }, [
                    vue.createElementVNode(
                      "view",
                      { class: "job" },
                      vue.toDisplayString(item.occupationName),
                      1
                      /* TEXT */
                    ),
                    vue.createElementVNode("view", { class: "address" }, [
                      vue.createElementVNode("image", { src: _imports_2$8 }),
                      vue.createElementVNode(
                        "text",
                        null,
                        vue.toDisplayString($setup.formatAddress(item.address)),
                        1
                        /* TEXT */
                      )
                    ])
                  ]),
                  vue.createElementVNode("view", { class: "doctor-info-1" }, [
                    vue.createElementVNode("view", { class: "exprise" }, [
                      vue.createElementVNode(
                        "text",
                        null,
                        vue.toDisplayString(item.platformHours) + "+",
                        1
                        /* TEXT */
                      ),
                      vue.createTextVNode(" 小时经验 "),
                      vue.createElementVNode(
                        "text",
                        null,
                        vue.toDisplayString(item.years) + "年",
                        1
                        /* TEXT */
                      ),
                      vue.createTextVNode(" 从业 "),
                      vue.createElementVNode(
                        "text",
                        null,
                        vue.toDisplayString(item.commentCount) + "+ ",
                        1
                        /* TEXT */
                      ),
                      vue.createTextVNode("评价 ")
                    ])
                  ]),
                  vue.createElementVNode("view", { class: "doctor-info-1" }, [
                    item.serviceType ? (vue.openBlock(), vue.createElementBlock("view", {
                      key: 0,
                      class: "point-list"
                    }, [
                      (vue.openBlock(true), vue.createElementBlock(
                        vue.Fragment,
                        null,
                        vue.renderList(item.serviceTypes, (sub, index2) => {
                          return vue.openBlock(), vue.createElementBlock(
                            "view",
                            {
                              class: "point-item",
                              key: index2
                            },
                            vue.toDisplayString(sub),
                            1
                            /* TEXT */
                          );
                        }),
                        128
                        /* KEYED_FRAGMENT */
                      ))
                    ])) : vue.createCommentVNode("v-if", true)
                  ]),
                  vue.createElementVNode("view", { class: "doctor-info-1" }, [
                    vue.createElementVNode("view", { class: "discount" }),
                    item.quoteList[0] ? (vue.openBlock(), vue.createElementBlock("view", {
                      key: 0,
                      class: "price"
                    }, [
                      vue.createElementVNode("text", { class: "unit" }, "¥"),
                      vue.createTextVNode(
                        " " + vue.toDisplayString(item.quoteList[0].quoteAmount || 0),
                        1
                        /* TEXT */
                      )
                    ])) : vue.createCommentVNode("v-if", true)
                  ])
                ])
              ], 8, ["onClick"]);
            }),
            128
            /* KEYED_FRAGMENT */
          ))
        ])
      ], 40, ["scroll-top"]),
      vue.withDirectives(vue.createElementVNode(
        "view",
        {
          class: "mask",
          onClick: $setup.closeCityFilter
        },
        [
          vue.createElementVNode("view", {
            class: "filter-popup",
            onClick: _cache[4] || (_cache[4] = vue.withModifiers(() => {
            }, ["stop"]))
          }, [
            vue.createElementVNode("view", { class: "popup-body" }, [
              vue.createVNode($setup["ListFiltering"], {
                ref: "listFiltering",
                colorType: 1,
                serviceTypes: $setup.serviceTypes,
                confusionList: $setup.allCity,
                layoutType: $setup.currentFilter
              }, null, 8, ["serviceTypes", "confusionList", "layoutType"])
            ]),
            vue.createElementVNode("view", { class: "popup-footer" }, [
              vue.createElementVNode("button", {
                class: "btn btn-reset",
                size: "mini",
                onClick: _cache[2] || (_cache[2] = ($event) => $setup.resetOption())
              }, " 重置 "),
              vue.createElementVNode("button", {
                class: "btn btn-confirm",
                size: "mini",
                onClick: _cache[3] || (_cache[3] = ($event) => $setup.closeFilter())
              }, " 完成 ")
            ])
          ])
        ],
        512
        /* NEED_PATCH */
      ), [
        [vue.vShow, $setup.showCityBox]
      ]),
      vue.createVNode(
        $setup["CustomerService"],
        { ref: "serviceRef" },
        null,
        512
        /* NEED_PATCH */
      )
    ]);
  }
  const PagesConsultIndex = /* @__PURE__ */ _export_sfc(_sfc_main$1U, [["render", _sfc_render$1T], ["__scopeId", "data-v-7a0095d3"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/consult/index.vue"]]);
  const updateUser = (params, config2 = {}) => http$1.post("/api/user/update", params, config2);
  const changeConsultant = (params, config2 = {}) => http$1.post("/api/user/changeConsultant", params, config2);
  const getVerifyStatus = (params, config2 = {}) => http$1.get("/api/user/verifyStatus", params, config2);
  const saveRoleInfo = (params, config2 = {}) => http$1.post("/api/user/saveRoleInfo", params, config2);
  const complaintSubmitPost = (params, config2 = {}) => http$1.post("/api/complaint/submit", params, config2);
  const feedbackSubmit = (params, config2 = {}) => http$1.post("/api/feedback/submit", params, config2);
  const follow = (params, config2 = {}) => http$1.post("/api/user/follow/add", params, config2);
  const collect = (params, config2 = {}) => http$1.post("/api/user/follow/cancel", params, config2);
  const followStatus = (params, config2 = {}) => http$1.get("/api/user/follow/status", params, config2);
  const _imports_3$4 = "/static/common/address.png";
  const _imports_4$4 = "/static/common/follwer.png";
  const _imports_1$f = "/static/common/follow.png";
  const _imports_2$6 = "/static/common/contect.png";
  const _sfc_main$1T = {
    __name: "detail",
    setup(__props, { expose: __expose }) {
      __expose();
      vue.useCssVars((_ctx) => ({
        "067f89c2-statusBarHeight": statusBarHeight.value
      }));
      const globalStore = useGlobalDataStore();
      const statusBarHeight = vue.ref(globalStore.statusBarHeight + "px");
      const scrollTop = vue.ref(0);
      const tabIndex = vue.ref(0);
      const instance = vue.getCurrentInstance();
      const top = vue.ref(0);
      const fixedActive = vue.ref(false);
      const popup = vue.ref(null);
      const maxHeight = vue.ref("832rpx");
      const timeList = vue.ref([]);
      const consultantInfo2 = vue.ref({
        consultantName: "",
        gallery: ""
      });
      const userIds = vue.ref("");
      const quoteList = vue.ref({});
      const optionsID = vue.ref("");
      onLoad((options) => {
        optionsID.value = options.id;
        userIds.value = options.userId;
        quoteList.value = JSON.parse(options.quoteList);
        consultInfo(options.id);
        getConsultantInfo(options.id);
        getScheduleApi(options.id);
        getCommentByTargetUserIdApi(options.userId);
        followStatusApi(options.id);
      });
      const followType = vue.ref(0);
      const followStatusApi = async (id2) => {
        let { data } = await followStatus({ targetId: id2, targetType: 1 });
        formatAppLog("log", "at pages/consult/detail.vue:524", data);
        followType.value = data;
      };
      const shareFn = async () => {
        try {
          const api = followType.value == 1 ? follow : collect;
          const res2 = await api({ targetType: 1, targetId: Number(optionsID.value) });
        } catch (error) {
        }
      };
      const getScheduleApi = async (id2) => {
        let res2 = await getSchedule({ consultantId: id2 });
        timeList.value = res2.data;
        const dateMap = {};
        res2.data.forEach((item) => {
          if (!dateMap[item.date]) {
            dateMap[item.date] = {
              date: item.date,
              day: item.date.split("-")[2],
              // 日期号（如10）
              week: ["周一", "周二", "周三", "周四", "周五", "周六", "周日"][item.dayOfWeek - 1],
              // 星期
              status: item.status
              // 取该日期的状态（可根据实际需求调整）
            };
          }
        });
        orderLists.value = Object.values(dateMap).sort((a2, b2) => new Date(a2.date) - new Date(b2.date));
      };
      const backFn = () => {
        uni.navigateBack({
          delta: 1
        });
      };
      const scrollToTargetInScroll = async (targetId) => {
        await vue.nextTick();
        const query = uni.createSelectorQuery().in(instance);
        query.select(`#${targetId}`).boundingClientRect().select(`#scrollView`).boundingClientRect().exec((res2) => {
          const targetRect = res2[0];
          const scrollViewRect = res2[1];
          if (targetRect && scrollViewRect) {
            top.value = targetRect.top - scrollViewRect.top;
          }
        });
      };
      const serviceRef = vue.ref(null);
      const customerService = () => {
        serviceRef.value.open();
      };
      const tabsList = vue.ref([
        {
          label: "个人简介",
          id: "tab-1",
          class: "tab6"
        },
        {
          label: "擅长领域",
          id: "tab-2",
          class: "tab7"
        },
        {
          label: "受训经历",
          id: "tab-3",
          class: "tab8"
        },
        {
          label: "咨询感受",
          id: "tab-4",
          class: "tab9"
        },
        {
          label: "预约时间",
          id: "tab-5",
          class: "tab10"
        }
      ]);
      const stepList = vue.ref([]);
      const orderLists = vue.ref([]);
      const evaluationList = vue.ref([]);
      const getCommentByTargetUserIdApi = async (id2) => {
        let { data } = await getCommentByTargetUserId({
          targetUserId: id2,
          page: 1,
          pageSize: 10
        });
        evaluationList.value = data.records;
      };
      const stepActive = vue.ref(stepList.value.length);
      const openPopupFn = () => {
        popup.value.open();
      };
      const openEvaluate = () => {
        uni.navigateTo({
          url: `/pages/consult-feel/consult-feel?userId=${userIds.value}&userInfo=${JSON.stringify(consultantInfo2.value)}`
        });
      };
      const more = () => {
        maxHeight.value = "none";
      };
      const getConsultantInfo = async (id2) => {
        let res2 = await getConsultantById({ id: id2 });
        consultantInfo2.value = res2.data;
        formatAppLog("log", "at pages/consult/detail.vue:645", res2.data);
        stepList.value = handleCareerList(res2.data.careerList);
      };
      const toChat = () => {
        const { userId, name, avatar } = consultantInfo2.value;
        uni.navigateTo({
          url: `/pages/message/private-chat?to=${userId}&name=${name}&avatar=${avatar}`
        });
      };
      const toPay = () => {
        if (selectedItem.value === null) {
          uni.showToast({
            title: "请选择预约时间",
            icon: "none"
          });
          return;
        }
        const { id: id2, userId, name, avatar } = consultantInfo2.value;
        uni.navigateTo({
          url: `/pages/payment/payment?id=${id2}&to=${userId}&name=${name}&avatar=${avatar}&time=${JSON.stringify(selectedItem.value)}`
        });
      };
      const service = vue.ref({});
      const expData = vue.ref({});
      const consultInfo = async (id2) => {
        try {
          const info = await getCommentInfo$1({ id: id2 });
          const list = await getCommentList$1({ id: id2, page: 1, count: 10 });
          const exp = await getServiceExperienceCon({ id: id2 });
          service.value = info.data;
          expData.value = exp.data;
        } catch (e2) {
        }
      };
      const dateGroups = vue.computed(() => {
        return timeList.value.reduce((acc, item) => {
          const { date: date2, dayOfWeek } = item;
          if (!acc[date2]) {
            acc[date2] = { date: date2, dayOfWeek, times: [], status: 1 };
          }
          acc[date2].times.push(item);
          const currentDateItem = acc[date2];
          const allStatusIs2 = currentDateItem.times.every((timeItem) => timeItem.status === 2);
          if (allStatusIs2) {
            currentDateItem.status = 2;
            currentDateItem.times = [];
          } else {
            currentDateItem.status = 1;
          }
          return acc;
        }, {});
      });
      const dateOptions = vue.computed(() => Object.values(dateGroups.value));
      const selectedDate = vue.ref(null);
      const selectedTime = vue.ref(null);
      const selectedItem = vue.ref(null);
      const handleDateSelect = (dateItem) => {
        selectedDate.value = dateItem;
        selectedTime.value = null;
        selectedItem.value = null;
      };
      const handleTimeSelect = (timeItem) => {
        if (!selectedDate.value || timeItem.status !== 1) {
          return;
        }
        selectedTime.value = timeItem;
        selectedItem.value = timeItem;
        formatAppLog("log", "at pages/consult/detail.vue:731", "最终选中对象：", selectedItem.value);
      };
      const getWeekText = (dayOfWeek) => {
        const today = (/* @__PURE__ */ new Date()).getDay();
        const todayWeekNum = today === 0 ? 7 : today;
        const weeks = ["", "周一", "周二", "周三", "周四", "周五", "周六", "周日"];
        return dayOfWeek == todayWeekNum ? "今天" : weeks[dayOfWeek] || "未知";
      };
      const filterTime = (type) => {
        if (!selectedDate.value)
          return [];
        return selectedDate.value.times.filter((item) => {
          const hour = Number(item.startTime.split(":")[0]);
          return type === "morning" ? hour < 12 : hour >= 12;
        });
      };
      const getStatusText = (status) => {
        const statusMap = {
          0: "不可约",
          1: "可约",
          2: "已满"
        };
        return statusMap[status] || "未知";
      };
      const getTimeStatusClass = (status) => {
        const classMap = {
          0: "status-disabled",
          // 不可约
          1: "status-available",
          // 可约
          2: "status-full"
          // 已满
        };
        return classMap[status] || "";
      };
      const hasAvailableTime = (dateItem) => {
        return dateItem.times.some((item) => item.status === 1);
      };
      vue.onMounted(() => {
        if (dateOptions.value.length > 0) {
          selectedDate.value = dateOptions.value[0];
        }
      });
      const onScroll = (e2) => {
        scrollTop.value = e2.detail.scrollTop;
      };
      const __returned__ = { globalStore, statusBarHeight, scrollTop, tabIndex, instance, top, fixedActive, popup, maxHeight, timeList, consultantInfo: consultantInfo2, userIds, quoteList, optionsID, followType, followStatusApi, shareFn, getScheduleApi, backFn, scrollToTargetInScroll, serviceRef, customerService, tabsList, stepList, orderLists, evaluationList, getCommentByTargetUserIdApi, stepActive, openPopupFn, openEvaluate, more, getConsultantInfo, toChat, toPay, service, expData, consultInfo, dateGroups, dateOptions, selectedDate, selectedTime, selectedItem, handleDateSelect, handleTimeSelect, getWeekText, filterTime, getStatusText, getTimeStatusClass, hasAvailableTime, onScroll, nextTick: vue.nextTick, onMounted: vue.onMounted, ref: vue.ref, getCurrentInstance: vue.getCurrentInstance, computed: vue.computed, watch: vue.watch, get onLoad() {
        return onLoad;
      }, get useGlobalDataStore() {
        return useGlobalDataStore;
      }, get handleCareerList() {
        return handleCareerList;
      }, get getCityFromAddress() {
        return getCityFromAddress;
      }, get getGenerationByBirthdate() {
        return getGenerationByBirthdate;
      }, get getConsultantById() {
        return getConsultantById;
      }, get getCommentInfo() {
        return getCommentInfo$1;
      }, get getCommentList() {
        return getCommentList$1;
      }, get getServiceExperienceCon() {
        return getServiceExperienceCon;
      }, get getCommentByTargetUserId() {
        return getCommentByTargetUserId;
      }, get getSchedule() {
        return getSchedule;
      }, get follow() {
        return follow;
      }, get collect() {
        return collect;
      }, get followStatus() {
        return followStatus;
      }, get MoteLinesDivide() {
        return MoteLinesDivide;
      }, CustomerService };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$1S(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    const _component_uni_nav_bar = resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"), __easycom_1$4);
    const _component_uni_steps = resolveEasycom(vue.resolveDynamicComponent("uni-steps"), __easycom_2$a);
    const _component_uni_popup = resolveEasycom(vue.resolveDynamicComponent("uni-popup"), __easycom_3$5);
    return vue.openBlock(), vue.createElementBlock("view", { class: "consult-detail-box" }, [
      vue.createElementVNode("scroll-view", {
        "scroll-y": "",
        class: "scroll-content",
        "scroll-top": $setup.top,
        "show-scrollbar": false,
        "scroll-with-animation": "",
        id: "scrollView",
        onScroll: $setup.onScroll
      }, [
        vue.createVNode(_component_uni_nav_bar, {
          backgroundColor: $setup.scrollTop > 15 ? "#fff" : "transparent",
          border: false,
          title: $setup.scrollTop > 15 ? $setup.consultantInfo.consultantName : "",
          class: "header-bar",
          statusBar: true,
          fixed: ""
        }, {
          left: vue.withCtx(() => [
            vue.createElementVNode("view", { class: "right" }, [
              $setup.scrollTop > 15 ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 0,
                class: "nav-right"
              }, [
                vue.createVNode(_component_uni_icons, {
                  type: "left",
                  size: "24",
                  onClick: $setup.backFn
                }),
                vue.createElementVNode("view", { class: "line" }, [
                  vue.createElementVNode("img", {
                    src: JSON.parse($setup.consultantInfo.masterGallery)[0].url
                  }, null, 8, ["src"]),
                  vue.createElementVNode("view", null, [
                    vue.createElementVNode(
                      "view",
                      { class: "line-name" },
                      vue.toDisplayString($setup.consultantInfo.name),
                      1
                      /* TEXT */
                    ),
                    vue.createElementVNode(
                      "view",
                      { class: "line-job" },
                      vue.toDisplayString($setup.consultantInfo.occupationName),
                      1
                      /* TEXT */
                    )
                  ])
                ])
              ])) : (vue.openBlock(), vue.createElementBlock("image", {
                key: 1,
                src: _imports_0$p,
                style: { "width": "56rpx", "height": "56rpx" },
                onClick: $setup.backFn
              }))
            ])
          ]),
          right: vue.withCtx(() => [
            vue.createElementVNode("view", { class: "right" }, [
              $setup.scrollTop > 15 ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 0,
                class: "nav-right"
              }, [
                vue.createElementVNode("view", {
                  class: "share",
                  onClick: $setup.shareFn
                }, "+ 关注"),
                vue.createElementVNode("image", {
                  src: _imports_0$o,
                  style: { "width": "40rpx", "height": "40rpx" }
                })
              ])) : (vue.openBlock(), vue.createElementBlock("image", {
                key: 1,
                src: _imports_2$7,
                style: { "width": "56rpx", "height": "56rpx" }
              }))
            ])
          ]),
          _: 1
          /* STABLE */
        }, 8, ["backgroundColor", "title"]),
        vue.createElementVNode("view", { class: "consult-detail-content" }, [
          vue.createElementVNode("view", { class: "swiper-content" }, [
            vue.createElementVNode("view", { class: "uni-margin-wrap" }, [
              vue.createElementVNode("swiper", {
                class: "swiper",
                circular: "",
                "indicator-dots": true,
                autoplay: true,
                interval: 5e3,
                duration: 500
              }, [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList(JSON.parse(
                    $setup.consultantInfo.masterGallery
                  ), (item, index) => {
                    return vue.openBlock(), vue.createElementBlock("swiper-item", {
                      key: index,
                      class: "swiper-item"
                    }, [
                      vue.createElementVNode("image", {
                        src: item.url,
                        style: { "height": "590rpx" },
                        mode: "heightFix"
                      }, null, 8, ["src"])
                    ]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                ))
              ])
            ])
          ]),
          vue.createElementVNode("view", { class: "consult-detail-info" }, [
            vue.createElementVNode("view", { class: "detail-item-line-1" }, [
              vue.createElementVNode("view", { class: "name" }, [
                vue.createElementVNode(
                  "text",
                  { class: "name-a" },
                  vue.toDisplayString($setup.consultantInfo.name),
                  1
                  /* TEXT */
                ),
                $setup.consultantInfo.occupationName ? (vue.openBlock(), vue.createElementBlock(
                  "text",
                  {
                    key: 0,
                    class: "name-b"
                  },
                  vue.toDisplayString($setup.consultantInfo.occupationName),
                  1
                  /* TEXT */
                )) : vue.createCommentVNode("v-if", true),
                vue.createElementVNode(
                  "text",
                  { class: "name-c" },
                  vue.toDisplayString($setup.getGenerationByBirthdate($setup.consultantInfo.birthdate)),
                  1
                  /* TEXT */
                )
              ]),
              JSON.stringify($setup.quoteList) !== "{}" ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 0,
                class: "money"
              }, [
                vue.createElementVNode(
                  "text",
                  { class: "num" },
                  vue.toDisplayString($setup.quoteList.quoteAmount),
                  1
                  /* TEXT */
                ),
                vue.createElementVNode(
                  "text",
                  null,
                  "元/" + vue.toDisplayString($setup.quoteList.serviceDuration) + "分钟",
                  1
                  /* TEXT */
                )
              ])) : vue.createCommentVNode("v-if", true)
            ]),
            vue.createElementVNode("view", { class: "detail-item-line-2" }, [
              vue.createElementVNode(
                "text",
                null,
                vue.toDisplayString($setup.consultantInfo.certificateList[0].name) + " | " + vue.toDisplayString($setup.consultantInfo.educationList[0].schoolName) + " | " + vue.toDisplayString($setup.consultantInfo.constellation),
                1
                /* TEXT */
              )
            ]),
            vue.createElementVNode("view", { class: "detail-item-line-3" }, [
              vue.createElementVNode("view", { class: "address" }, [
                vue.createElementVNode("image", { src: _imports_3$4 }),
                vue.createElementVNode(
                  "text",
                  null,
                  vue.toDisplayString($setup.getCityFromAddress($setup.consultantInfo.address)),
                  1
                  /* TEXT */
                )
              ]),
              vue.createElementVNode("view", { class: "txt" }, [
                vue.createElementVNode("view", null, [
                  vue.createElementVNode("text", { class: "voice" }, "语音咨询"),
                  vue.createTextVNode(" | "),
                  vue.createElementVNode("text", { class: "quick" }, "最快可约最近3天"),
                  vue.createVNode(_component_uni_icons, {
                    type: "right",
                    size: "14",
                    color: "#35CA95"
                  })
                ])
              ])
            ]),
            vue.createElementVNode("view", { class: "detail-item-line-4" }, [
              vue.createElementVNode("view", { class: "content" }, [
                vue.createElementVNode("view", { class: "list" }, [
                  vue.createElementVNode("view", { class: "item" }, [
                    vue.createElementVNode("view", null, [
                      vue.createElementVNode(
                        "text",
                        { class: "num" },
                        vue.toDisplayString($setup.consultantInfo.workTime),
                        1
                        /* TEXT */
                      ),
                      vue.createElementVNode("text", { class: "unit" }, "年")
                    ]),
                    vue.createElementVNode("view", { class: "txt" }, "从业年限")
                  ]),
                  vue.createElementVNode("view", { class: "item" }, [
                    vue.createElementVNode("view", null, [
                      vue.createElementVNode(
                        "text",
                        { class: "num" },
                        vue.toDisplayString($setup.expData.platformHours),
                        1
                        /* TEXT */
                      ),
                      vue.createElementVNode("text", { class: "unit" }, "小时")
                    ]),
                    vue.createElementVNode("view", { class: "txt" }, "平台时长")
                  ]),
                  vue.createElementVNode("view", { class: "item" }, [
                    vue.createElementVNode("view", null, [
                      vue.createElementVNode(
                        "text",
                        { class: "num" },
                        vue.toDisplayString($setup.expData.consultUserCount),
                        1
                        /* TEXT */
                      ),
                      vue.createElementVNode("text", { class: "unit" }, "人")
                    ]),
                    vue.createElementVNode("view", { class: "txt" }, "咨询人数")
                  ]),
                  vue.createElementVNode("view", { class: "item" }, [
                    vue.createElementVNode("view", null, [
                      vue.createElementVNode(
                        "text",
                        { class: "num" },
                        vue.toDisplayString($setup.expData.commentCount),
                        1
                        /* TEXT */
                      )
                    ]),
                    vue.createElementVNode("view", { class: "txt" }, "咨询感受")
                  ])
                ]),
                vue.createElementVNode("view", { class: "tips" }, [
                  vue.createElementVNode("image", { src: _imports_4$4 }),
                  vue.createElementVNode("text", { class: "txt" }, "服务经验")
                ])
              ])
            ]),
            vue.createElementVNode(
              "view",
              {
                class: vue.normalizeClass(["detail-item-line-5", $setup.fixedActive ? "tabsFixed" : ""]),
                id: "tabs"
              },
              [
                vue.createElementVNode("view", { class: "tabs" }, [
                  (vue.openBlock(true), vue.createElementBlock(
                    vue.Fragment,
                    null,
                    vue.renderList($setup.tabsList, (item, index) => {
                      return vue.openBlock(), vue.createElementBlock("view", {
                        class: vue.normalizeClass(["tab-item", $setup.tabIndex == index ? "active" : ""]),
                        key: index,
                        onClick: ($event) => $setup.scrollToTargetInScroll(`tab-${index + 1}`)
                      }, vue.toDisplayString(item.label), 11, ["onClick"]);
                    }),
                    128
                    /* KEYED_FRAGMENT */
                  ))
                ])
              ],
              2
              /* CLASS */
            ),
            vue.createElementVNode("view", {
              class: "detail-item-line-6 tab6",
              id: "tab-1"
            }, [
              vue.createElementVNode("view", { class: "content" }, [
                vue.createElementVNode("view", { class: "title" }, "个人简介"),
                vue.createElementVNode(
                  "view",
                  { class: "info" },
                  vue.toDisplayString($setup.consultantInfo.profile),
                  1
                  /* TEXT */
                )
              ])
            ]),
            vue.createElementVNode("view", {
              class: "detail-item-line-6 detail-item-line-7",
              id: "tab-2"
            }, [
              vue.createElementVNode("view", { class: "content" }, [
                vue.createElementVNode("view", { class: "title" }, "擅长方向"),
                vue.createElementVNode("view", { class: "info" }, [
                  vue.createElementVNode("view", { class: "detail-item" }, [
                    vue.createElementVNode(
                      "view",
                      { class: "detail-content" },
                      vue.toDisplayString($setup.consultantInfo.serviceTypes.join("、")),
                      1
                      /* TEXT */
                    )
                  ])
                ]),
                vue.createElementVNode("view", { class: "title" }, "擅长疗法"),
                vue.createElementVNode("view", { class: "tags" }, [
                  vue.createElementVNode("text", { class: "tag-item" }, "沙盘疗法"),
                  vue.createElementVNode("text", { class: "tag-item" }, "心理动力取向"),
                  vue.createElementVNode("text", { class: "tag-item" }, "心理动力取向")
                ])
              ])
            ]),
            vue.createElementVNode("view", {
              class: "detail-item-line-6 detail-item-line-8",
              id: "tab-3"
            }, [
              vue.createElementVNode(
                "view",
                {
                  class: "content",
                  style: vue.normalizeStyle({ "max-height": $setup.maxHeight, overflow: "hidden" })
                },
                [
                  vue.createElementVNode("view", { class: "info" }, [
                    (vue.openBlock(true), vue.createElementBlock(
                      vue.Fragment,
                      null,
                      vue.renderList($setup.consultantInfo.certificateList, (item, index) => {
                        return vue.openBlock(), vue.createElementBlock("view", {
                          class: "certificate-detail",
                          key: index
                        }, [
                          vue.createElementVNode("view", { class: "tag" }, "资质"),
                          vue.createElementVNode("view", { class: "tag-info" }, [
                            vue.createElementVNode(
                              "view",
                              { class: "tag-title" },
                              vue.toDisplayString(item.name),
                              1
                              /* TEXT */
                            ),
                            vue.createElementVNode("view", { class: "certificate-info" }, [
                              vue.createElementVNode(
                                "view",
                                null,
                                "发证时间：" + vue.toDisplayString(item.date),
                                1
                                /* TEXT */
                              ),
                              vue.createElementVNode(
                                "view",
                                null,
                                "证书编号：" + vue.toDisplayString(item.number),
                                1
                                /* TEXT */
                              )
                            ])
                          ])
                        ]);
                      }),
                      128
                      /* KEYED_FRAGMENT */
                    )),
                    (vue.openBlock(true), vue.createElementBlock(
                      vue.Fragment,
                      null,
                      vue.renderList($setup.consultantInfo.educationList, (item, index) => {
                        return vue.openBlock(), vue.createElementBlock("view", {
                          class: "eduication-detail",
                          key: index
                        }, [
                          vue.createElementVNode("view", { class: "tag" }, "学历"),
                          vue.createElementVNode("view", { class: "tag-info" }, [
                            vue.createElementVNode(
                              "view",
                              { class: "tag-title" },
                              vue.toDisplayString(item.schoolName),
                              1
                              /* TEXT */
                            ),
                            vue.createElementVNode("view", { class: "eduication-info" }, [
                              vue.createElementVNode(
                                "view",
                                null,
                                "发证时间：" + vue.toDisplayString(item.endTime),
                                1
                                /* TEXT */
                              ),
                              vue.createElementVNode(
                                "view",
                                null,
                                "证书编号：" + vue.toDisplayString(item.code),
                                1
                                /* TEXT */
                              )
                            ])
                          ])
                        ]);
                      }),
                      128
                      /* KEYED_FRAGMENT */
                    )),
                    vue.createElementVNode("view", { class: "step-detail" }, [
                      vue.createElementVNode("view", { class: "training" }, [
                        vue.createElementVNode("view", { class: "training-title" }, "伦理培训"),
                        vue.createElementVNode(
                          "view",
                          { class: "training-timer" },
                          vue.toDisplayString($setup.stepList.length) + "项培训，累计40小时",
                          1
                          /* TEXT */
                        )
                      ]),
                      vue.createElementVNode("view", { class: "step-box" }, [
                        vue.createVNode(_component_uni_steps, {
                          options: $setup.stepList,
                          "active-color": "#35CA95",
                          active: $setup.stepActive,
                          direction: "column"
                        }, null, 8, ["options", "active"])
                      ])
                    ])
                  ])
                ],
                4
                /* STYLE */
              ),
              vue.createElementVNode("view", {
                class: "more",
                onClick: $setup.more,
                style: { "background-color": "#fff !important" }
              }, "查看更多")
            ]),
            vue.createElementVNode("view", {
              class: "detail-item-line-6 detail-item-line-9",
              id: "tab-4"
            }, [
              vue.createElementVNode("view", {
                class: "content",
                onClick: $setup.openEvaluate
              }, [
                vue.createElementVNode("view", { class: "title" }, "咨询感受"),
                vue.createElementVNode("view", { class: "info" }, [
                  vue.createElementVNode("view", { class: "comment-list" }, [
                    $setup.evaluationList.length ? (vue.openBlock(), vue.createElementBlock("view", { key: 0 }, [
                      (vue.openBlock(true), vue.createElementBlock(
                        vue.Fragment,
                        null,
                        vue.renderList($setup.evaluationList.slice(0, 3), (item, index) => {
                          return vue.openBlock(), vue.createElementBlock("view", {
                            class: "comment-item",
                            key: index
                          }, [
                            vue.createElementVNode("view", { class: "comment-item-header" }, [
                              vue.createElementVNode("view", { class: "user" }, [
                                vue.createElementVNode("image", {
                                  src: item.avatar,
                                  style: { "border-radius": "50%" }
                                }, null, 8, ["src"]),
                                vue.createElementVNode(
                                  "text",
                                  null,
                                  vue.toDisplayString(item.nickname),
                                  1
                                  /* TEXT */
                                )
                              ]),
                              vue.createElementVNode(
                                "view",
                                { class: "date" },
                                vue.toDisplayString(item.createTime),
                                1
                                /* TEXT */
                              )
                            ]),
                            vue.createElementVNode("view", { class: "comment-item-content" }, [
                              vue.createVNode(
                                $setup["MoteLinesDivide"],
                                {
                                  line: 3,
                                  expandText: "展开",
                                  foldHint: "收起"
                                },
                                {
                                  default: vue.withCtx(() => [
                                    vue.createTextVNode(
                                      vue.toDisplayString(item.content),
                                      1
                                      /* TEXT */
                                    )
                                  ]),
                                  _: 2
                                  /* DYNAMIC */
                                },
                                1024
                                /* DYNAMIC_SLOTS */
                              )
                            ])
                          ]);
                        }),
                        128
                        /* KEYED_FRAGMENT */
                      ))
                    ])) : (vue.openBlock(), vue.createElementBlock("view", {
                      key: 1,
                      style: { "margin-top": "10rpx", "text-align": "center" }
                    }, "暂无咨询感受"))
                  ])
                ])
              ])
            ]),
            vue.createElementVNode("view", {
              class: "detail-item-line-6 detail-item-line-10",
              id: "tab-5",
              onClick: $setup.openPopupFn
            }, [
              vue.createElementVNode("view", { class: "content" }, [
                vue.createElementVNode("view", { class: "title" }, [
                  vue.createTextVNode("可约时间"),
                  vue.createElementVNode("text", { class: "remark" }, "（北京时间）")
                ]),
                vue.createElementVNode("view", { class: "info" }, [
                  vue.createElementVNode("view", { class: "txt" }, "如果暂时无法确定具体的咨询时间，可以在预约成功后，再与咨询师协商具体时间。"),
                  vue.createElementVNode("view", { class: "order-timer-box" }, [
                    (vue.openBlock(true), vue.createElementBlock(
                      vue.Fragment,
                      null,
                      vue.renderList($setup.orderLists, (item, index) => {
                        return vue.openBlock(), vue.createElementBlock(
                          "view",
                          {
                            class: vue.normalizeClass(["order-timer-item", item.status == 1 ? "active" : ""])
                          },
                          [
                            vue.createElementVNode(
                              "view",
                              { class: "month" },
                              vue.toDisplayString(item.month) + "月",
                              1
                              /* TEXT */
                            ),
                            vue.createElementVNode(
                              "view",
                              { class: "day" },
                              vue.toDisplayString(item.day),
                              1
                              /* TEXT */
                            ),
                            vue.createElementVNode(
                              "view",
                              { class: "week" },
                              vue.toDisplayString(item.week),
                              1
                              /* TEXT */
                            ),
                            vue.createElementVNode(
                              "view",
                              { class: "isOrder" },
                              vue.toDisplayString(item.status == 1 ? "可约" : "已满"),
                              1
                              /* TEXT */
                            )
                          ],
                          2
                          /* CLASS */
                        );
                      }),
                      256
                      /* UNKEYED_FRAGMENT */
                    ))
                  ])
                ])
              ])
            ]),
            vue.createElementVNode("view", { class: "detail-item-line-6 detail-item-line-11" }, [
              vue.createElementVNode("view", { class: "content" }, [
                vue.createElementVNode("view", { class: "title" }, [
                  vue.createTextVNode("预约须知"),
                  vue.createElementVNode("view", null, [
                    vue.createElementVNode("view", { class: "info" }, [
                      vue.createElementVNode("view", null, "1、咨询为预约服务，您可选择咨询师可约时段下单，每次咨询50分钟或60分钟。"),
                      vue.createElementVNode("view", null, "2、订单支付成功后，您的预约需咨询师确认是否接受，确认后将短信通知您。"),
                      vue.createElementVNode("view", null, "3、咨询方式有面对面、视频、电话、文字四种，具体以咨询师展示的可选方式为准。"),
                      vue.createElementVNode("view", null, "4、因不可抗力因素变更时间或取消咨询预约，请提前24小时告知咨询师。")
                    ])
                  ])
                ])
              ])
            ])
          ])
        ])
      ], 40, ["scroll-top"]),
      vue.createElementVNode("view", { class: "footer" }, [
        vue.createElementVNode("view", {
          class: "follow",
          onClick: $setup.shareFn
        }, [
          vue.createElementVNode("image", { src: _imports_1$f }),
          vue.createElementVNode("text", null, "关注")
        ]),
        vue.createElementVNode("view", {
          class: "contact",
          onClick: $setup.customerService
        }, [
          vue.createElementVNode("image", { src: _imports_2$6 }),
          vue.createElementVNode("text", null, "客服")
        ]),
        vue.createElementVNode("view", {
          class: "message",
          onClick: $setup.toChat
        }, [
          vue.createElementVNode("text", { class: "txt" }, "私信ta")
        ]),
        vue.createElementVNode("view", {
          class: "reservation",
          onClick: $setup.openPopupFn
        }, [
          vue.createElementVNode("text", null, "预约咨询"),
          vue.createElementVNode("text", { class: "remark" }, "（语音/视频）")
        ])
      ]),
      vue.createVNode(
        _component_uni_popup,
        {
          ref: "popup",
          type: "bottom",
          "border-radius": "20rpx 20rpx 0 0"
        },
        {
          default: vue.withCtx(() => [
            vue.createElementVNode("view", { class: "popup-box" }, [
              vue.createElementVNode("view", { class: "popup-header" }, [
                vue.createElementVNode("view", { class: "title" }, [
                  vue.createTextVNode("选择咨询时段"),
                  vue.createElementVNode("text", { class: "remark" }, "（北京时间）")
                ]),
                vue.createElementVNode("view", { class: "msg" }, "暂不选择咨询时间，可在下单后与咨询师协商时间")
              ]),
              vue.createElementVNode("view", { class: "time-selector" }, [
                vue.createElementVNode("scroll-view", {
                  class: "date-scroll",
                  "scroll-x": "true",
                  "show-scrollbar": "true"
                }, [
                  vue.createElementVNode("view", { class: "date-list" }, [
                    (vue.openBlock(true), vue.createElementBlock(
                      vue.Fragment,
                      null,
                      vue.renderList($setup.dateOptions, (dateItem, index) => {
                        var _a, _b;
                        return vue.openBlock(), vue.createElementBlock("view", {
                          key: `date-${index}-${dateItem.date}`,
                          class: vue.normalizeClass(["date-card", {
                            active: ((_a = $setup.selectedDate) == null ? void 0 : _a.date) === dateItem.date,
                            "no-available": !$setup.hasAvailableTime(dateItem),
                            "status-disable": dateItem.status === 2
                          }]),
                          onClick: ($event) => dateItem.status !== 2 && $setup.handleDateSelect(dateItem)
                        }, [
                          vue.createElementVNode(
                            "text",
                            {
                              class: vue.normalizeClass(["week", {
                                "week-active": ((_b = $setup.selectedDate) == null ? void 0 : _b.date) === dateItem.date,
                                "available": dateItem.status === 2
                              }])
                            },
                            vue.toDisplayString($setup.getWeekText(dateItem.dayOfWeek)),
                            3
                            /* TEXT, CLASS */
                          ),
                          vue.createElementVNode(
                            "text",
                            { class: "date" },
                            vue.toDisplayString(dateItem.date.slice(5)),
                            1
                            /* TEXT */
                          ),
                          vue.createElementVNode(
                            "text",
                            {
                              class: vue.normalizeClass(["status", dateItem.status == 2 ? "available" : ""])
                            },
                            vue.toDisplayString($setup.hasAvailableTime(dateItem) ? "可约" : "已满"),
                            3
                            /* TEXT, CLASS */
                          )
                        ], 10, ["onClick"]);
                      }),
                      128
                      /* KEYED_FRAGMENT */
                    ))
                  ])
                ]),
                $setup.selectedDate ? (vue.openBlock(), vue.createElementBlock("view", {
                  key: 0,
                  class: "time-list"
                }, [
                  vue.createElementVNode("view", { class: "time-section" }, [
                    $setup.filterTime("morning").length ? (vue.openBlock(), vue.createElementBlock("text", {
                      key: 0,
                      class: "section-title"
                    }, "上午")) : vue.createCommentVNode("v-if", true),
                    vue.createElementVNode("view", { class: "time-items" }, [
                      (vue.openBlock(true), vue.createElementBlock(
                        vue.Fragment,
                        null,
                        vue.renderList($setup.filterTime("morning"), (timeItem, idx) => {
                          var _a, _b;
                          return vue.openBlock(), vue.createElementBlock("view", {
                            key: `time-morning-${idx}-${timeItem.date}-${timeItem.text}`,
                            class: vue.normalizeClass(["time-item", [
                              {
                                active: ((_a = $setup.selectedTime) == null ? void 0 : _a.text) === timeItem.text && ((_b = $setup.selectedTime) == null ? void 0 : _b.date) === timeItem.date
                              },
                              $setup.getTimeStatusClass(timeItem.status)
                              // 根据status动态添加样式类
                            ]]),
                            onClick: ($event) => $setup.handleTimeSelect(timeItem)
                          }, [
                            vue.createElementVNode(
                              "text",
                              { class: "time-text" },
                              vue.toDisplayString(timeItem.text),
                              1
                              /* TEXT */
                            ),
                            timeItem.status !== 1 ? (vue.openBlock(), vue.createElementBlock(
                              "text",
                              {
                                key: 0,
                                class: "status-tag"
                              },
                              vue.toDisplayString($setup.getStatusText(timeItem.status)),
                              1
                              /* TEXT */
                            )) : vue.createCommentVNode("v-if", true)
                          ], 10, ["onClick"]);
                        }),
                        128
                        /* KEYED_FRAGMENT */
                      ))
                    ])
                  ]),
                  vue.createElementVNode("view", { class: "time-section" }, [
                    $setup.filterTime("afternoon").length ? (vue.openBlock(), vue.createElementBlock("text", {
                      key: 0,
                      class: "section-title"
                    }, "下午")) : vue.createCommentVNode("v-if", true),
                    vue.createElementVNode("view", { class: "time-items" }, [
                      (vue.openBlock(true), vue.createElementBlock(
                        vue.Fragment,
                        null,
                        vue.renderList($setup.filterTime("afternoon"), (timeItem, idx) => {
                          var _a, _b;
                          return vue.openBlock(), vue.createElementBlock("view", {
                            key: `time-afternoon-${idx}-${timeItem.date}-${timeItem.text}`,
                            class: vue.normalizeClass(["time-item", [
                              {
                                active: ((_a = $setup.selectedTime) == null ? void 0 : _a.text) === timeItem.text && ((_b = $setup.selectedTime) == null ? void 0 : _b.date) === timeItem.date
                              },
                              $setup.getTimeStatusClass(timeItem.status)
                              // 根据status动态添加样式类
                            ]]),
                            onClick: ($event) => $setup.handleTimeSelect(timeItem)
                          }, [
                            vue.createElementVNode(
                              "text",
                              { class: "time-text" },
                              vue.toDisplayString(timeItem.text),
                              1
                              /* TEXT */
                            ),
                            timeItem.status !== 1 ? (vue.openBlock(), vue.createElementBlock(
                              "text",
                              {
                                key: 0,
                                class: "status-tag"
                              },
                              vue.toDisplayString($setup.getStatusText(timeItem.status)),
                              1
                              /* TEXT */
                            )) : vue.createCommentVNode("v-if", true)
                          ], 10, ["onClick"]);
                        }),
                        128
                        /* KEYED_FRAGMENT */
                      ))
                    ])
                  ])
                ])) : vue.createCommentVNode("v-if", true)
              ]),
              vue.createElementVNode("view", { class: "popup-footer" }, [
                vue.createElementVNode("view", { class: "msg" }, [
                  $setup.selectedItem ? (vue.openBlock(), vue.createElementBlock(
                    "view",
                    {
                      key: 0,
                      class: "date"
                    },
                    vue.toDisplayString($setup.selectedItem.date) + "(" + vue.toDisplayString($setup.getWeekText($setup.selectedItem.dayOfWeek)) + ") | " + vue.toDisplayString($setup.selectedItem.text),
                    1
                    /* TEXT */
                  )) : vue.createCommentVNode("v-if", true),
                  vue.createElementVNode(
                    "view",
                    { class: "name" },
                    "咨询师：" + vue.toDisplayString($setup.consultantInfo.name),
                    1
                    /* TEXT */
                  )
                ]),
                vue.createElementVNode("view", {
                  class: "confirm",
                  onClick: $setup.toPay
                }, "确认预约")
              ])
            ]),
            vue.createVNode(
              $setup["CustomerService"],
              { ref: "serviceRef" },
              null,
              512
              /* NEED_PATCH */
            )
          ]),
          _: 1
          /* STABLE */
        },
        512
        /* NEED_PATCH */
      )
    ]);
  }
  const PagesConsultDetail = /* @__PURE__ */ _export_sfc(_sfc_main$1T, [["render", _sfc_render$1S], ["__scopeId", "data-v-067f89c2"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/consult/detail.vue"]]);
  const getArticleList = (params, config2 = {}) => http$1.post("/api/article/article/getArticleList", params, config2);
  const getArticleByUserId = (params, config2 = {}) => http$1.post("/api/article/article/getArticleByUserId", params, config2);
  const getArticleDetail = (params, config2 = {}) => http$1.post("/api/article/article/getArticleDetail", params, config2);
  const saveArticle = (params, config2 = {}) => http$1.post("/api/article/article/saveArticle", params, config2);
  const getCommentById$1 = (params, config2 = {}) => http$1.post("/api/comment/comment/getCommentById", params, config2);
  const saveComment$2 = (params, config2 = {}) => http$1.post("/api/comment/comment/saveComment", params, config2);
  const relativeArticle = (params, config2 = {}) => http$1.get("/api/article/article/relativeArticle");
  const getFeedback = (params, config2 = {}) => http$1.post("/api/admin/feedback/page", params, config2);
  const getAnswerList = (params, config2 = {}) => http$1.post(
    "/api/answer/answer/getAnswerList",
    params,
    config2
  );
  const getAnswerDetail = (params, config2 = {}) => http$1.post(
    "/api/answer/answer/getAnswerDetail",
    params,
    config2
  );
  const getCommentById = (params, config2 = {}) => http$1.post(
    "/api/comment/comment/getCommentById",
    params,
    config2
  );
  const saveComment$1 = (params, config2 = {}) => http$1.post(
    "/api/comment/comment/saveComment",
    params,
    config2
  );
  const getHotQa = (params, config2 = {}) => http$1.get("/api/answer/answer/hotList", params, config2);
  const publishQuestion = (params, config2 = {}) => http$1.post("/api/answer/answer/saveAnswer", params, config2);
  const _sfc_main$1S = {
    __name: "Confide-Teacher-List-Item",
    props: {
      info: {
        type: Object
      }
    },
    setup(__props, { expose: __expose }) {
      __expose();
      const props = __props;
      const avatarImg = (item) => {
        const { masterGallery } = item;
        if (!masterGallery) {
          return "/static/consult/user.png";
        } else {
          return JSON.parse(masterGallery)[0].url;
        }
      };
      const __returned__ = { props, avatarImg, get getGenerationByBirthdate() {
        return getGenerationByBirthdate;
      }, get formatAddress() {
        return formatAddress;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$1R(_ctx, _cache, $props, $setup, $data, $options) {
    return vue.openBlock(), vue.createElementBlock("view", { class: "teacher-listener" }, [
      vue.createElementVNode("view", { class: "card-listener" }, [
        vue.createElementVNode("view", { class: "avatar-wrap-listener" }, [
          vue.createElementVNode("image", {
            class: "avatar-listener",
            src: $setup.avatarImg($props.info),
            mode: "aspectFill"
          }, null, 8, ["src"])
        ]),
        vue.createElementVNode("view", { class: "info-wrap" }, [
          vue.createElementVNode("view", { class: "job-title" }, [
            vue.createElementVNode(
              "view",
              { class: "name-title" },
              vue.toDisplayString($props.info.name),
              1
              /* TEXT */
            ),
            vue.createElementVNode(
              "view",
              null,
              vue.toDisplayString($setup.getGenerationByBirthdate($props.info.birthdate)) + " | " + vue.toDisplayString($props.info.constellation),
              1
              /* TEXT */
            )
          ]),
          vue.createElementVNode("view", { class: "tags" }, [
            (vue.openBlock(true), vue.createElementBlock(
              vue.Fragment,
              null,
              vue.renderList($props.info.serviceTypes.slice(0, 2), (item, index) => {
                return vue.openBlock(), vue.createElementBlock(
                  "text",
                  { class: "tag" },
                  vue.toDisplayString(item),
                  1
                  /* TEXT */
                );
              }),
              256
              /* UNKEYED_FRAGMENT */
            ))
          ]),
          vue.createElementVNode("view", { class: "stats" }, [
            vue.createElementVNode("view", null, [
              vue.createElementVNode("view", { class: "stats-item" }, [
                vue.createElementVNode(
                  "view",
                  { class: "num" },
                  vue.toDisplayString($props.info.years) + "年",
                  1
                  /* TEXT */
                ),
                vue.createElementVNode("view", null, "从业时间")
              ]),
              vue.createElementVNode("view", { class: "stats-item" }, [
                vue.createElementVNode(
                  "view",
                  { class: "num" },
                  vue.toDisplayString($props.info.platformHours) + "+",
                  1
                  /* TEXT */
                ),
                vue.createElementVNode("view", null, "平台时长")
              ])
            ]),
            vue.createElementVNode("view", { style: { "min-width": "40%" } }, [
              vue.createElementVNode("view", { class: "stats-item" }, [
                vue.createElementVNode(
                  "view",
                  { class: "num" },
                  vue.toDisplayString($props.info.commentCount) + "+",
                  1
                  /* TEXT */
                ),
                vue.createElementVNode("view", null, "评价")
              ]),
              vue.createElementVNode("view", { class: "stats-item" }, [
                vue.createElementVNode(
                  "view",
                  { class: "num" },
                  vue.toDisplayString($props.info.commentCount) + "+",
                  1
                  /* TEXT */
                ),
                vue.createElementVNode("view", null, "回头客")
              ])
            ])
          ]),
          vue.createElementVNode("view", { class: "price-button" }, [
            vue.createElementVNode("view", { class: "contact" }, [
              vue.createElementVNode("image", { src: _imports_2$8 }),
              vue.createElementVNode(
                "view",
                null,
                vue.toDisplayString($setup.formatAddress($props.info.address)),
                1
                /* TEXT */
              )
            ]),
            $props.info.quoteList[0] ? (vue.openBlock(), vue.createElementBlock("view", {
              key: 0,
              class: "price-info"
            }, [
              vue.createElementVNode("view", { class: "price-unit" }, "¥"),
              vue.createElementVNode(
                "view",
                null,
                vue.toDisplayString($props.info.quoteList[0].quoteAmount),
                1
                /* TEXT */
              )
            ])) : vue.createCommentVNode("v-if", true)
          ])
        ])
      ])
    ]);
  }
  const ConfideTeacherListItem = /* @__PURE__ */ _export_sfc(_sfc_main$1S, [["render", _sfc_render$1R], ["__scopeId", "data-v-5a7db619"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/components/Confide-Teacher-List-Item.vue"]]);
  const _sfc_main$1R = {
    __name: "Consult-Teacher-List-Item",
    props: {
      info: {
        type: Object
      }
    },
    setup(__props, { expose: __expose }) {
      __expose();
      const props = __props;
      const avatarImg = (item) => {
        const { masterGallery } = item;
        if (!masterGallery) {
          return "/static/consult/user.png";
        } else {
          return JSON.parse(masterGallery)[0].url;
        }
      };
      const __returned__ = { props, avatarImg, get formatAddress() {
        return formatAddress;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$1Q(_ctx, _cache, $props, $setup, $data, $options) {
    return vue.openBlock(), vue.createElementBlock("view", { class: "teacher-container" }, [
      vue.createElementVNode("view", { class: "card" }, [
        vue.createElementVNode("view", { class: "avatar-wrap" }, [
          vue.createElementVNode("image", {
            class: "avatar",
            src: $setup.avatarImg($props.info),
            mode: "aspectFill"
          }, null, 8, ["src"]),
          vue.createElementVNode(
            "view",
            { class: "name-title" },
            vue.toDisplayString($props.info.name),
            1
            /* TEXT */
          )
        ]),
        vue.createElementVNode("view", { class: "info-wrap" }, [
          vue.createElementVNode(
            "view",
            { class: "job-title" },
            vue.toDisplayString($props.info.occupationName),
            1
            /* TEXT */
          ),
          vue.createElementVNode("view", { class: "tags" }, [
            (vue.openBlock(true), vue.createElementBlock(
              vue.Fragment,
              null,
              vue.renderList($props.info.serviceTypes.slice(0, 2), (item, index) => {
                return vue.openBlock(), vue.createElementBlock(
                  "text",
                  { class: "tag" },
                  vue.toDisplayString(item),
                  1
                  /* TEXT */
                );
              }),
              256
              /* UNKEYED_FRAGMENT */
            ))
          ]),
          vue.createElementVNode("view", { class: "stats" }, [
            vue.createElementVNode("view", { class: "stats-item" }, [
              vue.createElementVNode(
                "view",
                { class: "num" },
                vue.toDisplayString($props.info.platformHours) + "+",
                1
                /* TEXT */
              ),
              vue.createElementVNode("view", null, "平台时长")
            ]),
            vue.createElementVNode("view", { class: "stats-item" }, [
              vue.createElementVNode(
                "view",
                { class: "num" },
                vue.toDisplayString($props.info.years) + "年",
                1
                /* TEXT */
              ),
              vue.createElementVNode("view", null, "从业时间")
            ]),
            vue.createElementVNode("view", { class: "stats-item" }, [
              vue.createElementVNode(
                "view",
                { class: "num" },
                vue.toDisplayString($props.info.commentCount) + "+",
                1
                /* TEXT */
              ),
              vue.createElementVNode("view", null, "咨询人数")
            ]),
            vue.createElementVNode("view", { class: "stats-item" }, [
              vue.createElementVNode(
                "view",
                { class: "num" },
                vue.toDisplayString($props.info.commentCount) + "+",
                1
                /* TEXT */
              ),
              vue.createElementVNode("view", null, "咨询感受")
            ])
          ]),
          vue.createElementVNode("view", { class: "price-button" }, [
            vue.createElementVNode("view", { class: "contact" }, [
              vue.createElementVNode("image", { src: _imports_2$8 }),
              vue.createElementVNode(
                "view",
                null,
                vue.toDisplayString($setup.formatAddress($props.info.address)),
                1
                /* TEXT */
              )
            ]),
            $props.info.quoteList[0] ? (vue.openBlock(), vue.createElementBlock("view", {
              key: 0,
              class: "price-info"
            }, [
              vue.createElementVNode("view", { class: "price-unit" }, "¥"),
              vue.createElementVNode(
                "view",
                null,
                vue.toDisplayString($props.info.quoteList[0].quoteAmount),
                1
                /* TEXT */
              )
            ])) : vue.createCommentVNode("v-if", true)
          ])
        ])
      ])
    ]);
  }
  const ConsultTeacherListItem = /* @__PURE__ */ _export_sfc(_sfc_main$1R, [["render", _sfc_render$1Q], ["__scopeId", "data-v-07f0244f"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/components/Consult-Teacher-List-Item.vue"]]);
  const _sfc_main$1Q = {
    __name: "Recommend-Article-Item",
    props: {
      info: {
        type: Object
      }
    },
    setup(__props, { expose: __expose }) {
      __expose();
      const props = __props;
      const __returned__ = { props };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$1P(_ctx, _cache, $props, $setup, $data, $options) {
    return vue.openBlock(), vue.createElementBlock("view", { class: "recommend-article-Item" }, [
      vue.createElementVNode("view", { class: "recommend-article-content" }, [
        $props.info ? (vue.openBlock(), vue.createElementBlock(
          "view",
          {
            key: 0,
            class: "content"
          },
          vue.toDisplayString($props.info.title),
          1
          /* TEXT */
        )) : vue.createCommentVNode("v-if", true),
        $props.info ? (vue.openBlock(), vue.createElementBlock(
          "view",
          {
            key: 1,
            class: "content"
          },
          vue.toDisplayString($props.info.content),
          1
          /* TEXT */
        )) : vue.createCommentVNode("v-if", true),
        vue.createElementVNode("view", { class: "info" }, [
          vue.createElementVNode("view", { class: "user" }, [
            vue.createElementVNode("image", {
              src: _imports_0$n,
              class: "picture"
            }),
            vue.createElementVNode(
              "text",
              { class: "name" },
              vue.toDisplayString($props.info.realName),
              1
              /* TEXT */
            )
          ]),
          vue.createElementVNode("view", { class: "view" }, " 浏览7876 "),
          vue.createElementVNode(
            "view",
            { class: "date" },
            vue.toDisplayString($props.info.createTime.substring(0, 10)),
            1
            /* TEXT */
          )
        ])
      ]),
      vue.createElementVNode("view", { class: "recommend-article-image" }, [
        vue.createElementVNode("image", {
          src: $props.info.imageUrl
        }, null, 8, ["src"])
      ])
    ]);
  }
  const RecommendArticleItem = /* @__PURE__ */ _export_sfc(_sfc_main$1Q, [["render", _sfc_render$1P], ["__scopeId", "data-v-c9e42a9c"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/components/Recommend-Article-Item.vue"]]);
  const _imports_0$m = "/static/consult/user.png";
  const _sfc_main$1P = {
    __name: "Forum-Item",
    props: {
      info: {
        type: Object
      }
    },
    setup(__props, { expose: __expose }) {
      __expose();
      const props = __props;
      const __returned__ = { props };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$1O(_ctx, _cache, $props, $setup, $data, $options) {
    return vue.openBlock(), vue.createElementBlock("view", { class: "forum-Item" }, [
      vue.createElementVNode("view", { class: "forum-content" }, [
        vue.createElementVNode(
          "view",
          { class: "content" },
          vue.toDisplayString($props.info.content),
          1
          /* TEXT */
        ),
        vue.createElementVNode("view", { class: "forum-image" }, [
          vue.createElementVNode("scroll-view", {
            class: "scroll-view_H",
            "scroll-x": "true"
          }, [
            vue.createElementVNode("view", { class: "forum-image-list" }, [
              (vue.openBlock(), vue.createElementBlock(
                vue.Fragment,
                null,
                vue.renderList(10, (i2) => {
                  return vue.createElementVNode("image", {
                    src: _imports_0$m,
                    class: "img"
                  });
                }),
                64
                /* STABLE_FRAGMENT */
              ))
            ])
          ])
        ]),
        vue.createElementVNode("view", { class: "info" }, [
          vue.createElementVNode("text", { class: "date" }, " 2025/01/02 "),
          vue.createElementVNode("text", { class: "date" }, "·"),
          vue.createElementVNode("text", { class: "view" }, " 浏览7876 ")
        ])
      ])
    ]);
  }
  const ForumItem = /* @__PURE__ */ _export_sfc(_sfc_main$1P, [["render", _sfc_render$1O], ["__scopeId", "data-v-94df90e2"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/components/Forum-Item.vue"]]);
  const postCategoryList = (params, config2 = {}) => http$1.post(`/api/mall/category/list`, params, config2);
  const getProductsByCategory = (params, config2 = {}) => http$1.get(`/api/mall/product/category`, params, config2);
  const getRecommendedProducts = (params, config2 = {}) => http$1.get(`/api/mall/product/recommended`, params, config2);
  const getProductDetail = (params, config2 = {}) => http$1.get(`api/mall/product/detail?id=${params}`, config2);
  const addCart = (data, config2 = {}) => http$1.post(`/api/mall/cart/add`, data, config2);
  const getCartList = (params, config2 = {}) => http$1.get(`/api/mall/cart/list`, params, config2);
  const deleteCartItem = (data, config2 = {}) => http$1.post(`/api/mall/cart/delete`, data, config2);
  const batchDeleteCartItems = (data, config2 = {}) => http$1.post(`/api/mall/cart/batchDelete`, data, config2);
  const getAddressList = (params, config2 = {}) => http$1.get(`/api/mall/address/list`, params, config2);
  const addAddress = (data, config2 = {}) => http$1.post(`/api/mall/address/add`, data, config2);
  const updateAddress = (data, config2 = {}) => http$1.post(`/api/mall/address/update`, data, config2);
  const deleteAddress = (data, config2 = {}) => http$1.post(`/api/mall/address/delete`, data, config2);
  const getDefaultAddress = (params, config2 = {}) => http$1.get(`/api/mall/address/default`, params, config2);
  const getRefundDetail = (params, config2 = {}) => http$1.get(`/api/mall/refund/detail?id=${params}`, config2);
  const updateCartItem = (data, config2 = {}) => http$1.post(`/api/mall/cart/update`, data, config2);
  const submitOrder = (data, config2 = {}) => http$1.post(`/api/mall/order/create`, data, config2);
  const getOrderDetail = (params, config2 = {}) => http$1.get(`/api/mall/order/detail?id=${params}`, config2);
  const _imports_0$l = "/static/index/grass.png";
  const _imports_1$e = "/static/index/logo.png";
  const _imports_0$k = "/static/index/subscript.png";
  const _imports_3$3 = "/static/index/privacy.png";
  const _imports_4$3 = "/static/index/fairness.png";
  const _imports_5$1 = "/static/index/money.png";
  const _imports_0$j = "/static/settled/selectimg.png";
  const _imports_7 = "/static/index/shopping-img.png";
  const _imports_8$1 = "/static/index/psychology-tree.png";
  const _imports_9$1 = "/static/index/psychology-content-img.png";
  const _imports_10 = "/static/index/lock.png";
  const _sfc_main$1O = {
    __name: "index",
    setup(__props, { expose: __expose }) {
      __expose();
      vue.useCssVars((_ctx) => ({
        "1cf27b2a-searchContentHeight": searchContentHeight.value,
        "1cf27b2a-statusBarHeight": statusBarHeight.value,
        "1cf27b2a-searchSwiperHeight": searchSwiperHeight.value
      }));
      const banners = vue.ref([]);
      const homeExams = vue.ref([]);
      const globalStore = useGlobalDataStore();
      const statusBarHeight = vue.ref(globalStore.statusBarHeight + 20 + "rpx");
      const searchContentHeight = vue.ref(globalStore.statusBarHeight + 56 + "rpx");
      const searchSwiperHeight = vue.ref(globalStore.statusBarHeight + 95 + "rpx");
      let scrollTop = vue.ref(0);
      const listenerMenu = vue.ref([]);
      uni.$currentUser = uni.getStorageSync("currentUser");
      let currentUser = vue.ref();
      const gotoListPage = (menu) => {
        uni.switchTab({
          url: "/pages/consult/index?type=" + menu.title
        });
      };
      onShow(() => {
        uni.$currentUser = uni.getStorageSync("currentUser");
        if (!uni.$currentUser.id) {
          uni.navigateTo({
            url: "./login"
          });
          return;
        }
        currentUser.value = uni.$currentUser;
        getBanners();
        getMallSwitchApi();
      });
      const getBanners = async () => {
        let res2 = await bannerList();
        banners.value = res2.data;
      };
      const categoryList = vue.ref([]);
      const currentCategoryId = vue.ref(0);
      const getProductsByCategoryApi = async () => {
        let res2 = await postCategoryList();
        currentCategoryId.value = res2.data[0].id;
        loadGoodsByCategory(res2.data[0].id);
        categoryList.value = res2.data;
      };
      const handleCategoryClick = (category) => {
        currentCategoryId.value = category.id;
        loadGoodsByCategory(category.id);
      };
      const goodsList = vue.ref([]);
      const loadGoodsByCategory = async (categoryId) => {
        const { data: data2 } = await getProductsByCategory({ categoryId });
        goodsList.value = data2.records;
      };
      const goProductDetail = (id2) => {
        uni.navigateTo({
          url: `/pages/shopping-mall/product-details?id=${id2}`
        });
      };
      const formattedExamNum = (num) => {
        if (num >= 1e4) {
          return (num / 1e4).toFixed(1) + "w";
        }
        return num;
      };
      const gotoDetail = (data2) => {
        uni.navigateTo({
          url: `/pages/psychological-test/charge-test/charge-test?id=${data2.id}`
        });
      };
      const gotoListenPage = (data2) => {
        uni.switchTab({
          url: "/pages/confide/index?type=" + data2.title
        });
      };
      const shoppingMall = () => {
        uni.navigateTo({
          url: "/pages/shopping-mall/mall-home"
        });
      };
      const data = vue.reactive({
        listParams: {
          current: 1,
          size: 10,
          params: {}
        },
        list: [],
        answerlist: [],
        listenerList: [],
        consultantList: []
      });
      let consultantMenuList = vue.ref([]);
      const serverList = vue.ref([
        {
          icon: "/static/index/remark-icon1.png",
          title: "严选师资",
          desc: "5.2万认证咨询师"
        },
        {
          icon: "/static/index/remark-icon2.png",
          title: "专业咨询",
          desc: "累计时长7亿+分钟"
        },
        {
          icon: "/static/index/remark-icon3.png",
          title: "免费退改",
          desc: "承诺限时内可退改"
        },
        {
          icon: "/static/index/remark-icon4.png",
          title: "隐私保障",
          desc: "咨询过程全保密"
        }
      ]);
      const pourOutList = vue.ref([
        {
          id: 1,
          icon: "/static/index/sleep.png",
          title: "睡眠改善"
        },
        {
          id: 2,
          icon: "/static/index/education.png",
          title: "亲子教育"
        },
        {
          id: 3,
          icon: "/static/index/emotion.png",
          title: "情绪压力"
        },
        {
          id: 4,
          icon: "/static/index/matching.png",
          title: "快速匹配"
        },
        {
          id: 5,
          icon: "/static/index/marriage.png",
          title: "婚姻情感"
        }
      ]);
      const searchFn = () => {
      };
      const onPageScroll2 = (e2) => {
        scrollTop.value = e2.detail.scrollTop;
      };
      const openArticleFn = (type) => {
        let url2 = type == 1 ? "/pages/readArticle/readArticle" : "/pages/readArticle/articleDetail";
        uni.navigateTo({
          url: url2
        });
      };
      const openTeacherFn = (type, val2) => {
        let url2 = type == "listener" ? "/pages/confide/detail" : "/pages/consult/detail";
        uni.navigateTo({
          url: url2 + "?id=" + val2.id + "&userId=" + val2.userId
        });
      };
      const openForumHandler = () => {
        uni.navigateTo({
          url: "/pages/forum/index/index"
        });
      };
      const openPsyTestHandler = () => {
        uni.navigateTo({
          url: "/pages/psychological-test/index/index"
        });
      };
      const getlnfo = async () => {
        let res2 = await getUserInfo();
        globalStore.setUserInfo(res2.data);
      };
      const openArticleDetailFn = (item) => {
        uni.navigateTo({
          url: "/pages/readArticle/articleDetail?id=" + item.id
        });
      };
      const handover = vue.ref(1);
      const switchClick = (index) => {
        handover.value = index;
      };
      const switchTabsFn = () => {
        let url2 = handover.value == 1 ? "/pages/consult/index" : "/pages/confide/index";
        uni.switchTab({
          url: url2
        });
      };
      const getListener = async () => {
        let res2 = await getListenerList({
          ...data.listParams,
          params: {
            isPreferred: 1
          }
        });
        data.listenerList = res2.data.records;
      };
      const getConsultantListApi = async () => {
        let res2 = await getConsultantList({
          ...data.listParams,
          params: {
            current: 1,
            size: 10,
            isPreferred: 1
          }
        });
        data.consultantList = res2.data.records;
      };
      const getList = async () => {
        let res2 = await getArticleList(data.listParams);
        data.list = res2.data.records;
      };
      const getAnswer = async () => {
        let res2 = await getAnswerList(data.listParams);
        data.answerlist = res2.data.records;
      };
      const getConsultantMenu = async () => {
        let resp = await getConsultantMenus({
          type: 0
        });
        uni.setStorageSync("consultantMenu", JSON.stringify(resp.data));
        let menus = resp.data;
        let showMenus = menus.slice(0, 9);
        showMenus.push({
          name: "全部",
          icon: "/static/index/menu_all.png"
        });
        formatAppLog("log", "at pages/index/index.vue:673", showMenus);
        consultantMenuList.value = showMenus;
      };
      const getListenerMenu = async () => {
        let resp = await getConsultantMenus({
          type: 1
        });
        formatAppLog("log", "at pages/index/index.vue:682", "menu2", resp);
        uni.setStorageSync("listenerMenu", JSON.stringify(resp.data));
        let menus = resp.data;
        let showMenus = menus.slice(0, 8);
        showMenus.push({
          name: "全部",
          icon: "/static/index/l_menu_all.png"
        });
        listenerMenu.value = showMenus;
      };
      const getHomeExams = async () => {
        let resp = await listHomeExams();
        formatAppLog("log", "at pages/index/index.vue:696", resp);
        homeExams.value = resp.data;
      };
      const chunkedExams = vue.computed(() => {
        const chunkSize = 4;
        const result = [];
        for (let i2 = 0; i2 < homeExams.value.length; i2 += chunkSize) {
          result.push(homeExams.value.slice(i2, i2 + chunkSize));
        }
        formatAppLog("log", "at pages/index/index.vue:705", result);
        return result;
      });
      vue.onMounted(() => {
        getlnfo();
        getListener();
        getList();
        getHomeExams();
        getAnswer();
        getConsultantListApi();
        getProductsByCategoryApi();
        let cMenuList = uni.getStorageSync("consultantMenu");
        if (!cMenuList) {
          getConsultantMenu();
        } else {
          let menus = JSON.parse(cMenuList);
          let showMenus = menus.slice(0, 9);
          showMenus.push({
            name: "全部",
            icon: "/static/index/menu_all.png"
          });
          consultantMenuList.value = showMenus;
        }
        let lMenuList = uni.getStorageSync("listenerMenu");
        if (!lMenuList) {
          getListenerMenu();
        } else {
          let menus = JSON.parse(lMenuList);
          let showMenus = menus.slice(0, 8);
          showMenus.push({
            name: "全部",
            icon: "/static/index/l_menu_all.png"
          });
          listenerMenu.value = showMenus;
        }
      });
      const getMallSwitchApi = async () => {
        try {
          const { data: data2 } = await getMallSwitch();
          uni.setStorageSync("mallSwitch", data2);
          globalStore.setMallSwitch(data2);
        } catch (error) {
          formatAppLog("log", "at pages/index/index.vue:751", error);
        }
      };
      const __returned__ = { banners, homeExams, globalStore, statusBarHeight, searchContentHeight, searchSwiperHeight, get scrollTop() {
        return scrollTop;
      }, set scrollTop(v2) {
        scrollTop = v2;
      }, listenerMenu, get currentUser() {
        return currentUser;
      }, set currentUser(v2) {
        currentUser = v2;
      }, gotoListPage, getBanners, categoryList, currentCategoryId, getProductsByCategoryApi, handleCategoryClick, goodsList, loadGoodsByCategory, goProductDetail, formattedExamNum, gotoDetail, gotoListenPage, shoppingMall, data, get consultantMenuList() {
        return consultantMenuList;
      }, set consultantMenuList(v2) {
        consultantMenuList = v2;
      }, serverList, pourOutList, searchFn, onPageScroll: onPageScroll2, openArticleFn, openTeacherFn, openForumHandler, openPsyTestHandler, getlnfo, openArticleDetailFn, handover, switchClick, switchTabsFn, getListener, getConsultantListApi, getList, getAnswer, getConsultantMenu, getListenerMenu, getHomeExams, chunkedExams, getMallSwitchApi, get getUserInfo() {
        return getUserInfo;
      }, get getMallSwitch() {
        return getMallSwitch;
      }, get getArticleList() {
        return getArticleList;
      }, get getListenerList() {
        return getListenerList;
      }, get getAnswerList() {
        return getAnswerList;
      }, get bannerList() {
        return bannerList;
      }, get getConsultantMenus() {
        return getConsultantMenus;
      }, get listHomeExams() {
        return listHomeExams;
      }, ref: vue.ref, onMounted: vue.onMounted, reactive: vue.reactive, computed: vue.computed, get onShow() {
        return onShow;
      }, ConfideTeacherListItem, ConsultTeacherListItem, get RecommendArticleItem() {
        return RecommendArticleItem;
      }, get ForumItem() {
        return ForumItem;
      }, get useGlobalDataStore() {
        return useGlobalDataStore;
      }, get getConsultantList() {
        return getConsultantList;
      }, get postCategoryList() {
        return postCategoryList;
      }, get getProductsByCategory() {
        return getProductsByCategory;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$1N(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_search_bar = resolveEasycom(vue.resolveDynamicComponent("uni-search-bar"), __easycom_0$6);
    const _component_viwe = vue.resolveComponent("viwe");
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    return vue.openBlock(), vue.createElementBlock(
      "view",
      {
        class: "home-box",
        ref: "homBox"
      },
      [
        vue.createElementVNode(
          "scroll-view",
          {
            "scroll-y": "",
            onScroll: $setup.onPageScroll,
            class: "scroll-content",
            "show-scrollbar": false
          },
          [
            vue.createElementVNode("view", { class: "header" }, [
              vue.createElementVNode("view", { class: "grass" }, [
                vue.createElementVNode("image", {
                  src: _imports_0$l,
                  class: "img"
                })
              ]),
              vue.createElementVNode("view", { class: "contaior" }, [
                vue.createElementVNode(
                  "view",
                  {
                    class: vue.normalizeClass(["search-content", $setup.scrollTop > 15 ? "scrollClass" : ""])
                  },
                  [
                    vue.createElementVNode("view", { class: "contact" }, [
                      vue.createElementVNode("image", {
                        src: _imports_1$e,
                        class: "logo-image"
                      })
                    ]),
                    vue.createElementVNode("view", { class: "search" }, [
                      vue.createVNode(_component_uni_search_bar, {
                        class: "uni-mt-10",
                        radius: "100",
                        placeholder: "搜索内容",
                        clearButton: "auto",
                        cancelButton: "none",
                        onConfirm: $setup.searchFn
                      })
                    ]),
                    vue.createElementVNode("view", { class: "contact" }, [
                      vue.createElementVNode("image", {
                        src: $setup.scrollTop > 15 ? "/static/index/scroll-notice.png" : "/static/index/notice.png"
                      }, null, 8, ["src"])
                    ])
                  ],
                  2
                  /* CLASS */
                ),
                vue.createElementVNode("view", { class: "swiper-content" }, [
                  vue.createElementVNode("view", { class: "uni-margin-wrap" }, [
                    vue.createElementVNode("swiper", {
                      class: "swiper",
                      circular: "",
                      "indicator-dots": true,
                      autoplay: true,
                      interval: 5e3,
                      duration: 500
                    }, [
                      (vue.openBlock(true), vue.createElementBlock(
                        vue.Fragment,
                        null,
                        vue.renderList($setup.banners, (i2, index) => {
                          return vue.openBlock(), vue.createElementBlock("swiper-item", {
                            key: index,
                            class: "swiper-item"
                          }, [
                            vue.createElementVNode("view", { class: "swiper-item uni-bg-red" }, [
                              vue.createElementVNode("image", {
                                src: i2.image,
                                mode: "aspectFill",
                                class: "img"
                              }, null, 8, ["src"])
                            ])
                          ]);
                        }),
                        128
                        /* KEYED_FRAGMENT */
                      ))
                    ])
                  ])
                ]),
                vue.createElementVNode("view", { class: "pour-out-box" }, [
                  vue.createElementVNode("view", { class: "pour-out-header" }, [
                    vue.createElementVNode("view", { class: "title" }, [
                      vue.createElementVNode("view", null, "倾听专区"),
                      vue.createElementVNode("image", { src: _imports_0$k })
                    ]),
                    vue.createElementVNode("view", { class: "features" }, [
                      vue.createElementVNode("view", { class: "feature-item" }, [
                        vue.createElementVNode("image", { src: _imports_3$3 }),
                        vue.createElementVNode("view", null, "隐私保密")
                      ]),
                      vue.createElementVNode("view", { class: "feature-item" }, [
                        vue.createElementVNode("image", { src: _imports_4$3 }),
                        vue.createElementVNode("view", null, "严格把控")
                      ]),
                      vue.createElementVNode("view", { class: "feature-item" }, [
                        vue.createElementVNode("image", { src: _imports_5$1 }),
                        vue.createElementVNode("view", null, "随用随退")
                      ])
                    ])
                  ]),
                  vue.createElementVNode("view", { class: "pour-out-list" }, [
                    (vue.openBlock(true), vue.createElementBlock(
                      vue.Fragment,
                      null,
                      vue.renderList($setup.pourOutList, (item, index) => {
                        return vue.openBlock(), vue.createElementBlock("view", {
                          key: index + item.id,
                          class: "pour-out-item",
                          onClick: ($event) => $setup.gotoListenPage(item)
                        }, [
                          vue.createElementVNode("image", {
                            src: item.icon
                          }, null, 8, ["src"]),
                          vue.createElementVNode(
                            "view",
                            null,
                            vue.toDisplayString(item.title),
                            1
                            /* TEXT */
                          )
                        ], 8, ["onClick"]);
                      }),
                      128
                      /* KEYED_FRAGMENT */
                    ))
                  ])
                ])
              ])
            ]),
            vue.createElementVNode("view", { class: "psychological-box" }, [
              vue.createElementVNode("view", { class: "psychological-header" }, [
                vue.createElementVNode("view", { class: "title" }, [
                  vue.createElementVNode("text", null, "心理咨询师专区"),
                  vue.createElementVNode("image", {
                    src: _imports_0$k,
                    class: "subscript"
                  })
                ])
              ]),
              vue.createElementVNode("view", { class: "info-bar" }, [
                vue.createElementVNode("text", { class: "bar-txt" }, "本专区咨询师都持有国家相关资格证书")
              ]),
              vue.createElementVNode("view", { class: "icon-grid" }, [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($setup.consultantMenuList, (item, index) => {
                    return vue.openBlock(), vue.createElementBlock("view", {
                      class: "icon-item",
                      onClick: ($event) => $setup.gotoListPage(item),
                      key: index
                    }, [
                      vue.createElementVNode("view", { class: "icon-circle" }, [
                        vue.createElementVNode("image", {
                          src: item.icon == "" ? "@/static/index/icon1.png" : item.icon,
                          class: "img"
                        }, null, 8, ["src"])
                      ]),
                      vue.createElementVNode(
                        "text",
                        { class: "icon-text" },
                        vue.toDisplayString(item.name),
                        1
                        /* TEXT */
                      )
                    ], 8, ["onClick"]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                ))
              ])
            ]),
            vue.createElementVNode("view", {
              class: "swiper-content",
              style: { "padding-top": "0" }
            }, [
              vue.createElementVNode("view", { class: "title" }, [
                vue.createVNode(_component_viwe, null, {
                  default: vue.withCtx(() => [
                    vue.createTextVNode("名师堂专区")
                  ]),
                  _: 1
                  /* STABLE */
                }),
                vue.createElementVNode("image", {
                  src: _imports_0$k,
                  class: "subscript"
                })
              ]),
              vue.createElementVNode("view", { class: "uni-margin-wrap" }, [
                vue.createElementVNode("swiper", {
                  class: "swiper",
                  circular: "",
                  "indicator-dots": true,
                  autoplay: true,
                  interval: 5e3,
                  duration: 500
                }, [
                  (vue.openBlock(true), vue.createElementBlock(
                    vue.Fragment,
                    null,
                    vue.renderList($setup.banners, (i2, index) => {
                      return vue.openBlock(), vue.createElementBlock("swiper-item", {
                        key: index,
                        class: "swiper-item"
                      }, [
                        vue.createElementVNode("view", { class: "swiper-item uni-bg-red" }, [
                          vue.createElementVNode("image", {
                            src: i2.image,
                            mode: "aspectFill",
                            class: "img"
                          }, null, 8, ["src"])
                        ])
                      ]);
                    }),
                    128
                    /* KEYED_FRAGMENT */
                  ))
                ])
              ])
            ]),
            $setup.globalStore.mallSwitch ? (vue.openBlock(), vue.createElementBlock("view", {
              key: 0,
              class: "hot-psychological-box"
            }, [
              vue.createElementVNode("view", { class: "hot-psychological-header" }, [
                vue.createElementVNode("view", { class: "title" }, [
                  vue.createElementVNode("view", null, "麦苗健康商城"),
                  vue.createElementVNode("image", {
                    src: _imports_0$k,
                    class: "subscript"
                  })
                ]),
                vue.createElementVNode("view", {
                  class: "more",
                  onClick: $setup.shoppingMall
                }, [
                  vue.createTextVNode("更多"),
                  vue.createVNode(_component_uni_icons, {
                    type: "right",
                    size: "12",
                    color: "rgba(0, 0, 0, 0.5)"
                  })
                ])
              ]),
              vue.createElementVNode("scroll-view", {
                class: "category-scroll",
                "scroll-x": "true",
                "show-scrollbar": "false"
              }, [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($setup.categoryList, (item, idx) => {
                    return vue.openBlock(), vue.createElementBlock("view", {
                      class: vue.normalizeClass(["category-item", { active: $setup.currentCategoryId === item.id }]),
                      key: item.id,
                      onClick: ($event) => $setup.handleCategoryClick(item)
                    }, [
                      vue.createElementVNode("view", { class: "category-name" }, [
                        vue.createElementVNode(
                          "view",
                          null,
                          vue.toDisplayString(item.name),
                          1
                          /* TEXT */
                        ),
                        item.id == $setup.currentCategoryId ? (vue.openBlock(), vue.createElementBlock("image", {
                          key: 0,
                          src: _imports_0$j
                        })) : vue.createCommentVNode("v-if", true),
                        item.id == $setup.currentCategoryId ? (vue.openBlock(), vue.createElementBlock("view", {
                          key: 1,
                          class: "line"
                        })) : vue.createCommentVNode("v-if", true)
                      ])
                    ], 10, ["onClick"]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                ))
              ]),
              vue.createElementVNode("view", { class: "goods-box" }, [
                vue.createElementVNode("image", {
                  src: _imports_7,
                  class: "shopping-img"
                }),
                vue.createElementVNode("scroll-view", {
                  class: "goods-scroll",
                  "scroll-x": "true",
                  "show-scrollbar": "false"
                }, [
                  (vue.openBlock(true), vue.createElementBlock(
                    vue.Fragment,
                    null,
                    vue.renderList($setup.goodsList, (goods, idx) => {
                      return vue.openBlock(), vue.createElementBlock("view", {
                        class: "goods-item",
                        key: goods.id,
                        onClick: ($event) => $setup.goProductDetail(goods.id)
                      }, [
                        vue.createElementVNode("image", {
                          class: "goods-thumb",
                          src: goods.thumbnail,
                          mode: "widthFix"
                        }, null, 8, ["src"]),
                        vue.createElementVNode(
                          "view",
                          { class: "goods-name" },
                          vue.toDisplayString(goods.name),
                          1
                          /* TEXT */
                        ),
                        vue.createElementVNode(
                          "view",
                          { class: "goods-price" },
                          "¥" + vue.toDisplayString(goods.minPrice),
                          1
                          /* TEXT */
                        )
                      ], 8, ["onClick"]);
                    }),
                    128
                    /* KEYED_FRAGMENT */
                  )),
                  !$setup.goodsList.length ? (vue.openBlock(), vue.createElementBlock("view", {
                    key: 0,
                    class: "no-goods"
                  }, "暂无商品")) : vue.createCommentVNode("v-if", true)
                ])
              ])
            ])) : vue.createCommentVNode("v-if", true),
            vue.createElementVNode("view", { class: "hot-psychological-box hot-psychological-box2" }, [
              vue.createElementVNode("view", { class: "hot-psychological-header" }, [
                vue.createElementVNode("view", { class: "title title2" }, [
                  vue.createElementVNode(
                    "view",
                    {
                      class: "psychology",
                      style: vue.normalizeStyle([{ "left": "0" }, {
                        top: $setup.handover == 1 ? "0" : "23rpx",
                        color: $setup.handover == 1 ? "" : "#a3a3a3"
                      }]),
                      onClick: _cache[0] || (_cache[0] = ($event) => $setup.switchClick(1))
                    },
                    "热门心理咨询师",
                    4
                    /* STYLE */
                  ),
                  vue.createElementVNode(
                    "image",
                    {
                      class: vue.normalizeClass($setup.handover == 1 ? "" : "subscriptImg"),
                      src: _imports_0$k
                    },
                    null,
                    2
                    /* CLASS */
                  ),
                  vue.createElementVNode(
                    "view",
                    {
                      class: "subscript",
                      style: vue.normalizeStyle([{ "left": "285rpx" }, {
                        top: $setup.handover == 1 ? "20rpx" : "0",
                        color: $setup.handover == 2 ? "" : "#a3a3a3"
                      }]),
                      onClick: _cache[1] || (_cache[1] = ($event) => $setup.switchClick(2))
                    },
                    "热门倾听师",
                    4
                    /* STYLE */
                  )
                ]),
                vue.createElementVNode("view", {
                  class: "more",
                  onClick: _cache[2] || (_cache[2] = ($event) => $setup.switchTabsFn())
                }, [
                  vue.createTextVNode("更多"),
                  vue.createVNode(_component_uni_icons, {
                    type: "right",
                    size: "12",
                    color: "rgba(0, 0, 0, 0.5)"
                  })
                ])
              ]),
              vue.createElementVNode("scroll-view", {
                class: "scroll-view_H",
                "scroll-x": "true",
                "scroll-left": "0",
                "show-scrollbar": false
              }, [
                vue.createElementVNode("view", { class: "scroll-wrap" }, [
                  $setup.handover == 1 ? (vue.openBlock(), vue.createElementBlock("view", {
                    key: 0,
                    class: "list"
                  }, [
                    (vue.openBlock(true), vue.createElementBlock(
                      vue.Fragment,
                      null,
                      vue.renderList($setup.data.consultantList, (item, index) => {
                        return vue.openBlock(), vue.createBlock($setup["ConsultTeacherListItem"], {
                          class: "list-item",
                          info: item,
                          key: item.id,
                          onClick: ($event) => $setup.openTeacherFn(item.source, item)
                        }, null, 8, ["info", "onClick"]);
                      }),
                      128
                      /* KEYED_FRAGMENT */
                    ))
                  ])) : vue.createCommentVNode("v-if", true),
                  $setup.handover == 2 ? (vue.openBlock(), vue.createElementBlock("view", {
                    key: 1,
                    class: "list"
                  }, [
                    (vue.openBlock(true), vue.createElementBlock(
                      vue.Fragment,
                      null,
                      vue.renderList($setup.data.listenerList, (item, index) => {
                        return vue.openBlock(), vue.createBlock($setup["ConfideTeacherListItem"], {
                          class: "list-item confide-list-item",
                          info: item,
                          key: item.id,
                          onClick: ($event) => $setup.openTeacherFn("listener", item)
                        }, null, 8, ["info", "onClick"]);
                      }),
                      128
                      /* KEYED_FRAGMENT */
                    ))
                  ])) : vue.createCommentVNode("v-if", true)
                ])
              ])
            ]),
            vue.createElementVNode("view", { class: "psychology-test-box" }, [
              vue.createElementVNode("image", {
                class: "img",
                src: _imports_8$1
              }),
              vue.createElementVNode("view", { class: "psychology-content" }, [
                vue.createElementVNode("view", { class: "psychology-content-header" }, [
                  vue.createElementVNode("view", { class: "title" }, [
                    vue.createElementVNode("view", { class: "psychology" }, "心理测试"),
                    vue.createElementVNode("image", {
                      src: _imports_0$k,
                      class: "subscript"
                    })
                  ]),
                  vue.createElementVNode("view", {
                    class: "more",
                    onClick: $setup.openPsyTestHandler
                  }, [
                    vue.createElementVNode("text", null, "更多"),
                    vue.createVNode(_component_uni_icons, {
                      type: "right",
                      size: "12",
                      color: "rgba(0, 0, 0, 0.5)"
                    })
                  ])
                ]),
                vue.createElementVNode("view", { class: "psychology-content-img" }, [
                  vue.createElementVNode("image", {
                    src: _imports_9$1,
                    class: "content-img"
                  })
                ]),
                vue.createElementVNode("swiper", {
                  class: "content-swiper",
                  "indicator-dots": true,
                  autoplay: false,
                  "indicator-active-color": "#35CA95"
                }, [
                  (vue.openBlock(true), vue.createElementBlock(
                    vue.Fragment,
                    null,
                    vue.renderList($setup.chunkedExams, (page, pageIndex) => {
                      return vue.openBlock(), vue.createElementBlock("swiper-item", { key: pageIndex }, [
                        vue.createElementVNode("view", { class: "content-list" }, [
                          (vue.openBlock(true), vue.createElementBlock(
                            vue.Fragment,
                            null,
                            vue.renderList(page, (item, index) => {
                              return vue.openBlock(), vue.createElementBlock("view", {
                                class: "content-item",
                                key: index,
                                onClick: ($event) => $setup.gotoDetail(item)
                              }, [
                                vue.createElementVNode("view", { class: "lock" }, [
                                  vue.createElementVNode("image", {
                                    src: _imports_10,
                                    class: "lock-img"
                                  })
                                ]),
                                vue.createElementVNode("view", { class: "info" }, [
                                  vue.createElementVNode(
                                    "div",
                                    { class: "title" },
                                    vue.toDisplayString(item.title),
                                    1
                                    /* TEXT */
                                  ),
                                  vue.createElementVNode(
                                    "div",
                                    { class: "num" },
                                    vue.toDisplayString($setup.formattedExamNum(item.examNum)) + " 人已测 ",
                                    1
                                    /* TEXT */
                                  ),
                                  vue.createElementVNode("div", { class: "test-btn" }, "开始测试")
                                ]),
                                vue.createElementVNode("image", {
                                  src: item.icon || "/static/index/psychology-content-icon.png",
                                  class: "content-item-img"
                                }, null, 8, ["src"])
                              ], 8, ["onClick"]);
                            }),
                            128
                            /* KEYED_FRAGMENT */
                          ))
                        ])
                      ]);
                    }),
                    128
                    /* KEYED_FRAGMENT */
                  ))
                ])
              ])
            ]),
            vue.createElementVNode("view", { class: "recommend-article-box" }, [
              vue.createElementVNode("view", { class: "recommend-article-header" }, [
                vue.createElementVNode("view", { class: "title" }, [
                  vue.createElementVNode("view", null, "文章推荐"),
                  vue.createElementVNode("image", {
                    src: _imports_0$k,
                    class: "subscript"
                  })
                ]),
                vue.createElementVNode("view", {
                  class: "more",
                  onClick: _cache[3] || (_cache[3] = ($event) => $setup.openArticleFn(1))
                }, [
                  vue.createTextVNode("更多"),
                  vue.createVNode(_component_uni_icons, {
                    type: "right",
                    size: "12",
                    color: "rgba(0, 0, 0, 0.5)"
                  })
                ])
              ]),
              vue.createElementVNode("view", { class: "article-list" }, [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($setup.data.list, (i2) => {
                    return vue.openBlock(), vue.createBlock($setup["RecommendArticleItem"], {
                      info: i2,
                      class: "article-item",
                      onClick: ($event) => $setup.openArticleDetailFn(i2)
                    }, null, 8, ["info", "onClick"]);
                  }),
                  256
                  /* UNKEYED_FRAGMENT */
                ))
              ])
            ]),
            vue.createElementVNode("view", { class: "mm-forum-box" }, [
              vue.createElementVNode("view", { class: "mm-forum-header" }, [
                vue.createElementVNode("view", { class: "title" }, [
                  vue.createElementVNode("view", null, "麦苗论坛"),
                  vue.createElementVNode("image", {
                    src: _imports_0$k,
                    class: "subscript"
                  })
                ]),
                vue.createElementVNode("view", {
                  class: "more",
                  onClick: $setup.openForumHandler
                }, [
                  vue.createTextVNode("更多"),
                  vue.createVNode(_component_uni_icons, {
                    type: "right",
                    size: "12",
                    color: "rgba(0, 0, 0, 0.5)"
                  })
                ])
              ]),
              vue.createElementVNode("view", { class: "forum-list" }, [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($setup.data.answerlist, (i2) => {
                    return vue.openBlock(), vue.createBlock($setup["ForumItem"], {
                      info: i2,
                      class: "forum-content"
                    }, null, 8, ["info"]);
                  }),
                  256
                  /* UNKEYED_FRAGMENT */
                ))
              ])
            ]),
            vue.createElementVNode("view", { class: "remark-box" }, [
              vue.createElementVNode("view", { class: "title" }, "专业的心理服务平台"),
              vue.createElementVNode("view", { class: "hotline" }, [
                vue.createTextVNode(" 7×24 小时专属顾问热线： "),
                vue.createElementVNode("text", { class: "phone" }, "400-6688-999")
              ]),
              vue.createElementVNode("view", { class: "feature-container" }, [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($setup.serverList, (item, index) => {
                    return vue.openBlock(), vue.createElementBlock("view", {
                      class: "feature-item",
                      key: index
                    }, [
                      vue.createElementVNode("image", {
                        class: "icon",
                        src: item.icon,
                        mode: "aspectFit"
                      }, null, 8, ["src"]),
                      vue.createElementVNode("view", { class: "content" }, [
                        vue.createElementVNode(
                          "text",
                          { class: "feature-title" },
                          vue.toDisplayString(item.title),
                          1
                          /* TEXT */
                        ),
                        vue.createElementVNode(
                          "text",
                          { class: "feature-desc" },
                          vue.toDisplayString(item.desc),
                          1
                          /* TEXT */
                        )
                      ])
                    ]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                ))
              ])
            ])
          ],
          32
          /* NEED_HYDRATION */
        )
      ],
      512
      /* NEED_PATCH */
    );
  }
  const PagesIndexIndex = /* @__PURE__ */ _export_sfc(_sfc_main$1O, [["render", _sfc_render$1N], ["__scopeId", "data-v-1cf27b2a"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/index/index.vue"]]);
  const _sfc_main$1N = {
    name: "UniBadge",
    emits: ["click"],
    props: {
      type: {
        type: String,
        default: "error"
      },
      inverted: {
        type: Boolean,
        default: false
      },
      isDot: {
        type: Boolean,
        default: false
      },
      maxNum: {
        type: Number,
        default: 99
      },
      absolute: {
        type: String,
        default: ""
      },
      offset: {
        type: Array,
        default() {
          return [0, 0];
        }
      },
      text: {
        type: [String, Number],
        default: ""
      },
      size: {
        type: String,
        default: "small"
      },
      customStyle: {
        type: Object,
        default() {
          return {};
        }
      }
    },
    data() {
      return {};
    },
    computed: {
      width() {
        return String(this.text).length * 8 + 12;
      },
      classNames() {
        const {
          inverted,
          type,
          size,
          absolute
        } = this;
        return [
          inverted ? "uni-badge--" + type + "-inverted" : "",
          "uni-badge--" + type,
          "uni-badge--" + size,
          absolute ? "uni-badge--absolute" : ""
        ].join(" ");
      },
      positionStyle() {
        if (!this.absolute)
          return {};
        let w2 = this.width / 2, h2 = 10;
        if (this.isDot) {
          w2 = 5;
          h2 = 5;
        }
        const x = `${-w2 + this.offset[0]}px`;
        const y2 = `${-h2 + this.offset[1]}px`;
        const whiteList = {
          rightTop: {
            right: x,
            top: y2
          },
          rightBottom: {
            right: x,
            bottom: y2
          },
          leftBottom: {
            left: x,
            bottom: y2
          },
          leftTop: {
            left: x,
            top: y2
          }
        };
        const match = whiteList[this.absolute];
        return match ? match : whiteList["rightTop"];
      },
      dotStyle() {
        if (!this.isDot)
          return {};
        return {
          width: "10px",
          minWidth: "0",
          height: "10px",
          padding: "0",
          borderRadius: "10px"
        };
      },
      displayValue() {
        const {
          isDot,
          text,
          maxNum
        } = this;
        return isDot ? "" : Number(text) > maxNum ? `${maxNum}+` : text;
      }
    },
    methods: {
      onClick() {
        this.$emit("click");
      }
    }
  };
  function _sfc_render$1M(_ctx, _cache, $props, $setup, $data, $options) {
    return vue.openBlock(), vue.createElementBlock("view", { class: "uni-badge--x" }, [
      vue.renderSlot(_ctx.$slots, "default", {}, void 0, true),
      $props.text ? (vue.openBlock(), vue.createElementBlock(
        "text",
        {
          key: 0,
          class: vue.normalizeClass([$options.classNames, "uni-badge"]),
          style: vue.normalizeStyle([$options.positionStyle, $props.customStyle, $options.dotStyle]),
          onClick: _cache[0] || (_cache[0] = ($event) => $options.onClick())
        },
        vue.toDisplayString($options.displayValue),
        7
        /* TEXT, CLASS, STYLE */
      )) : vue.createCommentVNode("v-if", true)
    ]);
  }
  const __easycom_0$3 = /* @__PURE__ */ _export_sfc(_sfc_main$1N, [["render", _sfc_render$1M], ["__scopeId", "data-v-c97cb896"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/uni_modules/uni-badge/components/uni-badge/uni-badge.vue"]]);
  const _imports_0$i = "/static/consult/contect.png";
  const _imports_1$d = "/static/message/use-read.svg";
  const _sfc_main$1M = {
    __name: "index",
    setup(__props, { expose: __expose }) {
      __expose();
      vue.useCssVars((_ctx) => ({
        "780fc0ad-statusBarHeight": statusBarHeight.value
      }));
      const globalStore = useGlobalDataStore();
      const statusBarHeight = vue.ref(globalStore.statusBarHeight + "px");
      const conversations = vue.ref([]);
      const privateChantNum = vue.ref(0);
      const activeIndex = vue.ref(0);
      const contentTabLists = vue.ref([
        { id: 1, label: "全部" },
        { id: 2, label: "服务中" },
        { id: 3, label: "服务过" }
      ]);
      const contentTabActiveIndex = vue.ref(1);
      const conversationPopup = vue.ref(null);
      const currentConversation = vue.ref(null);
      const alreadReadPopup = vue.ref(null);
      const serviceRef = vue.ref(null);
      const currentUser = vue.ref(uni.getStorageSync("currentUser") || {});
      const initIM = async () => {
        if (!currentUser.value.id) {
          uni.showToast({ title: "用户信息缺失", icon: "none" });
          return;
        }
        const loginResult = await TencentImSdk.loginIm(currentUser.value.id);
        if (loginResult) {
          await getConversationList();
        } else {
          uni.showToast({ title: "IM登录失败", icon: "none" });
        }
      };
      const getConversationList = async () => {
        try {
          const timInstance = TencentImSdk.getTimInstance();
          if (!timInstance) {
            formatAppLog("warn", "at pages/message/index.vue:217", "TIM实例未初始化完成，无法获取会话列表");
            return;
          }
          const { data } = await timInstance.getConversationList();
          const conversationList = data.conversationList || [];
          const totalUnread = conversationList.reduce((total, item) => {
            return total + (item.unreadCount || 0);
          }, 0);
          privateChantNum.value = totalUnread;
          await handleConversationUserInfo(conversationList);
        } catch (err) {
          formatAppLog("error", "at pages/message/index.vue:234", "获取会话列表失败：", err);
          conversations.value = [];
          privateChantNum.value = 0;
        }
      };
      const handleConversationUserInfo = async (list) => {
        if (!Array.isArray(list) || list.length == 0) {
          conversations.value = [];
          return;
        }
        try {
          const idList = list.map((item) => {
            return item.type === "C2C" ? item.toAccount : item.groupID;
          }).filter((id2) => id2);
          if (idList.length === 0) {
            conversations.value = [...list];
            return;
          }
          const { data } = await postAdminList({ params: { id: idList } });
          const recordMap = {};
          const records = Array.isArray(data.records) ? data.records : [data.records];
          records.forEach((item) => {
            if (item.id) {
              recordMap[item.id] = {
                avatar: item.avatar,
                realName: item.realName
              };
            }
          });
          const processedList = list.map((item) => {
            var _a, _b;
            const targetId = item.type === "C2C" ? item.toAccount : item.groupID;
            const userInfo = recordMap[targetId] || {};
            return {
              ...item,
              avatar: userInfo.avatar || "",
              realName: userInfo.realName || "未知用户",
              // 兼容消息时间和类型字段
              lastMessageTime: ((_a = item.lastMessage) == null ? void 0 : _a.time) * 1e3 || Date.now(),
              lastMsgType: ((_b = item.lastMessage) == null ? void 0 : _b.type) || "TIMTextElem"
            };
          });
          processedList.sort((a2, b2) => {
            if (a2.isPinned !== b2.isPinned) {
              return a2.isPinned ? -1 : 1;
            }
            return b2.lastMessageTime - a2.lastMessageTime;
          });
          conversations.value = processedList;
        } catch (err) {
          formatAppLog("error", "at pages/message/index.vue:297", "获取用户信息失败：", err);
          conversations.value = list.map((item) => {
            var _a, _b;
            return {
              ...item,
              avatar: "",
              realName: "未知用户",
              lastMessageTime: ((_a = item.lastMessage) == null ? void 0 : _a.time) * 1e3 || Date.now(),
              lastMsgType: ((_b = item.lastMessage) == null ? void 0 : _b.type) || "TIMTextElem"
            };
          });
        }
      };
      const messageType = (val2) => {
        switch (val2) {
          case "TIMTextElem":
            return "[文字消息]";
          case "TIMImageElem":
            return "[图片消息]";
          case "TIMSoundElem":
            return "[语音消息]";
          case "TIMVideoElem":
            return "[视频消息]";
          default:
            return "[未识别内容]";
        }
      };
      const registerIMEvents = () => {
        uni.$on("im_login_success", () => {
          getConversationList();
        });
        uni.$on("im_message_received", () => {
          getConversationList();
        });
        uni.$on("im_kicked_out", () => {
          uni.showToast({ title: "账号已在其他设备登录", icon: "none" });
          conversations.value = [];
          privateChantNum.value = 0;
        });
      };
      const unregisterIMEvents = () => {
        uni.$off("im_login_success");
        uni.$off("im_message_received");
        uni.$off("im_kicked_out");
      };
      const tabActiveHandler = (i2) => {
        if (i2 !== activeIndex.value) {
          activeIndex.value = i2;
        }
      };
      const contentTabHandler = (i2) => {
        if (i2 !== contentTabActiveIndex.value) {
          contentTabActiveIndex.value = i2;
        }
      };
      const showAction = (conversation) => {
        var _a;
        currentConversation.value = conversation;
        (_a = conversationPopup.value) == null ? void 0 : _a.open();
      };
      const topConversation = async () => {
        var _a;
        if (!currentConversation.value)
          return;
        (_a = conversationPopup.value) == null ? void 0 : _a.close();
        const timInstance = TencentImSdk.timInstance || TencentImSdk._timInstance;
        if (!timInstance)
          return;
        const { conversationID, isPinned } = currentConversation.value;
        const description = isPinned ? "取消置顶" : "置顶";
        try {
          await timInstance.pinConversation({
            conversationID,
            isPinned: !isPinned
          });
          await getConversationList();
          uni.showToast({ title: `${description}成功`, icon: "none" });
        } catch (err) {
          formatAppLog("error", "at pages/message/index.vue:394", `${description}失败：`, err);
          uni.showToast({ title: `${description}失败`, icon: "none" });
        }
      };
      const deleteConversation = async () => {
        var _a;
        if (!currentConversation.value)
          return;
        (_a = conversationPopup.value) == null ? void 0 : _a.close();
        const timInstance = TencentImSdk.timInstance || TencentImSdk._timInstance;
        if (!timInstance)
          return;
        const { conversationID } = currentConversation.value;
        uni.showModal({
          content: "确认删除这条会话吗？",
          success: async (res2) => {
            if (res2.confirm) {
              try {
                await timInstance.deleteConversation(conversationID);
                await getConversationList();
                uni.showToast({ title: "删除成功", icon: "none" });
              } catch (err) {
                formatAppLog("error", "at pages/message/index.vue:417", "删除会话失败：", err);
                uni.showToast({ title: "删除失败", icon: "none" });
              }
            }
          }
        });
      };
      const alreadReadHandler = () => {
        var _a;
        (_a = alreadReadPopup.value) == null ? void 0 : _a.open();
      };
      const cancelHandler = () => {
        var _a;
        (_a = alreadReadPopup.value) == null ? void 0 : _a.close();
      };
      const confirmHandler = async () => {
        const timInstance = TencentImSdk.timInstance || TencentImSdk._timInstance;
        if (!timInstance)
          return;
        try {
          await timInstance.setAllMessageRead();
          await getConversationList();
          privateChantNum.value = 0;
          uni.showToast({ title: "操作成功", icon: "success" });
        } catch (err) {
          formatAppLog("error", "at pages/message/index.vue:446", "标记全部已读失败：", err);
          uni.showToast({ title: "操作失败", icon: "none" });
        }
        cancelHandler();
      };
      const chatHandler = (item) => {
        const toUserId = item.type === "C2C" ? item.userProfile.userID : item.groupID;
        uni.navigateTo({
          url: `/pages/message/private-chat?to=${toUserId}&name=${item.realName}&avatar=${item.avatar}`
        });
      };
      const customerService = () => {
        var _a;
        (_a = serviceRef.value) == null ? void 0 : _a.open();
      };
      vue.onMounted(() => {
        registerIMEvents();
      });
      vue.onUnmounted(() => {
        unregisterIMEvents();
      });
      onShow(() => {
        currentUser.value = uni.getStorageSync("currentUser") || {};
        initIM();
      });
      const __returned__ = { globalStore, statusBarHeight, conversations, privateChantNum, activeIndex, contentTabLists, contentTabActiveIndex, conversationPopup, currentConversation, alreadReadPopup, serviceRef, currentUser, initIM, getConversationList, handleConversationUserInfo, messageType, registerIMEvents, unregisterIMEvents, tabActiveHandler, contentTabHandler, showAction, topConversation, deleteConversation, alreadReadHandler, cancelHandler, confirmHandler, chatHandler, customerService, ref: vue.ref, onMounted: vue.onMounted, onUnmounted: vue.onUnmounted, get formatDate() {
        return formatDate$1;
      }, get onShow() {
        return onShow;
      }, get useGlobalDataStore() {
        return useGlobalDataStore;
      }, get postAdminList() {
        return postAdminList;
      }, CustomerService, get TencentImSdk() {
        return TencentImSdk;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$1L(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_badge = resolveEasycom(vue.resolveDynamicComponent("uni-badge"), __easycom_0$3);
    const _component_uni_nav_bar = resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"), __easycom_1$4);
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    const _component_uni_popup = resolveEasycom(vue.resolveDynamicComponent("uni-popup"), __easycom_3$5);
    return vue.openBlock(), vue.createElementBlock("view", { class: "message-box" }, [
      vue.createVNode(_component_uni_nav_bar, {
        backgroundColor: "#f4f6f8",
        border: false,
        class: "header-bar",
        statusBar: true,
        fixed: "",
        leftWidth: "260rpx",
        rightWidth: "200rpx",
        height: "128rpx"
      }, {
        left: vue.withCtx(() => [
          vue.createElementVNode("view", { class: "left" }, [
            vue.createElementVNode(
              "view",
              {
                class: vue.normalizeClass(["tab-item", $setup.activeIndex == 0 ? "active" : ""]),
                onClick: _cache[0] || (_cache[0] = ($event) => $setup.tabActiveHandler(0))
              },
              [
                $setup.privateChantNum && $setup.privateChantNum > 0 ? (vue.openBlock(), vue.createBlock(_component_uni_badge, {
                  key: 0,
                  class: "uni-badge-left-margin",
                  text: $setup.privateChantNum,
                  absolute: "rightTop",
                  "max-num": 99
                }, {
                  default: vue.withCtx(() => [
                    vue.createElementVNode("text", { class: "txt" }, "私聊")
                  ]),
                  _: 1
                  /* STABLE */
                }, 8, ["text"])) : (vue.openBlock(), vue.createElementBlock("text", {
                  key: 1,
                  class: "txt"
                }, "私聊"))
              ],
              2
              /* CLASS */
            ),
            vue.createElementVNode(
              "view",
              {
                class: vue.normalizeClass(["tab-item", $setup.activeIndex == 1 ? "active" : ""]),
                onClick: _cache[1] || (_cache[1] = ($event) => $setup.tabActiveHandler(1))
              },
              [
                vue.createElementVNode("text", { class: "txt" }, "通知")
              ],
              2
              /* CLASS */
            )
          ])
        ]),
        right: vue.withCtx(() => [
          vue.createElementVNode("view", { class: "right" }, [
            vue.createElementVNode("view", {
              class: "img-txt",
              onClick: $setup.customerService
            }, [
              vue.createElementVNode("image", {
                src: _imports_0$i,
                class: "img"
              }),
              vue.createElementVNode("text", { class: "txt" }, "客服")
            ]),
            vue.createElementVNode("view", {
              class: "img-txt",
              onClick: $setup.alreadReadHandler
            }, [
              vue.createElementVNode("image", {
                src: _imports_1$d,
                class: "img"
              }),
              vue.createElementVNode("text", { class: "txt" }, "已读")
            ])
          ])
        ]),
        _: 1
        /* STABLE */
      }),
      $setup.activeIndex == 0 ? (vue.openBlock(), vue.createElementBlock("view", {
        key: 0,
        class: "message-content"
      }, [
        vue.createElementVNode("view", { class: "content-tab-box" }, [
          (vue.openBlock(true), vue.createElementBlock(
            vue.Fragment,
            null,
            vue.renderList($setup.contentTabLists, (item, index) => {
              return vue.openBlock(), vue.createElementBlock("view", {
                class: vue.normalizeClass(["tab-item", $setup.contentTabActiveIndex == item.id ? "active" : ""]),
                key: index,
                onClick: ($event) => $setup.contentTabHandler(item.id)
              }, vue.toDisplayString(item.label), 11, ["onClick"]);
            }),
            128
            /* KEYED_FRAGMENT */
          ))
        ]),
        vue.createElementVNode("view", { class: "scroll-content-box" }, [
          vue.createElementVNode("scroll-view", {
            "scroll-y": "",
            class: "scroll-content",
            "show-scrollbar": false
          }, [
            $setup.conversations.length > 0 ? (vue.openBlock(), vue.createElementBlock("view", { key: 0 }, [
              (vue.openBlock(true), vue.createElementBlock(
                vue.Fragment,
                null,
                vue.renderList($setup.conversations, (item, index) => {
                  var _a, _b;
                  return vue.openBlock(), vue.createElementBlock("view", {
                    class: vue.normalizeClass(["content-item", item.isPinned ? "item-bg" : ""]),
                    key: index,
                    onClick: ($event) => $setup.chatHandler(item)
                  }, [
                    vue.createElementVNode("view", { class: "content-item-left" }, [
                      vue.createElementVNode("image", {
                        src: item.avatar,
                        class: "img"
                      }, null, 8, ["src"])
                    ]),
                    vue.createElementVNode("view", { class: "content-item-right" }, [
                      vue.createElementVNode("view", { class: "content-user-date" }, [
                        vue.createElementVNode(
                          "view",
                          { class: "name" },
                          vue.toDisplayString(item.realName),
                          1
                          /* TEXT */
                        ),
                        vue.createElementVNode(
                          "view",
                          { class: "date" },
                          vue.toDisplayString($setup.formatDate(((_a = item.lastMessage) == null ? void 0 : _a.lastTime) || item.lastMessageTime)),
                          1
                          /* TEXT */
                        )
                      ]),
                      vue.createElementVNode("view", { class: "item-info-bottom-item" }, [
                        vue.createElementVNode("view", { class: "item-info-top_content" }, [
                          item.unreadCount > 0 ? (vue.openBlock(), vue.createElementBlock("text", {
                            key: 0,
                            class: "unread-text"
                          }, "[未读]")) : vue.createCommentVNode("v-if", true),
                          vue.createElementVNode(
                            "text",
                            null,
                            vue.toDisplayString($setup.messageType(((_b = item.lastMessage) == null ? void 0 : _b.type) || item.lastMsgType)),
                            1
                            /* TEXT */
                          )
                        ]),
                        vue.createElementVNode("view", {
                          class: "item-info-bottom_action",
                          onClick: vue.withModifiers(($event) => $setup.showAction(item), ["stop"])
                        }, [
                          vue.createVNode(_component_uni_icons, {
                            type: "more-filled",
                            size: "24",
                            color: "rgba(0,0,0,.35)"
                          })
                        ], 8, ["onClick"])
                      ])
                    ])
                  ], 10, ["onClick"]);
                }),
                128
                /* KEYED_FRAGMENT */
              ))
            ])) : (vue.openBlock(), vue.createElementBlock("view", {
              key: 1,
              class: "no-conversation"
            }, "当前没有会话"))
          ])
        ])
      ])) : (vue.openBlock(), vue.createElementBlock("view", {
        key: 1,
        class: "message-content notice-content"
      }, [
        vue.createElementVNode("view", { class: "scroll-content-box" }, [
          vue.createElementVNode("scroll-view", {
            "scroll-y": "",
            class: "scroll-content",
            "show-scrollbar": false
          }, [
            (vue.openBlock(), vue.createElementBlock(
              vue.Fragment,
              null,
              vue.renderList(1, (i2) => {
                return vue.createElementVNode("view", {
                  class: "content-item",
                  key: i2
                }, [
                  vue.createElementVNode("view", { class: "content-item-left" }, [
                    vue.createElementVNode("image", {
                      src: _imports_0$m,
                      class: "img"
                    })
                  ]),
                  vue.createElementVNode("view", { class: "content-item-right" }, [
                    vue.createElementVNode("view", { class: "content-user-date" }, [
                      vue.createElementVNode("view", { class: "name" }, "消息推送"),
                      vue.createElementVNode("view", { class: "date" }, "昨天")
                    ]),
                    vue.createElementVNode("view", { class: "item-info-bottom-item" }, [
                      vue.createElementVNode("view", { class: "item-info-top_content" }, "咨询、测评、课程马上领")
                    ])
                  ])
                ]);
              }),
              64
              /* STABLE_FRAGMENT */
            ))
          ])
        ])
      ])),
      vue.createVNode(
        _component_uni_popup,
        {
          ref: "conversationPopup",
          type: "center",
          "border-radius": "8rpx",
          class: "conversation-popup"
        },
        {
          default: vue.withCtx(() => [
            vue.createElementVNode("view", { class: "item-box" }, [
              vue.createElementVNode(
                "view",
                {
                  class: "item",
                  onClick: $setup.topConversation
                },
                vue.toDisplayString($setup.currentConversation.isPinned ? "取消置顶" : "置顶聊天"),
                1
                /* TEXT */
              ),
              vue.createElementVNode("view", {
                class: "item",
                onClick: $setup.deleteConversation
              }, "删除聊天")
            ])
          ]),
          _: 1
          /* STABLE */
        },
        512
        /* NEED_PATCH */
      ),
      vue.createVNode(
        _component_uni_popup,
        {
          ref: "alreadReadPopup",
          type: "center",
          "border-radius": "24rpx",
          class: "alread-read-popup"
        },
        {
          default: vue.withCtx(() => [
            vue.createElementVNode("view", { class: "item-box" }, [
              vue.createElementVNode("view", { class: "title" }, "全部已读"),
              vue.createElementVNode("view", { class: "content" }, "确认将所有信息标记为已读？"),
              vue.createElementVNode("view", { class: "btn" }, [
                vue.createElementVNode("view", {
                  class: "cancel",
                  onClick: $setup.cancelHandler
                }, "取消"),
                vue.createElementVNode("view", {
                  class: "confirm",
                  onClick: $setup.confirmHandler
                }, "已读")
              ])
            ])
          ]),
          _: 1
          /* STABLE */
        },
        512
        /* NEED_PATCH */
      ),
      vue.createVNode(
        $setup["CustomerService"],
        { ref: "serviceRef" },
        null,
        512
        /* NEED_PATCH */
      )
    ]);
  }
  const PagesMessageIndex = /* @__PURE__ */ _export_sfc(_sfc_main$1M, [["render", _sfc_render$1L], ["__scopeId", "data-v-780fc0ad"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/message/index.vue"]]);
  const _imports_0$h = "/static/my/my-top-bg.png";
  const _imports_1$c = "/static/my/copy.png";
  const _imports_2$5 = "/static/my/bottom-arrow.png";
  const _imports_3$2 = "/static/settled/mall-entrance.png";
  const _imports_4$2 = "/static/my/join.png";
  const _imports_5 = "/static/my/service-setting.png";
  const _imports_6 = "/static/my/advice.png";
  const _imports_8 = "/static/my/positioning.png";
  const _imports_9 = "/static/my/setting.png";
  const _sfc_main$1L = {
    __name: "index",
    setup(__props, { expose: __expose }) {
      __expose();
      const globalStore = useGlobalDataStore();
      const toPage = (url2) => {
        uni.navigateTo({
          url: url2
        });
      };
      const gridList = vue.ref([
        {
          url: "/static/my/grid-1.png",
          txt: "咨询订单"
        },
        {
          url: "/static/my/grid-2.png",
          txt: "倾诉订单"
        },
        // {
        // 	url: "/static/my/grid-3.png",
        // 	txt: "我的套餐"
        // },
        // {
        // 	url: "/static/my/grid-4.png",
        // 	txt: "优惠券"
        // },
        {
          url: "/static/my/grid-5.png",
          txt: "评测记录"
        },
        // {
        // 	url: "/static/my/grid-6.png",
        // 	txt: "兑换中心"
        // },
        {
          url: "/static/my/grid-7.png",
          txt: "足迹"
        },
        {
          url: "/static/my/grid-9.png",
          txt: "账单"
        }
        // {
        // 	url: "/static/my/grid-8.png",
        // 	txt: "邀请有礼"
        // }
      ]);
      const consultingList = vue.ref([
        { url: "/static/my/grid-consulting-1.png", txt: "列表" },
        { url: "/static/my/grid-consulting-2.png", txt: "认证资料" },
        { url: "/static/my/grid-consulting-3.png", txt: "服务设置" },
        { url: "/static/my/grid-consulting-4.png", txt: "钱包" }
      ]);
      const gotoServiceCenter = () => {
        uni.navigateTo({
          url: `/pages/settings/serviceSettings?type=${JSON.stringify(userlnfo.value.id)}`
        });
      };
      const toPublishs = () => {
        uni.navigateTo({
          url: "/pages/shopping-mall/mall-home"
        });
      };
      const pasteId = () => {
        uni.setClipboardData({
          data: userlnfo.value.id
        });
        uni.showToast({
          title: "复制成功",
          icon: "success",
          duration: 1500
        });
      };
      const typeMap = (userRole, type) => {
        if (userRole == "1") {
          return type == 0 ? "用户" : "咨询师";
        } else {
          return type == 0 ? "用户" : "倾诉师";
        }
      };
      const userRoleMap = {
        1: ["用户", "咨询师"],
        2: ["用户", "倾诉师"]
      };
      const userRoleTitle = vue.ref();
      const changeRoleFunc = async (e2) => {
        const consultantType = userRoleMap[userlnfo.value.userRole] == "倾诉师" ? 2 : e2.detail.value;
        try {
          let res2 = await changeConsultant({ consultantType });
          userlnfo.value = res2.data;
        } catch (error) {
        }
      };
      const toUserInfo = () => {
        uni.navigateTo({
          url: "/pages/forum/my/info"
        });
      };
      const toPublish = () => {
        uni.navigateTo({
          url: "/pages/forum/my/my"
        });
      };
      const toNav = (index) => {
        const INDEX_NAV = {
          0: "/pages/payment/order/consult-order?",
          1: "/pages/payment/order/listener-order",
          2: "/pages/payment/order/exam-order",
          // 3: "/pages/payment/order/exam-order",
          4: "/pages/payment/order/bill-order"
        };
        uni.navigateTo({
          url: `${INDEX_NAV[index]}?type=${JSON.stringify(userlnfo.value)}&service=false`
        });
      };
      const toConsultingNav = (index) => {
        const url2 = userlnfo.value.userRole == "1" ? "consult-order" : "listener-order";
        const orderUrl = `/pages/payment/order/${url2}`;
        const INDEX_NAV = {
          0: orderUrl,
          1: "/pages/settings/serviceSettings",
          2: `/pages/settings/service-setup`,
          3: "/pages/my/wallet/mine"
        };
        uni.navigateTo({
          url: `${INDEX_NAV[index]}?type=${JSON.stringify({ id: userlnfo.value.id, userRole: userlnfo.value.userRole })}&service=true&identity=${url2}`
        });
      };
      const settledFn = (userRole) => {
        if (userRole == 0) {
          uni.navigateTo({
            url: `/pages/settled/settled?type=${JSON.stringify(userlnfo.value.id)}`
          });
        } else {
          uni.showToast({ title: "已入驻", icon: "success" });
        }
      };
      const toLogout = () => {
        uni.clearStorageSync();
        uni.navigateTo({
          url: "/pages/login/login"
        });
      };
      const serviceRef = vue.ref(null);
      const customerService = () => {
        serviceRef.value.open();
      };
      const userlnfo = vue.ref({});
      const getlnfo = async () => {
        let res2 = await getUserInfo();
        userlnfo.value = res2.data;
        userRoleTitle.value = userRoleMap[userlnfo.value.userRole];
        if (res2.data.userRole == 0) {
          await changeConsultant({ consultantType: 0 });
        }
      };
      const summary2 = vue.ref({});
      const userSummaryApi = async () => {
        let res2 = await userSummary({
          userId: userlnfo.value.id
        });
        summary2.value = res2.data;
      };
      const getMallSwitchApi = async () => {
        try {
          const { data } = await getMallSwitch();
          uni.setStorageSync("mallSwitch", data);
          globalStore.setMallSwitch(data);
        } catch (error) {
          formatAppLog("log", "at pages/my/index.vue:349", error);
        }
      };
      onShow(() => {
        getlnfo();
        getMallSwitchApi();
        userSummaryApi();
      });
      const __returned__ = { globalStore, toPage, gridList, consultingList, gotoServiceCenter, toPublishs, pasteId, typeMap, userRoleMap, userRoleTitle, changeRoleFunc, toUserInfo, toPublish, toNav, toConsultingNav, settledFn, toLogout, serviceRef, customerService, userlnfo, getlnfo, summary: summary2, userSummaryApi, getMallSwitchApi, ref: vue.ref, get getUserInfo() {
        return getUserInfo;
      }, get userSummary() {
        return userSummary;
      }, get getMallSwitch() {
        return getMallSwitch;
      }, get changeConsultant() {
        return changeConsultant;
      }, get onShow() {
        return onShow;
      }, get useGlobalDataStore() {
        return useGlobalDataStore;
      }, CustomerService };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$1K(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    return vue.openBlock(), vue.createElementBlock("view", { class: "my-box" }, [
      vue.createElementVNode("view", { class: "my-top-content" }, [
        vue.createElementVNode("image", { src: _imports_0$h })
      ]),
      vue.createElementVNode("view", { class: "container" }, [
        vue.createElementVNode("view", { class: "user-info" }, [
          vue.createElementVNode("view", null, [
            vue.createElementVNode("image", {
              src: $setup.userlnfo.avatar == null ? "@/static/my/profile.png" : $setup.userlnfo.avatar,
              mode: "aspectFill",
              class: "profile"
            }, null, 8, ["src"])
          ]),
          vue.createElementVNode("view", { class: "user-info-content" }, [
            vue.createElementVNode("view", null, [
              vue.createElementVNode("view", {
                class: "nick-name",
                onClick: $setup.toUserInfo
              }, [
                vue.createTextVNode(
                  vue.toDisplayString($setup.userlnfo.realName),
                  1
                  /* TEXT */
                ),
                vue.createVNode(_component_uni_icons, {
                  type: "right",
                  size: "16"
                })
              ])
            ]),
            vue.createElementVNode("view", { style: { "display": "flex", "flex-direction": "row", "align-items": "center", "justify-content": "space-between" } }, [
              vue.createElementVNode("view", {
                class: "id-num",
                style: { "flex": "1" }
              }, [
                vue.createElementVNode(
                  "text",
                  null,
                  "ID: " + vue.toDisplayString($setup.userlnfo.id),
                  1
                  /* TEXT */
                ),
                vue.createElementVNode("image", {
                  src: _imports_1$c,
                  class: "copy",
                  onClick: $setup.pasteId
                })
              ]),
              $setup.userlnfo.userRole != "0" ? (vue.openBlock(), vue.createElementBlock("picker", {
                key: 0,
                range: $setup.userRoleTitle,
                onChange: $setup.changeRoleFunc
              }, [
                vue.createElementVNode("view", { class: "change-user-box" }, [
                  vue.createElementVNode("view", { class: "change-user" }, [
                    vue.createTextVNode(
                      vue.toDisplayString($setup.typeMap($setup.userlnfo.userRole, $setup.userlnfo.consultantType)) + " ",
                      1
                      /* TEXT */
                    ),
                    vue.createElementVNode("image", {
                      src: _imports_2$5,
                      class: "bottom-arrow"
                    })
                  ])
                ])
              ], 40, ["range"])) : (vue.openBlock(), vue.createElementBlock("view", {
                key: 1,
                class: "change-user-box"
              }, [
                vue.createElementVNode("view", { class: "change-user" }, "用户")
              ]))
            ])
          ])
        ]),
        vue.createElementVNode("view", { class: "my-record-number" }, [
          vue.createElementVNode("view", { class: "item" }, [
            vue.createElementVNode(
              "view",
              { class: "num" },
              vue.toDisplayString($setup.summary.consultCount),
              1
              /* TEXT */
            ),
            vue.createElementVNode("view", { class: "txt" }, "我的咨询")
          ]),
          vue.createElementVNode("view", {
            class: "item",
            onClick: $setup.toPublish
          }, [
            vue.createElementVNode(
              "view",
              { class: "num" },
              vue.toDisplayString($setup.summary.publishCount),
              1
              /* TEXT */
            ),
            vue.createElementVNode("view", { class: "txt" }, "我的发布")
          ]),
          vue.createElementVNode("view", { class: "item" }, [
            vue.createElementVNode(
              "view",
              { class: "num" },
              vue.toDisplayString($setup.summary.followCount),
              1
              /* TEXT */
            ),
            vue.createElementVNode("view", { class: "txt" }, "我的关注")
          ]),
          vue.createElementVNode("view", { class: "item" }, [
            vue.createElementVNode(
              "view",
              { class: "num" },
              vue.toDisplayString($setup.summary.collectCount),
              1
              /* TEXT */
            ),
            vue.createElementVNode("view", { class: "txt" }, "我的收藏")
          ])
        ]),
        $setup.globalStore.mallSwitch ? (vue.openBlock(), vue.createElementBlock("view", {
          key: 0,
          class: "consult-box",
          onClick: $setup.toPublishs
        }, [
          vue.createElementVNode("image", {
            class: "",
            src: _imports_3$2
          })
        ])) : vue.createCommentVNode("v-if", true),
        vue.createElementVNode("view", { class: "my-server" }, [
          vue.createElementVNode("view", { class: "title" }, "我的服务"),
          vue.createElementVNode("view", { class: "grid-box" }, [
            (vue.openBlock(true), vue.createElementBlock(
              vue.Fragment,
              null,
              vue.renderList($setup.gridList, (item, index) => {
                return vue.openBlock(), vue.createElementBlock("view", {
                  key: index,
                  class: "grid-item grid-item-1",
                  onClick: ($event) => $setup.toNav(index)
                }, [
                  vue.createElementVNode("image", {
                    src: item.url,
                    class: "image"
                  }, null, 8, ["src"]),
                  vue.createElementVNode(
                    "view",
                    { class: "txt" },
                    vue.toDisplayString(item.txt),
                    1
                    /* TEXT */
                  )
                ], 8, ["onClick"]);
              }),
              128
              /* KEYED_FRAGMENT */
            ))
          ])
        ]),
        $setup.userlnfo.consultantType != "0" && $setup.userlnfo.userRole != "0" ? (vue.openBlock(), vue.createElementBlock("view", {
          key: 1,
          class: "my-server"
        }, [
          vue.createElementVNode(
            "view",
            { class: "title" },
            vue.toDisplayString($setup.userlnfo.userRole == "1" ? "咨询" : "倾听") + "专区",
            1
            /* TEXT */
          ),
          vue.createElementVNode("view", { class: "grid-box" }, [
            (vue.openBlock(true), vue.createElementBlock(
              vue.Fragment,
              null,
              vue.renderList($setup.consultingList, (item, index) => {
                return vue.openBlock(), vue.createElementBlock("view", {
                  key: index,
                  class: "grid-item",
                  onClick: ($event) => $setup.toConsultingNav(index)
                }, [
                  vue.createElementVNode("image", {
                    src: item.url,
                    class: "image"
                  }, null, 8, ["src"]),
                  vue.createElementVNode(
                    "view",
                    { class: "txt" },
                    vue.toDisplayString(item.txt == "列表" ? $setup.userlnfo.userRole == "1" ? "咨询列表" : "倾听列表" : item.txt),
                    1
                    /* TEXT */
                  )
                ], 8, ["onClick"]);
              }),
              128
              /* KEYED_FRAGMENT */
            ))
          ])
        ])) : vue.createCommentVNode("v-if", true),
        vue.createElementVNode("view", { class: "other-server" }, [
          vue.createElementVNode("view", { class: "title" }, "其他服务"),
          vue.createElementVNode("view", { class: "other-list" }, [
            vue.createElementVNode("view", {
              class: "other-item",
              onClick: _cache[0] || (_cache[0] = ($event) => $setup.settledFn($setup.userlnfo.userRole))
            }, [
              vue.createElementVNode("view", { class: "item-left" }, [
                vue.createElementVNode("image", { src: _imports_4$2 }),
                vue.createTextVNode(),
                vue.createElementVNode("text", null, "入驻平台")
              ])
            ]),
            vue.createElementVNode("view", {
              class: "other-item",
              onClick: _cache[1] || (_cache[1] = ($event) => $setup.toPage("/pages/settings/help-center"))
            }, [
              vue.createElementVNode("view", { class: "item-left" }, [
                vue.createElementVNode("image", { src: _imports_5 }),
                vue.createTextVNode(),
                vue.createElementVNode("text", null, "帮助中心")
              ])
            ]),
            vue.createElementVNode("view", {
              class: "other-item",
              onClick: _cache[2] || (_cache[2] = ($event) => $setup.toPage("/pages/settings/feedback"))
            }, [
              vue.createElementVNode("view", { class: "item-left" }, [
                vue.createElementVNode("image", { src: _imports_6 }),
                vue.createTextVNode(),
                vue.createElementVNode("text", null, "意见反馈")
              ])
            ]),
            vue.createElementVNode("view", {
              class: "other-item",
              onClick: $setup.customerService
            }, [
              vue.createElementVNode("view", { class: "item-left" }, [
                vue.createElementVNode("image", { src: _imports_0$q }),
                vue.createTextVNode(),
                vue.createElementVNode("text", null, "联系客服")
              ])
            ]),
            vue.createElementVNode("view", {
              class: "other-item",
              onClick: _cache[3] || (_cache[3] = ($event) => $setup.toPage("/pages/shopping-mall/delivery-address"))
            }, [
              vue.createElementVNode("view", { class: "item-left" }, [
                vue.createElementVNode("image", {
                  src: _imports_8,
                  style: { "width": "23rpx" }
                }),
                vue.createElementVNode("text", { style: { "padding-left": "18rpx" } }, "收货地址")
              ])
            ]),
            vue.createElementVNode("view", {
              class: "other-item",
              onClick: _cache[4] || (_cache[4] = ($event) => $setup.toPage("/pages/settings/settings"))
            }, [
              vue.createElementVNode("view", { class: "item-left" }, [
                vue.createElementVNode("image", { src: _imports_9 }),
                vue.createTextVNode(),
                vue.createElementVNode("text", null, "设置")
              ])
            ])
          ])
        ]),
        vue.createVNode(
          $setup["CustomerService"],
          { ref: "serviceRef" },
          null,
          512
          /* NEED_PATCH */
        )
      ])
    ]);
  }
  const PagesMyIndex = /* @__PURE__ */ _export_sfc(_sfc_main$1L, [["render", _sfc_render$1K], ["__scopeId", "data-v-f97bc692"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/my/index.vue"]]);
  const _sfc_main$1K = {
    __name: "readArticle",
    setup(__props, { expose: __expose }) {
      __expose();
      vue.useCssVars((_ctx) => ({
        "bb7d28f6-statusBarHeight": statusBarHeight.value
      }));
      const globalStore = useGlobalDataStore();
      const statusBarHeight = vue.ref(globalStore.statusBarHeight + "px");
      const tabActive = vue.ref(0);
      const data = vue.reactive({
        listParams: {
          "current": 1,
          "size": 10,
          "params": {}
        },
        list: []
      });
      const tabLists = vue.ref([{
        txt: "推荐",
        id: 1
      }, {
        txt: "情感",
        id: 2
      }, {
        txt: "文化",
        id: 3
      }, {
        txt: "职场",
        id: 4
      }, {
        txt: "职场",
        id: 5
      }, {
        txt: "职场",
        id: 6
      }, {
        txt: "职场",
        id: 7
      }, {
        txt: "职场",
        id: 7
      }]);
      const changeTabHandler = (index) => {
        tabActive.value = index;
      };
      const backFn = () => {
        uni.navigateBack({
          delta: 1
        });
      };
      const openArticleDetailFn = (item) => {
        uni.navigateTo({
          url: "/pages/readArticle/articleDetail?id=" + item.id
        });
      };
      const getList = async () => {
        let res2 = await getArticleList(data.listParams);
        data.list = res2.data.records;
      };
      vue.onMounted(() => {
        getList();
      });
      const __returned__ = { globalStore, statusBarHeight, tabActive, data, tabLists, changeTabHandler, backFn, openArticleDetailFn, getList, onMounted: vue.onMounted, ref: vue.ref, reactive: vue.reactive, get useGlobalDataStore() {
        return useGlobalDataStore;
      }, get getArticleList() {
        return getArticleList;
      }, get RecommendArticleItem() {
        return RecommendArticleItem;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$1J(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    const _component_uni_nav_bar = resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"), __easycom_1$4);
    return vue.openBlock(), vue.createElementBlock("view", { class: "read-article-box" }, [
      vue.createElementVNode("view", { class: "header" }, [
        vue.createVNode(_component_uni_nav_bar, {
          backgroundColor: "rgba(255,255,255,0)",
          border: false,
          title: "文章阅读",
          class: "header-bar"
        }, {
          left: vue.withCtx(() => [
            vue.createVNode(_component_uni_icons, {
              type: "left",
              size: "24",
              onClick: $setup.backFn
            })
          ]),
          right: vue.withCtx(() => [
            vue.createElementVNode("view", { class: "right" }, [
              vue.createElementVNode("image", {
                src: _imports_0$o,
                style: { "width": "40rpx", "height": "40rpx" }
              })
            ])
          ]),
          _: 1
          /* STABLE */
        })
      ]),
      vue.createElementVNode("view", { class: "article-content" }, [
        vue.createElementVNode("view", { class: "swiper-content" }, [
          vue.createElementVNode("view", { class: "uni-margin-wrap" }, [
            vue.createElementVNode("swiper", {
              class: "swiper",
              circular: "",
              "indicator-dots": true,
              autoplay: true,
              interval: 5e3,
              duration: 500
            }, [
              (vue.openBlock(), vue.createElementBlock(
                vue.Fragment,
                null,
                vue.renderList(2, (i2) => {
                  return vue.createElementVNode("swiper-item", {
                    key: i2,
                    class: "swiper-item"
                  }, [
                    vue.createElementVNode("view", { class: "swiper-item uni-bg-red" }, [
                      vue.createElementVNode("image", {
                        src: "https://odd.dzjob.net/profile/upload/20250519/20250520113143.png",
                        class: "img"
                      })
                    ])
                  ]);
                }),
                64
                /* STABLE_FRAGMENT */
              ))
            ])
          ])
        ])
      ]),
      vue.createElementVNode("view", { class: "article-tabs" }, [
        (vue.openBlock(true), vue.createElementBlock(
          vue.Fragment,
          null,
          vue.renderList($setup.tabLists, (item, index) => {
            return vue.openBlock(), vue.createElementBlock("view", {
              class: "tab-item",
              key: index,
              onClick: ($event) => $setup.changeTabHandler(index)
            }, [
              vue.createTextVNode(
                vue.toDisplayString(item.txt) + " ",
                1
                /* TEXT */
              ),
              index == $setup.tabActive ? (vue.openBlock(), vue.createElementBlock("image", {
                key: 0,
                src: _imports_0$k,
                class: "active-img"
              })) : vue.createCommentVNode("v-if", true)
            ], 8, ["onClick"]);
          }),
          128
          /* KEYED_FRAGMENT */
        ))
      ]),
      vue.createElementVNode("scroll-view", {
        "scroll-y": "true",
        class: "scroll-content"
      }, [
        vue.createElementVNode("view", { class: "article-list" }, [
          (vue.openBlock(true), vue.createElementBlock(
            vue.Fragment,
            null,
            vue.renderList($setup.data.list, (i2) => {
              return vue.openBlock(), vue.createBlock($setup["RecommendArticleItem"], {
                info: i2,
                class: "article-item",
                onClick: ($event) => $setup.openArticleDetailFn(i2)
              }, null, 8, ["info", "onClick"]);
            }),
            256
            /* UNKEYED_FRAGMENT */
          ))
        ])
      ])
    ]);
  }
  const PagesReadArticleReadArticle = /* @__PURE__ */ _export_sfc(_sfc_main$1K, [["render", _sfc_render$1J], ["__scopeId", "data-v-bb7d28f6"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/readArticle/readArticle.vue"]]);
  function obj2strClass(obj) {
    let classess = "";
    for (let key in obj) {
      const val2 = obj[key];
      if (val2) {
        classess += `${key} `;
      }
    }
    return classess;
  }
  function obj2strStyle(obj) {
    let style = "";
    for (let key in obj) {
      const val2 = obj[key];
      style += `${key}:${val2};`;
    }
    return style;
  }
  const _sfc_main$1J = {
    name: "uni-easyinput",
    emits: [
      "click",
      "iconClick",
      "update:modelValue",
      "input",
      "focus",
      "blur",
      "confirm",
      "clear",
      "eyes",
      "change",
      "keyboardheightchange"
    ],
    model: {
      prop: "modelValue",
      event: "update:modelValue"
    },
    options: {
      virtualHost: true
    },
    inject: {
      form: {
        from: "uniForm",
        default: null
      },
      formItem: {
        from: "uniFormItem",
        default: null
      }
    },
    props: {
      name: String,
      value: [Number, String],
      modelValue: [Number, String],
      type: {
        type: String,
        default: "text"
      },
      clearable: {
        type: Boolean,
        default: true
      },
      autoHeight: {
        type: Boolean,
        default: false
      },
      placeholder: {
        type: String,
        default: " "
      },
      placeholderStyle: String,
      focus: {
        type: Boolean,
        default: false
      },
      disabled: {
        type: Boolean,
        default: false
      },
      maxlength: {
        type: [Number, String],
        default: 140
      },
      confirmType: {
        type: String,
        default: "done"
      },
      clearSize: {
        type: [Number, String],
        default: 24
      },
      inputBorder: {
        type: Boolean,
        default: true
      },
      prefixIcon: {
        type: String,
        default: ""
      },
      suffixIcon: {
        type: String,
        default: ""
      },
      trim: {
        type: [Boolean, String],
        default: false
      },
      cursorSpacing: {
        type: Number,
        default: 0
      },
      passwordIcon: {
        type: Boolean,
        default: true
      },
      adjustPosition: {
        type: Boolean,
        default: true
      },
      primaryColor: {
        type: String,
        default: "#2979ff"
      },
      styles: {
        type: Object,
        default() {
          return {
            color: "#333",
            backgroundColor: "#fff",
            disableColor: "#F7F6F6",
            borderColor: "#e5e5e5"
          };
        }
      },
      errorMessage: {
        type: [String, Boolean],
        default: ""
      }
    },
    data() {
      return {
        focused: false,
        val: "",
        showMsg: "",
        border: false,
        isFirstBorder: false,
        showClearIcon: false,
        showPassword: false,
        focusShow: false,
        localMsg: "",
        isEnter: false
        // 用于判断当前是否是使用回车操作
      };
    },
    computed: {
      // 输入框内是否有值
      isVal() {
        const val2 = this.val;
        if (val2 || val2 === 0) {
          return true;
        }
        return false;
      },
      msg() {
        return this.localMsg || this.errorMessage;
      },
      // 因为uniapp的input组件的maxlength组件必须要数值，这里转为数值，用户可以传入字符串数值
      inputMaxlength() {
        return Number(this.maxlength);
      },
      // 处理外层样式的style
      boxStyle() {
        return `color:${this.inputBorder && this.msg ? "#e43d33" : this.styles.color};`;
      },
      // input 内容的类和样式处理
      inputContentClass() {
        return obj2strClass({
          "is-input-border": this.inputBorder,
          "is-input-error-border": this.inputBorder && this.msg,
          "is-textarea": this.type === "textarea",
          "is-disabled": this.disabled,
          "is-focused": this.focusShow
        });
      },
      inputContentStyle() {
        const focusColor = this.focusShow ? this.primaryColor : this.styles.borderColor;
        const borderColor = this.inputBorder && this.msg ? "#dd524d" : focusColor;
        return obj2strStyle({
          "border-color": borderColor || "#e5e5e5",
          "background-color": this.disabled ? this.styles.disableColor : this.styles.backgroundColor
        });
      },
      // input右侧样式
      inputStyle() {
        const paddingRight = this.type === "password" || this.clearable || this.prefixIcon ? "" : "10px";
        return obj2strStyle({
          "padding-right": paddingRight,
          "padding-left": this.prefixIcon ? "" : "10px"
        });
      }
    },
    watch: {
      value(newVal) {
        if (newVal === null) {
          this.val = "";
          return;
        }
        this.val = newVal;
      },
      modelValue(newVal) {
        if (newVal === null) {
          this.val = "";
          return;
        }
        this.val = newVal;
      },
      focus(newVal) {
        this.$nextTick(() => {
          this.focused = this.focus;
          this.focusShow = this.focus;
        });
      }
    },
    created() {
      this.init();
      if (this.form && this.formItem) {
        this.$watch("formItem.errMsg", (newVal) => {
          this.localMsg = newVal;
        });
      }
    },
    mounted() {
      this.$nextTick(() => {
        this.focused = this.focus;
        this.focusShow = this.focus;
      });
    },
    methods: {
      /**
       * 初始化变量值
       */
      init() {
        if (this.value || this.value === 0) {
          this.val = this.value;
        } else if (this.modelValue || this.modelValue === 0 || this.modelValue === "") {
          this.val = this.modelValue;
        } else {
          this.val = "";
        }
      },
      /**
       * 点击图标时触发
       * @param {Object} type
       */
      onClickIcon(type) {
        this.$emit("iconClick", type);
      },
      /**
       * 显示隐藏内容，密码框时生效
       */
      onEyes() {
        this.showPassword = !this.showPassword;
        this.$emit("eyes", this.showPassword);
      },
      /**
       * 输入时触发
       * @param {Object} event
       */
      onInput(event) {
        let value = event.detail.value;
        if (this.trim) {
          if (typeof this.trim === "boolean" && this.trim) {
            value = this.trimStr(value);
          }
          if (typeof this.trim === "string") {
            value = this.trimStr(value, this.trim);
          }
        }
        if (this.errMsg)
          this.errMsg = "";
        this.val = value;
        this.$emit("input", value);
        this.$emit("update:modelValue", value);
      },
      /**
       * 外部调用方法
       * 获取焦点时触发
       * @param {Object} event
       */
      onFocus() {
        this.$nextTick(() => {
          this.focused = true;
        });
        this.$emit("focus", null);
      },
      _Focus(event) {
        this.focusShow = true;
        this.$emit("focus", event);
      },
      /**
       * 外部调用方法
       * 失去焦点时触发
       * @param {Object} event
       */
      onBlur() {
        this.focused = false;
        this.$emit("blur", null);
      },
      _Blur(event) {
        event.detail.value;
        this.focusShow = false;
        this.$emit("blur", event);
        if (this.isEnter === false) {
          this.$emit("change", this.val);
        }
        if (this.form && this.formItem) {
          const { validateTrigger } = this.form;
          if (validateTrigger === "blur") {
            this.formItem.onFieldChange();
          }
        }
      },
      /**
       * 按下键盘的发送键
       * @param {Object} e
       */
      onConfirm(e2) {
        this.$emit("confirm", this.val);
        this.isEnter = true;
        this.$emit("change", this.val);
        this.$nextTick(() => {
          this.isEnter = false;
        });
      },
      /**
       * 清理内容
       * @param {Object} event
       */
      onClear(event) {
        this.val = "";
        this.$emit("input", "");
        this.$emit("update:modelValue", "");
        this.$emit("clear");
      },
      /**
       * 键盘高度发生变化的时候触发此事件
       * 兼容性：微信小程序2.7.0+、App 3.1.0+
       * @param {Object} event
       */
      onkeyboardheightchange(event) {
        this.$emit("keyboardheightchange", event);
      },
      /**
       * 去除空格
       */
      trimStr(str, pos = "both") {
        if (pos === "both") {
          return str.trim();
        } else if (pos === "left") {
          return str.trimLeft();
        } else if (pos === "right") {
          return str.trimRight();
        } else if (pos === "start") {
          return str.trimStart();
        } else if (pos === "end") {
          return str.trimEnd();
        } else if (pos === "all") {
          return str.replace(/\s+/g, "");
        } else if (pos === "none") {
          return str;
        }
        return str;
      }
    }
  };
  function _sfc_render$1I(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    return vue.openBlock(), vue.createElementBlock(
      "view",
      {
        class: vue.normalizeClass(["uni-easyinput", { "uni-easyinput-error": $options.msg }]),
        style: vue.normalizeStyle($options.boxStyle)
      },
      [
        vue.createElementVNode(
          "view",
          {
            class: vue.normalizeClass(["uni-easyinput__content", $options.inputContentClass]),
            style: vue.normalizeStyle($options.inputContentStyle)
          },
          [
            $props.prefixIcon ? (vue.openBlock(), vue.createBlock(_component_uni_icons, {
              key: 0,
              class: "content-clear-icon",
              type: $props.prefixIcon,
              color: "#c0c4cc",
              onClick: _cache[0] || (_cache[0] = ($event) => $options.onClickIcon("prefix")),
              size: "22"
            }, null, 8, ["type"])) : vue.createCommentVNode("v-if", true),
            vue.renderSlot(_ctx.$slots, "left", {}, void 0, true),
            $props.type === "textarea" ? (vue.openBlock(), vue.createElementBlock("textarea", {
              key: 1,
              class: vue.normalizeClass(["uni-easyinput__content-textarea", { "input-padding": $props.inputBorder }]),
              name: $props.name,
              value: $data.val,
              placeholder: $props.placeholder,
              placeholderStyle: $props.placeholderStyle,
              disabled: $props.disabled,
              "placeholder-class": "uni-easyinput__placeholder-class",
              maxlength: $options.inputMaxlength,
              focus: $data.focused,
              autoHeight: $props.autoHeight,
              "cursor-spacing": $props.cursorSpacing,
              "adjust-position": $props.adjustPosition,
              onInput: _cache[1] || (_cache[1] = (...args) => $options.onInput && $options.onInput(...args)),
              onBlur: _cache[2] || (_cache[2] = (...args) => $options._Blur && $options._Blur(...args)),
              onFocus: _cache[3] || (_cache[3] = (...args) => $options._Focus && $options._Focus(...args)),
              onConfirm: _cache[4] || (_cache[4] = (...args) => $options.onConfirm && $options.onConfirm(...args)),
              onKeyboardheightchange: _cache[5] || (_cache[5] = (...args) => $options.onkeyboardheightchange && $options.onkeyboardheightchange(...args))
            }, null, 42, ["name", "value", "placeholder", "placeholderStyle", "disabled", "maxlength", "focus", "autoHeight", "cursor-spacing", "adjust-position"])) : (vue.openBlock(), vue.createElementBlock("input", {
              key: 2,
              type: $props.type === "password" ? "text" : $props.type,
              class: "uni-easyinput__content-input",
              style: vue.normalizeStyle($options.inputStyle),
              name: $props.name,
              value: $data.val,
              password: !$data.showPassword && $props.type === "password",
              placeholder: $props.placeholder,
              placeholderStyle: $props.placeholderStyle,
              "placeholder-class": "uni-easyinput__placeholder-class",
              disabled: $props.disabled,
              maxlength: $options.inputMaxlength,
              focus: $data.focused,
              confirmType: $props.confirmType,
              "cursor-spacing": $props.cursorSpacing,
              "adjust-position": $props.adjustPosition,
              onFocus: _cache[6] || (_cache[6] = (...args) => $options._Focus && $options._Focus(...args)),
              onBlur: _cache[7] || (_cache[7] = (...args) => $options._Blur && $options._Blur(...args)),
              onInput: _cache[8] || (_cache[8] = (...args) => $options.onInput && $options.onInput(...args)),
              onConfirm: _cache[9] || (_cache[9] = (...args) => $options.onConfirm && $options.onConfirm(...args)),
              onKeyboardheightchange: _cache[10] || (_cache[10] = (...args) => $options.onkeyboardheightchange && $options.onkeyboardheightchange(...args))
            }, null, 44, ["type", "name", "value", "password", "placeholder", "placeholderStyle", "disabled", "maxlength", "focus", "confirmType", "cursor-spacing", "adjust-position"])),
            $props.type === "password" && $props.passwordIcon ? (vue.openBlock(), vue.createElementBlock(
              vue.Fragment,
              { key: 3 },
              [
                $options.isVal ? (vue.openBlock(), vue.createBlock(_component_uni_icons, {
                  key: 0,
                  class: vue.normalizeClass(["content-clear-icon", { "is-textarea-icon": $props.type === "textarea" }]),
                  type: $data.showPassword ? "eye-slash-filled" : "eye-filled",
                  size: 22,
                  color: $data.focusShow ? $props.primaryColor : "#c0c4cc",
                  onClick: $options.onEyes
                }, null, 8, ["class", "type", "color", "onClick"])) : vue.createCommentVNode("v-if", true)
              ],
              64
              /* STABLE_FRAGMENT */
            )) : vue.createCommentVNode("v-if", true),
            $props.suffixIcon ? (vue.openBlock(), vue.createElementBlock(
              vue.Fragment,
              { key: 4 },
              [
                $props.suffixIcon ? (vue.openBlock(), vue.createBlock(_component_uni_icons, {
                  key: 0,
                  class: "content-clear-icon",
                  type: $props.suffixIcon,
                  color: "#c0c4cc",
                  onClick: _cache[11] || (_cache[11] = ($event) => $options.onClickIcon("suffix")),
                  size: "22"
                }, null, 8, ["type"])) : vue.createCommentVNode("v-if", true)
              ],
              64
              /* STABLE_FRAGMENT */
            )) : (vue.openBlock(), vue.createElementBlock(
              vue.Fragment,
              { key: 5 },
              [
                $props.clearable && $options.isVal && !$props.disabled && $props.type !== "textarea" ? (vue.openBlock(), vue.createBlock(_component_uni_icons, {
                  key: 0,
                  class: vue.normalizeClass(["content-clear-icon", { "is-textarea-icon": $props.type === "textarea" }]),
                  type: "clear",
                  size: $props.clearSize,
                  color: $options.msg ? "#dd524d" : $data.focusShow ? $props.primaryColor : "#c0c4cc",
                  onClick: $options.onClear
                }, null, 8, ["class", "size", "color", "onClick"])) : vue.createCommentVNode("v-if", true)
              ],
              64
              /* STABLE_FRAGMENT */
            )),
            vue.renderSlot(_ctx.$slots, "right", {}, void 0, true)
          ],
          6
          /* CLASS, STYLE */
        )
      ],
      6
      /* CLASS, STYLE */
    );
  }
  const __easycom_2$8 = /* @__PURE__ */ _export_sfc(_sfc_main$1J, [["render", _sfc_render$1I], ["__scopeId", "data-v-09fd5285"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput.vue"]]);
  /*!
    * vue-router v4.4.4
    * (c) 2024 Eduardo San Martin Morote
    * @license MIT
    */
  var NavigationType;
  (function(NavigationType2) {
    NavigationType2["pop"] = "pop";
    NavigationType2["push"] = "push";
  })(NavigationType || (NavigationType = {}));
  var NavigationDirection;
  (function(NavigationDirection2) {
    NavigationDirection2["back"] = "back";
    NavigationDirection2["forward"] = "forward";
    NavigationDirection2["unknown"] = "";
  })(NavigationDirection || (NavigationDirection = {}));
  var NavigationFailureType;
  (function(NavigationFailureType2) {
    NavigationFailureType2[NavigationFailureType2["aborted"] = 4] = "aborted";
    NavigationFailureType2[NavigationFailureType2["cancelled"] = 8] = "cancelled";
    NavigationFailureType2[NavigationFailureType2["duplicated"] = 16] = "duplicated";
  })(NavigationFailureType || (NavigationFailureType = {}));
  const routeLocationKey = Symbol("route location");
  function useRoute(_name) {
    return vue.inject(routeLocationKey);
  }
  const _sfc_main$1I = {
    __name: "articleDetail",
    setup(__props, { expose: __expose }) {
      __expose();
      vue.useCssVars((_ctx) => ({
        "b2c79a96-statusBarHeight": statusBarHeight.value
      }));
      const globalStore = useGlobalDataStore();
      const statusBarHeight = vue.ref(globalStore.statusBarHeight + "px");
      const route2 = useRoute();
      const recommendArticles = vue.ref([]);
      const tabActive = vue.ref(0);
      const replyContent = vue.ref("");
      let id2 = vue.ref();
      const data = vue.reactive({
        listParams: {
          "current": 1,
          "size": 10,
          "params": {}
        },
        list: []
      });
      const tabLists = vue.ref([{
        txt: "推荐",
        id: 1
      }, {
        txt: "情感",
        id: 2
      }, {
        txt: "文化",
        id: 3
      }, {
        txt: "职场",
        id: 4
      }, {
        txt: "职场",
        id: 5
      }, {
        txt: "职场",
        id: 6
      }, {
        txt: "职场",
        id: 7
      }, {
        txt: "职场",
        id: 7
      }]);
      const info = vue.ref();
      const commentList = vue.ref();
      const getRecommend = async () => {
        let res2 = await relativeArticle();
        recommendArticles.value = res2.data;
        formatAppLog("log", "at pages/readArticle/articleDetail.vue:172", recommendArticles.value);
      };
      getRecommend();
      const changeTabHandler = (index) => {
        tabActive.value = index;
      };
      const backFn = () => {
        uni.navigateBack({
          delta: 1
        });
      };
      const switchTabsFn = (type) => {
        if (type == 1) {
          uni.switchTab({
            url: "/pages/consult/index"
          });
        } else {
          uni.navigateTo({
            url: "/pages/consult/detail"
          });
        }
      };
      const openArticleFn = (item) => {
        uni.navigateTo({
          url: "/pages/readArticle/articleDetail?id=" + item.id
        });
      };
      const getInfo = async () => {
        let res2 = await getArticleDetail({
          id: id2.value
        });
        info.value = res2.data;
      };
      const getList = async () => {
        data.listParams.params.articleId = id2.value;
        let res2 = await getCommentById$1(data.listParams);
        commentList.value = res2.data.records;
      };
      const onSaveComment = async () => {
        let res2 = await saveComment$2({
          "content": replyContent.value,
          "articleId": id2.value
        });
        replyContent.value = "";
        uni.showToast({
          title: "发布成功",
          icon: "none",
          // 可选值 'success', 'loading', 'none'
          duration: 2e3
          // 持续时长，单位ms
        });
        formatAppLog("log", "at pages/readArticle/articleDetail.vue:234", res2);
      };
      onLoad((options) => {
        id2.value = options.id;
        getInfo();
        getList();
      });
      vue.onMounted(() => {
      });
      const __returned__ = { globalStore, statusBarHeight, route: route2, recommendArticles, tabActive, replyContent, get id() {
        return id2;
      }, set id(v2) {
        id2 = v2;
      }, data, tabLists, info, commentList, getRecommend, changeTabHandler, backFn, switchTabsFn, openArticleFn, getInfo, getList, onSaveComment, onMounted: vue.onMounted, ref: vue.ref, reactive: vue.reactive, get onLoad() {
        return onLoad;
      }, get onBackPress() {
        return onBackPress;
      }, get useGlobalDataStore() {
        return useGlobalDataStore;
      }, get getArticleDetail() {
        return getArticleDetail;
      }, get getCommentById() {
        return getCommentById$1;
      }, get saveComment() {
        return saveComment$2;
      }, get relativeArticle() {
        return relativeArticle;
      }, get RecommendArticleItem() {
        return RecommendArticleItem;
      }, ConsultTeacherListItem, get useRoute() {
        return useRoute;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$1H(_ctx, _cache, $props, $setup, $data, $options) {
    var _a, _b;
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    const _component_uni_nav_bar = resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"), __easycom_1$4);
    const _component_uni_easyinput = resolveEasycom(vue.resolveDynamicComponent("uni-easyinput"), __easycom_2$8);
    return vue.openBlock(), vue.createElementBlock("view", { class: "read-article-box" }, [
      vue.createElementVNode("view", { class: "header" }, [
        vue.createVNode(_component_uni_nav_bar, {
          backgroundColor: "#F4F6F8",
          border: false,
          title: "",
          class: "header-bar",
          statusBar: true,
          fixed: ""
        }, {
          left: vue.withCtx(() => [
            vue.createVNode(_component_uni_icons, {
              type: "left",
              size: "24",
              onClick: $setup.backFn
            })
          ]),
          right: vue.withCtx(() => [
            vue.createElementVNode("view", { class: "right" }, [
              vue.createVNode(_component_uni_icons, {
                type: "more-filled",
                size: "24",
                onClick: $setup.backFn
              })
            ])
          ]),
          _: 1
          /* STABLE */
        })
      ]),
      vue.createElementVNode("view", { class: "article-content" }, [
        vue.createElementVNode("view", { class: "detail-box" }, [
          vue.createElementVNode(
            "view",
            { class: "title" },
            vue.toDisplayString((_a = $setup.info) == null ? void 0 : _a.title),
            1
            /* TEXT */
          ),
          vue.createElementVNode("view", { class: "article-user" }, [
            vue.createElementVNode("view", { class: "user" }, [
              vue.createElementVNode("view", null, [
                vue.createElementVNode("image", {
                  src: _imports_0$n,
                  class: "picture"
                })
              ]),
              vue.createElementVNode("view", { class: "name-box" }, [
                vue.createElementVNode("view", { class: "name" }, "咨询师"),
                vue.createElementVNode("view", { class: "auth" }, "咨询师 | 认证作家")
              ])
            ]),
            vue.createElementVNode("view", { class: "follow" }, [
              vue.createVNode(_component_uni_icons, {
                type: "plusempty",
                size: "12",
                color: "#35CA95"
              }),
              vue.createElementVNode("text", { class: "txt" }, "关注")
            ])
          ]),
          vue.createElementVNode(
            "view",
            { class: "content" },
            vue.toDisplayString((_b = $setup.info) == null ? void 0 : _b.content),
            1
            /* TEXT */
          ),
          vue.createElementVNode("view", { class: "date-num" }, [
            vue.createElementVNode("view", null, "2025-05-06"),
            vue.createElementVNode("view", { style: { "padding-left": "20rpx" } }, "阅读 7876")
          ]),
          vue.createElementVNode("view", { class: "contact" }, [
            vue.createTextVNode("文章转载/侵权，请联系邮箱："),
            vue.createElementVNode("text", { class: "txt" }, "6757567@163.com")
          ])
        ]),
        vue.createElementVNode("view", { style: { "background-color": "white", "margin": "30rpx", "padding": "18rpx" } }, [
          vue.createElementVNode("view", { style: { "margin-bottom": "30rpx" } }, [
            vue.createElementVNode("text", { style: { "font-size": "42rpx", "font-weight": "bold" } }, "热门评论")
          ]),
          (vue.openBlock(true), vue.createElementBlock(
            vue.Fragment,
            null,
            vue.renderList($setup.commentList, (item, index) => {
              return vue.openBlock(), vue.createElementBlock("view", {
                key: index,
                style: { "margin-bottom": "20rpx" }
              }, [
                vue.createElementVNode("view", { style: { "display": "flex", "flex-direction": "row" } }, [
                  vue.createElementVNode("image", {
                    style: { "width": "48rpx", "height": "48rpx", "border-radius": "24rpx" },
                    src: item.avatar == null ? "@/static/my/profile.png" : item.avatar
                  }, null, 8, ["src"]),
                  vue.createElementVNode("view", { style: { "margin-left": "20rpx", "display": "flex", "flex-direction": "column" } }, [
                    vue.createElementVNode(
                      "text",
                      { style: { "font-size": "26rpx" } },
                      vue.toDisplayString(item.nickname),
                      1
                      /* TEXT */
                    ),
                    vue.createElementVNode(
                      "text",
                      { style: { "margin-top": "10rpx", "font-size": "28rpx", "color": "#666666" } },
                      vue.toDisplayString(item.content),
                      1
                      /* TEXT */
                    )
                  ])
                ])
              ]);
            }),
            128
            /* KEYED_FRAGMENT */
          ))
        ]),
        vue.createElementVNode("view", { class: "hot-psychological-box" }, [
          vue.createElementVNode("view", { class: "hot-psychological-header" }, [
            vue.createElementVNode("view", { class: "title" }, "热门咨询师"),
            vue.createElementVNode("view", {
              class: "more",
              onClick: _cache[0] || (_cache[0] = ($event) => $setup.switchTabsFn(1))
            }, [
              vue.createTextVNode("更多"),
              vue.createVNode(_component_uni_icons, {
                type: "right",
                size: "12",
                color: "rgba(0, 0, 0, 0.5)"
              })
            ])
          ]),
          vue.createElementVNode("scroll-view", {
            class: "scroll-view_H",
            "scroll-x": "true",
            "scroll-left": "0",
            "show-scrollbar": false
          }, [
            vue.createElementVNode("view", { class: "list" }, [
              (vue.openBlock(), vue.createElementBlock(
                vue.Fragment,
                null,
                vue.renderList(10, (i2) => {
                  return vue.createVNode($setup["ConsultTeacherListItem"], {
                    class: "list-item",
                    onClick: _cache[1] || (_cache[1] = ($event) => $setup.switchTabsFn(2))
                  });
                }),
                64
                /* STABLE_FRAGMENT */
              ))
            ])
          ])
        ]),
        vue.createElementVNode("view", { class: "recommend-article-box" }, [
          vue.createElementVNode("view", { class: "recommend-article-header" }, [
            vue.createElementVNode("view", { class: "title" }, [
              vue.createElementVNode("view", null, "相关阅读")
            ]),
            vue.createElementVNode("view", {
              class: "more",
              onClick: _cache[2] || (_cache[2] = ($event) => $setup.openArticleFn(1))
            }, [
              vue.createTextVNode("更多"),
              vue.createVNode(_component_uni_icons, {
                type: "right",
                size: "12",
                color: "rgba(0, 0, 0, 0.5)"
              })
            ])
          ]),
          vue.createElementVNode("view", { class: "article-list" }, [
            (vue.openBlock(true), vue.createElementBlock(
              vue.Fragment,
              null,
              vue.renderList($setup.recommendArticles, (i2) => {
                return vue.openBlock(), vue.createBlock($setup["RecommendArticleItem"], {
                  info: i2,
                  class: "article-item",
                  onClick: ($event) => $setup.openArticleFn(i2)
                }, null, 8, ["info", "onClick"]);
              }),
              256
              /* UNKEYED_FRAGMENT */
            ))
          ])
        ])
      ]),
      vue.createElementVNode("view", { class: "reply-box" }, [
        vue.createElementVNode("view", { class: "reply-contaior" }, [
          vue.createElementVNode("view", { class: "reply-content" }, [
            vue.createVNode(_component_uni_easyinput, {
              onChange: $setup.onSaveComment,
              "prefix-icon": "chat",
              clearable: false,
              modelValue: $setup.replyContent,
              "onUpdate:modelValue": _cache[3] || (_cache[3] = ($event) => $setup.replyContent = $event),
              placeholder: "写点什么",
              trim: true,
              class: "reply-input"
            }, null, 8, ["modelValue"])
          ]),
          vue.createElementVNode("view", { class: "reply-icons" }, [
            vue.createVNode(_component_uni_icons, {
              type: "star",
              size: "24",
              color: "rgba(0, 0, 0, 0.35)"
            }),
            vue.createVNode(_component_uni_icons, {
              type: "hand-up",
              size: "24",
              color: "rgba(0, 0, 0, 0.35)"
            }),
            vue.createVNode(_component_uni_icons, {
              type: "redo",
              size: "24",
              color: "rgba(0, 0, 0, 0.35)"
            })
          ])
        ])
      ])
    ]);
  }
  const PagesReadArticleArticleDetail = /* @__PURE__ */ _export_sfc(_sfc_main$1I, [["render", _sfc_render$1H], ["__scopeId", "data-v-b2c79a96"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/readArticle/articleDetail.vue"]]);
  const _sfc_main$1H = {
    __name: "settled",
    setup(__props, { expose: __expose }) {
      __expose();
      vue.useCssVars((_ctx) => ({
        "1356a0f4-statusBarHeight": statusBarHeight.value
      }));
      const globalStore = useGlobalDataStore();
      const statusBarHeight = vue.ref(globalStore.statusBarHeight + "px");
      const type = vue.ref("");
      const scrollTop = vue.ref(0);
      onPageScroll((e2) => {
        scrollTop.value = e2.scrollTop;
      });
      onLoad((options) => {
        type.value = JSON.parse(options.type);
      });
      const role = vue.ref(0);
      const verifyStatus = vue.ref(0);
      const userStatus = async () => {
        try {
          let resp = await getVerifyStatus();
          const { role: role2, verifyStatus: verifyStatus2 } = resp.data;
          role2.value = role2;
          verifyStatus2.value = verifyStatus2;
        } catch (error) {
        }
      };
      const backFn = () => {
        uni.navigateBack({
          delta: 1
        });
      };
      const joinTeamHandler = () => {
        if (role.value == 1 && verifyStatus.value == 1) {
          uni.showToast({
            title: "咨询师正在认证",
            icon: "error"
          });
          return;
        }
        if (role.value == 2 && verifyStatus.value == 1) {
          uni.showToast({
            title: "倾听师正在认证审核",
            icon: "error"
          });
          return;
        }
        uni.navigateTo({
          url: "/pages/settled/application?type=1&userInfo=" + JSON.stringify(type.value)
        });
      };
      const listenerVerify = () => {
        if (role.value == 1 && verifyStatus.value == 1) {
          uni.showToast({
            title: "咨询师正在认证审核，请稍后尝试",
            icon: "none"
          });
          return;
        }
        if (role.value == 2 && verifyStatus.value == 1) {
          uni.showToast({
            title: "倾听师正在认证审核,请稍后尝试",
            icon: "none"
          });
          return;
        }
        uni.navigateTo({
          url: "/pages/settled/application?type=2&userInfo=" + JSON.stringify(type.value)
        });
      };
      onShow(() => {
        userStatus();
      });
      const __returned__ = { globalStore, statusBarHeight, type, scrollTop, role, verifyStatus, userStatus, backFn, joinTeamHandler, listenerVerify, ref: vue.ref, get useGlobalDataStore() {
        return useGlobalDataStore;
      }, get onLoad() {
        return onLoad;
      }, get onShow() {
        return onShow;
      }, get onPageScroll() {
        return onPageScroll;
      }, get getVerifyStatus() {
        return getVerifyStatus;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$1G(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    const _component_uni_nav_bar = resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"), __easycom_1$4);
    return vue.openBlock(), vue.createElementBlock("view", { class: "settled-box" }, [
      vue.createElementVNode("view", { class: "header" }, [
        vue.createVNode(_component_uni_nav_bar, {
          class: vue.normalizeClass([$setup.scrollTop > 15 ? "scrollClass" : "", "header-bar"]),
          backgroundColor: "rgba(255,255,255,0)",
          border: false,
          title: "专家入驻 | 麦苗倾诉"
        }, {
          left: vue.withCtx(() => [
            vue.createVNode(_component_uni_icons, {
              type: "left",
              size: "24",
              onClick: $setup.backFn
            })
          ]),
          right: vue.withCtx(() => [
            vue.createElementVNode("view", { class: "right" }, [
              vue.createElementVNode("image", {
                src: _imports_0$o,
                style: { "width": "40rpx", "height": "40rpx" }
              })
            ])
          ]),
          _: 1
          /* STABLE */
        }, 8, ["class"])
      ]),
      vue.createElementVNode("view", { class: "content" }, [
        vue.createElementVNode("view", {
          class: "settled_1",
          onClick: $setup.joinTeamHandler
        }, [
          vue.createElementVNode("view", { class: "title" }, "我是咨询师"),
          vue.createElementVNode("view", { class: "use-public" }, "2.5万同行 已服务了439万用户和家庭"),
          vue.createElementVNode("view", { class: "add" }, "立即加入")
        ]),
        vue.createElementVNode("view", {
          class: "settled_2",
          onClick: $setup.listenerVerify
        }, [
          vue.createElementVNode("view", { class: "title" }, "我是倾听师"),
          vue.createElementVNode("view", { class: "use-public" }, "2.5万同行 已服务了439万用户和家庭"),
          vue.createElementVNode("view", { class: "add" }, "立即加入")
        ])
      ])
    ]);
  }
  const PagesSettledSettled = /* @__PURE__ */ _export_sfc(_sfc_main$1H, [["render", _sfc_render$1G], ["__scopeId", "data-v-1356a0f4"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/settled/settled.vue"]]);
  const _sfc_main$1G = {
    __name: "application",
    setup(__props, { expose: __expose }) {
      __expose();
      vue.useCssVars((_ctx) => ({
        "6ea8915a-statusBarHeight": statusBarHeight.value
      }));
      const scrollTop = vue.ref(0);
      const globalStore = useGlobalDataStore();
      const statusBarHeight = vue.ref(globalStore.statusBarHeight + "px");
      const isAgree = vue.ref(false);
      const navTitle = vue.ref("申请成为咨询师");
      const typeDistinguish = vue.ref("1");
      const benefitList = vue.ref([]);
      const registrationList = vue.ref([]);
      const content = vue.ref("");
      const userInfo = vue.ref("");
      onLoad((options) => {
        typeDistinguish.value = options.type;
        userInfo.value = JSON.parse(options.userInfo);
        allMethods(options.type);
        getAgreementByType();
      });
      const benefits = vue.reactive([
        {
          name: "时间自由",
          icon: "/static/settled/consultation-1.png",
          width: "90rpx",
          height: "87rpx"
        },
        {
          name: "收入可观",
          icon: "/static/settled/consultation-2.png",
          width: "90rpx",
          height: "85rpx"
        },
        {
          name: "操作便捷",
          icon: "/static/settled/consultation-3.png",
          width: "100rpx",
          height: "95rpx"
        }
      ]);
      const registration = vue.reactive([
        {
          name: "身份认证",
          icon: "/static/settled/consultation-4.png",
          width: "90rpx",
          height: "80rpx"
        },
        {
          name: "填写资料",
          icon: "/static/settled/consultation-5.png",
          width: "90rpx",
          height: "80rpx"
        },
        {
          name: "提交审核",
          icon: "/static/settled/consultation-6.png",
          width: "90rpx",
          height: "90rpx"
        }
      ]);
      const allMethods = (type) => {
        navTitle.value = `申请成为${type == 1 ? "咨询师" : "倾听师"}`;
        benefitList.value = fangfa(benefits, type, 1);
        registrationList.value = fangfa(registration, type, 4);
      };
      const fangfa = (list, type, inde) => {
        return list.map((item, index) => {
          const prefix = type == 1 ? "consultation" : "listen";
          const newIcon = `/static/settled/${prefix}-${index + inde}.png`;
          return {
            ...item,
            icon: newIcon
          };
        });
      };
      const toAgreement = () => {
        const title = typeDistinguish.value == 1 ? "咨询师入驻协议" : "倾听师入驻协议";
        uni.navigateTo({
          url: `/pages/webview/webview?type=${title}`
        });
      };
      const getAgreementByType = async () => {
        const title = typeDistinguish.value == 1 ? "成为心理咨询师条件" : "成为倾听师条件";
        try {
          const queryParams2 = {
            current: 1,
            size: 10,
            title
          };
          let { data } = await articleByType$1(queryParams2);
          content.value = data.records[0].content;
        } catch (error) {
          formatAppLog("log", "at pages/settled/application.vue:216", error);
        }
      };
      const toApply = () => {
        if (!isAgree.value) {
          uni.showToast({
            title: "请同意入驻协议",
            icon: "none"
          });
          return;
        }
        uni.navigateTo({ url: `/pages/auth/auth?type=${typeDistinguish.value}&userInfo=${JSON.stringify(userInfo.value)}` });
      };
      onShow(() => {
      });
      onPageScroll((e2) => {
        scrollTop.value = e2.scrollTop;
      });
      const backFn = () => {
        uni.navigateBack({
          delta: 1
        });
      };
      const __returned__ = { scrollTop, globalStore, statusBarHeight, isAgree, navTitle, typeDistinguish, benefitList, registrationList, content, userInfo, benefits, registration, allMethods, fangfa, toAgreement, getAgreementByType, toApply, backFn, ref: vue.ref, reactive: vue.reactive, onMounted: vue.onMounted, get useGlobalDataStore() {
        return useGlobalDataStore;
      }, get onLoad() {
        return onLoad;
      }, get onShow() {
        return onShow;
      }, get onPageScroll() {
        return onPageScroll;
      }, get articleByType() {
        return articleByType$1;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$1F(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    const _component_uni_nav_bar = resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"), __easycom_1$4);
    return vue.openBlock(), vue.createElementBlock(
      vue.Fragment,
      null,
      [
        vue.createElementVNode(
          "view",
          {
            class: vue.normalizeClass(["settled-box", `settled-bg-${$setup.typeDistinguish}`])
          },
          [
            vue.createElementVNode("view", { class: "header" }, [
              vue.createVNode(_component_uni_nav_bar, {
                class: vue.normalizeClass([$setup.scrollTop > 15 ? "scrollClass" : "", "header-bar"]),
                backgroundColor: "rgba(255,255,255,0)",
                border: false,
                title: $setup.navTitle
              }, {
                left: vue.withCtx(() => [
                  vue.createVNode(_component_uni_icons, {
                    type: "left",
                    size: "24",
                    onClick: $setup.backFn
                  })
                ]),
                right: vue.withCtx(() => [
                  vue.createElementVNode("view", { class: "right" }, [
                    vue.createElementVNode("image", {
                      src: _imports_0$o,
                      style: { "width": "40rpx", "height": "40rpx" }
                    })
                  ])
                ]),
                _: 1
                /* STABLE */
              }, 8, ["class", "title"])
            ]),
            vue.createElementVNode("view", { class: "content" }, [
              vue.createElementVNode("view", { class: "content-item" }, [
                vue.createElementVNode("view", { class: "title" }, [
                  vue.createElementVNode(
                    "view",
                    {
                      class: vue.normalizeClass(["label", `label-${$setup.typeDistinguish}`]),
                      style: vue.normalizeStyle({ left: $setup.typeDistinguish == 1 ? "29%" : "34%" })
                    },
                    null,
                    6
                    /* CLASS, STYLE */
                  ),
                  vue.createElementVNode(
                    "text",
                    null,
                    "什么是" + vue.toDisplayString($setup.typeDistinguish == 1 ? "心理咨询师" : "倾听师"),
                    1
                    /* TEXT */
                  )
                ]),
                vue.createElementVNode(
                  "view",
                  { class: "use-public" },
                  vue.toDisplayString($setup.typeDistinguish == 1 ? "心理咨询师" : "倾听师") + "是协助求助者解决心理问题的人，心理咨询最一般、最主要的对象，是健康人群或存在心理问题的人群。",
                  1
                  /* TEXT */
                )
              ]),
              vue.createElementVNode("view", { class: "content-item" }, [
                vue.createElementVNode("view", { class: "title" }, [
                  vue.createElementVNode(
                    "view",
                    {
                      class: vue.normalizeClass(["label", `label-${$setup.typeDistinguish}`]),
                      style: vue.normalizeStyle({ left: $setup.typeDistinguish == 1 ? "27%" : "32%" })
                    },
                    null,
                    6
                    /* CLASS, STYLE */
                  ),
                  vue.createElementVNode(
                    "text",
                    null,
                    "成为" + vue.toDisplayString($setup.typeDistinguish == 1 ? "心理咨询师" : "倾听师") + "条件",
                    1
                    /* TEXT */
                  )
                ]),
                vue.createElementVNode("view", {
                  class: "use-public",
                  style: { "text-indent": "0" },
                  innerHTML: $setup.content
                }, null, 8, ["innerHTML"])
              ]),
              vue.createElementVNode("view", { class: "content-item" }, [
                vue.createElementVNode("view", { class: "title" }, [
                  vue.createElementVNode(
                    "view",
                    {
                      class: vue.normalizeClass(["label", `label-${$setup.typeDistinguish}`]),
                      style: vue.normalizeStyle({ left: $setup.typeDistinguish == 1 ? "27%" : "32%" })
                    },
                    null,
                    6
                    /* CLASS, STYLE */
                  ),
                  vue.createElementVNode(
                    "text",
                    null,
                    "成为" + vue.toDisplayString($setup.typeDistinguish == 1 ? "心理咨询师" : "倾听师") + "好处",
                    1
                    /* TEXT */
                  )
                ]),
                vue.createElementVNode("view", { class: "use-public" }, [
                  vue.createElementVNode("view", { class: "use-public process-box" }, [
                    (vue.openBlock(true), vue.createElementBlock(
                      vue.Fragment,
                      null,
                      vue.renderList($setup.benefitList, (item, inde) => {
                        return vue.openBlock(), vue.createElementBlock("view", {
                          class: "process",
                          key: _ctx.index
                        }, [
                          vue.createElementVNode("view", null, [
                            vue.createElementVNode("image", {
                              src: item.icon,
                              style: vue.normalizeStyle({ width: item.width, height: item.height })
                            }, null, 12, ["src"]),
                            vue.createElementVNode(
                              "view",
                              null,
                              vue.toDisplayString(item.name),
                              1
                              /* TEXT */
                            )
                          ])
                        ]);
                      }),
                      128
                      /* KEYED_FRAGMENT */
                    ))
                  ])
                ])
              ]),
              vue.createElementVNode("view", { class: "content-item" }, [
                vue.createElementVNode("view", { class: "title" }, [
                  vue.createElementVNode(
                    "view",
                    {
                      class: vue.normalizeClass(["label", `label-${$setup.typeDistinguish}`]),
                      style: { "left": "39%" }
                    },
                    null,
                    2
                    /* CLASS */
                  ),
                  vue.createElementVNode("text", null, "注册流程")
                ]),
                vue.createElementVNode("view", { class: "use-public process-box" }, [
                  (vue.openBlock(true), vue.createElementBlock(
                    vue.Fragment,
                    null,
                    vue.renderList($setup.registrationList, (item, inde) => {
                      return vue.openBlock(), vue.createElementBlock("view", {
                        class: "process",
                        key: _ctx.index
                      }, [
                        vue.createElementVNode("view", null, [
                          vue.createElementVNode("image", {
                            src: item.icon,
                            style: vue.normalizeStyle({ width: item.width, height: item.height })
                          }, null, 12, ["src"]),
                          vue.createElementVNode(
                            "view",
                            null,
                            vue.toDisplayString(item.name),
                            1
                            /* TEXT */
                          )
                        ]),
                        inde < $setup.registrationList.length - 1 ? (vue.openBlock(), vue.createElementBlock(
                          "view",
                          {
                            key: 0,
                            class: vue.normalizeClass(["triangle-right", `triangle-color-${$setup.typeDistinguish}`])
                          },
                          null,
                          2
                          /* CLASS */
                        )) : vue.createCommentVNode("v-if", true)
                      ]);
                    }),
                    128
                    /* KEYED_FRAGMENT */
                  ))
                ])
              ])
            ])
          ],
          2
          /* CLASS */
        ),
        vue.createElementVNode("view", null, [
          vue.createElementVNode("view", { class: "agreement" }, [
            vue.createElementVNode("image", {
              src: `/static/auth/${$setup.isAgree ? $setup.typeDistinguish == 1 ? "select-green" : "select-yellow" : "not-selected"}.png`,
              onClick: _cache[0] || (_cache[0] = ($event) => $setup.isAgree = !$setup.isAgree)
            }, null, 8, ["src"]),
            vue.createElementVNode("view", null, [
              vue.createTextVNode("同意"),
              vue.createElementVNode(
                "text",
                {
                  class: vue.normalizeClass(`text-${$setup.typeDistinguish}`),
                  onClick: $setup.toAgreement
                },
                "《" + vue.toDisplayString($setup.typeDistinguish == 1 ? "咨询师" : "倾听师") + "入驻协议》",
                3
                /* TEXT, CLASS */
              )
            ])
          ]),
          vue.createElementVNode(
            "button",
            {
              class: vue.normalizeClass(["btn", `btn-${$setup.typeDistinguish}`]),
              onClick: $setup.toApply
            },
            "开始认证",
            2
            /* CLASS */
          )
        ])
      ],
      64
      /* STABLE_FRAGMENT */
    );
  }
  const PagesSettledApplication = /* @__PURE__ */ _export_sfc(_sfc_main$1G, [["render", _sfc_render$1F], ["__scopeId", "data-v-6ea8915a"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/settled/application.vue"]]);
  const _imports_1$b = "/static/common/arrow.png";
  const _imports_2$4 = "/static/common/sort.png";
  const _sfc_main$1F = {
    __name: "consult-feel",
    setup(__props, { expose: __expose }) {
      __expose();
      vue.useCssVars((_ctx) => ({
        "aa8d1f1e-statusBarHeight": statusBarHeight.value
      }));
      const globalStore = useGlobalDataStore();
      const statusBarHeight = vue.ref(globalStore.statusBarHeight + "px");
      const replyContent = vue.ref("");
      const scrollTop = vue.ref(0);
      const userInfo = vue.ref({});
      const backFn = () => {
        uni.navigateBack({
          delta: 1
        });
      };
      const onPageScroll2 = (e2) => {
        scrollTop.value = e2.detail.scrollTop;
      };
      const params = vue.ref({
        targetUserId: "",
        page: 1,
        pageSize: 10
      });
      onReachBottom(() => {
        params.value.page += 1;
        getCommentByTargetUserIdApi();
      });
      const evaluationList = vue.ref([]);
      const recordsList = vue.ref([]);
      const getCommentByTargetUserIdApi = async () => {
        let { data } = await getCommentByTargetUserId(params.value);
        evaluationList.value = data;
        recordsList.value = [...recordsList.value, ...data.records];
      };
      const detail = vue.ref({});
      const consultInfo = async (id2) => {
        let res2 = await getCommentInfo$1({ id: id2 });
        detail.value = res2.data;
      };
      onLoad((options) => {
        params.value.targetUserId = options.userId;
        userInfo.value = JSON.parse(options.userInfo);
        consultInfo(JSON.parse(options.userInfo).id);
        formatAppLog("log", "at pages/consult-feel/consult-feel.vue:171", JSON.parse(options.userInfo).id);
        getCommentByTargetUserIdApi();
      });
      const __returned__ = { globalStore, statusBarHeight, replyContent, scrollTop, userInfo, backFn, onPageScroll: onPageScroll2, params, evaluationList, recordsList, getCommentByTargetUserIdApi, detail, consultInfo, onMounted: vue.onMounted, ref: vue.ref, get useGlobalDataStore() {
        return useGlobalDataStore;
      }, get onLoad() {
        return onLoad;
      }, get onReachBottom() {
        return onReachBottom;
      }, get getCommentInfo() {
        return getCommentInfo$1;
      }, get getCommentByTargetUserId() {
        return getCommentByTargetUserId;
      }, get MoteLinesDivide() {
        return MoteLinesDivide;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$1E(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    const _component_uni_nav_bar = resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"), __easycom_1$4);
    const _component_uni_rate = resolveEasycom(vue.resolveDynamicComponent("uni-rate"), __easycom_2$9);
    return vue.openBlock(), vue.createElementBlock("view", { class: "evaluate-box" }, [
      vue.createElementVNode(
        "scroll-view",
        {
          "scroll-y": "",
          class: "scroll-content",
          onScroll: $setup.onPageScroll
        },
        [
          vue.createElementVNode("view", { class: "evaluate-content" }, [
            vue.createVNode(_component_uni_nav_bar, {
              backgroundColor: $setup.scrollTop > 15 ? "#fff" : "transparent",
              border: false,
              title: "咨询感受",
              class: "header-bar",
              statusBar: true,
              fixed: ""
            }, {
              left: vue.withCtx(() => [
                vue.createVNode(_component_uni_icons, {
                  type: "left",
                  size: "24",
                  onClick: $setup.backFn
                })
              ]),
              right: vue.withCtx(() => [
                vue.createElementVNode("view", { class: "right" }, [
                  vue.createElementVNode("image", {
                    src: _imports_0$o,
                    style: { "width": "40rpx", "height": "40rpx" }
                  })
                ])
              ]),
              _: 1
              /* STABLE */
            }, 8, ["backgroundColor"]),
            vue.createElementVNode("view", { class: "evaluate-info-box" }, [
              vue.createElementVNode("view", { class: "evaluate-info" }, [
                vue.createElementVNode("view", { class: "user-info" }, [
                  vue.createElementVNode("view", { class: "picture" }, [
                    vue.createElementVNode("image", {
                      src: $setup.userInfo.avatar,
                      class: "img"
                    }, null, 8, ["src"])
                  ]),
                  vue.createElementVNode("view", { class: "user" }, [
                    vue.createElementVNode(
                      "view",
                      { class: "name" },
                      vue.toDisplayString($setup.userInfo.name),
                      1
                      /* TEXT */
                    ),
                    vue.createElementVNode(
                      "view",
                      { class: "title" },
                      vue.toDisplayString($setup.userInfo.occupationName),
                      1
                      /* TEXT */
                    )
                  ])
                ]),
                vue.createElementVNode("view", {
                  class: "right",
                  onClick: $setup.backFn
                }, [
                  vue.createVNode(_component_uni_icons, {
                    type: "right",
                    size: "18",
                    color: "#B6B6C1"
                  })
                ])
              ]),
              vue.createElementVNode("view", { class: "evaluate-list-box" }, [
                vue.createElementVNode("view", { class: "header-title" }, "咨询感受"),
                vue.createElementVNode("view", { class: "score-content" }, [
                  vue.createElementVNode("view", { class: "score" }, [
                    vue.createElementVNode("view", { class: "star" }, [
                      vue.createElementVNode(
                        "text",
                        { class: "txt" },
                        vue.toDisplayString($setup.detail.rating),
                        1
                        /* TEXT */
                      ),
                      vue.createVNode(_component_uni_rate, {
                        "allow-half": "",
                        value: $setup.detail.rating,
                        readonly: "",
                        size: "12"
                      }, null, 8, ["value"])
                    ]),
                    vue.createElementVNode("view", { class: "txt" }, "推荐指数")
                  ]),
                  vue.createElementVNode("view", { class: "num" }, [
                    vue.createElementVNode("view", null, [
                      vue.createElementVNode(
                        "view",
                        { class: "txt" },
                        vue.toDisplayString($setup.evaluationList.total) + "+",
                        1
                        /* TEXT */
                      ),
                      vue.createElementVNode("view", { class: "txt1" }, "真实评价")
                    ]),
                    vue.createElementVNode("view", null, [
                      vue.createElementVNode(
                        "view",
                        { class: "txt" },
                        vue.toDisplayString($setup.detail.ratio) + "%",
                        1
                        /* TEXT */
                      ),
                      vue.createElementVNode("view", { class: "txt1" }, "满意度")
                    ])
                  ])
                ]),
                vue.createElementVNode(
                  "view",
                  {
                    class: vue.normalizeClass(["sort-box", $setup.scrollTop > 240 ? "sortBoxActive" : ""])
                  },
                  [
                    vue.createElementVNode("view", { class: "sort-content" }, [
                      vue.createElementVNode("view", { class: "sort" }, [
                        vue.createTextVNode("服务类型"),
                        vue.createElementVNode("image", {
                          src: _imports_1$b,
                          class: "img",
                          style: { "width": "20rpx", "height": "20rpx" }
                        })
                      ]),
                      vue.createElementVNode("view", { class: "sort" }, [
                        vue.createTextVNode("默认排序"),
                        vue.createElementVNode("image", {
                          src: _imports_2$4,
                          class: "img"
                        })
                      ])
                    ])
                  ],
                  2
                  /* CLASS */
                ),
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($setup.recordsList, (item, i2) => {
                    return vue.openBlock(), vue.createElementBlock("view", {
                      class: "content-list",
                      key: i2
                    }, [
                      vue.createElementVNode("view", { class: "content-header" }, [
                        vue.createElementVNode("view", { class: "user-info" }, [
                          vue.createElementVNode("view", null, [
                            vue.createElementVNode("image", {
                              src: item.avatar,
                              class: "picture"
                            }, null, 8, ["src"])
                          ]),
                          vue.createElementVNode(
                            "view",
                            { class: "nickName" },
                            vue.toDisplayString(item.nickname),
                            1
                            /* TEXT */
                          )
                        ]),
                        vue.createElementVNode(
                          "view",
                          { class: "date" },
                          vue.toDisplayString(item.createTime),
                          1
                          /* TEXT */
                        )
                      ]),
                      vue.createElementVNode("view", { class: "content" }, [
                        vue.createVNode(
                          $setup["MoteLinesDivide"],
                          {
                            line: 2,
                            expandText: "展开",
                            foldHint: "收起"
                          },
                          {
                            default: vue.withCtx(() => [
                              vue.createTextVNode(
                                vue.toDisplayString(item.content),
                                1
                                /* TEXT */
                              )
                            ]),
                            _: 2
                            /* DYNAMIC */
                          },
                          1024
                          /* DYNAMIC_SLOTS */
                        )
                      ]),
                      vue.createElementVNode("view", { class: "evaluate-item" }, [
                        vue.createElementVNode(
                          "text",
                          { class: "item" },
                          vue.toDisplayString(item.tags),
                          1
                          /* TEXT */
                        )
                      ])
                    ]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                ))
              ])
            ])
          ])
        ],
        32
        /* NEED_HYDRATION */
      )
    ]);
  }
  const PagesConsultFeelConsultFeel = /* @__PURE__ */ _export_sfc(_sfc_main$1F, [["render", _sfc_render$1E], ["__scopeId", "data-v-aa8d1f1e"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/consult-feel/consult-feel.vue"]]);
  const _sfc_main$1E = {
    __name: "evaluate",
    setup(__props, { expose: __expose }) {
      __expose();
      vue.useCssVars((_ctx) => ({
        "2020f577-statusBarHeight": statusBarHeight.value
      }));
      const globalStore = useGlobalDataStore();
      const statusBarHeight = vue.ref(globalStore.statusBarHeight + "px");
      const replyContent = vue.ref("");
      const scrollTop = vue.ref(0);
      const backFn = () => {
        uni.navigateBack({
          delta: 1
        });
      };
      onLoad((options) => {
        getCommentByTargetUserIdApi(options.userId);
      });
      const evaluationList = vue.ref([]);
      const getCommentByTargetUserIdApi = async (id2) => {
        let { data } = await getCommentByTargetUserId({
          targetUserId: id2,
          page: 1,
          pageSize: 10
        });
        formatAppLog("log", "at pages/evaluate/evaluate.vue:115", data);
        evaluationList.value = data;
      };
      const onPageScroll2 = (e2) => {
        scrollTop.value = e2.detail.scrollTop;
      };
      const handleTagStr = (tagStr) => {
        return (tagStr ?? "").trim().split(",").filter((tag) => tag.trim());
      };
      const __returned__ = { globalStore, statusBarHeight, replyContent, scrollTop, backFn, evaluationList, getCommentByTargetUserIdApi, onPageScroll: onPageScroll2, handleTagStr, onMounted: vue.onMounted, ref: vue.ref, get useGlobalDataStore() {
        return useGlobalDataStore;
      }, get onLoad() {
        return onLoad;
      }, get getCommentByTargetUserId() {
        return getCommentByTargetUserId;
      }, get MoteLinesDivide() {
        return MoteLinesDivide;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$1D(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    const _component_uni_nav_bar = resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"), __easycom_1$4);
    const _component_uni_rate = resolveEasycom(vue.resolveDynamicComponent("uni-rate"), __easycom_2$9);
    return vue.openBlock(), vue.createElementBlock("view", { class: "evaluate-box" }, [
      vue.createElementVNode(
        "scroll-view",
        {
          "scroll-y": "",
          class: "scroll-content",
          onScroll: $setup.onPageScroll,
          "show-scrollbar": false
        },
        [
          vue.createElementVNode("view", { class: "evaluate-content" }, [
            vue.createVNode(_component_uni_nav_bar, {
              backgroundColor: $setup.scrollTop > 15 ? "#fff" : "transparent",
              border: false,
              title: "全部评价",
              class: "header-bar",
              statusBar: true,
              fixed: ""
            }, {
              left: vue.withCtx(() => [
                vue.createVNode(_component_uni_icons, {
                  type: "left",
                  size: "24",
                  onClick: $setup.backFn
                })
              ]),
              right: vue.withCtx(() => [
                vue.createElementVNode("view", { class: "right" }, [
                  vue.createElementVNode("image", {
                    src: _imports_0$o,
                    style: { "width": "40rpx", "height": "40rpx" }
                  })
                ])
              ]),
              _: 1
              /* STABLE */
            }, 8, ["backgroundColor"]),
            vue.createElementVNode("view", { class: "evaluate-info-box" }, [
              vue.createElementVNode("view", { class: "evaluate-list-box" }, [
                vue.createElementVNode("view", { class: "info" }, [
                  vue.createElementVNode("view", { class: "feel-type-box" }, [
                    vue.createElementVNode("view", { class: "first" }, [
                      vue.createElementVNode("view", { class: "percent" }, [
                        vue.createTextVNode("99"),
                        vue.createElementVNode("text", { class: "txt" }, "%好评率")
                      ])
                    ]),
                    vue.createElementVNode("view", { class: "second" }, [
                      vue.createElementVNode("view", { class: "second-item" }, [
                        vue.createElementVNode("text", { class: "txt-1" }, "真实评价"),
                        vue.createElementVNode(
                          "text",
                          { class: "txt-2" },
                          vue.toDisplayString($setup.evaluationList.total) + "条",
                          1
                          /* TEXT */
                        )
                      ]),
                      vue.createElementVNode("view", { class: "second-item" }, [
                        vue.createElementVNode("text", { class: "txt-1" }, "用户推荐"),
                        vue.createElementVNode("text", { class: "txt-2" }, "100%")
                      ])
                    ])
                  ]),
                  vue.createElementVNode("view", { class: "comment-list" }, [
                    (vue.openBlock(true), vue.createElementBlock(
                      vue.Fragment,
                      null,
                      vue.renderList($setup.evaluationList.records, (item, index) => {
                        return vue.openBlock(), vue.createElementBlock("view", {
                          class: "comment-item",
                          key: index
                        }, [
                          vue.createElementVNode("view", { class: "user-box" }, [
                            vue.createElementVNode("view", { class: "user-info" }, [
                              vue.createElementVNode("image", {
                                src: _imports_0$n,
                                class: "img"
                              }),
                              vue.createElementVNode(
                                "text",
                                { class: "txt" },
                                vue.toDisplayString(item.nickname),
                                1
                                /* TEXT */
                              )
                            ]),
                            vue.createElementVNode("view", { class: "star" }, [
                              vue.createVNode(_component_uni_rate, {
                                disabled: true,
                                disabledColor: "#FFC300",
                                value: item.star,
                                size: "12"
                              }, null, 8, ["value"])
                            ])
                          ]),
                          vue.createElementVNode(
                            "view",
                            { class: "comment-content" },
                            vue.toDisplayString(item.content),
                            1
                            /* TEXT */
                          ),
                          (vue.openBlock(true), vue.createElementBlock(
                            vue.Fragment,
                            null,
                            vue.renderList($setup.handleTagStr(item.tags), (tag, index2) => {
                              return vue.openBlock(), vue.createElementBlock("view", {
                                class: "tags",
                                key: index2
                              }, [
                                vue.createElementVNode(
                                  "text",
                                  { class: "tag-item" },
                                  vue.toDisplayString(tag),
                                  1
                                  /* TEXT */
                                )
                              ]);
                            }),
                            128
                            /* KEYED_FRAGMENT */
                          )),
                          vue.createElementVNode("view", { class: "theme-date" }, [
                            vue.createElementVNode("view", { class: "theme" }, [
                              vue.createTextVNode(" 咨询主题："),
                              vue.createElementVNode("text", { class: "txt" }, "心理压抑")
                            ]),
                            vue.createElementVNode(
                              "view",
                              { class: "date" },
                              vue.toDisplayString(item.createTime),
                              1
                              /* TEXT */
                            )
                          ])
                        ]);
                      }),
                      128
                      /* KEYED_FRAGMENT */
                    ))
                  ])
                ])
              ])
            ])
          ])
        ],
        32
        /* NEED_HYDRATION */
      )
    ]);
  }
  const PagesEvaluateEvaluate = /* @__PURE__ */ _export_sfc(_sfc_main$1E, [["render", _sfc_render$1D], ["__scopeId", "data-v-2020f577"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/evaluate/evaluate.vue"]]);
  const _sfc_main$1D = {
    __name: "report",
    setup(__props, { expose: __expose }) {
      const report2 = vue.ref(null);
      const openReport = () => {
        report2.value.open();
      };
      const closeReport = () => {
        report2.value.close();
      };
      const reportLists = [{
        id: 1,
        label: "政治反动"
      }, {
        id: 2,
        label: "色情内容"
      }, {
        id: 3,
        label: "人身攻击"
      }, {
        id: 4,
        label: "抄袭侵权"
      }, {
        id: 5,
        label: "未成年人"
      }, {
        id: 6,
        label: "血腥暴力"
      }, {
        id: 7,
        label: "广告欺诈"
      }, {
        id: 8,
        label: "灌水"
      }, {
        id: 9,
        label: "自杀倾向"
      }, {
        id: 9,
        label: "其他"
      }];
      __expose({
        openReport,
        closeReport
      });
      const __returned__ = { report: report2, openReport, closeReport, reportLists, ref: vue.ref };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$1C(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    const _component_uni_popup = resolveEasycom(vue.resolveDynamicComponent("uni-popup"), __easycom_3$5);
    return vue.openBlock(), vue.createBlock(
      _component_uni_popup,
      {
        ref: "report",
        "background-color": "#fff",
        "is-mask-click": false,
        borderRadius: "24rpx 24rpx 0rpx 0rpx",
        type: "bottom"
      },
      {
        default: vue.withCtx(() => [
          vue.createElementVNode("view", { class: "report-popup-box" }, [
            vue.createElementVNode("view", { class: "report-header" }, [
              vue.createElementVNode("view"),
              vue.createElementVNode("view", { class: "title" }, "选择举报理由"),
              vue.createElementVNode("view", null, [
                vue.createVNode(_component_uni_icons, {
                  type: "closeempty",
                  size: "14",
                  color: "rgba(0,0,0,0.3)",
                  onClick: $setup.closeReport
                })
              ])
            ]),
            vue.createElementVNode("view", { class: "report-content-list" }, [
              (vue.openBlock(), vue.createElementBlock(
                vue.Fragment,
                null,
                vue.renderList($setup.reportLists, (item, index) => {
                  return vue.createElementVNode(
                    "view",
                    {
                      class: "report-content-item",
                      key: index
                    },
                    vue.toDisplayString(item.label),
                    1
                    /* TEXT */
                  );
                }),
                64
                /* STABLE_FRAGMENT */
              ))
            ])
          ])
        ]),
        _: 1
        /* STABLE */
      },
      512
      /* NEED_PATCH */
    );
  }
  const report = /* @__PURE__ */ _export_sfc(_sfc_main$1D, [["render", _sfc_render$1C], ["__scopeId", "data-v-09fef91a"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/components/report/report.vue"]]);
  const _sfc_main$1C = {
    __name: "share",
    setup(__props, { expose: __expose }) {
      const share2 = vue.ref(null);
      const reportRef = vue.ref(null);
      const channelList = vue.ref([{
        type: "wechat",
        img: "/static/share/wechat.svg",
        backgroundColor: "#00B578",
        text: "微信",
        imgWidth: "38rpx",
        imgHeight: "32rpx",
        fn: () => new Function()
      }, {
        type: "friend",
        img: "/static/share/friend.svg",
        backgroundColor: "#00B578",
        text: "朋友圈",
        imgWidth: "32rpx",
        imgHeight: "32rpx",
        fn: () => new Function()
      }, {
        type: "zone",
        img: "/static/share/zone.svg",
        backgroundColor: "#FFC300",
        text: "QQ空间",
        imgWidth: "38rpx",
        imgHeight: "32rpx",
        fn: () => new Function()
      }, {
        type: "QQ",
        img: "/static/share/qq.svg",
        backgroundColor: "#43ADF9",
        text: "QQ",
        imgWidth: "26rpx",
        imgHeight: "30rpx",
        fn: () => new Function()
      }, {
        type: "link",
        img: "/static/share/link.svg",
        backgroundColor: "rgba(0, 0, 0, 0.85)",
        text: "复制链接",
        imgWidth: "34rpx",
        imgHeight: "34rpx",
        fn: () => new Function()
      }, {
        type: "report",
        img: "/static/share/report.svg",
        backgroundColor: "#f3f3f3",
        text: "举报",
        imgWidth: "36rpx",
        imgHeight: "28rpx",
        fn: () => reportFn()
      }, {
        type: "delete",
        img: "/static/share/delete.svg",
        backgroundColor: "#f3f3f3",
        text: "删除",
        imgWidth: "32rpx",
        imgHeight: "30rpx",
        fn: () => new Function()
      }]);
      const openShare = () => {
        share2.value.open();
      };
      const closeShare = () => {
        share2.value.close();
      };
      const changeShare = () => {
      };
      const reportFn = () => {
        formatAppLog("log", "at components/share/share.vue:106", 1);
        closeShare();
        formatAppLog("log", "at components/share/share.vue:108", reportRef.value);
        reportRef.value.openReport();
      };
      __expose({
        openShare,
        closeShare
      });
      const __returned__ = { share: share2, reportRef, channelList, openShare, closeShare, changeShare, reportFn, ref: vue.ref, report };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$1B(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_popup = resolveEasycom(vue.resolveDynamicComponent("uni-popup"), __easycom_3$5);
    return vue.openBlock(), vue.createElementBlock("view", null, [
      vue.createVNode(
        _component_uni_popup,
        {
          ref: "share",
          "background-color": "#fff",
          "is-mask-click": false,
          borderRadius: "24rpx 24rpx 0rpx 0rpx",
          type: "bottom"
        },
        {
          default: vue.withCtx(() => [
            vue.createElementVNode("view", { class: "share-popup-box" }, [
              vue.createElementVNode("view", { class: "share-content" }, [
                vue.createElementVNode("view", { class: "title" }, "分享到"),
                vue.createElementVNode("view", { class: "share-list" }, [
                  (vue.openBlock(true), vue.createElementBlock(
                    vue.Fragment,
                    null,
                    vue.renderList($setup.channelList, (item, index) => {
                      return vue.openBlock(), vue.createElementBlock("view", {
                        class: "share-item",
                        key: index,
                        onClick: item.fn
                      }, [
                        vue.createElementVNode(
                          "view",
                          {
                            class: "share-item-img",
                            style: vue.normalizeStyle({ backgroundColor: item.backgroundColor })
                          },
                          [
                            vue.createElementVNode("image", {
                              src: item.img,
                              class: "img",
                              style: vue.normalizeStyle({ width: item.imgWidth, height: item.imgHeight }),
                              mode: "widthFix"
                            }, null, 12, ["src"])
                          ],
                          4
                          /* STYLE */
                        ),
                        vue.createElementVNode(
                          "view",
                          { class: "txt" },
                          vue.toDisplayString(item.text),
                          1
                          /* TEXT */
                        )
                      ], 8, ["onClick"]);
                    }),
                    128
                    /* KEYED_FRAGMENT */
                  ))
                ]),
                vue.createElementVNode("view", {
                  class: "cancel",
                  onClick: $setup.closeShare
                }, " 取消 ")
              ])
            ])
          ]),
          _: 1
          /* STABLE */
        },
        512
        /* NEED_PATCH */
      ),
      vue.createVNode(
        $setup["report"],
        { ref: "reportRef" },
        null,
        512
        /* NEED_PATCH */
      )
    ]);
  }
  const share = /* @__PURE__ */ _export_sfc(_sfc_main$1C, [["render", _sfc_render$1B], ["__scopeId", "data-v-11758b78"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/components/share/share.vue"]]);
  const _imports_1$a = "/static/common/zan.png";
  const _imports_2$3 = "/static/common/zan-active.png";
  const _imports_3$1 = "/static/common/msg.png";
  const _imports_4$1 = "/static/common/share.png";
  const _sfc_main$1B = {
    __name: "worry",
    props: ["statusBarHeight"],
    setup(__props, { expose: __expose }) {
      __expose();
      const props = __props;
      const sharePopup = vue.ref(null);
      const data = vue.reactive({
        listParams: {
          "current": 1,
          "size": 10,
          "params": {}
        },
        list: []
      });
      const contentTabsList = vue.ref([{
        id: 0,
        label: "最新"
      }, {
        id: 1,
        label: "推荐"
      }, {
        id: 2,
        label: "关注"
      }]);
      const contentTabsActive = vue.ref(0);
      const contentTabsHandler = (options) => {
        if (contentTabsActive.value != options.id) {
          contentTabsActive.value = options.id;
        }
      };
      const newContens = vue.ref([{
        content: "测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",
        isZan: 0,
        zanNum: 536,
        isFollow: 0
      }, {
        content: "测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",
        isZan: 1,
        zanNum: 536,
        isFollow: 1
      }, {
        content: "测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",
        isZan: 0,
        zanNum: 536,
        isFollow: 1
      }, {
        content: "测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",
        isZan: 0,
        zanNum: 536,
        isFollow: 1
      }, {
        content: "测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",
        isZan: 0,
        zanNum: 536,
        isFollow: 0
      }, {
        content: "测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",
        isZan: 0,
        zanNum: 536,
        isFollow: 0
      }, {
        content: "测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",
        isZan: 0,
        zanNum: 536,
        isFollow: 0
      }, {
        content: "测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",
        isZan: 0,
        zanNum: 536,
        isFollow: 0
      }, {
        content: "测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",
        isZan: 0,
        zanNum: 536,
        isFollow: 0
      }, {
        content: "测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",
        isZan: 0,
        zanNum: 536,
        isFollow: 0
      }]);
      const openShare = () => {
        sharePopup.value.openShare();
      };
      const openOtherHandler = () => {
        uni.navigateTo({
          url: "/pages/forum/other/other"
        });
      };
      const getList = async () => {
        let res2 = await getWorryList(data.listParams);
        data.list = res2.data.records;
      };
      vue.onMounted(() => {
        getList();
      });
      const __returned__ = { props, sharePopup, data, contentTabsList, contentTabsActive, contentTabsHandler, newContens, openShare, openOtherHandler, getList, onMounted: vue.onMounted, ref: vue.ref, reactive: vue.reactive, get getWorryList() {
        return getWorryList;
      }, share, get MoteLinesDivide() {
        return MoteLinesDivide;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$1A(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    return vue.openBlock(), vue.createElementBlock("view", { class: "forum-index-content" }, [
      vue.createElementVNode("view", { class: "tabs" }, [
        (vue.openBlock(true), vue.createElementBlock(
          vue.Fragment,
          null,
          vue.renderList($setup.contentTabsList, (item, index) => {
            return vue.openBlock(), vue.createElementBlock("view", {
              onClick: ($event) => $setup.contentTabsHandler(item),
              class: vue.normalizeClass(["tab-item", $setup.contentTabsActive == item.id ? "active" : ""]),
              key: index
            }, vue.toDisplayString(item.label), 11, ["onClick"]);
          }),
          128
          /* KEYED_FRAGMENT */
        ))
      ]),
      vue.createElementVNode("view", { class: "forum-index-list" }, [
        vue.createElementVNode("scroll-view", {
          "scroll-y": "true",
          class: "scroll-content",
          "show-scrollbar": false
        }, [
          (vue.openBlock(true), vue.createElementBlock(
            vue.Fragment,
            null,
            vue.renderList($setup.data.list, (item, index) => {
              return vue.openBlock(), vue.createElementBlock("view", {
                class: "forum-index-list-item",
                key: index
              }, [
                vue.createElementVNode("view", { class: "item-header" }, [
                  vue.createElementVNode("view", {
                    class: "item-header-left",
                    onClick: $setup.openOtherHandler
                  }, [
                    vue.createElementVNode("view", { class: "header-pic" }, [
                      vue.createElementVNode("image", {
                        src: _imports_0$n,
                        class: "img"
                      })
                    ]),
                    vue.createElementVNode("view", { class: "header-info" }, [
                      vue.createElementVNode(
                        "view",
                        { class: "name" },
                        vue.toDisplayString(item.realName),
                        1
                        /* TEXT */
                      ),
                      vue.createElementVNode("view", { class: "time" }, "52分钟前")
                    ])
                  ]),
                  vue.createElementVNode("view", { class: "item-header-right" }, [
                    $setup.contentTabsActive != 2 ? (vue.openBlock(), vue.createElementBlock("view", { key: 0 }, [
                      item.isFollow == 0 ? (vue.openBlock(), vue.createElementBlock("view", {
                        key: 0,
                        class: "follow"
                      }, [
                        vue.createVNode(_component_uni_icons, {
                          type: "plusempty",
                          size: "12",
                          color: "#35CA95"
                        }),
                        vue.createTextVNode("关注")
                      ])) : (vue.openBlock(), vue.createElementBlock("view", {
                        key: 1,
                        class: "follow isFollow"
                      }, "已关注"))
                    ])) : vue.createCommentVNode("v-if", true),
                    vue.createElementVNode("view", null, [
                      vue.createVNode(_component_uni_icons, {
                        type: "more-filled",
                        size: "18",
                        color: "#808080"
                      })
                    ])
                  ])
                ]),
                vue.createElementVNode("view", { class: "item-content" }, [
                  vue.createVNode(
                    $setup["MoteLinesDivide"],
                    {
                      line: 5,
                      expandText: "展开",
                      foldHint: "收起"
                    },
                    {
                      default: vue.withCtx(() => [
                        vue.createTextVNode(
                          vue.toDisplayString(item.content),
                          1
                          /* TEXT */
                        )
                      ]),
                      _: 2
                      /* DYNAMIC */
                    },
                    1024
                    /* DYNAMIC_SLOTS */
                  )
                ]),
                vue.createElementVNode("view", { class: "item-btn" }, [
                  item.isZan == 0 ? (vue.openBlock(), vue.createElementBlock("view", { key: 0 }, [
                    vue.createElementVNode("image", {
                      src: _imports_1$a,
                      class: "img"
                    }),
                    vue.createTextVNode("点赞 ")
                  ])) : (vue.openBlock(), vue.createElementBlock("view", { key: 1 }, [
                    vue.createElementVNode("image", {
                      src: _imports_2$3,
                      class: "img"
                    }),
                    vue.createTextVNode(
                      vue.toDisplayString(item.zanNum),
                      1
                      /* TEXT */
                    )
                  ])),
                  vue.createElementVNode("view", null, [
                    vue.createElementVNode("image", {
                      src: _imports_3$1,
                      class: "img"
                    }),
                    vue.createTextVNode("评论 ")
                  ]),
                  vue.createElementVNode("view", null, [
                    vue.createElementVNode("image", {
                      src: _imports_4$1,
                      class: "img",
                      onClick: $setup.openShare
                    }),
                    vue.createTextVNode("分享 ")
                  ])
                ])
              ]);
            }),
            128
            /* KEYED_FRAGMENT */
          ))
        ])
      ]),
      vue.createVNode(
        $setup["share"],
        { ref: "sharePopup" },
        null,
        512
        /* NEED_PATCH */
      )
    ]);
  }
  const worry = /* @__PURE__ */ _export_sfc(_sfc_main$1B, [["render", _sfc_render$1A], ["__scopeId", "data-v-54064256"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/forum/index/components/worry.vue"]]);
  const _imports_0$g = "/static/forum/question.svg";
  const _sfc_main$1A = {
    __name: "qa",
    setup(__props, { expose: __expose }) {
      __expose();
      const sharePopup = vue.ref(null);
      const data = vue.reactive({
        listParams: {
          "current": 1,
          "size": 10,
          "params": {}
        },
        list: []
      });
      const hotQas = vue.ref([]);
      const contentTabsList = vue.ref([{
        id: 0,
        label: "最新"
      }, {
        id: 1,
        label: "推荐"
      }]);
      const contentTabsActive = vue.ref(0);
      const contentTabsHandler = (options) => {
        if (contentTabsActive.value != options.id) {
          contentTabsActive.value = options.id;
        }
      };
      const newContens = vue.ref([{
        content: "测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",
        isZan: 0,
        zanNum: 536,
        isFollow: 0
      }]);
      const openShare = () => {
        sharePopup.value.openShare();
      };
      const getList = async () => {
        let res2 = await getAnswerList(data.listParams);
        formatAppLog("log", "at pages/forum/index/components/qa.vue:116", res2);
        data.list = res2.data.records;
      };
      const getRecommendList = async () => {
        let res2 = await getHotQa();
        formatAppLog("log", "at pages/forum/index/components/qa.vue:122", res2);
        hotQas.value = res2.data;
      };
      getRecommendList();
      const openQaDetailFn = (item) => {
        formatAppLog("log", "at pages/forum/index/components/qa.vue:128", "====================" + item);
        uni.navigateTo({
          url: "/pages/forum/index/qaDetail?id=" + item
        });
      };
      vue.onMounted(() => {
        getList();
      });
      const __returned__ = { sharePopup, data, hotQas, contentTabsList, contentTabsActive, contentTabsHandler, newContens, openShare, getList, getRecommendList, openQaDetailFn, onMounted: vue.onMounted, ref: vue.ref, reactive: vue.reactive, get getAnswerList() {
        return getAnswerList;
      }, get getHotQa() {
        return getHotQa;
      }, share, get MoteLinesDivide() {
        return MoteLinesDivide;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$1z(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    return vue.openBlock(), vue.createElementBlock("view", { class: "forum-index-content" }, [
      vue.createElementVNode("view", { class: "header" }, [
        vue.createElementVNode("text", { class: "num" }, "172,567"),
        vue.createTextVNode(" 个问题在这里收获了答案")
      ]),
      vue.createElementVNode("scroll-view", {
        "scroll-x": "true",
        class: "scroll-content-x",
        "show-scrollbar": false
      }, [
        vue.createElementVNode("view", { class: "qa-content-list" }, [
          (vue.openBlock(true), vue.createElementBlock(
            vue.Fragment,
            null,
            vue.renderList($setup.hotQas, (item, index) => {
              return vue.openBlock(), vue.createElementBlock("view", {
                class: "qa-content-item",
                key: index
              }, [
                vue.createElementVNode("view", { class: "item-box" }, [
                  vue.createElementVNode(
                    "view",
                    { class: "title" },
                    vue.toDisplayString(item.title),
                    1
                    /* TEXT */
                  ),
                  vue.createElementVNode("view", { class: "content" }, [
                    vue.createElementVNode(
                      "text",
                      { class: "txt" },
                      vue.toDisplayString(item.totalComment == null ? 0 : item.totalComment) + " 个回答",
                      1
                      /* TEXT */
                    ),
                    vue.createVNode(_component_uni_icons, {
                      type: "help-filled",
                      size: "14",
                      color: "rgba(104, 117, 129, 1)"
                    })
                  ])
                ])
              ]);
            }),
            128
            /* KEYED_FRAGMENT */
          ))
        ])
      ]),
      vue.createElementVNode("view", { class: "tabs" }, [
        (vue.openBlock(true), vue.createElementBlock(
          vue.Fragment,
          null,
          vue.renderList($setup.contentTabsList, (item, index) => {
            return vue.openBlock(), vue.createElementBlock("view", {
              onClick: ($event) => $setup.contentTabsHandler(item),
              class: vue.normalizeClass(["tab-item", $setup.contentTabsActive == item.id ? "active" : ""]),
              key: index
            }, vue.toDisplayString(item.label), 11, ["onClick"]);
          }),
          128
          /* KEYED_FRAGMENT */
        ))
      ]),
      vue.createElementVNode("view", { class: "forum-index-list" }, [
        vue.createElementVNode("scroll-view", {
          "scroll-y": "true",
          class: "scroll-content",
          "show-scrollbar": false
        }, [
          (vue.openBlock(true), vue.createElementBlock(
            vue.Fragment,
            null,
            vue.renderList($setup.data.list, (i2) => {
              return vue.openBlock(), vue.createElementBlock("view", {
                class: "forum-index-list-item",
                key: _ctx.index,
                onClick: ($event) => $setup.openQaDetailFn(i2.id)
              }, [
                vue.createElementVNode("view", { class: "question" }, [
                  vue.createElementVNode("image", {
                    src: _imports_0$g,
                    class: "img"
                  }),
                  vue.createElementVNode(
                    "text",
                    { class: "txt" },
                    vue.toDisplayString(i2.title),
                    1
                    /* TEXT */
                  )
                ]),
                vue.createElementVNode("view", { class: "item-header" }, [
                  vue.createElementVNode("view", { class: "item-header-left" }, [
                    vue.createElementVNode("view", { class: "header-pic" }, [
                      vue.createElementVNode("image", {
                        src: i2.avatar == null ? "@/static/my/profile.png" : i2.avatar,
                        class: "img"
                      }, null, 8, ["src"]),
                      vue.createElementVNode(
                        "view",
                        { class: "name" },
                        vue.toDisplayString(i2.realName),
                        1
                        /* TEXT */
                      ),
                      vue.createElementVNode("text", { class: "tip" }, "咨询师")
                    ])
                  ])
                ]),
                vue.createElementVNode("view", { class: "item-content" }, [
                  vue.createVNode(
                    $setup["MoteLinesDivide"],
                    {
                      line: 5,
                      expandText: "展开",
                      foldHint: "收起"
                    },
                    {
                      default: vue.withCtx(() => [
                        vue.createTextVNode(
                          vue.toDisplayString(i2.content),
                          1
                          /* TEXT */
                        )
                      ]),
                      _: 2
                      /* DYNAMIC */
                    },
                    1024
                    /* DYNAMIC_SLOTS */
                  )
                ]),
                vue.createElementVNode("view", { class: "item-btn" }, [
                  i2.isZan == 0 ? (vue.openBlock(), vue.createElementBlock("view", { key: 0 }, [
                    vue.createElementVNode("image", {
                      src: _imports_1$a,
                      class: "img"
                    }),
                    vue.createTextVNode("点赞 ")
                  ])) : (vue.openBlock(), vue.createElementBlock("view", { key: 1 }, [
                    vue.createElementVNode("image", {
                      src: _imports_2$3,
                      class: "img"
                    }),
                    vue.createTextVNode(
                      vue.toDisplayString(i2.zanNum),
                      1
                      /* TEXT */
                    )
                  ])),
                  vue.createElementVNode("view", null, [
                    vue.createElementVNode("image", {
                      src: _imports_3$1,
                      class: "img"
                    }),
                    vue.createTextVNode("评论 ")
                  ]),
                  vue.createElementVNode("view", null, [
                    vue.createElementVNode("image", {
                      src: _imports_4$1,
                      class: "img",
                      onClick: $setup.openShare
                    }),
                    vue.createTextVNode("分享 ")
                  ]),
                  vue.createElementVNode("view", null, [
                    vue.createVNode(_component_uni_icons, {
                      type: "more-filled",
                      size: "18",
                      color: "#808080"
                    })
                  ])
                ])
              ], 8, ["onClick"]);
            }),
            128
            /* KEYED_FRAGMENT */
          ))
        ])
      ]),
      vue.createVNode(
        $setup["share"],
        { ref: "sharePopup" },
        null,
        512
        /* NEED_PATCH */
      )
    ]);
  }
  const qa = /* @__PURE__ */ _export_sfc(_sfc_main$1A, [["render", _sfc_render$1z], ["__scopeId", "data-v-c51b6f35"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/forum/index/components/qa.vue"]]);
  const _imports_0$f = "/static/common/forum-fab.png";
  const _sfc_main$1z = {
    __name: "index",
    setup(__props, { expose: __expose }) {
      __expose();
      vue.useCssVars((_ctx) => ({
        "9a476886-statusBarHeight": statusBarHeight.value
      }));
      const globalStore = useGlobalDataStore();
      const statusBarHeight = vue.ref(globalStore.statusBarHeight + "px");
      const scrollTop = vue.ref(0);
      const headerTabsList = vue.ref([{
        id: 0,
        label: "心事"
      }, {
        id: 1,
        label: "问答"
      }]);
      const headerTabsActive = vue.ref(0);
      const headerTabsHandler = (options) => {
        if (headerTabsActive.value != options.id) {
          headerTabsActive.value = options.id;
        }
      };
      const openWrite = () => {
        uni.navigateTo({
          url: "/pages/forum/write/write"
        });
      };
      const backFn = () => {
        uni.navigateBack({
          delta: 1
        });
      };
      const openUserHandler = () => {
        uni.navigateTo({
          url: "/pages/forum/my/my"
        });
      };
      const __returned__ = { globalStore, statusBarHeight, scrollTop, headerTabsList, headerTabsActive, headerTabsHandler, openWrite, backFn, openUserHandler, nextTick: vue.nextTick, onMounted: vue.onMounted, ref: vue.ref, get useGlobalDataStore() {
        return useGlobalDataStore;
      }, worry, qa };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$1y(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    return vue.openBlock(), vue.createElementBlock("view", { class: "forum-index-box" }, [
      vue.createElementVNode("view", { class: "navbar" }, [
        vue.createElementVNode("view", { class: "header" }, [
          vue.createElementVNode("view", { class: "left" }, [
            vue.createVNode(_component_uni_icons, {
              type: "left",
              size: "24",
              color: "#000",
              onClick: $setup.backFn
            }),
            vue.createElementVNode("view", { class: "tabs" }, [
              (vue.openBlock(true), vue.createElementBlock(
                vue.Fragment,
                null,
                vue.renderList($setup.headerTabsList, (item, index) => {
                  return vue.openBlock(), vue.createElementBlock("text", {
                    class: vue.normalizeClass(["tab-item", $setup.headerTabsActive == item.id ? "active" : ""]),
                    onClick: ($event) => $setup.headerTabsHandler(item),
                    key: index
                  }, vue.toDisplayString(item.label), 11, ["onClick"]);
                }),
                128
                /* KEYED_FRAGMENT */
              ))
            ])
          ]),
          vue.createElementVNode("view", {
            class: "user",
            onClick: $setup.openUserHandler
          }, [
            vue.createVNode(_component_uni_icons, {
              type: "person",
              size: "24",
              color: "rgba(0,0,0,.85)"
            })
          ])
        ])
      ]),
      $setup.headerTabsActive == 0 ? (vue.openBlock(), vue.createElementBlock("view", {
        key: 0,
        class: "worry-box"
      }, [
        vue.createVNode($setup["worry"])
      ])) : (vue.openBlock(), vue.createElementBlock("view", {
        key: 1,
        class: "qa-box"
      }, [
        vue.createVNode($setup["qa"])
      ])),
      vue.createElementVNode("view", {
        class: "fab-button",
        onClick: $setup.openWrite
      }, [
        vue.createElementVNode("image", {
          src: _imports_0$f,
          class: "img"
        })
      ])
    ]);
  }
  const PagesForumIndexIndex = /* @__PURE__ */ _export_sfc(_sfc_main$1z, [["render", _sfc_render$1y], ["__scopeId", "data-v-9a476886"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/forum/index/index.vue"]]);
  const _imports_0$e = "/static/forum/send.svg";
  const _imports_1$9 = "/static/forum/qa.svg";
  const _sfc_main$1y = {
    __name: "write",
    setup(__props, { expose: __expose }) {
      __expose();
      const backFn = () => {
        uni.navigateBack({
          delta: 1
        });
      };
      const openPageHandler = (url2) => {
        uni.navigateTo({
          url: url2
        });
      };
      const __returned__ = { backFn, openPageHandler };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$1x(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    return vue.openBlock(), vue.createElementBlock("view", { class: "write-box" }, [
      vue.createElementVNode("view", { class: "write-header" }, [
        vue.createElementVNode("view", { class: "title" }, "每个灵魂都值得被看见"),
        vue.createElementVNode("view", { class: "remark" }, "出自 / 旅行社")
      ]),
      vue.createElementVNode("view", { class: "operate-list-box" }, [
        vue.createElementVNode("view", { class: "operate-first" }, [
          vue.createElementVNode("view", {
            class: "first-item green",
            onClick: _cache[0] || (_cache[0] = ($event) => $setup.openPageHandler("/pages/forum/write/send-dynamics/send-dynamics"))
          }, [
            vue.createElementVNode("view", { class: "title" }, "发心事"),
            vue.createElementVNode("view", { class: "content" }, "此时此刻，随时记录收获爱与温暖"),
            vue.createElementVNode("image", {
              src: _imports_0$e,
              class: "img"
            })
          ]),
          vue.createElementVNode("view", {
            class: "first-item yellow",
            onClick: _cache[1] || (_cache[1] = ($event) => $setup.openPageHandler("/pages/forum/write/ask-question/ask-question"))
          }, [
            vue.createElementVNode("view", { class: "title" }, "提问题"),
            vue.createElementVNode("view", { class: "content" }, "7万+7万+专业咨询师为你答疑解惑"),
            vue.createElementVNode("image", {
              src: _imports_1$9,
              class: "img"
            })
          ])
        ]),
        vue.createElementVNode("view", { class: "txt" }, "写给自己的一封信"),
        vue.createElementVNode("view", { class: "operate-second" }, [
          vue.createElementVNode("view", { class: "second-item one" }, [
            vue.createElementVNode("view", {
              class: "title",
              onClick: _cache[2] || (_cache[2] = ($event) => $setup.openPageHandler("/pages/forum/write/write-mailbox/write-mailbox?type=old"))
            }, "从前"),
            vue.createElementVNode("view", { class: "content" }, "写给从前的一封信")
          ]),
          vue.createElementVNode("view", { class: "second-item two" }, [
            vue.createElementVNode("view", {
              class: "title",
              onClick: _cache[3] || (_cache[3] = ($event) => $setup.openPageHandler("/pages/forum/write/write-mailbox/write-mailbox?type=new"))
            }, "现在"),
            vue.createElementVNode("view", { class: "content" }, "写给现在的一封信")
          ]),
          vue.createElementVNode("view", { class: "second-item three" }, [
            vue.createElementVNode("view", {
              class: "title",
              onClick: _cache[4] || (_cache[4] = ($event) => $setup.openPageHandler("/pages/forum/write/write-mailbox/write-mailbox?type=future"))
            }, "未来"),
            vue.createElementVNode("view", { class: "content" }, "写给未来的一封信")
          ])
        ]),
        vue.createElementVNode("view", { class: "close" }, [
          vue.createVNode(_component_uni_icons, {
            type: "close",
            size: "24",
            color: "rgba(0,0,0,0.3)",
            onClick: $setup.backFn
          })
        ])
      ])
    ]);
  }
  const PagesForumWriteWrite = /* @__PURE__ */ _export_sfc(_sfc_main$1y, [["render", _sfc_render$1x], ["__scopeId", "data-v-2e0604c5"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/forum/write/write.vue"]]);
  let base64Avatar = "data:image/jpg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAAA8AAD/4QMraHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjMtYzAxMSA2Ni4xNDU2NjEsIDIwMTIvMDIvMDYtMTQ6NTY6MjcgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDUzYgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjREMEQwRkY0RjgwNDExRUE5OTY2RDgxODY3NkJFODMxIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjREMEQwRkY1RjgwNDExRUE5OTY2RDgxODY3NkJFODMxIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NEQwRDBGRjJGODA0MTFFQTk5NjZEODE4Njc2QkU4MzEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NEQwRDBGRjNGODA0MTFFQTk5NjZEODE4Njc2QkU4MzEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7/7gAOQWRvYmUAZMAAAAAB/9sAhAAGBAQEBQQGBQUGCQYFBgkLCAYGCAsMCgoLCgoMEAwMDAwMDBAMDg8QDw4MExMUFBMTHBsbGxwfHx8fHx8fHx8fAQcHBw0MDRgQEBgaFREVGh8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx//wAARCADIAMgDAREAAhEBAxEB/8QAcQABAQEAAwEBAAAAAAAAAAAAAAUEAQMGAgcBAQAAAAAAAAAAAAAAAAAAAAAQAAIBAwICBgkDBQAAAAAAAAABAhEDBCEFMVFBYXGREiKBscHRMkJSEyOh4XLxYjNDFBEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEQMRAD8A/fAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHbHFyZ/Dam+yLA+Z2L0Pjtyj2poD4AAAAAAAAAAAAAAAAAAAAAAAAKWFs9y6lcvvwQeqj8z9wFaziY1n/HbUX9XF97A7QAGXI23EvJ1goyfzR0YEfN269jeZ+a03pNe0DIAAAAAAAAAAAAAAAAAAAACvtO3RcVkXlWutuL9YFYAAAAAOJRjKLjJVi9GmB5/csH/mu1h/in8PU+QGMAAAAAAAAAAAAAAAAAAaMDG/6MmMH8C80+xAelSSVFolwQAAAAAAAHVlWI37ErUulaPk+hgeYnCUJuElSUXRrrQHAAAAAAAAAAAAAAAAABa2Oz4bM7r4zdF2ICmAAAAAAAAAg7zZ8GX41wuJP0rRgYAAAAAAAAAAAAAAAAAD0m2R8ODaXU33tsDSAAAAAAAAAlb9HyWZcnJd9PcBHAAAAAAAAAAAAAAAAAPS7e64Vn+KA0AAAAAAAAAJm+v8Ftf3ewCKAAAAAAAAAAAAAAAAAX9muqeGo9NttP06+0DcAAAAAAAAAjb7dTu2ra+VOT9P8AQCWAAAAAAAAAAAAAAAAAUNmyPt5Ltv4bui/kuAF0AAAAAAADiUlGLlJ0SVW+oDzOXfd/Ind6JPRdS0QHSAAAAAAAAAAAAAAAAAE2nVaNcGB6Lbs6OTao9LsF51z60BrAAAAAABJ3jOVHjW3r/sa9QEgAAAAAAAAAAAAAAAAAAAPu1duWriuW34ZR4MC9hbnZyEoy8l36XwfYBsAAADaSq9EuLAlZ+7xSdrGdW9Hc5dgEdtt1erfFgAAAAAAAAAAAAAAAAADVjbblX6NR8MH80tEBRs7HYivyzlN8lovaBPzduvY0m6eK10TXtAyAarO55lpJK54orolr+4GqO/Xaea1FvqbXvA+Z77kNeW3GPbV+4DJfzcm/pcm3H6Vou5AdAFLC2ed2Pjv1txa8sV8T6wOL+yZEKu1JXFy4MDBOE4ScZxcZLinoB8gAAAAAAAAAAAB242LeyJ+C3GvN9C7QLmJtePYpKS+5c+p8F2IDYAANJqj1T4oCfk7Nj3G5Wn9qXJax7gJ93Z82D8sVNc4v30A6Xg5i42Z+iLfqARwcyT0sz9MWvWBps7LlTf5Grce9/oBTxdtxseklHxT+uWr9AGoAB138ezfj4bsFJdD6V2MCPm7RdtJzs1uW1xXzL3gTgAAAAAAAAADRhYc8q74I6RWs5ckB6GxYtWLat21SK731sDsAAAAAAAAAAAAAAAASt021NO/YjrxuQXT1oCOAAAAAAABzGLlJRSq26JAelwsWONYjbXxcZvmwO8AAAAAAAAAAAAAAAAAAef3TEWPkVivx3NY9T6UBiAAAAAABo2+VmGXblddIJ8eivRUD0oAAAAAAAAAAAAAAAAAAAYt4tKeFKVNYNSXfRgefAAAAAAAAr7VuSSWPedKaW5v1MCsAAAAAAAAAAAAAAAAAAIe6bj96Ts2n+JPzSXzP3ATgAAAAAAAAFbbt1UUrOQ9FpC4/UwK6aaqtU+DAAAAAAAAAAAAAAA4lKMIuUmoxWrb4ARNx3R3q2rLpa4Sl0y/YCcAAAAAAAAAAANmFud7G8r89r6X0dgFvGzLGRGtuWvTF6NAdwAAAAAAAAAAAy5W442PVN+K59EePp5ARMvOv5MvO6QXCC4AZwAAAAAAAAAAAAAcxlKLUotprg1owN+PvORborq+7Hnwl3gUbO74VzRydt8pKn68ANcJwmqwkpLmnUDkAAAAfNy9atqtyagut0AxXt5xIV8Fbj6lRd7Am5G65V6qUvtwfyx94GMAAAAAAAAAAAAAAAAAAAOU2nVOj5gdsc3LiqRvTpyqwOxbnnrhdfpSfrQB7pnv/AGvuS9gHXPMy5/Fem1yq0v0A6W29XqwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAf//Z";
  const _sfc_main$1x = {
    name: "u-avatar",
    emits: ["click"],
    props: {
      // 背景颜色
      bgColor: {
        type: String,
        default: "transparent"
      },
      // 头像路径
      src: {
        type: [String, null],
        default: ""
      },
      // 尺寸，large-大，default-中等，mini-小，如果为数值，则单位为rpx
      // 宽度等于高度
      size: {
        type: [String, Number],
        default: "default"
      },
      // 头像模型，square-带圆角方形，circle-圆形
      mode: {
        type: String,
        default: "circle"
      },
      // 文字内容
      text: {
        type: String,
        default: ""
      },
      // 图片的裁剪模型
      imgMode: {
        type: String,
        default: "aspectFill"
      },
      // 标识符
      index: {
        type: [String, Number],
        default: ""
      },
      // 右上角性别角标，man-男，woman-女
      sexIcon: {
        type: [String, null],
        default: "man"
      },
      // 右下角的等级图标
      levelIcon: {
        type: String,
        default: "level"
      },
      // 右下角等级图标背景颜色
      levelBgColor: {
        type: String,
        default: ""
      },
      // 右上角性别图标的背景颜色
      sexBgColor: {
        type: String,
        default: ""
      },
      // 是否显示性别图标
      showSex: {
        type: Boolean,
        default: false
      },
      // 是否显示等级图标
      showLevel: {
        type: Boolean,
        default: false
      }
    },
    data() {
      return {
        error: false,
        // 头像的地址，因为如果加载错误，需要赋值为默认图片，props值无法修改，所以需要一个中间值
        avatar: this.src ? this.src : base64Avatar
      };
    },
    watch: {
      src(n2) {
        if (!n2) {
          this.avatar = base64Avatar;
          this.error = true;
        } else {
          this.avatar = n2;
          this.error = false;
        }
      }
    },
    computed: {
      wrapStyle() {
        let style = {};
        style.height = this.size == "large" ? "120rpx" : this.size == "default" ? "90rpx" : this.size == "mini" ? "70rpx" : this.size + "rpx";
        style.width = style.height;
        style.flex = `0 0 ${style.height}`;
        style.backgroundColor = this.bgColor;
        style.borderRadius = this.mode == "circle" ? "500px" : "5px";
        if (this.text)
          style.padding = `0 6rpx`;
        return style;
      },
      imgStyle() {
        let style = {};
        style.borderRadius = this.mode == "circle" ? "500px" : "5px";
        return style;
      },
      // 取字符串的第一个字符
      uText() {
        return String(this.text)[0];
      },
      // 性别图标的自定义样式
      uSexStyle() {
        let style = {};
        if (this.sexBgColor)
          style.backgroundColor = this.sexBgColor;
        return style;
      },
      // 等级图标的自定义样式
      uLevelStyle() {
        let style = {};
        if (this.levelBgColor)
          style.backgroundColor = this.levelBgColor;
        return style;
      }
    },
    methods: {
      // 图片加载错误时，显示默认头像
      loadError() {
        this.error = true;
        this.avatar = base64Avatar;
      },
      click() {
        this.$emit("click", this.index);
      }
    }
  };
  function _sfc_render$1w(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_u_icon = resolveEasycom(vue.resolveDynamicComponent("u-icon"), __easycom_2$b);
    return vue.openBlock(), vue.createElementBlock(
      "view",
      {
        class: "u-avatar",
        style: vue.normalizeStyle([$options.wrapStyle]),
        onClick: _cache[1] || (_cache[1] = (...args) => $options.click && $options.click(...args))
      },
      [
        !$options.uText && $data.avatar ? (vue.openBlock(), vue.createElementBlock("image", {
          key: 0,
          onError: _cache[0] || (_cache[0] = (...args) => $options.loadError && $options.loadError(...args)),
          style: vue.normalizeStyle([$options.imgStyle]),
          class: "u-avatar__img",
          src: $data.avatar,
          mode: $props.imgMode
        }, null, 44, ["src", "mode"])) : $options.uText ? (vue.openBlock(), vue.createElementBlock(
          "text",
          {
            key: 1,
            class: "u-line-1",
            style: {
              fontSize: "38rpx"
            }
          },
          vue.toDisplayString($options.uText),
          1
          /* TEXT */
        )) : vue.renderSlot(_ctx.$slots, "default", { key: 2 }, void 0, true),
        $props.showSex && $props.sexIcon ? (vue.openBlock(), vue.createElementBlock(
          "view",
          {
            key: 3,
            class: vue.normalizeClass(["u-avatar__sex", ["u-avatar__sex--" + $props.sexIcon]]),
            style: vue.normalizeStyle([$options.uSexStyle])
          },
          [
            $props.sexIcon ? (vue.openBlock(), vue.createBlock(_component_u_icon, {
              key: 0,
              name: $props.sexIcon,
              size: "20"
            }, null, 8, ["name"])) : vue.createCommentVNode("v-if", true)
          ],
          6
          /* CLASS, STYLE */
        )) : vue.createCommentVNode("v-if", true),
        $props.showLevel ? (vue.openBlock(), vue.createElementBlock(
          "view",
          {
            key: 4,
            class: "u-avatar__level",
            style: vue.normalizeStyle([$options.uLevelStyle])
          },
          [
            vue.createVNode(_component_u_icon, {
              name: $props.levelIcon,
              size: "20"
            }, null, 8, ["name"])
          ],
          4
          /* STYLE */
        )) : vue.createCommentVNode("v-if", true)
      ],
      4
      /* STYLE */
    );
  }
  const __easycom_2$7 = /* @__PURE__ */ _export_sfc(_sfc_main$1x, [["render", _sfc_render$1w], ["__scopeId", "data-v-49012a02"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/uni_modules/vk-uview-ui/components/u-avatar/u-avatar.vue"]]);
  const _sfc_main$1w = {
    __name: "mood-log",
    setup(__props, { expose: __expose }) {
      __expose();
      const sharePopup = vue.ref(null);
      const contentTabsList = vue.ref([{
        id: 0,
        label: "最新"
      }, {
        id: 1,
        label: "推荐"
      }, {
        id: 2,
        label: "关注"
      }]);
      const contentTabsActive = vue.ref(0);
      const data = vue.reactive({
        listParams: {
          "current": 1,
          "size": 10,
          "params": {}
        },
        list: []
      });
      const contentTabsHandler = (options) => {
        if (contentTabsActive.value != options.id) {
          contentTabsActive.value = options.id;
        }
      };
      const newContens = vue.ref([{
        content: "测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",
        isZan: 0,
        zanNum: 536,
        isFollow: 0
      }, {
        content: "测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",
        isZan: 1,
        zanNum: 536,
        isFollow: 1
      }, {
        content: "测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",
        isZan: 0,
        zanNum: 536,
        isFollow: 1
      }, {
        content: "测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",
        isZan: 0,
        zanNum: 536,
        isFollow: 1
      }, {
        content: "测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",
        isZan: 0,
        zanNum: 536,
        isFollow: 0
      }, {
        content: "测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",
        isZan: 0,
        zanNum: 536,
        isFollow: 0
      }, {
        content: "测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",
        isZan: 0,
        zanNum: 536,
        isFollow: 0
      }, {
        content: "测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",
        isZan: 0,
        zanNum: 536,
        isFollow: 0
      }, {
        content: "测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",
        isZan: 0,
        zanNum: 536,
        isFollow: 0
      }, {
        content: "测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",
        isZan: 0,
        zanNum: 536,
        isFollow: 0
      }]);
      const openShare = () => {
        sharePopup.value.openShare();
      };
      const getList = async () => {
        let res2 = await getArticleList(data.listParams);
        data.list = res2.data.records;
      };
      vue.onMounted(() => {
        getList();
      });
      const __returned__ = { sharePopup, contentTabsList, contentTabsActive, data, contentTabsHandler, newContens, openShare, getList, onMounted: vue.onMounted, ref: vue.ref, reactive: vue.reactive, get getArticleList() {
        return getArticleList;
      }, share, get MoteLinesDivide() {
        return MoteLinesDivide;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$1v(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    return vue.openBlock(), vue.createElementBlock("view", { class: "forum-index-mood-log-content" }, [
      vue.createElementVNode("view", { class: "forum-index-list" }, [
        vue.createElementVNode("scroll-view", {
          "scroll-y": "true",
          class: "scroll-content",
          "show-scrollbar": false
        }, [
          (vue.openBlock(true), vue.createElementBlock(
            vue.Fragment,
            null,
            vue.renderList($setup.data.list, (item, index) => {
              return vue.openBlock(), vue.createElementBlock("view", {
                class: "forum-index-list-item",
                key: index
              }, [
                vue.createElementVNode("view", { class: "item-header" }, [
                  vue.createElementVNode("view", { class: "item-header-left" }, [
                    vue.createElementVNode("view", { class: "header-pic" }, [
                      vue.createElementVNode("image", {
                        src: _imports_0$n,
                        class: "img"
                      })
                    ]),
                    vue.createElementVNode("view", { class: "header-info" }, [
                      vue.createElementVNode("view", { class: "name" }, "张三"),
                      vue.createElementVNode("view", { class: "time" }, "52分钟前")
                    ])
                  ]),
                  vue.createElementVNode("view", { class: "item-header-right" }, [
                    vue.createElementVNode("view", null, [
                      vue.createVNode(_component_uni_icons, {
                        type: "more-filled",
                        size: "18",
                        color: "#808080"
                      })
                    ])
                  ])
                ]),
                vue.createElementVNode("view", { class: "item-content" }, [
                  vue.createVNode(
                    $setup["MoteLinesDivide"],
                    {
                      line: 5,
                      expandText: "展开",
                      foldHint: "收起"
                    },
                    {
                      default: vue.withCtx(() => [
                        vue.createTextVNode(
                          vue.toDisplayString(item.content),
                          1
                          /* TEXT */
                        )
                      ]),
                      _: 2
                      /* DYNAMIC */
                    },
                    1024
                    /* DYNAMIC_SLOTS */
                  )
                ]),
                vue.createElementVNode("view", { class: "item-btn" }, [
                  item.isZan == 0 ? (vue.openBlock(), vue.createElementBlock("view", { key: 0 }, [
                    vue.createElementVNode("image", {
                      src: _imports_1$a,
                      class: "img"
                    }),
                    vue.createTextVNode("点赞 ")
                  ])) : (vue.openBlock(), vue.createElementBlock("view", { key: 1 }, [
                    vue.createElementVNode("image", {
                      src: _imports_2$3,
                      class: "img"
                    }),
                    vue.createTextVNode(
                      vue.toDisplayString(item.zanNum),
                      1
                      /* TEXT */
                    )
                  ])),
                  vue.createElementVNode("view", null, [
                    vue.createElementVNode("image", {
                      src: _imports_3$1,
                      class: "img"
                    }),
                    vue.createTextVNode("评论 ")
                  ]),
                  vue.createElementVNode("view", null, [
                    vue.createElementVNode("image", {
                      src: _imports_4$1,
                      class: "img",
                      onClick: $setup.openShare
                    }),
                    vue.createTextVNode("分享 ")
                  ])
                ])
              ]);
            }),
            128
            /* KEYED_FRAGMENT */
          ))
        ])
      ]),
      vue.createVNode(
        $setup["share"],
        { ref: "sharePopup" },
        null,
        512
        /* NEED_PATCH */
      )
    ]);
  }
  const modeLog = /* @__PURE__ */ _export_sfc(_sfc_main$1w, [["render", _sfc_render$1v], ["__scopeId", "data-v-28960cbc"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/forum/my/components/mood-log.vue"]]);
  const _sfc_main$1v = {
    __name: "mail-box",
    setup(__props, { expose: __expose }) {
      __expose();
      const contentLists = vue.ref([{
        title: "写给从前的自己一封信",
        type: "old",
        content: "从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前"
      }, {
        title: "写给现在的自己一封信",
        type: "new",
        content: "现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在"
      }, {
        title: "写给未来的自己一封信",
        type: "future",
        content: "未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来"
      }]);
      const openMailBoxDetail = (item) => {
        uni.navigateTo({
          url: `/pages/forum/mailbox/mailbox?type=${item.type}`
        });
      };
      const __returned__ = { contentLists, openMailBoxDetail, ref: vue.ref, get MoteLinesDivide() {
        return MoteLinesDivide;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$1u(_ctx, _cache, $props, $setup, $data, $options) {
    return vue.openBlock(), vue.createElementBlock("view", { class: "mailbox-box" }, [
      vue.createElementVNode("scroll-view", {
        "scroll-y": "true",
        class: "scroll-content",
        "show-scrollbar": false
      }, [
        vue.createElementVNode("view", { class: "mailbox-list" }, [
          (vue.openBlock(true), vue.createElementBlock(
            vue.Fragment,
            null,
            vue.renderList($setup.contentLists, (item, index) => {
              return vue.openBlock(), vue.createElementBlock("view", {
                class: vue.normalizeClass(["mailbox-item", item.type]),
                key: index,
                onClick: ($event) => $setup.openMailBoxDetail(item)
              }, [
                vue.createElementVNode("view", { class: "content-item" }, [
                  vue.createElementVNode(
                    "view",
                    { class: "title" },
                    vue.toDisplayString(item.title),
                    1
                    /* TEXT */
                  ),
                  vue.createElementVNode("view", { class: "content" }, [
                    vue.createVNode(
                      $setup["MoteLinesDivide"],
                      {
                        line: 4,
                        expandText: "展开",
                        foldHint: "收起"
                      },
                      {
                        default: vue.withCtx(() => [
                          vue.createTextVNode(
                            vue.toDisplayString(item.content),
                            1
                            /* TEXT */
                          )
                        ]),
                        _: 2
                        /* DYNAMIC */
                      },
                      1024
                      /* DYNAMIC_SLOTS */
                    )
                  ])
                ]),
                vue.createElementVNode("image", {
                  src: item.type == "old" ? "@/static/forum/old-arrow.png" : item.type == "new" ? "@/static/forum/new-arrow.png" : "@/static/forum/future-arrow.png",
                  class: "img"
                }, null, 8, ["src"])
              ], 10, ["onClick"]);
            }),
            128
            /* KEYED_FRAGMENT */
          ))
        ])
      ])
    ]);
  }
  const mailBox = /* @__PURE__ */ _export_sfc(_sfc_main$1v, [["render", _sfc_render$1u], ["__scopeId", "data-v-b26a0557"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/forum/my/components/mail-box.vue"]]);
  const _sfc_main$1u = {
    __name: "article-box",
    setup(__props, { expose: __expose }) {
      __expose();
      const contentLists = vue.ref([{
        title: "写给从前的自己一封信",
        type: "old",
        content: "从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前"
      }, {
        title: "写给现在的自己一封信",
        type: "new",
        content: "现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在"
      }, {
        title: "写给未来的自己一封信",
        type: "future",
        content: "未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来"
      }]);
      const data = vue.reactive({
        listParams: {
          "current": 1,
          "size": 10,
          "params": {}
        },
        list: []
      });
      const openMailBoxDetail = (item) => {
        uni.navigateTo({
          url: `/pages/forum/mailbox/mailbox?type=${item.type}`
        });
      };
      const getList = async () => {
        let res2 = await getArticleByUserId(data.listParams);
        data.list = res2.data.records;
      };
      vue.onMounted(() => {
        getList();
      });
      const __returned__ = { contentLists, data, openMailBoxDetail, getList, onMounted: vue.onMounted, ref: vue.ref, reactive: vue.reactive, get getArticleByUserId() {
        return getArticleByUserId;
      }, get MoteLinesDivide() {
        return MoteLinesDivide;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$1t(_ctx, _cache, $props, $setup, $data, $options) {
    return vue.openBlock(), vue.createElementBlock("view", { class: "mailbox-box" }, [
      vue.createElementVNode("scroll-view", {
        "scroll-y": "true",
        class: "scroll-content",
        "show-scrollbar": false
      }, [
        vue.createElementVNode("view", { class: "mailbox-list" }, [
          (vue.openBlock(true), vue.createElementBlock(
            vue.Fragment,
            null,
            vue.renderList($setup.data.list, (item, index) => {
              return vue.openBlock(), vue.createElementBlock("view", {
                class: vue.normalizeClass(["mailbox-item", item.type]),
                key: index,
                onClick: ($event) => $setup.openMailBoxDetail(item)
              }, [
                vue.createElementVNode("view", { class: "content-item" }, [
                  vue.createElementVNode(
                    "view",
                    { class: "title" },
                    vue.toDisplayString(item.title),
                    1
                    /* TEXT */
                  ),
                  vue.createElementVNode("view", { class: "content" }, [
                    vue.createVNode(
                      $setup["MoteLinesDivide"],
                      {
                        line: 4,
                        expandText: "展开",
                        foldHint: "收起"
                      },
                      {
                        default: vue.withCtx(() => [
                          vue.createTextVNode(
                            vue.toDisplayString(item.content),
                            1
                            /* TEXT */
                          )
                        ]),
                        _: 2
                        /* DYNAMIC */
                      },
                      1024
                      /* DYNAMIC_SLOTS */
                    )
                  ])
                ]),
                vue.createElementVNode("image", {
                  src: item.type == "old" ? "@/static/forum/old-arrow.png" : item.type == "new" ? "@/static/forum/new-arrow.png" : "@/static/forum/future-arrow.png",
                  class: "img"
                }, null, 8, ["src"])
              ], 10, ["onClick"]);
            }),
            128
            /* KEYED_FRAGMENT */
          ))
        ])
      ])
    ]);
  }
  const articleBox = /* @__PURE__ */ _export_sfc(_sfc_main$1u, [["render", _sfc_render$1t], ["__scopeId", "data-v-99e53156"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/forum/my/components/article-box.vue"]]);
  const _sfc_main$1t = {
    __name: "my",
    setup(__props, { expose: __expose }) {
      __expose();
      vue.useCssVars((_ctx) => ({
        "216c1057-statusBarHeight": statusBarHeight.value
      }));
      const globalStore = useGlobalDataStore();
      const statusBarHeight = vue.ref(globalStore.statusBarHeight + "px");
      const scrollTop = vue.ref(0);
      const headerTabsList = vue.ref([{
        id: 0,
        label: "心情日志"
      }, {
        id: 1,
        label: "信箱"
      }, {
        id: 2,
        label: "文章"
      }]);
      const userlnfo1 = vue.ref({});
      const headerTabsActive = vue.ref(0);
      const headerTabsHandler = (options) => {
        if (headerTabsActive.value != options.id) {
          headerTabsActive.value = options.id;
        }
      };
      const openWrite = () => {
        uni.navigateTo({
          url: "/pages/forum/write/write"
        });
      };
      const backFn = () => {
        uni.navigateBack({
          delta: 1
        });
      };
      const editUserHandler = () => {
        uni.navigateTo({
          url: "/pages/forum/my/userInfo"
        });
      };
      const getlnfo = async () => {
        let res2 = await getUserInfo();
        userlnfo1.value = res2.data;
        formatAppLog("log", "at pages/forum/my/my.vue:128", "userInfo", userlnfo1.value);
      };
      vue.onMounted(() => {
        getlnfo();
      });
      const __returned__ = { globalStore, statusBarHeight, scrollTop, headerTabsList, userlnfo1, headerTabsActive, headerTabsHandler, openWrite, backFn, editUserHandler, getlnfo, get getUserInfo() {
        return getUserInfo;
      }, nextTick: vue.nextTick, onMounted: vue.onMounted, ref: vue.ref, get useGlobalDataStore() {
        return useGlobalDataStore;
      }, modeLog, mailBox, articleBox };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$1s(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    const _component_u_avatar = resolveEasycom(vue.resolveDynamicComponent("u-avatar"), __easycom_2$7);
    return vue.openBlock(), vue.createElementBlock("view", { class: "forum-my-box" }, [
      vue.createElementVNode("view", { class: "navbar" }, [
        vue.createElementVNode("view", { class: "header" }, [
          vue.createVNode(_component_uni_icons, {
            type: "left",
            size: "24",
            color: "#000",
            onClick: $setup.backFn,
            class: "left"
          })
        ]),
        vue.createElementVNode("view", { class: "user-info" }, [
          vue.createElementVNode("view", { class: "user-info-content" }, [
            vue.createVNode(_component_u_avatar, {
              src: $setup.userlnfo1.avatar == null ? "@/static/my/profile.png" : $setup.userlnfo1.avatar,
              class: "profile"
            }, null, 8, ["src"]),
            vue.createElementVNode("view", null, [
              vue.createElementVNode(
                "view",
                { class: "nick-name" },
                vue.toDisplayString($setup.userlnfo1.realName),
                1
                /* TEXT */
              ),
              vue.createElementVNode("view", { class: "id-num" }, [
                vue.createElementVNode(
                  "text",
                  null,
                  "ID：" + vue.toDisplayString($setup.userlnfo1.id),
                  1
                  /* TEXT */
                )
              ])
            ])
          ]),
          vue.createElementVNode("view", { class: "edit-user-box" }, [
            vue.createElementVNode("view", {
              class: "edit-user",
              onClick: $setup.editUserHandler
            }, "编辑资料")
          ])
        ]),
        vue.createElementVNode("view", { class: "remark" }, "倾听师寄语倾听师寄语倾听师寄语倾听师寄"),
        vue.createElementVNode("view", { class: "num-box" }, [
          vue.createElementVNode("view", { class: "num-content-box" }, [
            vue.createElementVNode("view", { class: "content-item" }, [
              vue.createElementVNode("text", { class: "num" }, "9999"),
              vue.createElementVNode("text", { class: "txt" }, "获赞")
            ]),
            vue.createElementVNode("view", { class: "content-item" }, [
              vue.createElementVNode("text", { class: "num" }, "9999"),
              vue.createElementVNode("text", { class: "txt" }, "关注")
            ]),
            vue.createElementVNode("view", { class: "content-item" }, [
              vue.createElementVNode("text", { class: "num" }, "9999"),
              vue.createElementVNode("text", { class: "txt" }, "粉丝")
            ]),
            vue.createElementVNode("view", { class: "content-item" }, [
              vue.createElementVNode("text", { class: "num" }, "9999"),
              vue.createElementVNode("text", { class: "txt" }, "访客")
            ])
          ])
        ])
      ]),
      vue.createElementVNode("view", { class: "tabs" }, [
        (vue.openBlock(true), vue.createElementBlock(
          vue.Fragment,
          null,
          vue.renderList($setup.headerTabsList, (item, index) => {
            return vue.openBlock(), vue.createElementBlock("view", {
              onClick: ($event) => $setup.headerTabsHandler(item),
              class: vue.normalizeClass(["tab-item", $setup.headerTabsActive == item.id ? "active" : ""]),
              key: index
            }, vue.toDisplayString(item.label), 11, ["onClick"]);
          }),
          128
          /* KEYED_FRAGMENT */
        ))
      ]),
      $setup.headerTabsActive == 0 ? (vue.openBlock(), vue.createElementBlock("view", {
        key: 0,
        class: "mood-log-box"
      }, [
        vue.createVNode($setup["modeLog"])
      ])) : $setup.headerTabsActive == 1 ? (vue.openBlock(), vue.createElementBlock("view", {
        key: 1,
        class: "mood-log-box mailbox-box"
      }, [
        vue.createVNode($setup["mailBox"])
      ])) : $setup.headerTabsActive == 2 ? (vue.openBlock(), vue.createElementBlock("view", {
        key: 2,
        class: "mood-log-box mailbox-box"
      }, [
        vue.createVNode($setup["articleBox"])
      ])) : vue.createCommentVNode("v-if", true),
      vue.createElementVNode("view", {
        class: "fab-button",
        onClick: $setup.openWrite
      }, [
        vue.createElementVNode("image", {
          src: _imports_0$f,
          class: "img"
        })
      ])
    ]);
  }
  const PagesForumMyMy = /* @__PURE__ */ _export_sfc(_sfc_main$1t, [["render", _sfc_render$1s], ["__scopeId", "data-v-216c1057"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/forum/my/my.vue"]]);
  const _sfc_main$1s = {
    __name: "dynamics-log",
    setup(__props, { expose: __expose }) {
      __expose();
      const sharePopup = vue.ref(null);
      const contentTabsList = vue.ref([{
        id: 0,
        label: "最新"
      }, {
        id: 1,
        label: "推荐"
      }, {
        id: 2,
        label: "关注"
      }]);
      const contentTabsActive = vue.ref(0);
      const contentTabsHandler = (options) => {
        if (contentTabsActive.value != options.id) {
          contentTabsActive.value = options.id;
        }
      };
      const newContens = vue.ref([{
        content: "测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",
        isZan: 0,
        zanNum: 536,
        isFollow: 0
      }, {
        content: "测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",
        isZan: 1,
        zanNum: 536,
        isFollow: 1
      }, {
        content: "测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",
        isZan: 0,
        zanNum: 536,
        isFollow: 1
      }, {
        content: "测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",
        isZan: 0,
        zanNum: 536,
        isFollow: 1
      }, {
        content: "测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",
        isZan: 0,
        zanNum: 536,
        isFollow: 0
      }, {
        content: "测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",
        isZan: 0,
        zanNum: 536,
        isFollow: 0
      }, {
        content: "测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",
        isZan: 0,
        zanNum: 536,
        isFollow: 0
      }, {
        content: "测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",
        isZan: 0,
        zanNum: 536,
        isFollow: 0
      }, {
        content: "测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",
        isZan: 0,
        zanNum: 536,
        isFollow: 0
      }, {
        content: "测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",
        isZan: 0,
        zanNum: 536,
        isFollow: 0
      }]);
      const openShare = () => {
        sharePopup.value.openShare();
      };
      const __returned__ = { sharePopup, contentTabsList, contentTabsActive, contentTabsHandler, newContens, openShare, ref: vue.ref, share, get MoteLinesDivide() {
        return MoteLinesDivide;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$1r(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    return vue.openBlock(), vue.createElementBlock("view", { class: "forum-index-dynamics-log-content" }, [
      vue.createElementVNode("view", { class: "forum-index-list" }, [
        vue.createElementVNode("scroll-view", {
          "scroll-y": "true",
          class: "scroll-content",
          "show-scrollbar": false
        }, [
          (vue.openBlock(true), vue.createElementBlock(
            vue.Fragment,
            null,
            vue.renderList($setup.newContens, (item, index) => {
              return vue.openBlock(), vue.createElementBlock("view", {
                class: "forum-index-list-item",
                key: index
              }, [
                vue.createElementVNode("view", { class: "item-header" }, [
                  vue.createElementVNode("view", { class: "item-header-left" }, [
                    vue.createElementVNode("view", { class: "header-pic" }, [
                      vue.createElementVNode("image", {
                        src: _imports_0$n,
                        class: "img"
                      })
                    ]),
                    vue.createElementVNode("view", { class: "header-info" }, [
                      vue.createElementVNode("view", { class: "name" }, "张三"),
                      vue.createElementVNode("view", { class: "time" }, "52分钟前")
                    ])
                  ]),
                  vue.createElementVNode("view", { class: "item-header-right" }, [
                    vue.createElementVNode("view", null, [
                      vue.createVNode(_component_uni_icons, {
                        type: "more-filled",
                        size: "18",
                        color: "#808080"
                      })
                    ])
                  ])
                ]),
                vue.createElementVNode("view", { class: "item-content" }, [
                  vue.createVNode(
                    $setup["MoteLinesDivide"],
                    {
                      line: 5,
                      expandText: "展开",
                      foldHint: "收起"
                    },
                    {
                      default: vue.withCtx(() => [
                        vue.createTextVNode(
                          vue.toDisplayString(item.content),
                          1
                          /* TEXT */
                        )
                      ]),
                      _: 2
                      /* DYNAMIC */
                    },
                    1024
                    /* DYNAMIC_SLOTS */
                  )
                ]),
                vue.createElementVNode("view", { class: "item-btn" }, [
                  item.isZan == 0 ? (vue.openBlock(), vue.createElementBlock("view", { key: 0 }, [
                    vue.createElementVNode("image", {
                      src: _imports_1$a,
                      class: "img"
                    }),
                    vue.createTextVNode("点赞 ")
                  ])) : (vue.openBlock(), vue.createElementBlock("view", { key: 1 }, [
                    vue.createElementVNode("image", {
                      src: _imports_2$3,
                      class: "img"
                    }),
                    vue.createTextVNode(
                      vue.toDisplayString(item.zanNum),
                      1
                      /* TEXT */
                    )
                  ])),
                  vue.createElementVNode("view", null, [
                    vue.createElementVNode("image", {
                      src: _imports_3$1,
                      class: "img"
                    }),
                    vue.createTextVNode("评论 ")
                  ]),
                  vue.createElementVNode("view", null, [
                    vue.createElementVNode("image", {
                      src: _imports_4$1,
                      class: "img",
                      onClick: $setup.openShare
                    }),
                    vue.createTextVNode("分享 ")
                  ])
                ])
              ]);
            }),
            128
            /* KEYED_FRAGMENT */
          ))
        ])
      ]),
      vue.createVNode(
        $setup["share"],
        { ref: "sharePopup" },
        null,
        512
        /* NEED_PATCH */
      )
    ]);
  }
  const dynamicsLog = /* @__PURE__ */ _export_sfc(_sfc_main$1s, [["render", _sfc_render$1r], ["__scopeId", "data-v-e75141f3"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/forum/other/components/dynamics-log.vue"]]);
  const _sfc_main$1r = {
    __name: "other",
    setup(__props, { expose: __expose }) {
      __expose();
      vue.useCssVars((_ctx) => ({
        "154647ed-statusBarHeight": statusBarHeight.value
      }));
      const globalStore = useGlobalDataStore();
      const statusBarHeight = vue.ref(globalStore.statusBarHeight + "px");
      const scrollTop = vue.ref(0);
      const isFollow = vue.ref(false);
      const headerTabsList = vue.ref([{
        id: 0,
        label: "动态"
      }]);
      const headerTabsActive = vue.ref(0);
      const headerTabsHandler = (options) => {
        if (headerTabsActive.value != options.id) {
          headerTabsActive.value = options.id;
        }
      };
      const openWrite = () => {
        uni.navigateTo({
          url: "/pages/forum/write/write"
        });
      };
      const backFn = () => {
        uni.navigateBack({
          delta: 1
        });
      };
      const __returned__ = { globalStore, statusBarHeight, scrollTop, isFollow, headerTabsList, headerTabsActive, headerTabsHandler, openWrite, backFn, nextTick: vue.nextTick, onMounted: vue.onMounted, ref: vue.ref, get useGlobalDataStore() {
        return useGlobalDataStore;
      }, dynamicsLog };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$1q(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    return vue.openBlock(), vue.createElementBlock("view", { class: "forum-other-box" }, [
      vue.createElementVNode("view", { class: "navbar" }, [
        vue.createElementVNode("view", { class: "header" }, [
          vue.createVNode(_component_uni_icons, {
            type: "left",
            size: "24",
            color: "#000",
            onClick: $setup.backFn,
            class: "left"
          })
        ]),
        vue.createElementVNode("view", { class: "user-info" }, [
          vue.createElementVNode("view", { class: "user-info-content" }, [
            vue.createElementVNode("image", {
              src: _imports_0$n,
              class: "profile"
            }),
            vue.createElementVNode("view", null, [
              vue.createElementVNode("view", { class: "nick-name" }, "大石头"),
              vue.createElementVNode("view", { class: "id-num" }, [
                vue.createElementVNode("text", null, "ID：12367263732")
              ])
            ])
          ]),
          vue.createElementVNode("view", { class: "follow-box" }, [
            !$setup.isFollow ? (vue.openBlock(), vue.createElementBlock("view", {
              key: 0,
              class: "follow"
            }, [
              vue.createVNode(_component_uni_icons, {
                type: "plusempty",
                size: "12",
                color: "#fff",
                onClick: _cache[0] || (_cache[0] = ($event) => $setup.isFollow = true)
              }),
              vue.createTextVNode("关注")
            ])) : (vue.openBlock(), vue.createElementBlock("view", {
              key: 1,
              class: "follow isFollow",
              onClick: _cache[1] || (_cache[1] = ($event) => $setup.isFollow = false)
            }, "已关注"))
          ])
        ]),
        vue.createElementVNode("view", { class: "remark" }, "倾听师寄语倾听师寄语倾听师寄语倾听师寄"),
        vue.createElementVNode("view", { class: "num-box" }, [
          vue.createElementVNode("view", { class: "num-content-box" }, [
            vue.createElementVNode("view", { class: "content-item" }, [
              vue.createElementVNode("text", { class: "num" }, "9999"),
              vue.createElementVNode("text", { class: "txt" }, "获赞")
            ]),
            vue.createElementVNode("view", { class: "content-item" }, [
              vue.createElementVNode("text", { class: "num" }, "9999"),
              vue.createElementVNode("text", { class: "txt" }, "关注")
            ]),
            vue.createElementVNode("view", { class: "content-item" }, [
              vue.createElementVNode("text", { class: "num" }, "9999"),
              vue.createElementVNode("text", { class: "txt" }, "粉丝")
            ]),
            vue.createElementVNode("view", { class: "content-item" }, [
              vue.createElementVNode("text", { class: "num" }, "9999"),
              vue.createElementVNode("text", { class: "txt" }, "访客")
            ])
          ])
        ])
      ]),
      vue.createElementVNode("view", { class: "tabs" }, [
        (vue.openBlock(true), vue.createElementBlock(
          vue.Fragment,
          null,
          vue.renderList($setup.headerTabsList, (item, index) => {
            return vue.openBlock(), vue.createElementBlock("view", {
              onClick: ($event) => $setup.headerTabsHandler(item),
              class: vue.normalizeClass(["tab-item", $setup.headerTabsActive == item.id ? "active" : ""]),
              key: index
            }, vue.toDisplayString(item.label), 11, ["onClick"]);
          }),
          128
          /* KEYED_FRAGMENT */
        ))
      ]),
      $setup.headerTabsActive == 0 ? (vue.openBlock(), vue.createElementBlock("view", {
        key: 0,
        class: "mood-log-box"
      }, [
        vue.createVNode($setup["dynamicsLog"])
      ])) : vue.createCommentVNode("v-if", true)
    ]);
  }
  const PagesForumOtherOther = /* @__PURE__ */ _export_sfc(_sfc_main$1r, [["render", _sfc_render$1q], ["__scopeId", "data-v-154647ed"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/forum/other/other.vue"]]);
  const _sfc_main$1q = {
    __name: "mailbox",
    setup(__props, { expose: __expose }) {
      __expose();
      vue.useCssVars((_ctx) => ({
        "954d4f5b-statusBarHeight": statusBarHeight.value
      }));
      const globalStore = useGlobalDataStore();
      const statusBarHeight = vue.ref(globalStore.statusBarHeight + "px");
      const scrollTop = vue.ref(0);
      const type = vue.ref(null);
      onLoad((e2) => {
        type.value = e2.type;
      });
      const backFn = () => {
        uni.navigateBack({
          delta: 1
        });
      };
      const __returned__ = { globalStore, statusBarHeight, scrollTop, type, backFn, nextTick: vue.nextTick, onMounted: vue.onMounted, ref: vue.ref, get onLoad() {
        return onLoad;
      }, get useGlobalDataStore() {
        return useGlobalDataStore;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$1p(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    return vue.openBlock(), vue.createElementBlock("view", { class: "mailbox-contaior" }, [
      vue.createElementVNode(
        "view",
        {
          class: "navbar",
          style: vue.normalizeStyle({ "backgroundImage": $setup.type == "old" ? "url(/static/forum/old-bg.png)" : $setup.type == "new" ? "url(/static/forum/new-bg.png)" : "url(/static/forum/future-bg.png)" })
        },
        [
          vue.createElementVNode("view", { class: "header" }, [
            vue.createElementVNode("view", { class: "content" }, [
              vue.createVNode(_component_uni_icons, {
                type: "left",
                size: "24",
                color: "#000",
                onClick: $setup.backFn,
                class: "left"
              }),
              vue.createVNode(_component_uni_icons, {
                type: "more-filled",
                size: "18",
                color: "#808080"
              })
            ]),
            vue.createElementVNode("view", { class: "title" }, "写给从前的自己的一封信"),
            vue.createElementVNode("view", { class: "item-header" }, [
              vue.createElementVNode("view", { class: "item-header-left" }, [
                vue.createElementVNode("view", { class: "header-pic" }, [
                  vue.createElementVNode("image", {
                    src: _imports_0$n,
                    class: "img"
                  })
                ]),
                vue.createElementVNode("view", { class: "header-info" }, [
                  vue.createElementVNode("view", { class: "name" }, "张三"),
                  vue.createElementVNode("view", { class: "time" }, "咨询师 | 认证作家")
                ])
              ]),
              vue.createElementVNode("view", { class: "item-header-right" }, [
                vue.createElementVNode("image", {
                  src: $setup.type == "new" ? "@/static/forum/new-logo.png" : $setup.type == "old" ? "@/static/forum/old-logo.png" : "@/static/forum/future-logo.png",
                  class: "img"
                }, null, 8, ["src"])
              ])
            ])
          ])
        ],
        4
        /* STYLE */
      ),
      vue.createElementVNode("view", { class: "info" }, [
        vue.createElementVNode("scroll-view", {
          "scroll-y": "true",
          class: "scroll-content",
          "show-scrollbar": false
        }, [
          vue.createElementVNode("view", { class: "info-box" }, " 心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题。 心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题。 心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题。 心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题。 心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题。 心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题。 心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题。 心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题。 心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题。 心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题。 心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题。 心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题。 心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题。 心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题。 心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题。 心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题。 心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题。 心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题。 心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题。 心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题。 ")
        ])
      ])
    ]);
  }
  const PagesForumMailboxMailbox = /* @__PURE__ */ _export_sfc(_sfc_main$1q, [["render", _sfc_render$1p], ["__scopeId", "data-v-954d4f5b"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/forum/mailbox/mailbox.vue"]]);
  const _imports_0$d = "/static/forum/tag.png";
  const _sfc_main$1p = {
    __name: "ask-question",
    setup(__props, { expose: __expose }) {
      __expose();
      const backFn = () => {
        uni.navigateBack({
          delta: 1
        });
      };
      const form = vue.ref({});
      const content = vue.ref("");
      const tagContent = vue.ref({
        id: null,
        label: "添加标签"
      });
      const tagPopupRef = vue.ref(null);
      const releaseQuestion = async () => {
        let resp = await publishQuestion(form.value);
        formatAppLog("log", "at pages/forum/write/ask-question/ask-question.vue:94", resp);
        if (resp.code == 0) {
          uni.showToast({
            title: "发布成功",
            icon: "success",
            success(res2) {
              uni.navigateBack();
            }
          });
        }
      };
      const tabActive = vue.ref(1);
      const changeTabHandler = (i2) => {
        if (tabActive.value != i2) {
          tabActive.value = i2;
        }
      };
      const contentActive = vue.ref(1);
      const changeContentHandler = (i2) => {
        if (contentActive.value != i2) {
          contentActive.value = i2;
        }
      };
      const openHandler = () => {
        tagPopupRef.value.open();
      };
      const cancelHandler = () => {
        tagPopupRef.value.close();
      };
      const confirmHandler = () => {
        tagPopupRef.value.close();
        tagContent.value = {
          id: 1,
          label: "天气不错"
        };
      };
      const __returned__ = { backFn, form, content, tagContent, tagPopupRef, releaseQuestion, tabActive, changeTabHandler, contentActive, changeContentHandler, openHandler, cancelHandler, confirmHandler, onMounted: vue.onMounted, ref: vue.ref, get publishQuestion() {
        return publishQuestion;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$1o(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    const _component_uni_nav_bar = resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"), __easycom_1$4);
    const _component_uni_popup = resolveEasycom(vue.resolveDynamicComponent("uni-popup"), __easycom_3$5);
    return vue.openBlock(), vue.createElementBlock("view", { class: "ask-question-box" }, [
      vue.createVNode(_component_uni_nav_bar, {
        backgroundColor: "#F4F6F8",
        border: false,
        title: "提问题",
        class: "header-bar",
        statusBar: true,
        fixed: ""
      }, {
        left: vue.withCtx(() => [
          vue.createVNode(_component_uni_icons, {
            type: "left",
            size: "24",
            onClick: $setup.backFn
          })
        ]),
        right: vue.withCtx(() => [
          vue.createElementVNode("view", {
            class: "right",
            onClick: $setup.releaseQuestion
          }, " 发布 ")
        ]),
        _: 1
        /* STABLE */
      }),
      vue.createElementVNode("view", { class: "question-content" }, [
        vue.createElementVNode("view", { class: "question-title" }, [
          vue.withDirectives(vue.createElementVNode(
            "input",
            {
              class: "uni-input",
              maxlength: "25",
              placeholder: "请说出您的问题（5-25字）",
              "placeholder-class": "placeholder-title",
              "onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => $setup.form.title = $event)
            },
            null,
            512
            /* NEED_PATCH */
          ), [
            [vue.vModelText, $setup.form.title]
          ])
        ]),
        vue.createElementVNode("view", { class: "content" }, [
          vue.withDirectives(vue.createElementVNode(
            "textarea",
            {
              class: "uni-textarea",
              "onUpdate:modelValue": _cache[1] || (_cache[1] = ($event) => $setup.form.content = $event),
              placeholder: "示例：25岁女孩，近期情绪很焦虑，怎么去缓解？包含年龄、性别信息,明确具体困扰与症状，以便得到更专业解答？",
              "placeholder-class": "placeholder-content",
              maxlength: "1000"
            },
            null,
            512
            /* NEED_PATCH */
          ), [
            [vue.vModelText, $setup.form.content]
          ]),
          vue.createElementVNode(
            "view",
            { class: "char-count" },
            vue.toDisplayString($setup.content.length) + "/1000",
            1
            /* TEXT */
          )
        ])
      ]),
      vue.createElementVNode("view", { class: "question-tag" }, [
        vue.createElementVNode("view", {
          class: "tag-content",
          onClick: $setup.openHandler
        }, [
          vue.createElementVNode("image", {
            src: _imports_0$d,
            class: "img"
          }),
          vue.createElementVNode(
            "text",
            { class: "txt" },
            vue.toDisplayString($setup.tagContent.label),
            1
            /* TEXT */
          )
        ])
      ]),
      vue.createVNode(
        _component_uni_popup,
        {
          class: "tag-popup",
          ref: "tagPopupRef",
          type: "bottom",
          "background-color": "#fff",
          "border-radius": "24rpx 24rpx 0rpx 0rpx",
          "is-mask-click": false
        },
        {
          default: vue.withCtx(() => [
            vue.createElementVNode("view", { class: "tag-header" }, [
              vue.createElementVNode("view", { class: "tag-header-content" }, [
                vue.createElementVNode("view", {
                  class: "cancel",
                  onClick: $setup.cancelHandler
                }, "取消"),
                vue.createElementVNode("view", { class: "title" }, "选择标签"),
                vue.createElementVNode("view", {
                  class: "confirm",
                  onClick: $setup.confirmHandler
                }, "确认")
              ])
            ]),
            vue.createElementVNode("view", { class: "tag-content" }, [
              vue.createElementVNode("view", { class: "tag-left" }, [
                vue.createElementVNode("scroll-view", {
                  "scroll-y": "true",
                  class: "scroll-content",
                  "show-scrollbar": false
                }, [
                  (vue.openBlock(), vue.createElementBlock(
                    vue.Fragment,
                    null,
                    vue.renderList(20, (i2) => {
                      return vue.createElementVNode("view", {
                        class: vue.normalizeClass(["tag-item", $setup.tabActive == i2 ? "active" : ""]),
                        key: i2,
                        onClick: ($event) => $setup.changeTabHandler(i2)
                      }, " 健康 ", 10, ["onClick"]);
                    }),
                    64
                    /* STABLE_FRAGMENT */
                  ))
                ])
              ]),
              vue.createElementVNode("view", { class: "tag-right" }, [
                vue.createElementVNode("scroll-view", {
                  "scroll-y": "true",
                  class: "scroll-content",
                  "show-scrollbar": false
                }, [
                  vue.createElementVNode("view", { class: "tag-right-content" }, [
                    (vue.openBlock(), vue.createElementBlock(
                      vue.Fragment,
                      null,
                      vue.renderList(20, (i2) => {
                        return vue.createElementVNode("text", {
                          class: vue.normalizeClass(["content-item", $setup.contentActive == i2 ? "active" : ""]),
                          key: i2,
                          onClick: ($event) => $setup.changeContentHandler(i2)
                        }, " 天气很好 ", 10, ["onClick"]);
                      }),
                      64
                      /* STABLE_FRAGMENT */
                    ))
                  ])
                ])
              ])
            ])
          ]),
          _: 1
          /* STABLE */
        },
        512
        /* NEED_PATCH */
      )
    ]);
  }
  const PagesForumWriteAskQuestionAskQuestion = /* @__PURE__ */ _export_sfc(_sfc_main$1p, [["render", _sfc_render$1o], ["__scopeId", "data-v-9411c4a9"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/forum/write/ask-question/ask-question.vue"]]);
  const _imports_0$c = "/static/forum/upload-image.svg";
  const _imports_1$8 = "/static/forum/topic.png";
  const _sfc_main$1o = {
    __name: "send-dynamics",
    setup(__props, { expose: __expose }) {
      __expose();
      const backFn = () => {
        uni.navigateBack({
          delta: 1
        });
      };
      const content = vue.ref("");
      const imageUrl = vue.ref("");
      const tagContent = vue.ref({
        id: null,
        label: "添加话题"
      });
      const imageArr = vue.ref([]);
      const uploadImageHandler = () => {
        uni.chooseImage({
          count: 1,
          success: function(res2) {
            imageArr.value.push(res2.tempFilePaths[0]);
            uni.uploadFile({
              url: "https://ceshi.maimiaoqingsu.com/api/common/upload",
              filePath: res2.tempFilePaths[0],
              name: "file",
              header: {
                "token": uni.getStorageSync("token")
              },
              success: (res3) => {
                formatAppLog("log", "at pages/forum/write/send-dynamics/send-dynamics.vue:78", JSON.parse(res3.data));
                imageUrl.value = JSON.parse(res3.data).data.url;
              }
            });
          }
        });
      };
      const delImageHandler = (index) => {
        imageArr.value.splice(index, 1);
      };
      const addTopicHandler = () => {
        uni.navigateTo({
          url: "/pages/forum/write/choose-topic/choose-topic"
        });
      };
      const onSaveArticle = async () => {
        let res2 = await saveArticle({
          "content": content.value,
          "imageUrl": imageUrl.value
        });
        uni.showToast({
          title: "发布成功",
          icon: "none",
          // 可选值 'success', 'loading', 'none'
          duration: 2e3
          // 持续时长，单位ms
        });
        formatAppLog("log", "at pages/forum/write/send-dynamics/send-dynamics.vue:107", res2);
      };
      const __returned__ = { backFn, content, imageUrl, tagContent, imageArr, uploadImageHandler, delImageHandler, addTopicHandler, onSaveArticle, onMounted: vue.onMounted, ref: vue.ref, get saveArticle() {
        return saveArticle;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$1n(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    const _component_uni_nav_bar = resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"), __easycom_1$4);
    return vue.openBlock(), vue.createElementBlock("view", { class: "send-dynamics-box" }, [
      vue.createVNode(_component_uni_nav_bar, {
        backgroundColor: "#F4F6F8",
        border: false,
        title: "发动态",
        class: "header-bar",
        statusBar: true,
        fixed: ""
      }, {
        left: vue.withCtx(() => [
          vue.createVNode(_component_uni_icons, {
            type: "left",
            size: "24",
            onClick: $setup.backFn
          })
        ]),
        right: vue.withCtx(() => [
          vue.createElementVNode("view", {
            class: "right",
            onClick: $setup.onSaveArticle
          }, " 发布 ")
        ]),
        _: 1
        /* STABLE */
      }),
      vue.createElementVNode("view", { class: "question-content" }, [
        vue.createElementVNode("view", { class: "content" }, [
          vue.withDirectives(vue.createElementVNode(
            "textarea",
            {
              class: "uni-textarea",
              placeholder: "分享您此刻的心情，随时记录",
              "placeholder-class": "placeholder-content",
              maxlength: "1000",
              "onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => $setup.content = $event)
            },
            null,
            512
            /* NEED_PATCH */
          ), [
            [vue.vModelText, $setup.content]
          ])
        ])
      ]),
      vue.createElementVNode("view", { class: "upload-image" }, [
        vue.createElementVNode("view", { class: "upload-image-content" }, [
          vue.createElementVNode("view", { class: "uploadImageLogo" }, [
            vue.createElementVNode("image", {
              src: _imports_0$c,
              class: "image",
              onClick: $setup.uploadImageHandler
            })
          ]),
          (vue.openBlock(true), vue.createElementBlock(
            vue.Fragment,
            null,
            vue.renderList($setup.imageArr, (item, index) => {
              return vue.openBlock(), vue.createElementBlock("view", {
                class: "upload-image-item",
                key: index
              }, [
                vue.createElementVNode("image", {
                  src: item,
                  class: "image"
                }, null, 8, ["src"]),
                vue.createElementVNode("view", {
                  class: "del-img",
                  onClick: ($event) => $setup.delImageHandler(index)
                }, [
                  vue.createVNode(_component_uni_icons, {
                    type: "closeempty",
                    size: "12",
                    color: "#fff"
                  })
                ], 8, ["onClick"])
              ]);
            }),
            128
            /* KEYED_FRAGMENT */
          ))
        ])
      ]),
      vue.createElementVNode("view", {
        class: "question-tag",
        onClick: $setup.addTopicHandler
      }, [
        vue.createElementVNode("view", {
          class: "tag-content",
          onClick: _cache[1] || (_cache[1] = (...args) => _ctx.openHandler && _ctx.openHandler(...args))
        }, [
          vue.createElementVNode("image", {
            src: _imports_1$8,
            class: "img"
          }),
          vue.createElementVNode(
            "text",
            { class: "txt" },
            vue.toDisplayString($setup.tagContent.label),
            1
            /* TEXT */
          )
        ])
      ])
    ]);
  }
  const PagesForumWriteSendDynamicsSendDynamics = /* @__PURE__ */ _export_sfc(_sfc_main$1o, [["render", _sfc_render$1n], ["__scopeId", "data-v-c0c3a8cf"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/forum/write/send-dynamics/send-dynamics.vue"]]);
  const _sfc_main$1n = {
    __name: "write-mailbox",
    setup(__props, { expose: __expose }) {
      __expose();
      const backFn = () => {
        uni.navigateBack({
          delta: 1
        });
      };
      const content = vue.ref("");
      const imageArr = vue.ref([]);
      const uploadImageHandler = () => {
        uni.chooseImage({
          count: 1,
          success: function(res2) {
            imageArr.value.push(res2.tempFilePaths[0]);
          }
        });
      };
      const delImageHandler = (index) => {
        imageArr.value.splice(index, 1);
      };
      const __returned__ = { backFn, content, imageArr, uploadImageHandler, delImageHandler, onMounted: vue.onMounted, ref: vue.ref };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$1m(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    const _component_uni_nav_bar = resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"), __easycom_1$4);
    return vue.openBlock(), vue.createElementBlock("view", { class: "write-mailbox-box" }, [
      vue.createVNode(_component_uni_nav_bar, {
        backgroundColor: "#F4F6F8",
        border: false,
        title: "写给从前的一封信",
        class: "header-bar",
        statusBar: true,
        fixed: ""
      }, {
        left: vue.withCtx(() => [
          vue.createVNode(_component_uni_icons, {
            type: "left",
            size: "24",
            onClick: $setup.backFn
          })
        ]),
        right: vue.withCtx(() => [
          vue.createElementVNode("view", { class: "right" }, " 发布 ")
        ]),
        _: 1
        /* STABLE */
      }),
      vue.createElementVNode("view", { class: "question-content" }, [
        vue.createElementVNode("view", { class: "content" }, [
          vue.withDirectives(vue.createElementVNode(
            "textarea",
            {
              class: "uni-textarea",
              placeholder: "给从前的自己写一份信",
              "placeholder-class": "placeholder-content",
              maxlength: "1000",
              "onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => $setup.content = $event)
            },
            null,
            512
            /* NEED_PATCH */
          ), [
            [vue.vModelText, $setup.content]
          ]),
          vue.createElementVNode(
            "view",
            { class: "char-count" },
            vue.toDisplayString($setup.content.length) + "/1000",
            1
            /* TEXT */
          )
        ])
      ]),
      vue.createElementVNode("view", { class: "upload-image" }, [
        vue.createElementVNode("view", { class: "upload-image-content" }, [
          vue.createElementVNode("view", { class: "uploadImageLogo" }, [
            vue.createElementVNode("image", {
              src: _imports_0$c,
              class: "image",
              onClick: $setup.uploadImageHandler
            })
          ]),
          (vue.openBlock(true), vue.createElementBlock(
            vue.Fragment,
            null,
            vue.renderList($setup.imageArr, (item, index) => {
              return vue.openBlock(), vue.createElementBlock("view", {
                class: "upload-image-item",
                key: index
              }, [
                vue.createElementVNode("image", {
                  src: item,
                  class: "image"
                }, null, 8, ["src"]),
                vue.createElementVNode("view", {
                  class: "del-img",
                  onClick: ($event) => $setup.delImageHandler(index)
                }, [
                  vue.createVNode(_component_uni_icons, {
                    type: "closeempty",
                    size: "12",
                    color: "#fff"
                  })
                ], 8, ["onClick"])
              ]);
            }),
            128
            /* KEYED_FRAGMENT */
          ))
        ])
      ])
    ]);
  }
  const PagesForumWriteWriteMailboxWriteMailbox = /* @__PURE__ */ _export_sfc(_sfc_main$1n, [["render", _sfc_render$1m], ["__scopeId", "data-v-32c33dfb"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/forum/write/write-mailbox/write-mailbox.vue"]]);
  const _sfc_main$1m = {
    name: "u-mask",
    emits: ["click"],
    props: {
      // 是否显示遮罩
      show: {
        type: Boolean,
        default: false
      },
      // 层级z-index
      zIndex: {
        type: [Number, String],
        default: ""
      },
      // 用户自定义样式
      customStyle: {
        type: Object,
        default() {
          return {};
        }
      },
      // 遮罩的动画样式， 是否使用使用zoom进行scale进行缩放
      zoom: {
        type: Boolean,
        default: true
      },
      // 遮罩的过渡时间，单位为ms
      duration: {
        type: [Number, String],
        default: 300
      },
      // 是否可以通过点击遮罩进行关闭
      maskClickAble: {
        type: Boolean,
        default: true
      },
      // 遮罩的模糊度
      blur: {
        type: [Number, String],
        default: 0
      }
    },
    data() {
      return {
        zoomStyle: {
          transform: ""
        },
        scale: "scale(1.2, 1.2)"
      };
    },
    watch: {
      show(n2) {
        if (n2 && this.zoom) {
          this.zoomStyle.transform = "scale(1, 1)";
        } else if (!n2 && this.zoom) {
          this.zoomStyle.transform = this.scale;
        }
      }
    },
    computed: {
      maskStyle() {
        let style = {};
        style.backgroundColor = "rgba(0, 0, 0, 0.6)";
        if (this.show)
          style.zIndex = this.zIndex ? this.zIndex : this.$u.zIndex.mask;
        else
          style.zIndex = -1;
        style.transition = `all ${this.duration / 1e3}s ease-in-out`;
        if (Object.keys(this.customStyle).length)
          style = {
            ...style,
            ...this.customStyle
          };
        return style;
      },
      filterStyle() {
        let { blur } = this;
        let style = {};
        if (blur) {
          style.backdropFilter = `blur(${blur}rpx)`;
        }
        return style;
      }
    },
    methods: {
      click() {
        if (!this.maskClickAble)
          return;
        this.$emit("click");
      }
    }
  };
  function _sfc_render$1l(_ctx, _cache, $props, $setup, $data, $options) {
    return vue.openBlock(), vue.createElementBlock(
      "view",
      {
        class: vue.normalizeClass(["u-mask", {
          "u-mask-zoom": $props.zoom,
          "u-mask-show": $props.show
        }]),
        "hover-stop-propagation": "",
        style: vue.normalizeStyle([$options.maskStyle, $data.zoomStyle, $options.filterStyle]),
        onClick: _cache[0] || (_cache[0] = (...args) => $options.click && $options.click(...args)),
        onTouchmove: vue.withModifiers(() => {
        }, ["stop", "prevent"])
      },
      [
        vue.renderSlot(_ctx.$slots, "default", {}, void 0, true)
      ],
      38
      /* CLASS, STYLE, NEED_HYDRATION */
    );
  }
  const __easycom_0$2 = /* @__PURE__ */ _export_sfc(_sfc_main$1m, [["render", _sfc_render$1l], ["__scopeId", "data-v-b3b508a8"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/uni_modules/vk-uview-ui/components/u-mask/u-mask.vue"]]);
  const _sfc_main$1l = {
    name: "u-popup",
    emits: ["update:modelValue", "input", "open", "close"],
    props: {
      value: {
        type: Boolean,
        default: false
      },
      modelValue: {
        type: Boolean,
        default: false
      },
      /**
       * 显示状态
       */
      show: {
        type: Boolean,
        default: false
      },
      /**
       * 弹出方向，left|right|top|bottom|center
       */
      mode: {
        type: String,
        default: "left"
      },
      /**
       * 是否显示遮罩
       */
      mask: {
        type: Boolean,
        default: true
      },
      // 抽屉的宽度(mode=left|right)，或者高度(mode=top|bottom)，单位rpx，或者"auto"
      // 或者百分比"50%"，表示由内容撑开高度或者宽度
      length: {
        type: [Number, String],
        default: "auto"
      },
      // 是否开启缩放动画，只在mode=center时有效
      zoom: {
        type: Boolean,
        default: true
      },
      // 是否开启底部安全区适配，开启的话，会在iPhoneX机型底部添加一定的内边距
      safeAreaInsetBottom: {
        type: Boolean,
        default: false
      },
      // 是否可以通过点击遮罩进行关闭
      maskCloseAble: {
        type: Boolean,
        default: true
      },
      // 用户自定义样式
      customStyle: {
        type: Object,
        default() {
          return {};
        }
      },
      // 此为内部参数，不在文档对外使用，为了解决Picker和keyboard等融合了弹窗的组件
      // 对v-model双向绑定多层调用造成报错不能修改props值的问题
      popup: {
        type: Boolean,
        default: true
      },
      // 显示显示弹窗的圆角，单位rpx
      borderRadius: {
        type: [Number, String],
        default: 0
      },
      zIndex: {
        type: [Number, String],
        default: ""
      },
      // 是否显示关闭图标
      closeable: {
        type: Boolean,
        default: false
      },
      // 关闭图标的名称，只能uView的内置图标
      closeIcon: {
        type: String,
        default: "close"
      },
      // 自定义关闭图标位置，top-left为左上角，top-right为右上角，bottom-left为左下角，bottom-right为右下角
      closeIconPos: {
        type: String,
        default: "top-right"
      },
      // 关闭图标的颜色
      closeIconColor: {
        type: String,
        default: "#909399"
      },
      // 关闭图标的大小，单位rpx
      closeIconSize: {
        type: [String, Number],
        default: "30"
      },
      // 宽度，只对左，右，中部弹出时起作用，单位rpx，或者"auto"
      // 或者百分比"50%"，表示由内容撑开高度或者宽度，优先级高于length参数
      width: {
        type: String,
        default: ""
      },
      // 高度，只对上，下，中部弹出时起作用，单位rpx，或者"auto"
      // 或者百分比"50%"，表示由内容撑开高度或者宽度，优先级高于length参数
      height: {
        type: String,
        default: ""
      },
      // 给一个负的margin-top，往上偏移，避免和键盘重合的情况，仅在mode=center时有效
      negativeTop: {
        type: [String, Number],
        default: 0
      },
      // 遮罩的样式，一般用于修改遮罩的透明度
      maskCustomStyle: {
        type: Object,
        default() {
          return {};
        }
      },
      // 遮罩打开或收起的动画过渡时间，单位ms
      duration: {
        type: [String, Number],
        default: 250
      },
      // 遮罩的模糊度
      blur: {
        type: [String, Number],
        default: 0
      },
      backgroundColor: {
        type: String,
        default: "#ffffff"
      }
    },
    data() {
      return {
        visibleSync: false,
        showDrawer: false,
        timer: null,
        closeFromInner: false
        // value的值改变，是发生在内部还是外部
      };
    },
    computed: {
      valueCom() {
        return this.modelValue;
      },
      // 根据mode的位置，设定其弹窗的宽度(mode = left|right)，或者高度(mode = top|bottom)
      style() {
        let style = {};
        if (this.mode == "left" || this.mode == "right") {
          style = {
            width: this.width ? this.getUnitValue(this.width) : this.getUnitValue(this.length),
            height: "100%",
            transform: `translate3D(${this.mode == "left" ? "-100%" : "100%"},0px,0px)`
          };
        } else if (this.mode == "top" || this.mode == "bottom") {
          style = {
            width: "100%",
            height: this.height ? this.getUnitValue(this.height) : this.getUnitValue(this.length),
            transform: `translate3D(0px,${this.mode == "top" ? "-100%" : "100%"},0px)`
          };
        }
        style.zIndex = this.uZindex;
        if (this.borderRadius) {
          switch (this.mode) {
            case "left":
              style.borderRadius = `0 ${this.borderRadius}rpx ${this.borderRadius}rpx 0`;
              break;
            case "top":
              style.borderRadius = `0 0 ${this.borderRadius}rpx ${this.borderRadius}rpx`;
              break;
            case "right":
              style.borderRadius = `${this.borderRadius}rpx 0 0 ${this.borderRadius}rpx`;
              break;
            case "bottom":
              style.borderRadius = `${this.borderRadius}rpx ${this.borderRadius}rpx 0 0`;
              break;
          }
          style.overflow = "hidden";
        }
        if (this.duration)
          style.transition = `all ${this.duration / 1e3}s linear`;
        return style;
      },
      // 中部弹窗的特有样式
      centerStyle() {
        let style = {};
        style.width = this.width ? this.getUnitValue(this.width) : this.getUnitValue(this.length);
        style.height = this.height ? this.getUnitValue(this.height) : "auto";
        style.zIndex = this.uZindex;
        style.marginTop = `-${this.$u.addUnit(this.negativeTop)}`;
        if (this.borderRadius) {
          style.borderRadius = `${this.borderRadius}rpx`;
          style.overflow = "hidden";
        }
        return style;
      },
      // 计算整理后的z-index值
      uZindex() {
        return this.zIndex ? this.zIndex : this.$u.zIndex.popup;
      }
    },
    watch: {
      valueCom: {
        handler(val2) {
          if (val2) {
            this.open();
          } else if (!this.closeFromInner) {
            this.close();
          }
          this.closeFromInner = false;
        }
      }
    },
    mounted() {
      if (this.valueCom) {
        this.open();
      }
    },
    methods: {
      // 判断传入的值，是否带有单位，如果没有，就默认用rpx单位
      getUnitValue(val2) {
        if (/(%|px|rpx|auto)$/.test(val2))
          return val2;
        else
          return val2 + "rpx";
      },
      // 遮罩被点击
      maskClick() {
        this.close();
      },
      close() {
        this.closeFromInner = true;
        this.change("showDrawer", "visibleSync", false);
      },
      // 中部弹出时，需要.u-drawer-content将居中内容，此元素会铺满屏幕，点击需要关闭弹窗
      // 让其只在mode=center时起作用
      modeCenterClose(mode) {
        if (mode != "center" || !this.maskCloseAble)
          return;
        this.close();
      },
      open() {
        this.change("visibleSync", "showDrawer", true);
      },
      // 此处的原理是，关闭时先通过动画隐藏弹窗和遮罩，再移除整个组件
      // 打开时，先渲染组件，延时一定时间再让遮罩和弹窗的动画起作用
      change(param1, param2, status) {
        if (this.popup == true) {
          this.$emit("input", status);
          this.$emit("update:modelValue", status);
        }
        this[param1] = status;
        if (status) {
          this.$nextTick(() => {
            this[param2] = status;
            this.$emit(status ? "open" : "close");
          });
        } else {
          this.timer = setTimeout(() => {
            this[param2] = status;
            this.$emit(status ? "open" : "close");
          }, this.duration);
        }
      }
    }
  };
  function _sfc_render$1k(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_u_mask = resolveEasycom(vue.resolveDynamicComponent("u-mask"), __easycom_0$2);
    const _component_u_icon = resolveEasycom(vue.resolveDynamicComponent("u-icon"), __easycom_2$b);
    return $data.visibleSync ? (vue.openBlock(), vue.createElementBlock(
      "view",
      {
        key: 0,
        style: vue.normalizeStyle([$props.customStyle, {
          zIndex: $options.uZindex - 1,
          "--bgcolor": $props.backgroundColor
        }]),
        class: "u-drawer",
        "hover-stop-propagation": ""
      },
      [
        vue.createVNode(_component_u_mask, {
          blur: $props.blur,
          duration: $props.duration,
          "custom-style": $props.maskCustomStyle,
          maskClickAble: $props.maskCloseAble,
          "z-index": $options.uZindex - 2,
          show: $data.showDrawer && $props.mask,
          onClick: $options.maskClick
        }, null, 8, ["blur", "duration", "custom-style", "maskClickAble", "z-index", "show", "onClick"]),
        vue.createElementVNode(
          "view",
          {
            class: vue.normalizeClass(["u-drawer-content", [
              $props.safeAreaInsetBottom ? "safe-area-inset-bottom" : "",
              "u-drawer-" + $props.mode,
              $data.showDrawer ? "u-drawer-content-visible" : "",
              $props.zoom && $props.mode == "center" ? "u-animation-zoom" : ""
            ]]),
            onClick: _cache[3] || (_cache[3] = ($event) => $options.modeCenterClose($props.mode)),
            onTouchmove: _cache[4] || (_cache[4] = vue.withModifiers(() => {
            }, ["stop", "prevent"])),
            style: vue.normalizeStyle([$options.style])
          },
          [
            $props.mode == "center" ? (vue.openBlock(), vue.createElementBlock(
              "view",
              {
                key: 0,
                class: "u-mode-center-box",
                onClick: _cache[0] || (_cache[0] = vue.withModifiers(() => {
                }, ["stop", "prevent"])),
                onTouchmove: _cache[1] || (_cache[1] = vue.withModifiers(() => {
                }, ["stop", "prevent"])),
                style: vue.normalizeStyle([$options.centerStyle])
              },
              [
                $props.closeable ? (vue.openBlock(), vue.createBlock(_component_u_icon, {
                  key: 0,
                  onClick: $options.close,
                  class: vue.normalizeClass(["u-close", ["u-close--" + $props.closeIconPos]]),
                  name: $props.closeIcon,
                  color: $props.closeIconColor,
                  size: $props.closeIconSize
                }, null, 8, ["onClick", "class", "name", "color", "size"])) : vue.createCommentVNode("v-if", true),
                vue.createElementVNode("scroll-view", {
                  class: "u-drawer__scroll-view",
                  "scroll-y": "true"
                }, [
                  vue.renderSlot(_ctx.$slots, "default", {}, void 0, true)
                ])
              ],
              36
              /* STYLE, NEED_HYDRATION */
            )) : (vue.openBlock(), vue.createElementBlock("scroll-view", {
              key: 1,
              class: "u-drawer__scroll-view",
              "scroll-y": "true"
            }, [
              vue.renderSlot(_ctx.$slots, "default", {}, void 0, true)
            ])),
            vue.createElementVNode(
              "view",
              {
                onClick: _cache[2] || (_cache[2] = (...args) => $options.close && $options.close(...args)),
                class: vue.normalizeClass(["u-close", ["u-close--" + $props.closeIconPos]])
              },
              [
                $props.mode != "center" && $props.closeable ? (vue.openBlock(), vue.createBlock(_component_u_icon, {
                  key: 0,
                  name: $props.closeIcon,
                  color: $props.closeIconColor,
                  size: $props.closeIconSize
                }, null, 8, ["name", "color", "size"])) : vue.createCommentVNode("v-if", true)
              ],
              2
              /* CLASS */
            )
          ],
          38
          /* CLASS, STYLE, NEED_HYDRATION */
        )
      ],
      4
      /* STYLE */
    )) : vue.createCommentVNode("v-if", true);
  }
  const __easycom_3$4 = /* @__PURE__ */ _export_sfc(_sfc_main$1l, [["render", _sfc_render$1k], ["__scopeId", "data-v-c93a8fd2"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/uni_modules/vk-uview-ui/components/u-popup/u-popup.vue"]]);
  const provinces = [
    {
      code: "110000",
      name: "北京市"
    },
    {
      code: "120000",
      name: "天津市"
    },
    {
      code: "130000",
      name: "河北省"
    },
    {
      code: "140000",
      name: "山西省"
    },
    {
      code: "150000",
      name: "内蒙古自治区"
    },
    {
      code: "210000",
      name: "辽宁省"
    },
    {
      code: "220000",
      name: "吉林省"
    },
    {
      code: "230000",
      name: "黑龙江省"
    },
    {
      code: "310000",
      name: "上海市"
    },
    {
      code: "320000",
      name: "江苏省"
    },
    {
      code: "330000",
      name: "浙江省"
    },
    {
      code: "340000",
      name: "安徽省"
    },
    {
      code: "350000",
      name: "福建省"
    },
    {
      code: "360000",
      name: "江西省"
    },
    {
      code: "370000",
      name: "山东省"
    },
    {
      code: "410000",
      name: "河南省"
    },
    {
      code: "420000",
      name: "湖北省"
    },
    {
      code: "430000",
      name: "湖南省"
    },
    {
      code: "440000",
      name: "广东省"
    },
    {
      code: "450000",
      name: "广西壮族自治区"
    },
    {
      code: "460000",
      name: "海南省"
    },
    {
      code: "500000",
      name: "重庆市"
    },
    {
      code: "510000",
      name: "四川省"
    },
    {
      code: "520000",
      name: "贵州省"
    },
    {
      code: "530000",
      name: "云南省"
    },
    {
      code: "540000",
      name: "西藏自治区"
    },
    {
      code: "610000",
      name: "陕西省"
    },
    {
      code: "620000",
      name: "甘肃省"
    },
    {
      code: "630000",
      name: "青海省"
    },
    {
      code: "640000",
      name: "宁夏回族自治区"
    },
    {
      code: "650000",
      name: "新疆维吾尔自治区"
    },
    {
      code: "710000",
      name: "台湾省"
    },
    {
      code: "810000",
      name: "香港特别行政区"
    },
    {
      code: "820000",
      name: "澳门特别行政区"
    }
  ];
  const citys = [
    [
      {
        code: "110100",
        name: "北京市"
      }
    ],
    [
      {
        code: "120100",
        name: "天津市"
      }
    ],
    [
      {
        code: "130100",
        name: "石家庄市"
      },
      {
        code: "130200",
        name: "唐山市"
      },
      {
        code: "130300",
        name: "秦皇岛市"
      },
      {
        code: "130400",
        name: "邯郸市"
      },
      {
        code: "130500",
        name: "邢台市"
      },
      {
        code: "130600",
        name: "保定市"
      },
      {
        code: "130700",
        name: "张家口市"
      },
      {
        code: "130800",
        name: "承德市"
      },
      {
        code: "130900",
        name: "沧州市"
      },
      {
        code: "131000",
        name: "廊坊市"
      },
      {
        code: "131100",
        name: "衡水市"
      },
      {
        code: "133100",
        name: "雄安新区"
      }
    ],
    [
      {
        code: "140100",
        name: "太原市"
      },
      {
        code: "140200",
        name: "大同市"
      },
      {
        code: "140300",
        name: "阳泉市"
      },
      {
        code: "140400",
        name: "长治市"
      },
      {
        code: "140500",
        name: "晋城市"
      },
      {
        code: "140600",
        name: "朔州市"
      },
      {
        code: "140700",
        name: "晋中市"
      },
      {
        code: "140800",
        name: "运城市"
      },
      {
        code: "140900",
        name: "忻州市"
      },
      {
        code: "141000",
        name: "临汾市"
      },
      {
        code: "141100",
        name: "吕梁市"
      }
    ],
    [
      {
        code: "150100",
        name: "呼和浩特市"
      },
      {
        code: "150200",
        name: "包头市"
      },
      {
        code: "150300",
        name: "乌海市"
      },
      {
        code: "150400",
        name: "赤峰市"
      },
      {
        code: "150500",
        name: "通辽市"
      },
      {
        code: "150600",
        name: "鄂尔多斯市"
      },
      {
        code: "150700",
        name: "呼伦贝尔市"
      },
      {
        code: "150800",
        name: "巴彦淖尔市"
      },
      {
        code: "150900",
        name: "乌兰察布市"
      },
      {
        code: "152200",
        name: "兴安盟"
      },
      {
        code: "152500",
        name: "锡林郭勒盟"
      },
      {
        code: "152900",
        name: "阿拉善盟"
      }
    ],
    [
      {
        code: "210100",
        name: "沈阳市"
      },
      {
        code: "210200",
        name: "大连市"
      },
      {
        code: "210300",
        name: "鞍山市"
      },
      {
        code: "210400",
        name: "抚顺市"
      },
      {
        code: "210500",
        name: "本溪市"
      },
      {
        code: "210600",
        name: "丹东市"
      },
      {
        code: "210700",
        name: "锦州市"
      },
      {
        code: "210800",
        name: "营口市"
      },
      {
        code: "210900",
        name: "阜新市"
      },
      {
        code: "211000",
        name: "辽阳市"
      },
      {
        code: "211100",
        name: "盘锦市"
      },
      {
        code: "211200",
        name: "铁岭市"
      },
      {
        code: "211300",
        name: "朝阳市"
      },
      {
        code: "211400",
        name: "葫芦岛市"
      }
    ],
    [
      {
        code: "220100",
        name: "长春市"
      },
      {
        code: "220200",
        name: "吉林市"
      },
      {
        code: "220300",
        name: "四平市"
      },
      {
        code: "220400",
        name: "辽源市"
      },
      {
        code: "220500",
        name: "通化市"
      },
      {
        code: "220600",
        name: "白山市"
      },
      {
        code: "220700",
        name: "松原市"
      },
      {
        code: "220800",
        name: "白城市"
      },
      {
        code: "222400",
        name: "延边朝鲜族自治州"
      }
    ],
    [
      {
        code: "230100",
        name: "哈尔滨市"
      },
      {
        code: "230200",
        name: "齐齐哈尔市"
      },
      {
        code: "230300",
        name: "鸡西市"
      },
      {
        code: "230400",
        name: "鹤岗市"
      },
      {
        code: "230500",
        name: "双鸭山市"
      },
      {
        code: "230600",
        name: "大庆市"
      },
      {
        code: "230700",
        name: "伊春市"
      },
      {
        code: "230800",
        name: "佳木斯市"
      },
      {
        code: "230900",
        name: "七台河市"
      },
      {
        code: "231000",
        name: "牡丹江市"
      },
      {
        code: "231100",
        name: "黑河市"
      },
      {
        code: "231200",
        name: "绥化市"
      },
      {
        code: "232700",
        name: "大兴安岭地区"
      }
    ],
    [
      {
        code: "310100",
        name: "上海市"
      }
    ],
    [
      {
        code: "320100",
        name: "南京市"
      },
      {
        code: "320200",
        name: "无锡市"
      },
      {
        code: "320300",
        name: "徐州市"
      },
      {
        code: "320400",
        name: "常州市"
      },
      {
        code: "320500",
        name: "苏州市"
      },
      {
        code: "320600",
        name: "南通市"
      },
      {
        code: "320700",
        name: "连云港市"
      },
      {
        code: "320800",
        name: "淮安市"
      },
      {
        code: "320900",
        name: "盐城市"
      },
      {
        code: "321000",
        name: "扬州市"
      },
      {
        code: "321100",
        name: "镇江市"
      },
      {
        code: "321200",
        name: "泰州市"
      },
      {
        code: "321300",
        name: "宿迁市"
      }
    ],
    [
      {
        code: "330100",
        name: "杭州市"
      },
      {
        code: "330200",
        name: "宁波市"
      },
      {
        code: "330300",
        name: "温州市"
      },
      {
        code: "330400",
        name: "嘉兴市"
      },
      {
        code: "330500",
        name: "湖州市"
      },
      {
        code: "330600",
        name: "绍兴市"
      },
      {
        code: "330700",
        name: "金华市"
      },
      {
        code: "330800",
        name: "衢州市"
      },
      {
        code: "330900",
        name: "舟山市"
      },
      {
        code: "331000",
        name: "台州市"
      },
      {
        code: "331100",
        name: "丽水市"
      }
    ],
    [
      {
        code: "340100",
        name: "合肥市"
      },
      {
        code: "340200",
        name: "芜湖市"
      },
      {
        code: "340300",
        name: "蚌埠市"
      },
      {
        code: "340400",
        name: "淮南市"
      },
      {
        code: "340500",
        name: "马鞍山市"
      },
      {
        code: "340600",
        name: "淮北市"
      },
      {
        code: "340700",
        name: "铜陵市"
      },
      {
        code: "340800",
        name: "安庆市"
      },
      {
        code: "341000",
        name: "黄山市"
      },
      {
        code: "341100",
        name: "滁州市"
      },
      {
        code: "341200",
        name: "阜阳市"
      },
      {
        code: "341300",
        name: "宿州市"
      },
      {
        code: "341500",
        name: "六安市"
      },
      {
        code: "341600",
        name: "亳州市"
      },
      {
        code: "341700",
        name: "池州市"
      },
      {
        code: "341800",
        name: "宣城市"
      }
    ],
    [
      {
        code: "350100",
        name: "福州市"
      },
      {
        code: "350200",
        name: "厦门市"
      },
      {
        code: "350300",
        name: "莆田市"
      },
      {
        code: "350400",
        name: "三明市"
      },
      {
        code: "350500",
        name: "泉州市"
      },
      {
        code: "350600",
        name: "漳州市"
      },
      {
        code: "350700",
        name: "南平市"
      },
      {
        code: "350800",
        name: "龙岩市"
      },
      {
        code: "350900",
        name: "宁德市"
      }
    ],
    [
      {
        code: "360100",
        name: "南昌市"
      },
      {
        code: "360200",
        name: "景德镇市"
      },
      {
        code: "360300",
        name: "萍乡市"
      },
      {
        code: "360400",
        name: "九江市"
      },
      {
        code: "360500",
        name: "新余市"
      },
      {
        code: "360600",
        name: "鹰潭市"
      },
      {
        code: "360700",
        name: "赣州市"
      },
      {
        code: "360800",
        name: "吉安市"
      },
      {
        code: "360900",
        name: "宜春市"
      },
      {
        code: "361000",
        name: "抚州市"
      },
      {
        code: "361100",
        name: "上饶市"
      }
    ],
    [
      {
        code: "370100",
        name: "济南市"
      },
      {
        code: "370200",
        name: "青岛市"
      },
      {
        code: "370300",
        name: "淄博市"
      },
      {
        code: "370400",
        name: "枣庄市"
      },
      {
        code: "370500",
        name: "东营市"
      },
      {
        code: "370600",
        name: "烟台市"
      },
      {
        code: "370700",
        name: "潍坊市"
      },
      {
        code: "370800",
        name: "济宁市"
      },
      {
        code: "370900",
        name: "泰安市"
      },
      {
        code: "371000",
        name: "威海市"
      },
      {
        code: "371100",
        name: "日照市"
      },
      {
        code: "371300",
        name: "临沂市"
      },
      {
        code: "371400",
        name: "德州市"
      },
      {
        code: "371500",
        name: "聊城市"
      },
      {
        code: "371600",
        name: "滨州市"
      },
      {
        code: "371700",
        name: "菏泽市"
      }
    ],
    [
      {
        code: "410100",
        name: "郑州市"
      },
      {
        code: "410200",
        name: "开封市"
      },
      {
        code: "410300",
        name: "洛阳市"
      },
      {
        code: "410400",
        name: "平顶山市"
      },
      {
        code: "410500",
        name: "安阳市"
      },
      {
        code: "410600",
        name: "鹤壁市"
      },
      {
        code: "410700",
        name: "新乡市"
      },
      {
        code: "410800",
        name: "焦作市"
      },
      {
        code: "410900",
        name: "濮阳市"
      },
      {
        code: "411000",
        name: "许昌市"
      },
      {
        code: "411100",
        name: "漯河市"
      },
      {
        code: "411200",
        name: "三门峡市"
      },
      {
        code: "411300",
        name: "南阳市"
      },
      {
        code: "411400",
        name: "商丘市"
      },
      {
        code: "411500",
        name: "信阳市"
      },
      {
        code: "411600",
        name: "周口市"
      },
      {
        code: "411700",
        name: "驻马店市"
      },
      {
        code: "419001",
        name: "济源市"
      }
    ],
    [
      {
        code: "420100",
        name: "武汉市"
      },
      {
        code: "420200",
        name: "黄石市"
      },
      {
        code: "420300",
        name: "十堰市"
      },
      {
        code: "420500",
        name: "宜昌市"
      },
      {
        code: "420600",
        name: "襄阳市"
      },
      {
        code: "420700",
        name: "鄂州市"
      },
      {
        code: "420800",
        name: "荆门市"
      },
      {
        code: "420900",
        name: "孝感市"
      },
      {
        code: "421000",
        name: "荆州市"
      },
      {
        code: "421100",
        name: "黄冈市"
      },
      {
        code: "421200",
        name: "咸宁市"
      },
      {
        code: "421300",
        name: "随州市"
      },
      {
        code: "422800",
        name: "恩施土家族苗族自治州"
      },
      {
        code: "429004",
        name: "仙桃市"
      },
      {
        code: "429005",
        name: "潜江市"
      },
      {
        code: "429006",
        name: "天门市"
      },
      {
        code: "429021",
        name: "神农架林区"
      }
    ],
    [
      {
        code: "430100",
        name: "长沙市"
      },
      {
        code: "430200",
        name: "株洲市"
      },
      {
        code: "430300",
        name: "湘潭市"
      },
      {
        code: "430400",
        name: "衡阳市"
      },
      {
        code: "430500",
        name: "邵阳市"
      },
      {
        code: "430600",
        name: "岳阳市"
      },
      {
        code: "430700",
        name: "常德市"
      },
      {
        code: "430800",
        name: "张家界市"
      },
      {
        code: "430900",
        name: "益阳市"
      },
      {
        code: "431000",
        name: "郴州市"
      },
      {
        code: "431100",
        name: "永州市"
      },
      {
        code: "431200",
        name: "怀化市"
      },
      {
        code: "431300",
        name: "娄底市"
      },
      {
        code: "433100",
        name: "湘西土家族苗族自治州"
      }
    ],
    [
      {
        code: "440100",
        name: "广州市"
      },
      {
        code: "440200",
        name: "韶关市"
      },
      {
        code: "440300",
        name: "深圳市"
      },
      {
        code: "440400",
        name: "珠海市"
      },
      {
        code: "440500",
        name: "汕头市"
      },
      {
        code: "440600",
        name: "佛山市"
      },
      {
        code: "440700",
        name: "江门市"
      },
      {
        code: "440800",
        name: "湛江市"
      },
      {
        code: "440900",
        name: "茂名市"
      },
      {
        code: "441200",
        name: "肇庆市"
      },
      {
        code: "441300",
        name: "惠州市"
      },
      {
        code: "441400",
        name: "梅州市"
      },
      {
        code: "441500",
        name: "汕尾市"
      },
      {
        code: "441600",
        name: "河源市"
      },
      {
        code: "441700",
        name: "阳江市"
      },
      {
        code: "441800",
        name: "清远市"
      },
      {
        code: "441900",
        name: "东莞市"
      },
      {
        code: "442000",
        name: "中山市"
      },
      {
        code: "445100",
        name: "潮州市"
      },
      {
        code: "445200",
        name: "揭阳市"
      },
      {
        code: "445300",
        name: "云浮市"
      }
    ],
    [
      {
        code: "450100",
        name: "南宁市"
      },
      {
        code: "450200",
        name: "柳州市"
      },
      {
        code: "450300",
        name: "桂林市"
      },
      {
        code: "450400",
        name: "梧州市"
      },
      {
        code: "450500",
        name: "北海市"
      },
      {
        code: "450600",
        name: "防城港市"
      },
      {
        code: "450700",
        name: "钦州市"
      },
      {
        code: "450800",
        name: "贵港市"
      },
      {
        code: "450900",
        name: "玉林市"
      },
      {
        code: "451000",
        name: "百色市"
      },
      {
        code: "451100",
        name: "贺州市"
      },
      {
        code: "451200",
        name: "河池市"
      },
      {
        code: "451300",
        name: "来宾市"
      },
      {
        code: "451400",
        name: "崇左市"
      }
    ],
    [
      {
        code: "460100",
        name: "海口市"
      },
      {
        code: "460200",
        name: "三亚市"
      },
      {
        code: "460300",
        name: "三沙市"
      },
      {
        code: "460400",
        name: "儋州市"
      },
      {
        code: "469001",
        name: "五指山市"
      },
      {
        code: "469002",
        name: "琼海市"
      },
      {
        code: "469005",
        name: "文昌市"
      },
      {
        code: "469006",
        name: "万宁市"
      },
      {
        code: "469007",
        name: "东方市"
      },
      {
        code: "469021",
        name: "定安县"
      },
      {
        code: "469022",
        name: "屯昌县"
      },
      {
        code: "469023",
        name: "澄迈县"
      },
      {
        code: "469024",
        name: "临高县"
      },
      {
        code: "469025",
        name: "白沙黎族自治县"
      },
      {
        code: "469026",
        name: "昌江黎族自治县"
      },
      {
        code: "469027",
        name: "乐东黎族自治县"
      },
      {
        code: "469028",
        name: "陵水黎族自治县"
      },
      {
        code: "469029",
        name: "保亭黎族苗族自治县"
      },
      {
        code: "469030",
        name: "琼中黎族苗族自治县"
      }
    ],
    [
      {
        code: "500100",
        name: "重庆市"
      }
    ],
    [
      {
        code: "510100",
        name: "成都市"
      },
      {
        code: "510300",
        name: "自贡市"
      },
      {
        code: "510400",
        name: "攀枝花市"
      },
      {
        code: "510500",
        name: "泸州市"
      },
      {
        code: "510600",
        name: "德阳市"
      },
      {
        code: "510700",
        name: "绵阳市"
      },
      {
        code: "510800",
        name: "广元市"
      },
      {
        code: "510900",
        name: "遂宁市"
      },
      {
        code: "511000",
        name: "内江市"
      },
      {
        code: "511100",
        name: "乐山市"
      },
      {
        code: "511300",
        name: "南充市"
      },
      {
        code: "511400",
        name: "眉山市"
      },
      {
        code: "511500",
        name: "宜宾市"
      },
      {
        code: "511600",
        name: "广安市"
      },
      {
        code: "511700",
        name: "达州市"
      },
      {
        code: "511800",
        name: "雅安市"
      },
      {
        code: "511900",
        name: "巴中市"
      },
      {
        code: "512000",
        name: "资阳市"
      },
      {
        code: "513200",
        name: "阿坝藏族羌族自治州"
      },
      {
        code: "513300",
        name: "甘孜藏族自治州"
      },
      {
        code: "513400",
        name: "凉山彝族自治州"
      }
    ],
    [
      {
        code: "520100",
        name: "贵阳市"
      },
      {
        code: "520200",
        name: "六盘水市"
      },
      {
        code: "520300",
        name: "遵义市"
      },
      {
        code: "520400",
        name: "安顺市"
      },
      {
        code: "520500",
        name: "毕节市"
      },
      {
        code: "520600",
        name: "铜仁市"
      },
      {
        code: "522300",
        name: "黔西南布依族苗族自治州"
      },
      {
        code: "522600",
        name: "黔东南苗族侗族自治州"
      },
      {
        code: "522700",
        name: "黔南布依族苗族自治州"
      }
    ],
    [
      {
        code: "530100",
        name: "昆明市"
      },
      {
        code: "530300",
        name: "曲靖市"
      },
      {
        code: "530400",
        name: "玉溪市"
      },
      {
        code: "530500",
        name: "保山市"
      },
      {
        code: "530600",
        name: "昭通市"
      },
      {
        code: "530700",
        name: "丽江市"
      },
      {
        code: "530800",
        name: "普洱市"
      },
      {
        code: "530900",
        name: "临沧市"
      },
      {
        code: "532300",
        name: "楚雄彝族自治州"
      },
      {
        code: "532500",
        name: "红河哈尼族彝族自治州"
      },
      {
        code: "532600",
        name: "文山壮族苗族自治州"
      },
      {
        code: "532800",
        name: "西双版纳傣族自治州"
      },
      {
        code: "532900",
        name: "大理白族自治州"
      },
      {
        code: "533100",
        name: "德宏傣族景颇族自治州"
      },
      {
        code: "533300",
        name: "怒江傈僳族自治州"
      },
      {
        code: "533400",
        name: "迪庆藏族自治州"
      }
    ],
    [
      {
        code: "540100",
        name: "拉萨市"
      },
      {
        code: "540200",
        name: "日喀则市"
      },
      {
        code: "540300",
        name: "昌都市"
      },
      {
        code: "540400",
        name: "林芝市"
      },
      {
        code: "540500",
        name: "山南市"
      },
      {
        code: "540600",
        name: "那曲市"
      },
      {
        code: "542500",
        name: "阿里地区"
      }
    ],
    [
      {
        code: "610100",
        name: "西安市"
      },
      {
        code: "610200",
        name: "铜川市"
      },
      {
        code: "610300",
        name: "宝鸡市"
      },
      {
        code: "610400",
        name: "咸阳市"
      },
      {
        code: "610500",
        name: "渭南市"
      },
      {
        code: "610600",
        name: "延安市"
      },
      {
        code: "610700",
        name: "汉中市"
      },
      {
        code: "610800",
        name: "榆林市"
      },
      {
        code: "610900",
        name: "安康市"
      },
      {
        code: "611000",
        name: "商洛市"
      }
    ],
    [
      {
        code: "620100",
        name: "兰州市"
      },
      {
        code: "620200",
        name: "嘉峪关市"
      },
      {
        code: "620300",
        name: "金昌市"
      },
      {
        code: "620400",
        name: "白银市"
      },
      {
        code: "620500",
        name: "天水市"
      },
      {
        code: "620600",
        name: "武威市"
      },
      {
        code: "620700",
        name: "张掖市"
      },
      {
        code: "620800",
        name: "平凉市"
      },
      {
        code: "620900",
        name: "酒泉市"
      },
      {
        code: "621000",
        name: "庆阳市"
      },
      {
        code: "621100",
        name: "定西市"
      },
      {
        code: "621200",
        name: "陇南市"
      },
      {
        code: "622900",
        name: "临夏回族自治州"
      },
      {
        code: "623000",
        name: "甘南藏族自治州"
      }
    ],
    [
      {
        code: "630100",
        name: "西宁市"
      },
      {
        code: "630200",
        name: "海东市"
      },
      {
        code: "632200",
        name: "海北藏族自治州"
      },
      {
        code: "632300",
        name: "黄南藏族自治州"
      },
      {
        code: "632500",
        name: "海南藏族自治州"
      },
      {
        code: "632600",
        name: "果洛藏族自治州"
      },
      {
        code: "632700",
        name: "玉树藏族自治州"
      },
      {
        code: "632800",
        name: "海西蒙古族藏族自治州"
      }
    ],
    [
      {
        code: "640100",
        name: "银川市"
      },
      {
        code: "640200",
        name: "石嘴山市"
      },
      {
        code: "640300",
        name: "吴忠市"
      },
      {
        code: "640400",
        name: "固原市"
      },
      {
        code: "640500",
        name: "中卫市"
      }
    ],
    [
      {
        code: "650100",
        name: "乌鲁木齐市"
      },
      {
        code: "650200",
        name: "克拉玛依市"
      },
      {
        code: "650400",
        name: "吐鲁番市"
      },
      {
        code: "650500",
        name: "哈密市"
      },
      {
        code: "652300",
        name: "昌吉回族自治州"
      },
      {
        code: "652700",
        name: "博尔塔拉蒙古自治州"
      },
      {
        code: "652800",
        name: "巴音郭楞蒙古自治州"
      },
      {
        code: "652900",
        name: "阿克苏地区"
      },
      {
        code: "653000",
        name: "克孜勒苏柯尔克孜自治州"
      },
      {
        code: "653100",
        name: "喀什地区"
      },
      {
        code: "653200",
        name: "和田地区"
      },
      {
        code: "654000",
        name: "伊犁哈萨克自治州"
      },
      {
        code: "654200",
        name: "塔城地区"
      },
      {
        code: "654300",
        name: "阿勒泰地区"
      },
      {
        code: "659001",
        name: "石河子市"
      },
      {
        code: "659002",
        name: "阿拉尔市"
      },
      {
        code: "659003",
        name: "图木舒克市"
      },
      {
        code: "659004",
        name: "五家渠市"
      },
      {
        code: "659005",
        name: "北屯市"
      },
      {
        code: "659006",
        name: "铁门关市"
      },
      {
        code: "659007",
        name: "双河市"
      },
      {
        code: "659008",
        name: "可克达拉市"
      },
      {
        code: "659009",
        name: "昆玉市"
      },
      {
        code: "659010",
        name: "胡杨河市"
      },
      {
        code: "659011",
        name: "新星市"
      },
      {
        code: "659012",
        name: "白杨市"
      }
    ],
    [
      {
        code: "711000",
        name: "台北市"
      },
      {
        code: "711100",
        name: "台中市"
      },
      {
        code: "711200",
        name: "基隆市"
      },
      {
        code: "711300",
        name: "台南市"
      },
      {
        code: "711400",
        name: "高雄市"
      },
      {
        code: "711500",
        name: "新北市"
      },
      {
        code: "711600",
        name: "宜兰县"
      },
      {
        code: "711700",
        name: "桃园市"
      },
      {
        code: "711800",
        name: "嘉义市"
      },
      {
        code: "711900",
        name: "新竹县"
      },
      {
        code: "712000",
        name: "苗栗县"
      },
      {
        code: "712200",
        name: "南投县"
      },
      {
        code: "712300",
        name: "彰化县"
      },
      {
        code: "712400",
        name: "新竹市"
      },
      {
        code: "712500",
        name: "云林县"
      },
      {
        code: "712600",
        name: "嘉义县"
      },
      {
        code: "712900",
        name: "屏东县"
      },
      {
        code: "713000",
        name: "花莲县"
      },
      {
        code: "713100",
        name: "台东县"
      },
      {
        code: "713200",
        name: "澎湖县"
      }
    ],
    [
      {
        code: "810100",
        name: "香港特别行政区"
      }
    ],
    [
      {
        code: "820001",
        name: "澳门特别行政区"
      }
    ]
  ];
  const areas = [
    [
      [
        {
          code: "110101",
          name: "东城区"
        },
        {
          code: "110102",
          name: "西城区"
        },
        {
          code: "110105",
          name: "朝阳区"
        },
        {
          code: "110106",
          name: "丰台区"
        },
        {
          code: "110107",
          name: "石景山区"
        },
        {
          code: "110108",
          name: "海淀区"
        },
        {
          code: "110109",
          name: "门头沟区"
        },
        {
          code: "110111",
          name: "房山区"
        },
        {
          code: "110112",
          name: "通州区"
        },
        {
          code: "110113",
          name: "顺义区"
        },
        {
          code: "110114",
          name: "昌平区"
        },
        {
          code: "110115",
          name: "大兴区"
        },
        {
          code: "110116",
          name: "怀柔区"
        },
        {
          code: "110117",
          name: "平谷区"
        },
        {
          code: "110118",
          name: "密云区"
        },
        {
          code: "110119",
          name: "延庆区"
        }
      ]
    ],
    [
      [
        {
          code: "120101",
          name: "和平区"
        },
        {
          code: "120102",
          name: "河东区"
        },
        {
          code: "120103",
          name: "河西区"
        },
        {
          code: "120104",
          name: "南开区"
        },
        {
          code: "120105",
          name: "河北区"
        },
        {
          code: "120106",
          name: "红桥区"
        },
        {
          code: "120110",
          name: "东丽区"
        },
        {
          code: "120111",
          name: "西青区"
        },
        {
          code: "120112",
          name: "津南区"
        },
        {
          code: "120113",
          name: "北辰区"
        },
        {
          code: "120114",
          name: "武清区"
        },
        {
          code: "120115",
          name: "宝坻区"
        },
        {
          code: "120116",
          name: "滨海新区"
        },
        {
          code: "120117",
          name: "宁河区"
        },
        {
          code: "120118",
          name: "静海区"
        },
        {
          code: "120119",
          name: "蓟州区"
        }
      ]
    ],
    [
      [
        {
          code: "130102",
          name: "长安区"
        },
        {
          code: "130104",
          name: "桥西区"
        },
        {
          code: "130105",
          name: "新华区"
        },
        {
          code: "130107",
          name: "井陉矿区"
        },
        {
          code: "130108",
          name: "裕华区"
        },
        {
          code: "130109",
          name: "藁城区"
        },
        {
          code: "130110",
          name: "鹿泉区"
        },
        {
          code: "130111",
          name: "栾城区"
        },
        {
          code: "130121",
          name: "井陉县"
        },
        {
          code: "130123",
          name: "正定县"
        },
        {
          code: "130125",
          name: "行唐县"
        },
        {
          code: "130126",
          name: "灵寿县"
        },
        {
          code: "130127",
          name: "高邑县"
        },
        {
          code: "130128",
          name: "深泽县"
        },
        {
          code: "130129",
          name: "赞皇县"
        },
        {
          code: "130130",
          name: "无极县"
        },
        {
          code: "130131",
          name: "平山县"
        },
        {
          code: "130132",
          name: "元氏县"
        },
        {
          code: "130133",
          name: "赵县"
        },
        {
          code: "130181",
          name: "辛集市"
        },
        {
          code: "130183",
          name: "晋州市"
        },
        {
          code: "130184",
          name: "新乐市"
        }
      ],
      [
        {
          code: "130202",
          name: "路南区"
        },
        {
          code: "130203",
          name: "路北区"
        },
        {
          code: "130204",
          name: "古冶区"
        },
        {
          code: "130205",
          name: "开平区"
        },
        {
          code: "130207",
          name: "丰南区"
        },
        {
          code: "130208",
          name: "丰润区"
        },
        {
          code: "130209",
          name: "曹妃甸区"
        },
        {
          code: "130224",
          name: "滦南县"
        },
        {
          code: "130225",
          name: "乐亭县"
        },
        {
          code: "130227",
          name: "迁西县"
        },
        {
          code: "130229",
          name: "玉田县"
        },
        {
          code: "130271",
          name: "芦台经济开发区"
        },
        {
          code: "130281",
          name: "遵化市"
        },
        {
          code: "130283",
          name: "迁安市"
        },
        {
          code: "130284",
          name: "滦州市"
        }
      ],
      [
        {
          code: "130302",
          name: "海港区"
        },
        {
          code: "130303",
          name: "山海关区"
        },
        {
          code: "130304",
          name: "北戴河区"
        },
        {
          code: "130306",
          name: "抚宁区"
        },
        {
          code: "130321",
          name: "青龙满族自治县"
        },
        {
          code: "130322",
          name: "昌黎县"
        },
        {
          code: "130324",
          name: "卢龙县"
        }
      ],
      [
        {
          code: "130402",
          name: "邯山区"
        },
        {
          code: "130403",
          name: "丛台区"
        },
        {
          code: "130404",
          name: "复兴区"
        },
        {
          code: "130406",
          name: "峰峰矿区"
        },
        {
          code: "130407",
          name: "肥乡区"
        },
        {
          code: "130408",
          name: "永年区"
        },
        {
          code: "130423",
          name: "临漳县"
        },
        {
          code: "130424",
          name: "成安县"
        },
        {
          code: "130425",
          name: "大名县"
        },
        {
          code: "130426",
          name: "涉县"
        },
        {
          code: "130427",
          name: "磁县"
        },
        {
          code: "130430",
          name: "邱县"
        },
        {
          code: "130431",
          name: "鸡泽县"
        },
        {
          code: "130432",
          name: "广平县"
        },
        {
          code: "130433",
          name: "馆陶县"
        },
        {
          code: "130434",
          name: "魏县"
        },
        {
          code: "130435",
          name: "曲周县"
        },
        {
          code: "130481",
          name: "武安市"
        }
      ],
      [
        {
          code: "130502",
          name: "襄都区"
        },
        {
          code: "130503",
          name: "信都区"
        },
        {
          code: "130505",
          name: "任泽区"
        },
        {
          code: "130506",
          name: "南和区"
        },
        {
          code: "130522",
          name: "临城县"
        },
        {
          code: "130523",
          name: "内丘县"
        },
        {
          code: "130524",
          name: "柏乡县"
        },
        {
          code: "130525",
          name: "隆尧县"
        },
        {
          code: "130528",
          name: "宁晋县"
        },
        {
          code: "130529",
          name: "巨鹿县"
        },
        {
          code: "130530",
          name: "新河县"
        },
        {
          code: "130531",
          name: "广宗县"
        },
        {
          code: "130532",
          name: "平乡县"
        },
        {
          code: "130533",
          name: "威县"
        },
        {
          code: "130534",
          name: "清河县"
        },
        {
          code: "130535",
          name: "临西县"
        },
        {
          code: "130581",
          name: "南宫市"
        },
        {
          code: "130582",
          name: "沙河市"
        }
      ],
      [
        {
          code: "130602",
          name: "竞秀区"
        },
        {
          code: "130606",
          name: "莲池区"
        },
        {
          code: "130607",
          name: "满城区"
        },
        {
          code: "130608",
          name: "清苑区"
        },
        {
          code: "130609",
          name: "徐水区"
        },
        {
          code: "130623",
          name: "涞水县"
        },
        {
          code: "130624",
          name: "阜平县"
        },
        {
          code: "130626",
          name: "定兴县"
        },
        {
          code: "130627",
          name: "唐县"
        },
        {
          code: "130628",
          name: "高阳县"
        },
        {
          code: "130630",
          name: "涞源县"
        },
        {
          code: "130631",
          name: "望都县"
        },
        {
          code: "130633",
          name: "易县"
        },
        {
          code: "130634",
          name: "曲阳县"
        },
        {
          code: "130635",
          name: "蠡县"
        },
        {
          code: "130636",
          name: "顺平县"
        },
        {
          code: "130637",
          name: "博野县"
        },
        {
          code: "130681",
          name: "涿州市"
        },
        {
          code: "130682",
          name: "定州市"
        },
        {
          code: "130683",
          name: "安国市"
        },
        {
          code: "130684",
          name: "高碑店市"
        }
      ],
      [
        {
          code: "130702",
          name: "桥东区"
        },
        {
          code: "130703",
          name: "桥西区"
        },
        {
          code: "130705",
          name: "宣化区"
        },
        {
          code: "130706",
          name: "下花园区"
        },
        {
          code: "130708",
          name: "万全区"
        },
        {
          code: "130709",
          name: "崇礼区"
        },
        {
          code: "130722",
          name: "张北县"
        },
        {
          code: "130723",
          name: "康保县"
        },
        {
          code: "130724",
          name: "沽源县"
        },
        {
          code: "130725",
          name: "尚义县"
        },
        {
          code: "130726",
          name: "蔚县"
        },
        {
          code: "130727",
          name: "阳原县"
        },
        {
          code: "130728",
          name: "怀安县"
        },
        {
          code: "130730",
          name: "怀来县"
        },
        {
          code: "130731",
          name: "涿鹿县"
        },
        {
          code: "130732",
          name: "赤城县"
        }
      ],
      [
        {
          code: "130802",
          name: "双桥区"
        },
        {
          code: "130803",
          name: "双滦区"
        },
        {
          code: "130804",
          name: "鹰手营子矿区"
        },
        {
          code: "130821",
          name: "承德县"
        },
        {
          code: "130822",
          name: "兴隆县"
        },
        {
          code: "130824",
          name: "滦平县"
        },
        {
          code: "130825",
          name: "隆化县"
        },
        {
          code: "130826",
          name: "丰宁满族自治县"
        },
        {
          code: "130827",
          name: "宽城满族自治县"
        },
        {
          code: "130828",
          name: "围场满族蒙古族自治县"
        },
        {
          code: "130881",
          name: "平泉市"
        }
      ],
      [
        {
          code: "130902",
          name: "新华区"
        },
        {
          code: "130903",
          name: "运河区"
        },
        {
          code: "130921",
          name: "沧县"
        },
        {
          code: "130922",
          name: "青县"
        },
        {
          code: "130923",
          name: "东光县"
        },
        {
          code: "130924",
          name: "海兴县"
        },
        {
          code: "130925",
          name: "盐山县"
        },
        {
          code: "130926",
          name: "肃宁县"
        },
        {
          code: "130927",
          name: "南皮县"
        },
        {
          code: "130928",
          name: "吴桥县"
        },
        {
          code: "130929",
          name: "献县"
        },
        {
          code: "130930",
          name: "孟村回族自治县"
        },
        {
          code: "130981",
          name: "泊头市"
        },
        {
          code: "130982",
          name: "任丘市"
        },
        {
          code: "130983",
          name: "黄骅市"
        },
        {
          code: "130984",
          name: "河间市"
        }
      ],
      [
        {
          code: "131002",
          name: "安次区"
        },
        {
          code: "131003",
          name: "广阳区"
        },
        {
          code: "131022",
          name: "固安县"
        },
        {
          code: "131023",
          name: "永清县"
        },
        {
          code: "131024",
          name: "香河县"
        },
        {
          code: "131025",
          name: "大城县"
        },
        {
          code: "131026",
          name: "文安县"
        },
        {
          code: "131028",
          name: "大厂回族自治县"
        },
        {
          code: "131081",
          name: "霸州市"
        },
        {
          code: "131082",
          name: "三河市"
        }
      ],
      [
        {
          code: "131102",
          name: "桃城区"
        },
        {
          code: "131103",
          name: "冀州区"
        },
        {
          code: "131121",
          name: "枣强县"
        },
        {
          code: "131122",
          name: "武邑县"
        },
        {
          code: "131123",
          name: "武强县"
        },
        {
          code: "131124",
          name: "饶阳县"
        },
        {
          code: "131125",
          name: "安平县"
        },
        {
          code: "131126",
          name: "故城县"
        },
        {
          code: "131127",
          name: "景县"
        },
        {
          code: "131128",
          name: "阜城县"
        },
        {
          code: "131182",
          name: "深州市"
        }
      ],
      [
        {
          code: "133101",
          name: "容城县"
        },
        {
          code: "133102",
          name: "安新县"
        },
        {
          code: "133103",
          name: "雄县"
        }
      ]
    ],
    [
      [
        {
          code: "140105",
          name: "小店区"
        },
        {
          code: "140106",
          name: "迎泽区"
        },
        {
          code: "140107",
          name: "杏花岭区"
        },
        {
          code: "140108",
          name: "尖草坪区"
        },
        {
          code: "140109",
          name: "万柏林区"
        },
        {
          code: "140110",
          name: "晋源区"
        },
        {
          code: "140121",
          name: "清徐县"
        },
        {
          code: "140122",
          name: "阳曲县"
        },
        {
          code: "140123",
          name: "娄烦县"
        },
        {
          code: "140181",
          name: "古交市"
        }
      ],
      [
        {
          code: "140212",
          name: "新荣区"
        },
        {
          code: "140213",
          name: "平城区"
        },
        {
          code: "140214",
          name: "云冈区"
        },
        {
          code: "140215",
          name: "云州区"
        },
        {
          code: "140221",
          name: "阳高县"
        },
        {
          code: "140222",
          name: "天镇县"
        },
        {
          code: "140223",
          name: "广灵县"
        },
        {
          code: "140224",
          name: "灵丘县"
        },
        {
          code: "140225",
          name: "浑源县"
        },
        {
          code: "140226",
          name: "左云县"
        }
      ],
      [
        {
          code: "140302",
          name: "城区"
        },
        {
          code: "140303",
          name: "矿区"
        },
        {
          code: "140311",
          name: "郊区"
        },
        {
          code: "140321",
          name: "平定县"
        },
        {
          code: "140322",
          name: "盂县"
        }
      ],
      [
        {
          code: "140403",
          name: "潞州区"
        },
        {
          code: "140404",
          name: "上党区"
        },
        {
          code: "140405",
          name: "屯留区"
        },
        {
          code: "140406",
          name: "潞城区"
        },
        {
          code: "140423",
          name: "襄垣县"
        },
        {
          code: "140425",
          name: "平顺县"
        },
        {
          code: "140426",
          name: "黎城县"
        },
        {
          code: "140427",
          name: "壶关县"
        },
        {
          code: "140428",
          name: "长子县"
        },
        {
          code: "140429",
          name: "武乡县"
        },
        {
          code: "140430",
          name: "沁县"
        },
        {
          code: "140431",
          name: "沁源县"
        }
      ],
      [
        {
          code: "140502",
          name: "城区"
        },
        {
          code: "140521",
          name: "沁水县"
        },
        {
          code: "140522",
          name: "阳城县"
        },
        {
          code: "140524",
          name: "陵川县"
        },
        {
          code: "140525",
          name: "泽州县"
        },
        {
          code: "140581",
          name: "高平市"
        }
      ],
      [
        {
          code: "140602",
          name: "朔城区"
        },
        {
          code: "140603",
          name: "平鲁区"
        },
        {
          code: "140621",
          name: "山阴县"
        },
        {
          code: "140622",
          name: "应县"
        },
        {
          code: "140623",
          name: "右玉县"
        },
        {
          code: "140681",
          name: "怀仁市"
        }
      ],
      [
        {
          code: "140702",
          name: "榆次区"
        },
        {
          code: "140703",
          name: "太谷区"
        },
        {
          code: "140721",
          name: "榆社县"
        },
        {
          code: "140722",
          name: "左权县"
        },
        {
          code: "140723",
          name: "和顺县"
        },
        {
          code: "140724",
          name: "昔阳县"
        },
        {
          code: "140725",
          name: "寿阳县"
        },
        {
          code: "140727",
          name: "祁县"
        },
        {
          code: "140728",
          name: "平遥县"
        },
        {
          code: "140729",
          name: "灵石县"
        },
        {
          code: "140781",
          name: "介休市"
        }
      ],
      [
        {
          code: "140802",
          name: "盐湖区"
        },
        {
          code: "140821",
          name: "临猗县"
        },
        {
          code: "140822",
          name: "万荣县"
        },
        {
          code: "140823",
          name: "闻喜县"
        },
        {
          code: "140824",
          name: "稷山县"
        },
        {
          code: "140825",
          name: "新绛县"
        },
        {
          code: "140826",
          name: "绛县"
        },
        {
          code: "140827",
          name: "垣曲县"
        },
        {
          code: "140828",
          name: "夏县"
        },
        {
          code: "140829",
          name: "平陆县"
        },
        {
          code: "140830",
          name: "芮城县"
        },
        {
          code: "140881",
          name: "永济市"
        },
        {
          code: "140882",
          name: "河津市"
        }
      ],
      [
        {
          code: "140902",
          name: "忻府区"
        },
        {
          code: "140921",
          name: "定襄县"
        },
        {
          code: "140922",
          name: "五台县"
        },
        {
          code: "140923",
          name: "代县"
        },
        {
          code: "140924",
          name: "繁峙县"
        },
        {
          code: "140925",
          name: "宁武县"
        },
        {
          code: "140926",
          name: "静乐县"
        },
        {
          code: "140927",
          name: "神池县"
        },
        {
          code: "140928",
          name: "五寨县"
        },
        {
          code: "140929",
          name: "岢岚县"
        },
        {
          code: "140930",
          name: "河曲县"
        },
        {
          code: "140931",
          name: "保德县"
        },
        {
          code: "140932",
          name: "偏关县"
        },
        {
          code: "140981",
          name: "原平市"
        }
      ],
      [
        {
          code: "141002",
          name: "尧都区"
        },
        {
          code: "141021",
          name: "曲沃县"
        },
        {
          code: "141022",
          name: "翼城县"
        },
        {
          code: "141023",
          name: "襄汾县"
        },
        {
          code: "141024",
          name: "洪洞县"
        },
        {
          code: "141025",
          name: "古县"
        },
        {
          code: "141026",
          name: "安泽县"
        },
        {
          code: "141027",
          name: "浮山县"
        },
        {
          code: "141028",
          name: "吉县"
        },
        {
          code: "141029",
          name: "乡宁县"
        },
        {
          code: "141030",
          name: "大宁县"
        },
        {
          code: "141031",
          name: "隰县"
        },
        {
          code: "141032",
          name: "永和县"
        },
        {
          code: "141033",
          name: "蒲县"
        },
        {
          code: "141034",
          name: "汾西县"
        },
        {
          code: "141081",
          name: "侯马市"
        },
        {
          code: "141082",
          name: "霍州市"
        }
      ],
      [
        {
          code: "141102",
          name: "离石区"
        },
        {
          code: "141121",
          name: "文水县"
        },
        {
          code: "141122",
          name: "交城县"
        },
        {
          code: "141123",
          name: "兴县"
        },
        {
          code: "141124",
          name: "临县"
        },
        {
          code: "141125",
          name: "柳林县"
        },
        {
          code: "141126",
          name: "石楼县"
        },
        {
          code: "141127",
          name: "岚县"
        },
        {
          code: "141128",
          name: "方山县"
        },
        {
          code: "141129",
          name: "中阳县"
        },
        {
          code: "141130",
          name: "交口县"
        },
        {
          code: "141181",
          name: "孝义市"
        },
        {
          code: "141182",
          name: "汾阳市"
        }
      ]
    ],
    [
      [
        {
          code: "150102",
          name: "新城区"
        },
        {
          code: "150103",
          name: "回民区"
        },
        {
          code: "150104",
          name: "玉泉区"
        },
        {
          code: "150105",
          name: "赛罕区"
        },
        {
          code: "150121",
          name: "土默特左旗"
        },
        {
          code: "150122",
          name: "托克托县"
        },
        {
          code: "150123",
          name: "和林格尔县"
        },
        {
          code: "150124",
          name: "清水河县"
        },
        {
          code: "150125",
          name: "武川县"
        }
      ],
      [
        {
          code: "150202",
          name: "东河区"
        },
        {
          code: "150203",
          name: "昆都仑区"
        },
        {
          code: "150204",
          name: "青山区"
        },
        {
          code: "150205",
          name: "石拐区"
        },
        {
          code: "150206",
          name: "白云鄂博矿区"
        },
        {
          code: "150207",
          name: "九原区"
        },
        {
          code: "150221",
          name: "土默特右旗"
        },
        {
          code: "150222",
          name: "固阳县"
        },
        {
          code: "150223",
          name: "达尔罕茂明安联合旗"
        }
      ],
      [
        {
          code: "150302",
          name: "海勃湾区"
        },
        {
          code: "150303",
          name: "海南区"
        },
        {
          code: "150304",
          name: "乌达区"
        }
      ],
      [
        {
          code: "150402",
          name: "红山区"
        },
        {
          code: "150403",
          name: "元宝山区"
        },
        {
          code: "150404",
          name: "松山区"
        },
        {
          code: "150421",
          name: "阿鲁科尔沁旗"
        },
        {
          code: "150422",
          name: "巴林左旗"
        },
        {
          code: "150423",
          name: "巴林右旗"
        },
        {
          code: "150424",
          name: "林西县"
        },
        {
          code: "150425",
          name: "克什克腾旗"
        },
        {
          code: "150426",
          name: "翁牛特旗"
        },
        {
          code: "150428",
          name: "喀喇沁旗"
        },
        {
          code: "150429",
          name: "宁城县"
        },
        {
          code: "150430",
          name: "敖汉旗"
        }
      ],
      [
        {
          code: "150502",
          name: "科尔沁区"
        },
        {
          code: "150521",
          name: "科尔沁左翼中旗"
        },
        {
          code: "150522",
          name: "科尔沁左翼后旗"
        },
        {
          code: "150523",
          name: "开鲁县"
        },
        {
          code: "150524",
          name: "库伦旗"
        },
        {
          code: "150525",
          name: "奈曼旗"
        },
        {
          code: "150526",
          name: "扎鲁特旗"
        },
        {
          code: "150581",
          name: "霍林郭勒市"
        }
      ],
      [
        {
          code: "150602",
          name: "东胜区"
        },
        {
          code: "150603",
          name: "康巴什区"
        },
        {
          code: "150621",
          name: "达拉特旗"
        },
        {
          code: "150622",
          name: "准格尔旗"
        },
        {
          code: "150623",
          name: "鄂托克前旗"
        },
        {
          code: "150624",
          name: "鄂托克旗"
        },
        {
          code: "150625",
          name: "杭锦旗"
        },
        {
          code: "150626",
          name: "乌审旗"
        },
        {
          code: "150627",
          name: "伊金霍洛旗"
        }
      ],
      [
        {
          code: "150702",
          name: "海拉尔区"
        },
        {
          code: "150703",
          name: "扎赉诺尔区"
        },
        {
          code: "150721",
          name: "阿荣旗"
        },
        {
          code: "150722",
          name: "莫力达瓦达斡尔族自治旗"
        },
        {
          code: "150723",
          name: "鄂伦春自治旗"
        },
        {
          code: "150724",
          name: "鄂温克族自治旗"
        },
        {
          code: "150725",
          name: "陈巴尔虎旗"
        },
        {
          code: "150726",
          name: "新巴尔虎左旗"
        },
        {
          code: "150727",
          name: "新巴尔虎右旗"
        },
        {
          code: "150781",
          name: "满洲里市"
        },
        {
          code: "150782",
          name: "牙克石市"
        },
        {
          code: "150783",
          name: "扎兰屯市"
        },
        {
          code: "150784",
          name: "额尔古纳市"
        },
        {
          code: "150785",
          name: "根河市"
        }
      ],
      [
        {
          code: "150802",
          name: "临河区"
        },
        {
          code: "150821",
          name: "五原县"
        },
        {
          code: "150822",
          name: "磴口县"
        },
        {
          code: "150823",
          name: "乌拉特前旗"
        },
        {
          code: "150824",
          name: "乌拉特中旗"
        },
        {
          code: "150825",
          name: "乌拉特后旗"
        },
        {
          code: "150826",
          name: "杭锦后旗"
        }
      ],
      [
        {
          code: "150902",
          name: "集宁区"
        },
        {
          code: "150921",
          name: "卓资县"
        },
        {
          code: "150922",
          name: "化德县"
        },
        {
          code: "150923",
          name: "商都县"
        },
        {
          code: "150924",
          name: "兴和县"
        },
        {
          code: "150925",
          name: "凉城县"
        },
        {
          code: "150926",
          name: "察哈尔右翼前旗"
        },
        {
          code: "150927",
          name: "察哈尔右翼中旗"
        },
        {
          code: "150928",
          name: "察哈尔右翼后旗"
        },
        {
          code: "150929",
          name: "四子王旗"
        },
        {
          code: "150981",
          name: "丰镇市"
        }
      ],
      [
        {
          code: "152201",
          name: "乌兰浩特市"
        },
        {
          code: "152202",
          name: "阿尔山市"
        },
        {
          code: "152221",
          name: "科尔沁右翼前旗"
        },
        {
          code: "152222",
          name: "科尔沁右翼中旗"
        },
        {
          code: "152223",
          name: "扎赉特旗"
        },
        {
          code: "152224",
          name: "突泉县"
        }
      ],
      [
        {
          code: "152501",
          name: "二连浩特市"
        },
        {
          code: "152502",
          name: "锡林浩特市"
        },
        {
          code: "152522",
          name: "阿巴嘎旗"
        },
        {
          code: "152523",
          name: "苏尼特左旗"
        },
        {
          code: "152524",
          name: "苏尼特右旗"
        },
        {
          code: "152525",
          name: "东乌珠穆沁旗"
        },
        {
          code: "152526",
          name: "西乌珠穆沁旗"
        },
        {
          code: "152527",
          name: "太仆寺旗"
        },
        {
          code: "152528",
          name: "镶黄旗"
        },
        {
          code: "152529",
          name: "正镶白旗"
        },
        {
          code: "152530",
          name: "正蓝旗"
        },
        {
          code: "152531",
          name: "多伦县"
        }
      ],
      [
        {
          code: "152921",
          name: "阿拉善左旗"
        },
        {
          code: "152922",
          name: "阿拉善右旗"
        },
        {
          code: "152923",
          name: "额济纳旗"
        }
      ]
    ],
    [
      [
        {
          code: "210102",
          name: "和平区"
        },
        {
          code: "210103",
          name: "沈河区"
        },
        {
          code: "210104",
          name: "大东区"
        },
        {
          code: "210105",
          name: "皇姑区"
        },
        {
          code: "210106",
          name: "铁西区"
        },
        {
          code: "210111",
          name: "苏家屯区"
        },
        {
          code: "210112",
          name: "浑南区"
        },
        {
          code: "210113",
          name: "沈北新区"
        },
        {
          code: "210114",
          name: "于洪区"
        },
        {
          code: "210115",
          name: "辽中区"
        },
        {
          code: "210123",
          name: "康平县"
        },
        {
          code: "210124",
          name: "法库县"
        },
        {
          code: "210181",
          name: "新民市"
        }
      ],
      [
        {
          code: "210202",
          name: "中山区"
        },
        {
          code: "210203",
          name: "西岗区"
        },
        {
          code: "210204",
          name: "沙河口区"
        },
        {
          code: "210211",
          name: "甘井子区"
        },
        {
          code: "210212",
          name: "旅顺口区"
        },
        {
          code: "210213",
          name: "金州区"
        },
        {
          code: "210214",
          name: "普兰店区"
        },
        {
          code: "210224",
          name: "长海县"
        },
        {
          code: "210281",
          name: "瓦房店市"
        },
        {
          code: "210283",
          name: "庄河市"
        }
      ],
      [
        {
          code: "210302",
          name: "铁东区"
        },
        {
          code: "210303",
          name: "铁西区"
        },
        {
          code: "210304",
          name: "立山区"
        },
        {
          code: "210311",
          name: "千山区"
        },
        {
          code: "210321",
          name: "台安县"
        },
        {
          code: "210323",
          name: "岫岩满族自治县"
        },
        {
          code: "210381",
          name: "海城市"
        }
      ],
      [
        {
          code: "210402",
          name: "新抚区"
        },
        {
          code: "210403",
          name: "东洲区"
        },
        {
          code: "210404",
          name: "望花区"
        },
        {
          code: "210411",
          name: "顺城区"
        },
        {
          code: "210421",
          name: "抚顺县"
        },
        {
          code: "210422",
          name: "新宾满族自治县"
        },
        {
          code: "210423",
          name: "清原满族自治县"
        }
      ],
      [
        {
          code: "210502",
          name: "平山区"
        },
        {
          code: "210503",
          name: "溪湖区"
        },
        {
          code: "210504",
          name: "明山区"
        },
        {
          code: "210505",
          name: "南芬区"
        },
        {
          code: "210521",
          name: "本溪满族自治县"
        },
        {
          code: "210522",
          name: "桓仁满族自治县"
        }
      ],
      [
        {
          code: "210602",
          name: "元宝区"
        },
        {
          code: "210603",
          name: "振兴区"
        },
        {
          code: "210604",
          name: "振安区"
        },
        {
          code: "210624",
          name: "宽甸满族自治县"
        },
        {
          code: "210681",
          name: "东港市"
        },
        {
          code: "210682",
          name: "凤城市"
        }
      ],
      [
        {
          code: "210702",
          name: "古塔区"
        },
        {
          code: "210703",
          name: "凌河区"
        },
        {
          code: "210711",
          name: "太和区"
        },
        {
          code: "210726",
          name: "黑山县"
        },
        {
          code: "210727",
          name: "义县"
        },
        {
          code: "210781",
          name: "凌海市"
        },
        {
          code: "210782",
          name: "北镇市"
        }
      ],
      [
        {
          code: "210802",
          name: "站前区"
        },
        {
          code: "210803",
          name: "西市区"
        },
        {
          code: "210804",
          name: "鲅鱼圈区"
        },
        {
          code: "210811",
          name: "老边区"
        },
        {
          code: "210881",
          name: "盖州市"
        },
        {
          code: "210882",
          name: "大石桥市"
        }
      ],
      [
        {
          code: "210902",
          name: "海州区"
        },
        {
          code: "210903",
          name: "新邱区"
        },
        {
          code: "210904",
          name: "太平区"
        },
        {
          code: "210905",
          name: "清河门区"
        },
        {
          code: "210911",
          name: "细河区"
        },
        {
          code: "210921",
          name: "阜新蒙古族自治县"
        },
        {
          code: "210922",
          name: "彰武县"
        }
      ],
      [
        {
          code: "211002",
          name: "白塔区"
        },
        {
          code: "211003",
          name: "文圣区"
        },
        {
          code: "211004",
          name: "宏伟区"
        },
        {
          code: "211005",
          name: "弓长岭区"
        },
        {
          code: "211011",
          name: "太子河区"
        },
        {
          code: "211021",
          name: "辽阳县"
        },
        {
          code: "211081",
          name: "灯塔市"
        }
      ],
      [
        {
          code: "211102",
          name: "双台子区"
        },
        {
          code: "211103",
          name: "兴隆台区"
        },
        {
          code: "211104",
          name: "大洼区"
        },
        {
          code: "211122",
          name: "盘山县"
        }
      ],
      [
        {
          code: "211202",
          name: "银州区"
        },
        {
          code: "211204",
          name: "清河区"
        },
        {
          code: "211221",
          name: "铁岭县"
        },
        {
          code: "211223",
          name: "西丰县"
        },
        {
          code: "211224",
          name: "昌图县"
        },
        {
          code: "211281",
          name: "调兵山市"
        },
        {
          code: "211282",
          name: "开原市"
        }
      ],
      [
        {
          code: "211302",
          name: "双塔区"
        },
        {
          code: "211303",
          name: "龙城区"
        },
        {
          code: "211321",
          name: "朝阳县"
        },
        {
          code: "211322",
          name: "建平县"
        },
        {
          code: "211324",
          name: "喀喇沁左翼蒙古族自治县"
        },
        {
          code: "211381",
          name: "北票市"
        },
        {
          code: "211382",
          name: "凌源市"
        }
      ],
      [
        {
          code: "211402",
          name: "连山区"
        },
        {
          code: "211403",
          name: "龙港区"
        },
        {
          code: "211404",
          name: "南票区"
        },
        {
          code: "211421",
          name: "绥中县"
        },
        {
          code: "211422",
          name: "建昌县"
        },
        {
          code: "211481",
          name: "兴城市"
        }
      ]
    ],
    [
      [
        {
          code: "220102",
          name: "南关区"
        },
        {
          code: "220103",
          name: "宽城区"
        },
        {
          code: "220104",
          name: "朝阳区"
        },
        {
          code: "220105",
          name: "二道区"
        },
        {
          code: "220106",
          name: "绿园区"
        },
        {
          code: "220112",
          name: "双阳区"
        },
        {
          code: "220113",
          name: "九台区"
        },
        {
          code: "220122",
          name: "农安县"
        },
        {
          code: "220182",
          name: "榆树市"
        },
        {
          code: "220183",
          name: "德惠市"
        },
        {
          code: "220184",
          name: "公主岭市"
        }
      ],
      [
        {
          code: "220202",
          name: "昌邑区"
        },
        {
          code: "220203",
          name: "龙潭区"
        },
        {
          code: "220204",
          name: "船营区"
        },
        {
          code: "220211",
          name: "丰满区"
        },
        {
          code: "220221",
          name: "永吉县"
        },
        {
          code: "220281",
          name: "蛟河市"
        },
        {
          code: "220282",
          name: "桦甸市"
        },
        {
          code: "220283",
          name: "舒兰市"
        },
        {
          code: "220284",
          name: "磐石市"
        }
      ],
      [
        {
          code: "220302",
          name: "铁西区"
        },
        {
          code: "220303",
          name: "铁东区"
        },
        {
          code: "220322",
          name: "梨树县"
        },
        {
          code: "220323",
          name: "伊通满族自治县"
        },
        {
          code: "220382",
          name: "双辽市"
        }
      ],
      [
        {
          code: "220402",
          name: "龙山区"
        },
        {
          code: "220403",
          name: "西安区"
        },
        {
          code: "220421",
          name: "东丰县"
        },
        {
          code: "220422",
          name: "东辽县"
        }
      ],
      [
        {
          code: "220502",
          name: "东昌区"
        },
        {
          code: "220503",
          name: "二道江区"
        },
        {
          code: "220521",
          name: "通化县"
        },
        {
          code: "220523",
          name: "辉南县"
        },
        {
          code: "220524",
          name: "柳河县"
        },
        {
          code: "220581",
          name: "梅河口市"
        },
        {
          code: "220582",
          name: "集安市"
        }
      ],
      [
        {
          code: "220602",
          name: "浑江区"
        },
        {
          code: "220605",
          name: "江源区"
        },
        {
          code: "220621",
          name: "抚松县"
        },
        {
          code: "220622",
          name: "靖宇县"
        },
        {
          code: "220623",
          name: "长白朝鲜族自治县"
        },
        {
          code: "220681",
          name: "临江市"
        }
      ],
      [
        {
          code: "220702",
          name: "宁江区"
        },
        {
          code: "220721",
          name: "前郭尔罗斯蒙古族自治县"
        },
        {
          code: "220722",
          name: "长岭县"
        },
        {
          code: "220723",
          name: "乾安县"
        },
        {
          code: "220781",
          name: "扶余市"
        }
      ],
      [
        {
          code: "220802",
          name: "洮北区"
        },
        {
          code: "220821",
          name: "镇赉县"
        },
        {
          code: "220822",
          name: "通榆县"
        },
        {
          code: "220881",
          name: "洮南市"
        },
        {
          code: "220882",
          name: "大安市"
        }
      ],
      [
        {
          code: "222401",
          name: "延吉市"
        },
        {
          code: "222402",
          name: "图们市"
        },
        {
          code: "222403",
          name: "敦化市"
        },
        {
          code: "222404",
          name: "珲春市"
        },
        {
          code: "222405",
          name: "龙井市"
        },
        {
          code: "222406",
          name: "和龙市"
        },
        {
          code: "222424",
          name: "汪清县"
        },
        {
          code: "222426",
          name: "安图县"
        }
      ]
    ],
    [
      [
        {
          code: "230102",
          name: "道里区"
        },
        {
          code: "230103",
          name: "南岗区"
        },
        {
          code: "230104",
          name: "道外区"
        },
        {
          code: "230108",
          name: "平房区"
        },
        {
          code: "230109",
          name: "松北区"
        },
        {
          code: "230110",
          name: "香坊区"
        },
        {
          code: "230111",
          name: "呼兰区"
        },
        {
          code: "230112",
          name: "阿城区"
        },
        {
          code: "230113",
          name: "双城区"
        },
        {
          code: "230123",
          name: "依兰县"
        },
        {
          code: "230124",
          name: "方正县"
        },
        {
          code: "230125",
          name: "宾县"
        },
        {
          code: "230126",
          name: "巴彦县"
        },
        {
          code: "230127",
          name: "木兰县"
        },
        {
          code: "230128",
          name: "通河县"
        },
        {
          code: "230129",
          name: "延寿县"
        },
        {
          code: "230183",
          name: "尚志市"
        },
        {
          code: "230184",
          name: "五常市"
        }
      ],
      [
        {
          code: "230202",
          name: "龙沙区"
        },
        {
          code: "230203",
          name: "建华区"
        },
        {
          code: "230204",
          name: "铁锋区"
        },
        {
          code: "230205",
          name: "昂昂溪区"
        },
        {
          code: "230206",
          name: "富拉尔基区"
        },
        {
          code: "230207",
          name: "碾子山区"
        },
        {
          code: "230208",
          name: "梅里斯达斡尔族区"
        },
        {
          code: "230221",
          name: "龙江县"
        },
        {
          code: "230223",
          name: "依安县"
        },
        {
          code: "230224",
          name: "泰来县"
        },
        {
          code: "230225",
          name: "甘南县"
        },
        {
          code: "230227",
          name: "富裕县"
        },
        {
          code: "230229",
          name: "克山县"
        },
        {
          code: "230230",
          name: "克东县"
        },
        {
          code: "230231",
          name: "拜泉县"
        },
        {
          code: "230281",
          name: "讷河市"
        }
      ],
      [
        {
          code: "230302",
          name: "鸡冠区"
        },
        {
          code: "230303",
          name: "恒山区"
        },
        {
          code: "230304",
          name: "滴道区"
        },
        {
          code: "230305",
          name: "梨树区"
        },
        {
          code: "230306",
          name: "城子河区"
        },
        {
          code: "230307",
          name: "麻山区"
        },
        {
          code: "230321",
          name: "鸡东县"
        },
        {
          code: "230381",
          name: "虎林市"
        },
        {
          code: "230382",
          name: "密山市"
        }
      ],
      [
        {
          code: "230402",
          name: "向阳区"
        },
        {
          code: "230403",
          name: "工农区"
        },
        {
          code: "230404",
          name: "南山区"
        },
        {
          code: "230405",
          name: "兴安区"
        },
        {
          code: "230406",
          name: "东山区"
        },
        {
          code: "230407",
          name: "兴山区"
        },
        {
          code: "230421",
          name: "萝北县"
        },
        {
          code: "230422",
          name: "绥滨县"
        }
      ],
      [
        {
          code: "230502",
          name: "尖山区"
        },
        {
          code: "230503",
          name: "岭东区"
        },
        {
          code: "230505",
          name: "四方台区"
        },
        {
          code: "230506",
          name: "宝山区"
        },
        {
          code: "230521",
          name: "集贤县"
        },
        {
          code: "230522",
          name: "友谊县"
        },
        {
          code: "230523",
          name: "宝清县"
        },
        {
          code: "230524",
          name: "饶河县"
        }
      ],
      [
        {
          code: "230602",
          name: "萨尔图区"
        },
        {
          code: "230603",
          name: "龙凤区"
        },
        {
          code: "230604",
          name: "让胡路区"
        },
        {
          code: "230605",
          name: "红岗区"
        },
        {
          code: "230606",
          name: "大同区"
        },
        {
          code: "230621",
          name: "肇州县"
        },
        {
          code: "230622",
          name: "肇源县"
        },
        {
          code: "230623",
          name: "林甸县"
        },
        {
          code: "230624",
          name: "杜尔伯特蒙古族自治县"
        }
      ],
      [
        {
          code: "230717",
          name: "伊美区"
        },
        {
          code: "230718",
          name: "乌翠区"
        },
        {
          code: "230719",
          name: "友好区"
        },
        {
          code: "230722",
          name: "嘉荫县"
        },
        {
          code: "230723",
          name: "汤旺县"
        },
        {
          code: "230724",
          name: "丰林县"
        },
        {
          code: "230725",
          name: "大箐山县"
        },
        {
          code: "230726",
          name: "南岔县"
        },
        {
          code: "230751",
          name: "金林区"
        },
        {
          code: "230781",
          name: "铁力市"
        }
      ],
      [
        {
          code: "230803",
          name: "向阳区"
        },
        {
          code: "230804",
          name: "前进区"
        },
        {
          code: "230805",
          name: "东风区"
        },
        {
          code: "230811",
          name: "郊区"
        },
        {
          code: "230822",
          name: "桦南县"
        },
        {
          code: "230826",
          name: "桦川县"
        },
        {
          code: "230828",
          name: "汤原县"
        },
        {
          code: "230881",
          name: "同江市"
        },
        {
          code: "230882",
          name: "富锦市"
        },
        {
          code: "230883",
          name: "抚远市"
        }
      ],
      [
        {
          code: "230902",
          name: "新兴区"
        },
        {
          code: "230903",
          name: "桃山区"
        },
        {
          code: "230904",
          name: "茄子河区"
        },
        {
          code: "230921",
          name: "勃利县"
        }
      ],
      [
        {
          code: "231002",
          name: "东安区"
        },
        {
          code: "231003",
          name: "阳明区"
        },
        {
          code: "231004",
          name: "爱民区"
        },
        {
          code: "231005",
          name: "西安区"
        },
        {
          code: "231025",
          name: "林口县"
        },
        {
          code: "231081",
          name: "绥芬河市"
        },
        {
          code: "231083",
          name: "海林市"
        },
        {
          code: "231084",
          name: "宁安市"
        },
        {
          code: "231085",
          name: "穆棱市"
        },
        {
          code: "231086",
          name: "东宁市"
        }
      ],
      [
        {
          code: "231102",
          name: "爱辉区"
        },
        {
          code: "231123",
          name: "逊克县"
        },
        {
          code: "231124",
          name: "孙吴县"
        },
        {
          code: "231181",
          name: "北安市"
        },
        {
          code: "231182",
          name: "五大连池市"
        },
        {
          code: "231183",
          name: "嫩江市"
        }
      ],
      [
        {
          code: "231202",
          name: "北林区"
        },
        {
          code: "231221",
          name: "望奎县"
        },
        {
          code: "231222",
          name: "兰西县"
        },
        {
          code: "231223",
          name: "青冈县"
        },
        {
          code: "231224",
          name: "庆安县"
        },
        {
          code: "231225",
          name: "明水县"
        },
        {
          code: "231226",
          name: "绥棱县"
        },
        {
          code: "231281",
          name: "安达市"
        },
        {
          code: "231282",
          name: "肇东市"
        },
        {
          code: "231283",
          name: "海伦市"
        }
      ],
      [
        {
          code: "232701",
          name: "漠河市"
        },
        {
          code: "232721",
          name: "呼玛县"
        },
        {
          code: "232722",
          name: "塔河县"
        },
        {
          code: "232761",
          name: "加格达奇区"
        },
        {
          code: "232763",
          name: "新林区"
        },
        {
          code: "232764",
          name: "呼中区"
        }
      ]
    ],
    [
      [
        {
          code: "310101",
          name: "黄浦区"
        },
        {
          code: "310104",
          name: "徐汇区"
        },
        {
          code: "310105",
          name: "长宁区"
        },
        {
          code: "310106",
          name: "静安区"
        },
        {
          code: "310107",
          name: "普陀区"
        },
        {
          code: "310109",
          name: "虹口区"
        },
        {
          code: "310110",
          name: "杨浦区"
        },
        {
          code: "310112",
          name: "闵行区"
        },
        {
          code: "310113",
          name: "宝山区"
        },
        {
          code: "310114",
          name: "嘉定区"
        },
        {
          code: "310115",
          name: "浦东新区"
        },
        {
          code: "310116",
          name: "金山区"
        },
        {
          code: "310117",
          name: "松江区"
        },
        {
          code: "310118",
          name: "青浦区"
        },
        {
          code: "310120",
          name: "奉贤区"
        },
        {
          code: "310151",
          name: "崇明区"
        }
      ]
    ],
    [
      [
        {
          code: "320102",
          name: "玄武区"
        },
        {
          code: "320104",
          name: "秦淮区"
        },
        {
          code: "320105",
          name: "建邺区"
        },
        {
          code: "320106",
          name: "鼓楼区"
        },
        {
          code: "320111",
          name: "浦口区"
        },
        {
          code: "320113",
          name: "栖霞区"
        },
        {
          code: "320114",
          name: "雨花台区"
        },
        {
          code: "320115",
          name: "江宁区"
        },
        {
          code: "320116",
          name: "六合区"
        },
        {
          code: "320117",
          name: "溧水区"
        },
        {
          code: "320118",
          name: "高淳区"
        }
      ],
      [
        {
          code: "320205",
          name: "锡山区"
        },
        {
          code: "320206",
          name: "惠山区"
        },
        {
          code: "320211",
          name: "滨湖区"
        },
        {
          code: "320213",
          name: "梁溪区"
        },
        {
          code: "320214",
          name: "新吴区"
        },
        {
          code: "320281",
          name: "江阴市"
        },
        {
          code: "320282",
          name: "宜兴市"
        }
      ],
      [
        {
          code: "320302",
          name: "鼓楼区"
        },
        {
          code: "320303",
          name: "云龙区"
        },
        {
          code: "320305",
          name: "贾汪区"
        },
        {
          code: "320311",
          name: "泉山区"
        },
        {
          code: "320312",
          name: "铜山区"
        },
        {
          code: "320321",
          name: "丰县"
        },
        {
          code: "320322",
          name: "沛县"
        },
        {
          code: "320324",
          name: "睢宁县"
        },
        {
          code: "320381",
          name: "新沂市"
        },
        {
          code: "320382",
          name: "邳州市"
        }
      ],
      [
        {
          code: "320402",
          name: "天宁区"
        },
        {
          code: "320404",
          name: "钟楼区"
        },
        {
          code: "320411",
          name: "新北区"
        },
        {
          code: "320412",
          name: "武进区"
        },
        {
          code: "320413",
          name: "金坛区"
        },
        {
          code: "320481",
          name: "溧阳市"
        }
      ],
      [
        {
          code: "320505",
          name: "虎丘区"
        },
        {
          code: "320506",
          name: "吴中区"
        },
        {
          code: "320507",
          name: "相城区"
        },
        {
          code: "320508",
          name: "姑苏区"
        },
        {
          code: "320509",
          name: "吴江区"
        },
        {
          code: "320581",
          name: "常熟市"
        },
        {
          code: "320582",
          name: "张家港市"
        },
        {
          code: "320583",
          name: "昆山市"
        },
        {
          code: "320585",
          name: "太仓市"
        }
      ],
      [
        {
          code: "320612",
          name: "通州区"
        },
        {
          code: "320613",
          name: "崇川区"
        },
        {
          code: "320614",
          name: "海门区"
        },
        {
          code: "320623",
          name: "如东县"
        },
        {
          code: "320681",
          name: "启东市"
        },
        {
          code: "320682",
          name: "如皋市"
        },
        {
          code: "320685",
          name: "海安市"
        }
      ],
      [
        {
          code: "320703",
          name: "连云区"
        },
        {
          code: "320706",
          name: "海州区"
        },
        {
          code: "320707",
          name: "赣榆区"
        },
        {
          code: "320722",
          name: "东海县"
        },
        {
          code: "320723",
          name: "灌云县"
        },
        {
          code: "320724",
          name: "灌南县"
        }
      ],
      [
        {
          code: "320803",
          name: "淮安区"
        },
        {
          code: "320804",
          name: "淮阴区"
        },
        {
          code: "320812",
          name: "清江浦区"
        },
        {
          code: "320813",
          name: "洪泽区"
        },
        {
          code: "320826",
          name: "涟水县"
        },
        {
          code: "320830",
          name: "盱眙县"
        },
        {
          code: "320831",
          name: "金湖县"
        }
      ],
      [
        {
          code: "320902",
          name: "亭湖区"
        },
        {
          code: "320903",
          name: "盐都区"
        },
        {
          code: "320904",
          name: "大丰区"
        },
        {
          code: "320921",
          name: "响水县"
        },
        {
          code: "320922",
          name: "滨海县"
        },
        {
          code: "320923",
          name: "阜宁县"
        },
        {
          code: "320924",
          name: "射阳县"
        },
        {
          code: "320925",
          name: "建湖县"
        },
        {
          code: "320981",
          name: "东台市"
        }
      ],
      [
        {
          code: "321002",
          name: "广陵区"
        },
        {
          code: "321003",
          name: "邗江区"
        },
        {
          code: "321012",
          name: "江都区"
        },
        {
          code: "321023",
          name: "宝应县"
        },
        {
          code: "321081",
          name: "仪征市"
        },
        {
          code: "321084",
          name: "高邮市"
        }
      ],
      [
        {
          code: "321102",
          name: "京口区"
        },
        {
          code: "321111",
          name: "润州区"
        },
        {
          code: "321112",
          name: "丹徒区"
        },
        {
          code: "321181",
          name: "丹阳市"
        },
        {
          code: "321182",
          name: "扬中市"
        },
        {
          code: "321183",
          name: "句容市"
        }
      ],
      [
        {
          code: "321202",
          name: "海陵区"
        },
        {
          code: "321203",
          name: "高港区"
        },
        {
          code: "321204",
          name: "姜堰区"
        },
        {
          code: "321281",
          name: "兴化市"
        },
        {
          code: "321282",
          name: "靖江市"
        },
        {
          code: "321283",
          name: "泰兴市"
        }
      ],
      [
        {
          code: "321302",
          name: "宿城区"
        },
        {
          code: "321311",
          name: "宿豫区"
        },
        {
          code: "321322",
          name: "沭阳县"
        },
        {
          code: "321323",
          name: "泗阳县"
        },
        {
          code: "321324",
          name: "泗洪县"
        }
      ]
    ],
    [
      [
        {
          code: "330102",
          name: "上城区"
        },
        {
          code: "330105",
          name: "拱墅区"
        },
        {
          code: "330106",
          name: "西湖区"
        },
        {
          code: "330108",
          name: "滨江区"
        },
        {
          code: "330109",
          name: "萧山区"
        },
        {
          code: "330110",
          name: "余杭区"
        },
        {
          code: "330111",
          name: "富阳区"
        },
        {
          code: "330112",
          name: "临安区"
        },
        {
          code: "330113",
          name: "临平区"
        },
        {
          code: "330114",
          name: "钱塘区"
        },
        {
          code: "330122",
          name: "桐庐县"
        },
        {
          code: "330127",
          name: "淳安县"
        },
        {
          code: "330182",
          name: "建德市"
        }
      ],
      [
        {
          code: "330203",
          name: "海曙区"
        },
        {
          code: "330205",
          name: "江北区"
        },
        {
          code: "330206",
          name: "北仑区"
        },
        {
          code: "330211",
          name: "镇海区"
        },
        {
          code: "330212",
          name: "鄞州区"
        },
        {
          code: "330213",
          name: "奉化区"
        },
        {
          code: "330225",
          name: "象山县"
        },
        {
          code: "330226",
          name: "宁海县"
        },
        {
          code: "330281",
          name: "余姚市"
        },
        {
          code: "330282",
          name: "慈溪市"
        }
      ],
      [
        {
          code: "330302",
          name: "鹿城区"
        },
        {
          code: "330303",
          name: "龙湾区"
        },
        {
          code: "330304",
          name: "瓯海区"
        },
        {
          code: "330305",
          name: "洞头区"
        },
        {
          code: "330324",
          name: "永嘉县"
        },
        {
          code: "330326",
          name: "平阳县"
        },
        {
          code: "330327",
          name: "苍南县"
        },
        {
          code: "330328",
          name: "文成县"
        },
        {
          code: "330329",
          name: "泰顺县"
        },
        {
          code: "330381",
          name: "瑞安市"
        },
        {
          code: "330382",
          name: "乐清市"
        },
        {
          code: "330383",
          name: "龙港市"
        }
      ],
      [
        {
          code: "330402",
          name: "南湖区"
        },
        {
          code: "330411",
          name: "秀洲区"
        },
        {
          code: "330421",
          name: "嘉善县"
        },
        {
          code: "330424",
          name: "海盐县"
        },
        {
          code: "330481",
          name: "海宁市"
        },
        {
          code: "330482",
          name: "平湖市"
        },
        {
          code: "330483",
          name: "桐乡市"
        }
      ],
      [
        {
          code: "330502",
          name: "吴兴区"
        },
        {
          code: "330503",
          name: "南浔区"
        },
        {
          code: "330521",
          name: "德清县"
        },
        {
          code: "330522",
          name: "长兴县"
        },
        {
          code: "330523",
          name: "安吉县"
        }
      ],
      [
        {
          code: "330602",
          name: "越城区"
        },
        {
          code: "330603",
          name: "柯桥区"
        },
        {
          code: "330604",
          name: "上虞区"
        },
        {
          code: "330624",
          name: "新昌县"
        },
        {
          code: "330681",
          name: "诸暨市"
        },
        {
          code: "330683",
          name: "嵊州市"
        }
      ],
      [
        {
          code: "330702",
          name: "婺城区"
        },
        {
          code: "330703",
          name: "金东区"
        },
        {
          code: "330723",
          name: "武义县"
        },
        {
          code: "330726",
          name: "浦江县"
        },
        {
          code: "330727",
          name: "磐安县"
        },
        {
          code: "330781",
          name: "兰溪市"
        },
        {
          code: "330782",
          name: "义乌市"
        },
        {
          code: "330783",
          name: "东阳市"
        },
        {
          code: "330784",
          name: "永康市"
        }
      ],
      [
        {
          code: "330802",
          name: "柯城区"
        },
        {
          code: "330803",
          name: "衢江区"
        },
        {
          code: "330822",
          name: "常山县"
        },
        {
          code: "330824",
          name: "开化县"
        },
        {
          code: "330825",
          name: "龙游县"
        },
        {
          code: "330881",
          name: "江山市"
        }
      ],
      [
        {
          code: "330902",
          name: "定海区"
        },
        {
          code: "330903",
          name: "普陀区"
        },
        {
          code: "330921",
          name: "岱山县"
        },
        {
          code: "330922",
          name: "嵊泗县"
        }
      ],
      [
        {
          code: "331002",
          name: "椒江区"
        },
        {
          code: "331003",
          name: "黄岩区"
        },
        {
          code: "331004",
          name: "路桥区"
        },
        {
          code: "331022",
          name: "三门县"
        },
        {
          code: "331023",
          name: "天台县"
        },
        {
          code: "331024",
          name: "仙居县"
        },
        {
          code: "331081",
          name: "温岭市"
        },
        {
          code: "331082",
          name: "临海市"
        },
        {
          code: "331083",
          name: "玉环市"
        }
      ],
      [
        {
          code: "331102",
          name: "莲都区"
        },
        {
          code: "331121",
          name: "青田县"
        },
        {
          code: "331122",
          name: "缙云县"
        },
        {
          code: "331123",
          name: "遂昌县"
        },
        {
          code: "331124",
          name: "松阳县"
        },
        {
          code: "331125",
          name: "云和县"
        },
        {
          code: "331126",
          name: "庆元县"
        },
        {
          code: "331127",
          name: "景宁畲族自治县"
        },
        {
          code: "331181",
          name: "龙泉市"
        }
      ]
    ],
    [
      [
        {
          code: "340102",
          name: "瑶海区"
        },
        {
          code: "340103",
          name: "庐阳区"
        },
        {
          code: "340104",
          name: "蜀山区"
        },
        {
          code: "340111",
          name: "包河区"
        },
        {
          code: "340121",
          name: "长丰县"
        },
        {
          code: "340122",
          name: "肥东县"
        },
        {
          code: "340123",
          name: "肥西县"
        },
        {
          code: "340124",
          name: "庐江县"
        },
        {
          code: "340181",
          name: "巢湖市"
        }
      ],
      [
        {
          code: "340202",
          name: "镜湖区"
        },
        {
          code: "340207",
          name: "鸠江区"
        },
        {
          code: "340209",
          name: "弋江区"
        },
        {
          code: "340210",
          name: "湾沚区"
        },
        {
          code: "340212",
          name: "繁昌区"
        },
        {
          code: "340223",
          name: "南陵县"
        },
        {
          code: "340281",
          name: "无为市"
        }
      ],
      [
        {
          code: "340302",
          name: "龙子湖区"
        },
        {
          code: "340303",
          name: "蚌山区"
        },
        {
          code: "340304",
          name: "禹会区"
        },
        {
          code: "340311",
          name: "淮上区"
        },
        {
          code: "340321",
          name: "怀远县"
        },
        {
          code: "340322",
          name: "五河县"
        },
        {
          code: "340323",
          name: "固镇县"
        }
      ],
      [
        {
          code: "340402",
          name: "大通区"
        },
        {
          code: "340403",
          name: "田家庵区"
        },
        {
          code: "340404",
          name: "谢家集区"
        },
        {
          code: "340405",
          name: "八公山区"
        },
        {
          code: "340406",
          name: "潘集区"
        },
        {
          code: "340421",
          name: "凤台县"
        },
        {
          code: "340422",
          name: "寿县"
        }
      ],
      [
        {
          code: "340503",
          name: "花山区"
        },
        {
          code: "340504",
          name: "雨山区"
        },
        {
          code: "340506",
          name: "博望区"
        },
        {
          code: "340521",
          name: "当涂县"
        },
        {
          code: "340522",
          name: "含山县"
        },
        {
          code: "340523",
          name: "和县"
        }
      ],
      [
        {
          code: "340602",
          name: "杜集区"
        },
        {
          code: "340603",
          name: "相山区"
        },
        {
          code: "340604",
          name: "烈山区"
        },
        {
          code: "340621",
          name: "濉溪县"
        }
      ],
      [
        {
          code: "340705",
          name: "铜官区"
        },
        {
          code: "340706",
          name: "义安区"
        },
        {
          code: "340711",
          name: "郊区"
        },
        {
          code: "340722",
          name: "枞阳县"
        }
      ],
      [
        {
          code: "340802",
          name: "迎江区"
        },
        {
          code: "340803",
          name: "大观区"
        },
        {
          code: "340811",
          name: "宜秀区"
        },
        {
          code: "340822",
          name: "怀宁县"
        },
        {
          code: "340825",
          name: "太湖县"
        },
        {
          code: "340826",
          name: "宿松县"
        },
        {
          code: "340827",
          name: "望江县"
        },
        {
          code: "340828",
          name: "岳西县"
        },
        {
          code: "340881",
          name: "桐城市"
        },
        {
          code: "340882",
          name: "潜山市"
        }
      ],
      [
        {
          code: "341002",
          name: "屯溪区"
        },
        {
          code: "341003",
          name: "黄山区"
        },
        {
          code: "341004",
          name: "徽州区"
        },
        {
          code: "341021",
          name: "歙县"
        },
        {
          code: "341022",
          name: "休宁县"
        },
        {
          code: "341023",
          name: "黟县"
        },
        {
          code: "341024",
          name: "祁门县"
        }
      ],
      [
        {
          code: "341102",
          name: "琅琊区"
        },
        {
          code: "341103",
          name: "南谯区"
        },
        {
          code: "341122",
          name: "来安县"
        },
        {
          code: "341124",
          name: "全椒县"
        },
        {
          code: "341125",
          name: "定远县"
        },
        {
          code: "341126",
          name: "凤阳县"
        },
        {
          code: "341181",
          name: "天长市"
        },
        {
          code: "341182",
          name: "明光市"
        }
      ],
      [
        {
          code: "341202",
          name: "颍州区"
        },
        {
          code: "341203",
          name: "颍东区"
        },
        {
          code: "341204",
          name: "颍泉区"
        },
        {
          code: "341221",
          name: "临泉县"
        },
        {
          code: "341222",
          name: "太和县"
        },
        {
          code: "341225",
          name: "阜南县"
        },
        {
          code: "341226",
          name: "颍上县"
        },
        {
          code: "341282",
          name: "界首市"
        }
      ],
      [
        {
          code: "341302",
          name: "埇桥区"
        },
        {
          code: "341321",
          name: "砀山县"
        },
        {
          code: "341322",
          name: "萧县"
        },
        {
          code: "341323",
          name: "灵璧县"
        },
        {
          code: "341324",
          name: "泗县"
        }
      ],
      [
        {
          code: "341502",
          name: "金安区"
        },
        {
          code: "341503",
          name: "裕安区"
        },
        {
          code: "341504",
          name: "叶集区"
        },
        {
          code: "341522",
          name: "霍邱县"
        },
        {
          code: "341523",
          name: "舒城县"
        },
        {
          code: "341524",
          name: "金寨县"
        },
        {
          code: "341525",
          name: "霍山县"
        }
      ],
      [
        {
          code: "341602",
          name: "谯城区"
        },
        {
          code: "341621",
          name: "涡阳县"
        },
        {
          code: "341622",
          name: "蒙城县"
        },
        {
          code: "341623",
          name: "利辛县"
        }
      ],
      [
        {
          code: "341702",
          name: "贵池区"
        },
        {
          code: "341721",
          name: "东至县"
        },
        {
          code: "341722",
          name: "石台县"
        },
        {
          code: "341723",
          name: "青阳县"
        }
      ],
      [
        {
          code: "341802",
          name: "宣州区"
        },
        {
          code: "341821",
          name: "郎溪县"
        },
        {
          code: "341823",
          name: "泾县"
        },
        {
          code: "341824",
          name: "绩溪县"
        },
        {
          code: "341825",
          name: "旌德县"
        },
        {
          code: "341881",
          name: "宁国市"
        },
        {
          code: "341882",
          name: "广德市"
        }
      ]
    ],
    [
      [
        {
          code: "350102",
          name: "鼓楼区"
        },
        {
          code: "350103",
          name: "台江区"
        },
        {
          code: "350104",
          name: "仓山区"
        },
        {
          code: "350105",
          name: "马尾区"
        },
        {
          code: "350111",
          name: "晋安区"
        },
        {
          code: "350112",
          name: "长乐区"
        },
        {
          code: "350121",
          name: "闽侯县"
        },
        {
          code: "350122",
          name: "连江县"
        },
        {
          code: "350123",
          name: "罗源县"
        },
        {
          code: "350124",
          name: "闽清县"
        },
        {
          code: "350125",
          name: "永泰县"
        },
        {
          code: "350128",
          name: "平潭县"
        },
        {
          code: "350181",
          name: "福清市"
        }
      ],
      [
        {
          code: "350203",
          name: "思明区"
        },
        {
          code: "350205",
          name: "海沧区"
        },
        {
          code: "350206",
          name: "湖里区"
        },
        {
          code: "350211",
          name: "集美区"
        },
        {
          code: "350212",
          name: "同安区"
        },
        {
          code: "350213",
          name: "翔安区"
        }
      ],
      [
        {
          code: "350302",
          name: "城厢区"
        },
        {
          code: "350303",
          name: "涵江区"
        },
        {
          code: "350304",
          name: "荔城区"
        },
        {
          code: "350305",
          name: "秀屿区"
        },
        {
          code: "350322",
          name: "仙游县"
        }
      ],
      [
        {
          code: "350404",
          name: "三元区"
        },
        {
          code: "350405",
          name: "沙县区"
        },
        {
          code: "350421",
          name: "明溪县"
        },
        {
          code: "350423",
          name: "清流县"
        },
        {
          code: "350424",
          name: "宁化县"
        },
        {
          code: "350425",
          name: "大田县"
        },
        {
          code: "350426",
          name: "尤溪县"
        },
        {
          code: "350428",
          name: "将乐县"
        },
        {
          code: "350429",
          name: "泰宁县"
        },
        {
          code: "350430",
          name: "建宁县"
        },
        {
          code: "350481",
          name: "永安市"
        }
      ],
      [
        {
          code: "350502",
          name: "鲤城区"
        },
        {
          code: "350503",
          name: "丰泽区"
        },
        {
          code: "350504",
          name: "洛江区"
        },
        {
          code: "350505",
          name: "泉港区"
        },
        {
          code: "350521",
          name: "惠安县"
        },
        {
          code: "350524",
          name: "安溪县"
        },
        {
          code: "350525",
          name: "永春县"
        },
        {
          code: "350526",
          name: "德化县"
        },
        {
          code: "350527",
          name: "金门县"
        },
        {
          code: "350581",
          name: "石狮市"
        },
        {
          code: "350582",
          name: "晋江市"
        },
        {
          code: "350583",
          name: "南安市"
        }
      ],
      [
        {
          code: "350602",
          name: "芗城区"
        },
        {
          code: "350603",
          name: "龙文区"
        },
        {
          code: "350604",
          name: "龙海区"
        },
        {
          code: "350605",
          name: "长泰区"
        },
        {
          code: "350622",
          name: "云霄县"
        },
        {
          code: "350623",
          name: "漳浦县"
        },
        {
          code: "350624",
          name: "诏安县"
        },
        {
          code: "350626",
          name: "东山县"
        },
        {
          code: "350627",
          name: "南靖县"
        },
        {
          code: "350628",
          name: "平和县"
        },
        {
          code: "350629",
          name: "华安县"
        }
      ],
      [
        {
          code: "350702",
          name: "延平区"
        },
        {
          code: "350703",
          name: "建阳区"
        },
        {
          code: "350721",
          name: "顺昌县"
        },
        {
          code: "350722",
          name: "浦城县"
        },
        {
          code: "350723",
          name: "光泽县"
        },
        {
          code: "350724",
          name: "松溪县"
        },
        {
          code: "350725",
          name: "政和县"
        },
        {
          code: "350781",
          name: "邵武市"
        },
        {
          code: "350782",
          name: "武夷山市"
        },
        {
          code: "350783",
          name: "建瓯市"
        }
      ],
      [
        {
          code: "350802",
          name: "新罗区"
        },
        {
          code: "350803",
          name: "永定区"
        },
        {
          code: "350821",
          name: "长汀县"
        },
        {
          code: "350823",
          name: "上杭县"
        },
        {
          code: "350824",
          name: "武平县"
        },
        {
          code: "350825",
          name: "连城县"
        },
        {
          code: "350881",
          name: "漳平市"
        }
      ],
      [
        {
          code: "350902",
          name: "蕉城区"
        },
        {
          code: "350921",
          name: "霞浦县"
        },
        {
          code: "350922",
          name: "古田县"
        },
        {
          code: "350923",
          name: "屏南县"
        },
        {
          code: "350924",
          name: "寿宁县"
        },
        {
          code: "350925",
          name: "周宁县"
        },
        {
          code: "350926",
          name: "柘荣县"
        },
        {
          code: "350981",
          name: "福安市"
        },
        {
          code: "350982",
          name: "福鼎市"
        }
      ]
    ],
    [
      [
        {
          code: "360102",
          name: "东湖区"
        },
        {
          code: "360103",
          name: "西湖区"
        },
        {
          code: "360104",
          name: "青云谱区"
        },
        {
          code: "360111",
          name: "青山湖区"
        },
        {
          code: "360112",
          name: "新建区"
        },
        {
          code: "360113",
          name: "红谷滩区"
        },
        {
          code: "360121",
          name: "南昌县"
        },
        {
          code: "360123",
          name: "安义县"
        },
        {
          code: "360124",
          name: "进贤县"
        }
      ],
      [
        {
          code: "360202",
          name: "昌江区"
        },
        {
          code: "360203",
          name: "珠山区"
        },
        {
          code: "360222",
          name: "浮梁县"
        },
        {
          code: "360281",
          name: "乐平市"
        }
      ],
      [
        {
          code: "360302",
          name: "安源区"
        },
        {
          code: "360313",
          name: "湘东区"
        },
        {
          code: "360321",
          name: "莲花县"
        },
        {
          code: "360322",
          name: "上栗县"
        },
        {
          code: "360323",
          name: "芦溪县"
        }
      ],
      [
        {
          code: "360402",
          name: "濂溪区"
        },
        {
          code: "360403",
          name: "浔阳区"
        },
        {
          code: "360404",
          name: "柴桑区"
        },
        {
          code: "360423",
          name: "武宁县"
        },
        {
          code: "360424",
          name: "修水县"
        },
        {
          code: "360425",
          name: "永修县"
        },
        {
          code: "360426",
          name: "德安县"
        },
        {
          code: "360428",
          name: "都昌县"
        },
        {
          code: "360429",
          name: "湖口县"
        },
        {
          code: "360430",
          name: "彭泽县"
        },
        {
          code: "360481",
          name: "瑞昌市"
        },
        {
          code: "360482",
          name: "共青城市"
        },
        {
          code: "360483",
          name: "庐山市"
        }
      ],
      [
        {
          code: "360502",
          name: "渝水区"
        },
        {
          code: "360521",
          name: "分宜县"
        }
      ],
      [
        {
          code: "360602",
          name: "月湖区"
        },
        {
          code: "360603",
          name: "余江区"
        },
        {
          code: "360681",
          name: "贵溪市"
        }
      ],
      [
        {
          code: "360702",
          name: "章贡区"
        },
        {
          code: "360703",
          name: "南康区"
        },
        {
          code: "360704",
          name: "赣县区"
        },
        {
          code: "360722",
          name: "信丰县"
        },
        {
          code: "360723",
          name: "大余县"
        },
        {
          code: "360724",
          name: "上犹县"
        },
        {
          code: "360725",
          name: "崇义县"
        },
        {
          code: "360726",
          name: "安远县"
        },
        {
          code: "360728",
          name: "定南县"
        },
        {
          code: "360729",
          name: "全南县"
        },
        {
          code: "360730",
          name: "宁都县"
        },
        {
          code: "360731",
          name: "于都县"
        },
        {
          code: "360732",
          name: "兴国县"
        },
        {
          code: "360733",
          name: "会昌县"
        },
        {
          code: "360734",
          name: "寻乌县"
        },
        {
          code: "360735",
          name: "石城县"
        },
        {
          code: "360781",
          name: "瑞金市"
        },
        {
          code: "360783",
          name: "龙南市"
        }
      ],
      [
        {
          code: "360802",
          name: "吉州区"
        },
        {
          code: "360803",
          name: "青原区"
        },
        {
          code: "360821",
          name: "吉安县"
        },
        {
          code: "360822",
          name: "吉水县"
        },
        {
          code: "360823",
          name: "峡江县"
        },
        {
          code: "360824",
          name: "新干县"
        },
        {
          code: "360825",
          name: "永丰县"
        },
        {
          code: "360826",
          name: "泰和县"
        },
        {
          code: "360827",
          name: "遂川县"
        },
        {
          code: "360828",
          name: "万安县"
        },
        {
          code: "360829",
          name: "安福县"
        },
        {
          code: "360830",
          name: "永新县"
        },
        {
          code: "360881",
          name: "井冈山市"
        }
      ],
      [
        {
          code: "360902",
          name: "袁州区"
        },
        {
          code: "360921",
          name: "奉新县"
        },
        {
          code: "360922",
          name: "万载县"
        },
        {
          code: "360923",
          name: "上高县"
        },
        {
          code: "360924",
          name: "宜丰县"
        },
        {
          code: "360925",
          name: "靖安县"
        },
        {
          code: "360926",
          name: "铜鼓县"
        },
        {
          code: "360981",
          name: "丰城市"
        },
        {
          code: "360982",
          name: "樟树市"
        },
        {
          code: "360983",
          name: "高安市"
        }
      ],
      [
        {
          code: "361002",
          name: "临川区"
        },
        {
          code: "361003",
          name: "东乡区"
        },
        {
          code: "361021",
          name: "南城县"
        },
        {
          code: "361022",
          name: "黎川县"
        },
        {
          code: "361023",
          name: "南丰县"
        },
        {
          code: "361024",
          name: "崇仁县"
        },
        {
          code: "361025",
          name: "乐安县"
        },
        {
          code: "361026",
          name: "宜黄县"
        },
        {
          code: "361027",
          name: "金溪县"
        },
        {
          code: "361028",
          name: "资溪县"
        },
        {
          code: "361030",
          name: "广昌县"
        }
      ],
      [
        {
          code: "361102",
          name: "信州区"
        },
        {
          code: "361103",
          name: "广丰区"
        },
        {
          code: "361104",
          name: "广信区"
        },
        {
          code: "361123",
          name: "玉山县"
        },
        {
          code: "361124",
          name: "铅山县"
        },
        {
          code: "361125",
          name: "横峰县"
        },
        {
          code: "361126",
          name: "弋阳县"
        },
        {
          code: "361127",
          name: "余干县"
        },
        {
          code: "361128",
          name: "鄱阳县"
        },
        {
          code: "361129",
          name: "万年县"
        },
        {
          code: "361130",
          name: "婺源县"
        },
        {
          code: "361181",
          name: "德兴市"
        }
      ]
    ],
    [
      [
        {
          code: "370102",
          name: "历下区"
        },
        {
          code: "370103",
          name: "市中区"
        },
        {
          code: "370104",
          name: "槐荫区"
        },
        {
          code: "370105",
          name: "天桥区"
        },
        {
          code: "370112",
          name: "历城区"
        },
        {
          code: "370113",
          name: "长清区"
        },
        {
          code: "370114",
          name: "章丘区"
        },
        {
          code: "370115",
          name: "济阳区"
        },
        {
          code: "370116",
          name: "莱芜区"
        },
        {
          code: "370117",
          name: "钢城区"
        },
        {
          code: "370124",
          name: "平阴县"
        },
        {
          code: "370126",
          name: "商河县"
        }
      ],
      [
        {
          code: "370202",
          name: "市南区"
        },
        {
          code: "370203",
          name: "市北区"
        },
        {
          code: "370211",
          name: "黄岛区"
        },
        {
          code: "370212",
          name: "崂山区"
        },
        {
          code: "370213",
          name: "李沧区"
        },
        {
          code: "370214",
          name: "城阳区"
        },
        {
          code: "370215",
          name: "即墨区"
        },
        {
          code: "370281",
          name: "胶州市"
        },
        {
          code: "370283",
          name: "平度市"
        },
        {
          code: "370285",
          name: "莱西市"
        }
      ],
      [
        {
          code: "370302",
          name: "淄川区"
        },
        {
          code: "370303",
          name: "张店区"
        },
        {
          code: "370304",
          name: "博山区"
        },
        {
          code: "370305",
          name: "临淄区"
        },
        {
          code: "370306",
          name: "周村区"
        },
        {
          code: "370321",
          name: "桓台县"
        },
        {
          code: "370322",
          name: "高青县"
        },
        {
          code: "370323",
          name: "沂源县"
        }
      ],
      [
        {
          code: "370402",
          name: "市中区"
        },
        {
          code: "370403",
          name: "薛城区"
        },
        {
          code: "370404",
          name: "峄城区"
        },
        {
          code: "370405",
          name: "台儿庄区"
        },
        {
          code: "370406",
          name: "山亭区"
        },
        {
          code: "370481",
          name: "滕州市"
        }
      ],
      [
        {
          code: "370502",
          name: "东营区"
        },
        {
          code: "370503",
          name: "河口区"
        },
        {
          code: "370505",
          name: "垦利区"
        },
        {
          code: "370522",
          name: "利津县"
        },
        {
          code: "370523",
          name: "广饶县"
        }
      ],
      [
        {
          code: "370602",
          name: "芝罘区"
        },
        {
          code: "370611",
          name: "福山区"
        },
        {
          code: "370612",
          name: "牟平区"
        },
        {
          code: "370613",
          name: "莱山区"
        },
        {
          code: "370614",
          name: "蓬莱区"
        },
        {
          code: "370681",
          name: "龙口市"
        },
        {
          code: "370682",
          name: "莱阳市"
        },
        {
          code: "370683",
          name: "莱州市"
        },
        {
          code: "370685",
          name: "招远市"
        },
        {
          code: "370686",
          name: "栖霞市"
        },
        {
          code: "370687",
          name: "海阳市"
        }
      ],
      [
        {
          code: "370702",
          name: "潍城区"
        },
        {
          code: "370703",
          name: "寒亭区"
        },
        {
          code: "370704",
          name: "坊子区"
        },
        {
          code: "370705",
          name: "奎文区"
        },
        {
          code: "370724",
          name: "临朐县"
        },
        {
          code: "370725",
          name: "昌乐县"
        },
        {
          code: "370781",
          name: "青州市"
        },
        {
          code: "370782",
          name: "诸城市"
        },
        {
          code: "370783",
          name: "寿光市"
        },
        {
          code: "370784",
          name: "安丘市"
        },
        {
          code: "370785",
          name: "高密市"
        },
        {
          code: "370786",
          name: "昌邑市"
        }
      ],
      [
        {
          code: "370811",
          name: "任城区"
        },
        {
          code: "370812",
          name: "兖州区"
        },
        {
          code: "370826",
          name: "微山县"
        },
        {
          code: "370827",
          name: "鱼台县"
        },
        {
          code: "370828",
          name: "金乡县"
        },
        {
          code: "370829",
          name: "嘉祥县"
        },
        {
          code: "370830",
          name: "汶上县"
        },
        {
          code: "370831",
          name: "泗水县"
        },
        {
          code: "370832",
          name: "梁山县"
        },
        {
          code: "370881",
          name: "曲阜市"
        },
        {
          code: "370883",
          name: "邹城市"
        }
      ],
      [
        {
          code: "370902",
          name: "泰山区"
        },
        {
          code: "370911",
          name: "岱岳区"
        },
        {
          code: "370921",
          name: "宁阳县"
        },
        {
          code: "370923",
          name: "东平县"
        },
        {
          code: "370982",
          name: "新泰市"
        },
        {
          code: "370983",
          name: "肥城市"
        }
      ],
      [
        {
          code: "371002",
          name: "环翠区"
        },
        {
          code: "371003",
          name: "文登区"
        },
        {
          code: "371082",
          name: "荣成市"
        },
        {
          code: "371083",
          name: "乳山市"
        }
      ],
      [
        {
          code: "371102",
          name: "东港区"
        },
        {
          code: "371103",
          name: "岚山区"
        },
        {
          code: "371121",
          name: "五莲县"
        },
        {
          code: "371122",
          name: "莒县"
        }
      ],
      [
        {
          code: "371302",
          name: "兰山区"
        },
        {
          code: "371311",
          name: "罗庄区"
        },
        {
          code: "371312",
          name: "河东区"
        },
        {
          code: "371321",
          name: "沂南县"
        },
        {
          code: "371322",
          name: "郯城县"
        },
        {
          code: "371323",
          name: "沂水县"
        },
        {
          code: "371324",
          name: "兰陵县"
        },
        {
          code: "371325",
          name: "费县"
        },
        {
          code: "371326",
          name: "平邑县"
        },
        {
          code: "371327",
          name: "莒南县"
        },
        {
          code: "371328",
          name: "蒙阴县"
        },
        {
          code: "371329",
          name: "临沭县"
        }
      ],
      [
        {
          code: "371402",
          name: "德城区"
        },
        {
          code: "371403",
          name: "陵城区"
        },
        {
          code: "371422",
          name: "宁津县"
        },
        {
          code: "371423",
          name: "庆云县"
        },
        {
          code: "371424",
          name: "临邑县"
        },
        {
          code: "371425",
          name: "齐河县"
        },
        {
          code: "371426",
          name: "平原县"
        },
        {
          code: "371427",
          name: "夏津县"
        },
        {
          code: "371428",
          name: "武城县"
        },
        {
          code: "371481",
          name: "乐陵市"
        },
        {
          code: "371482",
          name: "禹城市"
        }
      ],
      [
        {
          code: "371502",
          name: "东昌府区"
        },
        {
          code: "371503",
          name: "茌平区"
        },
        {
          code: "371521",
          name: "阳谷县"
        },
        {
          code: "371522",
          name: "莘县"
        },
        {
          code: "371524",
          name: "东阿县"
        },
        {
          code: "371525",
          name: "冠县"
        },
        {
          code: "371526",
          name: "高唐县"
        },
        {
          code: "371581",
          name: "临清市"
        }
      ],
      [
        {
          code: "371602",
          name: "滨城区"
        },
        {
          code: "371603",
          name: "沾化区"
        },
        {
          code: "371621",
          name: "惠民县"
        },
        {
          code: "371622",
          name: "阳信县"
        },
        {
          code: "371623",
          name: "无棣县"
        },
        {
          code: "371625",
          name: "博兴县"
        },
        {
          code: "371681",
          name: "邹平市"
        }
      ],
      [
        {
          code: "371702",
          name: "牡丹区"
        },
        {
          code: "371703",
          name: "定陶区"
        },
        {
          code: "371721",
          name: "曹县"
        },
        {
          code: "371722",
          name: "单县"
        },
        {
          code: "371723",
          name: "成武县"
        },
        {
          code: "371724",
          name: "巨野县"
        },
        {
          code: "371725",
          name: "郓城县"
        },
        {
          code: "371726",
          name: "鄄城县"
        },
        {
          code: "371728",
          name: "东明县"
        }
      ]
    ],
    [
      [
        {
          code: "410102",
          name: "中原区"
        },
        {
          code: "410103",
          name: "二七区"
        },
        {
          code: "410104",
          name: "管城回族区"
        },
        {
          code: "410105",
          name: "金水区"
        },
        {
          code: "410106",
          name: "上街区"
        },
        {
          code: "410108",
          name: "惠济区"
        },
        {
          code: "410122",
          name: "中牟县"
        },
        {
          code: "410181",
          name: "巩义市"
        },
        {
          code: "410182",
          name: "荥阳市"
        },
        {
          code: "410183",
          name: "新密市"
        },
        {
          code: "410184",
          name: "新郑市"
        },
        {
          code: "410185",
          name: "登封市"
        }
      ],
      [
        {
          code: "410202",
          name: "龙亭区"
        },
        {
          code: "410203",
          name: "顺河回族区"
        },
        {
          code: "410204",
          name: "鼓楼区"
        },
        {
          code: "410205",
          name: "禹王台区"
        },
        {
          code: "410212",
          name: "祥符区"
        },
        {
          code: "410221",
          name: "杞县"
        },
        {
          code: "410222",
          name: "通许县"
        },
        {
          code: "410223",
          name: "尉氏县"
        },
        {
          code: "410225",
          name: "兰考县"
        }
      ],
      [
        {
          code: "410302",
          name: "老城区"
        },
        {
          code: "410303",
          name: "西工区"
        },
        {
          code: "410304",
          name: "瀍河回族区"
        },
        {
          code: "410305",
          name: "涧西区"
        },
        {
          code: "410307",
          name: "偃师区"
        },
        {
          code: "410308",
          name: "孟津区"
        },
        {
          code: "410311",
          name: "洛龙区"
        },
        {
          code: "410323",
          name: "新安县"
        },
        {
          code: "410324",
          name: "栾川县"
        },
        {
          code: "410325",
          name: "嵩县"
        },
        {
          code: "410326",
          name: "汝阳县"
        },
        {
          code: "410327",
          name: "宜阳县"
        },
        {
          code: "410328",
          name: "洛宁县"
        },
        {
          code: "410329",
          name: "伊川县"
        }
      ],
      [
        {
          code: "410402",
          name: "新华区"
        },
        {
          code: "410403",
          name: "卫东区"
        },
        {
          code: "410404",
          name: "石龙区"
        },
        {
          code: "410411",
          name: "湛河区"
        },
        {
          code: "410421",
          name: "宝丰县"
        },
        {
          code: "410422",
          name: "叶县"
        },
        {
          code: "410423",
          name: "鲁山县"
        },
        {
          code: "410425",
          name: "郏县"
        },
        {
          code: "410481",
          name: "舞钢市"
        },
        {
          code: "410482",
          name: "汝州市"
        }
      ],
      [
        {
          code: "410502",
          name: "文峰区"
        },
        {
          code: "410503",
          name: "北关区"
        },
        {
          code: "410505",
          name: "殷都区"
        },
        {
          code: "410506",
          name: "龙安区"
        },
        {
          code: "410522",
          name: "安阳县"
        },
        {
          code: "410523",
          name: "汤阴县"
        },
        {
          code: "410526",
          name: "滑县"
        },
        {
          code: "410527",
          name: "内黄县"
        },
        {
          code: "410581",
          name: "林州市"
        }
      ],
      [
        {
          code: "410602",
          name: "鹤山区"
        },
        {
          code: "410603",
          name: "山城区"
        },
        {
          code: "410611",
          name: "淇滨区"
        },
        {
          code: "410621",
          name: "浚县"
        },
        {
          code: "410622",
          name: "淇县"
        }
      ],
      [
        {
          code: "410702",
          name: "红旗区"
        },
        {
          code: "410703",
          name: "卫滨区"
        },
        {
          code: "410704",
          name: "凤泉区"
        },
        {
          code: "410711",
          name: "牧野区"
        },
        {
          code: "410721",
          name: "新乡县"
        },
        {
          code: "410724",
          name: "获嘉县"
        },
        {
          code: "410725",
          name: "原阳县"
        },
        {
          code: "410726",
          name: "延津县"
        },
        {
          code: "410727",
          name: "封丘县"
        },
        {
          code: "410781",
          name: "卫辉市"
        },
        {
          code: "410782",
          name: "辉县市"
        },
        {
          code: "410783",
          name: "长垣市"
        }
      ],
      [
        {
          code: "410802",
          name: "解放区"
        },
        {
          code: "410803",
          name: "中站区"
        },
        {
          code: "410804",
          name: "马村区"
        },
        {
          code: "410811",
          name: "山阳区"
        },
        {
          code: "410821",
          name: "修武县"
        },
        {
          code: "410822",
          name: "博爱县"
        },
        {
          code: "410823",
          name: "武陟县"
        },
        {
          code: "410825",
          name: "温县"
        },
        {
          code: "410882",
          name: "沁阳市"
        },
        {
          code: "410883",
          name: "孟州市"
        }
      ],
      [
        {
          code: "410902",
          name: "华龙区"
        },
        {
          code: "410922",
          name: "清丰县"
        },
        {
          code: "410923",
          name: "南乐县"
        },
        {
          code: "410926",
          name: "范县"
        },
        {
          code: "410927",
          name: "台前县"
        },
        {
          code: "410928",
          name: "濮阳县"
        }
      ],
      [
        {
          code: "411002",
          name: "魏都区"
        },
        {
          code: "411003",
          name: "建安区"
        },
        {
          code: "411024",
          name: "鄢陵县"
        },
        {
          code: "411025",
          name: "襄城县"
        },
        {
          code: "411081",
          name: "禹州市"
        },
        {
          code: "411082",
          name: "长葛市"
        }
      ],
      [
        {
          code: "411102",
          name: "源汇区"
        },
        {
          code: "411103",
          name: "郾城区"
        },
        {
          code: "411104",
          name: "召陵区"
        },
        {
          code: "411121",
          name: "舞阳县"
        },
        {
          code: "411122",
          name: "临颍县"
        }
      ],
      [
        {
          code: "411202",
          name: "湖滨区"
        },
        {
          code: "411203",
          name: "陕州区"
        },
        {
          code: "411221",
          name: "渑池县"
        },
        {
          code: "411224",
          name: "卢氏县"
        },
        {
          code: "411281",
          name: "义马市"
        },
        {
          code: "411282",
          name: "灵宝市"
        }
      ],
      [
        {
          code: "411302",
          name: "宛城区"
        },
        {
          code: "411303",
          name: "卧龙区"
        },
        {
          code: "411321",
          name: "南召县"
        },
        {
          code: "411322",
          name: "方城县"
        },
        {
          code: "411323",
          name: "西峡县"
        },
        {
          code: "411324",
          name: "镇平县"
        },
        {
          code: "411325",
          name: "内乡县"
        },
        {
          code: "411326",
          name: "淅川县"
        },
        {
          code: "411327",
          name: "社旗县"
        },
        {
          code: "411328",
          name: "唐河县"
        },
        {
          code: "411329",
          name: "新野县"
        },
        {
          code: "411330",
          name: "桐柏县"
        },
        {
          code: "411381",
          name: "邓州市"
        }
      ],
      [
        {
          code: "411402",
          name: "梁园区"
        },
        {
          code: "411403",
          name: "睢阳区"
        },
        {
          code: "411421",
          name: "民权县"
        },
        {
          code: "411422",
          name: "睢县"
        },
        {
          code: "411423",
          name: "宁陵县"
        },
        {
          code: "411424",
          name: "柘城县"
        },
        {
          code: "411425",
          name: "虞城县"
        },
        {
          code: "411426",
          name: "夏邑县"
        },
        {
          code: "411481",
          name: "永城市"
        }
      ],
      [
        {
          code: "411502",
          name: "浉河区"
        },
        {
          code: "411503",
          name: "平桥区"
        },
        {
          code: "411521",
          name: "罗山县"
        },
        {
          code: "411522",
          name: "光山县"
        },
        {
          code: "411523",
          name: "新县"
        },
        {
          code: "411524",
          name: "商城县"
        },
        {
          code: "411525",
          name: "固始县"
        },
        {
          code: "411526",
          name: "潢川县"
        },
        {
          code: "411527",
          name: "淮滨县"
        },
        {
          code: "411528",
          name: "息县"
        }
      ],
      [
        {
          code: "411602",
          name: "川汇区"
        },
        {
          code: "411603",
          name: "淮阳区"
        },
        {
          code: "411621",
          name: "扶沟县"
        },
        {
          code: "411622",
          name: "西华县"
        },
        {
          code: "411623",
          name: "商水县"
        },
        {
          code: "411624",
          name: "沈丘县"
        },
        {
          code: "411625",
          name: "郸城县"
        },
        {
          code: "411627",
          name: "太康县"
        },
        {
          code: "411628",
          name: "鹿邑县"
        },
        {
          code: "411681",
          name: "项城市"
        }
      ],
      [
        {
          code: "411702",
          name: "驿城区"
        },
        {
          code: "411721",
          name: "西平县"
        },
        {
          code: "411722",
          name: "上蔡县"
        },
        {
          code: "411723",
          name: "平舆县"
        },
        {
          code: "411724",
          name: "正阳县"
        },
        {
          code: "411725",
          name: "确山县"
        },
        {
          code: "411726",
          name: "泌阳县"
        },
        {
          code: "411727",
          name: "汝南县"
        },
        {
          code: "411728",
          name: "遂平县"
        },
        {
          code: "411729",
          name: "新蔡县"
        }
      ],
      [
        {
          code: "41900101",
          name: "济源市"
        }
      ]
    ],
    [
      [
        {
          code: "420102",
          name: "江岸区"
        },
        {
          code: "420103",
          name: "江汉区"
        },
        {
          code: "420104",
          name: "硚口区"
        },
        {
          code: "420105",
          name: "汉阳区"
        },
        {
          code: "420106",
          name: "武昌区"
        },
        {
          code: "420107",
          name: "青山区"
        },
        {
          code: "420111",
          name: "洪山区"
        },
        {
          code: "420112",
          name: "东西湖区"
        },
        {
          code: "420113",
          name: "汉南区"
        },
        {
          code: "420114",
          name: "蔡甸区"
        },
        {
          code: "420115",
          name: "江夏区"
        },
        {
          code: "420116",
          name: "黄陂区"
        },
        {
          code: "420117",
          name: "新洲区"
        }
      ],
      [
        {
          code: "420202",
          name: "黄石港区"
        },
        {
          code: "420203",
          name: "西塞山区"
        },
        {
          code: "420204",
          name: "下陆区"
        },
        {
          code: "420205",
          name: "铁山区"
        },
        {
          code: "420222",
          name: "阳新县"
        },
        {
          code: "420281",
          name: "大冶市"
        }
      ],
      [
        {
          code: "420302",
          name: "茅箭区"
        },
        {
          code: "420303",
          name: "张湾区"
        },
        {
          code: "420304",
          name: "郧阳区"
        },
        {
          code: "420322",
          name: "郧西县"
        },
        {
          code: "420323",
          name: "竹山县"
        },
        {
          code: "420324",
          name: "竹溪县"
        },
        {
          code: "420325",
          name: "房县"
        },
        {
          code: "420381",
          name: "丹江口市"
        }
      ],
      [
        {
          code: "420502",
          name: "西陵区"
        },
        {
          code: "420503",
          name: "伍家岗区"
        },
        {
          code: "420504",
          name: "点军区"
        },
        {
          code: "420505",
          name: "猇亭区"
        },
        {
          code: "420506",
          name: "夷陵区"
        },
        {
          code: "420525",
          name: "远安县"
        },
        {
          code: "420526",
          name: "兴山县"
        },
        {
          code: "420527",
          name: "秭归县"
        },
        {
          code: "420528",
          name: "长阳土家族自治县"
        },
        {
          code: "420529",
          name: "五峰土家族自治县"
        },
        {
          code: "420581",
          name: "宜都市"
        },
        {
          code: "420582",
          name: "当阳市"
        },
        {
          code: "420583",
          name: "枝江市"
        }
      ],
      [
        {
          code: "420602",
          name: "襄城区"
        },
        {
          code: "420606",
          name: "樊城区"
        },
        {
          code: "420607",
          name: "襄州区"
        },
        {
          code: "420624",
          name: "南漳县"
        },
        {
          code: "420625",
          name: "谷城县"
        },
        {
          code: "420626",
          name: "保康县"
        },
        {
          code: "420682",
          name: "老河口市"
        },
        {
          code: "420683",
          name: "枣阳市"
        },
        {
          code: "420684",
          name: "宜城市"
        }
      ],
      [
        {
          code: "420702",
          name: "梁子湖区"
        },
        {
          code: "420703",
          name: "华容区"
        },
        {
          code: "420704",
          name: "鄂城区"
        }
      ],
      [
        {
          code: "420802",
          name: "东宝区"
        },
        {
          code: "420804",
          name: "掇刀区"
        },
        {
          code: "420822",
          name: "沙洋县"
        },
        {
          code: "420881",
          name: "钟祥市"
        },
        {
          code: "420882",
          name: "京山市"
        }
      ],
      [
        {
          code: "420902",
          name: "孝南区"
        },
        {
          code: "420921",
          name: "孝昌县"
        },
        {
          code: "420922",
          name: "大悟县"
        },
        {
          code: "420923",
          name: "云梦县"
        },
        {
          code: "420981",
          name: "应城市"
        },
        {
          code: "420982",
          name: "安陆市"
        },
        {
          code: "420984",
          name: "汉川市"
        }
      ],
      [
        {
          code: "421002",
          name: "沙市区"
        },
        {
          code: "421003",
          name: "荆州区"
        },
        {
          code: "421022",
          name: "公安县"
        },
        {
          code: "421024",
          name: "江陵县"
        },
        {
          code: "421081",
          name: "石首市"
        },
        {
          code: "421083",
          name: "洪湖市"
        },
        {
          code: "421087",
          name: "松滋市"
        },
        {
          code: "421088",
          name: "监利市"
        }
      ],
      [
        {
          code: "421102",
          name: "黄州区"
        },
        {
          code: "421121",
          name: "团风县"
        },
        {
          code: "421122",
          name: "红安县"
        },
        {
          code: "421123",
          name: "罗田县"
        },
        {
          code: "421124",
          name: "英山县"
        },
        {
          code: "421125",
          name: "浠水县"
        },
        {
          code: "421126",
          name: "蕲春县"
        },
        {
          code: "421127",
          name: "黄梅县"
        },
        {
          code: "421181",
          name: "麻城市"
        },
        {
          code: "421182",
          name: "武穴市"
        }
      ],
      [
        {
          code: "421202",
          name: "咸安区"
        },
        {
          code: "421221",
          name: "嘉鱼县"
        },
        {
          code: "421222",
          name: "通城县"
        },
        {
          code: "421223",
          name: "崇阳县"
        },
        {
          code: "421224",
          name: "通山县"
        },
        {
          code: "421281",
          name: "赤壁市"
        }
      ],
      [
        {
          code: "421303",
          name: "曾都区"
        },
        {
          code: "421321",
          name: "随县"
        },
        {
          code: "421381",
          name: "广水市"
        }
      ],
      [
        {
          code: "422801",
          name: "恩施市"
        },
        {
          code: "422802",
          name: "利川市"
        },
        {
          code: "422822",
          name: "建始县"
        },
        {
          code: "422823",
          name: "巴东县"
        },
        {
          code: "422825",
          name: "宣恩县"
        },
        {
          code: "422826",
          name: "咸丰县"
        },
        {
          code: "422827",
          name: "来凤县"
        },
        {
          code: "422828",
          name: "鹤峰县"
        }
      ],
      [
        {
          code: "42900401",
          name: "仙桃市"
        }
      ],
      [
        {
          code: "42900501",
          name: "潜江市"
        }
      ],
      [
        {
          code: "42900601",
          name: "天门市"
        }
      ],
      [
        {
          code: "42902101",
          name: "神农架林区"
        }
      ]
    ],
    [
      [
        {
          code: "430102",
          name: "芙蓉区"
        },
        {
          code: "430103",
          name: "天心区"
        },
        {
          code: "430104",
          name: "岳麓区"
        },
        {
          code: "430105",
          name: "开福区"
        },
        {
          code: "430111",
          name: "雨花区"
        },
        {
          code: "430112",
          name: "望城区"
        },
        {
          code: "430121",
          name: "长沙县"
        },
        {
          code: "430181",
          name: "浏阳市"
        },
        {
          code: "430182",
          name: "宁乡市"
        }
      ],
      [
        {
          code: "430202",
          name: "荷塘区"
        },
        {
          code: "430203",
          name: "芦淞区"
        },
        {
          code: "430204",
          name: "石峰区"
        },
        {
          code: "430211",
          name: "天元区"
        },
        {
          code: "430212",
          name: "渌口区"
        },
        {
          code: "430223",
          name: "攸县"
        },
        {
          code: "430224",
          name: "茶陵县"
        },
        {
          code: "430225",
          name: "炎陵县"
        },
        {
          code: "430281",
          name: "醴陵市"
        }
      ],
      [
        {
          code: "430302",
          name: "雨湖区"
        },
        {
          code: "430304",
          name: "岳塘区"
        },
        {
          code: "430321",
          name: "湘潭县"
        },
        {
          code: "430381",
          name: "湘乡市"
        },
        {
          code: "430382",
          name: "韶山市"
        }
      ],
      [
        {
          code: "430405",
          name: "珠晖区"
        },
        {
          code: "430406",
          name: "雁峰区"
        },
        {
          code: "430407",
          name: "石鼓区"
        },
        {
          code: "430408",
          name: "蒸湘区"
        },
        {
          code: "430412",
          name: "南岳区"
        },
        {
          code: "430421",
          name: "衡阳县"
        },
        {
          code: "430422",
          name: "衡南县"
        },
        {
          code: "430423",
          name: "衡山县"
        },
        {
          code: "430424",
          name: "衡东县"
        },
        {
          code: "430426",
          name: "祁东县"
        },
        {
          code: "430481",
          name: "耒阳市"
        },
        {
          code: "430482",
          name: "常宁市"
        }
      ],
      [
        {
          code: "430502",
          name: "双清区"
        },
        {
          code: "430503",
          name: "大祥区"
        },
        {
          code: "430511",
          name: "北塔区"
        },
        {
          code: "430522",
          name: "新邵县"
        },
        {
          code: "430523",
          name: "邵阳县"
        },
        {
          code: "430524",
          name: "隆回县"
        },
        {
          code: "430525",
          name: "洞口县"
        },
        {
          code: "430527",
          name: "绥宁县"
        },
        {
          code: "430528",
          name: "新宁县"
        },
        {
          code: "430529",
          name: "城步苗族自治县"
        },
        {
          code: "430581",
          name: "武冈市"
        },
        {
          code: "430582",
          name: "邵东市"
        }
      ],
      [
        {
          code: "430602",
          name: "岳阳楼区"
        },
        {
          code: "430603",
          name: "云溪区"
        },
        {
          code: "430611",
          name: "君山区"
        },
        {
          code: "430621",
          name: "岳阳县"
        },
        {
          code: "430623",
          name: "华容县"
        },
        {
          code: "430624",
          name: "湘阴县"
        },
        {
          code: "430626",
          name: "平江县"
        },
        {
          code: "430681",
          name: "汨罗市"
        },
        {
          code: "430682",
          name: "临湘市"
        }
      ],
      [
        {
          code: "430702",
          name: "武陵区"
        },
        {
          code: "430703",
          name: "鼎城区"
        },
        {
          code: "430721",
          name: "安乡县"
        },
        {
          code: "430722",
          name: "汉寿县"
        },
        {
          code: "430723",
          name: "澧县"
        },
        {
          code: "430724",
          name: "临澧县"
        },
        {
          code: "430725",
          name: "桃源县"
        },
        {
          code: "430726",
          name: "石门县"
        },
        {
          code: "430781",
          name: "津市市"
        }
      ],
      [
        {
          code: "430802",
          name: "永定区"
        },
        {
          code: "430811",
          name: "武陵源区"
        },
        {
          code: "430821",
          name: "慈利县"
        },
        {
          code: "430822",
          name: "桑植县"
        }
      ],
      [
        {
          code: "430902",
          name: "资阳区"
        },
        {
          code: "430903",
          name: "赫山区"
        },
        {
          code: "430921",
          name: "南县"
        },
        {
          code: "430922",
          name: "桃江县"
        },
        {
          code: "430923",
          name: "安化县"
        },
        {
          code: "430981",
          name: "沅江市"
        }
      ],
      [
        {
          code: "431002",
          name: "北湖区"
        },
        {
          code: "431003",
          name: "苏仙区"
        },
        {
          code: "431021",
          name: "桂阳县"
        },
        {
          code: "431022",
          name: "宜章县"
        },
        {
          code: "431023",
          name: "永兴县"
        },
        {
          code: "431024",
          name: "嘉禾县"
        },
        {
          code: "431025",
          name: "临武县"
        },
        {
          code: "431026",
          name: "汝城县"
        },
        {
          code: "431027",
          name: "桂东县"
        },
        {
          code: "431028",
          name: "安仁县"
        },
        {
          code: "431081",
          name: "资兴市"
        }
      ],
      [
        {
          code: "431102",
          name: "零陵区"
        },
        {
          code: "431103",
          name: "冷水滩区"
        },
        {
          code: "431122",
          name: "东安县"
        },
        {
          code: "431123",
          name: "双牌县"
        },
        {
          code: "431124",
          name: "道县"
        },
        {
          code: "431125",
          name: "江永县"
        },
        {
          code: "431126",
          name: "宁远县"
        },
        {
          code: "431127",
          name: "蓝山县"
        },
        {
          code: "431128",
          name: "新田县"
        },
        {
          code: "431129",
          name: "江华瑶族自治县"
        },
        {
          code: "431181",
          name: "祁阳市"
        }
      ],
      [
        {
          code: "431202",
          name: "鹤城区"
        },
        {
          code: "431221",
          name: "中方县"
        },
        {
          code: "431222",
          name: "沅陵县"
        },
        {
          code: "431223",
          name: "辰溪县"
        },
        {
          code: "431224",
          name: "溆浦县"
        },
        {
          code: "431225",
          name: "会同县"
        },
        {
          code: "431226",
          name: "麻阳苗族自治县"
        },
        {
          code: "431227",
          name: "新晃侗族自治县"
        },
        {
          code: "431228",
          name: "芷江侗族自治县"
        },
        {
          code: "431229",
          name: "靖州苗族侗族自治县"
        },
        {
          code: "431230",
          name: "通道侗族自治县"
        },
        {
          code: "431281",
          name: "洪江市"
        }
      ],
      [
        {
          code: "431302",
          name: "娄星区"
        },
        {
          code: "431321",
          name: "双峰县"
        },
        {
          code: "431322",
          name: "新化县"
        },
        {
          code: "431381",
          name: "冷水江市"
        },
        {
          code: "431382",
          name: "涟源市"
        }
      ],
      [
        {
          code: "433101",
          name: "吉首市"
        },
        {
          code: "433122",
          name: "泸溪县"
        },
        {
          code: "433123",
          name: "凤凰县"
        },
        {
          code: "433124",
          name: "花垣县"
        },
        {
          code: "433125",
          name: "保靖县"
        },
        {
          code: "433126",
          name: "古丈县"
        },
        {
          code: "433127",
          name: "永顺县"
        },
        {
          code: "433130",
          name: "龙山县"
        }
      ]
    ],
    [
      [
        {
          code: "440103",
          name: "荔湾区"
        },
        {
          code: "440104",
          name: "越秀区"
        },
        {
          code: "440105",
          name: "海珠区"
        },
        {
          code: "440106",
          name: "天河区"
        },
        {
          code: "440111",
          name: "白云区"
        },
        {
          code: "440112",
          name: "黄埔区"
        },
        {
          code: "440113",
          name: "番禺区"
        },
        {
          code: "440114",
          name: "花都区"
        },
        {
          code: "440115",
          name: "南沙区"
        },
        {
          code: "440117",
          name: "从化区"
        },
        {
          code: "440118",
          name: "增城区"
        }
      ],
      [
        {
          code: "440203",
          name: "武江区"
        },
        {
          code: "440204",
          name: "浈江区"
        },
        {
          code: "440205",
          name: "曲江区"
        },
        {
          code: "440222",
          name: "始兴县"
        },
        {
          code: "440224",
          name: "仁化县"
        },
        {
          code: "440229",
          name: "翁源县"
        },
        {
          code: "440232",
          name: "乳源瑶族自治县"
        },
        {
          code: "440233",
          name: "新丰县"
        },
        {
          code: "440281",
          name: "乐昌市"
        },
        {
          code: "440282",
          name: "南雄市"
        }
      ],
      [
        {
          code: "440303",
          name: "罗湖区"
        },
        {
          code: "440304",
          name: "福田区"
        },
        {
          code: "440305",
          name: "南山区"
        },
        {
          code: "440306",
          name: "宝安区"
        },
        {
          code: "440307",
          name: "龙岗区"
        },
        {
          code: "440308",
          name: "盐田区"
        },
        {
          code: "440309",
          name: "龙华区"
        },
        {
          code: "440310",
          name: "坪山区"
        },
        {
          code: "440311",
          name: "光明区"
        }
      ],
      [
        {
          code: "440402",
          name: "香洲区"
        },
        {
          code: "440403",
          name: "斗门区"
        },
        {
          code: "440404",
          name: "金湾区"
        }
      ],
      [
        {
          code: "440507",
          name: "龙湖区"
        },
        {
          code: "440511",
          name: "金平区"
        },
        {
          code: "440512",
          name: "濠江区"
        },
        {
          code: "440513",
          name: "潮阳区"
        },
        {
          code: "440514",
          name: "潮南区"
        },
        {
          code: "440515",
          name: "澄海区"
        },
        {
          code: "440523",
          name: "南澳县"
        }
      ],
      [
        {
          code: "440604",
          name: "禅城区"
        },
        {
          code: "440605",
          name: "南海区"
        },
        {
          code: "440606",
          name: "顺德区"
        },
        {
          code: "440607",
          name: "三水区"
        },
        {
          code: "440608",
          name: "高明区"
        }
      ],
      [
        {
          code: "440703",
          name: "蓬江区"
        },
        {
          code: "440704",
          name: "江海区"
        },
        {
          code: "440705",
          name: "新会区"
        },
        {
          code: "440781",
          name: "台山市"
        },
        {
          code: "440783",
          name: "开平市"
        },
        {
          code: "440784",
          name: "鹤山市"
        },
        {
          code: "440785",
          name: "恩平市"
        }
      ],
      [
        {
          code: "440802",
          name: "赤坎区"
        },
        {
          code: "440803",
          name: "霞山区"
        },
        {
          code: "440804",
          name: "坡头区"
        },
        {
          code: "440811",
          name: "麻章区"
        },
        {
          code: "440823",
          name: "遂溪县"
        },
        {
          code: "440825",
          name: "徐闻县"
        },
        {
          code: "440881",
          name: "廉江市"
        },
        {
          code: "440882",
          name: "雷州市"
        },
        {
          code: "440883",
          name: "吴川市"
        }
      ],
      [
        {
          code: "440902",
          name: "茂南区"
        },
        {
          code: "440904",
          name: "电白区"
        },
        {
          code: "440981",
          name: "高州市"
        },
        {
          code: "440982",
          name: "化州市"
        },
        {
          code: "440983",
          name: "信宜市"
        }
      ],
      [
        {
          code: "441202",
          name: "端州区"
        },
        {
          code: "441203",
          name: "鼎湖区"
        },
        {
          code: "441204",
          name: "高要区"
        },
        {
          code: "441223",
          name: "广宁县"
        },
        {
          code: "441224",
          name: "怀集县"
        },
        {
          code: "441225",
          name: "封开县"
        },
        {
          code: "441226",
          name: "德庆县"
        },
        {
          code: "441284",
          name: "四会市"
        }
      ],
      [
        {
          code: "441302",
          name: "惠城区"
        },
        {
          code: "441303",
          name: "惠阳区"
        },
        {
          code: "441322",
          name: "博罗县"
        },
        {
          code: "441323",
          name: "惠东县"
        },
        {
          code: "441324",
          name: "龙门县"
        }
      ],
      [
        {
          code: "441402",
          name: "梅江区"
        },
        {
          code: "441403",
          name: "梅县区"
        },
        {
          code: "441422",
          name: "大埔县"
        },
        {
          code: "441423",
          name: "丰顺县"
        },
        {
          code: "441424",
          name: "五华县"
        },
        {
          code: "441426",
          name: "平远县"
        },
        {
          code: "441427",
          name: "蕉岭县"
        },
        {
          code: "441481",
          name: "兴宁市"
        }
      ],
      [
        {
          code: "441502",
          name: "城区"
        },
        {
          code: "441521",
          name: "海丰县"
        },
        {
          code: "441523",
          name: "陆河县"
        },
        {
          code: "441581",
          name: "陆丰市"
        }
      ],
      [
        {
          code: "441602",
          name: "源城区"
        },
        {
          code: "441621",
          name: "紫金县"
        },
        {
          code: "441622",
          name: "龙川县"
        },
        {
          code: "441623",
          name: "连平县"
        },
        {
          code: "441624",
          name: "和平县"
        },
        {
          code: "441625",
          name: "东源县"
        }
      ],
      [
        {
          code: "441702",
          name: "江城区"
        },
        {
          code: "441704",
          name: "阳东区"
        },
        {
          code: "441721",
          name: "阳西县"
        },
        {
          code: "441781",
          name: "阳春市"
        }
      ],
      [
        {
          code: "441802",
          name: "清城区"
        },
        {
          code: "441803",
          name: "清新区"
        },
        {
          code: "441821",
          name: "佛冈县"
        },
        {
          code: "441823",
          name: "阳山县"
        },
        {
          code: "441825",
          name: "连山壮族瑶族自治县"
        },
        {
          code: "441826",
          name: "连南瑶族自治县"
        },
        {
          code: "441881",
          name: "英德市"
        },
        {
          code: "441882",
          name: "连州市"
        }
      ],
      [
        {
          code: "441999",
          name: "东莞市"
        }
      ],
      [
        {
          code: "442099",
          name: "中山市"
        }
      ],
      [
        {
          code: "445102",
          name: "湘桥区"
        },
        {
          code: "445103",
          name: "潮安区"
        },
        {
          code: "445122",
          name: "饶平县"
        }
      ],
      [
        {
          code: "445202",
          name: "榕城区"
        },
        {
          code: "445203",
          name: "揭东区"
        },
        {
          code: "445222",
          name: "揭西县"
        },
        {
          code: "445224",
          name: "惠来县"
        },
        {
          code: "445281",
          name: "普宁市"
        }
      ],
      [
        {
          code: "445302",
          name: "云城区"
        },
        {
          code: "445303",
          name: "云安区"
        },
        {
          code: "445321",
          name: "新兴县"
        },
        {
          code: "445322",
          name: "郁南县"
        },
        {
          code: "445381",
          name: "罗定市"
        }
      ]
    ],
    [
      [
        {
          code: "450102",
          name: "兴宁区"
        },
        {
          code: "450103",
          name: "青秀区"
        },
        {
          code: "450105",
          name: "江南区"
        },
        {
          code: "450107",
          name: "西乡塘区"
        },
        {
          code: "450108",
          name: "良庆区"
        },
        {
          code: "450109",
          name: "邕宁区"
        },
        {
          code: "450110",
          name: "武鸣区"
        },
        {
          code: "450123",
          name: "隆安县"
        },
        {
          code: "450124",
          name: "马山县"
        },
        {
          code: "450125",
          name: "上林县"
        },
        {
          code: "450126",
          name: "宾阳县"
        },
        {
          code: "450181",
          name: "横州市"
        }
      ],
      [
        {
          code: "450202",
          name: "城中区"
        },
        {
          code: "450203",
          name: "鱼峰区"
        },
        {
          code: "450204",
          name: "柳南区"
        },
        {
          code: "450205",
          name: "柳北区"
        },
        {
          code: "450206",
          name: "柳江区"
        },
        {
          code: "450222",
          name: "柳城县"
        },
        {
          code: "450223",
          name: "鹿寨县"
        },
        {
          code: "450224",
          name: "融安县"
        },
        {
          code: "450225",
          name: "融水苗族自治县"
        },
        {
          code: "450226",
          name: "三江侗族自治县"
        }
      ],
      [
        {
          code: "450302",
          name: "秀峰区"
        },
        {
          code: "450303",
          name: "叠彩区"
        },
        {
          code: "450304",
          name: "象山区"
        },
        {
          code: "450305",
          name: "七星区"
        },
        {
          code: "450311",
          name: "雁山区"
        },
        {
          code: "450312",
          name: "临桂区"
        },
        {
          code: "450321",
          name: "阳朔县"
        },
        {
          code: "450323",
          name: "灵川县"
        },
        {
          code: "450324",
          name: "全州县"
        },
        {
          code: "450325",
          name: "兴安县"
        },
        {
          code: "450326",
          name: "永福县"
        },
        {
          code: "450327",
          name: "灌阳县"
        },
        {
          code: "450328",
          name: "龙胜各族自治县"
        },
        {
          code: "450329",
          name: "资源县"
        },
        {
          code: "450330",
          name: "平乐县"
        },
        {
          code: "450332",
          name: "恭城瑶族自治县"
        },
        {
          code: "450381",
          name: "荔浦市"
        }
      ],
      [
        {
          code: "450403",
          name: "万秀区"
        },
        {
          code: "450405",
          name: "长洲区"
        },
        {
          code: "450406",
          name: "龙圩区"
        },
        {
          code: "450421",
          name: "苍梧县"
        },
        {
          code: "450422",
          name: "藤县"
        },
        {
          code: "450423",
          name: "蒙山县"
        },
        {
          code: "450481",
          name: "岑溪市"
        }
      ],
      [
        {
          code: "450502",
          name: "海城区"
        },
        {
          code: "450503",
          name: "银海区"
        },
        {
          code: "450512",
          name: "铁山港区"
        },
        {
          code: "450521",
          name: "合浦县"
        }
      ],
      [
        {
          code: "450602",
          name: "港口区"
        },
        {
          code: "450603",
          name: "防城区"
        },
        {
          code: "450621",
          name: "上思县"
        },
        {
          code: "450681",
          name: "东兴市"
        }
      ],
      [
        {
          code: "450702",
          name: "钦南区"
        },
        {
          code: "450703",
          name: "钦北区"
        },
        {
          code: "450721",
          name: "灵山县"
        },
        {
          code: "450722",
          name: "浦北县"
        }
      ],
      [
        {
          code: "450802",
          name: "港北区"
        },
        {
          code: "450803",
          name: "港南区"
        },
        {
          code: "450804",
          name: "覃塘区"
        },
        {
          code: "450821",
          name: "平南县"
        },
        {
          code: "450881",
          name: "桂平市"
        }
      ],
      [
        {
          code: "450902",
          name: "玉州区"
        },
        {
          code: "450903",
          name: "福绵区"
        },
        {
          code: "450921",
          name: "容县"
        },
        {
          code: "450922",
          name: "陆川县"
        },
        {
          code: "450923",
          name: "博白县"
        },
        {
          code: "450924",
          name: "兴业县"
        },
        {
          code: "450981",
          name: "北流市"
        }
      ],
      [
        {
          code: "451002",
          name: "右江区"
        },
        {
          code: "451003",
          name: "田阳区"
        },
        {
          code: "451022",
          name: "田东县"
        },
        {
          code: "451024",
          name: "德保县"
        },
        {
          code: "451026",
          name: "那坡县"
        },
        {
          code: "451027",
          name: "凌云县"
        },
        {
          code: "451028",
          name: "乐业县"
        },
        {
          code: "451029",
          name: "田林县"
        },
        {
          code: "451030",
          name: "西林县"
        },
        {
          code: "451031",
          name: "隆林各族自治县"
        },
        {
          code: "451081",
          name: "靖西市"
        },
        {
          code: "451082",
          name: "平果市"
        }
      ],
      [
        {
          code: "451102",
          name: "八步区"
        },
        {
          code: "451103",
          name: "平桂区"
        },
        {
          code: "451121",
          name: "昭平县"
        },
        {
          code: "451122",
          name: "钟山县"
        },
        {
          code: "451123",
          name: "富川瑶族自治县"
        }
      ],
      [
        {
          code: "451202",
          name: "金城江区"
        },
        {
          code: "451203",
          name: "宜州区"
        },
        {
          code: "451221",
          name: "南丹县"
        },
        {
          code: "451222",
          name: "天峨县"
        },
        {
          code: "451223",
          name: "凤山县"
        },
        {
          code: "451224",
          name: "东兰县"
        },
        {
          code: "451225",
          name: "罗城仫佬族自治县"
        },
        {
          code: "451226",
          name: "环江毛南族自治县"
        },
        {
          code: "451227",
          name: "巴马瑶族自治县"
        },
        {
          code: "451228",
          name: "都安瑶族自治县"
        },
        {
          code: "451229",
          name: "大化瑶族自治县"
        }
      ],
      [
        {
          code: "451302",
          name: "兴宾区"
        },
        {
          code: "451321",
          name: "忻城县"
        },
        {
          code: "451322",
          name: "象州县"
        },
        {
          code: "451323",
          name: "武宣县"
        },
        {
          code: "451324",
          name: "金秀瑶族自治县"
        },
        {
          code: "451381",
          name: "合山市"
        }
      ],
      [
        {
          code: "451402",
          name: "江州区"
        },
        {
          code: "451421",
          name: "扶绥县"
        },
        {
          code: "451422",
          name: "宁明县"
        },
        {
          code: "451423",
          name: "龙州县"
        },
        {
          code: "451424",
          name: "大新县"
        },
        {
          code: "451425",
          name: "天等县"
        },
        {
          code: "451481",
          name: "凭祥市"
        }
      ]
    ],
    [
      [
        {
          code: "460105",
          name: "秀英区"
        },
        {
          code: "460106",
          name: "龙华区"
        },
        {
          code: "460107",
          name: "琼山区"
        },
        {
          code: "460108",
          name: "美兰区"
        }
      ],
      [
        {
          code: "460202",
          name: "海棠区"
        },
        {
          code: "460203",
          name: "吉阳区"
        },
        {
          code: "460204",
          name: "天涯区"
        },
        {
          code: "460205",
          name: "崖州区"
        }
      ],
      [
        {
          code: "460321",
          name: "西沙群岛"
        },
        {
          code: "460322",
          name: "南沙群岛"
        },
        {
          code: "460323",
          name: "中沙群岛"
        }
      ],
      [
        {
          code: "460499",
          name: "儋州市"
        }
      ],
      [
        {
          code: "46900101",
          name: "五指山市"
        }
      ],
      [
        {
          code: "46900201",
          name: "琼海市"
        }
      ],
      [
        {
          code: "46900501",
          name: "文昌市"
        }
      ],
      [
        {
          code: "46900601",
          name: "万宁市"
        }
      ],
      [
        {
          code: "46900701",
          name: "东方市"
        }
      ],
      [
        {
          code: "46902101",
          name: "定安县"
        }
      ],
      [
        {
          code: "46902201",
          name: "屯昌县"
        }
      ],
      [
        {
          code: "46902301",
          name: "澄迈县"
        }
      ],
      [
        {
          code: "46902401",
          name: "临高县"
        }
      ],
      [
        {
          code: "46902501",
          name: "白沙黎族自治县"
        }
      ],
      [
        {
          code: "46902601",
          name: "昌江黎族自治县"
        }
      ],
      [
        {
          code: "46902701",
          name: "乐东黎族自治县"
        }
      ],
      [
        {
          code: "46902801",
          name: "陵水黎族自治县"
        }
      ],
      [
        {
          code: "46902901",
          name: "保亭黎族苗族自治县"
        }
      ],
      [
        {
          code: "46903001",
          name: "琼中黎族苗族自治县"
        }
      ]
    ],
    [
      [
        {
          code: "500101",
          name: "万州区"
        },
        {
          code: "500102",
          name: "涪陵区"
        },
        {
          code: "500103",
          name: "渝中区"
        },
        {
          code: "500104",
          name: "大渡口区"
        },
        {
          code: "500105",
          name: "江北区"
        },
        {
          code: "500106",
          name: "沙坪坝区"
        },
        {
          code: "500107",
          name: "九龙坡区"
        },
        {
          code: "500108",
          name: "南岸区"
        },
        {
          code: "500109",
          name: "北碚区"
        },
        {
          code: "500110",
          name: "綦江区"
        },
        {
          code: "500111",
          name: "大足区"
        },
        {
          code: "500112",
          name: "渝北区"
        },
        {
          code: "500113",
          name: "巴南区"
        },
        {
          code: "500114",
          name: "黔江区"
        },
        {
          code: "500115",
          name: "长寿区"
        },
        {
          code: "500116",
          name: "江津区"
        },
        {
          code: "500117",
          name: "合川区"
        },
        {
          code: "500118",
          name: "永川区"
        },
        {
          code: "500119",
          name: "南川区"
        },
        {
          code: "500120",
          name: "璧山区"
        },
        {
          code: "500151",
          name: "铜梁区"
        },
        {
          code: "500152",
          name: "潼南区"
        },
        {
          code: "500153",
          name: "荣昌区"
        },
        {
          code: "500154",
          name: "开州区"
        },
        {
          code: "500155",
          name: "梁平区"
        },
        {
          code: "500156",
          name: "武隆区"
        },
        {
          code: "500229",
          name: "城口县"
        },
        {
          code: "500230",
          name: "丰都县"
        },
        {
          code: "500231",
          name: "垫江县"
        },
        {
          code: "500233",
          name: "忠县"
        },
        {
          code: "500235",
          name: "云阳县"
        },
        {
          code: "500236",
          name: "奉节县"
        },
        {
          code: "500237",
          name: "巫山县"
        },
        {
          code: "500238",
          name: "巫溪县"
        },
        {
          code: "500240",
          name: "石柱土家族自治县"
        },
        {
          code: "500241",
          name: "秀山土家族苗族自治县"
        },
        {
          code: "500242",
          name: "酉阳土家族苗族自治县"
        },
        {
          code: "500243",
          name: "彭水苗族土家族自治县"
        }
      ]
    ],
    [
      [
        {
          code: "510104",
          name: "锦江区"
        },
        {
          code: "510105",
          name: "青羊区"
        },
        {
          code: "510106",
          name: "金牛区"
        },
        {
          code: "510107",
          name: "武侯区"
        },
        {
          code: "510108",
          name: "成华区"
        },
        {
          code: "510112",
          name: "龙泉驿区"
        },
        {
          code: "510113",
          name: "青白江区"
        },
        {
          code: "510114",
          name: "新都区"
        },
        {
          code: "510115",
          name: "温江区"
        },
        {
          code: "510116",
          name: "双流区"
        },
        {
          code: "510117",
          name: "郫都区"
        },
        {
          code: "510118",
          name: "新津区"
        },
        {
          code: "510121",
          name: "金堂县"
        },
        {
          code: "510129",
          name: "大邑县"
        },
        {
          code: "510131",
          name: "蒲江县"
        },
        {
          code: "510181",
          name: "都江堰市"
        },
        {
          code: "510182",
          name: "彭州市"
        },
        {
          code: "510183",
          name: "邛崃市"
        },
        {
          code: "510184",
          name: "崇州市"
        },
        {
          code: "510185",
          name: "简阳市"
        }
      ],
      [
        {
          code: "510302",
          name: "自流井区"
        },
        {
          code: "510303",
          name: "贡井区"
        },
        {
          code: "510304",
          name: "大安区"
        },
        {
          code: "510311",
          name: "沿滩区"
        },
        {
          code: "510321",
          name: "荣县"
        },
        {
          code: "510322",
          name: "富顺县"
        }
      ],
      [
        {
          code: "510402",
          name: "东区"
        },
        {
          code: "510403",
          name: "西区"
        },
        {
          code: "510411",
          name: "仁和区"
        },
        {
          code: "510421",
          name: "米易县"
        },
        {
          code: "510422",
          name: "盐边县"
        }
      ],
      [
        {
          code: "510502",
          name: "江阳区"
        },
        {
          code: "510503",
          name: "纳溪区"
        },
        {
          code: "510504",
          name: "龙马潭区"
        },
        {
          code: "510521",
          name: "泸县"
        },
        {
          code: "510522",
          name: "合江县"
        },
        {
          code: "510524",
          name: "叙永县"
        },
        {
          code: "510525",
          name: "古蔺县"
        }
      ],
      [
        {
          code: "510603",
          name: "旌阳区"
        },
        {
          code: "510604",
          name: "罗江区"
        },
        {
          code: "510623",
          name: "中江县"
        },
        {
          code: "510681",
          name: "广汉市"
        },
        {
          code: "510682",
          name: "什邡市"
        },
        {
          code: "510683",
          name: "绵竹市"
        }
      ],
      [
        {
          code: "510703",
          name: "涪城区"
        },
        {
          code: "510704",
          name: "游仙区"
        },
        {
          code: "510705",
          name: "安州区"
        },
        {
          code: "510722",
          name: "三台县"
        },
        {
          code: "510723",
          name: "盐亭县"
        },
        {
          code: "510725",
          name: "梓潼县"
        },
        {
          code: "510726",
          name: "北川羌族自治县"
        },
        {
          code: "510727",
          name: "平武县"
        },
        {
          code: "510781",
          name: "江油市"
        }
      ],
      [
        {
          code: "510802",
          name: "利州区"
        },
        {
          code: "510811",
          name: "昭化区"
        },
        {
          code: "510812",
          name: "朝天区"
        },
        {
          code: "510821",
          name: "旺苍县"
        },
        {
          code: "510822",
          name: "青川县"
        },
        {
          code: "510823",
          name: "剑阁县"
        },
        {
          code: "510824",
          name: "苍溪县"
        }
      ],
      [
        {
          code: "510903",
          name: "船山区"
        },
        {
          code: "510904",
          name: "安居区"
        },
        {
          code: "510921",
          name: "蓬溪县"
        },
        {
          code: "510923",
          name: "大英县"
        },
        {
          code: "510981",
          name: "射洪市"
        }
      ],
      [
        {
          code: "511002",
          name: "市中区"
        },
        {
          code: "511011",
          name: "东兴区"
        },
        {
          code: "511024",
          name: "威远县"
        },
        {
          code: "511025",
          name: "资中县"
        },
        {
          code: "511083",
          name: "隆昌市"
        }
      ],
      [
        {
          code: "511102",
          name: "市中区"
        },
        {
          code: "511111",
          name: "沙湾区"
        },
        {
          code: "511112",
          name: "五通桥区"
        },
        {
          code: "511113",
          name: "金口河区"
        },
        {
          code: "511123",
          name: "犍为县"
        },
        {
          code: "511124",
          name: "井研县"
        },
        {
          code: "511126",
          name: "夹江县"
        },
        {
          code: "511129",
          name: "沐川县"
        },
        {
          code: "511132",
          name: "峨边彝族自治县"
        },
        {
          code: "511133",
          name: "马边彝族自治县"
        },
        {
          code: "511181",
          name: "峨眉山市"
        }
      ],
      [
        {
          code: "511302",
          name: "顺庆区"
        },
        {
          code: "511303",
          name: "高坪区"
        },
        {
          code: "511304",
          name: "嘉陵区"
        },
        {
          code: "511321",
          name: "南部县"
        },
        {
          code: "511322",
          name: "营山县"
        },
        {
          code: "511323",
          name: "蓬安县"
        },
        {
          code: "511324",
          name: "仪陇县"
        },
        {
          code: "511325",
          name: "西充县"
        },
        {
          code: "511381",
          name: "阆中市"
        }
      ],
      [
        {
          code: "511402",
          name: "东坡区"
        },
        {
          code: "511403",
          name: "彭山区"
        },
        {
          code: "511421",
          name: "仁寿县"
        },
        {
          code: "511423",
          name: "洪雅县"
        },
        {
          code: "511424",
          name: "丹棱县"
        },
        {
          code: "511425",
          name: "青神县"
        }
      ],
      [
        {
          code: "511502",
          name: "翠屏区"
        },
        {
          code: "511503",
          name: "南溪区"
        },
        {
          code: "511504",
          name: "叙州区"
        },
        {
          code: "511523",
          name: "江安县"
        },
        {
          code: "511524",
          name: "长宁县"
        },
        {
          code: "511525",
          name: "高县"
        },
        {
          code: "511526",
          name: "珙县"
        },
        {
          code: "511527",
          name: "筠连县"
        },
        {
          code: "511528",
          name: "兴文县"
        },
        {
          code: "511529",
          name: "屏山县"
        }
      ],
      [
        {
          code: "511602",
          name: "广安区"
        },
        {
          code: "511603",
          name: "前锋区"
        },
        {
          code: "511621",
          name: "岳池县"
        },
        {
          code: "511622",
          name: "武胜县"
        },
        {
          code: "511623",
          name: "邻水县"
        },
        {
          code: "511681",
          name: "华蓥市"
        }
      ],
      [
        {
          code: "511702",
          name: "通川区"
        },
        {
          code: "511703",
          name: "达川区"
        },
        {
          code: "511722",
          name: "宣汉县"
        },
        {
          code: "511723",
          name: "开江县"
        },
        {
          code: "511724",
          name: "大竹县"
        },
        {
          code: "511725",
          name: "渠县"
        },
        {
          code: "511781",
          name: "万源市"
        }
      ],
      [
        {
          code: "511802",
          name: "雨城区"
        },
        {
          code: "511803",
          name: "名山区"
        },
        {
          code: "511822",
          name: "荥经县"
        },
        {
          code: "511823",
          name: "汉源县"
        },
        {
          code: "511824",
          name: "石棉县"
        },
        {
          code: "511825",
          name: "天全县"
        },
        {
          code: "511826",
          name: "芦山县"
        },
        {
          code: "511827",
          name: "宝兴县"
        }
      ],
      [
        {
          code: "511902",
          name: "巴州区"
        },
        {
          code: "511903",
          name: "恩阳区"
        },
        {
          code: "511921",
          name: "通江县"
        },
        {
          code: "511922",
          name: "南江县"
        },
        {
          code: "511923",
          name: "平昌县"
        }
      ],
      [
        {
          code: "512002",
          name: "雁江区"
        },
        {
          code: "512021",
          name: "安岳县"
        },
        {
          code: "512022",
          name: "乐至县"
        }
      ],
      [
        {
          code: "513201",
          name: "马尔康市"
        },
        {
          code: "513221",
          name: "汶川县"
        },
        {
          code: "513222",
          name: "理县"
        },
        {
          code: "513223",
          name: "茂县"
        },
        {
          code: "513224",
          name: "松潘县"
        },
        {
          code: "513225",
          name: "九寨沟县"
        },
        {
          code: "513226",
          name: "金川县"
        },
        {
          code: "513227",
          name: "小金县"
        },
        {
          code: "513228",
          name: "黑水县"
        },
        {
          code: "513230",
          name: "壤塘县"
        },
        {
          code: "513231",
          name: "阿坝县"
        },
        {
          code: "513232",
          name: "若尔盖县"
        },
        {
          code: "513233",
          name: "红原县"
        }
      ],
      [
        {
          code: "513301",
          name: "康定市"
        },
        {
          code: "513322",
          name: "泸定县"
        },
        {
          code: "513323",
          name: "丹巴县"
        },
        {
          code: "513324",
          name: "九龙县"
        },
        {
          code: "513325",
          name: "雅江县"
        },
        {
          code: "513326",
          name: "道孚县"
        },
        {
          code: "513327",
          name: "炉霍县"
        },
        {
          code: "513328",
          name: "甘孜县"
        },
        {
          code: "513329",
          name: "新龙县"
        },
        {
          code: "513330",
          name: "德格县"
        },
        {
          code: "513331",
          name: "白玉县"
        },
        {
          code: "513332",
          name: "石渠县"
        },
        {
          code: "513333",
          name: "色达县"
        },
        {
          code: "513334",
          name: "理塘县"
        },
        {
          code: "513335",
          name: "巴塘县"
        },
        {
          code: "513336",
          name: "乡城县"
        },
        {
          code: "513337",
          name: "稻城县"
        },
        {
          code: "513338",
          name: "得荣县"
        }
      ],
      [
        {
          code: "513401",
          name: "西昌市"
        },
        {
          code: "513402",
          name: "会理市"
        },
        {
          code: "513422",
          name: "木里藏族自治县"
        },
        {
          code: "513423",
          name: "盐源县"
        },
        {
          code: "513424",
          name: "德昌县"
        },
        {
          code: "513426",
          name: "会东县"
        },
        {
          code: "513427",
          name: "宁南县"
        },
        {
          code: "513428",
          name: "普格县"
        },
        {
          code: "513429",
          name: "布拖县"
        },
        {
          code: "513430",
          name: "金阳县"
        },
        {
          code: "513431",
          name: "昭觉县"
        },
        {
          code: "513432",
          name: "喜德县"
        },
        {
          code: "513433",
          name: "冕宁县"
        },
        {
          code: "513434",
          name: "越西县"
        },
        {
          code: "513435",
          name: "甘洛县"
        },
        {
          code: "513436",
          name: "美姑县"
        },
        {
          code: "513437",
          name: "雷波县"
        }
      ]
    ],
    [
      [
        {
          code: "520102",
          name: "南明区"
        },
        {
          code: "520103",
          name: "云岩区"
        },
        {
          code: "520111",
          name: "花溪区"
        },
        {
          code: "520112",
          name: "乌当区"
        },
        {
          code: "520113",
          name: "白云区"
        },
        {
          code: "520115",
          name: "观山湖区"
        },
        {
          code: "520121",
          name: "开阳县"
        },
        {
          code: "520122",
          name: "息烽县"
        },
        {
          code: "520123",
          name: "修文县"
        },
        {
          code: "520181",
          name: "清镇市"
        }
      ],
      [
        {
          code: "520201",
          name: "钟山区"
        },
        {
          code: "520203",
          name: "六枝特区"
        },
        {
          code: "520204",
          name: "水城区"
        },
        {
          code: "520281",
          name: "盘州市"
        }
      ],
      [
        {
          code: "520302",
          name: "红花岗区"
        },
        {
          code: "520303",
          name: "汇川区"
        },
        {
          code: "520304",
          name: "播州区"
        },
        {
          code: "520322",
          name: "桐梓县"
        },
        {
          code: "520323",
          name: "绥阳县"
        },
        {
          code: "520324",
          name: "正安县"
        },
        {
          code: "520325",
          name: "道真仡佬族苗族自治县"
        },
        {
          code: "520326",
          name: "务川仡佬族苗族自治县"
        },
        {
          code: "520327",
          name: "凤冈县"
        },
        {
          code: "520328",
          name: "湄潭县"
        },
        {
          code: "520329",
          name: "余庆县"
        },
        {
          code: "520330",
          name: "习水县"
        },
        {
          code: "520381",
          name: "赤水市"
        },
        {
          code: "520382",
          name: "仁怀市"
        }
      ],
      [
        {
          code: "520402",
          name: "西秀区"
        },
        {
          code: "520403",
          name: "平坝区"
        },
        {
          code: "520422",
          name: "普定县"
        },
        {
          code: "520423",
          name: "镇宁布依族苗族自治县"
        },
        {
          code: "520424",
          name: "关岭布依族苗族自治县"
        },
        {
          code: "520425",
          name: "紫云苗族布依族自治县"
        }
      ],
      [
        {
          code: "520502",
          name: "七星关区"
        },
        {
          code: "520521",
          name: "大方县"
        },
        {
          code: "520523",
          name: "金沙县"
        },
        {
          code: "520524",
          name: "织金县"
        },
        {
          code: "520525",
          name: "纳雍县"
        },
        {
          code: "520526",
          name: "威宁彝族回族苗族自治县"
        },
        {
          code: "520527",
          name: "赫章县"
        },
        {
          code: "520581",
          name: "黔西市"
        }
      ],
      [
        {
          code: "520602",
          name: "碧江区"
        },
        {
          code: "520603",
          name: "万山区"
        },
        {
          code: "520621",
          name: "江口县"
        },
        {
          code: "520622",
          name: "玉屏侗族自治县"
        },
        {
          code: "520623",
          name: "石阡县"
        },
        {
          code: "520624",
          name: "思南县"
        },
        {
          code: "520625",
          name: "印江土家族苗族自治县"
        },
        {
          code: "520626",
          name: "德江县"
        },
        {
          code: "520627",
          name: "沿河土家族自治县"
        },
        {
          code: "520628",
          name: "松桃苗族自治县"
        }
      ],
      [
        {
          code: "522301",
          name: "兴义市"
        },
        {
          code: "522302",
          name: "兴仁市"
        },
        {
          code: "522323",
          name: "普安县"
        },
        {
          code: "522324",
          name: "晴隆县"
        },
        {
          code: "522325",
          name: "贞丰县"
        },
        {
          code: "522326",
          name: "望谟县"
        },
        {
          code: "522327",
          name: "册亨县"
        },
        {
          code: "522328",
          name: "安龙县"
        }
      ],
      [
        {
          code: "522601",
          name: "凯里市"
        },
        {
          code: "522622",
          name: "黄平县"
        },
        {
          code: "522623",
          name: "施秉县"
        },
        {
          code: "522624",
          name: "三穗县"
        },
        {
          code: "522625",
          name: "镇远县"
        },
        {
          code: "522626",
          name: "岑巩县"
        },
        {
          code: "522627",
          name: "天柱县"
        },
        {
          code: "522628",
          name: "锦屏县"
        },
        {
          code: "522629",
          name: "剑河县"
        },
        {
          code: "522630",
          name: "台江县"
        },
        {
          code: "522631",
          name: "黎平县"
        },
        {
          code: "522632",
          name: "榕江县"
        },
        {
          code: "522633",
          name: "从江县"
        },
        {
          code: "522634",
          name: "雷山县"
        },
        {
          code: "522635",
          name: "麻江县"
        },
        {
          code: "522636",
          name: "丹寨县"
        }
      ],
      [
        {
          code: "522701",
          name: "都匀市"
        },
        {
          code: "522702",
          name: "福泉市"
        },
        {
          code: "522722",
          name: "荔波县"
        },
        {
          code: "522723",
          name: "贵定县"
        },
        {
          code: "522725",
          name: "瓮安县"
        },
        {
          code: "522726",
          name: "独山县"
        },
        {
          code: "522727",
          name: "平塘县"
        },
        {
          code: "522728",
          name: "罗甸县"
        },
        {
          code: "522729",
          name: "长顺县"
        },
        {
          code: "522730",
          name: "龙里县"
        },
        {
          code: "522731",
          name: "惠水县"
        },
        {
          code: "522732",
          name: "三都水族自治县"
        }
      ]
    ],
    [
      [
        {
          code: "530102",
          name: "五华区"
        },
        {
          code: "530103",
          name: "盘龙区"
        },
        {
          code: "530111",
          name: "官渡区"
        },
        {
          code: "530112",
          name: "西山区"
        },
        {
          code: "530113",
          name: "东川区"
        },
        {
          code: "530114",
          name: "呈贡区"
        },
        {
          code: "530115",
          name: "晋宁区"
        },
        {
          code: "530124",
          name: "富民县"
        },
        {
          code: "530125",
          name: "宜良县"
        },
        {
          code: "530126",
          name: "石林彝族自治县"
        },
        {
          code: "530127",
          name: "嵩明县"
        },
        {
          code: "530128",
          name: "禄劝彝族苗族自治县"
        },
        {
          code: "530129",
          name: "寻甸回族彝族自治县"
        },
        {
          code: "530181",
          name: "安宁市"
        }
      ],
      [
        {
          code: "530302",
          name: "麒麟区"
        },
        {
          code: "530303",
          name: "沾益区"
        },
        {
          code: "530304",
          name: "马龙区"
        },
        {
          code: "530322",
          name: "陆良县"
        },
        {
          code: "530323",
          name: "师宗县"
        },
        {
          code: "530324",
          name: "罗平县"
        },
        {
          code: "530325",
          name: "富源县"
        },
        {
          code: "530326",
          name: "会泽县"
        },
        {
          code: "530381",
          name: "宣威市"
        }
      ],
      [
        {
          code: "530402",
          name: "红塔区"
        },
        {
          code: "530403",
          name: "江川区"
        },
        {
          code: "530423",
          name: "通海县"
        },
        {
          code: "530424",
          name: "华宁县"
        },
        {
          code: "530425",
          name: "易门县"
        },
        {
          code: "530426",
          name: "峨山彝族自治县"
        },
        {
          code: "530427",
          name: "新平彝族傣族自治县"
        },
        {
          code: "530428",
          name: "元江哈尼族彝族傣族自治县"
        },
        {
          code: "530481",
          name: "澄江市"
        }
      ],
      [
        {
          code: "530502",
          name: "隆阳区"
        },
        {
          code: "530521",
          name: "施甸县"
        },
        {
          code: "530523",
          name: "龙陵县"
        },
        {
          code: "530524",
          name: "昌宁县"
        },
        {
          code: "530581",
          name: "腾冲市"
        }
      ],
      [
        {
          code: "530602",
          name: "昭阳区"
        },
        {
          code: "530621",
          name: "鲁甸县"
        },
        {
          code: "530622",
          name: "巧家县"
        },
        {
          code: "530623",
          name: "盐津县"
        },
        {
          code: "530624",
          name: "大关县"
        },
        {
          code: "530625",
          name: "永善县"
        },
        {
          code: "530626",
          name: "绥江县"
        },
        {
          code: "530627",
          name: "镇雄县"
        },
        {
          code: "530628",
          name: "彝良县"
        },
        {
          code: "530629",
          name: "威信县"
        },
        {
          code: "530681",
          name: "水富市"
        }
      ],
      [
        {
          code: "530702",
          name: "古城区"
        },
        {
          code: "530721",
          name: "玉龙纳西族自治县"
        },
        {
          code: "530722",
          name: "永胜县"
        },
        {
          code: "530723",
          name: "华坪县"
        },
        {
          code: "530724",
          name: "宁蒗彝族自治县"
        }
      ],
      [
        {
          code: "530802",
          name: "思茅区"
        },
        {
          code: "530821",
          name: "宁洱哈尼族彝族自治县"
        },
        {
          code: "530822",
          name: "墨江哈尼族自治县"
        },
        {
          code: "530823",
          name: "景东彝族自治县"
        },
        {
          code: "530824",
          name: "景谷傣族彝族自治县"
        },
        {
          code: "530825",
          name: "镇沅彝族哈尼族拉祜族自治县"
        },
        {
          code: "530826",
          name: "江城哈尼族彝族自治县"
        },
        {
          code: "530827",
          name: "孟连傣族拉祜族佤族自治县"
        },
        {
          code: "530828",
          name: "澜沧拉祜族自治县"
        },
        {
          code: "530829",
          name: "西盟佤族自治县"
        }
      ],
      [
        {
          code: "530902",
          name: "临翔区"
        },
        {
          code: "530921",
          name: "凤庆县"
        },
        {
          code: "530922",
          name: "云县"
        },
        {
          code: "530923",
          name: "永德县"
        },
        {
          code: "530924",
          name: "镇康县"
        },
        {
          code: "530925",
          name: "双江拉祜族佤族布朗族傣族自治县"
        },
        {
          code: "530926",
          name: "耿马傣族佤族自治县"
        },
        {
          code: "530927",
          name: "沧源佤族自治县"
        }
      ],
      [
        {
          code: "532301",
          name: "楚雄市"
        },
        {
          code: "532302",
          name: "禄丰市"
        },
        {
          code: "532322",
          name: "双柏县"
        },
        {
          code: "532323",
          name: "牟定县"
        },
        {
          code: "532324",
          name: "南华县"
        },
        {
          code: "532325",
          name: "姚安县"
        },
        {
          code: "532326",
          name: "大姚县"
        },
        {
          code: "532327",
          name: "永仁县"
        },
        {
          code: "532328",
          name: "元谋县"
        },
        {
          code: "532329",
          name: "武定县"
        }
      ],
      [
        {
          code: "532501",
          name: "个旧市"
        },
        {
          code: "532502",
          name: "开远市"
        },
        {
          code: "532503",
          name: "蒙自市"
        },
        {
          code: "532504",
          name: "弥勒市"
        },
        {
          code: "532523",
          name: "屏边苗族自治县"
        },
        {
          code: "532524",
          name: "建水县"
        },
        {
          code: "532525",
          name: "石屏县"
        },
        {
          code: "532527",
          name: "泸西县"
        },
        {
          code: "532528",
          name: "元阳县"
        },
        {
          code: "532529",
          name: "红河县"
        },
        {
          code: "532530",
          name: "金平苗族瑶族傣族自治县"
        },
        {
          code: "532531",
          name: "绿春县"
        },
        {
          code: "532532",
          name: "河口瑶族自治县"
        }
      ],
      [
        {
          code: "532601",
          name: "文山市"
        },
        {
          code: "532622",
          name: "砚山县"
        },
        {
          code: "532623",
          name: "西畴县"
        },
        {
          code: "532624",
          name: "麻栗坡县"
        },
        {
          code: "532625",
          name: "马关县"
        },
        {
          code: "532626",
          name: "丘北县"
        },
        {
          code: "532627",
          name: "广南县"
        },
        {
          code: "532628",
          name: "富宁县"
        }
      ],
      [
        {
          code: "532801",
          name: "景洪市"
        },
        {
          code: "532822",
          name: "勐海县"
        },
        {
          code: "532823",
          name: "勐腊县"
        }
      ],
      [
        {
          code: "532901",
          name: "大理市"
        },
        {
          code: "532922",
          name: "漾濞彝族自治县"
        },
        {
          code: "532923",
          name: "祥云县"
        },
        {
          code: "532924",
          name: "宾川县"
        },
        {
          code: "532925",
          name: "弥渡县"
        },
        {
          code: "532926",
          name: "南涧彝族自治县"
        },
        {
          code: "532927",
          name: "巍山彝族回族自治县"
        },
        {
          code: "532928",
          name: "永平县"
        },
        {
          code: "532929",
          name: "云龙县"
        },
        {
          code: "532930",
          name: "洱源县"
        },
        {
          code: "532931",
          name: "剑川县"
        },
        {
          code: "532932",
          name: "鹤庆县"
        }
      ],
      [
        {
          code: "533102",
          name: "瑞丽市"
        },
        {
          code: "533103",
          name: "芒市"
        },
        {
          code: "533122",
          name: "梁河县"
        },
        {
          code: "533123",
          name: "盈江县"
        },
        {
          code: "533124",
          name: "陇川县"
        }
      ],
      [
        {
          code: "533301",
          name: "泸水市"
        },
        {
          code: "533323",
          name: "福贡县"
        },
        {
          code: "533324",
          name: "贡山独龙族怒族自治县"
        },
        {
          code: "533325",
          name: "兰坪白族普米族自治县"
        }
      ],
      [
        {
          code: "533401",
          name: "香格里拉市"
        },
        {
          code: "533422",
          name: "德钦县"
        },
        {
          code: "533423",
          name: "维西傈僳族自治县"
        }
      ]
    ],
    [
      [
        {
          code: "540102",
          name: "城关区"
        },
        {
          code: "540103",
          name: "堆龙德庆区"
        },
        {
          code: "540104",
          name: "达孜区"
        },
        {
          code: "540121",
          name: "林周县"
        },
        {
          code: "540122",
          name: "当雄县"
        },
        {
          code: "540123",
          name: "尼木县"
        },
        {
          code: "540124",
          name: "曲水县"
        },
        {
          code: "540127",
          name: "墨竹工卡县"
        }
      ],
      [
        {
          code: "540202",
          name: "桑珠孜区"
        },
        {
          code: "540221",
          name: "南木林县"
        },
        {
          code: "540222",
          name: "江孜县"
        },
        {
          code: "540223",
          name: "定日县"
        },
        {
          code: "540224",
          name: "萨迦县"
        },
        {
          code: "540225",
          name: "拉孜县"
        },
        {
          code: "540226",
          name: "昂仁县"
        },
        {
          code: "540227",
          name: "谢通门县"
        },
        {
          code: "540228",
          name: "白朗县"
        },
        {
          code: "540229",
          name: "仁布县"
        },
        {
          code: "540230",
          name: "康马县"
        },
        {
          code: "540231",
          name: "定结县"
        },
        {
          code: "540232",
          name: "仲巴县"
        },
        {
          code: "540233",
          name: "亚东县"
        },
        {
          code: "540234",
          name: "吉隆县"
        },
        {
          code: "540235",
          name: "聂拉木县"
        },
        {
          code: "540236",
          name: "萨嘎县"
        },
        {
          code: "540237",
          name: "岗巴县"
        }
      ],
      [
        {
          code: "540302",
          name: "卡若区"
        },
        {
          code: "540321",
          name: "江达县"
        },
        {
          code: "540322",
          name: "贡觉县"
        },
        {
          code: "540323",
          name: "类乌齐县"
        },
        {
          code: "540324",
          name: "丁青县"
        },
        {
          code: "540325",
          name: "察雅县"
        },
        {
          code: "540326",
          name: "八宿县"
        },
        {
          code: "540327",
          name: "左贡县"
        },
        {
          code: "540328",
          name: "芒康县"
        },
        {
          code: "540329",
          name: "洛隆县"
        },
        {
          code: "540330",
          name: "边坝县"
        }
      ],
      [
        {
          code: "540402",
          name: "巴宜区"
        },
        {
          code: "540421",
          name: "工布江达县"
        },
        {
          code: "540422",
          name: "米林市"
        },
        {
          code: "540423",
          name: "墨脱县"
        },
        {
          code: "540424",
          name: "波密县"
        },
        {
          code: "540425",
          name: "察隅县"
        },
        {
          code: "540426",
          name: "朗县"
        }
      ],
      [
        {
          code: "540502",
          name: "乃东区"
        },
        {
          code: "540521",
          name: "扎囊县"
        },
        {
          code: "540522",
          name: "贡嘎县"
        },
        {
          code: "540523",
          name: "桑日县"
        },
        {
          code: "540524",
          name: "琼结县"
        },
        {
          code: "540525",
          name: "曲松县"
        },
        {
          code: "540526",
          name: "措美县"
        },
        {
          code: "540527",
          name: "洛扎县"
        },
        {
          code: "540528",
          name: "加查县"
        },
        {
          code: "540529",
          name: "隆子县"
        },
        {
          code: "540530",
          name: "错那市"
        },
        {
          code: "540531",
          name: "浪卡子县"
        }
      ],
      [
        {
          code: "540602",
          name: "色尼区"
        },
        {
          code: "540621",
          name: "嘉黎县"
        },
        {
          code: "540622",
          name: "比如县"
        },
        {
          code: "540623",
          name: "聂荣县"
        },
        {
          code: "540624",
          name: "安多县"
        },
        {
          code: "540625",
          name: "申扎县"
        },
        {
          code: "540626",
          name: "索县"
        },
        {
          code: "540627",
          name: "班戈县"
        },
        {
          code: "540628",
          name: "巴青县"
        },
        {
          code: "540629",
          name: "尼玛县"
        },
        {
          code: "540630",
          name: "双湖县"
        }
      ],
      [
        {
          code: "542521",
          name: "普兰县"
        },
        {
          code: "542522",
          name: "札达县"
        },
        {
          code: "542523",
          name: "噶尔县"
        },
        {
          code: "542524",
          name: "日土县"
        },
        {
          code: "542525",
          name: "革吉县"
        },
        {
          code: "542526",
          name: "改则县"
        },
        {
          code: "542527",
          name: "措勤县"
        }
      ]
    ],
    [
      [
        {
          code: "610102",
          name: "新城区"
        },
        {
          code: "610103",
          name: "碑林区"
        },
        {
          code: "610104",
          name: "莲湖区"
        },
        {
          code: "610111",
          name: "灞桥区"
        },
        {
          code: "610112",
          name: "未央区"
        },
        {
          code: "610113",
          name: "雁塔区"
        },
        {
          code: "610114",
          name: "阎良区"
        },
        {
          code: "610115",
          name: "临潼区"
        },
        {
          code: "610116",
          name: "长安区"
        },
        {
          code: "610117",
          name: "高陵区"
        },
        {
          code: "610118",
          name: "鄠邑区"
        },
        {
          code: "610122",
          name: "蓝田县"
        },
        {
          code: "610124",
          name: "周至县"
        }
      ],
      [
        {
          code: "610202",
          name: "王益区"
        },
        {
          code: "610203",
          name: "印台区"
        },
        {
          code: "610204",
          name: "耀州区"
        },
        {
          code: "610222",
          name: "宜君县"
        }
      ],
      [
        {
          code: "610302",
          name: "渭滨区"
        },
        {
          code: "610303",
          name: "金台区"
        },
        {
          code: "610304",
          name: "陈仓区"
        },
        {
          code: "610305",
          name: "凤翔区"
        },
        {
          code: "610323",
          name: "岐山县"
        },
        {
          code: "610324",
          name: "扶风县"
        },
        {
          code: "610326",
          name: "眉县"
        },
        {
          code: "610327",
          name: "陇县"
        },
        {
          code: "610328",
          name: "千阳县"
        },
        {
          code: "610329",
          name: "麟游县"
        },
        {
          code: "610330",
          name: "凤县"
        },
        {
          code: "610331",
          name: "太白县"
        }
      ],
      [
        {
          code: "610402",
          name: "秦都区"
        },
        {
          code: "610403",
          name: "杨陵区"
        },
        {
          code: "610404",
          name: "渭城区"
        },
        {
          code: "610422",
          name: "三原县"
        },
        {
          code: "610423",
          name: "泾阳县"
        },
        {
          code: "610424",
          name: "乾县"
        },
        {
          code: "610425",
          name: "礼泉县"
        },
        {
          code: "610426",
          name: "永寿县"
        },
        {
          code: "610428",
          name: "长武县"
        },
        {
          code: "610429",
          name: "旬邑县"
        },
        {
          code: "610430",
          name: "淳化县"
        },
        {
          code: "610431",
          name: "武功县"
        },
        {
          code: "610481",
          name: "兴平市"
        },
        {
          code: "610482",
          name: "彬州市"
        }
      ],
      [
        {
          code: "610502",
          name: "临渭区"
        },
        {
          code: "610503",
          name: "华州区"
        },
        {
          code: "610522",
          name: "潼关县"
        },
        {
          code: "610523",
          name: "大荔县"
        },
        {
          code: "610524",
          name: "合阳县"
        },
        {
          code: "610525",
          name: "澄城县"
        },
        {
          code: "610526",
          name: "蒲城县"
        },
        {
          code: "610527",
          name: "白水县"
        },
        {
          code: "610528",
          name: "富平县"
        },
        {
          code: "610581",
          name: "韩城市"
        },
        {
          code: "610582",
          name: "华阴市"
        }
      ],
      [
        {
          code: "610602",
          name: "宝塔区"
        },
        {
          code: "610603",
          name: "安塞区"
        },
        {
          code: "610621",
          name: "延长县"
        },
        {
          code: "610622",
          name: "延川县"
        },
        {
          code: "610625",
          name: "志丹县"
        },
        {
          code: "610626",
          name: "吴起县"
        },
        {
          code: "610627",
          name: "甘泉县"
        },
        {
          code: "610628",
          name: "富县"
        },
        {
          code: "610629",
          name: "洛川县"
        },
        {
          code: "610630",
          name: "宜川县"
        },
        {
          code: "610631",
          name: "黄龙县"
        },
        {
          code: "610632",
          name: "黄陵县"
        },
        {
          code: "610681",
          name: "子长市"
        }
      ],
      [
        {
          code: "610702",
          name: "汉台区"
        },
        {
          code: "610703",
          name: "南郑区"
        },
        {
          code: "610722",
          name: "城固县"
        },
        {
          code: "610723",
          name: "洋县"
        },
        {
          code: "610724",
          name: "西乡县"
        },
        {
          code: "610725",
          name: "勉县"
        },
        {
          code: "610726",
          name: "宁强县"
        },
        {
          code: "610727",
          name: "略阳县"
        },
        {
          code: "610728",
          name: "镇巴县"
        },
        {
          code: "610729",
          name: "留坝县"
        },
        {
          code: "610730",
          name: "佛坪县"
        }
      ],
      [
        {
          code: "610802",
          name: "榆阳区"
        },
        {
          code: "610803",
          name: "横山区"
        },
        {
          code: "610822",
          name: "府谷县"
        },
        {
          code: "610824",
          name: "靖边县"
        },
        {
          code: "610825",
          name: "定边县"
        },
        {
          code: "610826",
          name: "绥德县"
        },
        {
          code: "610827",
          name: "米脂县"
        },
        {
          code: "610828",
          name: "佳县"
        },
        {
          code: "610829",
          name: "吴堡县"
        },
        {
          code: "610830",
          name: "清涧县"
        },
        {
          code: "610831",
          name: "子洲县"
        },
        {
          code: "610881",
          name: "神木市"
        }
      ],
      [
        {
          code: "610902",
          name: "汉滨区"
        },
        {
          code: "610921",
          name: "汉阴县"
        },
        {
          code: "610922",
          name: "石泉县"
        },
        {
          code: "610923",
          name: "宁陕县"
        },
        {
          code: "610924",
          name: "紫阳县"
        },
        {
          code: "610925",
          name: "岚皋县"
        },
        {
          code: "610926",
          name: "平利县"
        },
        {
          code: "610927",
          name: "镇坪县"
        },
        {
          code: "610929",
          name: "白河县"
        },
        {
          code: "610981",
          name: "旬阳市"
        }
      ],
      [
        {
          code: "611002",
          name: "商州区"
        },
        {
          code: "611021",
          name: "洛南县"
        },
        {
          code: "611022",
          name: "丹凤县"
        },
        {
          code: "611023",
          name: "商南县"
        },
        {
          code: "611024",
          name: "山阳县"
        },
        {
          code: "611025",
          name: "镇安县"
        },
        {
          code: "611026",
          name: "柞水县"
        }
      ]
    ],
    [
      [
        {
          code: "620102",
          name: "城关区"
        },
        {
          code: "620103",
          name: "七里河区"
        },
        {
          code: "620104",
          name: "西固区"
        },
        {
          code: "620105",
          name: "安宁区"
        },
        {
          code: "620111",
          name: "红古区"
        },
        {
          code: "620121",
          name: "永登县"
        },
        {
          code: "620122",
          name: "皋兰县"
        },
        {
          code: "620123",
          name: "榆中县"
        }
      ],
      [
        {
          code: "620299",
          name: "嘉峪关市"
        }
      ],
      [
        {
          code: "620302",
          name: "金川区"
        },
        {
          code: "620321",
          name: "永昌县"
        }
      ],
      [
        {
          code: "620402",
          name: "白银区"
        },
        {
          code: "620403",
          name: "平川区"
        },
        {
          code: "620421",
          name: "靖远县"
        },
        {
          code: "620422",
          name: "会宁县"
        },
        {
          code: "620423",
          name: "景泰县"
        }
      ],
      [
        {
          code: "620502",
          name: "秦州区"
        },
        {
          code: "620503",
          name: "麦积区"
        },
        {
          code: "620521",
          name: "清水县"
        },
        {
          code: "620522",
          name: "秦安县"
        },
        {
          code: "620523",
          name: "甘谷县"
        },
        {
          code: "620524",
          name: "武山县"
        },
        {
          code: "620525",
          name: "张家川回族自治县"
        }
      ],
      [
        {
          code: "620602",
          name: "凉州区"
        },
        {
          code: "620621",
          name: "民勤县"
        },
        {
          code: "620622",
          name: "古浪县"
        },
        {
          code: "620623",
          name: "天祝藏族自治县"
        }
      ],
      [
        {
          code: "620702",
          name: "甘州区"
        },
        {
          code: "620721",
          name: "肃南裕固族自治县"
        },
        {
          code: "620722",
          name: "民乐县"
        },
        {
          code: "620723",
          name: "临泽县"
        },
        {
          code: "620724",
          name: "高台县"
        },
        {
          code: "620725",
          name: "山丹县"
        }
      ],
      [
        {
          code: "620802",
          name: "崆峒区"
        },
        {
          code: "620821",
          name: "泾川县"
        },
        {
          code: "620822",
          name: "灵台县"
        },
        {
          code: "620823",
          name: "崇信县"
        },
        {
          code: "620825",
          name: "庄浪县"
        },
        {
          code: "620826",
          name: "静宁县"
        },
        {
          code: "620881",
          name: "华亭市"
        }
      ],
      [
        {
          code: "620902",
          name: "肃州区"
        },
        {
          code: "620921",
          name: "金塔县"
        },
        {
          code: "620922",
          name: "瓜州县"
        },
        {
          code: "620923",
          name: "肃北蒙古族自治县"
        },
        {
          code: "620924",
          name: "阿克塞哈萨克族自治县"
        },
        {
          code: "620981",
          name: "玉门市"
        },
        {
          code: "620982",
          name: "敦煌市"
        }
      ],
      [
        {
          code: "621002",
          name: "西峰区"
        },
        {
          code: "621021",
          name: "庆城县"
        },
        {
          code: "621022",
          name: "环县"
        },
        {
          code: "621023",
          name: "华池县"
        },
        {
          code: "621024",
          name: "合水县"
        },
        {
          code: "621025",
          name: "正宁县"
        },
        {
          code: "621026",
          name: "宁县"
        },
        {
          code: "621027",
          name: "镇原县"
        }
      ],
      [
        {
          code: "621102",
          name: "安定区"
        },
        {
          code: "621121",
          name: "通渭县"
        },
        {
          code: "621122",
          name: "陇西县"
        },
        {
          code: "621123",
          name: "渭源县"
        },
        {
          code: "621124",
          name: "临洮县"
        },
        {
          code: "621125",
          name: "漳县"
        },
        {
          code: "621126",
          name: "岷县"
        }
      ],
      [
        {
          code: "621202",
          name: "武都区"
        },
        {
          code: "621221",
          name: "成县"
        },
        {
          code: "621222",
          name: "文县"
        },
        {
          code: "621223",
          name: "宕昌县"
        },
        {
          code: "621224",
          name: "康县"
        },
        {
          code: "621225",
          name: "西和县"
        },
        {
          code: "621226",
          name: "礼县"
        },
        {
          code: "621227",
          name: "徽县"
        },
        {
          code: "621228",
          name: "两当县"
        }
      ],
      [
        {
          code: "622901",
          name: "临夏市"
        },
        {
          code: "622921",
          name: "临夏县"
        },
        {
          code: "622922",
          name: "康乐县"
        },
        {
          code: "622923",
          name: "永靖县"
        },
        {
          code: "622924",
          name: "广河县"
        },
        {
          code: "622925",
          name: "和政县"
        },
        {
          code: "622926",
          name: "东乡族自治县"
        },
        {
          code: "622927",
          name: "积石山保安族东乡族撒拉族自治县"
        }
      ],
      [
        {
          code: "623001",
          name: "合作市"
        },
        {
          code: "623021",
          name: "临潭县"
        },
        {
          code: "623022",
          name: "卓尼县"
        },
        {
          code: "623023",
          name: "舟曲县"
        },
        {
          code: "623024",
          name: "迭部县"
        },
        {
          code: "623025",
          name: "玛曲县"
        },
        {
          code: "623026",
          name: "碌曲县"
        },
        {
          code: "623027",
          name: "夏河县"
        }
      ]
    ],
    [
      [
        {
          code: "630102",
          name: "城东区"
        },
        {
          code: "630103",
          name: "城中区"
        },
        {
          code: "630104",
          name: "城西区"
        },
        {
          code: "630105",
          name: "城北区"
        },
        {
          code: "630106",
          name: "湟中区"
        },
        {
          code: "630121",
          name: "大通回族土族自治县"
        },
        {
          code: "630123",
          name: "湟源县"
        }
      ],
      [
        {
          code: "630202",
          name: "乐都区"
        },
        {
          code: "630203",
          name: "平安区"
        },
        {
          code: "630222",
          name: "民和回族土族自治县"
        },
        {
          code: "630223",
          name: "互助土族自治县"
        },
        {
          code: "630224",
          name: "化隆回族自治县"
        },
        {
          code: "630225",
          name: "循化撒拉族自治县"
        }
      ],
      [
        {
          code: "632221",
          name: "门源回族自治县"
        },
        {
          code: "632222",
          name: "祁连县"
        },
        {
          code: "632223",
          name: "海晏县"
        },
        {
          code: "632224",
          name: "刚察县"
        }
      ],
      [
        {
          code: "632301",
          name: "同仁市"
        },
        {
          code: "632322",
          name: "尖扎县"
        },
        {
          code: "632323",
          name: "泽库县"
        },
        {
          code: "632324",
          name: "河南蒙古族自治县"
        }
      ],
      [
        {
          code: "632521",
          name: "共和县"
        },
        {
          code: "632522",
          name: "同德县"
        },
        {
          code: "632523",
          name: "贵德县"
        },
        {
          code: "632524",
          name: "兴海县"
        },
        {
          code: "632525",
          name: "贵南县"
        }
      ],
      [
        {
          code: "632621",
          name: "玛沁县"
        },
        {
          code: "632622",
          name: "班玛县"
        },
        {
          code: "632623",
          name: "甘德县"
        },
        {
          code: "632624",
          name: "达日县"
        },
        {
          code: "632625",
          name: "久治县"
        },
        {
          code: "632626",
          name: "玛多县"
        }
      ],
      [
        {
          code: "632701",
          name: "玉树市"
        },
        {
          code: "632722",
          name: "杂多县"
        },
        {
          code: "632723",
          name: "称多县"
        },
        {
          code: "632724",
          name: "治多县"
        },
        {
          code: "632725",
          name: "囊谦县"
        },
        {
          code: "632726",
          name: "曲麻莱县"
        }
      ],
      [
        {
          code: "632801",
          name: "格尔木市"
        },
        {
          code: "632802",
          name: "德令哈市"
        },
        {
          code: "632803",
          name: "茫崖市"
        },
        {
          code: "632821",
          name: "乌兰县"
        },
        {
          code: "632822",
          name: "都兰县"
        },
        {
          code: "632823",
          name: "天峻县"
        },
        {
          code: "632857",
          name: "大柴旦行政委员会"
        }
      ]
    ],
    [
      [
        {
          code: "640104",
          name: "兴庆区"
        },
        {
          code: "640105",
          name: "西夏区"
        },
        {
          code: "640106",
          name: "金凤区"
        },
        {
          code: "640121",
          name: "永宁县"
        },
        {
          code: "640122",
          name: "贺兰县"
        },
        {
          code: "640181",
          name: "灵武市"
        }
      ],
      [
        {
          code: "640202",
          name: "大武口区"
        },
        {
          code: "640205",
          name: "惠农区"
        },
        {
          code: "640221",
          name: "平罗县"
        }
      ],
      [
        {
          code: "640302",
          name: "利通区"
        },
        {
          code: "640303",
          name: "红寺堡区"
        },
        {
          code: "640323",
          name: "盐池县"
        },
        {
          code: "640324",
          name: "同心县"
        },
        {
          code: "640381",
          name: "青铜峡市"
        }
      ],
      [
        {
          code: "640402",
          name: "原州区"
        },
        {
          code: "640422",
          name: "西吉县"
        },
        {
          code: "640423",
          name: "隆德县"
        },
        {
          code: "640424",
          name: "泾源县"
        },
        {
          code: "640425",
          name: "彭阳县"
        }
      ],
      [
        {
          code: "640502",
          name: "沙坡头区"
        },
        {
          code: "640521",
          name: "中宁县"
        },
        {
          code: "640522",
          name: "海原县"
        }
      ]
    ],
    [
      [
        {
          code: "650102",
          name: "天山区"
        },
        {
          code: "650103",
          name: "沙依巴克区"
        },
        {
          code: "650104",
          name: "新市区"
        },
        {
          code: "650105",
          name: "水磨沟区"
        },
        {
          code: "650106",
          name: "头屯河区"
        },
        {
          code: "650107",
          name: "达坂城区"
        },
        {
          code: "650109",
          name: "米东区"
        },
        {
          code: "650121",
          name: "乌鲁木齐县"
        }
      ],
      [
        {
          code: "650202",
          name: "独山子区"
        },
        {
          code: "650203",
          name: "克拉玛依区"
        },
        {
          code: "650204",
          name: "白碱滩区"
        },
        {
          code: "650205",
          name: "乌尔禾区"
        }
      ],
      [
        {
          code: "650402",
          name: "高昌区"
        },
        {
          code: "650421",
          name: "鄯善县"
        },
        {
          code: "650422",
          name: "托克逊县"
        }
      ],
      [
        {
          code: "650502",
          name: "伊州区"
        },
        {
          code: "650521",
          name: "巴里坤哈萨克自治县"
        },
        {
          code: "650522",
          name: "伊吾县"
        }
      ],
      [
        {
          code: "652301",
          name: "昌吉市"
        },
        {
          code: "652302",
          name: "阜康市"
        },
        {
          code: "652323",
          name: "呼图壁县"
        },
        {
          code: "652324",
          name: "玛纳斯县"
        },
        {
          code: "652325",
          name: "奇台县"
        },
        {
          code: "652327",
          name: "吉木萨尔县"
        },
        {
          code: "652328",
          name: "木垒哈萨克自治县"
        }
      ],
      [
        {
          code: "652701",
          name: "博乐市"
        },
        {
          code: "652702",
          name: "阿拉山口市"
        },
        {
          code: "652722",
          name: "精河县"
        },
        {
          code: "652723",
          name: "温泉县"
        }
      ],
      [
        {
          code: "652801",
          name: "库尔勒市"
        },
        {
          code: "652822",
          name: "轮台县"
        },
        {
          code: "652823",
          name: "尉犁县"
        },
        {
          code: "652824",
          name: "若羌县"
        },
        {
          code: "652825",
          name: "且末县"
        },
        {
          code: "652826",
          name: "焉耆回族自治县"
        },
        {
          code: "652827",
          name: "和静县"
        },
        {
          code: "652828",
          name: "和硕县"
        },
        {
          code: "652829",
          name: "博湖县"
        }
      ],
      [
        {
          code: "652901",
          name: "阿克苏市"
        },
        {
          code: "652902",
          name: "库车市"
        },
        {
          code: "652922",
          name: "温宿县"
        },
        {
          code: "652924",
          name: "沙雅县"
        },
        {
          code: "652925",
          name: "新和县"
        },
        {
          code: "652926",
          name: "拜城县"
        },
        {
          code: "652927",
          name: "乌什县"
        },
        {
          code: "652928",
          name: "阿瓦提县"
        },
        {
          code: "652929",
          name: "柯坪县"
        }
      ],
      [
        {
          code: "653001",
          name: "阿图什市"
        },
        {
          code: "653022",
          name: "阿克陶县"
        },
        {
          code: "653023",
          name: "阿合奇县"
        },
        {
          code: "653024",
          name: "乌恰县"
        }
      ],
      [
        {
          code: "653101",
          name: "喀什市"
        },
        {
          code: "653121",
          name: "疏附县"
        },
        {
          code: "653122",
          name: "疏勒县"
        },
        {
          code: "653123",
          name: "英吉沙县"
        },
        {
          code: "653124",
          name: "泽普县"
        },
        {
          code: "653125",
          name: "莎车县"
        },
        {
          code: "653126",
          name: "叶城县"
        },
        {
          code: "653127",
          name: "麦盖提县"
        },
        {
          code: "653128",
          name: "岳普湖县"
        },
        {
          code: "653129",
          name: "伽师县"
        },
        {
          code: "653130",
          name: "巴楚县"
        },
        {
          code: "653131",
          name: "塔什库尔干塔吉克自治县"
        }
      ],
      [
        {
          code: "653201",
          name: "和田市"
        },
        {
          code: "653221",
          name: "和田县"
        },
        {
          code: "653222",
          name: "墨玉县"
        },
        {
          code: "653223",
          name: "皮山县"
        },
        {
          code: "653224",
          name: "洛浦县"
        },
        {
          code: "653225",
          name: "策勒县"
        },
        {
          code: "653226",
          name: "于田县"
        },
        {
          code: "653227",
          name: "民丰县"
        }
      ],
      [
        {
          code: "654002",
          name: "伊宁市"
        },
        {
          code: "654003",
          name: "奎屯市"
        },
        {
          code: "654004",
          name: "霍尔果斯市"
        },
        {
          code: "654021",
          name: "伊宁县"
        },
        {
          code: "654022",
          name: "察布查尔锡伯自治县"
        },
        {
          code: "654023",
          name: "霍城县"
        },
        {
          code: "654024",
          name: "巩留县"
        },
        {
          code: "654025",
          name: "新源县"
        },
        {
          code: "654026",
          name: "昭苏县"
        },
        {
          code: "654027",
          name: "特克斯县"
        },
        {
          code: "654028",
          name: "尼勒克县"
        }
      ],
      [
        {
          code: "654201",
          name: "塔城市"
        },
        {
          code: "654202",
          name: "乌苏市"
        },
        {
          code: "654203",
          name: "沙湾市"
        },
        {
          code: "654221",
          name: "额敏县"
        },
        {
          code: "654224",
          name: "托里县"
        },
        {
          code: "654225",
          name: "裕民县"
        },
        {
          code: "654226",
          name: "和布克赛尔蒙古自治县"
        }
      ],
      [
        {
          code: "654301",
          name: "阿勒泰市"
        },
        {
          code: "654321",
          name: "布尔津县"
        },
        {
          code: "654322",
          name: "富蕴县"
        },
        {
          code: "654323",
          name: "福海县"
        },
        {
          code: "654324",
          name: "哈巴河县"
        },
        {
          code: "654325",
          name: "青河县"
        },
        {
          code: "654326",
          name: "吉木乃县"
        }
      ],
      [
        {
          code: "65900101",
          name: "石河子市"
        }
      ],
      [
        {
          code: "65900201",
          name: "阿拉尔市"
        }
      ],
      [
        {
          code: "65900301",
          name: "图木舒克市"
        }
      ],
      [
        {
          code: "65900401",
          name: "五家渠市"
        }
      ],
      [
        {
          code: "65900501",
          name: "北屯市"
        }
      ],
      [
        {
          code: "65900601",
          name: "铁门关市"
        }
      ],
      [
        {
          code: "65900701",
          name: "双河市"
        }
      ],
      [
        {
          code: "65900801",
          name: "可克达拉市"
        }
      ],
      [
        {
          code: "65900901",
          name: "昆玉市"
        }
      ],
      [
        {
          code: "65901001",
          name: "胡杨河市"
        }
      ],
      [
        {
          code: "65901101",
          name: "新星市"
        }
      ],
      [
        {
          code: "65901201",
          name: "白杨市"
        }
      ]
    ],
    [
      [
        {
          code: "711001",
          name: "松山区"
        },
        {
          code: "711002",
          name: "大安区"
        },
        {
          code: "711003",
          name: "中正区"
        },
        {
          code: "711005",
          name: "万华区"
        },
        {
          code: "711009",
          name: "大同区"
        },
        {
          code: "711010",
          name: "中山区"
        },
        {
          code: "711011",
          name: "文山区"
        },
        {
          code: "711013",
          name: "南港区"
        },
        {
          code: "711014",
          name: "内湖区"
        },
        {
          code: "711015",
          name: "士林区"
        },
        {
          code: "711016",
          name: "北投区"
        },
        {
          code: "711017",
          name: "信义区"
        }
      ],
      [
        {
          code: "711101",
          name: "中区"
        },
        {
          code: "711102",
          name: "东区"
        },
        {
          code: "711103",
          name: "西区"
        },
        {
          code: "711104",
          name: "南区"
        },
        {
          code: "711105",
          name: "北区"
        },
        {
          code: "711106",
          name: "西屯区"
        },
        {
          code: "711107",
          name: "南屯区"
        },
        {
          code: "711108",
          name: "北屯区"
        },
        {
          code: "711141",
          name: "丰原区"
        },
        {
          code: "711142",
          name: "东势区"
        },
        {
          code: "711143",
          name: "大甲区"
        },
        {
          code: "711144",
          name: "清水区"
        },
        {
          code: "711145",
          name: "沙鹿区"
        },
        {
          code: "711146",
          name: "梧栖区"
        },
        {
          code: "711147",
          name: "神冈区"
        },
        {
          code: "711148",
          name: "后里区"
        },
        {
          code: "711149",
          name: "大雅区"
        },
        {
          code: "711150",
          name: "潭子区"
        },
        {
          code: "711151",
          name: "新社区"
        },
        {
          code: "711152",
          name: "石冈区"
        },
        {
          code: "711153",
          name: "外埔区"
        },
        {
          code: "711154",
          name: "大安区"
        },
        {
          code: "711155",
          name: "乌日区"
        },
        {
          code: "711156",
          name: "大肚区"
        },
        {
          code: "711157",
          name: "龙井区"
        },
        {
          code: "711158",
          name: "雾峰区"
        },
        {
          code: "711159",
          name: "太平区"
        },
        {
          code: "711160",
          name: "大里区"
        },
        {
          code: "711161",
          name: "和平区"
        }
      ],
      [
        {
          code: "711201",
          name: "中正区"
        },
        {
          code: "711202",
          name: "七堵区"
        },
        {
          code: "711203",
          name: "暖暖区"
        },
        {
          code: "711204",
          name: "仁爱区"
        },
        {
          code: "711205",
          name: "中山区"
        },
        {
          code: "711206",
          name: "安乐区"
        },
        {
          code: "711207",
          name: "信义区"
        }
      ],
      [
        {
          code: "711301",
          name: "东区"
        },
        {
          code: "711302",
          name: "南区"
        },
        {
          code: "711304",
          name: "北区"
        },
        {
          code: "711306",
          name: "安南区"
        },
        {
          code: "711307",
          name: "安平区"
        },
        {
          code: "711308",
          name: "中西区"
        },
        {
          code: "711341",
          name: "新营区"
        },
        {
          code: "711342",
          name: "盐水区"
        },
        {
          code: "711343",
          name: "白河区"
        },
        {
          code: "711344",
          name: "柳营区"
        },
        {
          code: "711345",
          name: "后壁区"
        },
        {
          code: "711346",
          name: "东山区"
        },
        {
          code: "711347",
          name: "麻豆区"
        },
        {
          code: "711348",
          name: "下营区"
        },
        {
          code: "711349",
          name: "六甲区"
        },
        {
          code: "711350",
          name: "官田区"
        },
        {
          code: "711351",
          name: "大内区"
        },
        {
          code: "711352",
          name: "佳里区"
        },
        {
          code: "711353",
          name: "西港区"
        },
        {
          code: "711354",
          name: "七股区"
        },
        {
          code: "711355",
          name: "将军区"
        },
        {
          code: "711356",
          name: "北门区"
        },
        {
          code: "711357",
          name: "学甲区"
        },
        {
          code: "711358",
          name: "新化区"
        },
        {
          code: "711359",
          name: "善化区"
        },
        {
          code: "711360",
          name: "新市区"
        },
        {
          code: "711361",
          name: "安定区"
        },
        {
          code: "711362",
          name: "山上区"
        },
        {
          code: "711363",
          name: "玉井区"
        },
        {
          code: "711364",
          name: "楠西区"
        },
        {
          code: "711365",
          name: "南化区"
        },
        {
          code: "711366",
          name: "左镇区"
        },
        {
          code: "711367",
          name: "仁德区"
        },
        {
          code: "711368",
          name: "归仁区"
        },
        {
          code: "711369",
          name: "关庙区"
        },
        {
          code: "711370",
          name: "龙崎区"
        },
        {
          code: "711371",
          name: "永康区"
        }
      ],
      [
        {
          code: "711401",
          name: "盐埕区"
        },
        {
          code: "711402",
          name: "鼓山区"
        },
        {
          code: "711403",
          name: "左营区"
        },
        {
          code: "711404",
          name: "楠梓区"
        },
        {
          code: "711405",
          name: "三民区"
        },
        {
          code: "711406",
          name: "新兴区"
        },
        {
          code: "711407",
          name: "前金区"
        },
        {
          code: "711408",
          name: "苓雅区"
        },
        {
          code: "711409",
          name: "前镇区"
        },
        {
          code: "711410",
          name: "旗津区"
        },
        {
          code: "711411",
          name: "小港区"
        },
        {
          code: "711441",
          name: "凤山区"
        },
        {
          code: "711442",
          name: "鸟松区"
        },
        {
          code: "711443",
          name: "仁武区"
        },
        {
          code: "711444",
          name: "大社区"
        },
        {
          code: "711445",
          name: "大树区"
        },
        {
          code: "711446",
          name: "大寮区"
        },
        {
          code: "711448",
          name: "林园区"
        },
        {
          code: "711449",
          name: "冈山区"
        },
        {
          code: "711450",
          name: "茄萣区"
        },
        {
          code: "711451",
          name: "永安区"
        },
        {
          code: "711452",
          name: "桥头区"
        },
        {
          code: "711453",
          name: "梓官区"
        },
        {
          code: "711454",
          name: "田寮区"
        },
        {
          code: "711455",
          name: "阿莲区"
        },
        {
          code: "711456",
          name: "路竹区"
        },
        {
          code: "711457",
          name: "燕巢区"
        },
        {
          code: "711458",
          name: "弥陀区"
        },
        {
          code: "711459",
          name: "湖内区"
        },
        {
          code: "711460",
          name: "旗山区"
        },
        {
          code: "711461",
          name: "六龟区"
        },
        {
          code: "711462",
          name: "内门区"
        },
        {
          code: "711463",
          name: "美浓区"
        },
        {
          code: "711464",
          name: "杉林区"
        },
        {
          code: "711465",
          name: "甲仙区"
        },
        {
          code: "711466",
          name: "茂林区"
        },
        {
          code: "711467",
          name: "桃源区"
        },
        {
          code: "711468",
          name: "那玛夏区"
        }
      ],
      [
        {
          code: "711501",
          name: "新庄区"
        },
        {
          code: "711502",
          name: "林口区"
        },
        {
          code: "711503",
          name: "五股区"
        },
        {
          code: "711504",
          name: "芦洲区"
        },
        {
          code: "711505",
          name: "三重区"
        },
        {
          code: "711506",
          name: "泰山区"
        },
        {
          code: "711507",
          name: "新店区"
        },
        {
          code: "711508",
          name: "石碇区"
        },
        {
          code: "711509",
          name: "深坑区"
        },
        {
          code: "711510",
          name: "坪林区"
        },
        {
          code: "711511",
          name: "乌来区"
        },
        {
          code: "711514",
          name: "板桥区"
        },
        {
          code: "711515",
          name: "三峡区"
        },
        {
          code: "711516",
          name: "莺歌区"
        },
        {
          code: "711517",
          name: "树林区"
        },
        {
          code: "711518",
          name: "中和区"
        },
        {
          code: "711519",
          name: "土城区"
        },
        {
          code: "711521",
          name: "瑞芳区"
        },
        {
          code: "711522",
          name: "平溪区"
        },
        {
          code: "711523",
          name: "双溪区"
        },
        {
          code: "711524",
          name: "贡寮区"
        },
        {
          code: "711525",
          name: "金山区"
        },
        {
          code: "711526",
          name: "万里区"
        },
        {
          code: "711527",
          name: "淡水区"
        },
        {
          code: "711528",
          name: "汐止区"
        },
        {
          code: "711530",
          name: "三芝区"
        },
        {
          code: "711531",
          name: "石门区"
        },
        {
          code: "711532",
          name: "八里区"
        },
        {
          code: "711533",
          name: "永和区"
        }
      ],
      [
        {
          code: "711601",
          name: "宜兰市"
        },
        {
          code: "711602",
          name: "头城镇"
        },
        {
          code: "711603",
          name: "礁溪乡"
        },
        {
          code: "711604",
          name: "壮围乡"
        },
        {
          code: "711605",
          name: "员山乡"
        },
        {
          code: "711606",
          name: "罗东镇"
        },
        {
          code: "711607",
          name: "五结乡"
        },
        {
          code: "711608",
          name: "冬山乡"
        },
        {
          code: "711609",
          name: "苏澳镇"
        },
        {
          code: "711610",
          name: "三星乡"
        },
        {
          code: "711611",
          name: "大同乡"
        },
        {
          code: "711612",
          name: "南澳乡"
        }
      ],
      [
        {
          code: "711701",
          name: "桃园区"
        },
        {
          code: "711702",
          name: "大溪区"
        },
        {
          code: "711703",
          name: "中坜区"
        },
        {
          code: "711704",
          name: "杨梅区"
        },
        {
          code: "711705",
          name: "芦竹区"
        },
        {
          code: "711706",
          name: "大园区"
        },
        {
          code: "711707",
          name: "龟山区"
        },
        {
          code: "711708",
          name: "八德区"
        },
        {
          code: "711709",
          name: "龙潭区"
        },
        {
          code: "711710",
          name: "平镇区"
        },
        {
          code: "711711",
          name: "新屋区"
        },
        {
          code: "711712",
          name: "观音区"
        },
        {
          code: "711713",
          name: "复兴区"
        }
      ],
      [
        {
          code: "711801",
          name: "东区"
        },
        {
          code: "711802",
          name: "西区"
        }
      ],
      [
        {
          code: "711902",
          name: "竹东镇"
        },
        {
          code: "711903",
          name: "关西镇"
        },
        {
          code: "711904",
          name: "新埔镇"
        },
        {
          code: "711905",
          name: "竹北市"
        },
        {
          code: "711906",
          name: "湖口乡"
        },
        {
          code: "711908",
          name: "横山乡"
        },
        {
          code: "711909",
          name: "新丰乡"
        },
        {
          code: "711910",
          name: "芎林乡"
        },
        {
          code: "711911",
          name: "宝山乡"
        },
        {
          code: "711912",
          name: "北埔乡"
        },
        {
          code: "711913",
          name: "峨眉乡"
        },
        {
          code: "711914",
          name: "尖石乡"
        },
        {
          code: "711915",
          name: "五峰乡"
        }
      ],
      [
        {
          code: "712001",
          name: "苗栗市"
        },
        {
          code: "712002",
          name: "苑里镇"
        },
        {
          code: "712003",
          name: "通霄镇"
        },
        {
          code: "712004",
          name: "公馆乡"
        },
        {
          code: "712005",
          name: "铜锣乡"
        },
        {
          code: "712006",
          name: "三义乡"
        },
        {
          code: "712007",
          name: "西湖乡"
        },
        {
          code: "712008",
          name: "头屋乡"
        },
        {
          code: "712009",
          name: "竹南镇"
        },
        {
          code: "712010",
          name: "头份市"
        },
        {
          code: "712011",
          name: "造桥乡"
        },
        {
          code: "712012",
          name: "后龙镇"
        },
        {
          code: "712013",
          name: "三湾乡"
        },
        {
          code: "712014",
          name: "南庄乡"
        },
        {
          code: "712015",
          name: "大湖乡"
        },
        {
          code: "712016",
          name: "卓兰镇"
        },
        {
          code: "712017",
          name: "狮潭乡"
        },
        {
          code: "712018",
          name: "泰安乡"
        }
      ],
      [
        {
          code: "712201",
          name: "南投市"
        },
        {
          code: "712202",
          name: "埔里镇"
        },
        {
          code: "712203",
          name: "草屯镇"
        },
        {
          code: "712204",
          name: "竹山镇"
        },
        {
          code: "712205",
          name: "集集镇"
        },
        {
          code: "712206",
          name: "名间乡"
        },
        {
          code: "712207",
          name: "鹿谷乡"
        },
        {
          code: "712208",
          name: "中寮乡"
        },
        {
          code: "712209",
          name: "鱼池乡"
        },
        {
          code: "712210",
          name: "国姓乡"
        },
        {
          code: "712211",
          name: "水里乡"
        },
        {
          code: "712212",
          name: "信义乡"
        },
        {
          code: "712213",
          name: "仁爱乡"
        }
      ],
      [
        {
          code: "712301",
          name: "彰化市"
        },
        {
          code: "712302",
          name: "鹿港镇"
        },
        {
          code: "712303",
          name: "和美镇"
        },
        {
          code: "712304",
          name: "北斗镇"
        },
        {
          code: "712305",
          name: "员林市"
        },
        {
          code: "712306",
          name: "溪湖镇"
        },
        {
          code: "712307",
          name: "田中镇"
        },
        {
          code: "712308",
          name: "二林镇"
        },
        {
          code: "712309",
          name: "线西乡"
        },
        {
          code: "712310",
          name: "伸港乡"
        },
        {
          code: "712311",
          name: "福兴乡"
        },
        {
          code: "712312",
          name: "秀水乡"
        },
        {
          code: "712313",
          name: "花坛乡"
        },
        {
          code: "712314",
          name: "芬园乡"
        },
        {
          code: "712315",
          name: "大村乡"
        },
        {
          code: "712316",
          name: "埔盐乡"
        },
        {
          code: "712317",
          name: "埔心乡"
        },
        {
          code: "712318",
          name: "永靖乡"
        },
        {
          code: "712319",
          name: "社头乡"
        },
        {
          code: "712320",
          name: "二水乡"
        },
        {
          code: "712321",
          name: "田尾乡"
        },
        {
          code: "712322",
          name: "埤头乡"
        },
        {
          code: "712323",
          name: "芳苑乡"
        },
        {
          code: "712324",
          name: "大城乡"
        },
        {
          code: "712325",
          name: "竹塘乡"
        },
        {
          code: "712326",
          name: "溪州乡"
        }
      ],
      [
        {
          code: "712401",
          name: "东区"
        },
        {
          code: "712402",
          name: "香山区"
        },
        {
          code: "712403",
          name: "北区"
        }
      ],
      [
        {
          code: "712501",
          name: "斗六市"
        },
        {
          code: "712502",
          name: "斗南镇"
        },
        {
          code: "712503",
          name: "虎尾镇"
        },
        {
          code: "712504",
          name: "西螺镇"
        },
        {
          code: "712505",
          name: "土库镇"
        },
        {
          code: "712506",
          name: "北港镇"
        },
        {
          code: "712507",
          name: "古坑乡"
        },
        {
          code: "712508",
          name: "大埤乡"
        },
        {
          code: "712509",
          name: "莿桐乡"
        },
        {
          code: "712510",
          name: "林内乡"
        },
        {
          code: "712511",
          name: "二仑乡"
        },
        {
          code: "712512",
          name: "仑背乡"
        },
        {
          code: "712513",
          name: "麦寮乡"
        },
        {
          code: "712514",
          name: "东势乡"
        },
        {
          code: "712515",
          name: "褒忠乡"
        },
        {
          code: "712516",
          name: "台西乡"
        },
        {
          code: "712517",
          name: "元长乡"
        },
        {
          code: "712518",
          name: "四湖乡"
        },
        {
          code: "712519",
          name: "口湖乡"
        },
        {
          code: "712520",
          name: "水林乡"
        }
      ],
      [
        {
          code: "712602",
          name: "朴子市"
        },
        {
          code: "712603",
          name: "布袋镇"
        },
        {
          code: "712604",
          name: "大林镇"
        },
        {
          code: "712605",
          name: "民雄乡"
        },
        {
          code: "712606",
          name: "溪口乡"
        },
        {
          code: "712607",
          name: "新港乡"
        },
        {
          code: "712608",
          name: "六脚乡"
        },
        {
          code: "712609",
          name: "东石乡"
        },
        {
          code: "712610",
          name: "义竹乡"
        },
        {
          code: "712611",
          name: "鹿草乡"
        },
        {
          code: "712612",
          name: "太保市"
        },
        {
          code: "712613",
          name: "水上乡"
        },
        {
          code: "712614",
          name: "中埔乡"
        },
        {
          code: "712615",
          name: "竹崎乡"
        },
        {
          code: "712616",
          name: "梅山乡"
        },
        {
          code: "712617",
          name: "番路乡"
        },
        {
          code: "712618",
          name: "大埔乡"
        },
        {
          code: "712620",
          name: "阿里山乡"
        }
      ],
      [
        {
          code: "712901",
          name: "屏东市"
        },
        {
          code: "712902",
          name: "潮州镇"
        },
        {
          code: "712903",
          name: "东港镇"
        },
        {
          code: "712904",
          name: "恒春镇"
        },
        {
          code: "712905",
          name: "万丹乡"
        },
        {
          code: "712906",
          name: "长治乡"
        },
        {
          code: "712907",
          name: "麟洛乡"
        },
        {
          code: "712908",
          name: "九如乡"
        },
        {
          code: "712909",
          name: "里港乡"
        },
        {
          code: "712910",
          name: "盐埔乡"
        },
        {
          code: "712911",
          name: "高树乡"
        },
        {
          code: "712912",
          name: "万峦乡"
        },
        {
          code: "712913",
          name: "内埔乡"
        },
        {
          code: "712914",
          name: "竹田乡"
        },
        {
          code: "712915",
          name: "新埤乡"
        },
        {
          code: "712916",
          name: "枋寮乡"
        },
        {
          code: "712917",
          name: "新园乡"
        },
        {
          code: "712918",
          name: "崁顶乡"
        },
        {
          code: "712919",
          name: "林边乡"
        },
        {
          code: "712920",
          name: "南州乡"
        },
        {
          code: "712921",
          name: "佳冬乡"
        },
        {
          code: "712922",
          name: "琉球乡"
        },
        {
          code: "712923",
          name: "车城乡"
        },
        {
          code: "712924",
          name: "满州乡"
        },
        {
          code: "712925",
          name: "枋山乡"
        },
        {
          code: "712926",
          name: "三地门乡"
        },
        {
          code: "712927",
          name: "雾台乡"
        },
        {
          code: "712928",
          name: "玛家乡"
        },
        {
          code: "712929",
          name: "泰武乡"
        },
        {
          code: "712930",
          name: "来义乡"
        },
        {
          code: "712931",
          name: "春日乡"
        },
        {
          code: "712932",
          name: "狮子乡"
        },
        {
          code: "712933",
          name: "牡丹乡"
        }
      ],
      [
        {
          code: "713001",
          name: "花莲市"
        },
        {
          code: "713002",
          name: "光复乡"
        },
        {
          code: "713003",
          name: "玉里镇"
        },
        {
          code: "713004",
          name: "新城乡"
        },
        {
          code: "713005",
          name: "吉安乡"
        },
        {
          code: "713006",
          name: "寿丰乡"
        },
        {
          code: "713007",
          name: "凤林镇"
        },
        {
          code: "713008",
          name: "丰滨乡"
        },
        {
          code: "713009",
          name: "瑞穗乡"
        },
        {
          code: "713010",
          name: "富里乡"
        },
        {
          code: "713011",
          name: "卓溪乡"
        },
        {
          code: "713012",
          name: "万荣乡"
        },
        {
          code: "713013",
          name: "秀林乡"
        }
      ],
      [
        {
          code: "713101",
          name: "台东市"
        },
        {
          code: "713102",
          name: "成功镇"
        },
        {
          code: "713103",
          name: "关山镇"
        },
        {
          code: "713104",
          name: "卑南乡"
        },
        {
          code: "713105",
          name: "大武乡"
        },
        {
          code: "713106",
          name: "太麻里乡"
        },
        {
          code: "713107",
          name: "东河乡"
        },
        {
          code: "713108",
          name: "长滨乡"
        },
        {
          code: "713109",
          name: "鹿野乡"
        },
        {
          code: "713110",
          name: "池上乡"
        },
        {
          code: "713111",
          name: "绿岛乡"
        },
        {
          code: "713112",
          name: "延平乡"
        },
        {
          code: "713113",
          name: "海端乡"
        },
        {
          code: "713114",
          name: "达仁乡"
        },
        {
          code: "713115",
          name: "金峰乡"
        },
        {
          code: "713116",
          name: "兰屿乡"
        }
      ],
      [
        {
          code: "713201",
          name: "马公市"
        },
        {
          code: "713202",
          name: "湖西乡"
        },
        {
          code: "713203",
          name: "白沙乡"
        },
        {
          code: "713204",
          name: "西屿乡"
        },
        {
          code: "713205",
          name: "望安乡"
        },
        {
          code: "713206",
          name: "七美乡"
        }
      ]
    ],
    [
      [
        {
          code: "811100",
          name: "中西区"
        },
        {
          code: "811200",
          name: "湾仔区"
        },
        {
          code: "811300",
          name: "东区"
        },
        {
          code: "811400",
          name: "南区"
        },
        {
          code: "812100",
          name: "油尖旺区"
        },
        {
          code: "812200",
          name: "深水埗区"
        },
        {
          code: "812300",
          name: "九龙城区"
        },
        {
          code: "812400",
          name: "黄大仙区"
        },
        {
          code: "812500",
          name: "观塘区"
        },
        {
          code: "813100",
          name: "葵青区"
        },
        {
          code: "813200",
          name: "荃湾区"
        },
        {
          code: "813300",
          name: "屯门区"
        },
        {
          code: "813400",
          name: "元朗区"
        },
        {
          code: "813500",
          name: "北区"
        },
        {
          code: "813600",
          name: "大埔区"
        },
        {
          code: "813700",
          name: "沙田区"
        },
        {
          code: "813800",
          name: "西贡区"
        },
        {
          code: "813900",
          name: "离岛区"
        }
      ]
    ],
    [
      [
        {
          code: "820100",
          name: "澳门半岛"
        },
        {
          code: "820200",
          name: "氹仔岛"
        },
        {
          code: "820300",
          name: "路环岛"
        }
      ]
    ]
  ];
  if (!String.prototype.padStart) {
    String.prototype.padStart = function(maxLength, fillString = " ") {
      if (Object.prototype.toString.call(fillString) !== "[object String]")
        throw new TypeError(
          "fillString must be String"
        );
      let str = this;
      if (str.length >= maxLength)
        return String(str);
      let fillLength = maxLength - str.length, times = Math.ceil(fillLength / fillString.length);
      while (times >>= 1) {
        fillString += fillString;
        if (times === 1) {
          fillString += fillString;
        }
      }
      return fillString.slice(0, fillLength) + str;
    };
  }
  function timeFormat(dateTime = null, fmt = "yyyy-mm-dd") {
    if (!dateTime)
      dateTime = Number(/* @__PURE__ */ new Date());
    if (dateTime.toString().length == 10)
      dateTime *= 1e3;
    let date2 = new Date(dateTime);
    let ret;
    let opt = {
      "y+": date2.getFullYear().toString(),
      // 年
      "m+": (date2.getMonth() + 1).toString(),
      // 月
      "d+": date2.getDate().toString(),
      // 日
      "h+": date2.getHours().toString(),
      // 时
      "M+": date2.getMinutes().toString(),
      // 分
      "s+": date2.getSeconds().toString()
      // 秒
      // 有其他格式化字符需求可以继续添加，必须转化成字符串
    };
    for (let k in opt) {
      ret = new RegExp("(" + k + ")").exec(fmt);
      if (ret) {
        fmt = fmt.replace(ret[1], ret[1].length == 1 ? opt[k] : opt[k].padStart(ret[1].length, "0"));
      }
    }
    return fmt;
  }
  class AddressDiscern {
    // 初始化数据源
    constructor(dataSource = {}) {
      this.dataSource = dataSource;
    }
    // 智能解析收货地址
    discern(text) {
      if (!text)
        return { code: -1, msg: "地址文本不能为空" };
      text = text.trim();
      const positionRes = this.regionDiscern(text);
      if (positionRes.code !== 0)
        return positionRes;
      const { name, mobile: mobile2 } = this.nameMobileDiscern(positionRes.not_address_text);
      const status = name && mobile2 && positionRes.data ? 1 : 0;
      let msg = "ok";
      if (status === 0) {
        msg = "未识别：";
        if (!name)
          msg += "姓名、";
        if (!mobile2)
          msg += "手机号、";
        msg = msg.slice(0, -1);
      }
      const res2 = {
        code: 0,
        msg,
        status,
        // 1 表示全部识别成功，0 表示部分成功
        data: {
          name,
          // 姓名
          mobile: mobile2,
          // 手机号
          position: positionRes.data
          // 省市区街道信息
        }
      };
      return res2;
    }
    // 智能识别省市区
    regionDiscern(addressText) {
      const { provinces: provinces2, citys: citys2, areas: areas2 } = this.dataSource;
      const province = {};
      const city = {};
      const area = {};
      let address = "";
      if (!addressText)
        return { code: -1, msg: "地址文本不能为空" };
      addressText = addressText.trim();
      const findProvinceIndex = () => {
        const index = provinces2.findIndex(({ name }) => addressText.includes(name.substring(0, 2)));
        return index;
      };
      const findCityIndex = (citys3) => {
        const index = citys3.findIndex(({ name }) => addressText.includes(name.slice(0, -1)));
        return index;
      };
      const findAreaIndex = (areas3) => {
        const index = areas3.findIndex(({ name }) => {
          const reg = name.length > 2 ? `${name}|${name.slice(0, -1)}` : name;
          const areaRegExp = new RegExp(reg);
          if (areaRegExp.test(addressText)) {
            address = addressText.replace(areaRegExp, "{{~}}").split("{{~}}")[1] || "";
            address = address.split(new RegExp("[^\\u4e00-\\u9fa5a-zA-Z0-9+-（）()]+", "g"))[0];
            return true;
          }
          return false;
        });
        return index;
      };
      const findProvinceByCity = () => {
        for (let i2 = 0; i2 < citys2.length; i2++) {
          const index = findCityIndex(citys2[i2]);
          if (index !== -1) {
            return { provinceIndex: i2, cityIndex: index };
          }
        }
        return { provinceIndex: -1, cityIndex: -1 };
      };
      const findProvinceByArea = () => {
        for (let i2 = 0; i2 < areas2.length; i2++) {
          for (let j2 = 0; j2 < areas2[i2].length; j2++) {
            const index = findAreaIndex(areas2[i2][j2]);
            if (index !== -1) {
              return { provinceIndex: i2, cityIndex: j2, areaIndex: index };
            }
          }
        }
        return { provinceIndex: -1, cityIndex: -1, areaIndex: -1 };
      };
      let provinceIndex = findProvinceIndex();
      let cityIndex = -1;
      let areaIndex = -1;
      if (provinceIndex === -1) {
        const cityResult = findProvinceByCity();
        provinceIndex = cityResult.provinceIndex;
        cityIndex = cityResult.cityIndex;
      }
      if (provinceIndex === -1) {
        const areaResult = findProvinceByArea();
        provinceIndex = areaResult.provinceIndex;
        cityIndex = areaResult.cityIndex;
        areaIndex = areaResult.areaIndex;
      }
      if (provinceIndex === -1)
        return { code: -1, msg: "省份没有找到，请输入正确的地址" };
      Object.assign(province, provinces2[provinceIndex]);
      const cityList = citys2[provinceIndex];
      if (cityIndex === -1) {
        cityIndex = findCityIndex(cityList);
        if (cityIndex === -1)
          return { code: -1, msg: "地级市没有找到，请输入正确的地址" };
      }
      Object.assign(city, cityList[cityIndex]);
      const areaList = areas2[provinceIndex][cityIndex];
      if (areaIndex === -1) {
        areaIndex = findAreaIndex(areaList);
        if (areaIndex === -1)
          return { code: -1, msg: "县级市没有找到，请输入正确的地址" };
      }
      Object.assign(area, areaList[areaIndex]);
      const formatted_address = `${province.name}${city.name}${area.name}${address}`;
      const provinceName = province.name.substring(0, 2);
      const not_address_text = (addressText.substring(0, addressText.indexOf(provinceName)) + addressText.substring(addressText.indexOf(address) + address.length)).trim();
      return {
        code: 0,
        msg: "ok",
        data: {
          province,
          city,
          area,
          address,
          formatted_address
        },
        not_address_text
      };
    }
    // 智能解析姓名和手机号
    nameMobileDiscern(text) {
      if (!text)
        return { name: "", mobile: "" };
      let name = "";
      let mobile2 = "";
      const mobilePatterns = [
        new RegExp("1\\d{2}([\\s-]?\\d{4}){2}", "g")
      ];
      let mobileMatchText;
      for (const pattern2 of mobilePatterns) {
        const matches = text.match(pattern2);
        if (matches && matches.length > 0) {
          mobile2 = matches[0].replace(new RegExp("[\\s\\-\\.]", "g"), "");
          mobileMatchText = matches[0];
          break;
        }
      }
      let cleanText = text;
      if (mobile2) {
        cleanText = cleanText.replace(mobileMatchText, "");
      }
      const labelPatterns = [
        new RegExp("^姓名[：:]\\s*"),
        new RegExp("^收货人[：:]\\s*"),
        new RegExp("^收件人[：:]\\s*"),
        new RegExp("^联系人[：:]\\s*"),
        new RegExp("^name[：:]\\s*", "i"),
        new RegExp("^收[：:]\\s*"),
        new RegExp("^人[：:]\\s*"),
        new RegExp("^电话[：:]\\s*"),
        new RegExp("^手机[：:]\\s*"),
        new RegExp("^tel[：:]\\s*", "i"),
        new RegExp("^phone[：:]\\s*", "i"),
        new RegExp("^mobile[：:]\\s*", "i"),
        new RegExp("^地址[：:]\\s*"),
        new RegExp("^address[：:]\\s*", "i"),
        new RegExp("^收货地址[：:]\\s*"),
        new RegExp("^收件地址[：:]\\s*")
      ];
      for (const pattern2 of labelPatterns) {
        cleanText = cleanText.replace(pattern2, "");
      }
      cleanText = cleanText.replace(new RegExp("\\s+", "g"), " ").trim();
      const namePatterns = [
        // 英文+称谓（如：vk先生、John先生、Mary女士等）- 最具体，优先匹配
        new RegExp("[A-Za-z]+[\\u4e00-\\u9fa5]{1,3}", "g"),
        // 中文姓名（2-6个汉字，支持复姓和少数民族姓名）
        new RegExp("[\\u4e00-\\u9fa5]{2,6}", "g"),
        // 英文姓名（支持多种格式：全名、简称、首字母等）
        new RegExp("[A-Za-z]+(\\s+[A-Za-z]+)*", "g")
      ];
      for (const pattern2 of namePatterns) {
        const matches = cleanText.match(pattern2);
        if (matches && matches.length > 0) {
          const validNames = matches.filter((match) => {
            const addressWords = ["省", "市", "区", "县", "镇", "村", "路", "街", "号", "楼", "室", "单元", "栋", "层", "小区", "大厦", "广场", "花园"];
            const isAddressWord = addressWords.some((word) => match.includes(word));
            const labelWords = ["姓名", "收货人", "收件人", "联系人", "收", "人", "电话", "手机", "地址", "收货", "收件", "联系"];
            const isLabelWord = labelWords.some((word) => match.includes(word));
            const isNumber2 = new RegExp("^\\d+$").test(match);
            const isTooShort = match.length < 2;
            const isChinese = new RegExp("[\\u4e00-\\u9fa5]").test(match);
            const isEnglishWithTitle = new RegExp("^[A-Za-z]+[\\u4e00-\\u9fa5]{1,3}$").test(match);
            const isTooLong = isEnglishWithTitle ? false : isChinese ? match.length > 8 : match.length > 25;
            const hasSpecialChars = isChinese ? new RegExp("[^\\u4e00-\\u9fa5a-zA-Z\\s]").test(match) : new RegExp("[^a-zA-Z\\s]").test(match);
            return !isAddressWord && !isLabelWord && !isNumber2 && !isTooShort && !isTooLong && !hasSpecialChars;
          });
          if (validNames.length > 0) {
            name = validNames.sort((a2, b2) => a2.length - b2.length)[0];
            break;
          }
        }
      }
      if (!name) {
        const remainingText = cleanText.trim();
        if (remainingText) {
          const parts = remainingText.split(new RegExp("[\\s，,。.！!？?；;：:]"));
          for (const part of parts) {
            const trimmedPart = part.trim();
            const isChineseName = new RegExp("^[\\u4e00-\\u9fa5]{2,6}$").test(trimmedPart);
            const isEnglishName = new RegExp("^[a-zA-Z]{2,20}$").test(trimmedPart);
            const isEnglishWithTitle = new RegExp("^[a-zA-Z]+[\\u4e00-\\u9fa5]{1,3}$").test(trimmedPart);
            if (isChineseName || isEnglishName || isEnglishWithTitle) {
              const addressWords = ["省", "市", "区", "县", "镇", "村", "路", "街", "号", "楼", "室", "单元", "栋", "层", "小区", "大厦", "广场", "花园"];
              const labelWords = ["姓名", "收货人", "收件人", "联系人", "收", "人", "电话", "手机", "地址", "收货", "收件", "联系"];
              const isAddressWord = addressWords.some((word) => trimmedPart.includes(word));
              const isLabelWord = labelWords.some((word) => trimmedPart.includes(word));
              if (!isAddressWord && !isLabelWord) {
                name = trimmedPart;
                break;
              }
            }
          }
        }
      }
      if (name) {
        name = name.replace(new RegExp("\\s+", "g"), "").trim();
      }
      return { name, mobile: mobile2 };
    }
  }
  const addressDiscern = new AddressDiscern({
    provinces,
    citys,
    areas
  });
  const _sfc_main$1k = {
    name: "u-picker",
    emits: ["update:modelValue", "input", "confirm", "cancel", "columnchange"],
    props: {
      // 通过双向绑定控制组件的弹出与收起
      value: {
        type: Boolean,
        default: false
      },
      modelValue: {
        type: Boolean,
        default: false
      },
      // picker中需要显示的参数
      params: {
        type: [Object, null],
        default() {
          return {
            year: true,
            month: true,
            day: true,
            hour: false,
            minute: false,
            second: false,
            province: true,
            city: true,
            area: true,
            timestamp: true
          };
        }
      },
      // 当mode=selector或者mode=multiSelector时，提供的数组
      range: {
        type: Array,
        default() {
          return [];
        }
      },
      // 当mode=selector或者mode=multiSelector时，提供的默认选中的下标
      defaultSelector: {
        type: Array,
        default() {
          return [0];
        }
      },
      // 当 range 是一个 Array＜Object＞ 时，通过 range-key 来指定 Object 中 key 的值作为选择器显示内容
      rangeKey: {
        type: String,
        default: ""
      },
      // 模式选择，region-地区类型，time-时间类型，selector-单列模式，multiSelector-多列模式
      mode: {
        type: String,
        default: "time"
      },
      // 年份开始时间
      startYear: {
        type: [String, Number],
        default: 1950
      },
      // 年份结束时间
      endYear: {
        type: [String, Number],
        default: 2050
      },
      // "取消"按钮的颜色
      cancelColor: {
        type: String,
        default: "#606266"
      },
      // "确定"按钮的颜色
      confirmColor: {
        type: String,
        default: "#2979ff"
      },
      // 默认显示的时间，2025-07-02 || 2025-07-02 13:01:00 || 2025/07/02
      defaultTime: {
        type: [String, null],
        default: ""
      },
      // 默认显示的地区，可传类似["河北省", "秦皇岛市", "北戴河区"]
      defaultRegion: {
        type: [Array, null],
        default() {
          return [];
        }
      },
      // 时间模式时，是否显示后面的年月日中文提示
      showTimeTag: {
        type: Boolean,
        default: true
      },
      // 默认显示地区的编码，defaultRegion和areaCode同时存在，areaCode优先，可传类似["13", "1303", "130304"]
      areaCode: {
        type: [Array, null],
        default() {
          return [];
        }
      },
      safeAreaInsetBottom: {
        type: Boolean,
        default: false
      },
      // 是否允许通过点击遮罩关闭Picker
      maskCloseAble: {
        type: Boolean,
        default: true
      },
      // 弹出的z-index值
      zIndex: {
        type: [String, Number],
        default: 0
      },
      // 顶部标题
      title: {
        type: String,
        default: ""
      },
      // 取消按钮的文字
      cancelText: {
        type: String,
        default: "取消"
      },
      // 确认按钮的文字
      confirmText: {
        type: String,
        default: "确认"
      },
      // 遮罩的模糊度
      blur: {
        type: [String, Number],
        default: 0
      }
    },
    data() {
      return {
        popupValue: false,
        years: [],
        months: [],
        days: [],
        hours: [],
        minutes: [],
        seconds: [],
        year: 0,
        month: 0,
        day: 0,
        hour: 0,
        minute: 0,
        second: 0,
        reset: false,
        startDate: "",
        endDate: "",
        valueArr: [],
        provinces,
        citys: citys[0],
        areas: areas[0][0],
        province: 0,
        city: 0,
        area: 0,
        moving: false
        // 列是否还在滑动中，微信小程序如果在滑动中就点确定，结果可能不准确
      };
    },
    mounted() {
      this.init();
    },
    computed: {
      valueCom() {
        return this.modelValue;
      },
      propsChange() {
        let { mode, defaultTime, startYear, endYear, defaultRegion, areaCode, defaultSelector } = this;
        return JSON.stringify({ mode, defaultTime, startYear, endYear, defaultRegion, areaCode, defaultSelector });
      },
      regionChange() {
        return `${this.province}-${this.city}`;
      },
      yearAndMonth() {
        return `${this.year}-${this.month}`;
      },
      uZIndex() {
        return this.zIndex ? this.zIndex : this.$u.zIndex.popup;
      },
      // 用来兼容小程序、App、h5
      showColumnCom() {
        return true;
      }
    },
    watch: {
      propsChange() {
        this.reset = true;
        setTimeout(() => this.init(), 10);
      },
      // 如果地区发生变化，为了让picker联动起来，必须重置this.citys和this.areas
      regionChange(val2) {
        this.citys = citys[this.province];
        this.areas = areas[this.province][this.city];
      },
      // watch监听月份的变化，实时变更日的天数，因为不同月份，天数不一样
      // 一个月可能有30，31天，甚至闰年2月的29天，平年2月28天
      yearAndMonth(val2) {
        if (this.params && this.params.year)
          this.setDays();
      },
      // 微信和QQ小程序由于一些奇怪的原因(故同时对所有平台均初始化一遍)，需要重新初始化才能显示正确的值
      valueCom: {
        immediate: true,
        handler(n2) {
          if (n2) {
            this.reset = true;
            setTimeout(() => this.init(), 10);
          }
          this.popupValue = n2;
        }
      }
    },
    methods: {
      // 标识滑动开始，只有微信小程序才有这样的事件
      pickstart() {
      },
      // 标识滑动结束
      pickend() {
      },
      // 对单列和多列形式的判断是否有传入变量的情况
      getItemValue(item, mode) {
        if (this.mode == mode) {
          return typeof item == "object" ? item[this.rangeKey] : item;
        }
      },
      // 小于10前面补0，用于月份，日期，时分秒等
      formatNumber(num) {
        return +num < 10 ? "0" + num : String(num);
      },
      // 生成递进的数组
      generateArray: function(start, end) {
        start = Number(start);
        end = Number(end);
        end = end > start ? end : start;
        return [...Array(end + 1).keys()].slice(start);
      },
      getIndex: function(arr, val2) {
        let index = arr.indexOf(val2);
        return ~index ? index : 0;
      },
      //日期时间处理
      initTimeValue() {
        let fdate;
        if (!this.defaultTime) {
          fdate = timeFormat(Date.now(), "yyyy/mm/dd hh:MM:ss");
        } else {
          fdate = this.defaultTime.replace(/\-/g, "/");
        }
        fdate = fdate && fdate.indexOf("/") == -1 ? `2020/01/01 ${fdate}` : fdate;
        let arr1 = fdate.split(" ");
        let arr1_1 = arr1[0] || "";
        let arr1_2 = arr1[1] || "";
        let arr2;
        if (arr1_1.indexOf("-") > -1) {
          arr2 = arr1_1.split("-");
        } else {
          arr2 = arr1_1.split("/");
        }
        let arr3 = arr1_2.split(":");
        let dateObj = {
          year: Number(arr2[0]),
          month: Number(arr2[1]) || 1,
          day: Number(arr2[2]) || 1,
          hour: Number(arr3[0]) || 0,
          minute: Number(arr3[1]) || 0,
          second: Number(arr3[2]) || 0
        };
        for (let key in dateObj) {
          if (dateObj[key] >= 0 && dateObj[key] < 10)
            dateObj[key] = `0${dateObj[key]}`;
        }
        fdate = `${dateObj.year}/${dateObj.month}/${dateObj.day} ${dateObj.hour}:${dateObj.minute}:${dateObj.second}`;
        let time = null;
        if (fdate)
          time = new Date(fdate);
        else
          time = /* @__PURE__ */ new Date();
        this.year = time.getFullYear();
        this.month = Number(time.getMonth()) + 1;
        this.day = time.getDate();
        this.hour = time.getHours();
        this.minute = time.getMinutes();
        this.second = time.getSeconds();
      },
      init() {
        this.valueArr = [];
        this.reset = false;
        let params = this.params || {};
        if (this.mode == "time") {
          this.initTimeValue();
          if (params.year) {
            this.valueArr.push(0);
            this.setYears();
          }
          if (params.month) {
            this.valueArr.push(0);
            this.setMonths();
          }
          if (params.day) {
            this.valueArr.push(0);
            this.setDays();
          }
          if (params.hour) {
            this.valueArr.push(0);
            this.setHours();
          }
          if (params.minute) {
            this.valueArr.push(0);
            this.setMinutes();
          }
          if (params.second) {
            this.valueArr.push(0);
            this.setSeconds();
          }
        } else if (this.mode == "region") {
          if (params.province) {
            this.valueArr.push(0);
            this.setProvinces();
          }
          if (params.city) {
            this.valueArr.push(0);
            this.setCitys();
          }
          if (params.area) {
            this.valueArr.push(0);
            this.setAreas();
          }
        } else if (this.mode == "selector") {
          this.valueArr = this.defaultSelector;
        } else if (this.mode == "multiSelector") {
          this.valueArr = this.defaultSelector;
          this.multiSelectorValue = this.defaultSelector;
        }
        this.$forceUpdate();
      },
      // 设置picker的某一列值
      setYears() {
        this.years = this.generateArray(this.startYear, this.endYear);
        this.valueArr.splice(this.valueArr.length - 1, 1, this.getIndex(this.years, this.year));
      },
      setMonths() {
        this.months = this.generateArray(1, 12);
        this.valueArr.splice(this.valueArr.length - 1, 1, this.getIndex(this.months, this.month));
      },
      setDays() {
        let params = this.params || {};
        let totalDays = new Date(this.year, this.month, 0).getDate();
        this.days = this.generateArray(1, totalDays);
        let index = 0;
        if (params.year && params.month)
          index = 2;
        else if (params.month)
          index = 1;
        else if (params.year)
          index = 1;
        else
          index = 0;
        if (this.day > this.days.length)
          this.day = this.days.length;
        this.valueArr.splice(index, 1, this.getIndex(this.days, this.day));
      },
      setHours() {
        this.hours = this.generateArray(0, 23);
        this.valueArr.splice(this.valueArr.length - 1, 1, this.getIndex(this.hours, this.hour));
      },
      setMinutes() {
        this.minutes = this.generateArray(0, 59);
        this.valueArr.splice(this.valueArr.length - 1, 1, this.getIndex(this.minutes, this.minute));
      },
      setSeconds() {
        this.seconds = this.generateArray(0, 59);
        this.valueArr.splice(this.valueArr.length - 1, 1, this.getIndex(this.seconds, this.second));
      },
      setProvinces() {
        let params = this.params || {};
        if (!params.province)
          return;
        let tmp = "";
        let useCode = false;
        if (this.areaCode && this.areaCode.length) {
          tmp = this.areaCode[0];
          useCode = true;
        } else if (this.defaultRegion && this.defaultRegion.length)
          tmp = this.defaultRegion[0];
        else
          tmp = 0;
        provinces.map((v2, k) => {
          if (useCode ? v2.code == tmp : v2.name == tmp) {
            tmp = k;
          }
        });
        this.province = tmp;
        this.provinces = provinces;
        this.valueArr.splice(0, 1, this.province);
      },
      setCitys() {
        let params = this.params || {};
        if (!params.city)
          return;
        let tmp = "";
        let useCode = false;
        if (this.areaCode && this.areaCode.length) {
          tmp = this.areaCode[1];
          useCode = true;
        } else if (this.defaultRegion && this.defaultRegion.length)
          tmp = this.defaultRegion[1];
        else
          tmp = 0;
        citys[this.province].map((v2, k) => {
          if (useCode ? v2.code == tmp : v2.name == tmp) {
            tmp = k;
          }
        });
        this.city = tmp;
        this.citys = citys[this.province];
        this.valueArr.splice(1, 1, this.city);
      },
      setAreas() {
        let params = this.params || {};
        if (!params.area)
          return;
        let tmp = "";
        let useCode = false;
        if (this.areaCode && this.areaCode.length) {
          tmp = this.areaCode[2];
          useCode = true;
        } else if (this.defaultRegion && this.defaultRegion.length)
          tmp = this.defaultRegion[2];
        else
          tmp = 0;
        areas[this.province][this.city].map((v2, k) => {
          if (useCode ? v2.code == tmp : v2.name == tmp) {
            tmp = k;
          }
        });
        this.area = tmp;
        this.areas = areas[this.province][this.city];
        this.valueArr.splice(2, 1, this.area);
      },
      close() {
        this.$emit("input", false);
        this.$emit("update:modelValue", false);
      },
      // 用户更改picker的列选项
      change(e2) {
        let params = this.params || {};
        let oldValueArr = JSON.parse(JSON.stringify(this.valueArr || []));
        this.valueArr = e2.detail.value;
        let i2 = 0;
        if (this.mode == "time") {
          if (params.year)
            this.year = this.years[this.valueArr[i2++]];
          if (params.month)
            this.month = this.months[this.valueArr[i2++]];
          if (params.day)
            this.day = this.days[this.valueArr[i2++]];
          if (params.hour)
            this.hour = this.hours[this.valueArr[i2++]];
          if (params.minute)
            this.minute = this.minutes[this.valueArr[i2++]];
          if (params.second)
            this.second = this.seconds[this.valueArr[i2++]];
        } else if (this.mode == "region") {
          if (params.province)
            this.province = this.valueArr[i2++];
          if (params.city)
            this.city = this.valueArr[i2++];
          if (params.area)
            this.area = this.valueArr[i2++];
        } else if (this.mode == "multiSelector") {
          let index = null;
          oldValueArr.map((val2, idx) => {
            if (val2 !== e2.detail.value[idx])
              index = idx;
          });
          if (index !== null) {
            this.$emit("columnchange", {
              column: index,
              index: e2.detail.value[index]
            });
          }
        }
      },
      // 用户点击确定按钮
      getResult(event = null) {
        let params = this.params || {};
        let result = {};
        if (this.mode == "time") {
          if (params.year)
            result.year = this.formatNumber(this.year || 0);
          if (params.month)
            result.month = this.formatNumber(this.month || 0);
          if (params.day)
            result.day = this.formatNumber(this.day || 0);
          if (params.hour)
            result.hour = this.formatNumber(this.hour || 0);
          if (params.minute)
            result.minute = this.formatNumber(this.minute || 0);
          if (params.second)
            result.second = this.formatNumber(this.second || 0);
          if (params.timestamp)
            result.timestamp = this.getTimestamp();
        } else if (this.mode == "region") {
          if (params.province)
            result.province = provinces[this.province];
          if (params.city)
            result.city = citys[this.province][this.city];
          if (params.area)
            result.area = areas[this.province][this.city][this.area];
        } else if (this.mode == "selector") {
          result = this.valueArr;
        } else if (this.mode == "multiSelector") {
          result = this.valueArr;
        }
        if (event)
          this.$emit(event, result);
        this.close();
      },
      // 获取时间戳
      getTimestamp() {
        let time = this.year + "/" + this.month + "/" + this.day + " " + this.hour + ":" + this.minute + ":" + this.second;
        return new Date(time).getTime() / 1e3;
      },
      // 获得数据源
      getDateSource() {
        return {
          provinces,
          citys,
          areas
        };
      },
      // 智能识别省市区
      regionDiscern(text) {
        return addressDiscern.regionDiscern(text);
      },
      // 智能识别收货信息
      addressDiscern(text) {
        return addressDiscern.discern(text);
      },
      stop() {
      }
    }
  };
  function _sfc_render$1j(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_u_popup = resolveEasycom(vue.resolveDynamicComponent("u-popup"), __easycom_3$4);
    return vue.openBlock(), vue.createBlock(_component_u_popup, {
      maskCloseAble: $props.maskCloseAble,
      mode: "bottom",
      popup: false,
      modelValue: $data.popupValue,
      "onUpdate:modelValue": _cache[16] || (_cache[16] = ($event) => $data.popupValue = $event),
      length: "auto",
      safeAreaInsetBottom: $props.safeAreaInsetBottom,
      onClose: $options.close,
      "z-index": $options.uZIndex,
      blur: $props.blur
    }, {
      default: vue.withCtx(() => [
        vue.createElementVNode("view", { class: "u-datetime-picker" }, [
          vue.createElementVNode(
            "view",
            {
              class: "u-picker-header",
              onTouchmove: _cache[3] || (_cache[3] = vue.withModifiers((...args) => $options.stop && $options.stop(...args), ["stop", "prevent"]))
            },
            [
              vue.createElementVNode(
                "view",
                {
                  class: "u-btn-picker u-btn-picker--tips",
                  style: vue.normalizeStyle({ color: $props.cancelColor }),
                  "hover-class": "u-opacity",
                  "hover-stay-time": 150,
                  onClick: _cache[0] || (_cache[0] = ($event) => $options.getResult("cancel"))
                },
                vue.toDisplayString($props.cancelText),
                5
                /* TEXT, STYLE */
              ),
              vue.createElementVNode(
                "view",
                { class: "u-picker__title" },
                vue.toDisplayString($props.title),
                1
                /* TEXT */
              ),
              vue.createElementVNode(
                "view",
                {
                  class: "u-btn-picker u-btn-picker--primary",
                  style: vue.normalizeStyle({ color: $data.moving ? $props.cancelColor : $props.confirmColor }),
                  "hover-class": "u-opacity",
                  "hover-stay-time": 150,
                  onTouchmove: _cache[1] || (_cache[1] = vue.withModifiers((...args) => $options.stop && $options.stop(...args), ["stop"])),
                  onClick: _cache[2] || (_cache[2] = vue.withModifiers(($event) => $options.getResult("confirm"), ["stop"]))
                },
                vue.toDisplayString($props.confirmText),
                37
                /* TEXT, STYLE, NEED_HYDRATION */
              )
            ],
            32
            /* NEED_HYDRATION */
          ),
          vue.createElementVNode("view", { class: "u-picker-body" }, [
            $props.mode == "region" ? (vue.openBlock(), vue.createElementBlock("picker-view", {
              key: 0,
              value: $data.valueArr,
              onChange: _cache[4] || (_cache[4] = (...args) => $options.change && $options.change(...args)),
              class: "u-picker-view",
              onPickstart: _cache[5] || (_cache[5] = (...args) => $options.pickstart && $options.pickstart(...args)),
              onPickend: _cache[6] || (_cache[6] = (...args) => $options.pickend && $options.pickend(...args))
            }, [
              $options.showColumnCom && $props.params && $props.params.province ? (vue.openBlock(), vue.createElementBlock("picker-view-column", { key: 0 }, [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($data.provinces, (item, index) => {
                    return vue.openBlock(), vue.createElementBlock("view", {
                      class: "u-column-item",
                      key: index
                    }, [
                      vue.createElementVNode(
                        "view",
                        { class: "u-line-1" },
                        vue.toDisplayString(item.name),
                        1
                        /* TEXT */
                      )
                    ]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                ))
              ])) : vue.createCommentVNode("v-if", true),
              $options.showColumnCom && $props.params && $props.params.city ? (vue.openBlock(), vue.createElementBlock("picker-view-column", { key: 1 }, [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($data.citys, (item, index) => {
                    return vue.openBlock(), vue.createElementBlock("view", {
                      class: "u-column-item",
                      key: index
                    }, [
                      vue.createElementVNode(
                        "view",
                        { class: "u-line-1" },
                        vue.toDisplayString(item.name),
                        1
                        /* TEXT */
                      )
                    ]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                ))
              ])) : vue.createCommentVNode("v-if", true),
              $options.showColumnCom && $props.params && $props.params.area ? (vue.openBlock(), vue.createElementBlock("picker-view-column", { key: 2 }, [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($data.areas, (item, index) => {
                    return vue.openBlock(), vue.createElementBlock("view", {
                      class: "u-column-item",
                      key: index
                    }, [
                      vue.createElementVNode(
                        "view",
                        { class: "u-line-1" },
                        vue.toDisplayString(item.name),
                        1
                        /* TEXT */
                      )
                    ]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                ))
              ])) : vue.createCommentVNode("v-if", true)
            ], 40, ["value"])) : $props.mode == "time" ? (vue.openBlock(), vue.createElementBlock("picker-view", {
              key: 1,
              value: $data.valueArr,
              onChange: _cache[7] || (_cache[7] = (...args) => $options.change && $options.change(...args)),
              class: "u-picker-view",
              onPickstart: _cache[8] || (_cache[8] = (...args) => $options.pickstart && $options.pickstart(...args)),
              onPickend: _cache[9] || (_cache[9] = (...args) => $options.pickend && $options.pickend(...args))
            }, [
              $options.showColumnCom && $props.params && $props.params.year ? (vue.openBlock(), vue.createElementBlock("picker-view-column", { key: 0 }, [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($data.years, (item, index) => {
                    return vue.openBlock(), vue.createElementBlock("view", {
                      class: "u-column-item",
                      key: index
                    }, [
                      vue.createTextVNode(
                        vue.toDisplayString(item) + " ",
                        1
                        /* TEXT */
                      ),
                      $props.showTimeTag ? (vue.openBlock(), vue.createElementBlock("text", {
                        key: 0,
                        class: "u-text"
                      }, "年")) : vue.createCommentVNode("v-if", true)
                    ]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                ))
              ])) : vue.createCommentVNode("v-if", true),
              $options.showColumnCom && $props.params && $props.params.month ? (vue.openBlock(), vue.createElementBlock("picker-view-column", { key: 1 }, [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($data.months, (item, index) => {
                    return vue.openBlock(), vue.createElementBlock("view", {
                      class: "u-column-item",
                      key: index
                    }, [
                      vue.createTextVNode(
                        vue.toDisplayString($options.formatNumber(item)) + " ",
                        1
                        /* TEXT */
                      ),
                      $props.showTimeTag ? (vue.openBlock(), vue.createElementBlock("text", {
                        key: 0,
                        class: "u-text"
                      }, "月")) : vue.createCommentVNode("v-if", true)
                    ]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                ))
              ])) : vue.createCommentVNode("v-if", true),
              $options.showColumnCom && $props.params && $props.params.day ? (vue.openBlock(), vue.createElementBlock("picker-view-column", { key: 2 }, [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($data.days, (item, index) => {
                    return vue.openBlock(), vue.createElementBlock("view", {
                      class: "u-column-item",
                      key: index
                    }, [
                      vue.createTextVNode(
                        vue.toDisplayString($options.formatNumber(item)) + " ",
                        1
                        /* TEXT */
                      ),
                      $props.showTimeTag ? (vue.openBlock(), vue.createElementBlock("text", {
                        key: 0,
                        class: "u-text"
                      }, "日")) : vue.createCommentVNode("v-if", true)
                    ]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                ))
              ])) : vue.createCommentVNode("v-if", true),
              $options.showColumnCom && $props.params && $props.params.hour ? (vue.openBlock(), vue.createElementBlock("picker-view-column", { key: 3 }, [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($data.hours, (item, index) => {
                    return vue.openBlock(), vue.createElementBlock("view", {
                      class: "u-column-item",
                      key: index
                    }, [
                      vue.createTextVNode(
                        vue.toDisplayString($options.formatNumber(item)) + " ",
                        1
                        /* TEXT */
                      ),
                      $props.showTimeTag ? (vue.openBlock(), vue.createElementBlock("text", {
                        key: 0,
                        class: "u-text"
                      }, "时")) : vue.createCommentVNode("v-if", true)
                    ]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                ))
              ])) : vue.createCommentVNode("v-if", true),
              $options.showColumnCom && $props.params && $props.params.minute ? (vue.openBlock(), vue.createElementBlock("picker-view-column", { key: 4 }, [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($data.minutes, (item, index) => {
                    return vue.openBlock(), vue.createElementBlock("view", {
                      class: "u-column-item",
                      key: index
                    }, [
                      vue.createTextVNode(
                        vue.toDisplayString($options.formatNumber(item)) + " ",
                        1
                        /* TEXT */
                      ),
                      $props.showTimeTag ? (vue.openBlock(), vue.createElementBlock("text", {
                        key: 0,
                        class: "u-text"
                      }, "分")) : vue.createCommentVNode("v-if", true)
                    ]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                ))
              ])) : vue.createCommentVNode("v-if", true),
              $options.showColumnCom && $props.params && $props.params.second ? (vue.openBlock(), vue.createElementBlock("picker-view-column", { key: 5 }, [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($data.seconds, (item, index) => {
                    return vue.openBlock(), vue.createElementBlock("view", {
                      class: "u-column-item",
                      key: index
                    }, [
                      vue.createTextVNode(
                        vue.toDisplayString($options.formatNumber(item)) + " ",
                        1
                        /* TEXT */
                      ),
                      $props.showTimeTag ? (vue.openBlock(), vue.createElementBlock("text", {
                        key: 0,
                        class: "u-text"
                      }, "秒")) : vue.createCommentVNode("v-if", true)
                    ]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                ))
              ])) : vue.createCommentVNode("v-if", true)
            ], 40, ["value"])) : $props.mode == "selector" ? (vue.openBlock(), vue.createElementBlock("picker-view", {
              key: 2,
              value: $data.valueArr,
              onChange: _cache[10] || (_cache[10] = (...args) => $options.change && $options.change(...args)),
              class: "u-picker-view",
              onPickstart: _cache[11] || (_cache[11] = (...args) => $options.pickstart && $options.pickstart(...args)),
              onPickend: _cache[12] || (_cache[12] = (...args) => $options.pickend && $options.pickend(...args))
            }, [
              $options.showColumnCom ? (vue.openBlock(), vue.createElementBlock("picker-view-column", { key: 0 }, [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($props.range, (item, index) => {
                    return vue.openBlock(), vue.createElementBlock("view", {
                      class: "u-column-item",
                      key: index
                    }, [
                      vue.createElementVNode(
                        "view",
                        { class: "u-line-1" },
                        vue.toDisplayString($options.getItemValue(item, "selector")),
                        1
                        /* TEXT */
                      )
                    ]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                ))
              ])) : vue.createCommentVNode("v-if", true)
            ], 40, ["value"])) : $props.mode == "multiSelector" ? (vue.openBlock(), vue.createElementBlock("picker-view", {
              key: 3,
              value: $data.valueArr,
              onChange: _cache[13] || (_cache[13] = (...args) => $options.change && $options.change(...args)),
              class: "u-picker-view",
              onPickstart: _cache[14] || (_cache[14] = (...args) => $options.pickstart && $options.pickstart(...args)),
              onPickend: _cache[15] || (_cache[15] = (...args) => $options.pickend && $options.pickend(...args))
            }, [
              $options.showColumnCom ? (vue.openBlock(true), vue.createElementBlock(
                vue.Fragment,
                { key: 0 },
                vue.renderList($props.range, (item, index) => {
                  return vue.openBlock(), vue.createElementBlock("picker-view-column", { key: index }, [
                    (vue.openBlock(true), vue.createElementBlock(
                      vue.Fragment,
                      null,
                      vue.renderList(item, (item1, index1) => {
                        return vue.openBlock(), vue.createElementBlock("view", {
                          class: "u-column-item",
                          key: index1
                        }, [
                          vue.createElementVNode(
                            "view",
                            { class: "u-line-1" },
                            vue.toDisplayString($options.getItemValue(item1, "multiSelector")),
                            1
                            /* TEXT */
                          )
                        ]);
                      }),
                      128
                      /* KEYED_FRAGMENT */
                    ))
                  ]);
                }),
                128
                /* KEYED_FRAGMENT */
              )) : vue.createCommentVNode("v-if", true)
            ], 40, ["value"])) : vue.createCommentVNode("v-if", true)
          ])
        ])
      ]),
      _: 1
      /* STABLE */
    }, 8, ["maskCloseAble", "modelValue", "safeAreaInsetBottom", "onClose", "z-index", "blur"]);
  }
  const __easycom_1$3 = /* @__PURE__ */ _export_sfc(_sfc_main$1k, [["render", _sfc_render$1j], ["__scopeId", "data-v-e8b59df9"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/uni_modules/vk-uview-ui/components/u-picker/u-picker.vue"]]);
  const _sfc_main$1j = {
    name: "u-line-progress",
    props: {
      // 两端是否显示半圆形
      round: {
        type: Boolean,
        default: true
      },
      // 主题颜色
      type: {
        type: String,
        default: ""
      },
      // 激活部分的颜色
      activeColor: {
        type: String,
        default: "#19be6b"
      },
      inactiveColor: {
        type: String,
        default: "#ececec"
      },
      // 进度百分比，数值
      percent: {
        type: Number,
        default: 0
      },
      // 是否在进度条内部显示百分比的值
      showPercent: {
        type: Boolean,
        default: true
      },
      // 进度条的高度，单位rpx
      height: {
        type: [Number, String],
        default: 28
      },
      // 是否显示条纹
      striped: {
        type: Boolean,
        default: false
      },
      // 条纹是否显示活动状态
      stripedActive: {
        type: Boolean,
        default: false
      }
    },
    data() {
      return {};
    },
    computed: {
      progressStyle() {
        let style = {};
        style.width = this.percent + "%";
        if (this.activeColor)
          style.backgroundColor = this.activeColor;
        return style;
      }
    },
    methods: {}
  };
  function _sfc_render$1i(_ctx, _cache, $props, $setup, $data, $options) {
    return vue.openBlock(), vue.createElementBlock(
      "view",
      {
        class: "u-progress",
        style: vue.normalizeStyle({
          borderRadius: $props.round ? "100rpx" : 0,
          height: $props.height + "rpx",
          backgroundColor: $props.inactiveColor
        })
      },
      [
        vue.createElementVNode(
          "view",
          {
            class: vue.normalizeClass([[
              $props.type ? `u-type-${$props.type}-bg` : "",
              $props.striped ? "u-striped" : "",
              $props.striped && $props.stripedActive ? "u-striped-active" : ""
            ], "u-active"]),
            style: vue.normalizeStyle([$options.progressStyle])
          },
          [
            _ctx.$slots.default || _ctx.$slots.$default ? vue.renderSlot(_ctx.$slots, "default", { key: 0 }, void 0, true) : $props.showPercent ? (vue.openBlock(), vue.createElementBlock(
              vue.Fragment,
              { key: 1 },
              [
                vue.createTextVNode(
                  vue.toDisplayString($props.percent + "%"),
                  1
                  /* TEXT */
                )
              ],
              64
              /* STABLE_FRAGMENT */
            )) : vue.createCommentVNode("v-if", true)
          ],
          6
          /* CLASS, STYLE */
        )
      ],
      4
      /* STYLE */
    );
  }
  const __easycom_2$6 = /* @__PURE__ */ _export_sfc(_sfc_main$1j, [["render", _sfc_render$1i], ["__scopeId", "data-v-af2fba7d"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/uni_modules/vk-uview-ui/components/u-line-progress/u-line-progress.vue"]]);
  const _sfc_main$1i = {
    name: "u-upload",
    emits: ["update:file-list", "on-oversize", "on-list-change", "on-preview", "on-remove", "on-success", "on-change", "on-error", "on-progress", "on-uploaded", "on-choose-complete", "on-choose-fail"],
    props: {
      //是否显示组件自带的图片预览功能
      showUploadList: {
        type: Boolean,
        default: true
      },
      // 后端地址
      action: {
        type: String,
        default: ""
      },
      // 最大上传数量
      maxCount: {
        type: [String, Number],
        default: 52
      },
      //  是否显示进度条
      showProgress: {
        type: Boolean,
        default: true
      },
      // 是否启用
      disabled: {
        type: Boolean,
        default: false
      },
      // 预览上传的图片时的裁剪模式，和image组件mode属性一致
      imageMode: {
        type: String,
        default: "aspectFill"
      },
      // 头部信息
      header: {
        type: Object,
        default() {
          return {};
        }
      },
      // 额外携带的参数
      formData: {
        type: Object,
        default() {
          return {};
        }
      },
      // 上传的文件字段名
      name: {
        type: String,
        default: "file"
      },
      // 所选的图片的尺寸, 可选值为original compressed
      sizeType: {
        type: Array,
        default() {
          return ["original", "compressed"];
        }
      },
      sourceType: {
        type: Array,
        default() {
          return ["album", "camera"];
        }
      },
      // 是否在点击预览图后展示全屏图片预览
      previewFullImage: {
        type: Boolean,
        default: true
      },
      // 是否开启图片多选，部分安卓机型不支持
      multiple: {
        type: Boolean,
        default: true
      },
      // 是否展示删除按钮
      deletable: {
        type: Boolean,
        default: true
      },
      // 文件大小限制，单位为byte
      maxSize: {
        type: [String, Number],
        default: Number.MAX_VALUE
      },
      // 显示已上传的文件列表
      fileList: {
        type: Array,
        default() {
          return [];
        }
      },
      // 上传区域的提示文字
      uploadText: {
        type: String,
        default: "选择图片"
      },
      // 是否自动上传
      autoUpload: {
        type: Boolean,
        default: true
      },
      // 是否显示toast消息提示
      showTips: {
        type: Boolean,
        default: true
      },
      // 是否通过slot自定义传入选择图标的按钮
      customBtn: {
        type: Boolean,
        default: false
      },
      // 内部预览图片区域和选择图片按钮的区域宽度
      width: {
        type: [String, Number],
        default: 200
      },
      // 内部预览图片区域和选择图片按钮的区域高度
      height: {
        type: [String, Number],
        default: 200
      },
      // 右上角关闭按钮的背景颜色
      delBgColor: {
        type: String,
        default: "#fa3534"
      },
      // 右上角关闭按钮的叉号图标的颜色
      delColor: {
        type: String,
        default: "#ffffff"
      },
      // 右上角删除图标名称，只能为uView内置图标
      delIcon: {
        type: String,
        default: "close"
      },
      // 右下角成功图标名称，只能为uView内置图标
      successIcon: {
        type: String,
        default: "checkbox-mark"
      },
      // 右下角成功的叉号图标的颜色
      successColor: {
        type: String,
        default: "#ffffff"
      },
      // 如果上传后的返回值为json字符串，是否自动转json
      toJson: {
        type: Boolean,
        default: true
      },
      // 上传前的钩子，每个文件上传前都会执行
      beforeUpload: {
        type: Function,
        default: null
      },
      // 移除文件前的钩子
      beforeRemove: {
        type: Function,
        default: null
      },
      // 允许上传的图片后缀
      limitType: {
        type: Array,
        default() {
          return ["png", "jpg", "jpeg", "webp", "gif", "image"];
        }
      },
      // 在各个回调事件中的最后一个参数返回，用于区别是哪一个组件的事件
      index: {
        type: [Number, String],
        default: ""
      }
    },
    mounted() {
    },
    data() {
      return {
        lists: [],
        isInCount: true,
        uploading: false
      };
    },
    watch: {
      fileList: {
        immediate: true,
        handler(val2) {
          let that = this;
          let lists = JSON.parse(JSON.stringify(that.lists));
          val2.map((value) => {
            let tmp = lists.some((val3) => {
              return val3.url == value.url;
            });
            if (!tmp) {
              lists.push({ url: value.url, error: false, progress: 100 });
            }
          });
          that.lists = JSON.parse(JSON.stringify(lists));
        }
      },
      // 监听lists的变化，发出事件
      lists: {
        deep: true,
        handler(n2) {
          this.$emit("update:file-list", n2);
          this.$emit("on-list-change", n2, this.index);
        }
      }
    },
    methods: {
      // 清除列表
      clear() {
        this.lists = [];
      },
      // 重新上传队列中上传失败的所有文件
      reUpload() {
        this.uploadFile();
      },
      // 选择图片
      selectFile() {
        let that = this;
        if (that.disabled)
          return;
        const { name = "", maxCount, multiple, maxSize, sizeType, camera, compressed, maxDuration, sourceType } = that;
        let chooseFile = null;
        let lists = JSON.parse(JSON.stringify(that.lists));
        const newMaxCount = maxCount - lists.length;
        chooseFile = new Promise((resolve, reject) => {
          uni.chooseImage({
            count: multiple ? newMaxCount > 9 ? 9 : newMaxCount : 1,
            sourceType,
            sizeType,
            success: resolve,
            fail: reject
          });
        });
        chooseFile.then((res2) => {
          let listOldLength = that.lists.length;
          res2.tempFiles.map((val2, index) => {
            if (!that.checkFileExt(val2))
              return;
            if (!multiple && index >= 1)
              return;
            if (val2.size > maxSize) {
              that.$emit("on-oversize", val2, that.lists, that.index);
              that.showToast("超出允许的文件大小");
            } else {
              if (maxCount <= lists.length) {
                that.$emit("on-exceed", val2, that.lists, that.index);
                that.showToast("超出最大允许的文件个数");
                return;
              }
              lists.push({
                url: val2.path,
                progress: 0,
                error: false,
                file: val2
              });
            }
          });
          this.deepClone(lists, that.lists);
          that.$emit("on-choose-complete", that.lists, that.index);
          if (that.autoUpload)
            that.uploadFile(listOldLength);
        }).catch((error) => {
          that.$emit("on-choose-fail", error);
        });
      },
      // 提示用户消息
      showToast(message2, force = false) {
        if (this.showTips || force) {
          uni.showToast({
            title: message2,
            icon: "none"
          });
        }
      },
      // 该方法供用户通过ref调用，手动上传
      upload() {
        this.uploadFile();
      },
      // 对失败的图片重新上传
      retry(index) {
        this.lists[index].progress = 0;
        this.lists[index].error = false;
        this.lists[index].response = null;
        uni.showLoading({
          title: "重新上传"
        });
        this.uploadFile(index);
      },
      // 上传图片
      async uploadFile(index = 0) {
        if (this.disabled)
          return;
        if (this.uploading)
          return;
        if (index >= this.lists.length) {
          this.$emit("on-uploaded", this.lists, this.index);
          return;
        }
        if (this.lists[index].progress == 100) {
          if (this.autoUpload == false)
            this.uploadFile(index + 1);
          return;
        }
        if (this.beforeUpload && typeof this.beforeUpload === "function") {
          let beforeResponse = this.beforeUpload.bind(this.$u.$parent.call(this))(index, this.lists);
          if (!!beforeResponse && typeof beforeResponse.then === "function") {
            await beforeResponse.then((res2) => {
            }).catch((err) => {
              return this.uploadFile(index + 1);
            });
          } else if (beforeResponse === false) {
            return this.uploadFile(index + 1);
          } else
            ;
        }
        if (!this.action) {
          this.showToast("请配置上传地址", true);
          return;
        }
        this.lists[index].error = false;
        this.uploading = true;
        const task = uni.uploadFile({
          url: this.action,
          filePath: this.lists[index].url,
          name: this.name,
          formData: this.formData,
          header: this.header,
          success: (res2) => {
            let data = this.toJson && this.$u.test.jsonString(res2.data) ? JSON.parse(res2.data) : res2.data;
            if (![200, 201, 204].includes(res2.statusCode)) {
              this.uploadError(index, data);
            } else {
              this.lists[index].response = data;
              this.lists[index].progress = 100;
              this.lists[index].error = false;
              this.$emit("on-success", data, index, this.lists, this.index);
            }
          },
          fail: (e2) => {
            this.uploadError(index, e2);
          },
          complete: (res2) => {
            uni.hideLoading();
            this.uploading = false;
            this.uploadFile(index + 1);
            this.$emit("on-change", res2, index, this.lists, this.index);
          }
        });
        task.onProgressUpdate((res2) => {
          if (res2.progress > 0) {
            this.lists[index].progress = res2.progress;
            this.$emit("on-progress", res2, index, this.lists, this.index);
          }
        });
      },
      // 上传失败
      uploadError(index, err) {
        this.lists[index].progress = 0;
        this.lists[index].error = true;
        this.lists[index].response = null;
        this.$emit("on-error", err, index, this.lists, this.index);
        this.showToast("上传失败，请重试");
      },
      // 删除一个图片
      deleteItem(index) {
        uni.showModal({
          title: "提示",
          content: "您确定要删除此项吗？",
          success: async (res2) => {
            if (res2.confirm) {
              if (this.beforeRemove && typeof this.beforeRemove === "function") {
                let beforeResponse = this.beforeRemove.bind(this.$u.$parent.call(this))(index, this.lists);
                if (!!beforeResponse && typeof beforeResponse.then === "function") {
                  await beforeResponse.then((res3) => {
                    this.handlerDeleteItem(index);
                  }).catch((err) => {
                    this.showToast("已终止移除");
                  });
                } else if (beforeResponse === false) {
                  this.showToast("已终止移除");
                } else {
                  this.handlerDeleteItem(index);
                }
              } else {
                this.handlerDeleteItem(index);
              }
            }
          }
        });
      },
      // 执行移除图片的动作，上方代码只是判断是否可以移除
      handlerDeleteItem(index) {
        if (this.lists[index].progress < 100 && this.lists[index].progress > 0) {
          typeof this.lists[index].uploadTask != "undefined" && this.lists[index].uploadTask.abort();
        }
        this.lists.splice(index, 1);
        this.$forceUpdate();
        this.$emit("on-remove", index, this.lists, this.index);
      },
      // 用户通过ref手动的形式，移除一张图片
      remove(index) {
        if (index >= 0 && index < this.lists.length) {
          this.lists.splice(index, 1);
          this.$emit("on-list-change", this.lists, this.index);
        }
      },
      // 预览图片
      doPreviewImage(url2, index) {
        if (!this.previewFullImage) {
          this.$emit("on-preview", url2, this.lists, this.index);
          return;
        }
        const images = this.lists.map((item) => item.url || item.path);
        uni.previewImage({
          urls: images,
          current: url2,
          success: () => {
            this.$emit("on-preview", url2, this.lists, this.index);
          },
          fail: () => {
            uni.showToast({
              title: "预览图片失败",
              icon: "none"
            });
          }
        });
      },
      // 判断文件后缀是否允许
      checkFileExt(file) {
        let noArrowExt = false;
        let fileExt = "";
        const reg = /.+\./;
        fileExt = file.path.replace(reg, "").toLowerCase();
        noArrowExt = this.limitType.some((ext) => {
          return ext.toLowerCase() === fileExt;
        });
        if (!noArrowExt)
          this.showToast(`不允许选择${fileExt}格式的文件`);
        return noArrowExt;
      },
      // 深拷贝
      deepClone(obj, newObj) {
        for (let k in obj) {
          const value = obj[k];
          if (Array.isArray(value)) {
            newObj[k] = [];
            this.deepClone(value, newObj[k]);
          } else if (value !== null && typeof value === "object") {
            newObj[k] = {};
            this.deepClone(value, newObj[k]);
          } else {
            newObj[k] = value;
          }
        }
      }
    }
  };
  function _sfc_render$1h(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_u_icon = resolveEasycom(vue.resolveDynamicComponent("u-icon"), __easycom_2$b);
    const _component_u_line_progress = resolveEasycom(vue.resolveDynamicComponent("u-line-progress"), __easycom_2$6);
    return !$props.disabled ? (vue.openBlock(), vue.createElementBlock("view", {
      key: 0,
      class: "u-upload"
    }, [
      $props.showUploadList ? (vue.openBlock(true), vue.createElementBlock(
        vue.Fragment,
        { key: 0 },
        vue.renderList($data.lists, (item, index) => {
          return vue.openBlock(), vue.createElementBlock(
            "view",
            {
              class: "u-list-item u-preview-wrap",
              key: index,
              style: vue.normalizeStyle({
                width: _ctx.$u.addUnit($props.width),
                height: _ctx.$u.addUnit($props.height)
              })
            },
            [
              $props.deletable ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 0,
                class: "u-delete-icon",
                onClick: vue.withModifiers(($event) => $options.deleteItem(index), ["stop"]),
                style: vue.normalizeStyle({
                  background: $props.delBgColor
                })
              }, [
                vue.createVNode(_component_u_icon, {
                  class: "u-icon",
                  name: $props.delIcon,
                  size: "20",
                  color: $props.delColor
                }, null, 8, ["name", "color"])
              ], 12, ["onClick"])) : vue.createCommentVNode("v-if", true),
              $props.showProgress && item.progress > 0 && item.progress != 100 && !item.error ? (vue.openBlock(), vue.createBlock(_component_u_line_progress, {
                key: 1,
                "show-percent": false,
                height: "16",
                class: "u-progress",
                percent: item.progress
              }, null, 8, ["percent"])) : vue.createCommentVNode("v-if", true),
              item.error ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 2,
                onClick: vue.withModifiers(($event) => $options.retry(index), ["stop"]),
                class: "u-error-btn"
              }, "点击重试", 8, ["onClick"])) : vue.createCommentVNode("v-if", true),
              !item.isImage ? (vue.openBlock(), vue.createElementBlock("image", {
                key: 3,
                onClick: vue.withModifiers(($event) => $options.doPreviewImage(item.url || item.path, index), ["stop"]),
                class: "u-preview-image",
                src: item.url || item.path,
                mode: $props.imageMode
              }, null, 8, ["onClick", "src", "mode"])) : vue.createCommentVNode("v-if", true)
            ],
            4
            /* STYLE */
          );
        }),
        128
        /* KEYED_FRAGMENT */
      )) : vue.createCommentVNode("v-if", true),
      vue.renderSlot(_ctx.$slots, "file", { file: $data.lists }, void 0, true),
      $props.maxCount > $data.lists.length ? (vue.openBlock(), vue.createElementBlock("view", {
        key: 1,
        style: { "display": "inline-block" },
        onClick: _cache[0] || (_cache[0] = (...args) => $options.selectFile && $options.selectFile(...args))
      }, [
        vue.renderSlot(_ctx.$slots, "addBtn", {}, void 0, true),
        !$props.customBtn ? (vue.openBlock(), vue.createElementBlock(
          "view",
          {
            key: 0,
            class: "u-list-item u-add-wrap",
            "hover-class": "u-add-wrap__hover",
            "hover-stay-time": "150",
            style: vue.normalizeStyle({
              width: _ctx.$u.addUnit($props.width),
              height: _ctx.$u.addUnit($props.height)
            })
          },
          [
            vue.createVNode(_component_u_icon, {
              name: "plus",
              class: "u-add-btn",
              size: "40"
            }),
            vue.createElementVNode(
              "view",
              { class: "u-add-tips" },
              vue.toDisplayString($props.uploadText),
              1
              /* TEXT */
            )
          ],
          4
          /* STYLE */
        )) : vue.createCommentVNode("v-if", true)
      ])) : vue.createCommentVNode("v-if", true)
    ])) : vue.createCommentVNode("v-if", true);
  }
  const __easycom_3$3 = /* @__PURE__ */ _export_sfc(_sfc_main$1i, [["render", _sfc_render$1h], ["__scopeId", "data-v-e7606f58"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/uni_modules/vk-uview-ui/components/u-upload/u-upload.vue"]]);
  function broadcast(componentName, eventName, params) {
  }
  const Emitter = {
    methods: {
      /**
       * 派发 (向上查找) (一个)
       * @param componentName // 需要找的组件的名称
       * @param eventName // 事件名称
       * @param params // 需要传递的参数
       */
      dispatch(componentName, eventName, params) {
        let parent = this.$parent || this.$root;
        let name = parent.$options.name;
        while (parent && (!name || name !== componentName)) {
          parent = parent.$parent;
          if (parent) {
            name = parent.$options.name;
          }
        }
        if (parent) {
          parent[eventName](params);
        }
      },
      /**
       * 广播 (向下查找) (广播多个)
       * @param componentName // 需要找的组件的名称
       * @param eventName // 事件名称
       * @param params // 需要传递的参数
       */
      broadcast(componentName, eventName, params) {
        broadcast.call(this, componentName, eventName, params);
      }
    }
  };
  const _sfc_main$1h = {
    name: "u-input",
    emits: ["update:modelValue", "input", "change", "confirm", "clear", "blur", "focus", "click", "touchstart"],
    mixins: [Emitter],
    props: {
      value: {
        type: [String, Number],
        default: ""
      },
      modelValue: {
        type: [String, Number],
        default: ""
      },
      // 输入框的类型，textarea，text，number
      type: {
        type: String,
        default: "text"
      },
      inputAlign: {
        type: String,
        default: ""
      },
      placeholder: {
        type: String,
        default: "请输入内容"
      },
      disabled: {
        type: Boolean,
        default: false
      },
      maxlength: {
        type: [Number, String],
        default: 140
      },
      placeholderStyle: {
        type: String,
        default: "color: #c0c4cc;"
      },
      confirmType: {
        type: String,
        default: "done"
      },
      // 输入框的自定义样式
      customStyle: {
        type: Object,
        default() {
          return {};
        }
      },
      // 如果 textarea 是在一个 position:fixed 的区域，需要显示指定属性 fixed 为 true
      fixed: {
        type: Boolean,
        default: false
      },
      // 是否自动获得焦点
      focus: {
        type: Boolean,
        default: false
      },
      // 密码类型时，是否显示右侧的密码图标
      passwordIcon: {
        type: Boolean,
        default: true
      },
      // input|textarea是否显示边框
      border: {
        type: Boolean,
        default: false
      },
      // 输入框的边框颜色
      borderColor: {
        type: String,
        default: "#dcdfe6"
      },
      autoHeight: {
        type: Boolean,
        default: true
      },
      // type=select时，旋转右侧的图标，标识当前处于打开还是关闭select的状态
      // open-打开，close-关闭
      selectOpen: {
        type: Boolean,
        default: false
      },
      // 高度，单位rpx
      height: {
        type: [Number, String],
        default: ""
      },
      // 是否可清空
      clearable: {
        type: [Boolean, String]
      },
      // 指定光标与键盘的距离，单位 px
      cursorSpacing: {
        type: [Number, String],
        default: 0
      },
      // 光标起始位置，自动聚焦时有效，需与selection-end搭配使用
      selectionStart: {
        type: [Number, String],
        default: -1
      },
      // 光标结束位置，自动聚焦时有效，需与selection-start搭配使用
      selectionEnd: {
        type: [Number, String],
        default: -1
      },
      // 是否自动去除两端的空格
      trim: {
        type: Boolean,
        default: true
      },
      // 是否显示键盘上方带有”完成“按钮那一栏
      showConfirmbar: {
        type: Boolean,
        default: true
      },
      // 弹出键盘时是否自动调节高度，uni-app默认值是true
      adjustPosition: {
        type: Boolean,
        default: true
      },
      // input的背景色
      backgroundColor: {
        type: String
      },
      // input的padding
      padding: {
        type: String
      }
    },
    data() {
      return {
        defaultValue: "",
        inputHeight: 70,
        // input的高度
        textareaHeight: 100,
        // textarea的高度
        validateState: false,
        // 当前input的验证状态，用于错误时，边框是否改为红色
        focused: false,
        // 当前是否处于获得焦点的状态
        showPassword: false,
        // 是否预览密码
        lastValue: "",
        // 用于头条小程序，判断@input中，前后的值是否发生了变化，因为头条中文下，按下键没有输入内容，也会触发@input时间
        uForm: {
          inputAlign: "",
          clearable: ""
        },
        showCover: false
      };
    },
    watch: {
      valueCom(nVal, oVal) {
        this.defaultValue = nVal;
        if (nVal != oVal && this.type == "select")
          this.handleInput({
            detail: {
              value: nVal
            }
          });
      },
      defaultValue(nVal, oVal) {
        if (nVal && nVal.length > this.maxlength) {
          setTimeout(() => {
            nVal = nVal.substring(0, this.maxlength);
            this.handleInput({
              detail: {
                value: nVal
              }
            });
          }, 0);
        }
      }
    },
    computed: {
      valueCom() {
        return this.modelValue;
      },
      inputAlignCom() {
        return this.inputAlign || this.uForm.inputAlign || "left";
      },
      clearableCom() {
        if (typeof this.clearable == "boolean")
          return this.clearable;
        if (typeof this.uForm.clearable == "boolean")
          return this.uForm.clearable;
        return true;
      },
      // 因为uniapp的input组件的maxlength组件必须要数值，这里转为数值，给用户可以传入字符串数值
      inputMaxlength() {
        return Number(this.maxlength);
      },
      getStyle() {
        let style = {};
        style.minHeight = this.height ? this.height + "rpx" : this.type == "textarea" ? this.textareaHeight + "rpx" : this.inputHeight + "rpx";
        style = Object.assign(style, this.customStyle);
        return style;
      },
      //
      getCursorSpacing() {
        return Number(this.cursorSpacing);
      },
      // 光标起始位置
      uSelectionStart() {
        return String(this.selectionStart);
      },
      // 光标结束位置
      uSelectionEnd() {
        return String(this.selectionEnd);
      }
    },
    created() {
      this.defaultValue = this.valueCom;
    },
    mounted() {
      let parent = this.$u.$parent.call(this, "u-form");
      if (parent) {
        Object.keys(this.uForm).map((key) => {
          this.uForm[key] = parent[key];
        });
      }
    },
    methods: {
      /**
       * change 事件
       * @param event
       */
      handleInput(event) {
        let value = event.detail.value;
        if (this.trim)
          value = this.$u.trim(value);
        this.$emit("input", value);
        this.$emit("update:modelValue", value);
        this.defaultValue = value;
        setTimeout(() => {
          this.dispatch("u-form-item", "onFieldChange", value);
        }, 40);
      },
      /**
       * blur 事件
       * @param event
       */
      handleBlur(event) {
        setTimeout(() => {
          this.focused = false;
        }, 100);
        let value = event.detail.value;
        this.$emit("blur", value);
        setTimeout(() => {
          this.dispatch("u-form-item", "onFieldBlur", value);
        }, 40);
      },
      onFormItemError(status) {
        this.validateState = status;
      },
      onFocus(event) {
        this.focused = true;
        this.$emit("focus");
      },
      onConfirm(e2) {
        this.$emit("confirm", e2.detail.value);
      },
      onClear(event) {
        this.$emit("input", "");
        this.$emit("update:modelValue", "");
        this.$emit("clear");
      },
      inputClick() {
        this.$emit("click");
      }
    }
  };
  function _sfc_render$1g(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_u_icon = resolveEasycom(vue.resolveDynamicComponent("u-icon"), __easycom_2$b);
    return vue.openBlock(), vue.createElementBlock(
      "view",
      {
        class: vue.normalizeClass(["u-input", {
          "u-input--border": $props.border,
          "u-input--error": $data.validateState
        }]),
        style: vue.normalizeStyle({
          padding: $props.padding ? $props.padding : `0 ${$props.border ? 20 : 0}rpx`,
          borderColor: $props.borderColor,
          textAlign: $options.inputAlignCom,
          backgroundColor: $props.backgroundColor
        }),
        onClick: _cache[11] || (_cache[11] = vue.withModifiers((...args) => $options.inputClick && $options.inputClick(...args), ["stop"]))
      },
      [
        $props.type == "textarea" ? (vue.openBlock(), vue.createElementBlock("textarea", {
          key: 0,
          class: "u-input__input u-input__textarea",
          style: vue.normalizeStyle([$options.getStyle]),
          value: $data.defaultValue,
          placeholder: $props.placeholder,
          placeholderStyle: $props.placeholderStyle,
          disabled: $props.disabled,
          fixed: $props.fixed,
          focus: $props.focus,
          maxlength: -1,
          autoHeight: $props.autoHeight,
          "selection-end": $options.uSelectionEnd,
          "selection-start": $options.uSelectionStart,
          "cursor-spacing": $options.getCursorSpacing,
          "show-confirm-bar": $props.showConfirmbar,
          "adjust-position": $props.adjustPosition,
          onInput: _cache[0] || (_cache[0] = (...args) => $options.handleInput && $options.handleInput(...args)),
          onBlur: _cache[1] || (_cache[1] = (...args) => $options.handleBlur && $options.handleBlur(...args)),
          onFocus: _cache[2] || (_cache[2] = (...args) => $options.onFocus && $options.onFocus(...args)),
          onConfirm: _cache[3] || (_cache[3] = (...args) => $options.onConfirm && $options.onConfirm(...args))
        }, null, 44, ["value", "placeholder", "placeholderStyle", "disabled", "fixed", "focus", "autoHeight", "selection-end", "selection-start", "cursor-spacing", "show-confirm-bar", "adjust-position"])) : (vue.openBlock(), vue.createElementBlock("input", {
          key: 1,
          class: vue.normalizeClass(["u-input__input", "u-input__" + $props.type]),
          type: $props.type == "password" ? "text" : $props.type,
          style: vue.normalizeStyle([$options.getStyle]),
          value: $data.defaultValue,
          maxlength: 1e4,
          password: $props.type == "password" && !$data.showPassword,
          placeholder: $props.placeholder,
          placeholderStyle: $props.placeholderStyle,
          disabled: $props.disabled || $props.type === "select" && !$data.showCover,
          focus: $props.focus,
          confirmType: $props.confirmType,
          "cursor-spacing": $options.getCursorSpacing,
          "selection-end": $options.uSelectionEnd,
          "selection-start": $options.uSelectionStart,
          "show-confirm-bar": $props.showConfirmbar,
          "adjust-position": $props.adjustPosition,
          onFocus: _cache[4] || (_cache[4] = (...args) => $options.onFocus && $options.onFocus(...args)),
          onBlur: _cache[5] || (_cache[5] = (...args) => $options.handleBlur && $options.handleBlur(...args)),
          onInput: _cache[6] || (_cache[6] = (...args) => $options.handleInput && $options.handleInput(...args)),
          onConfirm: _cache[7] || (_cache[7] = (...args) => $options.onConfirm && $options.onConfirm(...args))
        }, null, 46, ["type", "value", "password", "placeholder", "placeholderStyle", "disabled", "focus", "confirmType", "cursor-spacing", "selection-end", "selection-start", "show-confirm-bar", "adjust-position"])),
        $props.type === "select" && $data.showCover ? (vue.openBlock(), vue.createElementBlock("view", {
          key: 2,
          class: "cover-input",
          onClick: _cache[8] || (_cache[8] = vue.withModifiers((...args) => $options.inputClick && $options.inputClick(...args), ["stop"]))
        })) : vue.createCommentVNode("v-if", true),
        vue.createElementVNode("view", { class: "u-input__right-icon u-flex" }, [
          $options.clearableCom && $options.valueCom != "" && $data.focused ? (vue.openBlock(), vue.createElementBlock("view", {
            key: 0,
            class: "u-input__right-icon__clear u-input__right-icon__item",
            onClick: _cache[9] || (_cache[9] = (...args) => $options.onClear && $options.onClear(...args))
          }, [
            vue.createVNode(_component_u_icon, {
              size: "32",
              name: "close-circle-fill",
              color: "#c0c4cc"
            })
          ])) : vue.createCommentVNode("v-if", true),
          $props.passwordIcon && $props.type == "password" ? (vue.openBlock(), vue.createElementBlock("view", {
            key: 1,
            class: "u-input__right-icon__clear u-input__right-icon__item"
          }, [
            vue.createVNode(_component_u_icon, {
              size: "32",
              name: !$data.showPassword ? "eye" : "eye-fill",
              color: "#c0c4cc",
              onClick: _cache[10] || (_cache[10] = ($event) => $data.showPassword = !$data.showPassword)
            }, null, 8, ["name"])
          ])) : vue.createCommentVNode("v-if", true),
          $props.type == "select" ? (vue.openBlock(), vue.createElementBlock(
            "view",
            {
              key: 2,
              class: vue.normalizeClass(["u-input__right-icon--select u-input__right-icon__item", {
                "u-input__right-icon--select--reverse": $props.selectOpen
              }])
            },
            [
              vue.createVNode(_component_u_icon, {
                name: "arrow-down-fill",
                size: "26",
                color: "#c0c4cc"
              })
            ],
            2
            /* CLASS */
          )) : vue.createCommentVNode("v-if", true)
        ])
      ],
      6
      /* CLASS, STYLE */
    );
  }
  const __easycom_5 = /* @__PURE__ */ _export_sfc(_sfc_main$1h, [["render", _sfc_render$1g], ["__scopeId", "data-v-dc846cb1"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/uni_modules/vk-uview-ui/components/u-input/u-input.vue"]]);
  function uploadFile(url2, filePath, formData = {}, name = "file") {
    return new Promise((resolve, reject) => {
      uni.uploadFile({
        url: url2,
        // 统一走代理
        filePath,
        name,
        formData,
        header: {
          "token": uni.getStorageSync("token") || ""
        },
        success: (res2) => {
          try {
            const data = JSON.parse(res2.data);
            resolve(data);
          } catch (e2) {
            resolve(res2.data);
          }
        },
        fail: (err) => reject(err)
      });
    });
  }
  const _imports_0$b = "/static/auth/hold-in-hand.png";
  const _imports_1$7 = "/static/auth/stars.png";
  const _sfc_main$1g = {
    __name: "idCard",
    props: {
      consultantType: String,
      modelValue: {
        type: Object,
        default: () => ({})
      }
    },
    emits: ["update:modelValue", "committed"],
    setup(__props, { expose: __expose, emit: __emit }) {
      const STARS = [
        "白羊座",
        "金牛座",
        "双子座",
        "巨蟹座",
        "狮子座",
        "处女座",
        "天秤座",
        "天蝎座",
        "射手座",
        "摩羯座",
        "水瓶座",
        "双鱼座"
      ];
      const PROMISE_REQUIREMENTS = [
        "字迹书写规整",
        "模板内容抄写完整",
        "签字、按手印",
        "身份证正面向上合照"
      ];
      const props = __props;
      const emit = __emit;
      const parseMasterGallery = (val2) => {
        if (!val2 || val2 === "[]" || val2 === "''")
          return [];
        try {
          const parsed = JSON.parse(val2);
          return Array.isArray(parsed) ? parsed.map((item) => ({ url: item.url || "" })).filter((item) => item.url) : [];
        } catch (e2) {
          return [];
        }
      };
      const localData = vue.ref({
        ...props.modelValue,
        // 初始化masterGallery：解析接口返回的字符串，无数据则为空数组（新用户）
        masterGallery: parseMasterGallery(props.modelValue.masterGallery),
        // 确保u-upload的fileList默认是数组
        holdIdCardImg: props.modelValue.holdIdCardImg || [],
        commitmentImg: props.modelValue.commitmentImg || []
      });
      const isNewUser = vue.ref(!props.modelValue.masterGallery || parseMasterGallery(props.modelValue.masterGallery).length === 0);
      vue.watch(
        () => props.modelValue,
        (newVal) => {
          vue.nextTick(() => {
            const newMasterGallery = parseMasterGallery(newVal.masterGallery);
            localData.value = {
              ...newVal,
              masterGallery: newMasterGallery,
              holdIdCardImg: newVal.holdIdCardImg || [],
              commitmentImg: newVal.commitmentImg || []
            };
            isNewUser.value = !newVal.masterGallery || newMasterGallery.length === 0;
          });
        },
        { immediate: true, deep: true }
      );
      vue.watch(
        localData,
        (newVal) => {
          vue.nextTick(() => {
            emit("update:modelValue", { ...newVal });
          });
        },
        { deep: true }
      );
      const birthdayShow = vue.ref(false);
      const regionPicker = vue.ref(false);
      const height = vue.ref(150);
      const token = uni.getStorageSync("token");
      const headers = vue.ref({ token });
      const uploadUrl = vue.ref("https://ceshi.maimiaoqingsu.com/api/common/upload");
      const timeParams = vue.ref({
        year: true,
        month: true,
        day: false,
        hour: false,
        minute: false,
        second: false
      });
      const stars = vue.ref(STARS);
      const promiseRequirements = vue.ref(PROMISE_REQUIREMENTS);
      const showTimePicker = () => {
        birthdayShow.value = true;
      };
      const confirmBirthday = (e2) => {
        localData.value.birthdate = `${e2.year}-${e2.month}`;
      };
      const chooseArea = () => {
        regionPicker.value = true;
      };
      const confirmRegion = (e2) => {
        localData.value.address = e2.province.name + e2.city.name + e2.area.name;
      };
      const starChange = (e2) => {
        localData.value.constellation = stars.value[e2.detail.value];
      };
      const handleTemplate = (type) => {
        uni.navigateTo({
          url: `/pages/webview/webview?type=${type}`
        });
      };
      const beforeUpload = () => {
      };
      const uploadComplete1 = (data, index, lists) => {
        var _a;
        if (lists && lists[index]) {
          lists[index].url = ((_a = data.data) == null ? void 0 : _a.url) || "";
          localData.value.masterGallery = lists.map((item) => ({ url: item.url || "" })).filter((item) => item.url);
        }
      };
      const uploadComplete2 = (data, index, lists) => {
        var _a;
        lists[index].url = ((_a = data.data) == null ? void 0 : _a.url) || "";
        localData.value.holdIdCardImg = lists;
      };
      const uploadComplete3 = (data, index, lists) => {
        var _a;
        lists[index].url = ((_a = data.data) == null ? void 0 : _a.url) || "";
        localData.value.commitmentImg = lists;
      };
      const deletePic = (field, index, lists) => {
        localData.value[field] = lists.map((item) => ({ url: item.url || "" })).filter((item) => item.url);
      };
      const uploadPhoto = async (type) => {
        try {
          const res2 = await uni.chooseImage({ count: 1 });
          const filePath = res2.tempFilePaths[0];
          const uploadRes = await uploadFile(uploadUrl.value, filePath);
          if (uploadRes.code === 0) {
            if (type === 1) {
              localData.value.idcardFront = uploadRes.data.url;
            } else {
              localData.value.idcardBackend = uploadRes.data.url;
            }
          }
        } catch (error) {
          formatAppLog("error", "at pages/forum/my/components/idCard.vue:368", "上传失败:", error);
          uni.showToast({
            title: "上传失败",
            icon: "error"
          });
        }
      };
      const submit = async () => {
        var _a, _b, _c, _d;
        const requiredFields = [
          { field: localData.value.idcardFront, message: "请上传身份证人像页" },
          { field: localData.value.idcardBackend, message: "请上传身份证国徽页" },
          { field: localData.value.name, message: "请输入姓名" },
          { field: localData.value.idcardNum, message: "请输入身份证号" },
          { field: localData.value.birthdate, message: "请选择出生年月" },
          // 核心：masterGallery校验 - 新用户必须上传，老用户只要有数据即可
          {
            field: localData.value.masterGallery.length,
            message: "请上传个人形象照",
            validate: () => !isNewUser.value ? true : localData.value.masterGallery.length > 0
          },
          { field: (_a = localData.value.holdIdCardImg) == null ? void 0 : _a.length, message: "请上传手持身份证件照" },
          { field: (_b = localData.value.commitmentImg) == null ? void 0 : _b.length, message: "请上传手写承诺书照" },
          { field: localData.value.constellation, message: "请选择星座" },
          { field: localData.value.address, message: "请选择所在地区" }
        ];
        for (const item of requiredFields) {
          if (item.validate) {
            if (!item.validate()) {
              uni.showToast({ title: item.message, icon: "none" });
              return;
            }
          } else if (!item.field) {
            uni.showToast({ title: item.message, icon: "none" });
            return;
          }
        }
        const submitData = {
          ...localData.value,
          // masterGallery转JSON字符串，确保覆盖接口原有数据
          masterGallery: JSON.stringify(localData.value.masterGallery),
          consultantType: props.consultantType,
          idCardNo: localData.value.idcardNum,
          idCardFrontImg: localData.value.idcardFront,
          idCardBackImg: localData.value.idcardBackend,
          holdIdCardImg: ((_c = localData.value.holdIdCardImg[0]) == null ? void 0 : _c.url) || "",
          commitmentImg: ((_d = localData.value.commitmentImg[0]) == null ? void 0 : _d.url) || ""
        };
        uni.showLoading({ title: "提交中" });
        try {
          formatAppLog("log", "at pages/forum/my/components/idCard.vue:427", submitData, props.consultantType);
          const api = props.consultantType == "1" ? registerConsultantStep1 : registerListenerStep1;
          const res2 = await api(submitData);
          uni.hideLoading();
          localData.value = { ...localData.value, ...res2.data };
          emit("committed", "");
        } catch (error) {
          uni.hideLoading();
          formatAppLog("error", "at pages/forum/my/components/idCard.vue:437", "提交失败:", error);
          uni.showToast({ title: "提交失败，请重试", icon: "error" });
        }
      };
      __expose({ submit });
      onUnload(() => {
      });
      const __returned__ = { STARS, PROMISE_REQUIREMENTS, props, emit, parseMasterGallery, localData, isNewUser, birthdayShow, regionPicker, height, token, headers, uploadUrl, timeParams, stars, promiseRequirements, showTimePicker, confirmBirthday, chooseArea, confirmRegion, starChange, handleTemplate, beforeUpload, uploadComplete1, uploadComplete2, uploadComplete3, deletePic, uploadPhoto, submit, ref: vue.ref, watch: vue.watch, nextTick: vue.nextTick, get uploadFile() {
        return uploadFile;
      }, get onUnload() {
        return onUnload;
      }, get registerConsultantStep1() {
        return registerConsultantStep1;
      }, get registerListenerStep1() {
        return registerListenerStep1;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$1f(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_u_icon = resolveEasycom(vue.resolveDynamicComponent("u-icon"), __easycom_2$b);
    const _component_u_picker = resolveEasycom(vue.resolveDynamicComponent("u-picker"), __easycom_1$3);
    const _component_u_upload = resolveEasycom(vue.resolveDynamicComponent("u-upload"), __easycom_3$3);
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    const _component_uni_easyinput = resolveEasycom(vue.resolveDynamicComponent("uni-easyinput"), __easycom_2$8);
    const _component_u_input = resolveEasycom(vue.resolveDynamicComponent("u-input"), __easycom_5);
    return vue.openBlock(), vue.createElementBlock("view", { class: "id-card-box" }, [
      vue.createElementVNode("view", { class: "id-card-content-box" }, [
        vue.createElementVNode("view", { class: "id-card-content" }, [
          vue.createElementVNode("view", { class: "title" }, "身份认证"),
          vue.createElementVNode("view", { class: "remark" }, "仅用于身份实名核验，信息会严格保密"),
          vue.createElementVNode("view", { class: "unload-card-box" }, [
            vue.createElementVNode("view", {
              class: "upload-card-item",
              onClick: _cache[0] || (_cache[0] = ($event) => $setup.uploadPhoto(1))
            }, [
              vue.createElementVNode("image", {
                src: $setup.localData.idcardFront || "/static/auth/id-card-front.png",
                class: "img"
              }, null, 8, ["src"]),
              vue.createElementVNode("view", { class: "txt" }, "身份证人像面")
            ]),
            vue.createElementVNode("view", {
              class: "upload-card-item",
              onClick: _cache[1] || (_cache[1] = ($event) => $setup.uploadPhoto(2))
            }, [
              vue.createElementVNode("image", {
                src: $setup.localData.idcardBackend || "/static/auth/id-card-back.png",
                class: "img"
              }, null, 8, ["src"]),
              vue.createElementVNode("view", { class: "txt" }, "身份证国徽面")
            ])
          ]),
          vue.createElementVNode("view", { class: "id-card-form-content" }, [
            vue.createElementVNode("view", { class: "form-item" }, [
              vue.createElementVNode("view", { class: "label require" }, "姓名"),
              vue.createElementVNode("view", { class: "content" }, [
                vue.withDirectives(vue.createElementVNode(
                  "input",
                  {
                    type: "text",
                    "onUpdate:modelValue": _cache[2] || (_cache[2] = ($event) => $setup.localData.name = $event),
                    placeholder: "请输入姓名",
                    class: "form-input"
                  },
                  null,
                  512
                  /* NEED_PATCH */
                ), [
                  [vue.vModelText, $setup.localData.name]
                ])
              ])
            ]),
            vue.createElementVNode("view", { class: "form-item" }, [
              vue.createElementVNode("view", { class: "label require" }, "身份证号"),
              vue.createElementVNode("view", { class: "content" }, [
                vue.withDirectives(vue.createElementVNode(
                  "input",
                  {
                    type: "text",
                    "onUpdate:modelValue": _cache[3] || (_cache[3] = ($event) => $setup.localData.idcardNum = $event),
                    placeholder: "请输入身份证号",
                    class: "form-input"
                  },
                  null,
                  512
                  /* NEED_PATCH */
                ), [
                  [vue.vModelText, $setup.localData.idcardNum]
                ])
              ])
            ]),
            vue.createElementVNode("view", { class: "form-item" }, [
              vue.createElementVNode("view", { class: "label require" }, "出生年月"),
              vue.createElementVNode("view", {
                class: "content",
                onClick: $setup.showTimePicker
              }, [
                vue.createElementVNode(
                  "text",
                  null,
                  vue.toDisplayString($setup.localData.birthdate || "请选择"),
                  1
                  /* TEXT */
                ),
                vue.createVNode(_component_u_icon, { name: "arrow-right" }),
                vue.createVNode(_component_u_picker, {
                  type: "text",
                  modelValue: $setup.birthdayShow,
                  "onUpdate:modelValue": _cache[4] || (_cache[4] = ($event) => $setup.birthdayShow = $event),
                  params: $setup.timeParams,
                  mode: "time",
                  onConfirm: $setup.confirmBirthday
                }, null, 8, ["modelValue", "params"])
              ])
            ]),
            vue.createElementVNode("view", { class: "upload-section" }, [
              vue.createElementVNode("view", { class: "label require requires" }, [
                vue.createTextVNode(" 个人形象照 "),
                vue.createElementVNode("text", { class: "sub-label" }, "（用于个人主页封面，格式jpg/png，大小2M内）")
              ]),
              vue.createVNode(_component_u_upload, {
                fileList: $setup.localData.masterGallery,
                "before-upload": $setup.beforeUpload,
                header: $setup.headers,
                onOnSuccess: $setup.uploadComplete1,
                onOnRemove: _cache[5] || (_cache[5] = (index, lists) => $setup.deletePic("masterGallery", index, lists)),
                name: "file",
                action: $setup.uploadUrl,
                maxCount: 5
              }, null, 8, ["fileList", "header", "action"])
            ]),
            vue.createElementVNode("view", { class: "form-item upload-with-image" }, [
              vue.createElementVNode("view", { class: "upload-content" }, [
                vue.createElementVNode("view", {
                  class: "label require",
                  style: { "width": "170rpx" }
                }, "手持身份证件"),
                vue.createVNode(_component_u_upload, {
                  fileList: $setup.localData.holdIdCardImg,
                  "before-upload": $setup.beforeUpload,
                  header: $setup.headers,
                  onOnSuccess: $setup.uploadComplete2,
                  onOnRemove: _cache[6] || (_cache[6] = (index, lists) => $setup.deletePic("holdIdCardImg", index, lists)),
                  name: "file",
                  action: $setup.uploadUrl,
                  maxCount: 1
                }, null, 8, ["fileList", "header", "action"])
              ]),
              vue.createElementVNode("image", {
                src: _imports_0$b,
                class: "example-image"
              })
            ]),
            vue.createElementVNode("view", { class: "form-item upload-with-image" }, [
              vue.createElementVNode("view", { class: "upload-content" }, [
                vue.createElementVNode("view", {
                  class: "label require",
                  style: { "width": "200rpx" }
                }, "手写承诺书照片"),
                vue.createVNode(_component_u_upload, {
                  fileList: $setup.localData.commitmentImg,
                  "before-upload": $setup.beforeUpload,
                  header: $setup.headers,
                  onOnSuccess: $setup.uploadComplete3,
                  onOnRemove: _cache[7] || (_cache[7] = (index, lists) => $setup.deletePic("commitmentImg", index, lists)),
                  name: "file",
                  action: $setup.uploadUrl,
                  maxCount: 1
                }, null, 8, ["fileList", "header", "action"])
              ]),
              vue.createElementVNode("view", { class: "promise" }, [
                vue.createElementVNode("view", {
                  class: "template",
                  onClick: _cache[8] || (_cache[8] = ($event) => $setup.handleTemplate("手写承诺书"))
                }, [
                  vue.createTextVNode(" 点击查看"),
                  vue.createElementVNode("text", null, "《承诺书模板》")
                ]),
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($setup.promiseRequirements, (item, index) => {
                    return vue.openBlock(), vue.createElementBlock("view", {
                      class: "promise-item",
                      key: index
                    }, [
                      vue.createElementVNode("image", { src: _imports_1$7 }),
                      vue.createElementVNode(
                        "view",
                        null,
                        vue.toDisplayString(item),
                        1
                        /* TEXT */
                      )
                    ]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                ))
              ])
            ]),
            vue.createElementVNode("view", { class: "form-item" }, [
              vue.createElementVNode("view", { class: "label require" }, "星座"),
              vue.createElementVNode("picker", {
                range: $setup.stars,
                onChange: $setup.starChange
              }, [
                vue.createElementVNode("view", { class: "content picker-content" }, [
                  vue.createTextVNode(
                    vue.toDisplayString($setup.localData.constellation || "请选择") + " ",
                    1
                    /* TEXT */
                  ),
                  vue.createVNode(_component_uni_icons, {
                    type: "right",
                    size: "14",
                    color: "rgba(0, 0, 0, 0.3)"
                  })
                ])
              ], 40, ["range"])
            ]),
            vue.createElementVNode("view", { class: "form-item" }, [
              vue.createElementVNode("view", { class: "label require" }, "所在地区"),
              vue.createElementVNode("view", {
                class: "content",
                onClick: $setup.chooseArea
              }, [
                vue.createTextVNode(
                  vue.toDisplayString($setup.localData.address || "请选择") + " ",
                  1
                  /* TEXT */
                ),
                vue.createVNode(_component_uni_icons, {
                  type: "right",
                  size: "14",
                  color: "rgba(0, 0, 0, 0.3)"
                })
              ]),
              vue.createVNode(_component_u_picker, {
                modelValue: $setup.regionPicker,
                "onUpdate:modelValue": _cache[9] || (_cache[9] = ($event) => $setup.regionPicker = $event),
                onConfirm: $setup.confirmRegion,
                mode: "region"
              }, null, 8, ["modelValue"])
            ]),
            vue.createElementVNode("view", { class: "form-item user-sign" }, [
              vue.createElementVNode("view", { class: "label" }, "个人签名"),
              vue.createElementVNode("view", { class: "content-input" }, [
                vue.createVNode(_component_uni_easyinput, {
                  trim: "all",
                  type: "text",
                  placeholder: "请输入个人签名",
                  inputBorder: false,
                  clearable: false,
                  modelValue: $setup.localData.signature,
                  "onUpdate:modelValue": _cache[10] || (_cache[10] = ($event) => $setup.localData.signature = $event),
                  class: "signature-input"
                }, null, 8, ["modelValue"])
              ])
            ]),
            vue.createElementVNode("view", { class: "form-item user-introduction" }, [
              vue.createElementVNode("view", { class: "label" }, "个人简介"),
              vue.createElementVNode("view", { class: "introduction-content" }, [
                vue.createVNode(_component_u_input, {
                  type: "textarea",
                  border: "",
                  modelValue: $setup.localData.profile,
                  "onUpdate:modelValue": _cache[11] || (_cache[11] = ($event) => $setup.localData.profile = $event),
                  "auto-height": "",
                  height: $setup.height,
                  placeholder: "请输入个人简介"
                }, null, 8, ["modelValue", "height"])
              ])
            ])
          ])
        ])
      ])
    ]);
  }
  const idCard$3 = /* @__PURE__ */ _export_sfc(_sfc_main$1g, [["render", _sfc_render$1f], ["__scopeId", "data-v-9a5f3de9"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/forum/my/components/idCard.vue"]]);
  const _imports_0$a = "/static/auth/tip.svg";
  const _sfc_main$1f = {
    __name: "userInfo",
    setup(__props, { expose: __expose }) {
      __expose();
      vue.useCssVars((_ctx) => ({
        "5723f2e8-statusBarHeight": statusBarHeight.value
      }));
      const globalStore = useGlobalDataStore();
      const statusBarHeight = vue.ref(globalStore.statusBarHeight + "px");
      const currentComponent = vue.ref(idCard$3);
      const step = vue.ref(1);
      const consultant = vue.ref({});
      const idCardRef = vue.ref(null);
      const careerRef = vue.ref(null);
      const finalStep = vue.ref(null);
      const consultantType = vue.ref("");
      const userInfo = vue.ref("");
      onLoad((options) => {
        consultantType.value = options.type;
        userInfo.value = JSON.parse(options.userInfo);
        uni.setNavigationBarTitle({ title: "认证" });
        getConsultantDetail();
      });
      const backFn = () => {
        uni.navigateBack({
          delta: 1
        });
      };
      const getConsultantDetail = async () => {
        if (consultantType.value == 1) {
          let resp = await getConsultantByUserId({ userId: userInfo.value });
          const data = {
            ...resp.data,
            idcardNum: resp.data.sysUser.idCardNo,
            idcardFront: resp.data.sysUser.idCardFrontImg,
            idcardBackend: resp.data.sysUser.idCardBackImg,
            occupationId: resp.data.sysUser.occupationId
          };
          processingImg(data);
        } else {
          let resp = await getListenerByUserId({ userId: userInfo.value });
          const data = {
            ...resp.data,
            occupationId: resp.data.sysUser.occupationId
          };
          processingImg(data);
        }
      };
      const processingImg = (val2) => {
        const { commitmentImg, holdIdCardImg } = val2;
        const commitment = commitmentImg ? formatImages([commitmentImg]) : [];
        const holdIdCard = holdIdCardImg ? formatImages([holdIdCardImg]) : [];
        const data = Object.assign(val2, {
          commitmentImg: commitment,
          holdIdCardImg: holdIdCard
        });
        consultant.value = data;
      };
      const formatImages = (urls) => {
        return urls.map((url2, index) => ({
          url: url2
        }));
      };
      const formData = vue.ref({
        idCard: {
          consultantName: "",
          idNum: ""
          // 其他身份证信息字段
        },
        career: {
          profession: "",
          experience: ""
          // 其他职业信息字段
        },
        certificate: {
          files: []
          // 其他证书字段
        }
      });
      const nextStepHandler = () => {
        var _a, _b;
        if (step.value == 1) {
          (_a = idCardRef.value) == null ? void 0 : _a.submit();
        }
        if (step.value == 2) {
          (_b = careerRef.value) == null ? void 0 : _b.submit();
        }
      };
      const step1Commit = () => {
        popup.value.open("center");
      };
      const prevStepHandler = () => {
        step.value = step.value - 1;
      };
      vue.watch(step, (newVal, oldVal) => {
        var _a;
        if (newVal == 1) {
          currentComponent.value = idCard$3;
        } else if (newVal == 2) {
          currentComponent.value = career;
        } else if (newVal == 3) {
          (_a = finalStep.value) == null ? void 0 : _a.refreshData();
          currentComponent.value = certificate;
        }
      });
      const popup = vue.ref(null);
      const examineHandler = async () => {
        var _a;
        (_a = finalStep.value) == null ? void 0 : _a.submit();
        const { certificateList, educationList, careerList, consultantType: consultantType2 } = finalStep.value.fromDataCertificate;
        ({
          ...formData.value.idCard,
          ...formData.value.career,
          certificateList,
          educationList,
          careerList,
          consultantType: consultantType2,
          certificates: formData.value.certificate.files
        });
      };
      const closePopup = () => {
        uni.switchTab({
          url: "/pages/my/index"
        });
      };
      const __returned__ = { globalStore, statusBarHeight, currentComponent, step, consultant, idCardRef, careerRef, finalStep, consultantType, userInfo, backFn, getConsultantDetail, processingImg, formatImages, formData, nextStepHandler, step1Commit, prevStepHandler, popup, examineHandler, closePopup, ref: vue.ref, watch: vue.watch, get useGlobalDataStore() {
        return useGlobalDataStore;
      }, get onLoad() {
        return onLoad;
      }, get getConsultantByUserId() {
        return getConsultantByUserId;
      }, get getListenerByUserId() {
        return getListenerByUserId;
      }, get registerConsultantStep3() {
        return registerConsultantStep3;
      }, get registerListenerStep3() {
        return registerListenerStep3;
      }, idCard: idCard$3 };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$1e(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    const _component_uni_nav_bar = resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"), __easycom_1$4);
    const _component_uni_popup = resolveEasycom(vue.resolveDynamicComponent("uni-popup"), __easycom_3$5);
    return vue.openBlock(), vue.createElementBlock("view", { class: "auth-box" }, [
      vue.createElementVNode("view", { class: "children-component" }, [
        vue.createVNode(_component_uni_nav_bar, {
          class: vue.normalizeClass([_ctx.scrollTop > 15 ? "scrollClass" : "", "header-bar"]),
          backgroundColor: "rgba(255,255,255,0)",
          border: false,
          title: "基本资料"
        }, {
          left: vue.withCtx(() => [
            vue.createVNode(_component_uni_icons, {
              type: "left",
              size: "24",
              onClick: $setup.backFn
            })
          ]),
          _: 1
          /* STABLE */
        }, 8, ["class"]),
        vue.createElementVNode("scroll-view", {
          "scroll-y": "true",
          "show-scrollbar": false,
          class: "scroll-content"
        }, [
          vue.createElementVNode("view", { class: "children-content" }, [
            vue.createElementVNode("view", { class: "top-bg" }),
            vue.createElementVNode("view", { class: "current-component" }, [
              $setup.consultant.status == 1 || $setup.consultant.status == 3 ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 0,
                class: "component-tip"
              }, [
                vue.createVNode(_component_uni_icons, {
                  type: "notification-filled",
                  size: "20",
                  color: "#fd3e3c"
                }),
                vue.createElementVNode(
                  "view",
                  null,
                  vue.toDisplayString($setup.consultant.status == 1 ? "您上传的身份证照片不清晰，请修改后再提交" : ""),
                  1
                  /* TEXT */
                )
              ])) : vue.createCommentVNode("v-if", true),
              vue.createElementVNode("view", { class: "handler-components-box" }, [
                vue.withDirectives(vue.createVNode($setup["idCard"], {
                  modelValue: $setup.consultant,
                  consultantType: $setup.consultantType,
                  onCommitted: $setup.step1Commit,
                  ref: "idCardRef",
                  "onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => $setup.formData.idCard = $event)
                }, null, 8, ["modelValue", "consultantType"]), [
                  [vue.vShow, $setup.step == 1]
                ]),
                vue.createElementVNode("view", { class: "footer" }, [
                  vue.createElementVNode("view", { class: "tip" }, [
                    vue.createElementVNode("image", {
                      src: _imports_0$a,
                      class: "img"
                    }),
                    vue.createTextVNode("个人信息安全保障中 ")
                  ]),
                  $setup.step == 1 ? (vue.openBlock(), vue.createElementBlock("view", {
                    key: 0,
                    class: "btn"
                  }, [
                    vue.createElementVNode(
                      "view",
                      {
                        class: vue.normalizeClass(["next", $setup.consultantType == 1 ? "next-ba1" : "next-ba2"]),
                        onClick: $setup.nextStepHandler
                      },
                      "提交审核",
                      2
                      /* CLASS */
                    )
                  ])) : vue.createCommentVNode("v-if", true)
                ])
              ])
            ])
          ])
        ])
      ]),
      vue.createVNode(
        _component_uni_popup,
        {
          ref: "popup",
          type: "message"
        },
        {
          default: vue.withCtx(() => [
            vue.createElementVNode("view", { class: "popup-content" }, [
              vue.createElementVNode("view", { class: "content-title" }, "您的申请已提交成功"),
              vue.createElementVNode("view", { class: "content-text" }, "稍后可进入申请页面查看审核进度"),
              vue.createElementVNode(
                "view",
                {
                  class: "content-btn",
                  style: vue.normalizeStyle({ background: $setup.consultantType == 1 ? "#35CA95" : "#EB9516" }),
                  onClick: $setup.closePopup
                },
                "返回“我的”",
                4
                /* STYLE */
              )
            ])
          ]),
          _: 1
          /* STABLE */
        },
        512
        /* NEED_PATCH */
      )
    ]);
  }
  const PagesForumMyUserInfo = /* @__PURE__ */ _export_sfc(_sfc_main$1f, [["render", _sfc_render$1e], ["__scopeId", "data-v-5723f2e8"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/forum/my/userInfo.vue"]]);
  let Calendar$1 = class Calendar {
    constructor({
      selected,
      startDate,
      endDate,
      range: range2
    } = {}) {
      this.date = this.getDateObj(/* @__PURE__ */ new Date());
      this.selected = selected || [];
      this.startDate = startDate;
      this.endDate = endDate;
      this.range = range2;
      this.cleanMultipleStatus();
      this.weeks = {};
      this.lastHover = false;
    }
    /**
     * 设置日期
     * @param {Object} date
     */
    setDate(date2) {
      const selectDate = this.getDateObj(date2);
      this.getWeeks(selectDate.fullDate);
    }
    /**
     * 清理多选状态
     */
    cleanMultipleStatus() {
      this.multipleStatus = {
        before: "",
        after: "",
        data: []
      };
    }
    setStartDate(startDate) {
      this.startDate = startDate;
    }
    setEndDate(endDate) {
      this.endDate = endDate;
    }
    getPreMonthObj(date2) {
      date2 = fixIosDateFormat(date2);
      date2 = new Date(date2);
      const oldMonth = date2.getMonth();
      date2.setMonth(oldMonth - 1);
      const newMonth = date2.getMonth();
      if (oldMonth !== 0 && newMonth - oldMonth === 0) {
        date2.setMonth(newMonth - 1);
      }
      return this.getDateObj(date2);
    }
    getNextMonthObj(date2) {
      date2 = fixIosDateFormat(date2);
      date2 = new Date(date2);
      const oldMonth = date2.getMonth();
      date2.setMonth(oldMonth + 1);
      const newMonth = date2.getMonth();
      if (newMonth - oldMonth > 1) {
        date2.setMonth(newMonth - 1);
      }
      return this.getDateObj(date2);
    }
    /**
     * 获取指定格式Date对象
     */
    getDateObj(date2) {
      date2 = fixIosDateFormat(date2);
      date2 = new Date(date2);
      return {
        fullDate: getDate$1(date2),
        year: date2.getFullYear(),
        month: addZero(date2.getMonth() + 1),
        date: addZero(date2.getDate()),
        day: date2.getDay()
      };
    }
    /**
     * 获取上一个月日期集合
     */
    getPreMonthDays(amount2, dateObj) {
      const result = [];
      for (let i2 = amount2 - 1; i2 >= 0; i2--) {
        const month = dateObj.month - 1;
        result.push({
          date: new Date(dateObj.year, month, -i2).getDate(),
          month,
          disable: true
        });
      }
      return result;
    }
    /**
     * 获取本月日期集合
     */
    getCurrentMonthDays(amount2, dateObj) {
      const result = [];
      const fullDate = this.date.fullDate;
      for (let i2 = 1; i2 <= amount2; i2++) {
        const currentDate = `${dateObj.year}-${dateObj.month}-${addZero(i2)}`;
        const isToday = fullDate === currentDate;
        const info = this.selected && this.selected.find((item) => {
          if (this.dateEqual(currentDate, item.date)) {
            return item;
          }
        });
        if (this.startDate) {
          dateCompare(this.startDate, currentDate);
        }
        if (this.endDate) {
          dateCompare(currentDate, this.endDate);
        }
        let multiples = this.multipleStatus.data;
        let multiplesStatus = -1;
        if (this.range && multiples) {
          multiplesStatus = multiples.findIndex((item) => {
            return this.dateEqual(item, currentDate);
          });
        }
        const checked = multiplesStatus !== -1;
        result.push({
          fullDate: currentDate,
          year: dateObj.year,
          date: i2,
          multiple: this.range ? checked : false,
          beforeMultiple: this.isLogicBefore(currentDate, this.multipleStatus.before, this.multipleStatus.after),
          afterMultiple: this.isLogicAfter(currentDate, this.multipleStatus.before, this.multipleStatus.after),
          month: dateObj.month,
          disable: this.startDate && !dateCompare(this.startDate, currentDate) || this.endDate && !dateCompare(
            currentDate,
            this.endDate
          ),
          isToday,
          userChecked: false,
          extraInfo: info
        });
      }
      return result;
    }
    /**
     * 获取下一个月日期集合
     */
    _getNextMonthDays(amount2, dateObj) {
      const result = [];
      const month = dateObj.month + 1;
      for (let i2 = 1; i2 <= amount2; i2++) {
        result.push({
          date: i2,
          month,
          disable: true
        });
      }
      return result;
    }
    /**
     * 获取当前日期详情
     * @param {Object} date
     */
    getInfo(date2) {
      if (!date2) {
        date2 = /* @__PURE__ */ new Date();
      }
      const res2 = this.calendar.find((item) => item.fullDate === this.getDateObj(date2).fullDate);
      return res2 ? res2 : this.getDateObj(date2);
    }
    /**
     * 比较时间是否相等
     */
    dateEqual(before, after) {
      before = new Date(fixIosDateFormat(before));
      after = new Date(fixIosDateFormat(after));
      return before.valueOf() === after.valueOf();
    }
    /**
     *  比较真实起始日期
     */
    isLogicBefore(currentDate, before, after) {
      let logicBefore = before;
      if (before && after) {
        logicBefore = dateCompare(before, after) ? before : after;
      }
      return this.dateEqual(logicBefore, currentDate);
    }
    isLogicAfter(currentDate, before, after) {
      let logicAfter = after;
      if (before && after) {
        logicAfter = dateCompare(before, after) ? after : before;
      }
      return this.dateEqual(logicAfter, currentDate);
    }
    /**
     * 获取日期范围内所有日期
     * @param {Object} begin
     * @param {Object} end
     */
    geDateAll(begin, end) {
      var arr = [];
      var ab = begin.split("-");
      var ae2 = end.split("-");
      var db = /* @__PURE__ */ new Date();
      db.setFullYear(ab[0], ab[1] - 1, ab[2]);
      var de2 = /* @__PURE__ */ new Date();
      de2.setFullYear(ae2[0], ae2[1] - 1, ae2[2]);
      var unixDb = db.getTime() - 24 * 60 * 60 * 1e3;
      var unixDe = de2.getTime() - 24 * 60 * 60 * 1e3;
      for (var k = unixDb; k <= unixDe; ) {
        k = k + 24 * 60 * 60 * 1e3;
        arr.push(this.getDateObj(new Date(parseInt(k))).fullDate);
      }
      return arr;
    }
    /**
     *  获取多选状态
     */
    setMultiple(fullDate) {
      if (!this.range)
        return;
      let {
        before,
        after
      } = this.multipleStatus;
      if (before && after) {
        if (!this.lastHover) {
          this.lastHover = true;
          return;
        }
        this.multipleStatus.before = fullDate;
        this.multipleStatus.after = "";
        this.multipleStatus.data = [];
        this.multipleStatus.fulldate = "";
        this.lastHover = false;
      } else {
        if (!before) {
          this.multipleStatus.before = fullDate;
          this.multipleStatus.after = void 0;
          this.lastHover = false;
        } else {
          this.multipleStatus.after = fullDate;
          if (dateCompare(this.multipleStatus.before, this.multipleStatus.after)) {
            this.multipleStatus.data = this.geDateAll(this.multipleStatus.before, this.multipleStatus.after);
          } else {
            this.multipleStatus.data = this.geDateAll(this.multipleStatus.after, this.multipleStatus.before);
          }
          this.lastHover = true;
        }
      }
      this.getWeeks(fullDate);
    }
    /**
     *  鼠标 hover 更新多选状态
     */
    setHoverMultiple(fullDate) {
      if (!this.range || this.lastHover)
        return;
      const {
        before
      } = this.multipleStatus;
      if (!before) {
        this.multipleStatus.before = fullDate;
      } else {
        this.multipleStatus.after = fullDate;
        if (dateCompare(this.multipleStatus.before, this.multipleStatus.after)) {
          this.multipleStatus.data = this.geDateAll(this.multipleStatus.before, this.multipleStatus.after);
        } else {
          this.multipleStatus.data = this.geDateAll(this.multipleStatus.after, this.multipleStatus.before);
        }
      }
      this.getWeeks(fullDate);
    }
    /**
     * 更新默认值多选状态
     */
    setDefaultMultiple(before, after) {
      this.multipleStatus.before = before;
      this.multipleStatus.after = after;
      if (before && after) {
        if (dateCompare(before, after)) {
          this.multipleStatus.data = this.geDateAll(before, after);
          this.getWeeks(after);
        } else {
          this.multipleStatus.data = this.geDateAll(after, before);
          this.getWeeks(before);
        }
      }
    }
    /**
     * 获取每周数据
     * @param {Object} dateData
     */
    getWeeks(dateData) {
      const {
        year,
        month
      } = this.getDateObj(dateData);
      const preMonthDayAmount = new Date(year, month - 1, 1).getDay();
      const preMonthDays = this.getPreMonthDays(preMonthDayAmount, this.getDateObj(dateData));
      const currentMonthDayAmount = new Date(year, month, 0).getDate();
      const currentMonthDays = this.getCurrentMonthDays(currentMonthDayAmount, this.getDateObj(dateData));
      const nextMonthDayAmount = 42 - preMonthDayAmount - currentMonthDayAmount;
      const nextMonthDays = this._getNextMonthDays(nextMonthDayAmount, this.getDateObj(dateData));
      const calendarDays = [...preMonthDays, ...currentMonthDays, ...nextMonthDays];
      const weeks = new Array(6);
      for (let i2 = 0; i2 < calendarDays.length; i2++) {
        const index = Math.floor(i2 / 7);
        if (!weeks[index]) {
          weeks[index] = new Array(7);
        }
        weeks[index][i2 % 7] = calendarDays[i2];
      }
      this.calendar = calendarDays;
      this.weeks = weeks;
    }
  };
  function getDateTime(date2, hideSecond) {
    return `${getDate$1(date2)} ${getTime(date2, hideSecond)}`;
  }
  function getDate$1(date2) {
    date2 = fixIosDateFormat(date2);
    date2 = new Date(date2);
    const year = date2.getFullYear();
    const month = date2.getMonth() + 1;
    const day = date2.getDate();
    return `${year}-${addZero(month)}-${addZero(day)}`;
  }
  function getTime(date2, hideSecond) {
    date2 = fixIosDateFormat(date2);
    date2 = new Date(date2);
    const hour = date2.getHours();
    const minute = date2.getMinutes();
    const second = date2.getSeconds();
    return hideSecond ? `${addZero(hour)}:${addZero(minute)}` : `${addZero(hour)}:${addZero(minute)}:${addZero(second)}`;
  }
  function addZero(num) {
    if (num < 10) {
      num = `0${num}`;
    }
    return num;
  }
  function getDefaultSecond(hideSecond) {
    return hideSecond ? "00:00" : "00:00:00";
  }
  function dateCompare(startDate, endDate) {
    startDate = new Date(fixIosDateFormat(startDate));
    endDate = new Date(fixIosDateFormat(endDate));
    return startDate <= endDate;
  }
  function checkDate(date2) {
    const dateReg = /((19|20)\d{2})(-|\/)\d{1,2}(-|\/)\d{1,2}/g;
    return date2.match(dateReg);
  }
  const dateTimeReg = /^\d{4}-(0?[1-9]|1[012])-(0?[1-9]|[12][0-9]|3[01])( [0-5]?[0-9]:[0-5]?[0-9](:[0-5]?[0-9])?)?$/;
  function fixIosDateFormat(value) {
    if (typeof value === "string" && dateTimeReg.test(value)) {
      value = value.replace(/-/g, "/");
    }
    return value;
  }
  const _sfc_main$1e = {
    props: {
      weeks: {
        type: Object,
        default() {
          return {};
        }
      },
      calendar: {
        type: Object,
        default: () => {
          return {};
        }
      },
      selected: {
        type: Array,
        default: () => {
          return [];
        }
      },
      checkHover: {
        type: Boolean,
        default: false
      }
    },
    methods: {
      choiceDate(weeks) {
        this.$emit("change", weeks);
      },
      handleMousemove(weeks) {
        this.$emit("handleMouse", weeks);
      }
    }
  };
  function _sfc_render$1d(_ctx, _cache, $props, $setup, $data, $options) {
    return vue.openBlock(), vue.createElementBlock(
      "view",
      {
        class: vue.normalizeClass(["uni-calendar-item__weeks-box", {
          "uni-calendar-item--disable": $props.weeks.disable,
          "uni-calendar-item--before-checked-x": $props.weeks.beforeMultiple,
          "uni-calendar-item--multiple": $props.weeks.multiple,
          "uni-calendar-item--after-checked-x": $props.weeks.afterMultiple
        }]),
        onClick: _cache[0] || (_cache[0] = ($event) => $options.choiceDate($props.weeks)),
        onMouseenter: _cache[1] || (_cache[1] = ($event) => $options.handleMousemove($props.weeks))
      },
      [
        vue.createElementVNode(
          "view",
          {
            class: vue.normalizeClass(["uni-calendar-item__weeks-box-item", {
              "uni-calendar-item--checked": $props.calendar.fullDate === $props.weeks.fullDate && ($props.calendar.userChecked || !$props.checkHover),
              "uni-calendar-item--checked-range-text": $props.checkHover,
              "uni-calendar-item--before-checked": $props.weeks.beforeMultiple,
              "uni-calendar-item--multiple": $props.weeks.multiple,
              "uni-calendar-item--after-checked": $props.weeks.afterMultiple,
              "uni-calendar-item--disable": $props.weeks.disable
            }])
          },
          [
            $props.selected && $props.weeks.extraInfo ? (vue.openBlock(), vue.createElementBlock("text", {
              key: 0,
              class: "uni-calendar-item__weeks-box-circle"
            })) : vue.createCommentVNode("v-if", true),
            vue.createElementVNode(
              "text",
              { class: "uni-calendar-item__weeks-box-text uni-calendar-item__weeks-box-text-disable uni-calendar-item--checked-text" },
              vue.toDisplayString($props.weeks.date),
              1
              /* TEXT */
            )
          ],
          2
          /* CLASS */
        ),
        vue.createElementVNode(
          "view",
          {
            class: vue.normalizeClass({ "uni-calendar-item--today": $props.weeks.isToday })
          },
          null,
          2
          /* CLASS */
        )
      ],
      34
      /* CLASS, NEED_HYDRATION */
    );
  }
  const calendarItem = /* @__PURE__ */ _export_sfc(_sfc_main$1e, [["render", _sfc_render$1d], ["__scopeId", "data-v-3c762a01"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/uni_modules/uni-datetime-picker/components/uni-datetime-picker/calendar-item.vue"]]);
  const en = {
    "uni-datetime-picker.selectDate": "select date",
    "uni-datetime-picker.selectTime": "select time",
    "uni-datetime-picker.selectDateTime": "select date and time",
    "uni-datetime-picker.startDate": "start date",
    "uni-datetime-picker.endDate": "end date",
    "uni-datetime-picker.startTime": "start time",
    "uni-datetime-picker.endTime": "end time",
    "uni-datetime-picker.ok": "ok",
    "uni-datetime-picker.clear": "clear",
    "uni-datetime-picker.cancel": "cancel",
    "uni-datetime-picker.year": "-",
    "uni-datetime-picker.month": "",
    "uni-calender.MON": "MON",
    "uni-calender.TUE": "TUE",
    "uni-calender.WED": "WED",
    "uni-calender.THU": "THU",
    "uni-calender.FRI": "FRI",
    "uni-calender.SAT": "SAT",
    "uni-calender.SUN": "SUN",
    "uni-calender.confirm": "confirm"
  };
  const zhHans = {
    "uni-datetime-picker.selectDate": "选择日期",
    "uni-datetime-picker.selectTime": "选择时间",
    "uni-datetime-picker.selectDateTime": "选择日期时间",
    "uni-datetime-picker.startDate": "开始日期",
    "uni-datetime-picker.endDate": "结束日期",
    "uni-datetime-picker.startTime": "开始时间",
    "uni-datetime-picker.endTime": "结束时间",
    "uni-datetime-picker.ok": "确定",
    "uni-datetime-picker.clear": "清除",
    "uni-datetime-picker.cancel": "取消",
    "uni-datetime-picker.year": "年",
    "uni-datetime-picker.month": "月",
    "uni-calender.SUN": "日",
    "uni-calender.MON": "一",
    "uni-calender.TUE": "二",
    "uni-calender.WED": "三",
    "uni-calender.THU": "四",
    "uni-calender.FRI": "五",
    "uni-calender.SAT": "六",
    "uni-calender.confirm": "确认"
  };
  const zhHant = {
    "uni-datetime-picker.selectDate": "選擇日期",
    "uni-datetime-picker.selectTime": "選擇時間",
    "uni-datetime-picker.selectDateTime": "選擇日期時間",
    "uni-datetime-picker.startDate": "開始日期",
    "uni-datetime-picker.endDate": "結束日期",
    "uni-datetime-picker.startTime": "開始时间",
    "uni-datetime-picker.endTime": "結束时间",
    "uni-datetime-picker.ok": "確定",
    "uni-datetime-picker.clear": "清除",
    "uni-datetime-picker.cancel": "取消",
    "uni-datetime-picker.year": "年",
    "uni-datetime-picker.month": "月",
    "uni-calender.SUN": "日",
    "uni-calender.MON": "一",
    "uni-calender.TUE": "二",
    "uni-calender.WED": "三",
    "uni-calender.THU": "四",
    "uni-calender.FRI": "五",
    "uni-calender.SAT": "六",
    "uni-calender.confirm": "確認"
  };
  const i18nMessages = {
    en,
    "zh-Hans": zhHans,
    "zh-Hant": zhHant
  };
  const {
    t: t$1
  } = initVueI18n(i18nMessages);
  const _sfc_main$1d = {
    name: "UniDatetimePicker",
    data() {
      return {
        indicatorStyle: `height: 50px;`,
        visible: false,
        fixNvueBug: {},
        dateShow: true,
        timeShow: true,
        title: "日期和时间",
        // 输入框当前时间
        time: "",
        // 当前的年月日时分秒
        year: 1920,
        month: 0,
        day: 0,
        hour: 0,
        minute: 0,
        second: 0,
        // 起始时间
        startYear: 1920,
        startMonth: 1,
        startDay: 1,
        startHour: 0,
        startMinute: 0,
        startSecond: 0,
        // 结束时间
        endYear: 2120,
        endMonth: 12,
        endDay: 31,
        endHour: 23,
        endMinute: 59,
        endSecond: 59
      };
    },
    options: {
      virtualHost: true
    },
    props: {
      type: {
        type: String,
        default: "datetime"
      },
      value: {
        type: [String, Number],
        default: ""
      },
      modelValue: {
        type: [String, Number],
        default: ""
      },
      start: {
        type: [Number, String],
        default: ""
      },
      end: {
        type: [Number, String],
        default: ""
      },
      returnType: {
        type: String,
        default: "string"
      },
      disabled: {
        type: [Boolean, String],
        default: false
      },
      border: {
        type: [Boolean, String],
        default: true
      },
      hideSecond: {
        type: [Boolean, String],
        default: false
      }
    },
    watch: {
      modelValue: {
        handler(newVal) {
          if (newVal) {
            this.parseValue(fixIosDateFormat(newVal));
            this.initTime(false);
          } else {
            this.time = "";
            this.parseValue(Date.now());
          }
        },
        immediate: true
      },
      type: {
        handler(newValue) {
          if (newValue === "date") {
            this.dateShow = true;
            this.timeShow = false;
            this.title = "日期";
          } else if (newValue === "time") {
            this.dateShow = false;
            this.timeShow = true;
            this.title = "时间";
          } else {
            this.dateShow = true;
            this.timeShow = true;
            this.title = "日期和时间";
          }
        },
        immediate: true
      },
      start: {
        handler(newVal) {
          this.parseDatetimeRange(fixIosDateFormat(newVal), "start");
        },
        immediate: true
      },
      end: {
        handler(newVal) {
          this.parseDatetimeRange(fixIosDateFormat(newVal), "end");
        },
        immediate: true
      },
      // 月、日、时、分、秒可选范围变化后，检查当前值是否在范围内，不在则当前值重置为可选范围第一项
      months(newVal) {
        this.checkValue("month", this.month, newVal);
      },
      days(newVal) {
        this.checkValue("day", this.day, newVal);
      },
      hours(newVal) {
        this.checkValue("hour", this.hour, newVal);
      },
      minutes(newVal) {
        this.checkValue("minute", this.minute, newVal);
      },
      seconds(newVal) {
        this.checkValue("second", this.second, newVal);
      }
    },
    computed: {
      // 当前年、月、日、时、分、秒选择范围
      years() {
        return this.getCurrentRange("year");
      },
      months() {
        return this.getCurrentRange("month");
      },
      days() {
        return this.getCurrentRange("day");
      },
      hours() {
        return this.getCurrentRange("hour");
      },
      minutes() {
        return this.getCurrentRange("minute");
      },
      seconds() {
        return this.getCurrentRange("second");
      },
      // picker 当前值数组
      ymd() {
        return [this.year - this.minYear, this.month - this.minMonth, this.day - this.minDay];
      },
      hms() {
        return [this.hour - this.minHour, this.minute - this.minMinute, this.second - this.minSecond];
      },
      // 当前 date 是 start
      currentDateIsStart() {
        return this.year === this.startYear && this.month === this.startMonth && this.day === this.startDay;
      },
      // 当前 date 是 end
      currentDateIsEnd() {
        return this.year === this.endYear && this.month === this.endMonth && this.day === this.endDay;
      },
      // 当前年、月、日、时、分、秒的最小值和最大值
      minYear() {
        return this.startYear;
      },
      maxYear() {
        return this.endYear;
      },
      minMonth() {
        if (this.year === this.startYear) {
          return this.startMonth;
        } else {
          return 1;
        }
      },
      maxMonth() {
        if (this.year === this.endYear) {
          return this.endMonth;
        } else {
          return 12;
        }
      },
      minDay() {
        if (this.year === this.startYear && this.month === this.startMonth) {
          return this.startDay;
        } else {
          return 1;
        }
      },
      maxDay() {
        if (this.year === this.endYear && this.month === this.endMonth) {
          return this.endDay;
        } else {
          return this.daysInMonth(this.year, this.month);
        }
      },
      minHour() {
        if (this.type === "datetime") {
          if (this.currentDateIsStart) {
            return this.startHour;
          } else {
            return 0;
          }
        }
        if (this.type === "time") {
          return this.startHour;
        }
      },
      maxHour() {
        if (this.type === "datetime") {
          if (this.currentDateIsEnd) {
            return this.endHour;
          } else {
            return 23;
          }
        }
        if (this.type === "time") {
          return this.endHour;
        }
      },
      minMinute() {
        if (this.type === "datetime") {
          if (this.currentDateIsStart && this.hour === this.startHour) {
            return this.startMinute;
          } else {
            return 0;
          }
        }
        if (this.type === "time") {
          if (this.hour === this.startHour) {
            return this.startMinute;
          } else {
            return 0;
          }
        }
      },
      maxMinute() {
        if (this.type === "datetime") {
          if (this.currentDateIsEnd && this.hour === this.endHour) {
            return this.endMinute;
          } else {
            return 59;
          }
        }
        if (this.type === "time") {
          if (this.hour === this.endHour) {
            return this.endMinute;
          } else {
            return 59;
          }
        }
      },
      minSecond() {
        if (this.type === "datetime") {
          if (this.currentDateIsStart && this.hour === this.startHour && this.minute === this.startMinute) {
            return this.startSecond;
          } else {
            return 0;
          }
        }
        if (this.type === "time") {
          if (this.hour === this.startHour && this.minute === this.startMinute) {
            return this.startSecond;
          } else {
            return 0;
          }
        }
      },
      maxSecond() {
        if (this.type === "datetime") {
          if (this.currentDateIsEnd && this.hour === this.endHour && this.minute === this.endMinute) {
            return this.endSecond;
          } else {
            return 59;
          }
        }
        if (this.type === "time") {
          if (this.hour === this.endHour && this.minute === this.endMinute) {
            return this.endSecond;
          } else {
            return 59;
          }
        }
      },
      /**
       * for i18n
       */
      selectTimeText() {
        return t$1("uni-datetime-picker.selectTime");
      },
      okText() {
        return t$1("uni-datetime-picker.ok");
      },
      clearText() {
        return t$1("uni-datetime-picker.clear");
      },
      cancelText() {
        return t$1("uni-datetime-picker.cancel");
      }
    },
    mounted() {
    },
    methods: {
      /**
       * @param {Object} item
       * 小于 10 在前面加个 0
       */
      lessThanTen(item) {
        return item < 10 ? "0" + item : item;
      },
      /**
       * 解析时分秒字符串，例如：00:00:00
       * @param {String} timeString
       */
      parseTimeType(timeString) {
        if (timeString) {
          let timeArr = timeString.split(":");
          this.hour = Number(timeArr[0]);
          this.minute = Number(timeArr[1]);
          this.second = Number(timeArr[2]);
        }
      },
      /**
       * 解析选择器初始值，类型可以是字符串、时间戳，例如：2000-10-02、'08:30:00'、 1610695109000
       * @param {String | Number} datetime
       */
      initPickerValue(datetime) {
        let defaultValue = null;
        if (datetime) {
          defaultValue = this.compareValueWithStartAndEnd(datetime, this.start, this.end);
        } else {
          defaultValue = Date.now();
          defaultValue = this.compareValueWithStartAndEnd(defaultValue, this.start, this.end);
        }
        this.parseValue(defaultValue);
      },
      /**
       * 初始值规则：
       * - 用户设置初始值 value
       * 	- 设置了起始时间 start、终止时间 end，并 start < value < end，初始值为 value， 否则初始值为 start
       * 	- 只设置了起始时间 start，并 start < value，初始值为 value，否则初始值为 start
       * 	- 只设置了终止时间 end，并 value < end，初始值为 value，否则初始值为 end
       * 	- 无起始终止时间，则初始值为 value
       * - 无初始值 value，则初始值为当前本地时间 Date.now()
       * @param {Object} value
       * @param {Object} dateBase
       */
      compareValueWithStartAndEnd(value, start, end) {
        let winner = null;
        value = this.superTimeStamp(value);
        start = this.superTimeStamp(start);
        end = this.superTimeStamp(end);
        if (start && end) {
          if (value < start) {
            winner = new Date(start);
          } else if (value > end) {
            winner = new Date(end);
          } else {
            winner = new Date(value);
          }
        } else if (start && !end) {
          winner = start <= value ? new Date(value) : new Date(start);
        } else if (!start && end) {
          winner = value <= end ? new Date(value) : new Date(end);
        } else {
          winner = new Date(value);
        }
        return winner;
      },
      /**
       * 转换为可比较的时间戳，接受日期、时分秒、时间戳
       * @param {Object} value
       */
      superTimeStamp(value) {
        let dateBase = "";
        if (this.type === "time" && value && typeof value === "string") {
          const now2 = /* @__PURE__ */ new Date();
          const year = now2.getFullYear();
          const month = now2.getMonth() + 1;
          const day = now2.getDate();
          dateBase = year + "/" + month + "/" + day + " ";
        }
        if (Number(value)) {
          value = parseInt(value);
          dateBase = 0;
        }
        return this.createTimeStamp(dateBase + value);
      },
      /**
       * 解析默认值 value，字符串、时间戳
       * @param {Object} defaultTime
       */
      parseValue(value) {
        if (!value) {
          return;
        }
        if (this.type === "time" && typeof value === "string") {
          this.parseTimeType(value);
        } else {
          let defaultDate = null;
          defaultDate = new Date(value);
          if (this.type !== "time") {
            this.year = defaultDate.getFullYear();
            this.month = defaultDate.getMonth() + 1;
            this.day = defaultDate.getDate();
          }
          if (this.type !== "date") {
            this.hour = defaultDate.getHours();
            this.minute = defaultDate.getMinutes();
            this.second = defaultDate.getSeconds();
          }
        }
        if (this.hideSecond) {
          this.second = 0;
        }
      },
      /**
       * 解析可选择时间范围 start、end，年月日字符串、时间戳
       * @param {Object} defaultTime
       */
      parseDatetimeRange(point, pointType) {
        if (!point) {
          if (pointType === "start") {
            this.startYear = 1920;
            this.startMonth = 1;
            this.startDay = 1;
            this.startHour = 0;
            this.startMinute = 0;
            this.startSecond = 0;
          }
          if (pointType === "end") {
            this.endYear = 2120;
            this.endMonth = 12;
            this.endDay = 31;
            this.endHour = 23;
            this.endMinute = 59;
            this.endSecond = 59;
          }
          return;
        }
        if (this.type === "time") {
          const pointArr = point.split(":");
          this[pointType + "Hour"] = Number(pointArr[0]);
          this[pointType + "Minute"] = Number(pointArr[1]);
          this[pointType + "Second"] = Number(pointArr[2]);
        } else {
          if (!point) {
            pointType === "start" ? this.startYear = this.year - 60 : this.endYear = this.year + 60;
            return;
          }
          if (Number(point)) {
            point = parseInt(point);
          }
          const hasTime = /[0-9]:[0-9]/;
          if (this.type === "datetime" && pointType === "end" && typeof point === "string" && !hasTime.test(
            point
          )) {
            point = point + " 23:59:59";
          }
          const pointDate = new Date(point);
          this[pointType + "Year"] = pointDate.getFullYear();
          this[pointType + "Month"] = pointDate.getMonth() + 1;
          this[pointType + "Day"] = pointDate.getDate();
          if (this.type === "datetime") {
            this[pointType + "Hour"] = pointDate.getHours();
            this[pointType + "Minute"] = pointDate.getMinutes();
            this[pointType + "Second"] = pointDate.getSeconds();
          }
        }
      },
      // 获取 年、月、日、时、分、秒 当前可选范围
      getCurrentRange(value) {
        const range2 = [];
        for (let i2 = this["min" + this.capitalize(value)]; i2 <= this["max" + this.capitalize(value)]; i2++) {
          range2.push(i2);
        }
        return range2;
      },
      // 字符串首字母大写
      capitalize(str) {
        return str.charAt(0).toUpperCase() + str.slice(1);
      },
      // 检查当前值是否在范围内，不在则当前值重置为可选范围第一项
      checkValue(name, value, values) {
        if (values.indexOf(value) === -1) {
          this[name] = values[0];
        }
      },
      // 每个月的实际天数
      daysInMonth(year, month) {
        return new Date(year, month, 0).getDate();
      },
      /**
       * 生成时间戳
       * @param {Object} time
       */
      createTimeStamp(time) {
        if (!time)
          return;
        if (typeof time === "number") {
          return time;
        } else {
          time = time.replace(/-/g, "/");
          if (this.type === "date") {
            time = time + " 00:00:00";
          }
          return Date.parse(time);
        }
      },
      /**
       * 生成日期或时间的字符串
       */
      createDomSting() {
        const yymmdd = this.year + "-" + this.lessThanTen(this.month) + "-" + this.lessThanTen(this.day);
        let hhmmss = this.lessThanTen(this.hour) + ":" + this.lessThanTen(this.minute);
        if (!this.hideSecond) {
          hhmmss = hhmmss + ":" + this.lessThanTen(this.second);
        }
        if (this.type === "date") {
          return yymmdd;
        } else if (this.type === "time") {
          return hhmmss;
        } else {
          return yymmdd + " " + hhmmss;
        }
      },
      /**
       * 初始化返回值，并抛出 change 事件
       */
      initTime(emit = true) {
        this.time = this.createDomSting();
        if (!emit)
          return;
        if (this.returnType === "timestamp" && this.type !== "time") {
          this.$emit("change", this.createTimeStamp(this.time));
          this.$emit("input", this.createTimeStamp(this.time));
          this.$emit("update:modelValue", this.createTimeStamp(this.time));
        } else {
          this.$emit("change", this.time);
          this.$emit("input", this.time);
          this.$emit("update:modelValue", this.time);
        }
      },
      /**
       * 用户选择日期或时间更新 data
       * @param {Object} e
       */
      bindDateChange(e2) {
        const val2 = e2.detail.value;
        this.year = this.years[val2[0]];
        this.month = this.months[val2[1]];
        this.day = this.days[val2[2]];
      },
      bindTimeChange(e2) {
        const val2 = e2.detail.value;
        this.hour = this.hours[val2[0]];
        this.minute = this.minutes[val2[1]];
        this.second = this.seconds[val2[2]];
      },
      /**
       * 初始化弹出层
       */
      initTimePicker() {
        if (this.disabled)
          return;
        const value = fixIosDateFormat(this.time);
        this.initPickerValue(value);
        this.visible = !this.visible;
      },
      /**
       * 触发或关闭弹框
       */
      tiggerTimePicker(e2) {
        this.visible = !this.visible;
      },
      /**
       * 用户点击“清空”按钮，清空当前值
       */
      clearTime() {
        this.time = "";
        this.$emit("change", this.time);
        this.$emit("input", this.time);
        this.$emit("update:modelValue", this.time);
        this.tiggerTimePicker();
      },
      /**
       * 用户点击“确定”按钮
       */
      setTime() {
        this.initTime();
        this.tiggerTimePicker();
      }
    }
  };
  function _sfc_render$1c(_ctx, _cache, $props, $setup, $data, $options) {
    return vue.openBlock(), vue.createElementBlock("view", { class: "uni-datetime-picker" }, [
      vue.createElementVNode("view", {
        onClick: _cache[0] || (_cache[0] = (...args) => $options.initTimePicker && $options.initTimePicker(...args))
      }, [
        vue.renderSlot(_ctx.$slots, "default", {}, () => [
          vue.createElementVNode(
            "view",
            {
              class: vue.normalizeClass(["uni-datetime-picker-timebox-pointer", { "uni-datetime-picker-disabled": $props.disabled, "uni-datetime-picker-timebox": $props.border }])
            },
            [
              vue.createElementVNode(
                "text",
                { class: "uni-datetime-picker-text" },
                vue.toDisplayString($data.time),
                1
                /* TEXT */
              ),
              !$data.time ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 0,
                class: "uni-datetime-picker-time"
              }, [
                vue.createElementVNode(
                  "text",
                  { class: "uni-datetime-picker-text" },
                  vue.toDisplayString($options.selectTimeText),
                  1
                  /* TEXT */
                )
              ])) : vue.createCommentVNode("v-if", true)
            ],
            2
            /* CLASS */
          )
        ], true)
      ]),
      $data.visible ? (vue.openBlock(), vue.createElementBlock("view", {
        key: 0,
        id: "mask",
        class: "uni-datetime-picker-mask",
        onClick: _cache[1] || (_cache[1] = (...args) => $options.tiggerTimePicker && $options.tiggerTimePicker(...args))
      })) : vue.createCommentVNode("v-if", true),
      $data.visible ? (vue.openBlock(), vue.createElementBlock(
        "view",
        {
          key: 1,
          class: vue.normalizeClass(["uni-datetime-picker-popup", [$data.dateShow && $data.timeShow ? "" : "fix-nvue-height"]]),
          style: vue.normalizeStyle($data.fixNvueBug)
        },
        [
          vue.createElementVNode("view", { class: "uni-title" }, [
            vue.createElementVNode(
              "text",
              { class: "uni-datetime-picker-text" },
              vue.toDisplayString($options.selectTimeText),
              1
              /* TEXT */
            )
          ]),
          $data.dateShow ? (vue.openBlock(), vue.createElementBlock("view", {
            key: 0,
            class: "uni-datetime-picker__container-box"
          }, [
            vue.createElementVNode("picker-view", {
              class: "uni-datetime-picker-view",
              "indicator-style": $data.indicatorStyle,
              value: $options.ymd,
              onChange: _cache[2] || (_cache[2] = (...args) => $options.bindDateChange && $options.bindDateChange(...args))
            }, [
              vue.createElementVNode("picker-view-column", null, [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($options.years, (item, index) => {
                    return vue.openBlock(), vue.createElementBlock("view", {
                      class: "uni-datetime-picker-item",
                      key: index
                    }, [
                      vue.createElementVNode(
                        "text",
                        { class: "uni-datetime-picker-item" },
                        vue.toDisplayString($options.lessThanTen(item)),
                        1
                        /* TEXT */
                      )
                    ]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                ))
              ]),
              vue.createElementVNode("picker-view-column", null, [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($options.months, (item, index) => {
                    return vue.openBlock(), vue.createElementBlock("view", {
                      class: "uni-datetime-picker-item",
                      key: index
                    }, [
                      vue.createElementVNode(
                        "text",
                        { class: "uni-datetime-picker-item" },
                        vue.toDisplayString($options.lessThanTen(item)),
                        1
                        /* TEXT */
                      )
                    ]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                ))
              ]),
              vue.createElementVNode("picker-view-column", null, [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($options.days, (item, index) => {
                    return vue.openBlock(), vue.createElementBlock("view", {
                      class: "uni-datetime-picker-item",
                      key: index
                    }, [
                      vue.createElementVNode(
                        "text",
                        { class: "uni-datetime-picker-item" },
                        vue.toDisplayString($options.lessThanTen(item)),
                        1
                        /* TEXT */
                      )
                    ]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                ))
              ])
            ], 40, ["indicator-style", "value"]),
            vue.createElementVNode("text", { class: "uni-datetime-picker-sign sign-left" }, "-"),
            vue.createElementVNode("text", { class: "uni-datetime-picker-sign sign-right" }, "-")
          ])) : vue.createCommentVNode("v-if", true),
          $data.timeShow ? (vue.openBlock(), vue.createElementBlock("view", {
            key: 1,
            class: "uni-datetime-picker__container-box"
          }, [
            vue.createElementVNode("picker-view", {
              class: vue.normalizeClass(["uni-datetime-picker-view", [$props.hideSecond ? "time-hide-second" : ""]]),
              "indicator-style": $data.indicatorStyle,
              value: $options.hms,
              onChange: _cache[3] || (_cache[3] = (...args) => $options.bindTimeChange && $options.bindTimeChange(...args))
            }, [
              vue.createElementVNode("picker-view-column", null, [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($options.hours, (item, index) => {
                    return vue.openBlock(), vue.createElementBlock("view", {
                      class: "uni-datetime-picker-item",
                      key: index
                    }, [
                      vue.createElementVNode(
                        "text",
                        { class: "uni-datetime-picker-item" },
                        vue.toDisplayString($options.lessThanTen(item)),
                        1
                        /* TEXT */
                      )
                    ]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                ))
              ]),
              vue.createElementVNode("picker-view-column", null, [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($options.minutes, (item, index) => {
                    return vue.openBlock(), vue.createElementBlock("view", {
                      class: "uni-datetime-picker-item",
                      key: index
                    }, [
                      vue.createElementVNode(
                        "text",
                        { class: "uni-datetime-picker-item" },
                        vue.toDisplayString($options.lessThanTen(item)),
                        1
                        /* TEXT */
                      )
                    ]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                ))
              ]),
              !$props.hideSecond ? (vue.openBlock(), vue.createElementBlock("picker-view-column", { key: 0 }, [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($options.seconds, (item, index) => {
                    return vue.openBlock(), vue.createElementBlock("view", {
                      class: "uni-datetime-picker-item",
                      key: index
                    }, [
                      vue.createElementVNode(
                        "text",
                        { class: "uni-datetime-picker-item" },
                        vue.toDisplayString($options.lessThanTen(item)),
                        1
                        /* TEXT */
                      )
                    ]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                ))
              ])) : vue.createCommentVNode("v-if", true)
            ], 42, ["indicator-style", "value"]),
            vue.createElementVNode(
              "text",
              {
                class: vue.normalizeClass(["uni-datetime-picker-sign", [$props.hideSecond ? "sign-center" : "sign-left"]])
              },
              ":",
              2
              /* CLASS */
            ),
            !$props.hideSecond ? (vue.openBlock(), vue.createElementBlock("text", {
              key: 0,
              class: "uni-datetime-picker-sign sign-right"
            }, ":")) : vue.createCommentVNode("v-if", true)
          ])) : vue.createCommentVNode("v-if", true),
          vue.createElementVNode("view", { class: "uni-datetime-picker-btn" }, [
            vue.createElementVNode("view", {
              onClick: _cache[4] || (_cache[4] = (...args) => $options.clearTime && $options.clearTime(...args))
            }, [
              vue.createElementVNode(
                "text",
                { class: "uni-datetime-picker-btn-text" },
                vue.toDisplayString($options.clearText),
                1
                /* TEXT */
              )
            ]),
            vue.createElementVNode("view", { class: "uni-datetime-picker-btn-group" }, [
              vue.createElementVNode("view", {
                class: "uni-datetime-picker-cancel",
                onClick: _cache[5] || (_cache[5] = (...args) => $options.tiggerTimePicker && $options.tiggerTimePicker(...args))
              }, [
                vue.createElementVNode(
                  "text",
                  { class: "uni-datetime-picker-btn-text" },
                  vue.toDisplayString($options.cancelText),
                  1
                  /* TEXT */
                )
              ]),
              vue.createElementVNode("view", {
                onClick: _cache[6] || (_cache[6] = (...args) => $options.setTime && $options.setTime(...args))
              }, [
                vue.createElementVNode(
                  "text",
                  { class: "uni-datetime-picker-btn-text" },
                  vue.toDisplayString($options.okText),
                  1
                  /* TEXT */
                )
              ])
            ])
          ])
        ],
        6
        /* CLASS, STYLE */
      )) : vue.createCommentVNode("v-if", true)
    ]);
  }
  const TimePicker = /* @__PURE__ */ _export_sfc(_sfc_main$1d, [["render", _sfc_render$1c], ["__scopeId", "data-v-1d532b70"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/uni_modules/uni-datetime-picker/components/uni-datetime-picker/time-picker.vue"]]);
  const {
    t
  } = initVueI18n(i18nMessages);
  const _sfc_main$1c = {
    components: {
      calendarItem,
      timePicker: TimePicker
    },
    options: {
      virtualHost: true
    },
    props: {
      date: {
        type: String,
        default: ""
      },
      defTime: {
        type: [String, Object],
        default: ""
      },
      selectableTimes: {
        type: [Object],
        default() {
          return {};
        }
      },
      selected: {
        type: Array,
        default() {
          return [];
        }
      },
      startDate: {
        type: String,
        default: ""
      },
      endDate: {
        type: String,
        default: ""
      },
      startPlaceholder: {
        type: String,
        default: ""
      },
      endPlaceholder: {
        type: String,
        default: ""
      },
      range: {
        type: Boolean,
        default: false
      },
      hasTime: {
        type: Boolean,
        default: false
      },
      insert: {
        type: Boolean,
        default: true
      },
      showMonth: {
        type: Boolean,
        default: true
      },
      clearDate: {
        type: Boolean,
        default: true
      },
      checkHover: {
        type: Boolean,
        default: true
      },
      hideSecond: {
        type: [Boolean],
        default: false
      },
      pleStatus: {
        type: Object,
        default() {
          return {
            before: "",
            after: "",
            data: [],
            fulldate: ""
          };
        }
      },
      defaultValue: {
        type: [String, Object, Array],
        default: ""
      }
    },
    data() {
      return {
        show: false,
        weeks: [],
        calendar: {},
        nowDate: {},
        aniMaskShow: false,
        firstEnter: true,
        time: "",
        timeRange: {
          startTime: "",
          endTime: ""
        },
        tempSingleDate: "",
        tempRange: {
          before: "",
          after: ""
        }
      };
    },
    watch: {
      date: {
        immediate: true,
        handler(newVal) {
          if (!this.range) {
            this.tempSingleDate = newVal;
            setTimeout(() => {
              this.init(newVal);
            }, 100);
          }
        }
      },
      defTime: {
        immediate: true,
        handler(newVal) {
          if (!this.range) {
            this.time = newVal;
          } else {
            this.timeRange.startTime = newVal.start;
            this.timeRange.endTime = newVal.end;
          }
        }
      },
      startDate(val2) {
        if (!this.cale) {
          return;
        }
        this.cale.setStartDate(val2);
        this.cale.setDate(this.nowDate.fullDate);
        this.weeks = this.cale.weeks;
      },
      endDate(val2) {
        if (!this.cale) {
          return;
        }
        this.cale.setEndDate(val2);
        this.cale.setDate(this.nowDate.fullDate);
        this.weeks = this.cale.weeks;
      },
      selected(newVal) {
        if (!this.cale) {
          return;
        }
        this.cale.setSelectInfo(this.nowDate.fullDate, newVal);
        this.weeks = this.cale.weeks;
      },
      pleStatus: {
        immediate: true,
        handler(newVal) {
          const {
            before,
            after,
            fulldate,
            which
          } = newVal;
          this.tempRange.before = before;
          this.tempRange.after = after;
          setTimeout(() => {
            if (fulldate) {
              this.cale.setHoverMultiple(fulldate);
              if (before && after) {
                this.cale.lastHover = true;
                if (this.rangeWithinMonth(after, before))
                  return;
                this.setDate(before);
              } else {
                this.cale.setMultiple(fulldate);
                this.setDate(this.nowDate.fullDate);
                this.calendar.fullDate = "";
                this.cale.lastHover = false;
              }
            } else {
              if (!this.cale) {
                return;
              }
              this.cale.setDefaultMultiple(before, after);
              if (which === "left" && before) {
                this.setDate(before);
                this.weeks = this.cale.weeks;
              } else if (after) {
                this.setDate(after);
                this.weeks = this.cale.weeks;
              }
              this.cale.lastHover = true;
            }
          }, 16);
        }
      }
    },
    computed: {
      timepickerStartTime() {
        const activeDate = this.range ? this.tempRange.before : this.calendar.fullDate;
        return activeDate === this.startDate ? this.selectableTimes.start : "";
      },
      timepickerEndTime() {
        const activeDate = this.range ? this.tempRange.after : this.calendar.fullDate;
        return activeDate === this.endDate ? this.selectableTimes.end : "";
      },
      /**
       * for i18n
       */
      selectDateText() {
        return t("uni-datetime-picker.selectDate");
      },
      startDateText() {
        return this.startPlaceholder || t("uni-datetime-picker.startDate");
      },
      endDateText() {
        return this.endPlaceholder || t("uni-datetime-picker.endDate");
      },
      okText() {
        return t("uni-datetime-picker.ok");
      },
      yearText() {
        return t("uni-datetime-picker.year");
      },
      monthText() {
        return t("uni-datetime-picker.month");
      },
      MONText() {
        return t("uni-calender.MON");
      },
      TUEText() {
        return t("uni-calender.TUE");
      },
      WEDText() {
        return t("uni-calender.WED");
      },
      THUText() {
        return t("uni-calender.THU");
      },
      FRIText() {
        return t("uni-calender.FRI");
      },
      SATText() {
        return t("uni-calender.SAT");
      },
      SUNText() {
        return t("uni-calender.SUN");
      },
      confirmText() {
        return t("uni-calender.confirm");
      }
    },
    created() {
      this.cale = new Calendar$1({
        selected: this.selected,
        startDate: this.startDate,
        endDate: this.endDate,
        range: this.range
      });
      this.init(this.date);
    },
    methods: {
      leaveCale() {
        this.firstEnter = true;
      },
      handleMouse(weeks) {
        if (weeks.disable)
          return;
        if (this.cale.lastHover)
          return;
        let {
          before,
          after
        } = this.cale.multipleStatus;
        if (!before)
          return;
        this.calendar = weeks;
        this.cale.setHoverMultiple(this.calendar.fullDate);
        this.weeks = this.cale.weeks;
        if (this.firstEnter) {
          this.$emit("firstEnterCale", this.cale.multipleStatus);
          this.firstEnter = false;
        }
      },
      rangeWithinMonth(A2, B2) {
        const [yearA, monthA] = A2.split("-");
        const [yearB, monthB] = B2.split("-");
        return yearA === yearB && monthA === monthB;
      },
      // 蒙版点击事件
      maskClick() {
        this.close();
        this.$emit("maskClose");
      },
      clearCalender() {
        if (this.range) {
          this.timeRange.startTime = "";
          this.timeRange.endTime = "";
          this.tempRange.before = "";
          this.tempRange.after = "";
          this.cale.multipleStatus.before = "";
          this.cale.multipleStatus.after = "";
          this.cale.multipleStatus.data = [];
          this.cale.lastHover = false;
        } else {
          this.time = "";
          this.tempSingleDate = "";
        }
        this.calendar.fullDate = "";
        this.setDate(/* @__PURE__ */ new Date());
      },
      bindDateChange(e2) {
        const value = e2.detail.value + "-1";
        this.setDate(value);
      },
      /**
       * 初始化日期显示
       * @param {Object} date
       */
      init(date2) {
        if (!this.cale) {
          return;
        }
        this.cale.setDate(date2 || /* @__PURE__ */ new Date());
        this.weeks = this.cale.weeks;
        this.nowDate = this.cale.getInfo(date2);
        this.calendar = {
          ...this.nowDate
        };
        if (!date2) {
          this.calendar.fullDate = "";
          if (this.defaultValue && !this.range) {
            const defaultDate = new Date(this.defaultValue);
            const fullDate = getDate$1(defaultDate);
            const year = defaultDate.getFullYear();
            const month = defaultDate.getMonth() + 1;
            const date3 = defaultDate.getDate();
            const day = defaultDate.getDay();
            this.calendar = {
              fullDate,
              year,
              month,
              date: date3,
              day
            }, this.tempSingleDate = fullDate;
            this.time = getTime(defaultDate, this.hideSecond);
          }
        }
      },
      /**
       * 打开日历弹窗
       */
      open() {
        if (this.clearDate && !this.insert) {
          this.cale.cleanMultipleStatus();
          this.init(this.date);
        }
        this.show = true;
        this.$nextTick(() => {
          setTimeout(() => {
            this.aniMaskShow = true;
          }, 50);
        });
      },
      /**
       * 关闭日历弹窗
       */
      close() {
        this.aniMaskShow = false;
        this.$nextTick(() => {
          setTimeout(() => {
            this.show = false;
            this.$emit("close");
          }, 300);
        });
      },
      /**
       * 确认按钮
       */
      confirm() {
        this.setEmit("confirm");
        this.close();
      },
      /**
       * 变化触发
       */
      change(isSingleChange) {
        if (!this.insert && !isSingleChange)
          return;
        this.setEmit("change");
      },
      /**
       * 选择月份触发
       */
      monthSwitch() {
        let {
          year,
          month
        } = this.nowDate;
        this.$emit("monthSwitch", {
          year,
          month: Number(month)
        });
      },
      /**
       * 派发事件
       * @param {Object} name
       */
      setEmit(name) {
        if (!this.range) {
          if (!this.calendar.fullDate) {
            this.calendar = this.cale.getInfo(/* @__PURE__ */ new Date());
            this.tempSingleDate = this.calendar.fullDate;
          }
          if (this.hasTime && !this.time) {
            this.time = getTime(/* @__PURE__ */ new Date(), this.hideSecond);
          }
        }
        let {
          year,
          month,
          date: date2,
          fullDate,
          extraInfo
        } = this.calendar;
        this.$emit(name, {
          range: this.cale.multipleStatus,
          year,
          month,
          date: date2,
          time: this.time,
          timeRange: this.timeRange,
          fulldate: fullDate,
          extraInfo: extraInfo || {}
        });
      },
      /**
       * 选择天触发
       * @param {Object} weeks
       */
      choiceDate(weeks) {
        if (weeks.disable)
          return;
        this.calendar = weeks;
        this.calendar.userChecked = true;
        this.cale.setMultiple(this.calendar.fullDate, true);
        this.weeks = this.cale.weeks;
        this.tempSingleDate = this.calendar.fullDate;
        const beforeDate = new Date(this.cale.multipleStatus.before).getTime();
        const afterDate = new Date(this.cale.multipleStatus.after).getTime();
        if (beforeDate > afterDate && afterDate) {
          this.tempRange.before = this.cale.multipleStatus.after;
          this.tempRange.after = this.cale.multipleStatus.before;
        } else {
          this.tempRange.before = this.cale.multipleStatus.before;
          this.tempRange.after = this.cale.multipleStatus.after;
        }
        this.change(true);
      },
      changeMonth(type) {
        let newDate;
        if (type === "pre") {
          newDate = this.cale.getPreMonthObj(this.nowDate.fullDate).fullDate;
        } else if (type === "next") {
          newDate = this.cale.getNextMonthObj(this.nowDate.fullDate).fullDate;
        }
        this.setDate(newDate);
        this.monthSwitch();
      },
      /**
       * 设置日期
       * @param {Object} date
       */
      setDate(date2) {
        this.cale.setDate(date2);
        this.weeks = this.cale.weeks;
        this.nowDate = this.cale.getInfo(date2);
      }
    }
  };
  function _sfc_render$1b(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_calendar_item = vue.resolveComponent("calendar-item");
    const _component_time_picker = vue.resolveComponent("time-picker");
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    return vue.openBlock(), vue.createElementBlock(
      "view",
      {
        class: "uni-calendar",
        onMouseleave: _cache[9] || (_cache[9] = (...args) => $options.leaveCale && $options.leaveCale(...args))
      },
      [
        !$props.insert && $data.show ? (vue.openBlock(), vue.createElementBlock(
          "view",
          {
            key: 0,
            class: vue.normalizeClass(["uni-calendar__mask", { "uni-calendar--mask-show": $data.aniMaskShow }]),
            onClick: _cache[0] || (_cache[0] = (...args) => $options.maskClick && $options.maskClick(...args))
          },
          null,
          2
          /* CLASS */
        )) : vue.createCommentVNode("v-if", true),
        $props.insert || $data.show ? (vue.openBlock(), vue.createElementBlock(
          "view",
          {
            key: 1,
            class: vue.normalizeClass(["uni-calendar__content", { "uni-calendar--fixed": !$props.insert, "uni-calendar--ani-show": $data.aniMaskShow, "uni-calendar__content-mobile": $data.aniMaskShow }])
          },
          [
            vue.createElementVNode(
              "view",
              {
                class: vue.normalizeClass(["uni-calendar__header", { "uni-calendar__header-mobile": !$props.insert }])
              },
              [
                vue.createElementVNode("view", {
                  class: "uni-calendar__header-btn-box",
                  onClick: _cache[1] || (_cache[1] = vue.withModifiers(($event) => $options.changeMonth("pre"), ["stop"]))
                }, [
                  vue.createElementVNode("view", { class: "uni-calendar__header-btn uni-calendar--left" })
                ]),
                vue.createElementVNode("picker", {
                  mode: "date",
                  value: $props.date,
                  fields: "month",
                  onChange: _cache[2] || (_cache[2] = (...args) => $options.bindDateChange && $options.bindDateChange(...args))
                }, [
                  vue.createElementVNode(
                    "text",
                    { class: "uni-calendar__header-text" },
                    vue.toDisplayString(($data.nowDate.year || "") + $options.yearText + ($data.nowDate.month || "") + $options.monthText),
                    1
                    /* TEXT */
                  )
                ], 40, ["value"]),
                vue.createElementVNode("view", {
                  class: "uni-calendar__header-btn-box",
                  onClick: _cache[3] || (_cache[3] = vue.withModifiers(($event) => $options.changeMonth("next"), ["stop"]))
                }, [
                  vue.createElementVNode("view", { class: "uni-calendar__header-btn uni-calendar--right" })
                ]),
                !$props.insert ? (vue.openBlock(), vue.createElementBlock("view", {
                  key: 0,
                  class: "dialog-close",
                  onClick: _cache[4] || (_cache[4] = (...args) => $options.maskClick && $options.maskClick(...args))
                }, [
                  vue.createElementVNode("view", {
                    class: "dialog-close-plus",
                    "data-id": "close"
                  }),
                  vue.createElementVNode("view", {
                    class: "dialog-close-plus dialog-close-rotate",
                    "data-id": "close"
                  })
                ])) : vue.createCommentVNode("v-if", true)
              ],
              2
              /* CLASS */
            ),
            vue.createElementVNode("view", { class: "uni-calendar__box" }, [
              $props.showMonth ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 0,
                class: "uni-calendar__box-bg"
              }, [
                vue.createElementVNode(
                  "text",
                  { class: "uni-calendar__box-bg-text" },
                  vue.toDisplayString($data.nowDate.month),
                  1
                  /* TEXT */
                )
              ])) : vue.createCommentVNode("v-if", true),
              vue.createElementVNode("view", {
                class: "uni-calendar__weeks",
                style: { "padding-bottom": "7px" }
              }, [
                vue.createElementVNode("view", { class: "uni-calendar__weeks-day" }, [
                  vue.createElementVNode(
                    "text",
                    { class: "uni-calendar__weeks-day-text" },
                    vue.toDisplayString($options.SUNText),
                    1
                    /* TEXT */
                  )
                ]),
                vue.createElementVNode("view", { class: "uni-calendar__weeks-day" }, [
                  vue.createElementVNode(
                    "text",
                    { class: "uni-calendar__weeks-day-text" },
                    vue.toDisplayString($options.MONText),
                    1
                    /* TEXT */
                  )
                ]),
                vue.createElementVNode("view", { class: "uni-calendar__weeks-day" }, [
                  vue.createElementVNode(
                    "text",
                    { class: "uni-calendar__weeks-day-text" },
                    vue.toDisplayString($options.TUEText),
                    1
                    /* TEXT */
                  )
                ]),
                vue.createElementVNode("view", { class: "uni-calendar__weeks-day" }, [
                  vue.createElementVNode(
                    "text",
                    { class: "uni-calendar__weeks-day-text" },
                    vue.toDisplayString($options.WEDText),
                    1
                    /* TEXT */
                  )
                ]),
                vue.createElementVNode("view", { class: "uni-calendar__weeks-day" }, [
                  vue.createElementVNode(
                    "text",
                    { class: "uni-calendar__weeks-day-text" },
                    vue.toDisplayString($options.THUText),
                    1
                    /* TEXT */
                  )
                ]),
                vue.createElementVNode("view", { class: "uni-calendar__weeks-day" }, [
                  vue.createElementVNode(
                    "text",
                    { class: "uni-calendar__weeks-day-text" },
                    vue.toDisplayString($options.FRIText),
                    1
                    /* TEXT */
                  )
                ]),
                vue.createElementVNode("view", { class: "uni-calendar__weeks-day" }, [
                  vue.createElementVNode(
                    "text",
                    { class: "uni-calendar__weeks-day-text" },
                    vue.toDisplayString($options.SATText),
                    1
                    /* TEXT */
                  )
                ])
              ]),
              (vue.openBlock(true), vue.createElementBlock(
                vue.Fragment,
                null,
                vue.renderList($data.weeks, (item, weekIndex) => {
                  return vue.openBlock(), vue.createElementBlock("view", {
                    class: "uni-calendar__weeks",
                    key: weekIndex
                  }, [
                    (vue.openBlock(true), vue.createElementBlock(
                      vue.Fragment,
                      null,
                      vue.renderList(item, (weeks, weeksIndex) => {
                        return vue.openBlock(), vue.createElementBlock("view", {
                          class: "uni-calendar__weeks-item",
                          key: weeksIndex
                        }, [
                          vue.createVNode(_component_calendar_item, {
                            class: "uni-calendar-item--hook",
                            weeks,
                            calendar: $data.calendar,
                            selected: $props.selected,
                            checkHover: $props.range,
                            onChange: $options.choiceDate,
                            onHandleMouse: $options.handleMouse
                          }, null, 8, ["weeks", "calendar", "selected", "checkHover", "onChange", "onHandleMouse"])
                        ]);
                      }),
                      128
                      /* KEYED_FRAGMENT */
                    ))
                  ]);
                }),
                128
                /* KEYED_FRAGMENT */
              ))
            ]),
            !$props.insert && !$props.range && $props.hasTime ? (vue.openBlock(), vue.createElementBlock("view", {
              key: 0,
              class: "uni-date-changed uni-calendar--fixed-top",
              style: { "padding": "0 80px" }
            }, [
              vue.createElementVNode(
                "view",
                { class: "uni-date-changed--time-date" },
                vue.toDisplayString($data.tempSingleDate ? $data.tempSingleDate : $options.selectDateText),
                1
                /* TEXT */
              ),
              vue.createVNode(_component_time_picker, {
                type: "time",
                start: $options.timepickerStartTime,
                end: $options.timepickerEndTime,
                modelValue: $data.time,
                "onUpdate:modelValue": _cache[5] || (_cache[5] = ($event) => $data.time = $event),
                disabled: !$data.tempSingleDate,
                border: false,
                "hide-second": $props.hideSecond,
                class: "time-picker-style"
              }, null, 8, ["start", "end", "modelValue", "disabled", "hide-second"])
            ])) : vue.createCommentVNode("v-if", true),
            !$props.insert && $props.range && $props.hasTime ? (vue.openBlock(), vue.createElementBlock("view", {
              key: 1,
              class: "uni-date-changed uni-calendar--fixed-top"
            }, [
              vue.createElementVNode("view", { class: "uni-date-changed--time-start" }, [
                vue.createElementVNode(
                  "view",
                  { class: "uni-date-changed--time-date" },
                  vue.toDisplayString($data.tempRange.before ? $data.tempRange.before : $options.startDateText),
                  1
                  /* TEXT */
                ),
                vue.createVNode(_component_time_picker, {
                  type: "time",
                  start: $options.timepickerStartTime,
                  modelValue: $data.timeRange.startTime,
                  "onUpdate:modelValue": _cache[6] || (_cache[6] = ($event) => $data.timeRange.startTime = $event),
                  border: false,
                  "hide-second": $props.hideSecond,
                  disabled: !$data.tempRange.before,
                  class: "time-picker-style"
                }, null, 8, ["start", "modelValue", "hide-second", "disabled"])
              ]),
              vue.createElementVNode("view", { style: { "line-height": "50px" } }, [
                vue.createVNode(_component_uni_icons, {
                  type: "arrowthinright",
                  color: "#999"
                })
              ]),
              vue.createElementVNode("view", { class: "uni-date-changed--time-end" }, [
                vue.createElementVNode(
                  "view",
                  { class: "uni-date-changed--time-date" },
                  vue.toDisplayString($data.tempRange.after ? $data.tempRange.after : $options.endDateText),
                  1
                  /* TEXT */
                ),
                vue.createVNode(_component_time_picker, {
                  type: "time",
                  end: $options.timepickerEndTime,
                  modelValue: $data.timeRange.endTime,
                  "onUpdate:modelValue": _cache[7] || (_cache[7] = ($event) => $data.timeRange.endTime = $event),
                  border: false,
                  "hide-second": $props.hideSecond,
                  disabled: !$data.tempRange.after,
                  class: "time-picker-style"
                }, null, 8, ["end", "modelValue", "hide-second", "disabled"])
              ])
            ])) : vue.createCommentVNode("v-if", true),
            !$props.insert ? (vue.openBlock(), vue.createElementBlock("view", {
              key: 2,
              class: "uni-date-changed uni-date-btn--ok"
            }, [
              vue.createElementVNode(
                "view",
                {
                  class: "uni-datetime-picker--btn",
                  onClick: _cache[8] || (_cache[8] = (...args) => $options.confirm && $options.confirm(...args))
                },
                vue.toDisplayString($options.confirmText),
                1
                /* TEXT */
              )
            ])) : vue.createCommentVNode("v-if", true)
          ],
          2
          /* CLASS */
        )) : vue.createCommentVNode("v-if", true)
      ],
      32
      /* NEED_HYDRATION */
    );
  }
  const Calendar = /* @__PURE__ */ _export_sfc(_sfc_main$1c, [["render", _sfc_render$1b], ["__scopeId", "data-v-1d379219"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/uni_modules/uni-datetime-picker/components/uni-datetime-picker/calendar.vue"]]);
  const _sfc_main$1b = {
    name: "UniDatetimePicker",
    options: {
      virtualHost: true
    },
    components: {
      Calendar,
      TimePicker
    },
    data() {
      return {
        isRange: false,
        hasTime: false,
        displayValue: "",
        inputDate: "",
        calendarDate: "",
        pickerTime: "",
        calendarRange: {
          startDate: "",
          startTime: "",
          endDate: "",
          endTime: ""
        },
        displayRangeValue: {
          startDate: "",
          endDate: ""
        },
        tempRange: {
          startDate: "",
          startTime: "",
          endDate: "",
          endTime: ""
        },
        // 左右日历同步数据
        startMultipleStatus: {
          before: "",
          after: "",
          data: [],
          fulldate: ""
        },
        endMultipleStatus: {
          before: "",
          after: "",
          data: [],
          fulldate: ""
        },
        pickerVisible: false,
        pickerPositionStyle: null,
        isEmitValue: false,
        isPhone: false,
        isFirstShow: true,
        i18nT: () => {
        }
      };
    },
    props: {
      type: {
        type: String,
        default: "datetime"
      },
      value: {
        type: [String, Number, Array, Date],
        default: ""
      },
      modelValue: {
        type: [String, Number, Array, Date],
        default: ""
      },
      start: {
        type: [Number, String],
        default: ""
      },
      end: {
        type: [Number, String],
        default: ""
      },
      returnType: {
        type: String,
        default: "string"
      },
      placeholder: {
        type: String,
        default: ""
      },
      startPlaceholder: {
        type: String,
        default: ""
      },
      endPlaceholder: {
        type: String,
        default: ""
      },
      rangeSeparator: {
        type: String,
        default: "-"
      },
      border: {
        type: [Boolean],
        default: true
      },
      disabled: {
        type: [Boolean],
        default: false
      },
      clearIcon: {
        type: [Boolean],
        default: true
      },
      hideSecond: {
        type: [Boolean],
        default: false
      },
      defaultValue: {
        type: [String, Object, Array],
        default: ""
      }
    },
    watch: {
      type: {
        immediate: true,
        handler(newVal) {
          this.hasTime = newVal.indexOf("time") !== -1;
          this.isRange = newVal.indexOf("range") !== -1;
        }
      },
      modelValue: {
        immediate: true,
        handler(newVal) {
          if (this.isEmitValue) {
            this.isEmitValue = false;
            return;
          }
          this.initPicker(newVal);
        }
      },
      start: {
        immediate: true,
        handler(newVal) {
          if (!newVal)
            return;
          this.calendarRange.startDate = getDate$1(newVal);
          if (this.hasTime) {
            this.calendarRange.startTime = getTime(newVal);
          }
        }
      },
      end: {
        immediate: true,
        handler(newVal) {
          if (!newVal)
            return;
          this.calendarRange.endDate = getDate$1(newVal);
          if (this.hasTime) {
            this.calendarRange.endTime = getTime(newVal, this.hideSecond);
          }
        }
      }
    },
    computed: {
      timepickerStartTime() {
        const activeDate = this.isRange ? this.tempRange.startDate : this.inputDate;
        return activeDate === this.calendarRange.startDate ? this.calendarRange.startTime : "";
      },
      timepickerEndTime() {
        const activeDate = this.isRange ? this.tempRange.endDate : this.inputDate;
        return activeDate === this.calendarRange.endDate ? this.calendarRange.endTime : "";
      },
      mobileCalendarTime() {
        const timeRange = {
          start: this.tempRange.startTime,
          end: this.tempRange.endTime
        };
        return this.isRange ? timeRange : this.pickerTime;
      },
      mobSelectableTime() {
        return {
          start: this.calendarRange.startTime,
          end: this.calendarRange.endTime
        };
      },
      datePopupWidth() {
        return this.isRange ? 653 : 301;
      },
      /**
       * for i18n
       */
      singlePlaceholderText() {
        return this.placeholder || (this.type === "date" ? this.selectDateText : this.selectDateTimeText);
      },
      startPlaceholderText() {
        return this.startPlaceholder || this.startDateText;
      },
      endPlaceholderText() {
        return this.endPlaceholder || this.endDateText;
      },
      selectDateText() {
        return this.i18nT("uni-datetime-picker.selectDate");
      },
      selectDateTimeText() {
        return this.i18nT("uni-datetime-picker.selectDateTime");
      },
      selectTimeText() {
        return this.i18nT("uni-datetime-picker.selectTime");
      },
      startDateText() {
        return this.startPlaceholder || this.i18nT("uni-datetime-picker.startDate");
      },
      startTimeText() {
        return this.i18nT("uni-datetime-picker.startTime");
      },
      endDateText() {
        return this.endPlaceholder || this.i18nT("uni-datetime-picker.endDate");
      },
      endTimeText() {
        return this.i18nT("uni-datetime-picker.endTime");
      },
      okText() {
        return this.i18nT("uni-datetime-picker.ok");
      },
      clearText() {
        return this.i18nT("uni-datetime-picker.clear");
      },
      showClearIcon() {
        return this.clearIcon && !this.disabled && (this.displayValue || this.displayRangeValue.startDate && this.displayRangeValue.endDate);
      }
    },
    created() {
      this.initI18nT();
      this.platform();
    },
    methods: {
      initI18nT() {
        const vueI18n = initVueI18n(i18nMessages);
        this.i18nT = vueI18n.t;
      },
      initPicker(newVal) {
        if (!newVal && !this.defaultValue || Array.isArray(newVal) && !newVal.length) {
          this.$nextTick(() => {
            this.clear(false);
          });
          return;
        }
        if (!Array.isArray(newVal) && !this.isRange) {
          if (newVal) {
            this.displayValue = this.inputDate = this.calendarDate = getDate$1(newVal);
            if (this.hasTime) {
              this.pickerTime = getTime(newVal, this.hideSecond);
              this.displayValue = `${this.displayValue} ${this.pickerTime}`;
            }
          } else if (this.defaultValue) {
            this.inputDate = this.calendarDate = getDate$1(this.defaultValue);
            if (this.hasTime) {
              this.pickerTime = getTime(this.defaultValue, this.hideSecond);
            }
          }
        } else {
          const [before, after] = newVal;
          if (!before && !after)
            return;
          const beforeDate = getDate$1(before);
          const beforeTime = getTime(before, this.hideSecond);
          const afterDate = getDate$1(after);
          const afterTime = getTime(after, this.hideSecond);
          const startDate = beforeDate;
          const endDate = afterDate;
          this.displayRangeValue.startDate = this.tempRange.startDate = startDate;
          this.displayRangeValue.endDate = this.tempRange.endDate = endDate;
          if (this.hasTime) {
            this.displayRangeValue.startDate = `${beforeDate} ${beforeTime}`;
            this.displayRangeValue.endDate = `${afterDate} ${afterTime}`;
            this.tempRange.startTime = beforeTime;
            this.tempRange.endTime = afterTime;
          }
          const defaultRange = {
            before: beforeDate,
            after: afterDate
          };
          this.startMultipleStatus = Object.assign({}, this.startMultipleStatus, defaultRange, {
            which: "right"
          });
          this.endMultipleStatus = Object.assign({}, this.endMultipleStatus, defaultRange, {
            which: "left"
          });
        }
      },
      updateLeftCale(e2) {
        const left = this.$refs.left;
        left.cale.setHoverMultiple(e2.after);
        left.setDate(this.$refs.left.nowDate.fullDate);
      },
      updateRightCale(e2) {
        const right = this.$refs.right;
        right.cale.setHoverMultiple(e2.after);
        right.setDate(this.$refs.right.nowDate.fullDate);
      },
      platform() {
        if (typeof navigator !== "undefined") {
          this.isPhone = navigator.userAgent.toLowerCase().indexOf("mobile") !== -1;
          return;
        }
        const {
          windowWidth
        } = uni.getSystemInfoSync();
        this.isPhone = windowWidth <= 500;
        this.windowWidth = windowWidth;
      },
      show() {
        this.$emit("show");
        if (this.disabled) {
          return;
        }
        this.platform();
        if (this.isPhone) {
          setTimeout(() => {
            this.$refs.mobile.open();
          }, 0);
          return;
        }
        this.pickerPositionStyle = {
          top: "10px"
        };
        const dateEditor = uni.createSelectorQuery().in(this).select(".uni-date-editor");
        dateEditor.boundingClientRect((rect) => {
          if (this.windowWidth - rect.left < this.datePopupWidth) {
            this.pickerPositionStyle.right = 0;
          }
        }).exec();
        setTimeout(() => {
          this.pickerVisible = !this.pickerVisible;
          if (!this.isPhone && this.isRange && this.isFirstShow) {
            this.isFirstShow = false;
            const {
              startDate,
              endDate
            } = this.calendarRange;
            if (startDate && endDate) {
              if (this.diffDate(startDate, endDate) < 30) {
                this.$refs.right.changeMonth("pre");
              }
            } else {
              if (this.isPhone) {
                this.$refs.right.cale.lastHover = false;
              }
            }
          }
        }, 50);
      },
      close() {
        setTimeout(() => {
          this.pickerVisible = false;
          this.$emit("maskClick", this.value);
          this.$refs.mobile && this.$refs.mobile.close();
        }, 20);
      },
      setEmit(value) {
        if (this.returnType === "timestamp" || this.returnType === "date") {
          if (!Array.isArray(value)) {
            if (!this.hasTime) {
              value = value + " 00:00:00";
            }
            value = this.createTimestamp(value);
            if (this.returnType === "date") {
              value = new Date(value);
            }
          } else {
            if (!this.hasTime) {
              value[0] = value[0] + " 00:00:00";
              value[1] = value[1] + " 00:00:00";
            }
            value[0] = this.createTimestamp(value[0]);
            value[1] = this.createTimestamp(value[1]);
            if (this.returnType === "date") {
              value[0] = new Date(value[0]);
              value[1] = new Date(value[1]);
            }
          }
        }
        this.$emit("update:modelValue", value);
        this.$emit("input", value);
        this.$emit("change", value);
        this.isEmitValue = true;
      },
      createTimestamp(date2) {
        date2 = fixIosDateFormat(date2);
        return Date.parse(new Date(date2));
      },
      singleChange(e2) {
        this.calendarDate = this.inputDate = e2.fulldate;
        if (this.hasTime)
          return;
        this.confirmSingleChange();
      },
      confirmSingleChange() {
        if (!checkDate(this.inputDate)) {
          const now2 = /* @__PURE__ */ new Date();
          this.calendarDate = this.inputDate = getDate$1(now2);
          this.pickerTime = getTime(now2, this.hideSecond);
        }
        let startLaterInputDate = false;
        let startDate, startTime;
        if (this.start) {
          let startString = this.start;
          if (typeof this.start === "number") {
            startString = getDateTime(this.start, this.hideSecond);
          }
          [startDate, startTime] = startString.split(" ");
          if (this.start && !dateCompare(startDate, this.inputDate)) {
            startLaterInputDate = true;
            this.inputDate = startDate;
          }
        }
        let endEarlierInputDate = false;
        let endDate, endTime;
        if (this.end) {
          let endString = this.end;
          if (typeof this.end === "number") {
            endString = getDateTime(this.end, this.hideSecond);
          }
          [endDate, endTime] = endString.split(" ");
          if (this.end && !dateCompare(this.inputDate, endDate)) {
            endEarlierInputDate = true;
            this.inputDate = endDate;
          }
        }
        if (this.hasTime) {
          if (startLaterInputDate) {
            this.pickerTime = startTime || getDefaultSecond(this.hideSecond);
          }
          if (endEarlierInputDate) {
            this.pickerTime = endTime || getDefaultSecond(this.hideSecond);
          }
          if (!this.pickerTime) {
            this.pickerTime = getTime(Date.now(), this.hideSecond);
          }
          this.displayValue = `${this.inputDate} ${this.pickerTime}`;
        } else {
          this.displayValue = this.inputDate;
        }
        this.setEmit(this.displayValue);
        this.pickerVisible = false;
      },
      leftChange(e2) {
        const {
          before,
          after
        } = e2.range;
        this.rangeChange(before, after);
        const obj = {
          before: e2.range.before,
          after: e2.range.after,
          data: e2.range.data,
          fulldate: e2.fulldate
        };
        this.startMultipleStatus = Object.assign({}, this.startMultipleStatus, obj);
        this.$emit("calendarClick", e2);
      },
      rightChange(e2) {
        const {
          before,
          after
        } = e2.range;
        this.rangeChange(before, after);
        const obj = {
          before: e2.range.before,
          after: e2.range.after,
          data: e2.range.data,
          fulldate: e2.fulldate
        };
        this.endMultipleStatus = Object.assign({}, this.endMultipleStatus, obj);
        this.$emit("calendarClick", e2);
      },
      mobileChange(e2) {
        if (this.isRange) {
          const {
            before,
            after
          } = e2.range;
          if (!before) {
            return;
          }
          this.handleStartAndEnd(before, after, true);
          if (this.hasTime) {
            const {
              startTime,
              endTime
            } = e2.timeRange;
            this.tempRange.startTime = startTime;
            this.tempRange.endTime = endTime;
          }
          this.confirmRangeChange();
        } else {
          if (this.hasTime) {
            this.displayValue = e2.fulldate + " " + e2.time;
          } else {
            this.displayValue = e2.fulldate;
          }
          this.setEmit(this.displayValue);
          this.calendarDate = this.displayValue;
        }
        this.$refs.mobile.close();
      },
      rangeChange(before, after) {
        if (!(before && after))
          return;
        this.handleStartAndEnd(before, after, true);
        if (this.hasTime)
          return;
        this.confirmRangeChange();
      },
      confirmRangeChange() {
        if (!this.tempRange.startDate || !this.tempRange.endDate) {
          this.pickerVisible = false;
          return;
        }
        if (!checkDate(this.tempRange.startDate)) {
          this.tempRange.startDate = getDate$1(Date.now());
        }
        if (!checkDate(this.tempRange.endDate)) {
          this.tempRange.endDate = getDate$1(Date.now());
        }
        let start, end;
        let startDateLaterRangeStartDate = false;
        let startDateLaterRangeEndDate = false;
        let startDate, startTime;
        let compareStartDateString = this.tempRange.startDate;
        let compareEndDateString = this.tempRange.endDate;
        if (this.hasTime) {
          compareStartDateString = `${this.tempRange.startDate} ${this.tempRange.startTime}`;
          compareEndDateString = `${this.tempRange.endDate} ${this.tempRange.endTime}`;
        }
        if (this.start) {
          let startString = this.start;
          if (typeof this.start === "number") {
            startString = getDateTime(this.start, this.hideSecond);
          }
          [startDate, startTime] = startString.split(" ");
          if (this.start && !dateCompare(this.start, compareStartDateString)) {
            startDateLaterRangeStartDate = true;
            this.tempRange.startDate = startDate;
          }
          if (this.start && !dateCompare(this.start, compareEndDateString)) {
            startDateLaterRangeEndDate = true;
            this.tempRange.endDate = startDate;
          }
        }
        let endDateEarlierRangeStartDate = false;
        let endDateEarlierRangeEndDate = false;
        let endDate, endTime;
        if (this.end) {
          let endString = this.end;
          if (typeof this.end === "number") {
            endString = getDateTime(this.end, this.hideSecond);
          }
          [endDate, endTime] = endString.split(" ");
          if (this.end && !dateCompare(compareStartDateString, this.end)) {
            endDateEarlierRangeStartDate = true;
            this.tempRange.startDate = endDate;
          }
          if (this.end && !dateCompare(compareEndDateString, this.end)) {
            endDateEarlierRangeEndDate = true;
            this.tempRange.endDate = endDate;
          }
        }
        if (!this.hasTime) {
          start = this.displayRangeValue.startDate = this.tempRange.startDate;
          end = this.displayRangeValue.endDate = this.tempRange.endDate;
        } else {
          if (startDateLaterRangeStartDate) {
            this.tempRange.startTime = startTime || getDefaultSecond(this.hideSecond);
          } else if (endDateEarlierRangeStartDate) {
            this.tempRange.startTime = endTime || getDefaultSecond(this.hideSecond);
          }
          if (!this.tempRange.startTime) {
            this.tempRange.startTime = getTime(Date.now(), this.hideSecond);
          }
          if (startDateLaterRangeEndDate) {
            this.tempRange.endTime = startTime || getDefaultSecond(this.hideSecond);
          } else if (endDateEarlierRangeEndDate) {
            this.tempRange.endTime = endTime || getDefaultSecond(this.hideSecond);
          }
          if (!this.tempRange.endTime) {
            this.tempRange.endTime = getTime(Date.now(), this.hideSecond);
          }
          start = this.displayRangeValue.startDate = `${this.tempRange.startDate} ${this.tempRange.startTime}`;
          end = this.displayRangeValue.endDate = `${this.tempRange.endDate} ${this.tempRange.endTime}`;
        }
        if (!dateCompare(start, end)) {
          [start, end] = [end, start];
        }
        this.displayRangeValue.startDate = start;
        this.displayRangeValue.endDate = end;
        const displayRange = [start, end];
        this.setEmit(displayRange);
        this.pickerVisible = false;
      },
      handleStartAndEnd(before, after, temp = false) {
        if (!before)
          return;
        if (!after)
          after = before;
        const type = temp ? "tempRange" : "range";
        const isStartEarlierEnd = dateCompare(before, after);
        this[type].startDate = isStartEarlierEnd ? before : after;
        this[type].endDate = isStartEarlierEnd ? after : before;
      },
      /**
       * 比较时间大小
       */
      dateCompare(startDate, endDate) {
        startDate = new Date(startDate.replace("-", "/").replace("-", "/"));
        endDate = new Date(endDate.replace("-", "/").replace("-", "/"));
        return startDate <= endDate;
      },
      /**
       * 比较时间差
       */
      diffDate(startDate, endDate) {
        startDate = new Date(startDate.replace("-", "/").replace("-", "/"));
        endDate = new Date(endDate.replace("-", "/").replace("-", "/"));
        const diff = (endDate - startDate) / (24 * 60 * 60 * 1e3);
        return Math.abs(diff);
      },
      clear(needEmit = true) {
        if (!this.isRange) {
          this.displayValue = "";
          this.inputDate = "";
          this.pickerTime = "";
          if (this.isPhone) {
            this.$refs.mobile && this.$refs.mobile.clearCalender();
          } else {
            this.$refs.pcSingle && this.$refs.pcSingle.clearCalender();
          }
          if (needEmit) {
            this.$emit("change", "");
            this.$emit("input", "");
            this.$emit("update:modelValue", "");
          }
        } else {
          this.displayRangeValue.startDate = "";
          this.displayRangeValue.endDate = "";
          this.tempRange.startDate = "";
          this.tempRange.startTime = "";
          this.tempRange.endDate = "";
          this.tempRange.endTime = "";
          if (this.isPhone) {
            this.$refs.mobile && this.$refs.mobile.clearCalender();
          } else {
            this.$refs.left && this.$refs.left.clearCalender();
            this.$refs.right && this.$refs.right.clearCalender();
            this.$refs.right && this.$refs.right.changeMonth("next");
          }
          if (needEmit) {
            this.$emit("change", []);
            this.$emit("input", []);
            this.$emit("update:modelValue", []);
          }
        }
      },
      calendarClick(e2) {
        this.$emit("calendarClick", e2);
      }
    }
  };
  function _sfc_render$1a(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    const _component_time_picker = vue.resolveComponent("time-picker");
    const _component_Calendar = vue.resolveComponent("Calendar");
    return vue.openBlock(), vue.createElementBlock("view", { class: "uni-date" }, [
      vue.createElementVNode("view", {
        class: "uni-date-editor",
        onClick: _cache[1] || (_cache[1] = (...args) => $options.show && $options.show(...args))
      }, [
        vue.renderSlot(_ctx.$slots, "default", {}, () => [
          vue.createElementVNode(
            "view",
            {
              class: vue.normalizeClass(["uni-date-editor--x", { "uni-date-editor--x__disabled": $props.disabled, "uni-date-x--border": $props.border }])
            },
            [
              !$data.isRange ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 0,
                class: "uni-date-x uni-date-single"
              }, [
                vue.createVNode(_component_uni_icons, {
                  class: "icon-calendar",
                  type: "calendar",
                  color: "#c0c4cc",
                  size: "22"
                }),
                vue.createElementVNode(
                  "view",
                  { class: "uni-date__x-input" },
                  vue.toDisplayString($data.displayValue || $options.singlePlaceholderText),
                  1
                  /* TEXT */
                )
              ])) : (vue.openBlock(), vue.createElementBlock("view", {
                key: 1,
                class: "uni-date-x uni-date-range"
              }, [
                vue.createVNode(_component_uni_icons, {
                  class: "icon-calendar",
                  type: "calendar",
                  color: "#c0c4cc",
                  size: "22"
                }),
                vue.createElementVNode(
                  "view",
                  { class: "uni-date__x-input text-center" },
                  vue.toDisplayString($data.displayRangeValue.startDate || $options.startPlaceholderText),
                  1
                  /* TEXT */
                ),
                vue.createElementVNode(
                  "view",
                  { class: "range-separator" },
                  vue.toDisplayString($props.rangeSeparator),
                  1
                  /* TEXT */
                ),
                vue.createElementVNode(
                  "view",
                  { class: "uni-date__x-input text-center" },
                  vue.toDisplayString($data.displayRangeValue.endDate || $options.endPlaceholderText),
                  1
                  /* TEXT */
                )
              ])),
              $options.showClearIcon ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 2,
                class: "uni-date__icon-clear",
                onClick: _cache[0] || (_cache[0] = vue.withModifiers((...args) => $options.clear && $options.clear(...args), ["stop"]))
              }, [
                vue.createVNode(_component_uni_icons, {
                  type: "clear",
                  color: "#c0c4cc",
                  size: "22"
                })
              ])) : vue.createCommentVNode("v-if", true)
            ],
            2
            /* CLASS */
          )
        ], true)
      ]),
      vue.withDirectives(vue.createElementVNode(
        "view",
        {
          class: "uni-date-mask--pc",
          onClick: _cache[2] || (_cache[2] = (...args) => $options.close && $options.close(...args))
        },
        null,
        512
        /* NEED_PATCH */
      ), [
        [vue.vShow, $data.pickerVisible]
      ]),
      !$data.isPhone ? vue.withDirectives((vue.openBlock(), vue.createElementBlock(
        "view",
        {
          key: 0,
          ref: "datePicker",
          class: "uni-date-picker__container"
        },
        [
          !$data.isRange ? (vue.openBlock(), vue.createElementBlock(
            "view",
            {
              key: 0,
              class: "uni-date-single--x",
              style: vue.normalizeStyle($data.pickerPositionStyle)
            },
            [
              vue.createElementVNode("view", { class: "uni-popper__arrow" }),
              $data.hasTime ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 0,
                class: "uni-date-changed popup-x-header"
              }, [
                vue.withDirectives(vue.createElementVNode("input", {
                  class: "uni-date__input text-center",
                  type: "text",
                  "onUpdate:modelValue": _cache[3] || (_cache[3] = ($event) => $data.inputDate = $event),
                  placeholder: $options.selectDateText
                }, null, 8, ["placeholder"]), [
                  [vue.vModelText, $data.inputDate]
                ]),
                vue.createVNode(_component_time_picker, {
                  type: "time",
                  modelValue: $data.pickerTime,
                  "onUpdate:modelValue": _cache[5] || (_cache[5] = ($event) => $data.pickerTime = $event),
                  border: false,
                  disabled: !$data.inputDate,
                  start: $options.timepickerStartTime,
                  end: $options.timepickerEndTime,
                  hideSecond: $props.hideSecond,
                  style: { "width": "100%" }
                }, {
                  default: vue.withCtx(() => [
                    vue.withDirectives(vue.createElementVNode("input", {
                      class: "uni-date__input text-center",
                      type: "text",
                      "onUpdate:modelValue": _cache[4] || (_cache[4] = ($event) => $data.pickerTime = $event),
                      placeholder: $options.selectTimeText,
                      disabled: !$data.inputDate
                    }, null, 8, ["placeholder", "disabled"]), [
                      [vue.vModelText, $data.pickerTime]
                    ])
                  ]),
                  _: 1
                  /* STABLE */
                }, 8, ["modelValue", "disabled", "start", "end", "hideSecond"])
              ])) : vue.createCommentVNode("v-if", true),
              vue.createVNode(_component_Calendar, {
                ref: "pcSingle",
                showMonth: false,
                "start-date": $data.calendarRange.startDate,
                "end-date": $data.calendarRange.endDate,
                date: $data.calendarDate,
                onChange: $options.singleChange,
                "default-value": $props.defaultValue,
                style: { "padding": "0 8px" }
              }, null, 8, ["start-date", "end-date", "date", "onChange", "default-value"]),
              $data.hasTime ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 1,
                class: "popup-x-footer"
              }, [
                vue.createElementVNode(
                  "text",
                  {
                    class: "confirm-text",
                    onClick: _cache[6] || (_cache[6] = (...args) => $options.confirmSingleChange && $options.confirmSingleChange(...args))
                  },
                  vue.toDisplayString($options.okText),
                  1
                  /* TEXT */
                )
              ])) : vue.createCommentVNode("v-if", true)
            ],
            4
            /* STYLE */
          )) : (vue.openBlock(), vue.createElementBlock(
            "view",
            {
              key: 1,
              class: "uni-date-range--x",
              style: vue.normalizeStyle($data.pickerPositionStyle)
            },
            [
              vue.createElementVNode("view", { class: "uni-popper__arrow" }),
              $data.hasTime ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 0,
                class: "popup-x-header uni-date-changed"
              }, [
                vue.createElementVNode("view", { class: "popup-x-header--datetime" }, [
                  vue.withDirectives(vue.createElementVNode("input", {
                    class: "uni-date__input uni-date-range__input",
                    type: "text",
                    "onUpdate:modelValue": _cache[7] || (_cache[7] = ($event) => $data.tempRange.startDate = $event),
                    placeholder: $options.startDateText
                  }, null, 8, ["placeholder"]), [
                    [vue.vModelText, $data.tempRange.startDate]
                  ]),
                  vue.createVNode(_component_time_picker, {
                    type: "time",
                    modelValue: $data.tempRange.startTime,
                    "onUpdate:modelValue": _cache[9] || (_cache[9] = ($event) => $data.tempRange.startTime = $event),
                    start: $options.timepickerStartTime,
                    border: false,
                    disabled: !$data.tempRange.startDate,
                    hideSecond: $props.hideSecond
                  }, {
                    default: vue.withCtx(() => [
                      vue.withDirectives(vue.createElementVNode("input", {
                        class: "uni-date__input uni-date-range__input",
                        type: "text",
                        "onUpdate:modelValue": _cache[8] || (_cache[8] = ($event) => $data.tempRange.startTime = $event),
                        placeholder: $options.startTimeText,
                        disabled: !$data.tempRange.startDate
                      }, null, 8, ["placeholder", "disabled"]), [
                        [vue.vModelText, $data.tempRange.startTime]
                      ])
                    ]),
                    _: 1
                    /* STABLE */
                  }, 8, ["modelValue", "start", "disabled", "hideSecond"])
                ]),
                vue.createVNode(_component_uni_icons, {
                  type: "arrowthinright",
                  color: "#999",
                  style: { "line-height": "40px" }
                }),
                vue.createElementVNode("view", { class: "popup-x-header--datetime" }, [
                  vue.withDirectives(vue.createElementVNode("input", {
                    class: "uni-date__input uni-date-range__input",
                    type: "text",
                    "onUpdate:modelValue": _cache[10] || (_cache[10] = ($event) => $data.tempRange.endDate = $event),
                    placeholder: $options.endDateText
                  }, null, 8, ["placeholder"]), [
                    [vue.vModelText, $data.tempRange.endDate]
                  ]),
                  vue.createVNode(_component_time_picker, {
                    type: "time",
                    modelValue: $data.tempRange.endTime,
                    "onUpdate:modelValue": _cache[12] || (_cache[12] = ($event) => $data.tempRange.endTime = $event),
                    end: $options.timepickerEndTime,
                    border: false,
                    disabled: !$data.tempRange.endDate,
                    hideSecond: $props.hideSecond
                  }, {
                    default: vue.withCtx(() => [
                      vue.withDirectives(vue.createElementVNode("input", {
                        class: "uni-date__input uni-date-range__input",
                        type: "text",
                        "onUpdate:modelValue": _cache[11] || (_cache[11] = ($event) => $data.tempRange.endTime = $event),
                        placeholder: $options.endTimeText,
                        disabled: !$data.tempRange.endDate
                      }, null, 8, ["placeholder", "disabled"]), [
                        [vue.vModelText, $data.tempRange.endTime]
                      ])
                    ]),
                    _: 1
                    /* STABLE */
                  }, 8, ["modelValue", "end", "disabled", "hideSecond"])
                ])
              ])) : vue.createCommentVNode("v-if", true),
              vue.createElementVNode("view", { class: "popup-x-body" }, [
                vue.createVNode(_component_Calendar, {
                  ref: "left",
                  showMonth: false,
                  "start-date": $data.calendarRange.startDate,
                  "end-date": $data.calendarRange.endDate,
                  range: true,
                  pleStatus: $data.endMultipleStatus,
                  onChange: $options.leftChange,
                  onFirstEnterCale: $options.updateRightCale,
                  style: { "padding": "0 8px" }
                }, null, 8, ["start-date", "end-date", "pleStatus", "onChange", "onFirstEnterCale"]),
                vue.createVNode(_component_Calendar, {
                  ref: "right",
                  showMonth: false,
                  "start-date": $data.calendarRange.startDate,
                  "end-date": $data.calendarRange.endDate,
                  range: true,
                  onChange: $options.rightChange,
                  pleStatus: $data.startMultipleStatus,
                  onFirstEnterCale: $options.updateLeftCale,
                  style: { "padding": "0 8px", "border-left": "1px solid #F1F1F1" }
                }, null, 8, ["start-date", "end-date", "onChange", "pleStatus", "onFirstEnterCale"])
              ]),
              $data.hasTime ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 1,
                class: "popup-x-footer"
              }, [
                vue.createElementVNode(
                  "text",
                  {
                    onClick: _cache[13] || (_cache[13] = (...args) => $options.clear && $options.clear(...args))
                  },
                  vue.toDisplayString($options.clearText),
                  1
                  /* TEXT */
                ),
                vue.createElementVNode(
                  "text",
                  {
                    class: "confirm-text",
                    onClick: _cache[14] || (_cache[14] = (...args) => $options.confirmRangeChange && $options.confirmRangeChange(...args))
                  },
                  vue.toDisplayString($options.okText),
                  1
                  /* TEXT */
                )
              ])) : vue.createCommentVNode("v-if", true)
            ],
            4
            /* STYLE */
          ))
        ],
        512
        /* NEED_PATCH */
      )), [
        [vue.vShow, $data.pickerVisible]
      ]) : vue.createCommentVNode("v-if", true),
      $data.isPhone ? (vue.openBlock(), vue.createBlock(_component_Calendar, {
        key: 1,
        ref: "mobile",
        clearDate: false,
        date: $data.calendarDate,
        defTime: $options.mobileCalendarTime,
        "start-date": $data.calendarRange.startDate,
        "end-date": $data.calendarRange.endDate,
        selectableTimes: $options.mobSelectableTime,
        startPlaceholder: $props.startPlaceholder,
        endPlaceholder: $props.endPlaceholder,
        "default-value": $props.defaultValue,
        pleStatus: $data.endMultipleStatus,
        showMonth: false,
        range: $data.isRange,
        hasTime: $data.hasTime,
        insert: false,
        hideSecond: $props.hideSecond,
        onConfirm: $options.mobileChange,
        onMaskClose: $options.close,
        onChange: $options.calendarClick
      }, null, 8, ["date", "defTime", "start-date", "end-date", "selectableTimes", "startPlaceholder", "endPlaceholder", "default-value", "pleStatus", "range", "hasTime", "hideSecond", "onConfirm", "onMaskClose", "onChange"])) : vue.createCommentVNode("v-if", true)
    ]);
  }
  const __easycom_2$5 = /* @__PURE__ */ _export_sfc(_sfc_main$1b, [["render", _sfc_render$1a], ["__scopeId", "data-v-9802168a"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/uni_modules/uni-datetime-picker/components/uni-datetime-picker/uni-datetime-picker.vue"]]);
  const _sfc_main$1a = {
    __name: "info",
    setup(__props, { expose: __expose }) {
      __expose();
      const picUrl = vue.ref("");
      const nickName = vue.ref("");
      const userInfo = vue.ref({});
      const birthDate = vue.ref("");
      const genderRange = vue.ref(["男", "女"]);
      const status = vue.ref("");
      const maritalStatus = vue.ref(["已婚", "未婚", "离异"]);
      const sexPopupRef = vue.ref(null);
      const statusPopupRef = vue.ref(null);
      const uploadImageHandler = () => {
        uni.chooseImage({
          count: 1,
          success: function(res2) {
            uploadFile(baseURL + "/api/common/upload", res2.tempFilePaths[0]).then((res3) => {
              formatAppLog("log", "at pages/forum/my/info.vue:132", res3);
              userInfo.value.avatar = res3.data.url;
            });
          }
        });
      };
      const backFn = () => {
        uni.navigateBack({
          delta: 1
        });
      };
      const maritalChange = (e2) => {
        userInfo.value.marriage = maritalStatus.value[e2.detail.value];
      };
      const bindPickerChange = (e2) => {
        formatAppLog("log", "at pages/forum/my/info.vue:153", e2);
        userInfo.value.gender = genderRange.value[e2.detail.value];
      };
      const openPopupHandler = (type) => {
        type == 1 ? sexPopupRef.value.open() : statusPopupRef.value.open();
      };
      const getInfo = async () => {
        let res2 = await getUserInfo();
        userInfo.value = res2.data;
      };
      const onUpdateUser = async () => {
        formatAppLog("log", "at pages/forum/my/info.vue:173", userInfo.value.avatar);
        let res2 = await updateUser(userInfo.value);
        uni.showToast({
          title: "修改成功",
          icon: "none",
          // 可选值 'success', 'loading', 'none'
          duration: 2e3
          // 持续时长，单位ms
        });
        uni.navigateBack();
        formatAppLog("log", "at pages/forum/my/info.vue:183", res2);
      };
      vue.onMounted(() => {
        getInfo();
      });
      const __returned__ = { picUrl, nickName, userInfo, birthDate, genderRange, status, maritalStatus, sexPopupRef, statusPopupRef, uploadImageHandler, backFn, maritalChange, bindPickerChange, openPopupHandler, getInfo, onUpdateUser, ref: vue.ref, onMounted: vue.onMounted, get getUserInfo() {
        return getUserInfo;
      }, get updateUser() {
        return updateUser;
      }, get uploadFile() {
        return uploadFile;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$19(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    const _component_uni_nav_bar = resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"), __easycom_1$4);
    const _component_uni_datetime_picker = resolveEasycom(vue.resolveDynamicComponent("uni-datetime-picker"), __easycom_2$5);
    return vue.openBlock(), vue.createElementBlock("view", { class: "user-info-box" }, [
      vue.createVNode(_component_uni_nav_bar, {
        backgroundColor: "#F4F6F8",
        border: false,
        title: "个人信息",
        class: "header-bar",
        statusBar: true,
        fixed: ""
      }, {
        left: vue.withCtx(() => [
          vue.createVNode(_component_uni_icons, {
            type: "left",
            size: "24",
            onClick: $setup.backFn
          })
        ]),
        right: vue.withCtx(() => []),
        _: 1
        /* STABLE */
      }),
      vue.createElementVNode("view", { class: "user-info-content" }, [
        vue.createElementVNode("view", { class: "info-content-1" }, [
          vue.createElementVNode("view", { class: "info-content-list" }, [
            vue.createElementVNode("view", {
              class: "content-item auture",
              onClick: $setup.uploadImageHandler
            }, [
              vue.createElementVNode("view", { class: "label" }, "头像"),
              vue.createElementVNode("view", { class: "content" }, [
                $setup.userInfo.avatar ? (vue.openBlock(), vue.createElementBlock("image", {
                  key: 0,
                  src: $setup.userInfo.avatar,
                  class: "pic"
                }, null, 8, ["src"])) : (vue.openBlock(), vue.createElementBlock("text", {
                  key: 1,
                  class: "txt"
                }, [
                  vue.createTextVNode("请选择"),
                  vue.createVNode(_component_uni_icons, {
                    type: "right",
                    size: "14",
                    color: "rgba(0,0,0,0.3)",
                    class: "icon"
                  })
                ]))
              ])
            ]),
            vue.createElementVNode("view", { class: "content-item" }, [
              vue.createElementVNode("view", { class: "label" }, "昵称"),
              vue.createElementVNode("view", { class: "content" }, [
                vue.createElementVNode("text", { class: "txt" }, [
                  vue.withDirectives(vue.createElementVNode(
                    "input",
                    {
                      type: "text",
                      style: { "text-align": "end", "font-size": "28rpx" },
                      "onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => $setup.userInfo.realName = $event)
                    },
                    null,
                    512
                    /* NEED_PATCH */
                  ), [
                    [vue.vModelText, $setup.userInfo.realName]
                  ])
                ])
              ])
            ]),
            vue.createElementVNode("view", { class: "content-item" }, [
              vue.createElementVNode("view", { class: "label" }, "生日"),
              vue.createElementVNode("view", { class: "content" }, [
                vue.createVNode(_component_uni_datetime_picker, {
                  type: "date",
                  "clear-icon": false,
                  modelValue: $setup.userInfo.birthday,
                  "onUpdate:modelValue": _cache[1] || (_cache[1] = ($event) => $setup.userInfo.birthday = $event)
                }, {
                  default: vue.withCtx(() => [
                    vue.createElementVNode("text", { class: "txt" }, [
                      vue.createTextVNode(
                        vue.toDisplayString($setup.userInfo.birthday || "请选择"),
                        1
                        /* TEXT */
                      ),
                      vue.createVNode(_component_uni_icons, {
                        type: "right",
                        size: "14",
                        color: "rgba(0,0,0,0.3)",
                        class: "icon"
                      })
                    ])
                  ]),
                  _: 1
                  /* STABLE */
                }, 8, ["modelValue"])
              ])
            ]),
            vue.createElementVNode("view", { class: "content-item" }, [
              vue.createElementVNode("view", { class: "label" }, "性别"),
              vue.createElementVNode("view", { class: "content" }, [
                vue.createElementVNode("picker", {
                  range: $setup.genderRange,
                  onChange: $setup.bindPickerChange,
                  mode: "selector"
                }, [
                  vue.createElementVNode("text", { class: "txt" }, [
                    vue.createTextVNode(
                      vue.toDisplayString($setup.userInfo.gender),
                      1
                      /* TEXT */
                    ),
                    vue.createVNode(_component_uni_icons, {
                      type: "right",
                      size: "14",
                      color: "rgba(0,0,0,0.3)",
                      class: "icon"
                    })
                  ])
                ], 40, ["range"])
              ])
            ])
          ])
        ]),
        vue.createElementVNode("view", { class: "info-content-2" }, [
          vue.createElementVNode("view", { class: "info-content-list" }, [
            vue.createElementVNode("view", { class: "content-item" }, [
              vue.createElementVNode("view", { class: "label" }, "婚姻状态"),
              vue.createElementVNode("view", { class: "content" }, [
                vue.createElementVNode("picker", {
                  range: $setup.maritalStatus,
                  onChange: $setup.maritalChange
                }, [
                  vue.createElementVNode("text", { class: "txt" }, [
                    vue.createTextVNode(
                      vue.toDisplayString($setup.userInfo.marriage == null ? "请选择" : $setup.userInfo.marriage),
                      1
                      /* TEXT */
                    ),
                    vue.createVNode(_component_uni_icons, {
                      type: "right",
                      size: "14",
                      color: "rgba(0,0,0,0.3)",
                      class: "icon"
                    })
                  ])
                ], 40, ["range"])
              ])
            ]),
            vue.createElementVNode("view", { class: "content-item profile" }, [
              vue.createElementVNode("view", { class: "label" }, "简介"),
              vue.createElementVNode("view", { class: "content" }, [
                vue.withDirectives(vue.createElementVNode(
                  "textarea",
                  {
                    placeholder: "请简单介绍一下自己",
                    style: { "text-align": "end", "font-size": "28rpx" },
                    "onUpdate:modelValue": _cache[2] || (_cache[2] = ($event) => $setup.userInfo.introduce = $event),
                    class: "profile-content",
                    "placeholder-class": "profile-placeholder-content"
                  },
                  null,
                  512
                  /* NEED_PATCH */
                ), [
                  [vue.vModelText, $setup.userInfo.introduce]
                ])
              ])
            ])
          ])
        ]),
        vue.createElementVNode("view", { style: { "margin": "30rpx" } }, [
          vue.createElementVNode("button", {
            type: "primary",
            onClick: $setup.onUpdateUser
          }, "提交")
        ])
      ])
    ]);
  }
  const PagesForumMyInfo = /* @__PURE__ */ _export_sfc(_sfc_main$1a, [["render", _sfc_render$19], ["__scopeId", "data-v-422be657"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/forum/my/info.vue"]]);
  const _imports_0$9 = "/static/forum/topic-b.png";
  const _sfc_main$19 = {
    __name: "choose-topic",
    setup(__props, { expose: __expose }) {
      __expose();
      vue.useCssVars((_ctx) => ({
        "255c2008-statusBarHeight": statusBarHeight.value
      }));
      const globalStore = useGlobalDataStore();
      const statusBarHeight = vue.ref(globalStore.statusBarHeight + "px");
      const backFn = () => {
        uni.navigateBack({
          delta: 1
        });
      };
      const tabActive = vue.ref(1);
      const changeTabHandler = (i2) => {
        if (tabActive.value != i2) {
          tabActive.value = i2;
        }
      };
      const contentActive = vue.ref(1);
      const changeContentHandler = (i2) => {
        if (contentActive.value != i2) {
          contentActive.value = i2;
        }
      };
      const __returned__ = { globalStore, statusBarHeight, backFn, tabActive, changeTabHandler, contentActive, changeContentHandler, onMounted: vue.onMounted, ref: vue.ref, get useGlobalDataStore() {
        return useGlobalDataStore;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$18(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    const _component_uni_nav_bar = resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"), __easycom_1$4);
    return vue.openBlock(), vue.createElementBlock("view", { class: "choose-topic-box" }, [
      vue.createVNode(_component_uni_nav_bar, {
        backgroundColor: "#F4F6F8",
        border: false,
        title: "选择话题",
        class: "header-bar",
        statusBar: true,
        fixed: ""
      }, {
        left: vue.withCtx(() => [
          vue.createVNode(_component_uni_icons, {
            type: "left",
            size: "24",
            onClick: $setup.backFn
          })
        ]),
        _: 1
        /* STABLE */
      }),
      vue.createElementVNode("view", { class: "choose-topic-content" }, [
        vue.createElementVNode("view", { class: "tag-content" }, [
          vue.createElementVNode("view", { class: "tag-left" }, [
            vue.createElementVNode("scroll-view", {
              "scroll-y": "true",
              class: "scroll-content",
              "show-scrollbar": false
            }, [
              (vue.openBlock(), vue.createElementBlock(
                vue.Fragment,
                null,
                vue.renderList(20, (i2) => {
                  return vue.createElementVNode("view", {
                    class: vue.normalizeClass(["tag-item", $setup.tabActive == i2 ? "active" : ""]),
                    key: i2,
                    onClick: ($event) => $setup.changeTabHandler(i2)
                  }, " 健康 ", 10, ["onClick"]);
                }),
                64
                /* STABLE_FRAGMENT */
              ))
            ])
          ]),
          vue.createElementVNode("view", { class: "tag-right" }, [
            vue.createElementVNode("scroll-view", {
              "scroll-y": "true",
              class: "scroll-content",
              "show-scrollbar": false
            }, [
              vue.createElementVNode("view", { class: "tag-right-content" }, [
                (vue.openBlock(), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList(20, (i2) => {
                    return vue.createElementVNode("view", {
                      class: vue.normalizeClass(["content-item", $setup.contentActive == i2 ? "active" : ""]),
                      key: i2,
                      onClick: ($event) => $setup.changeContentHandler(i2)
                    }, [
                      vue.createElementVNode("view", { class: "topic-image" }, [
                        vue.createElementVNode("image", {
                          src: _imports_0$9,
                          class: "img"
                        })
                      ]),
                      vue.createElementVNode("view", { class: "content" }, [
                        vue.createElementVNode("view", { class: "title" }, "潜意识投射测试"),
                        vue.createElementVNode("view", { class: "remark" }, [
                          vue.createElementVNode("text", { class: "num" }, "234"),
                          vue.createTextVNode("篇内容")
                        ])
                      ])
                    ], 10, ["onClick"]);
                  }),
                  64
                  /* STABLE_FRAGMENT */
                ))
              ])
            ])
          ])
        ])
      ])
    ]);
  }
  const PagesForumWriteChooseTopicChooseTopic = /* @__PURE__ */ _export_sfc(_sfc_main$19, [["render", _sfc_render$18], ["__scopeId", "data-v-255c2008"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/forum/write/choose-topic/choose-topic.vue"]]);
  const _sfc_main$18 = {
    __name: "qaDetail",
    setup(__props, { expose: __expose }) {
      __expose();
      vue.useCssVars((_ctx) => ({
        "819faf70-statusBarHeight": statusBarHeight.value
      }));
      const globalStore = useGlobalDataStore();
      const statusBarHeight = vue.ref(globalStore.statusBarHeight + "px");
      const route2 = useRoute();
      const tabActive = vue.ref(0);
      const replyContent = vue.ref("");
      let id2 = vue.ref();
      const data = vue.reactive({
        listParams: {
          "current": 1,
          "size": 10,
          "params": {}
        },
        list: []
      });
      const tabLists = vue.ref([{
        txt: "推荐",
        id: 1
      }, {
        txt: "情感",
        id: 2
      }, {
        txt: "文化",
        id: 3
      }, {
        txt: "职场",
        id: 4
      }, {
        txt: "职场",
        id: 5
      }, {
        txt: "职场",
        id: 6
      }, {
        txt: "职场",
        id: 7
      }, {
        txt: "职场",
        id: 7
      }]);
      const info = vue.ref();
      const commentList = vue.ref([]);
      const changeTabHandler = (index) => {
        tabActive.value = index;
      };
      const backFn = () => {
        uni.navigateBack({
          delta: 1
        });
      };
      const switchTabsFn = (type) => {
        if (type == 1) {
          uni.switchTab({
            url: "/pages/consult/index"
          });
        } else {
          uni.navigateTo({
            url: "/pages/consult/detail"
          });
        }
      };
      const openArticleFn = (type) => {
        let url2 = type == "1" ? "/pages/readArticle/readArticle" : "";
        uni.navigateTo({
          url: url2
        });
      };
      const getInfo = async () => {
        formatAppLog("log", "at pages/forum/index/qaDetail.vue:202", "==============================" + id2.value);
        let res2 = await getAnswerDetail({
          id: id2.value
        });
        info.value = res2.data;
      };
      const getList = async () => {
        data.listParams.params.articleId = id2.value;
        let res2 = await getCommentById(data.listParams);
        commentList.value = res2.data.records;
      };
      const onSaveComment = async () => {
        let res2 = await saveComment$1({
          "content": replyContent.value,
          "articleId": id2.value,
          "type": 2
        });
        replyContent.value = "";
        uni.showToast({
          title: "发布成功",
          icon: "none",
          // 可选值 'success', 'loading', 'none'
          duration: 2e3
          // 持续时长，单位ms
        });
        formatAppLog("log", "at pages/forum/index/qaDetail.vue:227", res2);
      };
      onLoad((options) => {
        id2.value = options.id;
        getInfo();
        getList();
      });
      vue.onMounted(() => {
      });
      const __returned__ = { globalStore, statusBarHeight, route: route2, tabActive, replyContent, get id() {
        return id2;
      }, set id(v2) {
        id2 = v2;
      }, data, tabLists, info, commentList, changeTabHandler, backFn, switchTabsFn, openArticleFn, getInfo, getList, onSaveComment, onMounted: vue.onMounted, ref: vue.ref, reactive: vue.reactive, get onLoad() {
        return onLoad;
      }, get onBackPress() {
        return onBackPress;
      }, get useGlobalDataStore() {
        return useGlobalDataStore;
      }, get getAnswerDetail() {
        return getAnswerDetail;
      }, get getCommentById() {
        return getCommentById;
      }, get saveComment() {
        return saveComment$1;
      }, get RecommendArticleItem() {
        return RecommendArticleItem;
      }, ConsultTeacherListItem, get useRoute() {
        return useRoute;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$17(_ctx, _cache, $props, $setup, $data, $options) {
    var _a, _b;
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    const _component_uni_nav_bar = resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"), __easycom_1$4);
    const _component_uni_easyinput = resolveEasycom(vue.resolveDynamicComponent("uni-easyinput"), __easycom_2$8);
    return vue.openBlock(), vue.createElementBlock("view", { class: "read-article-box" }, [
      vue.createElementVNode("view", { class: "header" }, [
        vue.createVNode(_component_uni_nav_bar, {
          backgroundColor: "#F4F6F8",
          border: false,
          title: "",
          class: "header-bar",
          statusBar: true,
          fixed: ""
        }, {
          left: vue.withCtx(() => [
            vue.createVNode(_component_uni_icons, {
              type: "left",
              size: "24",
              onClick: $setup.backFn
            })
          ]),
          right: vue.withCtx(() => [
            vue.createElementVNode("view", { class: "right" }, [
              vue.createVNode(_component_uni_icons, {
                type: "more-filled",
                size: "24",
                onClick: $setup.backFn
              })
            ])
          ]),
          _: 1
          /* STABLE */
        })
      ]),
      vue.createElementVNode("view", { class: "article-content" }, [
        vue.createElementVNode("view", { class: "detail-box" }, [
          vue.createElementVNode(
            "view",
            { class: "title" },
            vue.toDisplayString((_a = $setup.info) == null ? void 0 : _a.title),
            1
            /* TEXT */
          ),
          vue.createElementVNode("view", { class: "article-user" }, [
            vue.createElementVNode("view", { class: "user" }, [
              vue.createElementVNode("view", null, [
                vue.createElementVNode("image", {
                  src: $setup.info.avatar == null ? "@/static/my/profile.png" : $setup.info.avatar,
                  class: "picture"
                }, null, 8, ["src"])
              ]),
              vue.createElementVNode("view", { class: "name-box" }, [
                vue.createElementVNode(
                  "view",
                  { class: "name" },
                  vue.toDisplayString($setup.info.realName),
                  1
                  /* TEXT */
                ),
                vue.createElementVNode("view", { class: "auth" }, "咨询师 | 认证作家")
              ])
            ]),
            vue.createElementVNode("view", { class: "follow" }, [
              vue.createVNode(_component_uni_icons, {
                type: "plusempty",
                size: "12",
                color: "#35CA95"
              }),
              vue.createElementVNode("text", { class: "txt" }, "关注")
            ])
          ]),
          vue.createElementVNode(
            "view",
            { class: "content" },
            vue.toDisplayString((_b = $setup.info) == null ? void 0 : _b.content),
            1
            /* TEXT */
          ),
          vue.createElementVNode("view", { class: "date-num" }, [
            vue.createElementVNode("view", null, "2025-05-06"),
            vue.createElementVNode("view", { style: { "padding-left": "20rpx" } }, "阅读 7876")
          ]),
          vue.createElementVNode("view", { class: "contact" }, [
            vue.createTextVNode("文章转载/侵权，请联系邮箱："),
            vue.createElementVNode("text", { class: "txt" }, "6757567@163.com")
          ])
        ]),
        vue.createElementVNode("view", { style: { "background-color": "white", "margin": "20rpx 30rpx", "border-radius": "20rpx", "padding": "20rpx" } }, [
          vue.createElementVNode("view", { style: { "margin-bottom": "30rpx" } }, [
            vue.createElementVNode("text", { style: { "font-size": "42rpx", "font-weight": "bold" } }, "热门评论")
          ]),
          $setup.commentList.length > 0 ? (vue.openBlock(true), vue.createElementBlock(
            vue.Fragment,
            { key: 0 },
            vue.renderList($setup.commentList, (item, index) => {
              return vue.openBlock(), vue.createElementBlock("view", {
                key: index,
                style: { "margin-bottom": "20rpx" }
              }, [
                vue.createElementVNode("view", { style: { "display": "flex", "flex-direction": "row" } }, [
                  vue.createElementVNode("image", {
                    style: { "width": "48rpx", "height": "48rpx", "border-radius": "24rpx" },
                    src: item.avatar == null ? "@/static/my/profile.png" : item.avatar
                  }, null, 8, ["src"]),
                  vue.createElementVNode("view", { style: { "margin-left": "20rpx", "display": "flex", "flex-direction": "column" } }, [
                    vue.createElementVNode(
                      "text",
                      { style: { "font-size": "26rpx" } },
                      vue.toDisplayString(item.nickname),
                      1
                      /* TEXT */
                    ),
                    vue.createElementVNode(
                      "text",
                      { style: { "margin-top": "10rpx", "font-size": "28rpx", "color": "#666666" } },
                      vue.toDisplayString(item.content),
                      1
                      /* TEXT */
                    )
                  ])
                ])
              ]);
            }),
            128
            /* KEYED_FRAGMENT */
          )) : (vue.openBlock(), vue.createElementBlock("view", { key: 1 }, [
            vue.createElementVNode("view", { style: { "text-align": "center" } }, [
              vue.createElementVNode("text", null, "暂无数据")
            ])
          ]))
        ]),
        vue.createElementVNode("view", { class: "hot-psychological-box" }, [
          vue.createElementVNode("view", { class: "hot-psychological-header" }, [
            vue.createElementVNode("view", { class: "title" }, "热门咨询师"),
            vue.createElementVNode("view", {
              class: "more",
              onClick: _cache[0] || (_cache[0] = ($event) => $setup.switchTabsFn(1))
            }, [
              vue.createTextVNode("更多"),
              vue.createVNode(_component_uni_icons, {
                type: "right",
                size: "12",
                color: "rgba(0, 0, 0, 0.5)"
              })
            ])
          ]),
          vue.createElementVNode("scroll-view", {
            class: "scroll-view_H",
            "scroll-x": "true",
            "scroll-left": "0",
            "show-scrollbar": false
          }, [
            vue.createElementVNode("view", { class: "list" }, [
              (vue.openBlock(), vue.createElementBlock(
                vue.Fragment,
                null,
                vue.renderList(10, (i2) => {
                  return vue.createVNode($setup["ConsultTeacherListItem"], {
                    class: "list-item",
                    onClick: _cache[1] || (_cache[1] = ($event) => $setup.switchTabsFn(2))
                  });
                }),
                64
                /* STABLE_FRAGMENT */
              ))
            ])
          ])
        ]),
        vue.createElementVNode("view", { class: "recommend-article-box" }, [
          vue.createElementVNode("view", { class: "recommend-article-header" }, [
            vue.createElementVNode("view", { class: "title" }, [
              vue.createElementVNode("view", null, "相关阅读")
            ]),
            vue.createElementVNode("view", {
              class: "more",
              onClick: _cache[2] || (_cache[2] = ($event) => $setup.openArticleFn(1))
            }, [
              vue.createTextVNode("更多"),
              vue.createVNode(_component_uni_icons, {
                type: "right",
                size: "12",
                color: "rgba(0, 0, 0, 0.5)"
              })
            ])
          ]),
          vue.createElementVNode("view", { class: "article-list" })
        ])
      ]),
      vue.createElementVNode("view", { class: "reply-box" }, [
        vue.createElementVNode("view", { class: "reply-contaior" }, [
          vue.createElementVNode("view", { class: "reply-content" }, [
            vue.createVNode(_component_uni_easyinput, {
              onChange: $setup.onSaveComment,
              "prefix-icon": "chat",
              clearable: false,
              modelValue: $setup.replyContent,
              "onUpdate:modelValue": _cache[3] || (_cache[3] = ($event) => $setup.replyContent = $event),
              placeholder: "写点什么",
              trim: true,
              class: "reply-input"
            }, null, 8, ["modelValue"])
          ]),
          vue.createElementVNode("view", { class: "reply-icons" }, [
            vue.createVNode(_component_uni_icons, {
              type: "star",
              size: "24",
              color: "rgba(0, 0, 0, 0.35)"
            }),
            vue.createVNode(_component_uni_icons, {
              type: "hand-up",
              size: "24",
              color: "rgba(0, 0, 0, 0.35)"
            }),
            vue.createVNode(_component_uni_icons, {
              type: "redo",
              size: "24",
              color: "rgba(0, 0, 0, 0.35)"
            })
          ])
        ])
      ])
    ]);
  }
  const PagesForumIndexQaDetail = /* @__PURE__ */ _export_sfc(_sfc_main$18, [["render", _sfc_render$17], ["__scopeId", "data-v-819faf70"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/forum/index/qaDetail.vue"]]);
  const _sfc_main$17 = /* @__PURE__ */ vue.defineComponent({
    __name: "gp-danmu",
    props: {
      // 弹幕数据
      danmuList: { type: Array, default: () => [] },
      // 配置对象
      config: { type: Object, default: () => ({}) },
      // 自动播放
      autoplay: { type: Boolean, default: true },
      // 最大弹幕数量
      maxNumber: { type: Number, default: 100 },
      // z-index
      zIndex: { type: Number, default: 10 }
    },
    emits: [
      "send",
      // 发送弹幕
      "click",
      // 点击弹幕
      "enter",
      // 弹幕进入
      "leave",
      // 弹幕离开
      "play",
      // 播放
      "pause",
      // 暂停
      "clear"
      // 清空
    ],
    setup(__props, { expose: __expose, emit: __emit }) {
      vue.useCssVars((_ctx) => ({
        "75511d43-mergedConfig.allowLineBreak ? 'normal' : 'nowrap'": mergedConfig.value.allowLineBreak ? "normal" : "nowrap",
        "75511d43-mergedConfig.allowLineBreak ? containerWidth * 0.6 + 'px' : 'none'": mergedConfig.value.allowLineBreak ? containerWidth.value * 0.6 + "px" : "none",
        "75511d43-mergedConfig.allowLineBreak ? 'break-word' : 'keep-all'": mergedConfig.value.allowLineBreak ? "break-word" : "keep-all",
        "75511d43-mergedConfig.allowLineBreak ? '100%' : 'none'": mergedConfig.value.allowLineBreak ? "100%" : "none"
      }));
      const props = __props;
      const emit = __emit;
      const instance = vue.getCurrentInstance();
      const defaultConfig = {
        trackHeight: 40,
        // 轨道高度
        trackNumber: 5,
        // 轨道数量
        speed: 100,
        // 弹幕速度（像素/秒）
        fontSize: 16,
        // 默认字体大小
        fontColor: "#ffffff",
        // 默认字体颜色
        backgroundColor: "transparent",
        // 弹幕背景颜色
        trackMode: "overlap",
        // 轨道模式: 'overlap', 'separate', 'fixed'
        looping: false,
        // 是否循环播放
        direction: "rtl",
        // 弹幕方向: 'rtl', 'ltr'
        duration: 8e3,
        // 动画持续时间(ms)
        density: 0.5,
        // 弹幕密度(0-1)
        randomTrack: true,
        // 是否随机选择轨道
        blockEnabled: false,
        // 是否启用弹幕屏蔽功能
        blockWords: [],
        // 屏蔽词列表
        blockUsers: [],
        // 屏蔽用户ID列表
        clickable: true,
        // 弹幕是否可点击
        opacity: 1,
        // 弹幕透明度
        hoverPause: false,
        // 鼠标悬停时是否暂停
        maxTextLength: 50,
        // 添加最大文本长度限制
        allowLineBreak: false
        // 默认不允许换行
      };
      const mergedConfig = vue.computed(() => {
        return Object.assign({}, defaultConfig, props.config);
      });
      const containerRef = vue.ref(null);
      const containerWidth = vue.ref(0);
      const containerHeight = vue.ref(0);
      const activeDanmus = vue.ref([]);
      const isPlaying = vue.ref(false);
      const trackList = vue.ref([]);
      const danmuTypes = vue.reactive({});
      const pluginContext = vue.reactive({
        mergedConfig,
        // 提供配置给插件
        containerWidth,
        // 提供容器宽度给插件
        containerHeight
        // 提供容器高度给插件
      });
      const animationFrameId = vue.ref(null);
      const lastTimestamp = vue.ref(0);
      const initTracks = () => {
        trackList.value = Array.from({ length: mergedConfig.value.trackNumber || 5 }, (_2, index) => ({
          id: index,
          height: mergedConfig.value.trackHeight || 40,
          danmus: []
        }));
      };
      const initContainerSize = () => {
        if (!containerRef.value)
          return;
        const query = uni.createSelectorQuery().in(instance == null ? void 0 : instance.proxy);
        query.select(".gp-danmu-container").boundingClientRect((rect) => {
          if (rect) {
            containerWidth.value = rect.width;
            containerHeight.value = rect.height;
            if (pluginContext) {
              pluginContext.containerWidth = containerWidth.value;
              pluginContext.containerHeight = containerHeight.value;
            }
          }
        }).exec();
      };
      const registerDefaultDanmuTypes = () => {
        registerDanmuType("scroll", {
          createAnimation(danmu, trackInfo) {
            const direction = mergedConfig.value.direction;
            const duration = calculateDuration(danmu);
            const danmuWidth = calculateDanmuWidth(danmu);
            const startX = direction === "rtl" ? containerWidth.value : -danmuWidth;
            const endX = direction === "rtl" ? -danmuWidth - danmuWidth * 0.2 : containerWidth.value + danmuWidth * 0.2;
            return {
              duration,
              timingFunction: "linear",
              keyframes: [
                { transform: `translateX(${startX}px)`, offset: 0 },
                { transform: `translateX(${endX}px)`, offset: 1 }
              ]
            };
          }
        });
        registerDanmuType("top", {
          createAnimation(danmu) {
            return {
              duration: danmu.duration || mergedConfig.value.duration || 8e3,
              timingFunction: "ease",
              keyframes: [
                { opacity: 0, transform: "translateY(-20px)", offset: 0 },
                { opacity: 1, transform: "translateY(0)", offset: 0.1 },
                { opacity: 1, transform: "translateY(0)", offset: 0.9 },
                { opacity: 0, transform: "translateY(-20px)", offset: 1 }
              ]
            };
          }
        });
        registerDanmuType("bottom", {
          createAnimation(danmu) {
            return {
              duration: danmu.duration || mergedConfig.value.duration || 8e3,
              timingFunction: "ease",
              keyframes: [
                { opacity: 0, transform: "translateY(20px)", offset: 0 },
                { opacity: 1, transform: "translateY(0)", offset: 0.1 },
                { opacity: 1, transform: "translateY(0)", offset: 0.9 },
                { opacity: 0, transform: "translateY(20px)", offset: 1 }
              ]
            };
          }
        });
      };
      const registerDanmuType = (typeName, typeConfig) => {
        danmuTypes[typeName] = typeConfig;
      };
      const calculateDanmuWidth = (danmu) => {
        const maxLength = mergedConfig.value.maxTextLength || 50;
        let text = danmu.text || "";
        if (!mergedConfig.value.allowLineBreak && text.length > maxLength) {
          text = text.substring(0, maxLength) + "...";
          danmu.text = text;
        }
        const fontSize = danmu.fontSize || mergedConfig.value.fontSize || 16;
        if (mergedConfig.value.allowLineBreak) {
          const maxWidth = containerWidth.value * 0.6;
          let totalWidth = 0;
          for (let i2 = 0; i2 < text.length; i2++) {
            if (/[\u4e00-\u9fa5]|[^\x00-\xff]/.test(text[i2])) {
              totalWidth += fontSize;
            } else {
              totalWidth += fontSize * 0.6;
            }
          }
          return Math.min(totalWidth + 20, maxWidth);
        }
        let width = 0;
        for (let i2 = 0; i2 < text.length; i2++) {
          if (/[\u4e00-\u9fa5]|[^\x00-\xff]/.test(text[i2])) {
            width += fontSize;
          } else {
            width += fontSize * 0.6;
          }
        }
        return width + 20;
      };
      const calculateDuration = (danmu) => {
        if (danmu.duration)
          return danmu.duration;
        const speed = mergedConfig.value.speed || 100;
        const distance = containerWidth.value + calculateDanmuWidth(danmu);
        return distance / speed * 1e3;
      };
      const isDanmuBlocked = (danmu) => {
        var _a;
        if (!mergedConfig.value.blockEnabled)
          return false;
        if (danmu.userId && ((_a = mergedConfig.value.blockUsers) == null ? void 0 : _a.includes(danmu.userId))) {
          return true;
        }
        if (danmu.text && mergedConfig.value.blockWords) {
          for (const word of mergedConfig.value.blockWords) {
            if (danmu.text.includes(word)) {
              return true;
            }
          }
        }
        return false;
      };
      const findAvailableTrack = (danmu) => {
        if (danmu.type === "top") {
          return trackList.value[0];
        }
        if (danmu.type === "bottom") {
          return trackList.value[trackList.value.length - 1];
        }
        if (danmu.trackId !== void 0 && danmu.trackId >= 0 && danmu.trackId < trackList.value.length) {
          return trackList.value[danmu.trackId];
        }
        if (mergedConfig.value.randomTrack) {
          return trackList.value[Math.floor(Math.random() * trackList.value.length)];
        } else {
          return trackList.value.sort((a2, b2) => a2.danmus.length - b2.danmus.length)[0];
        }
      };
      const addDanmu = (danmu) => {
        if (!danmu || !danmu.id || !danmu.text) {
          formatAppLog("error", "at uni_modules/gp-danmu/components/gp-danmu/gp-danmu.vue:349", "添加弹幕失败: 无效的弹幕数据");
          return;
        }
        if (activeDanmus.value.length >= props.maxNumber) {
          return;
        }
        if (isDanmuBlocked(danmu)) {
          return;
        }
        const newDanmu = {
          ...danmu,
          type: danmu.type || "scroll",
          color: danmu.color || mergedConfig.value.fontColor,
          fontSize: danmu.fontSize || mergedConfig.value.fontSize,
          createTime: Date.now(),
          visible: true,
          animationEnded: false
        };
        const track = findAvailableTrack(newDanmu);
        newDanmu.trackId = track.id;
        newDanmu.top = track.id * (track.height || 40);
        const danmuType = danmuTypes[newDanmu.type || "scroll"];
        if (!danmuType) {
          formatAppLog("error", "at uni_modules/gp-danmu/components/gp-danmu/gp-danmu.vue:382", `未知的弹幕类型: ${newDanmu.type}`);
          return;
        }
        const animation = danmuType.createAnimation(newDanmu, track);
        newDanmu.animation = animation;
        createDanmuAnimation(newDanmu);
        activeDanmus.value.push(newDanmu);
        track.danmus.push(newDanmu);
        emit("send", newDanmu);
        return newDanmu;
      };
      const createDanmuAnimation = (danmu) => {
        if (!danmu.animation || !danmu.animation.keyframes)
          return;
        const keyframesName = `danmu-${danmu.type}-${danmu.id}`;
        if (typeof document !== "undefined") {
          const styleId = `gp-danmu-style-${danmu.id}`;
          let styleEl = document.getElementById(styleId);
          if (styleEl) {
            styleEl.remove();
          }
          styleEl = document.createElement("style");
          styleEl.id = styleId;
          let keyframesCSS = `@keyframes ${keyframesName} {`;
          danmu.animation.keyframes.forEach((frame) => {
            const props2 = [];
            let offset = frame.offset * 100;
            Object.keys(frame).forEach((key) => {
              if (key !== "offset") {
                props2.push(`${key}: ${frame[key]}`);
              }
            });
            keyframesCSS += `${offset}% { ${props2.join("; ")}; }`;
          });
          keyframesCSS += "}";
          styleEl.textContent = keyframesCSS;
          document.head.appendChild(styleEl);
        }
        danmu.customAnimationName = keyframesName;
      };
      const addBatchDanmus = (danmuList) => {
        if (!Array.isArray(danmuList))
          return;
        danmuList.forEach((danmu) => {
          addDanmu(danmu);
        });
      };
      const removeDanmu = (id2) => {
        const index = activeDanmus.value.findIndex((d2) => d2.id === id2);
        if (index !== -1) {
          const danmu = activeDanmus.value[index];
          const trackIndex = trackList.value.findIndex((t2) => t2.id === danmu.trackId);
          if (trackIndex !== -1) {
            const trackDanmuIndex = trackList.value[trackIndex].danmus.findIndex((d2) => d2.id === id2);
            if (trackDanmuIndex !== -1) {
              trackList.value[trackIndex].danmus.splice(trackDanmuIndex, 1);
            }
          }
          if (typeof document !== "undefined") {
            const styleId = `gp-danmu-style-${id2}`;
            const styleEl = document.getElementById(styleId);
            if (styleEl) {
              styleEl.remove();
            }
          }
          activeDanmus.value.splice(index, 1);
          emit("leave", danmu);
        }
      };
      const clearDanmus = () => {
        activeDanmus.value = [];
        trackList.value.forEach((track) => {
          track.danmus = [];
        });
        emit("clear");
      };
      const togglePlay = () => {
        if (isPlaying.value) {
          pause();
        } else {
          play();
        }
      };
      const play = () => {
        if (isPlaying.value)
          return;
        isPlaying.value = true;
        lastTimestamp.value = performance.now();
        animationFrameId.value = requestAnimationFrame(updateDanmus);
        emit("play");
      };
      const pause = () => {
        if (!isPlaying.value)
          return;
        isPlaying.value = false;
        if (animationFrameId.value) {
          cancelAnimationFrame(animationFrameId.value);
          animationFrameId.value = null;
        }
        emit("pause");
      };
      const updateDanmus = (timestamp) => {
        if (!isPlaying.value)
          return;
        timestamp - lastTimestamp.value;
        lastTimestamp.value = timestamp;
        const danmusToRemove = [];
        activeDanmus.value.forEach((danmu) => {
          if (danmu.animationEnded) {
            danmusToRemove.push(danmu.id);
            return;
          }
          const elapsed = timestamp - (danmu.createTime || 0);
          const delay = 200;
          if (danmu.animation && elapsed >= danmu.animation.duration + delay) {
            danmu.animationEnded = true;
            danmusToRemove.push(danmu.id);
          }
        });
        danmusToRemove.forEach((id2) => {
          removeDanmu(id2);
        });
        if (mergedConfig.value.looping && activeDanmus.value.length === 0 && props.danmuList.length > 0) {
          addBatchDanmus(props.danmuList);
        }
        animationFrameId.value = requestAnimationFrame(updateDanmus);
      };
      const handleDanmuClick = (danmu, event) => {
        if (!mergedConfig.value.clickable)
          return;
        emit("click", danmu, event);
      };
      const getDanmu = (id2) => {
        return activeDanmus.value.find((d2) => d2.id === id2);
      };
      const blockUser = (userId) => {
        if (mergedConfig.value.blockUsers && !mergedConfig.value.blockUsers.includes(userId)) {
          mergedConfig.value.blockUsers.push(userId);
          activeDanmus.value.forEach((danmu) => {
            if (danmu.userId === userId) {
              removeDanmu(danmu.id);
            }
          });
        }
      };
      const blockWord = (word) => {
        if (mergedConfig.value.blockWords && !mergedConfig.value.blockWords.includes(word)) {
          mergedConfig.value.blockWords.push(word);
          activeDanmus.value.forEach((danmu) => {
            if (danmu.text && danmu.text.includes(word)) {
              removeDanmu(danmu.id);
            }
          });
        }
      };
      const setConfig = (config2) => {
        Object.assign(props.config, config2);
      };
      const use = (plugin) => {
        if (!plugin || typeof plugin.install !== "function") {
          formatAppLog("error", "at uni_modules/gp-danmu/components/gp-danmu/gp-danmu.vue:618", "无效的插件：插件必须提供 install 方法");
          return;
        }
        try {
          plugin.install({
            registerDanmuType,
            pluginContext,
            mergedConfig: mergedConfig.value,
            containerWidth: containerWidth.value,
            containerHeight: containerHeight.value
          });
          formatAppLog("log", "at uni_modules/gp-danmu/components/gp-danmu/gp-danmu.vue:630", `插件 ${plugin.name || "未命名"} 已安装`);
        } catch (error) {
          formatAppLog("error", "at uni_modules/gp-danmu/components/gp-danmu/gp-danmu.vue:632", "安装插件时出错:", error);
        }
      };
      vue.onMounted(() => {
        initContainerSize();
        initTracks();
        registerDefaultDanmuTypes();
        window.addEventListener("resize", initContainerSize);
        if (props.danmuList.length > 0 && props.autoplay) {
          vue.nextTick(() => {
            addBatchDanmus(props.danmuList);
            play();
          });
        }
      });
      vue.onBeforeUnmount(() => {
        pause();
        window.removeEventListener("resize", initContainerSize);
      });
      vue.watch(() => props.danmuList, (newList, oldList) => {
        if (newList !== oldList && isPlaying.value) {
          const oldIds = new Set(oldList.map((d2) => d2.id));
          const newDanmus = newList.filter((d2) => !oldIds.has(d2.id));
          if (newDanmus.length > 0) {
            addBatchDanmus(newDanmus);
          }
        }
      }, { deep: true });
      vue.watch(() => props.config, () => {
        initTracks();
      }, { deep: true });
      __expose({
        add: addDanmu,
        addBatch: addBatchDanmus,
        play,
        pause,
        clear: clearDanmus,
        setConfig,
        getDanmu,
        blockUser,
        blockWord,
        use
      });
      const __returned__ = { props, emit, instance, defaultConfig, mergedConfig, containerRef, containerWidth, containerHeight, activeDanmus, isPlaying, trackList, danmuTypes, pluginContext, animationFrameId, lastTimestamp, initTracks, initContainerSize, registerDefaultDanmuTypes, registerDanmuType, calculateDanmuWidth, calculateDuration, isDanmuBlocked, findAvailableTrack, addDanmu, createDanmuAnimation, addBatchDanmus, removeDanmu, clearDanmus, togglePlay, play, pause, updateDanmus, handleDanmuClick, getDanmu, blockUser, blockWord, setConfig, use };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  });
  function _sfc_render$16(_ctx, _cache, $props, $setup, $data, $options) {
    return vue.openBlock(), vue.createElementBlock(
      "view",
      {
        class: "gp-danmu-container",
        ref: "containerRef",
        style: vue.normalizeStyle({
          zIndex: $props.zIndex,
          height: `${$setup.mergedConfig.trackNumber * $setup.mergedConfig.trackHeight}px`
        })
      },
      [
        (vue.openBlock(true), vue.createElementBlock(
          vue.Fragment,
          null,
          vue.renderList($setup.activeDanmus, (danmu) => {
            var _a, _b, _c, _d;
            return vue.openBlock(), vue.createElementBlock("view", {
              key: danmu.id,
              class: vue.normalizeClass(["gp-danmu-item", [`gp-danmu-${danmu.type}`, { "gp-danmu-clickable": $setup.mergedConfig.clickable }]]),
              style: vue.normalizeStyle({
                top: `${danmu.top}px`,
                color: danmu.color,
                fontSize: `${danmu.fontSize}px`,
                opacity: $setup.mergedConfig.opacity,
                backgroundColor: $setup.mergedConfig.backgroundColor,
                animation: danmu.customAnimationName ? `${danmu.customAnimationName} ${(_a = danmu.animation) == null ? void 0 : _a.duration}ms ${(_b = danmu.animation) == null ? void 0 : _b.timingFunction} 0s 1 normal forwards` : `danmu-${danmu.type} ${(_c = danmu.animation) == null ? void 0 : _c.duration}ms ${(_d = danmu.animation) == null ? void 0 : _d.timingFunction} 0s 1 normal forwards`,
                animationPlayState: $setup.isPlaying ? "running" : "paused"
              }),
              onClick: ($event) => $setup.handleDanmuClick(danmu, $event),
              onAnimationend: () => {
                danmu.animationEnded = true;
              }
            }, [
              vue.renderSlot(_ctx.$slots, "danmu", { danmu }, () => [
                vue.createElementVNode(
                  "text",
                  { class: "gp-danmu-text" },
                  vue.toDisplayString(danmu.text),
                  1
                  /* TEXT */
                )
              ], true)
            ], 46, ["onClick", "onAnimationend"]);
          }),
          128
          /* KEYED_FRAGMENT */
        )),
        vue.renderSlot(_ctx.$slots, "controls", {}, void 0, true)
      ],
      4
      /* STYLE */
    );
  }
  const __easycom_2$4 = /* @__PURE__ */ _export_sfc(_sfc_main$17, [["render", _sfc_render$16], ["__scopeId", "data-v-75511d43"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/uni_modules/gp-danmu/components/gp-danmu/gp-danmu.vue"]]);
  const getExamDetail = (params, config2 = {}) => http$1.get("/api/psychology/exam/paperDetail", params, config2);
  const getExamRule = (params, config2 = {}) => http$1.get("/api/config/examRuleDescription", params, config2);
  const getExamOptions = (params, config2 = {}) => http$1.get("/api/psychology/exam/options", params, config2);
  const saveExamRecord = (params, config2 = {}) => http$1.post("/api/psychology/examRecord/save", params, config2);
  const updateUserAnswer = (params, config2 = {}) => http$1.post("/api/psychology/examRecord/update", params, config2);
  const examResult = (params, config2 = {}) => http$1.get("/api/psychology/examRecord/getExamResult", params, config2);
  const publishExamComment = (params, config2 = {}) => http$1.post("/api/comment/comment/saveComment", params, config2);
  const examRecord = (params, config2 = {}) => http$1.get("/api/psychology/examRecord/listMyRecord", params, config2);
  const recordDetail = (params, config2 = {}) => http$1.get("/api/psychology/examRecord/userRecordDetail", params, config2);
  const commentSatus = (params, config2 = {}) => http$1.get("/api/psychology/examRecord/commentStatus", params, config2);
  const examListByTypes = (params, config2 = {}) => http$1.get("/api/psychology/exam/listByType", params, config2);
  const recommendExams = (params, config2 = {}) => http$1.get("/api/psychology/exam/recommendExams", params, config2);
  const dailyRecommend = (params, config2 = {}) => http$1.get("/api/psychology/exam/dailyRecommend", params, config2);
  const examListData = (params, config2 = {}) => http$1.get("/api/psychology/exam/list", params, config2);
  const articleComment = (params, config2 = {}) => http$1.get("/api/psychology/exam/commentInfo", params, config2);
  const articleCommentList = (params, config2 = {}) => http$1.get("/api/psychology/exam/commentList", params, config2);
  const _imports_0$8 = "/static/psychological-test/logo.svg";
  const _sfc_main$16 = {
    __name: "index",
    setup(__props, { expose: __expose }) {
      __expose();
      vue.useCssVars((_ctx) => ({
        "778f7de8-statusBarHeight": statusBarHeight.value
      }));
      const globalStore = useGlobalDataStore();
      const danmuRef = vue.ref(null);
      const statusBarHeight = vue.ref(globalStore.statusBarHeight + "px");
      const danmuConfig = vue.reactive({
        trackHeight: 40,
        // 轨道高度
        trackNumber: 3,
        // 轨道数量
        speed: 100,
        // 弹幕速度
        fontSize: 16,
        // 默认字体大小
        fontColor: "#000000",
        // 默认字体颜色
        backgroundColor: "white",
        // 弹幕背景色
        trackMode: "separate",
        // 轨道模式：overlap(重叠)、separate(分离)
        looping: true,
        // 是否循环播放
        direction: "rtl",
        // 弹幕方向：rtl(从右到左)、ltr(从左到右)
        duration: 1e3,
        // 弹幕动画持续时间（毫秒）
        density: 0.5,
        // 弹幕密度(0-1)
        randomTrack: true,
        // 是否随机选择轨道
        opacity: 1,
        // 弹幕透明度
        hoverPause: true
      });
      const gotoDetail = (item) => {
        uni.navigateTo({
          url: "/pages/psychological-test/charge-test/charge-test?id=" + item.id
        });
      };
      const backFn = () => {
        uni.navigateBack({
          delta: 1
        });
      };
      const gotoPage = () => {
        uni.navigateTo({
          url: "/pages/psychological-test/test-type/test-type"
        });
      };
      const dailyRecommendExams = vue.ref([]);
      const searchHandler = () => {
      };
      const tabLists = vue.ref([{
        id: 1,
        text: "性格",
        url: "/static/login/logo.png"
      }, {
        id: 2,
        text: "情感",
        url: "/static/login/logo.png"
      }, {
        id: 3,
        text: "健康",
        url: "/static/login/logo.png"
      }, {
        id: 4,
        text: "职业",
        url: "/static/login/logo.png"
      }, {
        id: 5,
        text: "全部",
        url: "/static/login/logo.png"
      }]);
      const menuTabs = vue.ref([{
        id: 1,
        txt: "免费测试"
      }, {
        id: 2,
        txt: "付费测试"
      }]);
      const recommend = vue.ref([]);
      const menuTabActive = vue.ref(0);
      const menuTabHandler = (i2) => {
        menuTabActive.value != i2 ? menuTabActive.value = i2 : "";
        examList.value = [];
        getExamList();
      };
      const getRecommendExams = async () => {
        let resp = await recommendExams();
        recommend.value = resp.data;
      };
      const getDailyRecommend = async () => {
        let resp = await dailyRecommend();
        formatAppLog("log", "at pages/psychological-test/index/index.vue:259", resp);
        dailyRecommendExams.value = resp.data;
      };
      const playDanmu = () => {
        danmuRef.value.play();
      };
      const freePage = vue.ref(1);
      const pageSize = vue.ref(10);
      const payPage = vue.ref(1);
      const examList = vue.ref([]);
      const freeExamList = vue.ref([]);
      const payExamList = vue.ref([]);
      const freeHasMore = vue.ref(false);
      const payHasMore = vue.ref(false);
      const getExamList = async () => {
        let page = menuTabActive.value == 0 ? freePage.value : payPage.value;
        let resp = await examListData({
          payType: menuTabActive.value,
          page,
          size: pageSize.value
        });
        formatAppLog("log", "at pages/psychological-test/index/index.vue:285", resp);
        if (menuTabActive.value == 0) {
          if (freePage.value == 1) {
            freeExamList.value = resp.data.records;
          } else {
            freeExamList.value = freeExamList.value.concat(resp.data.records);
          }
          formatAppLog("log", "at pages/psychological-test/index/index.vue:292", freeExamList.value.length);
          if (resp.data.total <= freeExamList.value.length) {
            freeHasMore.value = false;
          } else {
            freeHasMore.value = true;
          }
          examList.value = freeExamList.value;
        } else {
          if (payPage.value == 1) {
            payExamList.value = resp.data.records;
          } else {
            payExamList.value = payExamList.value.concat(resp.data.records);
          }
          if (resp.data.total <= payExamList.value.length) {
            payHasMore.value = false;
          } else {
            payHasMore.value = true;
          }
          examList.value = payExamList.value;
        }
      };
      onLoad(() => {
        getRecommendExams();
        getDailyRecommend();
        getExamList();
      });
      const reachBottom = () => {
        formatAppLog("log", "at pages/psychological-test/index/index.vue:323", "reach bottom");
        if (menuTabActive.value == 0) {
          if (freeHasMore.value) {
            freePage.value++;
            getExamList();
          }
        } else {
          if (payHasMore.value) {
            payPage++;
            getExamList();
          }
        }
      };
      const myOrderHandler = () => {
        uni.navigateTo({
          url: "/pages/psychological-test/order/order"
        });
      };
      const danmuList = vue.ref([
        {
          id: 1,
          text: "这是一条普通弹幕",
          color: "#000000"
        },
        {
          id: 2,
          text: "这是一条彩色弹幕",
          color: "#FF6600"
        },
        {
          id: 3,
          text: "这是一条顶部弹幕",
          color: "#00FFFF"
        },
        {
          id: 4,
          text: "这是一条底部弹幕",
          color: "#FFFF00"
        }
      ]);
      vue.onMounted(() => {
      });
      const addDanmu = (text) => {
        danmuList.value.push({
          text
        });
      };
      const openAllTypeHandler = (item) => {
        if (item.id < 5) {
          uni.navigateTo({
            url: `/pages/psychological-test/test-type/test-type?type=${item.text}`
          });
        } else {
          uni.navigateTo({
            url: `/pages/psychological-test/test-type/test-type`
          });
        }
      };
      const __returned__ = { globalStore, danmuRef, statusBarHeight, danmuConfig, gotoDetail, backFn, gotoPage, dailyRecommendExams, searchHandler, tabLists, menuTabs, recommend, menuTabActive, menuTabHandler, getRecommendExams, getDailyRecommend, playDanmu, freePage, pageSize, payPage, examList, freeExamList, payExamList, freeHasMore, payHasMore, getExamList, reachBottom, myOrderHandler, danmuList, addDanmu, openAllTypeHandler, onMounted: vue.onMounted, ref: vue.ref, reactive: vue.reactive, get useGlobalDataStore() {
        return useGlobalDataStore;
      }, get MoteLinesDivide() {
        return MoteLinesDivide;
      }, get recommendExams() {
        return recommendExams;
      }, get dailyRecommend() {
        return dailyRecommend;
      }, get examListData() {
        return examListData;
      }, get onLoad() {
        return onLoad;
      }, get onReachBottom() {
        return onReachBottom;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$15(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    const _component_uni_search_bar = resolveEasycom(vue.resolveDynamicComponent("uni-search-bar"), __easycom_0$6);
    const _component_gp_danmu = resolveEasycom(vue.resolveDynamicComponent("gp-danmu"), __easycom_2$4);
    return vue.openBlock(), vue.createElementBlock("view", { class: "psychological-box" }, [
      vue.createElementVNode(
        "scroll-view",
        {
          "scroll-y": "true",
          class: "scroll-y",
          "show-scrollbar": false,
          onScrolltolower: $setup.reachBottom
        },
        [
          vue.createElementVNode("view", { class: "psychological-header" }, [
            vue.createElementVNode("view", { class: "header-nav-bar" }, [
              vue.createElementVNode("view", { class: "header-left" }, [
                vue.createVNode(_component_uni_icons, {
                  type: "left",
                  size: "24",
                  onClick: $setup.backFn
                }),
                vue.createElementVNode("text", null, "心理测试")
              ]),
              vue.createElementVNode("view", { class: "header-title" }, [
                vue.createVNode(_component_uni_search_bar, {
                  class: "uni-mt-10",
                  radius: "90",
                  placeholder: "抑郁测试",
                  clearButton: "auto",
                  cancelButton: "none",
                  onConfirm: $setup.searchHandler
                })
              ]),
              vue.createElementVNode("view", {
                class: "header-right",
                onClick: $setup.myOrderHandler
              }, [
                vue.createElementVNode("image", {
                  src: _imports_0$8,
                  class: "logo-svg"
                }),
                vue.createElementVNode("text", { class: "txt" }, "我的测评")
              ])
            ]),
            vue.createElementVNode("view", { class: "scroll-content" }, [
              vue.createElementVNode("scroll-view", {
                "scroll-x": "true",
                class: "scroll-x",
                "show-scrollbar": false
              }, [
                vue.createElementVNode("view", { class: "test-list" }, [
                  (vue.openBlock(true), vue.createElementBlock(
                    vue.Fragment,
                    null,
                    vue.renderList($setup.recommend, (item, index) => {
                      return vue.openBlock(), vue.createElementBlock("view", {
                        class: "test-item",
                        key: index,
                        onClick: ($event) => $setup.gotoDetail(item)
                      }, [
                        vue.createElementVNode("image", {
                          src: item.icon ? item.icon : "@/static/forum/bg.png",
                          mode: "aspectFill",
                          class: "img"
                        }, null, 8, ["src"]),
                        vue.createElementVNode(
                          "view",
                          { class: "test-title" },
                          vue.toDisplayString(item.title),
                          1
                          /* TEXT */
                        ),
                        vue.createElementVNode(
                          "view",
                          { class: "use-test" },
                          vue.toDisplayString(item.examNum) + "人已测",
                          1
                          /* TEXT */
                        ),
                        vue.createElementVNode("view", { class: "start-test" }, [
                          vue.createTextVNode("开始测试"),
                          vue.createVNode(_component_uni_icons, {
                            type: "right",
                            size: "12",
                            color: "#35CA95"
                          })
                        ])
                      ], 8, ["onClick"]);
                    }),
                    128
                    /* KEYED_FRAGMENT */
                  ))
                ])
              ])
            ]),
            vue.createElementVNode("view", { class: "emotion-room" }, [
              vue.createElementVNode("view", { class: "emotion-room-header" }, [
                vue.createElementVNode("text", { class: "room-title" }, "情绪小房间"),
                vue.createElementVNode("text", { class: "room-remark" }, "500+倾听师深度解读情绪困惑")
              ]),
              vue.createElementVNode("view", { class: "emotion-room-content" }, [
                vue.createElementVNode("div", { class: "danmu-container" }, [
                  vue.createVNode(_component_gp_danmu, {
                    ref: "danmuRef",
                    danmuList: $setup.danmuList,
                    config: $setup.danmuConfig
                  }, {
                    danmu: vue.withCtx(({ danmu }) => [
                      vue.createElementVNode("view", { class: "custom-danmu" }, [
                        danmu.avatar ? (vue.openBlock(), vue.createElementBlock("image", {
                          key: 0,
                          src: danmu.avatar,
                          class: "avatar"
                        }, null, 8, ["src"])) : vue.createCommentVNode("v-if", true),
                        vue.createElementVNode(
                          "text",
                          { class: "username" },
                          vue.toDisplayString(danmu.username),
                          1
                          /* TEXT */
                        ),
                        vue.createElementVNode(
                          "text",
                          { class: "content" },
                          vue.toDisplayString(danmu.text),
                          1
                          /* TEXT */
                        )
                      ])
                    ]),
                    _: 1
                    /* STABLE */
                  }, 8, ["danmuList", "config"])
                ])
              ]),
              vue.createElementVNode("view", { class: "send-msg" })
            ]),
            vue.createElementVNode("view", { class: "bg1" }),
            vue.createElementVNode("view", { class: "bg2" })
          ]),
          vue.createElementVNode("view", { class: "tabs" }, [
            vue.createElementVNode("view", { class: "tabs-list" }, [
              (vue.openBlock(true), vue.createElementBlock(
                vue.Fragment,
                null,
                vue.renderList($setup.tabLists, (item, index) => {
                  return vue.openBlock(), vue.createElementBlock("view", {
                    class: "tab-item",
                    key: index,
                    onClick: ($event) => $setup.openAllTypeHandler(item)
                  }, [
                    vue.createElementVNode("image", {
                      src: item.url,
                      class: "img"
                    }, null, 8, ["src"]),
                    vue.createElementVNode(
                      "text",
                      { class: "txt" },
                      vue.toDisplayString(item.text),
                      1
                      /* TEXT */
                    )
                  ], 8, ["onClick"]);
                }),
                128
                /* KEYED_FRAGMENT */
              ))
            ])
          ]),
          vue.createElementVNode("view", { class: "day-recommend-box" }, [
            vue.createElementVNode("view", { class: "day-recommend-content" }, [
              vue.createElementVNode("view", { class: "recommend-heaader" }, [
                vue.createElementVNode("view", { class: "title" }, "每日推荐"),
                vue.createElementVNode("view", {
                  class: "label",
                  onClick: $setup.getDailyRecommend
                }, [
                  vue.createTextVNode("换一换"),
                  vue.createVNode(_component_uni_icons, {
                    type: "reload",
                    size: "12",
                    color: "#38CC98"
                  })
                ])
              ]),
              vue.createElementVNode("view", { class: "content-list" }, [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($setup.dailyRecommendExams, (item, index) => {
                    return vue.openBlock(), vue.createElementBlock("view", {
                      class: "content-item",
                      key: index,
                      onClick: ($event) => $setup.gotoDetail(item)
                    }, [
                      vue.createElementVNode("image", {
                        src: item.icon ? item.icon : "@/static/forum/bg.png",
                        mode: "aspectFill",
                        class: "img"
                      }, null, 8, ["src"]),
                      vue.createElementVNode("view", null, [
                        vue.createElementVNode(
                          "view",
                          { class: "title" },
                          vue.toDisplayString(item.title),
                          1
                          /* TEXT */
                        ),
                        vue.createElementVNode("view", { class: "price-box" }, [
                          vue.createElementVNode(
                            "view",
                            { class: "price" },
                            vue.toDisplayString(item.payType == 0 ? "免费" : "￥" + item.discountPrice),
                            1
                            /* TEXT */
                          ),
                          vue.createElementVNode("view", { class: "use-test" }, [
                            vue.createVNode(_component_uni_icons, {
                              type: "fire-filled",
                              size: "18",
                              color: "#FA5151"
                            }),
                            vue.createElementVNode(
                              "text",
                              { class: "num" },
                              vue.toDisplayString(item.examNum),
                              1
                              /* TEXT */
                            ),
                            vue.createTextVNode("人已测 ")
                          ])
                        ])
                      ])
                    ], 8, ["onClick"]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                ))
              ])
            ])
          ]),
          vue.createElementVNode("view", { class: "menu-tabs" }, [
            vue.createElementVNode("view", { class: "menu-tabs-conetnt" }, [
              vue.createElementVNode("view", { class: "menu-tabs-header" }, [
                vue.createElementVNode("view", { class: "title" }, [
                  (vue.openBlock(true), vue.createElementBlock(
                    vue.Fragment,
                    null,
                    vue.renderList($setup.menuTabs, (item, index) => {
                      return vue.openBlock(), vue.createElementBlock("view", {
                        class: vue.normalizeClass(["title-item", $setup.menuTabActive == index ? "active" : ""]),
                        key: index,
                        onClick: ($event) => $setup.menuTabHandler(index)
                      }, vue.toDisplayString(item.txt), 11, ["onClick"]);
                    }),
                    128
                    /* KEYED_FRAGMENT */
                  ))
                ]),
                vue.createElementVNode("view", {
                  class: "label",
                  onClick: _cache[0] || (_cache[0] = ($event) => $setup.gotoPage())
                }, [
                  vue.createTextVNode("更多"),
                  vue.createVNode(_component_uni_icons, {
                    type: "right",
                    size: "12"
                  })
                ])
              ]),
              vue.createElementVNode("view", { class: "content-list" }, [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($setup.examList, (item, index) => {
                    return vue.openBlock(), vue.createElementBlock("view", {
                      class: "content-item",
                      key: index,
                      onClick: ($event) => $setup.gotoDetail(item)
                    }, [
                      vue.createElementVNode("view", { class: "content-item-content" }, [
                        vue.createElementVNode("view", null, [
                          vue.createElementVNode(
                            "view",
                            { class: "title" },
                            vue.toDisplayString(item.title),
                            1
                            /* TEXT */
                          ),
                          vue.createElementVNode(
                            "view",
                            { class: "remark" },
                            vue.toDisplayString(item.oneWord),
                            1
                            /* TEXT */
                          ),
                          item.payType == 1 ? (vue.openBlock(), vue.createElementBlock("view", {
                            key: 0,
                            class: "price-box"
                          }, [
                            vue.createElementVNode(
                              "text",
                              { class: "price" },
                              "￥" + vue.toDisplayString(item.discountPrice),
                              1
                              /* TEXT */
                            ),
                            vue.createElementVNode(
                              "text",
                              { class: "under-price" },
                              "￥" + vue.toDisplayString(item.price),
                              1
                              /* TEXT */
                            )
                          ])) : vue.createCommentVNode("v-if", true),
                          vue.createElementVNode("view", { class: "price-box" }, [
                            vue.createElementVNode("text", { class: "price" }),
                            vue.createTextVNode("免费")
                          ]),
                          vue.createElementVNode("view", { class: "test-handler" }, [
                            vue.createElementVNode("view", { class: "handler-btn" }, "去测试"),
                            vue.createElementVNode("view", { class: "use-test" }, [
                              vue.createElementVNode(
                                "text",
                                { class: "num" },
                                vue.toDisplayString(item.examNum),
                                1
                                /* TEXT */
                              ),
                              vue.createTextVNode("人已测")
                            ])
                          ])
                        ]),
                        vue.createElementVNode("view", { class: "img-box" }, [
                          vue.createElementVNode("image", {
                            src: item.icon ? item.icon : "@/static/consult/user.png",
                            mode: "aspectFill",
                            class: "img"
                          }, null, 8, ["src"])
                        ])
                      ])
                    ], 8, ["onClick"]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                ))
              ])
            ])
          ])
        ],
        32
        /* NEED_HYDRATION */
      )
    ]);
  }
  const PagesPsychologicalTestIndexIndex = /* @__PURE__ */ _export_sfc(_sfc_main$16, [["render", _sfc_render$15], ["__scopeId", "data-v-778f7de8"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/psychological-test/index/index.vue"]]);
  function pad(str, length = 2) {
    str += "";
    while (str.length < length) {
      str = "0" + str;
    }
    return str.slice(-length);
  }
  const parser = {
    yyyy: (dateObj) => {
      return pad(dateObj.year, 4);
    },
    yy: (dateObj) => {
      return pad(dateObj.year);
    },
    MM: (dateObj) => {
      return pad(dateObj.month);
    },
    M: (dateObj) => {
      return dateObj.month;
    },
    dd: (dateObj) => {
      return pad(dateObj.day);
    },
    d: (dateObj) => {
      return dateObj.day;
    },
    hh: (dateObj) => {
      return pad(dateObj.hour);
    },
    h: (dateObj) => {
      return dateObj.hour;
    },
    mm: (dateObj) => {
      return pad(dateObj.minute);
    },
    m: (dateObj) => {
      return dateObj.minute;
    },
    ss: (dateObj) => {
      return pad(dateObj.second);
    },
    s: (dateObj) => {
      return dateObj.second;
    },
    SSS: (dateObj) => {
      return pad(dateObj.millisecond, 3);
    },
    S: (dateObj) => {
      return dateObj.millisecond;
    }
  };
  function getDate(time) {
    if (time instanceof Date) {
      return time;
    }
    switch (typeof time) {
      case "string": {
        if (time.indexOf("T") > -1) {
          return new Date(time);
        }
        return new Date(time.replace(/-/g, "/"));
      }
      default:
        return new Date(time);
    }
  }
  function formatDate(date2, format = "yyyy/MM/dd hh:mm:ss") {
    if (!date2 && date2 !== 0) {
      return "";
    }
    date2 = getDate(date2);
    const dateObj = {
      year: date2.getFullYear(),
      month: date2.getMonth() + 1,
      day: date2.getDate(),
      hour: date2.getHours(),
      minute: date2.getMinutes(),
      second: date2.getSeconds(),
      millisecond: date2.getMilliseconds()
    };
    const tokenRegExp = /yyyy|yy|MM|M|dd|d|hh|h|mm|m|ss|s|SSS|SS|S/;
    let flag = true;
    let result = format;
    while (flag) {
      flag = false;
      result = result.replace(tokenRegExp, function(matched) {
        flag = true;
        return parser[matched](dateObj);
      });
    }
    return result;
  }
  function friendlyDate(time, {
    locale = "zh",
    threshold = [6e4, 36e5],
    format = "yyyy/MM/dd hh:mm:ss"
  }) {
    if (time === "-") {
      return time;
    }
    if (!time && time !== 0) {
      return "";
    }
    const localeText = {
      zh: {
        year: "年",
        month: "月",
        day: "天",
        hour: "小时",
        minute: "分钟",
        second: "秒",
        ago: "前",
        later: "后",
        justNow: "刚刚",
        soon: "马上",
        template: "{num}{unit}{suffix}"
      },
      en: {
        year: "year",
        month: "month",
        day: "day",
        hour: "hour",
        minute: "minute",
        second: "second",
        ago: "ago",
        later: "later",
        justNow: "just now",
        soon: "soon",
        template: "{num} {unit} {suffix}"
      }
    };
    const text = localeText[locale] || localeText.zh;
    let date2 = getDate(time);
    let ms2 = date2.getTime() - Date.now();
    let absMs = Math.abs(ms2);
    if (absMs < threshold[0]) {
      return ms2 < 0 ? text.justNow : text.soon;
    }
    if (absMs >= threshold[1]) {
      return formatDate(date2, format);
    }
    let num;
    let unit;
    let suffix = text.later;
    if (ms2 < 0) {
      suffix = text.ago;
      ms2 = -ms2;
    }
    const seconds = Math.floor(ms2 / 1e3);
    const minutes = Math.floor(seconds / 60);
    const hours = Math.floor(minutes / 60);
    const days = Math.floor(hours / 24);
    const months = Math.floor(days / 30);
    const years = Math.floor(months / 12);
    switch (true) {
      case years > 0:
        num = years;
        unit = text.year;
        break;
      case months > 0:
        num = months;
        unit = text.month;
        break;
      case days > 0:
        num = days;
        unit = text.day;
        break;
      case hours > 0:
        num = hours;
        unit = text.hour;
        break;
      case minutes > 0:
        num = minutes;
        unit = text.minute;
        break;
      default:
        num = seconds;
        unit = text.second;
        break;
    }
    if (locale === "en") {
      if (num === 1) {
        num = "a";
      } else {
        unit += "s";
      }
    }
    return text.template.replace(/{\s*num\s*}/g, num + "").replace(/{\s*unit\s*}/g, unit).replace(
      /{\s*suffix\s*}/g,
      suffix
    );
  }
  const _sfc_main$15 = {
    name: "uniDateformat",
    props: {
      date: {
        type: [Object, String, Number],
        default() {
          return "-";
        }
      },
      locale: {
        type: String,
        default: "zh"
      },
      threshold: {
        type: Array,
        default() {
          return [0, 0];
        }
      },
      format: {
        type: String,
        default: "yyyy/MM/dd hh:mm:ss"
      },
      // refreshRate使用不当可能导致性能问题，谨慎使用
      refreshRate: {
        type: [Number, String],
        default: 0
      }
    },
    data() {
      return {
        refreshMark: 0
      };
    },
    computed: {
      dateShow() {
        this.refreshMark;
        return friendlyDate(this.date, {
          locale: this.locale,
          threshold: this.threshold,
          format: this.format
        });
      }
    },
    watch: {
      refreshRate: {
        handler() {
          this.setAutoRefresh();
        },
        immediate: true
      }
    },
    methods: {
      refresh() {
        this.refreshMark++;
      },
      setAutoRefresh() {
        clearInterval(this.refreshInterval);
        if (this.refreshRate) {
          this.refreshInterval = setInterval(() => {
            this.refresh();
          }, parseInt(this.refreshRate));
        }
      }
    }
  };
  function _sfc_render$14(_ctx, _cache, $props, $setup, $data, $options) {
    return vue.openBlock(), vue.createElementBlock(
      "text",
      null,
      vue.toDisplayString($options.dateShow),
      1
      /* TEXT */
    );
  }
  const __easycom_3$2 = /* @__PURE__ */ _export_sfc(_sfc_main$15, [["render", _sfc_render$14], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/uni_modules/uni-dateformat/components/uni-dateformat/uni-dateformat.vue"]]);
  const _sfc_main$14 = {
    __name: "order",
    setup(__props, { expose: __expose }) {
      __expose();
      vue.useCssVars((_ctx) => ({
        "94d077b1-statusBarHeight": statusBarHeight.value
      }));
      const globalStore = useGlobalDataStore();
      const statusBarHeight = vue.ref(globalStore.statusBarHeight + "px");
      const backFn = () => {
        uni.navigateBack({
          delta: 1
        });
      };
      const records = vue.ref([]);
      onShow(() => {
        getExamRecord();
      });
      const continueTest = (item) => {
        uni.navigateTo({
          url: `/pages/psychological-test/start-test/start-test?id=${item.id}&examId=${item.examId}&currentIndex=${item.currentIndex}`
        });
      };
      const getExamRecord = async () => {
        let resp = await examRecord({
          type: tabActive.value
        });
        formatAppLog("log", "at pages/psychological-test/order/order.vue:102", resp);
        records.value = resp.data;
      };
      const gotoDetail = (item) => {
        uni.navigateTo({
          url: `/pages/psychological-test/charge-test/charge-test?id=${item.examId}`
        });
      };
      const gotoResult = (item) => {
        uni.navigateTo({
          url: `/pages/psychological-test/test-result/test-result?title=${item.title}&examId=${item.examId}&result=${item.result}&icon=${item.icon}&id=${item.id}`
        });
      };
      const tabsList = vue.ref([{
        id: 1,
        label: "未完成",
        isDot: false
      }, {
        id: 2,
        label: "已完成",
        isDot: false
      }, {
        id: 3,
        label: "待支付",
        isDot: true
      }]);
      const tabActive = vue.ref(1);
      const tabHandler = (item) => {
        uni.showLoading({
          title: "加载中..."
        });
        records.value = [];
        item.id != tabActive.value ? tabActive.value = item.id : "";
        getExamRecord();
        uni.hideLoading();
      };
      const __returned__ = { globalStore, statusBarHeight, backFn, records, continueTest, getExamRecord, gotoDetail, gotoResult, tabsList, tabActive, tabHandler, ref: vue.ref, get useGlobalDataStore() {
        return useGlobalDataStore;
      }, get onShow() {
        return onShow;
      }, get examRecord() {
        return examRecord;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$13(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    const _component_uni_nav_bar = resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"), __easycom_1$4);
    const _component_uni_dateformat = resolveEasycom(vue.resolveDynamicComponent("uni-dateformat"), __easycom_3$2);
    return vue.openBlock(), vue.createElementBlock("view", { class: "my-order-box" }, [
      vue.createVNode(_component_uni_nav_bar, {
        backgroundColor: "#F4F6F8",
        border: false,
        title: "我的评测",
        class: "header-bar",
        statusBar: true,
        fixed: ""
      }, {
        left: vue.withCtx(() => [
          vue.createVNode(_component_uni_icons, {
            type: "left",
            size: "24",
            onClick: $setup.backFn
          })
        ]),
        _: 1
        /* STABLE */
      }),
      vue.createElementVNode("view", { class: "tab-list-box" }, [
        vue.createElementVNode("view", { class: "tab-list-content" }, [
          (vue.openBlock(true), vue.createElementBlock(
            vue.Fragment,
            null,
            vue.renderList($setup.tabsList, (item, index) => {
              return vue.openBlock(), vue.createElementBlock("view", {
                class: vue.normalizeClass(["tab-item", $setup.tabActive == item.id ? "active" : ""]),
                key: item.id,
                onClick: ($event) => $setup.tabHandler(item)
              }, [
                vue.createTextVNode(
                  vue.toDisplayString(item.label) + " ",
                  1
                  /* TEXT */
                ),
                item.isDot ? (vue.openBlock(), vue.createElementBlock("view", {
                  key: 0,
                  class: "is-dot"
                })) : vue.createCommentVNode("v-if", true)
              ], 10, ["onClick"]);
            }),
            128
            /* KEYED_FRAGMENT */
          ))
        ])
      ]),
      vue.createElementVNode("view", { class: "order-content-box" }, [
        vue.createElementVNode("scroll-view", {
          "scroll-y": "true",
          class: "scroll-content",
          "show-scrollbar": false
        }, [
          vue.createElementVNode("view", { class: "order-content-list" }, [
            (vue.openBlock(true), vue.createElementBlock(
              vue.Fragment,
              null,
              vue.renderList($setup.records, (item, index) => {
                return vue.openBlock(), vue.createElementBlock("view", {
                  class: "order-content-item",
                  key: index,
                  onClick: ($event) => $setup.gotoDetail(item)
                }, [
                  vue.createElementVNode("view", { class: "item-box" }, [
                    vue.createElementVNode("view", { class: "image-item" }, [
                      vue.createElementVNode("image", {
                        src: _imports_0$m,
                        class: "img"
                      })
                    ]),
                    vue.createElementVNode("view", { class: "text-content" }, [
                      vue.createElementVNode("view", { class: "header" }, [
                        vue.createElementVNode(
                          "view",
                          { class: "title" },
                          vue.toDisplayString(item.title),
                          1
                          /* TEXT */
                        ),
                        vue.createElementVNode("view", { class: "date" }, [
                          vue.createVNode(_component_uni_dateformat, {
                            format: "yyyy/MM/dd",
                            date: item.time
                          }, null, 8, ["date"])
                        ])
                      ]),
                      vue.createElementVNode(
                        "view",
                        { class: "content" },
                        vue.toDisplayString(item.oneWord),
                        1
                        /* TEXT */
                      ),
                      item.payType == 0 ? (vue.openBlock(), vue.createElementBlock("view", {
                        key: 0,
                        class: "footer"
                      }, [
                        vue.createElementVNode("view", { class: "free" }, "免费"),
                        $setup.tabActive == 1 ? (vue.openBlock(), vue.createElementBlock("view", {
                          key: 0,
                          class: "test",
                          onClick: vue.withModifiers(($event) => $setup.continueTest(item), ["stop"])
                        }, "继续评测", 8, ["onClick"])) : vue.createCommentVNode("v-if", true),
                        $setup.tabActive == 2 ? (vue.openBlock(), vue.createElementBlock("view", {
                          key: 1,
                          class: "btns"
                        }, [
                          vue.createElementVNode("view", {
                            class: "test",
                            style: { "margin-right": "15rpx" },
                            onClick: vue.withModifiers(($event) => $setup.gotoResult(item), ["stop"])
                          }, "查看结果", 8, ["onClick"]),
                          vue.createElementVNode("view", { class: "test" }, "再次测试")
                        ])) : vue.createCommentVNode("v-if", true)
                      ])) : (vue.openBlock(), vue.createElementBlock("view", {
                        key: 1,
                        class: "footer"
                      }, [
                        vue.createElementVNode(
                          "view",
                          { class: "price" },
                          "￥" + vue.toDisplayString(item.price),
                          1
                          /* TEXT */
                        ),
                        $setup.tabActive == 3 ? (vue.openBlock(), vue.createElementBlock("view", {
                          key: 0,
                          class: "test"
                        }, "立即支付")) : vue.createCommentVNode("v-if", true),
                        $setup.tabActive == 1 ? (vue.openBlock(), vue.createElementBlock("view", {
                          key: 1,
                          class: "test",
                          onClick: vue.withModifiers(($event) => $setup.continueTest(item), ["stop"])
                        }, "继续评测", 8, ["onClick"])) : vue.createCommentVNode("v-if", true),
                        $setup.tabActive == 2 ? (vue.openBlock(), vue.createElementBlock("view", {
                          key: 2,
                          class: "btns"
                        }, [
                          vue.createElementVNode("view", {
                            class: "test",
                            style: { "margin-right": "15rpx" },
                            onClick: vue.withModifiers(($event) => $setup.gotoResult(item), ["stop"])
                          }, "查看结果", 8, ["onClick"]),
                          vue.createElementVNode("view", { class: "test" }, "再次测试")
                        ])) : vue.createCommentVNode("v-if", true)
                      ]))
                    ])
                  ])
                ], 8, ["onClick"]);
              }),
              128
              /* KEYED_FRAGMENT */
            ))
          ])
        ])
      ])
    ]);
  }
  const PagesPsychologicalTestOrderOrder = /* @__PURE__ */ _export_sfc(_sfc_main$14, [["render", _sfc_render$13], ["__scopeId", "data-v-94d077b1"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/psychological-test/order/order.vue"]]);
  const _sfc_main$13 = {
    __name: "test-type",
    setup(__props, { expose: __expose }) {
      __expose();
      vue.useCssVars((_ctx) => ({
        "a192c592-statusBarHeight": statusBarHeight.value
      }));
      const globalStore = useGlobalDataStore();
      const statusBarHeight = vue.ref(globalStore.statusBarHeight + "px");
      const backFn = () => {
        uni.navigateBack({
          delta: 1
        });
      };
      const hasMore = vue.ref(false);
      const page = vue.ref(1);
      const payType = vue.ref(-1);
      const count = vue.ref(12);
      const types2 = vue.ref(["情感", "性格", "健康", "家庭", "人际", "职业"]);
      const searchHandler = () => {
        getExamListByType();
      };
      const reset = () => {
        getExamListByType();
      };
      const myOrderHandler = () => {
        uni.navigateTo({
          url: "/pages/psychological-test/order/order"
        });
      };
      const tabActive = vue.ref(1);
      const exams = vue.ref([]);
      onLoad((e2) => {
        let type = e2.type;
        if (type) {
          const index = types2.value.findIndex((e3) => e3 == type);
          typeActive.value = index;
        }
        getExamListByType();
      });
      onReachBottom(() => {
        if (hasMore) {
          page.value++;
          getExamListByType();
        }
      });
      const searchContent = vue.ref("");
      const input = (e2) => {
        formatAppLog("log", "at pages/psychological-test/test-type/test-type.vue:141", e2);
        searchContent.value = e2;
      };
      const total = vue.ref(0);
      const getExamListByType = async () => {
        let resp = await examListByTypes({ type: types2.value[typeActive.value], page: page.value, count: count.value, payType: payType.value, keyword: searchContent.value });
        formatAppLog("log", "at pages/psychological-test/test-type/test-type.vue:148", resp);
        total.value = resp.data.total;
        exams.value = resp.data.records;
        if (exams.value.length >= total.value) {
          hasMore.value = false;
        } else {
          hasMore.value = true;
        }
      };
      const tabsList = vue.ref([{
        id: 1,
        label: "全部"
      }, {
        id: 2,
        label: "付费"
      }, {
        id: 3,
        label: "免费"
      }]);
      const tabHandler = (item) => {
        item.id != tabActive.value ? tabActive.value = item.id : "";
        if (item.id == 1) {
          payType.value = -1;
        } else if (item.id == 2) {
          payType.value = 1;
        } else {
          payType.value = 0;
        }
        getExamListByType();
      };
      const openTestHandler = (i2) => {
        let url2 = `/pages/psychological-test/charge-test/charge-test?id=${i2.id}`;
        uni.navigateTo({
          url: url2
        });
      };
      const typeActive = vue.ref(0);
      const changeTabHandler = (item) => {
        typeActive.value != item ? typeActive.value = item : "";
        page.value = 1;
        getExamListByType();
      };
      const __returned__ = { globalStore, statusBarHeight, backFn, hasMore, page, payType, count, types: types2, searchHandler, reset, myOrderHandler, tabActive, exams, searchContent, input, total, getExamListByType, tabsList, tabHandler, openTestHandler, typeActive, changeTabHandler, onMounted: vue.onMounted, ref: vue.ref, get useGlobalDataStore() {
        return useGlobalDataStore;
      }, get onLoad() {
        return onLoad;
      }, get onReachBottom() {
        return onReachBottom;
      }, get examListByTypes() {
        return examListByTypes;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$12(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    const _component_uni_search_bar = resolveEasycom(vue.resolveDynamicComponent("uni-search-bar"), __easycom_0$6);
    return vue.openBlock(), vue.createElementBlock("view", { class: "psychological-box" }, [
      vue.createElementVNode("view", { class: "psychological-header" }, [
        vue.createElementVNode("view", { class: "header-nav-bar" }, [
          vue.createElementVNode("view", { class: "header-left" }, [
            vue.createVNode(_component_uni_icons, {
              type: "left",
              size: "24",
              onClick: $setup.backFn
            })
          ]),
          vue.createElementVNode("view", { class: "header-title" }, [
            vue.createVNode(_component_uni_search_bar, {
              class: "uni-mt-10",
              onInput: $setup.input,
              onClear: $setup.reset,
              radius: "90",
              placeholder: "请输入搜索内容",
              clearButton: "auto",
              cancelButton: "none",
              onConfirm: $setup.searchHandler
            })
          ]),
          vue.createElementVNode("view", {
            class: "header-right",
            onClick: $setup.myOrderHandler
          }, [
            vue.createElementVNode("image", {
              src: _imports_0$8,
              class: "logo-svg"
            }),
            vue.createElementVNode("text", { class: "txt" }, "我的测评")
          ])
        ])
      ]),
      vue.createElementVNode("view", { class: "tab-list-box" }, [
        vue.createElementVNode("view", { class: "tab-list-content" }, [
          (vue.openBlock(true), vue.createElementBlock(
            vue.Fragment,
            null,
            vue.renderList($setup.tabsList, (item, index) => {
              return vue.openBlock(), vue.createElementBlock("view", {
                class: vue.normalizeClass(["tab-item", $setup.tabActive == item.id ? "active" : ""]),
                key: item.id,
                onClick: ($event) => $setup.tabHandler(item)
              }, vue.toDisplayString(item.label), 11, ["onClick"]);
            }),
            128
            /* KEYED_FRAGMENT */
          ))
        ])
      ]),
      vue.createElementVNode("view", { class: "choose-topic-content" }, [
        vue.createElementVNode("view", { class: "tag-content" }, [
          vue.createElementVNode("view", { class: "tag-left" }, [
            vue.createElementVNode("scroll-view", {
              "scroll-y": "true",
              class: "scroll-content",
              "show-scrollbar": false
            }, [
              (vue.openBlock(true), vue.createElementBlock(
                vue.Fragment,
                null,
                vue.renderList($setup.types, (item, index) => {
                  return vue.openBlock(), vue.createElementBlock("view", {
                    class: vue.normalizeClass(["tag-item", $setup.typeActive == index ? "active" : ""]),
                    key: index,
                    onClick: ($event) => $setup.changeTabHandler(index)
                  }, vue.toDisplayString(item), 11, ["onClick"]);
                }),
                128
                /* KEYED_FRAGMENT */
              ))
            ])
          ]),
          vue.createElementVNode("view", { class: "tag-right" }, [
            vue.createElementVNode("scroll-view", {
              "scroll-y": "true",
              class: "scroll-content",
              "show-scrollbar": false
            }, [
              vue.createElementVNode("view", { class: "tag-right-content" }, [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($setup.exams, (item, index) => {
                    return vue.openBlock(), vue.createElementBlock("view", {
                      class: "content-item",
                      key: index,
                      onClick: ($event) => $setup.openTestHandler(item)
                    }, [
                      vue.createElementVNode("view", { class: "content-item-content" }, [
                        vue.createElementVNode("view", { class: "content-txt" }, [
                          vue.createElementVNode(
                            "view",
                            { class: "title" },
                            vue.toDisplayString(item.title),
                            1
                            /* TEXT */
                          ),
                          vue.createElementVNode(
                            "view",
                            { class: "remark" },
                            vue.toDisplayString(item.oneWord),
                            1
                            /* TEXT */
                          ),
                          vue.createElementVNode("view", { class: "price-box" }, [
                            item.payType == 1 ? (vue.openBlock(), vue.createElementBlock("view", { key: 0 }, [
                              vue.createElementVNode(
                                "text",
                                { class: "price" },
                                "￥" + vue.toDisplayString(item.discountPrice),
                                1
                                /* TEXT */
                              ),
                              vue.createElementVNode(
                                "text",
                                { class: "under-price" },
                                "￥" + vue.toDisplayString(item.price),
                                1
                                /* TEXT */
                              )
                            ])) : (vue.openBlock(), vue.createElementBlock("view", { key: 1 }, [
                              vue.createElementVNode("text", { class: "price" }, "免费")
                            ])),
                            vue.createElementVNode("view", { class: "use-test" }, [
                              vue.createElementVNode(
                                "text",
                                { class: "use-num" },
                                vue.toDisplayString(item.examNum),
                                1
                                /* TEXT */
                              ),
                              vue.createTextVNode("人已测 ")
                            ])
                          ])
                        ]),
                        vue.createElementVNode("view", { class: "img-box" }, [
                          vue.createElementVNode("image", {
                            src: item.icon ? item.icon : "@/static/consult/user.png",
                            class: "img"
                          }, null, 8, ["src"])
                        ])
                      ])
                    ], 8, ["onClick"]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                ))
              ])
            ])
          ])
        ])
      ])
    ]);
  }
  const PagesPsychologicalTestTestTypeTestType = /* @__PURE__ */ _export_sfc(_sfc_main$13, [["render", _sfc_render$12], ["__scopeId", "data-v-a192c592"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/psychological-test/test-type/test-type.vue"]]);
  const _imports_1$6 = "/static/psychological-test/q-logo.svg";
  const _sfc_main$12 = {
    __name: "start-test",
    setup(__props, { expose: __expose }) {
      __expose();
      const backFn = () => {
        uni.navigateBack();
      };
      const title = vue.ref("");
      const id2 = vue.ref(0);
      const examOptionList = vue.ref([]);
      const examIndex = vue.ref(0);
      const examId = vue.ref(0);
      const userAnswer = vue.ref([]);
      const recordId = vue.ref(0);
      onLoad((e2) => {
        title.value = e2.title;
        examId.value = e2.examId;
        if (!examId.value) {
          id2.value = e2.id;
          createExamRecord();
          getOptionList();
        } else {
          recordId.value = e2.id;
          id2.value = e2.examId;
          answerActive.value = -1;
          getExamOptionRecordDetail();
          examIndex.value = parseInt(e2.currentIndex) + 1;
        }
      });
      const createExamRecord = async () => {
        let resp = await saveExamRecord({
          examId: id2.value
        });
        formatAppLog("log", "at pages/psychological-test/start-test/start-test.vue:113", resp);
        recordId.value = resp.data;
      };
      const nextOption = () => {
        if (answerActive.value === -1 || answerActive.value === void 0) {
          uni.showToast({
            title: "请选择选项",
            icon: "error"
          });
          return;
        }
        formatAppLog("log", "at pages/psychological-test/start-test/start-test.vue:140", userAnswer.value);
        const existIndex = userAnswer.value.findIndex(
          (item) => parseInt(item.optionIndex) === parseInt(examIndex.value)
        );
        formatAppLog("log", "at pages/psychological-test/start-test/start-test.vue:144", existIndex);
        if (existIndex !== -1) {
          userAnswer.value[existIndex].result = answerActive.value;
        } else {
          userAnswer.value.push({
            optionIndex: examIndex.value,
            result: answerActive.value
          });
        }
        updateAnswer();
        examIndex.value = examIndex.value + 1;
        formatAppLog("log", "at pages/psychological-test/start-test/start-test.vue:156", examIndex.value);
        formatAppLog("log", "at pages/psychological-test/start-test/start-test.vue:157", userAnswer.value);
        if (userAnswer.value[examIndex.value]) {
          let answer = userAnswer.value[examIndex.value];
          answerActive.value = answer.result;
        } else {
          answerActive.value = -1;
        }
      };
      const updateAnswer = async () => {
        await updateUserAnswer({
          id: recordId.value,
          options: JSON.stringify(userAnswer.value),
          currentIndex: examIndex.value
        });
      };
      const getResult = async () => {
        if (answerActive.value === -1 || answerActive.value === void 0) {
          uni.showToast({
            title: "请先选择选项",
            icon: "error"
          });
          return;
        }
        const existIndex = userAnswer.value.findIndex(
          (item) => item.optionIndex === examIndex.value
        );
        if (existIndex !== -1) {
          userAnswer.value[existIndex].result = answerActive.value;
        } else {
          userAnswer.value.push({
            optionIndex: examIndex.value,
            result: answerActive.value
          });
        }
        uni.showLoading({
          title: "正在获取结果，请稍后..."
        });
        updateAnswer();
        getExamResult();
      };
      const getExamResult = async () => {
        let resp = await examResult({ id: recordId.value });
        formatAppLog("log", "at pages/psychological-test/start-test/start-test.vue:203", resp);
        uni.hideLoading();
        uni.navigateTo({
          url: `/pages/psychological-test/test-result/test-result?title=${title.value}&examId=${id2.value}&result=${resp.data.examResult}`
        });
      };
      const prevOption = () => {
        examIndex.value = examIndex.value - 1;
        let answer = userAnswer.value[examIndex.value];
        answerActive.value = answer.result;
      };
      const getExamOptionRecordDetail = async () => {
        let resp = await recordDetail({ id: recordId.value });
        formatAppLog("log", "at pages/psychological-test/start-test/start-test.vue:218", resp);
        examOptionList.value = resp.data.options;
        if (resp.data.result) {
          let result = JSON.parse(resp.data.result);
          userAnswer.value = result;
        }
      };
      const getOptionList = async () => {
        let resp = await getExamOptions({
          id: id2.value
        });
        formatAppLog("log", "at pages/psychological-test/start-test/start-test.vue:230", resp);
        examOptionList.value = resp.data;
      };
      const width = vue.ref(0);
      const countProcessHandler = () => {
        width.value = 436 / 13 * 2;
      };
      vue.onMounted(() => {
        countProcessHandler();
      });
      const progressPercent = vue.computed(() => {
        return Math.round((examIndex.value + 1) / examOptionList.value.length * 100);
      });
      vue.watch(progressPercent, (newVal, oldVal) => {
        formatAppLog("log", "at pages/psychological-test/start-test/start-test.vue:250", `进度从 ${oldVal}% → ${newVal}%`);
      });
      const answerActive = vue.ref(-1);
      const answerHandler = (i2) => {
        answerActive.value != i2 ? answerActive.value = i2 : "";
      };
      const __returned__ = { backFn, title, id: id2, examOptionList, examIndex, examId, userAnswer, recordId, createExamRecord, nextOption, updateAnswer, getResult, getExamResult, prevOption, getExamOptionRecordDetail, getOptionList, width, countProcessHandler, progressPercent, answerActive, answerHandler, computed: vue.computed, onMounted: vue.onMounted, ref: vue.ref, watch: vue.watch, get onLoad() {
        return onLoad;
      }, get getExamOptions() {
        return getExamOptions;
      }, get saveExamRecord() {
        return saveExamRecord;
      }, get updateUserAnswer() {
        return updateUserAnswer;
      }, get examResult() {
        return examResult;
      }, get recordDetail() {
        return recordDetail;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$11(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    const _component_uni_nav_bar = resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"), __easycom_1$4);
    const _component_u_line_progress = resolveEasycom(vue.resolveDynamicComponent("u-line-progress"), __easycom_2$6);
    return vue.openBlock(), vue.createElementBlock("view", { class: "start-test-box" }, [
      vue.createVNode(_component_uni_nav_bar, {
        backgroundColor: "#F4F6F8",
        border: false,
        title: $setup.title,
        class: "header-bar",
        statusBar: true,
        fixed: ""
      }, {
        left: vue.withCtx(() => [
          vue.createVNode(_component_uni_icons, {
            type: "left",
            size: "24",
            onClick: $setup.backFn
          })
        ]),
        right: vue.withCtx(() => [
          vue.createElementVNode("view", { class: "right" }, [
            vue.createElementVNode("image", {
              src: _imports_0$o,
              class: "img"
            })
          ])
        ]),
        _: 1
        /* STABLE */
      }, 8, ["title"]),
      vue.createElementVNode("view", { class: "content-box" }, [
        vue.createElementVNode("view", { class: "process-box" }, [
          vue.createElementVNode("view", { class: "process-content" }, [
            vue.createElementVNode("view", { class: "process-txt" }, "评测进度"),
            vue.createVNode(_component_u_line_progress, {
              "active-color": "#38CC98",
              "inactive-color": "#ffffff",
              percent: $setup.progressPercent,
              "show-percent": false
            }, null, 8, ["percent"]),
            vue.createElementVNode("view", { class: "process-num" }, [
              vue.createElementVNode(
                "text",
                { class: "use-num" },
                vue.toDisplayString($setup.examIndex + 1),
                1
                /* TEXT */
              ),
              vue.createTextVNode(
                "/" + vue.toDisplayString($setup.examOptionList.length),
                1
                /* TEXT */
              )
            ])
          ])
        ]),
        vue.createElementVNode("view", { class: "question-box" }, [
          vue.createElementVNode("view", { class: "q-logo" }, [
            vue.createElementVNode("image", {
              src: _imports_1$6,
              class: "img"
            })
          ]),
          vue.createElementVNode("view", { class: "q-content" }, [
            vue.createElementVNode(
              "view",
              { class: "content" },
              vue.toDisplayString($setup.examOptionList[$setup.examIndex].question),
              1
              /* TEXT */
            )
          ])
        ]),
        vue.createElementVNode("view", { class: "answer-box" }, [
          vue.createElementVNode("view", { class: "answer-content" }, [
            vue.createElementVNode("view", { class: "answer-list" }, [
              (vue.openBlock(true), vue.createElementBlock(
                vue.Fragment,
                null,
                vue.renderList(JSON.parse($setup.examOptionList[$setup.examIndex].options), (item, index) => {
                  return vue.openBlock(), vue.createElementBlock("view", {
                    class: vue.normalizeClass(["answer-item", $setup.answerActive == index ? "active" : ""]),
                    key: index,
                    onClick: ($event) => $setup.answerHandler(index)
                  }, [
                    vue.createElementVNode("view", { class: "dot" }),
                    vue.createElementVNode(
                      "view",
                      { class: "txt" },
                      vue.toDisplayString(item.text),
                      1
                      /* TEXT */
                    )
                  ], 10, ["onClick"]);
                }),
                128
                /* KEYED_FRAGMENT */
              ))
            ])
          ])
        ]),
        vue.createElementVNode("view", { class: "pre-btn-box" }, [
          $setup.examIndex > 0 ? (vue.openBlock(), vue.createElementBlock("view", {
            key: 0,
            class: "pre",
            onClick: $setup.prevOption
          }, "上一题")) : vue.createCommentVNode("v-if", true),
          $setup.examIndex < $setup.examOptionList.length - 1 ? (vue.openBlock(), vue.createElementBlock("view", {
            key: 1,
            class: "pre",
            onClick: $setup.nextOption
          }, "下一题")) : vue.createCommentVNode("v-if", true),
          $setup.examIndex == $setup.examOptionList.length - 1 ? (vue.openBlock(), vue.createElementBlock("view", {
            key: 2,
            class: "pre",
            onClick: $setup.getResult
          }, "查看结果")) : vue.createCommentVNode("v-if", true)
        ])
      ])
    ]);
  }
  const PagesPsychologicalTestStartTestStartTest = /* @__PURE__ */ _export_sfc(_sfc_main$12, [["render", _sfc_render$11], ["__scopeId", "data-v-6da95672"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/psychological-test/start-test/start-test.vue"]]);
  const _sfc_main$11 = {
    __name: "comment",
    setup(__props, { expose: __expose }) {
      __expose();
      const backFn = () => {
        uni.navigateBack({
          delta: 1
        });
      };
      const content = vue.ref("");
      const examId = vue.ref(0);
      const id2 = vue.ref(0);
      const star = vue.ref(0);
      onLoad((e2) => {
        examId.value = e2.examId;
        id2.value = e2.id;
      });
      const starChange = (e2) => {
        formatAppLog("log", "at pages/psychological-test/comment/comment.vue:52", e2);
        star.value = e2.value;
      };
      const publishComment = async () => {
        if (star.value == 0) {
          uni.showToast({
            title: "请选择星级",
            icon: "error"
          });
          return;
        }
        await publishExamComment({ type: 3, content: content.value, articleId: examId.value, star: star.value, referenceId: id2.value });
        uni.showToast({
          title: "发布成功",
          icon: "success"
        });
        uni.navigateBack();
      };
      const __returned__ = { backFn, content, examId, id: id2, star, starChange, publishComment, onMounted: vue.onMounted, ref: vue.ref, get onLoad() {
        return onLoad;
      }, get publishExamComment() {
        return publishExamComment;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$10(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    const _component_uni_nav_bar = resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"), __easycom_1$4);
    const _component_uni_rate = resolveEasycom(vue.resolveDynamicComponent("uni-rate"), __easycom_2$9);
    return vue.openBlock(), vue.createElementBlock("view", { class: "write-mailbox-box" }, [
      vue.createVNode(_component_uni_nav_bar, {
        backgroundColor: "#F4F6F8",
        border: false,
        title: "评论",
        class: "header-bar",
        statusBar: true,
        fixed: ""
      }, {
        left: vue.withCtx(() => [
          vue.createVNode(_component_uni_icons, {
            type: "left",
            size: "24",
            onClick: $setup.backFn
          })
        ]),
        _: 1
        /* STABLE */
      }),
      vue.createElementVNode("view", { class: "question-content-box" }, [
        vue.createElementVNode("view", { class: "question-content" }, [
          vue.createElementVNode("view", { class: "content" }, [
            vue.withDirectives(vue.createElementVNode(
              "textarea",
              {
                class: "uni-textarea",
                placeholder: "写下您的真实评价有机会获得红包哦~(1000字以内)",
                "placeholder-class": "placeholder-content",
                maxlength: "1000",
                "onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => $setup.content = $event)
              },
              null,
              512
              /* NEED_PATCH */
            ), [
              [vue.vModelText, $setup.content]
            ]),
            vue.createElementVNode(
              "view",
              { class: "char-count" },
              vue.toDisplayString($setup.content.length) + "/1000",
              1
              /* TEXT */
            )
          ])
        ]),
        vue.createElementVNode("view", { class: "upload-image" }, [
          vue.createElementVNode("view", { class: "upload-image-content" }, [
            vue.createElementVNode("text", { class: "txt" }, "满意度打分"),
            vue.createElementVNode("view", null, [
              vue.createVNode(_component_uni_rate, {
                value: $setup.star,
                onChange: $setup.starChange,
                activeColor: "#38CC98",
                size: "16"
              }, null, 8, ["value"])
            ])
          ])
        ])
      ]),
      vue.createElementVNode("view", { class: "send-content-box" }, [
        vue.createElementVNode("view", {
          class: "send-content-btn",
          onClick: $setup.publishComment
        }, "发布")
      ])
    ]);
  }
  const PagesPsychologicalTestCommentComment = /* @__PURE__ */ _export_sfc(_sfc_main$11, [["render", _sfc_render$10], ["__scopeId", "data-v-90c4927a"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/psychological-test/comment/comment.vue"]]);
  const _sfc_main$10 = {
    __name: "contact-consult",
    setup(__props, { expose: __expose }) {
      __expose();
      const backFn = () => {
        uni.navigateBack({
          delta: 1
        });
      };
      const __returned__ = { backFn };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$$(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    const _component_uni_nav_bar = resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"), __easycom_1$4);
    return vue.openBlock(), vue.createElementBlock("view", { class: "contact-consult-box" }, [
      vue.createVNode(_component_uni_nav_bar, {
        backgroundColor: "#F4F6F8",
        border: false,
        title: "联系咨询师",
        class: "header-bar",
        statusBar: true,
        fixed: ""
      }, {
        left: vue.withCtx(() => [
          vue.createVNode(_component_uni_icons, {
            type: "left",
            size: "24",
            onClick: $setup.backFn
          })
        ]),
        _: 1
        /* STABLE */
      }),
      vue.createElementVNode("view", { class: "contact-consult-content" }, [
        vue.createElementVNode("view", { class: "contact-consult-list" }, [
          (vue.openBlock(), vue.createElementBlock(
            vue.Fragment,
            null,
            vue.renderList(20, (i2) => {
              return vue.createElementVNode("view", {
                class: "contact-consult-item",
                key: i2
              }, [
                vue.createElementVNode("view", { class: "item-content" }, [
                  vue.createElementVNode("image", {
                    src: _imports_0$m,
                    class: "img"
                  }),
                  vue.createElementVNode("view", { class: "content" }, [
                    vue.createElementVNode("view", { class: "name" }, "张三"),
                    vue.createElementVNode("view", { class: "desc" }, "北京 | 二级心理咨询师")
                  ])
                ])
              ]);
            }),
            64
            /* STABLE_FRAGMENT */
          ))
        ])
      ])
    ]);
  }
  const PagesPsychologicalTestContactConsultContactConsult = /* @__PURE__ */ _export_sfc(_sfc_main$10, [["render", _sfc_render$$], ["__scopeId", "data-v-8508c3e0"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/psychological-test/contact-consult/contact-consult.vue"]]);
  const _imports_0$7 = "/static/psychological-test/comment.svg";
  const _imports_1$5 = "/static/psychological-test/save-share.svg";
  const _imports_2$2 = "/static/psychological-test/send-consult.svg";
  const _sfc_main$$ = {
    __name: "test-result",
    setup(__props, { expose: __expose }) {
      __expose();
      const backFn = () => {
        uni.navigateBack();
      };
      const examId = vue.ref(0);
      const result = vue.ref("");
      const icon = vue.ref("");
      const id2 = vue.ref(0);
      const status = vue.ref(0);
      onLoad((e2) => {
        title.value = e2.title;
        examId.value = e2.examId;
        result.value = e2.result;
        icon.value = e2.icon;
        id2.value = e2.id;
      });
      onShow(() => {
        formatAppLog("log", "at pages/psychological-test/test-result/test-result.vue:101", id2.value);
        getCommentStatus();
      });
      const getCommentStatus = async () => {
        let resp = await commentSatus({ id: id2.value, type: 3 });
        status.value = resp.data;
      };
      const title = vue.ref("");
      const openHandler = (url2) => {
        uni.navigateTo({
          url: url2
        });
      };
      const share2 = vue.ref(null);
      const shareHandler = () => {
        share2.value.open();
      };
      const channelList = vue.ref([{
        type: "wechat",
        img: "/static/share/wechat.svg",
        backgroundColor: "#00B578",
        text: "微信",
        imgWidth: "57rpx",
        imgHeight: "57rpx",
        fn: () => new Function()
      }, {
        type: "friend",
        img: "/static/share/friend.svg",
        backgroundColor: "#41B7FF",
        text: "朋友圈",
        imgWidth: "57rpx",
        imgHeight: "57rpx",
        fn: () => new Function()
      }]);
      const closeShare = () => {
        share2.value.close();
      };
      const __returned__ = { backFn, examId, result, icon, id: id2, status, getCommentStatus, title, openHandler, share: share2, shareHandler, channelList, closeShare, onMounted: vue.onMounted, ref: vue.ref, get onLoad() {
        return onLoad;
      }, get onShow() {
        return onShow;
      }, get commentSatus() {
        return commentSatus;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$_(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    const _component_uni_nav_bar = resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"), __easycom_1$4);
    const _component_uni_popup = resolveEasycom(vue.resolveDynamicComponent("uni-popup"), __easycom_3$5);
    return vue.openBlock(), vue.createElementBlock("view", { class: "test-result-box" }, [
      vue.createVNode(_component_uni_nav_bar, {
        backgroundColor: "#F4F6F8",
        border: false,
        title: "测试结果",
        class: "header-bar",
        statusBar: true,
        fixed: ""
      }, {
        left: vue.withCtx(() => [
          vue.createVNode(_component_uni_icons, {
            type: "left",
            size: "24",
            onClick: $setup.backFn
          })
        ]),
        _: 1
        /* STABLE */
      }),
      vue.createElementVNode("view", { class: "test-result-content-box" }, [
        vue.createElementVNode("view", { class: "test-result-content" }, [
          vue.createElementVNode("view", { class: "content" }, [
            vue.createElementVNode("view", { class: "banner" }, [
              vue.createElementVNode("image", {
                src: $setup.icon ? $setup.icon : "@/static/forum/bg.png",
                mode: "aspectFill",
                class: "img"
              }, null, 8, ["src"])
            ]),
            vue.createElementVNode("view", { class: "result-analysis-box" }, [
              vue.createElementVNode("view", { class: "tip" }, "结果分析"),
              vue.createElementVNode(
                "view",
                { class: "title" },
                vue.toDisplayString($setup.title),
                1
                /* TEXT */
              ),
              vue.createElementVNode(
                "view",
                { class: "result" },
                vue.toDisplayString($setup.result),
                1
                /* TEXT */
              )
            ])
          ])
        ])
      ]),
      vue.createElementVNode("view", { class: "footer-box" }, [
        vue.createElementVNode("view", { class: "footer-content" }, [
          vue.createElementVNode("view", {
            onClick: _cache[0] || (_cache[0] = ($event) => $setup.openHandler(`/pages/psychological-test/comment/comment?examId=${$setup.examId}&id=${$setup.id}`))
          }, [
            vue.createElementVNode("image", { src: _imports_0$7 }),
            vue.createElementVNode(
              "text",
              null,
              vue.toDisplayString($setup.status == 0 ? "去评价" : "已评价"),
              1
              /* TEXT */
            )
          ]),
          vue.createElementVNode("view", { onClick: $setup.shareHandler }, [
            vue.createElementVNode("image", { src: _imports_1$5 }),
            vue.createElementVNode("text", null, "保存分享")
          ]),
          vue.createElementVNode("view", {
            onClick: _cache[1] || (_cache[1] = ($event) => $setup.openHandler("/pages/psychological-test/contact-consult/contact-consult"))
          }, [
            vue.createElementVNode("image", { src: _imports_2$2 }),
            vue.createElementVNode("text", null, "发送咨询师 ")
          ]),
          vue.createElementVNode("view", { class: "new-consult-btn" }, "新人0元倾诉")
        ])
      ]),
      vue.createVNode(
        _component_uni_popup,
        {
          ref: "share",
          "background-color": "#fff",
          "is-mask-click": false,
          borderRadius: "24rpx 24rpx 0rpx 0rpx",
          type: "bottom"
        },
        {
          default: vue.withCtx(() => [
            vue.createElementVNode("view", { class: "share-popup-box" }, [
              vue.createElementVNode("view", { class: "share-content" }, [
                vue.createElementVNode("view", { class: "title" }, "分享到"),
                vue.createElementVNode("view", { class: "share-list" }, [
                  (vue.openBlock(true), vue.createElementBlock(
                    vue.Fragment,
                    null,
                    vue.renderList($setup.channelList, (item, index) => {
                      return vue.openBlock(), vue.createElementBlock("view", {
                        class: "share-item",
                        key: index,
                        onClick: item.fn
                      }, [
                        vue.createElementVNode(
                          "view",
                          {
                            class: "share-item-img",
                            style: vue.normalizeStyle({ backgroundColor: item.backgroundColor })
                          },
                          [
                            vue.createElementVNode("image", {
                              src: item.img,
                              class: "img",
                              style: vue.normalizeStyle({ width: item.imgWidth, height: item.imgHeight }),
                              mode: "widthFix"
                            }, null, 12, ["src"])
                          ],
                          4
                          /* STYLE */
                        ),
                        vue.createElementVNode(
                          "view",
                          { class: "txt" },
                          vue.toDisplayString(item.text),
                          1
                          /* TEXT */
                        )
                      ], 8, ["onClick"]);
                    }),
                    128
                    /* KEYED_FRAGMENT */
                  ))
                ]),
                vue.createElementVNode("view", {
                  class: "cancel",
                  onClick: $setup.closeShare
                }, " 取消 ")
              ])
            ])
          ]),
          _: 1
          /* STABLE */
        },
        512
        /* NEED_PATCH */
      )
    ]);
  }
  const PagesPsychologicalTestTestResultTestResult = /* @__PURE__ */ _export_sfc(_sfc_main$$, [["render", _sfc_render$_], ["__scopeId", "data-v-fea36aa9"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/psychological-test/test-result/test-result.vue"]]);
  const _sfc_main$_ = {
    __name: "charge-test",
    setup(__props, { expose: __expose }) {
      __expose();
      const id2 = vue.ref(0);
      const rule = vue.ref("");
      const recommendList = vue.ref([]);
      const examDetail = vue.ref({});
      const commentInfo = vue.ref({ rating: 1, ratio: 80, num: 100 });
      const commentList = vue.ref([]);
      onLoad((e2) => {
        id2.value = e2.id;
        getDetail();
        getRule();
        getRecommendList();
        getCommentInfo2();
        getCommentList2();
      });
      const getCommentInfo2 = async () => {
        let resp = await articleComment({ id: id2.value });
        commentInfo.value = resp.data;
      };
      const page = vue.ref(1);
      const size = vue.ref(20);
      const hasMore = vue.ref(true);
      const getCommentList2 = async () => {
        let resp = await articleCommentList({ id: id2.value, page: page.value, count: size.value });
        formatAppLog("log", "at pages/psychological-test/charge-test/charge-test.vue:190", resp);
        commentList.value = resp.data.records;
        if (resp.total <= commentList.value.length) {
          hasMore.value = false;
        } else {
          hasMore.value = true;
        }
      };
      const getRecommendList = async () => {
        let resp = await dailyRecommend({ size: 2 });
        recommendList.value = resp.data;
      };
      const gotoChargeList = () => {
        uni.navigateTo({
          url: "/pages/psychological-test/test-type/test-type"
        });
      };
      const reachBottom = () => {
        formatAppLog("log", "at pages/psychological-test/charge-test/charge-test.vue:212", "reach bottom");
        if (hasMore.value) {
          page.value++;
          getCommentList2();
        }
      };
      const getRule = async () => {
        let resp = await getExamRule();
        rule.value = resp.data;
      };
      const getDetail = async () => {
        let resp = await getExamDetail({
          id: id2.value
        });
        formatAppLog("log", "at pages/psychological-test/charge-test/charge-test.vue:228", resp);
        examDetail.value = resp.data;
      };
      const backFn = () => {
        uni.navigateBack({
          delta: 1
        });
      };
      const startTestHandler = () => {
        if (examDetail.value.payType == 0) {
          uni.navigateTo({
            url: "/pages/psychological-test/start-test/start-test?title=" + examDetail.value.title + "&id=" + examDetail.value.id
          });
        }
      };
      const __returned__ = { id: id2, rule, recommendList, examDetail, commentInfo, commentList, getCommentInfo: getCommentInfo2, page, size, hasMore, getCommentList: getCommentList2, getRecommendList, gotoChargeList, reachBottom, getRule, getDetail, backFn, startTestHandler, ref: vue.ref, get onLoad() {
        return onLoad;
      }, get getExamDetail() {
        return getExamDetail;
      }, get getExamRule() {
        return getExamRule;
      }, get dailyRecommend() {
        return dailyRecommend;
      }, get articleComment() {
        return articleComment;
      }, get articleCommentList() {
        return articleCommentList;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$Z(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    const _component_uni_nav_bar = resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"), __easycom_1$4);
    const _component_uni_rate = resolveEasycom(vue.resolveDynamicComponent("uni-rate"), __easycom_2$9);
    const _component_uni_dateformat = resolveEasycom(vue.resolveDynamicComponent("uni-dateformat"), __easycom_3$2);
    return vue.openBlock(), vue.createElementBlock("view", { class: "charge-test-box" }, [
      vue.createElementVNode(
        "scroll-view",
        {
          "scroll-y": "true",
          class: "scroll-content",
          "show-scrollbar": false,
          onScrolltolower: $setup.reachBottom
        },
        [
          vue.createVNode(_component_uni_nav_bar, {
            backgroundColor: "#9DDDC7",
            border: false,
            title: "",
            class: "header-bar",
            statusBar: true,
            fixed: ""
          }, {
            left: vue.withCtx(() => [
              vue.createVNode(_component_uni_icons, {
                type: "left",
                size: "24",
                onClick: $setup.backFn
              })
            ]),
            right: vue.withCtx(() => [
              vue.createElementVNode("view", { class: "right" }, [
                vue.createElementVNode("image", {
                  src: _imports_0$o,
                  class: "img",
                  style: { "width": "40rpx", "height": "40rpx" }
                })
              ])
            ]),
            _: 1
            /* STABLE */
          }),
          vue.createElementVNode("view", { class: "charge-test-content-box" }, [
            vue.createElementVNode("view", { class: "content-box" }, [
              vue.createElementVNode("view", { class: "content-banner" }, [
                vue.createElementVNode("image", {
                  src: $setup.examDetail.icon == null ? "@/static/forum/bg.png" : $setup.examDetail.icon,
                  mode: "aspectFill",
                  class: "img"
                }, null, 8, ["src"]),
                vue.createElementVNode("view", { class: "banner-text" }, [
                  vue.createElementVNode(
                    "text",
                    { style: { "color": "white", "font-size": "42rpx" } },
                    vue.toDisplayString($setup.examDetail.title),
                    1
                    /* TEXT */
                  ),
                  vue.createElementVNode(
                    "text",
                    { style: { "color": "white", "font-size": "28rpx" } },
                    vue.toDisplayString($setup.examDetail.oneWord),
                    1
                    /* TEXT */
                  )
                ])
              ]),
              vue.createElementVNode("view", { class: "charge-test-options" }, [
                vue.createElementVNode("view", { class: "option-item" }, [
                  vue.createElementVNode(
                    "text",
                    { class: "weight" },
                    vue.toDisplayString($setup.examDetail.examNum),
                    1
                    /* TEXT */
                  ),
                  vue.createTextVNode("人已测 ")
                ]),
                vue.createElementVNode("view", { class: "option-item" }, [
                  vue.createElementVNode(
                    "text",
                    { class: "weight" },
                    vue.toDisplayString($setup.examDetail.examOptionNum) + "道",
                    1
                    /* TEXT */
                  ),
                  vue.createTextVNode("精选问题 ")
                ]),
                vue.createElementVNode("view", { class: "option-item" }, [
                  vue.createElementVNode("text", { class: "weight" }, "16页"),
                  vue.createTextVNode("专业报告 ")
                ])
              ]),
              vue.createElementVNode(
                "view",
                { class: "content-info" },
                vue.toDisplayString($setup.examDetail.description),
                1
                /* TEXT */
              )
            ]),
            vue.createElementVNode("view", { class: "test-notice" }, [
              vue.createElementVNode("view", { class: "test-notice-content" }, [
                vue.createElementVNode("view", { class: "title" }, "评测须知"),
                vue.createElementVNode("view", { class: "info" }, [
                  vue.createElementVNode("rich-text", { nodes: $setup.rule }, null, 8, ["nodes"])
                ])
              ])
            ]),
            vue.createElementVNode("view", { class: "recommend-content-box" }, [
              vue.createElementVNode("view", { class: "recommend-content" }, [
                vue.createElementVNode("view", { class: "recommend-content-header" }, [
                  vue.createElementVNode("view", { class: "title" }, " 相关推荐 "),
                  vue.createElementVNode("view", {
                    class: "label",
                    onClick: $setup.gotoChargeList
                  }, [
                    vue.createTextVNode("更多"),
                    vue.createVNode(_component_uni_icons, {
                      type: "right",
                      size: "12"
                    })
                  ])
                ]),
                vue.createElementVNode("view", { class: "content-list" }, [
                  (vue.openBlock(true), vue.createElementBlock(
                    vue.Fragment,
                    null,
                    vue.renderList($setup.recommendList, (item, index) => {
                      return vue.openBlock(), vue.createElementBlock("view", {
                        class: "content-item",
                        key: index
                      }, [
                        vue.createElementVNode("view", { class: "content-item-content" }, [
                          vue.createElementVNode("view", null, [
                            vue.createElementVNode(
                              "view",
                              { class: "title" },
                              vue.toDisplayString(item.title),
                              1
                              /* TEXT */
                            ),
                            vue.createElementVNode(
                              "view",
                              { class: "remark" },
                              vue.toDisplayString(item.oneWord),
                              1
                              /* TEXT */
                            ),
                            item.payType == 1 ? (vue.openBlock(), vue.createElementBlock("view", {
                              key: 0,
                              class: "price-box"
                            }, [
                              vue.createElementVNode(
                                "text",
                                { class: "price" },
                                "￥" + vue.toDisplayString(item.discountPrice),
                                1
                                /* TEXT */
                              ),
                              vue.createElementVNode(
                                "text",
                                { class: "under-price" },
                                "￥" + vue.toDisplayString(item.price),
                                1
                                /* TEXT */
                              )
                            ])) : vue.createCommentVNode("v-if", true),
                            vue.createElementVNode("view", { class: "test-handler" }, [
                              vue.createElementVNode("view", { class: "handler-btn" }, "去测试"),
                              vue.createElementVNode("view", { class: "use-test" }, [
                                vue.createElementVNode(
                                  "text",
                                  { class: "num" },
                                  vue.toDisplayString(item.examNum),
                                  1
                                  /* TEXT */
                                ),
                                vue.createTextVNode("人已测")
                              ])
                            ])
                          ]),
                          vue.createElementVNode("view", { class: "img-box" }, [
                            vue.createElementVNode("image", {
                              src: item.icon ? item.icon : "@/static/consult/user.png",
                              mode: "aspectFill",
                              class: "img"
                            }, null, 8, ["src"])
                          ])
                        ])
                      ]);
                    }),
                    128
                    /* KEYED_FRAGMENT */
                  ))
                ])
              ])
            ]),
            vue.createElementVNode("view", { class: "user-comment-content-box" }, [
              vue.createElementVNode("view", { class: "user-comment-content" }, [
                vue.createElementVNode("view", { class: "user-comment-content-header" }, [
                  vue.createElementVNode("view", { class: "title" }, " 用户评价 ")
                ]),
                vue.createElementVNode("view", { class: "comment-content-list" }, [
                  vue.createElementVNode("view", { class: "comment-list-header" }, [
                    vue.createElementVNode("view", { class: "left" }, [
                      vue.createElementVNode("view", { class: "star" }, [
                        vue.createElementVNode(
                          "text",
                          null,
                          vue.toDisplayString($setup.commentInfo.rating),
                          1
                          /* TEXT */
                        ),
                        vue.createVNode(_component_uni_rate, {
                          readonly: true,
                          value: $setup.commentInfo.rating,
                          size: "12"
                        }, null, 8, ["value"])
                      ]),
                      vue.createElementVNode("view", { class: "txt" }, "评分")
                    ]),
                    vue.createElementVNode("view", { class: "right" }, [
                      vue.createElementVNode("view", { class: "comment-num" }, [
                        vue.createElementVNode(
                          "view",
                          { class: "num" },
                          vue.toDisplayString($setup.commentInfo.num > 2e3 ? "2000+" : $setup.commentInfo.num),
                          1
                          /* TEXT */
                        ),
                        vue.createElementVNode("view", { class: "txt" }, "真实评价")
                      ]),
                      vue.createElementVNode("view", { class: "percent" }, [
                        vue.createElementVNode(
                          "view",
                          { class: "num" },
                          vue.toDisplayString($setup.commentInfo.ratio) + "%",
                          1
                          /* TEXT */
                        ),
                        vue.createElementVNode("view", { class: "txt" }, "满意度")
                      ])
                    ])
                  ]),
                  $setup.commentList.length > 0 ? (vue.openBlock(true), vue.createElementBlock(
                    vue.Fragment,
                    { key: 0 },
                    vue.renderList($setup.commentList, (item, index) => {
                      return vue.openBlock(), vue.createElementBlock("view", {
                        class: "comment-content-item",
                        key: index
                      }, [
                        vue.createElementVNode("view", { class: "content-item-header" }, [
                          vue.createElementVNode("view", { class: "left" }, [
                            vue.createElementVNode("view", null, [
                              vue.createElementVNode("image", {
                                src: item.avatar ? item.avatar : "@/static/my/profile.png",
                                mode: "aspectFill",
                                class: "img"
                              }, null, 8, ["src"])
                            ]),
                            vue.createElementVNode(
                              "view",
                              null,
                              vue.toDisplayString(item.real_name),
                              1
                              /* TEXT */
                            )
                          ]),
                          vue.createElementVNode("view", { class: "right" }, [
                            vue.createVNode(_component_uni_dateformat, {
                              format: "yyyy-MM-dd hh:mm:ss",
                              date: item.create_time
                            }, null, 8, ["date"])
                          ])
                        ]),
                        vue.createElementVNode(
                          "view",
                          { class: "content" },
                          vue.toDisplayString(item.content),
                          1
                          /* TEXT */
                        )
                      ]);
                    }),
                    128
                    /* KEYED_FRAGMENT */
                  )) : (vue.openBlock(), vue.createElementBlock("view", {
                    key: 1,
                    style: { "height": "200rpx", "display": "flex", "justify-content": "center", "align-items": "center" }
                  }, [
                    vue.createElementVNode("text", null, "暂无数据~")
                  ]))
                ])
              ])
            ])
          ])
        ],
        32
        /* NEED_HYDRATION */
      ),
      vue.createElementVNode("view", { class: "footer" }, [
        vue.createElementVNode("view", { class: "price-box" }, [
          $setup.examDetail.payType == 1 ? (vue.openBlock(), vue.createElementBlock("view", {
            key: 0,
            class: "price"
          }, [
            vue.createElementVNode(
              "text",
              { class: "use-price" },
              "¥" + vue.toDisplayString($setup.examDetail.discountPrice),
              1
              /* TEXT */
            ),
            vue.createElementVNode(
              "text",
              { class: "under-price" },
              "¥" + vue.toDisplayString($setup.examDetail.price),
              1
              /* TEXT */
            )
          ])) : (vue.openBlock(), vue.createElementBlock("view", {
            key: 1,
            class: "price"
          }, "免费")),
          vue.createElementVNode("view", { class: "txt" }, "开通会员享受免费测试")
        ]),
        vue.createElementVNode("view", { class: "member" }, "会员免费"),
        vue.createElementVNode("view", {
          class: "start-test",
          onClick: $setup.startTestHandler
        }, "立即测试")
      ])
    ]);
  }
  const PagesPsychologicalTestChargeTestChargeTest = /* @__PURE__ */ _export_sfc(_sfc_main$_, [["render", _sfc_render$Z], ["__scopeId", "data-v-566b2014"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/psychological-test/charge-test/charge-test.vue"]]);
  const _imports_1$4 = "/static/forum/bg.png";
  const _sfc_main$Z = {
    __name: "free-test",
    setup(__props, { expose: __expose }) {
      __expose();
      const backFn = () => {
        uni.navigateBack({
          delta: 1
        });
      };
      const startTestHandler = () => {
        uni.navigateTo({
          url: "/pages/psychological-test/start-test/start-test"
        });
      };
      const __returned__ = { backFn, startTestHandler };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$Y(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    const _component_uni_nav_bar = resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"), __easycom_1$4);
    return vue.openBlock(), vue.createElementBlock("view", { class: "free-test-box" }, [
      vue.createElementVNode("scroll-view", {
        "scroll-y": "true",
        class: "scroll-content",
        "show-scrollbar": false
      }, [
        vue.createVNode(_component_uni_nav_bar, {
          backgroundColor: "#f4f6f8",
          border: false,
          title: "心理测试",
          class: "header-bar",
          statusBar: true,
          fixed: ""
        }, {
          left: vue.withCtx(() => [
            vue.createVNode(_component_uni_icons, {
              type: "left",
              size: "24",
              onClick: $setup.backFn
            })
          ]),
          right: vue.withCtx(() => [
            vue.createElementVNode("view", { class: "right" }, [
              vue.createElementVNode("image", {
                src: _imports_0$o,
                class: "img",
                style: { "width": "40rpx", "height": "40rpx" }
              })
            ])
          ]),
          _: 1
          /* STABLE */
        }),
        vue.createElementVNode("view", { class: "free-test-content-box" }, [
          vue.createElementVNode("view", { class: "content-box" }, [
            vue.createElementVNode("view", { class: "content-banner" }, [
              vue.createElementVNode("image", {
                src: _imports_1$4,
                class: "img"
              })
            ]),
            vue.createElementVNode("view", { class: "free-test-options" }, [
              vue.createElementVNode("view", { class: "option-item" }, [
                vue.createElementVNode("text", { class: "weight" }, "23.4W"),
                vue.createTextVNode("人已测 ")
              ]),
              vue.createElementVNode("view", { class: "option-item" }, [
                vue.createElementVNode("text", { class: "weight" }, "49道"),
                vue.createTextVNode("精选问题 ")
              ]),
              vue.createElementVNode("view", { class: "option-item" }, [
                vue.createElementVNode("text", { class: "weight" }, "16页"),
                vue.createTextVNode("专业报告 ")
              ])
            ]),
            vue.createElementVNode("view", { class: "content-info" }, " 很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人 很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人 很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人 很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人 很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人 "),
            vue.createElementVNode("view", {
              class: "start-test",
              onClick: $setup.startTestHandler
            }, "开始测试")
          ]),
          vue.createElementVNode("view", { class: "recommend-content-box" }, [
            vue.createElementVNode("view", { class: "recommend-content" }, [
              vue.createElementVNode("view", { class: "recommend-content-header" }, [
                vue.createElementVNode("view", { class: "title" }, " 相关推荐 "),
                vue.createElementVNode("view", { class: "label" }, [
                  vue.createTextVNode("更多"),
                  vue.createVNode(_component_uni_icons, {
                    type: "right",
                    size: "12"
                  })
                ])
              ]),
              vue.createElementVNode("view", { class: "content-list" }, [
                (vue.openBlock(), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList(2, (i2) => {
                    return vue.createElementVNode("view", {
                      class: "content-item",
                      key: i2
                    }, [
                      vue.createElementVNode("view", { class: "content-item-content" }, [
                        vue.createElementVNode("view", null, [
                          vue.createElementVNode("view", { class: "title" }, "潜意识投射测试"),
                          vue.createElementVNode("view", { class: "remark" }, "14张图片，揭露你的潜意识"),
                          vue.createElementVNode("view", { class: "price-box" }, [
                            vue.createElementVNode("text", { class: "price" }, "￥19.9"),
                            vue.createElementVNode("text", { class: "under-price" }, "￥59.9")
                          ]),
                          vue.createElementVNode("view", { class: "test-handler" }, [
                            vue.createElementVNode("view", { class: "handler-btn" }, "去测试"),
                            vue.createElementVNode("view", { class: "use-test" }, [
                              vue.createElementVNode("text", { class: "num" }, "23.4W"),
                              vue.createTextVNode("人已测")
                            ])
                          ])
                        ]),
                        vue.createElementVNode("view", { class: "img-box" }, [
                          vue.createElementVNode("image", {
                            src: _imports_0$m,
                            class: "img"
                          })
                        ])
                      ])
                    ]);
                  }),
                  64
                  /* STABLE_FRAGMENT */
                ))
              ])
            ])
          ])
        ])
      ])
    ]);
  }
  const PagesPsychologicalTestFreeTestFreeTest = /* @__PURE__ */ _export_sfc(_sfc_main$Z, [["render", _sfc_render$Y], ["__scopeId", "data-v-bec04afb"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/psychological-test/free-test/free-test.vue"]]);
  const getDayStartTimestamp = (date2 = /* @__PURE__ */ new Date()) => {
    if (!(date2 instanceof Date) || isNaN(date2.getTime())) {
      date2 = /* @__PURE__ */ new Date();
    }
    const year = date2.getFullYear();
    const month = date2.getMonth();
    const day = date2.getDate();
    return new Date(year, month, day).getTime();
  };
  const formatMessageTime = (timestamp) => {
    if (!timestamp || isNaN(Number(timestamp))) {
      return "未知时间";
    }
    const msgTime = Number(timestamp) * 1e3;
    const msgDate = new Date(msgTime);
    if (isNaN(msgDate.getTime())) {
      return "未知时间";
    }
    const getHHMM = (date2) => {
      const hours = date2.getHours().toString().padStart(2, "0");
      const minutes = date2.getMinutes().toString().padStart(2, "0");
      return `${hours}:${minutes}`;
    };
    const todayStart = getDayStartTimestamp();
    const yesterdayStart = todayStart - 24 * 60 * 60 * 1e3;
    if (msgTime >= todayStart) {
      return getHHMM(msgDate);
    }
    if (msgTime >= yesterdayStart && msgTime < todayStart) {
      return `昨天 ${getHHMM(msgDate)}`;
    }
    const month = (msgDate.getMonth() + 1).toString().padStart(2, "0");
    const day = msgDate.getDate().toString().padStart(2, "0");
    return `${month}-${day} ${getHHMM(msgDate)}`;
  };
  const shouldShowTime = (index, messageList) => {
    if (!Array.isArray(messageList) || messageList.length === 0) {
      return false;
    }
    if (index < 0 || index >= messageList.length) {
      return false;
    }
    if (index === 0) {
      return true;
    }
    const currentMsg = messageList[index];
    const prevMsg = messageList[index - 1];
    if (!currentMsg || !prevMsg || !currentMsg.time || !prevMsg.time) {
      return true;
    }
    const currentTime = Number(currentMsg.time) * 1e3;
    const prevTime = Number(prevMsg.time) * 1e3;
    const timeDiff = (currentTime - prevTime) / (60 * 1e3);
    const isSameDay = (time1, time2) => {
      if (isNaN(time1) || isNaN(time2))
        return false;
      return getDayStartTimestamp(new Date(time1)) === getDayStartTimestamp(new Date(time2));
    };
    return timeDiff > 5 || !isSameDay(currentTime, prevTime);
  };
  class EmojiDecoder {
    constructor(url2, emojiMap) {
      __publicField(this, "emojiMap", null);
      __publicField(this, "url", "");
      __publicField(this, "patterns", []);
      __publicField(this, "metaChars", /[[\]{}()*+?.\\|^$\-,&#\s]/g);
      this.url = url2 || "";
      this.emojiMap = emojiMap || {};
      for (let i2 in this.emojiMap) {
        if (this.emojiMap.hasOwnProperty(i2)) {
          this.patterns.push("(" + i2.replace(this.metaChars, "\\$&") + ")");
        }
      }
    }
    decode(text) {
      return text.replace(new RegExp(this.patterns.join("|"), "g"), (match) => {
        return typeof this.emojiMap[match] != "undefined" ? '<img height="20rpx" width="20rpx" src="' + this.url + this.emojiMap[match] + '" />' : match;
      });
    }
  }
  const _imports_0$6 = "/static/message/jianpan.png";
  const _imports_1$3 = "/static/message/audio.png";
  const _imports_2$1 = "/static/message/emoji.png";
  const _imports_3 = "/static/message/more.png";
  const _imports_4 = "/static/message/picture.png";
  const emojiUrl = "https://imgcache.qq.com/open/qcloud/tim/assets/emoji/";
  const _sfc_main$Y = {
    __name: "private-chat",
    setup(__props, { expose: __expose }) {
      __expose();
      vue.useCssVars((_ctx) => ({
        "2afa2121-statusBarHeight": statusBarHeight.value
      }));
      const globalStore = useGlobalDataStore();
      const statusBarHeight = vue.ref(globalStore.statusBarHeight + "px");
      const refresherTriggered = vue.ref(false);
      const isLoadingMore = vue.ref(false);
      const pages2 = getCurrentPages();
      const currentPage = pages2[pages2.length - 1];
      formatAppLog("log", "at pages/message/private-chat.vue:204", currentPage);
      const toUserId = vue.ref("");
      const friend = vue.ref({
        id: "",
        name: "",
        avatar: ""
      });
      onLoad((options) => {
        const { to, name, avatar: avatar2 } = options;
        toUserId.value = to || "";
        friend.value = {
          id: toUserId.value,
          name: name || "",
          avatar: avatar2 || ""
        };
      });
      const inputText = vue.ref("");
      const messageList = vue.ref([]);
      const scrollTop = vue.ref(0);
      const isRecording = vue.ref(false);
      const currentUserAvatar = vue.ref();
      const { avatar } = uni.getStorageSync("currentUser") || {};
      currentUserAvatar.value = avatar;
      const isCompleteds = vue.ref(false);
      const emojiMap = {
        "[么么哒]": "emoji_3@2x.png",
        "[乒乓]": "emoji_4@2x.png",
        "[便便]": "emoji_5@2x.png",
        "[信封]": "emoji_6@2x.png",
        "[偷笑]": "emoji_7@2x.png",
        "[傲慢]": "emoji_8@2x.png",
        "[咪咪]": "emoji_9@2x.png",
        "[咖啡]": "emoji_10@2x.png"
      };
      const emoji = vue.ref({
        url: emojiUrl,
        map: emojiMap,
        visible: false,
        decoder: new EmojiDecoder(emojiUrl, emojiMap)
      });
      const audioVisible = vue.ref(false);
      const otherTypesMessagePanelVisible = vue.ref(false);
      const videoPlayer = vue.ref({ visible: false, url: "", context: null });
      const messageSelector = vue.ref({ messages: [], visible: false, ids: [] });
      vue.onMounted(async () => {
        if (!toUserId.value) {
          uni.showToast({ title: "聊天对象ID不能为空", icon: "none" });
          return;
        }
        await loadHistoryMessage();
        uni.$on("im_message_received", handleNewMessage);
        uni.$on("im_login_success", () => loadHistoryMessage());
        videoPlayer.value.context = uni.createVideoContext("videoPlayer", currentPage);
      });
      vue.onUnmounted(() => {
        uni.$off("im_message_received", handleNewMessage);
        uni.$off("im_login_success");
        if (isRecording.value) {
          uni.$emit("im_voice_stop");
          isRecording.value = false;
        }
      });
      const loadHistoryMessage = async (isLoadMore = false) => {
        try {
          const list = await TencentImSdk.getHistoryMessage(toUserId.value, isLoadMore);
          if (isLoadMore) {
            messageList.value = [...list.reverse(), ...messageList.value];
          } else {
            messageList.value = list.reverse();
          }
          isCompleteds.value = list.length < 10;
          vue.nextTick(() => {
            scrollTop.value = 999999;
          });
        } catch (error) {
          formatAppLog("error", "at pages/message/private-chat.vue:301", "加载历史消息失败:", error);
          uni.showToast({ title: "加载消息失败", icon: "none" });
          if (isLoadMore) {
            refresherTriggered.value = false;
            isLoadingMore.value = false;
          }
        }
      };
      const loadMoreHistory = async () => {
        if (isCompleteds.value || isLoadingMore.value) {
          refresherTriggered.value = false;
          return;
        }
        try {
          isLoadingMore.value = true;
          refresherTriggered.value = true;
          await loadHistoryMessage(true);
        } catch (error) {
          formatAppLog("error", "at pages/message/private-chat.vue:324", "加载更多历史消息失败:", error);
          uni.showToast({ title: "加载更多消息失败", icon: "none" });
        } finally {
          refresherTriggered.value = false;
          isLoadingMore.value = false;
        }
      };
      const handleNewMessage = (newMsgList) => {
        const targetMsg = newMsgList.filter((msg) => msg.to === toUserId.value || msg.from === toUserId.value);
        if (targetMsg.length) {
          messageList.value.push(...TencentImSdk.formatMessage(targetMsg));
          vue.nextTick(() => {
            scrollTop.value = 999999;
          });
        }
      };
      const sendText = async () => {
        if (!inputText.value.trim()) {
          uni.showToast({ title: "消息内容不能为空", icon: "none" });
          return;
        }
        const isSuccess = await TencentImSdk.sendTextMsg(inputText.value, toUserId.value);
        if (isSuccess) {
          inputText.value = "";
          await loadHistoryMessage();
        } else {
          uni.showToast({ title: "消息发送失败", icon: "none" });
        }
      };
      const sendImage = async () => {
        const isSuccess = await TencentImSdk.sendImageMsg(toUserId.value);
        if (isSuccess) {
          otherTypesMessagePanelVisible.value = false;
          await loadHistoryMessage();
        } else {
          uni.showToast({ title: "图片发送失败", icon: "none" });
        }
      };
      const startRecordVoice = async () => {
        if (isRecording.value)
          return;
        isRecording.value = true;
        uni.showToast({ title: "正在录音...", icon: "none" });
        await TencentImSdk.sendVoiceMsg(toUserId.value);
      };
      const endRecordVoice = async () => {
        if (!isRecording.value)
          return;
        uni.$emit("im_voice_stop");
        isRecording.value = false;
        await loadHistoryMessage();
      };
      const playVoice = (fileUrl) => {
        const innerAudioContext = uni.createInnerAudioContext();
        innerAudioContext.src = fileUrl;
        innerAudioContext.play();
        innerAudioContext.onError((err) => {
          formatAppLog("error", "at pages/message/private-chat.vue:393", "语音播放失败:", err);
          uni.showToast({ title: "语音播放失败", icon: "none" });
        });
      };
      const callVoice = async () => {
        await TencentImSdk.callUser(toUserId.value, false);
      };
      const callVideo = async () => {
        await TencentImSdk.callUser(toUserId.value, true);
      };
      const backFn = () => {
        uni.navigateBack({ delta: 1 });
      };
      const renderTextMessage = (message2) => {
        return "<span>" + emoji.value.decoder.decode(message2.payload.text) + "</span>";
      };
      const switchAudioKeyboard = () => {
        audioVisible.value = !audioVisible.value;
        if (audioVisible.value) {
          uni.authorize({
            scope: "scope.record",
            success() {
              formatAppLog("log", "at pages/message/private-chat.vue:422", "录音权限获取成功");
            },
            fail() {
              uni.showModal({
                title: "获取录音权限失败",
                content: "请先授权才能发送语音消息！"
              });
            }
          });
        }
      };
      const switchEmojiKeyboard = () => {
        emoji.value.visible = !emoji.value.visible;
        otherTypesMessagePanelVisible.value = false;
      };
      const showOtherTypesMessagePanel = () => {
        otherTypesMessagePanelVisible.value = !otherTypesMessagePanelVisible.value;
        emoji.value.visible = false;
      };
      const chooseEmoji = (emojiKey) => {
        inputText.value += emojiKey;
      };
      const privateCall = () => {
        uni.showActionSheet({
          itemList: ["视频通话", "音频通话"],
          success: (res2) => {
            if (res2.tapIndex === 0) {
              callVideo();
            } else if (res2.tapIndex === 1) {
              callVoice();
            }
          },
          fail: (res2) => {
            formatAppLog("log", "at pages/message/private-chat.vue:459", res2.errMsg);
          }
        });
      };
      const selectMessages = (e2) => {
        const selectedMessageIds = e2.detail.value;
        let selectedMessages = [];
        messageList.value.forEach((message2) => {
          if (selectedMessageIds.includes(message2.ID)) {
            selectedMessages.push(message2);
          }
        });
        messageSelector.value.messages = selectedMessages;
      };
      const toComment = () => {
        formatAppLog("log", "at pages/message/private-chat.vue:477", "跳转到评论页:", friend.value.id);
      };
      const chattingList = vue.ref([
        { name: "备注", type: "remark" },
        { name: "关注", type: "attention" },
        { name: "置顶", type: "top" },
        { name: "举报/投诉", type: "report" },
        { name: "取消", type: "cancel" }
      ]);
      const popup = vue.ref(null);
      const chattingFunction = () => {
        var _a;
        (_a = popup.value) == null ? void 0 : _a.open("bottom");
      };
      const selectChatting = (type) => {
        var _a, _b;
        switch (type) {
          case "remark":
            formatAppLog("log", "at pages/message/private-chat.vue:498", "备注");
            break;
          case "attention":
            formatAppLog("log", "at pages/message/private-chat.vue:501", "关注");
            break;
          case "top":
            uni.showToast({ title: "置顶功能已迁移至IM SDK", icon: "none" });
            break;
          case "report":
            uni.navigateTo({
              url: `/pages/settings/complaint?id=${friend.value.id}`
            });
            break;
          case "cancel":
            (_a = popup.value) == null ? void 0 : _a.close();
            break;
        }
        (_b = popup.value) == null ? void 0 : _b.close();
      };
      const moreFn = () => {
        formatAppLog("log", "at pages/message/private-chat.vue:521", "更多按钮点击");
      };
      const handlePauseRecord = () => {
        formatAppLog("log", "at pages/message/private-chat.vue:525", "长按录音暂停");
      };
      const __returned__ = { globalStore, statusBarHeight, refresherTriggered, isLoadingMore, pages: pages2, currentPage, toUserId, friend, inputText, messageList, scrollTop, isRecording, currentUserAvatar, avatar, isCompleteds, emojiUrl, emojiMap, emoji, audioVisible, otherTypesMessagePanelVisible, videoPlayer, messageSelector, loadHistoryMessage, loadMoreHistory, handleNewMessage, sendText, sendImage, startRecordVoice, endRecordVoice, playVoice, callVoice, callVideo, backFn, renderTextMessage, switchAudioKeyboard, switchEmojiKeyboard, showOtherTypesMessagePanel, chooseEmoji, privateCall, selectMessages, toComment, chattingList, popup, chattingFunction, selectChatting, moreFn, handlePauseRecord, ref: vue.ref, onMounted: vue.onMounted, onUnmounted: vue.onUnmounted, nextTick: vue.nextTick, get onLoad() {
        return onLoad;
      }, get TencentImSdk() {
        return TencentImSdk;
      }, get useGlobalDataStore() {
        return useGlobalDataStore;
      }, get formatMessageTime() {
        return formatMessageTime;
      }, get shouldShowTime() {
        return shouldShowTime;
      }, get EmojiDecoder() {
        return EmojiDecoder;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$X(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    const _component_uni_nav_bar = resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"), __easycom_1$4);
    const _component_uni_popup = resolveEasycom(vue.resolveDynamicComponent("uni-popup"), __easycom_3$5);
    return vue.openBlock(), vue.createElementBlock("view", { class: "settled-box" }, [
      vue.createElementVNode("view", { class: "header" }, [
        vue.createVNode(_component_uni_nav_bar, {
          class: vue.normalizeClass([$setup.scrollTop > 15 ? "scrollClass" : "", "header-bar"]),
          backgroundColor: "rgba(255,255,255,0)",
          border: false,
          leftWidth: "300rpx"
        }, {
          left: vue.withCtx(() => [
            vue.createVNode(_component_uni_icons, {
              type: "left",
              size: "24",
              onClick: $setup.backFn
            }),
            vue.createElementVNode("image", {
              src: $setup.friend.avatar,
              style: { "width": "50rpx", "height": "50rpx", "border-radius": "50%", "margin": "0 10rpx" }
            }, null, 8, ["src"]),
            vue.createElementVNode(
              "view",
              null,
              vue.toDisplayString($setup.friend.name),
              1
              /* TEXT */
            )
          ]),
          container: vue.withCtx(() => []),
          right: vue.withCtx(() => [
            vue.createElementVNode("view", {
              class: "right",
              onClick: $setup.chattingFunction
            }, [
              vue.createVNode(_component_uni_icons, {
                type: "more-filled",
                size: "30",
                onClick: $setup.moreFn
              })
            ])
          ]),
          _: 1
          /* STABLE */
        }, 8, ["class"]),
        vue.createElementVNode("view", { class: "uni-padding-wrap" }, [
          vue.createVNode(_component_uni_icons, {
            type: "info",
            size: "15",
            color: "#FF8F1F"
          }),
          vue.createElementVNode("view", null, "为了保障您的合法权益，请不要脱离平台与老师私下联系、缴费。")
        ])
      ]),
      vue.createElementVNode("scroll-view", {
        ref: "scrollViewRef",
        "scroll-y": "",
        style: vue.normalizeStyle({ height: `calc(100vh)` }),
        "refresher-enabled": "true",
        "show-scrollbar": false,
        "refresher-triggered": $setup.refresherTriggered,
        onRefresherrefresh: $setup.loadMoreHistory,
        "refresher-background": "#f5f5f5",
        "scroll-with-animation": "true",
        "refresher-threshold": 80,
        class: "scroll-view",
        "scroll-top": $setup.scrollTop
      }, [
        vue.createElementVNode(
          "view",
          {
            class: vue.normalizeClass($setup.isCompleteds ? "history-loaded" : "")
          },
          [
            vue.createElementVNode(
              "view",
              null,
              vue.toDisplayString($setup.isCompleteds ? "已经没有更多的历史消息" : ""),
              1
              /* TEXT */
            )
          ],
          2
          /* CLASS */
        ),
        vue.createElementVNode(
          "checkbox-group",
          { onChange: $setup.selectMessages },
          [
            (vue.openBlock(true), vue.createElementBlock(
              vue.Fragment,
              null,
              vue.renderList($setup.messageList, (message2, index) => {
                return vue.openBlock(), vue.createElementBlock("view", {
                  key: message2.ID
                }, [
                  $setup.shouldShowTime(index, $setup.messageList) ? (vue.openBlock(), vue.createElementBlock(
                    "view",
                    {
                      key: 0,
                      class: "message-time"
                    },
                    vue.toDisplayString($setup.formatMessageTime(message2.clientTime)),
                    1
                    /* TEXT */
                  )) : vue.createCommentVNode("v-if", true),
                  vue.createElementVNode("view", { class: "message-item" }, [
                    message2.flow === "in" ? (vue.openBlock(), vue.createElementBlock("view", {
                      key: 0,
                      class: "message-item-right"
                    }, [
                      vue.createElementVNode("view", { class: "right-content" }, [
                        vue.createElementVNode("image", {
                          src: $setup.friend.avatar
                        }, null, 8, ["src"]),
                        message2.type === "TIMTextElem" ? (vue.openBlock(), vue.createElementBlock("view", {
                          key: 0,
                          class: "text-content",
                          innerHTML: $setup.renderTextMessage(message2)
                        }, null, 8, ["innerHTML"])) : vue.createCommentVNode("v-if", true),
                        message2.type === "TIMImageElem" ? (vue.openBlock(), vue.createElementBlock("image", {
                          key: 1,
                          src: message2.payload.imageInfoArray[0].imageUrl,
                          class: "image-content"
                        }, null, 8, ["src"])) : vue.createCommentVNode("v-if", true)
                      ])
                    ])) : (vue.openBlock(), vue.createElementBlock("view", {
                      key: 1,
                      class: "message-item-left"
                    }, [
                      vue.createElementVNode("view", { class: "left-content" }, [
                        message2.type === "TIMTextElem" ? (vue.openBlock(), vue.createElementBlock("view", {
                          key: 0,
                          class: "text-content",
                          innerHTML: $setup.renderTextMessage(message2)
                        }, null, 8, ["innerHTML"])) : vue.createCommentVNode("v-if", true),
                        message2.type === "TIMImageElem" ? (vue.openBlock(), vue.createElementBlock("image", {
                          key: 1,
                          src: message2.payload.imageInfoArray[0].imageUrl,
                          class: "image-content"
                        }, null, 8, ["src"])) : vue.createCommentVNode("v-if", true),
                        vue.createElementVNode("image", { src: $setup.currentUserAvatar }, null, 8, ["src"])
                      ])
                    ]))
                  ])
                ]);
              }),
              128
              /* KEYED_FRAGMENT */
            ))
          ],
          32
          /* NEED_HYDRATION */
        )
      ], 44, ["refresher-triggered", "scroll-top"]),
      !$setup.videoPlayer.visible && !$setup.messageSelector.visible ? (vue.openBlock(), vue.createElementBlock("view", {
        key: 0,
        class: "action-box"
      }, [
        vue.createElementVNode("view", { class: "action-top" }, [
          vue.createElementVNode("view", { class: "action-middle" }, [
            vue.createElementVNode("view", {
              class: "action-item",
              onClick: _cache[0] || (_cache[0] = ($event) => $setup.privateCall())
            }, [
              vue.createVNode(_component_uni_icons, {
                type: "phone-filled",
                size: "20",
                color: "#00b275",
                class: "icon-action"
              }),
              vue.createTextVNode(" 立即倾诉 ")
            ]),
            vue.createElementVNode("view", { class: "action-item" }, [
              vue.createVNode(_component_uni_icons, {
                "custom-prefix": "iconfont",
                type: "icon-yonghuming",
                size: "15",
                color: "#00b275",
                class: "icon-action"
              }),
              vue.createTextVNode(" 老师简介")
            ]),
            vue.createElementVNode("view", {
              class: "action-item",
              onClick: $setup.toComment
            }, [
              vue.createVNode(_component_uni_icons, {
                "custom-prefix": "iconfont",
                type: "icon-dianziqingjiantianchong",
                size: "15",
                color: "#00b275",
                class: "icon-action"
              }),
              vue.createTextVNode(" 查看评论 ")
            ])
          ]),
          vue.createElementVNode("view", { class: "action-bottom-box" }, [
            vue.createElementVNode("view", { onClick: $setup.switchAudioKeyboard }, [
              $setup.audioVisible ? (vue.openBlock(), vue.createElementBlock("image", {
                key: 0,
                class: "more",
                src: _imports_0$6
              })) : (vue.openBlock(), vue.createElementBlock("image", {
                key: 1,
                class: "more",
                src: _imports_1$3
              }))
            ]),
            $setup.audioVisible ? (vue.openBlock(), vue.createElementBlock(
              "button",
              {
                key: 0,
                class: "record-button",
                onTouchstart: $setup.startRecordVoice,
                onTouchend: $setup.endRecordVoice,
                longpress: "handlePauseRecord"
              },
              vue.toDisplayString($setup.isRecording ? "松开发送" : "长按录音"),
              33
              /* TEXT, NEED_HYDRATION */
            )) : vue.withDirectives((vue.openBlock(), vue.createElementBlock(
              "input",
              {
                key: 1,
                "onUpdate:modelValue": _cache[1] || (_cache[1] = ($event) => $setup.inputText = $event),
                onConfirm: $setup.sendText,
                class: "consult-input",
                maxlength: "700",
                placeholder: "发送消息",
                type: "text"
              },
              null,
              544
              /* NEED_HYDRATION, NEED_PATCH */
            )), [
              [vue.vModelText, $setup.inputText]
            ]),
            vue.createElementVNode("view", { onClick: $setup.switchEmojiKeyboard }, [
              $setup.emoji.visible ? (vue.openBlock(), vue.createElementBlock("image", {
                key: 0,
                class: "more",
                src: _imports_0$6
              })) : (vue.openBlock(), vue.createElementBlock("image", {
                key: 1,
                class: "more",
                src: _imports_2$1
              }))
            ]),
            vue.createElementVNode("view", null, [
              vue.createElementVNode("image", {
                onClick: _cache[2] || (_cache[2] = ($event) => $setup.showOtherTypesMessagePanel()),
                class: "more",
                src: _imports_3
              })
            ]),
            $setup.inputText ? (vue.openBlock(), vue.createElementBlock("view", {
              key: 2,
              class: "send-btn-box"
            }, [
              vue.createElementVNode("text", {
                class: "btn",
                onClick: _cache[3] || (_cache[3] = ($event) => $setup.sendText())
              }, "发送")
            ])) : vue.createCommentVNode("v-if", true)
          ])
        ]),
        $setup.emoji.visible ? (vue.openBlock(), vue.createElementBlock("view", {
          key: 0,
          class: "action-bottom action-bottom-emoji"
        }, [
          (vue.openBlock(true), vue.createElementBlock(
            vue.Fragment,
            null,
            vue.renderList($setup.emoji.map, (emojiItem, emojiKey, index) => {
              return vue.openBlock(), vue.createElementBlock("image", {
                class: "emoji-item",
                key: index,
                src: $setup.emoji.url + emojiItem,
                onClick: ($event) => $setup.chooseEmoji(emojiKey)
              }, null, 8, ["src", "onClick"]);
            }),
            128
            /* KEYED_FRAGMENT */
          ))
        ])) : vue.createCommentVNode("v-if", true),
        $setup.otherTypesMessagePanelVisible ? (vue.openBlock(), vue.createElementBlock("view", {
          key: 1,
          class: "action-bottom"
        }, [
          vue.createElementVNode("view", { class: "more-icon" }, [
            vue.createElementVNode("image", {
              onClick: $setup.sendImage,
              class: "operation-icon",
              src: _imports_4
            }),
            vue.createElementVNode("view", { class: "operation-title" }, "图片")
          ])
        ])) : vue.createCommentVNode("v-if", true)
      ])) : vue.createCommentVNode("v-if", true),
      vue.createVNode(
        _component_uni_popup,
        {
          ref: "popup",
          type: "message"
        },
        {
          default: vue.withCtx(() => [
            vue.createElementVNode("view", { class: "popup-content" }, [
              (vue.openBlock(true), vue.createElementBlock(
                vue.Fragment,
                null,
                vue.renderList($setup.chattingList, (item, index) => {
                  return vue.openBlock(), vue.createElementBlock("view", {
                    key: index,
                    onClick: ($event) => $setup.selectChatting(item.type),
                    class: "popup-item"
                  }, vue.toDisplayString(item.name), 9, ["onClick"]);
                }),
                128
                /* KEYED_FRAGMENT */
              ))
            ])
          ]),
          _: 1
          /* STABLE */
        },
        512
        /* NEED_PATCH */
      )
    ]);
  }
  const PagesMessagePrivateChat = /* @__PURE__ */ _export_sfc(_sfc_main$Y, [["render", _sfc_render$X], ["__scopeId", "data-v-2afa2121"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/message/private-chat.vue"]]);
  const _sfc_main$X = {
    name: "u-button",
    emits: ["click", "getphonenumber", "getuserinfo", "error", "opensetting", "launchapp", "chooseavatar"],
    props: {
      // 是否细边框
      hairLine: {
        type: Boolean,
        default: true
      },
      // 按钮的预置样式，default，primary，error，warning，success
      type: {
        type: String,
        default: "default"
      },
      // 按钮尺寸，default，medium，mini
      size: {
        type: String,
        default: "default"
      },
      // 按钮形状，circle（两边为半圆），square（带圆角）
      shape: {
        type: String,
        default: "square"
      },
      // 按钮是否镂空
      plain: {
        type: Boolean,
        default: false
      },
      // 是否禁止状态
      disabled: {
        type: Boolean,
        default: false
      },
      // 是否加载中
      loading: {
        type: Boolean,
        default: false
      },
      // 开放能力，具体请看uniapp稳定关于button组件部分说明
      // https://uniapp.dcloud.io/component/button
      openType: {
        type: String,
        default: ""
      },
      // 用于 <form> 组件，点击分别会触发 <form> 组件的 submit/reset 事件
      // 取值为submit（提交表单），reset（重置表单）
      formType: {
        type: String,
        default: ""
      },
      // 打开 APP 时，向 APP 传递的参数，open-type=launchApp时有效
      // 只微信小程序、QQ小程序有效
      appParameter: {
        type: String,
        default: ""
      },
      // 指定是否阻止本节点的祖先节点出现点击态，微信小程序有效
      hoverStopPropagation: {
        type: Boolean,
        default: false
      },
      // 指定返回用户信息的语言，zh_CN 简体中文，zh_TW 繁体中文，en 英文。只微信小程序有效
      lang: {
        type: String,
        default: "en"
      },
      // 会话来源，open-type="contact"时有效。只微信小程序有效
      sessionFrom: {
        type: String,
        default: ""
      },
      // 会话内消息卡片标题，open-type="contact"时有效
      // 默认当前标题，只微信小程序有效
      sendMessageTitle: {
        type: String,
        default: ""
      },
      // 会话内消息卡片点击跳转小程序路径，open-type="contact"时有效
      // 默认当前分享路径，只微信小程序有效
      sendMessagePath: {
        type: String,
        default: ""
      },
      // 会话内消息卡片图片，open-type="contact"时有效
      // 默认当前页面截图，只微信小程序有效
      sendMessageImg: {
        type: String,
        default: ""
      },
      // 是否显示会话内消息卡片，设置此参数为 true，用户进入客服会话会在右下角显示"可能要发送的小程序"提示，
      // 用户点击后可以快速发送小程序消息，open-type="contact"时有效
      showMessageCard: {
        type: Boolean,
        default: false
      },
      // 手指按（触摸）按钮时按钮时的背景颜色
      hoverBgColor: {
        type: String,
        default: ""
      },
      // 水波纹的背景颜色
      rippleBgColor: {
        type: String,
        default: ""
      },
      // 是否开启水波纹效果
      ripple: {
        type: Boolean,
        default: false
      },
      // 按下的类名
      hoverClass: {
        type: String,
        default: ""
      },
      // 自定义样式，对象形式
      customStyle: {
        type: Object,
        default() {
          return {};
        }
      },
      // 额外传参参数，用于小程序的data-xxx属性，通过target.dataset.name获取
      dataName: {
        type: String,
        default: ""
      },
      // 节流，一定时间内只能触发一次
      throttleTime: {
        type: [String, Number],
        default: 500
      },
      // 按住后多久出现点击态，单位毫秒
      hoverStartTime: {
        type: [String, Number],
        default: 20
      },
      // 手指松开后点击态保留时间，单位毫秒
      hoverStayTime: {
        type: [String, Number],
        default: 150
      },
      timerId: {
        type: [String, Number]
      }
    },
    computed: {
      // 当没有传bgColor变量时，按钮按下去的颜色类名
      getHoverClass() {
        if (this.loading || this.disabled || this.ripple || this.hoverClass)
          return "";
        let hoverClass = "";
        hoverClass = this.plain ? "u-" + this.type + "-plain-hover" : "u-" + this.type + "-hover";
        return hoverClass;
      },
      // 在'primary', 'success', 'error', 'warning'类型下，不显示边框，否则会造成四角有毛刺现象
      showHairLineBorder() {
        if (["primary", "success", "error", "warning"].indexOf(this.type) >= 0 && !this.plain) {
          return "";
        } else {
          return "u-hairline-border";
        }
      }
    },
    data() {
      let btnTimerId = this.timerId || "button_" + Math.floor(Math.random() * 1e8 + 0);
      return {
        btnTimerId,
        rippleTop: 0,
        // 水波纹的起点Y坐标到按钮上边界的距离
        rippleLeft: 0,
        // 水波纹起点X坐标到按钮左边界的距离
        fields: {},
        // 波纹按钮节点信息
        waveActive: false
        // 激活水波纹
      };
    },
    methods: {
      // 按钮点击
      click(e2) {
        this.$u.throttle(() => {
          if (this.loading === true || this.disabled === true)
            return;
          if (this.ripple) {
            this.waveActive = false;
            this.$nextTick(function() {
              this.getWaveQuery(e2);
            });
          }
          this.$emit("click", e2);
        }, this.throttleTime, true, this.btnTimerId);
      },
      // 查询按钮的节点信息
      getWaveQuery(e2) {
        this.getElQuery().then((res2) => {
          let data = res2[0];
          if (!data.width || !data.width)
            return;
          data.targetWidth = data.height > data.width ? data.height : data.width;
          if (!data.targetWidth)
            return;
          this.fields = data;
          let touchesX = "", touchesY = "";
          touchesX = e2.touches[0].clientX;
          touchesY = e2.touches[0].clientY;
          this.rippleTop = touchesY - data.top - data.targetWidth / 2;
          this.rippleLeft = touchesX - data.left - data.targetWidth / 2;
          this.$nextTick(() => {
            this.waveActive = true;
          });
        });
      },
      // 获取节点信息
      getElQuery() {
        return new Promise((resolve) => {
          let queryInfo = "";
          queryInfo = uni.createSelectorQuery().in(this);
          queryInfo.select(".u-btn").boundingClientRect();
          queryInfo.exec((data) => {
            resolve(data);
          });
        });
      },
      // 下面为对接uniapp官方按钮开放能力事件回调的对接
      getphonenumber(res2) {
        this.$emit("getphonenumber", res2);
      },
      getuserinfo(res2) {
        this.$emit("getuserinfo", res2);
      },
      error(res2) {
        this.$emit("error", res2);
      },
      opensetting(res2) {
        this.$emit("opensetting", res2);
      },
      launchapp(res2) {
        this.$emit("launchapp", res2);
      },
      chooseavatar(res2) {
        this.$emit("chooseavatar", res2);
      }
    }
  };
  function _sfc_render$W(_ctx, _cache, $props, $setup, $data, $options) {
    return vue.openBlock(), vue.createElementBlock("button", {
      id: "u-wave-btn",
      class: vue.normalizeClass(["u-btn u-line-1 u-fix-ios-appearance", [
        "u-size-" + $props.size,
        $props.plain ? "u-btn--" + $props.type + "--plain" : "",
        $props.loading ? "u-loading" : "",
        $props.shape == "circle" ? "u-round-circle" : "",
        $props.hairLine ? $options.showHairLineBorder : "u-btn--bold-border",
        "u-btn--" + $props.type,
        $props.disabled ? `u-btn--${$props.type}--disabled` : ""
      ]]),
      "hover-start-time": Number($props.hoverStartTime),
      "hover-stay-time": Number($props.hoverStayTime),
      disabled: $props.disabled,
      "form-type": $props.formType,
      "open-type": $props.openType,
      "app-parameter": $props.appParameter,
      "hover-stop-propagation": $props.hoverStopPropagation,
      "send-message-title": $props.sendMessageTitle,
      "send-message-path": "sendMessagePath",
      lang: $props.lang,
      "data-name": $props.dataName,
      "session-from": $props.sessionFrom,
      "send-message-img": $props.sendMessageImg,
      "show-message-card": $props.showMessageCard,
      onGetphonenumber: _cache[0] || (_cache[0] = (...args) => $options.getphonenumber && $options.getphonenumber(...args)),
      onGetuserinfo: _cache[1] || (_cache[1] = (...args) => $options.getuserinfo && $options.getuserinfo(...args)),
      onError: _cache[2] || (_cache[2] = (...args) => $options.error && $options.error(...args)),
      onOpensetting: _cache[3] || (_cache[3] = (...args) => $options.opensetting && $options.opensetting(...args)),
      onLaunchapp: _cache[4] || (_cache[4] = (...args) => $options.launchapp && $options.launchapp(...args)),
      onChooseavatar: _cache[5] || (_cache[5] = (...args) => $options.chooseavatar && $options.chooseavatar(...args)),
      style: vue.normalizeStyle([$props.customStyle, {
        overflow: $props.ripple ? "hidden" : "visible"
      }]),
      onClick: _cache[6] || (_cache[6] = vue.withModifiers(($event) => $options.click($event), ["stop"])),
      "hover-class": $options.getHoverClass,
      loading: $props.loading
    }, [
      vue.renderSlot(_ctx.$slots, "default", {}, void 0, true),
      $props.ripple ? (vue.openBlock(), vue.createElementBlock(
        "view",
        {
          key: 0,
          class: vue.normalizeClass(["u-wave-ripple", [$data.waveActive ? "u-wave-active" : ""]]),
          style: vue.normalizeStyle({
            top: $data.rippleTop + "px",
            left: $data.rippleLeft + "px",
            width: $data.fields.targetWidth + "px",
            height: $data.fields.targetWidth + "px",
            "background-color": $props.rippleBgColor || "rgba(0, 0, 0, 0.15)"
          })
        },
        null,
        6
        /* CLASS, STYLE */
      )) : vue.createCommentVNode("v-if", true)
    ], 46, ["hover-start-time", "hover-stay-time", "disabled", "form-type", "open-type", "app-parameter", "hover-stop-propagation", "send-message-title", "lang", "data-name", "session-from", "send-message-img", "show-message-card", "hover-class", "loading"]);
  }
  const __easycom_1$2 = /* @__PURE__ */ _export_sfc(_sfc_main$X, [["render", _sfc_render$W], ["__scopeId", "data-v-097def2b"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/uni_modules/vk-uview-ui/components/u-button/u-button.vue"]]);
  function getSystemInfoSync() {
    return uni.getSystemInfoSync();
  }
  let systemInfo = getSystemInfoSync();
  let menuButtonInfo = {};
  const _sfc_main$W = {
    name: "u-navbar",
    props: {
      // 导航栏高度，单位px，非rpx
      height: {
        type: [String, Number],
        default: ""
      },
      // 返回箭头的颜色
      backIconColor: {
        type: String,
        default: "#606266"
      },
      // 左边返回的图标
      backIconName: {
        type: String,
        default: "nav-back"
      },
      // 左边返回图标的大小，rpx
      backIconSize: {
        type: [String, Number],
        default: "44"
      },
      // 返回的文字提示
      backText: {
        type: String,
        default: ""
      },
      // 返回的文字的 样式
      backTextStyle: {
        type: Object,
        default() {
          return {
            color: "#606266"
          };
        }
      },
      // 导航栏标题
      title: {
        type: String,
        default: ""
      },
      // 标题的宽度，如果需要自定义右侧内容，且右侧内容很多时，可能需要减少这个宽度，单位rpx
      titleWidth: {
        type: [String, Number],
        default: "250"
      },
      // 标题的颜色
      titleColor: {
        type: String,
        default: "#606266"
      },
      // 标题字体是否加粗
      titleBold: {
        type: Boolean,
        default: false
      },
      // 标题的字体大小
      titleSize: {
        type: [String, Number],
        default: 32
      },
      isBack: {
        type: [Boolean, String],
        default: true
      },
      // 对象形式，因为用户可能定义一个纯色，或者线性渐变的颜色
      background: {
        type: Object,
        default() {
          return {
            background: "#ffffff"
          };
        }
      },
      // 导航栏是否固定在顶部
      isFixed: {
        type: Boolean,
        default: true
      },
      // 是否沉浸式，允许fixed定位后导航栏塌陷，仅fixed定位下生效
      immersive: {
        type: Boolean,
        default: false
      },
      // 是否显示导航栏的下边框
      borderBottom: {
        type: Boolean,
        default: true
      },
      zIndex: {
        type: [String, Number],
        default: ""
      },
      // 自定义返回逻辑
      customBack: {
        type: Function,
        default: null
      }
    },
    data() {
      return {
        menuButtonInfo,
        statusBarHeight: systemInfo.statusBarHeight
      };
    },
    computed: {
      // 导航栏内部盒子的样式
      navbarInnerStyle() {
        let style = {};
        style.height = this.navbarHeight + "px";
        return style;
      },
      // 整个导航栏的样式
      navbarStyle() {
        let style = {};
        style.zIndex = this.zIndex ? this.zIndex : this.$u.zIndex.navbar;
        Object.assign(style, this.background);
        return style;
      },
      // 导航中间的标题的样式
      titleStyle() {
        let style = {};
        style.left = (systemInfo.windowWidth - uni.upx2px(this.titleWidth)) / 2 + "px";
        style.right = (systemInfo.windowWidth - uni.upx2px(this.titleWidth)) / 2 + "px";
        style.width = uni.upx2px(this.titleWidth) + "px";
        return style;
      },
      // 转换字符数值为真正的数值
      navbarHeight() {
        return this.height ? this.height : 44;
      }
    },
    created() {
    },
    methods: {
      goBack() {
        if (typeof this.customBack === "function") {
          this.customBack.bind(this.$u.$parent.call(this))();
        } else {
          uni.navigateBack();
        }
      }
    }
  };
  function _sfc_render$V(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_u_icon = resolveEasycom(vue.resolveDynamicComponent("u-icon"), __easycom_2$b);
    return vue.openBlock(), vue.createElementBlock("view", { class: "" }, [
      vue.createElementVNode(
        "view",
        {
          class: vue.normalizeClass(["u-navbar", { "u-navbar-fixed": $props.isFixed, "u-border-bottom": $props.borderBottom }]),
          style: vue.normalizeStyle([$options.navbarStyle])
        },
        [
          vue.createElementVNode(
            "view",
            {
              class: "u-status-bar",
              style: vue.normalizeStyle({ height: $data.statusBarHeight + "px" })
            },
            null,
            4
            /* STYLE */
          ),
          vue.createElementVNode(
            "view",
            {
              class: "u-navbar-inner",
              style: vue.normalizeStyle([$options.navbarInnerStyle])
            },
            [
              $props.isBack ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 0,
                class: "u-back-wrap",
                onClick: _cache[0] || (_cache[0] = (...args) => $options.goBack && $options.goBack(...args))
              }, [
                vue.createElementVNode("view", { class: "u-icon-wrap" }, [
                  vue.createVNode(_component_u_icon, {
                    name: $props.backIconName,
                    color: $props.backIconColor,
                    size: $props.backIconSize
                  }, null, 8, ["name", "color", "size"])
                ]),
                $props.backText ? (vue.openBlock(), vue.createElementBlock(
                  "view",
                  {
                    key: 0,
                    class: "u-icon-wrap u-back-text u-line-1",
                    style: vue.normalizeStyle([$props.backTextStyle])
                  },
                  vue.toDisplayString($props.backText),
                  5
                  /* TEXT, STYLE */
                )) : vue.createCommentVNode("v-if", true)
              ])) : vue.createCommentVNode("v-if", true),
              $props.title ? (vue.openBlock(), vue.createElementBlock(
                "view",
                {
                  key: 1,
                  class: "u-navbar-content-title",
                  style: vue.normalizeStyle([$options.titleStyle])
                },
                [
                  vue.createElementVNode(
                    "view",
                    {
                      class: "u-title u-line-1",
                      style: vue.normalizeStyle({
                        color: $props.titleColor,
                        fontSize: $props.titleSize + "rpx",
                        fontWeight: $props.titleBold ? "bold" : "normal"
                      })
                    },
                    vue.toDisplayString($props.title),
                    5
                    /* TEXT, STYLE */
                  )
                ],
                4
                /* STYLE */
              )) : vue.createCommentVNode("v-if", true),
              vue.createElementVNode("view", { class: "u-slot-content" }, [
                vue.renderSlot(_ctx.$slots, "default", {}, void 0, true)
              ]),
              vue.createElementVNode("view", { class: "u-slot-right" }, [
                vue.renderSlot(_ctx.$slots, "right", {}, void 0, true)
              ])
            ],
            4
            /* STYLE */
          )
        ],
        6
        /* CLASS, STYLE */
      ),
      $props.isFixed && !$props.immersive ? (vue.openBlock(), vue.createElementBlock(
        "view",
        {
          key: 0,
          class: "u-navbar-placeholder",
          style: vue.normalizeStyle({ width: "100%", height: Number($options.navbarHeight) + $data.statusBarHeight + "px" })
        },
        null,
        4
        /* STYLE */
      )) : vue.createCommentVNode("v-if", true)
    ]);
  }
  const __easycom_0$1 = /* @__PURE__ */ _export_sfc(_sfc_main$W, [["render", _sfc_render$V], ["__scopeId", "data-v-986be06f"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/uni_modules/vk-uview-ui/components/u-navbar/u-navbar.vue"]]);
  const _sfc_main$V = {
    emits: ["update:modelValue", "input", "confirm", "cancel"],
    props: {
      // 通过双向绑定控制组件的弹出与收起
      value: {
        type: Boolean,
        default: false
      },
      modelValue: {
        type: Boolean,
        default: false
      },
      // 列数据
      list: {
        type: Array,
        default() {
          return [];
        }
      },
      // 是否显示边框
      border: {
        type: Boolean,
        default: true
      },
      // "取消"按钮的颜色
      cancelColor: {
        type: String,
        default: "#606266"
      },
      // "确定"按钮的颜色
      confirmColor: {
        type: String,
        default: "#2979ff"
      },
      // 弹出的z-index值
      zIndex: {
        type: [String, Number],
        default: 0
      },
      safeAreaInsetBottom: {
        type: Boolean,
        default: false
      },
      // 是否允许通过点击遮罩关闭Picker
      maskCloseAble: {
        type: Boolean,
        default: true
      },
      // 提供的默认选中的下标
      defaultValue: {
        type: Array,
        default() {
          return [0];
        }
      },
      // 模式选择，single-column-单列，mutil-column-多列，mutil-column-auto-多列联动
      mode: {
        type: String,
        default: "single-column"
      },
      // 自定义value属性名
      valueName: {
        type: String,
        default: "value"
      },
      // 自定义label属性名
      labelName: {
        type: String,
        default: "label"
      },
      // 自定义多列联动模式的children属性名
      childName: {
        type: String,
        default: "children"
      },
      // 顶部标题
      title: {
        type: String,
        default: ""
      },
      // 取消按钮的文字
      cancelText: {
        type: String,
        default: "取消"
      },
      // 确认按钮的文字
      confirmText: {
        type: String,
        default: "确认"
      },
      // 遮罩的模糊度
      blur: {
        type: [Number, String],
        default: 0
      }
    },
    data() {
      return {
        popupValue: false,
        // 用于列改变时，保存当前的索引，下一次变化时比较得出是哪一列发生了变化
        defaultSelector: [0],
        // picker-view的数据
        columnData: [],
        // 每次队列发生变化时，保存选择的结果
        selectValue: [],
        // 上一次列变化时的index
        lastSelectIndex: [],
        // 列数
        columnNum: 0,
        // 列是否还在滑动中，微信小程序如果在滑动中就点确定，结果可能不准确
        moving: false,
        reset: false
      };
    },
    watch: {
      // 在select弹起的时候，重新初始化所有数据
      valueCom: {
        immediate: true,
        handler(val2) {
          if (val2) {
            this.reset = true;
            setTimeout(() => this.init(), 10);
          }
          this.popupValue = val2;
        }
      }
    },
    computed: {
      uZIndex() {
        return this.zIndex ? this.zIndex : this.$u.zIndex.popup;
      },
      valueCom() {
        return this.modelValue;
      },
      // 用来兼容小程序、App、h5
      showColumnCom() {
        return true;
      }
    },
    methods: {
      // 标识滑动开始，只有微信小程序才有这样的事件
      pickstart() {
      },
      // 标识滑动结束
      pickend() {
      },
      init() {
        this.reset = false;
        this.setColumnNum();
        this.setDefaultSelector();
        this.setColumnData();
        this.setSelectValue();
      },
      // 获取默认选中列下标
      setDefaultSelector() {
        this.defaultSelector = this.defaultValue.length == this.columnNum ? this.defaultValue : Array(this.columnNum).fill(0);
        this.lastSelectIndex = this.$u.deepClone(this.defaultSelector);
      },
      // 计算列数
      setColumnNum() {
        if (this.mode == "single-column")
          this.columnNum = 1;
        else if (this.mode == "mutil-column")
          this.columnNum = this.list.length;
        else if (this.mode == "mutil-column-auto") {
          let num = 1;
          let column = this.list;
          while (column[0][this.childName]) {
            column = column[0] ? column[0][this.childName] : {};
            num++;
          }
          this.columnNum = num;
        }
      },
      // 获取需要展示在picker中的列数据
      setColumnData() {
        let data = [];
        this.selectValue = [];
        if (this.mode == "mutil-column-auto") {
          let column = this.list[this.defaultSelector.length ? this.defaultSelector[0] : 0];
          for (let i2 = 0; i2 < this.columnNum; i2++) {
            if (i2 == 0) {
              data[i2] = this.list;
              column = column[this.childName];
            } else {
              data[i2] = column;
              column = column[this.defaultSelector[i2]][this.childName];
            }
          }
        } else if (this.mode == "single-column") {
          data[0] = this.list;
        } else {
          data = this.list;
        }
        this.columnData = data;
      },
      // 获取默认选中的值，如果没有设置defaultValue，就默认选中每列的第一个
      setSelectValue() {
        let tmp = null;
        for (let i2 = 0; i2 < this.columnNum; i2++) {
          tmp = this.columnData[i2][this.defaultSelector[i2]];
          let data = {
            index: this.defaultSelector[i2],
            value: tmp ? tmp[this.valueName] : null,
            label: tmp ? tmp[this.labelName] : null
          };
          if (tmp && tmp.extra !== void 0)
            data.extra = tmp.extra;
          this.selectValue.push(data);
        }
      },
      // 列选项
      columnChange(e2) {
        let index = null;
        let columnIndex = e2.detail.value;
        this.selectValue = [];
        if (this.mode == "mutil-column-auto") {
          this.lastSelectIndex.map((val2, idx) => {
            if (val2 != columnIndex[idx])
              index = idx;
          });
          this.defaultSelector = columnIndex;
          for (let i2 = index + 1; i2 < this.columnNum; i2++) {
            this.columnData[i2] = this.columnData[i2 - 1][i2 - 1 == index ? columnIndex[index] : 0][this.childName];
            this.defaultSelector[i2] = 0;
          }
          columnIndex.map((item, index2) => {
            let data = this.columnData[index2][columnIndex[index2]];
            let tmp = {
              index: columnIndex[index2],
              value: data ? data[this.valueName] : null,
              label: data ? data[this.labelName] : null
            };
            if (data && data.extra !== void 0)
              tmp.extra = data.extra;
            this.selectValue.push(tmp);
          });
          this.lastSelectIndex = columnIndex;
        } else if (this.mode == "single-column") {
          let data = this.columnData[0][columnIndex[0]];
          let tmp = {
            index: columnIndex[0],
            value: data ? data[this.valueName] : null,
            label: data ? data[this.labelName] : null
          };
          if (data && data.extra !== void 0)
            tmp.extra = data.extra;
          this.selectValue.push(tmp);
          this.lastSelectIndex = columnIndex;
        } else if (this.mode == "mutil-column") {
          columnIndex.map((item, index2) => {
            let data = this.columnData[index2][columnIndex[index2]];
            let tmp = {
              index: columnIndex[index2],
              value: data ? data[this.valueName] : null,
              label: data ? data[this.labelName] : null
            };
            if (data && data.extra !== void 0)
              tmp.extra = data.extra;
            this.selectValue.push(tmp);
          });
          this.lastSelectIndex = columnIndex;
        }
      },
      close() {
        this.$emit("input", false);
        this.$emit("update:modelValue", false);
      },
      // 点击确定或者取消
      getResult(event = null) {
        if (event)
          this.$emit(event, this.selectValue);
        this.close();
      },
      selectHandler() {
        this.$emit("click");
      }
    }
  };
  function _sfc_render$U(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_u_popup = resolveEasycom(vue.resolveDynamicComponent("u-popup"), __easycom_3$4);
    return vue.openBlock(), vue.createElementBlock("view", { class: "u-select" }, [
      vue.createVNode(_component_u_popup, {
        blur: $props.blur,
        maskCloseAble: $props.maskCloseAble,
        mode: "bottom",
        popup: false,
        modelValue: $data.popupValue,
        "onUpdate:modelValue": _cache[7] || (_cache[7] = ($event) => $data.popupValue = $event),
        length: "auto",
        safeAreaInsetBottom: $props.safeAreaInsetBottom,
        onClose: $options.close,
        "z-index": $options.uZIndex
      }, {
        default: vue.withCtx(() => [
          vue.createElementVNode("view", { class: "u-select" }, [
            vue.createElementVNode(
              "view",
              {
                class: "u-select__header",
                onTouchmove: _cache[3] || (_cache[3] = vue.withModifiers(() => {
                }, ["stop", "prevent"]))
              },
              [
                vue.createElementVNode(
                  "view",
                  {
                    class: "u-select__header__cancel u-select__header__btn",
                    style: vue.normalizeStyle({ color: $props.cancelColor }),
                    "hover-class": "u-hover-class",
                    "hover-stay-time": 150,
                    onClick: _cache[0] || (_cache[0] = ($event) => $options.getResult("cancel"))
                  },
                  vue.toDisplayString($props.cancelText),
                  5
                  /* TEXT, STYLE */
                ),
                vue.createElementVNode(
                  "view",
                  { class: "u-select__header__title" },
                  vue.toDisplayString($props.title),
                  1
                  /* TEXT */
                ),
                vue.createElementVNode(
                  "view",
                  {
                    class: "u-select__header__confirm u-select__header__btn",
                    style: vue.normalizeStyle({ color: $data.moving ? $props.cancelColor : $props.confirmColor }),
                    "hover-class": "u-hover-class",
                    "hover-stay-time": 150,
                    onTouchmove: _cache[1] || (_cache[1] = vue.withModifiers(() => {
                    }, ["stop"])),
                    onClick: _cache[2] || (_cache[2] = vue.withModifiers(($event) => $options.getResult("confirm"), ["stop"]))
                  },
                  vue.toDisplayString($props.confirmText),
                  37
                  /* TEXT, STYLE, NEED_HYDRATION */
                )
              ],
              32
              /* NEED_HYDRATION */
            ),
            vue.createElementVNode("view", { class: "u-select__body" }, [
              $data.columnData && $data.columnData.length > 0 ? (vue.openBlock(), vue.createElementBlock("picker-view", {
                key: 0,
                onChange: _cache[4] || (_cache[4] = (...args) => $options.columnChange && $options.columnChange(...args)),
                class: "u-select__body__picker-view",
                value: $data.defaultSelector,
                onPickstart: _cache[5] || (_cache[5] = (...args) => $options.pickstart && $options.pickstart(...args)),
                onPickend: _cache[6] || (_cache[6] = (...args) => $options.pickend && $options.pickend(...args))
              }, [
                $options.showColumnCom ? (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  { key: 0 },
                  vue.renderList($data.columnData, (item, index) => {
                    return vue.openBlock(), vue.createElementBlock("picker-view-column", { key: index }, [
                      (vue.openBlock(true), vue.createElementBlock(
                        vue.Fragment,
                        null,
                        vue.renderList(item, (item1, index1) => {
                          return vue.openBlock(), vue.createElementBlock("view", {
                            class: "u-select__body__picker-view__item",
                            key: index1
                          }, [
                            vue.createElementVNode(
                              "view",
                              { class: "u-line-1" },
                              vue.toDisplayString(item1[$props.labelName]),
                              1
                              /* TEXT */
                            )
                          ]);
                        }),
                        128
                        /* KEYED_FRAGMENT */
                      ))
                    ]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                )) : vue.createCommentVNode("v-if", true)
              ], 40, ["value"])) : vue.createCommentVNode("v-if", true)
            ])
          ])
        ]),
        _: 1
        /* STABLE */
      }, 8, ["blur", "maskCloseAble", "modelValue", "safeAreaInsetBottom", "onClose", "z-index"])
    ]);
  }
  const __easycom_3$1 = /* @__PURE__ */ _export_sfc(_sfc_main$V, [["render", _sfc_render$U], ["__scopeId", "data-v-2ab5fcb0"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/uni_modules/vk-uview-ui/components/u-select/u-select.vue"]]);
  const _sfc_main$U = {
    __name: "supplementInfo",
    setup(__props, { expose: __expose }) {
      __expose();
      const showGender = vue.ref(false);
      const avatar = vue.ref("");
      const nickname = vue.ref("");
      const gender = vue.ref(null);
      const genders = vue.ref(["男", "女"]);
      const genderText = vue.computed(() => gender.value === "male" ? "男" : "女");
      const chooseAvatar = () => {
        formatAppLog("log", "at pages/supplementInfo/supplementInfo.vue:68", "选择头像");
        uni.chooseImage({
          count: 1,
          success: (res2) => {
            avatar.value = res2.tempFilePaths[0];
          }
        });
      };
      const chooseGender = () => {
        uni.showActionSheet({
          itemList: ["男", "女"],
          success: (res2) => {
            gender.value = res2.tapIndex === 0 ? "male" : "female";
          }
        });
      };
      const goBack = () => {
        uni.navigateBack();
      };
      const saveInfo = async () => {
        if (nickname.value == "") {
          uni.showToast({
            title: "请输入昵称",
            icon: "error"
          });
          return;
        }
        if (genderText == null) {
          uni.showToast({
            title: "请选择性别",
            icon: "error"
          });
          return;
        }
        if (avatar.value == "") {
          uni.showToast({
            title: "请选择头像",
            icon: "error"
          });
          return;
        }
        let resp = await uploadFile(baseURL$1 + "/api/common/upload", avatar.value);
        let userInfo = uni.getStorageSync("currentUser");
        userInfo.avatar = resp.data.url;
        formatAppLog("log", "at pages/supplementInfo/supplementInfo.vue:118", resp.data.url);
        userInfo.realName = nickname.value;
        userInfo.gender = genderText.value;
        formatAppLog("log", "at pages/supplementInfo/supplementInfo.vue:121", userInfo);
        let response = await updateUser(userInfo);
        if (response.code == 0) {
          uni.reLaunch({
            url: "/pages/index/index"
          });
        }
        uni.showToast({
          title: "保存成功",
          icon: "success"
        });
      };
      const __returned__ = { showGender, avatar, nickname, gender, genders, genderText, chooseAvatar, chooseGender, goBack, saveInfo, ref: vue.ref, computed: vue.computed, get uploadFile() {
        return uploadFile;
      }, get baseURL() {
        return baseURL$1;
      }, get updateUser() {
        return updateUser;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$T(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_u_button = resolveEasycom(vue.resolveDynamicComponent("u-button"), __easycom_1$2);
    const _component_u_navbar = resolveEasycom(vue.resolveDynamicComponent("u-navbar"), __easycom_0$1);
    const _component_u_avatar = resolveEasycom(vue.resolveDynamicComponent("u-avatar"), __easycom_2$7);
    const _component_u_select = resolveEasycom(vue.resolveDynamicComponent("u-select"), __easycom_3$1);
    const _component_u_icon = resolveEasycom(vue.resolveDynamicComponent("u-icon"), __easycom_2$b);
    return vue.openBlock(), vue.createElementBlock("view", { class: "profile-page" }, [
      vue.createVNode(_component_u_navbar, { title: "个人资料" }, {
        right: vue.withCtx(() => [
          vue.createVNode(_component_u_button, {
            size: "mini",
            type: "success",
            onClick: $setup.saveInfo,
            style: { "margin-right": "30rpx" }
          }, {
            default: vue.withCtx(() => [
              vue.createTextVNode("保存")
            ]),
            _: 1
            /* STABLE */
          })
        ]),
        _: 1
        /* STABLE */
      }),
      vue.createElementVNode("view", { class: "avatar-section" }, [
        vue.createElementVNode("view", { class: "avatar-box" }, [
          vue.createVNode(_component_u_avatar, {
            src: $setup.avatar,
            size: "128",
            onClick: $setup.chooseAvatar
          }, null, 8, ["src"])
        ])
      ]),
      vue.createElementVNode("view", { class: "info-list" }, [
        vue.createElementVNode("view", { class: "info-item" }, [
          vue.createElementVNode("text", { class: "label" }, "昵称"),
          vue.withDirectives(vue.createElementVNode(
            "input",
            {
              class: "input",
              type: "text",
              "onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => $setup.nickname = $event),
              placeholder: "请输入",
              "placeholder-style": "color:#ccc;"
            },
            null,
            512
            /* NEED_PATCH */
          ), [
            [vue.vModelText, $setup.nickname]
          ])
        ]),
        vue.createElementVNode("view", {
          class: "info-item",
          onClick: $setup.chooseGender
        }, [
          vue.createElementVNode("text", { class: "label" }, "性别"),
          vue.createElementVNode("view", { class: "right" }, [
            vue.createElementVNode(
              "text",
              { class: "value" },
              vue.toDisplayString($setup.genderText),
              1
              /* TEXT */
            ),
            vue.createVNode(_component_u_select),
            $setup.genderText == null ? (vue.openBlock(), vue.createElementBlock("text", {
              key: 0,
              class: "arrow"
            }, "请选择")) : vue.createCommentVNode("v-if", true),
            vue.createVNode(_component_u_icon, { name: "arrow-right" })
          ])
        ])
      ])
    ]);
  }
  const PagesSupplementInfoSupplementInfo = /* @__PURE__ */ _export_sfc(_sfc_main$U, [["render", _sfc_render$T], ["__scopeId", "data-v-538e9d08"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/supplementInfo/supplementInfo.vue"]]);
  const _sfc_main$T = {
    __name: "serviceSettings",
    setup(__props, { expose: __expose }) {
      __expose();
      const serviceType = vue.ref(null);
      onLoad((options) => {
        serviceType.value = JSON.parse(options.type);
      });
      const gotoPersonSettingPage = () => {
        const { id: id2, userRole } = serviceType.value;
        uni.navigateTo({
          url: `/pages/forum/my/userInfo?type=${userRole}&userInfo=${JSON.stringify(id2)}`
        });
      };
      const gotoServiceSettingPage = () => {
        const { id: id2, userRole } = serviceType.value;
        uni.navigateTo({
          url: `/pages/forum/service/auth?type=${userRole}&userInfo=${JSON.stringify(id2)}`
        });
      };
      const __returned__ = { serviceType, gotoPersonSettingPage, gotoServiceSettingPage, get onLoad() {
        return onLoad;
      }, ref: vue.ref };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$S(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_u_icon = resolveEasycom(vue.resolveDynamicComponent("u-icon"), __easycom_2$b);
    return vue.openBlock(), vue.createElementBlock("view", { style: { "padding": "30rpx" } }, [
      vue.createElementVNode("text", null, "个人设置"),
      vue.createElementVNode("view", { class: "menu" }, [
        vue.createElementVNode("view", {
          class: "menu-item",
          style: { "border-bottom": "1rpx solid #e6e6e6" },
          onClick: $setup.gotoPersonSettingPage
        }, [
          vue.createElementVNode("text", null, "基本资料"),
          vue.createVNode(_component_u_icon, { name: "arrow-right" })
        ]),
        vue.createElementVNode("view", {
          class: "menu-item",
          onClick: $setup.gotoServiceSettingPage
        }, [
          vue.createElementVNode("text", null, "服务资料"),
          vue.createElementVNode("view", null, [
            vue.createElementVNode("text", { style: { "font-size": "26rpx", "color": "#868686" } }, "服务类型，资质证书"),
            vue.createVNode(_component_u_icon, { name: "arrow-right" })
          ])
        ])
      ])
    ]);
  }
  const PagesSettingsServiceSettings = /* @__PURE__ */ _export_sfc(_sfc_main$T, [["render", _sfc_render$S], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/settings/serviceSettings.vue"]]);
  const _sfc_main$S = {
    __name: "help-center",
    setup(__props, { expose: __expose }) {
      __expose();
      vue.useCssVars((_ctx) => ({
        "c04bd148-statusBarHeight": statusBarHeight.value
      }));
      const globalStore = useGlobalDataStore();
      const statusBarHeight = vue.ref(globalStore.statusBarHeight + "px");
      const scrollTop = vue.ref(0);
      onPageScroll((e2) => {
        scrollTop.value = e2.scrollTop;
      });
      const backFn = () => {
        uni.navigateBack({
          delta: 1
        });
      };
      const clauses = vue.ref([]);
      const getAgreementData = async () => {
        const { data } = await getAgreement({ current: 1, size: 100, type: "5" });
        clauses.value = data.records.filter((item) => item.type === "5");
      };
      onShow(() => {
        getAgreementData();
      });
      const toggleClause = (index) => {
        clauses.value[index].expanded = !clauses.value[index].expanded;
      };
      const __returned__ = { globalStore, statusBarHeight, scrollTop, backFn, clauses, getAgreementData, toggleClause, ref: vue.ref, get useGlobalDataStore() {
        return useGlobalDataStore;
      }, get onShow() {
        return onShow;
      }, get onPageScroll() {
        return onPageScroll;
      }, get getAgreement() {
        return getAgreement;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$R(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    const _component_uni_nav_bar = resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"), __easycom_1$4);
    return vue.openBlock(), vue.createElementBlock("view", { class: "settled-box" }, [
      vue.createElementVNode("view", { class: "header" }, [
        vue.createVNode(_component_uni_nav_bar, {
          class: vue.normalizeClass([$setup.scrollTop > 15 ? "scrollClass" : "", "header-bar"]),
          backgroundColor: "rgba(255,255,255,0)",
          border: false,
          title: "帮助中心"
        }, {
          left: vue.withCtx(() => [
            vue.createVNode(_component_uni_icons, {
              type: "left",
              size: "24",
              onClick: $setup.backFn
            })
          ]),
          right: vue.withCtx(() => [
            vue.createElementVNode("view", { class: "right" }, [
              vue.createElementVNode("image", {
                src: _imports_0$o,
                style: { "width": "40rpx", "height": "40rpx" }
              })
            ])
          ]),
          _: 1
          /* STABLE */
        }, 8, ["class"])
      ]),
      vue.createElementVNode("view", { class: "content" }, [
        vue.createElementVNode("view", { class: "clause" }, [
          (vue.openBlock(true), vue.createElementBlock(
            vue.Fragment,
            null,
            vue.renderList($setup.clauses, (item, index) => {
              return vue.openBlock(), vue.createElementBlock("view", { class: "clause-item" }, [
                vue.createElementVNode("view", {
                  onClick: ($event) => $setup.toggleClause(index),
                  class: "item-title"
                }, [
                  vue.createElementVNode(
                    "view",
                    null,
                    vue.toDisplayString(item.title),
                    1
                    /* TEXT */
                  ),
                  vue.createVNode(_component_uni_icons, {
                    type: item.expanded ? "up" : "down",
                    size: "15",
                    color: item.expanded ? "#eea84c" : "#57b584"
                  }, null, 8, ["type", "color"])
                ], 8, ["onClick"]),
                vue.createElementVNode(
                  "view",
                  {
                    class: vue.normalizeClass(["item-desc", { expanded: item.expanded }])
                  },
                  [
                    vue.createElementVNode("view", {
                      innerHTML: item.content
                    }, null, 8, ["innerHTML"])
                  ],
                  2
                  /* CLASS */
                )
              ]);
            }),
            256
            /* UNKEYED_FRAGMENT */
          ))
        ])
      ])
    ]);
  }
  const PagesSettingsHelpCenter = /* @__PURE__ */ _export_sfc(_sfc_main$S, [["render", _sfc_render$R], ["__scopeId", "data-v-c04bd148"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/settings/help-center.vue"]]);
  var dayjs_min = { exports: {} };
  (function(module2, exports2) {
    !function(t2, e2) {
      module2.exports = e2();
    }(commonjsGlobal, function() {
      var t2 = 1e3, e2 = 6e4, n2 = 36e5, r2 = "millisecond", i2 = "second", s2 = "minute", u2 = "hour", a2 = "day", o2 = "week", c2 = "month", f2 = "quarter", h2 = "year", d2 = "date", l2 = "Invalid Date", $2 = /^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/, y2 = /\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g, M2 = { name: "en", weekdays: "Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"), months: "January_February_March_April_May_June_July_August_September_October_November_December".split("_"), ordinal: function(t3) {
        var e3 = ["th", "st", "nd", "rd"], n3 = t3 % 100;
        return "[" + t3 + (e3[(n3 - 20) % 10] || e3[n3] || e3[0]) + "]";
      } }, m2 = function(t3, e3, n3) {
        var r3 = String(t3);
        return !r3 || r3.length >= e3 ? t3 : "" + Array(e3 + 1 - r3.length).join(n3) + t3;
      }, v2 = { s: m2, z: function(t3) {
        var e3 = -t3.utcOffset(), n3 = Math.abs(e3), r3 = Math.floor(n3 / 60), i3 = n3 % 60;
        return (e3 <= 0 ? "+" : "-") + m2(r3, 2, "0") + ":" + m2(i3, 2, "0");
      }, m: function t3(e3, n3) {
        if (e3.date() < n3.date())
          return -t3(n3, e3);
        var r3 = 12 * (n3.year() - e3.year()) + (n3.month() - e3.month()), i3 = e3.clone().add(r3, c2), s3 = n3 - i3 < 0, u3 = e3.clone().add(r3 + (s3 ? -1 : 1), c2);
        return +(-(r3 + (n3 - i3) / (s3 ? i3 - u3 : u3 - i3)) || 0);
      }, a: function(t3) {
        return t3 < 0 ? Math.ceil(t3) || 0 : Math.floor(t3);
      }, p: function(t3) {
        return { M: c2, y: h2, w: o2, d: a2, D: d2, h: u2, m: s2, s: i2, ms: r2, Q: f2 }[t3] || String(t3 || "").toLowerCase().replace(/s$/, "");
      }, u: function(t3) {
        return void 0 === t3;
      } }, g2 = "en", D2 = {};
      D2[g2] = M2;
      var p2 = "$isDayjsObject", S2 = function(t3) {
        return t3 instanceof _2 || !(!t3 || !t3[p2]);
      }, w2 = function t3(e3, n3, r3) {
        var i3;
        if (!e3)
          return g2;
        if ("string" == typeof e3) {
          var s3 = e3.toLowerCase();
          D2[s3] && (i3 = s3), n3 && (D2[s3] = n3, i3 = s3);
          var u3 = e3.split("-");
          if (!i3 && u3.length > 1)
            return t3(u3[0]);
        } else {
          var a3 = e3.name;
          D2[a3] = e3, i3 = a3;
        }
        return !r3 && i3 && (g2 = i3), i3 || !r3 && g2;
      }, O2 = function(t3, e3) {
        if (S2(t3))
          return t3.clone();
        var n3 = "object" == typeof e3 ? e3 : {};
        return n3.date = t3, n3.args = arguments, new _2(n3);
      }, b2 = v2;
      b2.l = w2, b2.i = S2, b2.w = function(t3, e3) {
        return O2(t3, { locale: e3.$L, utc: e3.$u, x: e3.$x, $offset: e3.$offset });
      };
      var _2 = function() {
        function M3(t3) {
          this.$L = w2(t3.locale, null, true), this.parse(t3), this.$x = this.$x || t3.x || {}, this[p2] = true;
        }
        var m3 = M3.prototype;
        return m3.parse = function(t3) {
          this.$d = function(t4) {
            var e3 = t4.date, n3 = t4.utc;
            if (null === e3)
              return /* @__PURE__ */ new Date(NaN);
            if (b2.u(e3))
              return /* @__PURE__ */ new Date();
            if (e3 instanceof Date)
              return new Date(e3);
            if ("string" == typeof e3 && !/Z$/i.test(e3)) {
              var r3 = e3.match($2);
              if (r3) {
                var i3 = r3[2] - 1 || 0, s3 = (r3[7] || "0").substring(0, 3);
                return n3 ? new Date(Date.UTC(r3[1], i3, r3[3] || 1, r3[4] || 0, r3[5] || 0, r3[6] || 0, s3)) : new Date(r3[1], i3, r3[3] || 1, r3[4] || 0, r3[5] || 0, r3[6] || 0, s3);
              }
            }
            return new Date(e3);
          }(t3), this.init();
        }, m3.init = function() {
          var t3 = this.$d;
          this.$y = t3.getFullYear(), this.$M = t3.getMonth(), this.$D = t3.getDate(), this.$W = t3.getDay(), this.$H = t3.getHours(), this.$m = t3.getMinutes(), this.$s = t3.getSeconds(), this.$ms = t3.getMilliseconds();
        }, m3.$utils = function() {
          return b2;
        }, m3.isValid = function() {
          return !(this.$d.toString() === l2);
        }, m3.isSame = function(t3, e3) {
          var n3 = O2(t3);
          return this.startOf(e3) <= n3 && n3 <= this.endOf(e3);
        }, m3.isAfter = function(t3, e3) {
          return O2(t3) < this.startOf(e3);
        }, m3.isBefore = function(t3, e3) {
          return this.endOf(e3) < O2(t3);
        }, m3.$g = function(t3, e3, n3) {
          return b2.u(t3) ? this[e3] : this.set(n3, t3);
        }, m3.unix = function() {
          return Math.floor(this.valueOf() / 1e3);
        }, m3.valueOf = function() {
          return this.$d.getTime();
        }, m3.startOf = function(t3, e3) {
          var n3 = this, r3 = !!b2.u(e3) || e3, f3 = b2.p(t3), l3 = function(t4, e4) {
            var i3 = b2.w(n3.$u ? Date.UTC(n3.$y, e4, t4) : new Date(n3.$y, e4, t4), n3);
            return r3 ? i3 : i3.endOf(a2);
          }, $3 = function(t4, e4) {
            return b2.w(n3.toDate()[t4].apply(n3.toDate("s"), (r3 ? [0, 0, 0, 0] : [23, 59, 59, 999]).slice(e4)), n3);
          }, y3 = this.$W, M4 = this.$M, m4 = this.$D, v3 = "set" + (this.$u ? "UTC" : "");
          switch (f3) {
            case h2:
              return r3 ? l3(1, 0) : l3(31, 11);
            case c2:
              return r3 ? l3(1, M4) : l3(0, M4 + 1);
            case o2:
              var g3 = this.$locale().weekStart || 0, D3 = (y3 < g3 ? y3 + 7 : y3) - g3;
              return l3(r3 ? m4 - D3 : m4 + (6 - D3), M4);
            case a2:
            case d2:
              return $3(v3 + "Hours", 0);
            case u2:
              return $3(v3 + "Minutes", 1);
            case s2:
              return $3(v3 + "Seconds", 2);
            case i2:
              return $3(v3 + "Milliseconds", 3);
            default:
              return this.clone();
          }
        }, m3.endOf = function(t3) {
          return this.startOf(t3, false);
        }, m3.$set = function(t3, e3) {
          var n3, o3 = b2.p(t3), f3 = "set" + (this.$u ? "UTC" : ""), l3 = (n3 = {}, n3[a2] = f3 + "Date", n3[d2] = f3 + "Date", n3[c2] = f3 + "Month", n3[h2] = f3 + "FullYear", n3[u2] = f3 + "Hours", n3[s2] = f3 + "Minutes", n3[i2] = f3 + "Seconds", n3[r2] = f3 + "Milliseconds", n3)[o3], $3 = o3 === a2 ? this.$D + (e3 - this.$W) : e3;
          if (o3 === c2 || o3 === h2) {
            var y3 = this.clone().set(d2, 1);
            y3.$d[l3]($3), y3.init(), this.$d = y3.set(d2, Math.min(this.$D, y3.daysInMonth())).$d;
          } else
            l3 && this.$d[l3]($3);
          return this.init(), this;
        }, m3.set = function(t3, e3) {
          return this.clone().$set(t3, e3);
        }, m3.get = function(t3) {
          return this[b2.p(t3)]();
        }, m3.add = function(r3, f3) {
          var d3, l3 = this;
          r3 = Number(r3);
          var $3 = b2.p(f3), y3 = function(t3) {
            var e3 = O2(l3);
            return b2.w(e3.date(e3.date() + Math.round(t3 * r3)), l3);
          };
          if ($3 === c2)
            return this.set(c2, this.$M + r3);
          if ($3 === h2)
            return this.set(h2, this.$y + r3);
          if ($3 === a2)
            return y3(1);
          if ($3 === o2)
            return y3(7);
          var M4 = (d3 = {}, d3[s2] = e2, d3[u2] = n2, d3[i2] = t2, d3)[$3] || 1, m4 = this.$d.getTime() + r3 * M4;
          return b2.w(m4, this);
        }, m3.subtract = function(t3, e3) {
          return this.add(-1 * t3, e3);
        }, m3.format = function(t3) {
          var e3 = this, n3 = this.$locale();
          if (!this.isValid())
            return n3.invalidDate || l2;
          var r3 = t3 || "YYYY-MM-DDTHH:mm:ssZ", i3 = b2.z(this), s3 = this.$H, u3 = this.$m, a3 = this.$M, o3 = n3.weekdays, c3 = n3.months, f3 = n3.meridiem, h3 = function(t4, n4, i4, s4) {
            return t4 && (t4[n4] || t4(e3, r3)) || i4[n4].slice(0, s4);
          }, d3 = function(t4) {
            return b2.s(s3 % 12 || 12, t4, "0");
          }, $3 = f3 || function(t4, e4, n4) {
            var r4 = t4 < 12 ? "AM" : "PM";
            return n4 ? r4.toLowerCase() : r4;
          };
          return r3.replace(y2, function(t4, r4) {
            return r4 || function(t5) {
              switch (t5) {
                case "YY":
                  return String(e3.$y).slice(-2);
                case "YYYY":
                  return b2.s(e3.$y, 4, "0");
                case "M":
                  return a3 + 1;
                case "MM":
                  return b2.s(a3 + 1, 2, "0");
                case "MMM":
                  return h3(n3.monthsShort, a3, c3, 3);
                case "MMMM":
                  return h3(c3, a3);
                case "D":
                  return e3.$D;
                case "DD":
                  return b2.s(e3.$D, 2, "0");
                case "d":
                  return String(e3.$W);
                case "dd":
                  return h3(n3.weekdaysMin, e3.$W, o3, 2);
                case "ddd":
                  return h3(n3.weekdaysShort, e3.$W, o3, 3);
                case "dddd":
                  return o3[e3.$W];
                case "H":
                  return String(s3);
                case "HH":
                  return b2.s(s3, 2, "0");
                case "h":
                  return d3(1);
                case "hh":
                  return d3(2);
                case "a":
                  return $3(s3, u3, true);
                case "A":
                  return $3(s3, u3, false);
                case "m":
                  return String(u3);
                case "mm":
                  return b2.s(u3, 2, "0");
                case "s":
                  return String(e3.$s);
                case "ss":
                  return b2.s(e3.$s, 2, "0");
                case "SSS":
                  return b2.s(e3.$ms, 3, "0");
                case "Z":
                  return i3;
              }
              return null;
            }(t4) || i3.replace(":", "");
          });
        }, m3.utcOffset = function() {
          return 15 * -Math.round(this.$d.getTimezoneOffset() / 15);
        }, m3.diff = function(r3, d3, l3) {
          var $3, y3 = this, M4 = b2.p(d3), m4 = O2(r3), v3 = (m4.utcOffset() - this.utcOffset()) * e2, g3 = this - m4, D3 = function() {
            return b2.m(y3, m4);
          };
          switch (M4) {
            case h2:
              $3 = D3() / 12;
              break;
            case c2:
              $3 = D3();
              break;
            case f2:
              $3 = D3() / 3;
              break;
            case o2:
              $3 = (g3 - v3) / 6048e5;
              break;
            case a2:
              $3 = (g3 - v3) / 864e5;
              break;
            case u2:
              $3 = g3 / n2;
              break;
            case s2:
              $3 = g3 / e2;
              break;
            case i2:
              $3 = g3 / t2;
              break;
            default:
              $3 = g3;
          }
          return l3 ? $3 : b2.a($3);
        }, m3.daysInMonth = function() {
          return this.endOf(c2).$D;
        }, m3.$locale = function() {
          return D2[this.$L];
        }, m3.locale = function(t3, e3) {
          if (!t3)
            return this.$L;
          var n3 = this.clone(), r3 = w2(t3, e3, true);
          return r3 && (n3.$L = r3), n3;
        }, m3.clone = function() {
          return b2.w(this.$d, this);
        }, m3.toDate = function() {
          return new Date(this.valueOf());
        }, m3.toJSON = function() {
          return this.isValid() ? this.toISOString() : null;
        }, m3.toISOString = function() {
          return this.$d.toISOString();
        }, m3.toString = function() {
          return this.$d.toUTCString();
        }, M3;
      }(), k = _2.prototype;
      return O2.prototype = k, [["$ms", r2], ["$s", i2], ["$m", s2], ["$H", u2], ["$W", a2], ["$M", c2], ["$y", h2], ["$D", d2]].forEach(function(t3) {
        k[t3[1]] = function(e3) {
          return this.$g(e3, t3[0], t3[1]);
        };
      }), O2.extend = function(t3, e3) {
        return t3.$i || (t3(e3, _2, O2), t3.$i = true), O2;
      }, O2.locale = w2, O2.isDayjs = S2, O2.unix = function(t3) {
        return O2(1e3 * t3);
      }, O2.en = D2[g2], O2.Ls = D2, O2.p = {}, O2;
    });
  })(dayjs_min);
  var dayjs_minExports = dayjs_min.exports;
  const dayjs = /* @__PURE__ */ getDefaultExportFromCjs(dayjs_minExports);
  var zhCn = { exports: {} };
  (function(module2, exports2) {
    !function(e2, _2) {
      module2.exports = _2(dayjs_minExports);
    }(commonjsGlobal, function(e2) {
      function _2(e3) {
        return e3 && "object" == typeof e3 && "default" in e3 ? e3 : { default: e3 };
      }
      var t2 = _2(e2), d2 = { name: "zh-cn", weekdays: "星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"), weekdaysShort: "周日_周一_周二_周三_周四_周五_周六".split("_"), weekdaysMin: "日_一_二_三_四_五_六".split("_"), months: "一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"), monthsShort: "1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"), ordinal: function(e3, _3) {
        return "W" === _3 ? e3 + "周" : e3 + "日";
      }, weekStart: 1, yearStart: 4, formats: { LT: "HH:mm", LTS: "HH:mm:ss", L: "YYYY/MM/DD", LL: "YYYY年M月D日", LLL: "YYYY年M月D日Ah点mm分", LLLL: "YYYY年M月D日ddddAh点mm分", l: "YYYY/M/D", ll: "YYYY年M月D日", lll: "YYYY年M月D日 HH:mm", llll: "YYYY年M月D日dddd HH:mm" }, relativeTime: { future: "%s内", past: "%s前", s: "几秒", m: "1 分钟", mm: "%d 分钟", h: "1 小时", hh: "%d 小时", d: "1 天", dd: "%d 天", M: "1 个月", MM: "%d 个月", y: "1 年", yy: "%d 年" }, meridiem: function(e3, _3) {
        var t3 = 100 * e3 + _3;
        return t3 < 600 ? "凌晨" : t3 < 900 ? "早上" : t3 < 1100 ? "上午" : t3 < 1300 ? "中午" : t3 < 1800 ? "下午" : "晚上";
      } };
      return t2.default.locale(d2, null, true), d2;
    });
  })(zhCn);
  const _sfc_main$R = {
    __name: "service-setup",
    setup(__props, { expose: __expose }) {
      __expose();
      vue.useCssVars((_ctx) => ({
        "1ad96ed9-statusBarHeight": statusBarHeight.value
      }));
      const globalStore = useGlobalDataStore();
      const statusBarHeight = vue.ref(globalStore.statusBarHeight + "px");
      const typeId = vue.ref({});
      const img = vue.ref("select-green");
      const colorText = vue.ref("#34A76F");
      onLoad((options) => {
        typeId.value = JSON.parse(options.type);
        colorText.value = typeId.value.userRole == "1" ? "#34A76F" : "#eb9516";
        img.value = typeId.value.userRole == "1" ? "select-green" : "select-yellow";
      });
      const quoteList = vue.ref([]);
      const getQuoteList = async () => {
        try {
          const api = typeId.value.userRole == "1" ? consultantList : listenerList;
          const res2 = await api(typeId.value.id);
          quoteList.value = res2.data.map((item) => ({
            ...item,
            selected: false
          }));
        } catch (error) {
          formatAppLog("error", "at pages/settings/service-setup.vue:257", "Failed to fetch quote list:", error);
        }
      };
      onShow(() => {
        getQuoteList();
      });
      const colorType = vue.ref(1);
      const serviceList2 = (val2) => {
        colorType.value = val2;
      };
      const backFn = () => {
        uni.navigateBack({
          delta: 1
        });
      };
      const scrollTop = vue.ref(0);
      onPageScroll((e2) => {
        scrollTop.value = e2.scrollTop;
      });
      const popupOriginList = vue.ref([
        {
          id: 1,
          type: "img",
          icon: "/static/my/consulting-video.png",
          title: "视频",
          width: "70rpx",
          height: "50rpx"
        },
        {
          id: 2,
          type: "img",
          icon: "/static/my/consulting-speech.png",
          title: "语音",
          width: "60rpx",
          height: "70rpx"
        },
        { id: 3, type: "icon", title: "文字", width: "0", height: "0" }
      ]);
      const popupList = vue.computed(() => {
        const { userRole } = typeId.value;
        if (userRole == 1) {
          return popupOriginList.value.filter((item) => item.id !== 3);
        } else if (userRole == 2) {
          return popupOriginList.value.filter((item) => item.id !== 1);
        }
        return popupOriginList;
      });
      const popup = vue.ref(null);
      const serviceAdd = () => {
        popup.value.open("bottom");
      };
      const unipopupClose = () => {
        popup.value.close();
      };
      const wayAdd = (item) => {
        popup.value.close();
        uni.navigateTo({
          url: `/pages/settings/service-price?type=${item.id}&point=${JSON.stringify(
            typeId.value
          )}`
        });
      };
      const processingObj = vue.ref({});
      const toggleSelect = (item) => {
        item.selected = !item.selected;
        processingObj.value = item;
        quoteList.value.forEach((i2) => {
          if (i2 !== item)
            i2.selected = false;
        });
      };
      const serviceEdit = () => {
        if (processingObj.value.id == void 0) {
          return uni.showToast({
            title: "请选择要编辑的服务",
            icon: "none"
          });
        }
        uni.navigateTo({
          url: `/pages/settings/service-price?type=${processingObj.value.serviceQuoteType}&point=${JSON.stringify(typeId.value)}&update=${JSON.stringify(
            processingObj.value
          )}`
        });
      };
      const serviceDelete = async () => {
        if (processingObj.value.id == void 0) {
          return uni.showToast({
            title: "请选择要删除的服务",
            icon: "none"
          });
        }
        try {
          const api = typeId.value.userRole == "1" ? consultantDelete : listenerDelete;
          const res2 = await api(processingObj.value.id);
          uni.showToast({
            title: "删除成功",
            icon: "none"
          });
          getQuoteList();
        } catch (error) {
          formatAppLog("log", "at pages/settings/service-setup.vue:367", error);
        }
      };
      dayjs.locale("zh-cn");
      const getWeekDates = () => {
        const dates = [];
        const todayStr = dayjs().format("YYYY-MM-DD");
        for (let i2 = 0; i2 < 7; i2++) {
          const date2 = dayjs().add(i2, "day");
          const currentDateStr = date2.format("YYYY-MM-DD");
          dates.push({
            dateStr: currentDateStr,
            week: currentDateStr === todayStr ? "今天" : date2.format("ddd"),
            // 星期（如“周四”）
            isAvailable: true
            // 默认全部可约，可根据需求调整
          });
        }
        return dates;
      };
      const currentWeekDates = vue.ref(getWeekDates());
      const selectedDate = vue.ref(currentWeekDates.value[0].dateStr);
      const generateTimeSlots = (startHour, endHour, interval) => {
        const slots = [];
        let current = dayjs().hour(startHour).minute(0);
        const end = dayjs().hour(endHour).minute(0);
        while (current.isBefore(end)) {
          const startTime = current.format("HH:mm");
          current = current.add(interval, "minute");
          const endTime = current.format("HH:mm");
          slots.push({ startTime, endTime });
        }
        return slots;
      };
      const morningSlots = vue.ref(generateTimeSlots(9, 12, 30));
      const afternoonSlots = vue.ref(generateTimeSlots(13, 18, 30));
      const selectedTimeSlots = vue.ref({});
      const toggleTimeSlot = (slot) => {
        if (!selectedTimeSlots.value[selectedDate.value]) {
          selectedTimeSlots.value[selectedDate.value] = [];
        }
        const targetIdx = selectedTimeSlots.value[selectedDate.value].findIndex(
          (item) => item.startTime === slot.startTime && item.endTime === slot.endTime
        );
        if (targetIdx > -1) {
          selectedTimeSlots.value[selectedDate.value].splice(targetIdx, 1);
        } else {
          selectedTimeSlots.value[selectedDate.value].push({ ...slot });
        }
        selectedTimeSlots.value = { ...selectedTimeSlots.value };
      };
      const isSlotSelected = (slot) => {
        var _a;
        return ((_a = selectedTimeSlots.value[selectedDate.value]) == null ? void 0 : _a.some(
          (item) => item.startTime === slot.startTime && item.endTime === slot.endTime
        )) || false;
      };
      const handleSubmit = () => {
        const submitList = [];
        Object.entries(selectedTimeSlots.value).forEach(([date2, slots]) => {
          slots.forEach((slot) => {
            submitList.push({
              consultantId: 24,
              // typeId.value.id, // 顾问ID
              date: `${date2} ${slot.startTime}:00`,
              // 日期+开始时间
              isEnable: 1,
              startTime: slot.startTime,
              endTime: slot.endTime
            });
          });
        });
        postSetBatch(submitList);
      };
      const postSetBatch = async (list) => {
        try {
          const res2 = await setBatch(list);
          uni.showToast({ title: "保存成功", icon: "success" });
        } catch (error) {
          formatAppLog("log", "at pages/settings/service-setup.vue:463", error);
        }
      };
      const __returned__ = { globalStore, statusBarHeight, typeId, img, colorText, quoteList, getQuoteList, colorType, serviceList: serviceList2, backFn, scrollTop, popupOriginList, popupList, popup, serviceAdd, unipopupClose, wayAdd, processingObj, toggleSelect, serviceEdit, serviceDelete, getWeekDates, currentWeekDates, selectedDate, generateTimeSlots, morningSlots, afternoonSlots, selectedTimeSlots, toggleTimeSlot, isSlotSelected, handleSubmit, postSetBatch, get dayjs() {
        return dayjs;
      }, ref: vue.ref, computed: vue.computed, get onLoad() {
        return onLoad;
      }, get useGlobalDataStore() {
        return useGlobalDataStore;
      }, get onShow() {
        return onShow;
      }, get onPageScroll() {
        return onPageScroll;
      }, get setBatch() {
        return setBatch;
      }, get consultantList() {
        return consultantList;
      }, get listenerList() {
        return listenerList;
      }, get listenerDelete() {
        return listenerDelete;
      }, get consultantDelete() {
        return consultantDelete;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$Q(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    const _component_uni_nav_bar = resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"), __easycom_1$4);
    const _component_uni_popup = resolveEasycom(vue.resolveDynamicComponent("uni-popup"), __easycom_3$5);
    return vue.openBlock(), vue.createElementBlock("view", { class: "settled-box" }, [
      vue.createElementVNode("view", { class: "header" }, [
        vue.createVNode(_component_uni_nav_bar, {
          class: vue.normalizeClass([$setup.scrollTop > 15 ? "scrollClass" : "", "header-bar"]),
          backgroundColor: "#fff",
          border: false,
          title: "服务设置"
        }, {
          left: vue.withCtx(() => [
            vue.createVNode(_component_uni_icons, {
              type: "left",
              size: "24",
              onClick: $setup.backFn
            })
          ]),
          right: vue.withCtx(() => [
            $setup.colorType == 1 ? (vue.openBlock(), vue.createElementBlock(
              "view",
              {
                key: 0,
                class: vue.normalizeClass(["right", `right-${$setup.typeId.userRole}`]),
                onClick: $setup.serviceAdd
              },
              "添加",
              2
              /* CLASS */
            )) : vue.createCommentVNode("v-if", true)
          ]),
          _: 1
          /* STABLE */
        }, 8, ["class"])
      ]),
      vue.createElementVNode("view", { class: "content" }, [
        $setup.colorType == 2 ? (vue.openBlock(), vue.createElementBlock("view", {
          key: 0,
          class: "content-list",
          style: { "margin": "30rpx 0 20rpx" }
        }, [
          vue.createElementVNode("view", {
            class: "content-list-item",
            onClick: _cache[0] || (_cache[0] = ($event) => $setup.serviceList(1))
          }, [
            vue.createElementVNode(
              "view",
              {
                style: vue.normalizeStyle({ color: $setup.colorType == 1 ? $setup.colorText : "#959596" })
              },
              "服务列表",
              4
              /* STYLE */
            ),
            $setup.colorType == 1 && $setup.typeId.userRole == 1 ? (vue.openBlock(), vue.createElementBlock("image", {
              key: 0,
              src: _imports_0$k,
              style: { "left": "45rpx" }
            })) : vue.createCommentVNode("v-if", true)
          ]),
          $setup.typeId.userRole == 1 ? (vue.openBlock(), vue.createElementBlock("view", {
            key: 0,
            class: "content-list-item",
            onClick: _cache[1] || (_cache[1] = ($event) => $setup.serviceList(2))
          }, [
            vue.createElementVNode(
              "view",
              {
                style: vue.normalizeStyle({ color: $setup.colorType == 2 ? $setup.colorText : "#959596" })
              },
              "时间列表",
              4
              /* STYLE */
            ),
            $setup.colorType == 2 ? (vue.openBlock(), vue.createElementBlock("image", {
              key: 0,
              src: _imports_0$k,
              style: { "right": "45rpx" }
            })) : vue.createCommentVNode("v-if", true)
          ])) : vue.createCommentVNode("v-if", true)
        ])) : vue.createCommentVNode("v-if", true),
        $setup.colorType == 1 ? (vue.openBlock(), vue.createElementBlock(
          "view",
          {
            key: 1,
            class: vue.normalizeClass(["content-details", `content-details-${$setup.typeId.userRole}`])
          },
          [
            vue.createElementVNode("view", { class: "content-list" }, [
              vue.createElementVNode("view", {
                class: "content-list-item",
                onClick: _cache[2] || (_cache[2] = ($event) => $setup.serviceList(1))
              }, [
                vue.createElementVNode(
                  "view",
                  {
                    style: vue.normalizeStyle({ color: $setup.colorType == 1 ? $setup.colorText : "#959596" })
                  },
                  "服务列表",
                  4
                  /* STYLE */
                ),
                $setup.colorType == 1 && $setup.typeId.userRole == 1 ? (vue.openBlock(), vue.createElementBlock("image", {
                  key: 0,
                  src: _imports_0$k,
                  style: { "left": "45rpx" }
                })) : vue.createCommentVNode("v-if", true)
              ]),
              $setup.typeId.userRole == 1 ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 0,
                class: "content-list-item",
                onClick: _cache[3] || (_cache[3] = ($event) => $setup.serviceList(2))
              }, [
                vue.createElementVNode(
                  "view",
                  {
                    style: vue.normalizeStyle({ color: $setup.colorType == 2 ? $setup.colorText : "#959596" })
                  },
                  "时间列表",
                  4
                  /* STYLE */
                ),
                $setup.colorType == 2 ? (vue.openBlock(), vue.createElementBlock("image", {
                  key: 0,
                  src: _imports_0$k,
                  style: { "right": "45rpx" }
                })) : vue.createCommentVNode("v-if", true)
              ])) : vue.createCommentVNode("v-if", true)
            ]),
            vue.createElementVNode("view", { class: "content-header" }, [
              vue.createElementVNode("view", { class: "content-header-item" }, [
                vue.createElementVNode("view", { style: { "width": "35%", "text-align": "center" } }, "名称"),
                vue.createElementVNode("view", { style: { "width": "20%", "text-align": "center" } }, "咨询方式"),
                vue.createElementVNode("view", { style: { "width": "15%", "text-align": "center" } }, "时长"),
                vue.createElementVNode("view", { style: { "width": "15%", "text-align": "center" } }, "价格")
              ]),
              (vue.openBlock(true), vue.createElementBlock(
                vue.Fragment,
                null,
                vue.renderList($setup.quoteList, (item, index) => {
                  return vue.openBlock(), vue.createElementBlock("view", {
                    class: "content-header-item",
                    key: index,
                    style: { "margin": "20rpx 0" },
                    onClick: vue.withModifiers(($event) => $setup.toggleSelect(item), ["stop"])
                  }, [
                    vue.createElementVNode("view", { style: { "display": "flex", "align-items": "center", "width": "35%" } }, [
                      vue.createElementVNode("image", {
                        src: `/static/auth/${item.selected ? $setup.img : "not-selected"}.png`,
                        style: { "width": "30rpx", "height": "30rpx", "margin-right": "10rpx" }
                      }, null, 8, ["src"]),
                      vue.createElementVNode(
                        "view",
                        null,
                        vue.toDisplayString(item.title),
                        1
                        /* TEXT */
                      )
                    ]),
                    vue.createElementVNode(
                      "view",
                      { style: { "width": "20%", "text-align": "center" } },
                      vue.toDisplayString(item.serviceQuoteType == 1 ? "视频" : item.serviceQuoteType == 2 ? "语音" : "图文"),
                      1
                      /* TEXT */
                    ),
                    vue.createElementVNode(
                      "view",
                      { style: { "width": "16%" } },
                      vue.toDisplayString(item.serviceDuration) + "分钟",
                      1
                      /* TEXT */
                    ),
                    vue.createElementVNode(
                      "view",
                      { style: { "width": "16%" } },
                      "¥ " + vue.toDisplayString(item.quoteAmount),
                      1
                      /* TEXT */
                    )
                  ], 8, ["onClick"]);
                }),
                128
                /* KEYED_FRAGMENT */
              ))
            ]),
            vue.createElementVNode("view", { class: "header-operation" }, [
              vue.createElementVNode("view", { onClick: $setup.serviceEdit }, "编辑"),
              vue.createElementVNode("view", { class: "line" }, "|"),
              vue.createElementVNode("view", { onClick: $setup.serviceDelete }, "删除")
            ])
          ],
          2
          /* CLASS */
        )) : vue.createCommentVNode("v-if", true)
      ]),
      $setup.colorType == 2 && $setup.typeId.userRole == 1 ? (vue.openBlock(), vue.createElementBlock("view", {
        key: 0,
        class: "container"
      }, [
        vue.createElementVNode("scroll-view", {
          "scroll-x": "",
          class: "date-nav"
        }, [
          (vue.openBlock(true), vue.createElementBlock(
            vue.Fragment,
            null,
            vue.renderList($setup.currentWeekDates, (item, idx) => {
              return vue.openBlock(), vue.createElementBlock("view", {
                key: idx,
                class: vue.normalizeClass(["date-item", {
                  active: item.dateStr === $setup.selectedDate,
                  available: item.isAvailable
                }]),
                onClick: ($event) => $setup.selectedDate = item.dateStr
              }, [
                vue.createElementVNode(
                  "view",
                  { class: "week" },
                  vue.toDisplayString(item.week),
                  1
                  /* TEXT */
                ),
                vue.createElementVNode(
                  "view",
                  { class: "date" },
                  vue.toDisplayString(item.dateStr.split("-").slice(1).join("-")),
                  1
                  /* TEXT */
                ),
                item.isAvailable ? (vue.openBlock(), vue.createElementBlock("view", {
                  key: 0,
                  class: "status"
                }, "可约")) : vue.createCommentVNode("v-if", true)
              ], 10, ["onClick"]);
            }),
            128
            /* KEYED_FRAGMENT */
          ))
        ]),
        vue.createElementVNode("view", { class: "time-section" }, [
          vue.createElementVNode("view", { class: "section-title" }, "上午"),
          vue.createElementVNode("view", { class: "slots-wrap" }, [
            (vue.openBlock(true), vue.createElementBlock(
              vue.Fragment,
              null,
              vue.renderList($setup.morningSlots, (slot, idx) => {
                return vue.openBlock(), vue.createElementBlock("view", {
                  key: idx,
                  class: vue.normalizeClass(["slot-item", { selected: $setup.isSlotSelected(slot) }]),
                  onClick: ($event) => $setup.toggleTimeSlot(slot)
                }, vue.toDisplayString(slot.startTime) + "-" + vue.toDisplayString(slot.endTime), 11, ["onClick"]);
              }),
              128
              /* KEYED_FRAGMENT */
            ))
          ]),
          vue.createElementVNode("view", { class: "section-title" }, "下午"),
          vue.createElementVNode("view", { class: "slots-wrap" }, [
            (vue.openBlock(true), vue.createElementBlock(
              vue.Fragment,
              null,
              vue.renderList($setup.afternoonSlots, (slot, idx) => {
                return vue.openBlock(), vue.createElementBlock("view", {
                  key: idx,
                  class: vue.normalizeClass(["slot-item", { selected: $setup.isSlotSelected(slot) }]),
                  onClick: ($event) => $setup.toggleTimeSlot(slot)
                }, vue.toDisplayString(slot.startTime) + "-" + vue.toDisplayString(slot.endTime), 11, ["onClick"]);
              }),
              128
              /* KEYED_FRAGMENT */
            ))
          ])
        ]),
        vue.createElementVNode("view", { class: "btn-group" }, [
          vue.createElementVNode("view", {
            class: "save-btn",
            onClick: $setup.handleSubmit
          }, "保存设置")
        ])
      ])) : vue.createCommentVNode("v-if", true),
      vue.createVNode(
        _component_uni_popup,
        { ref: "popup" },
        {
          default: vue.withCtx(() => [
            vue.createElementVNode("view", { class: "popup-content" }, [
              vue.createElementVNode("view", { class: "popup-header" }, [
                vue.createElementVNode(
                  "view",
                  null,
                  "选择" + vue.toDisplayString($setup.typeId.userRole == 1 ? "咨询" : "倾听") + "方式",
                  1
                  /* TEXT */
                ),
                vue.createVNode(_component_uni_icons, {
                  type: "closeempty",
                  size: "20",
                  class: "close-icon",
                  color: "#A6A6A6",
                  onClick: $setup.unipopupClose
                })
              ]),
              vue.createElementVNode("view", { class: "popup-list" }, [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($setup.popupList, (item, index) => {
                    return vue.openBlock(), vue.createElementBlock("view", {
                      key: index,
                      onClick: ($event) => $setup.wayAdd(item),
                      class: "popup-list-item"
                    }, [
                      item.type == "img" ? (vue.openBlock(), vue.createElementBlock("image", {
                        key: 0,
                        src: item.icon,
                        style: vue.normalizeStyle({ width: item.width, height: item.height })
                      }, null, 12, ["src"])) : (vue.openBlock(), vue.createBlock(_component_uni_icons, {
                        key: 1,
                        type: "wallet",
                        size: "35",
                        color: "#38CC98",
                        class: "popup-list-icon"
                      })),
                      vue.createElementVNode(
                        "view",
                        null,
                        vue.toDisplayString(item.title),
                        1
                        /* TEXT */
                      )
                    ], 8, ["onClick"]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                ))
              ])
            ])
          ]),
          _: 1
          /* STABLE */
        },
        512
        /* NEED_PATCH */
      )
    ]);
  }
  const PagesSettingsServiceSetup = /* @__PURE__ */ _export_sfc(_sfc_main$R, [["render", _sfc_render$Q], ["__scopeId", "data-v-1ad96ed9"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/settings/service-setup.vue"]]);
  const _sfc_main$Q = {
    __name: "service-price",
    setup(__props, { expose: __expose }) {
      __expose();
      vue.useCssVars((_ctx) => ({
        "3f900ab4-statusBarHeight": statusBarHeight.value
      }));
      const globalStore = useGlobalDataStore();
      const statusBarHeight = vue.ref(globalStore.statusBarHeight + "px");
      const array2 = vue.ref(["15分钟", "30分钟", "60分钟", "90分钟"]);
      const index = vue.ref(0);
      const price = vue.ref("");
      const titleName = vue.ref("");
      const userInfo = vue.ref({});
      const Info = async () => {
        try {
          const res2 = await getUserInfo();
          userInfo.value = res2.data;
        } catch (error) {
          formatAppLog("error", "at pages/settings/service-price.vue:138", "Failed to fetch user info:", error);
        }
      };
      const percent = vue.ref(0);
      const operation = async () => {
        try {
          const { data } = await getOperation();
          const { consultantCommissionPercent, listenerCommissionPercent } = data.records[0];
          percent.value = point.value.userRole == "1" ? consultantCommissionPercent : listenerCommissionPercent;
        } catch (error) {
          formatAppLog("error", "at pages/settings/service-price.vue:153", "Failed to fetch user info:", error);
        }
      };
      const barTime = (price2, time) => {
        return (price2 / time).toFixed(2);
      };
      onShow(() => {
        operation();
        Info();
      });
      const calculateCommission = (base, ratePercent) => {
        if (isNaN(base) || isNaN(ratePercent)) {
          formatAppLog("error", "at pages/settings/service-price.vue:166", "基数或提成比例必须是数字");
          return 0;
        }
        const rate = ratePercent / 100;
        const rawValue = base * (1 - rate);
        const roundedValue = Math.round(rawValue * 100) / 100;
        const commission = roundedValue.toFixed(2);
        return Number(commission);
      };
      const bindPickerChange = (e2) => {
        index.value = e2.detail.value;
      };
      const backFn = () => {
        uni.navigateBack({
          delta: 1
        });
      };
      const scrollTop = vue.ref(0);
      onPageScroll((e2) => {
        scrollTop.value = e2.scrollTop;
      });
      const BarTitle = vue.ref("语音服务");
      const type = vue.ref("");
      const point = vue.ref({});
      const updata = vue.ref({});
      onLoad((options) => {
        point.value = JSON.parse(options.point);
        type.value = options.type;
        if (options.update) {
          updata.value = JSON.parse(options.update);
          const { userId, serviceQuoteType, quoteAmount, serviceDuration, title } = updata.value;
          userInfo.value.id = userId;
          type.value = serviceQuoteType;
          price.value = quoteAmount;
          titleName.value = title;
          index.value = serviceDuration == 15 ? 0 : serviceDuration == 30 ? 1 : serviceDuration == 60 ? 2 : 3;
        }
        options.type == 1 ? BarTitle.value = "视频服务" : options.type == 2 ? BarTitle.value = "语音服务" : BarTitle.value = "文字服务";
      });
      const serviceAdd = () => {
        if (titleName.value == "") {
          uni.showToast({
            title: "请输入名称",
            icon: "none"
          });
          return;
        }
        if (price.value == "") {
          uni.showToast({
            title: "建议报价金额",
            icon: "none"
          });
          return;
        }
        const params = {
          userId: userInfo.value.id,
          serviceQuoteType: type.value,
          quoteAmount: price.value,
          title: titleName.value,
          serviceDuration: index.value == 0 ? 15 : index.value == 1 ? 30 : index.value == 2 ? 60 : 90
        };
        if (updata.value.id != void 0) {
          const api = point.value.userRole == "1" ? consultantUpdate : listenerUpdate;
          api({ id: updata.value.id, ...params }).then((res2) => {
            uni.showToast({ title: "报价成功", icon: "none" });
            setTimeout(() => {
              uni.navigateBack({ delta: 1 });
            }, 1500);
            updata.value = {};
          }).catch((err) => {
            uni.showToast({
              title: err.message,
              icon: "none"
            });
          });
        } else {
          const api = point.value.userRole == "1" ? consultantAdd : listenerAdd;
          api(params).then((res2) => {
            uni.showToast({ title: "报价成功", icon: "none" });
            setTimeout(() => {
              uni.navigateBack({ delta: 1 });
            }, 1500);
          }).catch((err) => {
            uni.showToast({
              title: err.message,
              icon: "none"
            });
          });
        }
      };
      const __returned__ = { globalStore, statusBarHeight, array: array2, index, price, titleName, userInfo, Info, percent, operation, barTime, calculateCommission, bindPickerChange, backFn, scrollTop, BarTitle, type, point, updata, serviceAdd, ref: vue.ref, get onLoad() {
        return onLoad;
      }, get useGlobalDataStore() {
        return useGlobalDataStore;
      }, get onShow() {
        return onShow;
      }, get onPageScroll() {
        return onPageScroll;
      }, get consultantAdd() {
        return consultantAdd;
      }, get listenerAdd() {
        return listenerAdd;
      }, get listenerUpdate() {
        return listenerUpdate;
      }, get consultantUpdate() {
        return consultantUpdate;
      }, get getUserInfo() {
        return getUserInfo;
      }, get getOperation() {
        return getOperation;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$P(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    const _component_uni_nav_bar = resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"), __easycom_1$4);
    return vue.openBlock(), vue.createElementBlock("view", { class: "settled-box" }, [
      vue.createElementVNode("view", { class: "header" }, [
        vue.createVNode(_component_uni_nav_bar, {
          class: vue.normalizeClass([$setup.scrollTop > 15 ? "scrollClass" : "", "header-bar"]),
          backgroundColor: "#f4f6f8",
          border: false,
          title: $setup.BarTitle
        }, {
          left: vue.withCtx(() => [
            vue.createVNode(_component_uni_icons, {
              type: "left",
              size: "24",
              onClick: $setup.backFn
            })
          ]),
          right: vue.withCtx(() => [
            vue.createElementVNode(
              "view",
              {
                class: vue.normalizeClass(["right", `right-${$setup.point.userRole}`]),
                onClick: $setup.serviceAdd
              },
              "提交",
              2
              /* CLASS */
            )
          ]),
          _: 1
          /* STABLE */
        }, 8, ["class", "title"])
      ]),
      vue.createElementVNode("view", { class: "content" }, [
        vue.createElementVNode("view", { class: "content-details" }, [
          vue.createElementVNode("view", { class: "tips" }, "修改价格需平台审核，每个月份可修改 2次"),
          vue.createElementVNode("view", { class: "uni-list-cell" }, [
            vue.createElementVNode("view", { class: "uni-list-cell-left" }, "名称"),
            vue.createElementVNode(
              "view",
              {
                class: vue.normalizeClass(["uni-list-cell-db", `uni-list-cell-db-${$setup.point.userRole}`])
              },
              [
                vue.withDirectives(vue.createElementVNode(
                  "input",
                  {
                    class: "uni-input",
                    "onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => $setup.titleName = $event),
                    style: { "text-align": "right" }
                  },
                  null,
                  512
                  /* NEED_PATCH */
                ), [
                  [vue.vModelText, $setup.titleName]
                ])
              ],
              2
              /* CLASS */
            )
          ]),
          vue.createElementVNode("view", { class: "uni-list-cell" }, [
            vue.createElementVNode("view", { class: "uni-list-cell-left" }, [
              vue.createTextVNode(" 价格"),
              vue.createElementVNode("text", { style: { "color": "#a9a9a9" } }, "（含服务费）")
            ]),
            vue.createElementVNode(
              "view",
              {
                class: vue.normalizeClass(["uni-list-cell-db", `uni-list-cell-db-${$setup.point.userRole}`])
              },
              [
                vue.createElementVNode("image", {
                  src: `@/static/my/${$setup.point.userRole == "1" ? "pen" : "yen"}.png`,
                  style: { "width": "30rpx", "height": "30rpx" }
                }, null, 8, ["src"]),
                vue.withDirectives(vue.createElementVNode(
                  "input",
                  {
                    class: "uni-input",
                    "onUpdate:modelValue": _cache[1] || (_cache[1] = ($event) => $setup.price = $event),
                    style: { "text-align": "right", "max-width": "65rpx" }
                  },
                  null,
                  512
                  /* NEED_PATCH */
                ), [
                  [vue.vModelText, $setup.price]
                ]),
                vue.createElementVNode("text", { style: { "margin-left": "10rpx" } }, "元")
              ],
              2
              /* CLASS */
            )
          ]),
          vue.createElementVNode(
            "view",
            { class: "text-tips" },
            vue.toDisplayString($setup.barTime(
              $setup.price,
              $setup.index == 0 ? 15 : $setup.index == 1 ? 30 : $setup.index == 2 ? 60 : 90
            )) + " 元/分钟",
            1
            /* TEXT */
          ),
          vue.createElementVNode(
            "view",
            {
              class: "text-tips",
              style: { "padding-bottom": "20rpx" }
            },
            "不含服务费价：" + vue.toDisplayString($setup.calculateCommission($setup.price, $setup.percent)) + " 元",
            1
            /* TEXT */
          ),
          vue.createElementVNode("view", {
            class: "uni-list-cell",
            style: { "margin-top": "20rpx" }
          }, [
            vue.createElementVNode("view", { class: "uni-list-cell-left" }, " 最低服务时长 "),
            vue.createElementVNode(
              "view",
              {
                class: vue.normalizeClass(["uni-list-cell-db", `uni-list-cell-db-${$setup.point.userRole}`])
              },
              [
                vue.createElementVNode("image", {
                  src: `@/static/my/${$setup.point.userRole == "1" ? "pen" : "yen"}.png`,
                  style: { "width": "30rpx", "height": "30rpx" }
                }, null, 8, ["src"]),
                vue.createElementVNode("picker", {
                  onChange: $setup.bindPickerChange,
                  value: $setup.index,
                  range: $setup.array
                }, [
                  vue.createElementVNode(
                    "view",
                    { class: "uni-input" },
                    vue.toDisplayString($setup.array[$setup.index]),
                    1
                    /* TEXT */
                  )
                ], 40, ["value", "range"])
              ],
              2
              /* CLASS */
            )
          ])
        ]),
        vue.createElementVNode("view", { class: "protocol" }, [
          vue.createElementVNode("view", null, "温馨提示："),
          vue.createElementVNode(
            "text",
            null,
            "1." + vue.toDisplayString($setup.BarTitle) + "为预约服务，为保证服务质量，请您提前做好预约服务准备。\\n",
            1
            /* TEXT */
          ),
          vue.createElementVNode(
            "text",
            null,
            "2.平台将按最低15分钟展示含服务费的价格，服务费为订单金额的" + vue.toDisplayString($setup.percent) + "%，订单收益按不含服务费交易额计算。\\n",
            1
            /* TEXT */
          ),
          vue.createElementVNode("text", null, "3.请您根据自身经验合理填写价格，平台后续也会依据您的评价率、响应率等标准进行审核。\\n")
        ])
      ])
    ]);
  }
  const PagesSettingsServicePrice = /* @__PURE__ */ _export_sfc(_sfc_main$Q, [["render", _sfc_render$P], ["__scopeId", "data-v-3f900ab4"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/settings/service-price.vue"]]);
  const _sfc_main$P = {
    __name: "feedback",
    props: {
      titlePage: {
        type: String,
        default: "意见反馈"
      }
    },
    setup(__props, { expose: __expose }) {
      __expose();
      vue.useCssVars((_ctx) => ({
        "d9359076-statusBarHeight": statusBarHeight.value
      }));
      const globalStore = useGlobalDataStore();
      const statusBarHeight = vue.ref(globalStore.statusBarHeight + "px");
      const props = __props;
      const scrollTop = vue.ref(0);
      onPageScroll((e2) => {
        scrollTop.value = e2.scrollTop;
      });
      const backFn = () => {
        uni.navigateBack({
          delta: 1
        });
      };
      const popup = vue.ref(null);
      const feedbackFrom = vue.ref({
        complaintTypeId: null,
        content: ""
      });
      const items = vue.ref([
        { id: 1, typeName: "使用便捷问题" },
        { id: 2, typeName: "登陆问题" },
        { id: 3, typeName: "安全问题" },
        { id: 4, typeName: "支付问题" },
        { id: 5, typeName: "订单问题" },
        { id: 6, typeName: "账号问题" },
        { id: 7, typeName: "退款问题" }
      ]);
      const complaintSubmit = async () => {
        try {
          const { content, complaintTypeId } = feedbackFrom.value;
          const data = {
            content,
            types: [complaintTypeId]
          };
          let resp = await feedbackSubmit(data);
          popup.value.open("center");
        } catch {
          formatAppLog("log", "at pages/settings/feedback.vue:141", "err");
        }
      };
      const unipopupClose = () => {
        popup.value.close();
      };
      const checkboxChange = (e2) => {
        feedbackFrom.value.complaintTypeId = e2.detail.value;
      };
      const toRecord = () => {
        uni.navigateTo({
          url: "/pages/settings/record"
        });
      };
      onShow(() => {
      });
      const __returned__ = { globalStore, statusBarHeight, props, scrollTop, backFn, popup, feedbackFrom, items, complaintSubmit, unipopupClose, checkboxChange, toRecord, ref: vue.ref, get useGlobalDataStore() {
        return useGlobalDataStore;
      }, get onShow() {
        return onShow;
      }, get onPageScroll() {
        return onPageScroll;
      }, get complaintSubmitPost() {
        return complaintSubmitPost;
      }, get feedbackSubmit() {
        return feedbackSubmit;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$O(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    const _component_uni_nav_bar = resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"), __easycom_1$4);
    const _component_u_button = resolveEasycom(vue.resolveDynamicComponent("u-button"), __easycom_1$2);
    const _component_uni_popup = resolveEasycom(vue.resolveDynamicComponent("uni-popup"), __easycom_3$5);
    return vue.openBlock(), vue.createElementBlock("view", { class: "settled-box" }, [
      vue.createElementVNode("view", { class: "header" }, [
        vue.createVNode(_component_uni_nav_bar, {
          backgroundColor: "rgba(255,255,255,0)",
          border: false,
          title: $props.titlePage,
          class: vue.normalizeClass(["header-bar", $setup.scrollTop > 15 ? "scrollClass" : ""])
        }, {
          left: vue.withCtx(() => [
            vue.createVNode(_component_uni_icons, {
              type: "left",
              size: "24",
              onClick: $setup.backFn
            })
          ]),
          right: vue.withCtx(() => [
            vue.createElementVNode("view", { class: "right" }, [
              vue.createElementVNode("image", {
                src: _imports_0$o,
                style: { "width": "40rpx", "height": "40rpx" }
              })
            ])
          ]),
          _: 1
          /* STABLE */
        }, 8, ["title", "class"])
      ]),
      vue.createElementVNode("view", { class: "content" }, [
        vue.createElementVNode("view", { class: "clause" }, [
          vue.createElementVNode("view", { class: "clause-type" }, [
            vue.createElementVNode("view", null, "请选择您需要反馈的问题类型："),
            vue.createElementVNode(
              "radio-group",
              {
                onChange: $setup.checkboxChange,
                class: "clause-group"
              },
              [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($setup.items, (item) => {
                    return vue.openBlock(), vue.createElementBlock("label", {
                      class: "uni-list-cell uni-list-cell-pd",
                      key: item.id
                    }, [
                      vue.createElementVNode("view", { class: "cell-item" }, [
                        vue.createElementVNode("radio", {
                          value: item.id,
                          checked: $setup.feedbackFrom.complaintTypeId == item.id,
                          color: "#FFCC33",
                          style: { "transform": "scale(0.7)" }
                        }, null, 8, ["value", "checked"]),
                        vue.createElementVNode(
                          "text",
                          {
                            style: vue.normalizeStyle({
                              color: $setup.feedbackFrom.complaintTypeId == item.id ? "#FFCC33" : ""
                            })
                          },
                          vue.toDisplayString(item.typeName),
                          5
                          /* TEXT, STYLE */
                        )
                      ])
                    ]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                ))
              ],
              32
              /* NEED_HYDRATION */
            )
          ]),
          vue.createElementVNode("view", null, [
            vue.createElementVNode("view", { style: { "margin-bottom": "20rpx" } }, "请在下方文本框内详情描述："),
            vue.withDirectives(vue.createElementVNode(
              "textarea",
              {
                "onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => $setup.feedbackFrom.content = $event),
                "placeholder-style": "color:#9E9E9E;padding: 20rpx",
                placeholder: "请输入详情描述"
              },
              null,
              512
              /* NEED_PATCH */
            ), [
              [vue.vModelText, $setup.feedbackFrom.content]
            ])
          ]),
          vue.createElementVNode("view", { style: { "margin-top": "300rpx" } }, [
            vue.createVNode(_component_u_button, {
              type: "primary",
              size: "large",
              shape: "circle",
              block: "",
              onClick: $setup.complaintSubmit
            }, {
              default: vue.withCtx(() => [
                vue.createTextVNode("确认提交")
              ]),
              _: 1
              /* STABLE */
            })
          ]),
          vue.createElementVNode("view", {
            style: { "margin-top": "50rpx", "text-align": "center", "color": "#9e9e9e" },
            onClick: $setup.toRecord
          }, "反馈记录")
        ])
      ]),
      vue.createVNode(
        _component_uni_popup,
        {
          ref: "popup",
          "background-color": "#fff",
          class: "unipopup"
        },
        {
          default: vue.withCtx(() => [
            vue.createElementVNode("view", {
              class: "shutdown",
              onClick: $setup.unipopupClose
            }, [
              vue.createVNode(_component_uni_icons, {
                type: "closeempty",
                size: "20",
                color: "#A6A6A6"
              })
            ]),
            vue.createElementVNode("view", { class: "title" }, "您的反馈已提交！"),
            vue.createElementVNode("view", { class: "text" }, "可在“反馈记录”查看审核进度"),
            vue.createElementVNode("view", {
              class: "but",
              onClick: $setup.toRecord
            }, "反馈记录")
          ]),
          _: 1
          /* STABLE */
        },
        512
        /* NEED_PATCH */
      )
    ]);
  }
  const PagesSettingsFeedback = /* @__PURE__ */ _export_sfc(_sfc_main$P, [["render", _sfc_render$O], ["__scopeId", "data-v-d9359076"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/settings/feedback.vue"]]);
  const _sfc_main$O = {
    __name: "complaint",
    props: {
      titlePage: {
        type: String,
        default: "投诉"
      }
    },
    setup(__props, { expose: __expose }) {
      __expose();
      vue.useCssVars((_ctx) => ({
        "7a4f9f80-statusBarHeight": statusBarHeight.value
      }));
      const globalStore = useGlobalDataStore();
      const statusBarHeight = vue.ref(globalStore.statusBarHeight + "px");
      const props = __props;
      const scrollTop = vue.ref(0);
      onPageScroll((e2) => {
        scrollTop.value = e2.scrollTop;
      });
      const backFn = () => {
        uni.navigateBack({
          delta: 1
        });
      };
      const items = vue.ref([]);
      const popup = vue.ref(null);
      const feedbackFrom = vue.ref({
        complaintTypeId: null,
        description: "",
        accusedUserId: null
      });
      onLoad((options) => {
        feedbackFrom.value.accusedUserId = options.id;
      });
      const typeList = async () => {
        let { data } = await complaintType();
        items.value = data.records;
      };
      const complaintSubmit = async () => {
        try {
          const data = Object.assign(feedbackFrom.value);
          let resp = await complaintSubmitPost(data);
          popup.value.open("center");
        } catch {
          formatAppLog("log", "at pages/settings/complaint.vue:112", "err");
        }
      };
      const unipopupClose = () => {
        popup.value.close();
      };
      const checkboxChange = (e2) => {
        feedbackFrom.value.complaintTypeId = e2.detail.value;
      };
      const toRecord = () => {
        uni.navigateTo({
          url: "/pages/settings/record"
        });
      };
      onShow(() => {
      });
      vue.onMounted(() => {
        typeList();
      });
      const __returned__ = { globalStore, statusBarHeight, props, scrollTop, backFn, items, popup, feedbackFrom, typeList, complaintSubmit, unipopupClose, checkboxChange, toRecord, ref: vue.ref, onMounted: vue.onMounted, get useGlobalDataStore() {
        return useGlobalDataStore;
      }, get onShow() {
        return onShow;
      }, get onLoad() {
        return onLoad;
      }, get onPageScroll() {
        return onPageScroll;
      }, get complaintSubmitPost() {
        return complaintSubmitPost;
      }, get complaintType() {
        return complaintType;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$N(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    const _component_uni_nav_bar = resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"), __easycom_1$4);
    const _component_u_button = resolveEasycom(vue.resolveDynamicComponent("u-button"), __easycom_1$2);
    const _component_uni_popup = resolveEasycom(vue.resolveDynamicComponent("uni-popup"), __easycom_3$5);
    return vue.openBlock(), vue.createElementBlock("view", { class: "settled-box" }, [
      vue.createElementVNode("view", { class: "header" }, [
        vue.createVNode(_component_uni_nav_bar, {
          backgroundColor: "rgba(255,255,255,0)",
          border: false,
          title: $props.titlePage,
          class: vue.normalizeClass(["header-bar", $setup.scrollTop > 15 ? "scrollClass" : ""])
        }, {
          left: vue.withCtx(() => [
            vue.createVNode(_component_uni_icons, {
              type: "left",
              size: "24",
              onClick: $setup.backFn
            })
          ]),
          right: vue.withCtx(() => [
            vue.createElementVNode("view", { class: "right" }, [
              vue.createElementVNode("image", {
                src: _imports_0$o,
                style: { "width": "40rpx", "height": "40rpx" }
              })
            ])
          ]),
          _: 1
          /* STABLE */
        }, 8, ["title", "class"])
      ]),
      vue.createElementVNode("view", { class: "content" }, [
        vue.createElementVNode("view", { class: "clause" }, [
          vue.createElementVNode("view", { class: "clause-type" }, [
            vue.createElementVNode("view", null, "请选择您需要投诉的问题类型："),
            vue.createElementVNode(
              "radio-group",
              {
                onChange: $setup.checkboxChange,
                class: "clause-group"
              },
              [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($setup.items, (item) => {
                    return vue.openBlock(), vue.createElementBlock("label", {
                      class: "uni-list-cell uni-list-cell-pd",
                      key: item.id
                    }, [
                      vue.createElementVNode("view", { class: "cell-item" }, [
                        vue.createElementVNode("radio", {
                          value: item.id,
                          checked: $setup.feedbackFrom.complaintTypeId == item.id,
                          color: "#FFCC33",
                          style: { "transform": "scale(0.7)" }
                        }, null, 8, ["value", "checked"]),
                        vue.createElementVNode(
                          "text",
                          {
                            style: vue.normalizeStyle({ color: $setup.feedbackFrom.complaintTypeId == item.id ? "#FFCC33" : "" })
                          },
                          vue.toDisplayString(item.typeName),
                          5
                          /* TEXT, STYLE */
                        )
                      ])
                    ]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                ))
              ],
              32
              /* NEED_HYDRATION */
            )
          ]),
          vue.createElementVNode("view", null, [
            vue.createElementVNode("view", { style: { "margin-bottom": "20rpx" } }, "请在下方文本框内详情描述："),
            vue.withDirectives(vue.createElementVNode(
              "textarea",
              {
                "onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => $setup.feedbackFrom.description = $event),
                "placeholder-style": "color:#9E9E9E;padding: 20rpx",
                placeholder: "请输入详情描述"
              },
              null,
              512
              /* NEED_PATCH */
            ), [
              [vue.vModelText, $setup.feedbackFrom.description]
            ])
          ]),
          vue.createElementVNode("view", { style: { "margin-top": "300rpx" } }, [
            vue.createVNode(_component_u_button, {
              type: "primary",
              size: "large",
              shape: "circle",
              block: "",
              onClick: $setup.complaintSubmit
            }, {
              default: vue.withCtx(() => [
                vue.createTextVNode("确认提交")
              ]),
              _: 1
              /* STABLE */
            })
          ]),
          vue.createElementVNode("view", {
            style: { "margin-top": "50rpx", "text-align": "center", "color": "#9E9E9E" },
            onClick: $setup.toRecord
          }, "投诉记录")
        ])
      ]),
      vue.createVNode(
        _component_uni_popup,
        {
          ref: "popup",
          "background-color": "#fff",
          class: "unipopup"
        },
        {
          default: vue.withCtx(() => [
            vue.createElementVNode("view", {
              class: "shutdown",
              onClick: $setup.unipopupClose
            }, [
              vue.createVNode(_component_uni_icons, {
                type: "closeempty",
                size: "20",
                color: "#A6A6A6"
              })
            ]),
            vue.createElementVNode("view", { class: "title" }, "您的投诉已提交！"),
            vue.createElementVNode("view", { class: "text" }, "可在“投诉记录”查看审核进度"),
            vue.createElementVNode("view", { class: "but" }, "投诉记录")
          ]),
          _: 1
          /* STABLE */
        },
        512
        /* NEED_PATCH */
      )
    ]);
  }
  const PagesSettingsComplaint = /* @__PURE__ */ _export_sfc(_sfc_main$O, [["render", _sfc_render$N], ["__scopeId", "data-v-7a4f9f80"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/settings/complaint.vue"]]);
  const _sfc_main$N = {
    name: "uni-data-select",
    mixins: [tr.mixinDatacom || {}],
    props: {
      localdata: {
        type: Array,
        default() {
          return [];
        }
      },
      value: {
        type: [String, Number],
        default: ""
      },
      modelValue: {
        type: [String, Number],
        default: ""
      },
      label: {
        type: String,
        default: ""
      },
      placeholder: {
        type: String,
        default: "请选择"
      },
      emptyTips: {
        type: String,
        default: "无选项"
      },
      clear: {
        type: Boolean,
        default: true
      },
      defItem: {
        type: Number,
        default: 0
      },
      disabled: {
        type: Boolean,
        default: false
      },
      // 格式化输出 用法 field="_id as value, version as text, uni_platform as label" format="{label} - {text}"
      format: {
        type: String,
        default: ""
      },
      placement: {
        type: String,
        default: "bottom"
      }
    },
    data() {
      return {
        showSelector: false,
        current: "",
        mixinDatacomResData: [],
        apps: [],
        channels: [],
        cacheKey: "uni-data-select-lastSelectedValue"
      };
    },
    created() {
      this.debounceGet = this.debounce(() => {
        this.query();
      }, 300);
      if (this.collection && !this.localdata.length) {
        this.debounceGet();
      }
    },
    computed: {
      typePlaceholder() {
        const text = {
          "opendb-stat-app-versions": "版本",
          "opendb-app-channels": "渠道",
          "opendb-app-list": "应用"
        };
        const common = this.placeholder;
        const placeholder = text[this.collection];
        return placeholder ? common + placeholder : common;
      },
      valueCom() {
        return this.modelValue;
      },
      textShow() {
        let text = this.current;
        return text;
      },
      getOffsetByPlacement() {
        switch (this.placement) {
          case "top":
            return "bottom:calc(100% + 12px);";
          case "bottom":
            return "top:calc(100% + 12px);";
        }
      }
    },
    watch: {
      localdata: {
        immediate: true,
        handler(val2, old) {
          if (Array.isArray(val2) && old !== val2) {
            this.mixinDatacomResData = val2;
          }
        }
      },
      valueCom(val2, old) {
        this.initDefVal();
      },
      mixinDatacomResData: {
        immediate: true,
        handler(val2) {
          if (val2.length) {
            this.initDefVal();
          }
        }
      }
    },
    methods: {
      debounce(fn, time = 100) {
        let timer = null;
        return function(...args) {
          if (timer)
            clearTimeout(timer);
          timer = setTimeout(() => {
            fn.apply(this, args);
          }, time);
        };
      },
      // 执行数据库查询
      query() {
        this.mixinDatacomEasyGet();
      },
      // 监听查询条件变更事件
      onMixinDatacomPropsChange() {
        if (this.collection) {
          this.debounceGet();
        }
      },
      initDefVal() {
        let defValue = "";
        if ((this.valueCom || this.valueCom === 0) && !this.isDisabled(this.valueCom)) {
          defValue = this.valueCom;
        } else {
          let strogeValue;
          if (this.collection) {
            strogeValue = this.getCache();
          }
          if (strogeValue || strogeValue === 0) {
            defValue = strogeValue;
          } else {
            let defItem = "";
            if (this.defItem > 0 && this.defItem <= this.mixinDatacomResData.length) {
              defItem = this.mixinDatacomResData[this.defItem - 1].value;
            }
            defValue = defItem;
          }
          if (defValue || defValue === 0) {
            this.emit(defValue);
          }
        }
        const def = this.mixinDatacomResData.find((item) => item.value === defValue);
        this.current = def ? this.formatItemName(def) : "";
      },
      /**
       * @param {[String, Number]} value
       * 判断用户给的 value 是否同时为禁用状态
       */
      isDisabled(value) {
        let isDisabled = false;
        this.mixinDatacomResData.forEach((item) => {
          if (item.value === value) {
            isDisabled = item.disable;
          }
        });
        return isDisabled;
      },
      clearVal() {
        this.emit("");
        this.current = "";
        if (this.collection) {
          this.removeCache();
        }
      },
      change(item) {
        if (!item.disable) {
          this.showSelector = false;
          this.current = this.formatItemName(item);
          this.emit(item.value);
        }
      },
      emit(val2) {
        this.$emit("input", val2);
        this.$emit("update:modelValue", val2);
        this.$emit("change", val2);
        if (this.collection) {
          this.setCache(val2);
        }
      },
      toggleSelector() {
        if (this.disabled) {
          return;
        }
        this.showSelector = !this.showSelector;
      },
      formatItemName(item) {
        let {
          text,
          value,
          channel_code
        } = item;
        channel_code = channel_code ? `(${channel_code})` : "";
        if (this.format) {
          let str = "";
          str = this.format;
          for (let key in item) {
            str = str.replace(new RegExp(`{${key}}`, "g"), item[key]);
          }
          return str;
        } else {
          return this.collection.indexOf("app-list") > 0 ? `${text}(${value})` : text ? text : `未命名${channel_code}`;
        }
      },
      // 获取当前加载的数据
      getLoadData() {
        return this.mixinDatacomResData;
      },
      // 获取当前缓存key
      getCurrentCacheKey() {
        return this.collection;
      },
      // 获取缓存
      getCache(name = this.getCurrentCacheKey()) {
        let cacheData = uni.getStorageSync(this.cacheKey) || {};
        return cacheData[name];
      },
      // 设置缓存
      setCache(value, name = this.getCurrentCacheKey()) {
        let cacheData = uni.getStorageSync(this.cacheKey) || {};
        cacheData[name] = value;
        uni.setStorageSync(this.cacheKey, cacheData);
      },
      // 删除缓存
      removeCache(name = this.getCurrentCacheKey()) {
        let cacheData = uni.getStorageSync(this.cacheKey) || {};
        delete cacheData[name];
        uni.setStorageSync(this.cacheKey, cacheData);
      }
    }
  };
  function _sfc_render$M(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    return vue.openBlock(), vue.createElementBlock("view", { class: "uni-stat__select" }, [
      $props.label ? (vue.openBlock(), vue.createElementBlock(
        "span",
        {
          key: 0,
          class: "uni-label-text hide-on-phone"
        },
        vue.toDisplayString($props.label + "："),
        1
        /* TEXT */
      )) : vue.createCommentVNode("v-if", true),
      vue.createElementVNode(
        "view",
        {
          class: vue.normalizeClass(["uni-stat-box", { "uni-stat__actived": $data.current }])
        },
        [
          vue.createElementVNode(
            "view",
            {
              class: vue.normalizeClass(["uni-select", { "uni-select--disabled": $props.disabled }])
            },
            [
              vue.createElementVNode("view", {
                class: "uni-select__input-box",
                onClick: _cache[1] || (_cache[1] = (...args) => $options.toggleSelector && $options.toggleSelector(...args))
              }, [
                $data.current ? (vue.openBlock(), vue.createElementBlock(
                  "view",
                  {
                    key: 0,
                    class: "uni-select__input-text"
                  },
                  vue.toDisplayString($options.textShow),
                  1
                  /* TEXT */
                )) : (vue.openBlock(), vue.createElementBlock(
                  "view",
                  {
                    key: 1,
                    class: "uni-select__input-text uni-select__input-placeholder"
                  },
                  vue.toDisplayString($options.typePlaceholder),
                  1
                  /* TEXT */
                )),
                $data.current && $props.clear && !$props.disabled ? (vue.openBlock(), vue.createElementBlock("view", {
                  key: "clear-button",
                  onClick: _cache[0] || (_cache[0] = vue.withModifiers((...args) => $options.clearVal && $options.clearVal(...args), ["stop"]))
                }, [
                  vue.createVNode(_component_uni_icons, {
                    type: "clear",
                    color: "#c0c4cc",
                    size: "24"
                  })
                ])) : (vue.openBlock(), vue.createElementBlock("view", { key: "arrow-button" }, [
                  vue.createVNode(_component_uni_icons, {
                    type: $data.showSelector ? "top" : "bottom",
                    size: "14",
                    color: "#999"
                  }, null, 8, ["type"])
                ]))
              ]),
              $data.showSelector ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 0,
                class: "uni-select--mask",
                onClick: _cache[2] || (_cache[2] = (...args) => $options.toggleSelector && $options.toggleSelector(...args))
              })) : vue.createCommentVNode("v-if", true),
              $data.showSelector ? (vue.openBlock(), vue.createElementBlock(
                "view",
                {
                  key: 1,
                  class: "uni-select__selector",
                  style: vue.normalizeStyle($options.getOffsetByPlacement)
                },
                [
                  vue.createElementVNode(
                    "view",
                    {
                      class: vue.normalizeClass($props.placement == "bottom" ? "uni-popper__arrow_bottom" : "uni-popper__arrow_top")
                    },
                    null,
                    2
                    /* CLASS */
                  ),
                  vue.createElementVNode("scroll-view", {
                    "scroll-y": "true",
                    class: "uni-select__selector-scroll"
                  }, [
                    $data.mixinDatacomResData.length === 0 ? (vue.openBlock(), vue.createElementBlock("view", {
                      key: 0,
                      class: "uni-select__selector-empty"
                    }, [
                      vue.createElementVNode(
                        "text",
                        null,
                        vue.toDisplayString($props.emptyTips),
                        1
                        /* TEXT */
                      )
                    ])) : (vue.openBlock(true), vue.createElementBlock(
                      vue.Fragment,
                      { key: 1 },
                      vue.renderList($data.mixinDatacomResData, (item, index) => {
                        return vue.openBlock(), vue.createElementBlock("view", {
                          class: "uni-select__selector-item",
                          key: index,
                          onClick: ($event) => $options.change(item)
                        }, [
                          vue.createElementVNode(
                            "text",
                            {
                              class: vue.normalizeClass({ "uni-select__selector__disabled": item.disable })
                            },
                            vue.toDisplayString($options.formatItemName(item)),
                            3
                            /* TEXT, CLASS */
                          )
                        ], 8, ["onClick"]);
                      }),
                      128
                      /* KEYED_FRAGMENT */
                    ))
                  ])
                ],
                4
                /* STYLE */
              )) : vue.createCommentVNode("v-if", true)
            ],
            2
            /* CLASS */
          )
        ],
        2
        /* CLASS */
      )
    ]);
  }
  const __easycom_2$3 = /* @__PURE__ */ _export_sfc(_sfc_main$N, [["render", _sfc_render$M], ["__scopeId", "data-v-ddf9e0a2"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/uni_modules/uni-data-select/components/uni-data-select/uni-data-select.vue"]]);
  const wxPay = (params, config2 = {}) => http$1.post("/api/order/order/wxPay", params, config2);
  const aliPay = (params, config2 = {}) => http$1.post("/api/order/order/aliPay", params, config2);
  const payment = (params, config2 = {}) => http$1.post("/api/order/order/getPaymentList", params, config2);
  const summary = (params, config2 = {}) => http$1.get("/api/wallet/summary", params, config2);
  const wallet = (params, config2 = {}) => http$1.post("/api/wallet/income/page", params, config2);
  const withdraw = (params, config2 = {}) => http$1.post("/api/wallet/withdraw/page", params, config2);
  const apply = (params, config2 = {}) => http$1.post("/api/wallet/apply", params, config2);
  const bank = (params, config2 = {}) => http$1.get("/api/wallet/bank-cards", params, config2);
  const addBank = (params, config2 = {}) => http$1.post("/api/wallet/bank-card/add", params, config2);
  const saveComment = (params, config2 = {}) => http$1.post("/api/comment/comment/saveComment", params, config2);
  const applyRefund = (params, config2 = {}) => http$1.post("/api/order/order/applyRefund", params, config2);
  const payResult = (params, config2 = {}) => http$1.get("/api/order/order/payResult", params, config2);
  const orderDetail = (params, config2 = {}) => http$1.get(`/api/order/order/detail?orderSn=${params}`, config2);
  const express = (params, config2 = {}) => http$1.get(`/api/mall/express/query`, params, config2);
  const orderList = (params, config2 = {}) => http$1.post(`/api/order/order/createConsult`, params, config2);
  const createListen = (params, config2 = {}) => http$1.post(`/api/order/order/createListen`, params, config2);
  const orderMy = (params, config2 = {}) => http$1.post(`/api/mall/order/my`, params, config2);
  const _imports_0$5 = "/static/order/ic-copy.png";
  const _imports_2 = "/static/auth/refund.png";
  const _sfc_main$M = {
    __name: "refund-order",
    setup(__props, { expose: __expose }) {
      __expose();
      vue.useCssVars((_ctx) => ({
        "cf5d4b02-statusBarHeight": statusBarHeight.value
      }));
      const globalStore = useGlobalDataStore();
      const statusBarHeight = vue.ref(globalStore.statusBarHeight + "px");
      const scrollTop = vue.ref(0);
      const orderInfo = vue.ref({});
      const orderType = vue.ref("continue");
      const orderRefund = vue.ref({
        orderSn: "",
        refundType: "",
        refundReason: "",
        refundDesc: ""
      });
      onPageScroll((e2) => {
        scrollTop.value = e2.scrollTop;
      });
      const backFn = () => {
        uni.navigateBack({
          delta: 1
        });
      };
      const copyText = (text) => {
        uni.setClipboardData({
          data: text,
          success(e2) {
            uni.showToast({
              title: "已复制"
            });
          }
        });
      };
      const range2 = vue.ref([
        { value: "老师原因", text: "老师原因" },
        { value: "个人原因", text: "个人原因" },
        { value: "其他原因", text: "其他原因" }
      ]);
      const change = (e2) => {
        orderRefund.value.refundType = e2;
      };
      const radioList = vue.ref([
        { value: "暂不需要" },
        { value: "协商一致" },
        { value: "联系不上" },
        { value: "时间冲突" },
        { value: "期望落差" },
        { value: "老师原因" },
        { value: "其他原因" },
        { value: "服务太多不好", checked: "true" }
      ]);
      onLoad((options) => {
        formatAppLog("log", "at pages/payment/order/refund-order.vue:175", SON.parse(options.order));
        orderInfo.value = JSON.parse(options.order);
        orderRefund.value.orderSn = orderInfo.value.orderSn;
      });
      const radioChange = (e2) => {
        orderRefund.value.refundReason = e2.detail.value;
      };
      const popup = vue.ref(null);
      const applyRefundBut = async () => {
        if (orderRefund.value.refundType == "" || orderRefund.value.refundReason == "") {
          uni.showToast({
            title: "请填写完整信息",
            icon: "none"
          });
          return;
        }
        popup.value.open("center");
      };
      const handleRefund = async () => {
        try {
          const res2 = await applyRefund(orderRefund.value);
          uni.showToast({
            title: "申请退款成功",
            icon: "success"
          });
          orderType.value = "success";
        } catch (e2) {
        }
      };
      const handleTeacher = () => {
        backFn();
      };
      const cancelPopup = () => {
        popup.value.close();
        backFn();
      };
      const __returned__ = { globalStore, statusBarHeight, scrollTop, orderInfo, orderType, orderRefund, backFn, copyText, range: range2, change, radioList, radioChange, popup, applyRefundBut, handleRefund, handleTeacher, cancelPopup, ref: vue.ref, get useGlobalDataStore() {
        return useGlobalDataStore;
      }, get onLoad() {
        return onLoad;
      }, get onPageScroll() {
        return onPageScroll;
      }, get applyRefund() {
        return applyRefund;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$L(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    const _component_uni_nav_bar = resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"), __easycom_1$4);
    const _component_uni_data_select = resolveEasycom(vue.resolveDynamicComponent("uni-data-select"), __easycom_2$3);
    const _component_uni_popup = resolveEasycom(vue.resolveDynamicComponent("uni-popup"), __easycom_3$5);
    return vue.openBlock(), vue.createElementBlock("view", { class: "settled-box" }, [
      vue.createElementVNode("view", { class: "header" }, [
        vue.createVNode(_component_uni_nav_bar, {
          class: vue.normalizeClass([$setup.scrollTop > 15 ? "scrollClass" : "", "header-bar"]),
          backgroundColor: "rgba(255,255,255,0)",
          border: false,
          title: "申请退款"
        }, {
          left: vue.withCtx(() => [
            vue.createVNode(_component_uni_icons, {
              type: "left",
              size: "24",
              onClick: $setup.backFn
            })
          ]),
          right: vue.withCtx(() => [
            vue.createElementVNode("view", { class: "right" }, [
              vue.createElementVNode("image", {
                src: _imports_0$o,
                style: { "width": "40rpx", "height": "40rpx" }
              })
            ])
          ]),
          _: 1
          /* STABLE */
        }, 8, ["class"])
      ]),
      vue.createElementVNode("view", { class: "content" }, [
        vue.createElementVNode("view", { class: "clause" }, [
          vue.createElementVNode("view", { class: "user-info" }, [
            vue.createElementVNode("view", { class: "user-name" }, [
              vue.createElementVNode("image", {
                src: $setup.orderInfo.teacherAvatar,
                class: "user-avatar"
              }, null, 8, ["src"]),
              vue.createElementVNode(
                "view",
                null,
                vue.toDisplayString($setup.orderInfo.teacherName),
                1
                /* TEXT */
              )
            ]),
            vue.createElementVNode("view", { class: "order-info" }, [
              vue.createElementVNode(
                "view",
                null,
                "订单号：" + vue.toDisplayString($setup.orderInfo.orderSn),
                1
                /* TEXT */
              ),
              vue.createElementVNode("image", {
                src: _imports_0$5,
                style: { "width": "22rpx", "height": "22rpx", "margin-left": "10rpx" },
                onClick: _cache[0] || (_cache[0] = ($event) => $setup.copyText("Z20251119874653"))
              })
            ])
          ]),
          vue.createElementVNode(
            "view",
            { style: { "margin-top": "10rpx" } },
            vue.toDisplayString($setup.orderInfo.serviceInfo),
            1
            /* TEXT */
          ),
          vue.createElementVNode("view", { class: "time" }, [
            vue.createTextVNode("购买时长："),
            vue.createElementVNode(
              "text",
              null,
              vue.toDisplayString($setup.orderInfo.buyDuration),
              1
              /* TEXT */
            )
          ]),
          vue.createElementVNode("view", { class: "time" }, [
            vue.createTextVNode("服务方式："),
            vue.createElementVNode(
              "text",
              null,
              vue.toDisplayString($setup.orderInfo.consultTypeDesc),
              1
              /* TEXT */
            )
          ]),
          vue.createElementVNode("view", { class: "time" }, [
            vue.createTextVNode("剩余时长："),
            vue.createElementVNode(
              "text",
              null,
              vue.toDisplayString($setup.orderInfo.remainingDuration),
              1
              /* TEXT */
            )
          ]),
          vue.createElementVNode("view", { class: "time" }, [
            vue.createTextVNode("下单时间："),
            vue.createElementVNode(
              "text",
              null,
              vue.toDisplayString($setup.orderInfo.createTime),
              1
              /* TEXT */
            )
          ]),
          vue.createElementVNode("view", { class: "time" }, [
            vue.createTextVNode("到期时间："),
            vue.createElementVNode(
              "text",
              null,
              vue.toDisplayString($setup.orderInfo.expireTime),
              1
              /* TEXT */
            ),
            vue.createElementVNode(
              "view",
              { class: "time-money" },
              "¥ " + vue.toDisplayString($setup.orderInfo.orderMoney),
              1
              /* TEXT */
            )
          ])
        ])
      ]),
      vue.createElementVNode("view", { class: "refund-reason" }, [
        vue.createElementVNode("view", { class: "reason-title" }, [
          vue.createTextVNode("请选择退款类型:"),
          vue.createElementVNode("text", null, "*")
        ]),
        vue.createElementVNode("view", null, [
          vue.createVNode(_component_uni_data_select, {
            modelValue: $setup.orderRefund.refundType,
            "onUpdate:modelValue": _cache[1] || (_cache[1] = ($event) => $setup.orderRefund.refundType = $event),
            localdata: $setup.range,
            onChange: $setup.change,
            placeholder: "请选择退款原因"
          }, null, 8, ["modelValue", "localdata"])
        ])
      ]),
      vue.createElementVNode("view", { class: "refund-reason" }, [
        vue.createElementVNode("view", { class: "reason-title" }, [
          vue.createTextVNode("请选择退款原因:"),
          vue.createElementVNode("text", null, "*")
        ]),
        vue.createElementVNode("view", { class: "radio-group" }, [
          vue.createElementVNode(
            "radio-group",
            { onChange: $setup.radioChange },
            [
              (vue.openBlock(true), vue.createElementBlock(
                vue.Fragment,
                null,
                vue.renderList($setup.radioList, (item, index) => {
                  return vue.openBlock(), vue.createElementBlock("radio", {
                    value: item.value,
                    key: index,
                    activeBackgroundColor: "#35CA95",
                    style: { "margin": "0 20rpx 30rpx 0" }
                  }, [
                    vue.createElementVNode(
                      "text",
                      null,
                      vue.toDisplayString(item.value),
                      1
                      /* TEXT */
                    )
                  ], 8, ["value"]);
                }),
                128
                /* KEYED_FRAGMENT */
              ))
            ],
            32
            /* NEED_HYDRATION */
          )
        ])
      ]),
      vue.createElementVNode("view", { class: "refund-description" }, [
        vue.createElementVNode("view", { class: "radio-group" }, [
          vue.createElementVNode("view", { style: { "margin-bottom": "20rpx" } }, "请在下方文本框内详情描述:"),
          vue.withDirectives(vue.createElementVNode(
            "textarea",
            {
              "onUpdate:modelValue": _cache[2] || (_cache[2] = ($event) => $setup.orderRefund.refundDesc = $event),
              "placeholder-style": "color:#9E9E9E;padding: 20rpx",
              placeholder: "请输入详情描述"
            },
            null,
            512
            /* NEED_PATCH */
          ), [
            [vue.vModelText, $setup.orderRefund.refundDesc]
          ])
        ])
      ]),
      vue.createElementVNode("view", { class: "refund-btn-container" }, [
        vue.createElementVNode("view", {
          class: "refund-btn",
          onClick: $setup.applyRefundBut
        }, "确认退款")
      ]),
      vue.createVNode(
        _component_uni_popup,
        {
          ref: "popup",
          type: "center",
          animation: false
        },
        {
          default: vue.withCtx(() => [
            vue.createElementVNode("view", { class: "popup-container" }, [
              vue.createElementVNode("image", { src: _imports_2 }),
              $setup.orderType == "continue" ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 0,
                class: "popup-title"
              }, "很遗憾")) : vue.createCommentVNode("v-if", true),
              $setup.orderType == "continue" ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 1,
                class: "popup-content"
              }, "未能给你一个满意的服务体验")) : vue.createCommentVNode("v-if", true),
              $setup.orderType == "continue" ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 2,
                class: "popup-btn"
              }, [
                vue.createElementVNode("view", {
                  class: "popup-btn-text",
                  onClick: $setup.handleRefund
                }, "继续退款"),
                vue.createElementVNode("view", { class: "popup-btn-text" }, "|"),
                vue.createElementVNode("view", {
                  class: "popup-btn-text",
                  onClick: $setup.handleTeacher
                }, "换一位老师")
              ])) : vue.createCommentVNode("v-if", true),
              $setup.orderType == "success" ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 3,
                class: "popup-content",
                style: { "margin-top": "50rpx" }
              }, "退款成功")) : vue.createCommentVNode("v-if", true),
              $setup.orderType == "success" ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 4,
                class: "popup-title",
                style: { "margin": "0" }
              }, "期待与您更好的重逢")) : vue.createCommentVNode("v-if", true),
              $setup.orderType == "success" ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 5,
                class: "popup-btn"
              }, [
                vue.createElementVNode("view", {
                  class: "popup-btn-text",
                  onClick: $setup.cancelPopup
                }, "关闭"),
                vue.createElementVNode("view", { class: "popup-btn-text" }, "|"),
                vue.createElementVNode("view", {
                  class: "popup-btn-text",
                  onClick: $setup.handleTeacher
                }, "看看其他老师")
              ])) : vue.createCommentVNode("v-if", true)
            ])
          ]),
          _: 1
          /* STABLE */
        },
        512
        /* NEED_PATCH */
      )
    ]);
  }
  const PagesPaymentOrderRefundOrder = /* @__PURE__ */ _export_sfc(_sfc_main$M, [["render", _sfc_render$L], ["__scopeId", "data-v-cf5d4b02"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/payment/order/refund-order.vue"]]);
  const _sfc_main$L = {
    __name: "record",
    props: {
      titlePage: {
        type: String,
        default: "反馈记录"
      }
    },
    setup(__props, { expose: __expose }) {
      __expose();
      vue.useCssVars((_ctx) => ({
        "ee6ca4e9-statusBarHeight": statusBarHeight.value
      }));
      const globalStore = useGlobalDataStore();
      const statusBarHeight = vue.ref(globalStore.statusBarHeight + "px");
      const props = __props;
      const itemLsit = vue.ref([
        { id: 1, typeName: "使用便捷问题" },
        { id: 2, typeName: "登陆问题" },
        { id: 3, typeName: "安全问题" },
        { id: 4, typeName: "支付问题" },
        { id: 5, typeName: "订单问题" },
        { id: 6, typeName: "账号问题" },
        { id: 7, typeName: "退款问题" }
      ]);
      const scrollTop = vue.ref(0);
      onPageScroll((e2) => {
        scrollTop.value = e2.scrollTop;
      });
      const backFn = () => {
        uni.navigateBack({
          delta: 1
        });
      };
      onShow(() => {
        initListData();
      });
      const feedbackList = vue.ref([]);
      const splitContent = (content) => {
        var _a, _b;
        let type = "";
        let detail = "";
        if (content && content.trim()) {
          const typeReg = /类型：([^\n]+)/;
          const detailReg = /详情：([\s\S]*)/;
          type = ((_a = content.match(typeReg)) == null ? void 0 : _a[1]) || "";
          detail = ((_b = content.match(detailReg)) == null ? void 0 : _b[1]) || "";
        }
        return { type: Number(type) || "", detail };
      };
      const initListData = async () => {
        let { data } = await getFeedback({
          current: 1,
          size: 10,
          userId: globalStore.userInfo.id
        });
        const newList = data.records.map((item) => {
          const { type, detail } = splitContent(item.content);
          return { ...item, type, detail, isShowDetail: false };
        });
        formatAppLog("log", "at pages/settings/record.vue:153", newList);
        feedbackList.value = newList;
      };
      const toggleDetail = (index) => {
        feedbackList.value[index].isShowDetail = !feedbackList.value[index].isShowDetail;
      };
      initListData();
      const __returned__ = { globalStore, statusBarHeight, props, itemLsit, scrollTop, backFn, feedbackList, splitContent, initListData, toggleDetail, ref: vue.ref, get useGlobalDataStore() {
        return useGlobalDataStore;
      }, get onShow() {
        return onShow;
      }, get onPageScroll() {
        return onPageScroll;
      }, get complaintSubmitPost() {
        return complaintSubmitPost;
      }, get complaintType() {
        return complaintType;
      }, get getFeedback() {
        return getFeedback;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$K(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    const _component_uni_nav_bar = resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"), __easycom_1$4);
    return vue.openBlock(), vue.createElementBlock("view", { class: "settled-box" }, [
      vue.createElementVNode("view", { class: "header" }, [
        vue.createVNode(_component_uni_nav_bar, {
          backgroundColor: "rgba(255,255,255,0)",
          border: false,
          title: $props.titlePage,
          class: vue.normalizeClass(["header-bar", $setup.scrollTop > 15 ? "scrollClass" : ""])
        }, {
          left: vue.withCtx(() => [
            vue.createVNode(_component_uni_icons, {
              type: "left",
              size: "24",
              onClick: $setup.backFn
            })
          ]),
          right: vue.withCtx(() => [
            vue.createElementVNode("view", { class: "right" }, [
              vue.createElementVNode("image", {
                src: _imports_0$o,
                style: { "width": "40rpx", "height": "40rpx" }
              })
            ])
          ]),
          _: 1
          /* STABLE */
        }, 8, ["title", "class"])
      ]),
      vue.createElementVNode("view", { class: "content" }, [
        vue.createElementVNode("view", { class: "feedback-list" }, [
          (vue.openBlock(true), vue.createElementBlock(
            vue.Fragment,
            null,
            vue.renderList($setup.feedbackList, (item, index) => {
              return vue.openBlock(), vue.createElementBlock("view", {
                class: "feedback-item",
                key: item.id
              }, [
                vue.createElementVNode("view", {
                  class: "time-item",
                  onClick: ($event) => $setup.toggleDetail(index)
                }, [
                  vue.createElementVNode(
                    "text",
                    { class: "time-text" },
                    vue.toDisplayString(item.createdTime),
                    1
                    /* TEXT */
                  ),
                  vue.createElementVNode(
                    "text",
                    { class: "icon" },
                    vue.toDisplayString(item.isShowDetail ? "▲" : "▼"),
                    1
                    /* TEXT */
                  )
                ], 8, ["onClick"]),
                vue.withDirectives(vue.createElementVNode(
                  "view",
                  { class: "detail-box" },
                  [
                    vue.createElementVNode("radio-group", { class: "clause-group" }, [
                      (vue.openBlock(true), vue.createElementBlock(
                        vue.Fragment,
                        null,
                        vue.renderList($setup.itemLsit, (items, index2) => {
                          return vue.openBlock(), vue.createElementBlock("label", {
                            class: "uni-list-cell uni-list-cell-pd",
                            key: items.id
                          }, [
                            vue.createElementVNode("view", { class: "cell-item" }, [
                              vue.createElementVNode("radio", {
                                value: items.id,
                                checked: item.type == items.id,
                                color: "#FFCC33",
                                style: { "transform": "scale(0.7)" },
                                disabled: ""
                              }, null, 8, ["value", "checked"]),
                              vue.createElementVNode(
                                "text",
                                {
                                  style: vue.normalizeStyle({ color: item.type == items.id ? "#FFCC33" : "" })
                                },
                                vue.toDisplayString(items.typeName),
                                5
                                /* TEXT, STYLE */
                              )
                            ])
                          ]);
                        }),
                        128
                        /* KEYED_FRAGMENT */
                      ))
                    ]),
                    item.detail ? (vue.openBlock(), vue.createElementBlock("view", {
                      key: 0,
                      class: "content-item"
                    }, [
                      vue.createElementVNode("view", { style: { "margin-bottom": "10rpx" } }, "您填写的详情描述："),
                      vue.withDirectives(vue.createElementVNode("textarea", {
                        "onUpdate:modelValue": ($event) => item.detail = $event,
                        "placeholder-style": "color:#b0b2b4;padding: 20rpx",
                        disabled: ""
                      }, null, 8, ["onUpdate:modelValue"]), [
                        [vue.vModelText, item.detail]
                      ])
                    ])) : vue.createCommentVNode("v-if", true),
                    item.detail ? (vue.openBlock(), vue.createElementBlock("view", {
                      key: 1,
                      style: { "margin": "20rpx 0", "display": "flex", "align-items": "center", "justify-content": "flex-end" }
                    }, [
                      vue.createElementVNode("view", { style: { "color": "#5a5c5d" } }, "提交时间："),
                      vue.createElementVNode(
                        "view",
                        { style: { "color": "#b0b2b4" } },
                        vue.toDisplayString(item.createdTime),
                        1
                        /* TEXT */
                      )
                    ])) : vue.createCommentVNode("v-if", true),
                    item.replyContent ? (vue.openBlock(), vue.createElementBlock("view", {
                      key: 2,
                      class: "content-item"
                    }, [
                      vue.createElementVNode("view", { style: { "margin-bottom": "10rpx" } }, "平台受理意见:"),
                      vue.withDirectives(vue.createElementVNode("textarea", {
                        "onUpdate:modelValue": ($event) => item.replyContent = $event,
                        "placeholder-style": "color:#b0b2b4;padding: 20rpx",
                        disabled: ""
                      }, null, 8, ["onUpdate:modelValue"]), [
                        [vue.vModelText, item.replyContent]
                      ])
                    ])) : vue.createCommentVNode("v-if", true),
                    item.replyContent ? (vue.openBlock(), vue.createElementBlock("view", {
                      key: 3,
                      style: { "margin": "20rpx 0", "display": "flex", "align-items": "center", "justify-content": "flex-end" }
                    }, [
                      vue.createElementVNode("view", { style: { "color": "#5a5c5d" } }, "回复时间："),
                      vue.createElementVNode(
                        "view",
                        { style: { "color": "#b0b2b4" } },
                        vue.toDisplayString(item.createdTime),
                        1
                        /* TEXT */
                      )
                    ])) : vue.createCommentVNode("v-if", true)
                  ],
                  512
                  /* NEED_PATCH */
                ), [
                  [vue.vShow, item.isShowDetail]
                ])
              ]);
            }),
            128
            /* KEYED_FRAGMENT */
          ))
        ])
      ])
    ]);
  }
  const PagesSettingsRecord = /* @__PURE__ */ _export_sfc(_sfc_main$L, [["render", _sfc_render$K], ["__scopeId", "data-v-ee6ca4e9"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/settings/record.vue"]]);
  const _sfc_main$K = {
    name: "u-badge",
    props: {
      // primary,warning,success,error,info
      type: {
        type: String,
        default: "error"
      },
      // default, mini
      size: {
        type: String,
        default: "default"
      },
      //是否是圆点
      isDot: {
        type: Boolean,
        default: false
      },
      // 显示的数值内容
      count: {
        type: [Number, String]
      },
      // 展示封顶的数字值
      overflowCount: {
        type: Number,
        default: 99
      },
      // 当数值为 0 时，是否展示 Badge
      showZero: {
        type: Boolean,
        default: false
      },
      // 位置偏移
      offset: {
        type: Array,
        default: () => {
          return [10, 10];
        }
      },
      // 是否开启绝对定位，开启了offset才会起作用
      absolute: {
        type: Boolean,
        default: true
      },
      // 字体大小
      fontSize: {
        type: [String, Number],
        default: "12"
      },
      // 字体演示
      color: {
        type: String,
        default: "#ffffff"
      },
      // badge的背景颜色
      bgColor: {
        type: String,
        default: ""
      },
      // 是否让badge组件的中心点和父组件右上角重合，配置的话，offset将会失效
      isCenter: {
        type: Boolean,
        default: false
      }
    },
    computed: {
      // 是否将badge中心与父组件右上角重合
      boxStyle() {
        let style = {};
        if (this.isCenter) {
          style.top = 0;
          style.right = 0;
          style.transform = "translateY(-50%) translateX(50%)";
        } else {
          style.top = this.offset[0] + "px";
          style.right = this.offset[1] + "px";
          style.transform = "translateY(0) translateX(0)";
        }
        if (this.size == "mini") {
          style.transform = style.transform + " scale(0.8)";
        }
        return style;
      },
      // isDot类型时，不显示文字
      showText() {
        if (this.isDot)
          return "";
        else {
          if (this.count > this.overflowCount)
            return `${this.overflowCount}+`;
          else
            return this.count;
        }
      },
      // 是否显示组件
      show() {
        if (this.count == 0 && this.showZero == false)
          return false;
        else
          return true;
      }
    }
  };
  function _sfc_render$J(_ctx, _cache, $props, $setup, $data, $options) {
    return $options.show ? (vue.openBlock(), vue.createElementBlock(
      "view",
      {
        key: 0,
        class: vue.normalizeClass(["u-badge", [
          $props.isDot ? "u-badge-dot" : "",
          $props.size == "mini" ? "u-badge-mini" : "",
          $props.type ? "u-badge--bg--" + $props.type : ""
        ]]),
        style: vue.normalizeStyle([{
          top: $props.offset[0] + "px",
          right: $props.offset[1] + "px",
          fontSize: $props.fontSize + "px",
          position: $props.absolute ? "absolute" : "static",
          color: $props.color,
          backgroundColor: $props.bgColor
        }, $options.boxStyle])
      },
      vue.toDisplayString($options.showText),
      7
      /* TEXT, CLASS, STYLE */
    )) : vue.createCommentVNode("v-if", true);
  }
  const __easycom_0 = /* @__PURE__ */ _export_sfc(_sfc_main$K, [["render", _sfc_render$J], ["__scopeId", "data-v-f84de764"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/uni_modules/vk-uview-ui/components/u-badge/u-badge.vue"]]);
  const _sfc_main$J = {
    name: "u-tabs",
    emits: ["update:modelValue", "input", "change"],
    props: {
      // 通过双向绑定控制组件的弹出与收起
      value: {
        type: [Number, String],
        default: 0
      },
      modelValue: {
        type: [Number, String],
        default: 0
      },
      // 当前活动tab的索引（请使用 v-model="current" 代替 :current="current" @change="change" 其他不变）
      current: {
        type: [Number, String],
        default: 0
      },
      // 导航菜单是否需要滚动，如只有2或者3个的时候，就不需要滚动了，此时使用flex平分tab的宽度
      isScroll: {
        type: Boolean,
        default: true
      },
      //需循环的标签列表
      list: {
        type: Array,
        default() {
          return [];
        }
      },
      // 导航栏的高度和行高
      height: {
        type: [String, Number],
        default: 80
      },
      // 字体大小
      fontSize: {
        type: [String, Number],
        default: 30
      },
      // 过渡动画时长, 单位ms
      duration: {
        type: [String, Number],
        default: 0.5
      },
      // 选中项的主题颜色
      activeColor: {
        type: String,
        default: "#2979ff"
      },
      // 未选中项的颜色
      inactiveColor: {
        type: String,
        default: "#303133"
      },
      // 菜单底部移动的bar的宽度，单位rpx
      barWidth: {
        type: [String, Number],
        default: 40
      },
      // 移动bar的高度
      barHeight: {
        type: [String, Number],
        default: 6
      },
      // 单个tab的左或有内边距（左右相同）
      gutter: {
        type: [String, Number],
        default: 30
      },
      // 导航栏的背景颜色
      bgColor: {
        type: String,
        default: "#ffffff"
      },
      // 读取传入的数组对象的属性(tab名称)
      name: {
        type: String,
        default: "name"
      },
      // 读取传入的数组对象的属性(徽标数)
      count: {
        type: String,
        default: "count"
      },
      // 徽标数位置偏移
      offset: {
        type: Array,
        default: () => {
          return [5, 20];
        }
      },
      // 活动tab字体是否加粗
      bold: {
        type: Boolean,
        default: true
      },
      // 当前活动tab item的样式
      activeItemStyle: {
        type: Object,
        default() {
          return {};
        }
      },
      // 是否显示底部的滑块
      showBar: {
        type: Boolean,
        default: true
      },
      // 底部滑块的自定义样式
      barStyle: {
        type: Object,
        default() {
          return {};
        }
      },
      // 标签的宽度
      itemWidth: {
        type: [Number, String],
        default: "auto"
      }
    },
    data() {
      return {
        scrollLeft: 0,
        // 滚动scroll-view的左边滚动距离
        tabQueryInfo: [],
        // 存放对tab菜单查询后的节点信息
        componentWidth: 0,
        // 屏幕宽度，单位为px
        scrollBarLeft: 0,
        // 移动bar需要通过translateX()移动的距离
        parentLeft: 0,
        // 父元素(tabs组件)到屏幕左边的距离
        id: this.$u.guid(),
        // id值
        currentIndex: this.current,
        barFirstTimeMove: true
        // 滑块第一次移动时(页面刚生成时)，无需动画，否则给人怪异的感觉
      };
    },
    watch: {
      // 监听tab的变化，重新计算tab菜单的布局信息，因为实际使用中菜单可能是通过
      // 后台获取的（如新闻app顶部的菜单），获取返回需要一定时间，所以list变化时，重新获取布局信息
      list(n2, o2) {
        if (n2.length !== o2.length)
          this.currentIndex = 0;
        this.$nextTick(() => {
          this.init();
        });
      },
      current: {
        immediate: true,
        handler(nVal, oVal) {
          this.$nextTick(() => {
            this.currentIndex = nVal;
            this.scrollByIndex();
          });
        }
      },
      valueCom: {
        immediate: true,
        handler(nVal, oVal) {
          this.$nextTick(() => {
            this.currentIndex = nVal;
            this.scrollByIndex();
          });
        }
      }
    },
    computed: {
      valueCom() {
        return this.modelValue;
      },
      // 移动bar的样式
      tabBarStyle() {
        let style = {
          width: this.barWidth + "rpx",
          transform: `translate(${this.scrollBarLeft}px, -100%)`,
          // 滑块在页面渲染后第一次滑动时，无需动画效果
          "transition-duration": `${this.barFirstTimeMove ? 0 : this.duration}s`,
          "background-color": this.activeColor,
          height: this.barHeight + "rpx",
          // 设置一个很大的值，它会自动取能用的最大值，不用高度的一半，是因为高度可能是单数，会有小数出现
          "border-radius": `${this.barHeight / 2}px`
        };
        Object.assign(style, this.barStyle);
        return style;
      },
      // tab的样式
      tabItemStyle() {
        return (index) => {
          let style = {
            height: this.height + "rpx",
            "line-height": this.height + "rpx",
            "font-size": this.fontSize + "rpx",
            "transition-duration": `${this.duration}s`,
            padding: this.isScroll ? `0 ${this.gutter}rpx` : "",
            flex: this.isScroll ? "auto" : "1",
            width: this.$u.addUnit(this.itemWidth)
          };
          if (index == this.currentIndex && this.bold)
            style.fontWeight = "bold";
          if (index == this.currentIndex) {
            style.color = this.activeColor;
            style = Object.assign(style, this.activeItemStyle);
          } else {
            style.color = this.inactiveColor;
          }
          return style;
        };
      }
    },
    methods: {
      // 设置一个init方法，方便多处调用
      async init() {
        let tabRect = await this.$uGetRect("#" + this.id);
        this.parentLeft = tabRect.left;
        this.componentWidth = tabRect.width;
        this.getTabRect();
      },
      // 点击某一个tab菜单
      clickTab(index) {
        if (index == this.currentIndex)
          return;
        this.$emit("change", index);
        this.$emit("input", index);
        this.$emit("update:modelValue", index);
      },
      // 查询tab的布局信息
      getTabRect() {
        let query = uni.createSelectorQuery().in(this);
        for (let i2 = 0; i2 < this.list.length; i2++) {
          query.select(`#u-tab-item-${i2}`).fields({
            size: true,
            rect: true
          });
        }
        query.exec(
          (function(res2) {
            this.tabQueryInfo = res2;
            this.scrollByIndex();
          }).bind(this)
        );
      },
      // 滚动scroll-view，让活动的tab处于屏幕的中间位置
      scrollByIndex() {
        let tabInfo = this.tabQueryInfo[this.currentIndex];
        if (!tabInfo)
          return;
        let tabWidth = tabInfo.width;
        let offsetLeft = tabInfo.left - this.parentLeft;
        let scrollLeft = offsetLeft - (this.componentWidth - tabWidth) / 2;
        this.scrollLeft = scrollLeft < 0 ? 0 : scrollLeft;
        let left = tabInfo.left + tabInfo.width / 2 - this.parentLeft;
        this.scrollBarLeft = left - uni.upx2px(this.barWidth) / 2;
        if (this.barFirstTimeMove == true) {
          setTimeout(() => {
            this.barFirstTimeMove = false;
          }, 100);
        }
      }
    },
    mounted() {
      this.init();
    }
  };
  function _sfc_render$I(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_u_badge = resolveEasycom(vue.resolveDynamicComponent("u-badge"), __easycom_0);
    return vue.openBlock(), vue.createElementBlock(
      "view",
      {
        class: "u-tabs",
        style: vue.normalizeStyle({
          background: $props.bgColor
        })
      },
      [
        vue.createElementVNode("view", { id: $data.id }, [
          vue.createElementVNode("scroll-view", {
            "scroll-x": "",
            class: "u-scroll-view",
            "scroll-left": $data.scrollLeft,
            "scroll-with-animation": ""
          }, [
            vue.createElementVNode("view", {
              class: vue.normalizeClass(["u-scroll-box", { "u-tabs-scroll-flex": !$props.isScroll }]),
              id: $data.id
            }, [
              (vue.openBlock(true), vue.createElementBlock(
                vue.Fragment,
                null,
                vue.renderList($props.list, (item, index) => {
                  return vue.openBlock(), vue.createElementBlock("view", {
                    class: "u-tab-item u-line-1",
                    id: "u-tab-item-" + index,
                    key: index,
                    onClick: ($event) => $options.clickTab(index),
                    style: vue.normalizeStyle([$options.tabItemStyle(index)])
                  }, [
                    vue.createVNode(_component_u_badge, {
                      count: item[$props.count] || item["count"] || 0,
                      offset: $props.offset,
                      size: "mini"
                    }, null, 8, ["count", "offset"]),
                    vue.createTextVNode(
                      " " + vue.toDisplayString(item[$props.name] || item["name"]),
                      1
                      /* TEXT */
                    )
                  ], 12, ["id", "onClick"]);
                }),
                128
                /* KEYED_FRAGMENT */
              )),
              $props.showBar ? (vue.openBlock(), vue.createElementBlock(
                "view",
                {
                  key: 0,
                  class: "u-tab-bar",
                  style: vue.normalizeStyle([$options.tabBarStyle])
                },
                null,
                4
                /* STYLE */
              )) : vue.createCommentVNode("v-if", true)
            ], 10, ["id"])
          ], 8, ["scroll-left"])
        ], 8, ["id"])
      ],
      4
      /* STYLE */
    );
  }
  const __easycom_1$1 = /* @__PURE__ */ _export_sfc(_sfc_main$J, [["render", _sfc_render$I], ["__scopeId", "data-v-750d9d75"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/uni_modules/vk-uview-ui/components/u-tabs/u-tabs.vue"]]);
  const getUserBaseSetting = (params, config2 = {}) => http$1.get("/api/user/roleInfo", params, config2);
  const postOrder = (params, config2 = {}) => http$1.post(`/api/admin/order/manage/paging`, params, config2);
  const cancel = (params, config2 = {}) => http$1.post(`/api/order/order/cancel`, params, config2);
  const serviceTyep = (type) => {
    const SERVICE_TYEP = {
      1: "语音",
      2: "视频",
      3: "文字"
    };
    return SERVICE_TYEP[type];
  };
  const _sfc_main$I = {
    __name: "consult-order",
    setup(__props, { expose: __expose }) {
      __expose();
      const tabs = vue.ref([
        { name: "全部" },
        { name: "待支付" },
        { name: "待咨询" },
        { name: "待评价" },
        { name: "交易完成" }
      ]);
      const paramsData = vue.ref({
        current: 1,
        params: {
          orderType: 9,
          current: 1,
          size: 10
        },
        size: 10
      });
      const currentTab = vue.ref(0);
      const orderList2 = vue.ref([]);
      const changeTab = (e2) => {
        paramsData.value.current = 1;
        paramsData.value.params.status = e2;
        currentTab.value = e2;
        orderList2.value = [];
        if (e2 == 0) {
          delete paramsData.value.params.status;
        }
        postList(false);
      };
      const listEmpty = vue.ref(false);
      onReachBottom(() => {
        if (!listEmpty.value) {
          paramsData.value.current += 1;
          postList(true);
        }
      });
      const postList = async (val2) => {
        try {
          const { data } = await postOrder(paramsData.value);
          if (val2) {
            orderList2.value = [...orderList2.value, ...data.records];
          } else {
            orderList2.value = data.records;
          }
          listEmpty.value = res.data.records.length === 0 ? true : false;
        } catch (e2) {
          formatAppLog("log", "at pages/payment/order/consult-order.vue:175", e2);
        }
      };
      const getStatusText = (status) => {
        switch (status) {
          case 1:
            return "待支付";
          case 2:
            return "待咨询";
          case 3:
            return "待评价";
          case 4:
            return "已完成";
          case 5:
            return "交易关闭";
          case 6:
            return "退款";
          default:
            return "";
        }
      };
      const copyText = (text) => {
        uni.setClipboardData({
          data: text,
          success(e2) {
            uni.showToast({
              title: "已复制"
            });
          }
        });
      };
      const getStatusClass = (status) => {
        return {
          待支付: "",
          待咨询: "",
          待评价: "",
          已完成: "",
          未完成: ""
        }[status];
      };
      const typeId = vue.ref({});
      onLoad((options) => {
        typeId.value = JSON.parse(options.type);
        if (options.identity == "consult-order") {
          paramsData.value.params.consultantId = typeId.value.id;
        } else if (options.identity == "listener-order") {
          paramsData.value.params.listenerId = typeId.value.id;
        } else {
          paramsData.value.params.userId = typeId.value.id;
        }
      });
      const toDetail = (item) => {
        uni.navigateTo({
          url: `/pages/payment/order-details?status=${JSON.stringify(item)}&type=${JSON.stringify(typeId.value)}&colorType=1`
        });
      };
      const toComment = (item) => {
        uni.navigateTo({
          url: `/pages/payment/order/evaluation-order?type=${JSON.stringify(
            typeId.value
          )}&colorType=2`
        });
      };
      const handleChat = (val2) => {
        formatAppLog("log", "at pages/payment/order/consult-order.vue:248", val2);
      };
      const cancelOrder = async (item) => {
        try {
          const res2 = await cancel({ orderSn: item.orderSn });
          uni.showToast({
            title: "取消成功",
            icon: "none"
          });
          postList(false);
        } catch (e2) {
          formatAppLog("log", "at pages/payment/order/consult-order.vue:265", e2);
        }
      };
      vue.onMounted(() => {
        postList(false);
      });
      const __returned__ = { tabs, paramsData, currentTab, orderList: orderList2, changeTab, listEmpty, postList, getStatusText, copyText, getStatusClass, typeId, toDetail, toComment, handleChat, cancelOrder, ref: vue.ref, computed: vue.computed, onMounted: vue.onMounted, get onLoad() {
        return onLoad;
      }, get onReachBottom() {
        return onReachBottom;
      }, get postOrder() {
        return postOrder;
      }, get cancel() {
        return cancel;
      }, get serviceTyep() {
        return serviceTyep;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$H(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_u_navbar = resolveEasycom(vue.resolveDynamicComponent("u-navbar"), __easycom_0$1);
    const _component_u_tabs = resolveEasycom(vue.resolveDynamicComponent("u-tabs"), __easycom_1$1);
    const _component_u_button = resolveEasycom(vue.resolveDynamicComponent("u-button"), __easycom_1$2);
    return vue.openBlock(), vue.createElementBlock("view", { class: "order-page" }, [
      vue.createVNode(_component_u_navbar, {
        title: "咨询订单",
        autoBack: true,
        background: { backgroundColor: "#f7f8fa" }
      }),
      vue.createVNode(_component_u_tabs, {
        list: $setup.tabs,
        onChange: $setup.changeTab,
        current: $setup.currentTab,
        style: { "background-color": "#f7f8fa", "border": "none" }
      }, null, 8, ["list", "current"]),
      vue.createElementVNode("scroll-view", {
        "scroll-y": "",
        class: "order-list"
      }, [
        (vue.openBlock(true), vue.createElementBlock(
          vue.Fragment,
          null,
          vue.renderList($setup.orderList, (item, index) => {
            return vue.openBlock(), vue.createElementBlock(
              "view",
              {
                key: index,
                class: vue.normalizeClass(["order-card", $setup.getStatusClass(item.status)])
              },
              [
                vue.createElementVNode("view", { class: "order-header" }, [
                  vue.createElementVNode("text", { class: "order-no" }, [
                    vue.createTextVNode(
                      "订单号：" + vue.toDisplayString(item.orderSn) + " ",
                      1
                      /* TEXT */
                    ),
                    vue.createElementVNode("image", {
                      src: _imports_0$5,
                      style: { "width": "28rpx", "height": "28rpx", "margin-left": "15rpx" },
                      onClick: ($event) => $setup.copyText(item.orderSn)
                    }, null, 8, ["onClick"])
                  ]),
                  vue.createElementVNode(
                    "text",
                    { class: "status green" },
                    vue.toDisplayString($setup.getStatusText(item.status)),
                    1
                    /* TEXT */
                  )
                ]),
                vue.createElementVNode("view", { class: "user-info" }, [
                  vue.createElementVNode("image", {
                    src: item.teacherAvatar,
                    class: "avatar"
                  }, null, 8, ["src"]),
                  vue.createElementVNode(
                    "text",
                    { class: "username" },
                    vue.toDisplayString(item.teacherName),
                    1
                    /* TEXT */
                  )
                ]),
                vue.createElementVNode("view", {
                  class: "order-body",
                  onClick: ($event) => $setup.toDetail(item)
                }, [
                  vue.createElementVNode("view", { class: "desc" }, [
                    vue.createElementVNode("text", null, "购买时长："),
                    vue.createTextVNode(
                      vue.toDisplayString(item.buyDuration),
                      1
                      /* TEXT */
                    )
                  ]),
                  vue.createElementVNode("view", { class: "desc" }, [
                    vue.createElementVNode("text", null, "服务方式："),
                    vue.createTextVNode(
                      vue.toDisplayString(item.consultTypeDesc),
                      1
                      /* TEXT */
                    )
                  ]),
                  vue.createElementVNode("view", { class: "desc" }, [
                    vue.createElementVNode("text", null, "剩余时间："),
                    vue.createTextVNode(
                      vue.toDisplayString(item.remainingDuration),
                      1
                      /* TEXT */
                    )
                  ]),
                  vue.createElementVNode("view", { class: "desc" }, [
                    vue.createElementVNode("text", null, "到期时间："),
                    vue.createTextVNode(
                      vue.toDisplayString(item.expireTime),
                      1
                      /* TEXT */
                    )
                  ]),
                  vue.createElementVNode("view", { class: "desc" }, [
                    vue.createElementVNode("text", null, "下单时间："),
                    vue.createTextVNode(
                      vue.toDisplayString(item.createTime),
                      1
                      /* TEXT */
                    )
                  ])
                ], 8, ["onClick"]),
                vue.createElementVNode("view", { class: "order-footer" }, [
                  vue.createElementVNode(
                    "view",
                    { class: "price" },
                    "￥" + vue.toDisplayString(item.orderMoney),
                    1
                    /* TEXT */
                  )
                ]),
                vue.createElementVNode("view", { class: "btn-group" }, [
                  vue.createElementVNode("view", { style: { "display": "flex", "flex-direction": "row", "gap": "20rpx" } }, [
                    item.status == 1 ? (vue.openBlock(), vue.createBlock(_component_u_button, {
                      key: 0,
                      class: "btn",
                      size: "small",
                      shape: "circle",
                      plain: "",
                      type: "info",
                      onClick: ($event) => $setup.cancelOrder(item)
                    }, {
                      default: vue.withCtx(() => [
                        vue.createTextVNode("取消订单")
                      ]),
                      _: 2
                      /* DYNAMIC */
                    }, 1032, ["onClick"])) : vue.createCommentVNode("v-if", true),
                    item.status == 1 ? (vue.openBlock(), vue.createBlock(_component_u_button, {
                      key: 1,
                      class: "btn",
                      size: "small",
                      shape: "circle",
                      type: "success"
                    }, {
                      default: vue.withCtx(() => [
                        vue.createTextVNode("立即支付")
                      ]),
                      _: 1
                      /* STABLE */
                    })) : vue.createCommentVNode("v-if", true),
                    item.status == 2 ? (vue.openBlock(), vue.createBlock(_component_u_button, {
                      key: 2,
                      class: "btn",
                      size: "small",
                      shape: "circle",
                      plain: "",
                      type: "info"
                    }, {
                      default: vue.withCtx(() => [
                        vue.createTextVNode("退款")
                      ]),
                      _: 1
                      /* STABLE */
                    })) : vue.createCommentVNode("v-if", true),
                    item.status == 2 ? (vue.openBlock(), vue.createBlock(_component_u_button, {
                      key: 3,
                      class: "btn",
                      size: "small",
                      shape: "circle",
                      type: "success",
                      onClick: ($event) => $setup.handleChat(item)
                    }, {
                      default: vue.withCtx(() => [
                        vue.createTextVNode("立即咨询")
                      ]),
                      _: 2
                      /* DYNAMIC */
                    }, 1032, ["onClick"])) : vue.createCommentVNode("v-if", true),
                    item.status == 3 ? (vue.openBlock(), vue.createBlock(_component_u_button, {
                      key: 4,
                      class: "btn",
                      size: "small",
                      shape: "circle",
                      type: "success",
                      onClick: ($event) => $setup.toComment(item)
                    }, {
                      default: vue.withCtx(() => [
                        vue.createTextVNode("去评价")
                      ]),
                      _: 2
                      /* DYNAMIC */
                    }, 1032, ["onClick"])) : vue.createCommentVNode("v-if", true)
                  ])
                ])
              ],
              2
              /* CLASS */
            );
          }),
          128
          /* KEYED_FRAGMENT */
        ))
      ])
    ]);
  }
  const PagesPaymentOrderConsultOrder = /* @__PURE__ */ _export_sfc(_sfc_main$I, [["render", _sfc_render$H], ["__scopeId", "data-v-d8eacf03"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/payment/order/consult-order.vue"]]);
  const _sfc_main$H = {
    __name: "exam-order",
    setup(__props, { expose: __expose }) {
      __expose();
      const tabs = vue.ref([
        {
          name: "已付款"
        },
        {
          name: "待支付"
        }
      ]);
      const currentTab = vue.ref(0);
      const recordList = vue.ref([
        {
          orderNo: "78567564565",
          status: "未完成",
          name: "张三",
          avatar: "/static/avatar.png",
          image: "/static/test.png",
          title: "谈一段好的爱情",
          desc: "现在社会压力越来越大现在社会压力越来越大现在社会压力越来越大",
          price: 66,
          time: "2025-11-02 09:25"
        },
        {
          orderNo: "78567564565",
          status: "已完成",
          name: "张三",
          avatar: "/static/avatar.png",
          image: "/static/test.png",
          title: "谈一段好的爱情",
          desc: "现在社会压力越来越大现在社会压力越来越大现在社会压力越来越大",
          price: 66,
          time: "2025-11-02 09:25"
        },
        {
          orderNo: "78567564565",
          status: "待支付",
          name: "张三",
          avatar: "/static/avatar.png",
          image: "/static/test.png",
          title: "谈一段好的爱情",
          desc: "现在社会压力越来越大现在社会压力越来越大现在社会压力越来越大",
          price: 66,
          time: "2025-11-02 09:25"
        }
      ]);
      const changeTab = (e2) => {
        currentTab.value = e2.index;
      };
      const statusClass = (status) => {
        return {
          "未完成": "red",
          "已完成": "green",
          "待支付": "orange"
        }[status];
      };
      const __returned__ = { tabs, currentTab, recordList, changeTab, statusClass, ref: vue.ref };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$G(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_u_navbar = resolveEasycom(vue.resolveDynamicComponent("u-navbar"), __easycom_0$1);
    const _component_u_tabs = resolveEasycom(vue.resolveDynamicComponent("u-tabs"), __easycom_1$1);
    const _component_u_button = resolveEasycom(vue.resolveDynamicComponent("u-button"), __easycom_1$2);
    return vue.openBlock(), vue.createElementBlock("view", { class: "evaluate-page" }, [
      vue.createVNode(_component_u_navbar, {
        title: "评测记录",
        autoBack: true
      }),
      vue.createVNode(_component_u_tabs, {
        list: $setup.tabs,
        onClick: $setup.changeTab,
        current: $setup.currentTab,
        lineColor: "#00C28A",
        activeStyle: "color:#000;font-weight:600",
        inactiveStyle: "color:#666"
      }, null, 8, ["list", "current"]),
      vue.createElementVNode("scroll-view", {
        "scroll-y": "",
        class: "record-list"
      }, [
        (vue.openBlock(true), vue.createElementBlock(
          vue.Fragment,
          null,
          vue.renderList($setup.recordList, (item, index) => {
            return vue.openBlock(), vue.createElementBlock("view", {
              key: index,
              class: "record-card"
            }, [
              vue.createElementVNode("view", { class: "order-header" }, [
                vue.createElementVNode(
                  "text",
                  { class: "order-no" },
                  "订单号：" + vue.toDisplayString(item.orderNo),
                  1
                  /* TEXT */
                ),
                vue.createElementVNode(
                  "text",
                  {
                    class: vue.normalizeClass(["status", $setup.statusClass(item.status)])
                  },
                  vue.toDisplayString(item.status),
                  3
                  /* TEXT, CLASS */
                )
              ]),
              vue.createElementVNode("view", { class: "user-info" }, [
                vue.createElementVNode("image", {
                  src: item.avatar,
                  class: "avatar"
                }, null, 8, ["src"]),
                vue.createElementVNode(
                  "text",
                  { class: "name" },
                  vue.toDisplayString(item.name),
                  1
                  /* TEXT */
                )
              ]),
              vue.createElementVNode("view", { class: "record-content" }, [
                vue.createElementVNode("image", {
                  src: item.image,
                  class: "cover"
                }, null, 8, ["src"]),
                vue.createElementVNode("view", { class: "info" }, [
                  vue.createElementVNode(
                    "view",
                    { class: "title" },
                    vue.toDisplayString(item.title),
                    1
                    /* TEXT */
                  ),
                  vue.createElementVNode(
                    "view",
                    { class: "desc" },
                    vue.toDisplayString(item.desc),
                    1
                    /* TEXT */
                  )
                ])
              ]),
              vue.createElementVNode("view", { class: "record-footer" }, [
                vue.createElementVNode(
                  "text",
                  { class: "time" },
                  "下单时间：" + vue.toDisplayString(item.time),
                  1
                  /* TEXT */
                ),
                vue.createElementVNode(
                  "text",
                  { class: "price" },
                  "￥" + vue.toDisplayString(item.price),
                  1
                  /* TEXT */
                )
              ]),
              vue.createElementVNode("view", { class: "btn-group" }, [
                vue.createElementVNode("view", { style: { "display": "flex", "flex-direction": "row", "gap": "10rpx" } }, [
                  item.status === "未完成" ? (vue.openBlock(), vue.createBlock(_component_u_button, {
                    key: 0,
                    class: "btn",
                    size: "small",
                    shape: "circle",
                    type: "success"
                  }, {
                    default: vue.withCtx(() => [
                      vue.createTextVNode("继续评测")
                    ]),
                    _: 1
                    /* STABLE */
                  })) : vue.createCommentVNode("v-if", true),
                  item.status === "已完成" ? (vue.openBlock(), vue.createBlock(_component_u_button, {
                    key: 1,
                    class: "btn",
                    size: "small",
                    shape: "circle",
                    type: "success"
                  }, {
                    default: vue.withCtx(() => [
                      vue.createTextVNode("查看报告")
                    ]),
                    _: 1
                    /* STABLE */
                  })) : vue.createCommentVNode("v-if", true),
                  item.status === "待支付" ? (vue.openBlock(), vue.createBlock(_component_u_button, {
                    key: 2,
                    class: "btn",
                    size: "small",
                    shape: "circle",
                    plain: "",
                    type: "info"
                  }, {
                    default: vue.withCtx(() => [
                      vue.createTextVNode("取消订单")
                    ]),
                    _: 1
                    /* STABLE */
                  })) : vue.createCommentVNode("v-if", true),
                  item.status === "待支付" ? (vue.openBlock(), vue.createBlock(_component_u_button, {
                    key: 3,
                    class: "btn",
                    size: "small",
                    shape: "circle",
                    type: "success"
                  }, {
                    default: vue.withCtx(() => [
                      vue.createTextVNode("立即支付")
                    ]),
                    _: 1
                    /* STABLE */
                  })) : vue.createCommentVNode("v-if", true)
                ])
              ])
            ]);
          }),
          128
          /* KEYED_FRAGMENT */
        ))
      ])
    ]);
  }
  const PagesPaymentOrderExamOrder = /* @__PURE__ */ _export_sfc(_sfc_main$H, [["render", _sfc_render$G], ["__scopeId", "data-v-0bdda119"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/payment/order/exam-order.vue"]]);
  const _sfc_main$G = {
    __name: "listener-order",
    setup(__props, { expose: __expose }) {
      __expose();
      const tabs = vue.ref([
        { name: "全部" },
        { name: "待支付" },
        { name: "待服务" },
        { name: "待评价" },
        { name: "交易完成" }
      ]);
      const orderService = vue.ref(false);
      const currentTab = vue.ref(0);
      const orderList2 = vue.ref([]);
      const changeTab = (e2) => {
        paramsData.value.current = 1;
        paramsData.value.params.status = e2;
        currentTab.value = e2;
        orderList2.value = [];
        if (e2 == 0) {
          delete paramsData.value.params.status;
        }
        postList(false);
      };
      const paramsData = vue.ref({
        current: 1,
        params: {
          current: 1,
          size: 10,
          orderType: 10
        },
        size: 10
      });
      const listEmpty = vue.ref(false);
      onReachBottom(() => {
        if (!listEmpty.value) {
          paramsData.value.current += 1;
          postList(true);
        }
      });
      const postList = async (val2) => {
        try {
          const res2 = await postOrder(paramsData.value);
          if (val2) {
            orderList2.value = [...orderList2.value, ...res2.data.records];
          } else {
            orderList2.value = res2.data.records;
          }
          listEmpty.value = res2.data.records.length === 0 ? true : false;
        } catch (e2) {
          formatAppLog("log", "at pages/payment/order/listener-order.vue:180", e2);
        }
      };
      const getStatusText = (status) => {
        switch (status) {
          case 1:
            return "待付款";
          case 2:
            return "待咨询";
          case 3:
            return "待评价";
          case 4:
            return "已完成";
          case 5:
            return "交易关闭";
          case 6:
            return "退款";
          default:
            return "";
        }
      };
      const copyText = (text) => {
        uni.setClipboardData({
          data: text,
          success(e2) {
            uni.showToast({
              title: "已复制"
            });
          }
        });
      };
      const getStatusClass = (status) => {
        return {
          待支付: "",
          待咨询: "",
          待评价: "",
          已完成: "",
          未完成: ""
        }[status];
      };
      const typeId = vue.ref({});
      onLoad((options) => {
        orderService.value = options.service;
        typeId.value = JSON.parse(options.type);
        if (options.identity == "consult-order") {
          paramsData.value.params.consultantId = typeId.value.id;
        } else if (options.identity == "listener-order") {
          paramsData.value.params.listenerId = typeId.value.id;
        } else {
          paramsData.value.params.userId = typeId.value.id;
        }
      });
      const toDetail = (item) => {
        uni.navigateTo({
          url: `/pages/payment/order-details?status=${JSON.stringify(item)}&type=${JSON.stringify(typeId.value)}&colorType=2`
        });
      };
      const toComment = (item) => {
        uni.navigateTo({
          url: `/pages/payment/order/evaluation-order?type=${JSON.stringify(
            typeId.value
          )}&colorType=1`
        });
      };
      const handleChat = (val2) => {
        const { teacherUserId, teacherName, teacherAvatar } = val2;
        uni.navigateTo({
          url: `/pages/message/private-chat?to=${teacherUserId}&name=${teacherName}&avatar=${teacherAvatar}`
        });
      };
      const cancelOrder = async (item) => {
        try {
          const res2 = await cancel({ orderSn: item.orderSn });
          uni.showToast({
            title: "取消成功",
            icon: "none"
          });
          postList(false);
        } catch (e2) {
          formatAppLog("log", "at pages/payment/order/listener-order.vue:269", e2);
        }
      };
      const toRefund = (item) => {
        uni.navigateTo({
          url: `/pages/payment/order/refund-order?order=${JSON.stringify(item)}`
        });
      };
      vue.onMounted(() => {
        postList(false);
      });
      const __returned__ = { tabs, orderService, currentTab, orderList: orderList2, changeTab, paramsData, listEmpty, postList, getStatusText, copyText, getStatusClass, typeId, toDetail, toComment, handleChat, cancelOrder, toRefund, ref: vue.ref, onMounted: vue.onMounted, get onLoad() {
        return onLoad;
      }, get onReachBottom() {
        return onReachBottom;
      }, get postOrder() {
        return postOrder;
      }, get cancel() {
        return cancel;
      }, get serviceTyep() {
        return serviceTyep;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$F(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_u_navbar = resolveEasycom(vue.resolveDynamicComponent("u-navbar"), __easycom_0$1);
    const _component_u_tabs = resolveEasycom(vue.resolveDynamicComponent("u-tabs"), __easycom_1$1);
    const _component_u_button = resolveEasycom(vue.resolveDynamicComponent("u-button"), __easycom_1$2);
    return vue.openBlock(), vue.createElementBlock("view", { class: "order-page" }, [
      vue.createVNode(_component_u_navbar, {
        title: "倾诉订单",
        autoBack: true,
        background: { backgroundColor: "#f7f8fa" }
      }),
      vue.createVNode(_component_u_tabs, {
        list: $setup.tabs,
        onChange: $setup.changeTab,
        current: $setup.currentTab,
        lineColor: "#00C28A",
        activeStyle: "color:#000;font-weight:600",
        inactiveStyle: "color:#666",
        style: { "background-color": "#f7f8fa" }
      }, null, 8, ["list", "current"]),
      vue.createElementVNode("scroll-view", {
        "scroll-y": "",
        class: "order-list"
      }, [
        (vue.openBlock(true), vue.createElementBlock(
          vue.Fragment,
          null,
          vue.renderList($setup.orderList, (item, index) => {
            return vue.openBlock(), vue.createElementBlock(
              "view",
              {
                key: index,
                class: vue.normalizeClass(["order-card", $setup.getStatusClass(item.status)])
              },
              [
                vue.createElementVNode("view", { class: "order-header" }, [
                  vue.createElementVNode("text", { class: "order-no" }, [
                    vue.createTextVNode(
                      "订单号：" + vue.toDisplayString(item.orderSn) + " ",
                      1
                      /* TEXT */
                    ),
                    vue.createElementVNode("image", {
                      src: _imports_0$5,
                      style: { "width": "28rpx", "height": "28rpx", "margin-left": "15rpx" },
                      onClick: ($event) => $setup.copyText(item.orderSn)
                    }, null, 8, ["onClick"])
                  ]),
                  vue.createElementVNode(
                    "text",
                    { class: "status orange" },
                    vue.toDisplayString($setup.getStatusText(item.status)),
                    1
                    /* TEXT */
                  )
                ]),
                vue.createElementVNode("view", { class: "user-info" }, [
                  vue.createElementVNode("image", {
                    src: item.teacherAvatar,
                    class: "avatar"
                  }, null, 8, ["src"]),
                  vue.createElementVNode(
                    "text",
                    { class: "username" },
                    vue.toDisplayString(item.teacherName),
                    1
                    /* TEXT */
                  )
                ]),
                vue.createElementVNode("view", {
                  class: "order-body",
                  onClick: ($event) => $setup.toDetail(item)
                }, [
                  vue.createElementVNode("view", { class: "desc" }, [
                    vue.createElementVNode("text", null, "购买时长："),
                    vue.createTextVNode(
                      vue.toDisplayString(item.buyDuration),
                      1
                      /* TEXT */
                    )
                  ]),
                  vue.createElementVNode("view", { class: "desc" }, [
                    vue.createElementVNode("text", null, "服务方式："),
                    vue.createTextVNode(
                      vue.toDisplayString(item.consultTypeDesc),
                      1
                      /* TEXT */
                    )
                  ]),
                  vue.createElementVNode("view", { class: "desc" }, [
                    vue.createElementVNode("text", null, "剩余时间："),
                    vue.createTextVNode(
                      vue.toDisplayString(item.remainingDuration),
                      1
                      /* TEXT */
                    )
                  ]),
                  vue.createElementVNode("view", { class: "desc" }, [
                    vue.createElementVNode("text", null, "下单时间："),
                    vue.createTextVNode(
                      vue.toDisplayString(item.createTime),
                      1
                      /* TEXT */
                    )
                  ])
                ], 8, ["onClick"]),
                vue.createElementVNode("view", { class: "order-footer" }, [
                  vue.createElementVNode(
                    "view",
                    { class: "price" },
                    "￥" + vue.toDisplayString(item.orderMoney),
                    1
                    /* TEXT */
                  )
                ]),
                vue.createElementVNode("view", { class: "btn-group" }, [
                  vue.createElementVNode("view", { style: { "display": "flex", "flex-direction": "row", "gap": "20rpx" } }, [
                    item.status == 1 ? (vue.openBlock(), vue.createBlock(_component_u_button, {
                      key: 0,
                      class: "btn",
                      size: "small",
                      shape: "circle",
                      plain: "",
                      type: "info",
                      onClick: ($event) => $setup.cancelOrder(item)
                    }, {
                      default: vue.withCtx(() => [
                        vue.createTextVNode("取消订单")
                      ]),
                      _: 2
                      /* DYNAMIC */
                    }, 1032, ["onClick"])) : vue.createCommentVNode("v-if", true),
                    item.status == 1 && $setup.orderService ? (vue.openBlock(), vue.createBlock(_component_u_button, {
                      key: 1,
                      class: "btn",
                      size: "small",
                      shape: "circle",
                      type: "warning"
                    }, {
                      default: vue.withCtx(() => [
                        vue.createTextVNode("立即支付")
                      ]),
                      _: 1
                      /* STABLE */
                    })) : vue.createCommentVNode("v-if", true),
                    item.status == 2 ? (vue.openBlock(), vue.createBlock(_component_u_button, {
                      key: 2,
                      class: "btn",
                      size: "small",
                      shape: "circle",
                      plain: "",
                      type: "info",
                      onClick: ($event) => $setup.toRefund(item)
                    }, {
                      default: vue.withCtx(() => [
                        vue.createTextVNode("退款")
                      ]),
                      _: 2
                      /* DYNAMIC */
                    }, 1032, ["onClick"])) : vue.createCommentVNode("v-if", true),
                    item.status == 2 ? (vue.openBlock(), vue.createBlock(_component_u_button, {
                      key: 3,
                      class: "btn",
                      size: "small",
                      shape: "circle",
                      type: "warning",
                      onClick: ($event) => $setup.handleChat(item)
                    }, {
                      default: vue.withCtx(() => [
                        vue.createTextVNode("立即联系")
                      ]),
                      _: 2
                      /* DYNAMIC */
                    }, 1032, ["onClick"])) : vue.createCommentVNode("v-if", true),
                    item.status == 3 ? (vue.openBlock(), vue.createBlock(_component_u_button, {
                      key: 4,
                      class: "btn",
                      size: "small",
                      shape: "circle",
                      type: "warning",
                      onClick: ($event) => $setup.toComment(item)
                    }, {
                      default: vue.withCtx(() => [
                        vue.createTextVNode("去评价")
                      ]),
                      _: 2
                      /* DYNAMIC */
                    }, 1032, ["onClick"])) : vue.createCommentVNode("v-if", true)
                  ])
                ])
              ],
              2
              /* CLASS */
            );
          }),
          128
          /* KEYED_FRAGMENT */
        ))
      ])
    ]);
  }
  const PagesPaymentOrderListenerOrder = /* @__PURE__ */ _export_sfc(_sfc_main$G, [["render", _sfc_render$F], ["__scopeId", "data-v-7622675c"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/payment/order/listener-order.vue"]]);
  const _sfc_main$F = {
    __name: "bill-order",
    setup(__props, { expose: __expose }) {
      __expose();
      vue.useCssVars((_ctx) => ({
        "d5155521-statusBarHeight": statusBarHeight.value
      }));
      const globalStore = useGlobalDataStore();
      const statusBarHeight = vue.ref(globalStore.statusBarHeight + "px");
      onShow(() => {
      });
      const backFn = () => {
        uni.navigateBack({
          delta: 1
        });
      };
      const scrollTop = vue.ref(0);
      onPageScroll((e2) => {
        scrollTop.value = e2.scrollTop;
      });
      const clauses = vue.ref([
        {
          orderNumber: 78567564565,
          title: "婚姻关系咨询",
          time: "10分钟",
          service: "语音咨询",
          remainingTime: "10:00",
          timeOrder: "2024-06-01 14:30",
          timeExpiration: "2024-06-01 15:30",
          amountOrder: "￥200"
        },
        {
          orderNumber: 78567564565,
          title: "婚姻关系咨询",
          time: "10分钟",
          service: "语音咨询",
          remainingTime: "10:00",
          timeOrder: "2024-06-01 14:30",
          timeExpiration: "2024-06-01 15:30",
          amountOrder: "￥200"
        },
        {
          orderNumber: 78567564565,
          title: "婚姻关系咨询",
          time: "10分钟",
          service: "语音咨询",
          remainingTime: "10:00",
          timeOrder: "2024-06-01 14:30",
          timeExpiration: "2024-06-01 15:30",
          amountOrder: "￥200"
        }
      ]);
      const copyText = (text) => {
        uni.setClipboardData({
          data: text,
          success(e2) {
            uni.showToast({
              title: "已复制"
            });
          }
        });
      };
      const __returned__ = { globalStore, statusBarHeight, backFn, scrollTop, clauses, copyText, ref: vue.ref, get useGlobalDataStore() {
        return useGlobalDataStore;
      }, get onShow() {
        return onShow;
      }, get onPageScroll() {
        return onPageScroll;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$E(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    const _component_uni_nav_bar = resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"), __easycom_1$4);
    const _component_uni_datetime_picker = resolveEasycom(vue.resolveDynamicComponent("uni-datetime-picker"), __easycom_2$5);
    return vue.openBlock(), vue.createElementBlock("view", { class: "settled-box" }, [
      vue.createElementVNode("view", { class: "header" }, [
        vue.createVNode(_component_uni_nav_bar, {
          class: vue.normalizeClass([$setup.scrollTop > 15 ? "scrollClass" : "", "header-bar"]),
          backgroundColor: "rgba(255,255,255,0)",
          border: false,
          title: "账单"
        }, {
          left: vue.withCtx(() => [
            vue.createVNode(_component_uni_icons, {
              type: "left",
              size: "24",
              onClick: $setup.backFn
            })
          ]),
          right: vue.withCtx(() => [
            vue.createElementVNode("view", { class: "right" }, [
              vue.createElementVNode("image", {
                src: _imports_0$o,
                style: { "width": "40rpx", "height": "40rpx" }
              })
            ])
          ]),
          _: 1
          /* STABLE */
        }, 8, ["class"])
      ]),
      vue.createElementVNode("view", { class: "content" }, [
        vue.createElementVNode("view", { class: "content-details" }, [
          vue.createElementVNode("view", { class: "detail-item" }, [
            vue.createElementVNode("view", null, "支出"),
            vue.createElementVNode("view", null, "158 元")
          ]),
          vue.createElementVNode("view", null, "｜"),
          vue.createElementVNode("view", { class: "detail-item" }, [
            vue.createElementVNode("view", null, "退款"),
            vue.createElementVNode("view", null, "56 元")
          ])
        ]),
        vue.createElementVNode("view", { class: "content-tiem" }, [
          vue.createVNode(_component_uni_datetime_picker, {
            type: "date",
            placeholder: "选择开始日期",
            value: _ctx.single,
            onChange: _ctx.change
          }, null, 8, ["value", "onChange"]),
          vue.createElementVNode("view", null, "——"),
          vue.createVNode(_component_uni_datetime_picker, {
            type: "date",
            placeholder: "选择结束日期",
            value: _ctx.single,
            onChange: _ctx.change
          }, null, 8, ["value", "onChange"])
        ]),
        (vue.openBlock(true), vue.createElementBlock(
          vue.Fragment,
          null,
          vue.renderList($setup.clauses, (item, index) => {
            return vue.openBlock(), vue.createElementBlock("view", { class: "clause" }, [
              vue.createElementVNode("view", { class: "clause-item" }, [
                vue.createElementVNode("view", { class: "item-head" }, [
                  vue.createElementVNode("view", { class: "head-left" }, [
                    vue.createElementVNode("view", null, "头像"),
                    vue.createElementVNode("view", null, "张三")
                  ]),
                  vue.createElementVNode("view", { class: "head-right" }, [
                    vue.createElementVNode(
                      "view",
                      null,
                      "订单号：" + vue.toDisplayString(item.orderNumber),
                      1
                      /* TEXT */
                    ),
                    vue.createElementVNode("image", {
                      src: _imports_0$5,
                      style: { "width": "28rpx", "height": "28rpx", "margin-left": "15rpx" },
                      onClick: ($event) => $setup.copyText(item.orderNo)
                    }, null, 8, ["onClick"])
                  ])
                ]),
                vue.createElementVNode("view", { class: "item-content" }, [
                  vue.createElementVNode("view", { class: "content-left" }, [
                    vue.createElementVNode(
                      "view",
                      null,
                      vue.toDisplayString(item.title),
                      1
                      /* TEXT */
                    ),
                    vue.createElementVNode("view", null, [
                      vue.createElementVNode("text", null, "购买时长："),
                      vue.createTextVNode(
                        vue.toDisplayString(item.time),
                        1
                        /* TEXT */
                      )
                    ]),
                    vue.createElementVNode("view", null, [
                      vue.createElementVNode("text", null, "服务方式："),
                      vue.createTextVNode(
                        vue.toDisplayString(item.service),
                        1
                        /* TEXT */
                      )
                    ]),
                    vue.createElementVNode("view", null, [
                      vue.createElementVNode("text", null, "剩余时间："),
                      vue.createTextVNode(
                        vue.toDisplayString(item.remainingTime),
                        1
                        /* TEXT */
                      )
                    ]),
                    vue.createElementVNode("view", null, [
                      vue.createElementVNode("text", null, "下单时间："),
                      vue.createTextVNode(
                        vue.toDisplayString(item.timeOrder),
                        1
                        /* TEXT */
                      )
                    ]),
                    vue.createElementVNode("view", null, [
                      vue.createElementVNode("text", null, "到期时间："),
                      vue.createTextVNode(
                        vue.toDisplayString(item.timeExpiration),
                        1
                        /* TEXT */
                      )
                    ]),
                    vue.createElementVNode("view", null, [
                      vue.createElementVNode("text", null, "订单金额："),
                      vue.createTextVNode(
                        vue.toDisplayString(item.amountOrder),
                        1
                        /* TEXT */
                      )
                    ])
                  ]),
                  vue.createElementVNode("view", { class: "content-right" }, [
                    vue.createElementVNode(
                      "view",
                      null,
                      vue.toDisplayString(item.amountOrder),
                      1
                      /* TEXT */
                    ),
                    vue.createElementVNode("text", null, "支出")
                  ])
                ])
              ])
            ]);
          }),
          256
          /* UNKEYED_FRAGMENT */
        ))
      ])
    ]);
  }
  const PagesPaymentOrderBillOrder = /* @__PURE__ */ _export_sfc(_sfc_main$F, [["render", _sfc_render$E], ["__scopeId", "data-v-d5155521"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/payment/order/bill-order.vue"]]);
  const _sfc_main$E = {
    __name: "Tags-Container",
    props: {
      // 初始选中的标签（逗号分隔字符串）
      modelValue: {
        type: String,
        default: ""
      },
      // 输入框名称（用于表单提交）
      inputName: {
        type: String,
        default: "evaluation_tags"
      },
      // 是否显示调试信息
      debug: {
        type: Boolean,
        default: false
      },
      colorType: {
        type: String,
        default: "#34A76F"
      }
    },
    emits: ["update:modelValue"],
    setup(__props, { expose: __expose, emit: __emit }) {
      vue.useCssVars((_ctx) => ({
        "e3aa4145-colorType": __props.colorType
      }));
      const props = __props;
      const tagsList = vue.ref([
        "咨询师专业性",
        "共情与倾听能力",
        "沟通与引导技巧",
        "咨询效果满意度",
        "响应及时性",
        "隐私保护措施",
        "平台操作体验",
        "性价比感知"
      ]);
      const selectedTags = vue.ref([]);
      const initSelectedTags = () => {
        if (props.modelValue) {
          selectedTags.value = props.modelValue.split(",").filter((tag) => tag);
        }
      };
      initSelectedTags();
      vue.watch(() => props.modelValue, (newVal) => {
        if (newVal) {
          selectedTags.value = newVal.split(",").filter((tag) => tag);
        } else {
          selectedTags.value = [];
        }
      });
      const toggleTag = (tag) => {
        const index = selectedTags.value.indexOf(tag);
        if (index > -1) {
          selectedTags.value.splice(index, 1);
        } else {
          selectedTags.value.push(tag);
        }
      };
      const isTagSelected = (tag) => {
        return selectedTags.value.includes(tag);
      };
      const selectedTagsStr = vue.computed({
        get() {
          return selectedTags.value.join(",");
        },
        set(val2) {
          selectedTags.value = val2.split(",").filter((tag) => tag);
        }
      });
      const emit = __emit;
      vue.watch(selectedTagsStr, (newVal) => {
        emit("update:modelValue", newVal);
      });
      __expose({
        selectedTags,
        selectedTagsStr,
        toggleTag
      });
      const __returned__ = { props, tagsList, selectedTags, initSelectedTags, toggleTag, isTagSelected, selectedTagsStr, emit, ref: vue.ref, computed: vue.computed, watch: vue.watch };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$D(_ctx, _cache, $props, $setup, $data, $options) {
    return vue.openBlock(), vue.createElementBlock("view", { class: "tags-container" }, [
      vue.createElementVNode("view", { class: "tags-list" }, [
        (vue.openBlock(true), vue.createElementBlock(
          vue.Fragment,
          null,
          vue.renderList($setup.tagsList, (tag, index) => {
            return vue.openBlock(), vue.createElementBlock("view", {
              key: index,
              class: vue.normalizeClass(["tag-item", { "active": $setup.isTagSelected(tag) }]),
              onClick: ($event) => $setup.toggleTag(tag)
            }, vue.toDisplayString(tag), 11, ["onClick"]);
          }),
          128
          /* KEYED_FRAGMENT */
        ))
      ])
    ]);
  }
  const TagsSelect = /* @__PURE__ */ _export_sfc(_sfc_main$E, [["render", _sfc_render$D], ["__scopeId", "data-v-e3aa4145"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/components/Tags-Container.vue"]]);
  const _sfc_main$D = {
    __name: "evaluation-order",
    setup(__props, { expose: __expose }) {
      __expose();
      vue.useCssVars((_ctx) => ({
        "6e248be0-statusBarHeight": statusBarHeight.value,
        "6e248be0-startColor": startColor.value,
        "6e248be0-colorType": colorType.value
      }));
      const scrollTop = vue.ref(0);
      const globalStore = useGlobalDataStore();
      const statusBarHeight = vue.ref(globalStore.statusBarHeight + "px");
      const startColor = vue.ref("#35ca955c");
      const fromData = vue.ref({
        type: 1,
        // 评论类型
        tags: "",
        // 印象标签，逗号分隔
        star: 0,
        // 满意程度
        recommendStar: 0,
        // 值得推荐
        isAnonymous: 0,
        //是否匿名：0否 1是
        targetUserId: "1998631440393773058",
        content: ""
        //留言内容
      });
      const onPageScroll2 = (e2) => {
        scrollTop.value = e2.detail.scrollTop;
      };
      const backFn = () => {
        uni.navigateBack({
          delta: 1
        });
      };
      const orderInfo = vue.ref({});
      const colorType = vue.ref("#34A76F");
      onLoad((options) => {
        orderInfo.value = JSON.parse(options.order);
        formatAppLog("log", "at pages/payment/order/evaluation-order.vue:120", orderInfo.value, colorType.value, startColor.value);
        colorType.value = options.colorType == 1 ? "#eb9516" : "#35CA95";
        options.colorType == 1 ? startColor.value = "#ffbb4166" : startColor.value = "#35ca955c";
      });
      const popup = vue.ref(null);
      const closePopup = () => {
        popup.value.close();
      };
      const changeAnonymous = (e2) => {
        fromData.value.isAnonymous = e2.detail.value[0] ? 1 : 0;
      };
      const submitForm = async () => {
        if (!fromData.value.tags) {
          uni.showToast({
            title: "请至少选择一个评价维度",
            icon: "none"
          });
          return;
        }
        try {
          const res2 = await saveComment(fromData.value);
          uni.showToast({
            title: "评价提交成功",
            icon: "success"
          });
        } catch (e2) {
        }
      };
      const handleChat = () => {
        const { userId, teacherName, teacherAvatar } = orderInfo.value;
        uni.navigateTo({
          url: `/pages/message/private-chat?to=${userId}&name=${teacherName}&avatar=${teacherAvatar}`
        });
      };
      const __returned__ = { scrollTop, globalStore, statusBarHeight, startColor, fromData, onPageScroll: onPageScroll2, backFn, orderInfo, colorType, popup, closePopup, changeAnonymous, submitForm, handleChat, ref: vue.ref, watch: vue.watch, get useGlobalDataStore() {
        return useGlobalDataStore;
      }, get onShow() {
        return onShow;
      }, get onLoad() {
        return onLoad;
      }, get saveComment() {
        return saveComment;
      }, TagsSelect };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$C(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    const _component_uni_nav_bar = resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"), __easycom_1$4);
    const _component_uni_rate = resolveEasycom(vue.resolveDynamicComponent("uni-rate"), __easycom_2$9);
    const _component_uni_popup = resolveEasycom(vue.resolveDynamicComponent("uni-popup"), __easycom_3$5);
    return vue.openBlock(), vue.createElementBlock("view", { class: "settled-box" }, [
      vue.createElementVNode("view", { class: "header" }, [
        vue.createVNode(_component_uni_nav_bar, {
          class: vue.normalizeClass([$setup.scrollTop > 15 ? "scrollClass" : "", "header-bar"]),
          backgroundColor: "rgba(255,255,255,0)",
          border: false,
          title: "评价"
        }, {
          left: vue.withCtx(() => [
            vue.createVNode(_component_uni_icons, {
              type: "left",
              size: "24",
              onClick: $setup.backFn
            })
          ]),
          _: 1
          /* STABLE */
        }, 8, ["class"])
      ]),
      vue.createElementVNode(
        "scroll-view",
        {
          "scroll-y": "",
          onScroll: $setup.onPageScroll,
          style: { "height": "100vh" },
          "show-scrollbar": false
        },
        [
          vue.createElementVNode("view", { class: "consultation-content" }, [
            vue.createElementVNode("view", { class: "user-info-section" }, [
              vue.createElementVNode("view", { class: "user-info" }, [
                vue.createElementVNode("image", {
                  src: $setup.orderInfo.teacherAvatar,
                  class: "user-avatar"
                }, null, 8, ["src"]),
                vue.createElementVNode("view", { class: "user-details" }, [
                  vue.createElementVNode(
                    "view",
                    { class: "user-name" },
                    vue.toDisplayString($setup.orderInfo.teacherName),
                    1
                    /* TEXT */
                  )
                ])
              ]),
              vue.createElementVNode(
                "view",
                {
                  style: vue.normalizeStyle({ color: $setup.colorType }),
                  onClick: $setup.handleChat
                },
                " 私聊ta ",
                4
                /* STYLE */
              )
            ]),
            vue.createElementVNode("view", { class: "evaluation-content" }, [
              vue.createElementVNode("view", { class: "evaluation-item" }, [
                vue.createElementVNode("view", null, "满意程度"),
                vue.createVNode(_component_uni_rate, {
                  modelValue: $setup.fromData.star,
                  "onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => $setup.fromData.star = $event),
                  size: "18",
                  value: 5
                }, null, 8, ["modelValue"])
              ]),
              vue.createElementVNode("view", { class: "evaluation-item" }, [
                vue.createElementVNode("view", null, "值得推荐"),
                vue.createVNode(_component_uni_rate, {
                  modelValue: $setup.fromData.recommendStar,
                  "onUpdate:modelValue": _cache[1] || (_cache[1] = ($event) => $setup.fromData.recommendStar = $event),
                  size: "18",
                  value: 5
                }, null, 8, ["modelValue"])
              ]),
              vue.createElementVNode("view", null, [
                vue.createElementVNode("view", null, "对Ta的印象"),
                vue.createVNode($setup["TagsSelect"], {
                  modelValue: $setup.fromData.tags,
                  "onUpdate:modelValue": _cache[2] || (_cache[2] = ($event) => $setup.fromData.tags = $event),
                  debug: true,
                  colorType: $setup.colorType,
                  style: vue.normalizeStyle({ backgroundColor: $setup.startColor == "#ffbb4166" ? "#FFFAF1" : "#F3F9F7" }),
                  class: "tags-select"
                }, null, 8, ["modelValue", "colorType", "style"])
              ]),
              vue.createElementVNode("view", null, [
                vue.createElementVNode("view", null, "评价描述"),
                vue.withDirectives(vue.createElementVNode(
                  "textarea",
                  {
                    "onUpdate:modelValue": _cache[3] || (_cache[3] = ($event) => $setup.fromData.content = $event),
                    "placeholder-style": "\n							background-color: #F6F6F6;\n							width: 100%; color:#9E9E9E;\n							padding: 20rpx;",
                    placeholder: "请输入详情描述"
                  },
                  null,
                  512
                  /* NEED_PATCH */
                ), [
                  [vue.vModelText, $setup.fromData.content]
                ]),
                vue.createElementVNode("view", { class: "anonymous" }, [
                  vue.createElementVNode(
                    "checkbox-group",
                    { onChange: $setup.changeAnonymous },
                    [
                      vue.createElementVNode("checkbox", {
                        value: 1,
                        checked: false
                      })
                    ],
                    32
                    /* NEED_HYDRATION */
                  ),
                  vue.createElementVNode("view", null, "匿名评价")
                ])
              ]),
              vue.createElementVNode("view", { class: "evaluation-btn" }, [
                vue.createElementVNode("view", {
                  class: "evaluation-btn-text",
                  onClick: $setup.submitForm
                }, "提交")
              ])
            ])
          ])
        ],
        32
        /* NEED_HYDRATION */
      ),
      vue.createVNode(
        _component_uni_popup,
        {
          ref: "popup",
          type: "center",
          animation: false
        },
        {
          default: vue.withCtx(() => [
            vue.createElementVNode("view", { class: "popup-container" }, [
              vue.createElementVNode("view", { class: "popup-title" }, [
                vue.createVNode(_component_uni_icons, {
                  type: "notification-filled",
                  size: "40",
                  color: "#35CA95"
                })
              ]),
              vue.createElementVNode("view", { class: "popup-content" }, " 抱歉，您存在的情况不适于咨询， 建议您选择更专业治疗，以便于给您提 供更好的服务。 "),
              vue.createElementVNode("view", { class: "popup-btn" }, [
                vue.createElementVNode("view", {
                  class: "popup-btn-text",
                  onClick: $setup.closePopup
                }, "知道了")
              ])
            ])
          ]),
          _: 1
          /* STABLE */
        },
        512
        /* NEED_PATCH */
      )
    ]);
  }
  const PagesPaymentOrderEvaluationOrder = /* @__PURE__ */ _export_sfc(_sfc_main$D, [["render", _sfc_render$C], ["__scopeId", "data-v-6e248be0"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/payment/order/evaluation-order.vue"]]);
  const _sfc_main$C = {
    __name: "services",
    setup(__props, { expose: __expose }) {
      __expose();
      const fileList = vue.ref([]);
      const uploadUrl = vue.ref("");
      uploadUrl.value = baseURL$1 + "/api/common/upload";
      const token = uni.getStorageSync("token");
      const headers = vue.ref({
        "token": token
      });
      const saveSignature = () => {
        showEditSignature.value = false;
      };
      const cancelServiceDialog = () => {
      };
      const changeGroupChecked = (group) => {
        if (group.checked) {
          group.checked = false;
          group.selectedList = [];
          group.children.forEach((e2) => {
            e2.selected = false;
          });
        } else {
          group.checked = true;
        }
      };
      const showEditSignature = vue.ref(false);
      const serviceChooseDialog = vue.ref(false);
      const getAllServiceTypes = async () => {
        let resp = await serviceTypes();
        serviceList2.value = resp.data;
        formatAppLog("log", "at pages/settings/services.vue:199", resp.data);
        serviceList2.value.forEach((group) => {
          group.children = JSON.parse(group.children || "[]");
          if (services.value.includes(String(group.id))) {
            group.checked = true;
          } else {
            group.checked = false;
          }
          group.children.forEach((child) => {
            if (services.value.includes(String(child.id))) {
              if (!group.selectedList) {
                group.selectedList = [];
              }
              group.selectedList.push(child);
              child.selected = true;
              group.checked = true;
            } else {
              child.selected = false;
            }
          });
        });
      };
      const stars = vue.ref(["白羊座", "金牛座", "双子座", "巨蟹座", "狮子座", "处女座", "天秤座", "天蝎座", "射手座", "摩羯座", "水瓶座", "双鱼座"]);
      onLoad(() => {
        userSettings();
      });
      const regionPicker = vue.ref(false);
      const chooseArea = () => {
        regionPicker.value = true;
      };
      const confirmSelect = () => {
        let services2 = serviceList2.value;
        let selectedServicesName = [];
        let serviceType = [];
        services2.forEach((e2) => {
          if (e2.checked) {
            if (e2.selectedList) {
              e2.selectedList.forEach((item) => {
                selectedServicesName.push(item.name);
                serviceType.push(item.id);
              });
            } else {
              selectedServicesName.push(e2.name);
              serviceType.push(e2.id);
            }
          }
        });
        form.value.serviceType = serviceType.join(",");
        form.value.serviceTypeDesc = selectedServicesName.join(",");
        serviceChooseDialog.value = false;
      };
      const confirmRegion = (e2) => {
        form.value.address = e2.province.name + e2.city.name + e2.area.name;
      };
      const uploadComplete = (data, index, lists, name) => {
        var _a;
        if ((_a = data == null ? void 0 : data.data) == null ? void 0 : _a.url) {
          lists[index].url = data.data.url;
        }
        form.value.gallery = JSON.stringify(
          lists.map((item) => {
            var _a2, _b;
            return item.url || (((_b = (_a2 = item.response) == null ? void 0 : _a2.data) == null ? void 0 : _b.url) || "");
          }).filter((url2) => url2)
          // 过滤空值
        );
        formatAppLog("log", "at pages/settings/services.vue:278", form.value.gallery);
      };
      const serviceList2 = vue.ref([]);
      const toggleExpand = (gIndex) => {
        serviceList2.value[gIndex].expanded = !serviceList2.value[gIndex].expanded;
      };
      const displayTags = (group) => {
        if (group.children) {
          if (group.expanded) {
            return group.children;
          }
          return group.children.slice(0, 6);
        }
        return [];
      };
      const toggleTag = (gIndex, tIndex) => {
        const group = serviceList2.value[gIndex];
        const tag = group.children[tIndex];
        if (!group.selectedList) {
          group.selectedList = [];
        }
        if (!group.checked) {
          const groupCount = serviceList2.value.filter((i2) => i2.checked).length;
          if (groupCount >= 5) {
            uni.showToast({
              title: "您最多可以选择5个分类",
              icon: "none"
            });
            return;
          }
        }
        if (!tag.selected) {
          let selectedList = group.selectedList;
          if (selectedList) {
            if (selectedList.length >= 5) {
              uni.showToast({
                title: "您最多可以选择5个标签",
                icon: "none"
              });
              return;
            }
          }
          tag.selected = true;
          group.selectedList.push(tag);
          group.checked = true;
        } else {
          tag.selected = false;
          const index = group.selectedList.findIndex((item) => item.id === tag.id);
          if (index !== -1) {
            group.selectedList.splice(index, 1);
          }
        }
        formatAppLog("log", "at pages/settings/services.vue:354", group.selectedList);
      };
      const starChange = (e2) => {
        form.value.constellation = stars.value[e2.detail.value];
      };
      const services = vue.ref([]);
      const userSettings = async () => {
        let resp = await getUserBaseSetting();
        form.value = resp.data;
        let serviceType = form.value.serviceType;
        services.value = serviceType.split(",");
        getAllServiceTypes();
        formatAppLog("log", "at pages/settings/services.vue:370", services.value);
        if (form.value.gallery) {
          let galleryList = JSON.parse(form.value.gallery);
          fileList.value = galleryList.map((url2) => ({
            url: url2
          }));
        }
      };
      const form = vue.ref({});
      const afterRead = (event) => {
        fileList.value = event.fileList;
      };
      const chooseProfession = () => uni.showToast({
        title: "选择职业",
        icon: "none"
      });
      const chooseConstellation = () => uni.showToast({
        title: "选择星座",
        icon: "none"
      });
      const deletePic = (event, index, lists, name) => {
        formatAppLog("log", "at pages/settings/services.vue:402", "图片已被移除 index:", index);
        formatAppLog("log", "at pages/settings/services.vue:406", fileList);
        fileList.value.splice(index, 1);
        if (fileList.value) {
          formatAppLog("log", "at pages/settings/services.vue:410", fileList.value);
          form.value.gallery = JSON.stringify(
            fileList.value.map((item) => {
              var _a, _b;
              return item.url || (((_b = (_a = item.response) == null ? void 0 : _a.data) == null ? void 0 : _b.url) || "");
            }).filter((url2) => url2)
            // 过滤空值
          );
          formatAppLog("log", "at pages/settings/services.vue:416", form.value.gallery);
        } else {
          form.value.gallery = "";
        }
      };
      const chooseRegion = () => uni.showToast({
        title: "选择地区",
        icon: "none"
      });
      const chooseServiceType = () => {
        serviceChooseDialog.value = true;
      };
      const saveInfo = async () => {
        let resp = await saveRoleInfo(form.value);
        if (resp.code == 0) {
          uni.showToast({
            title: "修改成功"
          });
          uni.navigateBack();
        }
      };
      const editSignature = () => {
        showEditSignature.value = true;
      };
      const beforeUpload = (index, list) => {
      };
      const submit = () => {
        formatAppLog("log", "at pages/settings/services.vue:451", "提交表单:", form.value);
        uni.showToast({
          title: "保存成功",
          icon: "success"
        });
      };
      const __returned__ = { fileList, uploadUrl, token, headers, saveSignature, cancelServiceDialog, changeGroupChecked, showEditSignature, serviceChooseDialog, getAllServiceTypes, stars, regionPicker, chooseArea, confirmSelect, confirmRegion, uploadComplete, serviceList: serviceList2, toggleExpand, displayTags, toggleTag, starChange, services, userSettings, form, afterRead, chooseProfession, chooseConstellation, deletePic, chooseRegion, chooseServiceType, saveInfo, editSignature, beforeUpload, submit, ref: vue.ref, reactive: vue.reactive, get onLoad() {
        return onLoad;
      }, get getUserBaseSetting() {
        return getUserBaseSetting;
      }, get saveRoleInfo() {
        return saveRoleInfo;
      }, get baseURL() {
        return baseURL$1;
      }, get serviceTypes() {
        return serviceTypes;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$B(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_u_button = resolveEasycom(vue.resolveDynamicComponent("u-button"), __easycom_1$2);
    const _component_u_navbar = resolveEasycom(vue.resolveDynamicComponent("u-navbar"), __easycom_0$1);
    const _component_u_icon = resolveEasycom(vue.resolveDynamicComponent("u-icon"), __easycom_2$b);
    const _component_u_popup = resolveEasycom(vue.resolveDynamicComponent("u-popup"), __easycom_3$4);
    const _component_u_upload = resolveEasycom(vue.resolveDynamicComponent("u-upload"), __easycom_3$3);
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    const _component_u_picker = resolveEasycom(vue.resolveDynamicComponent("u-picker"), __easycom_1$3);
    const _component_u_input = resolveEasycom(vue.resolveDynamicComponent("u-input"), __easycom_5);
    return vue.openBlock(), vue.createElementBlock("view", { class: "page" }, [
      vue.createVNode(_component_u_navbar, {
        title: "服务资料",
        border: false
      }, {
        right: vue.withCtx(() => [
          vue.createElementVNode("view", { class: "nav-right" }, [
            vue.createVNode(_component_u_button, {
              size: "mini",
              type: "success",
              onClick: $setup.saveInfo
            }, {
              default: vue.withCtx(() => [
                vue.createTextVNode("保存")
              ]),
              _: 1
              /* STABLE */
            })
          ])
        ]),
        _: 1
        /* STABLE */
      }),
      vue.createVNode(_component_u_popup, {
        mode: "bottom",
        modelValue: $setup.serviceChooseDialog,
        "onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => $setup.serviceChooseDialog = $event),
        "border-radius": 10
      }, {
        default: vue.withCtx(() => [
          vue.createElementVNode("view", { class: "popup-container" }, [
            vue.createElementVNode("view", { class: "popup-header" }, [
              vue.createElementVNode("text", { onClick: $setup.cancelServiceDialog }, "取消"),
              vue.createElementVNode("text", { class: "popup-title" }, "服务类型"),
              vue.createElementVNode("text", {
                onClick: $setup.confirmSelect,
                style: { "color": "#00C38D" }
              }, "确认")
            ]),
            vue.createElementVNode("scroll-view", {
              style: { "height": "800rpx" },
              "scroll-y": ""
            }, [
              (vue.openBlock(true), vue.createElementBlock(
                vue.Fragment,
                null,
                vue.renderList($setup.serviceList, (group, gIndex) => {
                  return vue.openBlock(), vue.createElementBlock("view", {
                    key: group.id,
                    class: "service-group"
                  }, [
                    vue.createElementVNode("view", { class: "group-header" }, [
                      vue.createElementVNode("view", {
                        onClick: ($event) => $setup.changeGroupChecked(group)
                      }, [
                        vue.createElementVNode(
                          "text",
                          {
                            style: vue.normalizeStyle({ color: group.checked ? "red" : "black" })
                          },
                          vue.toDisplayString(group.name),
                          5
                          /* TEXT, STYLE */
                        ),
                        group.checked ? (vue.openBlock(), vue.createElementBlock(
                          "text",
                          {
                            key: 0,
                            style: { "font-size": "26rpx", "color": "grey" }
                          },
                          "(已选" + vue.toDisplayString(group.selectedList ? group.selectedList.length : 0) + "项)",
                          1
                          /* TEXT */
                        )) : vue.createCommentVNode("v-if", true)
                      ], 8, ["onClick"]),
                      group.children.length > 6 ? (vue.openBlock(), vue.createElementBlock("view", {
                        key: 0,
                        class: "expand-toggle",
                        onClick: ($event) => $setup.toggleExpand(gIndex)
                      }, [
                        vue.createElementVNode(
                          "text",
                          null,
                          vue.toDisplayString(group.expanded ? "收起" : "展开"),
                          1
                          /* TEXT */
                        ),
                        vue.createVNode(_component_u_icon, {
                          name: group.expanded ? "arrow-up" : "arrow-down",
                          size: "14"
                        }, null, 8, ["name"])
                      ], 8, ["onClick"])) : vue.createCommentVNode("v-if", true)
                    ]),
                    group.children ? (vue.openBlock(), vue.createElementBlock("view", {
                      key: 0,
                      class: "tag-container"
                    }, [
                      (vue.openBlock(true), vue.createElementBlock(
                        vue.Fragment,
                        null,
                        vue.renderList($setup.displayTags(group), (tag, tIndex) => {
                          return vue.openBlock(), vue.createElementBlock("view", {
                            key: tag.id,
                            class: vue.normalizeClass(["tag-item", { active: tag.selected }]),
                            onClick: vue.withModifiers(($event) => $setup.toggleTag(gIndex, tIndex), ["stop"])
                          }, vue.toDisplayString(tag.name), 11, ["onClick"]);
                        }),
                        128
                        /* KEYED_FRAGMENT */
                      ))
                    ])) : vue.createCommentVNode("v-if", true)
                  ]);
                }),
                128
                /* KEYED_FRAGMENT */
              ))
            ])
          ])
        ]),
        _: 1
        /* STABLE */
      }, 8, ["modelValue"]),
      vue.createElementVNode("view", { class: "form-box" }, [
        vue.createElementVNode("view", { class: "form-item upload-section" }, [
          vue.createElementVNode("view", { class: "label" }, [
            vue.createTextVNode(" 个人形象照 "),
            vue.createElementVNode("text", { class: "desc" }, "（用于个人主页封面，格式jpg/png，大小2M内）")
          ]),
          vue.createVNode(_component_u_upload, {
            fileList: $setup.fileList,
            "before-upload": $setup.beforeUpload,
            header: $setup.headers,
            onOnSuccess: $setup.uploadComplete,
            onOnRemove: $setup.deletePic,
            name: "file",
            action: $setup.uploadUrl,
            multiple: "",
            maxCount: 5
          }, null, 8, ["fileList", "header", "action"])
        ]),
        vue.createElementVNode("view", { class: "info-list" }, [
          vue.createElementVNode("view", {
            class: "info-item",
            onClick: $setup.chooseConstellation
          }, [
            vue.createElementVNode("view", { class: "label required" }, "星座"),
            vue.createElementVNode("picker", {
              range: $setup.stars,
              onChange: $setup.starChange
            }, [
              vue.createElementVNode("view", { class: "content" }, [
                vue.createTextVNode(
                  vue.toDisplayString($setup.form.constellation == null ? "请选择" : $setup.form.constellation),
                  1
                  /* TEXT */
                ),
                vue.createVNode(_component_uni_icons, {
                  type: "right",
                  size: "14",
                  color: "rgba(0, 0, 0, 0.3)"
                })
              ])
            ], 40, ["range"])
          ]),
          vue.createElementVNode("view", {
            class: "info-item",
            onClick: $setup.chooseRegion
          }, [
            vue.createElementVNode("view", { class: "label required" }, "所在地区"),
            vue.createElementVNode("view", { onClick: $setup.chooseArea }, [
              vue.createTextVNode(
                vue.toDisplayString($setup.form.address ? $setup.form.address : "请选择"),
                1
                /* TEXT */
              ),
              vue.createVNode(_component_uni_icons, {
                type: "right",
                size: "14",
                color: "rgba(0, 0, 0, 0.3)"
              })
            ]),
            vue.createVNode(_component_u_picker, {
              modelValue: $setup.regionPicker,
              "onUpdate:modelValue": _cache[1] || (_cache[1] = ($event) => $setup.regionPicker = $event),
              onConfirm: $setup.confirmRegion,
              mode: "region"
            }, null, 8, ["modelValue"])
          ]),
          vue.createElementVNode("view", {
            class: "info-item",
            onClick: $setup.chooseServiceType
          }, [
            vue.createElementVNode("view", { class: "label required" }, "服务类型"),
            vue.createElementVNode(
              "view",
              { class: "value service-type" },
              vue.toDisplayString($setup.form.serviceTypeDesc),
              1
              /* TEXT */
            ),
            vue.createVNode(_component_u_icon, {
              name: "arrow-right",
              size: "18",
              color: "#999"
            })
          ]),
          vue.createElementVNode("view", {
            class: "info-item",
            onClick: $setup.editSignature
          }, [
            vue.createElementVNode("view", { class: "label" }, "个人签名"),
            vue.createElementVNode(
              "view",
              { class: "value text-gray" },
              vue.toDisplayString($setup.form.signature || "一句话个人签名文字"),
              1
              /* TEXT */
            ),
            vue.createVNode(_component_u_icon, {
              name: "arrow-right",
              size: "18",
              color: "#999"
            })
          ])
        ]),
        vue.createElementVNode("view", { class: "textarea-box" }, [
          vue.createElementVNode("view", { class: "label" }, "个人简介"),
          vue.createVNode(_component_u_input, {
            type: "textarea",
            modelValue: $setup.form.profile,
            "onUpdate:modelValue": _cache[2] || (_cache[2] = ($event) => $setup.form.profile = $event),
            placeholder: "请输入个人简介",
            height: 300,
            "auto-height": true
          }, null, 8, ["modelValue"])
        ])
      ]),
      vue.createVNode(_component_u_popup, {
        modelValue: $setup.showEditSignature,
        "onUpdate:modelValue": _cache[4] || (_cache[4] = ($event) => $setup.showEditSignature = $event),
        mode: "center",
        "border-radius": 15
      }, {
        default: vue.withCtx(() => [
          vue.createElementVNode("view", { style: { "width": "600rpx", "border-radius": "30rpx", "padding": "10rpx" } }, [
            vue.createElementVNode("view", { style: { "text-align": "center", "font-size": "36rpx", "margin-top": "30rpx" } }, "编辑签名"),
            vue.createElementVNode("view", null, [
              vue.createVNode(_component_u_input, {
                placeholder: "请输入签名",
                type: "textarea",
                modelValue: $setup.form.signature,
                "onUpdate:modelValue": _cache[3] || (_cache[3] = ($event) => $setup.form.signature = $event),
                height: 200
              }, null, 8, ["modelValue"])
            ]),
            vue.createElementVNode("view", null, [
              vue.createElementVNode("button", {
                type: "primary",
                onClick: $setup.saveSignature
              }, "保存")
            ])
          ])
        ]),
        _: 1
        /* STABLE */
      }, 8, ["modelValue"])
    ]);
  }
  const PagesSettingsServices = /* @__PURE__ */ _export_sfc(_sfc_main$C, [["render", _sfc_render$B], ["__scopeId", "data-v-c24b6665"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/settings/services.vue"]]);
  const _sfc_main$B = {
    __name: "idCard",
    props: {
      consultantType: String,
      modelValue: {
        type: Object,
        default: () => ({})
      }
    },
    emits: ["update:modelValue", "committed"],
    setup(__props, { expose: __expose, emit: __emit }) {
      const STARS = [
        "白羊座",
        "金牛座",
        "双子座",
        "巨蟹座",
        "狮子座",
        "处女座",
        "天秤座",
        "天蝎座",
        "射手座",
        "摩羯座",
        "水瓶座",
        "双鱼座"
      ];
      const PROMISE_REQUIREMENTS = [
        "字迹书写规整",
        "模板内容抄写完整",
        "签字、按手印",
        "身份证正面向上合照"
      ];
      const props = __props;
      const emit = __emit;
      const parseMasterGallery = (val2) => {
        if (!val2 || val2 === "[]" || val2 === "''")
          return [];
        try {
          const parsed = JSON.parse(val2);
          return Array.isArray(parsed) ? parsed.map((item) => ({ url: item.url || "" })).filter((item) => item.url) : [];
        } catch (e2) {
          return [];
        }
      };
      const localData = vue.ref({
        ...props.modelValue,
        // 初始化masterGallery：解析接口返回的字符串，无数据则为空数组（新用户）
        masterGallery: parseMasterGallery(props.modelValue.masterGallery),
        // 确保u-upload的fileList默认是数组
        holdIdCardImg: props.modelValue.holdIdCardImg || [],
        commitmentImg: props.modelValue.commitmentImg || []
      });
      const isNewUser = vue.ref(!props.modelValue.masterGallery || parseMasterGallery(props.modelValue.masterGallery).length === 0);
      vue.watch(
        () => props.modelValue,
        (newVal) => {
          vue.nextTick(() => {
            const newMasterGallery = parseMasterGallery(newVal.masterGallery);
            localData.value = {
              ...newVal,
              masterGallery: newMasterGallery,
              holdIdCardImg: newVal.holdIdCardImg || [],
              commitmentImg: newVal.commitmentImg || []
            };
            isNewUser.value = !newVal.masterGallery || newMasterGallery.length === 0;
          });
        },
        { immediate: true, deep: true }
      );
      vue.watch(
        localData,
        (newVal) => {
          vue.nextTick(() => {
            emit("update:modelValue", { ...newVal });
          });
        },
        { deep: true }
      );
      const birthdayShow = vue.ref(false);
      const regionPicker = vue.ref(false);
      const height = vue.ref(150);
      const token = uni.getStorageSync("token");
      const headers = vue.ref({ token });
      const uploadUrl = vue.ref("https://ceshi.maimiaoqingsu.com/api/common/upload");
      const timeParams = vue.ref({
        year: true,
        month: true,
        day: false,
        hour: false,
        minute: false,
        second: false
      });
      const stars = vue.ref(STARS);
      const promiseRequirements = vue.ref(PROMISE_REQUIREMENTS);
      const showTimePicker = () => {
        birthdayShow.value = true;
      };
      const confirmBirthday = (e2) => {
        localData.value.birthdate = `${e2.year}-${e2.month}`;
      };
      const chooseArea = () => {
        regionPicker.value = true;
      };
      const confirmRegion = (e2) => {
        localData.value.address = e2.province.name + e2.city.name + e2.area.name;
      };
      const starChange = (e2) => {
        localData.value.constellation = stars.value[e2.detail.value];
      };
      const handleTemplate = (type) => {
        uni.navigateTo({
          url: `/pages/webview/webview?type=${type}`
        });
      };
      const beforeUpload = () => {
      };
      const uploadComplete1 = (data, index, lists) => {
        var _a;
        if (lists && lists[index]) {
          lists[index].url = ((_a = data.data) == null ? void 0 : _a.url) || "";
          localData.value.masterGallery = lists.map((item) => ({ url: item.url || "" })).filter((item) => item.url);
        }
      };
      const uploadComplete2 = (data, index, lists) => {
        var _a;
        lists[index].url = ((_a = data.data) == null ? void 0 : _a.url) || "";
        localData.value.holdIdCardImg = lists;
      };
      const uploadComplete3 = (data, index, lists) => {
        var _a;
        lists[index].url = ((_a = data.data) == null ? void 0 : _a.url) || "";
        localData.value.commitmentImg = lists;
      };
      const deletePic = (field, index, lists) => {
        localData.value[field] = lists.map((item) => ({ url: item.url || "" })).filter((item) => item.url);
      };
      const uploadPhoto = async (type) => {
        try {
          const res2 = await uni.chooseImage({ count: 1 });
          const filePath = res2.tempFilePaths[0];
          const uploadRes = await uploadFile(uploadUrl.value, filePath);
          if (uploadRes.code === 0) {
            if (type === 1) {
              localData.value.idcardFront = uploadRes.data.url;
            } else {
              localData.value.idcardBackend = uploadRes.data.url;
            }
          }
        } catch (error) {
          formatAppLog("error", "at pages/auth/components/idCard.vue:368", "上传失败:", error);
          uni.showToast({
            title: "上传失败",
            icon: "error"
          });
        }
      };
      const submit = async () => {
        var _a, _b, _c, _d;
        const requiredFields = [
          { field: localData.value.idcardFront, message: "请上传身份证人像页" },
          { field: localData.value.idcardBackend, message: "请上传身份证国徽页" },
          { field: localData.value.name, message: "请输入姓名" },
          { field: localData.value.idcardNum, message: "请输入身份证号" },
          { field: localData.value.birthdate, message: "请选择出生年月" },
          // 核心：masterGallery校验 - 新用户必须上传，老用户只要有数据即可
          {
            field: localData.value.masterGallery.length,
            message: "请上传个人形象照",
            validate: () => !isNewUser.value ? true : localData.value.masterGallery.length > 0
          },
          { field: (_a = localData.value.holdIdCardImg) == null ? void 0 : _a.length, message: "请上传手持身份证件照" },
          { field: (_b = localData.value.commitmentImg) == null ? void 0 : _b.length, message: "请上传手写承诺书照" },
          { field: localData.value.constellation, message: "请选择星座" },
          { field: localData.value.address, message: "请选择所在地区" }
        ];
        for (const item of requiredFields) {
          if (item.validate) {
            if (!item.validate()) {
              uni.showToast({ title: item.message, icon: "none" });
              return;
            }
          } else if (!item.field) {
            uni.showToast({ title: item.message, icon: "none" });
            return;
          }
        }
        const submitData = {
          ...localData.value,
          // masterGallery转JSON字符串，确保覆盖接口原有数据
          masterGallery: JSON.stringify(localData.value.masterGallery),
          consultantType: props.consultantType,
          idCardNo: localData.value.idcardNum,
          idCardFrontImg: localData.value.idcardFront,
          idCardBackImg: localData.value.idcardBackend,
          holdIdCardImg: ((_c = localData.value.holdIdCardImg[0]) == null ? void 0 : _c.url) || "",
          commitmentImg: ((_d = localData.value.commitmentImg[0]) == null ? void 0 : _d.url) || ""
        };
        uni.showLoading({ title: "提交中" });
        try {
          const api = props.consultantType == "1" ? registerConsultantStep1 : registerListenerStep1;
          const res2 = await api(submitData);
          uni.hideLoading();
          localData.value = { ...localData.value, ...res2.data };
          emit("committed", submitData);
          uni.showToast({ title: "提交成功", icon: "success" });
        } catch (error) {
          uni.hideLoading();
          formatAppLog("error", "at pages/auth/components/idCard.vue:436", "提交失败:", error);
          uni.showToast({ title: "提交失败，请重试", icon: "error" });
        }
      };
      __expose({ submit });
      onUnload(() => {
      });
      const __returned__ = { STARS, PROMISE_REQUIREMENTS, props, emit, parseMasterGallery, localData, isNewUser, birthdayShow, regionPicker, height, token, headers, uploadUrl, timeParams, stars, promiseRequirements, showTimePicker, confirmBirthday, chooseArea, confirmRegion, starChange, handleTemplate, beforeUpload, uploadComplete1, uploadComplete2, uploadComplete3, deletePic, uploadPhoto, submit, ref: vue.ref, watch: vue.watch, nextTick: vue.nextTick, get uploadFile() {
        return uploadFile;
      }, get onUnload() {
        return onUnload;
      }, get registerConsultantStep1() {
        return registerConsultantStep1;
      }, get registerListenerStep1() {
        return registerListenerStep1;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$A(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_u_icon = resolveEasycom(vue.resolveDynamicComponent("u-icon"), __easycom_2$b);
    const _component_u_picker = resolveEasycom(vue.resolveDynamicComponent("u-picker"), __easycom_1$3);
    const _component_u_upload = resolveEasycom(vue.resolveDynamicComponent("u-upload"), __easycom_3$3);
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    const _component_uni_easyinput = resolveEasycom(vue.resolveDynamicComponent("uni-easyinput"), __easycom_2$8);
    const _component_u_input = resolveEasycom(vue.resolveDynamicComponent("u-input"), __easycom_5);
    return vue.openBlock(), vue.createElementBlock("view", { class: "id-card-box" }, [
      vue.createElementVNode("view", { class: "id-card-content-box" }, [
        vue.createElementVNode("view", { class: "id-card-content" }, [
          vue.createElementVNode("view", { class: "title" }, "身份认证"),
          vue.createElementVNode("view", { class: "remark" }, "仅用于身份实名核验，信息会严格保密"),
          vue.createElementVNode("view", { class: "unload-card-box" }, [
            vue.createElementVNode("view", {
              class: "upload-card-item",
              onClick: _cache[0] || (_cache[0] = ($event) => $setup.uploadPhoto(1))
            }, [
              vue.createElementVNode("image", {
                src: $setup.localData.idcardFront || "/static/auth/id-card-front.png",
                class: "img"
              }, null, 8, ["src"]),
              vue.createElementVNode("view", { class: "txt" }, "身份证人像面")
            ]),
            vue.createElementVNode("view", {
              class: "upload-card-item",
              onClick: _cache[1] || (_cache[1] = ($event) => $setup.uploadPhoto(2))
            }, [
              vue.createElementVNode("image", {
                src: $setup.localData.idcardBackend || "/static/auth/id-card-back.png",
                class: "img"
              }, null, 8, ["src"]),
              vue.createElementVNode("view", { class: "txt" }, "身份证国徽面")
            ])
          ]),
          vue.createElementVNode("view", { class: "id-card-form-content" }, [
            vue.createElementVNode("view", { class: "form-item" }, [
              vue.createElementVNode("view", { class: "label require" }, "姓名"),
              vue.createElementVNode("view", { class: "content" }, [
                vue.withDirectives(vue.createElementVNode(
                  "input",
                  {
                    type: "text",
                    "onUpdate:modelValue": _cache[2] || (_cache[2] = ($event) => $setup.localData.name = $event),
                    placeholder: "请输入姓名",
                    class: "form-input"
                  },
                  null,
                  512
                  /* NEED_PATCH */
                ), [
                  [vue.vModelText, $setup.localData.name]
                ])
              ])
            ]),
            vue.createElementVNode("view", { class: "form-item" }, [
              vue.createElementVNode("view", { class: "label require" }, "身份证号"),
              vue.createElementVNode("view", { class: "content" }, [
                vue.withDirectives(vue.createElementVNode(
                  "input",
                  {
                    type: "text",
                    "onUpdate:modelValue": _cache[3] || (_cache[3] = ($event) => $setup.localData.idcardNum = $event),
                    placeholder: "请输入身份证号",
                    class: "form-input"
                  },
                  null,
                  512
                  /* NEED_PATCH */
                ), [
                  [vue.vModelText, $setup.localData.idcardNum]
                ])
              ])
            ]),
            vue.createElementVNode("view", { class: "form-item" }, [
              vue.createElementVNode("view", { class: "label require" }, "出生年月"),
              vue.createElementVNode("view", {
                class: "content",
                onClick: $setup.showTimePicker
              }, [
                vue.createElementVNode(
                  "text",
                  null,
                  vue.toDisplayString($setup.localData.birthdate || "请选择"),
                  1
                  /* TEXT */
                ),
                vue.createVNode(_component_u_icon, { name: "arrow-right" }),
                vue.createVNode(_component_u_picker, {
                  type: "text",
                  modelValue: $setup.birthdayShow,
                  "onUpdate:modelValue": _cache[4] || (_cache[4] = ($event) => $setup.birthdayShow = $event),
                  params: $setup.timeParams,
                  mode: "time",
                  onConfirm: $setup.confirmBirthday
                }, null, 8, ["modelValue", "params"])
              ])
            ]),
            vue.createElementVNode("view", { class: "upload-section" }, [
              vue.createElementVNode("view", { class: "label require requires" }, [
                vue.createTextVNode(" 个人形象照 "),
                vue.createElementVNode("text", { class: "sub-label" }, "（用于个人主页封面，格式jpg/png，大小2M内）")
              ]),
              vue.createVNode(_component_u_upload, {
                fileList: $setup.localData.masterGallery,
                "before-upload": $setup.beforeUpload,
                header: $setup.headers,
                onOnSuccess: $setup.uploadComplete1,
                onOnRemove: _cache[5] || (_cache[5] = (index, lists) => $setup.deletePic("masterGallery", index, lists)),
                name: "file",
                action: $setup.uploadUrl,
                maxCount: 5
              }, null, 8, ["fileList", "header", "action"])
            ]),
            vue.createElementVNode("view", { class: "form-item upload-with-image" }, [
              vue.createElementVNode("view", { class: "upload-content" }, [
                vue.createElementVNode("view", {
                  class: "label require",
                  style: { "width": "170rpx" }
                }, "手持身份证件"),
                vue.createVNode(_component_u_upload, {
                  fileList: $setup.localData.holdIdCardImg,
                  "before-upload": $setup.beforeUpload,
                  header: $setup.headers,
                  onOnSuccess: $setup.uploadComplete2,
                  onOnRemove: _cache[6] || (_cache[6] = (index, lists) => $setup.deletePic("holdIdCardImg", index, lists)),
                  name: "file",
                  action: $setup.uploadUrl,
                  maxCount: 1
                }, null, 8, ["fileList", "header", "action"])
              ]),
              vue.createElementVNode("image", {
                src: _imports_0$b,
                class: "example-image"
              })
            ]),
            vue.createElementVNode("view", { class: "form-item upload-with-image" }, [
              vue.createElementVNode("view", { class: "upload-content" }, [
                vue.createElementVNode("view", {
                  class: "label require",
                  style: { "width": "200rpx" }
                }, "手写承诺书照片"),
                vue.createVNode(_component_u_upload, {
                  fileList: $setup.localData.commitmentImg,
                  "before-upload": $setup.beforeUpload,
                  header: $setup.headers,
                  onOnSuccess: $setup.uploadComplete3,
                  onOnRemove: _cache[7] || (_cache[7] = (index, lists) => $setup.deletePic("commitmentImg", index, lists)),
                  name: "file",
                  action: $setup.uploadUrl,
                  maxCount: 1
                }, null, 8, ["fileList", "header", "action"])
              ]),
              vue.createElementVNode("view", { class: "promise" }, [
                vue.createElementVNode("view", {
                  class: "template",
                  onClick: _cache[8] || (_cache[8] = ($event) => $setup.handleTemplate("手写承诺书"))
                }, [
                  vue.createTextVNode(" 点击查看"),
                  vue.createElementVNode("text", null, "《承诺书模板》")
                ]),
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($setup.promiseRequirements, (item, index) => {
                    return vue.openBlock(), vue.createElementBlock("view", {
                      class: "promise-item",
                      key: index
                    }, [
                      vue.createElementVNode("image", { src: _imports_1$7 }),
                      vue.createElementVNode(
                        "view",
                        null,
                        vue.toDisplayString(item),
                        1
                        /* TEXT */
                      )
                    ]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                ))
              ])
            ]),
            vue.createElementVNode("view", { class: "form-item" }, [
              vue.createElementVNode("view", { class: "label require" }, "星座"),
              vue.createElementVNode("picker", {
                range: $setup.stars,
                onChange: $setup.starChange
              }, [
                vue.createElementVNode("view", { class: "content picker-content" }, [
                  vue.createTextVNode(
                    vue.toDisplayString($setup.localData.constellation || "请选择") + " ",
                    1
                    /* TEXT */
                  ),
                  vue.createVNode(_component_uni_icons, {
                    type: "right",
                    size: "14",
                    color: "rgba(0, 0, 0, 0.3)"
                  })
                ])
              ], 40, ["range"])
            ]),
            vue.createElementVNode("view", { class: "form-item" }, [
              vue.createElementVNode("view", { class: "label require" }, "所在地区"),
              vue.createElementVNode("view", {
                class: "content",
                onClick: $setup.chooseArea
              }, [
                vue.createTextVNode(
                  vue.toDisplayString($setup.localData.address || "请选择") + " ",
                  1
                  /* TEXT */
                ),
                vue.createVNode(_component_uni_icons, {
                  type: "right",
                  size: "14",
                  color: "rgba(0, 0, 0, 0.3)"
                })
              ]),
              vue.createVNode(_component_u_picker, {
                modelValue: $setup.regionPicker,
                "onUpdate:modelValue": _cache[9] || (_cache[9] = ($event) => $setup.regionPicker = $event),
                onConfirm: $setup.confirmRegion,
                mode: "region"
              }, null, 8, ["modelValue"])
            ]),
            vue.createElementVNode("view", { class: "form-item user-sign" }, [
              vue.createElementVNode("view", { class: "label" }, "个人签名"),
              vue.createElementVNode("view", { class: "content-input" }, [
                vue.createVNode(_component_uni_easyinput, {
                  trim: "all",
                  type: "text",
                  placeholder: "请输入个人签名",
                  inputBorder: false,
                  clearable: false,
                  modelValue: $setup.localData.signature,
                  "onUpdate:modelValue": _cache[10] || (_cache[10] = ($event) => $setup.localData.signature = $event),
                  class: "signature-input"
                }, null, 8, ["modelValue"])
              ])
            ]),
            vue.createElementVNode("view", { class: "form-item user-introduction" }, [
              vue.createElementVNode("view", { class: "label" }, "个人简介"),
              vue.createElementVNode("view", { class: "introduction-content" }, [
                vue.createVNode(_component_u_input, {
                  type: "textarea",
                  border: "",
                  modelValue: $setup.localData.profile,
                  "onUpdate:modelValue": _cache[11] || (_cache[11] = ($event) => $setup.localData.profile = $event),
                  "auto-height": "",
                  height: $setup.height,
                  placeholder: "请输入个人简介"
                }, null, 8, ["modelValue", "height"])
              ])
            ])
          ])
        ])
      ])
    ]);
  }
  const idCard$2 = /* @__PURE__ */ _export_sfc(_sfc_main$B, [["render", _sfc_render$A], ["__scopeId", "data-v-1bff6c23"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/auth/components/idCard.vue"]]);
  const _sfc_main$A = {
    name: "uniCollapseItem",
    props: {
      // 列表标题
      title: {
        type: String,
        default: ""
      },
      name: {
        type: [Number, String],
        default: ""
      },
      // 是否禁用
      disabled: {
        type: Boolean,
        default: false
      },
      // 是否显示动画,app 端默认不开启动画，卡顿严重
      showAnimation: {
        type: Boolean,
        default: false
      },
      // 是否展开
      open: {
        type: Boolean,
        default: false
      },
      // 缩略图
      thumb: {
        type: String,
        default: ""
      },
      // 标题分隔线显示类型
      titleBorder: {
        type: String,
        default: "auto"
      },
      border: {
        type: Boolean,
        default: true
      },
      showArrow: {
        type: Boolean,
        default: true
      }
    },
    data() {
      const elId = `Uni_${Math.ceil(Math.random() * 1e6).toString(36)}`;
      return {
        isOpen: false,
        isheight: null,
        height: 0,
        elId,
        nameSync: 0
      };
    },
    watch: {
      open(val2) {
        this.isOpen = val2;
        this.onClick(val2, "init");
      }
    },
    updated(e2) {
      this.$nextTick(() => {
        this.init(true);
      });
    },
    created() {
      this.collapse = this.getCollapse();
      this.oldHeight = 0;
      this.onClick(this.open, "init");
    },
    // TODO vue3
    unmounted() {
      this.__isUnmounted = true;
      this.uninstall();
    },
    mounted() {
      if (!this.collapse)
        return;
      if (this.name !== "") {
        this.nameSync = this.name;
      } else {
        this.nameSync = this.collapse.childrens.length + "";
      }
      if (this.collapse.names.indexOf(this.nameSync) === -1) {
        this.collapse.names.push(this.nameSync);
      } else {
        formatAppLog("warn", "at uni_modules/uni-collapse/components/uni-collapse-item/uni-collapse-item.vue:154", `name 值 ${this.nameSync} 重复`);
      }
      if (this.collapse.childrens.indexOf(this) === -1) {
        this.collapse.childrens.push(this);
      }
      this.init();
    },
    methods: {
      init(type) {
        this.getCollapseHeight(type);
      },
      uninstall() {
        if (this.collapse) {
          this.collapse.childrens.forEach((item, index) => {
            if (item === this) {
              this.collapse.childrens.splice(index, 1);
            }
          });
          this.collapse.names.forEach((item, index) => {
            if (item === this.nameSync) {
              this.collapse.names.splice(index, 1);
            }
          });
        }
      },
      onClick(isOpen, type) {
        if (this.disabled)
          return;
        this.isOpen = isOpen;
        if (this.isOpen && this.collapse) {
          this.collapse.setAccordion(this);
        }
        if (type !== "init") {
          this.collapse.onChange(isOpen, this);
        }
      },
      getCollapseHeight(type, index = 0) {
        const views = uni.createSelectorQuery().in(this);
        views.select(`#${this.elId}`).fields({
          size: true
        }, (data) => {
          if (index >= 10)
            return;
          if (!data) {
            index++;
            this.getCollapseHeight(false, index);
            return;
          }
          this.height = data.height;
          this.isheight = true;
          if (type)
            return;
          this.onClick(this.isOpen, "init");
        }).exec();
      },
      getNvueHwight(type) {
        dom.getComponentRect(this.$refs["collapse--hook"], (option) => {
          if (option && option.result && option.size) {
            this.height = option.size.height;
            this.isheight = true;
            if (type)
              return;
            this.onClick(this.open, "init");
          }
        });
      },
      /**
       * 获取父元素实例
       */
      getCollapse(name = "uniCollapse") {
        let parent = this.$parent;
        let parentName = parent.$options.name;
        while (parentName !== name) {
          parent = parent.$parent;
          if (!parent)
            return false;
          parentName = parent.$options.name;
        }
        return parent;
      }
    }
  };
  function _sfc_render$z(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    return vue.openBlock(), vue.createElementBlock("view", { class: "uni-collapse-item" }, [
      vue.createElementVNode(
        "view",
        {
          onClick: _cache[0] || (_cache[0] = ($event) => $options.onClick(!$data.isOpen)),
          class: vue.normalizeClass(["uni-collapse-item__title", { "is-open": $data.isOpen && $props.titleBorder === "auto", "uni-collapse-item-border": $props.titleBorder !== "none" }])
        },
        [
          vue.createElementVNode("view", { class: "uni-collapse-item__title-wrap" }, [
            vue.renderSlot(_ctx.$slots, "title", {}, () => [
              vue.createElementVNode(
                "view",
                {
                  class: vue.normalizeClass(["uni-collapse-item__title-box", { "is-disabled": $props.disabled }])
                },
                [
                  $props.thumb ? (vue.openBlock(), vue.createElementBlock("image", {
                    key: 0,
                    src: $props.thumb,
                    class: "uni-collapse-item__title-img"
                  }, null, 8, ["src"])) : vue.createCommentVNode("v-if", true),
                  vue.createElementVNode(
                    "text",
                    { class: "uni-collapse-item__title-text" },
                    vue.toDisplayString($props.title),
                    1
                    /* TEXT */
                  )
                ],
                2
                /* CLASS */
              )
            ], true)
          ]),
          $props.showArrow ? (vue.openBlock(), vue.createElementBlock(
            "view",
            {
              key: 0,
              class: vue.normalizeClass([{ "uni-collapse-item__title-arrow-active": $data.isOpen, "uni-collapse-item--animation": $props.showAnimation === true }, "uni-collapse-item__title-arrow"])
            },
            [
              vue.createVNode(_component_uni_icons, {
                color: $props.disabled ? "#ddd" : "#bbb",
                size: "14",
                type: "bottom"
              }, null, 8, ["color"])
            ],
            2
            /* CLASS */
          )) : vue.createCommentVNode("v-if", true)
        ],
        2
        /* CLASS */
      ),
      vue.createElementVNode(
        "view",
        {
          class: vue.normalizeClass(["uni-collapse-item__wrap", { "is--transition": $props.showAnimation }]),
          style: vue.normalizeStyle({ height: ($data.isOpen ? $data.height : 0) + "px" })
        },
        [
          vue.createElementVNode("view", {
            id: $data.elId,
            ref: "collapse--hook",
            class: vue.normalizeClass(["uni-collapse-item__wrap-content", { open: $data.isheight, "uni-collapse-item--border": $props.border && $data.isOpen }])
          }, [
            vue.renderSlot(_ctx.$slots, "default", {}, void 0, true)
          ], 10, ["id"])
        ],
        6
        /* CLASS, STYLE */
      )
    ]);
  }
  const __easycom_1 = /* @__PURE__ */ _export_sfc(_sfc_main$A, [["render", _sfc_render$z], ["__scopeId", "data-v-3d2dde9f"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/uni_modules/uni-collapse/components/uni-collapse-item/uni-collapse-item.vue"]]);
  const _sfc_main$z = {
    name: "uniCollapse",
    emits: ["change", "activeItem", "input", "update:modelValue"],
    props: {
      value: {
        type: [String, Array],
        default: ""
      },
      modelValue: {
        type: [String, Array],
        default: ""
      },
      accordion: {
        // 是否开启手风琴效果
        type: [Boolean, String],
        default: false
      }
    },
    data() {
      return {};
    },
    computed: {
      // TODO 兼容 vue2 和 vue3
      dataValue() {
        let value = typeof this.value === "string" && this.value === "" || Array.isArray(this.value) && this.value.length === 0;
        let modelValue = typeof this.modelValue === "string" && this.modelValue === "" || Array.isArray(this.modelValue) && this.modelValue.length === 0;
        if (value) {
          return this.modelValue;
        }
        if (modelValue) {
          return this.value;
        }
        return this.value;
      }
    },
    watch: {
      dataValue(val2) {
        this.setOpen(val2);
      }
    },
    created() {
      this.childrens = [];
      this.names = [];
    },
    mounted() {
      this.$nextTick(() => {
        this.setOpen(this.dataValue);
      });
    },
    methods: {
      setOpen(val2) {
        let str = typeof val2 === "string";
        let arr = Array.isArray(val2);
        this.childrens.forEach((vm, index) => {
          if (str) {
            if (val2 === vm.nameSync) {
              if (!this.accordion) {
                formatAppLog("warn", "at uni_modules/uni-collapse/components/uni-collapse/uni-collapse.vue:75", "accordion 属性为 false ,v-model 类型应该为 array");
                return;
              }
              vm.isOpen = true;
            }
          }
          if (arr) {
            val2.forEach((v2) => {
              if (v2 === vm.nameSync) {
                if (this.accordion) {
                  formatAppLog("warn", "at uni_modules/uni-collapse/components/uni-collapse/uni-collapse.vue:85", "accordion 属性为 true ,v-model 类型应该为 string");
                  return;
                }
                vm.isOpen = true;
              }
            });
          }
        });
        this.emit(val2);
      },
      setAccordion(self2) {
        if (!this.accordion)
          return;
        this.childrens.forEach((vm, index) => {
          if (self2 !== vm) {
            vm.isOpen = false;
          }
        });
      },
      resize() {
        this.childrens.forEach((vm, index) => {
          vm.getCollapseHeight();
        });
      },
      onChange(isOpen, self2) {
        let activeItem = [];
        if (this.accordion) {
          activeItem = isOpen ? self2.nameSync : "";
        } else {
          this.childrens.forEach((vm, index) => {
            if (vm.isOpen) {
              activeItem.push(vm.nameSync);
            }
          });
        }
        this.$emit("change", activeItem);
        this.emit(activeItem);
      },
      emit(val2) {
        this.$emit("input", val2);
        this.$emit("update:modelValue", val2);
      }
    }
  };
  function _sfc_render$y(_ctx, _cache, $props, $setup, $data, $options) {
    return vue.openBlock(), vue.createElementBlock("view", { class: "uni-collapse" }, [
      vue.renderSlot(_ctx.$slots, "default", {}, void 0, true)
    ]);
  }
  const __easycom_2$2 = /* @__PURE__ */ _export_sfc(_sfc_main$z, [["render", _sfc_render$y], ["__scopeId", "data-v-3f050360"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/uni_modules/uni-collapse/components/uni-collapse/uni-collapse.vue"]]);
  const _sfc_main$y = {
    __name: "career",
    props: {
      modelValue: Object,
      consultantType: String
    },
    emits: ["update:modelValue", "committed"],
    setup(__props, { expose: __expose, emit: __emit }) {
      const serviceType = vue.ref([]);
      const occupationId = vue.ref();
      const workTime = vue.ref();
      const selectIndex = vue.ref(0);
      const rangeKey = vue.ref("name");
      const certificateDateParam = vue.ref({
        year: true,
        month: true,
        day: false,
        hour: false,
        minute: false,
        second: false,
        // 选择时间的时间戳
        timestamp: true
      });
      const processedData = vue.ref([]);
      const activeNames = vue.ref([]);
      const selectedIds = vue.ref([]);
      const checkedList = vue.ref([]);
      const certificatePickerShow = vue.ref(false);
      const t2 = vue.ref([]);
      const emit = __emit;
      const submit = async () => {
        const requiredFields = [
          // { field: occupationId.value, message: "请选择职业" },
          // { field: workTime.value, message: "请选择工作时间" },
          { field: selectedIds.value, message: "请选择服务类型" }
        ];
        for (const { field, message: message2 } of requiredFields) {
          if (!field) {
            uni.showToast({ title: message2, icon: "none" });
            return;
          }
        }
        props.modelValue.serviceType = selectedIds.value.join(",");
        formatAppLog("log", "at pages/auth/components/career.vue:137", props.modelValue);
        if (props.consultantType == 1) {
          await registerConsultantStep2(props.modelValue);
          emit("committed", "");
        } else {
          await registerListenerStep2(props.modelValue);
          emit("committed", "");
        }
      };
      const occupationList = vue.ref([]);
      const getOccupationList = async () => {
        let { data } = await getOccupation();
        occupationList.value = data;
      };
      const bindPickerChange = (e2) => {
        var _a;
        occupationId.value = (_a = occupationList.value[e2.detail.value]) == null ? void 0 : _a.name;
        props.modelValue.occupationId = occupationList.value[e2.detail.value].id;
      };
      __expose({
        submit
      });
      const props = __props;
      const initPickerEcho = () => {
        workTime.value = props.modelValue.workTime;
        if (occupationList.value.length === 0)
          return;
        const targetId = props.modelValue.occupationId;
        if (!targetId)
          return;
        const matchedItem = occupationList.value.find((item) => item.id == targetId);
        if (matchedItem) {
          occupationId.value = matchedItem.name;
          selectIndex.value = occupationList.value.indexOf(matchedItem);
        } else {
          occupationId.value = "";
          selectIndex.value = 0;
        }
      };
      const confirmCertificateDate = (item, e2) => {
        props.modelValue.workTime = e2.year + "-" + e2.month;
        workTime.value = e2.year + "-" + e2.month;
      };
      vue.watch(
        () => props.modelValue,
        (newVal, oldVal) => {
          if (newVal.serviceType) {
            const arr = newVal.serviceType.split(",").map((e2) => e2 = parseInt(e2));
            vue.nextTick(() => {
              selectedIds.value = arr;
            });
          }
        },
        { immediate: true, deep: true }
      );
      vue.watch(
        () => occupationList.value,
        () => {
          initPickerEcho();
        }
      );
      vue.watch(checkedList, (val2) => {
        const str = val2.join(",");
        emit("update:modelValue", {
          ...props.modelValue,
          serviceType: str
        });
      });
      onShow(async () => {
        if (props.consultantType == "1") {
          let consultMenu = uni.getStorageSync("consultantMenu");
          if (!consultMenu) {
            let resp = await getConsultantMenus({
              type: 0
            });
            uni.setStorageSync("consultantMenu", JSON.stringify(resp.data));
          }
          serviceType.value = JSON.parse(uni.getStorageSync("consultantMenu"));
        } else {
          let listenerMenu = uni.getStorageSync("listenerMenu");
          serviceList().then((res2) => {
            t2.value = res2.data;
          });
          if (!listenerMenu) {
            let resp = await getConsultantMenus({
              type: 1
            });
            uni.setStorageSync("listenerMenu", JSON.stringify(resp.data));
          }
          serviceType.value = JSON.parse(uni.getStorageSync("listenerMenu"));
        }
        serviceType.value = serviceType.value.map((item) => ({
          ...item,
          checked: false
        }));
      });
      const safeJsonParse = (str) => {
        if (!str || str === "[]")
          return [];
        try {
          let cleanStr = str.replace(/[“”‘’]/g, '"').replace(/\s+/g, "").replace(/\\+/g, "\\").replace(/,}/g, "}").replace(/,\]/g, "]").replace(/([{,])\s*(\w+)\s*:/g, '$1"$2":').replace(/:\s*([^"'\d][^,}]*)([,}])/g, ':"$1"$2');
          const result = JSON.parse(cleanStr);
          return Array.isArray(result) ? result : [];
        } catch (e2) {
          return [];
        }
      };
      const initData = async () => {
        const res2 = await serviceList();
        processedData.value = res2.data.map((item) => {
          const children = safeJsonParse(item.children);
          const normalizedChildren = children.map((child) => ({
            ...child,
            id: Number(child.id) || 0
          })).filter((child) => child.id !== 0);
          return {
            ...item,
            id: Number(item.id) || 0,
            children: normalizedChildren
          };
        });
      };
      const toggleParent = async (parentItem) => {
        const parentId = parentItem.id;
        const isChecked = selectedIds.value.includes(parentId);
        await vue.nextTick();
        if (!isChecked) {
          const addIds = [parentId, ...parentItem.children.map((c2) => c2.id)];
          addIds.forEach((id2) => {
            if (!selectedIds.value.includes(id2)) {
              selectedIds.value.push(id2);
            }
          });
        } else {
          const removeIds = [parentId, ...parentItem.children.map((c2) => c2.id)];
          selectedIds.value = selectedIds.value.filter((id2) => !removeIds.includes(id2));
        }
        selectedIds.value = [...selectedIds.value];
      };
      const handleChildGroupChange = (parentItem, e2) => {
        const checkedChildIds = e2.detail.value.map((id2) => Number(id2));
        const allChildIds = parentItem.children.map((c2) => c2.id);
        selectedIds.value = selectedIds.value.filter((id2) => {
          if (allChildIds.includes(id2) && !checkedChildIds.includes(id2)) {
            return false;
          }
          return true;
        });
        checkedChildIds.forEach((id2) => {
          if (!selectedIds.value.includes(id2)) {
            selectedIds.value.push(id2);
          }
        });
        const parentId = parentItem.id;
        const allChildChecked = allChildIds.every((id2) => checkedChildIds.includes(id2));
        if (allChildChecked && !selectedIds.value.includes(parentId)) {
          selectedIds.value.push(parentId);
        } else if (!allChildChecked && selectedIds.value.includes(parentId)) {
          selectedIds.value = selectedIds.value.filter((id2) => id2 !== parentId);
        }
        selectedIds.value = [...selectedIds.value];
      };
      vue.onMounted(() => {
        initData();
        getOccupationList();
        initPickerEcho();
      });
      const __returned__ = { serviceType, occupationId, workTime, selectIndex, rangeKey, certificateDateParam, processedData, activeNames, selectedIds, checkedList, certificatePickerShow, t: t2, emit, submit, occupationList, getOccupationList, bindPickerChange, props, initPickerEcho, confirmCertificateDate, safeJsonParse, initData, toggleParent, handleChildGroupChange, nextTick: vue.nextTick, ref: vue.ref, watch: vue.watch, onMounted: vue.onMounted, get onShow() {
        return onShow;
      }, get getConsultantMenus() {
        return getConsultantMenus;
      }, get registerConsultantStep2() {
        return registerConsultantStep2;
      }, get registerListenerStep2() {
        return registerListenerStep2;
      }, get getOccupation() {
        return getOccupation;
      }, get serviceList() {
        return serviceList;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$x(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_u_picker = resolveEasycom(vue.resolveDynamicComponent("u-picker"), __easycom_1$3);
    const _component_uni_collapse_item = resolveEasycom(vue.resolveDynamicComponent("uni-collapse-item"), __easycom_1);
    const _component_uni_collapse = resolveEasycom(vue.resolveDynamicComponent("uni-collapse"), __easycom_2$2);
    return vue.openBlock(), vue.createElementBlock("view", { class: "career-box" }, [
      vue.createElementVNode("view", { class: "career-content-box" }, [
        vue.createElementVNode("view", { class: "career-content" }, [
          vue.createElementVNode("view", { class: "career-collapse-box" }, [
            vue.createElementVNode("picker", {
              onChange: $setup.bindPickerChange,
              value: $setup.selectIndex,
              range: $setup.occupationList,
              "range-key": $setup.rangeKey
            }, [
              vue.createElementVNode("view", { class: "career-collapse-item" }, [
                vue.createElementVNode("view", { style: { "display": "flex", "align-items": "center", "justify-content": "space-between", "margin": "40rpx 0" } }, [
                  vue.createElementVNode("view", null, "职业"),
                  vue.createElementVNode(
                    "view",
                    { style: { "color": "#595959", "font-size": "25rpx" } },
                    vue.toDisplayString($setup.occupationId ? $setup.occupationId : "请选择"),
                    1
                    /* TEXT */
                  )
                ])
              ])
            ], 40, ["value", "range", "range-key"]),
            vue.createElementVNode("view", { class: "career-collapse-item" }, [
              vue.createElementVNode("view", { style: { "display": "flex", "align-items": "center", "justify-content": "space-between", "margin": "40rpx 0" } }, [
                vue.createElementVNode("view", null, "工作开始时间"),
                vue.createElementVNode(
                  "view",
                  {
                    style: { "color": "#595959", "font-size": "25rpx" },
                    onClick: _cache[0] || (_cache[0] = ($event) => $setup.certificatePickerShow = true)
                  },
                  vue.toDisplayString($setup.workTime ? $setup.workTime : "请选择"),
                  1
                  /* TEXT */
                )
              ])
            ]),
            vue.createVNode(_component_u_picker, {
              mode: "time",
              modelValue: $setup.certificatePickerShow,
              "onUpdate:modelValue": _cache[1] || (_cache[1] = ($event) => $setup.certificatePickerShow = $event),
              onConfirm: _cache[2] || (_cache[2] = ($event) => $setup.confirmCertificateDate(_ctx.item, $event)),
              params: $setup.certificateDateParam
            }, null, 8, ["modelValue", "params"])
          ])
        ]),
        vue.createElementVNode("view", { class: "career-content" }, [
          vue.createElementVNode("view", { class: "title" }, [
            vue.createTextVNode("服务类型"),
            vue.createElementVNode("text", null, "*")
          ]),
          vue.createElementVNode("view", { class: "remark" }, "专业信息展示在个人资料（多选）"),
          vue.createElementVNode("view", { class: "career-collapse-box" }, [
            vue.createElementVNode("view", { class: "career-collapse-item" }, [
              vue.createElementVNode("view", { class: "container" }, [
                vue.createVNode(_component_uni_collapse, {
                  modelValue: $setup.activeNames,
                  "onUpdate:modelValue": _cache[3] || (_cache[3] = ($event) => $setup.activeNames = $event),
                  accordion: "false"
                }, {
                  default: vue.withCtx(() => [
                    (vue.openBlock(true), vue.createElementBlock(
                      vue.Fragment,
                      null,
                      vue.renderList($setup.processedData, (item) => {
                        return vue.openBlock(), vue.createBlock(_component_uni_collapse_item, {
                          key: item.id,
                          name: item.id
                        }, {
                          title: vue.withCtx(() => [
                            vue.createElementVNode("view", { class: "parent-title" }, [
                              vue.createElementVNode("view", {
                                class: vue.normalizeClass(["custom-checkbox", { checked: $setup.selectedIds.includes(item.id) }]),
                                onClick: vue.withModifiers(($event) => $setup.toggleParent(item), ["stop"])
                              }, [
                                $setup.selectedIds.includes(item.id) ? (vue.openBlock(), vue.createElementBlock("text", {
                                  key: 0,
                                  class: "check-icon"
                                }, "✓")) : vue.createCommentVNode("v-if", true)
                              ], 10, ["onClick"]),
                              vue.createElementVNode(
                                "text",
                                { class: "parent-name" },
                                vue.toDisplayString(item.name),
                                1
                                /* TEXT */
                              )
                            ])
                          ]),
                          default: vue.withCtx(() => [
                            item.children.length ? (vue.openBlock(), vue.createElementBlock("view", {
                              key: 0,
                              class: "children-list"
                            }, [
                              vue.createElementVNode("checkbox-group", {
                                onChange: (e2) => $setup.handleChildGroupChange(item, e2)
                              }, [
                                vue.createElementVNode("view", { class: "children-grid" }, [
                                  (vue.openBlock(true), vue.createElementBlock(
                                    vue.Fragment,
                                    null,
                                    vue.renderList(item.children, (child) => {
                                      return vue.openBlock(), vue.createElementBlock("view", {
                                        class: "child-item",
                                        key: child.id
                                      }, [
                                        vue.createElementVNode("checkbox", {
                                          value: child.id.toString(),
                                          checked: $setup.selectedIds.includes(child.id),
                                          color: "#fff",
                                          style: { "transform": "scale(0.7)" },
                                          activeBackgroundColor: "#35CA95"
                                        }, null, 8, ["value", "checked"]),
                                        vue.createElementVNode(
                                          "text",
                                          { class: "child-name" },
                                          vue.toDisplayString(child.name),
                                          1
                                          /* TEXT */
                                        )
                                      ]);
                                    }),
                                    128
                                    /* KEYED_FRAGMENT */
                                  ))
                                ])
                              ], 40, ["onChange"])
                            ])) : (vue.openBlock(), vue.createElementBlock("view", {
                              key: 1,
                              class: "no-children"
                            }, " 暂无子分类 "))
                          ]),
                          _: 2
                          /* DYNAMIC */
                        }, 1032, ["name"]);
                      }),
                      128
                      /* KEYED_FRAGMENT */
                    ))
                  ]),
                  _: 1
                  /* STABLE */
                }, 8, ["modelValue"])
              ])
            ])
          ])
        ])
      ])
    ]);
  }
  const career$2 = /* @__PURE__ */ _export_sfc(_sfc_main$y, [["render", _sfc_render$x], ["__scopeId", "data-v-1daff894"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/auth/components/career.vue"]]);
  const _imports_0$4 = "/static/auth/remark.png";
  const _imports_1$2 = "/static/auth/edit.png";
  const _sfc_main$x = {
    __name: "certificate",
    props: {
      consultantType: Number,
      modelValue: Object
    },
    emits: ["commited"],
    setup(__props, { expose: __expose, emit: __emit }) {
      const certificatePickerShow = vue.ref(false);
      const certificateLists = vue.ref([
        { name: null, date: null, photoList: [], authority: null, number: null, listenerId: null, selectIndex: -1 }
      ]);
      const educationLists = vue.ref([]);
      const ethicsLists = vue.ref([]);
      const qualification = vue.ref([]);
      const uploadUrl = vue.ref(baseURL$1 + "/api/common/upload");
      const timePickerShow = vue.ref(false);
      const currentItem = vue.ref(null);
      const currentIndex = vue.ref(-1);
      const type = vue.ref(0);
      const token = uni.getStorageSync("token");
      const headers = vue.ref({ token });
      const fromDataCertificate = vue.ref({
        certificateList: [],
        educationList: [],
        ethicsList: [],
        consultantType: 1
      });
      const timePickerParams = vue.ref({
        year: true,
        month: true,
        day: false,
        hour: false,
        minute: false,
        second: false,
        timestamp: true
      });
      const certificateDateParam = vue.ref({
        year: true,
        month: true,
        day: true,
        hour: false,
        minute: false,
        second: false,
        timestamp: true
      });
      const initCertificateLists = (apiData) => {
        certificateLists.value.length = 0;
        const validData = Array.isArray(apiData) ? apiData : [];
        validData.forEach((item) => {
          certificateLists.value.push({
            ...item,
            selectIndex: -1,
            qualificationValue: "",
            photoList: parseStrToImgArr(item.photos || "[]")
          });
        });
      };
      const getQualificationApi = async () => {
        try {
          const { data } = await getQualification();
          qualification.value = Array.isArray(data) ? data : [];
          initCertificateLists([]);
        } catch (err) {
          formatAppLog("error", "at pages/auth/components/certificate.vue:393", "获取资质类别失败：", err);
          qualification.value = [];
          initCertificateLists([]);
        }
      };
      const confirmSchoolTime = (e2) => {
        if (!currentItem.value || currentIndex.value === -1)
          return;
        const monthStr = String(e2.month).padStart(2, "0");
        const fullDate = `${e2.year}-${monthStr}-01 00:00:00`;
        if (type.value === 1) {
          currentItem.value.startTime = fullDate;
        } else {
          currentItem.value.endTime = fullDate;
        }
        timePickerShow.value = false;
        currentItem.value = null;
      };
      const getRealImgUrl = (obj) => {
        if (typeof obj === "string")
          return obj;
        if (obj && obj.url)
          return getRealImgUrl(obj.url);
        return "";
      };
      const parseStrToImgArr = (str) => {
        if (!str || str === "" || str === "[]")
          return [];
        try {
          const jsonStr = str.replace(/'/g, '"');
          const res2 = JSON.parse(jsonStr);
          return Array.isArray(res2) ? res2.map((item) => {
            const realUrl = getRealImgUrl(item);
            return realUrl ? { url: realUrl } : null;
          }).filter(Boolean) : [];
        } catch (err) {
          formatAppLog("error", "at pages/auth/components/certificate.vue:429", "解析图片字符串失败：", err);
          return [];
        }
      };
      const parseImgArrToStr = (arr) => {
        if (!Array.isArray(arr) || arr.length === 0)
          return "[]";
        try {
          const simpleArr = arr.map((item) => {
            const realUrl = getRealImgUrl(item);
            return realUrl ? { url: realUrl } : null;
          }).filter(Boolean);
          return JSON.stringify(simpleArr).replace(/"/g, "'");
        } catch (err) {
          formatAppLog("error", "at pages/auth/components/certificate.vue:442", "转换图片数组为字符串失败：", err);
          return "[]";
        }
      };
      const showCertificateTimePicker = (item, index) => {
        currentItem.value = item;
        currentIndex.value = index;
        certificatePickerShow.value = true;
      };
      const confirmCertificateDate = (e2) => {
        if (!currentItem.value)
          return;
        const month = String(e2.month).padStart(2, "0");
        const day = String(e2.day).padStart(2, "0");
        currentItem.value.date = `${e2.year}-${month}-${day}`;
        certificatePickerShow.value = false;
        currentItem.value = null;
      };
      const bindPickerChange = (e2, index) => {
        const selectIdx = Number(e2.detail.value);
        const selectItem = qualification.value[selectIdx];
        if (selectItem) {
          certificateLists.value[index].selectIndex = selectIdx;
          certificateLists.value[index].listenerId = selectItem.id || "";
          certificateLists.value[index].name = selectItem.name || "";
        }
      };
      const showTimePicker = (item, index, t2) => {
        currentItem.value = item;
        currentIndex.value = index;
        type.value = t2;
        timePickerShow.value = true;
      };
      const beforeUpload = () => {
        return true;
      };
      const uploadComplete = (res2, index) => {
        var _a;
        if (!certificateLists.value[index])
          return;
        const realUrl = ((_a = res2 == null ? void 0 : res2.data) == null ? void 0 : _a.url) || (res2 == null ? void 0 : res2.url) || "";
        if (realUrl)
          certificateLists.value[index].photoList.push({ url: realUrl });
        else
          uni.showToast({ title: "图片上传失败，URL为空", icon: "error" });
      };
      const uploadComplete1 = (res2, index) => {
        var _a;
        if (!educationLists.value[index])
          return;
        const realUrl = ((_a = res2 == null ? void 0 : res2.data) == null ? void 0 : _a.url) || (res2 == null ? void 0 : res2.url) || "";
        if (realUrl)
          educationLists.value[index].photoList.push({ url: realUrl });
        else
          uni.showToast({ title: "图片上传失败，URL为空", icon: "error" });
      };
      const uploadComplete2 = (res2, index) => {
        var _a;
        if (!ethicsLists.value[index])
          return;
        const realUrl = ((_a = res2 == null ? void 0 : res2.data) == null ? void 0 : _a.url) || (res2 == null ? void 0 : res2.url) || "";
        if (realUrl)
          ethicsLists.value[index].photoList.push({ url: realUrl });
        else
          uni.showToast({ title: "图片上传失败，URL为空", icon: "error" });
      };
      const deletePic = (fileList, index) => {
        certificateLists.value[index].photoList = fileList || [];
      };
      const deletePic1 = (fileList, index) => {
        educationLists.value[index].photoList = fileList || [];
      };
      const deletePic2 = (fileList, index) => {
        ethicsLists.value[index].photoList = fileList || [];
      };
      const addCertificateListHandler = () => {
        certificateLists.value.push({ name: "", date: "", photoList: [], authority: "", number: "", listenerId: null, selectIndex: -1 });
      };
      const addEducationListsHandler = () => {
        educationLists.value.push({ startTime: null, endTime: null, schoolName: null, idNumber: null, photoList: [], code: null, degree: null });
      };
      const addEthicsListsHandler = () => {
        ethicsLists.value.push({ startTime: null, endTime: null, schoolName: null, idNumber: null, photoList: [], code: null, career: "" });
      };
      const removeCertificateListHandler = (index) => {
        certificateLists.value.splice(index, 1);
      };
      const removeEducationListsHandler = (index) => {
        educationLists.value.splice(index, 1);
      };
      const removeEthicsListsHandler = (index) => {
        ethicsLists.value.splice(index, 1);
      };
      const emit = __emit;
      const props = __props;
      const refreshData = () => {
        var _a, _b, _c, _d, _e2, _f;
        if ((_b = (_a = props.modelValue) == null ? void 0 : _a.certificateList) == null ? void 0 : _b.length) {
          certificateLists.value = props.modelValue.certificateList.map((e2) => {
            const photoList = parseStrToImgArr(e2.photos || "[]");
            const { photos, ...rest } = e2;
            return { ...rest, photoList, selectIndex: -1 };
          });
        } else {
          certificateLists.value = [{ name: null, date: null, photoList: [], authority: null, number: null, listenerId: null, selectIndex: -1 }];
        }
        if ((_d = (_c = props.modelValue) == null ? void 0 : _c.educationList) == null ? void 0 : _d.length) {
          educationLists.value = props.modelValue.educationList.map((e2) => {
            const photoList = parseStrToImgArr(e2.photo || "[]");
            const { photo, ...rest } = e2;
            return { ...rest, photoList };
          });
        } else {
          educationLists.value = [];
        }
        if ((_f = (_e2 = props.modelValue) == null ? void 0 : _e2.ethicsList) == null ? void 0 : _f.length) {
          ethicsLists.value = props.modelValue.ethicsList.map((e2) => {
            const photoList = parseStrToImgArr(e2.photos || "[]");
            const { photos, ...rest } = e2;
            return { ...rest, photoList };
          });
        } else {
          ethicsLists.value = [];
        }
        fromDataCertificate.value = {
          certificateList: certificateLists.value,
          educationList: educationLists.value,
          ethicsList: ethicsLists.value,
          consultantType: props.consultantType || 1
        };
      };
      const submit = async () => {
        if (props.consultantType === 1 && certificateLists.value.length === 0) {
          uni.showToast({ title: "请上传至少一张资质证书", icon: "error" });
          return;
        }
        const submitCertificateLists = JSON.parse(JSON.stringify(certificateLists.value));
        const submitEducationLists = JSON.parse(JSON.stringify(educationLists.value));
        const submitEthicsLists = JSON.parse(JSON.stringify(ethicsLists.value));
        submitCertificateLists.forEach((e2) => {
          e2.photos = parseImgArrToStr(e2.photoList || []);
          delete e2.photoList;
          delete e2.selectIndex;
        });
        submitEducationLists.forEach((e2) => {
          e2.photo = parseImgArrToStr(e2.photoList || []);
          delete e2.photoList;
        });
        submitEthicsLists.forEach((e2) => {
          e2.photos = parseImgArrToStr(e2.photoList || []);
          delete e2.photoList;
        });
        const data = {
          certificateList: submitCertificateLists,
          educationList: submitEducationLists,
          ethicsList: submitEthicsLists,
          consultantType: props.consultantType
        };
        fromDataCertificate.value = data;
        try {
          const res2 = props.consultantType == 1 ? await registerConsultantStep3({ ...props.modelValue, ...data }) : await registerListenerStep3({ ...props.modelValue, ...data });
          if (res2.code === 0) {
            emit("commited", "");
          } else {
            uni.showToast({ title: res2.msg || "提交失败", icon: "error" });
          }
        } catch (err) {
          formatAppLog("error", "at pages/auth/components/certificate.vue:601", "提交失败：", err);
          uni.showToast({ title: "提交失败，请重试", icon: "error" });
        }
      };
      vue.onMounted(() => {
        refreshData();
        getQualificationApi();
      });
      __expose({ submit, refreshData, fromDataCertificate });
      const __returned__ = { certificatePickerShow, certificateLists, educationLists, ethicsLists, qualification, uploadUrl, timePickerShow, currentItem, currentIndex, type, token, headers, fromDataCertificate, timePickerParams, certificateDateParam, initCertificateLists, getQualificationApi, confirmSchoolTime, getRealImgUrl, parseStrToImgArr, parseImgArrToStr, showCertificateTimePicker, confirmCertificateDate, bindPickerChange, showTimePicker, beforeUpload, uploadComplete, uploadComplete1, uploadComplete2, deletePic, deletePic1, deletePic2, addCertificateListHandler, addEducationListsHandler, addEthicsListsHandler, removeCertificateListHandler, removeEducationListsHandler, removeEthicsListsHandler, emit, props, refreshData, submit, ref: vue.ref, onMounted: vue.onMounted, reactive: vue.reactive, get uploadFile() {
        return uploadFile;
      }, get registerConsultantStep3() {
        return registerConsultantStep3;
      }, get registerListenerStep3() {
        return registerListenerStep3;
      }, get getQualification() {
        return getQualification;
      }, get baseURL() {
        return baseURL$1;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$w(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_u_icon = resolveEasycom(vue.resolveDynamicComponent("u-icon"), __easycom_2$b);
    const _component_u_picker = resolveEasycom(vue.resolveDynamicComponent("u-picker"), __easycom_1$3);
    const _component_uni_easyinput = resolveEasycom(vue.resolveDynamicComponent("uni-easyinput"), __easycom_2$8);
    const _component_u_upload = resolveEasycom(vue.resolveDynamicComponent("u-upload"), __easycom_3$3);
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    return vue.openBlock(), vue.createElementBlock("view", { class: "certificate-box" }, [
      vue.createElementVNode("view", { class: "certificate-content-box" }, [
        vue.createElementVNode("view", { class: "certificate-content" }, [
          vue.createElementVNode("view", { class: "title" }, [
            vue.createElementVNode("view", null, [
              vue.createTextVNode(" 资质信息"),
              vue.createElementVNode("text", { class: "require" }, "(必填)")
            ]),
            vue.createElementVNode("view", { class: "tips" }, [
              vue.createElementVNode("image", {
                src: _imports_0$4,
                class: "img"
              }),
              vue.createTextVNode("说明 ")
            ])
          ]),
          vue.createElementVNode("view", { class: "remark" }, "此项信息正式上线后会公开展示在个人资料"),
          vue.createElementVNode("view", { class: "id-card-form-box" }, [
            (vue.openBlock(true), vue.createElementBlock(
              vue.Fragment,
              null,
              vue.renderList($setup.certificateLists, (item, index) => {
                return vue.openBlock(), vue.createElementBlock("view", {
                  class: "id-card-form-content",
                  key: index
                }, [
                  vue.createElementVNode("picker", {
                    onChange: (e2) => $setup.bindPickerChange(e2, index),
                    value: item.selectIndex,
                    range: $setup.qualification,
                    "range-key": "name"
                  }, [
                    vue.createElementVNode("view", { class: "form-item" }, [
                      vue.createElementVNode("view", { class: "label require" }, "资质类别"),
                      vue.createElementVNode(
                        "view",
                        {
                          class: vue.normalizeClass(["content", !item.name ? "weight" : ""])
                        },
                        null,
                        2
                        /* CLASS */
                      ),
                      vue.createElementVNode("view", {
                        class: "content",
                        style: { "font-size": "24rpx" }
                      }, [
                        vue.createTextVNode(
                          vue.toDisplayString(item.name || "请选择"),
                          1
                          /* TEXT */
                        ),
                        vue.createVNode(_component_u_icon, { name: "arrow-right" })
                      ])
                    ])
                  ], 40, ["onChange", "value", "range"]),
                  vue.createElementVNode("view", { class: "form-item" }, [
                    vue.createElementVNode("view", { class: "label require" }, "发证时间"),
                    vue.createElementVNode("view", { class: "content" }, [
                      vue.createElementVNode("view", {
                        onClick: () => $setup.showCertificateTimePicker(item, index)
                      }, [
                        vue.createElementVNode("text", { style: { "font-size": "24rpx" } }, [
                          vue.createTextVNode(
                            vue.toDisplayString(item.date ? item.date : "请选择") + " ",
                            1
                            /* TEXT */
                          ),
                          vue.createVNode(_component_u_icon, { name: "arrow-right" })
                        ])
                      ], 8, ["onClick"])
                    ])
                  ]),
                  vue.createVNode(_component_u_picker, {
                    mode: "time",
                    modelValue: $setup.certificatePickerShow,
                    "onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => $setup.certificatePickerShow = $event),
                    onConfirm: $setup.confirmCertificateDate,
                    params: $setup.certificateDateParam
                  }, null, 8, ["modelValue", "params"]),
                  vue.createElementVNode("view", { class: "form-item user-sign" }, [
                    vue.createElementVNode("view", { class: "label require" }, "证书编号"),
                    vue.createElementVNode("view", {
                      class: "content-input",
                      style: { "width": "400rpx" }
                    }, [
                      vue.createVNode(_component_uni_easyinput, {
                        trim: "all",
                        type: "text",
                        placeholder: "请输入证书编号",
                        inputBorder: false,
                        clearable: false,
                        modelValue: item.number,
                        "onUpdate:modelValue": ($event) => item.number = $event,
                        style: { "text-align": "end" }
                      }, null, 8, ["modelValue", "onUpdate:modelValue"])
                    ])
                  ]),
                  vue.createElementVNode("view", { class: "form-item user-introduction" }, [
                    vue.createElementVNode("view", { class: "label require" }, "证件照片"),
                    vue.createElementVNode("view", { class: "introduction-content" }, [
                      vue.createVNode(_component_u_upload, {
                        fileList: $setup.certificateLists[index].photoList,
                        "before-upload": $setup.beforeUpload,
                        header: $setup.headers,
                        onOnSuccess: (res2) => $setup.uploadComplete(res2, index),
                        onOnRemove: (fileList) => $setup.deletePic(fileList, index),
                        name: "file",
                        action: $setup.uploadUrl
                      }, null, 8, ["fileList", "header", "onOnSuccess", "onOnRemove", "action"])
                    ])
                  ]),
                  vue.createElementVNode("view", { class: "line-box" }, [
                    vue.createElementVNode(
                      "view",
                      {
                        class: vue.normalizeClass(["line", index > 0 ? "line-delete" : ""])
                      },
                      null,
                      2
                      /* CLASS */
                    ),
                    index > 0 ? (vue.openBlock(), vue.createElementBlock("view", {
                      key: 0,
                      class: "delete-item",
                      onClick: ($event) => $setup.removeCertificateListHandler(index)
                    }, [
                      vue.createVNode(_component_uni_icons, {
                        type: "minus-filled",
                        size: "30",
                        color: "#FA5151"
                      }),
                      vue.createTextVNode(" 移除 ")
                    ], 8, ["onClick"])) : vue.createCommentVNode("v-if", true)
                  ])
                ]);
              }),
              128
              /* KEYED_FRAGMENT */
            )),
            vue.createElementVNode("view", {
              class: "add-certificate-btn",
              onClick: $setup.addCertificateListHandler
            }, [
              vue.createElementVNode("view", { class: "btn" }, [
                vue.createVNode(_component_uni_icons, {
                  type: "plus-filled",
                  size: "18",
                  color: "rgba(0,0,0,.85)"
                }),
                vue.createTextVNode("增加一项")
              ])
            ])
          ])
        ]),
        vue.createElementVNode("view", { class: "certificate-content" }, [
          vue.createElementVNode("view", { class: "title" }, [
            vue.createElementVNode("view", null, [
              vue.createTextVNode("教育背景"),
              vue.createElementVNode("text", { class: "require" }, "(选填)")
            ]),
            vue.createElementVNode("view", { class: "tips" }, [
              vue.createElementVNode("image", {
                src: _imports_0$4,
                class: "img"
              }),
              vue.createTextVNode("说明 ")
            ])
          ]),
          vue.createElementVNode("view", { class: "remark" }, "此项信息正式上线后会公开展示在个人资料"),
          vue.createElementVNode("view", { class: "id-card-form-box" }, [
            (vue.openBlock(true), vue.createElementBlock(
              vue.Fragment,
              null,
              vue.renderList($setup.educationLists, (item, index) => {
                return vue.openBlock(), vue.createElementBlock("view", {
                  class: "id-card-form-content",
                  key: index
                }, [
                  vue.createElementVNode("view", { class: "form-item" }, [
                    vue.createElementVNode("view", { class: "label" }, "起始时间"),
                    vue.createElementVNode("view", {
                      class: "content",
                      onClick: ($event) => $setup.showTimePicker(item, index, 1)
                    }, [
                      vue.createTextVNode(
                        vue.toDisplayString(item.startTime == null ? "请选择" : item.startTime) + " ",
                        1
                        /* TEXT */
                      ),
                      vue.createVNode(_component_uni_icons, {
                        type: "right",
                        size: "14",
                        color: "rgba(0, 0, 0, 0.3)"
                      })
                    ], 8, ["onClick"])
                  ]),
                  vue.createElementVNode("view", { class: "form-item" }, [
                    vue.createElementVNode("view", { class: "label" }, "截止时间"),
                    vue.createElementVNode("view", {
                      class: "content",
                      onClick: ($event) => $setup.showTimePicker(item, index, 2)
                    }, [
                      vue.createTextVNode(
                        vue.toDisplayString(item.endTime == null ? "请选择" : item.endTime) + " ",
                        1
                        /* TEXT */
                      ),
                      vue.createVNode(_component_uni_icons, {
                        type: "right",
                        size: "14",
                        color: "rgba(0, 0, 0, 0.3)"
                      })
                    ], 8, ["onClick"])
                  ]),
                  vue.createVNode(_component_u_picker, {
                    mode: "time",
                    modelValue: $setup.timePickerShow,
                    "onUpdate:modelValue": _cache[1] || (_cache[1] = ($event) => $setup.timePickerShow = $event),
                    onConfirm: $setup.confirmSchoolTime,
                    params: $setup.timePickerParams
                  }, null, 8, ["modelValue", "params"]),
                  vue.createElementVNode("view", { class: "form-item user-sign" }, [
                    vue.createElementVNode("view", { class: "label" }, "毕业院校"),
                    vue.createElementVNode("view", {
                      class: "content-input",
                      style: { "width": "400rpx" }
                    }, [
                      vue.createVNode(_component_uni_easyinput, {
                        trim: "all",
                        type: "text",
                        placeholder: "请输入毕业院校",
                        modelValue: item.schoolName,
                        "onUpdate:modelValue": ($event) => item.schoolName = $event,
                        inputBorder: false,
                        clearable: false
                      }, null, 8, ["modelValue", "onUpdate:modelValue"])
                    ])
                  ]),
                  vue.createElementVNode("view", { class: "form-item user-sign" }, [
                    vue.createElementVNode("view", { class: "label" }, "证书编号"),
                    vue.createElementVNode("view", {
                      class: "content-input",
                      style: { "width": "400rpx" }
                    }, [
                      vue.createVNode(_component_uni_easyinput, {
                        trim: "all",
                        style: { "text-align": "end" },
                        type: "text",
                        placeholder: "请输入证书编号",
                        modelValue: item.code,
                        "onUpdate:modelValue": ($event) => item.code = $event,
                        inputBorder: false,
                        clearable: false
                      }, null, 8, ["modelValue", "onUpdate:modelValue"])
                    ])
                  ]),
                  vue.createElementVNode("view", { class: "form-item user-sign" }, [
                    vue.createElementVNode("view", { class: "label" }, "学历"),
                    vue.createElementVNode("view", {
                      class: "content-input",
                      style: { "width": "400rpx" }
                    }, [
                      vue.createVNode(_component_uni_easyinput, {
                        trim: "all",
                        style: { "text-align": "end" },
                        type: "text",
                        placeholder: "请输入学历",
                        modelValue: item.degree,
                        "onUpdate:modelValue": ($event) => item.degree = $event,
                        inputBorder: false,
                        clearable: false
                      }, null, 8, ["modelValue", "onUpdate:modelValue"])
                    ])
                  ]),
                  vue.createElementVNode("view", { class: "form-item user-introduction" }, [
                    vue.createElementVNode("view", { class: "label" }, "证件照片"),
                    vue.createElementVNode("view", { class: "introduction-content" }, [
                      vue.createVNode(_component_u_upload, {
                        fileList: $setup.educationLists[index].photoList,
                        "before-upload": $setup.beforeUpload,
                        header: $setup.headers,
                        onOnSuccess: (res2) => $setup.uploadComplete1(res2, index),
                        onOnRemove: (fileList) => $setup.deletePic1(fileList, index),
                        name: "file",
                        action: $setup.uploadUrl
                      }, null, 8, ["fileList", "header", "onOnSuccess", "onOnRemove", "action"])
                    ])
                  ]),
                  vue.createElementVNode("view", { class: "line-box" }, [
                    vue.createElementVNode("view", { class: "line line-delete" }),
                    vue.createElementVNode("view", {
                      class: "delete-item",
                      onClick: ($event) => $setup.removeEducationListsHandler(index)
                    }, [
                      vue.createVNode(_component_uni_icons, {
                        type: "minus-filled",
                        size: "30",
                        color: "#FA5151"
                      }),
                      vue.createTextVNode(" 移除 ")
                    ], 8, ["onClick"])
                  ])
                ]);
              }),
              128
              /* KEYED_FRAGMENT */
            ))
          ]),
          vue.createElementVNode("view", {
            class: "add-certificate-btn",
            onClick: $setup.addEducationListsHandler
          }, [
            $setup.educationLists.length > 0 ? (vue.openBlock(), vue.createElementBlock("view", {
              key: 0,
              class: "btn"
            }, [
              vue.createVNode(_component_uni_icons, {
                type: "plus-filled",
                size: "18",
                color: "rgba(0,0,0,.85)"
              }),
              vue.createTextVNode("增加一项")
            ])) : (vue.openBlock(), vue.createElementBlock("view", {
              key: 1,
              class: "btn edit-btn"
            }, [
              vue.createElementVNode("image", {
                src: _imports_1$2,
                class: "img"
              }),
              vue.createTextVNode("编辑 ")
            ]))
          ])
        ]),
        vue.createElementVNode("view", { class: "certificate-content" }, [
          vue.createElementVNode("view", { class: "title" }, [
            vue.createElementVNode("view", null, [
              vue.createTextVNode("伦理培训"),
              vue.createElementVNode("text", { class: "require" }, "(选填)")
            ]),
            vue.createElementVNode("view", { class: "tips" }, [
              vue.createElementVNode("image", {
                src: _imports_0$4,
                class: "img"
              }),
              vue.createTextVNode("说明 ")
            ])
          ]),
          vue.createElementVNode("view", { class: "remark" }, "此项信息正式上线后会公开展示在个人资料"),
          vue.createElementVNode("view", { class: "id-card-form-box" }, [
            (vue.openBlock(true), vue.createElementBlock(
              vue.Fragment,
              null,
              vue.renderList($setup.ethicsLists, (item, index) => {
                return vue.openBlock(), vue.createElementBlock("view", {
                  class: "id-card-form-content",
                  key: index
                }, [
                  vue.createElementVNode("view", { class: "form-item" }, [
                    vue.createElementVNode("view", { class: "label" }, "起始时间"),
                    vue.createElementVNode("view", {
                      class: "content",
                      onClick: ($event) => $setup.showTimePicker(item, index, 1)
                    }, [
                      vue.createTextVNode(
                        vue.toDisplayString(item.startTime == null ? "请选择" : item.startTime) + " ",
                        1
                        /* TEXT */
                      ),
                      vue.createVNode(_component_uni_icons, {
                        type: "right",
                        size: "14",
                        color: "rgba(0, 0, 0, 0.3)"
                      })
                    ], 8, ["onClick"])
                  ]),
                  vue.createElementVNode("view", { class: "form-item" }, [
                    vue.createElementVNode("view", { class: "label" }, "截止时间"),
                    vue.createElementVNode("view", {
                      class: "content",
                      onClick: ($event) => $setup.showTimePicker(item, index, 2)
                    }, [
                      vue.createTextVNode(
                        vue.toDisplayString(item.endTime == null ? "请选择" : item.endTime) + " ",
                        1
                        /* TEXT */
                      ),
                      vue.createVNode(_component_uni_icons, {
                        type: "right",
                        size: "14",
                        color: "rgba(0, 0, 0, 0.3)"
                      })
                    ], 8, ["onClick"])
                  ]),
                  vue.createVNode(_component_u_picker, {
                    mode: "time",
                    modelValue: $setup.timePickerShow,
                    "onUpdate:modelValue": _cache[2] || (_cache[2] = ($event) => $setup.timePickerShow = $event),
                    onConfirm: $setup.confirmSchoolTime,
                    params: $setup.timePickerParams
                  }, null, 8, ["modelValue", "params"]),
                  vue.createElementVNode("view", { class: "form-item user-sign" }, [
                    vue.createElementVNode("view", { class: "label" }, "培训课程"),
                    vue.createElementVNode("view", {
                      class: "content-input",
                      style: { "width": "400rpx" }
                    }, [
                      vue.createVNode(_component_uni_easyinput, {
                        trim: "all",
                        type: "text",
                        placeholder: "请输入培训课程",
                        modelValue: item.career,
                        "onUpdate:modelValue": ($event) => item.career = $event,
                        inputBorder: false,
                        clearable: false,
                        placeholderStyle: { "text-align": "right" }
                      }, null, 8, ["modelValue", "onUpdate:modelValue"])
                    ])
                  ]),
                  vue.createElementVNode("view", { class: "form-item user-introduction" }, [
                    vue.createElementVNode("view", { class: "label" }, "证件照片"),
                    vue.createElementVNode("view", { class: "introduction-content" }, [
                      vue.createVNode(_component_u_upload, {
                        fileList: $setup.ethicsLists[index].photoList,
                        "before-upload": $setup.beforeUpload,
                        header: $setup.headers,
                        onOnSuccess: (res2) => $setup.uploadComplete2(res2, index),
                        onOnRemove: (fileList) => $setup.deletePic2(fileList, index),
                        name: "file",
                        action: $setup.uploadUrl
                      }, null, 8, ["fileList", "header", "onOnSuccess", "onOnRemove", "action"])
                    ])
                  ]),
                  vue.createElementVNode("view", { class: "line-box" }, [
                    vue.createElementVNode("view", { class: "line line-delete" }),
                    vue.createElementVNode("view", {
                      class: "delete-item",
                      onClick: ($event) => $setup.removeEthicsListsHandler(index)
                    }, [
                      vue.createVNode(_component_uni_icons, {
                        type: "minus-filled",
                        size: "30",
                        color: "#FA5151"
                      }),
                      vue.createTextVNode(" 移除 ")
                    ], 8, ["onClick"])
                  ])
                ]);
              }),
              128
              /* KEYED_FRAGMENT */
            )),
            vue.createElementVNode("view", {
              class: "add-certificate-btn",
              onClick: $setup.addEthicsListsHandler
            }, [
              $setup.ethicsLists.length > 0 ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 0,
                class: "btn"
              }, [
                vue.createVNode(_component_uni_icons, {
                  type: "plus-filled",
                  size: "18",
                  color: "rgba(0,0,0,.85)"
                }),
                vue.createTextVNode("增加一项")
              ])) : (vue.openBlock(), vue.createElementBlock("view", {
                key: 1,
                class: "btn edit-btn"
              }, [
                vue.createElementVNode("image", {
                  src: _imports_1$2,
                  class: "img"
                }),
                vue.createTextVNode("编辑 ")
              ]))
            ])
          ])
        ])
      ])
    ]);
  }
  const certificate$2 = /* @__PURE__ */ _export_sfc(_sfc_main$x, [["render", _sfc_render$w], ["__scopeId", "data-v-67319c65"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/auth/components/certificate.vue"]]);
  const _sfc_main$w = {
    __name: "auth",
    setup(__props, { expose: __expose }) {
      __expose();
      vue.useCssVars((_ctx) => ({
        "98e148d1-statusBarHeight": statusBarHeight.value
      }));
      const globalStore = useGlobalDataStore();
      const statusBarHeight = vue.ref(globalStore.statusBarHeight + "px");
      const currentComponent = vue.ref(idCard$2);
      const step = vue.ref(1);
      const consultant = vue.ref({});
      const idCardRef = vue.ref(null);
      const careerRef = vue.ref(null);
      const finalStep = vue.ref(null);
      const consultantType = vue.ref("");
      const userInfo = vue.ref("");
      onLoad((options) => {
        consultantType.value = options.type;
        userInfo.value = JSON.parse(options.userInfo);
        uni.setNavigationBarTitle({ title: "认证" });
        getConsultantDetail();
      });
      const feedbackPrompt = (status) => {
        const promptMap = {
          1: "您的入驻申请正在审核中，请耐心等待......",
          2: "已满"
        };
        return promptMap[status];
      };
      const getConsultantDetail = async () => {
        if (consultantType.value == 1) {
          let resp = await getConsultantByUserId({ userId: userInfo.value });
          const data = {
            ...resp.data,
            idcardNum: resp.data.sysUser.idCardNo,
            idcardFront: resp.data.sysUser.idCardFrontImg,
            idcardBackend: resp.data.sysUser.idCardBackImg,
            occupationId: resp.data.sysUser.occupationId
          };
          processingImg(data);
        } else {
          let resp = await getListenerByUserId({ userId: userInfo.value });
          const data = {
            ...resp.data,
            occupationId: resp.data.sysUser.occupationId
          };
          processingImg(data);
        }
      };
      const processingImg = (val2) => {
        const { commitmentImg, holdIdCardImg } = val2;
        const commitment = commitmentImg ? formatImages([commitmentImg]) : [];
        const holdIdCard = holdIdCardImg ? formatImages([holdIdCardImg]) : [];
        const data = Object.assign(val2, {
          commitmentImg: commitment,
          holdIdCardImg: holdIdCard
        });
        consultant.value = data;
      };
      const formatImages = (urls) => {
        return urls.map((url2, index) => ({
          url: url2
        }));
      };
      const formData = vue.ref({
        idCard: {
          consultantName: "",
          idNum: ""
          // 其他身份证信息字段
        },
        career: {
          profession: "",
          experience: ""
          // 其他职业信息字段
        },
        certificate: {
          files: []
          // 其他证书字段
        }
      });
      const nextStepHandler = () => {
        var _a, _b;
        if (step.value == 1) {
          (_a = idCardRef.value) == null ? void 0 : _a.submit();
        }
        if (step.value == 2) {
          (_b = careerRef.value) == null ? void 0 : _b.submit();
        }
      };
      const step1Commit = (from) => {
        consultant.value = from;
        step.value = step.value + 1;
      };
      const setp2Commit = () => {
        step.value = step.value + 1;
      };
      const finalCommit = () => {
        popup.value.open("center");
      };
      const prevStepHandler = () => {
        step.value = step.value - 1;
      };
      vue.watch(step, (newVal, oldVal) => {
        var _a;
        if (newVal == 1) {
          currentComponent.value = idCard$2;
        } else if (newVal == 2) {
          currentComponent.value = career$2;
        } else if (newVal == 3) {
          (_a = finalStep.value) == null ? void 0 : _a.refreshData();
          currentComponent.value = certificate$2;
        }
      });
      const popup = vue.ref(null);
      const examineHandler = async () => {
        var _a;
        (_a = finalStep.value) == null ? void 0 : _a.submit();
        const { certificateList, educationList, careerList, consultantType: consultantType2 } = finalStep.value.fromDataCertificate;
        ({
          ...formData.value.idCard,
          ...formData.value.career,
          certificateList,
          educationList,
          careerList,
          consultantType: consultantType2,
          certificates: formData.value.certificate.files
        });
      };
      const closePopup = () => {
        uni.switchTab({
          url: "/pages/my/index"
        });
      };
      const __returned__ = { globalStore, statusBarHeight, currentComponent, step, consultant, idCardRef, careerRef, finalStep, consultantType, userInfo, feedbackPrompt, getConsultantDetail, processingImg, formatImages, formData, nextStepHandler, step1Commit, setp2Commit, finalCommit, prevStepHandler, popup, examineHandler, closePopup, ref: vue.ref, watch: vue.watch, get useGlobalDataStore() {
        return useGlobalDataStore;
      }, get onLoad() {
        return onLoad;
      }, get getConsultantByUserId() {
        return getConsultantByUserId;
      }, get getListenerByUserId() {
        return getListenerByUserId;
      }, get registerConsultantStep3() {
        return registerConsultantStep3;
      }, get registerListenerStep3() {
        return registerListenerStep3;
      }, idCard: idCard$2, career: career$2, certificate: certificate$2 };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$v(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    const _component_u_icon = resolveEasycom(vue.resolveDynamicComponent("u-icon"), __easycom_2$b);
    const _component_uni_popup = resolveEasycom(vue.resolveDynamicComponent("uni-popup"), __easycom_3$5);
    return vue.openBlock(), vue.createElementBlock("view", { class: "auth-box" }, [
      vue.createElementVNode("view", { class: "children-component" }, [
        $setup.certificate.verifyStatus == null || $setup.certificate.verifyStatus == 0 ? (vue.openBlock(), vue.createElementBlock("scroll-view", {
          key: 0,
          "scroll-y": "true",
          "show-scrollbar": false,
          class: "scroll-content"
        }, [
          vue.createElementVNode("view", { class: "children-content" }, [
            vue.createElementVNode("view", { class: "top-bg" }),
            vue.createElementVNode("view", { class: "current-component" }, [
              $setup.consultant.status == 1 || $setup.consultant.status == 3 ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 0,
                class: "component-tip"
              }, [
                vue.createVNode(_component_uni_icons, {
                  type: "notification-filled",
                  size: "20",
                  color: "#fd3e3c"
                }),
                vue.createElementVNode(
                  "view",
                  null,
                  vue.toDisplayString($setup.consultant.status == 1 ? "您上传的身份证照片不清晰，请修改后再提交" : ""),
                  1
                  /* TEXT */
                )
              ])) : vue.createCommentVNode("v-if", true),
              vue.createElementVNode("view", { class: "step-box" }, [
                vue.createElementVNode("view", { class: "step-content" }, [
                  vue.createElementVNode(
                    "view",
                    {
                      class: vue.normalizeClass(["step-item", $setup.step == 1 ? "step-item-active" : ""])
                    },
                    [
                      vue.createElementVNode("view", { class: "step-num" }, "1"),
                      vue.createElementVNode("view", { class: "step-txt" }, "基本信息")
                    ],
                    2
                    /* CLASS */
                  ),
                  vue.createElementVNode("view", { class: "step-line" }),
                  vue.createElementVNode(
                    "view",
                    {
                      class: vue.normalizeClass(["step-item", $setup.step == 2 ? "step-item-active" : ""])
                    },
                    [
                      vue.createElementVNode("view", { class: "step-num" }, "2"),
                      vue.createElementVNode("view", { class: "step-txt" }, "职业信息")
                    ],
                    2
                    /* CLASS */
                  ),
                  vue.createElementVNode("view", { class: "step-line" }),
                  vue.createElementVNode(
                    "view",
                    {
                      class: vue.normalizeClass(["step-item", $setup.step == 3 ? "step-item-active" : ""])
                    },
                    [
                      vue.createElementVNode("view", { class: "step-num" }, "3"),
                      vue.createElementVNode("view", { class: "step-txt" }, "证书资料")
                    ],
                    2
                    /* CLASS */
                  )
                ])
              ]),
              vue.createElementVNode("view", { class: "handler-components-box" }, [
                vue.withDirectives(vue.createVNode($setup["idCard"], {
                  modelValue: $setup.consultant,
                  consultantType: $setup.consultantType,
                  onCommitted: $setup.step1Commit,
                  ref: "idCardRef",
                  "onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => $setup.formData.idCard = $event)
                }, null, 8, ["modelValue", "consultantType"]), [
                  [vue.vShow, $setup.step == 1]
                ]),
                vue.withDirectives(vue.createVNode($setup["career"], {
                  ref: "careerRef",
                  modelValue: $setup.consultant,
                  consultantType: $setup.consultantType,
                  onCommitted: $setup.setp2Commit
                }, null, 8, ["modelValue", "consultantType"]), [
                  [vue.vShow, $setup.step == 2]
                ]),
                vue.withDirectives(vue.createVNode($setup["certificate"], {
                  ref: "finalStep",
                  onCommited: $setup.finalCommit,
                  modelValue: $setup.consultant,
                  consultantType: $setup.consultantType
                }, null, 8, ["modelValue", "consultantType"]), [
                  [vue.vShow, $setup.step == 3]
                ]),
                vue.createElementVNode("view", { class: "footer" }, [
                  vue.createElementVNode("view", { class: "tip" }, [
                    vue.createElementVNode("image", {
                      src: _imports_0$a,
                      class: "img"
                    }),
                    vue.createTextVNode("个人信息安全保障中 ")
                  ]),
                  $setup.step == 1 ? (vue.openBlock(), vue.createElementBlock("view", {
                    key: 0,
                    class: "btn"
                  }, [
                    vue.createElementVNode(
                      "view",
                      {
                        class: vue.normalizeClass(["next", $setup.consultantType == 1 ? "next-ba1" : "next-ba2"]),
                        onClick: $setup.nextStepHandler
                      },
                      "填好了，下一步",
                      2
                      /* CLASS */
                    )
                  ])) : vue.createCommentVNode("v-if", true),
                  $setup.step == 2 ? (vue.openBlock(), vue.createElementBlock("view", {
                    key: 1,
                    class: "btn step-2"
                  }, [
                    vue.createElementVNode("view", {
                      class: "next prev",
                      onClick: $setup.prevStepHandler
                    }, "上一步"),
                    vue.createElementVNode(
                      "view",
                      {
                        class: vue.normalizeClass(["next", $setup.consultantType == 1 ? "next-ba1" : "next-ba2"]),
                        onClick: $setup.nextStepHandler
                      },
                      "填好了，下一步",
                      2
                      /* CLASS */
                    )
                  ])) : vue.createCommentVNode("v-if", true),
                  $setup.step == 3 ? (vue.openBlock(), vue.createElementBlock("view", {
                    key: 2,
                    class: "btn step-2"
                  }, [
                    vue.createElementVNode("view", {
                      class: "next prev",
                      onClick: $setup.prevStepHandler
                    }, "上一步"),
                    vue.createElementVNode(
                      "view",
                      {
                        class: vue.normalizeClass(["next", $setup.consultantType == 1 ? "next-ba1" : "next-ba2"]),
                        onClick: $setup.examineHandler
                      },
                      "提交审核",
                      2
                      /* CLASS */
                    )
                  ])) : vue.createCommentVNode("v-if", true)
                ])
              ])
            ])
          ])
        ])) : $setup.consultant.verifyStatus == 1 ? (vue.openBlock(), vue.createElementBlock("view", { key: 1 }, [
          vue.createElementVNode("view", null, [
            vue.createVNode(_component_u_icon, { name: "info-circle-fill" })
          ]),
          vue.createElementVNode("view", null, [
            vue.createElementVNode("text", null, "认证审核中，请稍后查看")
          ]),
          vue.createElementVNode("view", null, [
            vue.createElementVNode("text", {
              onClick: _cache[1] || (_cache[1] = (...args) => _ctx.recheck && _ctx.recheck(...args)),
              style: { "color": "red" }
            }, "重新审核")
          ])
        ])) : $setup.consultant.verifyStatus == 2 ? (vue.openBlock(), vue.createElementBlock("view", { key: 2 }, [
          vue.createElementVNode("view", null, [
            vue.createElementVNode("text", null, "您已认证成为心理咨询师")
          ])
        ])) : (vue.openBlock(), vue.createElementBlock("view", { key: 3 }, [
          vue.createElementVNode("view", null, [
            vue.createElementVNode("text", null, "您的资料未通过审核~")
          ])
        ]))
      ]),
      vue.createVNode(
        _component_uni_popup,
        {
          ref: "popup",
          type: "message"
        },
        {
          default: vue.withCtx(() => [
            vue.createElementVNode("view", { class: "popup-content" }, [
              vue.createElementVNode("view", { class: "content-title" }, "您的申请已提交成功"),
              vue.createElementVNode("view", { class: "content-text" }, "稍后可进入申请页面查看审核进度"),
              vue.createElementVNode(
                "view",
                {
                  class: "content-btn",
                  style: vue.normalizeStyle({ background: $setup.consultantType == 1 ? "#35CA95" : "#EB9516" }),
                  onClick: $setup.closePopup
                },
                "返回“我的”",
                4
                /* STYLE */
              )
            ])
          ]),
          _: 1
          /* STABLE */
        },
        512
        /* NEED_PATCH */
      )
    ]);
  }
  const PagesAuthAuth = /* @__PURE__ */ _export_sfc(_sfc_main$w, [["render", _sfc_render$v], ["__scopeId", "data-v-98e148d1"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/auth/auth.vue"]]);
  const cityJson = [{ "letter": "A", "city": "阿坝县" }, { "letter": "A", "city": "阿巴嘎旗" }, { "letter": "A", "city": "阿坝藏族羌族自治州" }, { "letter": "A", "city": "阿尔山市" }, { "letter": "A", "city": "阿合奇县" }, { "letter": "A", "city": "阿克塞哈萨克族自治县" }, { "letter": "A", "city": "阿克苏市" }, { "letter": "A", "city": "阿克苏地区" }, { "letter": "A", "city": "阿克陶县" }, { "letter": "A", "city": "阿拉尔市" }, { "letter": "A", "city": "阿拉山口市" }, { "letter": "A", "city": "阿拉善盟" }, { "letter": "A", "city": "阿拉善右旗" }, { "letter": "A", "city": "阿拉善左旗" }, { "letter": "A", "city": "阿勒泰市" }, { "letter": "A", "city": "阿勒泰地区" }, { "letter": "A", "city": "阿里地区" }, { "letter": "A", "city": "阿鲁科尔沁旗" }, { "letter": "A", "city": "安达市" }, { "letter": "A", "city": "安多县" }, { "letter": "A", "city": "安福县" }, { "letter": "A", "city": "昂仁县" }, { "letter": "A", "city": "安国市" }, { "letter": "A", "city": "安化县" }, { "letter": "A", "city": "安吉县" }, { "letter": "A", "city": "安康市" }, { "letter": "A", "city": "安龙县" }, { "letter": "A", "city": "安陆市" }, { "letter": "A", "city": "安宁市" }, { "letter": "A", "city": "安平县" }, { "letter": "A", "city": "安庆市" }, { "letter": "A", "city": "安丘市" }, { "letter": "A", "city": "安仁县" }, { "letter": "A", "city": "安塞区" }, { "letter": "A", "city": "鞍山市" }, { "letter": "A", "city": "安顺市" }, { "letter": "A", "city": "安图县" }, { "letter": "A", "city": "安溪县" }, { "letter": "A", "city": "安乡县" }, { "letter": "A", "city": "安新县" }, { "letter": "A", "city": "安阳市" }, { "letter": "A", "city": "安阳县" }, { "letter": "A", "city": "安义县" }, { "letter": "A", "city": "安远县" }, { "letter": "A", "city": "安岳县" }, { "letter": "A", "city": "安泽县" }, { "letter": "A", "city": "敖汉旗" }, { "letter": "A", "city": "澳门特别行政区" }, { "letter": "A", "city": "阿荣旗" }, { "letter": "A", "city": "阿图什市" }, { "letter": "A", "city": "阿瓦提县" }, { "letter": "B", "city": "巴楚县" }, { "letter": "B", "city": "巴东县" }, { "letter": "B", "city": "白城市" }, { "letter": "B", "city": "拜城县" }, { "letter": "B", "city": "白河县" }, { "letter": "B", "city": "白朗县" }, { "letter": "B", "city": "拜泉县" }, { "letter": "B", "city": "百色市" }, { "letter": "B", "city": "白沙黎族自治县" }, { "letter": "B", "city": "白山市" }, { "letter": "B", "city": "白水县" }, { "letter": "B", "city": "柏乡县" }, { "letter": "B", "city": "白银市" }, { "letter": "B", "city": "白玉县" }, { "letter": "B", "city": "巴里坤哈萨克自治县" }, { "letter": "B", "city": "巴林右旗" }, { "letter": "B", "city": "巴林左旗" }, { "letter": "B", "city": "巴马瑶族自治县" }, { "letter": "B", "city": "班戈县" }, { "letter": "B", "city": "班玛县" }, { "letter": "B", "city": "保德县" }, { "letter": "B", "city": "保定市" }, { "letter": "B", "city": "宝丰县" }, { "letter": "B", "city": "宝鸡市" }, { "letter": "B", "city": "保靖县" }, { "letter": "B", "city": "保康县" }, { "letter": "B", "city": "宝清县" }, { "letter": "B", "city": "保山市" }, { "letter": "B", "city": "保亭黎族苗族自治县" }, { "letter": "B", "city": "包头市" }, { "letter": "B", "city": "宝兴县" }, { "letter": "B", "city": "宝应县" }, { "letter": "B", "city": "巴青县" }, { "letter": "B", "city": "八宿县" }, { "letter": "B", "city": "巴塘县" }, { "letter": "B", "city": "巴彦县" }, { "letter": "B", "city": "巴彦淖尔市" }, { "letter": "B", "city": "巴音郭楞蒙古自治州" }, { "letter": "B", "city": "巴中市" }, { "letter": "B", "city": "霸州市" }, { "letter": "B", "city": "北安市" }, { "letter": "B", "city": "北川羌族自治县" }, { "letter": "B", "city": "北海市" }, { "letter": "B", "city": "北京市" }, { "letter": "B", "city": "北流市" }, { "letter": "B", "city": "北票市" }, { "letter": "B", "city": "北屯市" }, { "letter": "B", "city": "北镇市" }, { "letter": "B", "city": "蚌埠市" }, { "letter": "B", "city": "本溪市" }, { "letter": "B", "city": "本溪满族自治县" }, { "letter": "B", "city": "边坝县" }, { "letter": "B", "city": "毕节市" }, { "letter": "B", "city": "宾川县" }, { "letter": "B", "city": "滨海县" }, { "letter": "B", "city": "宾县" }, { "letter": "B", "city": "彬县" }, { "letter": "B", "city": "宾阳县" }, { "letter": "B", "city": "滨州市" }, { "letter": "B", "city": "比如县" }, { "letter": "B", "city": "泌阳县" }, { "letter": "B", "city": "博爱县" }, { "letter": "B", "city": "博白县" }, { "letter": "B", "city": "博尔塔拉蒙古自治州" }, { "letter": "B", "city": "博湖县" }, { "letter": "B", "city": "博乐市" }, { "letter": "B", "city": "勃利县" }, { "letter": "B", "city": "博罗县" }, { "letter": "B", "city": "波密县" }, { "letter": "B", "city": "泊头市" }, { "letter": "B", "city": "博兴县" }, { "letter": "B", "city": "博野县" }, { "letter": "B", "city": "亳州市" }, { "letter": "B", "city": "布尔津县" }, { "letter": "B", "city": "布拖县" }, { "letter": "C", "city": "苍南县" }, { "letter": "C", "city": "苍梧县" }, { "letter": "C", "city": "苍溪县" }, { "letter": "C", "city": "沧县" }, { "letter": "C", "city": "沧源佤族自治县" }, { "letter": "C", "city": "沧州市" }, { "letter": "C", "city": "曹县" }, { "letter": "C", "city": "册亨县" }, { "letter": "C", "city": "策勒县" }, { "letter": "C", "city": "岑巩县" }, { "letter": "C", "city": "岑溪市" }, { "letter": "C", "city": "察布查尔锡伯自治县" }, { "letter": "C", "city": "察哈尔右翼后旗" }, { "letter": "C", "city": "察哈尔右翼前旗" }, { "letter": "C", "city": "察哈尔右翼中旗" }, { "letter": "C", "city": "柴桑区" }, { "letter": "C", "city": "茶陵县" }, { "letter": "C", "city": "长白朝鲜族自治县" }, { "letter": "C", "city": "长春市" }, { "letter": "C", "city": "长岛县" }, { "letter": "C", "city": "常德市" }, { "letter": "C", "city": "昌都市" }, { "letter": "C", "city": "长丰县" }, { "letter": "C", "city": "长葛市" }, { "letter": "C", "city": "长海县" }, { "letter": "C", "city": "昌吉市" }, { "letter": "C", "city": "昌江黎族自治县" }, { "letter": "C", "city": "昌吉回族自治州" }, { "letter": "C", "city": "昌乐县" }, { "letter": "C", "city": "昌黎县" }, { "letter": "C", "city": "长岭县" }, { "letter": "C", "city": "常宁市" }, { "letter": "C", "city": "长宁县" }, { "letter": "C", "city": "昌宁县" }, { "letter": "C", "city": "长沙市" }, { "letter": "C", "city": "长沙县" }, { "letter": "C", "city": "常山县" }, { "letter": "C", "city": "常熟市" }, { "letter": "C", "city": "长顺县" }, { "letter": "C", "city": "长泰县" }, { "letter": "C", "city": "长汀县" }, { "letter": "C", "city": "昌图县" }, { "letter": "C", "city": "长武县" }, { "letter": "C", "city": "长兴县" }, { "letter": "C", "city": "长阳土家族自治县" }, { "letter": "C", "city": "昌邑市" }, { "letter": "C", "city": "长垣县" }, { "letter": "C", "city": "长治市" }, { "letter": "C", "city": "长治县" }, { "letter": "C", "city": "常州市" }, { "letter": "C", "city": "巢湖市" }, { "letter": "C", "city": "朝阳市" }, { "letter": "C", "city": "朝阳县" }, { "letter": "C", "city": "潮州市" }, { "letter": "C", "city": "察雅县" }, { "letter": "C", "city": "察隅县" }, { "letter": "C", "city": "陈巴尔虎旗" }, { "letter": "C", "city": "成安县" }, { "letter": "C", "city": "城步苗族自治县" }, { "letter": "C", "city": "澄城县" }, { "letter": "C", "city": "承德市" }, { "letter": "C", "city": "承德县" }, { "letter": "C", "city": "成都市" }, { "letter": "C", "city": "称多县" }, { "letter": "C", "city": "城固县" }, { "letter": "C", "city": "澄江县" }, { "letter": "C", "city": "城口县" }, { "letter": "C", "city": "澄迈县" }, { "letter": "C", "city": "成武县" }, { "letter": "C", "city": "成县" }, { "letter": "C", "city": "辰溪县" }, { "letter": "C", "city": "郴州市" }, { "letter": "C", "city": "赤壁市" }, { "letter": "C", "city": "赤城县" }, { "letter": "C", "city": "赤峰市" }, { "letter": "C", "city": "茌平县" }, { "letter": "C", "city": "赤水市" }, { "letter": "C", "city": "池州市" }, { "letter": "C", "city": "崇明区" }, { "letter": "C", "city": "重庆市" }, { "letter": "C", "city": "崇仁县" }, { "letter": "C", "city": "崇信县" }, { "letter": "C", "city": "崇阳县" }, { "letter": "C", "city": "崇义县" }, { "letter": "C", "city": "崇州市" }, { "letter": "C", "city": "崇左市" }, { "letter": "C", "city": "淳安县" }, { "letter": "C", "city": "淳化县" }, { "letter": "C", "city": "楚雄市" }, { "letter": "C", "city": "楚雄彝族自治州" }, { "letter": "C", "city": "滁州市" }, { "letter": "C", "city": "慈利县" }, { "letter": "C", "city": "慈溪市" }, { "letter": "C", "city": "磁县" }, { "letter": "C", "city": "从江县" }, { "letter": "C", "city": "措美县" }, { "letter": "C", "city": "错那县" }, { "letter": "C", "city": "措勤县" }, { "letter": "D", "city": "大安市" }, { "letter": "D", "city": "大柴旦行政委员会" }, { "letter": "D", "city": "大厂回族自治县" }, { "letter": "D", "city": "达尔罕茂明安联合旗" }, { "letter": "D", "city": "大方县" }, { "letter": "D", "city": "大关县" }, { "letter": "D", "city": "大化瑶族自治县" }, { "letter": "D", "city": "大城县" }, { "letter": "D", "city": "岱山县" }, { "letter": "D", "city": "代县" }, { "letter": "D", "city": "达拉特旗" }, { "letter": "D", "city": "大理市" }, { "letter": "D", "city": "大荔县" }, { "letter": "D", "city": "大连市" }, { "letter": "D", "city": "大理白族自治州" }, { "letter": "D", "city": "大名县" }, { "letter": "D", "city": "丹巴县" }, { "letter": "D", "city": "郸城县" }, { "letter": "D", "city": "丹东市" }, { "letter": "D", "city": "丹凤县" }, { "letter": "D", "city": "宕昌县" }, { "letter": "D", "city": "砀山县" }, { "letter": "D", "city": "当涂县" }, { "letter": "D", "city": "当雄县" }, { "letter": "D", "city": "当阳市" }, { "letter": "D", "city": "大宁县" }, { "letter": "D", "city": "丹江口市" }, { "letter": "D", "city": "丹棱县" }, { "letter": "D", "city": "丹阳市" }, { "letter": "D", "city": "丹寨县" }, { "letter": "D", "city": "儋州市" }, { "letter": "D", "city": "稻城县" }, { "letter": "D", "city": "道孚县" }, { "letter": "D", "city": "道县" }, { "letter": "D", "city": "道真仡佬族苗族自治县" }, { "letter": "D", "city": "大埔县" }, { "letter": "D", "city": "大庆市" }, { "letter": "D", "city": "达日县" }, { "letter": "D", "city": "大石桥市" }, { "letter": "D", "city": "大田县" }, { "letter": "D", "city": "大同市" }, { "letter": "D", "city": "大同县" }, { "letter": "D", "city": "大通回族土族自治县" }, { "letter": "D", "city": "大悟县" }, { "letter": "D", "city": "大新县" }, { "letter": "D", "city": "大兴安岭地区" }, { "letter": "D", "city": "大姚县" }, { "letter": "D", "city": "大冶市" }, { "letter": "D", "city": "大邑县" }, { "letter": "D", "city": "大英县" }, { "letter": "D", "city": "大余县" }, { "letter": "D", "city": "达州市" }, { "letter": "D", "city": "大竹县" }, { "letter": "D", "city": "德安县" }, { "letter": "D", "city": "德保县" }, { "letter": "D", "city": "德昌县" }, { "letter": "D", "city": "德格县" }, { "letter": "D", "city": "德宏傣族景颇族自治州" }, { "letter": "D", "city": "德化县" }, { "letter": "D", "city": "德惠市" }, { "letter": "D", "city": "德江县" }, { "letter": "D", "city": "德令哈市" }, { "letter": "D", "city": "登封市" }, { "letter": "D", "city": "磴口县" }, { "letter": "D", "city": "灯塔市" }, { "letter": "D", "city": "邓州市" }, { "letter": "D", "city": "德钦县" }, { "letter": "D", "city": "德清县" }, { "letter": "D", "city": "德庆县" }, { "letter": "D", "city": "得荣县" }, { "letter": "D", "city": "德兴市" }, { "letter": "D", "city": "德阳市" }, { "letter": "D", "city": "德州市" }, { "letter": "D", "city": "垫江县" }, { "letter": "D", "city": "调兵山市" }, { "letter": "D", "city": "迭部县" }, { "letter": "D", "city": "定安县" }, { "letter": "D", "city": "定边县" }, { "letter": "D", "city": "定结县" }, { "letter": "D", "city": "定南县" }, { "letter": "D", "city": "丁青县" }, { "letter": "D", "city": "定日县" }, { "letter": "D", "city": "定西市" }, { "letter": "D", "city": "定襄县" }, { "letter": "D", "city": "定兴县" }, { "letter": "D", "city": "定远县" }, { "letter": "D", "city": "定州市" }, { "letter": "D", "city": "迪庆藏族自治州" }, { "letter": "D", "city": "东安县" }, { "letter": "D", "city": "东阿县" }, { "letter": "D", "city": "东方市" }, { "letter": "D", "city": "东丰县" }, { "letter": "D", "city": "东港市" }, { "letter": "D", "city": "东莞市" }, { "letter": "D", "city": "东光县" }, { "letter": "D", "city": "东海县" }, { "letter": "D", "city": "洞口县" }, { "letter": "D", "city": "东兰县" }, { "letter": "D", "city": "东辽县" }, { "letter": "D", "city": "东明县" }, { "letter": "D", "city": "东宁市" }, { "letter": "D", "city": "东平县" }, { "letter": "D", "city": "东山县" }, { "letter": "D", "city": "东台市" }, { "letter": "D", "city": "东乌珠穆沁旗" }, { "letter": "D", "city": "东乡族自治县" }, { "letter": "D", "city": "东兴市" }, { "letter": "D", "city": "东阳市" }, { "letter": "D", "city": "东营市" }, { "letter": "D", "city": "东源县" }, { "letter": "D", "city": "东至县" }, { "letter": "D", "city": "都安瑶族自治县" }, { "letter": "D", "city": "都昌县" }, { "letter": "D", "city": "杜尔伯特蒙古族自治县" }, { "letter": "D", "city": "都江堰市" }, { "letter": "D", "city": "都兰县" }, { "letter": "D", "city": "敦化市" }, { "letter": "D", "city": "敦煌市" }, { "letter": "D", "city": "多伦县" }, { "letter": "D", "city": "独山县" }, { "letter": "D", "city": "都匀市" }, { "letter": "E", "city": "峨边彝族自治县" }, { "letter": "E", "city": "鄂尔多斯市" }, { "letter": "E", "city": "额尔古纳市" }, { "letter": "E", "city": "额济纳旗" }, { "letter": "E", "city": "鄂伦春自治旗" }, { "letter": "E", "city": "峨眉山市" }, { "letter": "E", "city": "额敏县" }, { "letter": "E", "city": "恩平市" }, { "letter": "E", "city": "恩施市" }, { "letter": "E", "city": "恩施土家族苗族自治州" }, { "letter": "E", "city": "二连浩特市" }, { "letter": "E", "city": "洱源县" }, { "letter": "E", "city": "峨山彝族自治县" }, { "letter": "E", "city": "鄂托克旗" }, { "letter": "E", "city": "鄂托克前旗" }, { "letter": "E", "city": "鄂温克族自治旗" }, { "letter": "E", "city": "鄂州市" }, { "letter": "F", "city": "法库县" }, { "letter": "F", "city": "繁昌县" }, { "letter": "F", "city": "方城县" }, { "letter": "F", "city": "防城港市" }, { "letter": "F", "city": "方山县" }, { "letter": "F", "city": "房县" }, { "letter": "F", "city": "方正县" }, { "letter": "F", "city": "范县" }, { "letter": "F", "city": "繁峙县" }, { "letter": "F", "city": "肥城市" }, { "letter": "F", "city": "肥东县" }, { "letter": "F", "city": "肥西县" }, { "letter": "F", "city": "费县" }, { "letter": "F", "city": "肥乡县" }, { "letter": "F", "city": "丰城市" }, { "letter": "F", "city": "凤城市" }, { "letter": "F", "city": "丰都县" }, { "letter": "F", "city": "凤冈县" }, { "letter": "F", "city": "凤凰县" }, { "letter": "F", "city": "奉节县" }, { "letter": "F", "city": "封开县" }, { "letter": "F", "city": "丰宁满族自治县" }, { "letter": "F", "city": "凤庆县" }, { "letter": "F", "city": "封丘县" }, { "letter": "F", "city": "凤山县" }, { "letter": "F", "city": "丰顺县" }, { "letter": "F", "city": "凤台县" }, { "letter": "F", "city": "丰县" }, { "letter": "F", "city": "凤县" }, { "letter": "F", "city": "凤翔县" }, { "letter": "F", "city": "奉新县" }, { "letter": "F", "city": "凤阳县" }, { "letter": "F", "city": "丰镇市" }, { "letter": "F", "city": "汾西县" }, { "letter": "F", "city": "汾阳市" }, { "letter": "F", "city": "分宜县" }, { "letter": "F", "city": "佛冈县" }, { "letter": "F", "city": "佛坪县" }, { "letter": "F", "city": "佛山市" }, { "letter": "F", "city": "福安市" }, { "letter": "F", "city": "阜城县" }, { "letter": "F", "city": "富川瑶族自治县" }, { "letter": "F", "city": "福鼎市" }, { "letter": "F", "city": "扶风县" }, { "letter": "F", "city": "福贡县" }, { "letter": "F", "city": "扶沟县" }, { "letter": "F", "city": "府谷县" }, { "letter": "F", "city": "福海县" }, { "letter": "F", "city": "富锦市" }, { "letter": "F", "city": "阜康市" }, { "letter": "F", "city": "浮梁县" }, { "letter": "F", "city": "富民县" }, { "letter": "F", "city": "阜南县" }, { "letter": "F", "city": "阜宁县" }, { "letter": "F", "city": "富宁县" }, { "letter": "F", "city": "阜平县" }, { "letter": "F", "city": "富平县" }, { "letter": "F", "city": "福清市" }, { "letter": "F", "city": "福泉市" }, { "letter": "F", "city": "浮山县" }, { "letter": "F", "city": "抚顺市" }, { "letter": "F", "city": "富顺县" }, { "letter": "F", "city": "抚顺县" }, { "letter": "F", "city": "抚松县" }, { "letter": "F", "city": "扶绥县" }, { "letter": "F", "city": "富县" }, { "letter": "F", "city": "阜新市" }, { "letter": "F", "city": "阜新蒙古族自治县" }, { "letter": "F", "city": "阜阳市" }, { "letter": "F", "city": "扶余市" }, { "letter": "F", "city": "富裕县" }, { "letter": "F", "city": "富源县" }, { "letter": "F", "city": "抚远市" }, { "letter": "F", "city": "富蕴县" }, { "letter": "F", "city": "福州市" }, { "letter": "F", "city": "抚州市" }, { "letter": "G", "city": "噶尔县" }, { "letter": "G", "city": "改则县" }, { "letter": "G", "city": "盖州市" }, { "letter": "G", "city": "甘德县" }, { "letter": "G", "city": "岗巴县" }, { "letter": "G", "city": "刚察县" }, { "letter": "G", "city": "甘谷县" }, { "letter": "G", "city": "甘洛县" }, { "letter": "G", "city": "甘南县" }, { "letter": "G", "city": "甘南藏族自治州" }, { "letter": "G", "city": "甘泉县" }, { "letter": "G", "city": "赣州市" }, { "letter": "G", "city": "甘孜县" }, { "letter": "G", "city": "甘孜藏族自治州" }, { "letter": "G", "city": "高安市" }, { "letter": "G", "city": "高碑店市" }, { "letter": "G", "city": "皋兰县" }, { "letter": "G", "city": "高密市" }, { "letter": "G", "city": "高平市" }, { "letter": "G", "city": "高青县" }, { "letter": "G", "city": "高台县" }, { "letter": "G", "city": "高唐县" }, { "letter": "G", "city": "高县" }, { "letter": "G", "city": "高阳县" }, { "letter": "G", "city": "高邑县" }, { "letter": "G", "city": "高邮市" }, { "letter": "G", "city": "高州市" }, { "letter": "G", "city": "格尔木市" }, { "letter": "G", "city": "革吉县" }, { "letter": "G", "city": "个旧市" }, { "letter": "G", "city": "耿马傣族佤族自治县" }, { "letter": "G", "city": "根河市" }, { "letter": "G", "city": "公安县" }, { "letter": "G", "city": "工布江达县" }, { "letter": "G", "city": "恭城瑶族自治县" }, { "letter": "G", "city": "贡嘎县" }, { "letter": "G", "city": "共和县" }, { "letter": "G", "city": "贡觉县" }, { "letter": "G", "city": "巩留县" }, { "letter": "G", "city": "共青城市" }, { "letter": "G", "city": "贡山独龙族怒族自治县" }, { "letter": "G", "city": "珙县" }, { "letter": "G", "city": "巩义市" }, { "letter": "G", "city": "公主岭市" }, { "letter": "G", "city": "固安县" }, { "letter": "G", "city": "广安市" }, { "letter": "G", "city": "广昌县" }, { "letter": "G", "city": "广德县" }, { "letter": "G", "city": "广汉市" }, { "letter": "G", "city": "广河县" }, { "letter": "G", "city": "广灵县" }, { "letter": "G", "city": "广南县" }, { "letter": "G", "city": "广宁县" }, { "letter": "G", "city": "广平县" }, { "letter": "G", "city": "广饶县" }, { "letter": "G", "city": "光山县" }, { "letter": "G", "city": "广水市" }, { "letter": "G", "city": "广元市" }, { "letter": "G", "city": "光泽县" }, { "letter": "G", "city": "广州市" }, { "letter": "G", "city": "广宗县" }, { "letter": "G", "city": "关岭布依族苗族自治县" }, { "letter": "G", "city": "灌南县" }, { "letter": "G", "city": "馆陶县" }, { "letter": "G", "city": "冠县" }, { "letter": "G", "city": "灌阳县" }, { "letter": "G", "city": "灌云县" }, { "letter": "G", "city": "瓜州县" }, { "letter": "G", "city": "谷城县" }, { "letter": "G", "city": "故城县" }, { "letter": "G", "city": "贵德县" }, { "letter": "G", "city": "贵定县" }, { "letter": "G", "city": "桂东县" }, { "letter": "G", "city": "贵港市" }, { "letter": "G", "city": "桂林市" }, { "letter": "G", "city": "贵南县" }, { "letter": "G", "city": "桂平市" }, { "letter": "G", "city": "贵溪市" }, { "letter": "G", "city": "贵阳市" }, { "letter": "G", "city": "桂阳县" }, { "letter": "G", "city": "古交市" }, { "letter": "G", "city": "古浪县" }, { "letter": "G", "city": "古蔺县" }, { "letter": "G", "city": "果洛藏族自治州" }, { "letter": "G", "city": "固始县" }, { "letter": "G", "city": "古田县" }, { "letter": "G", "city": "古县" }, { "letter": "G", "city": "固阳县" }, { "letter": "G", "city": "沽源县" }, { "letter": "G", "city": "固原市" }, { "letter": "G", "city": "古丈县" }, { "letter": "G", "city": "固镇县" }, { "letter": "H", "city": "哈巴河县" }, { "letter": "H", "city": "哈尔滨市" }, { "letter": "H", "city": "海安县" }, { "letter": "H", "city": "海北藏族自治州" }, { "letter": "H", "city": "海城市" }, { "letter": "H", "city": "海东市" }, { "letter": "H", "city": "海丰县" }, { "letter": "H", "city": "海口市" }, { "letter": "H", "city": "海林市" }, { "letter": "H", "city": "海伦市" }, { "letter": "H", "city": "海门市" }, { "letter": "H", "city": "海南藏族自治州" }, { "letter": "H", "city": "海宁市" }, { "letter": "H", "city": "海西蒙古族藏族自治州" }, { "letter": "H", "city": "海兴县" }, { "letter": "H", "city": "海盐县" }, { "letter": "H", "city": "海晏县" }, { "letter": "H", "city": "海阳市" }, { "letter": "H", "city": "海原县" }, { "letter": "H", "city": "哈密市" }, { "letter": "H", "city": "韩城市" }, { "letter": "H", "city": "汉川市" }, { "letter": "H", "city": "邯郸市" }, { "letter": "H", "city": "邯郸县" }, { "letter": "H", "city": "杭锦后旗" }, { "letter": "H", "city": "杭锦旗" }, { "letter": "H", "city": "杭州市" }, { "letter": "H", "city": "含山县" }, { "letter": "H", "city": "汉寿县" }, { "letter": "H", "city": "汉阴县" }, { "letter": "H", "city": "汉源县" }, { "letter": "H", "city": "汉中市" }, { "letter": "H", "city": "鹤壁市" }, { "letter": "H", "city": "和布克赛尔蒙古自治县" }, { "letter": "H", "city": "河池市" }, { "letter": "H", "city": "合肥市" }, { "letter": "H", "city": "鹤峰县" }, { "letter": "H", "city": "鹤岗市" }, { "letter": "H", "city": "黑河市" }, { "letter": "H", "city": "黑山县" }, { "letter": "H", "city": "黑水县" }, { "letter": "H", "city": "河间市" }, { "letter": "H", "city": "合江县" }, { "letter": "H", "city": "河津市" }, { "letter": "H", "city": "和静县" }, { "letter": "H", "city": "河口瑶族自治县" }, { "letter": "H", "city": "贺兰县" }, { "letter": "H", "city": "和林格尔县" }, { "letter": "H", "city": "和龙市" }, { "letter": "H", "city": "河南蒙古族自治县" }, { "letter": "H", "city": "衡东县" }, { "letter": "H", "city": "横峰县" }, { "letter": "H", "city": "衡南县" }, { "letter": "H", "city": "衡山县" }, { "letter": "H", "city": "衡水市" }, { "letter": "H", "city": "横县" }, { "letter": "H", "city": "衡阳市" }, { "letter": "H", "city": "衡阳县" }, { "letter": "H", "city": "和平县" }, { "letter": "H", "city": "合浦县" }, { "letter": "H", "city": "鹤庆县" }, { "letter": "H", "city": "河曲县" }, { "letter": "H", "city": "鹤山市" }, { "letter": "H", "city": "合山市" }, { "letter": "H", "city": "合水县" }, { "letter": "H", "city": "和顺县" }, { "letter": "H", "city": "和硕县" }, { "letter": "H", "city": "和田市" }, { "letter": "H", "city": "和田县" }, { "letter": "H", "city": "和田地区" }, { "letter": "H", "city": "和县" }, { "letter": "H", "city": "合阳县" }, { "letter": "H", "city": "河源市" }, { "letter": "H", "city": "菏泽市" }, { "letter": "H", "city": "赫章县" }, { "letter": "H", "city": "和政县" }, { "letter": "H", "city": "贺州市" }, { "letter": "H", "city": "合作市" }, { "letter": "H", "city": "红安县" }, { "letter": "H", "city": "洪洞县" }, { "letter": "H", "city": "红河县" }, { "letter": "H", "city": "红河哈尼族彝族自治州" }, { "letter": "H", "city": "洪湖市" }, { "letter": "H", "city": "洪江市" }, { "letter": "H", "city": "洪雅县" }, { "letter": "H", "city": "红原县" }, { "letter": "H", "city": "洪泽区" }, { "letter": "H", "city": "侯马市" }, { "letter": "H", "city": "华安县" }, { "letter": "H", "city": "华池县" }, { "letter": "H", "city": "桦川县" }, { "letter": "H", "city": "化德县" }, { "letter": "H", "city": "桦甸市" }, { "letter": "H", "city": "淮安市" }, { "letter": "H", "city": "怀安县" }, { "letter": "H", "city": "淮北市" }, { "letter": "H", "city": "淮滨县" }, { "letter": "H", "city": "怀化市" }, { "letter": "H", "city": "怀集县" }, { "letter": "H", "city": "怀来县" }, { "letter": "H", "city": "淮南市" }, { "letter": "H", "city": "怀宁县" }, { "letter": "H", "city": "怀仁县" }, { "letter": "H", "city": "淮阳县" }, { "letter": "H", "city": "怀远县" }, { "letter": "H", "city": "化隆回族自治县" }, { "letter": "H", "city": "桦南县" }, { "letter": "H", "city": "潢川县" }, { "letter": "H", "city": "黄冈市" }, { "letter": "H", "city": "黄骅市" }, { "letter": "H", "city": "黄陵县" }, { "letter": "H", "city": "黄龙县" }, { "letter": "H", "city": "黄梅县" }, { "letter": "H", "city": "黄南藏族自治州" }, { "letter": "H", "city": "黄平县" }, { "letter": "H", "city": "黄山市" }, { "letter": "H", "city": "黄石市" }, { "letter": "H", "city": "湟源县" }, { "letter": "H", "city": "湟中县" }, { "letter": "H", "city": "华宁县" }, { "letter": "H", "city": "环江毛南族自治县" }, { "letter": "H", "city": "桓仁满族自治县" }, { "letter": "H", "city": "桓台县" }, { "letter": "H", "city": "环县" }, { "letter": "H", "city": "华坪县" }, { "letter": "H", "city": "华容县" }, { "letter": "H", "city": "华亭县" }, { "letter": "H", "city": "滑县" }, { "letter": "H", "city": "华阴市" }, { "letter": "H", "city": "华蓥市" }, { "letter": "H", "city": "花垣县" }, { "letter": "H", "city": "化州市" }, { "letter": "H", "city": "壶关县" }, { "letter": "H", "city": "呼和浩特市" }, { "letter": "H", "city": "惠安县" }, { "letter": "H", "city": "会昌县" }, { "letter": "H", "city": "惠东县" }, { "letter": "H", "city": "会东县" }, { "letter": "H", "city": "惠来县" }, { "letter": "H", "city": "会理县" }, { "letter": "H", "city": "惠民县" }, { "letter": "H", "city": "辉南县" }, { "letter": "H", "city": "睢宁县" }, { "letter": "H", "city": "会宁县" }, { "letter": "H", "city": "惠水县" }, { "letter": "H", "city": "会同县" }, { "letter": "H", "city": "辉县市" }, { "letter": "H", "city": "睢县" }, { "letter": "H", "city": "徽县" }, { "letter": "H", "city": "会泽县" }, { "letter": "H", "city": "惠州市" }, { "letter": "H", "city": "湖口县" }, { "letter": "H", "city": "虎林市" }, { "letter": "H", "city": "葫芦岛市" }, { "letter": "H", "city": "呼伦贝尔市" }, { "letter": "H", "city": "呼玛县" }, { "letter": "H", "city": "珲春市" }, { "letter": "H", "city": "浑源县" }, { "letter": "H", "city": "霍城县" }, { "letter": "H", "city": "霍尔果斯市" }, { "letter": "H", "city": "获嘉县" }, { "letter": "H", "city": "霍林郭勒市" }, { "letter": "H", "city": "霍邱县" }, { "letter": "H", "city": "霍山县" }, { "letter": "H", "city": "霍州市" }, { "letter": "H", "city": "呼图壁县" }, { "letter": "H", "city": "湖州市" }, { "letter": "H", "city": "互助土族自治县" }, { "letter": "J", "city": "加查县" }, { "letter": "J", "city": "嘉禾县" }, { "letter": "J", "city": "夹江县" }, { "letter": "J", "city": "嘉黎县" }, { "letter": "J", "city": "佳木斯市" }, { "letter": "J", "city": "吉安市" }, { "letter": "J", "city": "集安市" }, { "letter": "J", "city": "吉安县" }, { "letter": "J", "city": "建昌县" }, { "letter": "J", "city": "剑川县" }, { "letter": "J", "city": "建德市" }, { "letter": "J", "city": "江安县" }, { "letter": "J", "city": "江城哈尼族彝族自治县" }, { "letter": "J", "city": "江达县" }, { "letter": "J", "city": "剑阁县" }, { "letter": "J", "city": "江华瑶族自治县" }, { "letter": "J", "city": "江口县" }, { "letter": "J", "city": "将乐县" }, { "letter": "J", "city": "江陵县" }, { "letter": "J", "city": "江门市" }, { "letter": "J", "city": "江山市" }, { "letter": "J", "city": "绛县" }, { "letter": "J", "city": "江阴市" }, { "letter": "J", "city": "江永县" }, { "letter": "J", "city": "江油市" }, { "letter": "J", "city": "江孜县" }, { "letter": "J", "city": "剑河县" }, { "letter": "J", "city": "建湖县" }, { "letter": "J", "city": "监利县" }, { "letter": "J", "city": "建宁县" }, { "letter": "J", "city": "建瓯市" }, { "letter": "J", "city": "建平县" }, { "letter": "J", "city": "建始县" }, { "letter": "J", "city": "建水县" }, { "letter": "J", "city": "犍为县" }, { "letter": "J", "city": "简阳市" }, { "letter": "J", "city": "尖扎县" }, { "letter": "J", "city": "交城县" }, { "letter": "J", "city": "蛟河市" }, { "letter": "J", "city": "交口县" }, { "letter": "J", "city": "蕉岭县" }, { "letter": "J", "city": "胶州市" }, { "letter": "J", "city": "焦作市" }, { "letter": "J", "city": "嘉善县" }, { "letter": "J", "city": "伽师县" }, { "letter": "J", "city": "郏县" }, { "letter": "J", "city": "佳县" }, { "letter": "J", "city": "嘉祥县" }, { "letter": "J", "city": "嘉兴市" }, { "letter": "J", "city": "嘉荫县" }, { "letter": "J", "city": "嘉鱼县" }, { "letter": "J", "city": "嘉峪关市" }, { "letter": "J", "city": "鸡东县" }, { "letter": "J", "city": "界首市" }, { "letter": "J", "city": "揭西县" }, { "letter": "J", "city": "介休市" }, { "letter": "J", "city": "揭阳市" }, { "letter": "J", "city": "吉林市" }, { "letter": "J", "city": "吉隆县" }, { "letter": "J", "city": "吉木乃县" }, { "letter": "J", "city": "吉木萨尔县" }, { "letter": "J", "city": "济南市" }, { "letter": "J", "city": "金昌市" }, { "letter": "J", "city": "晋城市" }, { "letter": "J", "city": "金川县" }, { "letter": "J", "city": "靖安县" }, { "letter": "J", "city": "靖边县" }, { "letter": "J", "city": "泾川县" }, { "letter": "J", "city": "旌德县" }, { "letter": "J", "city": "景德镇市" }, { "letter": "J", "city": "景东彝族自治县" }, { "letter": "J", "city": "井冈山市" }, { "letter": "J", "city": "景谷傣族彝族自治县" }, { "letter": "J", "city": "精河县" }, { "letter": "J", "city": "景洪市" }, { "letter": "J", "city": "靖江市" }, { "letter": "J", "city": "静乐县" }, { "letter": "J", "city": "荆门市" }, { "letter": "J", "city": "静宁县" }, { "letter": "J", "city": "景宁畲族自治县" }, { "letter": "J", "city": "京山县" }, { "letter": "J", "city": "景泰县" }, { "letter": "J", "city": "靖西市" }, { "letter": "J", "city": "景县" }, { "letter": "J", "city": "泾县" }, { "letter": "J", "city": "井陉县" }, { "letter": "J", "city": "井研县" }, { "letter": "J", "city": "泾阳县" }, { "letter": "J", "city": "靖宇县" }, { "letter": "J", "city": "靖远县" }, { "letter": "J", "city": "泾源县" }, { "letter": "J", "city": "荆州市" }, { "letter": "J", "city": "靖州苗族侗族自治县" }, { "letter": "J", "city": "金湖县" }, { "letter": "J", "city": "金华市" }, { "letter": "J", "city": "济宁市" }, { "letter": "J", "city": "晋江市" }, { "letter": "J", "city": "金门县" }, { "letter": "J", "city": "锦屏县" }, { "letter": "J", "city": "金平苗族瑶族傣族自治县" }, { "letter": "J", "city": "金沙县" }, { "letter": "J", "city": "津市市" }, { "letter": "J", "city": "金塔县" }, { "letter": "J", "city": "金堂县" }, { "letter": "J", "city": "金溪县" }, { "letter": "J", "city": "进贤县" }, { "letter": "J", "city": "金乡县" }, { "letter": "J", "city": "金秀瑶族自治县" }, { "letter": "J", "city": "金阳县" }, { "letter": "J", "city": "缙云县" }, { "letter": "J", "city": "金寨县" }, { "letter": "J", "city": "晋中市" }, { "letter": "J", "city": "锦州市" }, { "letter": "J", "city": "晋州市" }, { "letter": "J", "city": "稷山县" }, { "letter": "J", "city": "积石山保安族东乡族撒拉族自治县" }, { "letter": "J", "city": "吉首市" }, { "letter": "J", "city": "吉水县" }, { "letter": "J", "city": "九江市" }, { "letter": "J", "city": "九龙县" }, { "letter": "J", "city": "酒泉市" }, { "letter": "J", "city": "九寨沟县" }, { "letter": "J", "city": "久治县" }, { "letter": "J", "city": "鸡西市" }, { "letter": "J", "city": "绩溪县" }, { "letter": "J", "city": "蓟县" }, { "letter": "J", "city": "吉县" }, { "letter": "J", "city": "集贤县" }, { "letter": "J", "city": "济阳县" }, { "letter": "J", "city": "济源市" }, { "letter": "J", "city": "鸡泽县" }, { "letter": "J", "city": "冀州区" }, { "letter": "J", "city": "鄄城县" }, { "letter": "J", "city": "巨鹿县" }, { "letter": "J", "city": "莒南县" }, { "letter": "J", "city": "句容市" }, { "letter": "J", "city": "莒县" }, { "letter": "J", "city": "巨野县" }, { "letter": "K", "city": "开封市" }, { "letter": "K", "city": "开化县" }, { "letter": "K", "city": "开江县" }, { "letter": "K", "city": "凯里市" }, { "letter": "K", "city": "开鲁县" }, { "letter": "K", "city": "开平市" }, { "letter": "K", "city": "开阳县" }, { "letter": "K", "city": "开原市" }, { "letter": "K", "city": "开远市" }, { "letter": "K", "city": "开州区" }, { "letter": "K", "city": "喀喇沁旗" }, { "letter": "K", "city": "喀喇沁左翼蒙古族自治县" }, { "letter": "K", "city": "康保县" }, { "letter": "K", "city": "康定市" }, { "letter": "K", "city": "康乐县" }, { "letter": "K", "city": "康马县" }, { "letter": "K", "city": "康平县" }, { "letter": "K", "city": "康县" }, { "letter": "K", "city": "喀什市" }, { "letter": "K", "city": "喀什地区" }, { "letter": "K", "city": "克东县" }, { "letter": "K", "city": "科尔沁右翼前旗" }, { "letter": "K", "city": "科尔沁右翼中旗" }, { "letter": "K", "city": "科尔沁左翼后旗" }, { "letter": "K", "city": "科尔沁左翼中旗" }, { "letter": "K", "city": "可克达拉市" }, { "letter": "K", "city": "克拉玛依市" }, { "letter": "K", "city": "岢岚县" }, { "letter": "K", "city": "垦利区" }, { "letter": "K", "city": "柯坪县" }, { "letter": "K", "city": "克山县" }, { "letter": "K", "city": "克什克腾旗" }, { "letter": "K", "city": "克孜勒苏柯尔克孜自治州" }, { "letter": "K", "city": "宽城满族自治县" }, { "letter": "K", "city": "宽甸满族自治县" }, { "letter": "K", "city": "库车县" }, { "letter": "K", "city": "库尔勒市" }, { "letter": "K", "city": "奎屯市" }, { "letter": "K", "city": "库伦旗" }, { "letter": "K", "city": "昆明市" }, { "letter": "K", "city": "昆山市" }, { "letter": "K", "city": "昆玉市" }, { "letter": "L", "city": "来安县" }, { "letter": "L", "city": "来宾市" }, { "letter": "L", "city": "来凤县" }, { "letter": "L", "city": "涞水县" }, { "letter": "L", "city": "莱芜市" }, { "letter": "L", "city": "莱西市" }, { "letter": "L", "city": "莱阳市" }, { "letter": "L", "city": "涞源县" }, { "letter": "L", "city": "莱州市" }, { "letter": "L", "city": "澜沧拉祜族自治县" }, { "letter": "L", "city": "岚皋县" }, { "letter": "L", "city": "廊坊市" }, { "letter": "L", "city": "浪卡子县" }, { "letter": "L", "city": "郎溪县" }, { "letter": "L", "city": "朗县" }, { "letter": "L", "city": "阆中市" }, { "letter": "L", "city": "兰考县" }, { "letter": "L", "city": "兰陵县" }, { "letter": "L", "city": "兰坪白族普米族自治县" }, { "letter": "L", "city": "蓝山县" }, { "letter": "L", "city": "蓝田县" }, { "letter": "L", "city": "兰溪市" }, { "letter": "L", "city": "兰西县" }, { "letter": "L", "city": "岚县" }, { "letter": "L", "city": "兰州市" }, { "letter": "L", "city": "老河口市" }, { "letter": "L", "city": "乐陵市" }, { "letter": "L", "city": "乐亭县" }, { "letter": "L", "city": "拉萨市" }, { "letter": "L", "city": "拉孜县" }, { "letter": "L", "city": "乐安县" }, { "letter": "L", "city": "乐昌市" }, { "letter": "L", "city": "乐东黎族自治县" }, { "letter": "L", "city": "雷波县" }, { "letter": "L", "city": "雷山县" }, { "letter": "L", "city": "类乌齐县" }, { "letter": "L", "city": "耒阳市" }, { "letter": "L", "city": "雷州市" }, { "letter": "L", "city": "冷湖行政委员会" }, { "letter": "L", "city": "冷水江市" }, { "letter": "L", "city": "乐平市" }, { "letter": "L", "city": "乐山市" }, { "letter": "L", "city": "乐业县" }, { "letter": "L", "city": "乐至县" }, { "letter": "L", "city": "连城县" }, { "letter": "L", "city": "凉城县" }, { "letter": "L", "city": "两当县" }, { "letter": "L", "city": "梁河县" }, { "letter": "L", "city": "梁山县" }, { "letter": "L", "city": "凉山彝族自治州" }, { "letter": "L", "city": "莲花县" }, { "letter": "L", "city": "连江县" }, { "letter": "L", "city": "廉江市" }, { "letter": "L", "city": "连南瑶族自治县" }, { "letter": "L", "city": "连平县" }, { "letter": "L", "city": "连山壮族瑶族自治县" }, { "letter": "L", "city": "涟水县" }, { "letter": "L", "city": "涟源市" }, { "letter": "L", "city": "连云港市" }, { "letter": "L", "city": "连州市" }, { "letter": "L", "city": "聊城市" }, { "letter": "L", "city": "辽阳市" }, { "letter": "L", "city": "辽阳县" }, { "letter": "L", "city": "辽源市" }, { "letter": "L", "city": "荔波县" }, { "letter": "L", "city": "黎城县" }, { "letter": "L", "city": "利川市" }, { "letter": "L", "city": "黎川县" }, { "letter": "L", "city": "丽江市" }, { "letter": "L", "city": "利津县" }, { "letter": "L", "city": "醴陵市" }, { "letter": "L", "city": "临沧市" }, { "letter": "L", "city": "临城县" }, { "letter": "L", "city": "林甸县" }, { "letter": "L", "city": "临汾市" }, { "letter": "L", "city": "临高县" }, { "letter": "L", "city": "灵宝市" }, { "letter": "L", "city": "灵璧县" }, { "letter": "L", "city": "陵川县" }, { "letter": "L", "city": "灵川县" }, { "letter": "L", "city": "凌海市" }, { "letter": "L", "city": "灵丘县" }, { "letter": "L", "city": "灵山县" }, { "letter": "L", "city": "灵石县" }, { "letter": "L", "city": "灵寿县" }, { "letter": "L", "city": "陵水黎族自治县" }, { "letter": "L", "city": "灵台县" }, { "letter": "L", "city": "灵武市" }, { "letter": "L", "city": "陵县" }, { "letter": "L", "city": "凌源市" }, { "letter": "L", "city": "凌云县" }, { "letter": "L", "city": "临海市" }, { "letter": "L", "city": "临江市" }, { "letter": "L", "city": "林口县" }, { "letter": "L", "city": "临澧县" }, { "letter": "L", "city": "临清市" }, { "letter": "L", "city": "临朐县" }, { "letter": "L", "city": "临泉县" }, { "letter": "L", "city": "临沭县" }, { "letter": "L", "city": "邻水县" }, { "letter": "L", "city": "临潭县" }, { "letter": "L", "city": "临洮县" }, { "letter": "L", "city": "临武县" }, { "letter": "L", "city": "临西县" }, { "letter": "L", "city": "林西县" }, { "letter": "L", "city": "临夏市" }, { "letter": "L", "city": "临夏县" }, { "letter": "L", "city": "临夏回族自治州" }, { "letter": "L", "city": "临县" }, { "letter": "L", "city": "临湘市" }, { "letter": "L", "city": "临沂市" }, { "letter": "L", "city": "临邑县" }, { "letter": "L", "city": "临猗县" }, { "letter": "L", "city": "临颍县" }, { "letter": "L", "city": "麟游县" }, { "letter": "L", "city": "临泽县" }, { "letter": "L", "city": "临漳县" }, { "letter": "L", "city": "林芝市" }, { "letter": "L", "city": "林州市" }, { "letter": "L", "city": "林周县" }, { "letter": "L", "city": "黎平县" }, { "letter": "L", "city": "荔浦县" }, { "letter": "L", "city": "礼泉县" }, { "letter": "L", "city": "梨树县" }, { "letter": "L", "city": "丽水市" }, { "letter": "L", "city": "理塘县" }, { "letter": "L", "city": "六安市" }, { "letter": "L", "city": "留坝县" }, { "letter": "L", "city": "柳城县" }, { "letter": "L", "city": "柳河县" }, { "letter": "L", "city": "柳林县" }, { "letter": "L", "city": "六盘水市" }, { "letter": "L", "city": "浏阳市" }, { "letter": "L", "city": "柳州市" }, { "letter": "L", "city": "澧县" }, { "letter": "L", "city": "蠡县" }, { "letter": "L", "city": "理县" }, { "letter": "L", "city": "礼县" }, { "letter": "L", "city": "利辛县" }, { "letter": "L", "city": "溧阳市" }, { "letter": "L", "city": "隆安县" }, { "letter": "L", "city": "隆昌市" }, { "letter": "L", "city": "龙川县" }, { "letter": "L", "city": "陇川县" }, { "letter": "L", "city": "隆德县" }, { "letter": "L", "city": "龙海市" }, { "letter": "L", "city": "隆化县" }, { "letter": "L", "city": "隆回县" }, { "letter": "L", "city": "龙江县" }, { "letter": "L", "city": "龙井市" }, { "letter": "L", "city": "龙口市" }, { "letter": "L", "city": "龙里县" }, { "letter": "L", "city": "龙陵县" }, { "letter": "L", "city": "隆林各族自治县" }, { "letter": "L", "city": "龙门县" }, { "letter": "L", "city": "龙南县" }, { "letter": "L", "city": "陇南市" }, { "letter": "L", "city": "龙泉市" }, { "letter": "L", "city": "龙山县" }, { "letter": "L", "city": "龙胜各族自治县" }, { "letter": "L", "city": "陇西县" }, { "letter": "L", "city": "陇县" }, { "letter": "L", "city": "龙岩市" }, { "letter": "L", "city": "隆尧县" }, { "letter": "L", "city": "龙游县" }, { "letter": "L", "city": "龙州县" }, { "letter": "L", "city": "隆子县" }, { "letter": "L", "city": "娄底市" }, { "letter": "L", "city": "娄烦县" }, { "letter": "L", "city": "栾川县" }, { "letter": "L", "city": "滦南县" }, { "letter": "L", "city": "滦平县" }, { "letter": "L", "city": "滦县" }, { "letter": "L", "city": "潞城市" }, { "letter": "L", "city": "陆川县" }, { "letter": "L", "city": "鲁甸县" }, { "letter": "L", "city": "泸定县" }, { "letter": "L", "city": "略阳县" }, { "letter": "L", "city": "陆丰市" }, { "letter": "L", "city": "禄丰县" }, { "letter": "L", "city": "陆河县" }, { "letter": "L", "city": "炉霍县" }, { "letter": "L", "city": "庐江县" }, { "letter": "L", "city": "陆良县" }, { "letter": "L", "city": "卢龙县" }, { "letter": "L", "city": "轮台县" }, { "letter": "L", "city": "萝北县" }, { "letter": "L", "city": "罗城仫佬族自治县" }, { "letter": "L", "city": "洛川县" }, { "letter": "L", "city": "罗甸县" }, { "letter": "L", "city": "罗定市" }, { "letter": "L", "city": "漯河市" }, { "letter": "L", "city": "罗江县" }, { "letter": "L", "city": "洛隆县" }, { "letter": "L", "city": "洛南县" }, { "letter": "L", "city": "洛宁县" }, { "letter": "L", "city": "罗平县" }, { "letter": "L", "city": "洛浦县" }, { "letter": "L", "city": "罗山县" }, { "letter": "L", "city": "罗田县" }, { "letter": "L", "city": "洛阳市" }, { "letter": "L", "city": "罗源县" }, { "letter": "L", "city": "洛扎县" }, { "letter": "L", "city": "碌曲县" }, { "letter": "L", "city": "禄劝彝族苗族自治县" }, { "letter": "L", "city": "鲁山县" }, { "letter": "L", "city": "庐山市" }, { "letter": "L", "city": "芦山县" }, { "letter": "L", "city": "卢氏县" }, { "letter": "L", "city": "泸水市" }, { "letter": "L", "city": "芦溪县" }, { "letter": "L", "city": "泸溪县" }, { "letter": "L", "city": "泸西县" }, { "letter": "L", "city": "泸县" }, { "letter": "L", "city": "鹿邑县" }, { "letter": "L", "city": "鹿寨县" }, { "letter": "L", "city": "泸州市" }, { "letter": "L", "city": "绿春县" }, { "letter": "L", "city": "吕梁市" }, { "letter": "M", "city": "马鞍山市" }, { "letter": "M", "city": "马边彝族自治县" }, { "letter": "M", "city": "麻城市" }, { "letter": "M", "city": "玛多县" }, { "letter": "M", "city": "马尔康市" }, { "letter": "M", "city": "马关县" }, { "letter": "M", "city": "麦盖提县" }, { "letter": "M", "city": "麻江县" }, { "letter": "M", "city": "麻栗坡县" }, { "letter": "M", "city": "马龙县" }, { "letter": "M", "city": "玛纳斯县" }, { "letter": "M", "city": "芒康县" }, { "letter": "M", "city": "芒市" }, { "letter": "M", "city": "茫崖行政委员会" }, { "letter": "M", "city": "满洲里市" }, { "letter": "M", "city": "茂名市" }, { "letter": "M", "city": "茂县" }, { "letter": "M", "city": "玛沁县" }, { "letter": "M", "city": "玛曲县" }, { "letter": "M", "city": "马山县" }, { "letter": "M", "city": "麻阳苗族自治县" }, { "letter": "M", "city": "美姑县" }, { "letter": "M", "city": "梅河口市" }, { "letter": "M", "city": "眉山市" }, { "letter": "M", "city": "湄潭县" }, { "letter": "M", "city": "眉县" }, { "letter": "M", "city": "梅州市" }, { "letter": "M", "city": "蒙城县" }, { "letter": "M", "city": "孟村回族自治县" }, { "letter": "M", "city": "勐海县" }, { "letter": "M", "city": "孟津县" }, { "letter": "M", "city": "勐腊县" }, { "letter": "M", "city": "孟连傣族拉祜族佤族自治县" }, { "letter": "M", "city": "蒙山县" }, { "letter": "M", "city": "蒙阴县" }, { "letter": "M", "city": "孟州市" }, { "letter": "M", "city": "蒙自市" }, { "letter": "M", "city": "门源回族自治县" }, { "letter": "M", "city": "渑池县" }, { "letter": "M", "city": "冕宁县" }, { "letter": "M", "city": "勉县" }, { "letter": "M", "city": "绵阳市" }, { "letter": "M", "city": "绵竹市" }, { "letter": "M", "city": "弥渡县" }, { "letter": "M", "city": "弥勒市" }, { "letter": "M", "city": "米林县" }, { "letter": "M", "city": "汨罗市" }, { "letter": "M", "city": "民丰县" }, { "letter": "M", "city": "明光市" }, { "letter": "M", "city": "明水县" }, { "letter": "M", "city": "明溪县" }, { "letter": "M", "city": "民和回族土族自治县" }, { "letter": "M", "city": "闽侯县" }, { "letter": "M", "city": "民乐县" }, { "letter": "M", "city": "民勤县" }, { "letter": "M", "city": "闽清县" }, { "letter": "M", "city": "民权县" }, { "letter": "M", "city": "岷县" }, { "letter": "M", "city": "密山市" }, { "letter": "M", "city": "米易县" }, { "letter": "M", "city": "米脂县" }, { "letter": "M", "city": "漠河县" }, { "letter": "M", "city": "墨江哈尼族自治县" }, { "letter": "M", "city": "莫力达瓦达斡尔族自治旗" }, { "letter": "M", "city": "墨脱县" }, { "letter": "M", "city": "牟定县" }, { "letter": "M", "city": "墨玉县" }, { "letter": "M", "city": "墨竹工卡县" }, { "letter": "M", "city": "沐川县" }, { "letter": "M", "city": "牡丹江市" }, { "letter": "M", "city": "木兰县" }, { "letter": "M", "city": "木垒哈萨克自治县" }, { "letter": "M", "city": "穆棱市" }, { "letter": "M", "city": "木里藏族自治县" }, { "letter": "N", "city": "乃东区" }, { "letter": "N", "city": "奈曼旗" }, { "letter": "N", "city": "南安市" }, { "letter": "N", "city": "南澳县" }, { "letter": "N", "city": "南部县" }, { "letter": "N", "city": "南昌市" }, { "letter": "N", "city": "南昌县" }, { "letter": "N", "city": "南城县" }, { "letter": "N", "city": "南充市" }, { "letter": "N", "city": "南丹县" }, { "letter": "N", "city": "南丰县" }, { "letter": "N", "city": "南宫市" }, { "letter": "N", "city": "囊谦县" }, { "letter": "N", "city": "南和县" }, { "letter": "N", "city": "南华县" }, { "letter": "N", "city": "南江县" }, { "letter": "N", "city": "南涧彝族自治县" }, { "letter": "N", "city": "南京市" }, { "letter": "N", "city": "南靖县" }, { "letter": "N", "city": "南乐县" }, { "letter": "N", "city": "南陵县" }, { "letter": "N", "city": "南木林县" }, { "letter": "N", "city": "南宁市" }, { "letter": "N", "city": "南皮县" }, { "letter": "N", "city": "南平市" }, { "letter": "N", "city": "南沙群岛" }, { "letter": "N", "city": "南通市" }, { "letter": "N", "city": "南县" }, { "letter": "N", "city": "南雄市" }, { "letter": "N", "city": "南阳市" }, { "letter": "N", "city": "南漳县" }, { "letter": "N", "city": "南召县" }, { "letter": "N", "city": "那坡县" }, { "letter": "N", "city": "那曲市" }, { "letter": "N", "city": "那曲县" }, { "letter": "N", "city": "纳雍县" }, { "letter": "N", "city": "讷河市" }, { "letter": "N", "city": "内黄县" }, { "letter": "N", "city": "内江市" }, { "letter": "N", "city": "内丘县" }, { "letter": "N", "city": "内乡县" }, { "letter": "N", "city": "嫩江县" }, { "letter": "N", "city": "聂拉木县" }, { "letter": "N", "city": "聂荣县" }, { "letter": "N", "city": "尼勒克县" }, { "letter": "N", "city": "尼玛县" }, { "letter": "N", "city": "尼木县" }, { "letter": "N", "city": "宁安市" }, { "letter": "N", "city": "宁波市" }, { "letter": "N", "city": "宁城县" }, { "letter": "N", "city": "宁德市" }, { "letter": "N", "city": "宁都县" }, { "letter": "N", "city": "宁洱哈尼族彝族自治县" }, { "letter": "N", "city": "宁国市" }, { "letter": "N", "city": "宁海县" }, { "letter": "N", "city": "宁化县" }, { "letter": "N", "city": "宁晋县" }, { "letter": "N", "city": "宁津县" }, { "letter": "N", "city": "宁蒗彝族自治县" }, { "letter": "N", "city": "宁陵县" }, { "letter": "N", "city": "宁明县" }, { "letter": "N", "city": "宁南县" }, { "letter": "N", "city": "宁强县" }, { "letter": "N", "city": "宁陕县" }, { "letter": "N", "city": "宁武县" }, { "letter": "N", "city": "宁县" }, { "letter": "N", "city": "宁阳县" }, { "letter": "N", "city": "宁远县" }, { "letter": "N", "city": "农安县" }, { "letter": "N", "city": "怒江傈僳族自治州" }, { "letter": "P", "city": "磐安县" }, { "letter": "P", "city": "盘锦市" }, { "letter": "P", "city": "盘山县" }, { "letter": "P", "city": "磐石市" }, { "letter": "P", "city": "盘州市" }, { "letter": "P", "city": "攀枝花市" }, { "letter": "P", "city": "沛县" }, { "letter": "P", "city": "蓬安县" }, { "letter": "P", "city": "蓬莱市" }, { "letter": "P", "city": "彭水苗族土家族自治县" }, { "letter": "P", "city": "蓬溪县" }, { "letter": "P", "city": "彭阳县" }, { "letter": "P", "city": "彭泽县" }, { "letter": "P", "city": "彭州市" }, { "letter": "P", "city": "偏关县" }, { "letter": "P", "city": "屏边苗族自治县" }, { "letter": "P", "city": "平昌县" }, { "letter": "P", "city": "平定县" }, { "letter": "P", "city": "平顶山市" }, { "letter": "P", "city": "平度市" }, { "letter": "P", "city": "平果县" }, { "letter": "P", "city": "平和县" }, { "letter": "P", "city": "平湖市" }, { "letter": "P", "city": "平江县" }, { "letter": "P", "city": "平乐县" }, { "letter": "P", "city": "平利县" }, { "letter": "P", "city": "平凉市" }, { "letter": "P", "city": "平陆县" }, { "letter": "P", "city": "平罗县" }, { "letter": "P", "city": "平南县" }, { "letter": "P", "city": "屏南县" }, { "letter": "P", "city": "平泉市" }, { "letter": "P", "city": "屏山县" }, { "letter": "P", "city": "平山县" }, { "letter": "P", "city": "平顺县" }, { "letter": "P", "city": "平潭县" }, { "letter": "P", "city": "平塘县" }, { "letter": "P", "city": "平武县" }, { "letter": "P", "city": "萍乡市" }, { "letter": "P", "city": "平乡县" }, { "letter": "P", "city": "凭祥市" }, { "letter": "P", "city": "平阳县" }, { "letter": "P", "city": "平遥县" }, { "letter": "P", "city": "平邑县" }, { "letter": "P", "city": "平阴县" }, { "letter": "P", "city": "平舆县" }, { "letter": "P", "city": "平原县" }, { "letter": "P", "city": "平远县" }, { "letter": "P", "city": "皮山县" }, { "letter": "P", "city": "邳州市" }, { "letter": "P", "city": "鄱阳县" }, { "letter": "P", "city": "普安县" }, { "letter": "P", "city": "浦北县" }, { "letter": "P", "city": "浦城县" }, { "letter": "P", "city": "蒲城县" }, { "letter": "P", "city": "普定县" }, { "letter": "P", "city": "普洱市" }, { "letter": "P", "city": "普格县" }, { "letter": "P", "city": "浦江县" }, { "letter": "P", "city": "蒲江县" }, { "letter": "P", "city": "普兰县" }, { "letter": "P", "city": "普宁市" }, { "letter": "P", "city": "莆田市" }, { "letter": "P", "city": "蒲县" }, { "letter": "P", "city": "濮阳市" }, { "letter": "P", "city": "濮阳县" }, { "letter": "Q", "city": "迁安市" }, { "letter": "Q", "city": "乾安县" }, { "letter": "Q", "city": "黔东南苗族侗族自治州" }, { "letter": "Q", "city": "前郭尔罗斯蒙古族自治县" }, { "letter": "Q", "city": "潜江市" }, { "letter": "Q", "city": "黔南布依族苗族自治州" }, { "letter": "Q", "city": "潜山县" }, { "letter": "Q", "city": "黔西县" }, { "letter": "Q", "city": "迁西县" }, { "letter": "Q", "city": "乾县" }, { "letter": "Q", "city": "黔西南布依族苗族自治州" }, { "letter": "Q", "city": "千阳县" }, { "letter": "Q", "city": "巧家县" }, { "letter": "Q", "city": "蕲春县" }, { "letter": "Q", "city": "祁东县" }, { "letter": "Q", "city": "启东市" }, { "letter": "Q", "city": "且末县" }, { "letter": "Q", "city": "齐河县" }, { "letter": "Q", "city": "祁连县" }, { "letter": "Q", "city": "祁门县" }, { "letter": "Q", "city": "秦安县" }, { "letter": "Q", "city": "庆安县" }, { "letter": "Q", "city": "庆城县" }, { "letter": "Q", "city": "青川县" }, { "letter": "Q", "city": "青岛市" }, { "letter": "Q", "city": "清丰县" }, { "letter": "Q", "city": "青冈县" }, { "letter": "Q", "city": "清河县" }, { "letter": "Q", "city": "青河县" }, { "letter": "Q", "city": "清涧县" }, { "letter": "Q", "city": "清流县" }, { "letter": "Q", "city": "晴隆县" }, { "letter": "Q", "city": "青龙满族自治县" }, { "letter": "Q", "city": "青神县" }, { "letter": "Q", "city": "清水县" }, { "letter": "Q", "city": "清水河县" }, { "letter": "Q", "city": "青田县" }, { "letter": "Q", "city": "青铜峡市" }, { "letter": "Q", "city": "青县" }, { "letter": "Q", "city": "清徐县" }, { "letter": "Q", "city": "庆阳市" }, { "letter": "Q", "city": "青阳县" }, { "letter": "Q", "city": "清远市" }, { "letter": "Q", "city": "庆元县" }, { "letter": "Q", "city": "清原满族自治县" }, { "letter": "Q", "city": "庆云县" }, { "letter": "Q", "city": "清镇市" }, { "letter": "Q", "city": "青州市" }, { "letter": "Q", "city": "秦皇岛市" }, { "letter": "Q", "city": "沁水县" }, { "letter": "Q", "city": "沁县" }, { "letter": "Q", "city": "沁阳市" }, { "letter": "Q", "city": "沁源县" }, { "letter": "Q", "city": "钦州市" }, { "letter": "Q", "city": "琼海市" }, { "letter": "Q", "city": "琼结县" }, { "letter": "Q", "city": "邛崃市" }, { "letter": "Q", "city": "琼中黎族苗族自治县" }, { "letter": "Q", "city": "齐齐哈尔市" }, { "letter": "Q", "city": "岐山县" }, { "letter": "Q", "city": "奇台县" }, { "letter": "Q", "city": "七台河市" }, { "letter": "Q", "city": "丘北县" }, { "letter": "Q", "city": "邱县" }, { "letter": "Q", "city": "栖霞市" }, { "letter": "Q", "city": "杞县" }, { "letter": "Q", "city": "祁县" }, { "letter": "Q", "city": "淇县" }, { "letter": "Q", "city": "祁阳县" }, { "letter": "Q", "city": "全椒县" }, { "letter": "Q", "city": "全南县" }, { "letter": "Q", "city": "泉州市" }, { "letter": "Q", "city": "全州县" }, { "letter": "Q", "city": "确山县" }, { "letter": "Q", "city": "曲阜市" }, { "letter": "Q", "city": "曲靖市" }, { "letter": "Q", "city": "曲麻莱县" }, { "letter": "Q", "city": "曲水县" }, { "letter": "Q", "city": "曲松县" }, { "letter": "Q", "city": "曲沃县" }, { "letter": "Q", "city": "渠县" }, { "letter": "Q", "city": "曲阳县" }, { "letter": "Q", "city": "衢州市" }, { "letter": "Q", "city": "曲周县" }, { "letter": "R", "city": "壤塘县" }, { "letter": "R", "city": "饶河县" }, { "letter": "R", "city": "饶平县" }, { "letter": "R", "city": "饶阳县" }, { "letter": "R", "city": "仁布县" }, { "letter": "R", "city": "仁化县" }, { "letter": "R", "city": "仁怀市" }, { "letter": "R", "city": "任丘市" }, { "letter": "R", "city": "仁寿县" }, { "letter": "R", "city": "任县" }, { "letter": "R", "city": "日喀则市" }, { "letter": "R", "city": "日土县" }, { "letter": "R", "city": "日照市" }, { "letter": "R", "city": "融安县" }, { "letter": "R", "city": "荣成市" }, { "letter": "R", "city": "容城县" }, { "letter": "R", "city": "榕江县" }, { "letter": "R", "city": "融水苗族自治县" }, { "letter": "R", "city": "荣县" }, { "letter": "R", "city": "容县" }, { "letter": "R", "city": "汝城县" }, { "letter": "R", "city": "如东县" }, { "letter": "R", "city": "如皋市" }, { "letter": "R", "city": "瑞安市" }, { "letter": "R", "city": "瑞昌市" }, { "letter": "R", "city": "芮城县" }, { "letter": "R", "city": "瑞金市" }, { "letter": "R", "city": "瑞丽市" }, { "letter": "R", "city": "汝南县" }, { "letter": "R", "city": "若尔盖县" }, { "letter": "R", "city": "若羌县" }, { "letter": "R", "city": "乳山市" }, { "letter": "R", "city": "汝阳县" }, { "letter": "R", "city": "乳源瑶族自治县" }, { "letter": "R", "city": "汝州市" }, { "letter": "S", "city": "萨嘎县" }, { "letter": "S", "city": "萨迦县" }, { "letter": "S", "city": "三都水族自治县" }, { "letter": "S", "city": "桑日县" }, { "letter": "S", "city": "桑植县" }, { "letter": "S", "city": "三河市" }, { "letter": "S", "city": "三江侗族自治县" }, { "letter": "S", "city": "三门县" }, { "letter": "S", "city": "三门峡市" }, { "letter": "S", "city": "三明市" }, { "letter": "S", "city": "三沙市" }, { "letter": "S", "city": "三穗县" }, { "letter": "S", "city": "三台县" }, { "letter": "S", "city": "三亚市" }, { "letter": "S", "city": "三原县" }, { "letter": "S", "city": "色达县" }, { "letter": "S", "city": "莎车县" }, { "letter": "S", "city": "沙河市" }, { "letter": "S", "city": "山丹县" }, { "letter": "S", "city": "上蔡县" }, { "letter": "S", "city": "商城县" }, { "letter": "S", "city": "商都县" }, { "letter": "S", "city": "上高县" }, { "letter": "S", "city": "上海市" }, { "letter": "S", "city": "上杭县" }, { "letter": "S", "city": "商河县" }, { "letter": "S", "city": "上栗县" }, { "letter": "S", "city": "上林县" }, { "letter": "S", "city": "商洛市" }, { "letter": "S", "city": "商南县" }, { "letter": "S", "city": "商丘市" }, { "letter": "S", "city": "上饶市" }, { "letter": "S", "city": "上饶县" }, { "letter": "S", "city": "商水县" }, { "letter": "S", "city": "上思县" }, { "letter": "S", "city": "尚义县" }, { "letter": "S", "city": "上犹县" }, { "letter": "S", "city": "尚志市" }, { "letter": "S", "city": "山南市" }, { "letter": "S", "city": "鄯善县" }, { "letter": "S", "city": "汕头市" }, { "letter": "S", "city": "汕尾市" }, { "letter": "S", "city": "单县" }, { "letter": "S", "city": "山阳县" }, { "letter": "S", "city": "山阴县" }, { "letter": "S", "city": "邵东县" }, { "letter": "S", "city": "韶关市" }, { "letter": "S", "city": "韶山市" }, { "letter": "S", "city": "邵武市" }, { "letter": "S", "city": "绍兴市" }, { "letter": "S", "city": "邵阳市" }, { "letter": "S", "city": "邵阳县" }, { "letter": "S", "city": "沙湾县" }, { "letter": "S", "city": "沙县" }, { "letter": "S", "city": "沙雅县" }, { "letter": "S", "city": "沙洋县" }, { "letter": "S", "city": "射洪县" }, { "letter": "S", "city": "神池县" }, { "letter": "S", "city": "嵊泗县" }, { "letter": "S", "city": "嵊州市" }, { "letter": "S", "city": "神木市" }, { "letter": "S", "city": "神农架林区" }, { "letter": "S", "city": "沈丘县" }, { "letter": "S", "city": "莘县" }, { "letter": "S", "city": "沈阳市" }, { "letter": "S", "city": "深泽县" }, { "letter": "S", "city": "申扎县" }, { "letter": "S", "city": "深圳市" }, { "letter": "S", "city": "深州市" }, { "letter": "S", "city": "社旗县" }, { "letter": "S", "city": "涉县" }, { "letter": "S", "city": "歙县" }, { "letter": "S", "city": "射阳县" }, { "letter": "S", "city": "施秉县" }, { "letter": "S", "city": "石城县" }, { "letter": "S", "city": "施甸县" }, { "letter": "S", "city": "什邡市" }, { "letter": "S", "city": "石河子市" }, { "letter": "S", "city": "石家庄市" }, { "letter": "S", "city": "石林彝族自治县" }, { "letter": "S", "city": "石楼县" }, { "letter": "S", "city": "石门县" }, { "letter": "S", "city": "石棉县" }, { "letter": "S", "city": "石屏县" }, { "letter": "S", "city": "石阡县" }, { "letter": "S", "city": "石渠县" }, { "letter": "S", "city": "石泉县" }, { "letter": "S", "city": "石狮市" }, { "letter": "S", "city": "石首市" }, { "letter": "S", "city": "石台县" }, { "letter": "S", "city": "始兴县" }, { "letter": "S", "city": "十堰市" }, { "letter": "S", "city": "石柱土家族自治县" }, { "letter": "S", "city": "师宗县" }, { "letter": "S", "city": "石嘴山市" }, { "letter": "S", "city": "寿光市" }, { "letter": "S", "city": "寿宁县" }, { "letter": "S", "city": "寿县" }, { "letter": "S", "city": "寿阳县" }, { "letter": "S", "city": "双柏县" }, { "letter": "S", "city": "双峰县" }, { "letter": "S", "city": "双河市" }, { "letter": "S", "city": "双湖县" }, { "letter": "S", "city": "双江拉祜族佤族布朗族傣族自治县" }, { "letter": "S", "city": "双辽市" }, { "letter": "S", "city": "双牌县" }, { "letter": "S", "city": "双鸭山市" }, { "letter": "S", "city": "舒城县" }, { "letter": "S", "city": "疏附县" }, { "letter": "S", "city": "水城县" }, { "letter": "S", "city": "水富县" }, { "letter": "S", "city": "舒兰市" }, { "letter": "S", "city": "疏勒县" }, { "letter": "S", "city": "顺昌县" }, { "letter": "S", "city": "顺平县" }, { "letter": "S", "city": "朔州市" }, { "letter": "S", "city": "沭阳县" }, { "letter": "S", "city": "泗洪县" }, { "letter": "S", "city": "四会市" }, { "letter": "S", "city": "思南县" }, { "letter": "S", "city": "四平市" }, { "letter": "S", "city": "泗水县" }, { "letter": "S", "city": "泗县" }, { "letter": "S", "city": "泗阳县" }, { "letter": "S", "city": "四子王旗" }, { "letter": "S", "city": "嵩明县" }, { "letter": "S", "city": "松潘县" }, { "letter": "S", "city": "松桃苗族自治县" }, { "letter": "S", "city": "松溪县" }, { "letter": "S", "city": "嵩县" }, { "letter": "S", "city": "松阳县" }, { "letter": "S", "city": "松原市" }, { "letter": "S", "city": "松滋市" }, { "letter": "S", "city": "肃北蒙古族自治县" }, { "letter": "S", "city": "绥滨县" }, { "letter": "S", "city": "遂昌县" }, { "letter": "S", "city": "遂川县" }, { "letter": "S", "city": "绥德县" }, { "letter": "S", "city": "绥芬河市" }, { "letter": "S", "city": "绥化市" }, { "letter": "S", "city": "绥江县" }, { "letter": "S", "city": "绥棱县" }, { "letter": "S", "city": "遂宁市" }, { "letter": "S", "city": "绥宁县" }, { "letter": "S", "city": "遂平县" }, { "letter": "S", "city": "濉溪县" }, { "letter": "S", "city": "遂溪县" }, { "letter": "S", "city": "随县" }, { "letter": "S", "city": "绥阳县" }, { "letter": "S", "city": "绥中县" }, { "letter": "S", "city": "随州市" }, { "letter": "S", "city": "肃南裕固族自治县" }, { "letter": "S", "city": "肃宁县" }, { "letter": "S", "city": "苏尼特右旗" }, { "letter": "S", "city": "苏尼特左旗" }, { "letter": "S", "city": "孙吴县" }, { "letter": "S", "city": "索县" }, { "letter": "S", "city": "宿迁市" }, { "letter": "S", "city": "宿松县" }, { "letter": "S", "city": "苏州市" }, { "letter": "S", "city": "宿州市" }, { "letter": "T", "city": "塔城市" }, { "letter": "T", "city": "塔城地区" }, { "letter": "T", "city": "塔河县" }, { "letter": "T", "city": "泰安市" }, { "letter": "T", "city": "台安县" }, { "letter": "T", "city": "太白县" }, { "letter": "T", "city": "台北市" }, { "letter": "T", "city": "太仓市" }, { "letter": "T", "city": "太谷县" }, { "letter": "T", "city": "太和县" }, { "letter": "T", "city": "泰和县" }, { "letter": "T", "city": "太湖县" }, { "letter": "T", "city": "台江县" }, { "letter": "T", "city": "太康县" }, { "letter": "T", "city": "泰来县" }, { "letter": "T", "city": "泰宁县" }, { "letter": "T", "city": "太仆寺旗" }, { "letter": "T", "city": "台前县" }, { "letter": "T", "city": "台山市" }, { "letter": "T", "city": "泰顺县" }, { "letter": "T", "city": "泰兴市" }, { "letter": "T", "city": "太原市" }, { "letter": "T", "city": "台州市" }, { "letter": "T", "city": "泰州市" }, { "letter": "T", "city": "郯城县" }, { "letter": "T", "city": "唐河县" }, { "letter": "T", "city": "唐山市" }, { "letter": "T", "city": "唐县" }, { "letter": "T", "city": "汤阴县" }, { "letter": "T", "city": "汤原县" }, { "letter": "T", "city": "桃江县" }, { "letter": "T", "city": "洮南市" }, { "letter": "T", "city": "桃源县" }, { "letter": "T", "city": "塔什库尔干塔吉克自治县" }, { "letter": "T", "city": "特克斯县" }, { "letter": "T", "city": "腾冲市" }, { "letter": "T", "city": "藤县" }, { "letter": "T", "city": "滕州市" }, { "letter": "T", "city": "天长市" }, { "letter": "T", "city": "天等县" }, { "letter": "T", "city": "田东县" }, { "letter": "T", "city": "天峨县" }, { "letter": "T", "city": "天津市" }, { "letter": "T", "city": "天峻县" }, { "letter": "T", "city": "田林县" }, { "letter": "T", "city": "天门市" }, { "letter": "T", "city": "天全县" }, { "letter": "T", "city": "天水市" }, { "letter": "T", "city": "天台县" }, { "letter": "T", "city": "田阳县" }, { "letter": "T", "city": "天镇县" }, { "letter": "T", "city": "天柱县" }, { "letter": "T", "city": "天祝藏族自治县" }, { "letter": "T", "city": "铁力市" }, { "letter": "T", "city": "铁岭市" }, { "letter": "T", "city": "铁岭县" }, { "letter": "T", "city": "铁门关市" }, { "letter": "T", "city": "桐柏县" }, { "letter": "T", "city": "桐城市" }, { "letter": "T", "city": "通城县" }, { "letter": "T", "city": "铜川市" }, { "letter": "T", "city": "通道侗族自治县" }, { "letter": "T", "city": "同德县" }, { "letter": "T", "city": "铜鼓县" }, { "letter": "T", "city": "潼关县" }, { "letter": "T", "city": "通海县" }, { "letter": "T", "city": "通河县" }, { "letter": "T", "city": "通化市" }, { "letter": "T", "city": "通化县" }, { "letter": "T", "city": "同江市" }, { "letter": "T", "city": "通江县" }, { "letter": "T", "city": "通辽市" }, { "letter": "T", "city": "铜陵市" }, { "letter": "T", "city": "铜陵县" }, { "letter": "T", "city": "桐庐县" }, { "letter": "T", "city": "铜仁市" }, { "letter": "T", "city": "同仁县" }, { "letter": "T", "city": "通山县" }, { "letter": "T", "city": "通渭县" }, { "letter": "T", "city": "桐乡市" }, { "letter": "T", "city": "同心县" }, { "letter": "T", "city": "通许县" }, { "letter": "T", "city": "通榆县" }, { "letter": "T", "city": "桐梓县" }, { "letter": "T", "city": "团风县" }, { "letter": "T", "city": "吐鲁番市" }, { "letter": "T", "city": "图们市" }, { "letter": "T", "city": "土默特右旗" }, { "letter": "T", "city": "土默特左旗" }, { "letter": "T", "city": "图木舒克市" }, { "letter": "T", "city": "屯昌县" }, { "letter": "T", "city": "屯留县" }, { "letter": "T", "city": "托克托县" }, { "letter": "T", "city": "托克逊县" }, { "letter": "T", "city": "托里县" }, { "letter": "T", "city": "突泉县" }, { "letter": "W", "city": "瓦房店市" }, { "letter": "W", "city": "万安县" }, { "letter": "W", "city": "旺苍县" }, { "letter": "W", "city": "望都县" }, { "letter": "W", "city": "望江县" }, { "letter": "W", "city": "望奎县" }, { "letter": "W", "city": "望谟县" }, { "letter": "W", "city": "汪清县" }, { "letter": "W", "city": "万年县" }, { "letter": "W", "city": "万宁市" }, { "letter": "W", "city": "万荣县" }, { "letter": "W", "city": "万源市" }, { "letter": "W", "city": "万载县" }, { "letter": "W", "city": "围场满族蒙古族自治县" }, { "letter": "W", "city": "潍坊市" }, { "letter": "W", "city": "威海市" }, { "letter": "W", "city": "卫辉市" }, { "letter": "W", "city": "尉犁县" }, { "letter": "W", "city": "渭南市" }, { "letter": "W", "city": "威宁彝族回族苗族自治县" }, { "letter": "W", "city": "微山县" }, { "letter": "W", "city": "巍山彝族回族自治县" }, { "letter": "W", "city": "尉氏县" }, { "letter": "W", "city": "魏县" }, { "letter": "W", "city": "威县" }, { "letter": "W", "city": "维西傈僳族自治县" }, { "letter": "W", "city": "威信县" }, { "letter": "W", "city": "威远县" }, { "letter": "W", "city": "渭源县" }, { "letter": "W", "city": "文安县" }, { "letter": "W", "city": "文昌市" }, { "letter": "W", "city": "文成县" }, { "letter": "W", "city": "汶川县" }, { "letter": "W", "city": "瓮安县" }, { "letter": "W", "city": "翁牛特旗" }, { "letter": "W", "city": "翁源县" }, { "letter": "W", "city": "温岭市" }, { "letter": "W", "city": "温泉县" }, { "letter": "W", "city": "文山市" }, { "letter": "W", "city": "汶上县" }, { "letter": "W", "city": "文山壮族苗族自治州" }, { "letter": "W", "city": "文水县" }, { "letter": "W", "city": "温宿县" }, { "letter": "W", "city": "闻喜县" }, { "letter": "W", "city": "温县" }, { "letter": "W", "city": "文县" }, { "letter": "W", "city": "温州市" }, { "letter": "W", "city": "涡阳县" }, { "letter": "W", "city": "武安市" }, { "letter": "W", "city": "吴堡县" }, { "letter": "W", "city": "五常市" }, { "letter": "W", "city": "武城县" }, { "letter": "W", "city": "吴川市" }, { "letter": "W", "city": "武川县" }, { "letter": "W", "city": "务川仡佬族苗族自治县" }, { "letter": "W", "city": "五大连池市" }, { "letter": "W", "city": "无棣县" }, { "letter": "W", "city": "武定县" }, { "letter": "W", "city": "五峰土家族自治县" }, { "letter": "W", "city": "武冈市" }, { "letter": "W", "city": "舞钢市" }, { "letter": "W", "city": "武功县" }, { "letter": "W", "city": "乌海市" }, { "letter": "W", "city": "武汉市" }, { "letter": "W", "city": "五河县" }, { "letter": "W", "city": "芜湖市" }, { "letter": "W", "city": "芜湖县" }, { "letter": "W", "city": "五华县" }, { "letter": "W", "city": "无极县" }, { "letter": "W", "city": "五家渠市" }, { "letter": "W", "city": "乌兰县" }, { "letter": "W", "city": "乌兰察布市" }, { "letter": "W", "city": "乌兰浩特市" }, { "letter": "W", "city": "乌拉特后旗" }, { "letter": "W", "city": "乌拉特前旗" }, { "letter": "W", "city": "乌拉特中旗" }, { "letter": "W", "city": "五莲县" }, { "letter": "W", "city": "乌鲁木齐市" }, { "letter": "W", "city": "乌鲁木齐县" }, { "letter": "W", "city": "武宁县" }, { "letter": "W", "city": "武平县" }, { "letter": "W", "city": "吴起县" }, { "letter": "W", "city": "乌恰县" }, { "letter": "W", "city": "武强县" }, { "letter": "W", "city": "吴桥县" }, { "letter": "W", "city": "巫山县" }, { "letter": "W", "city": "武山县" }, { "letter": "W", "city": "武胜县" }, { "letter": "W", "city": "乌审旗" }, { "letter": "W", "city": "乌什县" }, { "letter": "W", "city": "乌苏市" }, { "letter": "W", "city": "五台县" }, { "letter": "W", "city": "无为县" }, { "letter": "W", "city": "武威市" }, { "letter": "W", "city": "无锡市" }, { "letter": "W", "city": "巫溪县" }, { "letter": "W", "city": "武乡县" }, { "letter": "W", "city": "武宣县" }, { "letter": "W", "city": "武穴市" }, { "letter": "W", "city": "舞阳县" }, { "letter": "W", "city": "武义县" }, { "letter": "W", "city": "武邑县" }, { "letter": "W", "city": "武夷山市" }, { "letter": "W", "city": "五原县" }, { "letter": "W", "city": "婺源县" }, { "letter": "W", "city": "五寨县" }, { "letter": "W", "city": "武陟县" }, { "letter": "W", "city": "五指山市" }, { "letter": "W", "city": "吴忠市" }, { "letter": "W", "city": "梧州市" }, { "letter": "X", "city": "夏河县" }, { "letter": "X", "city": "峡江县" }, { "letter": "X", "city": "夏津县" }, { "letter": "X", "city": "厦门市" }, { "letter": "X", "city": "西安市" }, { "letter": "X", "city": "咸丰县" }, { "letter": "X", "city": "项城市" }, { "letter": "X", "city": "襄城县" }, { "letter": "X", "city": "乡城县" }, { "letter": "X", "city": "襄汾县" }, { "letter": "X", "city": "香港特别行政区" }, { "letter": "X", "city": "香格里拉市" }, { "letter": "X", "city": "香河县" }, { "letter": "X", "city": "镶黄旗" }, { "letter": "X", "city": "乡宁县" }, { "letter": "X", "city": "象山县" }, { "letter": "X", "city": "响水县" }, { "letter": "X", "city": "湘潭市" }, { "letter": "X", "city": "湘潭县" }, { "letter": "X", "city": "湘乡市" }, { "letter": "X", "city": "湘西土家族苗族自治州" }, { "letter": "X", "city": "襄阳市" }, { "letter": "X", "city": "湘阴县" }, { "letter": "X", "city": "襄垣县" }, { "letter": "X", "city": "祥云县" }, { "letter": "X", "city": "象州县" }, { "letter": "X", "city": "仙居县" }, { "letter": "X", "city": "咸宁市" }, { "letter": "X", "city": "仙桃市" }, { "letter": "X", "city": "献县" }, { "letter": "X", "city": "咸阳市" }, { "letter": "X", "city": "仙游县" }, { "letter": "X", "city": "孝昌县" }, { "letter": "X", "city": "孝感市" }, { "letter": "X", "city": "小金县" }, { "letter": "X", "city": "萧县" }, { "letter": "X", "city": "孝义市" }, { "letter": "X", "city": "霞浦县" }, { "letter": "X", "city": "夏县" }, { "letter": "X", "city": "夏邑县" }, { "letter": "X", "city": "西昌市" }, { "letter": "X", "city": "西充县" }, { "letter": "X", "city": "西畴县" }, { "letter": "X", "city": "淅川县" }, { "letter": "X", "city": "喜德县" }, { "letter": "X", "city": "谢通门县" }, { "letter": "X", "city": "西丰县" }, { "letter": "X", "city": "息烽县" }, { "letter": "X", "city": "西和县" }, { "letter": "X", "city": "西华县" }, { "letter": "X", "city": "西吉县" }, { "letter": "X", "city": "西林县" }, { "letter": "X", "city": "锡林郭勒盟" }, { "letter": "X", "city": "锡林浩特市" }, { "letter": "X", "city": "西盟佤族自治县" }, { "letter": "X", "city": "新安县" }, { "letter": "X", "city": "新巴尔虎右旗" }, { "letter": "X", "city": "新巴尔虎左旗" }, { "letter": "X", "city": "新宾满族自治县" }, { "letter": "X", "city": "新蔡县" }, { "letter": "X", "city": "新昌县" }, { "letter": "X", "city": "忻城县" }, { "letter": "X", "city": "信丰县" }, { "letter": "X", "city": "新丰县" }, { "letter": "X", "city": "兴安盟" }, { "letter": "X", "city": "新干县" }, { "letter": "X", "city": "兴安县" }, { "letter": "X", "city": "兴城市" }, { "letter": "X", "city": "兴国县" }, { "letter": "X", "city": "兴海县" }, { "letter": "X", "city": "兴和县" }, { "letter": "X", "city": "兴化市" }, { "letter": "X", "city": "兴隆县" }, { "letter": "X", "city": "兴宁市" }, { "letter": "X", "city": "兴平市" }, { "letter": "X", "city": "兴仁县" }, { "letter": "X", "city": "兴山县" }, { "letter": "X", "city": "邢台市" }, { "letter": "X", "city": "邢台县" }, { "letter": "X", "city": "行唐县" }, { "letter": "X", "city": "兴文县" }, { "letter": "X", "city": "兴县" }, { "letter": "X", "city": "荥阳市" }, { "letter": "X", "city": "兴业县" }, { "letter": "X", "city": "兴义市" }, { "letter": "X", "city": "新河县" }, { "letter": "X", "city": "新和县" }, { "letter": "X", "city": "新化县" }, { "letter": "X", "city": "新晃侗族自治县" }, { "letter": "X", "city": "西宁市" }, { "letter": "X", "city": "辛集市" }, { "letter": "X", "city": "新绛县" }, { "letter": "X", "city": "新津县" }, { "letter": "X", "city": "新乐市" }, { "letter": "X", "city": "新龙县" }, { "letter": "X", "city": "新密市" }, { "letter": "X", "city": "新民市" }, { "letter": "X", "city": "新宁县" }, { "letter": "X", "city": "新平彝族傣族自治县" }, { "letter": "X", "city": "新邵县" }, { "letter": "X", "city": "新泰市" }, { "letter": "X", "city": "新田县" }, { "letter": "X", "city": "新县" }, { "letter": "X", "city": "新乡市" }, { "letter": "X", "city": "新乡县" }, { "letter": "X", "city": "新兴县" }, { "letter": "X", "city": "信阳市" }, { "letter": "X", "city": "新野县" }, { "letter": "X", "city": "信宜市" }, { "letter": "X", "city": "新沂市" }, { "letter": "X", "city": "新余市" }, { "letter": "X", "city": "新源县" }, { "letter": "X", "city": "新郑市" }, { "letter": "X", "city": "忻州市" }, { "letter": "X", "city": "雄县" }, { "letter": "X", "city": "西平县" }, { "letter": "X", "city": "西沙群岛" }, { "letter": "X", "city": "西双版纳傣族自治州" }, { "letter": "X", "city": "浠水县" }, { "letter": "X", "city": "习水县" }, { "letter": "X", "city": "休宁县" }, { "letter": "X", "city": "秀山土家族苗族自治县" }, { "letter": "X", "city": "修水县" }, { "letter": "X", "city": "修文县" }, { "letter": "X", "city": "修武县" }, { "letter": "X", "city": "岫岩满族自治县" }, { "letter": "X", "city": "西乌珠穆沁旗" }, { "letter": "X", "city": "西峡县" }, { "letter": "X", "city": "息县" }, { "letter": "X", "city": "隰县" }, { "letter": "X", "city": "西乡县" }, { "letter": "X", "city": "昔阳县" }, { "letter": "X", "city": "宣城市" }, { "letter": "X", "city": "宣恩县" }, { "letter": "X", "city": "宣汉县" }, { "letter": "X", "city": "宣化县" }, { "letter": "X", "city": "宣威市" }, { "letter": "X", "city": "许昌市" }, { "letter": "X", "city": "寻甸回族彝族自治县" }, { "letter": "X", "city": "循化撒拉族自治县" }, { "letter": "X", "city": "逊克县" }, { "letter": "X", "city": "寻乌县" }, { "letter": "X", "city": "浚县" }, { "letter": "X", "city": "旬阳县" }, { "letter": "X", "city": "旬邑县" }, { "letter": "X", "city": "溆浦县" }, { "letter": "X", "city": "徐闻县" }, { "letter": "X", "city": "盱眙县" }, { "letter": "X", "city": "叙永县" }, { "letter": "X", "city": "徐州市" }, { "letter": "Y", "city": "雅安市" }, { "letter": "Y", "city": "亚东县" }, { "letter": "Y", "city": "雅江县" }, { "letter": "Y", "city": "牙克石市" }, { "letter": "Y", "city": "延安市" }, { "letter": "Y", "city": "延边朝鲜族自治州" }, { "letter": "Y", "city": "盐边县" }, { "letter": "Y", "city": "延长县" }, { "letter": "Y", "city": "盐城市" }, { "letter": "Y", "city": "盐池县" }, { "letter": "Y", "city": "延川县" }, { "letter": "Y", "city": "漾濞彝族自治县" }, { "letter": "Y", "city": "阳城县" }, { "letter": "Y", "city": "阳春市" }, { "letter": "Y", "city": "阳高县" }, { "letter": "Y", "city": "阳谷县" }, { "letter": "Y", "city": "阳江市" }, { "letter": "Y", "city": "阳曲县" }, { "letter": "Y", "city": "阳泉市" }, { "letter": "Y", "city": "阳山县" }, { "letter": "Y", "city": "阳朔县" }, { "letter": "Y", "city": "阳西县" }, { "letter": "Y", "city": "洋县" }, { "letter": "Y", "city": "阳新县" }, { "letter": "Y", "city": "阳信县" }, { "letter": "Y", "city": "阳原县" }, { "letter": "Y", "city": "扬中市" }, { "letter": "Y", "city": "扬州市" }, { "letter": "Y", "city": "沿河土家族自治县" }, { "letter": "Y", "city": "延吉市" }, { "letter": "Y", "city": "延津县" }, { "letter": "Y", "city": "盐津县" }, { "letter": "Y", "city": "鄢陵县" }, { "letter": "Y", "city": "炎陵县" }, { "letter": "Y", "city": "焉耆回族自治县" }, { "letter": "Y", "city": "盐山县" }, { "letter": "Y", "city": "铅山县" }, { "letter": "Y", "city": "砚山县" }, { "letter": "Y", "city": "偃师市" }, { "letter": "Y", "city": "延寿县" }, { "letter": "Y", "city": "烟台市" }, { "letter": "Y", "city": "盐亭县" }, { "letter": "Y", "city": "盐源县" }, { "letter": "Y", "city": "姚安县" }, { "letter": "Y", "city": "叶城县" }, { "letter": "Y", "city": "叶县" }, { "letter": "Y", "city": "依安县" }, { "letter": "Y", "city": "宜宾市" }, { "letter": "Y", "city": "宜宾县" }, { "letter": "Y", "city": "宜昌市" }, { "letter": "Y", "city": "宜城市" }, { "letter": "Y", "city": "翼城县" }, { "letter": "Y", "city": "伊川县" }, { "letter": "Y", "city": "宜川县" }, { "letter": "Y", "city": "宜春市" }, { "letter": "Y", "city": "伊春市" }, { "letter": "Y", "city": "宜都市" }, { "letter": "Y", "city": "宜丰县" }, { "letter": "Y", "city": "宜黄县" }, { "letter": "Y", "city": "伊金霍洛旗" }, { "letter": "Y", "city": "宜君县" }, { "letter": "Y", "city": "依兰县" }, { "letter": "Y", "city": "宜良县" }, { "letter": "Y", "city": "彝良县" }, { "letter": "Y", "city": "伊犁哈萨克自治州" }, { "letter": "Y", "city": "仪陇县" }, { "letter": "Y", "city": "义马市" }, { "letter": "Y", "city": "易门县" }, { "letter": "Y", "city": "沂南县" }, { "letter": "Y", "city": "银川市" }, { "letter": "Y", "city": "应城市" }, { "letter": "Y", "city": "英德市" }, { "letter": "Y", "city": "盈江县" }, { "letter": "Y", "city": "荥经县" }, { "letter": "Y", "city": "英吉沙县" }, { "letter": "Y", "city": "营口市" }, { "letter": "Y", "city": "营山县" }, { "letter": "Y", "city": "英山县" }, { "letter": "Y", "city": "颍上县" }, { "letter": "Y", "city": "鹰潭市" }, { "letter": "Y", "city": "应县" }, { "letter": "Y", "city": "伊宁市" }, { "letter": "Y", "city": "伊宁县" }, { "letter": "Y", "city": "印江土家族苗族自治县" }, { "letter": "Y", "city": "沂水县" }, { "letter": "Y", "city": "伊通满族自治县" }, { "letter": "Y", "city": "义乌市" }, { "letter": "Y", "city": "伊吾县" }, { "letter": "Y", "city": "易县" }, { "letter": "Y", "city": "义县" }, { "letter": "Y", "city": "黟县" }, { "letter": "Y", "city": "宜兴市" }, { "letter": "Y", "city": "益阳市" }, { "letter": "Y", "city": "弋阳县" }, { "letter": "Y", "city": "宜阳县" }, { "letter": "Y", "city": "沂源县" }, { "letter": "Y", "city": "宜章县" }, { "letter": "Y", "city": "仪征市" }, { "letter": "Y", "city": "永安市" }, { "letter": "Y", "city": "永昌县" }, { "letter": "Y", "city": "永城市" }, { "letter": "Y", "city": "永春县" }, { "letter": "Y", "city": "永德县" }, { "letter": "Y", "city": "永登县" }, { "letter": "Y", "city": "永丰县" }, { "letter": "Y", "city": "永福县" }, { "letter": "Y", "city": "永和县" }, { "letter": "Y", "city": "永济市" }, { "letter": "Y", "city": "永吉县" }, { "letter": "Y", "city": "永嘉县" }, { "letter": "Y", "city": "永靖县" }, { "letter": "Y", "city": "永康市" }, { "letter": "Y", "city": "永年县" }, { "letter": "Y", "city": "永宁县" }, { "letter": "Y", "city": "永平县" }, { "letter": "Y", "city": "永清县" }, { "letter": "Y", "city": "永仁县" }, { "letter": "Y", "city": "永善县" }, { "letter": "Y", "city": "永胜县" }, { "letter": "Y", "city": "永寿县" }, { "letter": "Y", "city": "永顺县" }, { "letter": "Y", "city": "永泰县" }, { "letter": "Y", "city": "永新县" }, { "letter": "Y", "city": "永兴县" }, { "letter": "Y", "city": "永修县" }, { "letter": "Y", "city": "永州市" }, { "letter": "Y", "city": "尤溪县" }, { "letter": "Y", "city": "攸县" }, { "letter": "Y", "city": "酉阳土家族苗族自治县" }, { "letter": "Y", "city": "友谊县" }, { "letter": "Y", "city": "右玉县" }, { "letter": "Y", "city": "远安县" }, { "letter": "Y", "city": "沅江市" }, { "letter": "Y", "city": "元江哈尼族彝族傣族自治县" }, { "letter": "Y", "city": "沅陵县" }, { "letter": "Y", "city": "元谋县" }, { "letter": "Y", "city": "原平市" }, { "letter": "Y", "city": "垣曲县" }, { "letter": "Y", "city": "元氏县" }, { "letter": "Y", "city": "原阳县" }, { "letter": "Y", "city": "元阳县" }, { "letter": "Y", "city": "虞城县" }, { "letter": "Y", "city": "禹城市" }, { "letter": "Y", "city": "于都县" }, { "letter": "Y", "city": "岳池县" }, { "letter": "Y", "city": "岳普湖县" }, { "letter": "Y", "city": "乐清市" }, { "letter": "Y", "city": "岳西县" }, { "letter": "Y", "city": "越西县" }, { "letter": "Y", "city": "岳阳市" }, { "letter": "Y", "city": "岳阳县" }, { "letter": "Y", "city": "余干县" }, { "letter": "Y", "city": "玉环市" }, { "letter": "Y", "city": "余江县" }, { "letter": "Y", "city": "玉林市" }, { "letter": "Y", "city": "榆林市" }, { "letter": "Y", "city": "玉龙纳西族自治县" }, { "letter": "Y", "city": "玉门市" }, { "letter": "Y", "city": "裕民县" }, { "letter": "Y", "city": "郁南县" }, { "letter": "Y", "city": "运城市" }, { "letter": "Y", "city": "郓城县" }, { "letter": "Y", "city": "云浮市" }, { "letter": "Y", "city": "云和县" }, { "letter": "Y", "city": "筠连县" }, { "letter": "Y", "city": "云龙县" }, { "letter": "Y", "city": "云梦县" }, { "letter": "Y", "city": "郧西县" }, { "letter": "Y", "city": "勋县" }, { "letter": "Y", "city": "云县" }, { "letter": "Y", "city": "云霄县" }, { "letter": "Y", "city": "云阳县" }, { "letter": "Y", "city": "玉屏侗族自治县" }, { "letter": "Y", "city": "余庆县" }, { "letter": "Y", "city": "玉山县" }, { "letter": "Y", "city": "榆社县" }, { "letter": "Y", "city": "榆树市" }, { "letter": "Y", "city": "玉树市" }, { "letter": "Y", "city": "玉树藏族自治州" }, { "letter": "Y", "city": "鱼台县" }, { "letter": "Y", "city": "玉田县" }, { "letter": "Y", "city": "于田县" }, { "letter": "Y", "city": "玉溪市" }, { "letter": "Y", "city": "蔚县" }, { "letter": "Y", "city": "盂县" }, { "letter": "Y", "city": "余姚市" }, { "letter": "Y", "city": "榆中县" }, { "letter": "Y", "city": "禹州市" }, { "letter": "Z", "city": "杂多县" }, { "letter": "Z", "city": "赞皇县" }, { "letter": "Z", "city": "枣强县" }, { "letter": "Z", "city": "枣阳市" }, { "letter": "Z", "city": "枣庄市" }, { "letter": "Z", "city": "泽库县" }, { "letter": "Z", "city": "泽普县" }, { "letter": "Z", "city": "泽州县" }, { "letter": "Z", "city": "札达县" }, { "letter": "Z", "city": "扎赉特旗" }, { "letter": "Z", "city": "扎兰屯市" }, { "letter": "Z", "city": "扎鲁特旗" }, { "letter": "Z", "city": "扎囊县" }, { "letter": "Z", "city": "张北县" }, { "letter": "Z", "city": "张家川回族自治县" }, { "letter": "Z", "city": "张家港市" }, { "letter": "Z", "city": "张家界市" }, { "letter": "Z", "city": "张家口市" }, { "letter": "Z", "city": "漳平市" }, { "letter": "Z", "city": "漳浦县" }, { "letter": "Z", "city": "樟树市" }, { "letter": "Z", "city": "彰武县" }, { "letter": "Z", "city": "漳县" }, { "letter": "Z", "city": "张掖市" }, { "letter": "Z", "city": "漳州市" }, { "letter": "Z", "city": "长子县" }, { "letter": "Z", "city": "湛江市" }, { "letter": "Z", "city": "诏安县" }, { "letter": "Z", "city": "肇东市" }, { "letter": "Z", "city": "昭觉县" }, { "letter": "Z", "city": "昭平县" }, { "letter": "Z", "city": "肇庆市" }, { "letter": "Z", "city": "昭苏县" }, { "letter": "Z", "city": "昭通市" }, { "letter": "Z", "city": "赵县" }, { "letter": "Z", "city": "招远市" }, { "letter": "Z", "city": "肇源县" }, { "letter": "Z", "city": "肇州县" }, { "letter": "Z", "city": "柘城县" }, { "letter": "Z", "city": "镇安县" }, { "letter": "Z", "city": "镇巴县" }, { "letter": "Z", "city": "贞丰县" }, { "letter": "Z", "city": "正安县" }, { "letter": "Z", "city": "正定县" }, { "letter": "Z", "city": "政和县" }, { "letter": "Z", "city": "正蓝旗" }, { "letter": "Z", "city": "正宁县" }, { "letter": "Z", "city": "正镶白旗" }, { "letter": "Z", "city": "正阳县" }, { "letter": "Z", "city": "郑州市" }, { "letter": "Z", "city": "镇江市" }, { "letter": "Z", "city": "镇康县" }, { "letter": "Z", "city": "镇赉县" }, { "letter": "Z", "city": "镇宁布依族苗族自治县" }, { "letter": "Z", "city": "镇平县" }, { "letter": "Z", "city": "镇坪县" }, { "letter": "Z", "city": "镇雄县" }, { "letter": "Z", "city": "镇远县" }, { "letter": "Z", "city": "镇原县" }, { "letter": "Z", "city": "镇沅彝族哈尼族拉祜族自治县" }, { "letter": "Z", "city": "柘荣县" }, { "letter": "Z", "city": "志丹县" }, { "letter": "Z", "city": "治多县" }, { "letter": "Z", "city": "枝江市" }, { "letter": "Z", "city": "芷江侗族自治县" }, { "letter": "Z", "city": "织金县" }, { "letter": "Z", "city": "仲巴县" }, { "letter": "Z", "city": "中方县" }, { "letter": "Z", "city": "中江县" }, { "letter": "Z", "city": "中牟县" }, { "letter": "Z", "city": "中宁县" }, { "letter": "Z", "city": "中山市" }, { "letter": "Z", "city": "钟山县" }, { "letter": "Z", "city": "中沙群岛的岛礁及其海域" }, { "letter": "Z", "city": "中卫市" }, { "letter": "Z", "city": "忠县" }, { "letter": "Z", "city": "钟祥市" }, { "letter": "Z", "city": "中阳县" }, { "letter": "Z", "city": "周口市" }, { "letter": "Z", "city": "周宁县" }, { "letter": "Z", "city": "舟曲县" }, { "letter": "Z", "city": "舟山市" }, { "letter": "Z", "city": "周至县" }, { "letter": "Z", "city": "庄河市" }, { "letter": "Z", "city": "庄浪县" }, { "letter": "Z", "city": "诸城市" }, { "letter": "Z", "city": "珠海市" }, { "letter": "Z", "city": "诸暨市" }, { "letter": "Z", "city": "驻马店市" }, { "letter": "Z", "city": "准格尔旗" }, { "letter": "Z", "city": "涿鹿县" }, { "letter": "Z", "city": "卓尼县" }, { "letter": "Z", "city": "涿州市" }, { "letter": "Z", "city": "卓资县" }, { "letter": "Z", "city": "竹山县" }, { "letter": "Z", "city": "竹溪县" }, { "letter": "Z", "city": "株洲市" }, { "letter": "Z", "city": "株洲县" }, { "letter": "Z", "city": "淄博市" }, { "letter": "Z", "city": "子长县" }, { "letter": "Z", "city": "自贡市" }, { "letter": "Z", "city": "秭归县" }, { "letter": "Z", "city": "紫金县" }, { "letter": "Z", "city": "梓潼县" }, { "letter": "Z", "city": "资溪县" }, { "letter": "Z", "city": "资兴市" }, { "letter": "Z", "city": "资阳市" }, { "letter": "Z", "city": "紫阳县" }, { "letter": "Z", "city": "资源县" }, { "letter": "Z", "city": "紫云苗族布依族自治县" }, { "letter": "Z", "city": "资中县" }, { "letter": "Z", "city": "子洲县" }, { "letter": "Z", "city": "枞阳县" }, { "letter": "Z", "city": "邹城市" }, { "letter": "Z", "city": "邹平县" }, { "letter": "Z", "city": "遵化市" }, { "letter": "Z", "city": "遵义市" }, { "letter": "Z", "city": "左贡县" }, { "letter": "Z", "city": "左权县" }, { "letter": "Z", "city": "柞水县" }, { "letter": "Z", "city": "左云县" }];
  const _sfc_main$v = {
    data() {
      return {
        nowCity: "",
        locationStatus: "定位成功",
        letter: [
          "A",
          "B",
          "C",
          "D",
          "E",
          "F",
          "G",
          "H",
          "J",
          "K",
          "L",
          "M",
          "N",
          "P",
          "Q",
          "R",
          "S",
          "T",
          "W",
          "X",
          "Y",
          "Z"
        ],
        //热门城市
        hotCityList: [],
        //全部城市
        allCityList: [],
        //滑动到指定位置
        scrollId: "",
        //动画
        animation: {},
        //接口请求的数据
        cityList: []
      };
    },
    onLoad(options) {
      this.nowCity = "北京";
      this.getCityList();
    },
    methods: {
      //拼音点击事件
      letterTap(index) {
        formatAppLog("log", "at pages/auth/cityChoose.vue:80", index);
        if (this.letter[index] == "热") {
          this.scrollId = "re";
        } else {
          this.scrollId = this.letter[index];
        }
      },
      //搜索
      cityInputListener(e2) {
        let value = e2.detail.value;
        let cityAll = this.allCityList;
        let newArray = [];
        for (let i2 = 0; i2 < cityAll.length; i2++) {
          if (cityAll[i2].city.indexOf(value) != -1 || cityAll[i2].letter == value.toUpperCase()) {
            newArray.push(cityAll[i2]);
          }
        }
        if (value == "") {
          this.formatCityData(this.cityList);
        } else {
          this.formatCityData(newArray);
        }
      },
      //定位
      locationImageClick() {
        var that = this;
        this.animation = uni.createAnimation();
        this.animation.rotate(360).step();
        this.animation = this.animation.export();
        this.locationStatus = "定位中...";
        uni.getLocation({
          geocode: true,
          // 是否解析地址信息（返回详细格式化地址信息）
          success: (res2) => {
            if (res2.address != void 0) {
              that.nowCity = res2.address.city;
              that.locationStatus = "定位成功";
            }
          },
          fail: (res2) => {
            that.nowCity = "获取定位信息失败";
            formatAppLog("log", "at pages/auth/cityChoose.vue:123", "获取定位信息失败");
          }
        });
      },
      //获取城市列表	
      getCityList() {
        this.cityList = cityJson;
        this.formatCityData(cityJson);
      },
      formatCityData: function(array2) {
        for (let i2 = 0; i2 < array2.length; i2++) {
          if (i2 == 0) {
            array2[i2].show = true;
          } else if (array2[i2].letter != array2[i2 - 1].letter) {
            array2[i2].show = true;
            array2[i2 - 1].last = true;
          }
          if (array2.length == 1) {
            array2[0].last = true;
          }
          array2.show = false;
        }
        this.allCityList = array2;
      },
      //城市条目点击
      cityItemClick(index) {
        var data = this.allCityList[index];
        formatAppLog("log", "at pages/auth/cityChoose.vue:156", data);
        uni.setStorageSync("verifyAddress", data.city);
        uni.navigateBack({
          delta: 1
        });
      }
    }
  };
  function _sfc_render$u(_ctx, _cache, $props, $setup, $data, $options) {
    return vue.openBlock(), vue.createElementBlock("view", { class: "introScroll" }, [
      vue.createElementVNode("view", { class: "topView" }, [
        vue.createElementVNode("view", { class: "nowCityTextTipsView" }, [
          vue.createElementVNode("view", { class: "nowLocationCity" }, [
            vue.createTextVNode("当前地区："),
            vue.createElementVNode("text", null, "北京市")
          ]),
          vue.createElementVNode("view", { class: "address" }, [
            vue.createElementVNode("image", {
              src: _imports_0$s,
              class: "img"
            }),
            vue.createTextVNode("自动定位 ")
          ])
        ])
      ]),
      vue.createElementVNode("view", { class: "city_right" }, [
        (vue.openBlock(true), vue.createElementBlock(
          vue.Fragment,
          null,
          vue.renderList($data.letter, (item, index) => {
            return vue.openBlock(), vue.createElementBlock("text", {
              class: "letter_item",
              key: index,
              onClick: vue.withModifiers(($event) => $options.letterTap(index), ["stop"])
            }, vue.toDisplayString(item), 9, ["onClick"]);
          }),
          128
          /* KEYED_FRAGMENT */
        ))
      ]),
      vue.createElementVNode("scroll-view", {
        "scroll-with-animation": "true",
        class: "cityListView",
        "scroll-y": "true",
        "scroll-into-view": $data.scrollId,
        "show-scrollbar": false
      }, [
        vue.createElementVNode("view", { class: "forCityView" }, [
          (vue.openBlock(true), vue.createElementBlock(
            vue.Fragment,
            null,
            vue.renderList($data.allCityList, (item, index) => {
              return vue.openBlock(), vue.createElementBlock("view", {
                class: "forCityItem",
                key: index
              }, [
                item.show ? (vue.openBlock(), vue.createElementBlock("view", {
                  key: 0,
                  id: item.letter,
                  class: "letterItemFirst"
                }, vue.toDisplayString(item.letter), 9, ["id"])) : vue.createCommentVNode("v-if", true),
                vue.createElementVNode("text", {
                  onClick: ($event) => $options.cityItemClick(index),
                  class: "itemCityContent"
                }, vue.toDisplayString(item.city), 9, ["onClick"]),
                !item.last ? (vue.openBlock(), vue.createElementBlock("view", {
                  key: 1,
                  class: "line"
                })) : vue.createCommentVNode("v-if", true)
              ]);
            }),
            128
            /* KEYED_FRAGMENT */
          ))
        ])
      ], 8, ["scroll-into-view"])
    ]);
  }
  const PagesAuthCityChoose = /* @__PURE__ */ _export_sfc(_sfc_main$v, [["render", _sfc_render$u], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/auth/cityChoose.vue"]]);
  const PAYMENT_CHANNELS = {
    WECHAT: "wxpay",
    ALIPAY: "alipay"
  };
  const PAYMENT_STATUS = {
    SUCCESS: "success",
    FAILED: "failed",
    CANCELED: "canceled",
    UNKNOWN: "unknown"
  };
  function usePayment() {
    const paymentChannels = vue.ref({});
    const isLoading = vue.ref(false);
    const paymentStatus = vue.ref(PAYMENT_STATUS.UNKNOWN);
    const getPaymentChannels = () => {
      return new Promise((resolve, reject) => {
        if (Object.keys(paymentChannels.value).length) {
          resolve(paymentChannels.value);
          return;
        }
        plus.payment.getChannels((channels) => {
          const channelMap = {};
          channels.forEach((channel) => {
            channelMap[channel.id] = channel;
          });
          paymentChannels.value = channelMap;
          resolve(channelMap);
        }, (error) => {
          formatAppLog("error", "at utils/usePayment.js:62", "获取支付渠道失败:", error);
          reject(new Error(`获取支付渠道失败: ${error.message || error.code}`));
        });
      });
    };
    const getChannel = (channelId) => {
      return paymentChannels.value[channelId] || null;
    };
    const getErrorMessage = (error, channelId) => {
      var _a;
      const { code: code2, message: message2 } = error;
      const commonErrors = {
        [-1]: "支付失败，请重试",
        [-2]: "用户取消支付",
        [-3]: "支付操作未完成",
        [-4]: "支付渠道不可用",
        [-5]: "网络异常，请检查网络"
      };
      const channelErrors = {
        [PAYMENT_CHANNELS.WECHAT]: {
          [-100]: "微信未安装",
          [-101]: "微信版本不支持",
          [-102]: "微信支付参数错误",
          [-103]: "微信登录授权失败"
        },
        [PAYMENT_CHANNELS.ALIPAY]: {
          [-100]: "支付宝未安装",
          [-101]: "支付宝版本不支持",
          [-102]: "支付宝支付参数错误",
          [-103]: "支付宝账号未登录"
        }
      };
      return ((_a = channelErrors[channelId]) == null ? void 0 : _a[code2]) || commonErrors[code2] || message2 || `支付错误: 错误码=${code2}`;
    };
    const requestPayment = (channelId, orderInfo) => {
      return new Promise((resolve, reject) => {
        if (!orderInfo) {
          reject(new Error("订单信息不能为空"));
          return;
        }
        const channel = getChannel(channelId);
        if (!channel) {
          reject(new Error(`未找到支付渠道: ${channelId}，请先初始化渠道`));
          return;
        }
        plus.payment.request(channel, orderInfo, (result) => {
          let rawData2 = result.rawdata;
          try {
            rawData2 = typeof rawData2 === "string" ? JSON.parse(rawData2) : rawData2;
          } catch (e2) {
            formatAppLog("warn", "at utils/usePayment.js:142", "支付返回数据解析失败:", e2);
          }
          paymentStatus.value = PAYMENT_STATUS.SUCCESS;
          resolve({
            status: PAYMENT_STATUS.SUCCESS,
            data: rawData2,
            originalResult: result
          });
        }, (error) => {
          formatAppLog("error", "at utils/usePayment.js:152", `[${channelId}]支付失败:`, error);
          let status = PAYMENT_STATUS.FAILED;
          if (error.code === -2) {
            status = PAYMENT_STATUS.CANCELED;
          }
          paymentStatus.value = status;
          reject({
            status,
            error,
            message: getErrorMessage(error, channelId)
          });
        });
      });
    };
    const wechatPay = async (orderInfo) => {
      if (isLoading.value) {
        formatAppLog("warn", "at utils/usePayment.js:176", "有正在进行的支付，请稍后再试");
        return;
      }
      isLoading.value = true;
      try {
        if (!getChannel(PAYMENT_CHANNELS.WECHAT)) {
          await getPaymentChannels();
        }
        return await requestPayment(PAYMENT_CHANNELS.WECHAT, orderInfo);
      } finally {
        isLoading.value = false;
      }
    };
    const alipay = async (orderInfo) => {
      formatAppLog("log", "at utils/usePayment.js:196", orderInfo, "196 - - - - - ");
      if (isLoading.value) {
        formatAppLog("warn", "at utils/usePayment.js:199", "有正在进行的支付，请稍后再试");
        return;
      }
      isLoading.value = true;
      try {
        if (!getChannel(PAYMENT_CHANNELS.ALIPAY)) {
          await getPaymentChannels();
        }
        return await requestPayment(PAYMENT_CHANNELS.ALIPAY, orderInfo);
      } finally {
        isLoading.value = false;
      }
    };
    const pay = async (channelId, orderInfo) => {
      if (isLoading.value) {
        formatAppLog("warn", "at utils/usePayment.js:221", "有正在进行的支付，请稍后再试");
        return;
      }
      isLoading.value = true;
      try {
        paymentStatus.value = PAYMENT_STATUS.UNKNOWN;
        if (!getChannel(channelId)) {
          await getPaymentChannels();
        }
        return await requestPayment(channelId, orderInfo);
      } catch (error) {
        throw error;
      } finally {
        isLoading.value = false;
      }
    };
    const initPaymentChannels = async () => {
      try {
        await getPaymentChannels();
        formatAppLog("log", "at utils/usePayment.js:247", "支付渠道初始化成功:", Object.keys(paymentChannels.value));
      } catch (error) {
        formatAppLog("error", "at utils/usePayment.js:249", "支付渠道初始化失败:", error);
        throw error;
      }
    };
    const isChannelAvailable = (channelId) => {
      return !!getChannel(channelId);
    };
    const getAvailableChannels = () => {
      return Object.keys(paymentChannels.value);
    };
    return {
      isLoading,
      // 支付加载状态
      paymentStatus,
      // 当前支付状态
      paymentChannels,
      // 支付渠道映射表
      pay,
      // 通用支付方法
      wechatPay,
      // 微信支付快捷方法
      alipay,
      // 支付宝支付快捷方法
      initPaymentChannels,
      // 初始化支付渠道
      isChannelAvailable,
      // 检查渠道是否可用
      getAvailableChannels,
      // 获取可用渠道列表
      PAYMENT_CHANNELS,
      // 支付渠道常量
      PAYMENT_STATUS
      // 支付状态常量
    };
  }
  const _sfc_main$u = {
    __name: "payment",
    props: {
      distinguish: {
        type: String,
        default: "consultation"
      }
    },
    setup(__props, { expose: __expose }) {
      __expose();
      vue.useCssVars((_ctx) => ({
        "eade9ab2-statusBarHeight": statusBarHeight.value,
        "eade9ab2-startColor": startColor.value,
        "eade9ab2-textColor": textColor.value
      }));
      const globalStore = useGlobalDataStore();
      const statusBarHeight = vue.ref(globalStore.statusBarHeight + "px");
      const consultation = vue.ref(1);
      const startColor = vue.ref("#35ca955c");
      const selectImg = vue.ref("select-green");
      const textColor = vue.ref("#34a76f");
      const showMore = vue.ref(false);
      const avatarImg = vue.ref("");
      const titleName = vue.ref("");
      const orderData2 = vue.ref({
        counselorId: "",
        // 咨询师ID
        consultType: null,
        // 咨询方式
        date: null,
        // 预约日期
        serveCategoryId: 3,
        // 服务类别ID
        startTime: null,
        // 开始时间
        endTime: null,
        // 结束时间
        duration: null,
        // 时长
        price: null
      });
      const props = __props;
      vue.watch(() => props.distinguish, (newVal) => {
        if (newVal == "consultation") {
          startColor.value = "#35ca955c";
          selectImg.value = "select-green";
          textColor.value = "#34a76f";
        } else {
          startColor.value = "#ffbb4166";
          selectImg.value = "select-yellow";
          textColor.value = "#EB9516";
        }
      }, {
        immediate: true,
        deep: true
      });
      onShow(() => {
      });
      const scrollTop = vue.ref(0);
      const onPageScroll2 = (e2) => {
        scrollTop.value = e2.detail.scrollTop;
      };
      const backFn = () => {
        uni.navigateBack({
          delta: 1
        });
      };
      const gotoPrivacy = (type) => {
        uni.navigateTo({
          url: `/pages/webview/webview?type=${type}`
        });
      };
      const content = vue.ref("");
      const getAgreementByType = async () => {
        try {
          const queryParams2 = {
            current: 1,
            size: 10,
            title: "咨询服务须知"
          };
          let { data } = await articleByType$1(queryParams2);
          content.value = data.records[0].content;
        } catch (error) {
          formatAppLog("log", "at pages/payment/payment.vue:248", error);
        }
      };
      const planList = vue.ref([]);
      const planTitle = vue.ref("");
      const getlnfo = async (id2) => {
        let { data } = await consultantList(id2);
        data.map((item, index) => {
          item.selected = index === 0 ? true : false;
        });
        const { quoteAmount, serviceDuration, serviceQuoteType } = data[0];
        orderData2.value.consultType = serviceQuoteType;
        orderData2.value.price = quoteAmount;
        orderData2.value.serveCategoryId = data[0].id;
        orderData2.value.duration = serviceDuration;
        planList.value = data;
        planTitle.value = data[0].title;
      };
      const selectPlan = (plan, index) => {
        planTitle.value = plan.title;
        planList.value.forEach((plan2, i2) => {
          plan2.selected = i2 === index;
        });
        consultation.value = plan.serviceQuoteType;
        const { createTime, quoteAmount, serviceDuration, serviceQuoteType } = plan;
        orderData2.value.consultType = serviceQuoteType;
        orderData2.value.price = quoteAmount;
        orderData2.value.duration = serviceDuration;
      };
      const clauseVal = vue.ref("agree");
      const popupType2 = vue.ref("service");
      const popup = vue.ref(null);
      const handleClause = (val2) => {
        popupType2.value = "service";
        if (val2 == "disagree") {
          popup.value.open("center");
        }
        clauseVal.value = val2;
      };
      const closePopup = () => {
        popup.value.close();
      };
      const paymentMethod = vue.ref("weixin");
      const handlePayment = (val2) => {
        paymentMethod.value = val2;
      };
      const gotoOrder = () => {
        uni.navigateTo({
          url: `/pages/payment/order/listener-order`
        });
      };
      const gotoIndex = () => {
        uni.switchTab({
          url: "/pages/index/index"
        });
      };
      const {
        isLoading,
        paymentStatus,
        initPaymentChannels,
        wechatPay,
        alipay,
        PAYMENT_STATUS: PAYMENT_STATUS2
      } = usePayment();
      const orderPay = async (id2) => {
        try {
          const api = paymentMethod.value == "weixin" ? wxPay : aliPay;
          const type = paymentMethod.value == "weixin" ? "wxPay" : "aliPay";
          const res2 = await orderList(orderData2.value);
          const { data } = await api({
            orderId: res2.data.orderSn,
            amount: res2.data.amount,
            type,
            status: 1
          });
          if (paymentMethod.value == "weixin") {
            handleWechatPay(data.orderString);
          } else {
            handleAlipay(data.orderString, res2.data.orderSn);
          }
        } catch (err) {
          message.value = err.message || "支付宝支付失败";
        }
      };
      const handleAlipay = async (orderInfo, orderSn) => {
        try {
          const result = await alipay(orderInfo);
          payResultApi(orderSn);
        } catch (err) {
          message.value = err.message || "支付宝支付失败";
        }
      };
      const handleWechatPay = async (orderInfo) => {
        try {
          const result = await wechatPay(orderInfo);
          if (result.status === PAYMENT_STATUS2.SUCCESS) {
            message.value = "微信支付成功";
          }
        } catch (err) {
          message.value = err.message || "微信支付失败";
        }
      };
      const payResultApi = async (orderSn) => {
        try {
          const result = await payResult({ orderSn });
          if (result.data.status == 2) {
            popupType2.value = "success";
            popup.value.open("center");
          }
        } catch (err) {
          message.value = err.message || "支付失败";
        }
      };
      onLoad((options) => {
        const { date: date2, startTime, endTime } = JSON.parse(options.time);
        orderData2.value.date = timeStrToSecondTimestamp(`${date2} ${endTime}`);
        orderData2.value.startTime = timeStrToSecondTimestamp(`${date2} ${startTime}`);
        orderData2.value.endTime = timeStrToSecondTimestamp(`${date2} ${endTime}`);
        const { to, avatar, name, id: id2 } = options;
        avatarImg.value = avatar;
        titleName.value = name;
        orderData2.value.counselorId = id2;
        formatAppLog("log", "at pages/payment/payment.vue:391", orderData2.value);
        getAgreementByType();
        getlnfo(to);
      });
      const __returned__ = { globalStore, statusBarHeight, consultation, startColor, selectImg, textColor, showMore, avatarImg, titleName, orderData: orderData2, props, scrollTop, onPageScroll: onPageScroll2, backFn, gotoPrivacy, content, getAgreementByType, planList, planTitle, getlnfo, selectPlan, clauseVal, popupType: popupType2, popup, handleClause, closePopup, paymentMethod, handlePayment, gotoOrder, gotoIndex, isLoading, paymentStatus, initPaymentChannels, wechatPay, alipay, PAYMENT_STATUS: PAYMENT_STATUS2, orderPay, handleAlipay, handleWechatPay, payResultApi, ref: vue.ref, watch: vue.watch, get useGlobalDataStore() {
        return useGlobalDataStore;
      }, get onShow() {
        return onShow;
      }, get onLoad() {
        return onLoad;
      }, get consultantList() {
        return consultantList;
      }, get timeStrToSecondTimestamp() {
        return timeStrToSecondTimestamp;
      }, get payment() {
        return payment;
      }, get wxPay() {
        return wxPay;
      }, get aliPay() {
        return aliPay;
      }, get orderList() {
        return orderList;
      }, get payResult() {
        return payResult;
      }, get getUserInfo() {
        return getUserInfo;
      }, get articleByType() {
        return articleByType$1;
      }, get usePayment() {
        return usePayment;
      }, get formatTime() {
        return formatTime;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$t(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    const _component_uni_nav_bar = resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"), __easycom_1$4);
    const _component_uni_popup = resolveEasycom(vue.resolveDynamicComponent("uni-popup"), __easycom_3$5);
    return vue.openBlock(), vue.createElementBlock("view", { class: "settled-box" }, [
      vue.createElementVNode("view", { class: "header" }, [
        vue.createVNode(_component_uni_nav_bar, {
          class: vue.normalizeClass([$setup.scrollTop > 15 ? "scrollClass" : "", "header-bar"]),
          backgroundColor: "rgba(255,255,255,0)",
          border: false,
          title: "确认订单"
        }, {
          left: vue.withCtx(() => [
            vue.createVNode(_component_uni_icons, {
              type: "left",
              size: "24",
              onClick: $setup.backFn
            })
          ]),
          _: 1
          /* STABLE */
        }, 8, ["class"])
      ]),
      vue.createElementVNode(
        "scroll-view",
        {
          "scroll-y": "",
          onScroll: $setup.onPageScroll,
          style: { "height": "100vh" },
          "show-scrollbar": false
        },
        [
          vue.createElementVNode("view", { class: "consultation-content" }, [
            vue.createElementVNode("view", { class: "notice-bar" }, [
              vue.createVNode(_component_uni_icons, {
                type: "sound",
                size: "20",
                color: "#F87171"
              }),
              vue.createElementVNode("view", { class: "notice-text" }, " 为确保沟通顺畅，请提前确认设备是否开启对应麦克风权限>> ")
            ]),
            vue.createElementVNode("view", { class: "user-info-section" }, [
              vue.createElementVNode("image", {
                src: $setup.avatarImg,
                class: "user-avatar"
              }, null, 8, ["src"]),
              vue.createElementVNode("view", { class: "user-details" }, [
                vue.createElementVNode(
                  "view",
                  { class: "user-name" },
                  vue.toDisplayString($setup.titleName),
                  1
                  /* TEXT */
                ),
                vue.createElementVNode(
                  "view",
                  { class: "user-expertise" },
                  vue.toDisplayString($setup.planTitle),
                  1
                  /* TEXT */
                )
              ])
            ]),
            vue.createElementVNode("view", { class: "appointment-info" }, [
              vue.createElementVNode("view", { class: "info-item" }, [
                vue.createElementVNode("view", { class: "info-label" }, "预约时间"),
                vue.createElementVNode(
                  "view",
                  { class: "info-value" },
                  vue.toDisplayString($setup.formatTime($setup.orderData.date)),
                  1
                  /* TEXT */
                )
              ]),
              vue.createElementVNode("view", { class: "info-item" }, [
                vue.createElementVNode("view", { class: "info-label" }, "咨询方式"),
                vue.createElementVNode("view", { class: "consultation-methods" }, [
                  vue.createElementVNode("view", { class: "method-item" }, [
                    vue.createVNode(_component_uni_icons, {
                      type: "videocam",
                      size: "20",
                      color: $setup.consultation == 1 ? "#34A76F" : "#959596"
                    }, null, 8, ["color"]),
                    vue.createElementVNode(
                      "text",
                      {
                        class: "method-text",
                        style: vue.normalizeStyle({ color: $setup.consultation == 1 ? "" : "#666" })
                      },
                      "视频",
                      4
                      /* STYLE */
                    ),
                    vue.withDirectives(vue.createElementVNode(
                      "image",
                      {
                        style: { "left": "60rpx" },
                        src: _imports_0$k
                      },
                      null,
                      512
                      /* NEED_PATCH */
                    ), [
                      [vue.vShow, $setup.consultation == 1]
                    ])
                  ]),
                  vue.createElementVNode("view", { class: "method-item" }, [
                    vue.createVNode(_component_uni_icons, {
                      type: "mic",
                      size: "20",
                      color: $setup.consultation == 2 ? "#34A76F" : "#959596"
                    }, null, 8, ["color"]),
                    vue.createElementVNode(
                      "text",
                      {
                        class: "method-text",
                        style: vue.normalizeStyle({ color: $setup.consultation == 2 ? "" : "#666" })
                      },
                      "语音",
                      4
                      /* STYLE */
                    ),
                    vue.withDirectives(vue.createElementVNode(
                      "image",
                      {
                        style: { "right": "160rpx" },
                        src: _imports_0$k
                      },
                      null,
                      512
                      /* NEED_PATCH */
                    ), [
                      [vue.vShow, $setup.consultation == 2]
                    ])
                  ]),
                  vue.createElementVNode("view", { class: "method-item" }, [
                    vue.createVNode(_component_uni_icons, {
                      type: "compose",
                      size: "20",
                      color: $setup.consultation == 3 ? "#34A76F" : "#959596"
                    }, null, 8, ["color"]),
                    vue.createElementVNode(
                      "text",
                      {
                        class: "method-text",
                        style: vue.normalizeStyle({ color: $setup.consultation == 3 ? "" : "#666" })
                      },
                      "文字",
                      4
                      /* STYLE */
                    ),
                    vue.withDirectives(vue.createElementVNode(
                      "image",
                      {
                        style: { "right": "10rpx" },
                        src: _imports_0$k
                      },
                      null,
                      512
                      /* NEED_PATCH */
                    ), [
                      [vue.vShow, $setup.consultation == 3]
                    ])
                  ])
                ])
              ])
            ]),
            vue.createElementVNode("view", { class: "consultation-plan-section" }, [
              vue.createElementVNode("view", { class: "plan-title" }, "咨询方案"),
              vue.createElementVNode("view", { class: "plan-list-container" }, [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($setup.planList, (plan, index) => {
                    return vue.openBlock(), vue.createElementBlock("view", {
                      class: vue.normalizeClass(["plan-item", { "plan-item--active": plan.selected }]),
                      key: index,
                      onClick: ($event) => $setup.selectPlan(plan, index)
                    }, [
                      vue.createElementVNode("view", { class: "plan-item-content" }, [
                        vue.createElementVNode("view", { class: "plan-info" }, [
                          vue.createElementVNode("image", {
                            src: plan.selected ? `/static/auth/${$setup.selectImg}.png` : "/static/auth/not-selected.png",
                            class: "plan-select-icon"
                          }, null, 8, ["src"]),
                          vue.createElementVNode(
                            "view",
                            { class: "plan-name" },
                            "【" + vue.toDisplayString(plan.title) + "】" + vue.toDisplayString(plan.serviceDuration) + "分钟",
                            1
                            /* TEXT */
                          )
                        ]),
                        vue.createElementVNode(
                          "view",
                          { class: "plan-price" },
                          "￥" + vue.toDisplayString(plan.quoteAmount),
                          1
                          /* TEXT */
                        )
                      ])
                    ], 10, ["onClick"]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                ))
              ])
            ]),
            vue.createElementVNode("view", { class: "consultation-plan-section" }, [
              vue.createElementVNode("view", { class: "plan-title" }, "服务须知"),
              vue.createElementVNode("view", { class: "please-note" }, [
                vue.createElementVNode("view", { class: "note" }, [
                  vue.createElementVNode("view", null, "这里是内容，请仔细阅读了解是否存在以下描述的情况"),
                  vue.createElementVNode(
                    "view",
                    {
                      class: "note-text",
                      style: vue.normalizeStyle({ "max-height": $setup.showMore ? "none" : "200rpx" })
                    },
                    [
                      vue.createElementVNode("view", { innerHTML: $setup.content }, null, 8, ["innerHTML"])
                    ],
                    4
                    /* STYLE */
                  ),
                  vue.createElementVNode("view", {
                    class: "text-display",
                    onClick: _cache[0] || (_cache[0] = ($event) => $setup.showMore = !$setup.showMore)
                  }, [
                    vue.createVNode(_component_uni_icons, {
                      type: $setup.showMore ? "up" : "down",
                      size: "20",
                      color: "#959596"
                    }, null, 8, ["type"])
                  ]),
                  vue.createElementVNode("view", { class: "clause" }, [
                    vue.createElementVNode("view", {
                      class: "clause-text disagree",
                      onClick: _cache[1] || (_cache[1] = ($event) => $setup.handleClause("disagree"))
                    }, [
                      vue.createElementVNode("image", {
                        src: `/static/auth/${$setup.clauseVal == "disagree" ? $setup.selectImg : "not-selected"}.png`,
                        class: "plan-select-icon"
                      }, null, 8, ["src"]),
                      vue.createElementVNode(
                        "view",
                        {
                          class: vue.normalizeClass($setup.clauseVal == "disagree" ? "clause-txt" : "")
                        },
                        "存在以上情况",
                        2
                        /* CLASS */
                      )
                    ]),
                    vue.createElementVNode("view", {
                      class: "clause-text agree",
                      onClick: _cache[3] || (_cache[3] = ($event) => $setup.handleClause("agree"))
                    }, [
                      vue.createElementVNode("image", {
                        src: `/static/auth/${$setup.clauseVal == "agree" ? $setup.selectImg : "not-selected"}.png`,
                        class: "plan-select-icon"
                      }, null, 8, ["src"]),
                      vue.createElementVNode(
                        "view",
                        {
                          class: vue.normalizeClass($setup.clauseVal == "agree" ? "clause-txt" : "")
                        },
                        [
                          vue.createTextVNode("不存在以上情况，且同意"),
                          vue.createElementVNode(
                            "text",
                            {
                              style: vue.normalizeStyle({ color: $setup.textColor }),
                              onClick: _cache[2] || (_cache[2] = ($event) => $setup.gotoPrivacy("用户下单服务协议"))
                            },
                            "《用户下单服务协议》",
                            4
                            /* STYLE */
                          )
                        ],
                        2
                        /* CLASS */
                      )
                    ])
                  ])
                ])
              ])
            ]),
            vue.createElementVNode("view", { class: "consultation-plan-section" }, [
              vue.createElementVNode("view", { class: "plan-title" }, "支付方式"),
              vue.createElementVNode("view", { class: "please-note" }, [
                vue.createElementVNode("view", {
                  class: "note-pay",
                  onClick: _cache[4] || (_cache[4] = ($event) => $setup.handlePayment("weixin"))
                }, [
                  vue.createElementVNode("view", { class: "pay-item" }, [
                    vue.createElementVNode("image", { src: "http://cdn.yupao.com/pc/images/zgp/recharge-pay-wechatimg.png" }),
                    vue.createElementVNode("view", null, "微信支付")
                  ]),
                  vue.createElementVNode("image", {
                    src: `/static/auth/${$setup.paymentMethod == "weixin" ? $setup.selectImg : "not-selected"}.png`,
                    style: { "width": "25rpx", "height": "25rpx" }
                  }, null, 8, ["src"])
                ]),
                vue.createElementVNode("view", {
                  class: "note-pay",
                  onClick: _cache[5] || (_cache[5] = ($event) => $setup.handlePayment("alipay"))
                }, [
                  vue.createElementVNode("view", { class: "pay-item" }, [
                    vue.createElementVNode("image", { src: "http://cdn.yupao.com/pc/images/zgp/recharge-pay-alipayimg.png" }),
                    vue.createElementVNode("view", null, "支付宝支付")
                  ]),
                  vue.createElementVNode("image", {
                    src: `/static/auth/${$setup.paymentMethod == "alipay" ? $setup.selectImg : "not-selected"}.png`,
                    style: { "width": "25rpx", "height": "25rpx" }
                  }, null, 8, ["src"])
                ])
              ])
            ])
          ])
        ],
        32
        /* NEED_HYDRATION */
      ),
      vue.createElementVNode("view", { class: "recharge-pay-footer" }, [
        vue.createElementVNode("view", { style: { "display": "flex", "margin-left": "20rpx" } }, [
          vue.createElementVNode("view", { class: "recharge-pay-price" }, [
            vue.createTextVNode(
              "¥" + vue.toDisplayString($setup.orderData.price),
              1
              /* TEXT */
            ),
            vue.createElementVNode(
              "text",
              null,
              "元/" + vue.toDisplayString($setup.orderData.duration) + "分钟",
              1
              /* TEXT */
            )
          ])
        ]),
        vue.createElementVNode("view", { style: { "display": "flex", "margin-right": "20rpx" } }, [
          vue.createElementVNode("button", {
            disabled: $setup.clauseVal == "disagree",
            class: "recharge-sure-price",
            onClick: $setup.orderPay
          }, "提交订单", 8, ["disabled"])
        ])
      ]),
      vue.createVNode(
        _component_uni_popup,
        {
          ref: "popup",
          type: "center",
          animation: false
        },
        {
          default: vue.withCtx(() => [
            $setup.popupType == "service" ? (vue.openBlock(), vue.createElementBlock("view", {
              key: 0,
              class: "popup-container"
            }, [
              vue.createElementVNode("view", { class: "popup-title" }, [
                vue.createVNode(_component_uni_icons, {
                  type: "notification-filled",
                  size: "40",
                  color: "#35CA95"
                })
              ]),
              vue.createElementVNode("view", { class: "popup-content" }, " 抱歉，您存在的情况不适于咨询， 建议您选择更专业治疗，以便于给您提 供更好的服务。 "),
              vue.createElementVNode("view", { class: "popup-btn" }, [
                vue.createElementVNode("view", {
                  class: "popup-btn-text",
                  onClick: $setup.closePopup
                }, "知道了")
              ])
            ])) : vue.createCommentVNode("v-if", true),
            $setup.popupType == "success" ? (vue.openBlock(), vue.createElementBlock("view", {
              key: 1,
              class: "popup-order"
            }, [
              vue.createElementVNode("view", { class: "popup-order-header" }, [
                vue.createVNode(_component_uni_icons, {
                  "custom-prefix": "iconfont",
                  type: "icon-smile-full",
                  size: "30",
                  color: "#f7db79",
                  class: "icon"
                }),
                vue.createElementVNode("view", { class: "popup-order-title" }, [
                  vue.createElementVNode("view", null, "恭喜您"),
                  vue.createElementVNode("view", null, "订单已成功支付！")
                ])
              ]),
              vue.createElementVNode("view", { class: "popup-order-btn" }, [
                vue.createElementVNode("view", { onClick: $setup.gotoOrder }, "查看订单"),
                vue.createElementVNode("view", null, "|"),
                vue.createElementVNode("view", { onClick: $setup.gotoIndex }, "返回首页")
              ])
            ])) : vue.createCommentVNode("v-if", true)
          ]),
          _: 1
          /* STABLE */
        },
        512
        /* NEED_PATCH */
      )
    ]);
  }
  const PagesPaymentPayment = /* @__PURE__ */ _export_sfc(_sfc_main$u, [["render", _sfc_render$t], ["__scopeId", "data-v-eade9ab2"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/payment/payment.vue"]]);
  const _sfc_main$t = {
    __name: "payment-records",
    props: {
      distinguish: {
        type: String,
        default: "1"
      }
    },
    setup(__props, { expose: __expose }) {
      __expose();
      vue.useCssVars((_ctx) => ({
        "82fe96ef-statusBarHeight": statusBarHeight.value,
        "82fe96ef-textColor": textColor.value
      }));
      const globalStore = useGlobalDataStore();
      const statusBarHeight = vue.ref(globalStore.statusBarHeight + "px");
      const consultation = vue.ref(2);
      const startColor = vue.ref("#35ca955c");
      const selectImg = vue.ref("select-green");
      const textColor = vue.ref("#34a76f");
      const showMore = vue.ref(false);
      const avatarImg = vue.ref("");
      const titleName = vue.ref("");
      const orderData2 = vue.ref({
        listenerId: null,
        // 倾听师ID
        consultType: null,
        // 倾听方式
        voiceStartTime: null,
        // 语音开始时间
        duration: null,
        // 时长
        price: null
        // 价格
      });
      const props = __props;
      onLoad((options) => {
        const { id: id2, userId, avatar, name } = options;
        avatarImg.value = avatar;
        titleName.value = name;
        orderData2.value.listenerId = id2;
        getlnfo(userId);
      });
      const planList = vue.ref([]);
      const planTitle = vue.ref("");
      const getlnfo = async (id2) => {
        let { data } = await listenerList(id2);
        data.map((item, index) => {
          item.selected = index === 0 ? true : false;
        });
        const { createTime, quoteAmount, serviceDuration, serviceQuoteType } = data[0];
        orderData2.value.consultType = serviceQuoteType;
        orderData2.value.price = quoteAmount;
        orderData2.value.voiceStartTime = timeStrToSecondTimestamp(createTime);
        orderData2.value.duration = serviceDuration;
        planList.value = data;
        planTitle.value = data[0].title;
      };
      vue.watch(() => props.distinguish, (newVal) => {
        if (newVal == "consultation") {
          startColor.value = "#35ca955c";
          selectImg.value = "select-green";
          textColor.value = "#34a76f";
        } else {
          startColor.value = "#ffbb4166";
          selectImg.value = "select-yellow";
          textColor.value = "#EB9516";
        }
      }, {
        immediate: true,
        deep: true
      });
      onShow(() => {
      });
      const scrollTop = vue.ref(0);
      const onPageScroll2 = (e2) => {
        scrollTop.value = e2.detail.scrollTop;
      };
      const backFn = () => {
        uni.navigateBack({
          delta: 1
        });
      };
      const gotoPrivacy = (type) => {
        uni.navigateTo({
          url: `/pages/webview/webview?type=${type}`
        });
      };
      const content = vue.ref("");
      const getAgreementByType = async () => {
        try {
          const queryParams2 = {
            current: 1,
            size: 10,
            title: "倾听服务须知"
          };
          let { data } = await articleByType$1(queryParams2);
          content.value = data.records[0].content;
        } catch (error) {
          formatAppLog("log", "at pages/payment/payment-records.vue:261", error);
        }
      };
      const selectPlan = (plan, index) => {
        formatAppLog("log", "at pages/payment/payment-records.vue:266", plan);
        planList.value.forEach((plan2, i2) => {
          plan2.selected = i2 === index;
        });
        consultation.value = plan.serviceQuoteType;
        const { createTime, quoteAmount, serviceDuration, serviceQuoteType } = plan;
        orderData2.value.consultType = serviceQuoteType;
        orderData2.value.price = quoteAmount;
        orderData2.value.voiceStartTime = timeStrToSecondTimestamp(createTime);
        orderData2.value.duration = serviceDuration;
        planTitle.value = plan.title;
      };
      const clauseVal = vue.ref("agree");
      const popupType2 = vue.ref("service");
      const popup = vue.ref(null);
      const handleClause = (val2) => {
        popupType2.value = "service";
        if (val2 == "disagree") {
          popup.value.open("center");
        }
        clauseVal.value = val2;
      };
      const closePopup = () => {
        popup.value.close();
      };
      const gotoOrder = () => {
        uni.navigateTo({
          url: `/pages/payment/order/listener-order`
        });
      };
      const gotoIndex = () => {
        uni.switchTab({
          url: "/pages/index/index"
        });
      };
      const paymentMethod = vue.ref("weixin");
      const handlePayment = (val2) => {
        paymentMethod.value = val2;
      };
      const {
        isLoading,
        paymentStatus,
        initPaymentChannels,
        wechatPay,
        alipay,
        PAYMENT_STATUS: PAYMENT_STATUS2
      } = usePayment();
      const orderPay = async (id2) => {
        try {
          const api = paymentMethod.value == "weixin" ? wxPay : aliPay;
          const type = paymentMethod.value == "weixin" ? "wxPay" : "aliPay";
          const res2 = await createListen(orderData2.value);
          const { data } = await api({
            orderId: res2.data.orderSn,
            amount: res2.data.amount,
            type,
            status: 1
          });
          if (paymentMethod.value == "weixin") {
            handleWechatPay(data.orderString);
          } else {
            handleAlipay(data.orderString, res2.data.orderSn);
          }
        } catch (err) {
          formatAppLog("log", "at pages/payment/payment-records.vue:341", err);
        }
      };
      const handleAlipay = async (orderInfo, orderSn) => {
        try {
          const result = await alipay(orderInfo);
          payResultApi(orderSn);
        } catch (err) {
          message.value = err.message || "支付宝支付失败";
        }
      };
      const handleWechatPay = async (orderInfo) => {
        try {
          const result = await wechatPay(orderInfo);
          if (result.status === PAYMENT_STATUS2.SUCCESS) {
            message.value = "微信支付成功";
          }
        } catch (err) {
          message.value = err.message || "微信支付失败";
        }
      };
      const payResultApi = async (orderSn) => {
        try {
          const result = await payResult({ orderSn });
          if (result.data.status == 2) {
            popupType2.value = "success";
            popup.value.open("center");
          }
        } catch (err) {
          message.value = err.message || "支付失败";
        }
      };
      vue.onMounted(() => {
        getAgreementByType();
      });
      const __returned__ = { globalStore, statusBarHeight, consultation, startColor, selectImg, textColor, showMore, avatarImg, titleName, orderData: orderData2, props, planList, planTitle, getlnfo, scrollTop, onPageScroll: onPageScroll2, backFn, gotoPrivacy, content, getAgreementByType, selectPlan, clauseVal, popupType: popupType2, popup, handleClause, closePopup, gotoOrder, gotoIndex, paymentMethod, handlePayment, isLoading, paymentStatus, initPaymentChannels, wechatPay, alipay, PAYMENT_STATUS: PAYMENT_STATUS2, orderPay, handleAlipay, handleWechatPay, payResultApi, ref: vue.ref, watch: vue.watch, onMounted: vue.onMounted, get useGlobalDataStore() {
        return useGlobalDataStore;
      }, get onShow() {
        return onShow;
      }, get onLoad() {
        return onLoad;
      }, get articleByType() {
        return articleByType$1;
      }, get usePayment() {
        return usePayment;
      }, get listenerList() {
        return listenerList;
      }, get timeStrToSecondTimestamp() {
        return timeStrToSecondTimestamp;
      }, get payment() {
        return payment;
      }, get wxPay() {
        return wxPay;
      }, get aliPay() {
        return aliPay;
      }, get createListen() {
        return createListen;
      }, get payResult() {
        return payResult;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$s(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    const _component_uni_nav_bar = resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"), __easycom_1$4);
    const _component_uni_popup = resolveEasycom(vue.resolveDynamicComponent("uni-popup"), __easycom_3$5);
    return vue.openBlock(), vue.createElementBlock("view", { class: "settled-box" }, [
      vue.createElementVNode("view", { class: "header" }, [
        vue.createVNode(_component_uni_nav_bar, {
          class: vue.normalizeClass([$setup.scrollTop > 15 ? "scrollClass" : "", "header-bar"]),
          backgroundColor: "rgba(255,255,255,0)",
          border: false,
          title: "确认订单"
        }, {
          left: vue.withCtx(() => [
            vue.createVNode(_component_uni_icons, {
              type: "left",
              size: "24",
              onClick: $setup.backFn
            })
          ]),
          _: 1
          /* STABLE */
        }, 8, ["class"])
      ]),
      vue.createElementVNode(
        "scroll-view",
        {
          "scroll-y": "",
          onScroll: $setup.onPageScroll,
          style: { "height": "100vh" },
          "show-scrollbar": false
        },
        [
          vue.createElementVNode("view", { class: "consultation-content" }, [
            vue.createElementVNode("view", { class: "notice-bar" }, [
              vue.createVNode(_component_uni_icons, {
                type: "sound",
                size: "20",
                color: "#F87171"
              }),
              vue.createElementVNode("view", { class: "notice-text" }, " 为确保沟通顺畅，请提前确认设备是否开启对应麦克风权限>> ")
            ]),
            vue.createElementVNode("view", { class: "user-info-section" }, [
              vue.createElementVNode("image", {
                src: $setup.avatarImg,
                class: "user-avatar"
              }, null, 8, ["src"]),
              vue.createElementVNode("view", { class: "user-details" }, [
                vue.createElementVNode("view", { class: "user-name" }, [
                  vue.createElementVNode(
                    "view",
                    null,
                    vue.toDisplayString($setup.titleName),
                    1
                    /* TEXT */
                  ),
                  vue.createElementVNode("image", { src: _imports_0$m })
                ]),
                vue.createElementVNode(
                  "view",
                  { class: "user-expertise" },
                  vue.toDisplayString($setup.planTitle),
                  1
                  /* TEXT */
                )
              ])
            ]),
            vue.createElementVNode("view", { class: "appointment-info" }, [
              vue.createElementVNode("view", { class: "info-item" }, [
                vue.createElementVNode("view", { class: "info-label" }, "倾听方式"),
                vue.createElementVNode("view", { class: "consultation-methods" }, [
                  vue.createElementVNode(
                    "view",
                    {
                      class: vue.normalizeClass(["method-item", $setup.consultation == 3 ? "method-item-active" : ""])
                    },
                    [
                      vue.createVNode(_component_uni_icons, {
                        type: "compose",
                        size: "20",
                        color: $setup.consultation == 3 ? "#EB9516" : "#959596"
                      }, null, 8, ["color"]),
                      vue.createElementVNode("text", { class: "method-text" }, "文字")
                    ],
                    2
                    /* CLASS */
                  ),
                  vue.createElementVNode(
                    "view",
                    {
                      class: vue.normalizeClass(["method-item", $setup.consultation == 2 ? "method-item-active" : ""])
                    },
                    [
                      vue.createVNode(_component_uni_icons, {
                        type: "mic",
                        size: "20",
                        color: $setup.consultation == 2 ? "#EB9516" : "#959596"
                      }, null, 8, ["color"]),
                      vue.createElementVNode("text", { class: "method-text" }, "语音")
                    ],
                    2
                    /* CLASS */
                  )
                ])
              ])
            ]),
            vue.createElementVNode("view", { class: "consultation-plan-section" }, [
              vue.createElementVNode("view", { class: "plan-title" }, "倾听方案"),
              vue.createElementVNode("view", { class: "plan-list-container" }, [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($setup.planList, (plan, index) => {
                    return vue.openBlock(), vue.createElementBlock("view", {
                      class: vue.normalizeClass(["plan-item", { "plan-item--active": plan.selected }]),
                      key: index,
                      onClick: ($event) => $setup.selectPlan(plan, index)
                    }, [
                      vue.createElementVNode("view", { class: "plan-item-content" }, [
                        vue.createElementVNode("view", { class: "plan-info" }, [
                          vue.createElementVNode("image", {
                            src: plan.selected ? `/static/auth/${$setup.selectImg}.png` : "/static/auth/not-selected.png",
                            class: "plan-select-icon"
                          }, null, 8, ["src"]),
                          vue.createElementVNode(
                            "view",
                            { class: "plan-name" },
                            "【" + vue.toDisplayString(plan.title) + "】" + vue.toDisplayString(plan.serviceDuration) + "分钟",
                            1
                            /* TEXT */
                          )
                        ]),
                        vue.createElementVNode(
                          "view",
                          { class: "plan-price" },
                          "￥" + vue.toDisplayString(plan.quoteAmount),
                          1
                          /* TEXT */
                        )
                      ])
                    ], 10, ["onClick"]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                ))
              ])
            ]),
            vue.createElementVNode("view", { class: "consultation-plan-section" }, [
              vue.createElementVNode("view", { class: "plan-title" }, "服务须知"),
              vue.createElementVNode("view", { class: "please-note" }, [
                vue.createElementVNode("view", { class: "note" }, [
                  vue.createElementVNode("view", null, "这里是内容，请仔细阅读了解是否存在以下描述的情况"),
                  vue.createElementVNode(
                    "view",
                    {
                      class: "note-text",
                      style: vue.normalizeStyle({ "max-height": $setup.showMore ? "none" : "200rpx" })
                    },
                    [
                      vue.createElementVNode("view", { innerHTML: $setup.content }, null, 8, ["innerHTML"])
                    ],
                    4
                    /* STYLE */
                  ),
                  vue.createElementVNode("view", {
                    class: "text-display",
                    onClick: _cache[0] || (_cache[0] = ($event) => $setup.showMore = !$setup.showMore)
                  }, [
                    vue.createVNode(_component_uni_icons, {
                      type: $setup.showMore ? "up" : "down",
                      size: "20",
                      color: "#959596"
                    }, null, 8, ["type"])
                  ]),
                  vue.createElementVNode("view", { class: "clause" }, [
                    vue.createElementVNode("view", {
                      class: "clause-text disagree",
                      onClick: _cache[1] || (_cache[1] = ($event) => $setup.handleClause("disagree"))
                    }, [
                      vue.createElementVNode("image", {
                        src: `/static/auth/${$setup.clauseVal == "disagree" ? $setup.selectImg : "not-selected"}.png`,
                        class: "plan-select-icon"
                      }, null, 8, ["src"]),
                      vue.createElementVNode(
                        "view",
                        {
                          class: vue.normalizeClass($setup.clauseVal == "disagree" ? "clause-txt" : "")
                        },
                        "存在以上情况",
                        2
                        /* CLASS */
                      )
                    ]),
                    vue.createElementVNode("view", {
                      class: "clause-text agree",
                      onClick: _cache[3] || (_cache[3] = ($event) => $setup.handleClause("agree"))
                    }, [
                      vue.createElementVNode("image", {
                        src: `/static/auth/${$setup.clauseVal == "agree" ? $setup.selectImg : "not-selected"}.png`,
                        class: "plan-select-icon"
                      }, null, 8, ["src"]),
                      vue.createElementVNode(
                        "view",
                        {
                          class: vue.normalizeClass($setup.clauseVal == "agree" ? "clause-txt" : "")
                        },
                        [
                          vue.createTextVNode("不存在以上情况，且同意"),
                          vue.createElementVNode(
                            "text",
                            {
                              style: vue.normalizeStyle({ color: $setup.textColor }),
                              onClick: _cache[2] || (_cache[2] = ($event) => $setup.gotoPrivacy("用户下单服务协议"))
                            },
                            "《用户下单服务协议》",
                            4
                            /* STYLE */
                          )
                        ],
                        2
                        /* CLASS */
                      )
                    ])
                  ])
                ])
              ])
            ]),
            vue.createElementVNode("view", {
              class: "consultation-plan-section",
              style: { "margin-bottom": "100rpx" }
            }, [
              vue.createElementVNode("view", { class: "plan-title" }, "支付方式"),
              vue.createElementVNode("view", { class: "please-note" }, [
                vue.createElementVNode("view", {
                  class: "note-pay",
                  onClick: _cache[4] || (_cache[4] = ($event) => $setup.handlePayment("weixin"))
                }, [
                  vue.createElementVNode("view", { class: "pay-item" }, [
                    vue.createElementVNode("image", { src: "http://cdn.yupao.com/pc/images/zgp/recharge-pay-wechatimg.png" }),
                    vue.createElementVNode("view", null, "微信支付")
                  ]),
                  vue.createElementVNode("image", {
                    src: `/static/auth/${$setup.paymentMethod == "weixin" ? $setup.selectImg : "not-selected"}.png`,
                    style: { "width": "25rpx", "height": "25rpx" }
                  }, null, 8, ["src"])
                ]),
                vue.createElementVNode("view", {
                  class: "note-pay",
                  onClick: _cache[5] || (_cache[5] = ($event) => $setup.handlePayment("alipay"))
                }, [
                  vue.createElementVNode("view", { class: "pay-item" }, [
                    vue.createElementVNode("image", { src: "http://cdn.yupao.com/pc/images/zgp/recharge-pay-alipayimg.png" }),
                    vue.createElementVNode("view", null, "支付宝支付")
                  ]),
                  vue.createElementVNode("image", {
                    src: `/static/auth/${$setup.paymentMethod == "alipay" ? $setup.selectImg : "not-selected"}.png`,
                    style: { "width": "25rpx", "height": "25rpx" }
                  }, null, 8, ["src"])
                ])
              ])
            ])
          ])
        ],
        32
        /* NEED_HYDRATION */
      ),
      vue.createElementVNode("view", { class: "recharge-pay-footer" }, [
        vue.createElementVNode("view", { style: { "display": "flex", "margin-left": "20rpx" } }, [
          vue.createElementVNode("view", { class: "recharge-pay-price" }, [
            vue.createTextVNode(
              "¥" + vue.toDisplayString($setup.orderData.price),
              1
              /* TEXT */
            ),
            vue.createElementVNode("text", null, "元/分钟")
          ])
        ]),
        vue.createElementVNode("view", { style: { "display": "flex", "margin-right": "20rpx" } }, [
          vue.createElementVNode("button", {
            disabled: $setup.clauseVal == "disagree",
            class: "recharge-sure-price",
            onClick: $setup.orderPay
          }, "提交订单", 8, ["disabled"])
        ])
      ]),
      vue.createVNode(
        _component_uni_popup,
        {
          ref: "popup",
          type: "center",
          animation: false
        },
        {
          default: vue.withCtx(() => [
            $setup.popupType == "service" ? (vue.openBlock(), vue.createElementBlock("view", {
              key: 0,
              class: "popup-container"
            }, [
              vue.createElementVNode("view", { class: "popup-title" }, [
                vue.createVNode(_component_uni_icons, {
                  type: "notification-filled",
                  size: "40",
                  color: "#35CA95"
                })
              ]),
              vue.createElementVNode("view", { class: "popup-content" }, " 抱歉，您存在的情况不适于咨询， 建议您选择更专业治疗，以便于给您提 供更好的服务。 "),
              vue.createElementVNode("view", { class: "popup-btn" }, [
                vue.createElementVNode("view", {
                  class: "popup-btn-text",
                  onClick: $setup.closePopup
                }, "知道了")
              ])
            ])) : vue.createCommentVNode("v-if", true),
            $setup.popupType == "success" ? (vue.openBlock(), vue.createElementBlock("view", {
              key: 1,
              class: "popup-order"
            }, [
              vue.createElementVNode("view", { class: "popup-order-header" }, [
                vue.createVNode(_component_uni_icons, {
                  "custom-prefix": "iconfont",
                  type: "icon-smile-full",
                  size: "30",
                  color: "#f7db79",
                  class: "icon"
                }),
                vue.createElementVNode("view", { class: "popup-order-title" }, [
                  vue.createElementVNode("view", null, "恭喜您"),
                  vue.createElementVNode("view", null, "订单已成功支付！")
                ])
              ]),
              vue.createElementVNode("view", { class: "popup-order-btn" }, [
                vue.createElementVNode("view", { onClick: $setup.gotoOrder }, "查看订单"),
                vue.createElementVNode("view", null, "|"),
                vue.createElementVNode("view", { onClick: $setup.gotoIndex }, "返回首页")
              ])
            ])) : vue.createCommentVNode("v-if", true)
          ]),
          _: 1
          /* STABLE */
        },
        512
        /* NEED_PATCH */
      )
    ]);
  }
  const PagesPaymentPaymentRecords = /* @__PURE__ */ _export_sfc(_sfc_main$t, [["render", _sfc_render$s], ["__scopeId", "data-v-82fe96ef"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/payment/payment-records.vue"]]);
  const _imports_1$1 = "/static/index/warnings.png";
  const _sfc_main$s = {
    __name: "order-details",
    setup(__props, { expose: __expose }) {
      __expose();
      vue.useCssVars((_ctx) => ({
        "bf2277ae-statusBarHeight": statusBarHeight.value
      }));
      const globalStore = useGlobalDataStore();
      const statusBarHeight = vue.ref(globalStore.statusBarHeight + "px");
      const orderInfo = vue.ref({});
      const typeId = vue.ref({});
      const serviceExperience = vue.ref({});
      const getStatusText = (status) => {
        switch (status) {
          case 1:
            return "待付款";
          case 2:
            return "待咨询";
          case 3:
            return "待评价";
          case 4:
            return "已完成";
          case 5:
            return "交易关闭";
          case 6:
            return "退款";
          default:
            return "";
        }
      };
      onLoad((options) => {
        typeId.value = JSON.parse(options.type);
        orderInfo.value = JSON.parse(options.status);
        formatAppLog("log", "at pages/payment/order-details.vue:204", typeId.value, orderInfo.value);
        orderDetailApi(orderInfo.value.orderSn);
        const api = options.colorType == 1 ? getServiceExperienceCon : getServiceExperience;
        api({ id }).then((res2) => {
          serviceExperience.value = res2.data;
        });
      });
      const orderDetailApi = async (id2) => {
        try {
          const { data } = await orderDetail(id2);
          formatAppLog("log", "at pages/payment/order-details.vue:216", data);
        } catch (error) {
          formatAppLog("log", "at pages/payment/order-details.vue:219", error);
        }
      };
      onShow(() => {
      });
      const scrollTop = vue.ref(0);
      const onPageScroll2 = (e2) => {
        scrollTop.value = e2.detail.scrollTop;
      };
      const backFn = () => {
        uni.navigateBack({
          delta: 1
        });
      };
      const gotoPrivacy = (type) => {
        uni.navigateTo({
          url: `/pages/webview/webview?type=${type}`
        });
      };
      const handleComplaint = () => {
        uni.navigateTo({
          url: "/pages/settings/complaint?id=" + orderInfo.value.teacherUserId
        });
      };
      const handleComment = () => {
        uni.navigateTo({
          url: `/pages/payment/order/evaluation-order?order=${JSON.stringify(orderInfo.value)}&colorType=1`
        });
      };
      const handleChat = () => {
        const { teacherUserId, teacherName, teacherAvatar } = orderInfo.value;
        uni.navigateTo({
          url: `/pages/message/private-chat?to=${teacherUserId}&name=${teacherName}&avatar=${teacherAvatar}&purchase=true`
        });
      };
      const content = vue.ref("");
      const getAgreementByType = async () => {
        try {
          const queryParams2 = {
            current: 1,
            size: 10,
            title: "咨询服务须知"
          };
          let { data } = await articleByType(queryParams2);
          content.value = data.records[0].content;
        } catch (error) {
          formatAppLog("log", "at pages/payment/order-details.vue:274", error);
        }
      };
      getAgreementByType();
      const copyText = (text) => {
        uni.setClipboardData({
          data: text,
          success(e2) {
            uni.showToast({
              title: "已复制"
            });
          }
        });
      };
      const popup = vue.ref(null);
      const handleClause = (val2) => {
        popup.value.open("center");
      };
      const closePopup = () => {
        uni.navigateTo({
          url: `/pages/payment/order/refund-order?order=${JSON.stringify(orderInfo.value)}`
        });
        popup.value.close();
      };
      const paymentMethod = vue.ref("weixin");
      const {
        isLoading,
        paymentStatus,
        initPaymentChannels,
        wechatPay,
        alipay,
        PAYMENT_STATUS: PAYMENT_STATUS2
      } = usePayment();
      const orderPay = async (id2) => {
        try {
          const api = paymentMethod.value == "weixin" ? wxPay : aliPay;
          const type = paymentMethod.value == "weixin" ? "wxPay" : "aliPay";
          const res2 = await orderList(orderData.value);
          const { data } = await api({
            orderId: res2.data.orderSn,
            amount: res2.data.amount,
            type,
            status: 1
          });
          if (paymentMethod.value == "weixin") {
            handleWechatPay(data.orderString);
          } else {
            handleAlipay(data.orderString, res2.data.orderSn);
          }
        } catch (err) {
          message.value = err.message || "支付宝支付失败";
        }
      };
      const handleAlipay = async (orderInfo2, orderSn) => {
        try {
          const result = await alipay(orderInfo2);
          payResultApi(orderSn);
        } catch (err) {
          message.value = err.message || "支付宝支付失败";
        }
      };
      const handleWechatPay = async (orderInfo2) => {
        try {
          const result = await wechatPay(orderInfo2);
          if (result.status === PAYMENT_STATUS2.SUCCESS) {
            message.value = "微信支付成功";
          }
        } catch (err) {
          message.value = err.message || "微信支付失败";
        }
      };
      const payResultApi = async (orderSn) => {
        try {
          const result = await payResult({ orderSn });
          if (result.data.status == 2) {
            popupType.value = "success";
            popup.value.open("center");
          }
        } catch (err) {
          message.value = err.message || "支付失败";
        }
      };
      const __returned__ = { globalStore, statusBarHeight, orderInfo, typeId, serviceExperience, getStatusText, orderDetailApi, scrollTop, onPageScroll: onPageScroll2, backFn, gotoPrivacy, handleComplaint, handleComment, handleChat, content, getAgreementByType, copyText, popup, handleClause, closePopup, paymentMethod, isLoading, paymentStatus, initPaymentChannels, wechatPay, alipay, PAYMENT_STATUS: PAYMENT_STATUS2, orderPay, handleAlipay, handleWechatPay, payResultApi, ref: vue.ref, watch: vue.watch, get useGlobalDataStore() {
        return useGlobalDataStore;
      }, get onShow() {
        return onShow;
      }, get onLoad() {
        return onLoad;
      }, get payment() {
        return payment;
      }, get wxPay() {
        return wxPay;
      }, get aliPay() {
        return aliPay;
      }, get orderList() {
        return orderList;
      }, get payResult() {
        return payResult;
      }, get getUserInfo() {
        return getUserInfo;
      }, get usePayment() {
        return usePayment;
      }, get orderDetail() {
        return orderDetail;
      }, get getServiceExperience() {
        return getServiceExperience;
      }, get getServiceExperienceCon() {
        return getServiceExperienceCon;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$r(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    const _component_uni_nav_bar = resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"), __easycom_1$4);
    const _component_uni_popup = resolveEasycom(vue.resolveDynamicComponent("uni-popup"), __easycom_3$5);
    return vue.openBlock(), vue.createElementBlock("view", { class: "settled-box" }, [
      vue.createElementVNode("view", { class: "header" }, [
        vue.createVNode(_component_uni_nav_bar, {
          class: vue.normalizeClass([$setup.scrollTop > 15 ? "scrollClass" : "", "header-bar"]),
          backgroundColor: "rgba(255,255,255,0)",
          border: false,
          title: "订单详情"
        }, {
          left: vue.withCtx(() => [
            vue.createVNode(_component_uni_icons, {
              type: "left",
              size: "24",
              onClick: $setup.backFn
            })
          ]),
          _: 1
          /* STABLE */
        }, 8, ["class"])
      ]),
      vue.createElementVNode(
        "scroll-view",
        {
          "scroll-y": "",
          onScroll: $setup.onPageScroll,
          style: { "height": "100vh" },
          "show-scrollbar": false
        },
        [
          vue.createElementVNode("view", { class: "consultation-content" }, [
            vue.createElementVNode("view", { class: "notice-bar" }, [
              vue.createVNode(_component_uni_icons, {
                type: "sound",
                size: "20",
                color: "#F87171"
              }),
              vue.createElementVNode("view", { class: "notice-text" }, " 为确保沟通顺畅，请提前确认设备是否开启对应麦克风权限>> ")
            ]),
            $setup.orderInfo.status == 1 || $setup.orderInfo.status == 2 ? (vue.openBlock(), vue.createElementBlock("view", {
              key: 0,
              class: "appointment-info"
            }, [
              vue.createElementVNode("view", {
                class: "info-item",
                style: { "margin-top": "0" }
              }, [
                vue.createElementVNode("view", {
                  class: "info-label",
                  style: { "color": "#FF8F1F" }
                }, [
                  vue.createVNode(_component_uni_icons, {
                    "custom-prefix": "iconfont",
                    type: "icon-deng",
                    size: "18",
                    color: "#FF8F1F",
                    class: "icon"
                  }),
                  vue.createTextVNode(
                    " " + vue.toDisplayString($setup.getStatusText($setup.orderInfo.status)),
                    1
                    /* TEXT */
                  )
                ])
              ]),
              vue.createElementVNode("view", { class: "info-item" }, [
                $setup.orderInfo.status == 1 ? (vue.openBlock(), vue.createElementBlock("view", {
                  key: 0,
                  class: "info-label info-text"
                }, [
                  vue.createTextVNode("订单自动释放剩余 "),
                  vue.createElementVNode(
                    "text",
                    null,
                    vue.toDisplayString($setup.orderInfo.remainingDuration),
                    1
                    /* TEXT */
                  )
                ])) : vue.createCommentVNode("v-if", true),
                $setup.orderInfo.status == 2 ? (vue.openBlock(), vue.createElementBlock("view", {
                  key: 1,
                  class: "info-label info-text"
                }, [
                  vue.createTextVNode("订单服务时长剩余 "),
                  vue.createElementVNode(
                    "text",
                    null,
                    vue.toDisplayString($setup.orderInfo.remainingDuration),
                    1
                    /* TEXT */
                  )
                ])) : vue.createCommentVNode("v-if", true)
              ])
            ])) : vue.createCommentVNode("v-if", true),
            vue.createElementVNode("view", { class: "user-info-section" }, [
              vue.createElementVNode("view", { class: "user-details" }, [
                vue.createElementVNode("view", { class: "user-name" }, [
                  vue.createElementVNode("image", {
                    src: $setup.orderInfo.teacherAvatar,
                    class: "user-avatar"
                  }, null, 8, ["src"]),
                  vue.createElementVNode("view", { class: "user-info" }, [
                    vue.createElementVNode(
                      "view",
                      null,
                      vue.toDisplayString($setup.orderInfo.teacherName),
                      1
                      /* TEXT */
                    ),
                    vue.createElementVNode("view", { class: "user-expertise" }, [
                      vue.createElementVNode(
                        "text",
                        null,
                        "123" + vue.toDisplayString($setup.serviceExperience.platformHours) + "+",
                        1
                        /* TEXT */
                      ),
                      vue.createTextVNode(" 小时经验 "),
                      vue.createElementVNode(
                        "text",
                        null,
                        "13" + vue.toDisplayString($setup.serviceExperience.years) + "年",
                        1
                        /* TEXT */
                      ),
                      vue.createTextVNode(" 从业 "),
                      vue.createElementVNode(
                        "text",
                        null,
                        "2" + vue.toDisplayString($setup.serviceExperience.commentCount) + "+",
                        1
                        /* TEXT */
                      ),
                      vue.createTextVNode(" 评价 ")
                    ])
                  ])
                ]),
                vue.createElementVNode("view", {
                  class: "user-but",
                  onClick: $setup.handleChat
                }, "咨询历史")
              ]),
              vue.createVNode(_component_uni_icons, {
                type: "chatboxes",
                color: "#35ca95",
                size: "30",
                onClick: $setup.handleChat
              })
            ]),
            vue.createElementVNode("view", { class: "appointment-info" }, [
              vue.createElementVNode("view", { class: "info-title" }, "服务信息"),
              vue.createElementVNode("view", { class: "info-item" }, [
                vue.createElementVNode("view", { class: "info-label" }, "购买时长："),
                vue.createElementVNode("view", { class: "consultation-methods" }, [
                  vue.createElementVNode(
                    "text",
                    { class: "method-text" },
                    vue.toDisplayString($setup.orderInfo.buyDuration),
                    1
                    /* TEXT */
                  )
                ])
              ]),
              vue.createElementVNode("view", { class: "info-item" }, [
                vue.createElementVNode("view", { class: "info-label" }, "服务方式："),
                vue.createElementVNode("view", { class: "consultation-methods" }, [
                  $setup.orderInfo.consultTypeDesc == "视频" ? (vue.openBlock(), vue.createElementBlock("view", {
                    key: 0,
                    class: "method-item"
                  }, [
                    vue.createVNode(_component_uni_icons, {
                      type: "videocam",
                      size: "20",
                      color: "#34A76F"
                    }),
                    vue.createElementVNode("text", { class: "method-text" }, "视频")
                  ])) : vue.createCommentVNode("v-if", true),
                  $setup.orderInfo.consultTypeDesc == "语音" ? (vue.openBlock(), vue.createElementBlock("view", {
                    key: 1,
                    class: "method-item"
                  }, [
                    vue.createVNode(_component_uni_icons, {
                      type: "mic",
                      size: "20",
                      color: "#34A76F"
                    }),
                    vue.createElementVNode("text", { class: "method-text" }, "语音")
                  ])) : vue.createCommentVNode("v-if", true),
                  $setup.orderInfo.consultTypeDesc == "文本" ? (vue.openBlock(), vue.createElementBlock("view", {
                    key: 2,
                    class: "method-item"
                  }, [
                    vue.createVNode(_component_uni_icons, {
                      type: "mic",
                      size: "20",
                      color: "#34A76F"
                    }),
                    vue.createElementVNode("text", { class: "method-text" }, "文本")
                  ])) : vue.createCommentVNode("v-if", true)
                ])
              ]),
              vue.createElementVNode("view", { class: "info-item" }, [
                vue.createElementVNode("view", { class: "info-label" }, "预约时间："),
                vue.createElementVNode(
                  "view",
                  { class: "info-value" },
                  vue.toDisplayString($setup.orderInfo.reserveDate),
                  1
                  /* TEXT */
                )
              ])
            ]),
            vue.createElementVNode("view", { class: "appointment-info" }, [
              vue.createElementVNode("view", { class: "info-title" }, [
                vue.createElementVNode("view", null, "订单信息"),
                $setup.orderInfo.status == 2 ? (vue.openBlock(), vue.createElementBlock("view", {
                  key: 0,
                  class: "info-refund",
                  onClick: $setup.handleClause
                }, "我要退款")) : vue.createCommentVNode("v-if", true)
              ]),
              vue.createElementVNode("view", { class: "info-item" }, [
                vue.createElementVNode("view", { class: "info-label" }, "订单编号"),
                vue.createElementVNode("view", {
                  class: "consultation-methods",
                  style: { "display": "block" }
                }, [
                  vue.createElementVNode("image", {
                    src: _imports_0$5,
                    style: { "width": "22rpx", "height": "22rpx", "margin-right": "10rpx" },
                    onClick: _cache[0] || (_cache[0] = ($event) => $setup.copyText($setup.orderInfo.orderSn))
                  }),
                  vue.createElementVNode(
                    "text",
                    { class: "method-text" },
                    vue.toDisplayString($setup.orderInfo.orderSn),
                    1
                    /* TEXT */
                  )
                ])
              ]),
              vue.createElementVNode("view", { class: "info-item" }, [
                vue.createElementVNode("view", { class: "info-label" }, "创建时间"),
                vue.createElementVNode(
                  "view",
                  { class: "info-value" },
                  vue.toDisplayString($setup.orderInfo.createTime),
                  1
                  /* TEXT */
                )
              ]),
              vue.createElementVNode("view", { class: "info-item" }, [
                vue.createElementVNode("view", { class: "info-label" }, "订单金额"),
                vue.createElementVNode(
                  "view",
                  { class: "info-value" },
                  "￥" + vue.toDisplayString($setup.orderInfo.orderMoney),
                  1
                  /* TEXT */
                )
              ]),
              vue.createElementVNode("view", { class: "info-item" }, [
                vue.createElementVNode("view", { class: "info-label" }, "支付方式"),
                vue.createElementVNode("view", { class: "consultation-methods" }, [
                  $setup.orderInfo.payType == "wxpay" ? (vue.openBlock(), vue.createElementBlock("view", {
                    key: 0,
                    class: "method-item"
                  }, [
                    vue.createElementVNode("image", { src: "http://cdn.yupao.com/pc/images/zgp/recharge-pay-wechatimg.png" }),
                    vue.createElementVNode("text", { class: "method-text" }, "微信支付")
                  ])) : (vue.openBlock(), vue.createElementBlock("view", {
                    key: 1,
                    class: "method-item"
                  }, [
                    vue.createElementVNode("image", { src: "http://cdn.yupao.com/pc/images/zgp/recharge-pay-alipayimg.png" }),
                    vue.createElementVNode("text", { class: "method-text" }, "支付宝支付")
                  ]))
                ])
              ])
            ]),
            vue.createElementVNode("view", { class: "appointment-info" }, [
              vue.createElementVNode("view", { class: "info-protocol" }, [
                vue.createElementVNode("view", null, [
                  vue.createTextVNode("查看"),
                  vue.createElementVNode("text", {
                    style: { "color": "#34a76f" },
                    onClick: _cache[1] || (_cache[1] = ($event) => $setup.gotoPrivacy("用户下单服务协议"))
                  }, "《用户下单服务协议》")
                ]),
                vue.createElementVNode("view", {
                  style: { "color": "#898686" },
                  onClick: $setup.handleComplaint
                }, "投诉")
              ])
            ]),
            $setup.orderInfo.status == 1 ? (vue.openBlock(), vue.createElementBlock("view", {
              key: 1,
              onClick: $setup.orderPay,
              class: "appointment-but"
            }, "立即支付")) : vue.createCommentVNode("v-if", true),
            $setup.orderInfo.status == 2 ? (vue.openBlock(), vue.createElementBlock("view", {
              key: 2,
              onClick: $setup.handleChat,
              class: "appointment-but"
            }, "立即联系")) : vue.createCommentVNode("v-if", true),
            $setup.orderInfo.status == 3 ? (vue.openBlock(), vue.createElementBlock("view", {
              key: 3,
              onClick: $setup.handleComment,
              class: "appointment-but"
            }, "立即评价")) : vue.createCommentVNode("v-if", true)
          ])
        ],
        32
        /* NEED_HYDRATION */
      ),
      vue.createVNode(
        _component_uni_popup,
        {
          ref: "popup",
          type: "center",
          animation: false
        },
        {
          default: vue.withCtx(() => [
            vue.createElementVNode("view", { class: "popup-container" }, [
              vue.createElementVNode("view", { class: "popup-title" }, [
                vue.createElementVNode("view", null, "退款须知"),
                vue.createElementVNode("image", {
                  src: _imports_1$1,
                  style: { "width": "33rpx", "height": "33rpx", "margin-right": "10rpx" }
                })
              ]),
              vue.createElementVNode("view", { class: "popup-content" }, [
                vue.createElementVNode("view", { class: "list-item" }, "订单剩余未服务时长在有效期内可退"),
                vue.createElementVNode("view", { class: "list-item" }, "如拨打过且通话时长>3分钟，根据实际使用时长，按照原价进行扣减后退费;"),
                vue.createElementVNode("view", { class: "list-item" }, "文字倾诉订单下单后未回复的，自动退款;")
              ]),
              vue.createElementVNode("view", { class: "popup-btn" }, [
                vue.createElementVNode("view", {
                  class: "popup-btn-text",
                  onClick: $setup.closePopup
                }, "我知道了")
              ])
            ])
          ]),
          _: 1
          /* STABLE */
        },
        512
        /* NEED_PATCH */
      )
    ]);
  }
  const PagesPaymentOrderDetails = /* @__PURE__ */ _export_sfc(_sfc_main$s, [["render", _sfc_render$r], ["__scopeId", "data-v-bf2277ae"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/payment/order-details.vue"]]);
  const _sfc_main$r = {
    name: "u-checkbox",
    emits: ["update:modelValue", "input", "change"],
    props: {
      // 是否为选中状态
      value: {
        type: Boolean,
        default: false
      },
      modelValue: {
        type: Boolean,
        default: false
      },
      // checkbox的名称
      name: {
        type: [String, Number],
        default: ""
      },
      // 形状，square为方形，circle为圆型
      shape: {
        type: String,
        default: ""
      },
      // 是否禁用
      disabled: {
        type: [String, Boolean],
        default: ""
      },
      // 是否禁止点击提示语选中复选框
      labelDisabled: {
        type: [String, Boolean],
        default: ""
      },
      // 选中状态下的颜色，如设置此值，将会覆盖checkboxGroup的activeColor值
      activeColor: {
        type: String,
        default: ""
      },
      // 图标的大小，单位rpx
      iconSize: {
        type: [String, Number],
        default: ""
      },
      // label的字体大小，rpx单位
      labelSize: {
        type: [String, Number],
        default: ""
      },
      // 组件的整体大小
      size: {
        type: [String, Number],
        default: ""
      },
      // 设置不确定状态，仅负责样式控制
      indeterminate: {
        type: Boolean,
        default: false
      }
    },
    data() {
      return {
        parentDisabled: false,
        newParams: {},
        parent: null
      };
    },
    created() {
      this.parent = this.$u.$parent.call(this, "u-checkbox-group");
      this.parent && this.parent.children.push(this);
    },
    computed: {
      valueCom() {
        return this.modelValue;
      },
      // 是否禁用，如果父组件u-checkbox-group禁用的话，将会忽略子组件的配置
      isDisabled() {
        return this.disabled !== "" ? this.disabled : this.parent ? this.parent.disabled : false;
      },
      // 是否禁用label点击
      isLabelDisabled() {
        return this.labelDisabled !== "" ? this.labelDisabled : this.parent ? this.parent.labelDisabled : false;
      },
      // 组件尺寸，对应size的值，默认值为34rpx
      checkboxSize() {
        return this.size ? this.size : this.parent ? this.parent.size : 34;
      },
      // 组件的勾选图标的尺寸，默认20
      checkboxIconSize() {
        return this.iconSize ? this.iconSize : this.parent ? this.parent.iconSize : 20;
      },
      // 组件选中激活时的颜色
      elActiveColor() {
        return this.activeColor ? this.activeColor : this.parent ? this.parent.activeColor : "primary";
      },
      // 组件的形状
      elShape() {
        return this.shape ? this.shape : this.parent ? this.parent.shape : "square";
      },
      iconStyle() {
        let style = {};
        if (this.elActiveColor && this.valueCom && !this.isDisabled) {
          style.borderColor = this.elActiveColor;
          style.backgroundColor = this.elActiveColor;
        }
        style.width = this.$u.addUnit(this.checkboxSize);
        style.height = this.$u.addUnit(this.checkboxSize);
        return style;
      },
      // checkbox内部的勾选图标，如果选中状态，为白色，否则为透明色即可
      iconColor() {
        if (this.indeterminate)
          return "#ffffff";
        return this.valueCom ? "#ffffff" : "transparent";
      },
      iconClass() {
        let classes = [];
        classes.push("u-checkbox__icon-wrap--" + this.elShape);
        if (this.valueCom == true)
          classes.push("u-checkbox__icon-wrap--checked");
        if (this.isDisabled)
          classes.push("u-checkbox__icon-wrap--disabled");
        if (this.valueCom && this.isDisabled)
          classes.push("u-checkbox__icon-wrap--disabled--checked");
        if (this.indeterminate === true)
          classes.push("u-checkbox__icon-wrap--indeterminate");
        return classes.join(" ");
      },
      checkboxStyle() {
        let style = {};
        if (this.parent && this.parent.width) {
          style.width = this.parent.width;
          style.flex = `0 0 ${this.parent.width}`;
        }
        if (this.parent && this.parent.wrap) {
          style.width = "100%";
          style.flex = "0 0 100%";
        }
        return style;
      }
    },
    mounted() {
      this._emitEvent();
    },
    watch: {
      valueCom: {
        handler: function(newVal, oldVal) {
          this._emitEvent();
        }
      }
    },
    methods: {
      _emitEvent() {
        let value = this.valueCom;
        let obj = {
          value,
          name: this.name
        };
        if (this.parent && this.parent.emitEvent)
          this.parent.emitEvent(obj);
      },
      onClickLabel() {
        if (!this.isLabelDisabled && !this.isDisabled) {
          this.setValue();
        }
      },
      toggle() {
        if (!this.isDisabled) {
          this.setValue();
        }
      },
      emitEvent() {
        let obj = {
          value: !this.valueCom,
          name: this.name
        };
        this.$emit("change", obj);
        if (this.parent && this.parent.emitEvent)
          this.parent.emitEvent(obj);
      },
      // 设置input的值，这里通过input事件，设置通过v-model绑定的组件的值
      setValue() {
        let value = this.valueCom;
        let checkedNum = 0;
        if (this.parent && this.parent.children) {
          this.parent.children.map((val2) => {
            if (val2.valueCom || val2.value)
              checkedNum++;
          });
        }
        if (value == true) {
          this.emitEvent();
          this.$emit("input", !value);
          this.$emit("update:modelValue", !value);
        } else {
          if (this.parent && checkedNum >= this.parent.max) {
            return this.$u.toast(`最多可选${this.parent.max}项`);
          }
          this.emitEvent();
          this.$emit("input", !value);
          this.$emit("update:modelValue", !value);
        }
      }
    }
  };
  function _sfc_render$q(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_u_icon = resolveEasycom(vue.resolveDynamicComponent("u-icon"), __easycom_2$b);
    return vue.openBlock(), vue.createElementBlock(
      "view",
      {
        class: "u-checkbox",
        style: vue.normalizeStyle([$options.checkboxStyle])
      },
      [
        vue.createElementVNode(
          "view",
          {
            class: vue.normalizeClass(["u-checkbox__icon-wrap", [$options.iconClass]]),
            onClick: _cache[0] || (_cache[0] = (...args) => $options.toggle && $options.toggle(...args)),
            style: vue.normalizeStyle([$options.iconStyle])
          },
          [
            $props.indeterminate ? (vue.openBlock(), vue.createBlock(_component_u_icon, {
              key: 0,
              class: "u-checkbox__icon-wrap__icon",
              name: "minus",
              size: $options.checkboxIconSize,
              color: $options.iconColor
            }, null, 8, ["size", "color"])) : (vue.openBlock(), vue.createBlock(_component_u_icon, {
              key: 1,
              class: "u-checkbox__icon-wrap__icon",
              name: "checkbox-mark",
              size: $options.checkboxIconSize,
              color: $options.iconColor
            }, null, 8, ["size", "color"]))
          ],
          6
          /* CLASS, STYLE */
        ),
        vue.createElementVNode(
          "view",
          {
            class: "u-checkbox__label",
            onClick: _cache[1] || (_cache[1] = (...args) => $options.onClickLabel && $options.onClickLabel(...args)),
            style: vue.normalizeStyle({
              fontSize: _ctx.$u.addUnit($props.labelSize)
            })
          },
          [
            vue.renderSlot(_ctx.$slots, "default", {}, void 0, true)
          ],
          4
          /* STYLE */
        )
      ],
      4
      /* STYLE */
    );
  }
  const __easycom_2$1 = /* @__PURE__ */ _export_sfc(_sfc_main$r, [["render", _sfc_render$q], ["__scopeId", "data-v-cafae08d"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/uni_modules/vk-uview-ui/components/u-checkbox/u-checkbox.vue"]]);
  const _sfc_main$q = {
    __name: "register",
    setup(__props, { expose: __expose }) {
      __expose();
      const border = vue.ref(true);
      const agree = vue.ref(true);
      const codeText = vue.ref("获取验证码");
      const form = vue.ref({
        userName: null,
        code: null,
        password: null
      });
      const uCode = vue.ref(null);
      const countdown = vue.ref(0);
      const gotoLogin = () => {
        uni.navigateBack();
      };
      const gotoPrivacy = () => {
        uni.switchTab({
          url: "/pages/index/index"
        });
      };
      const isValidPhone = (num) => /^1[3-9]\d{9}$/.test(num);
      const getCode = async () => {
        if (countdown.value > 0)
          return;
        if (!form.value.userName) {
          uni.showToast({
            title: "请输入手机号",
            icon: "none"
          });
          return;
        }
        if (!isValidPhone(form.value.userName)) {
          uni.showToast({
            title: "手机号格式不正确",
            icon: "none"
          });
          return;
        }
        let resp = await sendSms({
          phone: form.value.userName,
          type: 2
        });
        if (resp.code == 0) {
          uni.showToast({
            title: "验证码已发送",
            icon: "none"
          });
          countdown.value = 60;
          const timer = setInterval(() => {
            countdown.value--;
            if (countdown.value <= 0)
              clearInterval(timer);
          }, 1e3);
        }
      };
      const gotoRegister = async () => {
        if (!form.value.userName) {
          uni.showToast({
            title: "请输入手机号",
            icon: "error"
          });
          return;
        }
        if (!form.value.code) {
          uni.showToast({
            title: "请输入验证码",
            icon: "error"
          });
          return;
        }
        if (!form.value.password) {
          uni.showToast({
            title: "请输入密码",
            icon: "error"
          });
          return;
        }
        if (!agree.value) {
          uni.showToast({
            title: "请同意协议",
            icon: "error"
          });
        }
        let resp = await register(form.value);
        let userInfo = resp.data;
        formatAppLog("log", "at pages/register/register.vue:145", resp);
        uni.setStorageSync("token", resp.data.token);
        uni.setStorageSync("currentUser", userInfo);
        if (resp.code == 0) {
          uni.navigateTo({
            url: "/pages/supplementInfo/supplementInfo"
          });
        }
      };
      const __returned__ = { border, agree, codeText, form, uCode, countdown, gotoLogin, gotoPrivacy, isValidPhone, getCode, gotoRegister, ref: vue.ref, get sendSms() {
        return sendSms;
      }, get register() {
        return register;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$p(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_u_icon = resolveEasycom(vue.resolveDynamicComponent("u-icon"), __easycom_2$b);
    const _component_u_button = resolveEasycom(vue.resolveDynamicComponent("u-button"), __easycom_1$2);
    const _component_u_checkbox = resolveEasycom(vue.resolveDynamicComponent("u-checkbox"), __easycom_2$1);
    return vue.openBlock(), vue.createElementBlock("view", { class: "login-box" }, [
      vue.createElementVNode("view", { class: "login-bg" }, [
        vue.createElementVNode("view", { class: "bg-top" }),
        vue.createElementVNode("view", { class: "bg-top-content" }, [
          vue.createVNode(_component_u_icon, {
            name: "arrow-left",
            size: "42",
            onClick: $setup.gotoLogin
          }),
          vue.createElementVNode("view", { style: { "margin-left": "30rpx", "margin-right": "30rpx" } }, [
            vue.createElementVNode("view", { class: "welcome" }, [
              vue.createElementVNode("text", null, "欢迎注册"),
              vue.createTextVNode(),
              vue.createElementVNode("text", { class: "txt" }, "「麦苗倾诉」")
            ]),
            vue.createElementVNode("view", { class: "msg" }, "注册账号发现更多精彩"),
            vue.createElementVNode("view", { style: {} }, [
              vue.createElementVNode("view", { class: "login-form" }, [
                vue.createElementVNode("view", { class: "input-box" }, [
                  vue.withDirectives(vue.createElementVNode(
                    "input",
                    {
                      class: "input",
                      type: "number",
                      "onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => $setup.form.userName = $event),
                      placeholder: "请输入手机号"
                    },
                    null,
                    512
                    /* NEED_PATCH */
                  ), [
                    [vue.vModelText, $setup.form.userName]
                  ])
                ]),
                vue.createElementVNode("view", { class: "input-box code-box" }, [
                  vue.withDirectives(vue.createElementVNode(
                    "input",
                    {
                      class: "input",
                      type: "number",
                      "onUpdate:modelValue": _cache[1] || (_cache[1] = ($event) => $setup.form.code = $event),
                      placeholder: "请输入验证码"
                    },
                    null,
                    512
                    /* NEED_PATCH */
                  ), [
                    [vue.vModelText, $setup.form.code]
                  ]),
                  vue.createElementVNode("view", { class: "divider" }),
                  vue.createElementVNode(
                    "text",
                    {
                      class: "get-code",
                      onClick: $setup.getCode
                    },
                    vue.toDisplayString($setup.countdown > 0 ? $setup.countdown + "s" : "获取验证码"),
                    1
                    /* TEXT */
                  )
                ]),
                vue.createElementVNode("view", { class: "input-box" }, [
                  vue.withDirectives(vue.createElementVNode(
                    "input",
                    {
                      class: "input",
                      type: "password",
                      "onUpdate:modelValue": _cache[2] || (_cache[2] = ($event) => $setup.form.password = $event),
                      placeholder: "请输入密码"
                    },
                    null,
                    512
                    /* NEED_PATCH */
                  ), [
                    [vue.vModelText, $setup.form.password]
                  ])
                ]),
                vue.createElementVNode("view", { style: { "margin-top": "80rpx" } }, [
                  vue.createVNode(_component_u_button, {
                    type: "success",
                    shape: "circle",
                    onClick: $setup.gotoRegister
                  }, {
                    default: vue.withCtx(() => [
                      vue.createTextVNode("确定注册")
                    ]),
                    _: 1
                    /* STABLE */
                  })
                ]),
                vue.createElementVNode("view", { style: { "text-align": "center", "margin-top": "20rpx" } }, [
                  vue.createElementVNode("text", null, "已有账号，现在去"),
                  vue.createElementVNode("text", {
                    style: { "color": "#34A755" },
                    onClick: $setup.gotoLogin
                  }, "登录>>")
                ])
              ])
            ])
          ])
        ])
      ]),
      vue.createElementVNode("view", { class: "agree" }, [
        vue.createVNode(_component_u_checkbox, {
          shape: "circle",
          "active-color": "#1EBC80",
          modelValue: $setup.agree,
          "onUpdate:modelValue": _cache[5] || (_cache[5] = ($event) => $setup.agree = $event),
          "label-size": "24"
        }, {
          default: vue.withCtx(() => [
            vue.createTextVNode("注册即代表同意 "),
            vue.createElementVNode("text", {
              class: "txt",
              onClick: _cache[3] || (_cache[3] = ($event) => $setup.gotoPrivacy(1))
            }, "《用户注册协议》"),
            vue.createTextVNode("和"),
            vue.createElementVNode("text", {
              class: "txt",
              onClick: _cache[4] || (_cache[4] = ($event) => $setup.gotoPrivacy(2))
            }, "《隐私协议》")
          ]),
          _: 1
          /* STABLE */
        }, 8, ["modelValue"])
      ])
    ]);
  }
  const PagesRegisterRegister = /* @__PURE__ */ _export_sfc(_sfc_main$q, [["render", _sfc_render$p], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/register/register.vue"]]);
  const _sfc_main$p = {
    __name: "settings",
    setup(__props, { expose: __expose }) {
      __expose();
      const maskPhone = (phone) => {
        if (!phone)
          return "";
        const s2 = String(phone);
        return s2.length >= 7 ? s2.slice(0, 3) + "****" + s2.slice(-4) : s2;
      };
      const items = vue.ref([
        { title: "账号与安全", value: "", route: "/pages/account/security" },
        {
          title: "隐私政策",
          value: "",
          route: "/pages/webview/webview?type=隐私政策"
        },
        {
          title: "用户协议",
          value: "",
          route: "/pages/webview/webview?type=用户协议"
        },
        { title: "关于麦苗倾诉", value: "", route: "/pages/webview/webview?type=关于麦苗倾诉" },
        { title: "帮助中心", value: "", route: "/pages/settings/help-center" }
      ]);
      const toLogout = () => {
        uni.showModal({
          title: "退出登录",
          content: "确定退出登录？",
          confirmText: "确定",
          cancelText: "取消",
          success(e2) {
            if (e2.confirm) {
              uni.clearStorageSync();
              uni.navigateTo({
                url: "/pages/login/login"
              });
            }
          }
        });
      };
      const onItemClick = (item) => {
        if (item.route) {
          uni.navigateTo({ url: item.route });
        } else {
          uni.showToast({ title: "未配置跳转", icon: "none" });
        }
      };
      const __returned__ = { maskPhone, items, toLogout, onItemClick, ref: vue.ref };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$o(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_u_icon = resolveEasycom(vue.resolveDynamicComponent("u-icon"), __easycom_2$b);
    const _component_u_button = resolveEasycom(vue.resolveDynamicComponent("u-button"), __easycom_1$2);
    return vue.openBlock(), vue.createElementBlock("view", { class: "page" }, [
      vue.createElementVNode("view", { class: "setting-list" }, [
        (vue.openBlock(true), vue.createElementBlock(
          vue.Fragment,
          null,
          vue.renderList($setup.items, (item, index) => {
            return vue.openBlock(), vue.createElementBlock("view", {
              key: index,
              class: "setting-item",
              onClick: ($event) => $setup.onItemClick(item)
            }, [
              vue.createElementVNode("view", { class: "left" }, [
                vue.createElementVNode(
                  "text",
                  { class: "title" },
                  vue.toDisplayString(item.title),
                  1
                  /* TEXT */
                ),
                item.sub ? (vue.openBlock(), vue.createElementBlock(
                  "text",
                  {
                    key: 0,
                    class: "sub"
                  },
                  vue.toDisplayString(item.sub),
                  1
                  /* TEXT */
                )) : vue.createCommentVNode("v-if", true)
              ]),
              vue.createElementVNode("view", { class: "right" }, [
                item.value ? (vue.openBlock(), vue.createElementBlock(
                  "text",
                  {
                    key: 0,
                    class: "value"
                  },
                  vue.toDisplayString(item.value),
                  1
                  /* TEXT */
                )) : vue.createCommentVNode("v-if", true),
                vue.createVNode(_component_u_icon, {
                  name: "arrow-right",
                  size: "28",
                  color: "#CFCFCF"
                })
              ])
            ], 8, ["onClick"]);
          }),
          128
          /* KEYED_FRAGMENT */
        ))
      ]),
      vue.createElementVNode("view", { class: "bottom-space" }),
      vue.createElementVNode("view", { style: { "margin": "30rpx" } }, [
        vue.createVNode(_component_u_button, {
          type: "error",
          onClick: $setup.toLogout
        }, {
          default: vue.withCtx(() => [
            vue.createTextVNode("退出登录")
          ]),
          _: 1
          /* STABLE */
        })
      ])
    ]);
  }
  const PagesSettingsSettings = /* @__PURE__ */ _export_sfc(_sfc_main$p, [["render", _sfc_render$o], ["__scopeId", "data-v-7fad0a1c"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/settings/settings.vue"]]);
  const _sfc_main$o = {
    __name: "security",
    setup(__props, { expose: __expose }) {
      __expose();
      const maskPhone = (phone) => {
        if (!phone)
          return "";
        const s2 = String(phone);
        return s2.length >= 7 ? s2.slice(0, 3) + "****" + s2.slice(-4) : s2;
      };
      const items = vue.ref([
        { title: "手机号", value: maskPhone("19512348441"), route: "/pages/account/phone" },
        { title: "登录密码设置 / 修改", value: "未设置", route: "/pages/account/password" },
        { title: "安全锁设置", value: "未设置", route: "/pages/account/safelock" },
        { title: "微信绑定", value: "未绑定", route: "/pages/account/wechat" },
        { title: "微博绑定", value: "未绑定", route: "/pages/account/weibo" },
        { title: "QQ 绑定", value: "未绑定", route: "/pages/account/qq" },
        { title: "账号注销", value: "", route: "/pages/account/delete" }
      ]);
      const onItemClick = (item) => {
        if (item.route) {
          uni.navigateTo({ url: item.route });
        } else {
          uni.showToast({ title: "未配置跳转", icon: "none" });
        }
      };
      const __returned__ = { maskPhone, items, onItemClick, ref: vue.ref };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$n(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_u_icon = resolveEasycom(vue.resolveDynamicComponent("u-icon"), __easycom_2$b);
    return vue.openBlock(), vue.createElementBlock("view", { class: "page" }, [
      vue.createElementVNode("view", { class: "setting-list" }, [
        (vue.openBlock(true), vue.createElementBlock(
          vue.Fragment,
          null,
          vue.renderList($setup.items, (item, index) => {
            return vue.openBlock(), vue.createElementBlock("view", {
              key: index,
              class: "setting-item",
              onClick: ($event) => $setup.onItemClick(item)
            }, [
              vue.createElementVNode("view", { class: "left" }, [
                vue.createElementVNode(
                  "text",
                  { class: "title" },
                  vue.toDisplayString(item.title),
                  1
                  /* TEXT */
                ),
                item.sub ? (vue.openBlock(), vue.createElementBlock(
                  "text",
                  {
                    key: 0,
                    class: "sub"
                  },
                  vue.toDisplayString(item.sub),
                  1
                  /* TEXT */
                )) : vue.createCommentVNode("v-if", true)
              ]),
              vue.createElementVNode("view", { class: "right" }, [
                item.value ? (vue.openBlock(), vue.createElementBlock(
                  "text",
                  {
                    key: 0,
                    class: "value"
                  },
                  vue.toDisplayString(item.value),
                  1
                  /* TEXT */
                )) : vue.createCommentVNode("v-if", true),
                vue.createVNode(_component_u_icon, {
                  name: "arrow-right",
                  size: "28",
                  color: "#CFCFCF"
                })
              ])
            ], 8, ["onClick"]);
          }),
          128
          /* KEYED_FRAGMENT */
        ))
      ]),
      vue.createElementVNode("view", { class: "bottom-space" })
    ]);
  }
  const PagesAccountSecurity = /* @__PURE__ */ _export_sfc(_sfc_main$o, [["render", _sfc_render$n], ["__scopeId", "data-v-0476cc82"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/account/security.vue"]]);
  const _sfc_main$n = {
    __name: "webview",
    setup(__props, { expose: __expose }) {
      __expose();
      const type = vue.ref("");
      const content = vue.ref("");
      onLoad((e2) => {
        type.value = e2.type;
        getAgreementByType();
      });
      const getAgreementByType = async () => {
        uni.setNavigationBarTitle({ title: type.value });
        try {
          const queryParams2 = {
            current: 1,
            size: 10,
            title: type.value
          };
          let { data } = await articleByType$1(queryParams2);
          content.value = data.records[0].content;
        } catch (error) {
          formatAppLog("log", "at pages/webview/webview.vue:29", error);
        }
      };
      const __returned__ = { type, content, getAgreementByType, ref: vue.ref, get onLoad() {
        return onLoad;
      }, get articleByType() {
        return articleByType$1;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$m(_ctx, _cache, $props, $setup, $data, $options) {
    return vue.openBlock(), vue.createElementBlock("view", { style: { "padding": "30rpx" } }, [
      vue.createElementVNode("rich-text", { nodes: $setup.content }, null, 8, ["nodes"])
    ]);
  }
  const PagesWebviewWebview = /* @__PURE__ */ _export_sfc(_sfc_main$n, [["render", _sfc_render$m], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/webview/webview.vue"]]);
  const _imports_1 = "/static/order/gold-coin.png";
  const _sfc_main$m = {
    __name: "bill",
    setup(__props, { expose: __expose }) {
      __expose();
      vue.useCssVars((_ctx) => ({
        "a4f8cb8c-statusBarHeight": statusBarHeight.value
      }));
      const globalStore = useGlobalDataStore();
      const statusBarHeight = vue.ref(globalStore.statusBarHeight + "px");
      const paramsList = vue.ref({
        current: 1,
        size: 10,
        params: {
          startTime: ""
          //开始时间
        }
      });
      const timeParams = vue.ref({
        year: true,
        month: true,
        day: true,
        hour: false,
        minute: false,
        second: false
      });
      const tabInexd = vue.ref(1);
      const birthdayShow = vue.ref(false);
      const timeText = vue.ref("请选择时间");
      const confirmBirthday = (e2) => {
        timeText.value = `${e2.year}-${e2.month}-${e2.day}`;
        paramsList.value.params.startTime = `${e2.year}-${e2.month}-${e2.day}`;
        list(tabInexd.value);
      };
      const type = vue.ref({});
      onLoad((options) => {
        type.value = JSON.parse(options.type);
      });
      const showTimePicker = () => {
        birthdayShow.value = true;
      };
      const moneyData = vue.ref({
        monthlyIncome: 0,
        //本月收益
        unsettledAmount: 1,
        //未结算金额
        withdrawableAmount: 0,
        //可提现余额
        totalAssets: 0
        //我的资产
      });
      const tabClick = (index) => {
        tabInexd.value = index;
        list(index);
      };
      const withdrawalData = vue.ref([]);
      const list = async (index) => {
        try {
          const api = index == 1 ? wallet : withdraw;
          const { data } = await api(paramsList.value);
          withdrawalData.value = data.records;
        } catch (error) {
          formatAppLog("log", "at pages/my/wallet/bill.vue:153", error);
        }
      };
      const withdrawal = async () => {
        try {
          const { data } = await summary();
          moneyData.value = data;
        } catch (error) {
          formatAppLog("log", "at pages/my/wallet/bill.vue:161", error);
        }
      };
      vue.onMounted(() => {
        list(1);
        withdrawal();
      });
      const backFn = () => {
        uni.navigateBack({
          delta: 1
        });
      };
      const scrollTop = vue.ref(0);
      onPageScroll((e2) => {
        scrollTop.value = e2.scrollTop;
      });
      const pasteId = (id2) => {
        formatAppLog("log", "at pages/my/wallet/bill.vue:183", id2);
        uni.setClipboardData({
          data: id2
        });
        uni.showToast({
          title: "复制成功",
          icon: "none"
        });
      };
      const __returned__ = { globalStore, statusBarHeight, paramsList, timeParams, tabInexd, birthdayShow, timeText, confirmBirthday, type, showTimePicker, moneyData, tabClick, withdrawalData, list, withdrawal, backFn, scrollTop, pasteId, ref: vue.ref, onMounted: vue.onMounted, get useGlobalDataStore() {
        return useGlobalDataStore;
      }, get onLoad() {
        return onLoad;
      }, get onPageScroll() {
        return onPageScroll;
      }, get summary() {
        return summary;
      }, get withdraw() {
        return withdraw;
      }, get wallet() {
        return wallet;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$l(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    const _component_uni_nav_bar = resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"), __easycom_1$4);
    const _component_u_picker = resolveEasycom(vue.resolveDynamicComponent("u-picker"), __easycom_1$3);
    return vue.openBlock(), vue.createElementBlock("view", { class: "settled-box" }, [
      vue.createElementVNode("view", { class: "header" }, [
        vue.createVNode(_component_uni_nav_bar, {
          class: vue.normalizeClass([$setup.scrollTop > 15 ? "scrollClass" : "", "header-bar"]),
          backgroundColor: "rgba(255,255,255,0)",
          border: false,
          title: "账单"
        }, {
          left: vue.withCtx(() => [
            vue.createVNode(_component_uni_icons, {
              type: "left",
              size: "24",
              onClick: $setup.backFn
            })
          ]),
          _: 1
          /* STABLE */
        }, 8, ["class"])
      ]),
      vue.createElementVNode("view", { class: "content" }, [
        vue.createElementVNode("view", { class: "content-title" }, [
          vue.createElementVNode(
            "view",
            {
              class: vue.normalizeClass($setup.tabInexd == 1 ? "hove-view" : "view"),
              onClick: _cache[0] || (_cache[0] = ($event) => $setup.tabClick(1))
            },
            "收入记录",
            2
            /* CLASS */
          ),
          vue.createElementVNode(
            "view",
            {
              class: vue.normalizeClass($setup.tabInexd == 2 ? "hove-view" : "view"),
              onClick: _cache[1] || (_cache[1] = ($event) => $setup.tabClick(2))
            },
            "提现记录",
            2
            /* CLASS */
          )
        ]),
        vue.createElementVNode("view", { class: "content-details" }, [
          vue.createElementVNode("view", { class: "detail-item" }, [
            vue.createElementVNode(
              "view",
              null,
              vue.toDisplayString($setup.tabInexd == 1 ? "当前收益" : "累计提现"),
              1
              /* TEXT */
            ),
            vue.createElementVNode(
              "text",
              null,
              vue.toDisplayString($setup.tabInexd == 1 ? $setup.moneyData.monthlyIncome : $setup.moneyData.unsettledAmount),
              1
              /* TEXT */
            )
          ]),
          vue.createElementVNode("view", {
            class: "uni-list-cell",
            onClick: $setup.showTimePicker
          }, [
            vue.createElementVNode("view", { class: "uni-list-cell-left" }, [
              vue.createVNode(_component_uni_icons, {
                type: "calendar",
                size: "20",
                color: "#fff"
              }),
              vue.createElementVNode(
                "text",
                null,
                vue.toDisplayString($setup.timeText),
                1
                /* TEXT */
              )
            ]),
            vue.createElementVNode("view", { class: "uni-list-cell-db" }, [
              vue.createVNode(_component_u_picker, {
                type: "text",
                modelValue: $setup.birthdayShow,
                "onUpdate:modelValue": _cache[2] || (_cache[2] = ($event) => $setup.birthdayShow = $event),
                params: $setup.timeParams,
                mode: "time",
                onConfirm: $setup.confirmBirthday
              }, null, 8, ["modelValue", "params"])
            ])
          ])
        ]),
        $setup.tabInexd == 1 ? (vue.openBlock(), vue.createElementBlock("view", {
          key: 0,
          class: "clause"
        }, [
          (vue.openBlock(true), vue.createElementBlock(
            vue.Fragment,
            null,
            vue.renderList($setup.withdrawalData, (item, index) => {
              return vue.openBlock(), vue.createElementBlock("view", {
                class: "clause-item",
                key: index
              }, [
                vue.createElementVNode("view", { class: "item-head" }, [
                  vue.createElementVNode("view", { class: "head-left" }, [
                    vue.createElementVNode("view", null, "订单编号"),
                    vue.createElementVNode(
                      "view",
                      { class: "order-number" },
                      vue.toDisplayString(item.orderSn),
                      1
                      /* TEXT */
                    ),
                    vue.createElementVNode("image", {
                      src: _imports_0$5,
                      onClick: ($event) => $setup.pasteId(item.orderSn)
                    }, null, 8, ["onClick"])
                  ]),
                  vue.createElementVNode(
                    "view",
                    { class: "head-right" },
                    vue.toDisplayString(item.createTime),
                    1
                    /* TEXT */
                  )
                ]),
                vue.createElementVNode("view", { class: "item-content" }, [
                  vue.createElementVNode("view", { class: "content-left" }, [
                    vue.createElementVNode("view", { class: "left-top" }, [
                      vue.createElementVNode("image", {
                        src: $setup.type.avatar
                      }, null, 8, ["src"]),
                      vue.createElementVNode(
                        "view",
                        null,
                        vue.toDisplayString($setup.type.realName),
                        1
                        /* TEXT */
                      )
                    ]),
                    vue.createElementVNode("view", { class: "left-bottom" }, [
                      vue.createElementVNode("view", null, [
                        vue.createElementVNode("text", null, "服务方式："),
                        vue.createTextVNode(
                          vue.toDisplayString(item.consultTypeDesc),
                          1
                          /* TEXT */
                        )
                      ]),
                      vue.createElementVNode("view", null, [
                        vue.createElementVNode("text", null, "购买时长："),
                        vue.createTextVNode(
                          vue.toDisplayString(item.serviceInfo),
                          1
                          /* TEXT */
                        )
                      ])
                    ])
                  ]),
                  vue.createElementVNode("view", { class: "content-right" }, [
                    vue.createElementVNode(
                      "view",
                      null,
                      "+" + vue.toDisplayString(item.amount),
                      1
                      /* TEXT */
                    ),
                    vue.createElementVNode(
                      "text",
                      null,
                      vue.toDisplayString(item.statusDesc),
                      1
                      /* TEXT */
                    )
                  ])
                ])
              ]);
            }),
            128
            /* KEYED_FRAGMENT */
          ))
        ])) : vue.createCommentVNode("v-if", true),
        $setup.tabInexd == 2 ? (vue.openBlock(), vue.createElementBlock("view", {
          key: 1,
          class: "clause"
        }, [
          (vue.openBlock(true), vue.createElementBlock(
            vue.Fragment,
            null,
            vue.renderList($setup.withdrawalData, (item, index) => {
              return vue.openBlock(), vue.createElementBlock("view", {
                class: "clause-item",
                style: { "flex-direction": "row" },
                key: index
              }, [
                vue.createElementVNode("view", { class: "item-gold" }, [
                  vue.createElementVNode("view", { class: "gold-icon" }, [
                    vue.createElementVNode("image", { src: _imports_1 })
                  ]),
                  vue.createElementVNode("view", { class: "gold-content" }, [
                    vue.createElementVNode("view", null, "提现"),
                    vue.createElementVNode(
                      "view",
                      { class: "gold-time" },
                      vue.toDisplayString(item.applyTime),
                      1
                      /* TEXT */
                    )
                  ])
                ]),
                vue.createElementVNode("view", { class: "item-coin" }, [
                  vue.createElementVNode(
                    "view",
                    { class: "gold-num" },
                    "-" + vue.toDisplayString(item.amount),
                    1
                    /* TEXT */
                  ),
                  vue.createElementVNode("view", { class: "gold-status" }, "(审核中)")
                ])
              ]);
            }),
            128
            /* KEYED_FRAGMENT */
          ))
        ])) : vue.createCommentVNode("v-if", true)
      ])
    ]);
  }
  const PagesMyWalletBill = /* @__PURE__ */ _export_sfc(_sfc_main$m, [["render", _sfc_render$l], ["__scopeId", "data-v-a4f8cb8c"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/my/wallet/bill.vue"]]);
  const _imports_0$3 = "/static/my/withdrawal.png";
  const _sfc_main$l = {
    __name: "withdrawal",
    setup(__props, { expose: __expose }) {
      __expose();
      vue.useCssVars((_ctx) => ({
        "36f14612-statusBarHeight": statusBarHeight.value
      }));
      const globalStore = useGlobalDataStore();
      const statusBarHeight = vue.ref(globalStore.statusBarHeight + "px");
      const amount2 = vue.ref();
      const bankData = vue.ref([]);
      const balance = vue.ref(0);
      const bankCardId = vue.ref();
      const bankBool = vue.ref(false);
      const title = vue.ref("绑定银行卡");
      const bankCardList = async () => {
        try {
          const { data } = await bank();
          bankData.value = data;
          Default();
        } catch (e2) {
          formatAppLog("log", "at pages/my/wallet/withdrawal.vue:86", e2);
        }
      };
      onShow(() => {
        bankCardList();
        Default();
      });
      const backFn = () => {
        uni.navigateBack({
          delta: 1
        });
      };
      const scrollTop = vue.ref(0);
      onPageScroll((e2) => {
        scrollTop.value = e2.scrollTop;
      });
      onLoad((options) => {
        balance.value = options.amount;
      });
      const handleWithdrawal = (url2) => {
        uni.navigateTo({ url: url2 });
      };
      const format = (val2) => {
        return val2.slice(-4);
      };
      const Default = () => {
        if (bankData.value.length == 0) {
          return title.value = "绑定银行卡";
        }
        if (bankData.value.length >= 1) {
          bankCardId.value = bankData.value[0].id;
          return title.value = bankData.value[0].bankName + "（" + format(bankData.value[0].cardNo) + "）";
        }
      };
      vue.watch(bankCardId, (newVal, oldVal) => {
        if (bankCardId.value) {
          bankData.value.map((item) => {
            if (item.id == bankCardId.value) {
              return title.value = item.bankName + "（" + format(item.cardNo) + "）";
            }
          });
        }
      });
      const butBankCard = async () => {
        if (bankData.value.length == 0) {
          uni.showToast({
            title: "请先绑定银行卡",
            icon: "none",
            duration: 2e3
          });
          return;
        }
        try {
          const { data } = await apply({
            amount: amount2.value,
            bankCardId: bankCardId.value
          });
          formatAppLog("log", "at pages/my/wallet/withdrawal.vue:149", data);
        } catch (e2) {
          formatAppLog("log", "at pages/my/wallet/withdrawal.vue:151", e2);
        }
      };
      const handleHandover = () => {
        if (bankData.value.length > 2) {
          bankBool.value = true;
        }
      };
      const handleBank = (item) => {
        bankCardId.value = item.id;
        bankBool.value = false;
      };
      const __returned__ = { globalStore, statusBarHeight, amount: amount2, bankData, balance, bankCardId, bankBool, title, bankCardList, backFn, scrollTop, handleWithdrawal, format, Default, butBankCard, handleHandover, handleBank, ref: vue.ref, watch: vue.watch, get useGlobalDataStore() {
        return useGlobalDataStore;
      }, get onShow() {
        return onShow;
      }, get onPageScroll() {
        return onPageScroll;
      }, get onLoad() {
        return onLoad;
      }, get bank() {
        return bank;
      }, get apply() {
        return apply;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$k(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    const _component_uni_nav_bar = resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"), __easycom_1$4);
    const _component_uni_easyinput = resolveEasycom(vue.resolveDynamicComponent("uni-easyinput"), __easycom_2$8);
    return vue.openBlock(), vue.createElementBlock("view", { class: "settled-box" }, [
      vue.createElementVNode("view", { class: "header" }, [
        vue.createVNode(_component_uni_nav_bar, {
          class: vue.normalizeClass([$setup.scrollTop > 15 ? "scrollClass" : "", "header-bar"]),
          backgroundColor: "rgba(255,255,255,0)",
          border: false,
          title: "我的钱包"
        }, {
          left: vue.withCtx(() => [
            vue.createVNode(_component_uni_icons, {
              type: "left",
              size: "24",
              onClick: $setup.backFn
            })
          ]),
          _: 1
          /* STABLE */
        }, 8, ["class"])
      ]),
      vue.createElementVNode("view", { class: "content" }, [
        vue.createElementVNode("view", { class: "content-details" }, [
          vue.createElementVNode("view", { class: "detail-item" }, [
            vue.createElementVNode("view", null, "提现金额"),
            vue.createElementVNode("text", null, "满50元即可申请提现")
          ]),
          vue.createElementVNode("view", { class: "detail-item" }, [
            vue.createElementVNode("view", { style: { "display": "flex" } }, [
              vue.createElementVNode("view", { style: { "font-size": "50rpx" } }, "¥"),
              vue.createVNode(_component_uni_easyinput, {
                modelValue: $setup.amount,
                "onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => $setup.amount = $event),
                placeholder: "输入自定义金额"
              }, null, 8, ["modelValue"])
            ]),
            vue.createElementVNode(
              "text",
              null,
              "可用余额￥" + vue.toDisplayString($setup.balance),
              1
              /* TEXT */
            )
          ])
        ]),
        vue.createElementVNode("view", { class: "clause" }, [
          vue.createElementVNode("view", { style: { "padding-left": "15rpx" } }, "提现至银行卡"),
          vue.createElementVNode("view", { class: "bank-card" }, [
            vue.createElementVNode("view", {
              style: { "display": "flex", "align-items": "center" },
              onClick: _cache[1] || (_cache[1] = ($event) => $setup.handleHandover())
            }, [
              vue.createElementVNode("image", {
                src: _imports_0$3,
                class: "bank-img"
              }),
              vue.createElementVNode(
                "view",
                null,
                vue.toDisplayString($setup.title),
                1
                /* TEXT */
              )
            ]),
            vue.createElementVNode("view", {
              class: "card",
              onClick: _cache[2] || (_cache[2] = ($event) => $setup.handleWithdrawal("/pages/my/wallet/bank-card"))
            }, [
              $setup.bankData.length == 0 ? (vue.openBlock(), vue.createElementBlock("view", { key: 0 }, [
                vue.createElementVNode("view", { style: { "color": "#9e9e9e", "font-size": "20rpx", "padding-right": "10rpx" } }, "去绑定")
              ])) : vue.createCommentVNode("v-if", true),
              vue.createElementVNode("view", { style: { "color": "#9e9e9e" } }, " > ")
            ])
          ]),
          $setup.bankData.length != 0 && $setup.bankBool ? (vue.openBlock(), vue.createElementBlock("view", {
            key: 0,
            class: "bank-list"
          }, [
            (vue.openBlock(true), vue.createElementBlock(
              vue.Fragment,
              null,
              vue.renderList($setup.bankData, (item, index) => {
                return vue.openBlock(), vue.createElementBlock("view", {
                  key: index,
                  class: vue.normalizeClass(index % 2 != 0 ? "card-item1" : ""),
                  onClick: ($event) => $setup.handleBank(item)
                }, [
                  vue.createElementVNode("view", { class: "card-item" }, [
                    vue.createElementVNode("image", {
                      src: _imports_0$3,
                      class: "bank-img"
                    }),
                    vue.createElementVNode(
                      "view",
                      null,
                      vue.toDisplayString(item.bankName) + "（" + vue.toDisplayString($setup.format(item.cardNo)) + "）",
                      1
                      /* TEXT */
                    )
                  ])
                ], 10, ["onClick"]);
              }),
              128
              /* KEYED_FRAGMENT */
            ))
          ])) : vue.createCommentVNode("v-if", true),
          vue.createElementVNode("view", { style: { "margin": "50rpx 0 10rpx", "color": "#9e9e9e" } }, "提现说明："),
          vue.createElementVNode("view", { style: { "font-size": "25rpx", "color": "#9e9e9e" } }, "1.本次提现仅若遇未到账，请联系客服。"),
          vue.createElementVNode("view", { style: { "font-size": "25rpx", "color": "#9e9e9e" } }, "2.多张银行卡时，点击银行卡可切换。")
        ]),
        vue.createElementVNode("button", {
          onClick: $setup.butBankCard,
          class: "but"
        }, "确定")
      ])
    ]);
  }
  const PagesMyWalletWithdrawal = /* @__PURE__ */ _export_sfc(_sfc_main$l, [["render", _sfc_render$k], ["__scopeId", "data-v-36f14612"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/my/wallet/withdrawal.vue"]]);
  const _sfc_main$k = {
    name: "uniFormsItem",
    options: {
      virtualHost: true
    },
    provide() {
      return {
        uniFormItem: this
      };
    },
    inject: {
      form: {
        from: "uniForm",
        default: null
      }
    },
    props: {
      // 表单校验规则
      rules: {
        type: Array,
        default() {
          return null;
        }
      },
      // 表单域的属性名，在使用校验规则时必填
      name: {
        type: [String, Array],
        default: ""
      },
      required: {
        type: Boolean,
        default: false
      },
      label: {
        type: String,
        default: ""
      },
      // label的宽度
      labelWidth: {
        type: [String, Number],
        default: ""
      },
      // label 居中方式，默认 left 取值 left/center/right
      labelAlign: {
        type: String,
        default: ""
      },
      // 强制显示错误信息
      errorMessage: {
        type: [String, Boolean],
        default: ""
      },
      // 1.4.0 弃用，统一使用 form 的校验时机
      // validateTrigger: {
      // 	type: String,
      // 	default: ''
      // },
      // 1.4.0 弃用，统一使用 form 的label 位置
      // labelPosition: {
      // 	type: String,
      // 	default: ''
      // },
      // 1.4.0 以下属性已经废弃，请使用  #label 插槽代替
      leftIcon: String,
      iconColor: {
        type: String,
        default: "#606266"
      }
    },
    data() {
      return {
        errMsg: "",
        userRules: null,
        localLabelAlign: "left",
        localLabelWidth: "70px",
        localLabelPos: "left",
        border: false,
        isFirstBorder: false
      };
    },
    computed: {
      // 处理错误信息
      msg() {
        return this.errorMessage || this.errMsg;
      }
    },
    watch: {
      // 规则发生变化通知子组件更新
      "form.formRules"(val2) {
        this.init();
      },
      "form.labelWidth"(val2) {
        this.localLabelWidth = this._labelWidthUnit(val2);
      },
      "form.labelPosition"(val2) {
        this.localLabelPos = this._labelPosition();
      },
      "form.labelAlign"(val2) {
      }
    },
    created() {
      this.init(true);
      if (this.name && this.form) {
        this.$watch(
          () => {
            const val2 = this.form._getDataValue(this.name, this.form.localData);
            return val2;
          },
          (value, oldVal) => {
            const isEqual2 = this.form._isEqual(value, oldVal);
            if (!isEqual2) {
              const val2 = this.itemSetValue(value);
              this.onFieldChange(val2, false);
            }
          },
          {
            immediate: false
          }
        );
      }
    },
    unmounted() {
      this.__isUnmounted = true;
      this.unInit();
    },
    methods: {
      /**
       * 外部调用方法
       * 设置规则 ，主要用于小程序自定义检验规则
       * @param {Array} rules 规则源数据
       */
      setRules(rules = null) {
        this.userRules = rules;
        this.init(false);
      },
      // 兼容老版本表单组件
      setValue() {
      },
      /**
       * 外部调用方法
       * 校验数据
       * @param {any} value 需要校验的数据
       * @param {boolean} 是否立即校验
       * @return {Array|null} 校验内容
       */
      async onFieldChange(value, formtrigger = true) {
        const {
          formData,
          localData,
          errShowType,
          validateCheck,
          validateTrigger,
          _isRequiredField,
          _realName
        } = this.form;
        const name = _realName(this.name);
        if (!value) {
          value = this.form.formData[name];
        }
        const ruleLen = this.itemRules.rules && this.itemRules.rules.length;
        if (!this.validator || !ruleLen || ruleLen === 0)
          return;
        const isRequiredField2 = _isRequiredField(this.itemRules.rules || []);
        let result = null;
        if (validateTrigger === "bind" || formtrigger) {
          result = await this.validator.validateUpdate(
            {
              [name]: value
            },
            formData
          );
          if (!isRequiredField2 && (value === void 0 || value === "")) {
            result = null;
          }
          if (result && result.errorMessage) {
            if (errShowType === "undertext") {
              this.errMsg = !result ? "" : result.errorMessage;
            }
            if (errShowType === "toast") {
              uni.showToast({
                title: result.errorMessage || "校验错误",
                icon: "none"
              });
            }
            if (errShowType === "modal") {
              uni.showModal({
                title: "提示",
                content: result.errorMessage || "校验错误"
              });
            }
          } else {
            this.errMsg = "";
          }
          validateCheck(result ? result : null);
        } else {
          this.errMsg = "";
        }
        return result ? result : null;
      },
      /**
       * 初始组件数据
       */
      init(type = false) {
        const {
          validator,
          formRules,
          childrens,
          formData,
          localData,
          _realName,
          labelWidth,
          _getDataValue,
          _setDataValue
        } = this.form || {};
        this.localLabelAlign = this._justifyContent();
        this.localLabelWidth = this._labelWidthUnit(labelWidth);
        this.localLabelPos = this._labelPosition();
        this.form && type && childrens.push(this);
        if (!validator || !formRules)
          return;
        if (!this.form.isFirstBorder) {
          this.form.isFirstBorder = true;
          this.isFirstBorder = true;
        }
        if (this.group) {
          if (!this.group.isFirstBorder) {
            this.group.isFirstBorder = true;
            this.isFirstBorder = true;
          }
        }
        this.border = this.form.border;
        const name = _realName(this.name);
        const itemRule = this.userRules || this.rules;
        if (typeof formRules === "object" && itemRule) {
          formRules[name] = {
            rules: itemRule
          };
          validator.updateSchema(formRules);
        }
        const itemRules = formRules[name] || {};
        this.itemRules = itemRules;
        this.validator = validator;
        this.itemSetValue(_getDataValue(this.name, localData));
      },
      unInit() {
        if (this.form) {
          const {
            childrens,
            formData,
            _realName
          } = this.form;
          childrens.forEach((item, index) => {
            if (item === this) {
              this.form.childrens.splice(index, 1);
              delete formData[_realName(item.name)];
            }
          });
        }
      },
      // 设置item 的值
      itemSetValue(value) {
        const name = this.form._realName(this.name);
        const rules = this.itemRules.rules || [];
        const val2 = this.form._getValue(name, value, rules);
        this.form._setDataValue(name, this.form.formData, val2);
        return val2;
      },
      /**
       * 移除该表单项的校验结果
       */
      clearValidate() {
        this.errMsg = "";
      },
      // 是否显示星号
      _isRequired() {
        return this.required;
      },
      // 处理对齐方式
      _justifyContent() {
        if (this.form) {
          const {
            labelAlign
          } = this.form;
          let labelAli = this.labelAlign ? this.labelAlign : labelAlign;
          if (labelAli === "left")
            return "flex-start";
          if (labelAli === "center")
            return "center";
          if (labelAli === "right")
            return "flex-end";
        }
        return "flex-start";
      },
      // 处理 label宽度单位 ,继承父元素的值
      _labelWidthUnit(labelWidth) {
        return this.num2px(this.labelWidth ? this.labelWidth : labelWidth || (this.label ? 70 : "auto"));
      },
      // 处理 label 位置
      _labelPosition() {
        if (this.form)
          return this.form.labelPosition || "left";
        return "left";
      },
      /**
       * 触发时机
       * @param {Object} rule 当前规则内时机
       * @param {Object} itemRlue 当前组件时机
       * @param {Object} parentRule 父组件时机
       */
      isTrigger(rule, itemRlue, parentRule) {
        if (rule === "submit" || !rule) {
          if (rule === void 0) {
            if (itemRlue !== "bind") {
              if (!itemRlue) {
                return parentRule === "" ? "bind" : "submit";
              }
              return "submit";
            }
            return "bind";
          }
          return "submit";
        }
        return "bind";
      },
      num2px(num) {
        if (typeof num === "number") {
          return `${num}px`;
        }
        return num;
      }
    }
  };
  function _sfc_render$j(_ctx, _cache, $props, $setup, $data, $options) {
    return vue.openBlock(), vue.createElementBlock(
      "view",
      {
        class: vue.normalizeClass(["uni-forms-item", ["is-direction-" + $data.localLabelPos, $data.border ? "uni-forms-item--border" : "", $data.border && $data.isFirstBorder ? "is-first-border" : ""]])
      },
      [
        vue.renderSlot(_ctx.$slots, "label", {}, () => [
          vue.createElementVNode(
            "view",
            {
              class: vue.normalizeClass(["uni-forms-item__label", { "no-label": !$props.label && !$props.required }]),
              style: vue.normalizeStyle({ width: $data.localLabelWidth, justifyContent: $data.localLabelAlign })
            },
            [
              $props.required ? (vue.openBlock(), vue.createElementBlock("text", {
                key: 0,
                class: "is-required"
              }, "*")) : vue.createCommentVNode("v-if", true),
              vue.createElementVNode(
                "text",
                null,
                vue.toDisplayString($props.label),
                1
                /* TEXT */
              )
            ],
            6
            /* CLASS, STYLE */
          )
        ], true),
        vue.createElementVNode("view", { class: "uni-forms-item__content" }, [
          vue.renderSlot(_ctx.$slots, "default", {}, void 0, true),
          vue.createElementVNode(
            "view",
            {
              class: vue.normalizeClass(["uni-forms-item__error", { "msg--active": $options.msg }])
            },
            [
              vue.createElementVNode(
                "text",
                null,
                vue.toDisplayString($options.msg),
                1
                /* TEXT */
              )
            ],
            2
            /* CLASS */
          )
        ])
      ],
      2
      /* CLASS */
    );
  }
  const __easycom_3 = /* @__PURE__ */ _export_sfc(_sfc_main$k, [["render", _sfc_render$j], ["__scopeId", "data-v-462874dd"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/uni_modules/uni-forms/components/uni-forms-item/uni-forms-item.vue"]]);
  var pattern = {
    email: /^\S+?@\S+?\.\S+?$/,
    idcard: /^[1-9]\d{5}(18|19|([23]\d))\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/,
    url: new RegExp(
      "^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$",
      "i"
    )
  };
  const FORMAT_MAPPING = {
    "int": "integer",
    "bool": "boolean",
    "double": "number",
    "long": "number",
    "password": "string"
    // "fileurls": 'array'
  };
  function formatMessage(args, resources = "") {
    var defaultMessage = ["label"];
    defaultMessage.forEach((item) => {
      if (args[item] === void 0) {
        args[item] = "";
      }
    });
    let str = resources;
    for (let key in args) {
      let reg = new RegExp("{" + key + "}");
      str = str.replace(reg, args[key]);
    }
    return str;
  }
  function isEmptyValue(value, type) {
    if (value === void 0 || value === null) {
      return true;
    }
    if (typeof value === "string" && !value) {
      return true;
    }
    if (Array.isArray(value) && !value.length) {
      return true;
    }
    if (type === "object" && !Object.keys(value).length) {
      return true;
    }
    return false;
  }
  const types = {
    integer(value) {
      return types.number(value) && parseInt(value, 10) === value;
    },
    string(value) {
      return typeof value === "string";
    },
    number(value) {
      if (isNaN(value)) {
        return false;
      }
      return typeof value === "number";
    },
    "boolean": function(value) {
      return typeof value === "boolean";
    },
    "float": function(value) {
      return types.number(value) && !types.integer(value);
    },
    array(value) {
      return Array.isArray(value);
    },
    object(value) {
      return typeof value === "object" && !types.array(value);
    },
    date(value) {
      return value instanceof Date;
    },
    timestamp(value) {
      if (!this.integer(value) || Math.abs(value).toString().length > 16) {
        return false;
      }
      return true;
    },
    file(value) {
      return typeof value.url === "string";
    },
    email(value) {
      return typeof value === "string" && !!value.match(pattern.email) && value.length < 255;
    },
    url(value) {
      return typeof value === "string" && !!value.match(pattern.url);
    },
    pattern(reg, value) {
      try {
        return new RegExp(reg).test(value);
      } catch (e2) {
        return false;
      }
    },
    method(value) {
      return typeof value === "function";
    },
    idcard(value) {
      return typeof value === "string" && !!value.match(pattern.idcard);
    },
    "url-https"(value) {
      return this.url(value) && value.startsWith("https://");
    },
    "url-scheme"(value) {
      return value.startsWith("://");
    },
    "url-web"(value) {
      return false;
    }
  };
  class RuleValidator {
    constructor(message2) {
      this._message = message2;
    }
    async validateRule(fieldKey, fieldValue, value, data, allData) {
      var result = null;
      let rules = fieldValue.rules;
      let hasRequired = rules.findIndex((item) => {
        return item.required;
      });
      if (hasRequired < 0) {
        if (value === null || value === void 0) {
          return result;
        }
        if (typeof value === "string" && !value.length) {
          return result;
        }
      }
      var message2 = this._message;
      if (rules === void 0) {
        return message2["default"];
      }
      for (var i2 = 0; i2 < rules.length; i2++) {
        let rule = rules[i2];
        let vt2 = this._getValidateType(rule);
        Object.assign(rule, {
          label: fieldValue.label || `["${fieldKey}"]`
        });
        if (RuleValidatorHelper[vt2]) {
          result = RuleValidatorHelper[vt2](rule, value, message2);
          if (result != null) {
            break;
          }
        }
        if (rule.validateExpr) {
          let now2 = Date.now();
          let resultExpr = rule.validateExpr(value, allData, now2);
          if (resultExpr === false) {
            result = this._getMessage(rule, rule.errorMessage || this._message["default"]);
            break;
          }
        }
        if (rule.validateFunction) {
          result = await this.validateFunction(rule, value, data, allData, vt2);
          if (result !== null) {
            break;
          }
        }
      }
      if (result !== null) {
        result = message2.TAG + result;
      }
      return result;
    }
    async validateFunction(rule, value, data, allData, vt2) {
      let result = null;
      try {
        let callbackMessage = null;
        const res2 = await rule.validateFunction(rule, value, allData || data, (message2) => {
          callbackMessage = message2;
        });
        if (callbackMessage || typeof res2 === "string" && res2 || res2 === false) {
          result = this._getMessage(rule, callbackMessage || res2, vt2);
        }
      } catch (e2) {
        result = this._getMessage(rule, e2.message, vt2);
      }
      return result;
    }
    _getMessage(rule, message2, vt2) {
      return formatMessage(rule, message2 || rule.errorMessage || this._message[vt2] || message2["default"]);
    }
    _getValidateType(rule) {
      var result = "";
      if (rule.required) {
        result = "required";
      } else if (rule.format) {
        result = "format";
      } else if (rule.arrayType) {
        result = "arrayTypeFormat";
      } else if (rule.range) {
        result = "range";
      } else if (rule.maximum !== void 0 || rule.minimum !== void 0) {
        result = "rangeNumber";
      } else if (rule.maxLength !== void 0 || rule.minLength !== void 0) {
        result = "rangeLength";
      } else if (rule.pattern) {
        result = "pattern";
      } else if (rule.validateFunction) {
        result = "validateFunction";
      }
      return result;
    }
  }
  const RuleValidatorHelper = {
    required(rule, value, message2) {
      if (rule.required && isEmptyValue(value, rule.format || typeof value)) {
        return formatMessage(rule, rule.errorMessage || message2.required);
      }
      return null;
    },
    range(rule, value, message2) {
      const {
        range: range2,
        errorMessage
      } = rule;
      let list = new Array(range2.length);
      for (let i2 = 0; i2 < range2.length; i2++) {
        const item = range2[i2];
        if (types.object(item) && item.value !== void 0) {
          list[i2] = item.value;
        } else {
          list[i2] = item;
        }
      }
      let result = false;
      if (Array.isArray(value)) {
        result = new Set(value.concat(list)).size === list.length;
      } else {
        if (list.indexOf(value) > -1) {
          result = true;
        }
      }
      if (!result) {
        return formatMessage(rule, errorMessage || message2["enum"]);
      }
      return null;
    },
    rangeNumber(rule, value, message2) {
      if (!types.number(value)) {
        return formatMessage(rule, rule.errorMessage || message2.pattern.mismatch);
      }
      let {
        minimum,
        maximum,
        exclusiveMinimum,
        exclusiveMaximum
      } = rule;
      let min = exclusiveMinimum ? value <= minimum : value < minimum;
      let max = exclusiveMaximum ? value >= maximum : value > maximum;
      if (minimum !== void 0 && min) {
        return formatMessage(rule, rule.errorMessage || message2["number"][exclusiveMinimum ? "exclusiveMinimum" : "minimum"]);
      } else if (maximum !== void 0 && max) {
        return formatMessage(rule, rule.errorMessage || message2["number"][exclusiveMaximum ? "exclusiveMaximum" : "maximum"]);
      } else if (minimum !== void 0 && maximum !== void 0 && (min || max)) {
        return formatMessage(rule, rule.errorMessage || message2["number"].range);
      }
      return null;
    },
    rangeLength(rule, value, message2) {
      if (!types.string(value) && !types.array(value)) {
        return formatMessage(rule, rule.errorMessage || message2.pattern.mismatch);
      }
      let min = rule.minLength;
      let max = rule.maxLength;
      let val2 = value.length;
      if (min !== void 0 && val2 < min) {
        return formatMessage(rule, rule.errorMessage || message2["length"].minLength);
      } else if (max !== void 0 && val2 > max) {
        return formatMessage(rule, rule.errorMessage || message2["length"].maxLength);
      } else if (min !== void 0 && max !== void 0 && (val2 < min || val2 > max)) {
        return formatMessage(rule, rule.errorMessage || message2["length"].range);
      }
      return null;
    },
    pattern(rule, value, message2) {
      if (!types["pattern"](rule.pattern, value)) {
        return formatMessage(rule, rule.errorMessage || message2.pattern.mismatch);
      }
      return null;
    },
    format(rule, value, message2) {
      var customTypes = Object.keys(types);
      var format = FORMAT_MAPPING[rule.format] ? FORMAT_MAPPING[rule.format] : rule.format || rule.arrayType;
      if (customTypes.indexOf(format) > -1) {
        if (!types[format](value)) {
          return formatMessage(rule, rule.errorMessage || message2.typeError);
        }
      }
      return null;
    },
    arrayTypeFormat(rule, value, message2) {
      if (!Array.isArray(value)) {
        return formatMessage(rule, rule.errorMessage || message2.typeError);
      }
      for (let i2 = 0; i2 < value.length; i2++) {
        const element = value[i2];
        let formatResult = this.format(rule, element, message2);
        if (formatResult !== null) {
          return formatResult;
        }
      }
      return null;
    }
  };
  class SchemaValidator extends RuleValidator {
    constructor(schema, options) {
      super(SchemaValidator.message);
      this._schema = schema;
      this._options = options || null;
    }
    updateSchema(schema) {
      this._schema = schema;
    }
    async validate(data, allData) {
      let result = this._checkFieldInSchema(data);
      if (!result) {
        result = await this.invokeValidate(data, false, allData);
      }
      return result.length ? result[0] : null;
    }
    async validateAll(data, allData) {
      let result = this._checkFieldInSchema(data);
      if (!result) {
        result = await this.invokeValidate(data, true, allData);
      }
      return result;
    }
    async validateUpdate(data, allData) {
      let result = this._checkFieldInSchema(data);
      if (!result) {
        result = await this.invokeValidateUpdate(data, false, allData);
      }
      return result.length ? result[0] : null;
    }
    async invokeValidate(data, all, allData) {
      let result = [];
      let schema = this._schema;
      for (let key in schema) {
        let value = schema[key];
        let errorMessage = await this.validateRule(key, value, data[key], data, allData);
        if (errorMessage != null) {
          result.push({
            key,
            errorMessage
          });
          if (!all)
            break;
        }
      }
      return result;
    }
    async invokeValidateUpdate(data, all, allData) {
      let result = [];
      for (let key in data) {
        let errorMessage = await this.validateRule(key, this._schema[key], data[key], data, allData);
        if (errorMessage != null) {
          result.push({
            key,
            errorMessage
          });
          if (!all)
            break;
        }
      }
      return result;
    }
    _checkFieldInSchema(data) {
      var keys = Object.keys(data);
      var keys2 = Object.keys(this._schema);
      if (new Set(keys.concat(keys2)).size === keys2.length) {
        return "";
      }
      var noExistFields = keys.filter((key) => {
        return keys2.indexOf(key) < 0;
      });
      var errorMessage = formatMessage({
        field: JSON.stringify(noExistFields)
      }, SchemaValidator.message.TAG + SchemaValidator.message["defaultInvalid"]);
      return [{
        key: "invalid",
        errorMessage
      }];
    }
  }
  function Message() {
    return {
      TAG: "",
      default: "验证错误",
      defaultInvalid: "提交的字段{field}在数据库中并不存在",
      validateFunction: "验证无效",
      required: "{label}必填",
      "enum": "{label}超出范围",
      timestamp: "{label}格式无效",
      whitespace: "{label}不能为空",
      typeError: "{label}类型无效",
      date: {
        format: "{label}日期{value}格式无效",
        parse: "{label}日期无法解析,{value}无效",
        invalid: "{label}日期{value}无效"
      },
      length: {
        minLength: "{label}长度不能少于{minLength}",
        maxLength: "{label}长度不能超过{maxLength}",
        range: "{label}必须介于{minLength}和{maxLength}之间"
      },
      number: {
        minimum: "{label}不能小于{minimum}",
        maximum: "{label}不能大于{maximum}",
        exclusiveMinimum: "{label}不能小于等于{minimum}",
        exclusiveMaximum: "{label}不能大于等于{maximum}",
        range: "{label}必须介于{minimum}and{maximum}之间"
      },
      pattern: {
        mismatch: "{label}格式不匹配"
      }
    };
  }
  SchemaValidator.message = new Message();
  const deepCopy = (val2) => {
    return JSON.parse(JSON.stringify(val2));
  };
  const typeFilter = (format) => {
    return format === "int" || format === "double" || format === "number" || format === "timestamp";
  };
  const getValue = (key, value, rules) => {
    const isRuleNumType = rules.find((val2) => val2.format && typeFilter(val2.format));
    const isRuleBoolType = rules.find((val2) => val2.format && val2.format === "boolean" || val2.format === "bool");
    if (!!isRuleNumType) {
      if (!value && value !== 0) {
        value = null;
      } else {
        value = isNumber(Number(value)) ? Number(value) : value;
      }
    }
    if (!!isRuleBoolType) {
      value = isBoolean(value) ? value : false;
    }
    return value;
  };
  const setDataValue = (field, formdata, value) => {
    formdata[field] = value;
    return value || "";
  };
  const getDataValue = (field, data) => {
    return objGet(data, field);
  };
  const realName = (name, data = {}) => {
    const base_name = _basePath(name);
    if (typeof base_name === "object" && Array.isArray(base_name) && base_name.length > 1) {
      const realname = base_name.reduce((a2, b2) => a2 += `#${b2}`, "_formdata_");
      return realname;
    }
    return base_name[0] || name;
  };
  const isRealName = (name) => {
    const reg = /^_formdata_#*/;
    return reg.test(name);
  };
  const rawData = (object2 = {}, name) => {
    let newData = JSON.parse(JSON.stringify(object2));
    let formData = {};
    for (let i2 in newData) {
      let path = name2arr(i2);
      objSet(formData, path, newData[i2]);
    }
    return formData;
  };
  const name2arr = (name) => {
    let field = name.replace("_formdata_#", "");
    field = field.split("#").map((v2) => isNumber(v2) ? Number(v2) : v2);
    return field;
  };
  const objSet = (object2, path, value) => {
    if (typeof object2 !== "object")
      return object2;
    _basePath(path).reduce((o2, k, i2, _2) => {
      if (i2 === _2.length - 1) {
        o2[k] = value;
        return null;
      } else if (k in o2) {
        return o2[k];
      } else {
        o2[k] = /^[0-9]{1,}$/.test(_2[i2 + 1]) ? [] : {};
        return o2[k];
      }
    }, object2);
    return object2;
  };
  function _basePath(path) {
    if (Array.isArray(path))
      return path;
    return path.replace(/\[/g, ".").replace(/\]/g, "").split(".");
  }
  const objGet = (object2, path, defaultVal = "undefined") => {
    let newPath = _basePath(path);
    let val2 = newPath.reduce((o2, k) => {
      return (o2 || {})[k];
    }, object2);
    return !val2 || val2 !== void 0 ? val2 : defaultVal;
  };
  const isNumber = (num) => {
    return !isNaN(Number(num));
  };
  const isBoolean = (bool) => {
    return typeof bool === "boolean";
  };
  const isRequiredField = (rules) => {
    let isNoField = false;
    for (let i2 = 0; i2 < rules.length; i2++) {
      const ruleData = rules[i2];
      if (ruleData.required) {
        isNoField = true;
        break;
      }
    }
    return isNoField;
  };
  const isEqual = (a2, b2) => {
    if (a2 === b2) {
      return a2 !== 0 || 1 / a2 === 1 / b2;
    }
    if (a2 == null || b2 == null) {
      return a2 === b2;
    }
    var classNameA = toString.call(a2), classNameB = toString.call(b2);
    if (classNameA !== classNameB) {
      return false;
    }
    switch (classNameA) {
      case "[object RegExp]":
      case "[object String]":
        return "" + a2 === "" + b2;
      case "[object Number]":
        if (+a2 !== +a2) {
          return +b2 !== +b2;
        }
        return +a2 === 0 ? 1 / +a2 === 1 / b2 : +a2 === +b2;
      case "[object Date]":
      case "[object Boolean]":
        return +a2 === +b2;
    }
    if (classNameA == "[object Object]") {
      var propsA = Object.getOwnPropertyNames(a2), propsB = Object.getOwnPropertyNames(b2);
      if (propsA.length != propsB.length) {
        return false;
      }
      for (var i2 = 0; i2 < propsA.length; i2++) {
        var propName = propsA[i2];
        if (a2[propName] !== b2[propName]) {
          return false;
        }
      }
      return true;
    }
    if (classNameA == "[object Array]") {
      if (a2.toString() == b2.toString()) {
        return true;
      }
      return false;
    }
  };
  const _sfc_main$j = {
    name: "uniForms",
    emits: ["validate", "submit"],
    options: {
      virtualHost: true
    },
    props: {
      // 即将弃用
      value: {
        type: Object,
        default() {
          return null;
        }
      },
      // vue3 替换 value 属性
      modelValue: {
        type: Object,
        default() {
          return null;
        }
      },
      // 1.4.0 开始将不支持 v-model ，且废弃 value 和 modelValue
      model: {
        type: Object,
        default() {
          return null;
        }
      },
      // 表单校验规则
      rules: {
        type: Object,
        default() {
          return {};
        }
      },
      //校验错误信息提示方式 默认 undertext 取值 [undertext|toast|modal]
      errShowType: {
        type: String,
        default: "undertext"
      },
      // 校验触发器方式 默认 bind 取值 [bind|submit]
      validateTrigger: {
        type: String,
        default: "submit"
      },
      // label 位置，默认 left 取值  top/left
      labelPosition: {
        type: String,
        default: "left"
      },
      // label 宽度
      labelWidth: {
        type: [String, Number],
        default: ""
      },
      // label 居中方式，默认 left 取值 left/center/right
      labelAlign: {
        type: String,
        default: "left"
      },
      border: {
        type: Boolean,
        default: false
      }
    },
    provide() {
      return {
        uniForm: this
      };
    },
    data() {
      return {
        // 表单本地值的记录，不应该与传如的值进行关联
        formData: {},
        formRules: {}
      };
    },
    computed: {
      // 计算数据源变化的
      localData() {
        const localVal = this.model || this.modelValue || this.value;
        if (localVal) {
          return deepCopy(localVal);
        }
        return {};
      }
    },
    watch: {
      // 监听数据变化 ,暂时不使用，需要单独赋值
      // localData: {},
      // 监听规则变化
      rules: {
        handler: function(val2, oldVal) {
          this.setRules(val2);
        },
        deep: true,
        immediate: true
      }
    },
    created() {
      let getbinddata = getApp().$vm.$.appContext.config.globalProperties.binddata;
      if (!getbinddata) {
        getApp().$vm.$.appContext.config.globalProperties.binddata = function(name, value, formName) {
          if (formName) {
            this.$refs[formName].setValue(name, value);
          } else {
            let formVm;
            for (let i2 in this.$refs) {
              const vm = this.$refs[i2];
              if (vm && vm.$options && vm.$options.name === "uniForms") {
                formVm = vm;
                break;
              }
            }
            if (!formVm)
              return formatAppLog("error", "at uni_modules/uni-forms/components/uni-forms/uni-forms.vue:187", "当前 uni-froms 组件缺少 ref 属性");
            if (formVm.model)
              formVm.model[name] = value;
            if (formVm.modelValue)
              formVm.modelValue[name] = value;
            if (formVm.value)
              formVm.value[name] = value;
          }
        };
      }
      this.childrens = [];
      this.inputChildrens = [];
      this.setRules(this.rules);
    },
    methods: {
      /**
       * 外部调用方法
       * 设置规则 ，主要用于小程序自定义检验规则
       * @param {Array} rules 规则源数据
       */
      setRules(rules) {
        this.formRules = Object.assign({}, this.formRules, rules);
        this.validator = new SchemaValidator(rules);
      },
      /**
       * 外部调用方法
       * 设置数据，用于设置表单数据，公开给用户使用 ， 不支持在动态表单中使用
       * @param {Object} key
       * @param {Object} value
       */
      setValue(key, value) {
        let example = this.childrens.find((child) => child.name === key);
        if (!example)
          return null;
        this.formData[key] = getValue(key, value, this.formRules[key] && this.formRules[key].rules || []);
        return example.onFieldChange(this.formData[key]);
      },
      /**
       * 外部调用方法
       * 手动提交校验表单
       * 对整个表单进行校验的方法，参数为一个回调函数。
       * @param {Array} keepitem 保留不参与校验的字段
       * @param {type} callback 方法回调
       */
      validate(keepitem, callback) {
        return this.checkAll(this.formData, keepitem, callback);
      },
      /**
       * 外部调用方法
       * 部分表单校验
       * @param {Array|String} props 需要校验的字段
       * @param {Function} 回调函数
       */
      validateField(props = [], callback) {
        props = [].concat(props);
        let invalidFields = {};
        this.childrens.forEach((item) => {
          const name = realName(item.name);
          if (props.indexOf(name) !== -1) {
            invalidFields = Object.assign({}, invalidFields, {
              [name]: this.formData[name]
            });
          }
        });
        return this.checkAll(invalidFields, [], callback);
      },
      /**
       * 外部调用方法
       * 移除表单项的校验结果。传入待移除的表单项的 prop 属性或者 prop 组成的数组，如不传则移除整个表单的校验结果
       * @param {Array|String} props 需要移除校验的字段 ，不填为所有
       */
      clearValidate(props = []) {
        props = [].concat(props);
        this.childrens.forEach((item) => {
          if (props.length === 0) {
            item.errMsg = "";
          } else {
            const name = realName(item.name);
            if (props.indexOf(name) !== -1) {
              item.errMsg = "";
            }
          }
        });
      },
      /**
       * 外部调用方法 ，即将废弃
       * 手动提交校验表单
       * 对整个表单进行校验的方法，参数为一个回调函数。
       * @param {Array} keepitem 保留不参与校验的字段
       * @param {type} callback 方法回调
       */
      submit(keepitem, callback, type) {
        for (let i2 in this.dataValue) {
          const itemData = this.childrens.find((v2) => v2.name === i2);
          if (itemData) {
            if (this.formData[i2] === void 0) {
              this.formData[i2] = this._getValue(i2, this.dataValue[i2]);
            }
          }
        }
        if (!type) {
          formatAppLog("warn", "at uni_modules/uni-forms/components/uni-forms/uni-forms.vue:296", "submit 方法即将废弃，请使用validate方法代替！");
        }
        return this.checkAll(this.formData, keepitem, callback, "submit");
      },
      // 校验所有
      async checkAll(invalidFields, keepitem, callback, type) {
        if (!this.validator)
          return;
        let childrens = [];
        for (let i2 in invalidFields) {
          const item = this.childrens.find((v2) => realName(v2.name) === i2);
          if (item) {
            childrens.push(item);
          }
        }
        if (!callback && typeof keepitem === "function") {
          callback = keepitem;
        }
        let promise2;
        if (!callback && typeof callback !== "function" && Promise) {
          promise2 = new Promise((resolve, reject) => {
            callback = function(valid, invalidFields2) {
              !valid ? resolve(invalidFields2) : reject(valid);
            };
          });
        }
        let results = [];
        let tempFormData = JSON.parse(JSON.stringify(invalidFields));
        for (let i2 in childrens) {
          const child = childrens[i2];
          let name = realName(child.name);
          const result = await child.onFieldChange(tempFormData[name]);
          if (result) {
            results.push(result);
            if (this.errShowType === "toast" || this.errShowType === "modal")
              break;
          }
        }
        if (Array.isArray(results)) {
          if (results.length === 0)
            results = null;
        }
        if (Array.isArray(keepitem)) {
          keepitem.forEach((v2) => {
            let vName = realName(v2);
            let value = getDataValue(v2, this.localData);
            if (value !== void 0) {
              tempFormData[vName] = value;
            }
          });
        }
        if (type === "submit") {
          this.$emit("submit", {
            detail: {
              value: tempFormData,
              errors: results
            }
          });
        } else {
          this.$emit("validate", results);
        }
        let resetFormData = {};
        resetFormData = rawData(tempFormData, this.name);
        callback && typeof callback === "function" && callback(results, resetFormData);
        if (promise2 && callback) {
          return promise2;
        } else {
          return null;
        }
      },
      /**
       * 返回validate事件
       * @param {Object} result
       */
      validateCheck(result) {
        this.$emit("validate", result);
      },
      _getValue: getValue,
      _isRequiredField: isRequiredField,
      _setDataValue: setDataValue,
      _getDataValue: getDataValue,
      _realName: realName,
      _isRealName: isRealName,
      _isEqual: isEqual
    }
  };
  function _sfc_render$i(_ctx, _cache, $props, $setup, $data, $options) {
    return vue.openBlock(), vue.createElementBlock("view", { class: "uni-forms" }, [
      vue.createElementVNode("form", null, [
        vue.renderSlot(_ctx.$slots, "default", {}, void 0, true)
      ])
    ]);
  }
  const __easycom_4 = /* @__PURE__ */ _export_sfc(_sfc_main$j, [["render", _sfc_render$i], ["__scopeId", "data-v-9a1e3c32"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/uni_modules/uni-forms/components/uni-forms/uni-forms.vue"]]);
  const _sfc_main$i = {
    __name: "bank-card",
    setup(__props, { expose: __expose }) {
      __expose();
      vue.useCssVars((_ctx) => ({
        "9a0896a2-statusBarHeight": statusBarHeight.value
      }));
      const globalStore = useGlobalDataStore();
      const statusBarHeight = vue.ref(globalStore.statusBarHeight + "px");
      const formData = vue.ref({
        realName: "",
        cardNo: "",
        bankName: ""
      });
      const rules = vue.reactive({
        realName: {
          rules: [{
            required: true,
            errorMessage: "请输入真实姓名"
          }]
        },
        cardNo: {
          rules: [{
            required: true,
            errorMessage: "请输入银行卡卡号"
          }]
        },
        bankName: {
          rules: [{
            required: true,
            errorMessage: "请输入开户行"
          }]
        }
      });
      onShow(() => {
      });
      const backFn = () => {
        uni.navigateBack({
          delta: 1
        });
      };
      const scrollTop = vue.ref(0);
      onPageScroll((e2) => {
        scrollTop.value = e2.scrollTop;
      });
      const butBankCard = async () => {
        try {
          const res2 = await addBank(formData.value);
          if (res2.success) {
            uni.showToast({
              title: "添加成功",
              icon: "none",
              // 可选值 'success', 'loading', 'none'
              duration: 2e3
              // 持续时长，单位ms
            });
            backFn();
          }
        } catch (err) {
          formatAppLog("log", "at pages/my/wallet/bank-card.vue:106", err);
        }
      };
      const __returned__ = { globalStore, statusBarHeight, formData, rules, backFn, scrollTop, butBankCard, ref: vue.ref, reactive: vue.reactive, get useGlobalDataStore() {
        return useGlobalDataStore;
      }, get onShow() {
        return onShow;
      }, get onPageScroll() {
        return onPageScroll;
      }, get addBank() {
        return addBank;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$h(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    const _component_uni_nav_bar = resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"), __easycom_1$4);
    const _component_uni_easyinput = resolveEasycom(vue.resolveDynamicComponent("uni-easyinput"), __easycom_2$8);
    const _component_uni_forms_item = resolveEasycom(vue.resolveDynamicComponent("uni-forms-item"), __easycom_3);
    const _component_uni_forms = resolveEasycom(vue.resolveDynamicComponent("uni-forms"), __easycom_4);
    return vue.openBlock(), vue.createElementBlock("view", { class: "settled-box" }, [
      vue.createElementVNode("view", { class: "header" }, [
        vue.createVNode(_component_uni_nav_bar, {
          class: vue.normalizeClass([$setup.scrollTop > 15 ? "scrollClass" : "", "header-bar"]),
          backgroundColor: "rgba(255,255,255,0)",
          border: false,
          title: "绑定银行卡"
        }, {
          left: vue.withCtx(() => [
            vue.createVNode(_component_uni_icons, {
              type: "left",
              size: "24",
              onClick: $setup.backFn
            })
          ]),
          _: 1
          /* STABLE */
        }, 8, ["class"])
      ]),
      vue.createElementVNode("view", { class: "content" }, [
        vue.createVNode(_component_uni_forms, {
          ref: "formRef",
          rules: $setup.rules,
          modelValue: $setup.formData
        }, {
          default: vue.withCtx(() => [
            vue.createElementVNode("view", { class: "content-details" }, [
              vue.createElementVNode("view", { class: "detail-item" }, [
                vue.createElementVNode("view", null, "姓名"),
                vue.createVNode(_component_uni_forms_item, { name: "realName" }, {
                  default: vue.withCtx(() => [
                    vue.createVNode(_component_uni_easyinput, {
                      modelValue: $setup.formData.realName,
                      "onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => $setup.formData.realName = $event),
                      placeholder: "请输入真实姓名"
                    }, null, 8, ["modelValue"])
                  ]),
                  _: 1
                  /* STABLE */
                })
              ]),
              vue.createElementVNode("view", { class: "detail-item" }, [
                vue.createElementVNode("view", null, "银行卡卡号"),
                vue.createVNode(_component_uni_forms_item, { name: "cardNo" }, {
                  default: vue.withCtx(() => [
                    vue.createVNode(_component_uni_easyinput, {
                      modelValue: $setup.formData.cardNo,
                      "onUpdate:modelValue": _cache[1] || (_cache[1] = ($event) => $setup.formData.cardNo = $event),
                      placeholder: "请输入银行卡卡号"
                    }, null, 8, ["modelValue"])
                  ]),
                  _: 1
                  /* STABLE */
                })
              ]),
              vue.createElementVNode("view", { class: "detail-item" }, [
                vue.createElementVNode("view", null, "开户银行"),
                vue.createVNode(_component_uni_forms_item, { name: "bankName" }, {
                  default: vue.withCtx(() => [
                    vue.createVNode(_component_uni_easyinput, {
                      modelValue: $setup.formData.bankName,
                      "onUpdate:modelValue": _cache[2] || (_cache[2] = ($event) => $setup.formData.bankName = $event),
                      placeholder: "请输入开户行"
                    }, null, 8, ["modelValue"])
                  ]),
                  _: 1
                  /* STABLE */
                })
              ])
            ]),
            vue.createElementVNode("view", { class: "clause" }, [
              vue.createElementVNode("view", { style: { "margin": "50rpx 0 10rpx", "color": "#9E9E9E" } }, "提现说明："),
              vue.createElementVNode("view", { style: { "font-size": "25rpx", "color": "#9E9E9E" } }, "1、在交易过程中，会向麦苗倾诉显示添加的付款方式的详细信息以进行付款，将看到您的真实姓名。请确保信息正确、真实。")
            ]),
            vue.createElementVNode("button", {
              onClick: $setup.butBankCard,
              class: "but"
            }, "确定")
          ]),
          _: 1
          /* STABLE */
        }, 8, ["rules", "modelValue"])
      ])
    ]);
  }
  const PagesMyWalletBankCard = /* @__PURE__ */ _export_sfc(_sfc_main$i, [["render", _sfc_render$h], ["__scopeId", "data-v-9a0896a2"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/my/wallet/bank-card.vue"]]);
  const _imports_0$2 = "/static/my/mine-bill.png";
  const _sfc_main$h = {
    __name: "mine",
    setup(__props, { expose: __expose }) {
      __expose();
      vue.useCssVars((_ctx) => ({
        "5c4c0053-statusBarHeight": statusBarHeight.value
      }));
      const globalStore = useGlobalDataStore();
      const statusBarHeight = vue.ref(globalStore.statusBarHeight + "px");
      const moneyData = vue.ref({
        monthlyIncome: 0,
        //本月收益
        unsettledAmount: 0,
        //未结算金额
        withdrawableAmount: 0,
        //可提现余额
        totalAssets: 0
        //我的资产
      });
      const type = vue.ref({});
      onLoad((options) => {
        type.value = JSON.parse(options.type);
      });
      const icons = vue.ref(true);
      const iconsClick = () => {
        icons.value = !icons.value;
      };
      const list = async () => {
        try {
          const { data } = await summary();
          moneyData.value = data;
        } catch (error) {
          formatAppLog("log", "at pages/my/wallet/mine.vue:77", error);
        }
      };
      vue.onMounted(() => {
        list();
      });
      const backFn = () => {
        uni.navigateBack({
          delta: 1
        });
      };
      const scrollTop = vue.ref(0);
      onPageScroll((e2) => {
        scrollTop.value = e2.scrollTop;
      });
      const handleWithdrawal = (url2) => {
        uni.navigateTo({ url: `${url2}?type=${JSON.stringify(type.value)}` });
      };
      const __returned__ = { globalStore, statusBarHeight, moneyData, type, icons, iconsClick, list, backFn, scrollTop, handleWithdrawal, ref: vue.ref, onMounted: vue.onMounted, get useGlobalDataStore() {
        return useGlobalDataStore;
      }, get onLoad() {
        return onLoad;
      }, get onPageScroll() {
        return onPageScroll;
      }, get summary() {
        return summary;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$g(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    const _component_uni_nav_bar = resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"), __easycom_1$4);
    return vue.openBlock(), vue.createElementBlock("view", { class: "settled-box" }, [
      vue.createElementVNode("view", { class: "header" }, [
        vue.createVNode(_component_uni_nav_bar, {
          class: vue.normalizeClass([$setup.scrollTop > 15 ? "scrollClass" : "", "header-bar"]),
          backgroundColor: "rgba(255,255,255,0)",
          border: false,
          title: "我的钱包"
        }, {
          left: vue.withCtx(() => [
            vue.createVNode(_component_uni_icons, {
              type: "left",
              size: "24",
              onClick: $setup.backFn
            })
          ]),
          _: 1
          /* STABLE */
        }, 8, ["class"])
      ]),
      vue.createElementVNode("view", { class: "content" }, [
        vue.createElementVNode("view", { class: "content-details" }, [
          vue.createElementVNode("view", { class: "detail-item" }, [
            vue.createElementVNode("view", null, "本月收益"),
            vue.createElementVNode(
              "text",
              null,
              vue.toDisplayString($setup.moneyData.monthlyIncome),
              1
              /* TEXT */
            )
          ]),
          vue.createElementVNode("view", { class: "detail-item" }, [
            vue.createElementVNode("view", null, "未结算金额"),
            vue.createElementVNode(
              "text",
              null,
              vue.toDisplayString($setup.moneyData.unsettledAmount),
              1
              /* TEXT */
            )
          ]),
          vue.createElementVNode("view", { class: "detail-item" }, [
            vue.createElementVNode("view", null, "可提现金额"),
            vue.createElementVNode(
              "text",
              null,
              vue.toDisplayString($setup.moneyData.withdrawableAmount),
              1
              /* TEXT */
            )
          ])
        ]),
        vue.createElementVNode("view", { class: "clause" }, [
          vue.createElementVNode("view", { class: "clause-item" }, [
            vue.createElementVNode("view", { class: "money" }, [
              vue.createElementVNode("view", { class: "money-tilte" }, [
                vue.createElementVNode("view", null, "我的资产(元)"),
                vue.createElementVNode("view", {
                  class: "icons",
                  onClick: $setup.iconsClick
                }, [
                  vue.createVNode(_component_uni_icons, {
                    type: $setup.icons ? "eye-filled" : "eye-slash-filled",
                    color: "#fff",
                    size: "20"
                  }, null, 8, ["type"])
                ])
              ]),
              $setup.icons ? (vue.openBlock(), vue.createElementBlock(
                "view",
                {
                  key: 0,
                  class: "money-num"
                },
                vue.toDisplayString($setup.moneyData.totalAssets),
                1
                /* TEXT */
              )) : (vue.openBlock(), vue.createElementBlock("view", {
                key: 1,
                class: "money-num"
              }, "*****"))
            ]),
            vue.createElementVNode("view", {
              class: "but",
              onClick: _cache[0] || (_cache[0] = ($event) => $setup.handleWithdrawal(`/pages/my/wallet/withdrawal?amount=${$setup.moneyData.withdrawableAmount}`))
            }, "提现")
          ]),
          vue.createElementVNode("view", {
            class: "clause-bill",
            onClick: _cache[1] || (_cache[1] = ($event) => $setup.handleWithdrawal("/pages/my/wallet/bill"))
          }, [
            vue.createElementVNode("image", { src: _imports_0$2 }),
            vue.createElementVNode("view", null, "账单")
          ])
        ])
      ])
    ]);
  }
  const PagesMyWalletMine = /* @__PURE__ */ _export_sfc(_sfc_main$h, [["render", _sfc_render$g], ["__scopeId", "data-v-5c4c0053"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/my/wallet/mine.vue"]]);
  const _sfc_main$g = {
    __name: "mall-home",
    setup(__props, { expose: __expose }) {
      __expose();
      vue.useCssVars((_ctx) => ({
        "f1939a52-statusBarHeight": statusBarHeight.value
      }));
      const globalStore = useGlobalDataStore();
      const statusBarHeight = vue.ref(globalStore.statusBarHeight + "px");
      const scrollTop = vue.ref(0);
      onPageScroll((e2) => {
        scrollTop.value = e2.scrollTop;
      });
      const backFn = () => {
        uni.navigateBack({
          delta: 1
        });
      };
      const searchFn = (e2) => {
        formatAppLog("log", "at pages/shopping-mall/mall-home.vue:145", "搜索关键词:", e2.value);
      };
      const categoryList = vue.ref([]);
      const fetchCategoryList = async () => {
        try {
          const { data } = await postCategoryList();
          categoryList.value = data;
        } catch (error) {
          formatAppLog("error", "at pages/shopping-mall/mall-home.vue:155", "获取商品分类列表失败:", error);
        }
      };
      const activeFirstId = vue.ref("");
      const expandSecondIds = vue.ref([]);
      const goodsMap = vue.ref({});
      const goodsFirstMap = vue.ref({});
      const loadingMap = vue.ref({});
      const currentSecondList = vue.computed(() => {
        const currentFirst = categoryList.value.find((item) => item.id === activeFirstId.value);
        return currentFirst ? currentFirst.children : [];
      });
      const selectFirstCategory = async (item) => {
        activeFirstId.value = item.id;
        expandSecondIds.value = [];
        await fetchCategoryProducts(item.id, "first");
      };
      const toggleSecondExpand = async (secondItem) => {
        const secondId = secondItem.id;
        const idx = expandSecondIds.value.indexOf(secondId);
        if (idx > -1) {
          expandSecondIds.value.splice(idx, 1);
        } else {
          expandSecondIds.value.push(secondId);
          if (!goodsMap.value[secondId] && !loadingMap.value[`second-${secondId}`]) {
            await fetchCategoryProducts(secondId, "second");
          }
        }
      };
      const isExpanded = (secondId) => {
        return expandSecondIds.value.includes(secondId);
      };
      const getGoods = (secondId) => {
        return goodsMap.value[secondId] || [];
      };
      const getFirstGoods = (firstId) => {
        return goodsFirstMap.value[firstId] || [];
      };
      const fetchCategoryProducts = async (categoryId, level = "second") => {
        try {
          const loadingKey = `${level}-${categoryId}`;
          loadingMap.value[loadingKey] = true;
          const { data } = await getProductsByCategory({
            categoryId,
            level
            // 接口如果需要区分一级/二级分类，传该参数
          });
          if (level === "first") {
            goodsFirstMap.value[categoryId] = data.records || [];
          } else {
            goodsMap.value[categoryId] = data.records || [];
          }
        } catch (error) {
          formatAppLog("error", "at pages/shopping-mall/mall-home.vue:236", `获取${level}分类${categoryId}商品失败:`, error);
          if (level === "first") {
            goodsFirstMap.value[categoryId] = [];
          } else {
            goodsMap.value[categoryId] = [];
          }
        } finally {
          const loadingKey = `${level}-${categoryId}`;
          loadingMap.value[loadingKey] = false;
        }
      };
      const fetchCartList = async () => {
        try {
          const response = await getCartList();
          formatAppLog("log", "at pages/shopping-mall/mall-home.vue:254", "购物车列表数据:", response);
        } catch (error) {
          formatAppLog("error", "at pages/shopping-mall/mall-home.vue:256", "获取购物车列表失败:", error);
        }
      };
      const deleteCartFn = () => {
        uni.navigateTo({
          url: `/pages/shopping-mall/order-list`
        });
      };
      const goProductDetail = (id2) => {
        uni.navigateTo({
          url: `/pages/shopping-mall/product-details?id=${id2}`
        });
      };
      onLoad(async () => {
        await fetchCategoryList();
        if (categoryList.value.length) {
          activeFirstId.value = categoryList.value[0].id;
          await fetchCategoryProducts(categoryList.value[0].id, "first");
        }
      });
      const __returned__ = { globalStore, statusBarHeight, scrollTop, backFn, searchFn, categoryList, fetchCategoryList, activeFirstId, expandSecondIds, goodsMap, goodsFirstMap, loadingMap, currentSecondList, selectFirstCategory, toggleSecondExpand, isExpanded, getGoods, getFirstGoods, fetchCategoryProducts, fetchCartList, deleteCartFn, goProductDetail, ref: vue.ref, computed: vue.computed, get useGlobalDataStore() {
        return useGlobalDataStore;
      }, get onLoad() {
        return onLoad;
      }, get onPageScroll() {
        return onPageScroll;
      }, get postCategoryList() {
        return postCategoryList;
      }, get getProductsByCategory() {
        return getProductsByCategory;
      }, get getCartList() {
        return getCartList;
      }, get getRecommendedProducts() {
        return getRecommendedProducts;
      }, get deleteCartItem() {
        return deleteCartItem;
      }, get batchDeleteCartItems() {
        return batchDeleteCartItems;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$f(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    const _component_uni_nav_bar = resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"), __easycom_1$4);
    const _component_uni_search_bar = resolveEasycom(vue.resolveDynamicComponent("uni-search-bar"), __easycom_0$6);
    return vue.openBlock(), vue.createElementBlock("view", { class: "settled-box" }, [
      vue.createElementVNode("scroll-view", {
        "scroll-y": "",
        class: "scroll-content",
        "scroll-top": _ctx.top,
        "show-scrollbar": false,
        "scroll-with-animation": "",
        id: "scrollView"
      }, [
        vue.createElementVNode("view", { class: "header" }, [
          vue.createVNode(_component_uni_nav_bar, {
            class: vue.normalizeClass([$setup.scrollTop > 15 ? "scrollClass" : "", "header-bar"]),
            backgroundColor: "rgba(255,255,255,0)",
            border: false,
            title: "健康商城"
          }, {
            left: vue.withCtx(() => [
              vue.createVNode(_component_uni_icons, {
                type: "left",
                size: "24",
                onClick: $setup.backFn
              })
            ]),
            _: 1
            /* STABLE */
          }, 8, ["class"])
        ]),
        vue.createElementVNode("view", { class: "content" }, [
          vue.createElementVNode("view", { class: "features" }, [
            vue.createVNode(_component_uni_search_bar, {
              class: "uni-mt-10",
              radius: "100",
              placeholder: "请输入商品名称搜索",
              clearButton: "auto",
              cancelButton: "none",
              onConfirm: $setup.searchFn
            }),
            vue.createElementVNode("view", {
              class: "function-icon",
              onClick: $setup.deleteCartFn
            }, [
              vue.createVNode(_component_uni_icons, {
                "custom-prefix": "iconfont",
                type: "icon-wenjianjia",
                size: "15",
                color: "#434746"
              }),
              vue.createElementVNode("view", { style: { "margin-left": "10rpx" } }, "商品订单")
            ])
          ]),
          vue.createElementVNode("view", { class: "category-container" }, [
            vue.createElementVNode("scroll-view", {
              class: "left-category",
              "scroll-y": ""
            }, [
              (vue.openBlock(true), vue.createElementBlock(
                vue.Fragment,
                null,
                vue.renderList($setup.categoryList, (item) => {
                  return vue.openBlock(), vue.createElementBlock("view", {
                    class: vue.normalizeClass(["first-item", { active: item.id === $setup.activeFirstId }]),
                    key: item.id,
                    onClick: ($event) => $setup.selectFirstCategory(item)
                  }, [
                    vue.createElementVNode("view", { class: "first-title" }, [
                      vue.createElementVNode(
                        "view",
                        null,
                        vue.toDisplayString(item.name),
                        1
                        /* TEXT */
                      ),
                      item.id === $setup.activeFirstId ? (vue.openBlock(), vue.createElementBlock("image", {
                        key: 0,
                        src: _imports_0$j
                      })) : vue.createCommentVNode("v-if", true)
                    ]),
                    vue.withDirectives(vue.createElementVNode(
                      "view",
                      { class: "first-line" },
                      null,
                      512
                      /* NEED_PATCH */
                    ), [
                      [vue.vShow, item.id == $setup.activeFirstId]
                    ])
                  ], 10, ["onClick"]);
                }),
                128
                /* KEYED_FRAGMENT */
              ))
            ]),
            vue.createElementVNode("scroll-view", {
              class: "right-content",
              "scroll-y": ""
            }, [
              $setup.getFirstGoods($setup.activeFirstId).length ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 0,
                class: "first-goods-list"
              }, [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($setup.getFirstGoods($setup.activeFirstId), (goods) => {
                    return vue.openBlock(), vue.createElementBlock("view", {
                      class: "goods-item",
                      key: goods.id,
                      onClick: ($event) => $setup.goProductDetail(goods.id)
                    }, [
                      vue.createElementVNode("image", {
                        src: goods.thumbnail,
                        class: "goods-img"
                      }, null, 8, ["src"]),
                      vue.createElementVNode("view", { class: "goods-info" }, [
                        vue.createElementVNode(
                          "text",
                          { class: "goods-name" },
                          vue.toDisplayString(goods.name),
                          1
                          /* TEXT */
                        ),
                        vue.createElementVNode("view", { class: "goods-tag" }, [
                          (vue.openBlock(true), vue.createElementBlock(
                            vue.Fragment,
                            null,
                            vue.renderList(goods.tags, (tag) => {
                              return vue.openBlock(), vue.createElementBlock(
                                "text",
                                {
                                  key: tag,
                                  class: "tag-text"
                                },
                                vue.toDisplayString(tag),
                                1
                                /* TEXT */
                              );
                            }),
                            128
                            /* KEYED_FRAGMENT */
                          ))
                        ]),
                        vue.createElementVNode("view", { class: "goods-action" }, [
                          vue.createElementVNode(
                            "text",
                            { class: "goods-price" },
                            "¥" + vue.toDisplayString(goods.minPrice),
                            1
                            /* TEXT */
                          ),
                          vue.createVNode(_component_uni_icons, {
                            type: "plus-filled",
                            size: "30",
                            color: "#EB9516",
                            class: "add-btn"
                          })
                        ])
                      ])
                    ], 8, ["onClick"]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                ))
              ])) : vue.createCommentVNode("v-if", true),
              $setup.currentSecondList.length ? (vue.openBlock(), vue.createElementBlock("view", { key: 1 }, [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($setup.currentSecondList, (secondItem) => {
                    return vue.openBlock(), vue.createElementBlock("view", {
                      class: "second-item",
                      key: secondItem.id,
                      onClick: ($event) => $setup.toggleSecondExpand(secondItem)
                    }, [
                      vue.createElementVNode("view", { class: "second-title" }, [
                        vue.createElementVNode(
                          "text",
                          { class: "title-text" },
                          vue.toDisplayString(secondItem.name),
                          1
                          /* TEXT */
                        ),
                        vue.createVNode(_component_uni_icons, {
                          "custom-prefix": "iconfont",
                          type: $setup.isExpanded(secondItem.id) ? "icon-chevronsdownshuangxiajiantou" : "icon-chevronsup-top",
                          size: "18",
                          color: "#A09797"
                        }, null, 8, ["type"])
                      ]),
                      $setup.isExpanded(secondItem.id) ? (vue.openBlock(), vue.createElementBlock("view", {
                        key: 0,
                        class: "goods-list"
                      }, [
                        (vue.openBlock(true), vue.createElementBlock(
                          vue.Fragment,
                          null,
                          vue.renderList($setup.getGoods(secondItem.id), (goods) => {
                            return vue.openBlock(), vue.createElementBlock("view", {
                              class: "goods-item",
                              key: goods.id,
                              onClick: ($event) => $setup.goProductDetail(goods.id)
                            }, [
                              vue.createElementVNode("image", {
                                src: goods.thumbnail,
                                class: "goods-img"
                              }, null, 8, ["src"]),
                              vue.createElementVNode("view", { class: "goods-info" }, [
                                vue.createElementVNode(
                                  "text",
                                  { class: "goods-name" },
                                  vue.toDisplayString(goods.name),
                                  1
                                  /* TEXT */
                                ),
                                vue.createElementVNode("view", { class: "goods-tag" }, [
                                  (vue.openBlock(true), vue.createElementBlock(
                                    vue.Fragment,
                                    null,
                                    vue.renderList(goods.tags, (tag) => {
                                      return vue.openBlock(), vue.createElementBlock(
                                        "text",
                                        {
                                          key: tag,
                                          class: "tag-text"
                                        },
                                        vue.toDisplayString(tag),
                                        1
                                        /* TEXT */
                                      );
                                    }),
                                    128
                                    /* KEYED_FRAGMENT */
                                  ))
                                ]),
                                vue.createElementVNode("view", { class: "goods-action" }, [
                                  vue.createElementVNode(
                                    "text",
                                    { class: "goods-price" },
                                    "¥" + vue.toDisplayString(goods.minPrice),
                                    1
                                    /* TEXT */
                                  ),
                                  vue.createVNode(_component_uni_icons, {
                                    type: "plus-filled",
                                    size: "30",
                                    color: "#EB9516",
                                    class: "add-btn"
                                  })
                                ])
                              ])
                            ], 8, ["onClick"]);
                          }),
                          128
                          /* KEYED_FRAGMENT */
                        )),
                        $setup.getGoods(secondItem.id).length == 0 ? (vue.openBlock(), vue.createElementBlock("view", {
                          key: 0,
                          class: "empty-tip"
                        }, "暂无商品")) : vue.createCommentVNode("v-if", true)
                      ])) : vue.createCommentVNode("v-if", true)
                    ], 8, ["onClick"]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                ))
              ])) : !$setup.getFirstGoods($setup.activeFirstId).length ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 2,
                class: "empty-tip"
              }, "暂无商品")) : vue.createCommentVNode("v-if", true)
            ])
          ])
        ])
      ], 8, ["scroll-top"]),
      vue.createElementVNode("view", {
        class: "footer",
        onClick: _cache[0] || (_cache[0] = ($event) => uni.navigateTo({ url: "/pages/shopping-mall/shopping-cart" }))
      }, [
        vue.createVNode(_component_uni_icons, {
          type: "cart",
          size: "35",
          color: "#FF9800"
        })
      ])
    ]);
  }
  const PagesShoppingMallMallHome = /* @__PURE__ */ _export_sfc(_sfc_main$g, [["render", _sfc_render$f], ["__scopeId", "data-v-f1939a52"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/shopping-mall/mall-home.vue"]]);
  const useOrderStore = defineStore("order", () => {
    const order = vue.ref({});
    const orderList2 = vue.ref([]);
    const setOrderList = (list) => {
      orderList2.value = list;
    };
    const setOrder = (val2) => {
      order.value = val2;
    };
    const clearOrderList = () => {
      orderList2.value = [];
    };
    const clearOrder = () => {
      order.value = {};
    };
    return {
      order,
      orderList: orderList2,
      setOrder,
      clearOrder,
      setOrderList,
      clearOrderList
    };
  });
  const _sfc_main$f = {
    __name: "product-details",
    setup(__props, { expose: __expose }) {
      __expose();
      vue.useCssVars((_ctx) => ({
        "834054ae-statusBarHeight": statusBarHeight.value
      }));
      const globalStore = useGlobalDataStore();
      const statusBarHeight = vue.ref(globalStore.statusBarHeight + "px");
      const scrollTop = vue.ref(0);
      const top = vue.ref(0);
      const userIds = vue.ref("");
      const productDetails = vue.ref({});
      onLoad((options) => {
        fetchProductDetails(options.id);
        getCommentByTargetUserIdApi(options.id);
      });
      const backFn = () => {
        uni.navigateBack({ delta: 1 });
      };
      const fetchProductDetails = async (id2) => {
        try {
          const response = await getProductDetail(id2);
          productDetails.value = response.data;
          extractSpecOptions();
          matchCurrentSku();
        } catch (error) {
          formatAppLog("log", "at pages/shopping-mall/product-details.vue:286", "获取商品详情失败:", error);
        }
      };
      const serviceRef = vue.ref(null);
      const customerService = () => {
        serviceRef.value.open();
      };
      const evaluationList = vue.ref([]);
      const getCommentByTargetUserIdApi = async (id2) => {
        let { data } = await getCommentByTargetUserId({
          targetUserId: id2,
          page: 1,
          pageSize: 2
        });
        evaluationList.value = data.records;
      };
      const isInCart = vue.ref("purchase");
      const openStandard = () => {
        isInCart.value = "standard";
        popup.value.open();
      };
      const popup = vue.ref(null);
      const handleBuy = () => {
        popup.value.open();
        isInCart.value = "buy";
      };
      const addToCart = () => {
        popup.value.open();
        isInCart.value = "cart";
      };
      const openEvaluate = () => {
        uni.navigateTo({
          url: `/pages/consult-feel/consult-feel?userId=${userIds.value}&userInfo=${JSON.stringify(consultantInfo.value)}`
        });
      };
      const selectedSpec = vue.ref({ 颜色: "", 尺寸: "" });
      const colorOptions = vue.ref([]);
      const sizeOptions = vue.ref([]);
      const availableSizeOptions = vue.ref([]);
      const specMap = vue.ref({});
      const currentSku = vue.ref(null);
      const count = vue.ref(1);
      const extractSpecOptions = () => {
        const colorToSizes = {};
        productDetails.value.skuList.forEach((sku) => {
          const { 颜色, 尺寸 } = sku.specValues;
          if (!colorToSizes[颜色]) {
            colorToSizes[颜色] = /* @__PURE__ */ new Set();
          }
          colorToSizes[颜色].add(尺寸);
        });
        specMap.value = colorToSizes;
        colorOptions.value = Object.keys(colorToSizes);
        const allSizes = /* @__PURE__ */ new Set();
        productDetails.value.skuList.forEach((sku) => allSizes.add(sku.specValues.尺寸));
        sizeOptions.value = Array.from(allSizes);
        if (colorOptions.value.length) {
          selectedSpec.value.颜色 = colorOptions.value[0];
          availableSizeOptions.value = Array.from(colorToSizes[selectedSpec.value.颜色]);
          if (availableSizeOptions.value.length) {
            selectedSpec.value.尺寸 = availableSizeOptions.value[0];
          }
        }
      };
      const matchCurrentSku = () => {
        const { 颜色, 尺寸 } = selectedSpec.value;
        if (!颜色 || !尺寸) {
          currentSku.value = null;
          return;
        }
        currentSku.value = productDetails.value.skuList.find((sku) => {
          return sku.specValues.颜色 === 颜色 && sku.specValues.尺寸 === 尺寸;
        });
      };
      const handleSelectColor = (color2) => {
        selectedSpec.value.颜色 = color2;
        availableSizeOptions.value = Array.from(specMap.value[color2] || []);
        if (availableSizeOptions.value.length) {
          selectedSpec.value.尺寸 = availableSizeOptions.value[0];
        } else {
          selectedSpec.value.尺寸 = "";
        }
        matchCurrentSku();
      };
      const handleSelectSize = (size) => {
        selectedSpec.value.尺寸 = size;
        matchCurrentSku();
      };
      const handleMinus = () => {
        if (count.value > 1)
          count.value--;
      };
      const handlePlus = () => {
        count.value++;
      };
      const handleAddCart = async () => {
        if (!currentSku.value) {
          return showToast({ title: "请选择商品规格", icon: "none" });
        }
        try {
          const response = await addCart({
            productId: productDetails.value.id,
            // 商品主ID
            quantity: count.value,
            // 购买数量
            skuId: currentSku.value.id
            // 选中的SKU ID
          });
          uni.showToast({ title: "加入购物车成功", icon: "success" });
          popup.value.close();
        } catch (error) {
          formatAppLog("log", "at pages/shopping-mall/product-details.vue:441", error);
        }
      };
      const orderStore = useOrderStore();
      const handleBuyNow = () => {
        if (!currentSku.value) {
          return showToast({ title: "请选择商品规格", icon: "none" });
        }
        const { name, thumbnail } = productDetails.value;
        const { specValues, price } = currentSku.value;
        const data = {
          productName: name,
          specValues,
          totalAmount: price,
          quantity: count.value,
          currentSku: {
            ...currentSku.value,
            quantity: count.value
          },
          thumbnail
        };
        orderStore.setOrder(data);
        uni.navigateTo({
          url: `/pages/shopping-mall/order-confirmation?type=purchase`
        });
      };
      const closePopup = () => {
        popup.value.close();
      };
      const __returned__ = { globalStore, statusBarHeight, scrollTop, top, userIds, productDetails, backFn, fetchProductDetails, serviceRef, customerService, evaluationList, getCommentByTargetUserIdApi, isInCart, openStandard, popup, handleBuy, addToCart, openEvaluate, selectedSpec, colorOptions, sizeOptions, availableSizeOptions, specMap, currentSku, count, extractSpecOptions, matchCurrentSku, handleSelectColor, handleSelectSize, handleMinus, handlePlus, handleAddCart, orderStore, handleBuyNow, closePopup, onMounted: vue.onMounted, ref: vue.ref, get onLoad() {
        return onLoad;
      }, get useGlobalDataStore() {
        return useGlobalDataStore;
      }, get useOrderStore() {
        return useOrderStore;
      }, get getProductDetail() {
        return getProductDetail;
      }, get addCart() {
        return addCart;
      }, get getCommentByTargetUserId() {
        return getCommentByTargetUserId;
      }, get MoteLinesDivide() {
        return MoteLinesDivide;
      }, CustomerService };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$e(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    const _component_uni_nav_bar = resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"), __easycom_1$4);
    const _component_uni_popup = resolveEasycom(vue.resolveDynamicComponent("uni-popup"), __easycom_3$5);
    return vue.openBlock(), vue.createElementBlock("view", { class: "consult-detail-box" }, [
      vue.createElementVNode("scroll-view", {
        "scroll-y": "",
        class: "scroll-content",
        "scroll-top": $setup.top,
        "show-scrollbar": false,
        "scroll-with-animation": "",
        id: "scrollView"
      }, [
        vue.createVNode(_component_uni_nav_bar, {
          backgroundColor: $setup.scrollTop > 15 ? "#fff" : "transparent",
          border: false,
          title: $setup.scrollTop > 15 ? _ctx.consultantInfo.consultantName : "",
          class: "header-bar",
          statusBar: true,
          fixed: ""
        }, {
          left: vue.withCtx(() => [
            vue.createElementVNode("view", { class: "right" }, [
              $setup.scrollTop > 15 ? (vue.openBlock(), vue.createBlock(_component_uni_icons, {
                key: 0,
                type: "left",
                size: "24",
                onClick: $setup.backFn
              })) : (vue.openBlock(), vue.createElementBlock("image", {
                key: 1,
                src: _imports_0$p,
                style: { "width": "56rpx", "height": "56rpx" },
                onClick: $setup.backFn
              }))
            ])
          ]),
          _: 1
          /* STABLE */
        }, 8, ["backgroundColor", "title"]),
        vue.createElementVNode("view", { class: "consult-detail-content" }, [
          vue.createElementVNode("view", { class: "swiper-content" }, [
            vue.createElementVNode("view", { class: "uni-margin-wrap" }, [
              vue.createElementVNode("swiper", {
                class: "swiper",
                circular: "",
                "indicator-dots": true,
                autoplay: true,
                interval: 5e3,
                duration: 500
              }, [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($setup.productDetails.mainImages, (item, index) => {
                    return vue.openBlock(), vue.createElementBlock("swiper-item", {
                      key: index,
                      class: "swiper-item"
                    }, [
                      vue.createElementVNode("image", {
                        src: JSON.parse(item).url,
                        style: { "height": "100%", "width": "100%" }
                      }, null, 8, ["src"])
                    ]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                ))
              ])
            ])
          ]),
          vue.createElementVNode("view", { class: "consult-detail-info" }, [
            vue.createElementVNode(
              "view",
              { class: "detail-item-line-1" },
              vue.toDisplayString($setup.productDetails.name),
              1
              /* TEXT */
            ),
            vue.createElementVNode("view", { class: "detail-item-line-2" }, [
              (vue.openBlock(true), vue.createElementBlock(
                vue.Fragment,
                null,
                vue.renderList($setup.productDetails.tags, (value) => {
                  return vue.openBlock(), vue.createElementBlock("text", null, [
                    vue.createElementVNode(
                      "text",
                      null,
                      vue.toDisplayString(value),
                      1
                      /* TEXT */
                    ),
                    value !== $setup.productDetails.tags[$setup.productDetails.tags.length - 1] ? (vue.openBlock(), vue.createElementBlock("text", { key: 0 }, " | ")) : vue.createCommentVNode("v-if", true)
                  ]);
                }),
                256
                /* UNKEYED_FRAGMENT */
              ))
            ]),
            vue.createElementVNode("view", { class: "detail-item-line-3" }, [
              vue.createElementVNode("view", { class: "content" }, [
                vue.createVNode(_component_uni_icons, {
                  "custom-prefix": "iconfont",
                  type: "icon-xiaohuoche",
                  size: "20",
                  color: "#B5B5B5",
                  class: "icon"
                }),
                vue.createElementVNode("view", { class: "express" }, [
                  vue.createElementVNode("text", null, "48小时发货"),
                  vue.createElementVNode("view", { class: "txt" }, "快递费：包邮")
                ])
              ]),
              vue.createElementVNode("view", { class: "content" }, [
                vue.createVNode(_component_uni_icons, {
                  "custom-prefix": "iconfont",
                  type: "icon-dunpai",
                  size: "20",
                  color: "#B5B5B5",
                  class: "icon"
                }),
                vue.createElementVNode("view", { class: "guarantee" }, [
                  vue.createElementVNode("view", null, "严选好物"),
                  vue.createElementVNode("view", { style: { "color": "#9E9E9E" } }, "·"),
                  vue.createElementVNode("view", null, "售后无忧"),
                  vue.createElementVNode("view", { style: { "color": "#9E9E9E" } }, "·"),
                  vue.createElementVNode("view", null, "诚信为本"),
                  vue.createElementVNode("view", { style: { "color": "#9E9E9E" } }, "·"),
                  vue.createElementVNode("view", null, "货真价实")
                ])
              ]),
              vue.createElementVNode("view", {
                class: "content",
                onClick: $setup.openStandard
              }, [
                vue.createVNode(_component_uni_icons, {
                  "custom-prefix": "iconfont",
                  type: "icon-yingyongAPP_o",
                  size: "20",
                  color: "#B5B5B5",
                  class: "icon"
                }),
                vue.createElementVNode("view", { class: "standard" }, [
                  vue.createElementVNode("view", { class: "txt" }, "选择规格"),
                  vue.createVNode(_component_uni_icons, {
                    type: "down",
                    size: "10",
                    class: "icon"
                  })
                ])
              ])
            ]),
            vue.createElementVNode("view", { class: "product-details" }, [
              vue.createElementVNode("view", { class: "content" }, [
                vue.createElementVNode("view", { class: "title" }, [
                  vue.createElementVNode("text", null, "商品评价"),
                  vue.createElementVNode("text", { class: "line" })
                ]),
                vue.createElementVNode("view", {
                  class: "comment",
                  onClick: $setup.openEvaluate
                }, "全部评价 > ")
              ]),
              $setup.evaluationList.length === 0 ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 0,
                class: "no-evaluation"
              }, " 暂无评价 ")) : vue.createCommentVNode("v-if", true),
              (vue.openBlock(true), vue.createElementBlock(
                vue.Fragment,
                null,
                vue.renderList($setup.evaluationList, (item, index) => {
                  return vue.openBlock(), vue.createElementBlock("view", {
                    class: "comment-item",
                    key: index
                  }, [
                    vue.createElementVNode("view", { class: "item-header" }, [
                      vue.createElementVNode("view", { class: "user" }, [
                        vue.createElementVNode("image", {
                          src: item.avatar,
                          style: { "border-radius": "50%" }
                        }, null, 8, ["src"]),
                        vue.createElementVNode(
                          "text",
                          null,
                          vue.toDisplayString(item.nickname),
                          1
                          /* TEXT */
                        )
                      ]),
                      vue.createElementVNode(
                        "view",
                        { class: "date" },
                        vue.toDisplayString(item.createTime),
                        1
                        /* TEXT */
                      )
                    ]),
                    vue.createElementVNode("view", { class: "comment-item-content" }, [
                      vue.createVNode(
                        $setup["MoteLinesDivide"],
                        {
                          line: 3,
                          expandText: "展开",
                          foldHint: "收起"
                        },
                        {
                          default: vue.withCtx(() => [
                            vue.createTextVNode(
                              vue.toDisplayString(item.content),
                              1
                              /* TEXT */
                            )
                          ]),
                          _: 2
                          /* DYNAMIC */
                        },
                        1024
                        /* DYNAMIC_SLOTS */
                      )
                    ])
                  ]);
                }),
                128
                /* KEYED_FRAGMENT */
              ))
            ]),
            vue.createElementVNode("view", { class: "product-details" }, [
              vue.createElementVNode("view", { class: "content" }, [
                vue.createElementVNode("view", { class: "title" }, [
                  vue.createElementVNode("text", null, "商品详情"),
                  vue.createElementVNode("text", { class: "line" })
                ])
              ]),
              $setup.productDetails.detailImages == 0 ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 0,
                class: "no-evaluation"
              }, " 暂无商品详情 ")) : vue.createCommentVNode("v-if", true),
              (vue.openBlock(true), vue.createElementBlock(
                vue.Fragment,
                null,
                vue.renderList($setup.productDetails.detailImages, (item) => {
                  return vue.openBlock(), vue.createElementBlock("image", {
                    key: item,
                    src: JSON.parse(item).url,
                    mode: "widthFix",
                    style: { "width": "100%" }
                  }, null, 8, ["src"]);
                }),
                128
                /* KEYED_FRAGMENT */
              ))
            ]),
            vue.createElementVNode("view", { class: "anyway" }, [
              vue.createElementVNode("view", { class: "content" }, [
                vue.createElementVNode("view", { class: "wire" }, "这里到底啦")
              ])
            ])
          ])
        ])
      ], 8, ["scroll-top"]),
      vue.createElementVNode("view", { class: "footer" }, [
        vue.createElementVNode("view", { class: "follow" }, [
          vue.createElementVNode("image", { src: _imports_1$f }),
          vue.createElementVNode("text", null, "关注")
        ]),
        vue.createElementVNode("view", {
          class: "contact",
          onClick: $setup.customerService
        }, [
          vue.createElementVNode("image", { src: _imports_2$6 }),
          vue.createElementVNode("text", null, "客服")
        ]),
        vue.createElementVNode("view", { class: "message-but" }, [
          vue.createElementVNode("view", {
            class: "btn-cart",
            onClick: $setup.addToCart
          }, "加入购物车"),
          vue.createElementVNode("view", {
            class: "btn-buy",
            onClick: $setup.handleBuy
          }, "立即购买")
        ])
      ]),
      vue.createVNode(
        _component_uni_popup,
        {
          ref: "popup",
          type: "bottom",
          "border-radius": "20rpx 20rpx 0 0"
        },
        {
          default: vue.withCtx(() => {
            var _a;
            return [
              vue.createElementVNode("view", { class: "goods-container" }, [
                vue.createElementVNode("view", {
                  class: "close",
                  onClick: $setup.closePopup
                }, [
                  vue.createVNode(_component_uni_icons, {
                    type: "closeempty",
                    size: "20"
                  })
                ]),
                vue.createElementVNode("view", { class: "goods-header" }, [
                  vue.createElementVNode("image", {
                    class: "goods-img",
                    src: $setup.productDetails.thumbnail,
                    mode: "widthFix"
                  }, null, 8, ["src"]),
                  vue.createElementVNode("view", { class: "goods-info" }, [
                    vue.createElementVNode("text", { class: "goods-title" }, "温馨坐凳居家必备首选"),
                    vue.createElementVNode(
                      "text",
                      { class: "goods-price" },
                      "¥" + vue.toDisplayString(((_a = $setup.currentSku) == null ? void 0 : _a.price) || 0),
                      1
                      /* TEXT */
                    ),
                    vue.createElementVNode("view", { class: "count-group" }, [
                      vue.createElementVNode("view", {
                        class: "count-btn",
                        onClick: $setup.handleMinus,
                        disabled: $setup.count <= 1
                      }, "-", 8, ["disabled"]),
                      vue.createElementVNode(
                        "view",
                        { class: "count" },
                        vue.toDisplayString($setup.count),
                        1
                        /* TEXT */
                      ),
                      vue.createElementVNode("view", {
                        class: "count-btn",
                        onClick: $setup.handlePlus
                      }, "+")
                    ])
                  ])
                ]),
                vue.createElementVNode("view", { class: "spec-group" }, [
                  vue.createElementVNode("view", { class: "spec-item" }, [
                    vue.createElementVNode("text", { class: "spec-label" }, "颜色"),
                    vue.createElementVNode("view", { class: "spec-options" }, [
                      (vue.openBlock(true), vue.createElementBlock(
                        vue.Fragment,
                        null,
                        vue.renderList($setup.colorOptions, (color2, idx) => {
                          return vue.openBlock(), vue.createElementBlock("view", {
                            class: vue.normalizeClass(["spec-option", { active: $setup.selectedSpec.颜色 === color2 }]),
                            key: idx,
                            onClick: ($event) => $setup.handleSelectColor(color2)
                          }, vue.toDisplayString(color2), 11, ["onClick"]);
                        }),
                        128
                        /* KEYED_FRAGMENT */
                      ))
                    ])
                  ]),
                  vue.createElementVNode("view", { class: "spec-item" }, [
                    vue.createElementVNode("text", { class: "spec-label" }, "尺寸"),
                    vue.createElementVNode("view", { class: "spec-options" }, [
                      (vue.openBlock(true), vue.createElementBlock(
                        vue.Fragment,
                        null,
                        vue.renderList($setup.availableSizeOptions, (size, idx) => {
                          return vue.openBlock(), vue.createElementBlock("view", {
                            class: vue.normalizeClass(["spec-option", { active: $setup.selectedSpec.尺寸 === size }]),
                            key: idx,
                            onClick: ($event) => $setup.handleSelectSize(size)
                          }, vue.toDisplayString(size), 11, ["onClick"]);
                        }),
                        128
                        /* KEYED_FRAGMENT */
                      ))
                    ])
                  ])
                ]),
                vue.createElementVNode("view", { class: "btn-group" }, [
                  vue.withDirectives(vue.createElementVNode(
                    "view",
                    {
                      class: vue.normalizeClass(["cart-btn", $setup.isInCart == "cart" ? "actives" : ""]),
                      onClick: $setup.handleAddCart
                    },
                    "加入购物车",
                    2
                    /* CLASS */
                  ), [
                    [vue.vShow, $setup.isInCart == "cart" || $setup.isInCart == "standard"]
                  ]),
                  vue.withDirectives(vue.createElementVNode(
                    "view",
                    {
                      class: vue.normalizeClass(["buy-btn", $setup.isInCart == "buy" ? "actives" : ""]),
                      onClick: $setup.handleBuyNow
                    },
                    "立即购买",
                    2
                    /* CLASS */
                  ), [
                    [vue.vShow, $setup.isInCart == "buy" || $setup.isInCart == "standard"]
                  ])
                ])
              ])
            ];
          }),
          _: 1
          /* STABLE */
        },
        512
        /* NEED_PATCH */
      ),
      vue.createVNode(
        $setup["CustomerService"],
        { ref: "serviceRef" },
        null,
        512
        /* NEED_PATCH */
      )
    ]);
  }
  const PagesShoppingMallProductDetails = /* @__PURE__ */ _export_sfc(_sfc_main$f, [["render", _sfc_render$e], ["__scopeId", "data-v-834054ae"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/shopping-mall/product-details.vue"]]);
  const _sfc_main$e = {
    __name: "Recommended-Product",
    setup(__props, { expose: __expose }) {
      __expose();
      const recommendedProducts = vue.ref([]);
      const fetchRecommendedProducts = async () => {
        try {
          const { data } = await getRecommendedProducts();
          recommendedProducts.value = data;
        } catch (error) {
          formatAppLog("error", "at components/Recommended-Product.vue:25", "获取推荐商品失败:", error);
        }
      };
      const addCartFn = (item, type) => {
        uni.navigateTo({
          url: `/pages/shopping-mall/product-details?id=${item.id}`
        });
      };
      vue.onMounted(() => {
        fetchRecommendedProducts();
      });
      const __returned__ = { recommendedProducts, fetchRecommendedProducts, addCartFn, ref: vue.ref, onMounted: vue.onMounted, get getRecommendedProducts() {
        return getRecommendedProducts;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$d(_ctx, _cache, $props, $setup, $data, $options) {
    return vue.openBlock(), vue.createElementBlock("view", { class: "recommend" }, [
      vue.createElementVNode("view", { class: "title" }, "更多推荐"),
      vue.createElementVNode("view", { class: "products" }, [
        (vue.openBlock(true), vue.createElementBlock(
          vue.Fragment,
          null,
          vue.renderList($setup.recommendedProducts, (item) => {
            return vue.openBlock(), vue.createElementBlock("view", {
              key: item.id,
              onClick: ($event) => $setup.addCartFn(item, "recommend"),
              class: "product-item"
            }, [
              vue.createElementVNode("image", {
                src: item.thumbnail,
                alt: item.productName,
                class: "products-img"
              }, null, 8, ["src", "alt"]),
              vue.createElementVNode(
                "view",
                { class: "products-name" },
                vue.toDisplayString(item.name),
                1
                /* TEXT */
              )
            ], 8, ["onClick"]);
          }),
          128
          /* KEYED_FRAGMENT */
        ))
      ])
    ]);
  }
  const RecommendedProduct = /* @__PURE__ */ _export_sfc(_sfc_main$e, [["render", _sfc_render$d], ["__scopeId", "data-v-7f09e3f8"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/components/Recommended-Product.vue"]]);
  const _imports_0$1 = "/static/settled/shopping-cart.png";
  const deleteWidth = 120;
  const _sfc_main$d = {
    __name: "shopping-cart",
    setup(__props, { expose: __expose }) {
      __expose();
      vue.useCssVars((_ctx) => ({
        "02c31558-statusBarHeight": statusBarHeight.value
      }));
      const globalStore = useGlobalDataStore();
      const statusBarHeight = vue.ref(globalStore.statusBarHeight + "px");
      const scrollTop = vue.ref(0);
      onPageScroll((e2) => {
        scrollTop.value = e2.scrollTop;
      });
      const backFn = () => {
        uni.navigateBack({
          delta: 1
        });
      };
      const cartList = vue.ref([]);
      const searchFn = (e2) => {
        formatAppLog("log", "at pages/shopping-mall/shopping-cart.vue:156", "搜索关键词:", e2.value);
      };
      const fetchCartList = async () => {
        try {
          const { data } = await getCartList();
          data.forEach((item) => {
            item.checked = false;
          });
          cartList.value = data;
        } catch (error) {
          formatAppLog("error", "at pages/shopping-mall/shopping-cart.vue:168", "获取购物车列表失败:", error);
        }
      };
      const recommendedProducts = vue.ref([]);
      const fetchRecommendedProducts = async () => {
        try {
          const { data } = await getRecommendedProducts();
          recommendedProducts.value = data;
        } catch (error) {
          formatAppLog("error", "at pages/shopping-mall/shopping-cart.vue:179", "获取推荐商品失败:", error);
        }
      };
      const isAllChecked = vue.computed(() => {
        return cartList.value.every((item) => item.checked);
      });
      const totalPrice = vue.computed(() => {
        return cartList.value.filter((item) => item.checked).reduce((sum, item) => sum + item.price * item.quantity, 0).toFixed(2);
      });
      const handleCheckToggle = (index) => {
        resetAllSlide();
        cartList.value[index].checked = !cartList.value[index].checked;
      };
      const selectAll = vue.ref(false);
      const handleAllCheck = (e2) => {
        resetAllSlide();
        const checkedStatus = !isAllChecked.value;
        selectAll.value = checkedStatus;
        cartList.value.forEach((item) => {
          item.checked = checkedStatus;
        });
      };
      const handleMinus = (index) => {
        resetAllSlide();
        if (cartList.value[index].quantity > 1) {
          cartList.value[index].quantity--;
          updateCartItemApi(cartList.value[index].id, cartList.value[index].quantity);
        } else {
          showToast({ title: "数量不能少于1", icon: "none" });
        }
      };
      const handlePlus = (index) => {
        resetAllSlide();
        cartList.value[index].quantity++;
        updateCartItemApi(cartList.value[index].id, cartList.value[index].quantity);
      };
      const updateCartItemApi = async (id2, quantity) => {
        try {
          await updateCartItem({ id: id2, quantity });
        } catch (error) {
          formatAppLog("error", "at pages/shopping-mall/shopping-cart.vue:240", "更新购物车失败:", error);
        }
      };
      const handleSingleDelete = async (item) => {
        try {
          await deleteCartItem({ id: item.id });
          fetchCartList();
          saveCart();
          showToast({ title: "删除成功", icon: "success" });
        } catch (error) {
          formatAppLog("error", "at pages/shopping-mall/shopping-cart.vue:252", "删除购物车商品失败:", error);
        }
      };
      let startX = 0;
      const handleTouchStart = (index, e2) => {
        resetAllSlide();
        startX = e2.touches[0].clientX;
        cartList.value[index].isSliding = true;
      };
      const handleTouchMove = (index, e2) => {
        const item = cartList.value[index];
        if (!item.isSliding)
          return;
        const moveX = e2.touches[0].clientX;
        const diffX = startX - moveX;
        if (diffX <= 0) {
          item.slideX = 0;
        } else if (diffX >= deleteWidth) {
          item.slideX = -deleteWidth;
        } else {
          item.slideX = -diffX;
        }
      };
      const handleTouchEnd = (index) => {
        const item = cartList.value[index];
        item.isSliding = false;
        if (Math.abs(item.slideX) > deleteWidth / 2) {
          item.slideX = -deleteWidth;
        } else {
          item.slideX = 0;
        }
      };
      const resetAllSlide = () => {
        cartList.value.forEach((item) => {
          item.slideX = 0;
          item.isSliding = false;
        });
      };
      const saveCart = () => {
      };
      const deleteCartFn = async () => {
        const selectedIds = cartList.value.filter((item) => item.checked).map((item) => item.id);
        if (selectedIds.length === 0) {
          uni.showToast({ title: "请选择要删除的商品", icon: "none" });
          return;
        }
        uni.showModal({
          title: "确认删除",
          content: "是否删除选中的商品？",
          async success(res2) {
            if (res2.confirm) {
              try {
                await batchDeleteCartItems({ ids: selectedIds });
                await fetchCartList();
                uni.showToast({ title: "删除成功", icon: "success" });
              } catch (error) {
                formatAppLog("error", "at pages/shopping-mall/shopping-cart.vue:329", "批量删除失败:", error);
                uni.showToast({ title: "删除失败", icon: "none" });
              }
            }
          }
        });
      };
      const clearCartFn = async () => {
        const allIds = cartList.value.map((item) => item.id);
        if (allIds.length === 0) {
          uni.showToast({ title: "购物车已为空", icon: "none" });
          return;
        }
        uni.showModal({
          title: "确认清空",
          content: "是否清空整个购物车？",
          async success(res2) {
            if (res2.confirm) {
              try {
                await batchDeleteCartItems({ ids: allIds });
                cartList.value = [];
                uni.showToast({ title: "清空成功", icon: "success" });
              } catch (error) {
                formatAppLog("error", "at pages/shopping-mall/shopping-cart.vue:356", "清空购物车失败:", error);
                uni.showToast({ title: "清空失败", icon: "none" });
              }
            }
          }
        });
      };
      const addCartFn = (item) => {
        uni.navigateTo({
          url: `/pages/shopping-mall/product-details?id=${item.productId}`
        });
        formatAppLog("log", "at pages/shopping-mall/shopping-cart.vue:369", "添加到购物车:", item);
      };
      const orderStore = useOrderStore();
      const handleBuy = () => {
        const selectedIds = cartList.value.filter((item) => item.checked);
        if (selectedIds.length === 0) {
          uni.showToast({ title: "请选择要购买的商品", icon: "none" });
          return;
        }
        orderStore.setOrderList(selectedIds);
        uni.navigateTo({
          url: `/pages/shopping-mall/order-confirmation?type=shoppingCart`
        });
      };
      onShow(() => {
        fetchCartList();
        fetchRecommendedProducts();
      });
      const __returned__ = { globalStore, statusBarHeight, scrollTop, backFn, cartList, searchFn, fetchCartList, recommendedProducts, fetchRecommendedProducts, isAllChecked, totalPrice, handleCheckToggle, selectAll, handleAllCheck, handleMinus, handlePlus, updateCartItemApi, handleSingleDelete, get startX() {
        return startX;
      }, set startX(v2) {
        startX = v2;
      }, deleteWidth, handleTouchStart, handleTouchMove, handleTouchEnd, resetAllSlide, saveCart, deleteCartFn, clearCartFn, addCartFn, orderStore, handleBuy, ref: vue.ref, computed: vue.computed, get useGlobalDataStore() {
        return useGlobalDataStore;
      }, get useOrderStore() {
        return useOrderStore;
      }, get onShow() {
        return onShow;
      }, get onPageScroll() {
        return onPageScroll;
      }, get getCartList() {
        return getCartList;
      }, get getRecommendedProducts() {
        return getRecommendedProducts;
      }, get deleteCartItem() {
        return deleteCartItem;
      }, get batchDeleteCartItems() {
        return batchDeleteCartItems;
      }, get updateCartItem() {
        return updateCartItem;
      }, RecommendedProduct };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$c(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    const _component_uni_nav_bar = resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"), __easycom_1$4);
    const _component_uni_search_bar = resolveEasycom(vue.resolveDynamicComponent("uni-search-bar"), __easycom_0$6);
    return vue.openBlock(), vue.createElementBlock("view", { class: "settled-box" }, [
      vue.createElementVNode("scroll-view", {
        "scroll-y": "",
        class: "scroll-content",
        "scroll-top": _ctx.top,
        "show-scrollbar": false,
        "scroll-with-animation": "",
        id: "scrollView"
      }, [
        vue.createElementVNode("view", { class: "header" }, [
          vue.createVNode(_component_uni_nav_bar, {
            class: vue.normalizeClass([$setup.scrollTop > 15 ? "scrollClass" : "", "header-bar"]),
            backgroundColor: "rgba(255,255,255,0)",
            border: false,
            title: "购物车"
          }, {
            left: vue.withCtx(() => [
              vue.createVNode(_component_uni_icons, {
                type: "left",
                size: "24",
                onClick: $setup.backFn
              })
            ]),
            _: 1
            /* STABLE */
          }, 8, ["class"])
        ]),
        vue.createElementVNode("view", { class: "content" }, [
          vue.createElementVNode("view", { class: "features" }, [
            vue.createVNode(_component_uni_search_bar, {
              class: "uni-mt-10",
              radius: "100",
              placeholder: "请输入商品名称搜索",
              clearButton: "auto",
              cancelButton: "none",
              onConfirm: $setup.searchFn
            }),
            vue.createElementVNode("view", {
              class: "function-icon",
              onClick: $setup.deleteCartFn
            }, [
              vue.createVNode(_component_uni_icons, {
                type: "trash-filled",
                size: "20",
                color: "#ff0000"
              }),
              vue.createElementVNode("view", null, "删除")
            ]),
            vue.createElementVNode("view", { class: "boundary" }),
            vue.createElementVNode("view", {
              class: "function-icon clear",
              onClick: $setup.clearCartFn
            }, [
              vue.createVNode(_component_uni_icons, {
                type: "clear",
                color: "#34C759",
                size: "20"
              }),
              vue.createElementVNode("view", null, "清空")
            ])
          ]),
          vue.createElementVNode("view", { class: "lists" }, [
            $setup.cartList.length == 0 ? (vue.openBlock(), vue.createElementBlock("view", {
              key: 0,
              class: "empty-cart"
            }, [
              vue.createElementVNode("image", { src: _imports_0$1 }),
              vue.createElementVNode("view", null, "小车空空啦，快去加购吧")
            ])) : vue.createCommentVNode("v-if", true),
            (vue.openBlock(true), vue.createElementBlock(
              vue.Fragment,
              null,
              vue.renderList($setup.cartList, (item, index) => {
                return vue.openBlock(), vue.createElementBlock("view", {
                  class: "cart-item",
                  key: item.id
                }, [
                  vue.createElementVNode("movable-area", { class: "movable-area" }, [
                    vue.createElementVNode("movable-view", {
                      class: "movable-view",
                      direction: "horizontal",
                      x: item.slideX,
                      onTouchstart: ($event) => $setup.handleTouchStart(index, $event),
                      onTouchmove: ($event) => $setup.handleTouchMove(index, $event),
                      onTouchend: ($event) => $setup.handleTouchEnd(index)
                    }, [
                      vue.createElementVNode("view", { class: "cart-item-content" }, [
                        vue.createElementVNode(
                          "view",
                          {
                            class: vue.normalizeClass({ "cart-item-show": Math.abs(item.slideX) > 0 })
                          },
                          null,
                          2
                          /* CLASS */
                        ),
                        vue.createElementVNode("view", {
                          class: "cart-radio-wrap",
                          onClick: ($event) => $setup.handleCheckToggle(index)
                        }, [
                          vue.createVNode(_component_uni_icons, {
                            type: item.checked ? "checkbox-filled" : "circle",
                            size: "25",
                            color: item.checked ? "#ff9900" : "#ccc"
                          }, null, 8, ["type", "color"])
                        ], 8, ["onClick"]),
                        vue.createElementVNode("view", { class: "cart-item-info" }, [
                          vue.createElementVNode("image", {
                            class: "cart-item-img",
                            src: item.thumbnail,
                            mode: "widthFix",
                            onClick: ($event) => $setup.addCartFn(item, "cart")
                          }, null, 8, ["src", "onClick"]),
                          vue.createElementVNode("view", { class: "cart-item-detail" }, [
                            vue.createElementVNode("text", {
                              class: "cart-item-title",
                              onClick: ($event) => $setup.addCartFn(item, "cart")
                            }, vue.toDisplayString(item.productName), 9, ["onClick"]),
                            vue.createElementVNode("view", {
                              class: "cart-item-spec",
                              onClick: ($event) => $setup.addCartFn(item, "cart")
                            }, [
                              vue.createElementVNode(
                                "text",
                                null,
                                vue.toDisplayString(Object.values(item.specValues).join(";")),
                                1
                                /* TEXT */
                              ),
                              vue.createElementVNode(
                                "text",
                                { class: "cart-item-price" },
                                "¥" + vue.toDisplayString(item.price),
                                1
                                /* TEXT */
                              )
                            ], 8, ["onClick"]),
                            vue.createElementVNode("view", { class: "count-group" }, [
                              vue.createElementVNode("view", {
                                class: "count-btn minus-btn",
                                onClick: ($event) => $setup.handleMinus(index),
                                disabled: item.quantity <= 1
                              }, [
                                vue.createElementVNode("view", null, "-"),
                                vue.createElementVNode("view", { class: "line" })
                              ], 8, ["onClick", "disabled"]),
                              vue.createElementVNode(
                                "view",
                                { class: "count" },
                                vue.toDisplayString(item.quantity),
                                1
                                /* TEXT */
                              ),
                              vue.createElementVNode("view", {
                                class: "count-btn plus-btn",
                                onClick: ($event) => $setup.handlePlus(index)
                              }, [
                                vue.createElementVNode("view", { class: "line" }),
                                vue.createElementVNode("view", null, "+")
                              ], 8, ["onClick"])
                            ])
                          ])
                        ])
                      ]),
                      vue.createElementVNode("view", {
                        class: "cart-item-delete",
                        onClick: ($event) => $setup.handleSingleDelete(item)
                      }, [
                        vue.createVNode(_component_uni_icons, {
                          type: "trash-filled",
                          size: "25",
                          color: "#fff"
                        }),
                        vue.createElementVNode("text", { class: "delete-text" }, "删除")
                      ], 8, ["onClick"])
                    ], 40, ["x", "onTouchstart", "onTouchmove", "onTouchend"])
                  ])
                ]);
              }),
              128
              /* KEYED_FRAGMENT */
            ))
          ]),
          vue.createVNode($setup["RecommendedProduct"])
        ])
      ], 8, ["scroll-top"]),
      vue.createElementVNode("view", { class: "footer" }, [
        vue.createElementVNode("view", {
          class: "all-check",
          onClick: _cache[0] || (_cache[0] = ($event) => $setup.handleAllCheck())
        }, [
          vue.createVNode(_component_uni_icons, {
            type: $setup.selectAll ? "checkbox-filled" : "circle",
            size: "25",
            color: $setup.selectAll ? "#ff9900" : "#ccc"
          }, null, 8, ["type", "color"]),
          vue.createTextVNode(" 全选 ")
        ]),
        vue.createElementVNode("view", { class: "message-but" }, [
          vue.createElementVNode("view", {
            class: "btn-cart",
            onClick: _cache[1] || (_cache[1] = (...args) => _ctx.addToCart && _ctx.addToCart(...args))
          }, [
            vue.createElementVNode("view", null, "合计："),
            vue.createElementVNode(
              "view",
              { class: "total-price" },
              "¥" + vue.toDisplayString($setup.totalPrice),
              1
              /* TEXT */
            )
          ]),
          vue.createElementVNode("view", {
            class: "btn-buy",
            onClick: $setup.handleBuy
          }, "结算")
        ])
      ])
    ]);
  }
  const PagesShoppingMallShoppingCart = /* @__PURE__ */ _export_sfc(_sfc_main$d, [["render", _sfc_render$c], ["__scopeId", "data-v-02c31558"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/shopping-mall/shopping-cart.vue"]]);
  const _imports_0 = "/static/register/default.png";
  const _sfc_main$c = {
    __name: "delivery-address",
    setup(__props, { expose: __expose }) {
      __expose();
      vue.useCssVars((_ctx) => ({
        "dc1ea2a4-statusBarHeight": statusBarHeight.value
      }));
      const globalStore = useGlobalDataStore();
      const statusBarHeight = vue.ref(globalStore.statusBarHeight + "px");
      const scrollTop = vue.ref(0);
      onPageScroll((e2) => {
        scrollTop.value = e2.scrollTop;
      });
      const backFn = () => {
        uni.navigateBack({
          delta: 1
        });
      };
      const addressList = vue.ref([]);
      const getAddressListFn = async () => {
        try {
          const res2 = await getAddressList();
          addressList.value = res2.data.map((item) => ({
            ...item,
            checked: false
          }));
        } catch (error) {
          formatAppLog("error", "at pages/shopping-mall/delivery-address.vue:96", "获取地址列表失败:", error);
        }
      };
      const handleEdit = (item) => {
        uni.navigateTo({
          url: `/pages/shopping-mall/operation-address?info=${JSON.stringify(item)}`
        });
      };
      const handleAdd = () => {
        uni.navigateTo({
          url: `/pages/shopping-mall/operation-address`
        });
      };
      const checkedAddress = vue.ref(null);
      const handleCheckToggle = (item) => {
        addressList.value = addressList.value.map((addr) => ({
          ...addr,
          checked: addr.id === item.id
        }));
        checkedAddress.value = item;
      };
      const handleDelete = async () => {
        if (!checkedAddress.value) {
          uni.showToast({ title: "请选择要删除的地址", icon: "none" });
          return;
        }
        try {
          await deleteAddress(checkedAddress.value);
          uni.showToast({ title: "删除成功", icon: "none" });
          getAddressListFn();
        } catch (error) {
          formatAppLog("error", "at pages/shopping-mall/delivery-address.vue:135", "删除地址失败:", error);
        }
      };
      onShow(() => {
        getAddressListFn();
      });
      const __returned__ = { globalStore, statusBarHeight, scrollTop, backFn, addressList, getAddressListFn, handleEdit, handleAdd, checkedAddress, handleCheckToggle, handleDelete, ref: vue.ref, computed: vue.computed, get useGlobalDataStore() {
        return useGlobalDataStore;
      }, get onShow() {
        return onShow;
      }, get onLoad() {
        return onLoad;
      }, get onPageScroll() {
        return onPageScroll;
      }, get getAddressList() {
        return getAddressList;
      }, get deleteAddress() {
        return deleteAddress;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$b(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    const _component_uni_nav_bar = resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"), __easycom_1$4);
    return vue.openBlock(), vue.createElementBlock("view", { class: "settled-box" }, [
      vue.createElementVNode("scroll-view", {
        "scroll-y": "",
        class: "scroll-content",
        "scroll-top": _ctx.top,
        "show-scrollbar": false,
        "scroll-with-animation": "",
        id: "scrollView"
      }, [
        vue.createElementVNode("view", { class: "header" }, [
          vue.createVNode(_component_uni_nav_bar, {
            class: vue.normalizeClass([$setup.scrollTop > 15 ? "scrollClass" : "", "header-bar"]),
            backgroundColor: "rgba(255,255,255,0)",
            border: false,
            title: "收货地址"
          }, {
            left: vue.withCtx(() => [
              vue.createVNode(_component_uni_icons, {
                type: "left",
                size: "24",
                onClick: $setup.backFn
              })
            ]),
            right: vue.withCtx(() => [
              vue.createElementVNode("view", {
                class: "function-icon",
                onClick: $setup.handleDelete
              }, [
                vue.createVNode(_component_uni_icons, {
                  type: "trash-filled",
                  size: "20",
                  color: "#ff0000"
                }),
                vue.createElementVNode("view", null, "删除")
              ])
            ]),
            _: 1
            /* STABLE */
          }, 8, ["class"])
        ]),
        vue.createElementVNode("view", { class: "content" }, [
          vue.createElementVNode("view", { class: "content-list" }, [
            (vue.openBlock(true), vue.createElementBlock(
              vue.Fragment,
              null,
              vue.renderList($setup.addressList, (item) => {
                return vue.openBlock(), vue.createElementBlock("view", { class: "content-item" }, [
                  item.isDefault == 1 ? (vue.openBlock(), vue.createElementBlock("image", {
                    key: 0,
                    src: _imports_0,
                    class: "content-tag"
                  })) : vue.createCommentVNode("v-if", true),
                  vue.createVNode(_component_uni_icons, {
                    type: item.checked ? "checkbox-filled" : "circle",
                    color: item.checked ? "#ff9900" : "#ccc",
                    size: "25",
                    onClick: ($event) => $setup.handleCheckToggle(item)
                  }, null, 8, ["type", "color", "onClick"]),
                  vue.createElementVNode("view", { class: "item-info" }, [
                    vue.createElementVNode("view", { class: "item-address" }, [
                      vue.createElementVNode(
                        "view",
                        null,
                        vue.toDisplayString(item.province),
                        1
                        /* TEXT */
                      ),
                      vue.createElementVNode(
                        "view",
                        null,
                        vue.toDisplayString(item.city),
                        1
                        /* TEXT */
                      ),
                      vue.createElementVNode(
                        "view",
                        null,
                        vue.toDisplayString(item.district),
                        1
                        /* TEXT */
                      )
                    ]),
                    vue.createElementVNode(
                      "view",
                      { class: "item-detail" },
                      vue.toDisplayString(item.detailAddress),
                      1
                      /* TEXT */
                    ),
                    vue.createElementVNode("view", { class: "item-receiver" }, [
                      vue.createElementVNode(
                        "view",
                        null,
                        vue.toDisplayString(item.receiverName),
                        1
                        /* TEXT */
                      ),
                      vue.createElementVNode(
                        "view",
                        null,
                        vue.toDisplayString(item.receiverPhone),
                        1
                        /* TEXT */
                      )
                    ])
                  ]),
                  vue.createVNode(_component_uni_icons, {
                    type: "compose",
                    size: "30",
                    color: "#a7a7a7",
                    onClick: ($event) => $setup.handleEdit(item)
                  }, null, 8, ["onClick"])
                ]);
              }),
              256
              /* UNKEYED_FRAGMENT */
            ))
          ])
        ]),
        vue.createElementVNode("view", { class: "boundary" }, "删除地址，需在列表框选中对应地址再点击删除")
      ], 8, ["scroll-top"]),
      vue.createElementVNode("view", { class: "footer" }, [
        vue.createElementVNode("view", {
          class: "btn-buy",
          onClick: $setup.handleAdd
        }, "新增收货地址")
      ])
    ]);
  }
  const PagesShoppingMallDeliveryAddress = /* @__PURE__ */ _export_sfc(_sfc_main$c, [["render", _sfc_render$b], ["__scopeId", "data-v-dc1ea2a4"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/shopping-mall/delivery-address.vue"]]);
  const dataPicker = {
    props: {
      localdata: {
        type: [Array, Object],
        default() {
          return [];
        }
      },
      spaceInfo: {
        type: Object,
        default() {
          return {};
        }
      },
      collection: {
        type: String,
        default: ""
      },
      action: {
        type: String,
        default: ""
      },
      field: {
        type: String,
        default: ""
      },
      orderby: {
        type: String,
        default: ""
      },
      where: {
        type: [String, Object],
        default: ""
      },
      pageData: {
        type: String,
        default: "add"
      },
      pageCurrent: {
        type: Number,
        default: 1
      },
      pageSize: {
        type: Number,
        default: 500
      },
      getcount: {
        type: [Boolean, String],
        default: false
      },
      getone: {
        type: [Boolean, String],
        default: false
      },
      gettree: {
        type: [Boolean, String],
        default: false
      },
      manual: {
        type: Boolean,
        default: false
      },
      value: {
        type: [Array, String, Number],
        default() {
          return [];
        }
      },
      modelValue: {
        type: [Array, String, Number],
        default() {
          return [];
        }
      },
      preload: {
        type: Boolean,
        default: false
      },
      stepSearh: {
        type: Boolean,
        default: true
      },
      selfField: {
        type: String,
        default: ""
      },
      parentField: {
        type: String,
        default: ""
      },
      multiple: {
        type: Boolean,
        default: false
      },
      map: {
        type: Object,
        default() {
          return {
            text: "text",
            value: "value"
          };
        }
      }
    },
    data() {
      return {
        loading: false,
        errorMessage: "",
        loadMore: {
          contentdown: "",
          contentrefresh: "",
          contentnomore: ""
        },
        dataList: [],
        selected: [],
        selectedIndex: 0,
        page: {
          current: this.pageCurrent,
          size: this.pageSize,
          count: 0
        }
      };
    },
    computed: {
      isLocalData() {
        return !this.collection.length;
      },
      isCloudData() {
        return this.collection.length > 0;
      },
      isCloudDataList() {
        return this.isCloudData && (!this.parentField && !this.selfField);
      },
      isCloudDataTree() {
        return this.isCloudData && this.parentField && this.selfField;
      },
      dataValue() {
        let isModelValue = Array.isArray(this.modelValue) ? this.modelValue.length > 0 : this.modelValue !== null || this.modelValue !== void 0;
        return isModelValue ? this.modelValue : this.value;
      },
      hasValue() {
        if (typeof this.dataValue === "number") {
          return true;
        }
        return this.dataValue != null && this.dataValue.length > 0;
      }
    },
    created() {
      this.$watch(() => {
        var al = [];
        [
          "pageCurrent",
          "pageSize",
          "spaceInfo",
          "value",
          "modelValue",
          "localdata",
          "collection",
          "action",
          "field",
          "orderby",
          "where",
          "getont",
          "getcount",
          "gettree"
        ].forEach((key) => {
          al.push(this[key]);
        });
        return al;
      }, (newValue, oldValue) => {
        for (let i2 = 2; i2 < newValue.length; i2++) {
          if (newValue[i2] != oldValue[i2]) {
            break;
          }
        }
        if (newValue[0] != oldValue[0]) {
          this.page.current = this.pageCurrent;
        }
        this.page.size = this.pageSize;
        this.onPropsChange();
      });
      this._treeData = [];
    },
    methods: {
      onPropsChange() {
        this._treeData = [];
      },
      // 填充 pickview 数据
      async loadData() {
        if (this.isLocalData) {
          this.loadLocalData();
        } else if (this.isCloudDataList) {
          this.loadCloudDataList();
        } else if (this.isCloudDataTree) {
          this.loadCloudDataTree();
        }
      },
      // 加载本地数据
      async loadLocalData() {
        this._treeData = [];
        this._extractTree(this.localdata, this._treeData);
        let inputValue = this.dataValue;
        if (inputValue === void 0) {
          return;
        }
        if (Array.isArray(inputValue)) {
          inputValue = inputValue[inputValue.length - 1];
          if (typeof inputValue === "object" && inputValue[this.map.value]) {
            inputValue = inputValue[this.map.value];
          }
        }
        this.selected = this._findNodePath(inputValue, this.localdata);
      },
      // 加载 Cloud 数据 (单列)
      async loadCloudDataList() {
        if (this.loading) {
          return;
        }
        this.loading = true;
        try {
          let response = await this.getCommand();
          let responseData = response.result.data;
          this._treeData = responseData;
          this._updateBindData();
          this._updateSelected();
          this.onDataChange();
        } catch (e2) {
          this.errorMessage = e2;
        } finally {
          this.loading = false;
        }
      },
      // 加载 Cloud 数据 (树形)
      async loadCloudDataTree() {
        if (this.loading) {
          return;
        }
        this.loading = true;
        try {
          let commandOptions = {
            field: this._cloudDataPostField(),
            where: this._cloudDataTreeWhere()
          };
          if (this.gettree) {
            commandOptions.startwith = `${this.selfField}=='${this.dataValue}'`;
          }
          let response = await this.getCommand(commandOptions);
          let responseData = response.result.data;
          this._treeData = responseData;
          this._updateBindData();
          this._updateSelected();
          this.onDataChange();
        } catch (e2) {
          this.errorMessage = e2;
        } finally {
          this.loading = false;
        }
      },
      // 加载 Cloud 数据 (节点)
      async loadCloudDataNode(callback) {
        if (this.loading) {
          return;
        }
        this.loading = true;
        try {
          let commandOptions = {
            field: this._cloudDataPostField(),
            where: this._cloudDataNodeWhere()
          };
          let response = await this.getCommand(commandOptions);
          let responseData = response.result.data;
          callback(responseData);
        } catch (e2) {
          this.errorMessage = e2;
        } finally {
          this.loading = false;
        }
      },
      // 回显 Cloud 数据
      getCloudDataValue() {
        if (this.isCloudDataList) {
          return this.getCloudDataListValue();
        }
        if (this.isCloudDataTree) {
          return this.getCloudDataTreeValue();
        }
      },
      // 回显 Cloud 数据 (单列)
      getCloudDataListValue() {
        let where = [];
        let whereField = this._getForeignKeyByField();
        if (whereField) {
          where.push(`${whereField} == '${this.dataValue}'`);
        }
        where = where.join(" || ");
        if (this.where) {
          where = `(${this.where}) && (${where})`;
        }
        return this.getCommand({
          field: this._cloudDataPostField(),
          where
        }).then((res2) => {
          this.selected = res2.result.data;
          return res2.result.data;
        });
      },
      // 回显 Cloud 数据 (树形)
      getCloudDataTreeValue() {
        return this.getCommand({
          field: this._cloudDataPostField(),
          getTreePath: {
            startWith: `${this.selfField}=='${this.dataValue}'`
          }
        }).then((res2) => {
          let treePath = [];
          this._extractTreePath(res2.result.data, treePath);
          this.selected = treePath;
          return treePath;
        });
      },
      getCommand(options = {}) {
        let db = tr.database(this.spaceInfo);
        const action = options.action || this.action;
        if (action) {
          db = db.action(action);
        }
        const collection = options.collection || this.collection;
        db = db.collection(collection);
        const where = options.where || this.where;
        if (!(!where || !Object.keys(where).length)) {
          db = db.where(where);
        }
        const field = options.field || this.field;
        if (field) {
          db = db.field(field);
        }
        const orderby = options.orderby || this.orderby;
        if (orderby) {
          db = db.orderBy(orderby);
        }
        const current = options.pageCurrent !== void 0 ? options.pageCurrent : this.page.current;
        const size = options.pageSize !== void 0 ? options.pageSize : this.page.size;
        const getCount = options.getcount !== void 0 ? options.getcount : this.getcount;
        const getTree = options.gettree !== void 0 ? options.gettree : this.gettree;
        const getOptions = {
          getCount,
          getTree
        };
        if (options.getTreePath) {
          getOptions.getTreePath = options.getTreePath;
        }
        db = db.skip(size * (current - 1)).limit(size).get(getOptions);
        return db;
      },
      _cloudDataPostField() {
        let fields = [this.field];
        if (this.parentField) {
          fields.push(`${this.parentField} as parent_value`);
        }
        return fields.join(",");
      },
      _cloudDataTreeWhere() {
        let result = [];
        let selected = this.selected;
        let parentField = this.parentField;
        if (parentField) {
          result.push(`${parentField} == null || ${parentField} == ""`);
        }
        if (selected.length) {
          for (var i2 = 0; i2 < selected.length - 1; i2++) {
            result.push(`${parentField} == '${selected[i2].value}'`);
          }
        }
        let where = [];
        if (this.where) {
          where.push(`(${this.where})`);
        }
        if (result.length) {
          where.push(`(${result.join(" || ")})`);
        }
        return where.join(" && ");
      },
      _cloudDataNodeWhere() {
        let where = [];
        let selected = this.selected;
        if (selected.length) {
          where.push(`${this.parentField} == '${selected[selected.length - 1].value}'`);
        }
        where = where.join(" || ");
        if (this.where) {
          return `(${this.where}) && (${where})`;
        }
        return where;
      },
      _getWhereByForeignKey() {
        let result = [];
        let whereField = this._getForeignKeyByField();
        if (whereField) {
          result.push(`${whereField} == '${this.dataValue}'`);
        }
        if (this.where) {
          return `(${this.where}) && (${result.join(" || ")})`;
        }
        return result.join(" || ");
      },
      _getForeignKeyByField() {
        let fields = this.field.split(",");
        let whereField = null;
        for (let i2 = 0; i2 < fields.length; i2++) {
          const items = fields[i2].split("as");
          if (items.length < 2) {
            continue;
          }
          if (items[1].trim() === "value") {
            whereField = items[0].trim();
            break;
          }
        }
        return whereField;
      },
      _updateBindData(node) {
        const {
          dataList,
          hasNodes
        } = this._filterData(this._treeData, this.selected);
        let isleaf = this._stepSearh === false && !hasNodes;
        if (node) {
          node.isleaf = isleaf;
        }
        this.dataList = dataList;
        this.selectedIndex = dataList.length - 1;
        if (!isleaf && this.selected.length < dataList.length) {
          this.selected.push({
            value: null,
            text: "请选择"
          });
        }
        return {
          isleaf,
          hasNodes
        };
      },
      _updateSelected() {
        let dl = this.dataList;
        let sl = this.selected;
        let textField = this.map.text;
        let valueField = this.map.value;
        for (let i2 = 0; i2 < sl.length; i2++) {
          let value = sl[i2].value;
          let dl2 = dl[i2];
          for (let j2 = 0; j2 < dl2.length; j2++) {
            let item2 = dl2[j2];
            if (item2[valueField] === value) {
              sl[i2].text = item2[textField];
              break;
            }
          }
        }
      },
      _filterData(data, paths) {
        let dataList = [];
        let hasNodes = true;
        dataList.push(data.filter((item) => {
          return item.parent_value === null || item.parent_value === void 0 || item.parent_value === "";
        }));
        for (let i2 = 0; i2 < paths.length; i2++) {
          let value = paths[i2].value;
          let nodes = data.filter((item) => {
            return item.parent_value === value;
          });
          if (nodes.length) {
            dataList.push(nodes);
          } else {
            hasNodes = false;
          }
        }
        return {
          dataList,
          hasNodes
        };
      },
      _extractTree(nodes, result, parent_value) {
        let valueField = this.map.value;
        for (let i2 = 0; i2 < nodes.length; i2++) {
          let node = nodes[i2];
          let child = {};
          for (let key in node) {
            if (key !== "children") {
              child[key] = node[key];
            }
          }
          if (parent_value !== null && parent_value !== void 0 && parent_value !== "") {
            child.parent_value = parent_value;
          }
          result.push(child);
          let children = node.children;
          if (children) {
            this._extractTree(children, result, node[valueField]);
          }
        }
      },
      _extractTreePath(nodes, result) {
        for (let i2 = 0; i2 < nodes.length; i2++) {
          let node = nodes[i2];
          let child = {};
          for (let key in node) {
            if (key !== "children") {
              child[key] = node[key];
            }
          }
          result.push(child);
          let children = node.children;
          if (children) {
            this._extractTreePath(children, result);
          }
        }
      },
      _findNodePath(key, nodes, path = []) {
        let textField = this.map.text;
        let valueField = this.map.value;
        for (let i2 = 0; i2 < nodes.length; i2++) {
          let node = nodes[i2];
          let children = node.children;
          let text = node[textField];
          let value = node[valueField];
          path.push({
            value,
            text
          });
          if (value === key) {
            return path;
          }
          if (children) {
            const p2 = this._findNodePath(key, children, path);
            if (p2.length) {
              return p2;
            }
          }
          path.pop();
        }
        return [];
      }
    }
  };
  const _sfc_main$b = {
    name: "UniDataPickerView",
    emits: ["nodeclick", "change", "datachange", "update:modelValue"],
    mixins: [dataPicker],
    props: {
      managedMode: {
        type: Boolean,
        default: false
      },
      ellipsis: {
        type: Boolean,
        default: true
      }
    },
    created() {
      if (!this.managedMode) {
        this.$nextTick(() => {
          this.loadData();
        });
      }
    },
    methods: {
      onPropsChange() {
        this._treeData = [];
        this.selectedIndex = 0;
        this.$nextTick(() => {
          this.loadData();
        });
      },
      handleSelect(index) {
        this.selectedIndex = index;
      },
      handleNodeClick(item, i2, j2) {
        if (item.disable) {
          return;
        }
        const node = this.dataList[i2][j2];
        const text = node[this.map.text];
        const value = node[this.map.value];
        if (i2 < this.selected.length - 1) {
          this.selected.splice(i2, this.selected.length - i2);
          this.selected.push({
            text,
            value
          });
        } else if (i2 === this.selected.length - 1) {
          this.selected.splice(i2, 1, {
            text,
            value
          });
        }
        if (node.isleaf) {
          this.onSelectedChange(node, node.isleaf);
          return;
        }
        const {
          isleaf,
          hasNodes
        } = this._updateBindData();
        if (this.isLocalData) {
          this.onSelectedChange(node, !hasNodes || isleaf);
        } else if (this.isCloudDataList) {
          this.onSelectedChange(node, true);
        } else if (this.isCloudDataTree) {
          if (isleaf) {
            this.onSelectedChange(node, node.isleaf);
          } else if (!hasNodes) {
            this.loadCloudDataNode((data) => {
              if (!data.length) {
                node.isleaf = true;
              } else {
                this._treeData.push(...data);
                this._updateBindData(node);
              }
              this.onSelectedChange(node, node.isleaf);
            });
          }
        }
      },
      updateData(data) {
        this._treeData = data.treeData;
        this.selected = data.selected;
        if (!this._treeData.length) {
          this.loadData();
        } else {
          this._updateBindData();
        }
      },
      onDataChange() {
        this.$emit("datachange");
      },
      onSelectedChange(node, isleaf) {
        if (isleaf) {
          this._dispatchEvent();
        }
        if (node) {
          this.$emit("nodeclick", node);
        }
      },
      _dispatchEvent() {
        this.$emit("change", this.selected.slice(0));
      }
    }
  };
  function _sfc_render$a(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_load_more = resolveEasycom(vue.resolveDynamicComponent("uni-load-more"), __easycom_3$6);
    return vue.openBlock(), vue.createElementBlock("view", { class: "uni-data-pickerview" }, [
      !_ctx.isCloudDataList ? (vue.openBlock(), vue.createElementBlock("scroll-view", {
        key: 0,
        class: "selected-area",
        "scroll-x": "true"
      }, [
        vue.createElementVNode("view", { class: "selected-list" }, [
          (vue.openBlock(true), vue.createElementBlock(
            vue.Fragment,
            null,
            vue.renderList(_ctx.selected, (item, index) => {
              return vue.openBlock(), vue.createElementBlock("view", {
                class: vue.normalizeClass(["selected-item", {
                  "selected-item-active": index == _ctx.selectedIndex
                }]),
                key: index,
                onClick: ($event) => $options.handleSelect(index)
              }, [
                vue.createElementVNode(
                  "text",
                  null,
                  vue.toDisplayString(item.text || ""),
                  1
                  /* TEXT */
                )
              ], 10, ["onClick"]);
            }),
            128
            /* KEYED_FRAGMENT */
          ))
        ])
      ])) : vue.createCommentVNode("v-if", true),
      vue.createElementVNode("view", { class: "tab-c" }, [
        vue.createElementVNode("scroll-view", {
          class: "list",
          "scroll-y": true
        }, [
          (vue.openBlock(true), vue.createElementBlock(
            vue.Fragment,
            null,
            vue.renderList(_ctx.dataList[_ctx.selectedIndex], (item, j2) => {
              return vue.openBlock(), vue.createElementBlock("view", {
                class: vue.normalizeClass(["item", { "is-disabled": !!item.disable }]),
                key: j2,
                onClick: ($event) => $options.handleNodeClick(item, _ctx.selectedIndex, j2)
              }, [
                vue.createElementVNode(
                  "text",
                  { class: "item-text" },
                  vue.toDisplayString(item[_ctx.map.text]),
                  1
                  /* TEXT */
                ),
                _ctx.selected.length > _ctx.selectedIndex && item[_ctx.map.value] == _ctx.selected[_ctx.selectedIndex].value ? (vue.openBlock(), vue.createElementBlock("view", {
                  key: 0,
                  class: "check"
                })) : vue.createCommentVNode("v-if", true)
              ], 10, ["onClick"]);
            }),
            128
            /* KEYED_FRAGMENT */
          ))
        ]),
        _ctx.loading ? (vue.openBlock(), vue.createElementBlock("view", {
          key: 0,
          class: "loading-cover"
        }, [
          vue.createVNode(_component_uni_load_more, {
            class: "load-more",
            contentText: _ctx.loadMore,
            status: "loading"
          }, null, 8, ["contentText"])
        ])) : vue.createCommentVNode("v-if", true),
        _ctx.errorMessage ? (vue.openBlock(), vue.createElementBlock("view", {
          key: 1,
          class: "error-message"
        }, [
          vue.createElementVNode(
            "text",
            { class: "error-text" },
            vue.toDisplayString(_ctx.errorMessage),
            1
            /* TEXT */
          )
        ])) : vue.createCommentVNode("v-if", true)
      ])
    ]);
  }
  const DataPickerView = /* @__PURE__ */ _export_sfc(_sfc_main$b, [["render", _sfc_render$a], ["__scopeId", "data-v-91ec6a82"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/uni_modules/uni-data-picker/components/uni-data-pickerview/uni-data-pickerview.vue"]]);
  const _sfc_main$a = {
    name: "UniDataPicker",
    emits: ["popupopened", "popupclosed", "nodeclick", "input", "change", "update:modelValue", "inputclick"],
    mixins: [dataPicker],
    components: {
      DataPickerView
    },
    props: {
      options: {
        type: [Object, Array],
        default() {
          return {};
        }
      },
      popupTitle: {
        type: String,
        default: "请选择"
      },
      placeholder: {
        type: String,
        default: "请选择"
      },
      heightMobile: {
        type: String,
        default: ""
      },
      readonly: {
        type: Boolean,
        default: false
      },
      clearIcon: {
        type: Boolean,
        default: true
      },
      border: {
        type: Boolean,
        default: true
      },
      split: {
        type: String,
        default: "/"
      },
      ellipsis: {
        type: Boolean,
        default: true
      }
    },
    data() {
      return {
        isOpened: false,
        inputSelected: []
      };
    },
    created() {
      this.$nextTick(() => {
        this.load();
      });
    },
    watch: {
      localdata: {
        handler() {
          this.load();
        },
        deep: true
      }
    },
    methods: {
      clear() {
        this._dispatchEvent([]);
      },
      onPropsChange() {
        this._treeData = [];
        this.selectedIndex = 0;
        this.load();
      },
      load() {
        if (this.readonly) {
          this._processReadonly(this.localdata, this.dataValue);
          return;
        }
        if (this.isLocalData) {
          this.loadData();
          this.inputSelected = this.selected.slice(0);
        } else if (this.isCloudDataList || this.isCloudDataTree) {
          this.loading = true;
          this.getCloudDataValue().then((res2) => {
            this.loading = false;
            this.inputSelected = res2;
          }).catch((err) => {
            this.loading = false;
            this.errorMessage = err;
          });
        }
      },
      show() {
        this.isOpened = true;
        setTimeout(() => {
          this.$refs.pickerView.updateData({
            treeData: this._treeData,
            selected: this.selected,
            selectedIndex: this.selectedIndex
          });
        }, 200);
        this.$emit("popupopened");
      },
      hide() {
        this.isOpened = false;
        this.$emit("popupclosed");
      },
      handleInput() {
        if (this.readonly) {
          this.$emit("inputclick");
          return;
        }
        this.show();
      },
      handleClose(e2) {
        this.hide();
      },
      onnodeclick(e2) {
        this.$emit("nodeclick", e2);
      },
      ondatachange(e2) {
        this._treeData = this.$refs.pickerView._treeData;
      },
      onchange(e2) {
        this.hide();
        this.$nextTick(() => {
          this.inputSelected = e2;
        });
        this._dispatchEvent(e2);
      },
      _processReadonly(dataList, value) {
        var isTree = dataList.findIndex((item2) => {
          return item2.children;
        });
        if (isTree > -1) {
          let inputValue;
          if (Array.isArray(value)) {
            inputValue = value[value.length - 1];
            if (typeof inputValue === "object" && inputValue.value) {
              inputValue = inputValue.value;
            }
          } else {
            inputValue = value;
          }
          this.inputSelected = this._findNodePath(inputValue, this.localdata);
          return;
        }
        if (!this.hasValue) {
          this.inputSelected = [];
          return;
        }
        let result = [];
        if (Array.isArray(value)) {
          for (let i2 = 0; i2 < value.length; i2++) {
            var val2 = value[i2];
            var item = dataList.find((v2) => {
              return v2.value == val2;
            });
            if (item) {
              result.push(item);
            }
          }
        } else {
          let item2 = dataList.find((v2) => {
            return v2.value == value;
          });
          if (item2) {
            result.push(item2);
          }
        }
        if (result.length) {
          this.inputSelected = result;
        }
      },
      _filterForArray(data, valueArray) {
        var result = [];
        for (let i2 = 0; i2 < valueArray.length; i2++) {
          var value = valueArray[i2];
          var found = data.find((item) => {
            return item.value == value;
          });
          if (found) {
            result.push(found);
          }
        }
        return result;
      },
      _dispatchEvent(selected) {
        let item = {};
        if (selected.length) {
          var value = new Array(selected.length);
          for (var i2 = 0; i2 < selected.length; i2++) {
            value[i2] = selected[i2].value;
          }
          item = selected[selected.length - 1];
        } else {
          item.value = "";
        }
        if (this.formItem) {
          this.formItem.setValue(item.value);
        }
        this.$emit("input", item.value);
        this.$emit("update:modelValue", item.value);
        this.$emit("change", {
          detail: {
            value: selected
          }
        });
      }
    }
  };
  function _sfc_render$9(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_load_more = resolveEasycom(vue.resolveDynamicComponent("uni-load-more"), __easycom_3$6);
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    const _component_data_picker_view = vue.resolveComponent("data-picker-view");
    return vue.openBlock(), vue.createElementBlock("view", { class: "uni-data-tree" }, [
      vue.createElementVNode("view", {
        class: "uni-data-tree-input",
        onClick: _cache[1] || (_cache[1] = (...args) => $options.handleInput && $options.handleInput(...args))
      }, [
        vue.renderSlot(_ctx.$slots, "default", {
          options: $props.options,
          data: $data.inputSelected,
          error: _ctx.errorMessage
        }, () => [
          vue.createElementVNode(
            "view",
            {
              class: vue.normalizeClass(["input-value", { "input-value-border": $props.border }])
            },
            [
              _ctx.errorMessage ? (vue.openBlock(), vue.createElementBlock(
                "text",
                {
                  key: 0,
                  class: "selected-area error-text"
                },
                vue.toDisplayString(_ctx.errorMessage),
                1
                /* TEXT */
              )) : _ctx.loading && !$data.isOpened ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 1,
                class: "selected-area"
              }, [
                vue.createVNode(_component_uni_load_more, {
                  class: "load-more",
                  contentText: _ctx.loadMore,
                  status: "loading"
                }, null, 8, ["contentText"])
              ])) : $data.inputSelected.length ? (vue.openBlock(), vue.createElementBlock("scroll-view", {
                key: 2,
                class: "selected-area",
                "scroll-x": "true"
              }, [
                vue.createElementVNode("view", { class: "selected-list" }, [
                  (vue.openBlock(true), vue.createElementBlock(
                    vue.Fragment,
                    null,
                    vue.renderList($data.inputSelected, (item, index) => {
                      return vue.openBlock(), vue.createElementBlock("view", {
                        class: "selected-item",
                        key: index
                      }, [
                        vue.createElementVNode(
                          "text",
                          { class: "text-color" },
                          vue.toDisplayString(item.text),
                          1
                          /* TEXT */
                        ),
                        index < $data.inputSelected.length - 1 ? (vue.openBlock(), vue.createElementBlock(
                          "text",
                          {
                            key: 0,
                            class: "input-split-line"
                          },
                          vue.toDisplayString($props.split),
                          1
                          /* TEXT */
                        )) : vue.createCommentVNode("v-if", true)
                      ]);
                    }),
                    128
                    /* KEYED_FRAGMENT */
                  ))
                ])
              ])) : (vue.openBlock(), vue.createElementBlock(
                "text",
                {
                  key: 3,
                  class: "selected-area placeholder"
                },
                vue.toDisplayString($props.placeholder),
                1
                /* TEXT */
              )),
              $props.clearIcon && !$props.readonly && $data.inputSelected.length ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 4,
                class: "icon-clear",
                onClick: _cache[0] || (_cache[0] = vue.withModifiers((...args) => $options.clear && $options.clear(...args), ["stop"]))
              }, [
                vue.createVNode(_component_uni_icons, {
                  type: "clear",
                  color: "#c0c4cc",
                  size: "24"
                })
              ])) : vue.createCommentVNode("v-if", true),
              (!$props.clearIcon || !$data.inputSelected.length) && !$props.readonly ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 5,
                class: "arrow-area"
              }, [
                vue.createElementVNode("view", { class: "input-arrow" })
              ])) : vue.createCommentVNode("v-if", true)
            ],
            2
            /* CLASS */
          )
        ], true)
      ]),
      $data.isOpened ? (vue.openBlock(), vue.createElementBlock("view", {
        key: 0,
        class: "uni-data-tree-cover",
        onClick: _cache[2] || (_cache[2] = (...args) => $options.handleClose && $options.handleClose(...args))
      })) : vue.createCommentVNode("v-if", true),
      $data.isOpened ? (vue.openBlock(), vue.createElementBlock("view", {
        key: 1,
        class: "uni-data-tree-dialog"
      }, [
        vue.createElementVNode("view", { class: "uni-popper__arrow" }),
        vue.createElementVNode("view", { class: "dialog-caption" }, [
          vue.createElementVNode("view", { class: "title-area" }, [
            vue.createElementVNode(
              "text",
              { class: "dialog-title" },
              vue.toDisplayString($props.popupTitle),
              1
              /* TEXT */
            )
          ]),
          vue.createElementVNode("view", {
            class: "dialog-close",
            onClick: _cache[3] || (_cache[3] = (...args) => $options.handleClose && $options.handleClose(...args))
          }, [
            vue.createElementVNode("view", {
              class: "dialog-close-plus",
              "data-id": "close"
            }),
            vue.createElementVNode("view", {
              class: "dialog-close-plus dialog-close-rotate",
              "data-id": "close"
            })
          ])
        ]),
        vue.createVNode(_component_data_picker_view, {
          class: "picker-view",
          ref: "pickerView",
          modelValue: _ctx.dataValue,
          "onUpdate:modelValue": _cache[4] || (_cache[4] = ($event) => _ctx.dataValue = $event),
          localdata: _ctx.localdata,
          preload: _ctx.preload,
          collection: _ctx.collection,
          field: _ctx.field,
          orderby: _ctx.orderby,
          where: _ctx.where,
          "step-searh": _ctx.stepSearh,
          "self-field": _ctx.selfField,
          "parent-field": _ctx.parentField,
          "managed-mode": true,
          map: _ctx.map,
          ellipsis: $props.ellipsis,
          onChange: $options.onchange,
          onDatachange: $options.ondatachange,
          onNodeclick: $options.onnodeclick
        }, null, 8, ["modelValue", "localdata", "preload", "collection", "field", "orderby", "where", "step-searh", "self-field", "parent-field", "map", "ellipsis", "onChange", "onDatachange", "onNodeclick"])
      ])) : vue.createCommentVNode("v-if", true)
    ]);
  }
  const __easycom_2 = /* @__PURE__ */ _export_sfc(_sfc_main$a, [["render", _sfc_render$9], ["__scopeId", "data-v-2653531e"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/uni_modules/uni-data-picker/components/uni-data-picker/uni-data-picker.vue"]]);
  const findAreaValue = (list, matchTexts) => {
    for (const item of list) {
      if (item.text === matchTexts[0]) {
        if (matchTexts.length === 1) {
          return item.value;
        }
        if (item.children && item.children.length) {
          const res2 = findAreaValue(item.children, matchTexts.slice(1));
          if (res2)
            return res2;
        }
      }
    }
    return "";
  };
  const CACHE_KEY = "global_address_area_list";
  const CACHE_EXPIRE = 30 * 24 * 60 * 60 * 1e3;
  const _sfc_main$9 = {
    __name: "operation-address",
    setup(__props, { expose: __expose }) {
      __expose();
      vue.useCssVars((_ctx) => ({
        "e022323c-statusBarHeight": statusBarHeight.value
      }));
      const globalStore = useGlobalDataStore();
      const statusBarHeight = vue.ref(globalStore.statusBarHeight + "px");
      const scrollTop = vue.ref(0);
      const top = vue.ref(0);
      onPageScroll((e2) => {
        scrollTop.value = e2.scrollTop;
      });
      const backFn = () => {
        uni.navigateBack({ delta: 1 });
      };
      const handleCheckToggle = () => {
        addressFrom.value.isDefault = addressFrom.value.isDefault == 1 ? 0 : 1;
      };
      const classes = vue.ref("");
      const addressFrom = vue.ref({
        id: "",
        city: "",
        detailAddress: "",
        district: "",
        isDefault: 0,
        province: "",
        receiverName: "",
        receiverPhone: "",
        street: ""
        // 四级地址-街道
      });
      const areaList = vue.ref([]);
      const loadAreaLoading = vue.ref(false);
      const initAddressData = () => {
        if (!addressFrom.value.province || !areaList.value.length)
          return;
        const addressArr = [
          addressFrom.value.province,
          addressFrom.value.city,
          addressFrom.value.district,
          addressFrom.value.street || ""
        ];
        classes.value = findAreaValue(areaList.value, addressArr);
      };
      const loadAddressJson = () => {
        return new Promise((resolve) => {
          if (areaList.value.length) {
            resolve();
            return;
          }
          const cacheData = uni.getStorageSync(CACHE_KEY);
          if (cacheData && Date.now() - cacheData.expire < CACHE_EXPIRE) {
            areaList.value = cacheData.data;
            resolve();
            return;
          }
          loadAreaLoading.value = true;
          uni.showToast({ title: "加载地址数据中...", icon: "loading", mask: true, duration: 0 });
          const filePath = "/utils/address.json";
          uni.getFileSystemManager().readFile({
            filePath,
            encoding: "utf8",
            success: (res2) => {
              const data = JSON.parse(res2.data);
              areaList.value = data;
              uni.setStorageSync(CACHE_KEY, { data, expire: Date.now() });
            },
            fail: () => uni.showToast({ title: "地址加载失败", icon: "none" }),
            complete: () => {
              loadAreaLoading.value = false;
              uni.hideToast();
              resolve();
            }
          });
        });
      };
      const handlePickerClick = async () => {
        if (loadAreaLoading.value || areaList.value.length)
          return;
        await loadAddressJson();
        initAddressData();
      };
      const onchange = (e2) => {
        const selectData = e2.detail.value;
        const [province, city, district, street] = selectData;
        addressFrom.value.province = (province == null ? void 0 : province.text) || "";
        addressFrom.value.city = (city == null ? void 0 : city.text) || "";
        addressFrom.value.district = (district == null ? void 0 : district.text) || "";
        addressFrom.value.street = (street == null ? void 0 : street.text) || "";
        classes.value = (street == null ? void 0 : street.value) || (district == null ? void 0 : district.value) || "";
      };
      uni.$on("onLoad", (options) => {
        if (options.info) {
          const info = JSON.parse(options.info);
          addressFrom.value = { ...info, street: info.street || "" };
        }
      });
      const validateAddressForm = () => {
        const { receiverName, receiverPhone, province, city, district, street, detailAddress } = addressFrom.value;
        if (!receiverName.trim()) {
          uni.showToast({ title: "请填写收件人姓名", icon: "none" });
          return false;
        }
        const phoneReg = /^1[3-9]\d{9}$/;
        if (!phoneReg.test(receiverPhone.trim())) {
          uni.showToast({ title: "请填写正确手机号", icon: "none" });
          return false;
        }
        if (!province || !city || !district || !street) {
          uni.showToast({ title: "请选择完整省市区街道", icon: "none" });
          return false;
        }
        if (!detailAddress.trim()) {
          uni.showToast({ title: "请填写详细地址", icon: "none" });
          return false;
        }
        return true;
      };
      const handleBuy = async () => {
        if (!validateAddressForm())
          return;
        try {
          const api = addressFrom.value.id ? updateAddress : addAddress;
          await api(addressFrom.value);
          uni.showToast({ title: `${addressFrom.value.id ? "修改" : "新增"}成功`, icon: "none" });
          backFn();
        } catch (err) {
          uni.showToast({ title: "保存失败，请重试", icon: "none" });
        }
      };
      const __returned__ = { globalStore, statusBarHeight, scrollTop, top, backFn, handleCheckToggle, classes, addressFrom, areaList, loadAreaLoading, CACHE_KEY, CACHE_EXPIRE, initAddressData, loadAddressJson, handlePickerClick, onchange, validateAddressForm, handleBuy, ref: vue.ref, get useGlobalDataStore() {
        return useGlobalDataStore;
      }, get onPageScroll() {
        return onPageScroll;
      }, get addAddress() {
        return addAddress;
      }, get updateAddress() {
        return updateAddress;
      }, get findAreaValue() {
        return findAreaValue;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$8(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    const _component_uni_nav_bar = resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"), __easycom_1$4);
    const _component_uni_data_picker = resolveEasycom(vue.resolveDynamicComponent("uni-data-picker"), __easycom_2);
    const _component_uni_load_more = resolveEasycom(vue.resolveDynamicComponent("uni-load-more"), __easycom_3$6);
    return vue.openBlock(), vue.createElementBlock("view", { class: "settled-box" }, [
      vue.createElementVNode("scroll-view", {
        "scroll-y": "",
        class: "scroll-content",
        "scroll-top": $setup.top,
        "show-scrollbar": false,
        "scroll-with-animation": "",
        id: "scrollView"
      }, [
        vue.createElementVNode("view", { class: "header" }, [
          vue.createVNode(_component_uni_nav_bar, {
            class: vue.normalizeClass([$setup.scrollTop > 15 ? "scrollClass" : "", "header-bar"]),
            backgroundColor: "rgba(255,255,255,0)",
            border: false,
            title: `${$setup.addressFrom.id ? "修改" : "新增"}收货地址`
          }, {
            left: vue.withCtx(() => [
              vue.createVNode(_component_uni_icons, {
                type: "left",
                size: "24",
                onClick: $setup.backFn
              })
            ]),
            _: 1
            /* STABLE */
          }, 8, ["class", "title"])
        ]),
        vue.createElementVNode("view", { class: "content" }, [
          vue.createElementVNode("view", { class: "address-item" }, [
            vue.createElementVNode("view", { class: "address-info" }, [
              vue.createElementVNode("view", null, "收货人"),
              vue.withDirectives(vue.createElementVNode(
                "input",
                {
                  "onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => $setup.addressFrom.receiverName = $event),
                  type: "text",
                  placeholder: "请填写收货人姓名",
                  class: "address-boder"
                },
                null,
                512
                /* NEED_PATCH */
              ), [
                [vue.vModelText, $setup.addressFrom.receiverName]
              ])
            ]),
            vue.createElementVNode("view", { class: "address-info" }, [
              vue.createElementVNode("view", null, "手机号"),
              vue.withDirectives(vue.createElementVNode(
                "input",
                {
                  "onUpdate:modelValue": _cache[1] || (_cache[1] = ($event) => $setup.addressFrom.receiverPhone = $event),
                  type: "text",
                  placeholder: "请填写收货人手机号"
                },
                null,
                512
                /* NEED_PATCH */
              ), [
                [vue.vModelText, $setup.addressFrom.receiverPhone]
              ])
            ])
          ]),
          vue.createElementVNode("view", { class: "address-item" }, [
            vue.createElementVNode("view", null, "地址信息"),
            vue.createElementVNode("view", { class: "address-info" }, [
              vue.createElementVNode("view", { style: { "margin-right": "20rpx" } }, "省-市-区-街道"),
              vue.createElementVNode("view", {
                onClick: $setup.handlePickerClick,
                class: "picker-wrap"
              }, [
                vue.createVNode(_component_uni_data_picker, {
                  placeholder: "请选择所在地区",
                  "popup-title": "请选择所在地区",
                  localdata: $setup.areaList,
                  modelValue: $setup.classes,
                  "onUpdate:modelValue": _cache[2] || (_cache[2] = ($event) => $setup.classes = $event),
                  onChange: $setup.onchange,
                  level: "4",
                  "range-key": "text",
                  disabled: !$setup.areaList.length || $setup.loadAreaLoading
                }, null, 8, ["localdata", "modelValue", "disabled"]),
                $setup.loadAreaLoading ? (vue.openBlock(), vue.createBlock(_component_uni_load_more, {
                  key: 0,
                  status: "loading",
                  size: "mini",
                  class: "loading-tips"
                })) : vue.createCommentVNode("v-if", true)
              ])
            ]),
            vue.createElementVNode("view", { class: "address-info" }, [
              vue.createElementVNode("view", null, "详细地址"),
              vue.withDirectives(vue.createElementVNode(
                "input",
                {
                  "onUpdate:modelValue": _cache[3] || (_cache[3] = ($event) => $setup.addressFrom.detailAddress = $event),
                  type: "text",
                  placeholder: "请填写详细地址信息",
                  style: { "width": "75%" }
                },
                null,
                512
                /* NEED_PATCH */
              ), [
                [vue.vModelText, $setup.addressFrom.detailAddress]
              ])
            ])
          ]),
          vue.createElementVNode("view", { class: "address-item" }, [
            vue.createElementVNode("view", { class: "address-default" }, [
              vue.createElementVNode("view", null, [
                vue.createElementVNode("view", null, "设为默认地址"),
                vue.createElementVNode("view", { class: "default-tips" }, [
                  vue.createVNode(_component_uni_icons, {
                    type: "sound-filled",
                    size: "16",
                    color: "#89898a"
                  }),
                  vue.createTextVNode(" 下单时会优先使用该地址 ")
                ])
              ]),
              vue.createVNode(_component_uni_icons, {
                type: $setup.addressFrom.isDefault ? "checkbox-filled" : "circle",
                color: $setup.addressFrom.isDefault ? "#ff9900" : "#ccc",
                size: "25",
                onClick: $setup.handleCheckToggle
              }, null, 8, ["type", "color"])
            ])
          ])
        ])
      ], 8, ["scroll-top"]),
      vue.createElementVNode("view", { class: "footer" }, [
        vue.createElementVNode("view", {
          class: "btn-buy",
          onClick: $setup.handleBuy
        }, "保存")
      ])
    ]);
  }
  const PagesShoppingMallOperationAddress = /* @__PURE__ */ _export_sfc(_sfc_main$9, [["render", _sfc_render$8], ["__scopeId", "data-v-e022323c"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/shopping-mall/operation-address.vue"]]);
  const _sfc_main$8 = {
    __name: "order-details",
    setup(__props, { expose: __expose }) {
      __expose();
      vue.useCssVars((_ctx) => ({
        "eede6ebf-statusBarHeight": statusBarHeight.value
      }));
      const globalStore = useGlobalDataStore();
      const statusBarHeight = vue.ref(globalStore.statusBarHeight + "px");
      const orderInfo = vue.ref({});
      const getStatusInstruction = (status) => {
        const statusTextMap = {
          1: "未付款订单自动取消剩余：15分钟",
          2: "您订单的商品正在紧锣密鼓打包中",
          3: "快递正在途中快马加鞭，小主耐心等待",
          4: "感谢小主的耐心等待，希望商品让您满意",
          7: "非常抱歉没有让您选中满意的商品"
        };
        return statusTextMap[status] || "订单状态更新中...";
      };
      const scrollTopTitle = (val2) => {
        const titleMap = {
          1: "待付款",
          2: "待发货",
          3: "待收货",
          4: "待评价",
          5: "已完成",
          6: "已取消",
          7: "售后中"
        };
        return titleMap[val2] || "订单详情";
      };
      const refundProgress = (refundType, status) => {
        var _a;
        const progressMap = {
          1: {
            // 1:仅退款
            1: "退款审核中",
            2: "退款请求通过",
            3: "退款申请拒绝",
            4: "退款成功"
          },
          2: {
            // 2:退货退款
            1: "退货审核中",
            2: "退货请求通过",
            3: "退货申请拒绝",
            4: "退款成功"
          },
          3: {
            // 3:换货
            1: "换货审核中",
            2: "换货请求通过",
            3: "换货申请拒绝",
            4: "换货成功"
          }
        };
        return ((_a = progressMap[val]) == null ? void 0 : _a[status]) || "退款中";
      };
      const refundContent = (refundType, status) => {
        var _a;
        const contentMap = {
          1: {
            // 1:仅退款
            1: "请耐心等待工作人员审核",
            2: "仅退款请求已通过",
            3: "仅退款申请已拒绝",
            4: "退款金额已原路退回"
          },
          2: {
            // 2:退货退款
            1: "请耐心等待工作人员审核",
            2: "请及时上传退货物流信息",
            3: "退货退款申请已拒绝",
            4: "退款金额已原路退回"
          },
          3: {
            // 3:换货
            1: "请耐心等待工作人员审核换货申请",
            2: "请及时上传退货物流信息",
            3: "换货申请已拒绝",
            4: "退款金额已原路退回"
          }
        };
        return ((_a = contentMap[refundType]) == null ? void 0 : _a[status]) || "退款中";
      };
      const logisticsList = vue.ref({});
      const expressApi = async () => {
        try {
          const { expressCompany, expressNo } = orderInfo.value;
          const { data } = await express({ expressCompany: "韵达快递", expressNo: "428163465007284" });
          data.tracks.forEach((item, index) => {
            item.isCompleted = index === 0;
          });
          logisticsList.value = data;
        } catch (e2) {
          formatAppLog("log", "at pages/shopping-mall/order-details.vue:261", e2);
        }
      };
      onLoad((options) => {
        expressApi();
        getOrderDetail(options.id).then((res2) => {
          orderInfo.value = res2.data;
          formatAppLog("log", "at pages/shopping-mall/order-details.vue:269", res2.data);
          if (res2.data.orderStatus == 7) {
            getRefundDetailApi();
          }
          if (res2.data.orderStatus == 3) {
            expressApi();
          }
        });
      });
      onShow(() => {
      });
      const scrollTop = vue.ref(0);
      const onPageScroll2 = (e2) => {
        scrollTop.value = e2.detail.scrollTop;
      };
      const backFn = () => {
        uni.navigateBack({
          delta: 1
        });
      };
      const showRefundInfo = vue.ref({});
      const getRefundDetailApi = async () => {
        try {
          const { data } = await getRefundDetail(orderInfo.value.id);
          showRefundInfo.value = data;
        } catch (err) {
          formatAppLog("log", "at pages/shopping-mall/order-details.vue:307", err);
        }
      };
      const gotoPrivacy = (type) => {
        uni.navigateTo({
          url: `/pages/webview/webview?type=${type}`
        });
      };
      const handleComplaint = () => {
        uni.navigateTo({
          url: "/pages/settings/complaint?id=" + orderInfo.value.userId
        });
      };
      const handleComment = () => {
        uni.navigateTo({
          url: `/pages/payment/order/evaluation-order?order=${JSON.stringify(orderInfo.value)}&colorType=1`
        });
      };
      const handleChat = () => {
        const { userId, teacherName, teacherAvatar } = orderInfo.value;
        uni.navigateTo({
          url: `/pages/message/private-chat?to=${userId}&name=${teacherName}&avatar=${teacherAvatar}`
        });
      };
      const copyText = (text) => {
        uni.setClipboardData({
          data: text,
          success(e2) {
            uni.showToast({
              title: "已复制"
            });
          }
        });
      };
      const popup = vue.ref(null);
      const handleClause = (val2) => {
        popup.value.open("center");
      };
      const closePopup = () => {
        uni.navigateTo({
          url: `/pages/payment/order/refund-order?order=${JSON.stringify(orderInfo.value)}`
        });
        popup.value.close();
      };
      const paymentMethod = vue.ref("weixin");
      const {
        isLoading,
        paymentStatus,
        initPaymentChannels,
        wechatPay,
        alipay,
        PAYMENT_STATUS: PAYMENT_STATUS2
      } = usePayment();
      const getAlipayOrder = async (val2) => {
        const { data } = await aliPay(val2);
        return data.orderString;
      };
      const orderPay = async (id2) => {
        try {
          const { data } = await payment({ userId: "1018" });
          const orderInfo2 = await getAlipayOrder({
            amount: 0.01,
            orderId: data.records[0].orderId
          });
          const result = await alipay(orderInfo2);
          if (result.status === PAYMENT_STATUS2.SUCCESS) {
            message.value = "支付宝支付成功";
          }
        } catch (err) {
          message.value = err.message || "支付宝支付失败";
        }
      };
      const handleCancel = async () => {
        try {
          const res2 = await cancel({ orderSn: orderInfo.value.orderSn });
          uni.showToast({
            title: "取消成功",
            icon: "none"
          });
        } catch (err) {
          formatAppLog("log", "at pages/shopping-mall/order-details.vue:444", err);
        }
      };
      const __returned__ = { globalStore, statusBarHeight, orderInfo, getStatusInstruction, scrollTopTitle, refundProgress, refundContent, logisticsList, expressApi, scrollTop, onPageScroll: onPageScroll2, backFn, showRefundInfo, getRefundDetailApi, gotoPrivacy, handleComplaint, handleComment, handleChat, copyText, popup, handleClause, closePopup, paymentMethod, isLoading, paymentStatus, initPaymentChannels, wechatPay, alipay, PAYMENT_STATUS: PAYMENT_STATUS2, getAlipayOrder, orderPay, handleCancel, ref: vue.ref, watch: vue.watch, get useGlobalDataStore() {
        return useGlobalDataStore;
      }, get onShow() {
        return onShow;
      }, get onLoad() {
        return onLoad;
      }, get payment() {
        return payment;
      }, get wxPay() {
        return wxPay;
      }, get aliPay() {
        return aliPay;
      }, get express() {
        return express;
      }, get usePayment() {
        return usePayment;
      }, get getOrderDetail() {
        return getOrderDetail;
      }, get getRefundDetail() {
        return getRefundDetail;
      }, get cancel() {
        return cancel;
      }, RecommendedProduct };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$7(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    const _component_uni_nav_bar = resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"), __easycom_1$4);
    const _component_uni_popup = resolveEasycom(vue.resolveDynamicComponent("uni-popup"), __easycom_3$5);
    return vue.openBlock(), vue.createElementBlock("view", { class: "settled-box" }, [
      vue.createElementVNode("view", { class: "header" }, [
        vue.createVNode(_component_uni_nav_bar, {
          class: vue.normalizeClass([$setup.scrollTop > 15 ? "scrollClass" : "", "header-bar"]),
          backgroundColor: "rgba(255,255,255,0)",
          border: false,
          title: $setup.scrollTopTitle($setup.orderInfo.orderStatus)
        }, {
          left: vue.withCtx(() => [
            vue.createVNode(_component_uni_icons, {
              type: "left",
              size: "24",
              onClick: $setup.backFn
            })
          ]),
          _: 1
          /* STABLE */
        }, 8, ["class", "title"])
      ]),
      vue.createElementVNode(
        "scroll-view",
        {
          "scroll-y": "",
          onScroll: $setup.onPageScroll,
          style: { "height": "calc(100vh - 130rpx)" },
          "show-scrollbar": false
        },
        [
          vue.createElementVNode("view", { class: "consultation-content" }, [
            vue.createElementVNode("view", { class: "notice-bar" }, [
              vue.createVNode(_component_uni_icons, {
                type: "sound",
                size: "20",
                color: "#F87171"
              }),
              vue.createElementVNode(
                "view",
                { class: "notice-text" },
                vue.toDisplayString($setup.getStatusInstruction($setup.orderInfo.orderStatus)),
                1
                /* TEXT */
              )
            ]),
            $setup.orderInfo.orderStatus == 7 ? (vue.openBlock(), vue.createElementBlock("view", {
              key: 0,
              class: "refund-info"
            }, [
              vue.createElementVNode(
                "view",
                { class: "refund-title" },
                vue.toDisplayString($setup.refundProgress($setup.showRefundInfo.refundType, $setup.showRefundInfo.status)),
                1
                /* TEXT */
              ),
              vue.createElementVNode(
                "view",
                { class: "refund-text" },
                vue.toDisplayString($setup.refundContent($setup.showRefundInfo.refundType, $setup.showRefundInfo.status)),
                1
                /* TEXT */
              )
            ])) : vue.createCommentVNode("v-if", true),
            vue.createElementVNode("view", {
              class: "appointment-info",
              style: { "display": "flex", "padding": "30rpx 50rpx" }
            }, [
              vue.createVNode(_component_uni_icons, {
                type: "location",
                size: "23",
                color: "#888888",
                style: { "margin-right": "10rpx" }
              }),
              vue.createElementVNode("view", {
                class: "info-item",
                style: { "width": "100%", "align-items": "normal", "flex-direction": "column", "margin-top": "0" }
              }, [
                vue.createElementVNode(
                  "view",
                  { class: "info-label" },
                  vue.toDisplayString($setup.orderInfo.receiverAddress),
                  1
                  /* TEXT */
                ),
                vue.createElementVNode("view", { class: "info-label info-text" }, [
                  vue.createElementVNode(
                    "text",
                    null,
                    vue.toDisplayString($setup.orderInfo.receiverName),
                    1
                    /* TEXT */
                  ),
                  vue.createElementVNode(
                    "text",
                    null,
                    vue.toDisplayString($setup.orderInfo.receiverPhone),
                    1
                    /* TEXT */
                  )
                ])
              ])
            ]),
            vue.createElementVNode("view", { class: "user-info-section" }, [
              vue.createElementVNode("view", { class: "user-details" }, [
                vue.createElementVNode("image", {
                  src: $setup.orderInfo.items[0].thumbnail,
                  class: "user-avatar"
                }, null, 8, ["src"]),
                vue.createElementVNode("view", { class: "user-info" }, [
                  vue.createElementVNode(
                    "view",
                    null,
                    vue.toDisplayString($setup.orderInfo.items[0].productName),
                    1
                    /* TEXT */
                  ),
                  vue.createElementVNode("view", { class: "info-item" }, [
                    vue.createElementVNode(
                      "view",
                      { class: "item-text" },
                      vue.toDisplayString(Object.values(JSON.parse($setup.orderInfo.items[0].specValues)).join(";")),
                      1
                      /* TEXT */
                    ),
                    vue.createElementVNode(
                      "view",
                      null,
                      "¥" + vue.toDisplayString($setup.orderInfo.items[0].price),
                      1
                      /* TEXT */
                    )
                  ]),
                  vue.createElementVNode(
                    "view",
                    { class: "item-text" },
                    "x " + vue.toDisplayString($setup.orderInfo.items[0].quantity),
                    1
                    /* TEXT */
                  )
                ])
              ])
            ]),
            vue.createElementVNode("view", { class: "appointment-info" }, [
              vue.createElementVNode("view", { class: "info-title" }, [
                vue.createElementVNode("view", null, "订单信息"),
                $setup.orderInfo.status == 2 ? (vue.openBlock(), vue.createElementBlock("view", {
                  key: 0,
                  class: "info-refund",
                  onClick: $setup.handleClause
                }, "我要退款")) : vue.createCommentVNode("v-if", true)
              ]),
              vue.createElementVNode("view", { class: "info-item" }, [
                vue.createElementVNode("view", { class: "info-label" }, "订单编号"),
                vue.createElementVNode("view", {
                  class: "consultation-methods",
                  style: { "display": "block" }
                }, [
                  vue.createElementVNode("image", {
                    src: _imports_0$5,
                    style: { "width": "22rpx", "height": "22rpx", "margin-right": "10rpx" },
                    onClick: _cache[0] || (_cache[0] = ($event) => $setup.copyText($setup.orderInfo.orderSn))
                  }),
                  vue.createElementVNode(
                    "text",
                    { class: "method-text" },
                    vue.toDisplayString($setup.orderInfo.orderSn),
                    1
                    /* TEXT */
                  )
                ])
              ]),
              vue.createElementVNode("view", { class: "info-item" }, [
                vue.createElementVNode("view", { class: "info-label" }, "创建时间"),
                vue.createElementVNode(
                  "view",
                  { class: "info-value" },
                  vue.toDisplayString($setup.orderInfo.createTime),
                  1
                  /* TEXT */
                )
              ]),
              $setup.orderInfo.payTime ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 0,
                class: "info-item"
              }, [
                vue.createElementVNode("view", { class: "info-label" }, "支付时间"),
                vue.createElementVNode(
                  "view",
                  { class: "info-value" },
                  vue.toDisplayString($setup.orderInfo.payTime),
                  1
                  /* TEXT */
                )
              ])) : vue.createCommentVNode("v-if", true),
              vue.createElementVNode("view", { class: "info-item" }, [
                vue.createElementVNode("view", { class: "info-label" }, "订单金额"),
                vue.createElementVNode(
                  "view",
                  { class: "info-value" },
                  "￥" + vue.toDisplayString($setup.orderInfo.totalAmount),
                  1
                  /* TEXT */
                )
              ]),
              $setup.orderInfo.orderStatus != 1 ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 1,
                class: "info-item"
              }, [
                vue.createElementVNode("view", { class: "info-label" }, "支付方式"),
                vue.createElementVNode("view", { class: "consultation-methods" }, [
                  $setup.orderInfo.payType == "wxpay" ? (vue.openBlock(), vue.createElementBlock("view", {
                    key: 0,
                    class: "method-item"
                  }, [
                    vue.createElementVNode("image", { src: "http://cdn.yupao.com/pc/images/zgp/recharge-pay-wechatimg.png" }),
                    vue.createElementVNode("text", { class: "method-text" }, "微信支付")
                  ])) : (vue.openBlock(), vue.createElementBlock("view", {
                    key: 1,
                    class: "method-item"
                  }, [
                    vue.createElementVNode("image", { src: "http://cdn.yupao.com/pc/images/zgp/recharge-pay-alipayimg.png" }),
                    vue.createElementVNode("text", { class: "method-text" }, "支付宝支付")
                  ]))
                ])
              ])) : vue.createCommentVNode("v-if", true)
            ]),
            $setup.orderInfo.expressNo ? (vue.openBlock(), vue.createElementBlock("view", {
              key: 1,
              class: "appointment-info"
            }, [
              vue.createElementVNode("view", { class: "info-express" }, [
                vue.createVNode(_component_uni_icons, {
                  "custom-prefix": "iconfont",
                  type: "icon-xiaohuoche",
                  size: "20",
                  color: "#9a9a9a",
                  class: "icon"
                }),
                vue.createElementVNode(
                  "view",
                  { class: "express-text" },
                  vue.toDisplayString($setup.orderInfo.expressCompany),
                  1
                  /* TEXT */
                ),
                vue.createElementVNode("view", { class: "express-code" }, [
                  vue.createElementVNode(
                    "view",
                    null,
                    vue.toDisplayString($setup.orderInfo.expressNo),
                    1
                    /* TEXT */
                  ),
                  vue.createElementVNode("image", {
                    src: _imports_0$5,
                    style: { "width": "22rpx", "height": "22rpx", "margin-left": "10rpx" },
                    onClick: _cache[1] || (_cache[1] = ($event) => $setup.copyText($setup.orderInfo.orderSn))
                  })
                ])
              ]),
              vue.createElementVNode("view", { class: "logistics-container" }, [
                (vue.openBlock(true), vue.createElementBlock(
                  vue.Fragment,
                  null,
                  vue.renderList($setup.logisticsList.tracks, (item, index) => {
                    return vue.openBlock(), vue.createElementBlock("view", {
                      class: "logistics-item",
                      key: index
                    }, [
                      vue.createElementVNode("view", { class: "logistics-node-wrap" }, [
                        vue.createElementVNode(
                          "view",
                          {
                            class: vue.normalizeClass(["logistics-node", { "completed": item.isCompleted }])
                          },
                          null,
                          2
                          /* CLASS */
                        ),
                        index < $setup.logisticsList.tracks.length - 1 ? (vue.openBlock(), vue.createElementBlock("view", {
                          key: 0,
                          class: "logistics-line"
                        })) : vue.createCommentVNode("v-if", true)
                      ]),
                      vue.createElementVNode("view", { class: "logistics-info" }, [
                        vue.createElementVNode(
                          "view",
                          { class: "logistics-time" },
                          vue.toDisplayString(item.time),
                          1
                          /* TEXT */
                        ),
                        vue.createElementVNode(
                          "view",
                          { class: "logistics-status" },
                          vue.toDisplayString(item.context),
                          1
                          /* TEXT */
                        )
                      ])
                    ]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                ))
              ])
            ])) : vue.createCommentVNode("v-if", true),
            !$setup.orderInfo.expressNo ? (vue.openBlock(), vue.createBlock($setup["RecommendedProduct"], {
              key: 2,
              style: { "margin-bottom": "50rpx" }
            })) : vue.createCommentVNode("v-if", true)
          ])
        ],
        32
        /* NEED_HYDRATION */
      ),
      vue.createElementVNode("view", { class: "footer" }, [
        $setup.orderInfo.orderStatus == 1 ? (vue.openBlock(), vue.createElementBlock("view", {
          key: 0,
          class: "btn-cart",
          onClick: $setup.handleCancel
        }, "取消订单")) : vue.createCommentVNode("v-if", true),
        $setup.orderInfo.orderStatus == 1 ? (vue.openBlock(), vue.createElementBlock("view", {
          key: 1,
          class: "btn-buy",
          onClick: _cache[2] || (_cache[2] = (...args) => _ctx.handleBuy && _ctx.handleBuy(...args))
        }, "继续支付")) : vue.createCommentVNode("v-if", true)
      ]),
      vue.createVNode(
        _component_uni_popup,
        {
          ref: "popup",
          type: "center",
          animation: false
        },
        {
          default: vue.withCtx(() => [
            vue.createElementVNode("view", { class: "popup-container" }, [
              vue.createElementVNode("view", { class: "popup-title" }, [
                vue.createElementVNode("view", null, "退款须知"),
                vue.createElementVNode("image", {
                  src: _imports_1$1,
                  style: { "width": "33rpx", "height": "33rpx", "margin-right": "10rpx" }
                })
              ]),
              vue.createElementVNode("view", { class: "popup-content" }, [
                vue.createElementVNode("view", { class: "list-item" }, "订单剩余未服务时长在有效期内可退"),
                vue.createElementVNode("view", { class: "list-item" }, "如拨打过且通话时长>3分钟，根据实际使用时长，按照原价进行扣减后退费;"),
                vue.createElementVNode("view", { class: "list-item" }, "文字倾诉订单下单后未回复的，自动退款;")
              ]),
              vue.createElementVNode("view", { class: "popup-btn" }, [
                vue.createElementVNode("view", {
                  class: "popup-btn-text",
                  onClick: $setup.closePopup
                }, "我知道了")
              ])
            ])
          ]),
          _: 1
          /* STABLE */
        },
        512
        /* NEED_PATCH */
      )
    ]);
  }
  const PagesShoppingMallOrderDetails = /* @__PURE__ */ _export_sfc(_sfc_main$8, [["render", _sfc_render$7], ["__scopeId", "data-v-eede6ebf"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/shopping-mall/order-details.vue"]]);
  const _sfc_main$7 = {
    __name: "order-list",
    setup(__props, { expose: __expose }) {
      __expose();
      const tabs = vue.ref([
        { name: "全部" },
        { name: "待付款" },
        { name: "待发货" },
        { name: "待收货" },
        { name: "待评价" },
        { name: "已完成" },
        { name: "已取消" },
        { name: "售后中" }
      ]);
      const orderService = vue.ref(false);
      const currentTab = vue.ref(0);
      const orderList2 = vue.ref([]);
      const paramsData = vue.ref({
        pageNum: 1,
        pageSize: 10
      });
      const changeTab = (e2) => {
        paramsData.value.pageNum = 1;
        paramsData.value.orderStatus = e2;
        currentTab.value = e2;
        orderList2.value = [];
        if (e2 == 0) {
          delete paramsData.value.orderStatus;
        }
        postList();
      };
      const listEmpty = vue.ref(false);
      onReachBottom(() => {
        if (!listEmpty.value) {
          paramsData.value.current += 1;
          postList();
        }
      });
      const postList = async () => {
        try {
          const res2 = await orderMy(paramsData.value);
          orderList2.value = [...orderList2.value, ...res2.data.records];
          listEmpty.value = res2.data.records.length === 0 ? true : false;
        } catch (e2) {
          formatAppLog("log", "at pages/shopping-mall/order-list.vue:182", e2);
        }
      };
      const getStatusText = (status) => {
        switch (status) {
          case 1:
            return "待付款";
          case 2:
            return "待发货";
          case 3:
            return "待收货";
          case 4:
            return "待评价";
          case 5:
            return "已完成";
          case 6:
            return "已取消";
          case 7:
            return "售后中";
          default:
            return "";
        }
      };
      const copyText = (text) => {
        uni.setClipboardData({
          data: text,
          success(e2) {
            uni.showToast({
              title: "已复制"
            });
          }
        });
      };
      const getStatusClass = (status) => {
        return {
          待支付: "",
          待咨询: "",
          待评价: "",
          已完成: "",
          未完成: ""
        }[status];
      };
      const typeId = vue.ref({});
      onLoad((options) => {
      });
      const toDetail = (item) => {
        formatAppLog("log", "at pages/shopping-mall/order-list.vue:243", item);
        uni.navigateTo({
          url: `/pages/shopping-mall/order-details?id=${item.id}`
        });
      };
      const toComment = (item) => {
        uni.navigateTo({
          url: `/pages/payment/order/evaluation-order?type=${JSON.stringify(
            typeId.value
          )}&colorType=1`
        });
      };
      const handleChat = (val2) => {
        const { teacherUserId, teacherName, teacherAvatar } = val2;
        uni.navigateTo({
          url: `/pages/message/private-chat?to=${teacherUserId}&name=${teacherName}&avatar=${teacherAvatar}`
        });
      };
      const cancelOrder = async (item) => {
        try {
          const res2 = await cancel({ orderSn: item.orderSn });
          uni.showToast({
            title: "取消成功",
            icon: "none"
          });
          postList();
        } catch (e2) {
          formatAppLog("log", "at pages/shopping-mall/order-list.vue:276", e2);
        }
      };
      const toRefund = (item) => {
        uni.navigateTo({
          url: `/pages/payment/order/refund-order?order=${JSON.stringify(item)}`
        });
      };
      vue.onMounted(() => {
        postList();
      });
      const __returned__ = { tabs, orderService, currentTab, orderList: orderList2, paramsData, changeTab, listEmpty, postList, getStatusText, copyText, getStatusClass, typeId, toDetail, toComment, handleChat, cancelOrder, toRefund, ref: vue.ref, onMounted: vue.onMounted, get onLoad() {
        return onLoad;
      }, get onReachBottom() {
        return onReachBottom;
      }, get postOrder() {
        return postOrder;
      }, get cancel() {
        return cancel;
      }, get orderMy() {
        return orderMy;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$6(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_u_navbar = resolveEasycom(vue.resolveDynamicComponent("u-navbar"), __easycom_0$1);
    const _component_u_tabs = resolveEasycom(vue.resolveDynamicComponent("u-tabs"), __easycom_1$1);
    return vue.openBlock(), vue.createElementBlock("view", { class: "order-page" }, [
      vue.createVNode(_component_u_navbar, {
        title: "商品订单",
        autoBack: true
      }),
      vue.createVNode(_component_u_tabs, {
        list: $setup.tabs,
        onChange: $setup.changeTab,
        current: $setup.currentTab,
        lineColor: "#00C28A",
        activeStyle: "color:#000;font-weight:600",
        inactiveStyle: "color:#666"
      }, null, 8, ["list", "current"]),
      vue.createElementVNode("scroll-view", {
        "scroll-y": "",
        class: "order-list"
      }, [
        (vue.openBlock(true), vue.createElementBlock(
          vue.Fragment,
          null,
          vue.renderList($setup.orderList, (item, index) => {
            return vue.openBlock(), vue.createElementBlock(
              "view",
              {
                key: index,
                class: vue.normalizeClass(["order-card", $setup.getStatusClass(item.status)])
              },
              [
                vue.createElementVNode("view", { class: "order-header" }, [
                  vue.createElementVNode("text", { class: "order-no" }, [
                    vue.createTextVNode(
                      "订单号：" + vue.toDisplayString(item.orderSn) + " ",
                      1
                      /* TEXT */
                    ),
                    vue.createElementVNode("image", {
                      src: _imports_0$5,
                      style: { "width": "25rpx", "height": "25rpx", "margin-left": "15rpx" },
                      onClick: ($event) => $setup.copyText(item.orderSn)
                    }, null, 8, ["onClick"])
                  ]),
                  vue.createElementVNode(
                    "text",
                    { class: "status orange" },
                    vue.toDisplayString($setup.getStatusText(item.status)),
                    1
                    /* TEXT */
                  )
                ]),
                vue.createElementVNode("view", { class: "order-body" }, [
                  vue.createElementVNode("view", {
                    class: "order-item",
                    onClick: ($event) => $setup.toDetail(item)
                  }, [
                    vue.createElementVNode("image", {
                      src: item.items[0].thumbnail,
                      class: "cover"
                    }, null, 8, ["src"]),
                    vue.createElementVNode("view", { class: "info" }, [
                      vue.createElementVNode(
                        "view",
                        { class: "title" },
                        vue.toDisplayString(item.items[0].productName),
                        1
                        /* TEXT */
                      ),
                      vue.createElementVNode("view", { class: "price" }, [
                        vue.createElementVNode(
                          "view",
                          { class: "text" },
                          vue.toDisplayString(Object.values(JSON.parse(item.items[0].specValues)).join(";")),
                          1
                          /* TEXT */
                        ),
                        vue.createElementVNode(
                          "view",
                          { class: "price-num" },
                          "¥" + vue.toDisplayString(item.items[0].price),
                          1
                          /* TEXT */
                        )
                      ]),
                      vue.createElementVNode(
                        "view",
                        { class: "count" },
                        "x" + vue.toDisplayString(item.items[0].quantity),
                        1
                        /* TEXT */
                      )
                    ])
                  ], 8, ["onClick"])
                ]),
                vue.createElementVNode("view", { class: "desc" }, [
                  vue.createElementVNode("view", { class: "text" }, "感谢小主的耐心等待，希望商品让您满意"),
                  vue.createElementVNode(
                    "view",
                    { class: "price" },
                    "实付款¥" + vue.toDisplayString(item.items[0].totalAmount),
                    1
                    /* TEXT */
                  )
                ]),
                vue.createElementVNode("view", { class: "btn-group" }, [
                  vue.createElementVNode("view", { style: { "display": "flex", "flex-direction": "row", "gap": "20rpx" } }, [
                    item.orderStatus == 1 ? (vue.openBlock(), vue.createElementBlock("view", {
                      key: 0,
                      class: "btn-2",
                      size: "small",
                      shape: "circle",
                      plain: "",
                      type: "info",
                      onClick: ($event) => $setup.cancelOrder(item)
                    }, "取消订单", 8, ["onClick"])) : vue.createCommentVNode("v-if", true),
                    item.orderStatus == 1 ? (vue.openBlock(), vue.createElementBlock("view", {
                      key: 1,
                      class: "btn-1",
                      size: "small",
                      shape: "circle",
                      type: "warning"
                    }, "继续支付")) : vue.createCommentVNode("v-if", true),
                    item.orderStatus == 2 ? (vue.openBlock(), vue.createElementBlock("view", {
                      key: 2,
                      class: "btn-1",
                      size: "small",
                      shape: "circle",
                      plain: "",
                      type: "info",
                      onClick: ($event) => $setup.toRefund(item)
                    }, "退款", 8, ["onClick"])) : vue.createCommentVNode("v-if", true),
                    item.orderStatus == 4 ? (vue.openBlock(), vue.createElementBlock("view", {
                      key: 3,
                      class: "btn-1",
                      size: "small",
                      shape: "circle",
                      type: "warning",
                      onClick: ($event) => $setup.toComment(item)
                    }, "去评价", 8, ["onClick"])) : vue.createCommentVNode("v-if", true),
                    item.orderStatus == 3 ? (vue.openBlock(), vue.createElementBlock("view", {
                      key: 4,
                      class: "btn-1",
                      size: "small",
                      shape: "circle",
                      type: "warning",
                      onClick: ($event) => $setup.toComment(item)
                    }, "确认收货", 8, ["onClick"])) : vue.createCommentVNode("v-if", true),
                    item.orderStatus == 3 || item.orderStatus == 4 ? (vue.openBlock(), vue.createElementBlock("view", {
                      key: 5,
                      class: "btn-2",
                      size: "small",
                      shape: "circle",
                      type: "warning",
                      onClick: ($event) => $setup.toComment(item)
                    }, "查看物流", 8, ["onClick"])) : vue.createCommentVNode("v-if", true),
                    item.orderStatus == 3 ? (vue.openBlock(), vue.createElementBlock("view", {
                      key: 6,
                      class: "btn-2",
                      size: "small",
                      shape: "circle",
                      type: "warning",
                      onClick: ($event) => $setup.toComment(item)
                    }, "退换", 8, ["onClick"])) : vue.createCommentVNode("v-if", true),
                    item.orderStatus == 6 ? (vue.openBlock(), vue.createElementBlock("view", {
                      key: 7,
                      class: "btn-1",
                      size: "small",
                      shape: "circle",
                      type: "warning",
                      onClick: ($event) => $setup.toComment(item)
                    }, "加入购物车", 8, ["onClick"])) : vue.createCommentVNode("v-if", true)
                  ])
                ])
              ],
              2
              /* CLASS */
            );
          }),
          128
          /* KEYED_FRAGMENT */
        ))
      ])
    ]);
  }
  const PagesShoppingMallOrderList = /* @__PURE__ */ _export_sfc(_sfc_main$7, [["render", _sfc_render$6], ["__scopeId", "data-v-31ecd985"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/shopping-mall/order-list.vue"]]);
  const _sfc_main$6 = {
    __name: "order-confirmation",
    setup(__props, { expose: __expose }) {
      __expose();
      vue.useCssVars((_ctx) => ({
        "90dd0d93-statusBarHeight": statusBarHeight.value
      }));
      const scrollTop = vue.ref(0);
      const globalStore = useGlobalDataStore();
      const orderStore = useOrderStore();
      const purchaseType = vue.ref("");
      const statusBarHeight = vue.ref(globalStore.statusBarHeight + "px");
      const orderData2 = vue.ref([]);
      const onPageScroll2 = (e2) => {
        scrollTop.value = e2.detail.scrollTop;
      };
      const backFn = () => {
        uni.navigateBack({
          delta: 1
        });
      };
      const selectImg = vue.ref("select-green");
      const address = vue.ref({});
      const getDefaultAddressFn = async () => {
        try {
          const { data } = await getDefaultAddress();
          if (!data)
            return;
          orderData2.value.addressId = data.id;
          address.value = data;
        } catch (err) {
          formatAppLog("log", "at pages/shopping-mall/order-confirmation.vue:152", err);
        }
      };
      const handleAddress = () => {
        uni.navigateTo({
          url: "/pages/shopping-mall/delivery-address"
        });
      };
      const handlePlus = (index) => {
        orderData2.value[index].quantity++;
      };
      const handleMinus = (index) => {
        if (orderData2.value[index].quantity > 1) {
          orderData2.value[index].quantity--;
        }
      };
      const goodsTotal = vue.computed(() => {
        return orderData2.value.reduce((total, item) => {
          if (item.checked) {
            total += item.price * item.quantity;
          }
          return total;
        }, 0).toFixed(2);
      });
      const freightTotal = vue.computed(() => {
        return orderData2.value.reduce((total, item) => {
          if (item.checked && item.freeShipping === 0) {
            total += item.freightFee;
          }
          return total;
        }, 0).toFixed(2);
      });
      const allTotal = vue.computed(() => {
        const total = Number(goodsTotal.value) + Number(freightTotal.value);
        return total.toFixed(2);
      });
      const paymentMethod = vue.ref("weixin");
      const handlePayment = (val2) => {
        paymentMethod.value = val2;
      };
      const {
        isLoading,
        paymentStatus,
        initPaymentChannels,
        wechatPay,
        alipay,
        PAYMENT_STATUS: PAYMENT_STATUS2
      } = usePayment();
      const orderPay = async (id2) => {
        if (address.value.id == null) {
          uni.showToast({
            title: "请选择收货地址",
            icon: "none"
          });
          return;
        }
        try {
          const api = paymentMethod.value == "weixin" ? wxPay : aliPay;
          const type = paymentMethod.value == "weixin" ? "wxPay" : "aliPay";
          const { id: id3, addressId, currentSku, remark } = orderData2.value;
          const OrderInfo = {
            addressId,
            remark
          };
          if (purchaseType.value == "shoppingCart") {
            OrderInfo.cartItemIds = orderData2.value.map((item) => item.id);
          } else {
            OrderInfo.directBuyItem = {
              productId: id3,
              quantity: currentSku.quantity,
              skuId: currentSku.id
            };
          }
          const res2 = await submitOrder(OrderInfo);
          const { data } = await api({
            orderId: res2.data.orderId,
            amount: res2.data.orderAmount,
            type,
            status: 1
          });
          if (paymentMethod.value == "weixin") {
            handleWechatPay(data.orderString);
          } else {
            handleAlipay(data.orderString, res2.data.orderSn);
          }
        } catch (err) {
          message.value = err.message || "支付宝支付失败";
        }
      };
      const handleAlipay = async (orderInfo, orderSn) => {
        try {
          const result = await alipay(orderInfo);
          payResultApi(orderSn);
        } catch (err) {
          message.value = err.message || "支付宝支付失败";
        }
      };
      const handleWechatPay = async (orderInfo) => {
        try {
          const result = await wechatPay(orderInfo);
          if (result.status === PAYMENT_STATUS2.SUCCESS) {
            message.value = "微信支付成功";
          }
        } catch (err) {
          message.value = err.message || "微信支付失败";
        }
      };
      const payResultApi = async (orderSn) => {
        try {
          const result = await payResult({ orderSn });
          if (result.data.status == 2) {
          }
        } catch (err) {
          message.value = err.message || "支付失败";
        }
      };
      onLoad((options) => {
        purchaseType.value = options.type;
        if (options.type == "purchase") {
          formatAppLog("log", "at pages/shopping-mall/order-confirmation.vue:299", [orderStore.order]);
          orderData2.value = [orderStore.order];
        } else {
          orderData2.value = orderStore.orderList;
        }
      });
      onShow(() => {
        getDefaultAddressFn();
      });
      onUnload(() => {
        orderStore.clearOrder();
        orderStore.clearOrderList();
      });
      const __returned__ = { scrollTop, globalStore, orderStore, purchaseType, statusBarHeight, orderData: orderData2, onPageScroll: onPageScroll2, backFn, selectImg, address, getDefaultAddressFn, handleAddress, handlePlus, handleMinus, goodsTotal, freightTotal, allTotal, paymentMethod, handlePayment, isLoading, paymentStatus, initPaymentChannels, wechatPay, alipay, PAYMENT_STATUS: PAYMENT_STATUS2, orderPay, handleAlipay, handleWechatPay, payResultApi, ref: vue.ref, computed: vue.computed, get useGlobalDataStore() {
        return useGlobalDataStore;
      }, get useOrderStore() {
        return useOrderStore;
      }, get onShow() {
        return onShow;
      }, get onLoad() {
        return onLoad;
      }, get onUnload() {
        return onUnload;
      }, get payment() {
        return payment;
      }, get wxPay() {
        return wxPay;
      }, get aliPay() {
        return aliPay;
      }, get payResult() {
        return payResult;
      }, get usePayment() {
        return usePayment;
      }, get getDefaultAddress() {
        return getDefaultAddress;
      }, get submitOrder() {
        return submitOrder;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$5(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    const _component_uni_nav_bar = resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"), __easycom_1$4);
    return vue.openBlock(), vue.createElementBlock("view", { class: "settled-box" }, [
      vue.createElementVNode("view", { class: "header" }, [
        vue.createVNode(_component_uni_nav_bar, {
          class: vue.normalizeClass([$setup.scrollTop > 15 ? "scrollClass" : "", "header-bar"]),
          backgroundColor: "rgba(255,255,255,0)",
          border: false,
          title: "确认订单"
        }, {
          left: vue.withCtx(() => [
            vue.createVNode(_component_uni_icons, {
              type: "left",
              size: "24",
              onClick: $setup.backFn
            })
          ]),
          _: 1
          /* STABLE */
        }, 8, ["class"])
      ]),
      vue.createElementVNode(
        "scroll-view",
        {
          "scroll-y": "",
          onScroll: $setup.onPageScroll,
          style: { "height": "100vh" },
          "show-scrollbar": false
        },
        [
          vue.createElementVNode("view", { class: "consultation-content" }, [
            vue.createElementVNode("view", { class: "consultation-plan-section" }, [
              vue.createElementVNode("view", { class: "plan-list-container" }, [
                vue.createElementVNode("view", { class: "address-item" }, [
                  $setup.address.receiverPhone ? (vue.openBlock(), vue.createElementBlock("view", {
                    key: 0,
                    class: "address-info"
                  }, [
                    vue.createVNode(_component_uni_icons, {
                      type: "location",
                      size: "30",
                      color: "#8D8D8D",
                      class: "icon"
                    }),
                    vue.createElementVNode("view", null, [
                      vue.createElementVNode(
                        "view",
                        null,
                        vue.toDisplayString($setup.address.detailAddress),
                        1
                        /* TEXT */
                      ),
                      vue.createElementVNode("view", { class: "info-user" }, [
                        vue.createElementVNode(
                          "view",
                          null,
                          vue.toDisplayString($setup.address.receiverName),
                          1
                          /* TEXT */
                        ),
                        vue.createElementVNode(
                          "view",
                          null,
                          vue.toDisplayString($setup.address.receiverPhone),
                          1
                          /* TEXT */
                        )
                      ])
                    ])
                  ])) : (vue.openBlock(), vue.createElementBlock("view", {
                    key: 1,
                    class: "address-info"
                  }, "请添加默认收货地址")),
                  vue.createVNode(_component_uni_icons, {
                    type: "right",
                    size: "30",
                    onClick: $setup.handleAddress
                  })
                ])
              ])
            ]),
            (vue.openBlock(true), vue.createElementBlock(
              vue.Fragment,
              null,
              vue.renderList($setup.orderData, (item, index) => {
                return vue.openBlock(), vue.createElementBlock("view", { class: "consultation-plan-section" }, [
                  vue.createElementVNode("view", {
                    class: "plan-list-container",
                    style: { "padding": "20rpx" }
                  }, [
                    vue.createElementVNode("view", { class: "cart-item-info" }, [
                      vue.createElementVNode("image", {
                        class: "cart-item-img",
                        src: item.thumbnail,
                        mode: "widthFix"
                      }, null, 8, ["src"]),
                      vue.createElementVNode("view", { class: "cart-item-detail" }, [
                        vue.createElementVNode(
                          "text",
                          { class: "cart-item-title" },
                          vue.toDisplayString(item.productName),
                          1
                          /* TEXT */
                        ),
                        vue.createElementVNode("view", { class: "cart-item-spec" }, [
                          vue.createElementVNode(
                            "text",
                            null,
                            vue.toDisplayString(Object.values(item.specValues).join(";")),
                            1
                            /* TEXT */
                          ),
                          vue.createElementVNode(
                            "text",
                            { class: "cart-item-price" },
                            "¥" + vue.toDisplayString(item.totalAmount),
                            1
                            /* TEXT */
                          )
                        ]),
                        vue.createElementVNode("view", { class: "count-group" }, [
                          vue.createElementVNode("view", {
                            class: "count-btn minus-btn",
                            onClick: ($event) => $setup.handleMinus(index),
                            disabled: item.quantity <= 1
                          }, [
                            vue.createElementVNode("view", null, "-"),
                            vue.createElementVNode("view", { class: "line" })
                          ], 8, ["onClick", "disabled"]),
                          vue.createElementVNode(
                            "view",
                            { class: "count" },
                            vue.toDisplayString(item.quantity),
                            1
                            /* TEXT */
                          ),
                          vue.createElementVNode("view", {
                            class: "count-btn plus-btn",
                            onClick: ($event) => $setup.handlePlus(index)
                          }, [
                            vue.createElementVNode("view", { class: "line" }),
                            vue.createElementVNode("view", null, "+")
                          ], 8, ["onClick"])
                        ])
                      ])
                    ])
                  ])
                ]);
              }),
              256
              /* UNKEYED_FRAGMENT */
            )),
            vue.createElementVNode("view", { class: "consultation-plan-section" }, [
              vue.createElementVNode("view", { class: "plan-list-container" }, [
                vue.createElementVNode("view", { class: "plan-item" }, [
                  vue.createElementVNode("view", null, "配送"),
                  vue.createElementVNode("view", null, "48小时发货")
                ]),
                vue.createElementVNode("view", { class: "plan-item" }, [
                  vue.createElementVNode("view", null, "运费"),
                  vue.createElementVNode(
                    "view",
                    null,
                    vue.toDisplayString($setup.orderData.freeShipping == 1 ? "免运费" : `¥${$setup.goodsTotal}`),
                    1
                    /* TEXT */
                  )
                ]),
                vue.createElementVNode("view", { class: "plan-item" }, [
                  vue.createElementVNode("view", null, "商品总价"),
                  vue.createElementVNode(
                    "view",
                    { style: { "color": "#de1718" } },
                    "¥" + vue.toDisplayString($setup.freightTotal),
                    1
                    /* TEXT */
                  )
                ]),
                vue.createElementVNode("view", { class: "plan-item" }, [
                  vue.createElementVNode("view", null, "应付金额"),
                  vue.createElementVNode(
                    "view",
                    { style: { "color": "#de1718" } },
                    "¥" + vue.toDisplayString($setup.allTotal),
                    1
                    /* TEXT */
                  )
                ])
              ])
            ]),
            vue.createElementVNode("view", { class: "consultation-plan-section" }, [
              vue.createElementVNode("view", { class: "please-note" }, [
                vue.createTextVNode(" 备注 "),
                vue.withDirectives(vue.createElementVNode(
                  "textarea",
                  {
                    "onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => $setup.orderData.remark = $event),
                    "placeholder-style": "color:#9E9E9E;padding: 20rpx",
                    placeholder: "这里是备注内容"
                  },
                  null,
                  512
                  /* NEED_PATCH */
                ), [
                  [vue.vModelText, $setup.orderData.remark]
                ])
              ])
            ]),
            vue.createElementVNode("view", { class: "consultation-plan-section" }, [
              vue.createElementVNode("view", { class: "plan-title" }, "支付方式"),
              vue.createElementVNode("view", { class: "please-note" }, [
                vue.createElementVNode("view", {
                  class: "note-pay",
                  onClick: _cache[1] || (_cache[1] = ($event) => $setup.handlePayment("weixin"))
                }, [
                  vue.createElementVNode("view", { class: "pay-item" }, [
                    vue.createElementVNode("image", { src: "http://cdn.yupao.com/pc/images/zgp/recharge-pay-wechatimg.png" }),
                    vue.createElementVNode("view", null, "微信支付")
                  ]),
                  vue.createElementVNode("image", {
                    src: `/static/auth/${$setup.paymentMethod == "weixin" ? $setup.selectImg : "not-selected"}.png`,
                    style: { "width": "25rpx", "height": "25rpx" }
                  }, null, 8, ["src"])
                ]),
                vue.createElementVNode("view", {
                  class: "note-pay",
                  onClick: _cache[2] || (_cache[2] = ($event) => $setup.handlePayment("alipay"))
                }, [
                  vue.createElementVNode("view", { class: "pay-item" }, [
                    vue.createElementVNode("image", { src: "http://cdn.yupao.com/pc/images/zgp/recharge-pay-alipayimg.png" }),
                    vue.createElementVNode("view", null, "支付宝支付")
                  ]),
                  vue.createElementVNode("image", {
                    src: `/static/auth/${$setup.paymentMethod == "alipay" ? $setup.selectImg : "not-selected"}.png`,
                    style: { "width": "25rpx", "height": "25rpx" }
                  }, null, 8, ["src"])
                ])
              ])
            ])
          ])
        ],
        32
        /* NEED_HYDRATION */
      ),
      vue.createElementVNode("view", { class: "recharge-pay-footer" }, [
        vue.createElementVNode(
          "button",
          {
            class: "recharge-sure-price",
            onClick: $setup.orderPay
          },
          "立即支付 ¥" + vue.toDisplayString($setup.allTotal),
          1
          /* TEXT */
        )
      ])
    ]);
  }
  const PagesShoppingMallOrderConfirmation = /* @__PURE__ */ _export_sfc(_sfc_main$6, [["render", _sfc_render$5], ["__scopeId", "data-v-90dd0d93"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/shopping-mall/order-confirmation.vue"]]);
  const _sfc_main$5 = {
    __name: "recommendations",
    setup(__props, { expose: __expose }) {
      __expose();
      vue.useCssVars((_ctx) => ({
        "dc1c9194-statusBarHeight": statusBarHeight.value
      }));
      const globalStore = useGlobalDataStore();
      const scrollTop = vue.ref(0);
      const stickyOffsetTop = vue.ref(0);
      const showCityBox = vue.ref(false);
      const statusBarHeight = vue.ref(globalStore.statusBarHeight + "rpx");
      const banners = vue.ref([]);
      const sticky = vue.ref([
        { id: 1, name: "倾听方向", open: false },
        { id: 2, name: "城市", open: false },
        { id: 3, name: "价格", open: false },
        { id: 4, name: "排序", open: false },
        { id: 5, name: "筛选", open: false }
      ]);
      const serviceRef = vue.ref(null);
      const customerService = () => {
        serviceRef.value.open();
      };
      const getBanners = async () => {
        let res2 = await bannerList();
        banners.value = res2.data;
      };
      const fixed = vue.ref(false);
      const avatarImg = (item) => {
        const { masterGallery } = item;
        if (!masterGallery) {
          return "/static/consult/user.png";
        } else {
          return JSON.parse(masterGallery)[0].url;
        }
      };
      const data = vue.reactive({
        listParams: {
          current: 1,
          size: 10
        },
        list: []
      });
      const searchParams = vue.ref({
        serviceTypes: [],
        city: ""
      });
      const closeCityFilter = () => {
        showCityBox.value = false;
      };
      const blursearchFn = () => {
        getList();
      };
      const fixedTop = () => {
        fixed.value = true;
      };
      const unFixedTop = () => {
        fixed.value = false;
        scrollTop.value = 0;
      };
      const instance = vue.getCurrentInstance();
      const proxy = instance == null ? void 0 : instance.proxy;
      const currentScroll = vue.ref(0);
      const currentFilter = vue.ref(null);
      const city = vue.ref("");
      const showBox = async (type) => {
        currentFilter.value = type;
        if (!fixed.value) {
          await vue.nextTick();
          const query = uni.createSelectorQuery().in(proxy);
          query.select("#stickyBox").boundingClientRect();
          query.selectViewport().scrollOffset();
          query.exec((res2) => {
            if (!res2 || !res2[0])
              return;
            const boxTop = res2[0].top;
            const scrollOffset = currentScroll.value;
            scrollTop.value = scrollOffset + boxTop - 90;
            setTimeout(() => {
              openFilter(type);
            }, 300);
          });
        } else {
          openFilter(type);
        }
      };
      const typeColor = vue.ref("");
      const openFilter = (type) => {
        typeColor.value = type;
        showCityBox.value = true;
      };
      const onScroll = (e2) => {
        currentScroll.value = e2.detail.scrollTop;
      };
      const openDetail = (item) => {
        const { id: id2, userId } = item;
        uni.navigateTo({
          url: `/pages/confide/detail?id=${id2}&userId=${userId}`
        });
      };
      vue.watch(
        showCityBox,
        () => {
          if (!showCityBox.value) {
            typeColor.value = "";
          }
        }
      );
      const formData = vue.ref({
        current: 1,
        size: 10,
        consultantName: ""
      });
      onReachBottom(() => {
        data.listParams.current += 1;
        getList();
      });
      const getList = async () => {
        let params = {
          ...data.listParams,
          ...searchParams.value,
          params: formData.value
        };
        const res2 = await getListenerList(params);
        data.list = [...data.list, ...res2.data.records];
      };
      const listFiltering = vue.ref(null);
      const closeFilter = () => {
        data.list = [];
        const { distressId, city: city2, currentRange, sortType, resultObj } = listFiltering.value;
        if (currentFilter.value === 1) {
          formData.value.distressId = distressId;
        }
        if (currentFilter.value === 2) {
          formData.value.city = city2;
        }
        if (currentFilter.value === 3) {
          formData.value = { ...currentRange };
        }
        if (currentFilter.value === 4) {
          formData.value.sortType = sortType;
        }
        if (currentFilter.value === 5) {
          formData.value = { ...resultObj };
        }
        showCityBox.value = false;
        getList();
      };
      const resetOption = () => {
        formData.value = {
          current: 1,
          size: 10,
          consultantName: ""
        };
        data.list = [];
        showCityBox.value = false;
        getList();
      };
      const serviceTypes2 = vue.ref([]);
      const getConsultMenu = async () => {
        let resp = await consultMenus();
        const data2 = resp.data || [];
        const result = data2.map((group) => ({
          id: group.id,
          name: group.name,
          children: JSON.parse(group.children),
          spread: false
        }));
        serviceTypes2.value = result;
      };
      const allCity = vue.ref([]);
      const getCityInfo = async () => {
        let resp = await cities();
        const data2 = resp.data || [];
        const result = data2.map((group, index) => ({
          id: index + 1,
          name: group.name,
          children: JSON.parse(group.cities)
        }));
        allCity.value = result;
      };
      vue.onMounted(() => {
        stickyOffsetTop.value = globalStore.statusBarHeight + 88;
        getList();
        getConsultMenu();
        getCityInfo();
        getBanners();
      });
      const __returned__ = { globalStore, scrollTop, stickyOffsetTop, showCityBox, statusBarHeight, banners, sticky, serviceRef, customerService, getBanners, fixed, avatarImg, data, searchParams, closeCityFilter, blursearchFn, fixedTop, unFixedTop, instance, proxy, currentScroll, currentFilter, city, showBox, typeColor, openFilter, onScroll, openDetail, formData, getList, listFiltering, closeFilter, resetOption, serviceTypes: serviceTypes2, getConsultMenu, allCity, getCityInfo, ListFiltering, ref: vue.ref, reactive: vue.reactive, watch: vue.watch, getCurrentInstance: vue.getCurrentInstance, nextTick: vue.nextTick, onMounted: vue.onMounted, get getListenerList() {
        return getListenerList;
      }, get getGenerationByBirthdate() {
        return getGenerationByBirthdate;
      }, get formatAddress() {
        return formatAddress;
      }, get cities() {
        return cities;
      }, get consultMenus() {
        return consultMenus;
      }, get useGlobalDataStore() {
        return useGlobalDataStore;
      }, get onReachBottom() {
        return onReachBottom;
      }, get bannerList() {
        return bannerList;
      }, CustomerService };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$4(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_search_bar = resolveEasycom(vue.resolveDynamicComponent("uni-search-bar"), __easycom_0$6);
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    const _component_u_sticky = resolveEasycom(vue.resolveDynamicComponent("u-sticky"), __easycom_2$c);
    return vue.openBlock(), vue.createElementBlock("view", { class: "consult-box" }, [
      vue.createElementVNode("scroll-view", {
        class: "scroll-content",
        "scroll-y": "",
        "scroll-top": $setup.scrollTop,
        "show-scrollbar": false,
        onScroll: $setup.onScroll
      }, [
        vue.createElementVNode(
          "view",
          {
            class: vue.normalizeClass(["search-content", $setup.currentScroll > 15 ? "activeClass" : ""])
          },
          [
            vue.createElementVNode("view", { class: "search" }, [
              vue.createVNode(_component_uni_search_bar, {
                modelValue: $setup.formData.consultantName,
                "onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => $setup.formData.consultantName = $event),
                radius: "100",
                placeholder: "请输入咨询师姓名",
                clearButton: "auto",
                cancelButton: "none",
                onBlur: _cache[1] || (_cache[1] = ($event) => $setup.blursearchFn())
              }, null, 8, ["modelValue"])
            ]),
            vue.createElementVNode("view", {
              class: "contact",
              onClick: $setup.customerService
            }, [
              vue.createElementVNode("image", { src: _imports_0$q }),
              vue.createElementVNode("text", null, "客服")
            ])
          ],
          2
          /* CLASS */
        ),
        vue.createElementVNode("view", { class: "operate-box" }, [
          vue.createElementVNode("view", { class: "uni-margin-wrap" }, [
            vue.createElementVNode("swiper", {
              class: "swiper",
              circular: "",
              "indicator-dots": true,
              autoplay: true,
              interval: 5e3,
              duration: 500
            }, [
              (vue.openBlock(true), vue.createElementBlock(
                vue.Fragment,
                null,
                vue.renderList($setup.banners, (i2, index) => {
                  return vue.openBlock(), vue.createElementBlock("swiper-item", {
                    key: index,
                    class: "swiper-item"
                  }, [
                    vue.createElementVNode("view", { class: "swiper-item uni-bg-red" }, [
                      vue.createElementVNode("image", {
                        src: i2.image,
                        mode: "aspectFill",
                        class: "img"
                      }, null, 8, ["src"])
                    ])
                  ]);
                }),
                128
                /* KEYED_FRAGMENT */
              ))
            ])
          ])
        ]),
        vue.createVNode(_component_u_sticky, {
          "offset-top": $setup.stickyOffsetTop,
          onFixed: $setup.fixedTop,
          onUnfixed: $setup.unFixedTop
        }, {
          default: vue.withCtx(() => [
            vue.createElementVNode("view", { id: "stickyBox" }, [
              vue.createElementVNode("view", { class: "filter-box" }, [
                vue.createElementVNode("view", { class: "filter-box-1" }, [
                  vue.createElementVNode("view", { class: "filter-box-1-1" }, [
                    (vue.openBlock(true), vue.createElementBlock(
                      vue.Fragment,
                      null,
                      vue.renderList($setup.sticky, (item, index) => {
                        return vue.openBlock(), vue.createElementBlock("view", {
                          class: "filter-box-1-item",
                          key: index,
                          style: vue.normalizeStyle({ color: $setup.typeColor == item.id ? "#ffa867" : "black" }),
                          onClick: ($event) => $setup.showBox(item.id)
                        }, [
                          vue.createTextVNode(
                            vue.toDisplayString(item.name) + " ",
                            1
                            /* TEXT */
                          ),
                          item.id != 5 ? (vue.openBlock(), vue.createBlock(_component_uni_icons, {
                            key: 0,
                            type: $setup.typeColor == item.id ? "up" : "down",
                            color: $setup.typeColor == item.id ? "#ffa867" : "",
                            size: "12",
                            class: "icon"
                          }, null, 8, ["type", "color"])) : vue.createCommentVNode("v-if", true),
                          item.id == 5 ? (vue.openBlock(), vue.createElementBlock("image", {
                            key: 1,
                            src: _imports_1$g,
                            style: { "width": "25rpx", "height": "25rpx" },
                            class: "filter icon"
                          })) : vue.createCommentVNode("v-if", true)
                        ], 12, ["onClick"]);
                      }),
                      128
                      /* KEYED_FRAGMENT */
                    ))
                  ])
                ])
              ])
            ])
          ]),
          _: 1
          /* STABLE */
        }, 8, ["offset-top"]),
        vue.createElementVNode("view", { class: "doctor-list" }, [
          (vue.openBlock(true), vue.createElementBlock(
            vue.Fragment,
            null,
            vue.renderList($setup.data.list, (item, index) => {
              return vue.openBlock(), vue.createElementBlock("view", {
                class: "doctor-item",
                key: index,
                onClick: ($event) => $setup.openDetail(item)
              }, [
                vue.createElementVNode("view", { class: "doctor-auture" }, [
                  vue.createElementVNode("image", {
                    src: $setup.avatarImg(item)
                  }, null, 8, ["src"])
                ]),
                vue.createElementVNode("view", { class: "doctor-info" }, [
                  vue.createElementVNode("view", { class: "doctor-info-1" }, [
                    vue.createElementVNode(
                      "view",
                      { class: "name" },
                      vue.toDisplayString(item.name),
                      1
                      /* TEXT */
                    )
                  ]),
                  vue.createElementVNode("view", { class: "doctor-info-1" }, [
                    vue.createElementVNode("view", { class: "info" }, [
                      vue.createElementVNode(
                        "text",
                        { class: "age item" },
                        vue.toDisplayString($setup.getGenerationByBirthdate(item.birthdate)),
                        1
                        /* TEXT */
                      ),
                      vue.createElementVNode("text", { class: "line" }),
                      vue.createElementVNode(
                        "text",
                        { class: "edu item" },
                        vue.toDisplayString(item.education) + "硕士",
                        1
                        /* TEXT */
                      ),
                      vue.createElementVNode("text", { class: "line" }),
                      vue.createElementVNode(
                        "text",
                        { class: "star item" },
                        vue.toDisplayString(item.constellation || "水瓶座"),
                        1
                        /* TEXT */
                      )
                    ])
                  ]),
                  vue.createElementVNode("view", { class: "doctor-info-1" }, [
                    vue.createElementVNode("view", { class: "exprise" }, [
                      vue.createElementVNode(
                        "text",
                        null,
                        vue.toDisplayString(item.commentCount),
                        1
                        /* TEXT */
                      ),
                      vue.createTextVNode(" 服务人次 "),
                      vue.createElementVNode(
                        "text",
                        null,
                        vue.toDisplayString(item.platformHours) + "+",
                        1
                        /* TEXT */
                      ),
                      vue.createTextVNode(" 小时经验 "),
                      vue.createElementVNode(
                        "text",
                        null,
                        vue.toDisplayString(item.rating),
                        1
                        /* TEXT */
                      ),
                      vue.createTextVNode(" 评分 ")
                    ])
                  ]),
                  vue.createElementVNode("view", { class: "doctor-info-1" }, [
                    vue.createElementVNode("view", { class: "point-list" }, [
                      (vue.openBlock(true), vue.createElementBlock(
                        vue.Fragment,
                        null,
                        vue.renderList(item.serviceTypes.slice(0, 3), (item2, index2) => {
                          return vue.openBlock(), vue.createElementBlock(
                            "view",
                            {
                              class: "point-item",
                              key: index2
                            },
                            vue.toDisplayString(item2),
                            1
                            /* TEXT */
                          );
                        }),
                        128
                        /* KEYED_FRAGMENT */
                      ))
                    ])
                  ]),
                  vue.createElementVNode("view", { class: "doctor-info-1" }, [
                    item.price ? (vue.openBlock(), vue.createElementBlock("view", {
                      key: 0,
                      class: "price"
                    }, [
                      item.price ? (vue.openBlock(), vue.createElementBlock("text", {
                        key: 0,
                        class: "unit"
                      }, "¥")) : vue.createCommentVNode("v-if", true),
                      vue.createTextVNode(
                        vue.toDisplayString(item.price),
                        1
                        /* TEXT */
                      )
                    ])) : vue.createCommentVNode("v-if", true),
                    item.quoteList[0] ? (vue.openBlock(), vue.createElementBlock("view", {
                      key: 1,
                      class: "price"
                    }, [
                      vue.createElementVNode(
                        "text",
                        null,
                        vue.toDisplayString(item.quoteList[0].quoteAmount || 0),
                        1
                        /* TEXT */
                      ),
                      vue.createElementVNode("text", {
                        class: "unit",
                        style: { "color": "rgba(0, 0, 0, 0.5)" }
                      }, " /分钟起")
                    ])) : vue.createCommentVNode("v-if", true),
                    vue.createElementVNode("view", { class: "address" }, [
                      vue.createElementVNode("image", { src: _imports_2$8 }),
                      vue.createElementVNode(
                        "text",
                        null,
                        vue.toDisplayString($setup.formatAddress(item.address)),
                        1
                        /* TEXT */
                      )
                    ])
                  ])
                ]),
                vue.createElementVNode("view", { class: "server-box" }, [
                  vue.createElementVNode("view", { class: "server-status" }, "服务中")
                ])
              ], 8, ["onClick"]);
            }),
            128
            /* KEYED_FRAGMENT */
          ))
        ])
      ], 40, ["scroll-top"]),
      vue.withDirectives(vue.createElementVNode(
        "view",
        {
          class: "mask",
          onClick: $setup.closeCityFilter
        },
        [
          vue.createElementVNode("view", {
            class: "filter-popup",
            onClick: _cache[4] || (_cache[4] = vue.withModifiers(() => {
            }, ["stop"]))
          }, [
            vue.createElementVNode("view", { class: "popup-body" }, [
              vue.createVNode($setup["ListFiltering"], {
                ref: "listFiltering",
                colorType: 2,
                serviceTypes: $setup.serviceTypes,
                confusionList: $setup.allCity,
                layoutType: $setup.currentFilter
              }, null, 8, ["serviceTypes", "confusionList", "layoutType"])
            ]),
            vue.createElementVNode("view", { class: "popup-footer" }, [
              vue.createElementVNode("button", {
                class: "btn btn-reset",
                size: "mini",
                onClick: _cache[2] || (_cache[2] = ($event) => $setup.resetOption())
              }, " 重置 "),
              vue.createElementVNode("button", {
                class: "btn btn-confirm",
                size: "mini",
                onClick: _cache[3] || (_cache[3] = ($event) => $setup.closeFilter())
              }, " 完成 ")
            ])
          ])
        ],
        512
        /* NEED_PATCH */
      ), [
        [vue.vShow, $setup.showCityBox]
      ]),
      vue.createVNode(
        $setup["CustomerService"],
        { ref: "serviceRef" },
        null,
        512
        /* NEED_PATCH */
      )
    ]);
  }
  const PagesConfideRecommendations = /* @__PURE__ */ _export_sfc(_sfc_main$5, [["render", _sfc_render$4], ["__scopeId", "data-v-dc1c9194"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/confide/recommendations.vue"]]);
  const _sfc_main$4 = {
    __name: "recommendations",
    setup(__props, { expose: __expose }) {
      __expose();
      vue.useCssVars((_ctx) => ({
        "274ae441-statusBarHeight": statusBarHeight.value
      }));
      const globalStore = useGlobalDataStore();
      const scrollTop = vue.ref(0);
      const stickyOffsetTop = vue.ref(0);
      const showCityBox = vue.ref(false);
      const statusBarHeight = vue.ref(globalStore.statusBarHeight + "rpx");
      const banners = vue.ref([]);
      const sticky = vue.ref([
        { id: 1, name: "困扰", open: false },
        { id: 2, name: "城市", open: false },
        { id: 3, name: "价格", open: false },
        { id: 4, name: "排序", open: false },
        { id: 5, name: "筛选", open: false }
      ]);
      const serviceRef = vue.ref(null);
      const customerService = () => {
        serviceRef.value.open();
      };
      const getBanners = async () => {
        let res2 = await bannerList();
        banners.value = res2.data;
      };
      const fixed = vue.ref(false);
      const data = vue.reactive({
        listParams: {
          current: 1,
          size: 10
        },
        list: []
      });
      const avatarImg = (item) => {
        const { masterGallery } = item;
        if (!masterGallery) {
          return "/static/consult/user.png";
        } else {
          return JSON.parse(masterGallery)[0].url;
        }
      };
      const searchParams = vue.ref({
        serviceTypes: [],
        city: ""
      });
      const closeCityFilter = () => {
        showCityBox.value = false;
      };
      const blursearchFn = () => {
        getList();
      };
      const fixedTop = () => {
        fixed.value = true;
      };
      const unFixedTop = () => {
        fixed.value = false;
        scrollTop.value = 0;
      };
      const instance = vue.getCurrentInstance();
      const proxy = instance == null ? void 0 : instance.proxy;
      const currentScroll = vue.ref(0);
      const currentFilter = vue.ref(null);
      const city = vue.ref("");
      const showBox = async (type) => {
        currentFilter.value = type;
        if (!fixed.value) {
          await vue.nextTick();
          const query = uni.createSelectorQuery().in(proxy);
          query.select("#stickyBox").boundingClientRect();
          query.selectViewport().scrollOffset();
          query.exec((res2) => {
            if (!res2 || !res2[0])
              return;
            const boxTop = res2[0].top;
            const scrollOffset = currentScroll.value;
            scrollTop.value = scrollOffset + boxTop - 65;
            setTimeout(() => {
              openFilter(type);
            }, 300);
          });
        } else {
          openFilter(type);
        }
      };
      const typeColor = vue.ref("");
      const openFilter = (type) => {
        typeColor.value = type;
        showCityBox.value = true;
      };
      const onScroll = (e2) => {
        currentScroll.value = e2.detail.scrollTop;
      };
      const openDetail = (item) => {
        var _a, _b;
        const { id: id2, userId, quoteList } = item;
        const quote = {
          quoteAmount: (_a = quoteList[0]) == null ? void 0 : _a.quoteAmount,
          serviceDuration: (_b = quoteList[0]) == null ? void 0 : _b.serviceDuration
        };
        const url2 = `id=${id2}&userId=${userId}&quoteList=${JSON.stringify(quote)}`;
        uni.navigateTo({
          url: `/pages/consult/detail?${url2}`
        });
      };
      vue.watch(
        showCityBox,
        () => {
          if (!showCityBox.value) {
            typeColor.value = "";
          }
        }
      );
      const formData = vue.ref({
        current: 1,
        size: 10,
        consultantName: ""
      });
      onReachBottom(() => {
        data.listParams.current += 1;
        formData.value.current = data.listParams.current;
        getList();
      });
      const getList = async () => {
        let params = {
          ...data.listParams,
          ...searchParams.value,
          params: formData.value
        };
        formatAppLog("log", "at pages/consult/recommendations.vue:315", params, "params");
        const res2 = await getConsultantList(params);
        data.list = [...data.list, ...res2.data.records];
      };
      const listFiltering = vue.ref(null);
      const closeFilter = () => {
        const { distressId, city: city2, currentRange, sortType, resultObj } = listFiltering.value;
        if (currentFilter.value === 1) {
          formData.value.distressId = distressId;
        }
        if (currentFilter.value === 2) {
          formData.value.city = city2;
        }
        if (currentFilter.value === 3) {
          formData.value = { ...currentRange };
        }
        if (currentFilter.value === 4) {
          formData.value.sortType = sortType;
        }
        if (currentFilter.value === 5) {
          formData.value = { ...resultObj };
        }
        showCityBox.value = false;
        getList();
      };
      const resetOption = () => {
        formData.value = {
          current: 1,
          size: 10,
          consultantName: ""
        };
        showCityBox.value = false;
        getList();
      };
      const serviceTypes2 = vue.ref([]);
      const getConsultMenu = async () => {
        let resp = await consultMenus();
        const data2 = resp.data || [];
        const result = data2.map((group) => ({
          id: group.id,
          name: group.name,
          children: JSON.parse(group.children),
          spread: false
        }));
        serviceTypes2.value = result;
      };
      const allCity = vue.ref([]);
      const getCityInfo = async () => {
        let resp = await cities();
        const data2 = resp.data || [];
        const result = data2.map((group, index) => ({
          id: index + 1,
          name: group.name,
          children: JSON.parse(group.cities)
        }));
        allCity.value = result;
      };
      vue.onMounted(() => {
        stickyOffsetTop.value = globalStore.statusBarHeight + 88;
        getList();
        getConsultMenu();
        getCityInfo();
        getBanners();
      });
      const __returned__ = { globalStore, scrollTop, stickyOffsetTop, showCityBox, statusBarHeight, banners, sticky, serviceRef, customerService, getBanners, fixed, data, avatarImg, searchParams, closeCityFilter, blursearchFn, fixedTop, unFixedTop, instance, proxy, currentScroll, currentFilter, city, showBox, typeColor, openFilter, onScroll, openDetail, formData, getList, listFiltering, closeFilter, resetOption, serviceTypes: serviceTypes2, getConsultMenu, allCity, getCityInfo, ListFiltering, ref: vue.ref, reactive: vue.reactive, watch: vue.watch, getCurrentInstance: vue.getCurrentInstance, nextTick: vue.nextTick, onMounted: vue.onMounted, get getConsultantList() {
        return getConsultantList;
      }, get consultMenus() {
        return consultMenus;
      }, get cities() {
        return cities;
      }, get formatAddress() {
        return formatAddress;
      }, get useGlobalDataStore() {
        return useGlobalDataStore;
      }, get bannerList() {
        return bannerList;
      }, get onReachBottom() {
        return onReachBottom;
      }, CustomerService };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$3(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_search_bar = resolveEasycom(vue.resolveDynamicComponent("uni-search-bar"), __easycom_0$6);
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    const _component_u_sticky = resolveEasycom(vue.resolveDynamicComponent("u-sticky"), __easycom_2$c);
    return vue.openBlock(), vue.createElementBlock("view", { class: "consult-box" }, [
      vue.createElementVNode("scroll-view", {
        class: "scroll-content",
        "scroll-y": "",
        "scroll-top": $setup.scrollTop,
        "show-scrollbar": false,
        onScroll: $setup.onScroll
      }, [
        vue.createElementVNode(
          "view",
          {
            class: vue.normalizeClass(["search-content", $setup.currentScroll > 15 ? "activeClass" : ""])
          },
          [
            vue.createElementVNode("view", { class: "search" }, [
              vue.createVNode(_component_uni_search_bar, {
                modelValue: $setup.formData.consultantName,
                "onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => $setup.formData.consultantName = $event),
                radius: "100",
                placeholder: "请输入咨询师姓名",
                clearButton: "auto",
                cancelButton: "none",
                onBlur: _cache[1] || (_cache[1] = ($event) => $setup.blursearchFn())
              }, null, 8, ["modelValue"])
            ]),
            vue.createElementVNode("view", {
              class: "contact",
              onClick: $setup.customerService
            }, [
              vue.createElementVNode("image", { src: _imports_0$q }),
              vue.createElementVNode("text", null, "客服")
            ])
          ],
          2
          /* CLASS */
        ),
        vue.createElementVNode("view", { class: "operate-box" }, [
          vue.createElementVNode("view", { class: "uni-margin-wrap" }, [
            vue.createElementVNode("swiper", {
              class: "swiper",
              circular: "",
              "indicator-dots": true,
              autoplay: true,
              interval: 5e3,
              duration: 500
            }, [
              (vue.openBlock(true), vue.createElementBlock(
                vue.Fragment,
                null,
                vue.renderList($setup.banners, (i2, index) => {
                  return vue.openBlock(), vue.createElementBlock("swiper-item", {
                    key: index,
                    class: "swiper-item"
                  }, [
                    vue.createElementVNode("view", { class: "swiper-item uni-bg-red" }, [
                      vue.createElementVNode("image", {
                        src: i2.image,
                        mode: "aspectFill",
                        class: "img"
                      }, null, 8, ["src"])
                    ])
                  ]);
                }),
                128
                /* KEYED_FRAGMENT */
              ))
            ])
          ])
        ]),
        vue.createVNode(_component_u_sticky, {
          "offset-top": $setup.stickyOffsetTop,
          onFixed: $setup.fixedTop,
          onUnfixed: $setup.unFixedTop
        }, {
          default: vue.withCtx(() => [
            vue.createElementVNode("view", { id: "stickyBox" }, [
              vue.createElementVNode("view", { class: "filter-box" }, [
                vue.createElementVNode("view", { class: "filter-box-1" }, [
                  vue.createElementVNode("view", { class: "filter-box-1-1" }, [
                    (vue.openBlock(true), vue.createElementBlock(
                      vue.Fragment,
                      null,
                      vue.renderList($setup.sticky, (item, index) => {
                        return vue.openBlock(), vue.createElementBlock("view", {
                          class: "filter-box-1-item",
                          key: index,
                          style: vue.normalizeStyle({ color: $setup.typeColor == item.id ? "#35C996" : "black" }),
                          onClick: ($event) => $setup.showBox(item.id)
                        }, [
                          vue.createTextVNode(
                            vue.toDisplayString(item.name) + " ",
                            1
                            /* TEXT */
                          ),
                          item.id != 5 ? (vue.openBlock(), vue.createBlock(_component_uni_icons, {
                            key: 0,
                            type: $setup.typeColor == item.id ? "up" : "down",
                            color: $setup.typeColor == item.id ? "#35C996" : "",
                            size: "12",
                            class: "icon"
                          }, null, 8, ["type", "color"])) : vue.createCommentVNode("v-if", true),
                          item.id == 5 ? (vue.openBlock(), vue.createElementBlock("image", {
                            key: 1,
                            src: _imports_1$g,
                            style: { "width": "25rpx", "height": "25rpx" },
                            class: "filter icon"
                          })) : vue.createCommentVNode("v-if", true)
                        ], 12, ["onClick"]);
                      }),
                      128
                      /* KEYED_FRAGMENT */
                    ))
                  ])
                ])
              ])
            ])
          ]),
          _: 1
          /* STABLE */
        }, 8, ["offset-top"]),
        vue.createElementVNode("view", { class: "doctor-list" }, [
          (vue.openBlock(true), vue.createElementBlock(
            vue.Fragment,
            null,
            vue.renderList($setup.data.list, (item, index) => {
              return vue.openBlock(), vue.createElementBlock("view", {
                class: "doctor-item",
                key: index,
                onClick: ($event) => $setup.openDetail(item)
              }, [
                vue.createElementVNode("view", { class: "doctor-auture" }, [
                  vue.createElementVNode("image", {
                    src: $setup.avatarImg(item),
                    style: { "border-radius": "20rpx" }
                  }, null, 8, ["src"])
                ]),
                vue.createElementVNode("view", { class: "doctor-info" }, [
                  vue.createElementVNode("view", { class: "doctor-info-1" }, [
                    vue.createElementVNode(
                      "view",
                      { class: "name" },
                      vue.toDisplayString(item.name),
                      1
                      /* TEXT */
                    ),
                    vue.createElementVNode("view", { class: "date" }, "今天可约")
                  ]),
                  vue.createElementVNode("view", { class: "doctor-info-1" }, [
                    vue.createElementVNode(
                      "view",
                      { class: "job" },
                      vue.toDisplayString(item.occupationName),
                      1
                      /* TEXT */
                    ),
                    vue.createElementVNode("view", { class: "address" }, [
                      vue.createElementVNode("image", { src: _imports_2$8 }),
                      vue.createElementVNode(
                        "text",
                        null,
                        vue.toDisplayString($setup.formatAddress(item.address)),
                        1
                        /* TEXT */
                      )
                    ])
                  ]),
                  vue.createElementVNode("view", { class: "doctor-info-1" }, [
                    vue.createElementVNode("view", { class: "exprise" }, [
                      vue.createElementVNode(
                        "text",
                        null,
                        vue.toDisplayString(item.platformHours) + "+",
                        1
                        /* TEXT */
                      ),
                      vue.createTextVNode(" 小时经验 "),
                      vue.createElementVNode(
                        "text",
                        null,
                        vue.toDisplayString(item.years) + "年",
                        1
                        /* TEXT */
                      ),
                      vue.createTextVNode(" 从业 "),
                      vue.createElementVNode(
                        "text",
                        null,
                        vue.toDisplayString(item.commentCount) + "+ ",
                        1
                        /* TEXT */
                      ),
                      vue.createTextVNode("评价 ")
                    ])
                  ]),
                  vue.createElementVNode("view", { class: "doctor-info-1" }, [
                    item.serviceType ? (vue.openBlock(), vue.createElementBlock("view", {
                      key: 0,
                      class: "point-list"
                    }, [
                      (vue.openBlock(true), vue.createElementBlock(
                        vue.Fragment,
                        null,
                        vue.renderList(item.serviceTypes, (sub, index2) => {
                          return vue.openBlock(), vue.createElementBlock(
                            "view",
                            {
                              class: "point-item",
                              key: index2
                            },
                            vue.toDisplayString(sub),
                            1
                            /* TEXT */
                          );
                        }),
                        128
                        /* KEYED_FRAGMENT */
                      ))
                    ])) : vue.createCommentVNode("v-if", true)
                  ]),
                  vue.createElementVNode("view", { class: "doctor-info-1" }, [
                    vue.createElementVNode("view", { class: "discount" }),
                    item.quoteList[0] ? (vue.openBlock(), vue.createElementBlock("view", {
                      key: 0,
                      class: "price"
                    }, [
                      vue.createElementVNode("text", { class: "unit" }, "¥"),
                      vue.createTextVNode(
                        " " + vue.toDisplayString(item.quoteList[0].quoteAmount || 0),
                        1
                        /* TEXT */
                      )
                    ])) : vue.createCommentVNode("v-if", true)
                  ])
                ])
              ], 8, ["onClick"]);
            }),
            128
            /* KEYED_FRAGMENT */
          ))
        ])
      ], 40, ["scroll-top"]),
      vue.withDirectives(vue.createElementVNode(
        "view",
        {
          class: "mask",
          onClick: $setup.closeCityFilter
        },
        [
          vue.createElementVNode("view", {
            class: "filter-popup",
            onClick: _cache[4] || (_cache[4] = vue.withModifiers(() => {
            }, ["stop"]))
          }, [
            vue.createElementVNode("view", { class: "popup-body" }, [
              vue.createVNode($setup["ListFiltering"], {
                ref: "listFiltering",
                colorType: 1,
                serviceTypes: $setup.serviceTypes,
                confusionList: $setup.allCity,
                layoutType: $setup.currentFilter
              }, null, 8, ["serviceTypes", "confusionList", "layoutType"])
            ]),
            vue.createElementVNode("view", { class: "popup-footer" }, [
              vue.createElementVNode("button", {
                class: "btn btn-reset",
                size: "mini",
                onClick: _cache[2] || (_cache[2] = ($event) => $setup.resetOption())
              }, " 重置 "),
              vue.createElementVNode("button", {
                class: "btn btn-confirm",
                size: "mini",
                onClick: _cache[3] || (_cache[3] = ($event) => $setup.closeFilter())
              }, " 完成 ")
            ])
          ])
        ],
        512
        /* NEED_PATCH */
      ), [
        [vue.vShow, $setup.showCityBox]
      ]),
      vue.createVNode(
        $setup["CustomerService"],
        { ref: "serviceRef" },
        null,
        512
        /* NEED_PATCH */
      )
    ]);
  }
  const PagesConsultRecommendations = /* @__PURE__ */ _export_sfc(_sfc_main$4, [["render", _sfc_render$3], ["__scopeId", "data-v-274ae441"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/consult/recommendations.vue"]]);
  const _sfc_main$3 = {
    __name: "career",
    props: {
      modelValue: Object,
      consultantType: String
    },
    emits: ["update:modelValue", "committed"],
    setup(__props, { expose: __expose, emit: __emit }) {
      const serviceType = vue.ref([]);
      const occupationId = vue.ref();
      const workTime = vue.ref();
      const selectIndex = vue.ref(0);
      const rangeKey = vue.ref("name");
      const certificateDateParam = vue.ref({
        year: true,
        month: true,
        day: false,
        hour: false,
        minute: false,
        second: false,
        // 选择时间的时间戳
        timestamp: true
      });
      const processedData = vue.ref([]);
      const activeNames = vue.ref([]);
      const selectedIds = vue.ref([]);
      const checkedList = vue.ref([]);
      const certificatePickerShow = vue.ref(false);
      const t2 = vue.ref([]);
      const emit = __emit;
      const submit = async () => {
        const requiredFields = [
          // { field: occupationId.value, message: "请选择职业" },
          // { field: workTime.value, message: "请选择工作时间" },
          { field: selectedIds.value, message: "请选择服务类型" }
        ];
        for (const { field, message: message2 } of requiredFields) {
          if (!field) {
            uni.showToast({ title: message2, icon: "none" });
            return;
          }
        }
        props.modelValue.serviceType = selectedIds.value.join(",");
        formatAppLog("log", "at pages/forum/service/components/career.vue:137", props.modelValue);
        if (props.consultantType == 1) {
          await registerConsultantStep2(props.modelValue);
          emit("committed", "");
        } else {
          await registerListenerStep2(props.modelValue);
          emit("committed", "");
        }
      };
      const occupationList = vue.ref([]);
      const getOccupationList = async () => {
        let { data } = await getOccupation();
        occupationList.value = data;
      };
      const bindPickerChange = (e2) => {
        var _a;
        occupationId.value = (_a = occupationList.value[e2.detail.value]) == null ? void 0 : _a.name;
        props.modelValue.occupationId = occupationList.value[e2.detail.value].id;
      };
      __expose({
        submit
      });
      const props = __props;
      const initPickerEcho = () => {
        workTime.value = props.modelValue.workTime;
        if (occupationList.value.length === 0)
          return;
        const targetId = props.modelValue.occupationId;
        if (!targetId)
          return;
        const matchedItem = occupationList.value.find((item) => item.id == targetId);
        if (matchedItem) {
          occupationId.value = matchedItem.name;
          selectIndex.value = occupationList.value.indexOf(matchedItem);
        } else {
          occupationId.value = "";
          selectIndex.value = 0;
        }
      };
      const confirmCertificateDate = (item, e2) => {
        props.modelValue.workTime = e2.year + "-" + e2.month;
        workTime.value = e2.year + "-" + e2.month;
      };
      vue.watch(
        () => props.modelValue,
        (newVal, oldVal) => {
          if (newVal.serviceType) {
            const arr = newVal.serviceType.split(",").map((e2) => e2 = parseInt(e2));
            vue.nextTick(() => {
              selectedIds.value = arr;
            });
          }
        },
        { immediate: true, deep: true }
      );
      vue.watch(
        () => occupationList.value,
        () => {
          initPickerEcho();
        }
      );
      vue.watch(checkedList, (val2) => {
        const str = val2.join(",");
        emit("update:modelValue", {
          ...props.modelValue,
          serviceType: str
        });
      });
      onShow(async () => {
        if (props.consultantType == "1") {
          let consultMenu = uni.getStorageSync("consultantMenu");
          if (!consultMenu) {
            let resp = await getConsultantMenus({
              type: 0
            });
            uni.setStorageSync("consultantMenu", JSON.stringify(resp.data));
          }
          serviceType.value = JSON.parse(uni.getStorageSync("consultantMenu"));
        } else {
          let listenerMenu = uni.getStorageSync("listenerMenu");
          serviceList().then((res2) => {
            t2.value = res2.data;
          });
          if (!listenerMenu) {
            let resp = await getConsultantMenus({
              type: 1
            });
            uni.setStorageSync("listenerMenu", JSON.stringify(resp.data));
          }
          serviceType.value = JSON.parse(uni.getStorageSync("listenerMenu"));
        }
        serviceType.value = serviceType.value.map((item) => ({
          ...item,
          checked: false
        }));
      });
      const safeJsonParse = (str) => {
        if (!str || str === "[]")
          return [];
        try {
          let cleanStr = str.replace(/[“”‘’]/g, '"').replace(/\s+/g, "").replace(/\\+/g, "\\").replace(/,}/g, "}").replace(/,\]/g, "]").replace(/([{,])\s*(\w+)\s*:/g, '$1"$2":').replace(/:\s*([^"'\d][^,}]*)([,}])/g, ':"$1"$2');
          const result = JSON.parse(cleanStr);
          return Array.isArray(result) ? result : [];
        } catch (e2) {
          return [];
        }
      };
      const initData = async () => {
        const res2 = await serviceList();
        processedData.value = res2.data.map((item) => {
          const children = safeJsonParse(item.children);
          const normalizedChildren = children.map((child) => ({
            ...child,
            id: Number(child.id) || 0
          })).filter((child) => child.id !== 0);
          return {
            ...item,
            id: Number(item.id) || 0,
            children: normalizedChildren
          };
        });
      };
      const toggleParent = async (parentItem) => {
        const parentId = parentItem.id;
        const isChecked = selectedIds.value.includes(parentId);
        await vue.nextTick();
        if (!isChecked) {
          const addIds = [parentId, ...parentItem.children.map((c2) => c2.id)];
          addIds.forEach((id2) => {
            if (!selectedIds.value.includes(id2)) {
              selectedIds.value.push(id2);
            }
          });
        } else {
          const removeIds = [parentId, ...parentItem.children.map((c2) => c2.id)];
          selectedIds.value = selectedIds.value.filter((id2) => !removeIds.includes(id2));
        }
        selectedIds.value = [...selectedIds.value];
      };
      const handleChildGroupChange = (parentItem, e2) => {
        const checkedChildIds = e2.detail.value.map((id2) => Number(id2));
        const allChildIds = parentItem.children.map((c2) => c2.id);
        selectedIds.value = selectedIds.value.filter((id2) => {
          if (allChildIds.includes(id2) && !checkedChildIds.includes(id2)) {
            return false;
          }
          return true;
        });
        checkedChildIds.forEach((id2) => {
          if (!selectedIds.value.includes(id2)) {
            selectedIds.value.push(id2);
          }
        });
        const parentId = parentItem.id;
        const allChildChecked = allChildIds.every((id2) => checkedChildIds.includes(id2));
        if (allChildChecked && !selectedIds.value.includes(parentId)) {
          selectedIds.value.push(parentId);
        } else if (!allChildChecked && selectedIds.value.includes(parentId)) {
          selectedIds.value = selectedIds.value.filter((id2) => id2 !== parentId);
        }
        selectedIds.value = [...selectedIds.value];
      };
      vue.onMounted(() => {
        initData();
        getOccupationList();
        initPickerEcho();
      });
      const __returned__ = { serviceType, occupationId, workTime, selectIndex, rangeKey, certificateDateParam, processedData, activeNames, selectedIds, checkedList, certificatePickerShow, t: t2, emit, submit, occupationList, getOccupationList, bindPickerChange, props, initPickerEcho, confirmCertificateDate, safeJsonParse, initData, toggleParent, handleChildGroupChange, nextTick: vue.nextTick, ref: vue.ref, watch: vue.watch, onMounted: vue.onMounted, get onShow() {
        return onShow;
      }, get getConsultantMenus() {
        return getConsultantMenus;
      }, get registerConsultantStep2() {
        return registerConsultantStep2;
      }, get registerListenerStep2() {
        return registerListenerStep2;
      }, get getOccupation() {
        return getOccupation;
      }, get serviceList() {
        return serviceList;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$2(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_u_picker = resolveEasycom(vue.resolveDynamicComponent("u-picker"), __easycom_1$3);
    const _component_uni_collapse_item = resolveEasycom(vue.resolveDynamicComponent("uni-collapse-item"), __easycom_1);
    const _component_uni_collapse = resolveEasycom(vue.resolveDynamicComponent("uni-collapse"), __easycom_2$2);
    return vue.openBlock(), vue.createElementBlock("view", { class: "career-box" }, [
      vue.createElementVNode("view", { class: "career-content-box" }, [
        vue.createElementVNode("view", { class: "career-content" }, [
          vue.createElementVNode("view", { class: "career-collapse-box" }, [
            vue.createElementVNode("picker", {
              onChange: $setup.bindPickerChange,
              value: $setup.selectIndex,
              range: $setup.occupationList,
              "range-key": $setup.rangeKey
            }, [
              vue.createElementVNode("view", { class: "career-collapse-item" }, [
                vue.createElementVNode("view", { style: { "display": "flex", "align-items": "center", "justify-content": "space-between", "margin": "40rpx 0" } }, [
                  vue.createElementVNode("view", null, "职业"),
                  vue.createElementVNode(
                    "view",
                    { style: { "color": "#595959", "font-size": "25rpx" } },
                    vue.toDisplayString($setup.occupationId ? $setup.occupationId : "请选择"),
                    1
                    /* TEXT */
                  )
                ])
              ])
            ], 40, ["value", "range", "range-key"]),
            vue.createElementVNode("view", { class: "career-collapse-item" }, [
              vue.createElementVNode("view", { style: { "display": "flex", "align-items": "center", "justify-content": "space-between", "margin": "40rpx 0" } }, [
                vue.createElementVNode("view", null, "工作开始时间"),
                vue.createElementVNode(
                  "view",
                  {
                    style: { "color": "#595959", "font-size": "25rpx" },
                    onClick: _cache[0] || (_cache[0] = ($event) => $setup.certificatePickerShow = true)
                  },
                  vue.toDisplayString($setup.workTime ? $setup.workTime : "请选择"),
                  1
                  /* TEXT */
                )
              ])
            ]),
            vue.createVNode(_component_u_picker, {
              mode: "time",
              modelValue: $setup.certificatePickerShow,
              "onUpdate:modelValue": _cache[1] || (_cache[1] = ($event) => $setup.certificatePickerShow = $event),
              onConfirm: _cache[2] || (_cache[2] = ($event) => $setup.confirmCertificateDate(_ctx.item, $event)),
              params: $setup.certificateDateParam
            }, null, 8, ["modelValue", "params"])
          ])
        ]),
        vue.createElementVNode("view", { class: "career-content" }, [
          vue.createElementVNode("view", { class: "title" }, [
            vue.createTextVNode("服务类型"),
            vue.createElementVNode("text", null, "*")
          ]),
          vue.createElementVNode("view", { class: "remark" }, "专业信息展示在个人资料（多选）"),
          vue.createElementVNode("view", { class: "career-collapse-box" }, [
            vue.createElementVNode("view", { class: "career-collapse-item" }, [
              vue.createElementVNode("view", { class: "container" }, [
                vue.createVNode(_component_uni_collapse, {
                  modelValue: $setup.activeNames,
                  "onUpdate:modelValue": _cache[3] || (_cache[3] = ($event) => $setup.activeNames = $event),
                  accordion: "false"
                }, {
                  default: vue.withCtx(() => [
                    (vue.openBlock(true), vue.createElementBlock(
                      vue.Fragment,
                      null,
                      vue.renderList($setup.processedData, (item) => {
                        return vue.openBlock(), vue.createBlock(_component_uni_collapse_item, {
                          key: item.id,
                          name: item.id
                        }, {
                          title: vue.withCtx(() => [
                            vue.createElementVNode("view", { class: "parent-title" }, [
                              vue.createElementVNode("view", {
                                class: vue.normalizeClass(["custom-checkbox", { checked: $setup.selectedIds.includes(item.id) }]),
                                onClick: vue.withModifiers(($event) => $setup.toggleParent(item), ["stop"])
                              }, [
                                $setup.selectedIds.includes(item.id) ? (vue.openBlock(), vue.createElementBlock("text", {
                                  key: 0,
                                  class: "check-icon"
                                }, "✓")) : vue.createCommentVNode("v-if", true)
                              ], 10, ["onClick"]),
                              vue.createElementVNode(
                                "text",
                                { class: "parent-name" },
                                vue.toDisplayString(item.name),
                                1
                                /* TEXT */
                              )
                            ])
                          ]),
                          default: vue.withCtx(() => [
                            item.children.length ? (vue.openBlock(), vue.createElementBlock("view", {
                              key: 0,
                              class: "children-list"
                            }, [
                              vue.createElementVNode("checkbox-group", {
                                onChange: (e2) => $setup.handleChildGroupChange(item, e2)
                              }, [
                                vue.createElementVNode("view", { class: "children-grid" }, [
                                  (vue.openBlock(true), vue.createElementBlock(
                                    vue.Fragment,
                                    null,
                                    vue.renderList(item.children, (child) => {
                                      return vue.openBlock(), vue.createElementBlock("view", {
                                        class: "child-item",
                                        key: child.id
                                      }, [
                                        vue.createElementVNode("checkbox", {
                                          value: child.id.toString(),
                                          checked: $setup.selectedIds.includes(child.id),
                                          color: "#fff",
                                          style: { "transform": "scale(0.7)" },
                                          activeBackgroundColor: "#35CA95"
                                        }, null, 8, ["value", "checked"]),
                                        vue.createElementVNode(
                                          "text",
                                          { class: "child-name" },
                                          vue.toDisplayString(child.name),
                                          1
                                          /* TEXT */
                                        )
                                      ]);
                                    }),
                                    128
                                    /* KEYED_FRAGMENT */
                                  ))
                                ])
                              ], 40, ["onChange"])
                            ])) : (vue.openBlock(), vue.createElementBlock("view", {
                              key: 1,
                              class: "no-children"
                            }, " 暂无子分类 "))
                          ]),
                          _: 2
                          /* DYNAMIC */
                        }, 1032, ["name"]);
                      }),
                      128
                      /* KEYED_FRAGMENT */
                    ))
                  ]),
                  _: 1
                  /* STABLE */
                }, 8, ["modelValue"])
              ])
            ])
          ])
        ])
      ])
    ]);
  }
  const career$1 = /* @__PURE__ */ _export_sfc(_sfc_main$3, [["render", _sfc_render$2], ["__scopeId", "data-v-649dc431"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/forum/service/components/career.vue"]]);
  const _sfc_main$2 = {
    __name: "certificate",
    props: {
      consultantType: Number,
      modelValue: Object
    },
    emits: ["commited"],
    setup(__props, { expose: __expose, emit: __emit }) {
      const certificatePickerShow = vue.ref(false);
      const certificateLists = vue.ref([
        { name: null, date: null, photoList: [], authority: null, number: null, listenerId: null, selectIndex: -1 }
      ]);
      const educationLists = vue.ref([]);
      const ethicsLists = vue.ref([]);
      const qualification = vue.ref([]);
      const uploadUrl = vue.ref(baseURL$1 + "/api/common/upload");
      const timePickerShow = vue.ref(false);
      const currentItem = vue.ref(null);
      const currentIndex = vue.ref(-1);
      const type = vue.ref(0);
      const token = uni.getStorageSync("token");
      const headers = vue.ref({ token });
      const fromDataCertificate = vue.ref({
        certificateList: [],
        educationList: [],
        ethicsList: [],
        consultantType: 1
      });
      const timePickerParams = vue.ref({
        year: true,
        month: true,
        day: false,
        hour: false,
        minute: false,
        second: false,
        timestamp: true
      });
      const certificateDateParam = vue.ref({
        year: true,
        month: true,
        day: true,
        hour: false,
        minute: false,
        second: false,
        timestamp: true
      });
      const initCertificateLists = (apiData) => {
        certificateLists.value.length = 0;
        const validData = Array.isArray(apiData) ? apiData : [];
        validData.forEach((item) => {
          certificateLists.value.push({
            ...item,
            selectIndex: -1,
            qualificationValue: "",
            photoList: parseStrToImgArr(item.photos || "[]")
          });
        });
      };
      const getQualificationApi = async () => {
        try {
          const { data } = await getQualification();
          qualification.value = Array.isArray(data) ? data : [];
          initCertificateLists([]);
        } catch (err) {
          formatAppLog("error", "at pages/forum/service/components/certificate.vue:393", "获取资质类别失败：", err);
          qualification.value = [];
          initCertificateLists([]);
        }
      };
      const confirmSchoolTime = (e2) => {
        if (!currentItem.value || currentIndex.value === -1)
          return;
        const monthStr = String(e2.month).padStart(2, "0");
        const fullDate = `${e2.year}-${monthStr}-01 00:00:00`;
        if (type.value === 1) {
          currentItem.value.startTime = fullDate;
        } else {
          currentItem.value.endTime = fullDate;
        }
        timePickerShow.value = false;
        currentItem.value = null;
      };
      const getRealImgUrl = (obj) => {
        if (typeof obj === "string")
          return obj;
        if (obj && obj.url)
          return getRealImgUrl(obj.url);
        return "";
      };
      const parseStrToImgArr = (str) => {
        if (!str || str === "" || str === "[]")
          return [];
        try {
          const jsonStr = str.replace(/'/g, '"');
          const res2 = JSON.parse(jsonStr);
          return Array.isArray(res2) ? res2.map((item) => {
            const realUrl = getRealImgUrl(item);
            return realUrl ? { url: realUrl } : null;
          }).filter(Boolean) : [];
        } catch (err) {
          formatAppLog("error", "at pages/forum/service/components/certificate.vue:429", "解析图片字符串失败：", err);
          return [];
        }
      };
      const parseImgArrToStr = (arr) => {
        if (!Array.isArray(arr) || arr.length === 0)
          return "[]";
        try {
          const simpleArr = arr.map((item) => {
            const realUrl = getRealImgUrl(item);
            return realUrl ? { url: realUrl } : null;
          }).filter(Boolean);
          return JSON.stringify(simpleArr).replace(/"/g, "'");
        } catch (err) {
          formatAppLog("error", "at pages/forum/service/components/certificate.vue:442", "转换图片数组为字符串失败：", err);
          return "[]";
        }
      };
      const showCertificateTimePicker = (item, index) => {
        currentItem.value = item;
        currentIndex.value = index;
        certificatePickerShow.value = true;
      };
      const confirmCertificateDate = (e2) => {
        if (!currentItem.value)
          return;
        const month = String(e2.month).padStart(2, "0");
        const day = String(e2.day).padStart(2, "0");
        currentItem.value.date = `${e2.year}-${month}-${day}`;
        certificatePickerShow.value = false;
        currentItem.value = null;
      };
      const bindPickerChange = (e2, index) => {
        const selectIdx = Number(e2.detail.value);
        const selectItem = qualification.value[selectIdx];
        if (selectItem) {
          certificateLists.value[index].selectIndex = selectIdx;
          certificateLists.value[index].listenerId = selectItem.id || "";
          certificateLists.value[index].name = selectItem.name || "";
        }
      };
      const showTimePicker = (item, index, t2) => {
        currentItem.value = item;
        currentIndex.value = index;
        type.value = t2;
        timePickerShow.value = true;
      };
      const beforeUpload = () => {
        return true;
      };
      const uploadComplete = (res2, index) => {
        var _a;
        if (!certificateLists.value[index])
          return;
        const realUrl = ((_a = res2 == null ? void 0 : res2.data) == null ? void 0 : _a.url) || (res2 == null ? void 0 : res2.url) || "";
        if (realUrl)
          certificateLists.value[index].photoList.push({ url: realUrl });
        else
          uni.showToast({ title: "图片上传失败，URL为空", icon: "error" });
      };
      const uploadComplete1 = (res2, index) => {
        var _a;
        if (!educationLists.value[index])
          return;
        const realUrl = ((_a = res2 == null ? void 0 : res2.data) == null ? void 0 : _a.url) || (res2 == null ? void 0 : res2.url) || "";
        if (realUrl)
          educationLists.value[index].photoList.push({ url: realUrl });
        else
          uni.showToast({ title: "图片上传失败，URL为空", icon: "error" });
      };
      const uploadComplete2 = (res2, index) => {
        var _a;
        if (!ethicsLists.value[index])
          return;
        const realUrl = ((_a = res2 == null ? void 0 : res2.data) == null ? void 0 : _a.url) || (res2 == null ? void 0 : res2.url) || "";
        if (realUrl)
          ethicsLists.value[index].photoList.push({ url: realUrl });
        else
          uni.showToast({ title: "图片上传失败，URL为空", icon: "error" });
      };
      const deletePic = (fileList, index) => {
        certificateLists.value[index].photoList = fileList || [];
      };
      const deletePic1 = (fileList, index) => {
        educationLists.value[index].photoList = fileList || [];
      };
      const deletePic2 = (fileList, index) => {
        ethicsLists.value[index].photoList = fileList || [];
      };
      const addCertificateListHandler = () => {
        certificateLists.value.push({ name: "", date: "", photoList: [], authority: "", number: "", listenerId: null, selectIndex: -1 });
      };
      const addEducationListsHandler = () => {
        educationLists.value.push({ startTime: null, endTime: null, schoolName: null, idNumber: null, photoList: [], code: null, degree: null });
      };
      const addEthicsListsHandler = () => {
        ethicsLists.value.push({ startTime: null, endTime: null, schoolName: null, idNumber: null, photoList: [], code: null, career: "" });
      };
      const removeCertificateListHandler = (index) => {
        certificateLists.value.splice(index, 1);
      };
      const removeEducationListsHandler = (index) => {
        educationLists.value.splice(index, 1);
      };
      const removeEthicsListsHandler = (index) => {
        ethicsLists.value.splice(index, 1);
      };
      const emit = __emit;
      const props = __props;
      const refreshData = () => {
        var _a, _b, _c, _d, _e2, _f;
        if ((_b = (_a = props.modelValue) == null ? void 0 : _a.certificateList) == null ? void 0 : _b.length) {
          certificateLists.value = props.modelValue.certificateList.map((e2) => {
            const photoList = parseStrToImgArr(e2.photos || "[]");
            const { photos, ...rest } = e2;
            return { ...rest, photoList, selectIndex: -1 };
          });
        } else {
          certificateLists.value = [{ name: null, date: null, photoList: [], authority: null, number: null, listenerId: null, selectIndex: -1 }];
        }
        if ((_d = (_c = props.modelValue) == null ? void 0 : _c.educationList) == null ? void 0 : _d.length) {
          educationLists.value = props.modelValue.educationList.map((e2) => {
            const photoList = parseStrToImgArr(e2.photo || "[]");
            const { photo, ...rest } = e2;
            return { ...rest, photoList };
          });
        } else {
          educationLists.value = [];
        }
        if ((_f = (_e2 = props.modelValue) == null ? void 0 : _e2.ethicsList) == null ? void 0 : _f.length) {
          ethicsLists.value = props.modelValue.ethicsList.map((e2) => {
            const photoList = parseStrToImgArr(e2.photos || "[]");
            const { photos, ...rest } = e2;
            return { ...rest, photoList };
          });
        } else {
          ethicsLists.value = [];
        }
        fromDataCertificate.value = {
          certificateList: certificateLists.value,
          educationList: educationLists.value,
          ethicsList: ethicsLists.value,
          consultantType: props.consultantType || 1
        };
      };
      const submit = async () => {
        if (props.consultantType === 1 && certificateLists.value.length === 0) {
          uni.showToast({ title: "请上传至少一张资质证书", icon: "error" });
          return;
        }
        const submitCertificateLists = JSON.parse(JSON.stringify(certificateLists.value));
        const submitEducationLists = JSON.parse(JSON.stringify(educationLists.value));
        const submitEthicsLists = JSON.parse(JSON.stringify(ethicsLists.value));
        submitCertificateLists.forEach((e2) => {
          e2.photos = parseImgArrToStr(e2.photoList || []);
          delete e2.photoList;
          delete e2.selectIndex;
        });
        submitEducationLists.forEach((e2) => {
          e2.photo = parseImgArrToStr(e2.photoList || []);
          delete e2.photoList;
        });
        submitEthicsLists.forEach((e2) => {
          e2.photos = parseImgArrToStr(e2.photoList || []);
          delete e2.photoList;
        });
        const data = {
          certificateList: submitCertificateLists,
          educationList: submitEducationLists,
          ethicsList: submitEthicsLists,
          consultantType: props.consultantType
        };
        fromDataCertificate.value = data;
        try {
          const res2 = props.consultantType == 1 ? await registerConsultantStep3({ ...props.modelValue, ...data }) : await registerListenerStep3({ ...props.modelValue, ...data });
          if (res2.code === 0) {
            emit("commited", "");
          } else {
            uni.showToast({ title: res2.msg || "提交失败", icon: "error" });
          }
        } catch (err) {
          formatAppLog("error", "at pages/forum/service/components/certificate.vue:601", "提交失败：", err);
          uni.showToast({ title: "提交失败，请重试", icon: "error" });
        }
      };
      vue.onMounted(() => {
        refreshData();
        getQualificationApi();
      });
      __expose({ submit, refreshData, fromDataCertificate });
      const __returned__ = { certificatePickerShow, certificateLists, educationLists, ethicsLists, qualification, uploadUrl, timePickerShow, currentItem, currentIndex, type, token, headers, fromDataCertificate, timePickerParams, certificateDateParam, initCertificateLists, getQualificationApi, confirmSchoolTime, getRealImgUrl, parseStrToImgArr, parseImgArrToStr, showCertificateTimePicker, confirmCertificateDate, bindPickerChange, showTimePicker, beforeUpload, uploadComplete, uploadComplete1, uploadComplete2, deletePic, deletePic1, deletePic2, addCertificateListHandler, addEducationListsHandler, addEthicsListsHandler, removeCertificateListHandler, removeEducationListsHandler, removeEthicsListsHandler, emit, props, refreshData, submit, ref: vue.ref, onMounted: vue.onMounted, reactive: vue.reactive, get uploadFile() {
        return uploadFile;
      }, get registerConsultantStep3() {
        return registerConsultantStep3;
      }, get registerListenerStep3() {
        return registerListenerStep3;
      }, get getQualification() {
        return getQualification;
      }, get baseURL() {
        return baseURL$1;
      } };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render$1(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_u_icon = resolveEasycom(vue.resolveDynamicComponent("u-icon"), __easycom_2$b);
    const _component_u_picker = resolveEasycom(vue.resolveDynamicComponent("u-picker"), __easycom_1$3);
    const _component_uni_easyinput = resolveEasycom(vue.resolveDynamicComponent("uni-easyinput"), __easycom_2$8);
    const _component_u_upload = resolveEasycom(vue.resolveDynamicComponent("u-upload"), __easycom_3$3);
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    return vue.openBlock(), vue.createElementBlock("view", { class: "certificate-box" }, [
      vue.createElementVNode("view", { class: "certificate-content-box" }, [
        vue.createElementVNode("view", { class: "certificate-content" }, [
          vue.createElementVNode("view", { class: "title" }, [
            vue.createElementVNode("view", null, [
              vue.createTextVNode(" 资质信息"),
              vue.createElementVNode("text", { class: "require" }, "(必填)")
            ]),
            vue.createElementVNode("view", { class: "tips" }, [
              vue.createElementVNode("image", {
                src: _imports_0$4,
                class: "img"
              }),
              vue.createTextVNode("说明 ")
            ])
          ]),
          vue.createElementVNode("view", { class: "remark" }, "此项信息正式上线后会公开展示在个人资料"),
          vue.createElementVNode("view", { class: "id-card-form-box" }, [
            (vue.openBlock(true), vue.createElementBlock(
              vue.Fragment,
              null,
              vue.renderList($setup.certificateLists, (item, index) => {
                return vue.openBlock(), vue.createElementBlock("view", {
                  class: "id-card-form-content",
                  key: index
                }, [
                  vue.createElementVNode("picker", {
                    onChange: (e2) => $setup.bindPickerChange(e2, index),
                    value: item.selectIndex,
                    range: $setup.qualification,
                    "range-key": "name"
                  }, [
                    vue.createElementVNode("view", { class: "form-item" }, [
                      vue.createElementVNode("view", { class: "label require" }, "资质类别"),
                      vue.createElementVNode(
                        "view",
                        {
                          class: vue.normalizeClass(["content", !item.name ? "weight" : ""])
                        },
                        null,
                        2
                        /* CLASS */
                      ),
                      vue.createElementVNode("view", {
                        class: "content",
                        style: { "font-size": "24rpx" }
                      }, [
                        vue.createTextVNode(
                          vue.toDisplayString(item.name || "请选择"),
                          1
                          /* TEXT */
                        ),
                        vue.createVNode(_component_u_icon, { name: "arrow-right" })
                      ])
                    ])
                  ], 40, ["onChange", "value", "range"]),
                  vue.createElementVNode("view", { class: "form-item" }, [
                    vue.createElementVNode("view", { class: "label require" }, "发证时间"),
                    vue.createElementVNode("view", { class: "content" }, [
                      vue.createElementVNode("view", {
                        onClick: () => $setup.showCertificateTimePicker(item, index)
                      }, [
                        vue.createElementVNode("text", { style: { "font-size": "24rpx" } }, [
                          vue.createTextVNode(
                            vue.toDisplayString(item.date ? item.date : "请选择") + " ",
                            1
                            /* TEXT */
                          ),
                          vue.createVNode(_component_u_icon, { name: "arrow-right" })
                        ])
                      ], 8, ["onClick"])
                    ])
                  ]),
                  vue.createVNode(_component_u_picker, {
                    mode: "time",
                    modelValue: $setup.certificatePickerShow,
                    "onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => $setup.certificatePickerShow = $event),
                    onConfirm: $setup.confirmCertificateDate,
                    params: $setup.certificateDateParam
                  }, null, 8, ["modelValue", "params"]),
                  vue.createElementVNode("view", { class: "form-item user-sign" }, [
                    vue.createElementVNode("view", { class: "label require" }, "证书编号"),
                    vue.createElementVNode("view", {
                      class: "content-input",
                      style: { "width": "400rpx" }
                    }, [
                      vue.createVNode(_component_uni_easyinput, {
                        trim: "all",
                        type: "text",
                        placeholder: "请输入证书编号",
                        inputBorder: false,
                        clearable: false,
                        modelValue: item.number,
                        "onUpdate:modelValue": ($event) => item.number = $event,
                        style: { "text-align": "end" }
                      }, null, 8, ["modelValue", "onUpdate:modelValue"])
                    ])
                  ]),
                  vue.createElementVNode("view", { class: "form-item user-introduction" }, [
                    vue.createElementVNode("view", { class: "label require" }, "证件照片"),
                    vue.createElementVNode("view", { class: "introduction-content" }, [
                      vue.createVNode(_component_u_upload, {
                        fileList: $setup.certificateLists[index].photoList,
                        "before-upload": $setup.beforeUpload,
                        header: $setup.headers,
                        onOnSuccess: (res2) => $setup.uploadComplete(res2, index),
                        onOnRemove: (fileList) => $setup.deletePic(fileList, index),
                        name: "file",
                        action: $setup.uploadUrl
                      }, null, 8, ["fileList", "header", "onOnSuccess", "onOnRemove", "action"])
                    ])
                  ]),
                  vue.createElementVNode("view", { class: "line-box" }, [
                    vue.createElementVNode(
                      "view",
                      {
                        class: vue.normalizeClass(["line", index > 0 ? "line-delete" : ""])
                      },
                      null,
                      2
                      /* CLASS */
                    ),
                    index > 0 ? (vue.openBlock(), vue.createElementBlock("view", {
                      key: 0,
                      class: "delete-item",
                      onClick: ($event) => $setup.removeCertificateListHandler(index)
                    }, [
                      vue.createVNode(_component_uni_icons, {
                        type: "minus-filled",
                        size: "30",
                        color: "#FA5151"
                      }),
                      vue.createTextVNode(" 移除 ")
                    ], 8, ["onClick"])) : vue.createCommentVNode("v-if", true)
                  ])
                ]);
              }),
              128
              /* KEYED_FRAGMENT */
            )),
            vue.createElementVNode("view", {
              class: "add-certificate-btn",
              onClick: $setup.addCertificateListHandler
            }, [
              vue.createElementVNode("view", { class: "btn" }, [
                vue.createVNode(_component_uni_icons, {
                  type: "plus-filled",
                  size: "18",
                  color: "rgba(0,0,0,.85)"
                }),
                vue.createTextVNode("增加一项")
              ])
            ])
          ])
        ]),
        vue.createElementVNode("view", { class: "certificate-content" }, [
          vue.createElementVNode("view", { class: "title" }, [
            vue.createElementVNode("view", null, [
              vue.createTextVNode("教育背景"),
              vue.createElementVNode("text", { class: "require" }, "(选填)")
            ]),
            vue.createElementVNode("view", { class: "tips" }, [
              vue.createElementVNode("image", {
                src: _imports_0$4,
                class: "img"
              }),
              vue.createTextVNode("说明 ")
            ])
          ]),
          vue.createElementVNode("view", { class: "remark" }, "此项信息正式上线后会公开展示在个人资料"),
          vue.createElementVNode("view", { class: "id-card-form-box" }, [
            (vue.openBlock(true), vue.createElementBlock(
              vue.Fragment,
              null,
              vue.renderList($setup.educationLists, (item, index) => {
                return vue.openBlock(), vue.createElementBlock("view", {
                  class: "id-card-form-content",
                  key: index
                }, [
                  vue.createElementVNode("view", { class: "form-item" }, [
                    vue.createElementVNode("view", { class: "label" }, "起始时间"),
                    vue.createElementVNode("view", {
                      class: "content",
                      onClick: ($event) => $setup.showTimePicker(item, index, 1)
                    }, [
                      vue.createTextVNode(
                        vue.toDisplayString(item.startTime == null ? "请选择" : item.startTime) + " ",
                        1
                        /* TEXT */
                      ),
                      vue.createVNode(_component_uni_icons, {
                        type: "right",
                        size: "14",
                        color: "rgba(0, 0, 0, 0.3)"
                      })
                    ], 8, ["onClick"])
                  ]),
                  vue.createElementVNode("view", { class: "form-item" }, [
                    vue.createElementVNode("view", { class: "label" }, "截止时间"),
                    vue.createElementVNode("view", {
                      class: "content",
                      onClick: ($event) => $setup.showTimePicker(item, index, 2)
                    }, [
                      vue.createTextVNode(
                        vue.toDisplayString(item.endTime == null ? "请选择" : item.endTime) + " ",
                        1
                        /* TEXT */
                      ),
                      vue.createVNode(_component_uni_icons, {
                        type: "right",
                        size: "14",
                        color: "rgba(0, 0, 0, 0.3)"
                      })
                    ], 8, ["onClick"])
                  ]),
                  vue.createVNode(_component_u_picker, {
                    mode: "time",
                    modelValue: $setup.timePickerShow,
                    "onUpdate:modelValue": _cache[1] || (_cache[1] = ($event) => $setup.timePickerShow = $event),
                    onConfirm: $setup.confirmSchoolTime,
                    params: $setup.timePickerParams
                  }, null, 8, ["modelValue", "params"]),
                  vue.createElementVNode("view", { class: "form-item user-sign" }, [
                    vue.createElementVNode("view", { class: "label" }, "毕业院校"),
                    vue.createElementVNode("view", {
                      class: "content-input",
                      style: { "width": "400rpx" }
                    }, [
                      vue.createVNode(_component_uni_easyinput, {
                        trim: "all",
                        type: "text",
                        placeholder: "请输入毕业院校",
                        modelValue: item.schoolName,
                        "onUpdate:modelValue": ($event) => item.schoolName = $event,
                        inputBorder: false,
                        clearable: false
                      }, null, 8, ["modelValue", "onUpdate:modelValue"])
                    ])
                  ]),
                  vue.createElementVNode("view", { class: "form-item user-sign" }, [
                    vue.createElementVNode("view", { class: "label" }, "证书编号"),
                    vue.createElementVNode("view", {
                      class: "content-input",
                      style: { "width": "400rpx" }
                    }, [
                      vue.createVNode(_component_uni_easyinput, {
                        trim: "all",
                        style: { "text-align": "end" },
                        type: "text",
                        placeholder: "请输入证书编号",
                        modelValue: item.code,
                        "onUpdate:modelValue": ($event) => item.code = $event,
                        inputBorder: false,
                        clearable: false
                      }, null, 8, ["modelValue", "onUpdate:modelValue"])
                    ])
                  ]),
                  vue.createElementVNode("view", { class: "form-item user-sign" }, [
                    vue.createElementVNode("view", { class: "label" }, "学历"),
                    vue.createElementVNode("view", {
                      class: "content-input",
                      style: { "width": "400rpx" }
                    }, [
                      vue.createVNode(_component_uni_easyinput, {
                        trim: "all",
                        style: { "text-align": "end" },
                        type: "text",
                        placeholder: "请输入学历",
                        modelValue: item.degree,
                        "onUpdate:modelValue": ($event) => item.degree = $event,
                        inputBorder: false,
                        clearable: false
                      }, null, 8, ["modelValue", "onUpdate:modelValue"])
                    ])
                  ]),
                  vue.createElementVNode("view", { class: "form-item user-introduction" }, [
                    vue.createElementVNode("view", { class: "label" }, "证件照片"),
                    vue.createElementVNode("view", { class: "introduction-content" }, [
                      vue.createVNode(_component_u_upload, {
                        fileList: $setup.educationLists[index].photoList,
                        "before-upload": $setup.beforeUpload,
                        header: $setup.headers,
                        onOnSuccess: (res2) => $setup.uploadComplete1(res2, index),
                        onOnRemove: (fileList) => $setup.deletePic1(fileList, index),
                        name: "file",
                        action: $setup.uploadUrl
                      }, null, 8, ["fileList", "header", "onOnSuccess", "onOnRemove", "action"])
                    ])
                  ]),
                  vue.createElementVNode("view", { class: "line-box" }, [
                    vue.createElementVNode("view", { class: "line line-delete" }),
                    vue.createElementVNode("view", {
                      class: "delete-item",
                      onClick: ($event) => $setup.removeEducationListsHandler(index)
                    }, [
                      vue.createVNode(_component_uni_icons, {
                        type: "minus-filled",
                        size: "30",
                        color: "#FA5151"
                      }),
                      vue.createTextVNode(" 移除 ")
                    ], 8, ["onClick"])
                  ])
                ]);
              }),
              128
              /* KEYED_FRAGMENT */
            ))
          ]),
          vue.createElementVNode("view", {
            class: "add-certificate-btn",
            onClick: $setup.addEducationListsHandler
          }, [
            $setup.educationLists.length > 0 ? (vue.openBlock(), vue.createElementBlock("view", {
              key: 0,
              class: "btn"
            }, [
              vue.createVNode(_component_uni_icons, {
                type: "plus-filled",
                size: "18",
                color: "rgba(0,0,0,.85)"
              }),
              vue.createTextVNode("增加一项")
            ])) : (vue.openBlock(), vue.createElementBlock("view", {
              key: 1,
              class: "btn edit-btn"
            }, [
              vue.createElementVNode("image", {
                src: _imports_1$2,
                class: "img"
              }),
              vue.createTextVNode("编辑 ")
            ]))
          ])
        ]),
        vue.createElementVNode("view", { class: "certificate-content" }, [
          vue.createElementVNode("view", { class: "title" }, [
            vue.createElementVNode("view", null, [
              vue.createTextVNode("伦理培训"),
              vue.createElementVNode("text", { class: "require" }, "(选填)")
            ]),
            vue.createElementVNode("view", { class: "tips" }, [
              vue.createElementVNode("image", {
                src: _imports_0$4,
                class: "img"
              }),
              vue.createTextVNode("说明 ")
            ])
          ]),
          vue.createElementVNode("view", { class: "remark" }, "此项信息正式上线后会公开展示在个人资料"),
          vue.createElementVNode("view", { class: "id-card-form-box" }, [
            (vue.openBlock(true), vue.createElementBlock(
              vue.Fragment,
              null,
              vue.renderList($setup.ethicsLists, (item, index) => {
                return vue.openBlock(), vue.createElementBlock("view", {
                  class: "id-card-form-content",
                  key: index
                }, [
                  vue.createElementVNode("view", { class: "form-item" }, [
                    vue.createElementVNode("view", { class: "label" }, "起始时间"),
                    vue.createElementVNode("view", {
                      class: "content",
                      onClick: ($event) => $setup.showTimePicker(item, index, 1)
                    }, [
                      vue.createTextVNode(
                        vue.toDisplayString(item.startTime == null ? "请选择" : item.startTime) + " ",
                        1
                        /* TEXT */
                      ),
                      vue.createVNode(_component_uni_icons, {
                        type: "right",
                        size: "14",
                        color: "rgba(0, 0, 0, 0.3)"
                      })
                    ], 8, ["onClick"])
                  ]),
                  vue.createElementVNode("view", { class: "form-item" }, [
                    vue.createElementVNode("view", { class: "label" }, "截止时间"),
                    vue.createElementVNode("view", {
                      class: "content",
                      onClick: ($event) => $setup.showTimePicker(item, index, 2)
                    }, [
                      vue.createTextVNode(
                        vue.toDisplayString(item.endTime == null ? "请选择" : item.endTime) + " ",
                        1
                        /* TEXT */
                      ),
                      vue.createVNode(_component_uni_icons, {
                        type: "right",
                        size: "14",
                        color: "rgba(0, 0, 0, 0.3)"
                      })
                    ], 8, ["onClick"])
                  ]),
                  vue.createVNode(_component_u_picker, {
                    mode: "time",
                    modelValue: $setup.timePickerShow,
                    "onUpdate:modelValue": _cache[2] || (_cache[2] = ($event) => $setup.timePickerShow = $event),
                    onConfirm: $setup.confirmSchoolTime,
                    params: $setup.timePickerParams
                  }, null, 8, ["modelValue", "params"]),
                  vue.createElementVNode("view", { class: "form-item user-sign" }, [
                    vue.createElementVNode("view", { class: "label" }, "培训课程"),
                    vue.createElementVNode("view", {
                      class: "content-input",
                      style: { "width": "400rpx" }
                    }, [
                      vue.createVNode(_component_uni_easyinput, {
                        trim: "all",
                        type: "text",
                        placeholder: "请输入培训课程",
                        modelValue: item.career,
                        "onUpdate:modelValue": ($event) => item.career = $event,
                        inputBorder: false,
                        clearable: false,
                        placeholderStyle: { "text-align": "right" }
                      }, null, 8, ["modelValue", "onUpdate:modelValue"])
                    ])
                  ]),
                  vue.createElementVNode("view", { class: "form-item user-introduction" }, [
                    vue.createElementVNode("view", { class: "label" }, "证件照片"),
                    vue.createElementVNode("view", { class: "introduction-content" }, [
                      vue.createVNode(_component_u_upload, {
                        fileList: $setup.ethicsLists[index].photoList,
                        "before-upload": $setup.beforeUpload,
                        header: $setup.headers,
                        onOnSuccess: (res2) => $setup.uploadComplete2(res2, index),
                        onOnRemove: (fileList) => $setup.deletePic2(fileList, index),
                        name: "file",
                        action: $setup.uploadUrl
                      }, null, 8, ["fileList", "header", "onOnSuccess", "onOnRemove", "action"])
                    ])
                  ]),
                  vue.createElementVNode("view", { class: "line-box" }, [
                    vue.createElementVNode("view", { class: "line line-delete" }),
                    vue.createElementVNode("view", {
                      class: "delete-item",
                      onClick: ($event) => $setup.removeEthicsListsHandler(index)
                    }, [
                      vue.createVNode(_component_uni_icons, {
                        type: "minus-filled",
                        size: "30",
                        color: "#FA5151"
                      }),
                      vue.createTextVNode(" 移除 ")
                    ], 8, ["onClick"])
                  ])
                ]);
              }),
              128
              /* KEYED_FRAGMENT */
            )),
            vue.createElementVNode("view", {
              class: "add-certificate-btn",
              onClick: $setup.addEthicsListsHandler
            }, [
              $setup.ethicsLists.length > 0 ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 0,
                class: "btn"
              }, [
                vue.createVNode(_component_uni_icons, {
                  type: "plus-filled",
                  size: "18",
                  color: "rgba(0,0,0,.85)"
                }),
                vue.createTextVNode("增加一项")
              ])) : (vue.openBlock(), vue.createElementBlock("view", {
                key: 1,
                class: "btn edit-btn"
              }, [
                vue.createElementVNode("image", {
                  src: _imports_1$2,
                  class: "img"
                }),
                vue.createTextVNode("编辑 ")
              ]))
            ])
          ])
        ])
      ])
    ]);
  }
  const certificate$1 = /* @__PURE__ */ _export_sfc(_sfc_main$2, [["render", _sfc_render$1], ["__scopeId", "data-v-702e55b9"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/forum/service/components/certificate.vue"]]);
  const _sfc_main$1 = {
    __name: "auth",
    setup(__props, { expose: __expose }) {
      __expose();
      vue.useCssVars((_ctx) => ({
        "6fc89508-statusBarHeight": statusBarHeight.value
      }));
      const globalStore = useGlobalDataStore();
      const statusBarHeight = vue.ref(globalStore.statusBarHeight + "px");
      const currentComponent = vue.ref(career$1);
      const step = vue.ref(2);
      const consultant = vue.ref({});
      const idCardRef = vue.ref(null);
      const careerRef = vue.ref(null);
      const finalStep = vue.ref(null);
      const consultantType = vue.ref("");
      const userInfo = vue.ref("");
      const backFn = () => {
        uni.navigateBack({
          delta: 1
        });
      };
      onLoad((options) => {
        consultantType.value = options.type;
        userInfo.value = JSON.parse(options.userInfo);
        uni.setNavigationBarTitle({ title: "认证" });
        getConsultantDetail();
      });
      const getConsultantDetail = async () => {
        if (consultantType.value == 1) {
          let resp = await getConsultantByUserId({ userId: userInfo.value });
          const data = {
            ...resp.data,
            idcardNum: resp.data.sysUser.idCardNo,
            idcardFront: resp.data.sysUser.idCardFrontImg,
            idcardBackend: resp.data.sysUser.idCardBackImg,
            occupationId: resp.data.sysUser.occupationId
          };
          processingImg(data);
        } else {
          let resp = await getListenerByUserId({ userId: userInfo.value });
          const data = {
            ...resp.data,
            occupationId: resp.data.sysUser.occupationId
          };
          processingImg(data);
        }
      };
      const processingImg = (val2) => {
        const { masterGallery, commitmentImg, holdIdCardImg } = val2;
        masterGallery ? formatImages(JSON.parse(masterGallery)) : [];
        const commitment = commitmentImg ? formatImages([commitmentImg]) : [];
        const holdIdCard = holdIdCardImg ? formatImages([holdIdCardImg]) : [];
        const data = Object.assign(val2, {
          masterGallery: [{ url: "https://s.maimiaoqingsu.com/57cda2c5-d9f3-4118-9dc5-fb91649cf316.png" }],
          commitmentImg: commitment,
          holdIdCardImg: holdIdCard
        });
        consultant.value = data;
      };
      const formatImages = (urls) => {
        return urls.map((url2, index) => ({
          url: url2
        }));
      };
      const formData = vue.ref({
        idCard: {
          consultantName: "",
          idNum: ""
          // 其他身份证信息字段
        },
        career: {
          profession: "",
          experience: ""
          // 其他职业信息字段
        },
        certificate: {
          files: []
          // 其他证书字段
        }
      });
      const nextStepHandler = () => {
        var _a, _b;
        if (step.value == 1) {
          (_a = idCardRef.value) == null ? void 0 : _a.submit();
        }
        if (step.value == 2) {
          (_b = careerRef.value) == null ? void 0 : _b.submit();
        }
      };
      const setp2Commit = () => {
        step.value = step.value + 1;
      };
      const finalCommit = () => {
        popup.value.open("center");
      };
      const prevStepHandler = () => {
        step.value = step.value - 1;
      };
      vue.watch(step, (newVal, oldVal) => {
        var _a;
        if (newVal == 1) {
          currentComponent.value = idCard;
        } else if (newVal == 2) {
          currentComponent.value = career$1;
        } else if (newVal == 3) {
          (_a = finalStep.value) == null ? void 0 : _a.refreshData();
          currentComponent.value = certificate$1;
        }
      });
      const popup = vue.ref(null);
      const examineHandler = async () => {
        var _a;
        (_a = finalStep.value) == null ? void 0 : _a.submit();
        const { certificateList, educationList, careerList, consultantType: consultantType2 } = finalStep.value.fromDataCertificate;
        ({
          ...formData.value.idCard,
          ...formData.value.career,
          certificateList,
          educationList,
          careerList,
          consultantType: consultantType2,
          certificates: formData.value.certificate.files
        });
      };
      const closePopup = () => {
        uni.switchTab({
          url: "/pages/my/index"
        });
      };
      const __returned__ = { globalStore, statusBarHeight, currentComponent, step, consultant, idCardRef, careerRef, finalStep, consultantType, userInfo, backFn, getConsultantDetail, processingImg, formatImages, formData, nextStepHandler, setp2Commit, finalCommit, prevStepHandler, popup, examineHandler, closePopup, ref: vue.ref, watch: vue.watch, get useGlobalDataStore() {
        return useGlobalDataStore;
      }, get onLoad() {
        return onLoad;
      }, get getConsultantByUserId() {
        return getConsultantByUserId;
      }, get getListenerByUserId() {
        return getListenerByUserId;
      }, career: career$1, certificate: certificate$1 };
      Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
      return __returned__;
    }
  };
  function _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {
    const _component_uni_icons = resolveEasycom(vue.resolveDynamicComponent("uni-icons"), __easycom_0$7);
    const _component_uni_nav_bar = resolveEasycom(vue.resolveDynamicComponent("uni-nav-bar"), __easycom_1$4);
    const _component_u_icon = resolveEasycom(vue.resolveDynamicComponent("u-icon"), __easycom_2$b);
    const _component_uni_popup = resolveEasycom(vue.resolveDynamicComponent("uni-popup"), __easycom_3$5);
    return vue.openBlock(), vue.createElementBlock("view", { class: "auth-box" }, [
      vue.createElementVNode("view", { class: "children-component" }, [
        vue.createVNode(_component_uni_nav_bar, {
          class: vue.normalizeClass([_ctx.scrollTop > 15 ? "scrollClass" : "", "header-bar"]),
          backgroundColor: "rgba(255,255,255,0)",
          border: false,
          title: "认证"
        }, {
          left: vue.withCtx(() => [
            vue.createVNode(_component_uni_icons, {
              type: "left",
              size: "24",
              onClick: $setup.backFn
            })
          ]),
          _: 1
          /* STABLE */
        }, 8, ["class"]),
        $setup.certificate.verifyStatus == null || $setup.certificate.verifyStatus == 0 ? (vue.openBlock(), vue.createElementBlock("scroll-view", {
          key: 0,
          "scroll-y": "true",
          "show-scrollbar": false,
          class: "scroll-content"
        }, [
          vue.createElementVNode("view", { class: "children-content" }, [
            vue.createElementVNode("view", { class: "top-bg" }),
            vue.createElementVNode("view", { class: "current-component" }, [
              $setup.consultant.status == 1 || $setup.consultant.status == 3 ? (vue.openBlock(), vue.createElementBlock("view", {
                key: 0,
                class: "component-tip"
              }, [
                vue.createVNode(_component_uni_icons, {
                  type: "notification-filled",
                  size: "20",
                  color: "#fd3e3c"
                }),
                vue.createElementVNode(
                  "view",
                  null,
                  vue.toDisplayString($setup.consultant.status == 1 ? "您的入驻申请正在审核中，请耐心等待......" : "您上传的身份证照片不清晰，请修改后再提交"),
                  1
                  /* TEXT */
                )
              ])) : vue.createCommentVNode("v-if", true),
              vue.createElementVNode("view", { class: "step-box" }, [
                vue.createElementVNode("view", { class: "step-content" }, [
                  vue.createElementVNode(
                    "view",
                    {
                      class: vue.normalizeClass(["step-item", $setup.step == 2 ? "step-item-active" : ""])
                    },
                    [
                      vue.createElementVNode("view", { class: "step-num" }, "1"),
                      vue.createElementVNode("view", { class: "step-txt" }, "职业信息")
                    ],
                    2
                    /* CLASS */
                  ),
                  vue.createElementVNode("view", { class: "step-line" }),
                  vue.createElementVNode(
                    "view",
                    {
                      class: vue.normalizeClass(["step-item", $setup.step == 3 ? "step-item-active" : ""])
                    },
                    [
                      vue.createElementVNode("view", { class: "step-num" }, "2"),
                      vue.createElementVNode("view", { class: "step-txt" }, "证书资料")
                    ],
                    2
                    /* CLASS */
                  )
                ])
              ]),
              vue.createElementVNode("view", { class: "handler-components-box" }, [
                vue.withDirectives(vue.createVNode($setup["career"], {
                  ref: "careerRef",
                  modelValue: $setup.consultant,
                  consultantType: $setup.consultantType,
                  onCommitted: $setup.setp2Commit
                }, null, 8, ["modelValue", "consultantType"]), [
                  [vue.vShow, $setup.step == 2]
                ]),
                vue.withDirectives(vue.createVNode($setup["certificate"], {
                  ref: "finalStep",
                  onCommited: $setup.finalCommit,
                  modelValue: $setup.consultant,
                  consultantType: $setup.consultantType
                }, null, 8, ["modelValue", "consultantType"]), [
                  [vue.vShow, $setup.step == 3]
                ]),
                vue.createElementVNode("view", { class: "footer" }, [
                  vue.createElementVNode("view", { class: "tip" }, [
                    vue.createElementVNode("image", {
                      src: _imports_0$a,
                      class: "img"
                    }),
                    vue.createTextVNode("个人信息安全保障中 ")
                  ]),
                  $setup.step == 2 ? (vue.openBlock(), vue.createElementBlock("view", {
                    key: 0,
                    class: "btn step-2",
                    style: { "justify-content": "center" }
                  }, [
                    vue.createElementVNode(
                      "view",
                      {
                        class: vue.normalizeClass(["next", $setup.consultantType == 1 ? "next-ba1" : "next-ba2"]),
                        onClick: $setup.nextStepHandler
                      },
                      "填好了，下一步",
                      2
                      /* CLASS */
                    )
                  ])) : vue.createCommentVNode("v-if", true),
                  $setup.step == 3 ? (vue.openBlock(), vue.createElementBlock("view", {
                    key: 1,
                    class: "btn step-2"
                  }, [
                    vue.createElementVNode("view", {
                      class: "next prev",
                      onClick: $setup.prevStepHandler
                    }, "上一步"),
                    vue.createElementVNode(
                      "view",
                      {
                        class: vue.normalizeClass(["next", $setup.consultantType == 1 ? "next-ba1" : "next-ba2"]),
                        onClick: $setup.examineHandler
                      },
                      "提交审核",
                      2
                      /* CLASS */
                    )
                  ])) : vue.createCommentVNode("v-if", true)
                ])
              ])
            ])
          ])
        ])) : $setup.consultant.verifyStatus == 1 ? (vue.openBlock(), vue.createElementBlock("view", { key: 1 }, [
          vue.createElementVNode("view", null, [
            vue.createVNode(_component_u_icon, { name: "info-circle-fill" })
          ]),
          vue.createElementVNode("view", null, [
            vue.createElementVNode("text", null, "认证审核中，请稍后查看")
          ]),
          vue.createElementVNode("view", null, [
            vue.createElementVNode("text", {
              onClick: _cache[0] || (_cache[0] = (...args) => _ctx.recheck && _ctx.recheck(...args)),
              style: { "color": "red" }
            }, "重新审核")
          ])
        ])) : $setup.consultant.verifyStatus == 2 ? (vue.openBlock(), vue.createElementBlock("view", { key: 2 }, [
          vue.createElementVNode("view", null, [
            vue.createElementVNode("text", null, "您已认证成为心理咨询师")
          ])
        ])) : (vue.openBlock(), vue.createElementBlock("view", { key: 3 }, [
          vue.createElementVNode("view", null, [
            vue.createElementVNode("text", null, "您的资料未通过审核~")
          ])
        ]))
      ]),
      vue.createVNode(
        _component_uni_popup,
        {
          ref: "popup",
          type: "message"
        },
        {
          default: vue.withCtx(() => [
            vue.createElementVNode("view", { class: "popup-content" }, [
              vue.createElementVNode("view", { class: "content-title" }, "您的申请已提交成功"),
              vue.createElementVNode("view", { class: "content-text" }, "稍后可进入申请页面查看审核进度"),
              vue.createElementVNode(
                "view",
                {
                  class: "content-btn",
                  style: vue.normalizeStyle({ background: $setup.consultantType == 1 ? "#35CA95" : "#EB9516" }),
                  onClick: $setup.closePopup
                },
                "返回“我的”",
                4
                /* STYLE */
              )
            ])
          ]),
          _: 1
          /* STABLE */
        },
        512
        /* NEED_PATCH */
      )
    ]);
  }
  const PagesForumServiceAuth = /* @__PURE__ */ _export_sfc(_sfc_main$1, [["render", _sfc_render], ["__scopeId", "data-v-6fc89508"], ["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/pages/forum/service/auth.vue"]]);
  __definePage("pages/login/login", PagesLoginLogin);
  __definePage("pages/confide/index", PagesConfideIndex);
  __definePage("pages/confide/detail", PagesConfideDetail);
  __definePage("pages/consult/index", PagesConsultIndex);
  __definePage("pages/consult/detail", PagesConsultDetail);
  __definePage("pages/index/index", PagesIndexIndex);
  __definePage("pages/message/index", PagesMessageIndex);
  __definePage("pages/my/index", PagesMyIndex);
  __definePage("pages/readArticle/readArticle", PagesReadArticleReadArticle);
  __definePage("pages/readArticle/articleDetail", PagesReadArticleArticleDetail);
  __definePage("pages/settled/settled", PagesSettledSettled);
  __definePage("pages/settled/application", PagesSettledApplication);
  __definePage("pages/consult-feel/consult-feel", PagesConsultFeelConsultFeel);
  __definePage("pages/evaluate/evaluate", PagesEvaluateEvaluate);
  __definePage("pages/forum/index/index", PagesForumIndexIndex);
  __definePage("pages/forum/write/write", PagesForumWriteWrite);
  __definePage("pages/forum/my/my", PagesForumMyMy);
  __definePage("pages/forum/other/other", PagesForumOtherOther);
  __definePage("pages/forum/mailbox/mailbox", PagesForumMailboxMailbox);
  __definePage("pages/forum/write/ask-question/ask-question", PagesForumWriteAskQuestionAskQuestion);
  __definePage("pages/forum/write/send-dynamics/send-dynamics", PagesForumWriteSendDynamicsSendDynamics);
  __definePage("pages/forum/write/write-mailbox/write-mailbox", PagesForumWriteWriteMailboxWriteMailbox);
  __definePage("pages/forum/my/userInfo", PagesForumMyUserInfo);
  __definePage("pages/forum/my/info", PagesForumMyInfo);
  __definePage("pages/forum/write/choose-topic/choose-topic", PagesForumWriteChooseTopicChooseTopic);
  __definePage("pages/forum/index/qaDetail", PagesForumIndexQaDetail);
  __definePage("pages/psychological-test/index/index", PagesPsychologicalTestIndexIndex);
  __definePage("pages/psychological-test/order/order", PagesPsychologicalTestOrderOrder);
  __definePage("pages/psychological-test/test-type/test-type", PagesPsychologicalTestTestTypeTestType);
  __definePage("pages/psychological-test/start-test/start-test", PagesPsychologicalTestStartTestStartTest);
  __definePage("pages/psychological-test/comment/comment", PagesPsychologicalTestCommentComment);
  __definePage("pages/psychological-test/contact-consult/contact-consult", PagesPsychologicalTestContactConsultContactConsult);
  __definePage("pages/psychological-test/test-result/test-result", PagesPsychologicalTestTestResultTestResult);
  __definePage("pages/psychological-test/charge-test/charge-test", PagesPsychologicalTestChargeTestChargeTest);
  __definePage("pages/psychological-test/free-test/free-test", PagesPsychologicalTestFreeTestFreeTest);
  __definePage("pages/message/private-chat", PagesMessagePrivateChat);
  __definePage("pages/supplementInfo/supplementInfo", PagesSupplementInfoSupplementInfo);
  __definePage("pages/settings/serviceSettings", PagesSettingsServiceSettings);
  __definePage("pages/settings/help-center", PagesSettingsHelpCenter);
  __definePage("pages/settings/service-setup", PagesSettingsServiceSetup);
  __definePage("pages/settings/service-price", PagesSettingsServicePrice);
  __definePage("pages/settings/feedback", PagesSettingsFeedback);
  __definePage("pages/settings/complaint", PagesSettingsComplaint);
  __definePage("pages/payment/order/refund-order", PagesPaymentOrderRefundOrder);
  __definePage("pages/settings/record", PagesSettingsRecord);
  __definePage("pages/payment/order/consult-order", PagesPaymentOrderConsultOrder);
  __definePage("pages/payment/order/exam-order", PagesPaymentOrderExamOrder);
  __definePage("pages/payment/order/listener-order", PagesPaymentOrderListenerOrder);
  __definePage("pages/payment/order/bill-order", PagesPaymentOrderBillOrder);
  __definePage("pages/payment/order/evaluation-order", PagesPaymentOrderEvaluationOrder);
  __definePage("pages/settings/services", PagesSettingsServices);
  __definePage("pages/auth/auth", PagesAuthAuth);
  __definePage("pages/auth/cityChoose", PagesAuthCityChoose);
  __definePage("pages/payment/payment", PagesPaymentPayment);
  __definePage("pages/payment/payment-records", PagesPaymentPaymentRecords);
  __definePage("pages/payment/order-details", PagesPaymentOrderDetails);
  __definePage("pages/register/register", PagesRegisterRegister);
  __definePage("pages/settings/settings", PagesSettingsSettings);
  __definePage("pages/account/security", PagesAccountSecurity);
  __definePage("pages/webview/webview", PagesWebviewWebview);
  __definePage("pages/my/wallet/bill", PagesMyWalletBill);
  __definePage("pages/my/wallet/withdrawal", PagesMyWalletWithdrawal);
  __definePage("pages/my/wallet/bank-card", PagesMyWalletBankCard);
  __definePage("pages/my/wallet/mine", PagesMyWalletMine);
  __definePage("pages/shopping-mall/mall-home", PagesShoppingMallMallHome);
  __definePage("pages/shopping-mall/product-details", PagesShoppingMallProductDetails);
  __definePage("pages/shopping-mall/shopping-cart", PagesShoppingMallShoppingCart);
  __definePage("pages/shopping-mall/delivery-address", PagesShoppingMallDeliveryAddress);
  __definePage("pages/shopping-mall/operation-address", PagesShoppingMallOperationAddress);
  __definePage("pages/shopping-mall/order-details", PagesShoppingMallOrderDetails);
  __definePage("pages/shopping-mall/order-list", PagesShoppingMallOrderList);
  __definePage("pages/shopping-mall/order-confirmation", PagesShoppingMallOrderConfirmation);
  __definePage("pages/confide/recommendations", PagesConfideRecommendations);
  __definePage("pages/consult/recommendations", PagesConsultRecommendations);
  __definePage("pages/forum/service/auth", PagesForumServiceAuth);
  const config$1 = {
    // 黑白名单只能二选一
    // 白名单，不需要登录的页面路径
    whiteList: [
      // '/pages/tabPage/index',
      "/pages/login/login",
      // '/pages/login/register'
      { "pattern": RegExp(/register/) }
    ],
    // 黑名单，需要登录的页面路径
    blackList: [
      "/pages/index/index",
      // '/pages/index/detail',
      { "pattern": RegExp(/detail/) }
    ],
    // getStorageSync 获取本地存储的用户登录标识
    uInfo: "token",
    // 登录页面地址，用于未登录时跳转
    loginPath: "/pages/login/login",
    // 点击跳转到需要登录的页面时，未登录是否跳转到登录页面，true | false
    toLogin: true
  };
  const routeList = ["navigateTo", "redirectTo", "reLaunch", "switchTab"];
  function lgen_intercept({ path, query }) {
    if (!config$1.whiteList && !config$1.blackList)
      return;
    {
      path = "/" + path;
      const uInfo = uni.getStorageSync(config$1.uInfo);
      if (!uInfo) {
        if (config$1.whiteList && !config$1.whiteList.includes(path)) {
          handleInit(path, query);
        } else if (config$1.blackList && config$1.blackList.includes(path)) {
          handleInit(path, query);
        }
      } else {
        if (path == "/pages/login/login") {
          uni.reLaunch({
            url: "/pages/index/index"
          });
        }
      }
    }
    routeList.forEach((rItem) => {
      uni.addInterceptor(rItem, {
        // 拦截前
        invoke(args) {
          const uInfo = uni.getStorageSync(config$1.uInfo), url2 = args.url.split("?")[0];
          let pass = true;
          if (config$1.whiteList) {
            pass = config$1.whiteList.some((item) => {
              if (typeof item == "object" && item.pattern) {
                return item.pattern.test(url2);
              }
              return url2 == item;
            });
          } else if (config$1.blackList) {
            pass = config$1.blackList.every((item) => {
              if (typeof item == "object" && item.pattern) {
                return !item.pattern.test(url2);
              }
              return url2 != item;
            });
          }
          if (!pass && !uInfo) {
            {
              jumpLogin(args.url, 1);
            }
            return false;
          }
          return args;
        }
      });
    });
  }
  function handleInit(path, query) {
    let paramStr = "";
    for (let key in query) {
      paramStr += `&${key}=${query[key]}`;
    }
    paramStr = paramStr.replace("&", "?");
    let newPath = path + paramStr;
    jumpLogin(newPath);
  }
  function jumpLogin(path, type = 0) {
    let pagePath = encodeURIComponent(path);
    let toUrl = config$1.loginPath + "?path=" + pagePath;
    if (type) {
      uni.navigateTo({
        url: toUrl
      });
    } else {
      uni.reLaunch({
        url: toUrl
      });
    }
  }
  const _sfc_main = {
    onLaunch: function(e2) {
      lgen_intercept(e2);
    },
    onShow: function() {
    },
    onHide: function() {
    },
    globalData: {
      httpImageUrl: "https://odd.dzjob.net/profile/upload"
    }
  };
  const App = /* @__PURE__ */ _export_sfc(_sfc_main, [["__file", "/Users/gaomingxin/Documents/项目/wheatconfide-uniapp/App.vue"]]);
  const mixin = {
    data() {
      return {};
    },
    onLoad() {
      this.$u.getRect = this.$uGetRect;
    },
    methods: {
      // 查询节点信息
      // 目前此方法在支付宝小程序中无法获取组件跟接点的尺寸，为支付宝的bug(2020-07-21)
      // 解决办法为在组件根部再套一个没有任何作用的view元素
      $uGetRect(selector, all) {
        return new Promise((resolve) => {
          uni.createSelectorQuery().in(this)[all ? "selectAll" : "select"](selector).boundingClientRect((rect) => {
            if (all && Array.isArray(rect) && rect.length) {
              resolve(rect);
            }
            if (!all && rect) {
              resolve(rect);
            }
          }).exec();
        });
      },
      getParentData(parentName = "") {
        if (!this.parent)
          this.parent = false;
        this.parent = this.$u.$parent.call(this, parentName);
        if (this.parent) {
          Object.keys(this.parentData).map((key) => {
            this.parentData[key] = this.parent[key];
          });
          this.parentData.value = this.parent.modelValue;
        }
      },
      // 阻止事件冒泡
      preventEvent(e2) {
        e2 && e2.stopPropagation && e2.stopPropagation();
      }
    },
    onReachBottom() {
      uni.$emit("uOnReachBottom");
    },
    beforeUnmount() {
      if (this.parent && uni.$u.test.array(this.parent.children)) {
        const childrenList = this.parent.children;
        childrenList.map((child, index) => {
          if (child === this) {
            childrenList.splice(index, 1);
          }
        });
      }
    }
  };
  function isArray(arr) {
    return Object.prototype.toString.call(arr) === "[object Array]";
  }
  function deepClone(obj) {
    if ([null, void 0, NaN, false].includes(obj))
      return obj;
    if (typeof obj !== "object" && typeof obj !== "function") {
      return obj;
    }
    var o2 = isArray(obj) ? [] : {};
    for (let i2 in obj) {
      if (obj.hasOwnProperty(i2)) {
        o2[i2] = typeof obj[i2] === "object" ? deepClone(obj[i2]) : obj[i2];
      }
    }
    return o2;
  }
  function deepMerge(target = {}, source = {}) {
    target = deepClone(target);
    if (typeof target !== "object" || typeof source !== "object")
      return false;
    for (var prop in source) {
      if (!source.hasOwnProperty(prop))
        continue;
      if (prop in target) {
        if (typeof target[prop] !== "object") {
          target[prop] = source[prop];
        } else {
          if (typeof source[prop] !== "object") {
            target[prop] = source[prop];
          } else {
            if (target[prop].concat && source[prop].concat) {
              target[prop] = target[prop].concat(source[prop]);
            } else {
              target[prop] = deepMerge(target[prop], source[prop]);
            }
          }
        }
      } else {
        target[prop] = source[prop];
      }
    }
    return target;
  }
  function email(value) {
    return /^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/.test(value);
  }
  function mobile(value) {
    return /^1[23456789]\d{9}$/.test(value);
  }
  function url(value) {
    return /http(s)?:\/\/([\w-]+\.)+[\w-]+(\/[\w-.\/?%&=]*)?/.test(value);
  }
  function date(value) {
    if (!value)
      return false;
    if (number(value))
      value = +value;
    return !/Invalid|NaN/.test(new Date(value).toString());
  }
  function dateISO(value) {
    return /^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(value);
  }
  function number(value) {
    return /^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(value);
  }
  function digits(value) {
    return /^\d+$/.test(value);
  }
  function idCard$1(value) {
    return /^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$/.test(
      value
    );
  }
  function carNo(value) {
    const xreg = /^[京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领A-Z]{1}[A-Z]{1}(([0-9]{5}[DF]$)|([DF][A-HJ-NP-Z0-9][0-9]{4}$))/;
    const creg = /^[京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领A-Z]{1}[A-Z]{1}[A-HJ-NP-Z0-9]{4}[A-HJ-NP-Z0-9挂学警港澳]{1}$/;
    if (value.length === 7) {
      return creg.test(value);
    } else if (value.length === 8) {
      return xreg.test(value);
    } else {
      return false;
    }
  }
  function amount(value) {
    return /^[1-9]\d*(,\d{3})*(\.\d{1,2})?$|^0\.\d{1,2}$/.test(value);
  }
  function chinese(value) {
    let reg = /^[\u4e00-\u9fa5]+$/gi;
    return reg.test(value);
  }
  function letter(value) {
    return /^[a-zA-Z]*$/.test(value);
  }
  function enOrNum(value) {
    let reg = /^[0-9a-zA-Z]*$/g;
    return reg.test(value);
  }
  function contains(value, param) {
    return value.indexOf(param) >= 0;
  }
  function range(value, param) {
    return value >= param[0] && value <= param[1];
  }
  function rangeLength(value, param) {
    return value.length >= param[0] && value.length <= param[1];
  }
  function landline(value) {
    let reg = /^\d{3,4}-\d{7,8}(-\d{3,4})?$/;
    return reg.test(value);
  }
  function empty(value) {
    switch (typeof value) {
      case "undefined":
        return true;
      case "string":
        if (value.replace(/(^[ \t\n\r]*)|([ \t\n\r]*$)/g, "").length == 0)
          return true;
        break;
      case "boolean":
        if (!value)
          return true;
        break;
      case "number":
        if (0 === value || isNaN(value))
          return true;
        break;
      case "object":
        if (null === value || value.length === 0)
          return true;
        for (var i2 in value) {
          return false;
        }
        return true;
    }
    return false;
  }
  function jsonString(value) {
    if (typeof value == "string") {
      try {
        var obj = JSON.parse(value);
        if (typeof obj == "object" && obj) {
          return true;
        } else {
          return false;
        }
      } catch (e2) {
        return false;
      }
    }
    return false;
  }
  function array(value) {
    if (typeof Array.isArray === "function") {
      return Array.isArray(value);
    } else {
      return Object.prototype.toString.call(value) === "[object Array]";
    }
  }
  function object(value) {
    return Object.prototype.toString.call(value) === "[object Object]";
  }
  function code(value, len = 6) {
    return new RegExp(`^\\d{${len}}$`).test(value);
  }
  function func(value) {
    return typeof value === "function";
  }
  function promise(value) {
    return object(value) && func(value.then) && func(value.catch);
  }
  function image(value) {
    const newValue = value.split("?")[0];
    return new RegExp(/\.(jpeg|jpg|gif|png|svg|webp|jfif|bmp|dpg)$/).test(newValue);
  }
  function video(value) {
    const newValue = value.split("?")[0];
    return new RegExp(/\.(mp4|mpg|mpeg|dat|asf|avi|rm|rmvb|mov|wmv|flv|mkv|m3u8|3gp)$/).test(newValue);
  }
  function regExp(o2) {
    return o2 && Object.prototype.toString.call(o2) === "[object RegExp]";
  }
  function string(value) {
    return typeof value === "string";
  }
  const test = {
    email,
    mobile,
    url,
    date,
    dateISO,
    number,
    digits,
    idCard: idCard$1,
    carNo,
    amount,
    chinese,
    letter,
    enOrNum,
    contains,
    range,
    rangeLength,
    empty,
    isEmpty: empty,
    jsonString,
    landline,
    object,
    array,
    code,
    func,
    promise,
    video,
    image,
    regExp,
    string
  };
  class Request {
    // 设置全局默认配置
    setConfig(customConfig) {
      this.config = deepMerge(this.config, customConfig);
    }
    // 主要请求部分
    request(options = {}) {
      if (this.interceptor.request && typeof this.interceptor.request === "function") {
        let interceptorRequest = this.interceptor.request(options);
        if (interceptorRequest === false) {
          return new Promise(() => {
          });
        }
        this.options = interceptorRequest;
      }
      options.dataType = options.dataType || this.config.dataType;
      options.responseType = options.responseType || this.config.responseType;
      options.url = options.url || "";
      options.params = options.params || {};
      options.header = Object.assign({}, this.config.header, options.header);
      options.method = options.method || this.config.method;
      return new Promise((resolve, reject) => {
        options.complete = (response) => {
          uni.hideLoading();
          clearTimeout(this.config.timer);
          this.config.timer = null;
          if (this.config.originalData) {
            if (this.interceptor.response && typeof this.interceptor.response === "function") {
              let resInterceptors = this.interceptor.response(response);
              if (resInterceptors !== false) {
                resolve(resInterceptors);
              } else {
                reject(response);
              }
            } else {
              resolve(response);
            }
          } else {
            if (response.statusCode == 200) {
              if (this.interceptor.response && typeof this.interceptor.response === "function") {
                let resInterceptors = this.interceptor.response(response.data);
                if (resInterceptors !== false) {
                  resolve(resInterceptors);
                } else {
                  reject(response.data);
                }
              } else {
                resolve(response.data);
              }
            } else {
              reject(response);
            }
          }
        };
        options.url = test.url(options.url) ? options.url : this.config.baseUrl + (options.url.indexOf("/") == 0 ? options.url : "/" + options.url);
        if (this.config.showLoading && !this.config.timer) {
          this.config.timer = setTimeout(() => {
            uni.showLoading({
              title: this.config.loadingText,
              mask: this.config.loadingMask
            });
            this.config.timer = null;
          }, this.config.loadingTime);
        }
        uni.request(options);
      });
    }
    constructor() {
      this.config = {
        baseUrl: "",
        // 请求的根域名
        // 默认的请求头
        header: {},
        method: "POST",
        // 设置为json，返回后uni.request会对数据进行一次JSON.parse
        dataType: "json",
        // 此参数无需处理，因为5+和支付宝小程序不支持，默认为text即可
        responseType: "text",
        showLoading: true,
        // 是否显示请求中的loading
        loadingText: "请求中...",
        loadingTime: 800,
        // 在此时间内，请求还没回来的话，就显示加载中动画，单位ms
        timer: null,
        // 定时器
        originalData: false,
        // 是否在拦截器中返回服务端的原始数据，见文档说明
        loadingMask: true
        // 展示loading的时候，是否给一个透明的蒙层，防止触摸穿透
      };
      this.interceptor = {
        // 请求前的拦截
        request: null,
        // 请求后的拦截
        response: null
      };
      this.get = (url2, data = {}, header = {}) => {
        return this.request({
          method: "GET",
          url: url2,
          header,
          data
        });
      };
      this.post = (url2, data = {}, header = {}) => {
        return this.request({
          url: url2,
          method: "POST",
          header,
          data
        });
      };
      this.put = (url2, data = {}, header = {}) => {
        return this.request({
          url: url2,
          method: "PUT",
          header,
          data
        });
      };
      this.delete = (url2, data = {}, header = {}) => {
        return this.request({
          url: url2,
          method: "DELETE",
          header,
          data
        });
      };
    }
  }
  const http = new Request();
  function queryParams(data = {}, isPrefix = true, arrayFormat = "brackets") {
    let prefix = isPrefix ? "?" : "";
    let _result = [];
    if (["indices", "brackets", "repeat", "comma"].indexOf(arrayFormat) == -1)
      arrayFormat = "brackets";
    for (let key in data) {
      let value = data[key];
      if (["", void 0, null].indexOf(value) >= 0) {
        continue;
      }
      if (value.constructor === Array) {
        switch (arrayFormat) {
          case "indices":
            for (let i2 = 0; i2 < value.length; i2++) {
              _result.push(key + "[" + i2 + "]=" + value[i2]);
            }
            break;
          case "brackets":
            value.forEach((_value) => {
              _result.push(key + "[]=" + _value);
            });
            break;
          case "repeat":
            value.forEach((_value) => {
              _result.push(key + "=" + _value);
            });
            break;
          case "comma":
            let commaStr = "";
            value.forEach((_value) => {
              commaStr += (commaStr ? "," : "") + _value;
            });
            _result.push(key + "=" + commaStr);
            break;
          default:
            value.forEach((_value) => {
              _result.push(key + "[]=" + _value);
            });
        }
      } else {
        _result.push(key + "=" + value);
      }
    }
    return _result.length ? prefix + _result.join("&") : "";
  }
  class Router {
    constructor() {
      this.config = {
        type: "navigateTo",
        url: "",
        delta: 1,
        // navigateBack页面后退时,回退的层数
        params: {},
        // 传递的参数
        animationType: "pop-in",
        // 窗口动画,只在APP有效
        animationDuration: 300,
        // 窗口动画持续时间,单位毫秒,只在APP有效
        intercept: false
        // 是否需要拦截
      };
      this.route = this.route.bind(this);
    }
    // 判断url前面是否有"/"，如果没有则加上，否则无法跳转
    addRootPath(url2) {
      return url2[0] === "/" ? url2 : `/${url2}`;
    }
    // 整合路由参数
    mixinParam(url2, params) {
      url2 = url2 && this.addRootPath(url2);
      let query = "";
      if (/.*\/.*\?.*=.*/.test(url2)) {
        query = uni.$u.queryParams(params, false);
        return url2 += "&" + query;
      } else {
        query = uni.$u.queryParams(params);
        return url2 += query;
      }
    }
    // 对外的方法名称
    async route(options = {}, params = {}) {
      let mergeConfig = {};
      if (typeof options === "string") {
        mergeConfig.url = this.mixinParam(options, params);
        mergeConfig.type = "navigateTo";
      } else {
        mergeConfig = uni.$u.deepClone(options, this.config);
        mergeConfig.url = this.mixinParam(options.url, options.params);
      }
      if (params.intercept) {
        this.config.intercept = params.intercept;
      }
      mergeConfig.params = params;
      mergeConfig = uni.$u.deepMerge(this.config, mergeConfig);
      if (typeof uni.$u.routeIntercept === "function") {
        const isNext = await new Promise((resolve, reject) => {
          uni.$u.routeIntercept(mergeConfig, resolve);
        });
        isNext && this.openPage(mergeConfig);
      } else {
        this.openPage(mergeConfig);
      }
    }
    // 执行路由跳转
    openPage(config2) {
      const {
        url: url2,
        type,
        delta,
        animationType,
        animationDuration
      } = config2;
      if (config2.type == "navigateTo" || config2.type == "to") {
        uni.navigateTo({
          url: url2,
          animationType,
          animationDuration
        });
      }
      if (config2.type == "redirectTo" || config2.type == "redirect") {
        uni.redirectTo({
          url: url2
        });
      }
      if (config2.type == "switchTab" || config2.type == "tab") {
        uni.switchTab({
          url: url2
        });
      }
      if (config2.type == "reLaunch" || config2.type == "launch") {
        uni.reLaunch({
          url: url2
        });
      }
      if (config2.type == "navigateBack" || config2.type == "back") {
        uni.navigateBack({
          delta
        });
      }
    }
  }
  const route = new Router().route;
  function timeFrom(dateTime = null, format = "yyyy-mm-dd") {
    if (!dateTime)
      dateTime = Number(/* @__PURE__ */ new Date());
    if (dateTime.toString().length == 10)
      dateTime *= 1e3;
    let timestamp = +new Date(Number(dateTime));
    let timer = (Number(/* @__PURE__ */ new Date()) - timestamp) / 1e3;
    let tips = "";
    switch (true) {
      case timer < 300:
        tips = "刚刚";
        break;
      case (timer >= 300 && timer < 3600):
        tips = parseInt(timer / 60) + "分钟前";
        break;
      case (timer >= 3600 && timer < 86400):
        tips = parseInt(timer / 3600) + "小时前";
        break;
      case (timer >= 86400 && timer < 2592e3):
        tips = parseInt(timer / 86400) + "天前";
        break;
      default:
        if (format === false) {
          if (timer >= 2592e3 && timer < 365 * 86400) {
            tips = parseInt(timer / (86400 * 30)) + "个月前";
          } else {
            tips = parseInt(timer / (86400 * 365)) + "年前";
          }
        } else {
          tips = timeFormat(timestamp, format);
        }
    }
    return tips;
  }
  function colorGradient(startColor = "rgb(0, 0, 0)", endColor = "rgb(255, 255, 255)", step = 10) {
    let startRGB = hexToRgb(startColor, false);
    let startR = startRGB[0];
    let startG = startRGB[1];
    let startB = startRGB[2];
    let endRGB = hexToRgb(endColor, false);
    let endR = endRGB[0];
    let endG = endRGB[1];
    let endB = endRGB[2];
    let sR = (endR - startR) / step;
    let sG = (endG - startG) / step;
    let sB = (endB - startB) / step;
    let colorArr = [];
    for (let i2 = 0; i2 < step; i2++) {
      let hex = rgbToHex("rgb(" + Math.round(sR * i2 + startR) + "," + Math.round(sG * i2 + startG) + "," + Math.round(sB * i2 + startB) + ")");
      colorArr.push(hex);
    }
    return colorArr;
  }
  function hexToRgb(sColor, str = true) {
    let reg = /^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;
    sColor = sColor.toLowerCase();
    if (sColor && reg.test(sColor)) {
      if (sColor.length === 4) {
        let sColorNew = "#";
        for (let i2 = 1; i2 < 4; i2 += 1) {
          sColorNew += sColor.slice(i2, i2 + 1).concat(sColor.slice(i2, i2 + 1));
        }
        sColor = sColorNew;
      }
      let sColorChange = [];
      for (let i2 = 1; i2 < 7; i2 += 2) {
        sColorChange.push(parseInt("0x" + sColor.slice(i2, i2 + 2)));
      }
      if (!str) {
        return sColorChange;
      } else {
        return `rgb(${sColorChange[0]},${sColorChange[1]},${sColorChange[2]})`;
      }
    } else if (/^(rgb|RGB)/.test(sColor)) {
      let arr = sColor.replace(/(?:\(|\)|rgb|RGB)*/g, "").split(",");
      return arr.map((val2) => Number(val2));
    } else {
      return sColor;
    }
  }
  function rgbToHex(rgb) {
    let _this = rgb;
    let reg = /^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;
    if (/^(rgb|RGB)/.test(_this)) {
      let aColor = _this.replace(/(?:\(|\)|rgb|RGB)*/g, "").split(",");
      let strHex = "#";
      for (let i2 = 0; i2 < aColor.length; i2++) {
        let hex = Number(aColor[i2]).toString(16);
        hex = String(hex).length == 1 ? "0" + hex : hex;
        if (hex === "0") {
          hex += hex;
        }
        strHex += hex;
      }
      if (strHex.length !== 7) {
        strHex = _this;
      }
      return strHex;
    } else if (reg.test(_this)) {
      let aNum = _this.replace(/#/, "").split("");
      if (aNum.length === 6) {
        return _this;
      } else if (aNum.length === 3) {
        let numHex = "#";
        for (let i2 = 0; i2 < aNum.length; i2 += 1) {
          numHex += aNum[i2] + aNum[i2];
        }
        return numHex;
      }
    } else {
      return _this;
    }
  }
  function colorToRgba(color2, alpha = 0.3) {
    color2 = rgbToHex(color2);
    var reg = /^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;
    let sColor = color2.toLowerCase();
    if (sColor && reg.test(sColor)) {
      if (sColor.length === 4) {
        var sColorNew = "#";
        for (let i2 = 1; i2 < 4; i2 += 1) {
          sColorNew += sColor.slice(i2, i2 + 1).concat(sColor.slice(i2, i2 + 1));
        }
        sColor = sColorNew;
      }
      var sColorChange = [];
      for (let i2 = 1; i2 < 7; i2 += 2) {
        sColorChange.push(parseInt("0x" + sColor.slice(i2, i2 + 2)));
      }
      return "rgba(" + sColorChange.join(",") + "," + alpha + ")";
    } else {
      return sColor;
    }
  }
  const colorGradient$1 = {
    colorGradient,
    hexToRgb,
    rgbToHex,
    colorToRgba
  };
  function guid(len = 32, firstU = true, radix = null) {
    let chars = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");
    let uuid = [];
    radix = radix || chars.length;
    if (len) {
      for (let i2 = 0; i2 < len; i2++)
        uuid[i2] = chars[0 | Math.random() * radix];
    } else {
      let r2;
      uuid[8] = uuid[13] = uuid[18] = uuid[23] = "-";
      uuid[14] = "4";
      for (let i2 = 0; i2 < 36; i2++) {
        if (!uuid[i2]) {
          r2 = 0 | Math.random() * 16;
          uuid[i2] = chars[i2 == 19 ? r2 & 3 | 8 : r2];
        }
      }
    }
    if (firstU) {
      uuid.shift();
      return "u" + uuid.join("");
    } else {
      return uuid.join("");
    }
  }
  let color = {
    primary: "#2979ff",
    primaryDark: "#2b85e4",
    primaryDisabled: "#a0cfff",
    primaryLight: "#ecf5ff",
    bgColor: "#f3f4f6",
    info: "#909399",
    infoDark: "#82848a",
    infoDisabled: "#c8c9cc",
    infoLight: "#f4f4f5",
    warning: "#ff9900",
    warningDark: "#f29100",
    warningDisabled: "#fcbd71",
    warningLight: "#fdf6ec",
    error: "#fa3534",
    errorDark: "#dd6161",
    errorDisabled: "#fab6b6",
    errorLight: "#fef0f0",
    success: "#19be6b",
    successDark: "#18b566",
    successDisabled: "#71d5a1",
    successLight: "#dbf1e1",
    mainColor: "#303133",
    contentColor: "#606266",
    tipsColor: "#909399",
    lightColor: "#c0c4cc",
    borderColor: "#e4e7ed"
  };
  function type2icon(type = "success", fill = false) {
    if (["primary", "info", "error", "warning", "success"].indexOf(type) == -1)
      type = "success";
    let iconName = "";
    switch (type) {
      case "primary":
        iconName = "info-circle";
        break;
      case "info":
        iconName = "info-circle";
        break;
      case "error":
        iconName = "close-circle";
        break;
      case "warning":
        iconName = "error-circle";
        break;
      case "success":
        iconName = "checkmark-circle";
        break;
      default:
        iconName = "checkmark-circle";
    }
    if (fill)
      iconName += "-fill";
    return iconName;
  }
  function randomArray(array2 = []) {
    return array2.sort(() => Math.random() - 0.5);
  }
  const addUnit = function(value = "auto", unit = "rpx") {
    value = String(value);
    return test.number(value) ? `${value}${unit}` : value;
  };
  function random(min, max) {
    if (min >= 0 && max > 0 && max >= min) {
      let gab = max - min + 1;
      return Math.floor(Math.random() * gab + min);
    } else {
      return 0;
    }
  }
  function trim$1(str, pos = "both") {
    if (pos == "both") {
      return str.replace(/^\s+|\s+$/g, "");
    } else if (pos == "left") {
      return str.replace(/^\s*/, "");
    } else if (pos == "right") {
      return str.replace(/(\s*$)/g, "");
    } else if (pos == "all") {
      return str.replace(/\s+/g, "");
    } else {
      return str;
    }
  }
  function toast(title, duration = 1500) {
    uni.showToast({
      title,
      icon: "none",
      duration
    });
  }
  function getParent(name, keys) {
    let parent = this.$parent;
    while (parent) {
      if (parent.$options.name !== name) {
        parent = parent.$parent;
      } else {
        let data = {};
        if (Array.isArray(keys)) {
          keys.map((val2) => {
            data[val2] = parent[val2] ? parent[val2] : "";
          });
        } else {
          for (let i2 in keys) {
            if (Array.isArray(keys[i2])) {
              if (keys[i2].length) {
                data[i2] = keys[i2];
              } else {
                data[i2] = parent[i2];
              }
            } else if (keys[i2].constructor === Object) {
              if (Object.keys(keys[i2]).length) {
                data[i2] = keys[i2];
              } else {
                data[i2] = parent[i2];
              }
            } else {
              data[i2] = keys[i2] || keys[i2] === false ? keys[i2] : parent[i2];
            }
          }
        }
        return data;
      }
    }
    return {};
  }
  function $parent(name = void 0) {
    let parent = this.$parent;
    while (parent) {
      if (parent.$options && parent.$options.name !== name) {
        parent = parent.$parent;
      } else {
        return parent;
      }
    }
    return false;
  }
  function os() {
    return getSystemInfoSync().platform;
  }
  function sys() {
    return getSystemInfoSync();
  }
  let timeout = null;
  function debounce(func2, wait = 500, immediate = false) {
    if (timeout !== null)
      clearTimeout(timeout);
    if (immediate) {
      var callNow = !timeout;
      timeout = setTimeout(function() {
        timeout = null;
      }, wait);
      if (callNow)
        typeof func2 === "function" && func2();
    } else {
      timeout = setTimeout(function() {
        typeof func2 === "function" && func2();
      }, wait);
    }
  }
  let timeoutArr = [];
  let flagArr = [];
  function throttle(fn, time = 500, isImmediate = true, timeoutName = "default") {
    if (!timeoutArr[timeoutName])
      timeoutArr[timeoutName] = null;
    if (isImmediate) {
      if (!flagArr[timeoutName]) {
        flagArr[timeoutName] = true;
        if (typeof fn === "function")
          fn();
        timeoutArr[timeoutName] = setTimeout(() => {
          flagArr[timeoutName] = false;
        }, time);
      }
    } else {
      if (!flagArr[timeoutName]) {
        flagArr[timeoutName] = true;
        timeoutArr[timeoutName] = setTimeout(() => {
          flagArr[timeoutName] = false;
          if (typeof fn === "function")
            fn();
        }, time);
      }
    }
  }
  function trim(str, pos = "both") {
    str = String(str);
    if (pos == "both") {
      return str.replace(/^\s+|\s+$/g, "");
    }
    if (pos == "left") {
      return str.replace(/^\s*/, "");
    }
    if (pos == "right") {
      return str.replace(/(\s*$)/g, "");
    }
    if (pos == "all") {
      return str.replace(/\s+/g, "");
    }
    return str;
  }
  function addStyle(customStyle, target = "object") {
    if (test.empty(customStyle) || typeof customStyle === "object" && target === "object" || target === "string" && typeof customStyle === "string") {
      return customStyle;
    }
    if (target === "object") {
      customStyle = trim(customStyle);
      const styleArray = customStyle.split(";");
      const style = {};
      for (let i2 = 0; i2 < styleArray.length; i2++) {
        if (styleArray[i2]) {
          const item = styleArray[i2].split(":");
          style[trim(item[0])] = trim(item[1]);
        }
      }
      return style;
    }
    let string2 = "";
    for (const i2 in customStyle) {
      const key = i2.replace(/([A-Z])/g, "-$1").toLowerCase();
      string2 += `${key}:${customStyle[i2]};`;
    }
    return trim(string2);
  }
  let version = "1.10.1";
  const config = {
    v: version,
    version,
    // 主题名称
    type: [
      "primary",
      "success",
      "info",
      "error",
      "warning"
    ]
  };
  const zIndex = {
    toast: 10090,
    noNetwork: 10080,
    // popup包含popup，actionsheet，keyboard，picker的值
    popup: 10075,
    mask: 10070,
    navbar: 980,
    topTips: 975,
    sticky: 970,
    indexListSticky: 965
  };
  function wranning(str) {
    {
      formatAppLog("warn", "at uni_modules/vk-uview-ui/index.js:26", str);
    }
  }
  const $u = {
    queryParams,
    route,
    timeFormat,
    date: timeFormat,
    // 另名date
    timeFrom,
    colorGradient: colorGradient$1.colorGradient,
    colorToRgba: colorGradient$1.colorToRgba,
    guid,
    color,
    sys,
    os,
    type2icon,
    randomArray,
    wranning,
    get: http.get,
    post: http.post,
    put: http.put,
    "delete": http.delete,
    hexToRgb: colorGradient$1.hexToRgb,
    rgbToHex: colorGradient$1.rgbToHex,
    test,
    random,
    deepClone,
    deepMerge,
    getParent,
    $parent,
    addUnit,
    trim: trim$1,
    type: ["primary", "success", "error", "warning", "info"],
    http,
    toast,
    config,
    // uView配置信息相关，比如版本号
    zIndex,
    debounce,
    throttle,
    addStyle,
    getSystemInfoSync
  };
  uni.$u = $u;
  const install = (Vue2) => {
    Vue2.mixin(mixin);
    Vue2.config.globalProperties.$u = $u;
  };
  const uView = {
    install
  };
  uni.getStorageSync("currentUser");
  function createApp() {
    const app = vue.createVueApp(App);
    const pinia = createPinia();
    app.use(uView);
    app.use(pinia);
    app.config.globalProperties.$im = TencentImSdk;
    return {
      app
    };
  }
  const { app: __app__, Vuex: __Vuex__, Pinia: __Pinia__ } = createApp();
  uni.Vuex = __Vuex__;
  uni.Pinia = __Pinia__;
  __app__.provide("__globalStyles", __uniConfig.styles);
  __app__._component.mpType = "app";
  __app__._component.render = () => {
  };
  __app__.mount("#app");
})(Vue);
