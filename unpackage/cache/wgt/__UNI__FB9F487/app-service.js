var __defProp=Object.defineProperty,__defNormalProp=(e,t,i)=>t in e?__defProp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,__publicField=(e,t,i)=>(__defNormalProp(e,"symbol"!=typeof t?t+"":t,i),i);if("undefined"==typeof Promise||Promise.prototype.finally||(Promise.prototype.finally=function(e){const t=this.constructor;return this.then((i=>t.resolve(e()).then((()=>i))),(i=>t.resolve(e()).then((()=>{throw i}))))}),"undefined"!=typeof uni&&uni&&uni.requireGlobal){const e=uni.requireGlobal();ArrayBuffer=e.ArrayBuffer,Int8Array=e.Int8Array,Uint8Array=e.Uint8Array,Uint8ClampedArray=e.Uint8ClampedArray,Int16Array=e.Int16Array,Uint16Array=e.Uint16Array,Int32Array=e.Int32Array,Uint32Array=e.Uint32Array,Float32Array=e.Float32Array,Float64Array=e.Float64Array,BigInt64Array=e.BigInt64Array,BigUint64Array=e.BigUint64Array}uni.restoreGlobal&&uni.restoreGlobal(Vue,weex,plus,setTimeout,clearTimeout,setInterval,clearInterval),function(e){"use strict";function t(e){return weex.requireModule(e)}function i(e,t,...i){uni.__log__?uni.__log__(e,t,...i):console[e].apply(console,[...i,t])}function s(e,t){return"string"==typeof e?t:e}const n=(t,i=0)=>(i,s=e.getCurrentInstance())=>{!e.isInSSRComponentSetup&&e.injectHook(t,i,s)},a=n("onShow",3),r=n("onHide",3),o=n("onLoad",2),l=n("onReady",2),c=n("onUnload",2),d=n("onPullDownRefresh",2),u="/static/login/logo.png";var m="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function h(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var p={exports:{}},g={exports:{}},y=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,62,0,62,0,63,52,53,54,55,56,57,58,59,60,61,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,0,0,0,0,63,0,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51];const f={getRandomValues(e){if(!(e instanceof Int8Array||e instanceof Uint8Array||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8ClampedArray))throw new Error("Expected an integer array");if(e.byteLength>65536)throw new Error("Can only request a maximum of 65536 bytes");return function(e,t){for(var i,s=e.length,n="="===e[s-2]?2:"="===e[s-1]?1:0,a=0,r=s-n&4294967292,o=0;o<r;o+=4)i=y[e.charCodeAt(o)]<<18|y[e.charCodeAt(o+1)]<<12|y[e.charCodeAt(o+2)]<<6|y[e.charCodeAt(o+3)],t[a++]=i>>16&255,t[a++]=i>>8&255,t[a++]=255&i;1===n&&(i=y[e.charCodeAt(o)]<<10|y[e.charCodeAt(o+1)]<<4|y[e.charCodeAt(o+2)]>>2,t[a++]=i>>8&255,t[a++]=255&i),2===n&&(i=y[e.charCodeAt(o)]<<2|y[e.charCodeAt(o+1)]>>4,t[a++]=255&i)}(t("DCloud-Crypto").getRandomValues(e.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e}};var v,E={exports:{}};v=E,function(e){var t,i=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,s=Math.ceil,n=Math.floor,a="[BigNumber Error] ",r=a+"Number primitive has more than 15 significant digits: ",o=1e14,l=14,c=9007199254740991,d=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],u=1e7,m=1e9;function h(e){var t=0|e;return e>0||e===t?t:t-1}function p(e){for(var t,i,s=1,n=e.length,a=e[0]+"";s<n;){for(t=e[s++]+"",i=l-t.length;i--;t="0"+t);a+=t}for(n=a.length;48===a.charCodeAt(--n););return a.slice(0,n+1||1)}function g(e,t){var i,s,n=e.c,a=t.c,r=e.s,o=t.s,l=e.e,c=t.e;if(!r||!o)return null;if(i=n&&!n[0],s=a&&!a[0],i||s)return i?s?0:-o:r;if(r!=o)return r;if(i=r<0,s=l==c,!n||!a)return s?0:!n^i?1:-1;if(!s)return l>c^i?1:-1;for(o=(l=n.length)<(c=a.length)?l:c,r=0;r<o;r++)if(n[r]!=a[r])return n[r]>a[r]^i?1:-1;return l==c?0:l>c^i?1:-1}function y(e,t,i,s){if(e<t||e>i||e!==n(e))throw Error(a+(s||"Argument")+("number"==typeof e?e<t||e>i?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function E(e){var t=e.c.length-1;return h(e.e/l)==t&&e.c[t]%2!=0}function w(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function N(e,t,i){var s,n;if(t<0){for(n=i+".";++t;n+=i);e=n+e}else if(++t>(s=e.length)){for(n=i,t-=s;--t;n+=i);e+=n}else t<s&&(e=e.slice(0,t)+"."+e.slice(t));return e}t=function e(t){var v,k,b,C,S,x=U.prototype={constructor:U,toString:null,valueOf:null},V=new U(1),T=20,A=4,_=-7,I=21,D=-1e7,B=1e7,R=!1,M=1,P=0,O={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},L="0123456789abcdefghijklmnopqrstuvwxyz",F=!0;function U(e,t){var s,a,o,d,u,m,h,p,g=this;if(!(g instanceof U))return new U(e,t);if(null==t){if(e&&!0===e._isBigNumber)return g.s=e.s,void(!e.c||e.e>B?g.c=g.e=null:e.e<D?g.c=[g.e=0]:(g.e=e.e,g.c=e.c.slice()));if((m="number"==typeof e)&&0*e==0){if(g.s=1/e<0?(e=-e,-1):1,e===~~e){for(d=0,u=e;u>=10;u/=10,d++);return void(d>B?g.c=g.e=null:(g.e=d,g.c=[e]))}p=String(e)}else{if(!i.test(p=String(e)))return b(g,p,m);g.s=45==p.charCodeAt(0)?(p=p.slice(1),-1):1}(d=p.indexOf("."))>-1&&(p=p.replace(".","")),(u=p.search(/e/i))>0?(d<0&&(d=u),d+=+p.slice(u+1),p=p.substring(0,u)):d<0&&(d=p.length)}else{if(y(t,2,L.length,"Base"),10==t&&F)return j(g=new U(e),T+g.e+1,A);if(p=String(e),m="number"==typeof e){if(0*e!=0)return b(g,p,m,t);if(g.s=1/e<0?(p=p.slice(1),-1):1,U.DEBUG&&p.replace(/^0\.0*|\./,"").length>15)throw Error(r+e)}else g.s=45===p.charCodeAt(0)?(p=p.slice(1),-1):1;for(s=L.slice(0,t),d=u=0,h=p.length;u<h;u++)if(s.indexOf(a=p.charAt(u))<0){if("."==a){if(u>d){d=h;continue}}else if(!o&&(p==p.toUpperCase()&&(p=p.toLowerCase())||p==p.toLowerCase()&&(p=p.toUpperCase()))){o=!0,u=-1,d=0;continue}return b(g,String(e),m,t)}m=!1,(d=(p=k(p,t,10,g.s)).indexOf("."))>-1?p=p.replace(".",""):d=p.length}for(u=0;48===p.charCodeAt(u);u++);for(h=p.length;48===p.charCodeAt(--h););if(p=p.slice(u,++h)){if(h-=u,m&&U.DEBUG&&h>15&&(e>c||e!==n(e)))throw Error(r+g.s*e);if((d=d-u-1)>B)g.c=g.e=null;else if(d<D)g.c=[g.e=0];else{if(g.e=d,g.c=[],u=(d+1)%l,d<0&&(u+=l),u<h){for(u&&g.c.push(+p.slice(0,u)),h-=l;u<h;)g.c.push(+p.slice(u,u+=l));u=l-(p=p.slice(u)).length}else u-=h;for(;u--;p+="0");g.c.push(+p)}}else g.c=[g.e=0]}function z(e,t,i,s){var n,a,r,o,l;if(null==i?i=A:y(i,0,8),!e.c)return e.toString();if(n=e.c[0],r=e.e,null==t)l=p(e.c),l=1==s||2==s&&(r<=_||r>=I)?w(l,r):N(l,r,"0");else if(a=(e=j(new U(e),t,i)).e,o=(l=p(e.c)).length,1==s||2==s&&(t<=a||a<=_)){for(;o<t;l+="0",o++);l=w(l,a)}else if(t-=r+(2===s&&a>r),l=N(l,a,"0"),a+1>o){if(--t>0)for(l+=".";t--;l+="0");}else if((t+=a-o)>0)for(a+1==o&&(l+=".");t--;l+="0");return e.s<0&&n?"-"+l:l}function G(e,t){for(var i,s,n=1,a=new U(e[0]);n<e.length;n++)(!(s=new U(e[n])).s||(i=g(a,s))===t||0===i&&a.s===t)&&(a=s);return a}function H(e,t,i){for(var s=1,n=t.length;!t[--n];t.pop());for(n=t[0];n>=10;n/=10,s++);return(i=s+i*l-1)>B?e.c=e.e=null:i<D?e.c=[e.e=0]:(e.e=i,e.c=t),e}function j(e,t,i,a){var r,c,u,m,h,p,g,y=e.c,f=d;if(y){e:{for(r=1,m=y[0];m>=10;m/=10,r++);if((c=t-r)<0)c+=l,u=t,h=y[p=0],g=n(h/f[r-u-1]%10);else if((p=s((c+1)/l))>=y.length){if(!a)break e;for(;y.length<=p;y.push(0));h=g=0,r=1,u=(c%=l)-l+1}else{for(h=m=y[p],r=1;m>=10;m/=10,r++);g=(u=(c%=l)-l+r)<0?0:n(h/f[r-u-1]%10)}if(a=a||t<0||null!=y[p+1]||(u<0?h:h%f[r-u-1]),a=i<4?(g||a)&&(0==i||i==(e.s<0?3:2)):g>5||5==g&&(4==i||a||6==i&&(c>0?u>0?h/f[r-u]:0:y[p-1])%10&1||i==(e.s<0?8:7)),t<1||!y[0])return y.length=0,a?(t-=e.e+1,y[0]=f[(l-t%l)%l],e.e=-t||0):y[0]=e.e=0,e;if(0==c?(y.length=p,m=1,p--):(y.length=p+1,m=f[l-c],y[p]=u>0?n(h/f[r-u]%f[u])*m:0),a)for(;;){if(0==p){for(c=1,u=y[0];u>=10;u/=10,c++);for(u=y[0]+=m,m=1;u>=10;u/=10,m++);c!=m&&(e.e++,y[0]==o&&(y[0]=1));break}if(y[p]+=m,y[p]!=o)break;y[p--]=0,m=1}for(c=y.length;0===y[--c];y.pop());}e.e>B?e.c=e.e=null:e.e<D&&(e.c=[e.e=0])}return e}function $(e){var t,i=e.e;return null===i?e.toString():(t=p(e.c),t=i<=_||i>=I?w(t,i):N(t,i,"0"),e.s<0?"-"+t:t)}return U.clone=e,U.ROUND_UP=0,U.ROUND_DOWN=1,U.ROUND_CEIL=2,U.ROUND_FLOOR=3,U.ROUND_HALF_UP=4,U.ROUND_HALF_DOWN=5,U.ROUND_HALF_EVEN=6,U.ROUND_HALF_CEIL=7,U.ROUND_HALF_FLOOR=8,U.EUCLID=9,U.config=U.set=function(e){var t,i;if(null!=e){if("object"!=typeof e)throw Error(a+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(y(i=e[t],0,m,t),T=i),e.hasOwnProperty(t="ROUNDING_MODE")&&(y(i=e[t],0,8,t),A=i),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((i=e[t])&&i.pop?(y(i[0],-m,0,t),y(i[1],0,m,t),_=i[0],I=i[1]):(y(i,-m,m,t),_=-(I=i<0?-i:i))),e.hasOwnProperty(t="RANGE"))if((i=e[t])&&i.pop)y(i[0],-m,-1,t),y(i[1],1,m,t),D=i[0],B=i[1];else{if(y(i,-m,m,t),!i)throw Error(a+t+" cannot be zero: "+i);D=-(B=i<0?-i:i)}if(e.hasOwnProperty(t="CRYPTO")){if((i=e[t])!==!!i)throw Error(a+t+" not true or false: "+i);if(i){if(void 0===f||!f||!f.getRandomValues&&!f.randomBytes)throw R=!i,Error(a+"crypto unavailable");R=i}else R=i}if(e.hasOwnProperty(t="MODULO_MODE")&&(y(i=e[t],0,9,t),M=i),e.hasOwnProperty(t="POW_PRECISION")&&(y(i=e[t],0,m,t),P=i),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(i=e[t]))throw Error(a+t+" not an object: "+i);O=i}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(i=e[t])||/^.?$|[+\-.\s]|(.).*\1/.test(i))throw Error(a+t+" invalid: "+i);F="0123456789"==i.slice(0,10),L=i}}return{DECIMAL_PLACES:T,ROUNDING_MODE:A,EXPONENTIAL_AT:[_,I],RANGE:[D,B],CRYPTO:R,MODULO_MODE:M,POW_PRECISION:P,FORMAT:O,ALPHABET:L}},U.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!U.DEBUG)return!0;var t,i,s=e.c,r=e.e,c=e.s;e:if("[object Array]"=={}.toString.call(s)){if((1===c||-1===c)&&r>=-m&&r<=m&&r===n(r)){if(0===s[0]){if(0===r&&1===s.length)return!0;break e}if((t=(r+1)%l)<1&&(t+=l),String(s[0]).length==t){for(t=0;t<s.length;t++)if((i=s[t])<0||i>=o||i!==n(i))break e;if(0!==i)return!0}}}else if(null===s&&null===r&&(null===c||1===c||-1===c))return!0;throw Error(a+"Invalid BigNumber: "+e)},U.maximum=U.max=function(){return G(arguments,-1)},U.minimum=U.min=function(){return G(arguments,1)},U.random=(C=9007199254740992,S=Math.random()*C&2097151?function(){return n(Math.random()*C)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,i,r,o,c,u=0,h=[],p=new U(V);if(null==e?e=T:y(e,0,m),o=s(e/l),R)if(f.getRandomValues){for(t=f.getRandomValues(new Uint32Array(o*=2));u<o;)(c=131072*t[u]+(t[u+1]>>>11))>=9e15?(i=f.getRandomValues(new Uint32Array(2)),t[u]=i[0],t[u+1]=i[1]):(h.push(c%1e14),u+=2);u=o/2}else{if(!f.randomBytes)throw R=!1,Error(a+"crypto unavailable");for(t=f.randomBytes(o*=7);u<o;)(c=281474976710656*(31&t[u])+1099511627776*t[u+1]+4294967296*t[u+2]+16777216*t[u+3]+(t[u+4]<<16)+(t[u+5]<<8)+t[u+6])>=9e15?f.randomBytes(7).copy(t,u):(h.push(c%1e14),u+=7);u=o/7}if(!R)for(;u<o;)(c=S())<9e15&&(h[u++]=c%1e14);for(o=h[--u],e%=l,o&&e&&(c=d[l-e],h[u]=n(o/c)*c);0===h[u];h.pop(),u--);if(u<0)h=[r=0];else{for(r=-1;0===h[0];h.splice(0,1),r-=l);for(u=1,c=h[0];c>=10;c/=10,u++);u<l&&(r-=l-u)}return p.e=r,p.c=h,p}),U.sum=function(){for(var e=1,t=arguments,i=new U(t[0]);e<t.length;)i=i.plus(t[e++]);return i},k=function(){var e="0123456789";function t(e,t,i,s){for(var n,a,r=[0],o=0,l=e.length;o<l;){for(a=r.length;a--;r[a]*=t);for(r[0]+=s.indexOf(e.charAt(o++)),n=0;n<r.length;n++)r[n]>i-1&&(null==r[n+1]&&(r[n+1]=0),r[n+1]+=r[n]/i|0,r[n]%=i)}return r.reverse()}return function(i,s,n,a,r){var o,l,c,d,u,m,h,g,y=i.indexOf("."),f=T,E=A;for(y>=0&&(d=P,P=0,i=i.replace(".",""),m=(g=new U(s)).pow(i.length-y),P=d,g.c=t(N(p(m.c),m.e,"0"),10,n,e),g.e=g.c.length),c=d=(h=t(i,s,n,r?(o=L,e):(o=e,L))).length;0==h[--d];h.pop());if(!h[0])return o.charAt(0);if(y<0?--c:(m.c=h,m.e=c,m.s=a,h=(m=v(m,g,f,E,n)).c,u=m.r,c=m.e),y=h[l=c+f+1],d=n/2,u=u||l<0||null!=h[l+1],u=E<4?(null!=y||u)&&(0==E||E==(m.s<0?3:2)):y>d||y==d&&(4==E||u||6==E&&1&h[l-1]||E==(m.s<0?8:7)),l<1||!h[0])i=u?N(o.charAt(1),-f,o.charAt(0)):o.charAt(0);else{if(h.length=l,u)for(--n;++h[--l]>n;)h[l]=0,l||(++c,h=[1].concat(h));for(d=h.length;!h[--d];);for(y=0,i="";y<=d;i+=o.charAt(h[y++]));i=N(i,c,o.charAt(0))}return i}}(),v=function(){function e(e,t,i){var s,n,a,r,o=0,l=e.length,c=t%u,d=t/u|0;for(e=e.slice();l--;)o=((n=c*(a=e[l]%u)+(s=d*a+(r=e[l]/u|0)*c)%u*u+o)/i|0)+(s/u|0)+d*r,e[l]=n%i;return o&&(e=[o].concat(e)),e}function t(e,t,i,s){var n,a;if(i!=s)a=i>s?1:-1;else for(n=a=0;n<i;n++)if(e[n]!=t[n]){a=e[n]>t[n]?1:-1;break}return a}function i(e,t,i,s){for(var n=0;i--;)e[i]-=n,n=e[i]<t[i]?1:0,e[i]=n*s+e[i]-t[i];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(s,a,r,c,d){var u,m,p,g,y,f,v,E,w,N,k,b,C,S,x,V,T,A=s.s==a.s?1:-1,_=s.c,I=a.c;if(!(_&&_[0]&&I&&I[0]))return new U(s.s&&a.s&&(_?!I||_[0]!=I[0]:I)?_&&0==_[0]||!I?0*A:A/0:NaN);for(w=(E=new U(A)).c=[],A=r+(m=s.e-a.e)+1,d||(d=o,m=h(s.e/l)-h(a.e/l),A=A/l|0),p=0;I[p]==(_[p]||0);p++);if(I[p]>(_[p]||0)&&m--,A<0)w.push(1),g=!0;else{for(S=_.length,V=I.length,p=0,A+=2,(y=n(d/(I[0]+1)))>1&&(I=e(I,y,d),_=e(_,y,d),V=I.length,S=_.length),C=V,k=(N=_.slice(0,V)).length;k<V;N[k++]=0);T=I.slice(),T=[0].concat(T),x=I[0],I[1]>=d/2&&x++;do{if(y=0,(u=t(I,N,V,k))<0){if(b=N[0],V!=k&&(b=b*d+(N[1]||0)),(y=n(b/x))>1)for(y>=d&&(y=d-1),v=(f=e(I,y,d)).length,k=N.length;1==t(f,N,v,k);)y--,i(f,V<v?T:I,v,d),v=f.length,u=1;else 0==y&&(u=y=1),v=(f=I.slice()).length;if(v<k&&(f=[0].concat(f)),i(N,f,k,d),k=N.length,-1==u)for(;t(I,N,V,k)<1;)y++,i(N,V<k?T:I,k,d),k=N.length}else 0===u&&(y++,N=[0]);w[p++]=y,N[0]?N[k++]=_[C]||0:(N=[_[C]],k=1)}while((C++<S||null!=N[0])&&A--);g=null!=N[0],w[0]||w.splice(0,1)}if(d==o){for(p=1,A=w[0];A>=10;A/=10,p++);j(E,r+(E.e=p+m*l-1)+1,c,g)}else E.e=m,E.r=+g;return E}}(),b=function(){var e=/^(-?)0([xbo])(?=\w[\w.]*$)/i,t=/^([^.]+)\.$/,i=/^\.([^.]+)$/,s=/^-?(Infinity|NaN)$/,n=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(r,o,l,c){var d,u=l?o:o.replace(n,"");if(s.test(u))r.s=isNaN(u)?null:u<0?-1:1;else{if(!l&&(u=u.replace(e,(function(e,t,i){return d="x"==(i=i.toLowerCase())?16:"b"==i?2:8,c&&c!=d?e:t})),c&&(d=c,u=u.replace(t,"$1").replace(i,"0.$1")),o!=u))return new U(u,d);if(U.DEBUG)throw Error(a+"Not a"+(c?" base "+c:"")+" number: "+o);r.s=null}r.c=r.e=null}}(),x.absoluteValue=x.abs=function(){var e=new U(this);return e.s<0&&(e.s=1),e},x.comparedTo=function(e,t){return g(this,new U(e,t))},x.decimalPlaces=x.dp=function(e,t){var i,s,n,a=this;if(null!=e)return y(e,0,m),null==t?t=A:y(t,0,8),j(new U(a),e+a.e+1,t);if(!(i=a.c))return null;if(s=((n=i.length-1)-h(this.e/l))*l,n=i[n])for(;n%10==0;n/=10,s--);return s<0&&(s=0),s},x.dividedBy=x.div=function(e,t){return v(this,new U(e,t),T,A)},x.dividedToIntegerBy=x.idiv=function(e,t){return v(this,new U(e,t),0,1)},x.exponentiatedBy=x.pow=function(e,t){var i,r,o,c,d,u,m,h,p=this;if((e=new U(e)).c&&!e.isInteger())throw Error(a+"Exponent not an integer: "+$(e));if(null!=t&&(t=new U(t)),d=e.e>14,!p.c||!p.c[0]||1==p.c[0]&&!p.e&&1==p.c.length||!e.c||!e.c[0])return h=new U(Math.pow(+$(p),d?e.s*(2-E(e)):+$(e))),t?h.mod(t):h;if(u=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new U(NaN);(r=!u&&p.isInteger()&&t.isInteger())&&(p=p.mod(t))}else{if(e.e>9&&(p.e>0||p.e<-1||(0==p.e?p.c[0]>1||d&&p.c[1]>=24e7:p.c[0]<8e13||d&&p.c[0]<=9999975e7)))return c=p.s<0&&E(e)?-0:0,p.e>-1&&(c=1/c),new U(u?1/c:c);P&&(c=s(P/l+2))}for(d?(i=new U(.5),u&&(e.s=1),m=E(e)):m=(o=Math.abs(+$(e)))%2,h=new U(V);;){if(m){if(!(h=h.times(p)).c)break;c?h.c.length>c&&(h.c.length=c):r&&(h=h.mod(t))}if(o){if(0===(o=n(o/2)))break;m=o%2}else if(j(e=e.times(i),e.e+1,1),e.e>14)m=E(e);else{if(0==(o=+$(e)))break;m=o%2}p=p.times(p),c?p.c&&p.c.length>c&&(p.c.length=c):r&&(p=p.mod(t))}return r?h:(u&&(h=V.div(h)),t?h.mod(t):c?j(h,P,A,void 0):h)},x.integerValue=function(e){var t=new U(this);return null==e?e=A:y(e,0,8),j(t,t.e+1,e)},x.isEqualTo=x.eq=function(e,t){return 0===g(this,new U(e,t))},x.isFinite=function(){return!!this.c},x.isGreaterThan=x.gt=function(e,t){return g(this,new U(e,t))>0},x.isGreaterThanOrEqualTo=x.gte=function(e,t){return 1===(t=g(this,new U(e,t)))||0===t},x.isInteger=function(){return!!this.c&&h(this.e/l)>this.c.length-2},x.isLessThan=x.lt=function(e,t){return g(this,new U(e,t))<0},x.isLessThanOrEqualTo=x.lte=function(e,t){return-1===(t=g(this,new U(e,t)))||0===t},x.isNaN=function(){return!this.s},x.isNegative=function(){return this.s<0},x.isPositive=function(){return this.s>0},x.isZero=function(){return!!this.c&&0==this.c[0]},x.minus=function(e,t){var i,s,n,a,r=this,c=r.s;if(t=(e=new U(e,t)).s,!c||!t)return new U(NaN);if(c!=t)return e.s=-t,r.plus(e);var d=r.e/l,u=e.e/l,m=r.c,p=e.c;if(!d||!u){if(!m||!p)return m?(e.s=-t,e):new U(p?r:NaN);if(!m[0]||!p[0])return p[0]?(e.s=-t,e):new U(m[0]?r:3==A?-0:0)}if(d=h(d),u=h(u),m=m.slice(),c=d-u){for((a=c<0)?(c=-c,n=m):(u=d,n=p),n.reverse(),t=c;t--;n.push(0));n.reverse()}else for(s=(a=(c=m.length)<(t=p.length))?c:t,c=t=0;t<s;t++)if(m[t]!=p[t]){a=m[t]<p[t];break}if(a&&(n=m,m=p,p=n,e.s=-e.s),(t=(s=p.length)-(i=m.length))>0)for(;t--;m[i++]=0);for(t=o-1;s>c;){if(m[--s]<p[s]){for(i=s;i&&!m[--i];m[i]=t);--m[i],m[s]+=o}m[s]-=p[s]}for(;0==m[0];m.splice(0,1),--u);return m[0]?H(e,m,u):(e.s=3==A?-1:1,e.c=[e.e=0],e)},x.modulo=x.mod=function(e,t){var i,s,n=this;return e=new U(e,t),!n.c||!e.s||e.c&&!e.c[0]?new U(NaN):!e.c||n.c&&!n.c[0]?new U(n):(9==M?(s=e.s,e.s=1,i=v(n,e,0,3),e.s=s,i.s*=s):i=v(n,e,0,M),(e=n.minus(i.times(e))).c[0]||1!=M||(e.s=n.s),e)},x.multipliedBy=x.times=function(e,t){var i,s,n,a,r,c,d,m,p,g,y,f,v,E,w,N=this,k=N.c,b=(e=new U(e,t)).c;if(!(k&&b&&k[0]&&b[0]))return!N.s||!e.s||k&&!k[0]&&!b||b&&!b[0]&&!k?e.c=e.e=e.s=null:(e.s*=N.s,k&&b?(e.c=[0],e.e=0):e.c=e.e=null),e;for(s=h(N.e/l)+h(e.e/l),e.s*=N.s,(d=k.length)<(g=b.length)&&(v=k,k=b,b=v,n=d,d=g,g=n),n=d+g,v=[];n--;v.push(0));for(E=o,w=u,n=g;--n>=0;){for(i=0,y=b[n]%w,f=b[n]/w|0,a=n+(r=d);a>n;)i=((m=y*(m=k[--r]%w)+(c=f*m+(p=k[r]/w|0)*y)%w*w+v[a]+i)/E|0)+(c/w|0)+f*p,v[a--]=m%E;v[a]=i}return i?++s:v.splice(0,1),H(e,v,s)},x.negated=function(){var e=new U(this);return e.s=-e.s||null,e},x.plus=function(e,t){var i,s=this,n=s.s;if(t=(e=new U(e,t)).s,!n||!t)return new U(NaN);if(n!=t)return e.s=-t,s.minus(e);var a=s.e/l,r=e.e/l,c=s.c,d=e.c;if(!a||!r){if(!c||!d)return new U(n/0);if(!c[0]||!d[0])return d[0]?e:new U(c[0]?s:0*n)}if(a=h(a),r=h(r),c=c.slice(),n=a-r){for(n>0?(r=a,i=d):(n=-n,i=c),i.reverse();n--;i.push(0));i.reverse()}for((n=c.length)-(t=d.length)<0&&(i=d,d=c,c=i,t=n),n=0;t;)n=(c[--t]=c[t]+d[t]+n)/o|0,c[t]=o===c[t]?0:c[t]%o;return n&&(c=[n].concat(c),++r),H(e,c,r)},x.precision=x.sd=function(e,t){var i,s,n,a=this;if(null!=e&&e!==!!e)return y(e,1,m),null==t?t=A:y(t,0,8),j(new U(a),e,t);if(!(i=a.c))return null;if(s=(n=i.length-1)*l+1,n=i[n]){for(;n%10==0;n/=10,s--);for(n=i[0];n>=10;n/=10,s++);}return e&&a.e+1>s&&(s=a.e+1),s},x.shiftedBy=function(e){return y(e,-9007199254740991,c),this.times("1e"+e)},x.squareRoot=x.sqrt=function(){var e,t,i,s,n,a=this,r=a.c,o=a.s,l=a.e,c=T+4,d=new U("0.5");if(1!==o||!r||!r[0])return new U(!o||o<0&&(!r||r[0])?NaN:r?a:1/0);if(0==(o=Math.sqrt(+$(a)))||o==1/0?(((t=p(r)).length+l)%2==0&&(t+="0"),o=Math.sqrt(+t),l=h((l+1)/2)-(l<0||l%2),i=new U(t=o==1/0?"5e"+l:(t=o.toExponential()).slice(0,t.indexOf("e")+1)+l)):i=new U(o+""),i.c[0])for((o=(l=i.e)+c)<3&&(o=0);;)if(n=i,i=d.times(n.plus(v(a,n,c,1))),p(n.c).slice(0,o)===(t=p(i.c)).slice(0,o)){if(i.e<l&&--o,"9999"!=(t=t.slice(o-3,o+1))&&(s||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(j(i,i.e+T+2,1),e=!i.times(i).eq(a));break}if(!s&&(j(n,n.e+T+2,0),n.times(n).eq(a))){i=n;break}c+=4,o+=4,s=1}return j(i,i.e+T+1,A,e)},x.toExponential=function(e,t){return null!=e&&(y(e,0,m),e++),z(this,e,t,1)},x.toFixed=function(e,t){return null!=e&&(y(e,0,m),e=e+this.e+1),z(this,e,t)},x.toFormat=function(e,t,i){var s,n=this;if(null==i)null!=e&&t&&"object"==typeof t?(i=t,t=null):e&&"object"==typeof e?(i=e,e=t=null):i=O;else if("object"!=typeof i)throw Error(a+"Argument not an object: "+i);if(s=n.toFixed(e,t),n.c){var r,o=s.split("."),l=+i.groupSize,c=+i.secondaryGroupSize,d=i.groupSeparator||"",u=o[0],m=o[1],h=n.s<0,p=h?u.slice(1):u,g=p.length;if(c&&(r=l,l=c,c=r,g-=r),l>0&&g>0){for(r=g%l||l,u=p.substr(0,r);r<g;r+=l)u+=d+p.substr(r,l);c>0&&(u+=d+p.slice(r)),h&&(u="-"+u)}s=m?u+(i.decimalSeparator||"")+((c=+i.fractionGroupSize)?m.replace(new RegExp("\\d{"+c+"}\\B","g"),"$&"+(i.fractionGroupSeparator||"")):m):u}return(i.prefix||"")+s+(i.suffix||"")},x.toFraction=function(e){var t,i,s,n,r,o,c,u,m,h,g,y,f=this,E=f.c;if(null!=e&&(!(c=new U(e)).isInteger()&&(c.c||1!==c.s)||c.lt(V)))throw Error(a+"Argument "+(c.isInteger()?"out of range: ":"not an integer: ")+$(c));if(!E)return new U(f);for(t=new U(V),m=i=new U(V),s=u=new U(V),y=p(E),r=t.e=y.length-f.e-1,t.c[0]=d[(o=r%l)<0?l+o:o],e=!e||c.comparedTo(t)>0?r>0?t:m:c,o=B,B=1/0,c=new U(y),u.c[0]=0;h=v(c,t,0,1),1!=(n=i.plus(h.times(s))).comparedTo(e);)i=s,s=n,m=u.plus(h.times(n=m)),u=n,t=c.minus(h.times(n=t)),c=n;return n=v(e.minus(i),s,0,1),u=u.plus(n.times(m)),i=i.plus(n.times(s)),u.s=m.s=f.s,g=v(m,s,r*=2,A).minus(f).abs().comparedTo(v(u,i,r,A).minus(f).abs())<1?[m,s]:[u,i],B=o,g},x.toNumber=function(){return+$(this)},x.toPrecision=function(e,t){return null!=e&&y(e,1,m),z(this,e,t,2)},x.toString=function(e){var t,i=this,s=i.s,n=i.e;return null===n?s?(t="Infinity",s<0&&(t="-"+t)):t="NaN":(null==e?t=n<=_||n>=I?w(p(i.c),n):N(p(i.c),n,"0"):10===e&&F?t=N(p((i=j(new U(i),T+n+1,A)).c),i.e,"0"):(y(e,2,L.length,"Base"),t=k(N(p(i.c),n,"0"),10,e,s,!0)),s<0&&i.c[0]&&(t="-"+t)),t},x.valueOf=x.toJSON=function(){return $(this)},x._isBigNumber=!0,null!=t&&U.set(t),U}(),t.default=t.BigNumber=t,v.exports?v.exports=t:(e||(e="undefined"!=typeof self&&self?self:window),e.BigNumber=t)}(m);var w=E.exports;!function(e){var t=w,i=e.exports;!function(){var e,s,n,a=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,r={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function o(e){return a.lastIndex=0,a.test(e)?'"'+e.replace(a,(function(e){var t=r[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+e+'"'}function l(i,a){var r,c,d,u,m,h=e,p=a[i],g=null!=p&&(p instanceof t||t.isBigNumber(p));switch(p&&"object"==typeof p&&"function"==typeof p.toJSON&&(p=p.toJSON(i)),"function"==typeof n&&(p=n.call(a,i,p)),typeof p){case"string":return g?p:o(p);case"number":return isFinite(p)?String(p):"null";case"boolean":case"null":case"bigint":return String(p);case"object":if(!p)return"null";if(e+=s,m=[],"[object Array]"===Object.prototype.toString.apply(p)){for(u=p.length,r=0;r<u;r+=1)m[r]=l(r,p)||"null";return d=0===m.length?"[]":e?"[\n"+e+m.join(",\n"+e)+"\n"+h+"]":"["+m.join(",")+"]",e=h,d}if(n&&"object"==typeof n)for(u=n.length,r=0;r<u;r+=1)"string"==typeof n[r]&&(d=l(c=n[r],p))&&m.push(o(c)+(e?": ":":")+d);else Object.keys(p).forEach((function(t){var i=l(t,p);i&&m.push(o(t)+(e?": ":":")+i)}));return d=0===m.length?"{}":e?"{\n"+e+m.join(",\n"+e)+"\n"+h+"}":"{"+m.join(",")+"}",e=h,d}}"function"!=typeof i.stringify&&(i.stringify=function(t,i,a){var r;if(e="",s="","number"==typeof a)for(r=0;r<a;r+=1)s+=" ";else"string"==typeof a&&(s=a);if(n=i,i&&"function"!=typeof i&&("object"!=typeof i||"number"!=typeof i.length))throw new Error("JSON.stringify");return l("",{"":t})})}()}(g);var N=null;const k=/(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])/,b=/(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)/;var C=function(e){var t={strict:!1,storeAsString:!1,alwaysParseAsBig:!1,useNativeBigInt:!1,protoAction:"error",constructorAction:"error"};if(null!=e){if(!0===e.strict&&(t.strict=!0),!0===e.storeAsString&&(t.storeAsString=!0),t.alwaysParseAsBig=!0===e.alwaysParseAsBig&&e.alwaysParseAsBig,t.useNativeBigInt=!0===e.useNativeBigInt&&e.useNativeBigInt,void 0!==e.constructorAction){if("error"!==e.constructorAction&&"ignore"!==e.constructorAction&&"preserve"!==e.constructorAction)throw new Error(`Incorrect value for constructorAction option, must be "error", "ignore" or undefined but passed ${e.constructorAction}`);t.constructorAction=e.constructorAction}if(void 0!==e.protoAction){if("error"!==e.protoAction&&"ignore"!==e.protoAction&&"preserve"!==e.protoAction)throw new Error(`Incorrect value for protoAction option, must be "error", "ignore" or undefined but passed ${e.protoAction}`);t.protoAction=e.protoAction}}var i,s,n,a,r={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},o=function(e){throw{name:"SyntaxError",message:e,at:i,text:n}},l=function(e){return e&&e!==s&&o("Expected '"+e+"' instead of '"+s+"'"),s=n.charAt(i),i+=1,s},c=function(){var e,i="";for("-"===s&&(i="-",l("-"));s>="0"&&s<="9";)i+=s,l();if("."===s)for(i+=".";l()&&s>="0"&&s<="9";)i+=s;if("e"===s||"E"===s)for(i+=s,l(),"-"!==s&&"+"!==s||(i+=s,l());s>="0"&&s<="9";)i+=s,l();if(e=+i,isFinite(e))return null==N&&(N=w),i.length>15?t.storeAsString?i:t.useNativeBigInt?BigInt(i):new N(i):t.alwaysParseAsBig?t.useNativeBigInt?BigInt(e):new N(e):e;o("Bad number")},d=function(){var e,t,a,c="";if('"'===s)for(var d=i;l();){if('"'===s)return i-1>d&&(c+=n.substring(d,i-1)),l(),c;if("\\"===s){if(i-1>d&&(c+=n.substring(d,i-1)),l(),"u"===s){for(a=0,t=0;t<4&&(e=parseInt(l(),16),isFinite(e));t+=1)a=16*a+e;c+=String.fromCharCode(a)}else{if("string"!=typeof r[s])break;c+=r[s]}d=i}}o("Bad string")},u=function(){for(;s&&s<=" ";)l()};return a=function(){switch(u(),s){case"{":return function(){var e,i=Object.create(null);if("{"===s){if(l("{"),u(),"}"===s)return l("}"),i;for(;s;){if(e=d(),u(),l(":"),!0===t.strict&&Object.hasOwnProperty.call(i,e)&&o('Duplicate key "'+e+'"'),!0===k.test(e)?"error"===t.protoAction?o("Object contains forbidden prototype property"):"ignore"===t.protoAction?a():i[e]=a():!0===b.test(e)?"error"===t.constructorAction?o("Object contains forbidden constructor property"):"ignore"===t.constructorAction?a():i[e]=a():i[e]=a(),u(),"}"===s)return l("}"),i;l(","),u()}}o("Bad object")}();case"[":return function(){var e=[];if("["===s){if(l("["),u(),"]"===s)return l("]"),e;for(;s;){if(e.push(a()),u(),"]"===s)return l("]"),e;l(","),u()}}o("Bad array")}();case'"':return d();case"-":return c();default:return s>="0"&&s<="9"?c():function(){switch(s){case"t":return l("t"),l("r"),l("u"),l("e"),!0;case"f":return l("f"),l("a"),l("l"),l("s"),l("e"),!1;case"n":return l("n"),l("u"),l("l"),l("l"),null}o("Unexpected '"+s+"'")}()}},function(e,t){var r;return n=e+"",i=0,s=" ",r=a(),u(),s&&o("Syntax error"),"function"==typeof t?function e(i,s){var n,a=i[s];return a&&"object"==typeof a&&Object.keys(a).forEach((function(t){void 0!==(n=e(a,t))?a[t]=n:delete a[t]})),t.call(i,s,a)}({"":r},""):r}},S=g.exports.stringify,x=C;p.exports=function(e){return{parse:x(e),stringify:S}},p.exports.parse=x(),p.exports.stringify=S;const V=h(p.exports),T={baseURL:"/",timeout:3e4,header:{"Content-Type":"application/json"},dataType:"text"},A=e=>{const t={...T,...e};if(t.url&&!t.url.startsWith("http")){const e=t.baseURL.endsWith("/")?t.baseURL:t.baseURL+"/",i=t.url.startsWith("/")?t.url.substring(1):t.url;t.url=e+i}if(uni.getStorageSync("token")){const e=uni.getStorageSync("token");e&&(t.header={...t.header,token:e})}return new Promise(((e,s)=>{uni.request({...t,success:n=>{let a=n.data;const r=t.custom||{};"string"!=typeof a&&(a=JSON.stringify(a));try{a=V.parse(a)}catch(Lu){i("error","at utils/request.js:67","JSON解析失败:",Lu),a=n.data}if(i("log","at utils/request.js:73","响应状态码:",a.code),0!==a.code&&409999!==a.code)return!1!==r.toast&&(uni.showToast(a.message||"请求失败"),401!=a.code&&10010002!=a.code||(uni.removeStorageSync("logoInfo"),uni.reLaunch({url:"/pages/login/login"}))),s({statusCode:n.statusCode,data:a,message:a.message||"请求失败"});e(a)},fail:e=>{i("error","at utils/request.js:99","请求失败:",e),uni.$u.toast("网络错误，请稍后再试"),s(e)},complete:()=>{}})}))},_={get:(e,t={},i={})=>A({url:e,method:"GET",data:t,...i}),post:(e,t={},i={})=>A({url:e,method:"POST",data:t,...i}),put:(e,t={},i={})=>A({url:e,method:"PUT",data:t,...i}),delete:(e,t={},i={})=>A({url:e,method:"DELETE",data:t,...i})},I=(e,t={})=>_.post("/api/user/userInfo",e,t);
/*!
   * pinia v2.1.7
   * (c) 2023 Eduardo San Martin Morote
   * @license MIT
   */
let D;const B=e=>D=e,R=Symbol();function M(e){return e&&"object"==typeof e&&"[object Object]"===Object.prototype.toString.call(e)&&"function"!=typeof e.toJSON}var P,O;(O=P||(P={})).direct="direct",O.patchObject="patch object",O.patchFunction="patch function";const L=()=>{};function F(t,i,s,n=L){t.push(i);const a=()=>{const e=t.indexOf(i);e>-1&&(t.splice(e,1),n())};return!s&&e.getCurrentScope()&&e.onScopeDispose(a),a}function U(e,...t){e.slice().forEach((e=>{e(...t)}))}const z=e=>e();function G(t,i){t instanceof Map&&i instanceof Map&&i.forEach(((e,i)=>t.set(i,e))),t instanceof Set&&i instanceof Set&&i.forEach(t.add,t);for(const s in i){if(!i.hasOwnProperty(s))continue;const n=i[s],a=t[s];M(a)&&M(n)&&t.hasOwnProperty(s)&&!e.isRef(n)&&!e.isReactive(n)?t[s]=G(a,n):t[s]=n}return t}const H=Symbol();const{assign:j}=Object;function $(t,i,s={},n,a,r){let o;const l=j({actions:{}},s),c={deep:!0};let d,u,m,h=[],p=[];const g=n.state.value[t];let y;function f(i){let s;d=u=!1,"function"==typeof i?(i(n.state.value[t]),s={type:P.patchFunction,storeId:t,events:m}):(G(n.state.value[t],i),s={type:P.patchObject,payload:i,storeId:t,events:m});const a=y=Symbol();e.nextTick().then((()=>{y===a&&(d=!0)})),u=!0,U(h,s,n.state.value[t])}r||g||(n.state.value[t]={}),e.ref({});const v=r?function(){const{state:e}=s,t=e?e():{};this.$patch((e=>{j(e,t)}))}:L;function E(e,i){return function(){B(n);const s=Array.from(arguments),a=[],r=[];function o(e){a.push(e)}function l(e){r.push(e)}let c;U(p,{args:s,name:e,store:N,after:o,onError:l});try{c=i.apply(this&&this.$id===t?this:N,s)}catch(d){throw U(r,d),d}return c instanceof Promise?c.then((e=>(U(a,e),e))).catch((e=>(U(r,e),Promise.reject(e)))):(U(a,c),c)}}const w={_p:n,$id:t,$onAction:F.bind(null,p),$patch:f,$reset:v,$subscribe(i,s={}){const a=F(h,i,s.detached,(()=>r())),r=o.run((()=>e.watch((()=>n.state.value[t]),(e=>{("sync"===s.flush?u:d)&&i({storeId:t,type:P.direct,events:m},e)}),j({},c,s))));return a},$dispose:function(){o.stop(),h=[],p=[],n._s.delete(t)}},N=e.reactive(w);n._s.set(t,N);const k=(n._a&&n._a.runWithContext||z)((()=>n._e.run((()=>(o=e.effectScope()).run(i)))));for(const S in k){const i=k[S];if(e.isRef(i)&&(C=i,!e.isRef(C)||!C.effect)||e.isReactive(i))r||(!g||M(b=i)&&b.hasOwnProperty(H)||(e.isRef(i)?i.value=g[S]:G(i,g[S])),n.state.value[t][S]=i);else if("function"==typeof i){const e=E(S,i);k[S]=e,l.actions[S]=i}}var b,C;return j(N,k),j(e.toRaw(N),k),Object.defineProperty(N,"$state",{get:()=>n.state.value[t],set:e=>{f((t=>{j(t,e)}))}}),n._p.forEach((e=>{j(N,o.run((()=>e({store:N,app:n._a,pinia:n,options:l}))))})),g&&r&&s.hydrate&&s.hydrate(N.$state,g),d=!0,u=!0,N}const q=uni.getSystemInfoSync(),W=function(t,i,s){let n,a;const r="function"==typeof i;function o(t,s){const o=e.hasInjectionContext();(t=t||(o?e.inject(R,null):null))&&B(t),(t=D)._s.has(n)||(r?$(n,i,a,t):function(t,i,s,n){const{state:a,actions:r,getters:o}=i,l=s.state.value[t];let c;c=$(t,(function(){l||(s.state.value[t]=a?a():{});const i=e.toRefs(s.state.value[t]);return j(i,r,Object.keys(o||{}).reduce(((i,n)=>(i[n]=e.markRaw(e.computed((()=>{B(s);const e=s._s.get(t);return o[n].call(e,e)}))),i)),{}))}),i,s,0,!0)}(n,a,t));return t._s.get(n)}return"string"==typeof t?(n=t,a=r?s:i):(a=t,n=t.id),o.$id=n,o}("global",{state:()=>({statusBarHeight:q.statusBarHeight||0,token:uni.getStorageSync("token")||"",userInfo:uni.getStorageSync("userInfo")||""}),actions:{setToken(e){this.token=e,uni.setStorageSync("token",e)},clearToken(){this.token="",uni.removeStorageSync("token")},setUserInfo(e){this.userInfo=e,uni.setStorageSync("userInfo",e)}},getters:{getToken:e=>e.token,getUserInfo:e=>e.userInfo,isLoggedIn:e=>!!e.token}}),J={__name:"login",setup(t){const s=W();let n=e.ref(1);const a=e.ref({userName:"18805340665",password:"123456",code:"6666"}),r=e=>{i("log","at pages/login/login.vue:76",e),n.value=e};let o=uni.$GoEasy;const l=async()=>{if("2"==n.value){let e=await((e,t={})=>_.post("/api/user/quickReg",e,t))(a.value);i("log","at pages/login/login.vue:84","userInfo1",e),uni.setStorageSync("token",e.data.token),s.setToken(e.data.token),uni.setStorageSync("currentUser",e.data),e.data,uni.switchTab({url:"/pages/index/index"})}if("1"==n.value){let e=(await((e,t={})=>_.post("/api/user/smsLogin",e,t))(a.value)).data;i("log","at pages/login/login.vue:97","userInfo2",e),o.connect({id:e.id,data:{avatar:e.avatar,nickname:e.realName},onSuccess:function(){i("log","at pages/login/login.vue:105","GoEasy connect successfully.")},onFailed:function(e){i("log","at pages/login/login.vue:108","Failed to connect GoEasy, code:"+e.code+",error:"+e.content)},onProgress:function(e){i("log","at pages/login/login.vue:111","GoEasy is connecting",e)}}),uni.switchTab({url:"/pages/index/index"})}},c=e.ref(null),d=async()=>{try{const e=await uni.login({provider:"weixin"});i("log","at pages/login/login.vue:129",JSON.stringify(e));const t=await uni.getUserInfo({provider:"weixin"});i("log","at pages/login/login.vue:135",JSON.stringify(t.userInfo)),c.value={...t.userInfo,openid:t.userInfo.openId,unionid:t.userInfo.unionId};const s=await((e,t={})=>_.post("/api/user/login",e,t))({openid:c.value.openid,logintype:"wxApp"});if(i("log","at pages/login/login.vue:149","======================"),i("log","at pages/login/login.vue:150",s.data),s.success){uni.setStorageSync("token",s.data.token),uni.setStorageSync("currentUser",s.data);s.data;uni.switchTab({url:"/pages/index/index"})}else uni.navigateTo({url:`../wx-bind/wx-bind?userInfo=${JSON.stringify(c.value)}`})}catch(e){i("error","at pages/login/login.vue:174","Login failed:",e)}},m=async()=>{if(h.value)return;y(),i("log","at pages/login/login.vue:190",await((e,t={})=>_.post("/api/sms/sms/sendSms",e,t))({phone:a.value.userName}))},h=e.ref(!1),p=e.ref("获取验证码"),g=e.ref(60),y=()=>{h.value=!0;var e=setInterval((()=>{p.value=g.value+"s 重新获取",g.value--,0==g.value&&(clearInterval(e),g.value=60,p.value="获取验证码",h.value=!1)}),1e3)};return(t,i)=>(e.openBlock(),e.createElementBlock("view",{class:"login-box"},[e.createElementVNode("view",{class:"login-bg"},[e.createElementVNode("view",{class:"bg-top"},[e.createElementVNode("image",{src:"/static/login/bg-top.png",class:"image"})]),e.createElementVNode("view",{class:"bg-top-content"},[e.createElementVNode("image",{src:u,class:"logo"}),e.createElementVNode("view",{class:"welcome"},[e.createElementVNode("text",null,"欢迎来到"),e.createTextVNode(),e.createElementVNode("text",{class:"txt"},"「麦苗倾诉」")]),e.createElementVNode("view",{class:"msg"},"未注册手机号验证后自动创建账号")])]),e.createElementVNode("view",{class:"login-area"},[e.createElementVNode("view",{class:"change-login-type"},[e.createElementVNode("view",{class:"phone-type login-type",onClick:i[0]||(i[0]=e=>r(1))},[1==e.unref(n)?(e.openBlock(),e.createElementBlock("image",{key:0,src:"/static/login/code-active.png",class:"image"})):(e.openBlock(),e.createElementBlock("image",{key:1,src:"/static/login/code.png",class:"image"})),e.createElementVNode("text",{class:e.normalizeClass(["login-msg",1==e.unref(n)?"active":""])},"手机快速登录",2)]),e.createElementVNode("view",{class:"code-type login-type",onClick:i[1]||(i[1]=e=>r(2))},[2==e.unref(n)?(e.openBlock(),e.createElementBlock("image",{key:0,src:"/static/login/psd-active.png",class:"image"})):(e.openBlock(),e.createElementBlock("image",{key:1,src:"/static/login/psd.png",class:"image"})),e.createElementVNode("text",{class:e.normalizeClass(["login-msg",2==e.unref(n)?"active":""])},"账号密码登录",2)])]),e.createElementVNode("view",{class:"login-content"},[e.createElementVNode("view",{class:"phone"},[e.withDirectives(e.createElementVNode("input",{class:"uni-input",type:"number","onUpdate:modelValue":i[2]||(i[2]=e=>a.value.userName=e),placeholder:"请输入手机号","placeholder-class":"msg",maxlength:"11"},null,512),[[e.vModelText,a.value.userName]])]),1==e.unref(n)?(e.openBlock(),e.createElementBlock("view",{key:0,class:"code"},[e.withDirectives(e.createElementVNode("input",{class:"code-input","onUpdate:modelValue":i[3]||(i[3]=e=>a.value.code=e),placeholder:"请输入验证码","placeholder-class":"msg"},null,512),[[e.vModelText,a.value.code]]),e.createElementVNode("text",{class:"send-code",disabled:h.value,onClick:m},e.toDisplayString(p.value),9,["disabled"])])):(e.openBlock(),e.createElementBlock("view",{key:1,class:"psd"},[e.withDirectives(e.createElementVNode("input",{class:"uni-input","onUpdate:modelValue":i[4]||(i[4]=e=>a.value.password=e),placeholder:"请输入密码","placeholder-class":"msg"},null,512),[[e.vModelText,a.value.password]])])),e.createElementVNode("view",{class:"login-btn",onClick:l},"立即登录")]),e.createElementVNode("view",{class:"wechat-login"},[e.createElementVNode("text",{class:"wechat-msg"},"第三方登录"),e.createElementVNode("view",{class:"wechat-content",onClick:d},[e.createElementVNode("image",{src:"/static/login/wechat.png",class:"wechat"})])])]),e.createElementVNode("view",{class:"agree"},[e.createTextVNode(" 注册即代表同意 "),e.createElementVNode("text",{class:"txt"},"《用户注册协议》"),e.createTextVNode("和"),e.createElementVNode("text",{class:"txt"},"《隐私协议》")])]))}},Y=[{font_class:"arrow-down",unicode:""},{font_class:"arrow-left",unicode:""},{font_class:"arrow-right",unicode:""},{font_class:"arrow-up",unicode:""},{font_class:"auth",unicode:""},{font_class:"auth-filled",unicode:""},{font_class:"back",unicode:""},{font_class:"bars",unicode:""},{font_class:"calendar",unicode:""},{font_class:"calendar-filled",unicode:""},{font_class:"camera",unicode:""},{font_class:"camera-filled",unicode:""},{font_class:"cart",unicode:""},{font_class:"cart-filled",unicode:""},{font_class:"chat",unicode:""},{font_class:"chat-filled",unicode:""},{font_class:"chatboxes",unicode:""},{font_class:"chatboxes-filled",unicode:""},{font_class:"chatbubble",unicode:""},{font_class:"chatbubble-filled",unicode:""},{font_class:"checkbox",unicode:""},{font_class:"checkbox-filled",unicode:""},{font_class:"checkmarkempty",unicode:""},{font_class:"circle",unicode:""},{font_class:"circle-filled",unicode:""},{font_class:"clear",unicode:""},{font_class:"close",unicode:""},{font_class:"closeempty",unicode:""},{font_class:"cloud-download",unicode:""},{font_class:"cloud-download-filled",unicode:""},{font_class:"cloud-upload",unicode:""},{font_class:"cloud-upload-filled",unicode:""},{font_class:"color",unicode:""},{font_class:"color-filled",unicode:""},{font_class:"compose",unicode:""},{font_class:"contact",unicode:""},{font_class:"contact-filled",unicode:""},{font_class:"down",unicode:""},{font_class:"bottom",unicode:""},{font_class:"download",unicode:""},{font_class:"download-filled",unicode:""},{font_class:"email",unicode:""},{font_class:"email-filled",unicode:""},{font_class:"eye",unicode:""},{font_class:"eye-filled",unicode:""},{font_class:"eye-slash",unicode:""},{font_class:"eye-slash-filled",unicode:""},{font_class:"fire",unicode:""},{font_class:"fire-filled",unicode:""},{font_class:"flag",unicode:""},{font_class:"flag-filled",unicode:""},{font_class:"folder-add",unicode:""},{font_class:"folder-add-filled",unicode:""},{font_class:"font",unicode:""},{font_class:"forward",unicode:""},{font_class:"gear",unicode:""},{font_class:"gear-filled",unicode:""},{font_class:"gift",unicode:""},{font_class:"gift-filled",unicode:""},{font_class:"hand-down",unicode:""},{font_class:"hand-down-filled",unicode:""},{font_class:"hand-up",unicode:""},{font_class:"hand-up-filled",unicode:""},{font_class:"headphones",unicode:""},{font_class:"heart",unicode:""},{font_class:"heart-filled",unicode:""},{font_class:"help",unicode:""},{font_class:"help-filled",unicode:""},{font_class:"home",unicode:""},{font_class:"home-filled",unicode:""},{font_class:"image",unicode:""},{font_class:"image-filled",unicode:""},{font_class:"images",unicode:""},{font_class:"images-filled",unicode:""},{font_class:"info",unicode:""},{font_class:"info-filled",unicode:""},{font_class:"left",unicode:""},{font_class:"link",unicode:""},{font_class:"list",unicode:""},{font_class:"location",unicode:""},{font_class:"location-filled",unicode:""},{font_class:"locked",unicode:""},{font_class:"locked-filled",unicode:""},{font_class:"loop",unicode:""},{font_class:"mail-open",unicode:""},{font_class:"mail-open-filled",unicode:""},{font_class:"map",unicode:""},{font_class:"map-filled",unicode:""},{font_class:"map-pin",unicode:""},{font_class:"map-pin-ellipse",unicode:""},{font_class:"medal",unicode:""},{font_class:"medal-filled",unicode:""},{font_class:"mic",unicode:""},{font_class:"mic-filled",unicode:""},{font_class:"micoff",unicode:""},{font_class:"micoff-filled",unicode:""},{font_class:"minus",unicode:""},{font_class:"minus-filled",unicode:""},{font_class:"more",unicode:""},{font_class:"more-filled",unicode:""},{font_class:"navigate",unicode:""},{font_class:"navigate-filled",unicode:""},{font_class:"notification",unicode:""},{font_class:"notification-filled",unicode:""},{font_class:"paperclip",unicode:""},{font_class:"paperplane",unicode:""},{font_class:"paperplane-filled",unicode:""},{font_class:"person",unicode:""},{font_class:"person-filled",unicode:""},{font_class:"personadd",unicode:""},{font_class:"personadd-filled",unicode:""},{font_class:"personadd-filled-copy",unicode:""},{font_class:"phone",unicode:""},{font_class:"phone-filled",unicode:""},{font_class:"plus",unicode:""},{font_class:"plus-filled",unicode:""},{font_class:"plusempty",unicode:""},{font_class:"pulldown",unicode:""},{font_class:"pyq",unicode:""},{font_class:"qq",unicode:""},{font_class:"redo",unicode:""},{font_class:"redo-filled",unicode:""},{font_class:"refresh",unicode:""},{font_class:"refresh-filled",unicode:""},{font_class:"refreshempty",unicode:""},{font_class:"reload",unicode:""},{font_class:"right",unicode:""},{font_class:"scan",unicode:""},{font_class:"search",unicode:""},{font_class:"settings",unicode:""},{font_class:"settings-filled",unicode:""},{font_class:"shop",unicode:""},{font_class:"shop-filled",unicode:""},{font_class:"smallcircle",unicode:""},{font_class:"smallcircle-filled",unicode:""},{font_class:"sound",unicode:""},{font_class:"sound-filled",unicode:""},{font_class:"spinner-cycle",unicode:""},{font_class:"staff",unicode:""},{font_class:"staff-filled",unicode:""},{font_class:"star",unicode:""},{font_class:"star-filled",unicode:""},{font_class:"starhalf",unicode:""},{font_class:"trash",unicode:""},{font_class:"trash-filled",unicode:""},{font_class:"tune",unicode:""},{font_class:"tune-filled",unicode:""},{font_class:"undo",unicode:""},{font_class:"undo-filled",unicode:""},{font_class:"up",unicode:""},{font_class:"top",unicode:""},{font_class:"upload",unicode:""},{font_class:"upload-filled",unicode:""},{font_class:"videocam",unicode:""},{font_class:"videocam-filled",unicode:""},{font_class:"vip",unicode:""},{font_class:"vip-filled",unicode:""},{font_class:"wallet",unicode:""},{font_class:"wallet-filled",unicode:""},{font_class:"weibo",unicode:""},{font_class:"weixin",unicode:""}],X=(e,t)=>{const i=e.__vccOpts||e;for(const[s,n]of t)i[s]=n;return i};const Q=X({name:"UniIcons",emits:["click"],props:{type:{type:String,default:""},color:{type:String,default:"#333333"},size:{type:[Number,String],default:16},customPrefix:{type:String,default:""},fontFamily:{type:String,default:""}},data:()=>({icons:Y}),computed:{unicode(){let e=this.icons.find((e=>e.font_class===this.type));return e?e.unicode:""},iconSize(){return"number"==typeof(e=this.size)||/^[0-9]*$/g.test(e)?e+"px":e;var e},styleObj(){return""!==this.fontFamily?`color: ${this.color}; font-size: ${this.iconSize}; font-family: ${this.fontFamily};`:`color: ${this.color}; font-size: ${this.iconSize};`}},methods:{_onClick(){this.$emit("click")}}},[["render",function(t,i,s,n,a,r){return e.openBlock(),e.createElementBlock("text",{style:e.normalizeStyle(r.styleObj),class:e.normalizeClass(["uni-icons",["uniui-"+s.type,s.customPrefix,s.customPrefix?s.type:""]]),onClick:i[0]||(i[0]=(...e)=>r._onClick&&r._onClick(...e))},[e.renderSlot(t.$slots,"default",{},void 0,!0)],6)}],["__scopeId","data-v-1320ff52"]]),Z=["{","}"];const K=/^(?:\d)+/,ee=/^(?:\w)+/;const te="zh-Hans",ie="zh-Hant",se="en",ne=Object.prototype.hasOwnProperty,ae=(e,t)=>ne.call(e,t),re=new class{constructor(){this._caches=Object.create(null)}interpolate(e,t,i=Z){if(!t)return[e];let s=this._caches[e];return s||(s=function(e,[t,i]){const s=[];let n=0,a="";for(;n<e.length;){let r=e[n++];if(r===t){a&&s.push({type:"text",value:a}),a="";let t="";for(r=e[n++];void 0!==r&&r!==i;)t+=r,r=e[n++];const o=r===i,l=K.test(t)?"list":o&&ee.test(t)?"named":"unknown";s.push({value:t,type:l})}else a+=r}return a&&s.push({type:"text",value:a}),s}(e,i),this._caches[e]=s),function(e,t){const i=[];let s=0;const n=Array.isArray(t)?"list":(a=t,null!==a&&"object"==typeof a?"named":"unknown");var a;if("unknown"===n)return i;for(;s<e.length;){const a=e[s];switch(a.type){case"text":i.push(a.value);break;case"list":i.push(t[parseInt(a.value,10)]);break;case"named":"named"===n&&i.push(t[a.value])}s++}return i}(s,t)}};function oe(e,t){if(!e)return;if(e=e.trim().replace(/_/g,"-"),t&&t[e])return e;if("chinese"===(e=e.toLowerCase()))return te;if(0===e.indexOf("zh"))return e.indexOf("-hans")>-1?te:e.indexOf("-hant")>-1?ie:(i=e,["-tw","-hk","-mo","-cht"].find((e=>-1!==i.indexOf(e)))?ie:te);var i;let s=[se,"fr","es"];t&&Object.keys(t).length>0&&(s=Object.keys(t));const n=function(e,t){return t.find((t=>0===e.indexOf(t)))}(e,s);return n||void 0}class le{constructor({locale:e,fallbackLocale:t,messages:i,watcher:s,formater:n}){this.locale=se,this.fallbackLocale=se,this.message={},this.messages={},this.watchers=[],t&&(this.fallbackLocale=t),this.formater=n||re,this.messages=i||{},this.setLocale(e||se),s&&this.watchLocale(s)}setLocale(e){const t=this.locale;this.locale=oe(e,this.messages)||this.fallbackLocale,this.messages[this.locale]||(this.messages[this.locale]={}),this.message=this.messages[this.locale],t!==this.locale&&this.watchers.forEach((e=>{e(this.locale,t)}))}getLocale(){return this.locale}watchLocale(e){const t=this.watchers.push(e)-1;return()=>{this.watchers.splice(t,1)}}add(e,t,i=!0){const s=this.messages[e];s?i?Object.assign(s,t):Object.keys(t).forEach((e=>{ae(s,e)||(s[e]=t[e])})):this.messages[e]=t}f(e,t,i){return this.formater.interpolate(e,t,i).join("")}t(e,t,i){let s=this.message;return"string"==typeof t?(t=oe(t,this.messages))&&(s=this.messages[t]):i=t,ae(s,e)?this.formater.interpolate(s[e],i).join(""):(console.warn(`Cannot translate the value of keypath ${e}. Use the value of keypath as default.`),e)}}function ce(e,t={},i,s){if("string"!=typeof e){const i=[t,e];e=i[0],t=i[1]}"string"!=typeof e&&(e="undefined"!=typeof uni&&uni.getLocale?uni.getLocale():"undefined"!=typeof global&&global.getLocale?global.getLocale():se),"string"!=typeof i&&(i="undefined"!=typeof __uniConfig&&__uniConfig.fallbackLocale||se);const n=new le({locale:e,fallbackLocale:i,messages:t,watcher:s});let a=(e,t)=>{if("function"!=typeof getApp)a=function(e,t){return n.t(e,t)};else{let e=!1;a=function(t,i){const s=getApp().$vm;return s&&(s.$locale,e||(e=!0,function(e,t){e.$watchLocale?e.$watchLocale((e=>{t.setLocale(e)})):e.$watch((()=>e.$locale),(e=>{t.setLocale(e)}))}(s,n))),n.t(t,i)}}return a(e,t)};return{i18n:n,f:(e,t,i)=>n.f(e,t,i),t:(e,t)=>a(e,t),add:(e,t,i=!0)=>n.add(e,t,i),watch:e=>n.watchLocale(e),getLocale:()=>n.getLocale(),setLocale:e=>n.setLocale(e)}}const de={en:{"uni-search-bar.cancel":"cancel","uni-search-bar.placeholder":"Search enter content"},"zh-Hans":{"uni-search-bar.cancel":"取消","uni-search-bar.placeholder":"请输入搜索内容"},"zh-Hant":{"uni-search-bar.cancel":"取消","uni-search-bar.placeholder":"請輸入搜索內容"}},{t:ue}=ce(de),me={name:"UniSearchBar",emits:["input","update:modelValue","clear","cancel","confirm","blur","focus"],props:{placeholder:{type:String,default:""},radius:{type:[Number,String],default:5},clearButton:{type:String,default:"auto"},cancelButton:{type:String,default:"auto"},cancelText:{type:String,default:""},bgColor:{type:String,default:"#F8F8F8"},textColor:{type:String,default:"#000000"},maxlength:{type:[Number,String],default:100},value:{type:[Number,String],default:""},modelValue:{type:[Number,String],default:""},focus:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1}},data:()=>({show:!1,showSync:!1,searchVal:""}),computed:{cancelTextI18n(){return this.cancelText||ue("uni-search-bar.cancel")},placeholderText(){return this.placeholder||ue("uni-search-bar.placeholder")}},watch:{modelValue:{immediate:!0,handler(e){this.searchVal=e,e&&(this.show=!0)}},focus:{immediate:!0,handler(e){if(e){if(this.readonly)return;this.show=!0,this.$nextTick((()=>{this.showSync=!0}))}}},searchVal(e,t){this.$emit("input",e),this.$emit("update:modelValue",e)}},methods:{searchClick(){this.readonly||this.show||(this.show=!0,this.$nextTick((()=>{this.showSync=!0})))},clear(){this.searchVal="",this.$nextTick((()=>{this.$emit("clear",{value:""})}))},cancel(){this.readonly||(this.$emit("cancel",{value:this.searchVal}),this.searchVal="",this.show=!1,this.showSync=!1,plus.key.hideSoftKeybord())},confirm(){plus.key.hideSoftKeybord(),this.$emit("confirm",{value:this.searchVal})},blur(){plus.key.hideSoftKeybord(),this.$emit("blur",{value:this.searchVal})},emitFocus(e){this.$emit("focus",e.detail)}}};const he=X(me,[["render",function(t,i,n,a,r,o){const l=s(e.resolveDynamicComponent("uni-icons"),Q);return e.openBlock(),e.createElementBlock("view",{class:"uni-searchbar"},[e.createElementVNode("view",{style:e.normalizeStyle({borderRadius:n.radius+"px",backgroundColor:n.bgColor}),class:"uni-searchbar__box",onClick:i[5]||(i[5]=(...e)=>o.searchClick&&o.searchClick(...e))},[e.createElementVNode("view",{class:"uni-searchbar__box-icon-search"},[e.renderSlot(t.$slots,"searchIcon",{},(()=>[e.createVNode(l,{color:"#c0c4cc",size:"18",type:"search"})]),!0)]),r.show||r.searchVal?e.withDirectives((e.openBlock(),e.createElementBlock("input",{key:0,focus:r.showSync,disabled:n.readonly,placeholder:o.placeholderText,maxlength:n.maxlength,class:"uni-searchbar__box-search-input","confirm-type":"search",type:"text","onUpdate:modelValue":i[0]||(i[0]=e=>r.searchVal=e),style:e.normalizeStyle({color:n.textColor}),onConfirm:i[1]||(i[1]=(...e)=>o.confirm&&o.confirm(...e)),onBlur:i[2]||(i[2]=(...e)=>o.blur&&o.blur(...e)),onFocus:i[3]||(i[3]=(...e)=>o.emitFocus&&o.emitFocus(...e))},null,44,["focus","disabled","placeholder","maxlength"])),[[e.vModelText,r.searchVal]]):(e.openBlock(),e.createElementBlock("text",{key:1,class:"uni-searchbar__text-placeholder"},e.toDisplayString(n.placeholder),1)),r.show&&("always"===n.clearButton||"auto"===n.clearButton&&""!==r.searchVal)&&!n.readonly?(e.openBlock(),e.createElementBlock("view",{key:2,class:"uni-searchbar__box-icon-clear",onClick:i[4]||(i[4]=(...e)=>o.clear&&o.clear(...e))},[e.renderSlot(t.$slots,"clearIcon",{},(()=>[e.createVNode(l,{color:"#c0c4cc",size:"20",type:"clear"})]),!0)])):e.createCommentVNode("",!0)],4),"always"===n.cancelButton||r.show&&"auto"===n.cancelButton?(e.openBlock(),e.createElementBlock("text",{key:0,onClick:i[6]||(i[6]=(...e)=>o.cancel&&o.cancel(...e)),class:"uni-searchbar__cancel"},e.toDisplayString(o.cancelTextI18n),1)):e.createCommentVNode("",!0)])}],["__scopeId","data-v-510eacc3"]]),pe="/static/my/contect.png",ge="/static/confide/share.png",ye="/static/consult/filter.png",fe="/static/consult/order.png",ve="/static/consult/user.png",Ee="/static/consult/address.png",we=(e,t={})=>_.post("/api/consultant/consultant/consultantList",e,t),Ne=(e,t={})=>_.post("/api/consultant/consultant/getConsultantById",e,t),ke={__name:"index",setup(t){e.useCssVars((e=>({"73b4c8cb":a.value})));const n=W(),a=e.ref(n.statusBarHeight+"px"),r=e.ref(0),o=e.ref(0);e.ref(null);const l=e.reactive({listParpms:{current:1,size:10,params:{consultantType:2}},list:[]}),c=e=>{r.value=e.detail.scrollTop},d=()=>{};e.onMounted((()=>{uni.createSelectorQuery().select("#filterBox").boundingClientRect((e=>{o.value=e.top})).exec()}));e.onMounted((()=>{u()}));const u=async()=>{let e=await we(l.listParpms);l.list=e.data.records,i("log","at pages/confide/index.vue:191",e)};return(t,i)=>{const n=s(e.resolveDynamicComponent("uni-search-bar"),he),a=s(e.resolveDynamicComponent("uni-icons"),Q);return e.openBlock(),e.createElementBlock("view",{class:"confide-box"},[e.createElementVNode("scroll-view",{"scroll-y":"",onScroll:c,class:"scroll-content","show-scrollbar":!1},[e.createElementVNode("view",{class:e.normalizeClass(["search-content",r.value>15?"activeClass":""])},[e.createElementVNode("view",{class:"search"},[e.createVNode(n,{class:"uni-mt-10",radius:"100",placeholder:"请输入倾听师姓名",clearButton:"auto",cancelButton:"none",onConfirm:d})]),e.createElementVNode("view",{class:"contact"},[e.createElementVNode("image",{src:pe}),e.createElementVNode("text",null,"客服")]),e.createElementVNode("view",{class:"contact share"},[e.createElementVNode("image",{src:ge}),e.createElementVNode("text",null,"分享")])],2),e.createElementVNode("view",{class:"confide-top"},[e.createElementVNode("view",{class:"order-content"},[e.createElementVNode("view",{class:"text"},[e.createElementVNode("view",{class:"first-msg"},[e.createElementVNode("text",{class:"item1"},"无需预约"),e.createElementVNode("text",{class:"item2"},"马上连线")]),e.createElementVNode("view",{class:"second-msg"},"倾听热线全天24小时陪伴着你")]),e.createElementVNode("view",{class:"order-image"},[e.createElementVNode("image",{src:"/static/confide/people.png",class:"img"})])])]),e.createElementVNode("view",{class:"filter-box"},[e.createElementVNode("view",{class:"filter-box-2"},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(50,(i=>e.createElementVNode("view",{class:"filter-box-2-item",key:t.index},[e.createElementVNode("image",{src:"/static/confide/iocn-1.png",class:"img"}),e.createElementVNode("text",{class:"txt"},"情感陪伴")]))),64))]),e.createElementVNode("view",{class:"filter-box-2 server-m"},[e.createElementVNode("view",{class:"filter-box-2-item-p red"},[e.createElementVNode("view",{class:"p-title"},"优惠券"),e.createElementVNode("view",{class:"p-txt"},"先到先得"),e.createElementVNode("image",{src:"/static/confide/red.png",class:"logo"})]),e.createElementVNode("view",{class:"filter-box-2-item-p yellow"},[e.createElementVNode("view",{class:"p-title"},"套餐折扣"),e.createElementVNode("view",{class:"p-txt"},"最低8折"),e.createElementVNode("image",{src:"/static/confide/yellow.png",class:"logo"})]),e.createElementVNode("view",{class:"filter-box-2-item-p blue"},[e.createElementVNode("view",{class:"p-title"},"文字倾诉"),e.createElementVNode("view",{class:"p-txt"},"一对一私信"),e.createElementVNode("image",{src:"/static/confide/blue.png",class:"logo"})]),e.createElementVNode("view",{class:"filter-box-2-item-p green"},[e.createElementVNode("view",{class:"p-title"},"语音倾诉"),e.createElementVNode("view",{class:"p-txt"},"面对面"),e.createElementVNode("image",{src:"/static/confide/green.png",class:"logo"})])]),e.createElementVNode("view",{class:e.normalizeClass(r.value>200?"fixedFilter":"")},[e.createElementVNode("view",{class:"filter-box-1 filter-m"},[e.createElementVNode("view",{class:"filter-box-1-item"},[e.createTextVNode("倾听方向"),e.createVNode(a,{type:"down",size:"12",class:"icon"})]),e.createElementVNode("view",{class:"filter-box-1-item"},[e.createTextVNode("价格"),e.createVNode(a,{type:"down",size:"12",class:"icon"})]),e.createElementVNode("view",{class:"filter-box-1-item"},[e.createTextVNode("筛选 "),e.createElementVNode("image",{src:ye,class:"filter icon"})]),e.createElementVNode("view",{class:"filter-box-1-item"},[e.createElementVNode("image",{src:fe,class:"order"})])]),e.createElementVNode("view",{class:"filter-box-2 item-m"},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(50,(t=>e.createElementVNode("view",{class:"filter-box-2-item-txt"},[e.createElementVNode("text",{class:"txt"},"情感咨询")]))),64))])],2)]),e.createElementVNode("view",{class:"doctor-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.list,((t,i)=>(e.openBlock(),e.createElementBlock("view",{class:"doctor-item",key:i,onClick:e=>(e=>{uni.navigateTo({url:"/pages/confide/detail?id="+e.id})})(t)},[e.createElementVNode("view",{class:"doctor-auture"},[e.createElementVNode("image",{src:ve})]),e.createElementVNode("view",{class:"doctor-info"},[e.createElementVNode("view",{class:"doctor-info-1"},[e.createElementVNode("view",{class:"name"},e.toDisplayString(t.consultantName),1)]),e.createElementVNode("view",{class:"doctor-info-1"},[e.createElementVNode("view",{class:"info"},[e.createElementVNode("text",{class:"age item"},"80后"),e.createElementVNode("text",{class:"line"}),e.createElementVNode("text",{class:"edu item"},e.toDisplayString(t.education),1),e.createElementVNode("text",{class:"line"}),e.createElementVNode("text",{class:"star item"},e.toDisplayString(t.constellation),1)])]),e.createElementVNode("view",{class:"doctor-info-1"},[e.createElementVNode("view",{class:"job"},e.toDisplayString(t.major),1)]),e.createElementVNode("view",{class:"doctor-info-1"},[e.createElementVNode("view",{class:"exprise"},[e.createElementVNode("text",null,"5000"),e.createTextVNode(" 服务人次 "),e.createElementVNode("text",null,"4500+"),e.createTextVNode(" 小时经验"),e.createElementVNode("text",null,e.toDisplayString(t.evaluateNum),1),e.createTextVNode("评分 ")])]),e.createElementVNode("view",{class:"doctor-info-1"},[e.createElementVNode("view",{class:"point-list"},[e.createElementVNode("view",{class:"point-item"},"自我探索"),e.createElementVNode("view",{class:"point-item"},"压力管理"),e.createElementVNode("view",{class:"point-item"},"婚姻家庭")])]),e.createElementVNode("view",{class:"doctor-info-1"},[e.createElementVNode("view",{class:"price"},[e.createElementVNode("text",{class:"unit"},"¥"),e.createTextVNode(e.toDisplayString(t.consultantPrice),1)]),e.createTextVNode("、 "),e.createElementVNode("view",{class:"address"},[e.createElementVNode("image",{src:Ee}),e.createElementVNode("text",null,e.toDisplayString(t.address),1)])])]),e.createElementVNode("view",{class:"server-box"},[e.createElementVNode("view",{class:"server-status"},"服务中")])],8,["onClick"])))),128))])],32)])}}},be=X(ke,[["__scopeId","data-v-bf7fb567"]]);const Ce=e=>"number"==typeof e?e+"px":e;const Se=X({name:"UniNavBar",components:{statusBar:X({name:"UniStatusBar",data:()=>({statusBarHeight:uni.getSystemInfoSync().statusBarHeight+"px"})},[["render",function(t,i,s,n,a,r){return e.openBlock(),e.createElementBlock("view",{style:e.normalizeStyle({height:a.statusBarHeight}),class:"uni-status-bar"},[e.renderSlot(t.$slots,"default",{},void 0,!0)],4)}],["__scopeId","data-v-0ec02cab"]])},emits:["clickLeft","clickRight","clickTitle"],props:{dark:{type:Boolean,default:!1},title:{type:String,default:""},leftText:{type:String,default:""},rightText:{type:String,default:""},leftIcon:{type:String,default:""},rightIcon:{type:String,default:""},fixed:{type:[Boolean,String],default:!1},color:{type:String,default:""},backgroundColor:{type:String,default:""},statusBar:{type:[Boolean,String],default:!1},shadow:{type:[Boolean,String],default:!1},border:{type:[Boolean,String],default:!0},height:{type:[Number,String],default:44},leftWidth:{type:[Number,String],default:60},rightWidth:{type:[Number,String],default:60},stat:{type:[Boolean,String],default:""}},computed:{themeBgColor(){return this.dark?this.backgroundColor?this.backgroundColor:this.dark?"#333":"#FFF":this.backgroundColor||"#FFF"},themeColor(){return this.dark?this.color?this.color:this.dark?"#fff":"#333":this.color||"#333"},navbarHeight(){return Ce(this.height)},leftIconWidth(){return Ce(this.leftWidth)},rightIconWidth(){return Ce(this.rightWidth)}},mounted(){uni.report&&this.stat&&""!==this.title&&uni.report("title",this.title)},methods:{onClickLeft(){this.$emit("clickLeft")},onClickRight(){this.$emit("clickRight")},onClickTitle(){this.$emit("clickTitle")}}},[["render",function(t,i,n,a,r,o){const l=e.resolveComponent("status-bar"),c=s(e.resolveDynamicComponent("uni-icons"),Q);return e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["uni-navbar",{"uni-dark":n.dark,"uni-nvue-fixed":n.fixed}])},[e.createElementVNode("view",{class:e.normalizeClass(["uni-navbar__content",{"uni-navbar--fixed":n.fixed,"uni-navbar--shadow":n.shadow,"uni-navbar--border":n.border}]),style:e.normalizeStyle({"background-color":o.themeBgColor,"border-bottom-color":o.themeColor})},[n.statusBar?(e.openBlock(),e.createBlock(l,{key:0})):e.createCommentVNode("",!0),e.createElementVNode("view",{style:e.normalizeStyle({color:o.themeColor,backgroundColor:o.themeBgColor,height:o.navbarHeight}),class:"uni-navbar__header"},[e.createElementVNode("view",{onClick:i[0]||(i[0]=(...e)=>o.onClickLeft&&o.onClickLeft(...e)),class:"uni-navbar__header-btns uni-navbar__header-btns-left",style:e.normalizeStyle({width:o.leftIconWidth})},[e.renderSlot(t.$slots,"left",{},(()=>[n.leftIcon.length>0?(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-navbar__content_view"},[e.createVNode(c,{color:o.themeColor,type:n.leftIcon,size:"20"},null,8,["color","type"])])):e.createCommentVNode("",!0),n.leftText.length?(e.openBlock(),e.createElementBlock("view",{key:1,class:e.normalizeClass([{"uni-navbar-btn-icon-left":!n.leftIcon.length>0},"uni-navbar-btn-text"])},[e.createElementVNode("text",{style:e.normalizeStyle({color:o.themeColor,fontSize:"12px"})},e.toDisplayString(n.leftText),5)],2)):e.createCommentVNode("",!0)]),!0)],4),e.createElementVNode("view",{class:"uni-navbar__header-container",onClick:i[1]||(i[1]=(...e)=>o.onClickTitle&&o.onClickTitle(...e))},[e.renderSlot(t.$slots,"default",{},(()=>[n.title.length>0?(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-navbar__header-container-inner"},[e.createElementVNode("text",{class:"uni-nav-bar-text uni-ellipsis-1",style:e.normalizeStyle({color:o.themeColor})},e.toDisplayString(n.title),5)])):e.createCommentVNode("",!0)]),!0)]),e.createElementVNode("view",{onClick:i[2]||(i[2]=(...e)=>o.onClickRight&&o.onClickRight(...e)),class:"uni-navbar__header-btns uni-navbar__header-btns-right",style:e.normalizeStyle({width:o.rightIconWidth})},[e.renderSlot(t.$slots,"right",{},(()=>[n.rightIcon.length?(e.openBlock(),e.createElementBlock("view",{key:0},[e.createVNode(c,{color:o.themeColor,type:n.rightIcon,size:"22"},null,8,["color","type"])])):e.createCommentVNode("",!0),n.rightText.length&&!n.rightIcon.length?(e.openBlock(),e.createElementBlock("view",{key:1,class:"uni-navbar-btn-text"},[e.createElementVNode("text",{class:"uni-nav-bar-right-text",style:e.normalizeStyle({color:o.themeColor})},e.toDisplayString(n.rightText),5)])):e.createCommentVNode("",!0)]),!0)],4)],4)],6),n.fixed?(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-navbar__placeholder"},[n.statusBar?(e.openBlock(),e.createBlock(l,{key:0})):e.createCommentVNode("",!0),e.createElementVNode("view",{class:"uni-navbar__placeholder-view",style:e.normalizeStyle({height:o.navbarHeight})},null,4)])):e.createCommentVNode("",!0)],2)}],["__scopeId","data-v-f8fab7a8"]]);const xe=X({name:"UniSteps",props:{direction:{type:String,default:"row"},activeColor:{type:String,default:"#2979FF"},deactiveColor:{type:String,default:"#B7BDC6"},active:{type:Number,default:0},activeIcon:{type:String,default:"checkbox-filled"},options:{type:Array,default:()=>[]}},data:()=>({heightArr:[]}),mounted(){if("column"===this.direction){let e=this;uni.createSelectorQuery().in(this).selectAll(".uni-steps__column-text").boundingClientRect((t=>{e.heightArr=t.map((e=>e.height+1))})).exec()}}},[["render",function(t,i,n,a,r,o){const l=s(e.resolveDynamicComponent("uni-icons"),Q);return e.openBlock(),e.createElementBlock("view",{class:"uni-steps"},[e.createElementVNode("view",{class:e.normalizeClass(["column"===n.direction?"uni-steps__column":"uni-steps__row"])},[e.createElementVNode("view",{class:e.normalizeClass(["column"===n.direction?"uni-steps__column-text-container":"uni-steps__row-text-container"])},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.options,((t,i)=>(e.openBlock(),e.createElementBlock("view",{key:i,class:e.normalizeClass(["column"===n.direction?"uni-steps__column-text":"uni-steps__row-text"])},[e.createElementVNode("text",{style:e.normalizeStyle({color:i===n.active?n.activeColor:n.deactiveColor}),class:e.normalizeClass(["column"===n.direction?"uni-steps__column-title":"uni-steps__row-title"])},e.toDisplayString(t.title),7),e.createElementVNode("text",{style:e.normalizeStyle({color:n.deactiveColor}),class:e.normalizeClass(["column"===n.direction?"uni-steps__column-desc":"uni-steps__row-desc"])},e.toDisplayString(t.desc),7)],2)))),128))],2),e.createElementVNode("view",{class:e.normalizeClass(["column"===n.direction?"uni-steps__column-container":"uni-steps__row-container"])},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.options,((t,i)=>(e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["column"===n.direction?"uni-steps__column-line-item":"uni-steps__row-line-item"]),key:i,style:e.normalizeStyle({height:"column"===n.direction?r.heightArr[i]+"px":"14px"})},[e.createElementVNode("view",{class:e.normalizeClass(["column"===n.direction?"uni-steps__column-line":"uni-steps__row-line","column"===n.direction?"uni-steps__column-line--before":"uni-steps__row-line--before"]),style:e.normalizeStyle({backgroundColor:i<=n.active&&0!==i?n.activeColor:0===i?"transparent":n.deactiveColor})},null,6),i===n.active?(e.openBlock(),e.createElementBlock("view",{key:0,class:e.normalizeClass(["column"===n.direction?"uni-steps__column-check":"uni-steps__row-check"])},[e.createVNode(l,{color:n.activeColor,type:n.activeIcon,size:"14"},null,8,["color","type"])],2)):(e.openBlock(),e.createElementBlock("view",{key:1,class:e.normalizeClass(["column"===n.direction?"uni-steps__column-circle":"uni-steps__row-circle"]),style:e.normalizeStyle({backgroundColor:i<n.active?n.activeColor:n.deactiveColor})},null,6)),e.createElementVNode("view",{class:e.normalizeClass(["column"===n.direction?"uni-steps__column-line":"uni-steps__row-line","column"===n.direction?"uni-steps__column-line--after":"uni-steps__row-line--after"]),style:e.normalizeStyle({backgroundColor:i<n.active&&i!==n.options.length-1?n.activeColor:i===n.options.length-1?"transparent":n.deactiveColor})},null,6)],6)))),128))],2)],2)])}],["__scopeId","data-v-a02cde39"]]),Ve={name:"UniRate",props:{isFill:{type:[Boolean,String],default:!0},color:{type:String,default:"#ececec"},activeColor:{type:String,default:"#ffca3e"},disabledColor:{type:String,default:"#c0c0c0"},size:{type:[Number,String],default:24},value:{type:[Number,String],default:0},modelValue:{type:[Number,String],default:0},max:{type:[Number,String],default:5},margin:{type:[Number,String],default:0},disabled:{type:[Boolean,String],default:!1},readonly:{type:[Boolean,String],default:!1},allowHalf:{type:[Boolean,String],default:!1},touchable:{type:[Boolean,String],default:!0}},data:()=>({valueSync:"",userMouseFristMove:!0,userRated:!1,userLastRate:1}),watch:{value(e){this.valueSync=Number(e)},modelValue(e){this.valueSync=Number(e)}},computed:{stars(){const e=this.valueSync?this.valueSync:0,t=[],i=Math.floor(e),s=Math.ceil(e);for(let n=0;n<this.max;n++)i>n?t.push({activeWitch:"100%"}):s-1===n?t.push({activeWitch:100*(e-i)+"%"}):t.push({activeWitch:"0"});return t},marginNumber(){return Number(this.margin)}},created(){this.valueSync=Number(this.value||this.modelValue),this._rateBoxLeft=0,this._oldValue=null},mounted(){setTimeout((()=>{this._getSize()}),100)},methods:{touchstart(e){if(this.readonly||this.disabled)return;const{clientX:t,screenX:i}=e.changedTouches[0];this._getRateCount(t||i)},touchmove(e){if(this.readonly||this.disabled||!this.touchable)return;const{clientX:t,screenX:i}=e.changedTouches[0];this._getRateCount(t||i)},mousedown(e){},mousemove(e){},mouseleave(e){},_getRateCount(e){this._getSize();const t=Number(this.size);if(isNaN(t))return new Error("size 属性只能设置为数字");const i=e-this._rateBoxLeft;let s=parseInt(i/(t+this.marginNumber));s=s<0?0:s,s=s>this.max?this.max:s;const n=parseInt(i-(t+this.marginNumber)*s);let a=0;(this._oldValue!==s||this.PC)&&(this._oldValue=s,a=this.allowHalf?n>t/2?s+1:s+.5:s+1,a=Math.max(.5,Math.min(a,this.max)),this.valueSync=a,this._onChange())},_onChange(){this.$emit("input",this.valueSync),this.$emit("update:modelValue",this.valueSync),this.$emit("change",{value:this.valueSync})},_getSize(){uni.createSelectorQuery().in(this).select(".uni-rate").boundingClientRect().exec((e=>{e&&(this._rateBoxLeft=e[0].left)}))}}};const Te=X(Ve,[["render",function(t,i,n,a,r,o){const l=s(e.resolveDynamicComponent("uni-icons"),Q);return e.openBlock(),e.createElementBlock("view",null,[e.createElementVNode("view",{ref:"uni-rate",class:"uni-rate"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.stars,((t,s)=>(e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["uni-rate__icon",{"uni-cursor-not-allowed":n.disabled}]),style:e.normalizeStyle({"margin-right":o.marginNumber+"px"}),key:s,onTouchstart:i[0]||(i[0]=e.withModifiers(((...e)=>o.touchstart&&o.touchstart(...e)),["stop"])),onTouchmove:i[1]||(i[1]=e.withModifiers(((...e)=>o.touchmove&&o.touchmove(...e)),["stop"])),onMousedown:i[2]||(i[2]=e.withModifiers(((...e)=>o.mousedown&&o.mousedown(...e)),["stop"])),onMousemove:i[3]||(i[3]=e.withModifiers(((...e)=>o.mousemove&&o.mousemove(...e)),["stop"])),onMouseleave:i[4]||(i[4]=(...e)=>o.mouseleave&&o.mouseleave(...e))},[e.createVNode(l,{color:n.color,size:n.size,type:n.isFill?"star-filled":"star"},null,8,["color","size","type"]),e.createElementVNode("view",{style:e.normalizeStyle({width:t.activeWitch}),class:"uni-rate__icon-on"},[e.createVNode(l,{color:n.disabled?n.disabledColor:n.activeColor,size:n.size,type:"star-filled"},null,8,["color","size"])],4)],38)))),128))],512)])}],["__scopeId","data-v-1fbe22c2"]]),Ae="/static/common/back_circle.png",_e="/static/common/share_circle.png",Ie="/static/my/profile.png";
/*!
    * vue-router v4.3.0
    * (c) 2024 Eduardo San Martin Morote
    * @license MIT
    */
var De,Be,Re,Me,Pe,Oe;(Be=De||(De={})).pop="pop",Be.push="push",(Me=Re||(Re={})).back="back",Me.forward="forward",Me.unknown="",(Oe=Pe||(Pe={}))[Oe.aborted=4]="aborted",Oe[Oe.cancelled=8]="cancelled",Oe[Oe.duplicated=16]="duplicated";const Le=Symbol("");function Fe(){return e.inject(Le)}const Ue=X({data:()=>({isHide:!0,textHeight:0,lineHeight:1,placeholder:""}),props:{line:{type:[Number,String],default:1},dt:{type:[String],default:""},enableButton:{type:Boolean,default:!0},expandText:{type:String,default:"展开"},foldHint:{type:String,default:"收起"}},watch:{dt(){let e=this;setTimeout((()=>{uni.createSelectorQuery().in(e).select(".content").boundingClientRect((t=>{e.textHeight=t.height})).exec()}),100)}},mounted(){if(this.enableButton){let e=uni.createSelectorQuery().in(this);e.select(".content").boundingClientRect((e=>{this.textHeight=e.height})).exec(),e.select(".placeholder").boundingClientRect((e=>{this.lineHeight=e.height})).exec()}this.placeholder=""},computed:{lines(){return this.enableButton?Math.floor(this.textHeight>0&&this.lineHeight>0?this.textHeight/this.lineHeight:0):this.line}}},[["render",function(t,i,s,n,a,r){return e.openBlock(),e.createElementBlock("view",null,[a.isHide?(e.openBlock(),e.createElementBlock("view",{key:0,style:{position:"relative"}},[e.createElementVNode("view",{class:"dt-content",style:e.normalizeStyle("-webkit-line-clamp:"+s.line)},[e.createElementVNode("text",{class:"content"},[e.renderSlot(t.$slots,"default",{},(()=>[e.createTextVNode(e.toDisplayString(s.dt?s.dt:""),1)]),!0)])],4),s.enableButton&&r.lines>s.line?(e.openBlock(),e.createElementBlock("view",{key:0,class:"button-show",onClick:i[0]||(i[0]=e=>a.isHide=!1)},[e.createElementVNode("text",{style:{color:"#35CA95"}},e.toDisplayString(s.expandText),1)])):e.createCommentVNode("",!0)])):(e.openBlock(),e.createElementBlock("view",{key:1},[e.createElementVNode("view",null,[e.createElementVNode("text",{class:"content"},[e.renderSlot(t.$slots,"default",{},(()=>[e.createTextVNode(e.toDisplayString(s.dt?s.dt:""),1)]),!0)])]),s.foldHint?(e.openBlock(),e.createElementBlock("view",{key:0,class:"fold-hint"},[e.createElementVNode("view",{onClick:i[1]||(i[1]=e=>a.isHide=!0)},e.toDisplayString(s.foldHint),1)])):e.createCommentVNode("",!0)])),e.createElementVNode("view",null,[e.createElementVNode("text",{class:"placeholder"},e.toDisplayString(a.placeholder),1)])])}],["__scopeId","data-v-c6b8a1f8"]]),ze={__name:"detail",setup(t){e.useCssVars((e=>({"2366d724":a.value})));const n=W(),a=e.ref(n.statusBarHeight+"px"),r=e.ref(0),l=e.ref(0);e.ref(0);const c=e.ref(0),d=e.ref(null),u=e.ref(null),m=e.ref(null),h=e.ref(null),p=e.ref(null),g=e.ref(!1);e.ref(null),e.ref("#tab-1");const y=e.ref(),f=e.ref(null);o((e=>{C(e.id)})),Fe(),e.onMounted((()=>{e.nextTick((()=>{uni.createSelectorQuery().in(this).select(".detail-item-line-5").boundingClientRect((e=>{d.value=e})).exec(),uni.createSelectorQuery().in(this).select(".tab5").boundingClientRect((e=>{f.value=e})).exec(),uni.createSelectorQuery().in(this).select(".tab6").boundingClientRect((e=>{u.value=e})).exec(),uni.createSelectorQuery().in(this).select(".tab7").boundingClientRect((e=>{m.value=e})).exec(),uni.createSelectorQuery().in(this).select(".tab8").boundingClientRect((e=>{h.value=e})).exec(),uni.createSelectorQuery().in(this).select(".tab9").boundingClientRect((e=>{p.value=e})).exec()}))}));const v=()=>{uni.navigateBack({delta:1})},E=e=>{r.value=e.detail.scrollTop,g.value=e.detail.scrollTop>=d.value.top-120,r.value<u.value.top-n.statusBarHeight-184?l.value=0:r.value>u.value.top-n.statusBarHeight-184&&r.value<m.value.top-n.statusBarHeight-184?l.value=1:r.value>m.value.top-n.statusBarHeight-184&&r.value<h.value.top-n.statusBarHeight-184?l.value=2:r.value>h.value.top-n.statusBarHeight-184&&r.value<p.value.top-n.statusBarHeight-154?l.value=3:l.value=4},w=e.ref([{label:"服务",id:"tab-1",class:"tab6"},{label:"介绍",id:"tab-2",class:"tab7"},{label:"经历",id:"tab-3",class:"tab8"},{label:"擅长",id:"tab-4",class:"tab9"},{label:"评价(24)",id:"tab-5",class:"tab10"}]),N=e.ref([{title:"2024.10-2024.12",desc:"国家二级咨询师，注册系统咨询师"},{title:"2024.10-2024.12",desc:"国家二级咨询师，注册系统咨询师"},{title:"2024.10-2024.12",desc:"国家二级咨询师，注册系统咨询师"},{title:"2024.10-2024.12",desc:"国家二级咨询师，注册系统咨询师"}]);e.ref([{month:5,day:11,week:"周一",active:!0},{month:5,day:12,week:"周二",active:!1},{month:5,day:13,week:"周三",active:!0},{month:5,day:14,week:"周四",active:!1},{month:5,day:15,week:"周五",active:!0},{month:5,day:16,week:"周六",active:!1},{month:5,day:17,week:"周日",active:!0}]);const k=e.ref(N.value.length),b=()=>{uni.navigateTo({url:"/pages/evaluate/evaluate"})},C=async e=>{let t=await Ne({id:e});y.value=t.data,i("log","at pages/confide/detail.vue:476",t)};return(t,a)=>{const o=s(e.resolveDynamicComponent("uni-icons"),Q),d=s(e.resolveDynamicComponent("uni-nav-bar"),Se),C=s(e.resolveDynamicComponent("uni-steps"),xe),S=s(e.resolveDynamicComponent("uni-rate"),Te);return e.openBlock(),e.createElementBlock("view",{class:"consult-detail-box"},[e.createElementVNode("scroll-view",{"scroll-y":"",class:"scroll-content",onScroll:E,"scroll-top":c.value,"show-scrollbar":!1},[e.createVNode(d,{backgroundColor:r.value>15?"#fff":"transparent",border:!1,title:r.value>15?y.value.consultantName:"",class:"header-bar",statusBar:!0,fixed:""},{left:e.withCtx((()=>[e.createElementVNode("view",{class:"right"},[r.value>15?(e.openBlock(),e.createBlock(o,{key:0,type:"left",size:"24",onClick:v})):(e.openBlock(),e.createElementBlock("image",{key:1,onClick:v,src:Ae,style:{width:"56rpx",height:"56rpx"}}))])])),right:e.withCtx((()=>[e.createElementVNode("view",{class:"right"},[r.value>15?(e.openBlock(),e.createElementBlock("image",{key:0,src:ge,style:{width:"40rpx",height:"40rpx"}})):(e.openBlock(),e.createElementBlock("image",{key:1,src:_e,style:{width:"56rpx",height:"56rpx"}}))])])),_:1},8,["backgroundColor","title"]),e.createElementVNode("view",{class:"consult-detail-content"},[e.createElementVNode("view",{class:"swiper-content"},[e.createElementVNode("view",{class:"uni-margin-wrap"},[e.createElementVNode("swiper",{class:"swiper",circular:"","indicator-dots":!0,autoplay:!0,interval:5e3,duration:500},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(6,(t=>e.createElementVNode("swiper-item",{key:t,class:"swiper-item"}))),64))])])]),e.createElementVNode("view",{class:"consult-detail-info"},[e.createElementVNode("view",{class:"detail-item-line-1"},[e.createElementVNode("view",{class:"name"},[e.createElementVNode("text",{class:"name-a"},e.toDisplayString(y.value.consultantName),1),e.createElementVNode("text",{class:"name-b"},e.toDisplayString(y.value.major),1)]),e.createElementVNode("view",{class:"money"},[e.createElementVNode("image",{src:"/static/common/yellow-follow.png",class:"img"}),e.createElementVNode("text",{class:"txt"},"关注")])]),e.createElementVNode("view",{class:"detail-item-line-2"},[e.createElementVNode("text",null,e.toDisplayString(y.value.address)+" | "+e.toDisplayString(y.value.education)+" | 80后"+e.toDisplayString(y.value.age)+" | "+e.toDisplayString(y.value.constellation),1)]),e.createElementVNode("view",{class:"detail-item-line-3"}," 倾听师寄语倾听师寄语倾听师寄语倾听师寄语。 "),e.createElementVNode("view",{class:"detail-item-line-4"},[e.createElementVNode("view",{class:"content"},[e.createElementVNode("view",{class:"list"},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(10,(t=>e.createElementVNode("view",{class:"item",key:t},[e.createElementVNode("view",null,[e.createElementVNode("text",{class:"num"},"3"),e.createElementVNode("text",{class:"unit"},"年")]),e.createElementVNode("view",{class:"txt"},"从业年限")]))),64))]),e.createElementVNode("view",{class:"tips"},[e.createElementVNode("image",{src:"/static/common/follwer-yellow.png"}),e.createElementVNode("text",{class:"txt"},"服务经验")])])]),e.createElementVNode("view",{class:e.normalizeClass(["detail-item-line-5",g.value?"tabsFixed":""]),id:"tabs"},[e.createElementVNode("view",{class:"tabs"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(w.value,((t,s)=>(e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["tab-item",l.value==s?"active":""]),key:s,onClick:e=>((e,t)=>{i("log","at pages/confide/detail.vue:370",e),l.value!=t&&(l.value=t,"tab-1"==e.id?c.value=f.value.top-n.statusBarHeight-174:"tab-2"==e.id?c.value=u.value.top-n.statusBarHeight-174:"tab-3"==e.id?c.value=m.value.top-n.statusBarHeight-174:"tab-4"==e.id?c.value=h.value.top-n.statusBarHeight-174:"tab-5"==e.id&&(c.value=p.value.top-n.statusBarHeight-144))})(t,s)},e.toDisplayString(t.label),11,["onClick"])))),128))])],2),e.createElementVNode("view",{class:"detail-item-line-6 tab5",id:"tab-1"},[e.createElementVNode("view",{class:"tab5-content"},[e.createElementVNode("view",{class:"info"},[e.createElementVNode("view",{class:"voice-box"},[e.createElementVNode("view",{class:"voice-info"},[e.createElementVNode("view",{class:"title"},[e.createTextVNode("语音咨询"),e.createElementVNode("text",{class:"money"},"250"),e.createElementVNode("text",{class:"unit"},"元/50分钟")]),e.createElementVNode("view",{class:"txt"},"仅提供语音消息，咨询效果有一定影响")]),e.createElementVNode("view",{class:"voice-img"},[e.createElementVNode("image",{src:"/static/common/voice.png",class:"img"})])]),e.createElementVNode("view",{class:"voice-box text-box"},[e.createElementVNode("view",{class:"voice-info"},[e.createElementVNode("view",{class:"title"},[e.createTextVNode("文字咨询"),e.createElementVNode("text",{class:"money"},"250"),e.createElementVNode("text",{class:"unit"},"元/50分钟")]),e.createElementVNode("view",{class:"txt"},"擅长个人成长、情绪管理")]),e.createElementVNode("view",{class:"voice-img"},[e.createElementVNode("image",{src:"/static/common/message.png",class:"img"})])]),e.createElementVNode("view",{class:"menu-box"},[e.createTextVNode("倾诉套餐"),e.createElementVNode("text",{class:"txt"},"隐私保护·效果可见·99%好评率")]),e.createElementVNode("view",{class:"voice-box voice-text-box"},[e.createElementVNode("view",{class:"voice-info"},[e.createElementVNode("view",{class:"title"},[e.createTextVNode("语音+文字咨询"),e.createElementVNode("text",{class:"money"},"250"),e.createElementVNode("text",{class:"unit"},"元/50分钟")]),e.createElementVNode("view",{class:"txt"},"有效期：20天")]),e.createElementVNode("view",{class:"voice-img"},[e.createElementVNode("image",{src:"/static/common/voice-txt.png",class:"img"})])])])])]),e.createElementVNode("view",{class:"detail-item-line-6 tab6",id:"tab-2"},[e.createElementVNode("view",{class:"content"},[e.createElementVNode("view",{class:"title"},"个人介绍"),e.createElementVNode("view",{class:"info"}," 二级心理咨询师，教师，巨蟹座。擅长帮助来访者抚平创伤，树立自信，促进个人成长二级心理咨询师，教师，巨蟹座。擅长帮助来访者抚平创伤，树立自信，促进个人成长进个人成长进个人成长进个人成长进个.成长进个 擅长帮助来访者抚平创伤擅长帮助来访者抚平创伤擅长帮助来访者抚平创伤擅长帮助来访者抚平创伤擅长帮助来访者抚平创伤擅长帮助来访者抚平创伤，树立自信，促进个人成长进个人成长进个人成长进个人成长进个.成长进个 擅长帮助来访者抚平创帮助来访者抚平创伤擅长帮助来访者抚平创伤擅长帮助来访者抚平创伤擅长帮助来访者抚平创伤，树立自信，促进个人成长进个人成长进个人成长进个人成长进个.成长进个 擅长帮助来访者抚平创伤，树立自信二级心理咨询师，教师，巨蟹座。擅长帮助来访者抚平创伤，树立自信，促进个人成长二级心理咨询师，教师，巨蟹座。擅长帮助来访者抚平创伤，树立自信，促进个人成长进个人成长进个人成长进个人成长进个.成长进个 擅长帮助来访者抚平创伤擅长帮助来访者抚平创伤擅长帮助来访者抚平创伤擅长帮助来访者抚平创伤擅长帮助来访者抚平创伤擅长帮助来访者抚平创伤，树立自信，促进个人成长进个人成长进个人成长进个人成长进个.成长进个 擅长帮助来访者抚平创帮助来访者抚平创伤擅长帮助来访者抚平创伤擅长帮助来访者抚平创伤擅长帮助来访者抚平创伤，树立自信，促进个人成长进个人成长进个人成长进个人成长进个.成长进个 擅长帮助来访者抚平创伤，树立自信二级心理咨询师，教师，巨蟹座。擅长帮助来访者抚平创伤，树立自信，促进个人成长二级心理咨询师，教师，巨蟹座。擅长帮助来访者抚平创伤，树立自信，促进个人成长进个人成长进个人成长进个人成长进个.成长进个 擅长帮助来访者抚平创伤擅长帮助来访者抚平创伤擅长帮助来访者抚平创伤擅长帮助来访者抚平创伤擅长帮助来访者抚平创伤擅长帮助来访者抚平创伤，树立自信，促进个人成长进个人成长进个人成长进个人成长进个.成长进个 擅长帮助来访者抚平创帮助来访者抚平创伤擅长帮助来访者抚平创伤擅长帮助来访者抚平创伤擅长帮助来访者抚平创伤，树立自信，促进个人成长进个人成长进个人成长进个人成长进个.成长进个 擅长帮助来访者抚平创伤，树立自信二级心理咨询师，教师，巨蟹座。擅长帮助来访者抚平创伤，树立自信，促进个人成长二级心理咨询师，教师，巨蟹座。擅长帮助来访者抚平创伤，树立自信，促进个人成长进个人成长进个人成长进个人成长进个.成长进个 擅长帮助来访者抚平创伤擅长帮助来访者抚平创伤擅长帮助来访者抚平创伤擅长帮助来访者抚平创伤擅长帮助来访者抚平创伤擅长帮助来访者抚平创伤，树立自信，促进个人成长进个人成长进个人成长进个人成长进个.成长进个 擅长帮助来访者抚平创帮助来访者抚平创伤擅长帮助来访者抚平创伤擅长帮助来访者抚平创伤擅长帮助来访者抚平创伤，树立自信，促进个人成长进个人成长进个人成长进个人成长进个.成长进个 擅长帮助来访者抚平创伤，树立自信二级心理咨询师，教师，巨蟹座。擅长帮助来访者抚平创伤，树立自信，促进个人成长二级心理咨询师，教师，巨蟹座。擅长帮助来访者抚平创伤，树立自信，促进个人成长进个人成长进个人成长进个人成长进个.成长进个 擅长帮助来访者抚平创伤擅长帮助来访者抚平创伤擅长帮助来访者抚平创伤擅长帮助来访者抚平创伤擅长帮助来访者抚平创伤擅长帮助来访者抚平创伤，树立自信，促进个人成长进个人成长进个人成长进个人成长进个.成长进个 擅长帮助来访者抚平创帮助来访者抚平创伤擅长帮助来访者抚平创伤擅长帮助来访者抚平创伤擅长帮助来访者抚平创伤，树立自信，促进个人成长进个人成长进个人成长进个人成长进个.成长进个 擅长帮助来访者抚平创伤，树立自信二级心理咨询师，教师，巨蟹座。擅长帮助来访者抚平创伤，树立自信，促进个人成长二级心理咨询师，教师，巨蟹座。擅长帮助来访者抚平创伤，树立自信，促进个人成长进个人成长进个人成长进个人成长进个.成长进个 擅长帮助来访者抚平创伤擅长帮助来访者抚平创伤擅长帮助来访者抚平创伤擅长帮助来访者抚平创伤擅长帮助来访者抚平创伤擅长帮助来访者抚平创伤，树立自信，促进个人成长进个人成长进个人成长进个人成长进个.成长进个 擅长帮助来访者抚平创帮助来访者抚平创伤擅长帮助来访者抚平创伤擅长帮助来访者抚平创伤擅长帮助来访者抚平创伤，树立自信，促进个人成长进个人成长进个人成长进个人成长进个.成长进个 擅长帮助来访者抚平创伤，树立自信二级心理咨询师，教师，巨蟹座。擅长帮助来访者抚平创伤，树立自信，促进个人成长二级心理咨询师，教师，巨蟹座。擅长帮助来访者抚平创伤，树立自信，促进个人成长进个人成长进个人成长进个人成长进个.成长进个 擅长帮助来访者抚平创伤擅长帮助来访者抚平创伤擅长帮助来访者抚平创伤擅长帮助来访者抚平创伤擅长帮助来访者抚平创伤擅长帮助来访者抚平创伤，树立自信，促进个人成长进个人成长进个人成长进个人成长进个.成长进个 擅长帮助来访者抚平创帮助来访者抚平创伤擅长帮助来访者抚平创伤擅长帮助来访者抚平创伤擅长帮助来访者抚平创伤，树立自信，促进个人成长进个人成长进个人成长进个人成长进个.成长进个 擅长帮助来访者抚平创伤，树立自信二级心理咨询师，教师，巨蟹座。擅长帮助来访者抚平创伤，树立自信，促进个人成长二级心理咨询师，教师，巨蟹座。擅长帮助来访者抚平创伤，树立自信，促进个人成长进个人成长进个人成长进个人成长进个.成长进个 擅长帮助来访者抚平创伤擅长帮助来访者抚平创伤擅长帮助来访者抚平创伤擅长帮助来访者抚平创伤擅长帮助来访者抚平创伤擅长帮助来访者抚平创伤，树立自信，促进个人成长进个人成长进个人成长进个人成长进个.成长进个 擅长帮助来访者抚平创帮助来访者抚平创伤擅长帮助来访者抚平创伤擅长帮助来访者抚平创伤擅长帮助来访者抚平创伤，树立自信，促进个人成长进个人成长进个人成长进个人成长进个.成长进个 擅长帮助来访者抚平创伤，树立自信二级心理咨询师，教师，巨蟹座。擅长帮助来访者抚平创伤，树立自信，促进个人成长二级心理咨询师，教师，巨蟹座。擅长帮助来访者抚平创伤，树立自信，促进个人成长进个人成长进个人成长进个人成长进个.成长进个 擅长帮助来访者抚平创伤擅长帮助来访者抚平创伤擅长帮助来访者抚平创伤擅长帮助来访者抚平创伤擅长帮助来访者抚平创伤擅长帮助来访者抚平创伤，树立自信，促进个人成长进个人成长进个人成长进个人成长进个.成长进个 擅长帮助来访者抚平创帮助来访者抚平创伤擅长帮助来访者抚平创伤擅长帮助来访者抚平创伤擅长帮助来访者抚平创伤，树立自信，促进个人成长进个人成长进个人成长进个人成长进个.成长进个 擅长帮助来访者抚平创伤，树立自信")])]),e.createElementVNode("view",{class:"detail-item-line-6 detail-item-line-8 tab7",id:"tab-3"},[e.createElementVNode("view",{class:"content"},[e.createElementVNode("view",{class:"info"},[e.createElementVNode("view",{class:"certificate-detail"},[e.createElementVNode("view",{class:"tag"},"资质"),e.createElementVNode("view",{class:"tag-info"},[e.createElementVNode("view",{class:"tag-title"},"国家二级咨询师"),e.createElementVNode("view",{class:"certificate-info"},[e.createElementVNode("view",null,"发证机构：国家心理培训"),e.createElementVNode("view",null,"发证时间：2025-02-05 "),e.createElementVNode("view",null,"证书编号：45478121548151548415125")])])]),e.createElementVNode("view",{class:"eduication-detail"},[e.createElementVNode("view",{class:"tag"},"学历"),e.createElementVNode("view",{class:"tag-info"},[e.createElementVNode("view",{class:"tag-title"},"本科"),e.createElementVNode("view",{class:"eduication-info"},[e.createElementVNode("view"),e.createElementVNode("view",null,"发证时间：2025-02-05 "),e.createElementVNode("view",null,"证书编号：45478121548151548415125")])])]),e.createElementVNode("view",{class:"step-detail"},[e.createElementVNode("view",{class:"training"},[e.createElementVNode("view",{class:"training-title"},"伦理培训"),e.createElementVNode("view",{class:"training-timer"},"2项培训，累计40小时")]),e.createElementVNode("view",{class:"step-box"},[e.createVNode(C,{options:N.value,"active-color":"#EB9516",active:k.value,direction:"column"},null,8,["options","active"])])])])])]),e.createElementVNode("view",{class:"detail-item-line-6 detail-item-line-7 tab8",id:"tab-4"},[e.createElementVNode("view",{class:"content"},[e.createElementVNode("view",{class:"title"},"擅长领域"),e.createElementVNode("view",{class:"info"},[e.createElementVNode("view",{class:"detail"},[e.createElementVNode("view",{class:"detail-title"},"人际交往"),e.createElementVNode("view",{class:"detail-content"},"沟通不畅、社交恐惧、社交技巧、人际冲突、不合群、 人际边界、社会适应难、信任危机、设有关系")])]),e.createElementVNode("view",{class:"title"},"擅长疗法"),e.createElementVNode("view",{class:"tags"},[e.createElementVNode("text",{class:"tag-item"},"沙盘疗法"),e.createElementVNode("text",{class:"tag-item"},"心理动力取向"),e.createElementVNode("text",{class:"tag-item"},"心理动力取向")])])]),e.createElementVNode("view",{class:"detail-item-line-6 detail-item-line-9 tab9",id:"tab-5"},[e.createElementVNode("view",{class:"content"},[e.createElementVNode("view",{class:"title"},[e.createElementVNode("view",{class:"txt"},[e.createTextVNode("评价"),e.createElementVNode("text",null,"(24)")]),e.createElementVNode("view",{class:"more",onClick:b},[e.createTextVNode("查看更多真实评价"),e.createVNode(o,{type:"right",size:"12",color:"rgba(0, 0, 0, 0.5)"})])]),e.createElementVNode("view",{class:"info"},[e.createElementVNode("view",{class:"feel-type-box"},[e.createElementVNode("view",{class:"first"},[e.createElementVNode("view",{class:"percent"},[e.createTextVNode("99"),e.createElementVNode("text",{class:"txt"},"%好评率")])]),e.createElementVNode("view",{class:"second"},[e.createElementVNode("view",{class:"second-item"},[e.createElementVNode("text",{class:"txt-1"},"真实评价"),e.createElementVNode("text",{class:"txt-2"},"788条")]),e.createElementVNode("view",{class:"second-item"},[e.createElementVNode("text",{class:"txt-1"},"用户推荐"),e.createElementVNode("text",{class:"txt-2"},"100%")])])]),e.createElementVNode("view",{class:"comment-list"},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(10,(t=>e.createElementVNode("view",{class:"comment-item",key:10},[e.createElementVNode("view",{class:"user-box"},[e.createElementVNode("view",{class:"user-info"},[e.createElementVNode("image",{src:Ie,class:"img"}),e.createElementVNode("text",{class:"txt"},"匿名")]),e.createElementVNode("view",{class:"star"},[e.createVNode(S,{disabled:!0,disabledColor:"#FFC300",value:5,size:"12"})])]),e.createElementVNode("view",{class:"comment-content"}," 评论内容评论内容评论内容评论内容评论内容评论内容评论内容评论内容评论内容评论内容评论内容评论内容评论内容评论内容评论内容评论内容 "),e.createElementVNode("view",{class:"tags"},[e.createElementVNode("text",{class:"tag-item"},"亲切温暖"),e.createElementVNode("text",{class:"tag-item"},"亲切温暖"),e.createElementVNode("text",{class:"tag-item"},"亲切温暖")]),e.createElementVNode("view",{class:"theme-date"},[e.createElementVNode("view",{class:"theme"},[e.createTextVNode(" 咨询主题:"),e.createElementVNode("text",{class:"txt"},"心理压抑")]),e.createElementVNode("view",{class:"date"},"2025-06-04")])]))),64))])])])])])])],40,["scroll-top"]),e.createElementVNode("view",{class:"footer"},[e.createElementVNode("view",{class:"message"}," 私信ta "),e.createElementVNode("view",{class:"reservation"}," 立即咨询 ")])])}}},Ge=X(ze,[["__scopeId","data-v-42f37eb7"]]);const He=X({name:"u-sticky",emits:["fixed","unfixed"],props:{offsetTop:{type:[Number,String],default:0},index:{type:[Number,String],default:""},enable:{type:Boolean,default:!0},h5NavHeight:{type:[Number,String],default:44},bgColor:{type:String,default:"#ffffff"},zIndex:{type:[Number,String],default:""}},data(){return{fixed:!1,height:"auto",stickyTop:0,elClass:this.$u.guid(),left:0,width:"auto"}},watch:{offsetTop(e){this.initObserver()},enable(e){0==e?(this.fixed=!1,this.disconnectObserver("contentObserver")):this.initObserver()}},computed:{uZIndex(){return this.zIndex?this.zIndex:this.$u.zIndex.sticky}},mounted(){this.initObserver()},methods:{initObserver(){this.enable&&(this.stickyTop=0!=this.offsetTop?uni.upx2px(this.offsetTop):0,this.disconnectObserver("contentObserver"),this.$uGetRect("."+this.elClass).then((e=>{this.height=e.height,this.left=e.left,this.width=e.width,this.$nextTick((()=>{this.observeContent()}))})))},observeContent(){this.disconnectObserver("contentObserver");const e=uni.createIntersectionObserver(this,{thresholds:[.95,.98,1]});e.relativeToViewport({top:-this.stickyTop}),e.observe("."+this.elClass,(e=>{this.enable&&this.setFixed(e.boundingClientRect.top)})),this.contentObserver=e},setFixed(e){const t=e<this.stickyTop;t?this.$emit("fixed",this.index):this.fixed&&this.$emit("unfixed",this.index),this.fixed=t},disconnectObserver(e){const t=this[e];t&&t.disconnect()}},beforeUnmount(){this.disconnectObserver("contentObserver")}},[["render",function(t,i,s,n,a,r){return e.openBlock(),e.createElementBlock("view",{class:""},[e.createElementVNode("view",{class:e.normalizeClass(["u-sticky-wrap",[a.elClass]]),style:e.normalizeStyle({height:a.fixed?a.height+"px":"auto",backgroundColor:s.bgColor})},[e.createElementVNode("view",{class:"u-sticky",style:e.normalizeStyle({position:a.fixed?"fixed":"static",top:a.stickyTop+"px",left:a.left+"px",width:"auto"==a.width?"auto":a.width+"px",zIndex:r.uZIndex})},[e.renderSlot(t.$slots,"default",{},void 0,!0)],4)],6)])}],["__scopeId","data-v-2c46442c"]]),je={__name:"index",setup(t){e.useCssVars((e=>({"01ba1c2a":a.value})));const n=W(),a=e.ref(n.statusBarHeight+"px"),r=e.ref(0),o=e.reactive({listParpms:{current:1,size:10,params:{consultantType:1}},list:[]}),l=e=>{r.value=e.detail.scrollTop},c=()=>{};e.onMounted((()=>{d()}));const d=async()=>{let e=await we(o.listParpms);o.list=e.data.records,i("log","at pages/consult/index.vue:159",e)};return(t,i)=>{const n=s(e.resolveDynamicComponent("uni-search-bar"),he),a=s(e.resolveDynamicComponent("uni-icons"),Q),d=s(e.resolveDynamicComponent("u-sticky"),He);return e.openBlock(),e.createElementBlock("view",{class:"consult-box"},[e.createElementVNode("scroll-view",{"scroll-y":"",onScroll:l,class:"scroll-content","show-scrollbar":!1},[e.createElementVNode("view",{class:e.normalizeClass(["search-content",r.value>15?"activeClass":""])},[e.createElementVNode("view",{class:"search"},[e.createVNode(n,{class:"uni-mt-10",radius:"100",placeholder:"请输入咨询师或问题类型",clearButton:"auto",cancelButton:"none",onConfirm:c})]),e.createElementVNode("view",{class:"contact"},[e.createElementVNode("image",{src:pe}),e.createElementVNode("text",null,"客服")])],2),e.createElementVNode("view",{class:"operate-box"},[e.createElementVNode("view",{class:"operate-content"},[e.createElementVNode("view",{class:"operate-left"},[e.createElementVNode("view",{class:"find-teacher"},[e.createElementVNode("view",{class:"teach-1"},"寻找倾听师"),e.createElementVNode("view",{class:"teach-2"},"为你寻找适合的咨询师"),e.createElementVNode("view",{class:"teach-3"},[e.createTextVNode("了解详情"),e.createVNode(a,{type:"right",size:"10",color:"#35CA95"}),e.createElementVNode("image",{class:"find-teacher-image",src:"/static/consult/find-teacher-image.png"})])])]),e.createElementVNode("view",{class:"operate-right"},[e.createElementVNode("view",{class:"try-consult"},[e.createElementVNode("view",{class:"txt-1"},"试咨询"),e.createElementVNode("view",{class:"txt-2",style:{color:"#F0AE45"}},[e.createTextVNode("即时咨询"),e.createVNode(a,{type:"right",size:"10",color:"#F0AE45"})]),e.createElementVNode("image",{class:"try-consult-image",src:"/static/consult/try-consult-image.png"})]),e.createElementVNode("view",{class:"free-consult"},[e.createElementVNode("view",{class:"txt-1"},"免费咨询"),e.createElementVNode("view",{class:"txt-2",style:{color:"#E8746E"}},[e.createTextVNode("即时咨询"),e.createVNode(a,{type:"right",size:"10",color:"#E8746E"})]),e.createElementVNode("image",{class:"free-consult-image",src:"/static/consult/free-consult-image.png"})])])])]),e.createVNode(d,{"offset-top":"140"},{default:e.withCtx((()=>[e.createElementVNode("view",null,[e.createElementVNode("view",{class:e.normalizeClass(["filter-box",r.value>137?"fixedFilter":""])},[e.createElementVNode("view",{class:"filter-box-1"},[e.createElementVNode("view",{class:"filter-box-1-item"},[e.createTextVNode("困扰"),e.createVNode(a,{type:"down",size:"12",class:"icon"})]),e.createElementVNode("view",{class:"filter-box-1-item"},[e.createTextVNode("城市"),e.createVNode(a,{type:"down",size:"12",class:"icon"})]),e.createElementVNode("view",{class:"filter-box-1-item"},[e.createTextVNode("价格"),e.createVNode(a,{type:"down",size:"12",class:"icon"})]),e.createElementVNode("view",{class:"filter-box-1-item"},[e.createTextVNode("筛选"),e.createElementVNode("image",{src:ye,class:"filter icon"})]),e.createElementVNode("view",{class:"filter-box-1-item"},[e.createElementVNode("image",{src:fe,class:"order"})])]),e.createElementVNode("view",{class:"filter-box-2"},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(100,(t=>e.createElementVNode("text",{class:"filter-box-2-item",key:t},"咨询数优先"))),64))])],2),e.createElementVNode("view",{class:"doctor-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.list,((t,i)=>(e.openBlock(),e.createElementBlock("view",{class:"doctor-item",key:i,onClick:e=>(e=>{uni.navigateTo({url:"/pages/consult/detail?id="+e.id})})(t)},[e.createElementVNode("view",{class:"doctor-auture"},[e.createElementVNode("image",{src:ve})]),e.createElementVNode("view",{class:"doctor-info"},[e.createElementVNode("view",{class:"doctor-info-1"},[e.createElementVNode("view",{class:"name"},e.toDisplayString(t.consultantName),1),e.createElementVNode("view",{class:"date"},"今天20:00可约")]),e.createElementVNode("view",{class:"doctor-info-1"},[e.createElementVNode("view",{class:"job"},e.toDisplayString(t.major),1),e.createElementVNode("view",{class:"address"},[e.createElementVNode("image",{src:Ee}),e.createElementVNode("text",null,e.toDisplayString(t.address),1)])]),e.createElementVNode("view",{class:"doctor-info-1"},[e.createElementVNode("view",{class:"exprise"},[e.createElementVNode("text",null,"1700+"),e.createTextVNode(" 小时经验 "),e.createElementVNode("text",null,e.toDisplayString(t.experience),1),e.createTextVNode(" 从业"),e.createElementVNode("text",null,e.toDisplayString(t.evaluateNum)+"+ ",1),e.createTextVNode("评价 ")])]),e.createElementVNode("view",{class:"doctor-info-1"},[e.createElementVNode("view",{class:"point-list"},[e.createElementVNode("view",{class:"point-item"},"自我探索"),e.createElementVNode("view",{class:"point-item"},"压力管理"),e.createElementVNode("view",{class:"point-item"},"婚姻家庭")])]),e.createElementVNode("view",{class:"doctor-info-1"},[e.createElementVNode("view",{class:"discount"},"5节起立减200元"),e.createElementVNode("view",{class:"price"},[e.createElementVNode("text",{class:"unit"},"¥"),e.createTextVNode(e.toDisplayString(t.consultantPrice),1)])])])],8,["onClick"])))),128))])])])),_:1})],32)])}}},$e=X(je,[["__scopeId","data-v-fa52cce5"]]);class qe{constructor(e,t){this.options=e,this.animation=uni.createAnimation({...e}),this.currentStepAnimates={},this.next=0,this.$=t}_nvuePushAnimates(e,t){let i=this.currentStepAnimates[this.next],s={};if(s=i||{styles:{},config:{}},We.includes(e)){s.styles.transform||(s.styles.transform="");let i="";"rotate"===e&&(i="deg"),s.styles.transform+=`${e}(${t+i}) `}else s.styles[e]=`${t}`;this.currentStepAnimates[this.next]=s}_animateRun(e={},t={}){let i=this.$.$refs.ani.ref;if(i)return new Promise(((s,n)=>{nvueAnimation.transition(i,{styles:e,...t},(e=>{s()}))}))}_nvueNextAnimate(e,t=0,i){let s=e[t];if(s){let{styles:n,config:a}=s;this._animateRun(n,a).then((()=>{t+=1,this._nvueNextAnimate(e,t,i)}))}else this.currentStepAnimates={},"function"==typeof i&&i(),this.isEnd=!0}step(e={}){return this.animation.step(e),this}run(e){this.$.animationData=this.animation.export(),this.$.timer=setTimeout((()=>{"function"==typeof e&&e()}),this.$.durationTime)}}const We=["matrix","matrix3d","rotate","rotate3d","rotateX","rotateY","rotateZ","scale","scale3d","scaleX","scaleY","scaleZ","skew","skewX","skewY","translate","translate3d","translateX","translateY","translateZ"];function Je(e,t){if(t)return clearTimeout(t.timer),new qe(e,t)}We.concat(["opacity","backgroundColor"],["width","height","left","right","top","bottom"]).forEach((e=>{qe.prototype[e]=function(...t){return this.animation[e](...t),this}}));const Ye=X({name:"uniTransition",emits:["click","change"],props:{show:{type:Boolean,default:!1},modeClass:{type:[Array,String],default:()=>"fade"},duration:{type:Number,default:300},styles:{type:Object,default:()=>({})},customClass:{type:String,default:""},onceRender:{type:Boolean,default:!1}},data:()=>({isShow:!1,transform:"",opacity:1,animationData:{},durationTime:300,config:{}}),watch:{show:{handler(e){e?this.open():this.isShow&&this.close()},immediate:!0}},computed:{stylesObject(){let e={...this.styles,"transition-duration":this.duration/1e3+"s"},t="";for(let i in e){t+=this.toLine(i)+":"+e[i]+";"}return t},transformStyles(){return"transform:"+this.transform+";opacity:"+this.opacity+";"+this.stylesObject}},created(){this.config={duration:this.duration,timingFunction:"ease",transformOrigin:"50% 50%",delay:0},this.durationTime=this.duration},methods:{init(e={}){e.duration&&(this.durationTime=e.duration),this.animation=Je(Object.assign(this.config,e),this)},onClick(){this.$emit("click",{detail:this.isShow})},step(e,t={}){if(this.animation){for(let t in e)try{"object"==typeof e[t]?this.animation[t](...e[t]):this.animation[t](e[t])}catch(Lu){i("error","at uni_modules/uni-transition/components/uni-transition/uni-transition.vue:148",`方法 ${t} 不存在`)}return this.animation.step(t),this}},run(e){this.animation&&this.animation.run(e)},open(){clearTimeout(this.timer),this.transform="",this.isShow=!0;let{opacity:e,transform:t}=this.styleInit(!1);void 0!==e&&(this.opacity=e),this.transform=t,this.$nextTick((()=>{this.timer=setTimeout((()=>{this.animation=Je(this.config,this),this.tranfromInit(!1).step(),this.animation.run((()=>{this.transform="",this.opacity=e||1})),this.$emit("change",{detail:this.isShow})}),20)}))},close(e){this.animation&&this.tranfromInit(!0).step().run((()=>{this.isShow=!1,this.animationData=null,this.animation=null;let{opacity:e,transform:t}=this.styleInit(!1);this.opacity=e||1,this.transform=t,this.$emit("change",{detail:this.isShow})}))},styleInit(e){let t={transform:""},i=(e,i)=>{"fade"===i?t.opacity=this.animationType(e)[i]:t.transform+=this.animationType(e)[i]+" "};return"string"==typeof this.modeClass?i(e,this.modeClass):this.modeClass.forEach((t=>{i(e,t)})),t},tranfromInit(e){let t=(e,t)=>{let i=null;"fade"===t?i=e?0:1:(i=e?"-100%":"0","zoom-in"===t&&(i=e?.8:1),"zoom-out"===t&&(i=e?1.2:1),"slide-right"===t&&(i=e?"100%":"0"),"slide-bottom"===t&&(i=e?"100%":"0")),this.animation[this.animationMode()[t]](i)};return"string"==typeof this.modeClass?t(e,this.modeClass):this.modeClass.forEach((i=>{t(e,i)})),this.animation},animationType:e=>({fade:e?0:1,"slide-top":`translateY(${e?"0":"-100%"})`,"slide-right":`translateX(${e?"0":"100%"})`,"slide-bottom":`translateY(${e?"0":"100%"})`,"slide-left":`translateX(${e?"0":"-100%"})`,"zoom-in":`scaleX(${e?1:.8}) scaleY(${e?1:.8})`,"zoom-out":`scaleX(${e?1:1.2}) scaleY(${e?1:1.2})`}),animationMode:()=>({fade:"opacity","slide-top":"translateY","slide-right":"translateX","slide-bottom":"translateY","slide-left":"translateX","zoom-in":"scale","zoom-out":"scale"}),toLine:e=>e.replace(/([A-Z])/g,"-$1").toLowerCase()}},[["render",function(t,i,s,n,a,r){return e.withDirectives((e.openBlock(),e.createElementBlock("view",{ref:"ani",animation:a.animationData,class:e.normalizeClass(s.customClass),style:e.normalizeStyle(r.transformStyles),onClick:i[0]||(i[0]=(...e)=>r.onClick&&r.onClick(...e))},[e.renderSlot(t.$slots,"default")],14,["animation"])),[[e.vShow,a.isShow]])}]]),Xe={name:"uniPopup",components:{},emits:["change","maskClick"],props:{animation:{type:Boolean,default:!0},type:{type:String,default:"center"},isMaskClick:{type:Boolean,default:null},maskClick:{type:Boolean,default:null},backgroundColor:{type:String,default:"none"},safeArea:{type:Boolean,default:!0},maskBackgroundColor:{type:String,default:"rgba(0, 0, 0, 0.4)"},borderRadius:{type:String}},watch:{type:{handler:function(e){this.config[e]&&this[this.config[e]](!0)},immediate:!0},isDesktop:{handler:function(e){this.config[e]&&this[this.config[this.type]](!0)},immediate:!0},maskClick:{handler:function(e){this.mkclick=e},immediate:!0},isMaskClick:{handler:function(e){this.mkclick=e},immediate:!0},showPopup(e){}},data(){return{duration:300,ani:[],showPopup:!1,showTrans:!1,popupWidth:0,popupHeight:0,config:{top:"top",bottom:"bottom",center:"center",left:"left",right:"right",message:"top",dialog:"center",share:"bottom"},maskClass:{position:"fixed",bottom:0,top:0,left:0,right:0,backgroundColor:"rgba(0, 0, 0, 0.4)"},transClass:{backgroundColor:"transparent",borderRadius:this.borderRadius||"0",position:"fixed",left:0,right:0},maskShow:!0,mkclick:!0,popupstyle:"top"}},computed:{getStyles(){let e={backgroundColor:this.bg};return this.borderRadius,e=Object.assign(e,{borderRadius:this.borderRadius}),e},isDesktop(){return this.popupWidth>=500&&this.popupHeight>=500},bg(){return""===this.backgroundColor||"none"===this.backgroundColor?"transparent":this.backgroundColor}},mounted(){(()=>{const{windowWidth:e,windowHeight:t,windowTop:i,safeArea:s,screenHeight:n,safeAreaInsets:a}=uni.getSystemInfoSync();this.popupWidth=e,this.popupHeight=t+(i||0),s&&this.safeArea?this.safeAreaInsets=a.bottom:this.safeAreaInsets=0})()},unmounted(){this.setH5Visible()},activated(){this.setH5Visible(!this.showPopup)},deactivated(){this.setH5Visible(!0)},created(){null===this.isMaskClick&&null===this.maskClick?this.mkclick=!0:this.mkclick=null!==this.isMaskClick?this.isMaskClick:this.maskClick,this.animation?this.duration=300:this.duration=0,this.messageChild=null,this.clearPropagation=!1,this.maskClass.backgroundColor=this.maskBackgroundColor},methods:{setH5Visible(e=!0){},closeMask(){this.maskShow=!1},disableMask(){this.mkclick=!1},clear(e){e.stopPropagation(),this.clearPropagation=!0},open(e){if(this.showPopup)return;e&&-1!==["top","center","bottom","left","right","message","dialog","share"].indexOf(e)||(e=this.type),this.config[e]?(this[this.config[e]](),this.$emit("change",{show:!0,type:e})):i("error","at uni_modules/uni-popup/components/uni-popup/uni-popup.vue:310","缺少类型：",e)},close(e){this.showTrans=!1,this.$emit("change",{show:!1,type:this.type}),clearTimeout(this.timer),this.timer=setTimeout((()=>{this.showPopup=!1}),300)},touchstart(){this.clearPropagation=!1},onTap(){this.clearPropagation?this.clearPropagation=!1:(this.$emit("maskClick"),this.mkclick&&this.close())},top(e){this.popupstyle=this.isDesktop?"fixforpc-top":"top",this.ani=["slide-top"],this.transClass={position:"fixed",left:0,right:0,backgroundColor:this.bg,borderRadius:this.borderRadius||"0"},e||(this.showPopup=!0,this.showTrans=!0,this.$nextTick((()=>{this.showPoptrans(),this.messageChild&&"message"===this.type&&this.messageChild.timerClose()})))},bottom(e){this.popupstyle="bottom",this.ani=["slide-bottom"],this.transClass={position:"fixed",left:0,right:0,bottom:0,paddingBottom:this.safeAreaInsets+"px",backgroundColor:this.bg,borderRadius:this.borderRadius||"0"},e||this.showPoptrans()},center(e){this.popupstyle="center",this.ani=["zoom-out","fade"],this.transClass={position:"fixed",display:"flex",flexDirection:"column",bottom:0,left:0,right:0,top:0,justifyContent:"center",alignItems:"center",borderRadius:this.borderRadius||"0"},e||this.showPoptrans()},left(e){this.popupstyle="left",this.ani=["slide-left"],this.transClass={position:"fixed",left:0,bottom:0,top:0,backgroundColor:this.bg,borderRadius:this.borderRadius||"0",display:"flex",flexDirection:"column"},e||this.showPoptrans()},right(e){this.popupstyle="right",this.ani=["slide-right"],this.transClass={position:"fixed",bottom:0,right:0,top:0,backgroundColor:this.bg,borderRadius:this.borderRadius||"0",display:"flex",flexDirection:"column"},e||this.showPoptrans()},showPoptrans(){this.$nextTick((()=>{this.showPopup=!0,this.showTrans=!0}))}}};const Qe=X(Xe,[["render",function(t,i,n,a,r,o){const l=s(e.resolveDynamicComponent("uni-transition"),Ye);return r.showPopup?(e.openBlock(),e.createElementBlock("view",{key:0,class:e.normalizeClass(["uni-popup",[r.popupstyle,o.isDesktop?"fixforpc-z-index":""]])},[e.createElementVNode("view",{onTouchstart:i[1]||(i[1]=(...e)=>o.touchstart&&o.touchstart(...e))},[r.maskShow?(e.openBlock(),e.createBlock(l,{key:"1",name:"mask","mode-class":"fade",styles:r.maskClass,duration:r.duration,show:r.showTrans,onClick:o.onTap},null,8,["styles","duration","show","onClick"])):e.createCommentVNode("",!0),e.createVNode(l,{key:"2","mode-class":r.ani,name:"content",styles:r.transClass,duration:r.duration,show:r.showTrans,onClick:o.onTap},{default:e.withCtx((()=>[e.createElementVNode("view",{class:e.normalizeClass(["uni-popup__wrapper",[r.popupstyle]]),style:e.normalizeStyle(o.getStyles),onClick:i[0]||(i[0]=(...e)=>o.clear&&o.clear(...e))},[e.renderSlot(t.$slots,"default",{},void 0,!0)],6)])),_:3},8,["mode-class","styles","duration","show","onClick"])],32)],2)):e.createCommentVNode("",!0)}],["__scopeId","data-v-73d3b141"]]),Ze={__name:"detail",setup(t){e.useCssVars((e=>({"76a2064a":a.value})));const n=W(),a=e.ref(n.statusBarHeight+"px"),r=e.ref(0),l=e.ref(0);e.ref(0);const c=e.ref(0),d=e.ref(0),u=e.ref(0),m=e.ref(0),h=e.ref(0),p=e.ref(0),g=e.ref(0),y=e.ref(!1),f=e.ref(null);e.ref("#tab-1");const v=e.ref({consultantName:""});Fe(),o((e=>{V(e.id)})),e.onMounted((t=>{e.nextTick((()=>{uni.createSelectorQuery().in(this).select(".detail-item-line-5").boundingClientRect((e=>{d.value=e})).exec(),uni.createSelectorQuery().in(this).select(".tab6").boundingClientRect((e=>{u.value=e})).exec(),uni.createSelectorQuery().in(this).select(".tab7").boundingClientRect((e=>{m.value=e})).exec(),uni.createSelectorQuery().in(this).select(".tab8").boundingClientRect((e=>{h.value=e})).exec(),uni.createSelectorQuery().in(this).select(".tab9").boundingClientRect((e=>{p.value=e})).exec(),uni.createSelectorQuery().in(this).select(".tab10").boundingClientRect((e=>{g.value=e})).exec()}))}));const E=()=>{uni.navigateBack({delta:1})},w=e=>{r.value=e.detail.scrollTop,y.value=e.detail.scrollTop>=d.value.top-120,r.value<m.value.top-n.statusBarHeight-184?l.value=0:r.value>m.value.top-n.statusBarHeight-184&&r.value<h.value.top-n.statusBarHeight-184?l.value=1:r.value>h.value.top-n.statusBarHeight-184&&r.value<p.value.top-n.statusBarHeight-184?l.value=2:r.value>p.value.top-n.statusBarHeight-184&&r.value<g.value.top-n.statusBarHeight-154?l.value=3:r.value>g.value.top-n.statusBarHeight-154&&(l.value=4)},N=e.ref([{label:"个人简介",id:"tab-1",class:"tab6"},{label:"擅长领域",id:"tab-2",class:"tab7"},{label:"受训经历",id:"tab-3",class:"tab8"},{label:"咨询感受",id:"tab-4",class:"tab9"},{label:"预约时间",id:"tab-5",class:"tab10"}]),k=e.ref([{title:"2024.10-2024.12",desc:"国家二级咨询师，注册系统咨询师"},{title:"2024.10-2024.12",desc:"国家二级咨询师，注册系统咨询师"},{title:"2024.10-2024.12",desc:"国家二级咨询师，注册系统咨询师"},{title:"2024.10-2024.12",desc:"国家二级咨询师，注册系统咨询师"}]),b=e.ref([{month:5,day:11,week:"周一",active:!0},{month:5,day:12,week:"周二",active:!1},{month:5,day:13,week:"周三",active:!0},{month:5,day:14,week:"周四",active:!1},{month:5,day:15,week:"周五",active:!0},{month:5,day:16,week:"周六",active:!1},{month:5,day:17,week:"周日",active:!0}]),C=e.ref(k.value.length),S=()=>{f.value.open()},x=()=>{uni.navigateTo({url:"/pages/consult-feel/consult-feel"})},V=async e=>{let t=await Ne({id:e});v.value=t.data,i("log","at pages/consult/detail.vue:486",v.value)},T=()=>{i("log","at pages/consult/detail.vue:490",v.value),uni.navigateTo({url:"/pages/message/private-chat?to="+v.value.userId+"&name="+v.value.consultantName})},A=()=>{uni.navigateTo({url:"/pages/payment/payment"})};return(t,i)=>{const a=s(e.resolveDynamicComponent("uni-icons"),Q),o=s(e.resolveDynamicComponent("uni-nav-bar"),Se),d=s(e.resolveDynamicComponent("uni-steps"),xe),V=s(e.resolveDynamicComponent("uni-popup"),Qe);return e.openBlock(),e.createElementBlock("view",{class:"consult-detail-box"},[e.createElementVNode("scroll-view",{"scroll-y":"",class:"scroll-content",onScroll:w,"scroll-top":c.value,"show-scrollbar":!1},[e.createVNode(o,{backgroundColor:r.value>15?"#fff":"transparent",border:!1,title:r.value>15?v.value.consultantName:"",class:"header-bar",statusBar:!0,fixed:""},{left:e.withCtx((()=>[e.createElementVNode("view",{class:"right"},[r.value>15?(e.openBlock(),e.createBlock(a,{key:0,type:"left",size:"24",onClick:E})):(e.openBlock(),e.createElementBlock("image",{key:1,src:Ae,style:{width:"56rpx",height:"56rpx"},onClick:E}))])])),right:e.withCtx((()=>[e.createElementVNode("view",{class:"right"},[r.value>15?(e.openBlock(),e.createElementBlock("image",{key:0,src:ge,style:{width:"40rpx",height:"40rpx"}})):(e.openBlock(),e.createElementBlock("image",{key:1,src:_e,style:{width:"56rpx",height:"56rpx"}}))])])),_:1},8,["backgroundColor","title"]),e.createElementVNode("view",{class:"consult-detail-content"},[e.createElementVNode("view",{class:"swiper-content"},[e.createElementVNode("view",{class:"uni-margin-wrap"},[e.createElementVNode("swiper",{class:"swiper",circular:"","indicator-dots":!0,autoplay:!0,interval:5e3,duration:500},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(6,(t=>e.createElementVNode("swiper-item",{key:t,class:"swiper-item"},[e.createElementVNode("image",{src:"http://s.maimiaoqingsu.com/open/20250807/eaf6036d-c2e4-458a-a03b-48ea7b5cb458.png"})]))),64))])])]),e.createElementVNode("view",{class:"consult-detail-info"},[e.createElementVNode("view",{class:"detail-item-line-1"},[e.createElementVNode("view",{class:"name"},[e.createElementVNode("text",{class:"name-a"},e.toDisplayString(v.value.consultantName),1),e.createElementVNode("text",{class:"name-b"},e.toDisplayString(v.value.major),1),e.createElementVNode("text",{class:"name-c"},e.toDisplayString(v.value.age),1)]),e.createElementVNode("view",{class:"money"},[e.createElementVNode("text",{class:"num"},e.toDisplayString(v.value.consultantPrice),1),e.createElementVNode("text",null,"元/50分钟")])]),e.createElementVNode("view",{class:"detail-item-line-2"},[e.createElementVNode("text",null,"国家二级心理咨询师 | "+e.toDisplayString(v.value.school)+" "+e.toDisplayString(v.value.major)+" | "+e.toDisplayString(v.value.constellation),1)]),e.createElementVNode("view",{class:"detail-item-line-3"},[e.createElementVNode("view",{class:"address"},[e.createElementVNode("image",{src:"/static/common/address.png"}),e.createElementVNode("text",null,e.toDisplayString(v.value.address),1)]),e.createElementVNode("view",{class:"txt"},[e.createElementVNode("view",null,[e.createElementVNode("text",{class:"voice"},"语音咨询"),e.createTextVNode(" | "),e.createElementVNode("text",{class:"quick"},"最快可约最近3天"),e.createTextVNode(),e.createVNode(a,{type:"right",size:"14",color:"#35CA95"})])])]),e.createElementVNode("view",{class:"detail-item-line-4"},[e.createElementVNode("view",{class:"content"},[e.createElementVNode("view",{class:"list"},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(10,(t=>e.createElementVNode("view",{class:"item",key:t},[e.createElementVNode("view",null,[e.createElementVNode("text",{class:"num"},"3"),e.createElementVNode("text",{class:"unit"},"年")]),e.createElementVNode("view",{class:"txt"},"从业年限")]))),64))]),e.createElementVNode("view",{class:"tips"},[e.createElementVNode("image",{src:"/static/common/follwer.png"}),e.createElementVNode("text",{class:"txt"},"服务经验")])])]),e.createElementVNode("view",{class:e.normalizeClass(["detail-item-line-5",y.value?"tabsFixed":""]),id:"tabs"},[e.createElementVNode("view",{class:"tabs"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(N.value,((t,i)=>(e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["tab-item",l.value==i?"active":""]),key:i,onClick:e=>((e,t)=>{l.value!=t&&(l.value=t,"tab-1"==e.id?c.value=u.value.top-n.statusBarHeight-174:"tab-2"==e.id?c.value=m.value.top-n.statusBarHeight-174:"tab-3"==e.id?c.value=h.value.top-n.statusBarHeight-174:"tab-4"==e.id?c.value=p.value.top-n.statusBarHeight-174:"tab-5"==e.id&&(c.value=g.value.top-n.statusBarHeight-144))})(t,i)},e.toDisplayString(t.label),11,["onClick"])))),128))])],2),e.createElementVNode("view",{class:"detail-item-line-6 tab6",id:"tab-1"},[e.createElementVNode("view",{class:"content"},[e.createElementVNode("view",{class:"title"},"个人简介"),e.createElementVNode("view",{class:"info"},e.toDisplayString(v.value.profile),1)])]),e.createElementVNode("view",{class:"detail-item-line-6 detail-item-line-7 tab7",id:"tab-2"},[e.createElementVNode("view",{class:"content"},[e.createElementVNode("view",{class:"title"},"擅长领域"),e.createElementVNode("view",{class:"info"},[e.createElementVNode("view",{class:"detail"},[e.createElementVNode("view",{class:"detail-title"},"人际交往"),e.createElementVNode("view",{class:"detail-content"},"沟通不畅、社交恐惧、社交技巧、人际冲突、不合群、 人际边界、社会适应难、信任危机、设有关系")])]),e.createElementVNode("view",{class:"title"},"擅长疗法"),e.createElementVNode("view",{class:"tags"},[e.createElementVNode("text",{class:"tag-item"},"沙盘疗法"),e.createElementVNode("text",{class:"tag-item"},"心理动力取向"),e.createElementVNode("text",{class:"tag-item"},"心理动力取向")])])]),e.createElementVNode("view",{class:"detail-item-line-6 detail-item-line-8 tab8",id:"tab-3"},[e.createElementVNode("view",{class:"content"},[e.createElementVNode("view",{class:"info"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(v.value.careerList,((t,i)=>(e.openBlock(),e.createElementBlock("view",{class:"certificate-detail",key:i},[e.createElementVNode("view",{class:"tag"},e.toDisplayString(t.type),1),e.createElementVNode("view",{class:"tag-info"},[e.createElementVNode("view",{class:"tag-title"},e.toDisplayString(t.career),1),e.createElementVNode("view",{class:"certificate-info"},[e.createElementVNode("view",null,"发证机构：国家心理培训 "),e.createElementVNode("view",null,"发证时间："+e.toDisplayString(t.startTime),1),e.createElementVNode("view",null,"证书编号：45478121548151548415125")])])])))),128)),e.createElementVNode("view",{class:"step-detail"},[e.createElementVNode("view",{class:"training"},[e.createElementVNode("view",{class:"training-title"},"伦理培训"),e.createElementVNode("view",{class:"training-timer"},"2项培训，累计40小时")]),e.createElementVNode("view",{class:"step-box"},[e.createVNode(d,{options:k.value,"active-color":"#35CA95",active:C.value,direction:"column"},null,8,["options","active"])])])])])]),e.createElementVNode("view",{class:"detail-item-line-6 detail-item-line-9 tab9",id:"tab-4"},[e.createElementVNode("view",{class:"content"},[e.createElementVNode("view",{class:"title"},"咨询感受"),e.createElementVNode("view",{class:"info"},[e.createElementVNode("view",{class:"feel-type-box",onClick:x},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(10,(t=>e.createElementVNode("view",{class:"feel-type",key:t},[e.createElementVNode("view",{class:"txt"},"恋爱压力"),e.createElementVNode("view",{class:"num"},"250")]))),64))]),e.createElementVNode("view",{class:"comment-list"},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(10,(t=>e.createElementVNode("view",{class:"comment-item",key:t},[e.createElementVNode("view",{class:"comment-item-header"},[e.createElementVNode("view",{class:"user"},[e.createElementVNode("image",{src:Ie}),e.createElementVNode("text",null,"匿名 | 压抑心理")]),e.createElementVNode("view",{class:"date"},"2023-01-01")]),e.createElementVNode("view",{class:"comment-item-content"},[e.createVNode(e.unref(Ue),{line:3,expandText:"展开",foldHint:"收起"},{default:e.withCtx((()=>[e.createTextVNode(" 测试测试测试测试测试测试测试213121312试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试 ")])),_:1})])]))),64))])])])]),e.createElementVNode("view",{class:"detail-item-line-6 detail-item-line-10 tab10",id:"tab-5",onClick:S},[e.createElementVNode("view",{class:"content"},[e.createElementVNode("view",{class:"title"},[e.createTextVNode("可约时间"),e.createElementVNode("text",{class:"remark"},"（北京时间）")]),e.createElementVNode("view",{class:"info"},[e.createElementVNode("view",{class:"txt"},"如果暂时无法确定具体的咨询时间，可以在预约成功后，再与咨询师协商具体时间。"),e.createElementVNode("view",{class:"order-timer-box"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(b.value,((t,i)=>(e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["order-timer-item",t.active?"active":""])},[e.createElementVNode("view",{class:"month"},e.toDisplayString(t.month)+"月",1),e.createElementVNode("view",{class:"day"},e.toDisplayString(t.day),1),e.createElementVNode("view",{class:"week"},e.toDisplayString(t.week),1),e.createElementVNode("view",{class:"isOrder"},"已满")],2)))),256))])])])]),e.createElementVNode("view",{class:"detail-item-line-6 detail-item-line-11 tab11"},[e.createElementVNode("view",{class:"content"},[e.createElementVNode("view",{class:"title"},[e.createTextVNode("预约须知"),e.createElementVNode("view",null,[e.createElementVNode("view",{class:"info"},[e.createElementVNode("view",null,"1、咨询为预约服务，您可选择咨询师可约时段下单，每次咨询50分钟或60分钟。"),e.createElementVNode("view",null,"2、订单支付成功后，您的预约需咨询师确认是否接受，确认后将短信通知您。"),e.createElementVNode("view",null,"3、咨询方式有面对面、视频、电话、文字四种，具体以咨询师展示的可选方式为准。"),e.createElementVNode("view",null,"4、因不可抗力因素变更时间或取消咨询预约，请提前24小时告知咨询师。")])])])])])])])],40,["scroll-top"]),e.createElementVNode("view",{class:"footer"},[e.createElementVNode("view",{class:"follow"},[e.createElementVNode("image",{src:"/static/common/follow.png"}),e.createElementVNode("text",null,"关注")]),e.createElementVNode("view",{class:"contact"},[e.createElementVNode("image",{src:"/static/common/contect.png"}),e.createElementVNode("text",null,"客服")]),e.createElementVNode("view",{class:"message",onClick:T},[e.createElementVNode("text",{class:"txt"},"私信ta")]),e.createElementVNode("view",{class:"reservation",onClick:S},[e.createElementVNode("text",null,"预约咨询"),e.createElementVNode("text",{class:"remark"},"（语音/视频）")])]),e.createVNode(V,{ref_key:"popup",ref:f,type:"bottom","border-radius":"20rpx 20rpx 0 0"},{default:e.withCtx((()=>[e.createElementVNode("view",{class:"popup-box"},[e.createElementVNode("view",{class:"popup-header"},[e.createElementVNode("view",{class:"title"},[e.createTextVNode("选择咨询时段"),e.createElementVNode("text",{class:"remark"},"（北京时间）")]),e.createElementVNode("view",{class:"msg"},"暂不选择咨询时间，可在下单后与咨询师协商时间")]),e.createElementVNode("view",{class:"popup-content"},[e.createElementVNode("view",{class:"order-timer-box"},[e.createElementVNode("scroll-view",{"scroll-x":"true",class:"order-timer-content","show-scrollbar":!1},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(10,((t,i)=>e.createElementVNode("view",{class:"order-timer-item"},[e.createElementVNode("view",{class:"week"},"周一"),e.createElementVNode("view",{class:"date"},"05-13"),e.createElementVNode("view",{class:"isOrder"},"可约")]))),64))])]),e.createElementVNode("view",{class:"datetime-box"},[e.createElementVNode("view",{class:"title"},"上午"),e.createElementVNode("view",{class:"datetime-item"},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(5,((t,i)=>e.createElementVNode("text",{class:"txt",key:i},"08:45-09:15"))),64))])]),e.createElementVNode("view",{class:"datetime-box afternoon-datetime-box"},[e.createElementVNode("view",{class:"title"},"下午"),e.createElementVNode("view",{class:"datetime-item"},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(9,((t,i)=>e.createElementVNode("text",{class:"txt",key:i},"13:45-14:15"))),64))])])]),e.createElementVNode("view",{class:"popup-footer"},[e.createElementVNode("view",{class:"msg"},[e.createElementVNode("view",{class:"date"},"5月13日(周三) | 08:45-10:15"),e.createElementVNode("view",{class:"name"},"咨询师：张三")]),e.createElementVNode("view",{class:"confirm",onClick:A},"确认预约")])])])),_:1},512)])}}},Ke=X(Ze,[["__scopeId","data-v-91ec487e"]]),et="/static/index/subscript.png",it=(e,t={})=>_.post("/api/article/article/getArticleList",e,t),st=(e,t={})=>_.post("/api/answer/answer/getAnswerList",e,t),nt=(e,t={})=>_.get("/api/appMenu/menus",e,t);const at=X({},[["render",function(t,i){return e.openBlock(),e.createElementBlock("view",{class:"teacher-container"},[e.createElementVNode("view",{class:"card"},[e.createElementVNode("view",{class:"avatar-wrap"},[e.createElementVNode("image",{class:"avatar",src:ve,mode:"aspectFill"}),e.createElementVNode("text",{class:"txt"},"现在有空")]),e.createElementVNode("view",{class:"info-wrap"},[e.createElementVNode("view",{class:"name-title"},"王艳红"),e.createElementVNode("view",{class:"job-title"},"70后/白羊座/社会心理师"),e.createElementVNode("view",{class:"stats"}," 5000+人次·500+时长 "),e.createElementVNode("view",{class:"tags"},[e.createElementVNode("text",{class:"tag"},"自我探索"),e.createElementVNode("text",{class:"tag"},"压力管理"),e.createElementVNode("text",{class:"tag"},"婚姻家庭")]),e.createElementVNode("view",{class:"price-button"},[e.createElementVNode("view",{class:"price"},[e.createElementVNode("text",{class:"unit"},"¥"),e.createTextVNode("19.9"),e.createElementVNode("text",{class:"txt"},"起")]),e.createElementVNode("view",{class:"contact"},"找ta聊")])])])])}],["__scopeId","data-v-96abea9d"]]),rt=X({__name:"Consult-Teacher-List-Item",props:{info:{type:Object}},setup:t=>(i,s)=>(e.openBlock(),e.createElementBlock("view",{class:"teacher-container"},[e.createElementVNode("view",{class:"card"},[e.createElementVNode("view",{class:"avatar-wrap"},[e.createElementVNode("image",{class:"avatar",src:t.info.avatar,mode:"aspectFill"},null,8,["src"])]),e.createElementVNode("view",{class:"info-wrap"},[e.createElementVNode("view",{class:"name-title"},e.toDisplayString(t.info.consultantName),1),e.createElementVNode("view",{class:"job-title"},"心理咨询师"),e.createElementVNode("view",{class:"stats"}," 5000+人次·5年从业 "),e.createElementVNode("view",{class:"tags"},[e.createElementVNode("text",{class:"tag"},"自我探索"),e.createElementVNode("text",{class:"tag"},"压力管理"),e.createElementVNode("text",{class:"tag"},"婚姻家庭")]),e.createElementVNode("view",{class:"price-button"},[e.createElementVNode("view",{class:"price"},[e.createElementVNode("text",{class:"unit"},"¥"),e.createTextVNode("19.9"),e.createElementVNode("text",{class:"txt"},"起")]),e.createElementVNode("view",{class:"contact"},"找ta聊")])])])]))},[["__scopeId","data-v-0b3e0d1e"]]),ot=X({__name:"Recommend-Article-Item",props:{info:{type:Object}},setup:t=>(i,s)=>(e.openBlock(),e.createElementBlock("view",{class:"recommend-article-Item"},[e.createElementVNode("view",{class:"recommend-article-content"},[t.info?(e.openBlock(),e.createElementBlock("view",{key:0,class:"content"},e.toDisplayString(t.info.title),1)):e.createCommentVNode("",!0),t.info?(e.openBlock(),e.createElementBlock("view",{key:1,class:"content"},e.toDisplayString(t.info.content),1)):e.createCommentVNode("",!0),e.createElementVNode("view",{class:"info"},[e.createElementVNode("view",{class:"user"},[e.createElementVNode("image",{src:Ie,class:"picture"}),e.createElementVNode("text",{class:"name"},e.toDisplayString(t.info.realName),1)]),e.createElementVNode("view",{class:"view"}," 浏览7876 "),e.createElementVNode("view",{class:"date"},e.toDisplayString(t.info.createTime.substring(0,10)),1)])]),e.createElementVNode("view",{class:"recommend-article-image"},[e.createElementVNode("image",{src:t.info.imageUrl},null,8,["src"])])]))},[["__scopeId","data-v-aa19d1cf"]]),lt=X({__name:"Forum-Item",props:{info:{type:Object}},setup:t=>(i,s)=>(e.openBlock(),e.createElementBlock("view",{class:"forum-Item"},[e.createElementVNode("view",{class:"forum-content"},[e.createElementVNode("view",{class:"content"},e.toDisplayString(t.info.content),1),e.createElementVNode("view",{class:"forum-image"},[e.createElementVNode("scroll-view",{class:"scroll-view_H","scroll-x":"true"},[e.createElementVNode("view",{class:"forum-image-list"},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(10,(t=>e.createElementVNode("image",{src:ve,class:"img"}))),64))])])]),e.createElementVNode("view",{class:"info"},[e.createElementVNode("text",{class:"date"}," 2025/01/02 "),e.createElementVNode("text",{class:"date"},"·"),e.createElementVNode("text",{class:"view"}," 浏览7876 ")])])]))},[["__scopeId","data-v-9052ab79"]]);var ct,dt,ut,mt={};(ut=ct||(ct={})).UNIAPP="uniapp",ut.REACT_NATIVE="rn",ut.COCOS="cocos",ut.UNKNOWN="unknown";let ht=class e{constructor(){this.framework=null,this.methods={[ct.UNIAPP]:this.isUniApp,[ct.REACT_NATIVE]:this.isReactNative,[ct.COCOS]:this.isCocos};const e=this.methods,t=Object.keys(e);for(const i of t)if((0,e[i])()){this.framework=i;break}this.framework=this.framework||ct.UNKNOWN,this.framework}static currentFramework(){return this.instance||(this.instance=new e),this.instance.framework}isUniApp(){try{return"function"==typeof uni.getSystemInfoSync}catch(ut){return!1}}isReactNative(){try{return"object"==typeof navigator&&"ReactNative"===navigator.product}catch(ut){return!1}}isTaro(){try{return void 0!==mt.TARO_ENV}catch(ut){return!1}}isCocos(){try{return void 0!==cc.sys.localStorage}catch(ut){return!1}}},pt=class{static init(e){if(ht.currentFramework()===ct.REACT_NATIVE){if(!e)throw new Error("'reactNativeOptions' is missing when calling GoEasy.getInstance()");this.platform=e.platform,this.asyncStorage=e.asyncStorage}}};!function(e){e.DISCONNECTED="disconnected",e.DISCONNECTING="disconnecting",e.CONNECTING="connecting",e.CONNECTED="connected",e.RECONNECTING="reconnecting",e.RECONNECTED="reconnected",e.EXPIRED_RECONNECTED="reconnected",e.CONNECT_FAILED="connect_failed"}(dt||(dt={}));const gt="2.13.21";var yt,ft;!function(e){e.PRIVATE="private",e.GROUP="group",e.SYSTEM="system",e.CS="cs"}(yt||(yt={})),function(e){e.NEW="new",e.SENDING="sending",e.SUCCESS="success",e.FAIL="fail"}(ft||(ft={}));let vt=class{},Et=class{constructor(e,t){this.id=e,this.data=t}},wt=new class{isDef(e){return!this.isUndef(e)}isUndef(e){return null==e}isPrimitive(e){return"string"==typeof e||"number"==typeof e||"symbol"==typeof e||"boolean"==typeof e}isObject(e){return null!==e&&"object"==typeof e}isPlainObject(e){return"[object Object]"===Object.prototype.toString.call(e)}isRegExp(e){return"[object RegExp]"===Object.prototype.toString.call(e)}isValidArrayIndex(e){let t=parseFloat(String(e));return t>=0&&Math.floor(t)===t&&isFinite(e)}isString(e){return"string"==typeof e}isNumber(e){return"number"==typeof e}isStringOrNumber(e){return this.isString(e)||this.isNumber(e)}isArray(e){return"[object Array]"===Object.prototype.toString.call(e)}isEmpty(e){return this.isArray(e)?0===e.length:this.isObject(e)?!this.isDef(e):!this.isNumber(e)&&(this.isString(e)?""===e.trim():!this.isDef(e))}isNative(e){return"function"==typeof e&&/native code/.test(e.toString())}isFunction(e){return"function"==typeof e}isBoolean(e){return"boolean"==typeof e}isTrue(e){return!0===e}isFalse(e){return!1===e}isNull(e){return null===e}};var Nt;!function(e){e.MP_WX="mp-wx",e.MP_WGAME="mp-wgame",e.MP_BYTE="mp-byte",e.MP_BAIDU="mp-baidu",e.MP_ALI="mp-ali",e.BROWSER="browser",e.NODE="node",e.UNI_IOS="uni-ios",e.UNI_ANDROID="uni-android",e.COCOS_IOS="cocos-ios",e.COCOS_ANDROID="cocos-android",e.RN_IOS="rn-ios",e.RN_ANDROID="rn-android",e.UNKNOWN="unknown"}(Nt||(Nt={}));let kt=class e{constructor(){this.platform=null,this.methods={[Nt.BROWSER]:this.isBrowser,[Nt.MP_WX]:this.isMPWX,[Nt.MP_WGAME]:this.isMPWeGame,[Nt.MP_BYTE]:this.isMPByte,[Nt.MP_BAIDU]:this.isMPBaidu,[Nt.MP_ALI]:this.isMPAli,[Nt.NODE]:this.isNode,[Nt.UNI_IOS]:this.isUniAppIOS,[Nt.UNI_ANDROID]:this.isUniAppAndroid,[Nt.COCOS_IOS]:this.isCocosIOS,[Nt.COCOS_ANDROID]:this.isCocosAndroid,[Nt.RN_IOS]:this.isRNiOS,[Nt.RN_ANDROID]:this.isRNAndroid};const e=this.methods,t=Object.keys(e);for(const i of t)if((0,e[i])()){this.platform=i;break}this.platform=this.platform||Nt.UNKNOWN,this.platform}static currentPlatform(){return this.instance||(this.instance=new e),e.instance.platform}isBrowser(){return"undefined"!=typeof navigator&&"Taro"!==navigator.product&&"ReactNative"!==navigator.product&&"undefined"==typeof GameGlobal&&("undefined"==typeof cc||null!==cc.sys.browserType)&&"undefined"==typeof my&&"undefined"==typeof tt&&"undefined"==typeof swan}isMPWX(){return"object"==typeof wx&&"function"==typeof wx.getSystemInfoSync&&"undefined"==typeof WebSocket&&"undefined"==typeof XMLHttpRequest&&"undefined"==typeof plus&&"undefined"==typeof tt}isMPWeGame(){return"object"==typeof GameGlobal}isMPByte(){return"object"==typeof tt&&"function"==typeof tt.getSystemInfoSync}isMPBaidu(){return"object"==typeof swan&&"function"==typeof swan.getSystemInfoSync}isMPAli(){return"object"==typeof my&&"function"==typeof my.getSystemInfoSync}isNode(){try{return"node"===process.release.name}catch(ut){return!1}}isUniAppIOS(){try{return"ios"===uni.getSystemInfoSync().platform&&"app"===uni.getSystemInfoSync().uniPlatform}catch(ut){return!1}}isUniAppAndroid(){try{return"android"===uni.getSystemInfoSync().platform&&"app"===uni.getSystemInfoSync().uniPlatform}catch(ut){return!1}}isCocosIOS(){try{return"iOS"===cc.sys.os}catch(ut){return!1}}isCocosAndroid(){try{return"Android"===cc.sys.os}catch(ut){return!1}}isRNiOS(){try{return"ios"===pt.platform.OS}catch(ut){return!1}}isRNAndroid(){try{return"android"===pt.platform.OS}catch(ut){return!1}}},bt=class{};bt.type=Nt,bt.current=kt.currentPlatform();let Ct=class{onFrontend(e){this.onFrontendCallback=e}},St=class extends Ct{constructor(){super(...arguments),this.runningBackend=!1}startCheck(){"object"==typeof plus&&(plus.globalEvent.addEventListener("resume",(()=>{this.runningBackend=!1,this.runningBackend,this.onFrontendCallback&&this.onFrontendCallback()}),!1),plus.globalEvent.addEventListener("pause",(()=>{this.runningBackend=!0,this.runningBackend}),!1))}isBackend(){return this.runningBackend}support(){const e=kt.currentPlatform();return[Nt.UNI_IOS,Nt.UNI_ANDROID].includes(e)}},xt=class extends Ct{constructor(){super(...arguments),this.runningBackend=!1}startCheck(){wx.onAppShow((()=>{this.runningBackend=!1})),wx.onAppHide((()=>{this.runningBackend=!0}))}isBackend(){return this.runningBackend}support(){return kt.currentPlatform()===Nt.MP_WX}};const Vt=new class{constructor(){[new St,new xt].forEach((e=>{if(e.support())return this.checker=e,void this.checker.startCheck()}))}isBackend(){return this.checker&&this.checker.isBackend()}onFrontend(e){this.checker.onFrontend(e)}};var Tt,At,_t=Object.freeze({__proto__:null,runStatus:Vt});!function(e){e.authorize="authorize",e.manualDisconnect="manualDisconnect",e.subscribe="subscribe",e.unsubscribe="unsubscribe",e.publish="publish",e.ack="ack",e.historyMessages="historyMessages",e.hereNow="hereNow",e.hereNowByUserIds="hereNowByUserIds",e.PUBSUB_PRESENCE_SUBSCRIBE="PUBSUB_PRESENCE_SUBSCRIBE",e.PUBSUB_PRESENCE_UNSUBSCRIBE="PUBSUB_PRESENCE_UNSUBSCRIBE",e.PUBSUB_PRESENCE_HERENOW="PUBSUB_PRESENCE_HERENOW",e.imLastConversations="imLastConversations",e.markPrivateMessageAsRead="markPrivateMessageAsRead",e.markGroupMessageAsRead="markGroupMessageAsRead",e.imGroupOnlineCount="imGroupOnlineCount",e.imHereNow="imHereNow",e.imGroupHereNow="imGroupHereNow",e.publishIM="publishIM",e.subscribeUserPresence="subscribeUserPresence",e.unsubscribeUserPresence="unsubscribeUserPresence",e.subscribeGroupPresence="subscribeGroupPresence",e.unsubscribeGroupPresence="unsubscribeGroupPresence",e.removeConversation="removeConversation",e.topConversation="topConversation",e.imData="imData",e.subscribeGroups="subscribeGroups",e.unsubscribeGroup="unsubscribeGroup",e.IM_DELETE_MESSAGE="IM_DELETE_MESSAGE",e.IM_HISTORY="IM_HISTORY",e.IM_HISTORY_CHANGE="IM_HISTORY_CHANGE",e.IM_RECALL_MESSAGE="IM_RECALL_MESSAGE",e.IM_MARK_AS_READ="IM_MARK_AS_READ",e.CS_PENDING_CONVERSATION="CS_PENDING_CONVERSATION",e.CS_ACCEPT="CS_ACCEPT",e.CS_END="CS_END",e.CS_TRANSFER="CS_TRANSFER",e.CS_AGENTS="CS_AGENTS",e.CS_CUSTOMER_STATUS="CS_CUSTOMER_STATUS",e.CS_MY_TEAMS="CS_MY_TEAMS",e.CS_ONLINE="CS_ONLINE",e.CS_OFFLINE="CS_OFFLINE",e.CS_LIVE_SESSION="CS_LIVE_SESSION",e.CS_QUIT_LIVE="CS_QUIT_LIVE",e.SET_IOS_BADGE="SET_IOS_BADGE",e.MD_CMD="MD_CMD"}(Tt||(Tt={})),function(e){e[e.connect=3e3]="connect",e[e.reconnectionDelayMax=3e3]="reconnectionDelayMax",e[e.commonQuerySingle=2500]="commonQuerySingle",e[e.commonQueryTotal=12e3]="commonQueryTotal",e[e.commonRequestSingle=1700]="commonRequestSingle",e[e.commonRequestTotal=12e3]="commonRequestTotal",e[e.commonInfiniteSingle=1700]="commonInfiniteSingle",e[e.commonInfiniteTotal=864e5]="commonInfiniteTotal"}(At||(At={}));let It=class{static onSuccess(e,t){wt.isFunction(e.onSuccess)&&e.onSuccess(t)}static onFailed(e,t){if(!wt.isObject(e)||!wt.isFunction(e.onFailed))throw t;e.onFailed(t)}};function Dt(e,t,i,s){return new(i||(i=Promise))((function(n,a){function r(e){try{l(s.next(e))}catch(t){a(t)}}function o(e){try{l(s.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,o)}l((s=s.apply(e,t||[])).next())}))}"function"==typeof SuppressedError&&SuppressedError;var Bt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Rt(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(i){var s=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:function(){return e[i]}})})),t}var Mt={exports:{}};!function(e){function t(e){if(e)return function(e){for(var i in t.prototype)e[i]=t.prototype[i];return e}(e)}Mt.exports=t,t.prototype.on=t.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},t.prototype.once=function(e,t){function i(){this.off(e,i),t.apply(this,arguments)}return i.fn=t,this.on(e,i),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i,s=this._callbacks["$"+e];if(!s)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var n=0;n<s.length;n++)if((i=s[n])===t||i.fn===t){s.splice(n,1);break}return this},t.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),i=this._callbacks["$"+e];if(i)for(var s=0,n=(i=i.slice(0)).length;s<n;++s)i[s].apply(this,t);return this},t.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},t.prototype.hasListeners=function(e){return!!this.listeners(e).length}}();var Pt=Mt.exports,Ot={exports:{}},Lt=void 0!==f&&f.getRandomValues&&f.getRandomValues.bind(f)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(Lt){var Ft=new Uint8Array(16);Ot.exports=function(){return Lt(Ft),Ft}}else{var Ut=new Array(16);Ot.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),Ut[t]=e>>>((3&t)<<3)&255;return Ut}}for(var zt=[],Gt=0;Gt<256;++Gt)zt[Gt]=(Gt+256).toString(16).substr(1);var Ht,jt,$t=function(e,t){var i=t||0,s=zt;return[s[e[i++]],s[e[i++]],s[e[i++]],s[e[i++]],"-",s[e[i++]],s[e[i++]],"-",s[e[i++]],s[e[i++]],"-",s[e[i++]],s[e[i++]],"-",s[e[i++]],s[e[i++]],s[e[i++]],s[e[i++]],s[e[i++]],s[e[i++]]].join("")},qt=Ot.exports,Wt=$t,Jt=0,Yt=0,Xt=Ot.exports,Qt=$t,Zt=function(e,t,i){var s=t&&i||0,n=t||[],a=(e=e||{}).node||Ht,r=void 0!==e.clockseq?e.clockseq:jt;if(null==a||null==r){var o=qt();null==a&&(a=Ht=[1|o[0],o[1],o[2],o[3],o[4],o[5]]),null==r&&(r=jt=16383&(o[6]<<8|o[7]))}var l=void 0!==e.msecs?e.msecs:(new Date).getTime(),c=void 0!==e.nsecs?e.nsecs:Yt+1,d=l-Jt+(c-Yt)/1e4;if(d<0&&void 0===e.clockseq&&(r=r+1&16383),(d<0||l>Jt)&&void 0===e.nsecs&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Jt=l,Yt=c,jt=r;var u=(1e4*(268435455&(l+=122192928e5))+c)%4294967296;n[s++]=u>>>24&255,n[s++]=u>>>16&255,n[s++]=u>>>8&255,n[s++]=255&u;var m=l/4294967296*1e4&268435455;n[s++]=m>>>8&255,n[s++]=255&m,n[s++]=m>>>24&15|16,n[s++]=m>>>16&255,n[s++]=r>>>8|128,n[s++]=255&r;for(var h=0;h<6;++h)n[s+h]=a[h];return t||Wt(n)},Kt=function(e,t,i){var s=t&&i||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var n=(e=e||{}).random||(e.rng||Xt)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t)for(var a=0;a<16;++a)t[s+a]=n[a];return t||Qt(n)},ei=Kt;ei.v1=Zt,ei.v4=Kt;var ti=ei;let ii=class{support(){return!0}getParams(){return this.params}setData(e){this.active=e.a,this.data=e.d}preConnect(e){}postConnect(){}},si=class{static initModule(e){e.support()&&this.modules.set(e.name,e)}static getParams(){return Dt(this,void 0,void 0,(function*(){let e={};for(const[t,i]of this.modules)e[t]=(yield i.getParams())||null;return e}))}static setDatas(e){Object.keys(e).forEach((t=>{this.modules.get(t).setData(e[t])}))}static preConnect(e){this.modules.forEach(((t,i)=>{t.preConnect(e)}))}static postConnect(){this.modules.forEach(((e,t)=>{e.postConnect()}))}};si.Module=ii,si.modules=new Map;const ni=Pt;let ai=class{constructor(){this.eventDriver=new class{constructor(){this.emitter=new ni}on(e,t){return this.emitter.on(e,t),this}once(e,t){return this.emitter.once(e,t),this}off(e,t){return this.emitter.off(e,t),this}fire(e,t){return this.emitter.emit(e,t),this}}}on(e,t){this.eventDriver.on(e,t)}off(e,t){this.eventDriver.off(e,t)}fire(e,t){this.eventDriver.fire(e,t)}},ri=new class{isDef(e){return!this.isUndef(e)}isUndef(e){return null==e}isPrimitive(e){return"string"==typeof e||"number"==typeof e||"symbol"==typeof e||"boolean"==typeof e}isObject(e){return null!==e&&"object"==typeof e}isPlainObject(e){return"[object Object]"===Object.prototype.toString.call(e)}isRegExp(e){return"[object RegExp]"===Object.prototype.toString.call(e)}isValidArrayIndex(e){let t=parseFloat(String(e));return t>=0&&Math.floor(t)===t&&isFinite(e)}isString(e){return"string"==typeof e}isNumber(e){return"number"==typeof e}isStringOrNumber(e){return this.isString(e)||this.isNumber(e)}isArray(e){return"[object Array]"===Object.prototype.toString.call(e)}isEmpty(e){return this.isArray(e)?0===e.length:this.isObject(e)?!this.isDef(e):!this.isNumber(e)&&(this.isString(e)?""===e.trim():!this.isDef(e))}isNative(e){return"function"==typeof e&&/native code/.test(e.toString())}isFunction(e){return"function"==typeof e}isBoolean(e){return"boolean"==typeof e}isTrue(e){return!0===e}isFalse(e){return!1===e}isNull(e){return null===e}};const oi=Pt;let li=class{static init(e,t,i,s,n,a){this.Socket=e,this.N=t,this.Member=i,this.v=s,this.Platform=n,this.GModules=a}};const ci=ti;let di=class{static get(){return ci.v1().replace(/-/g,"")}};var ui,mi;(mi=ui||(ui={})).WRITE="WRITE",mi.READ="READ",mi.NONE="NONE";let hi=class{constructor(e){this.permission=ui.NONE,this.singleTimeout=0,this.totalTimeout=0,this.startTime=0,this.complete=!1,this.retried=0,this.unique=!1,this.uuid=di.get(),this.name=e.name,this.params=e.params,this.permission=e.permission,this.totalTimeout=e.totalTimeout,this.singleTimeout=e.singleTimeout,e.unique&&(this.unique=e.unique),this.success=t=>{this.complete||(this.end(),e.success(t))},this.fail=t=>{this.complete||(this.end(),e.fail(t))}}start(){this.startTime=Date.now(),this.initAutoTimeout()}end(){this.complete=!0,clearTimeout(this.timeoutHandler)}initAutoTimeout(){this.timeoutHandler=setTimeout((()=>{this.complete||this.fail({resultCode:408,content:"Host unreachable or timeout"})}),this.totalTimeout)}},pi=class e extends ii{static init(){return this.module=new e,this.module.name=this.GN_MODULE_NAME,this.module}static setRegId(e,t){if(e){this.module.regIdPromise=e;let i=t;this.module.params={v:{npv:i}}}}preConnect(e){this.wxmpId=e.wxmpId}getParams(){return Dt(this,void 0,void 0,(function*(){if(this.params=this.params||{},this.regIdPromise)try{const e=new Promise(((e,t)=>{setTimeout((()=>t("timeout")),1e3)}));this.params.regId=yield Promise.race([this.regIdPromise,e])}catch(ut){i("warn","at uni_modules/GOEASY-IM/js_sdk/goeasy-2.13.21.esm.min.js:1","Failed to register the Manufacturers Push service:"+JSON.stringify(ut))}return this.params.wxmpId=this.wxmpId,this.params}))}};pi.GN_MODULE_NAME="GN";let gi=class e{static init(e){this.allowNotification=!0===e;let s=pi.init();si.initModule(s),this.supportAppNotification()&&(this.uniappPlugin=t("GoEasy-Uniapp"),this.uniappPlugin?(this.regIdPromise=this.askRegId(),this.v=this.uniappPlugin.v(),pi.setRegId(this.regIdPromise,this.v)):i("warn","at uni_modules/GOEASY-IM/js_sdk/goeasy-2.13.21.esm.min.js:1","No GoEasy-Uniapp Native Plugin."),this.setClientBadge(0))}static addAssembler(e){this.payloadAssemblers.push(e)}static assemblePayload(e){let t=this.payloadAssemblers.find((t=>t.support(e)));return t?t.assemble(e):e}static createLocalNotification(t,i,s,n,a){Vt.isBackend()&&(s.g=1,"undefined"!=typeof plus&&(n?(this.uniappPlugin&&this.uniappPlugin.playSound(n),plus.push.createMessage(i,JSON.stringify(s),{title:t,sound:"none"})):plus.push.createMessage(i,JSON.stringify(s),{title:t}),"+1"===a&&this.setClientBadge(e.badge+1)))}static setBadge(t){if(!Number.isInteger(t.badge)||t.badge<0)It.onFailed(t,"badge must be an integer greater than or equal to 0.");else if(e.supportAppNotification())if(this.uniappPlugin&&kt.currentPlatform()===Nt.UNI_IOS){let e=new hi({name:Tt.SET_IOS_BADGE,params:{badge:t.badge},unique:!0,singleTimeout:At.commonRequestSingle,totalTimeout:At.commonRequestTotal,permission:ui.WRITE,success:()=>{It.onSuccess(t),this.setClientBadge(t.badge)},fail:e=>{It.onFailed(t,e.content)}});li.Socket.e(e)}else It.onSuccess(t),this.setClientBadge(t.badge)}static setClientBadge(t){"vivo"!==plus.device.vendor&&(e.badge=t,plus.runtime.setBadgeNumber(t))}static askRegId(){let e=null,t=0;const i=()=>new Promise(((s,n)=>{this.uniappPlugin.regId((e=>{s(e)}),(s=>{if(!(1e6===s.data.code&&t<=10))return clearTimeout(e),n(s);e=setTimeout((()=>{t++,this.regIdPromise=i()}),3500)}))}));return i()}static getRegIdPromise(){return this.regIdPromise}static supportAppNotification(){const e=kt.currentPlatform();return this.allowNotification&&(e===Nt.UNI_ANDROID||e===Nt.UNI_IOS)}static listenPlusClickNotification(){plus.push.addEventListener("click",(e=>{try{if(e){const t="string"==typeof e.payload?JSON.parse(e.payload):e.payload;if(this.availableIntent(t)){let e=this.assemblePayload(t);plus.push.clear(),this.onClickNotificationCallback(e)}}}catch(t){}}))}static availableIntent(e){return e&&Object.keys(e).length&&e.g&&1===parseInt(e.g)}static getIntentData(){this.uniappPlugin.getIntentData((e=>{if(!this.availableIntent(e))return;let t=this.assemblePayload(e);const i=kt.currentPlatform();plus.push.clear(),i===Nt.UNI_ANDROID&&this.uniappPlugin.clearAll(),this.onClickNotificationCallback(t)}))}static listenClick(){this.listenPlusClickNotification();const e=kt.currentPlatform();this.uniappPlugin&&e===Nt.UNI_ANDROID&&(this.getIntentData(),Vt.onFrontend((()=>{this.getIntentData()})))}static onClickNotification(t){if(e.supportAppNotification()){if(!wt.isFunction(t))throw new Error("The arguments must be a function.");null===this.onClickNotificationCallback?(this.onClickNotificationCallback=t,this.listenClick()):i("warn","at uni_modules/GOEASY-IM/js_sdk/goeasy-2.13.21.esm.min.js:1","The onClickNotification event has been listened on. Please do not listen to it more than once.")}else i("warn","at uni_modules/GOEASY-IM/js_sdk/goeasy-2.13.21.esm.min.js:1","The current environment doesn't support or allowNotification is false.")}};function yi(e){if(null===e||"object"!=typeof e||"isActiveClone"in e)return e;let t=e instanceof Array?[]:{};for(let i in e)"object"==typeof e[i]?t[i]=yi(e[i]):t[i]=e[i];return t}function fi(e){return{lang:(null==e?void 0:e.lang)??void 0,message:null==e?void 0:e.message,abortEarly:(null==e?void 0:e.abortEarly)??void 0,abortPipeEarly:(null==e?void 0:e.abortPipeEarly)??void 0}}function vi(e){var t,i;const s=typeof e;return"string"===s?`"${e}"`:"number"===s||"bigint"===s||"boolean"===s?`${e}`:"object"===s||"function"===s?(e&&(null==(i=null==(t=Object.getPrototypeOf(e))?void 0:t.constructor)?void 0:i.name))??"null":s}function Ei(e,t,i,s,n){var a;const r=n&&"input"in n?n.input:i.value,o=(null==n?void 0:n.expected)??e.expects??null,l=(null==n?void 0:n.received)??vi(r),c={kind:e.kind,type:e.type,input:r,expected:o,received:l,message:`Invalid ${t}: ${o?`Expected ${o} but r`:"R"}eceived ${l}`,requirement:e.requirement,path:null==n?void 0:n.path,issues:null==n?void 0:n.issues,lang:s.lang,abortEarly:s.abortEarly,abortPipeEarly:s.abortPipeEarly},d="schema"===e.kind,u=(null==n?void 0:n.message)??e.message??(e.reference,m=c.lang,null==(a=void 0)?void 0:a.get(m))??(d?void c.lang:null)??s.message??void c.lang;var m;void 0!==u&&(c.message="function"==typeof u?u(c):u),d&&(i.typed=!1),i.issues?i.issues.push(c):i.issues=[c]}function wi(e){return{version:1,vendor:"valibot",validate:t=>e["~run"]({value:t},fi())}}function Ni(e,t){const i=[...new Set(e)];return i.length>1?`(${i.join(` ${t} `)})`:i[0]??"never"}gi.uniappPlugin=null,gi.v=null,gi.regIdPromise=null,gi.onClickNotificationCallback=null,gi.payloadAssemblers=new Array;var ki,bi=class extends Error{constructor(e){super(e[0].message),this.name="ValiError",this.issues=e}};function Ci(e,t){return{kind:"validation",type:"max_length",reference:Ci,async:!1,expects:`<=${e}`,requirement:e,message:t,"~run"(e,t){return e.typed&&e.value.length>this.requirement&&Ei(this,"length",e,t,{received:`${e.value.length}`}),e}}}function Si(e){return{kind:"validation",type:"non_empty",reference:Si,async:!1,expects:"!0",message:e,"~run"(e,t){return e.typed&&0===e.value.length&&Ei(this,"length",e,t,{received:"0"}),e}}}function xi(e,t,i){return{kind:"validation",type:"partial_check",reference:xi,async:!1,expects:null,paths:e,requirement:t,message:i,"~run"(t,i){return!t.typed&&!function(e,t){var i;if(e.issues)for(const s of t)for(const t of e.issues){let e=!1;const n=Math.min(s.length,(null==(i=t.path)?void 0:i.length)??0);for(let i=0;i<n;i++)if(s[i]!==t.path[i].key&&("$"!==s[i]||"array"!==t.path[i].type)){e=!0;break}if(!e)return!1}return!0}(t,e)||this.requirement(t.value)||Ei(this,"input",t,i),t}}}function Vi(e,t,i){return"function"==typeof e.fallback?e.fallback(t,i):e.fallback}function Ti(e,t){return{...e,"~run"(i,s){const n=i.issues&&[...i.issues];if((i=e["~run"](i,s)).issues)for(const e of i.issues)if(!(null==n?void 0:n.includes(e))){let s=i.value;for(const i of t){const t=s[i],n={type:"unknown",origin:"value",input:s,key:i,value:t};if(e.path?e.path.push(n):e.path=[n],!t)break;s=t}}return i}}}function Ai(e,t,i){return"function"==typeof e.default?e.default(t,i):e.default}function _i(){return{kind:"schema",type:"any",reference:_i,expects:"any",async:!1,get"~standard"(){return wi(this)},"~run":e=>(e.typed=!0,e)}}function Ii(e,t){return{kind:"schema",type:"array",reference:Ii,expects:"Array",async:!1,item:e,message:t,get"~standard"(){return wi(this)},"~run"(e,t){var i;const s=e.value;if(Array.isArray(s)){e.typed=!0,e.value=[];for(let n=0;n<s.length;n++){const a=s[n],r=this.item["~run"]({value:a},t);if(r.issues){const o={type:"array",origin:"value",input:s,key:n,value:a};for(const t of r.issues)t.path?t.path.unshift(o):t.path=[o],null==(i=e.issues)||i.push(t);if(e.issues||(e.issues=r.issues),t.abortEarly){e.typed=!1;break}}r.typed||(e.typed=!1),e.value.push(r.value)}}else Ei(this,"type",e,t);return e}}}function Di(e){return{kind:"schema",type:"boolean",reference:Di,expects:"boolean",async:!1,message:e,get"~standard"(){return wi(this)},"~run"(e,t){return"boolean"==typeof e.value?e.typed=!0:Ei(this,"type",e,t),e}}}function Bi(e,t){return{kind:"schema",type:"custom",reference:Bi,expects:"unknown",async:!1,check:e,message:t,get"~standard"(){return wi(this)},"~run"(e,t){return this.check(e.value)?e.typed=!0:Ei(this,"type",e,t),e}}}function Ri(e){return{kind:"schema",type:"function",reference:Ri,expects:"Function",async:!1,message:e,get"~standard"(){return wi(this)},"~run"(e,t){return"function"==typeof e.value?e.typed=!0:Ei(this,"type",e,t),e}}}function Mi(e,t){return{kind:"schema",type:"instance",reference:Mi,expects:e.name,async:!1,class:e,message:t,get"~standard"(){return wi(this)},"~run"(e,t){return e.value instanceof this.class?e.typed=!0:Ei(this,"type",e,t),e}}}function Pi(e,t){return{kind:"schema",type:"literal",reference:Pi,expects:vi(e),async:!1,literal:e,message:t,get"~standard"(){return wi(this)},"~run"(e,t){return e.value===this.literal?e.typed=!0:Ei(this,"type",e,t),e}}}function Oi(e){return{kind:"schema",type:"number",reference:Oi,expects:"number",async:!1,message:e,get"~standard"(){return wi(this)},"~run"(e,t){return"number"!=typeof e.value||isNaN(e.value)?Ei(this,"type",e,t):e.typed=!0,e}}}function Li(e,t){return{kind:"schema",type:"object",reference:Li,expects:"Object",async:!1,entries:e,message:t,get"~standard"(){return wi(this)},"~run"(e,t){var i;const s=e.value;if(s&&"object"==typeof s){e.typed=!0,e.value={};for(const n in this.entries){const a=this.entries[n];if(n in s||("exact_optional"===a.type||"optional"===a.type||"nullish"===a.type)&&void 0!==a.default){const r=n in s?s[n]:Ai(a),o=a["~run"]({value:r},t);if(o.issues){const a={type:"object",origin:"value",input:s,key:n,value:r};for(const t of o.issues)t.path?t.path.unshift(a):t.path=[a],null==(i=e.issues)||i.push(t);if(e.issues||(e.issues=o.issues),t.abortEarly){e.typed=!1;break}}o.typed||(e.typed=!1),e.value[n]=o.value}else if(void 0!==a.fallback)e.value[n]=Vi(a);else if("exact_optional"!==a.type&&"optional"!==a.type&&"nullish"!==a.type&&(Ei(this,"key",e,t,{input:void 0,expected:`"${n}"`,path:[{type:"object",origin:"key",input:s,key:n,value:s[n]}]}),t.abortEarly))break}}else Ei(this,"type",e,t);return e}}}function Fi(e,t){return{kind:"schema",type:"optional",reference:Fi,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,default:t,get"~standard"(){return wi(this)},"~run"(e,t){return void 0===e.value&&(void 0!==this.default&&(e.value=Ai(this,e,t)),void 0===e.value)?(e.typed=!0,e):this.wrapped["~run"](e,t)}}}function Ui(e,t){return{kind:"schema",type:"picklist",reference:Ui,expects:Ni(e.map(vi),"|"),async:!1,options:e,message:t,get"~standard"(){return wi(this)},"~run"(e,t){return this.options.includes(e.value)?e.typed=!0:Ei(this,"type",e,t),e}}}function zi(e){return{kind:"schema",type:"string",reference:zi,expects:"string",async:!1,message:e,get"~standard"(){return wi(this)},"~run"(e,t){return"string"==typeof e.value?e.typed=!0:Ei(this,"type",e,t),e}}}function Gi(e){let t;if(e)for(const i of e)t?t.push(...i.issues):t=i.issues;return t}function Hi(e,t){return{kind:"schema",type:"union",reference:Hi,expects:Ni(e.map((e=>e.expects)),"|"),async:!1,options:e,message:t,get"~standard"(){return wi(this)},"~run"(e,t){let i,s,n;for(const a of this.options){const r=a["~run"]({value:e.value},t);if(r.typed){if(!r.issues){i=r;break}s?s.push(r):s=[r]}else n?n.push(r):n=[r]}if(i)return i;if(s){if(1===s.length)return s[0];Ei(this,"type",e,t,{issues:Gi(s)}),e.typed=!0}else{if(1===(null==n?void 0:n.length))return n[0];Ei(this,"type",e,t,{issues:Gi(n)})}return e}}}function ji(...e){return{...e[0],pipe:e,get"~standard"(){return wi(this)},"~run"(t,i){for(const s of e)if("metadata"!==s.kind){if(t.issues&&("schema"===s.kind||"transformation"===s.kind)){t.typed=!1;break}t.issues&&(i.abortEarly||i.abortPipeEarly)||(t=s["~run"](t,i))}return t}}}!function(e){e.TEXT="text",e.IMAGE="image",e.FILE="file",e.VIDEO="video",e.AUDIO="audio"}(ki||(ki={}));let $i=class e{constructor(e,t,i){this.scene=e,this.id=t,wt.isDef(i)&&(this.teamId=i)}toString(){return yt.PRIVATE===this.scene||yt.GROUP===this.scene?this.scene+"#"+this.id:this.scene+"#"+this.id+"#"+this.teamId}customerId(){if(yt.CS===this.scene)return this.id===this.teamId?li.Socket.user().id:this.id}static byScene(t,i,s){return new e(t,i,s)}static byIMMessage(t){let i,s,n=t.scene();if(n===yt.PRIVATE){let e=t.senderId,i=t.targetId();s=li.Socket.user().id===e?i:e}else if(n===yt.GROUP)s=t.targetId();else{if(n!==yt.CS)throw{code:400,content:`scene ${n} not exists`};s=t.targetId(),i=t.teamId}return new e(n,s,i)}static byMessageReadRemoteEvent(t){let i,s=t.scene,n=t.targetId,a=t.markerId,r=t.teamId;return s===yt.PRIVATE?i=li.Socket.user().id===a?n:a:s===yt.GROUP?i=n:s===yt.CS&&(i=n===r?a===li.Socket.user().id?r:a:a===li.Socket.user().id?n:r),new e(s,i,r)}static byIMMessageDeletedEvent(t){let i=t.scene,s=t.deleterId;if(i===yt.PRIVATE){let n=li.Socket.user().id===s?t.targetId:s;return new e(i,n)}if(i===yt.GROUP)return new e(i,t.targetId)}static byConversationDTO(e){let t=e.lastMessage;return this.byIMMessage(t)}static byConversationId(t,i){let s;if(t===yt.PRIVATE){let e=i.split(":",2);s=e[0]===li.Socket.user().id?e[1]:e[0]}else s=i;return new e(t,s)}},qi=class{clearUseLessAttribute(){delete this.buildOptions}isOtherSent(){return this.senderId!==li.Socket.user().id}},Wi=class extends qi{constructor(){super(...arguments),this.read=!1}scene(){return yt.PRIVATE}targetId(){return this.receiverId}},Ji=class extends qi{scene(){return yt.GROUP}targetId(){return this.groupId}},Yi=class extends qi{constructor(){super(...arguments),this.accepted=!1}scene(){return yt.CS}targetId(){return li.Socket.user().id===this.customerId()?this.teamId:this.customerId()}sendByCustomer(){return this.to===this.teamId}customerId(){return this.sendByCustomer()?this.senderId:this.to}isOtherSent(){return li.Socket.user().id===this.customerId()?this.senderId!==li.Socket.user().id:this.senderId===this.customerId()}};const Xi={maxString:e=>ji(zi(),Si(),Ci(e)),nonEmptyString:ji(zi(),Si()),object:Bi((e=>"object"==typeof e&&null!==e&&!Array.isArray(e)),"must be an object."),userId:ji(zi(),Si(),Ci(60),Bi((e=>{if(li.Socket.user().id===e)throw new Error("id can not be the same as your id");return e}))),sceneType:ji(zi(),Ui([yt.PRIVATE,yt.GROUP,yt.CS]))},Qi={onSuccess:Fi(Ri()),onFailed:Fi(Ri())},Zi=Li({appkey:Xi.nonEmptyString,host:Xi.nonEmptyString,modules:Ii(Xi.nonEmptyString),allowNotification:Fi(Di()),forceTLS:Fi(Di()),supportOldBrowser:Fi(Di()),reactNativeOptions:Fi(Li({platform:_i(),asyncStorage:_i()})),customProvider:Fi(Li({loadConversations:Ri(),loadHistory:Ri()}))}),Ki=ji(Li(Object.assign({id:Fi(Xi.nonEmptyString),data:Fi(Xi.object),otp:Fi(Xi.nonEmptyString),wxmpId:Fi(Li({appid:Xi.nonEmptyString,openid:Xi.nonEmptyString})),onProgress:Fi(Ri())},Qi)),Ti(xi([["id"],["data"]],(e=>!si.modules.get("GIM")||e.id&&e.data),"id and data are required for IM module"),["data"])),es=Li({id:Xi.userId,data:Xi.object}),ts=ji(Hi([Li({type:Xi.sceneType,id:Xi.userId,data:Xi.object}),Li({type:Xi.sceneType,receivers:Ii(es)})]),Bi((e=>{if(!e.receivers)return!0;const t=e.receivers.map((e=>e.id));if(Array.from(new Set(t)).length<t.length)throw new Error("receivers cannot have duplicate ids");if(e.type===yt.PRIVATE&&e.receivers.length>200)throw new Error("private message cannot have more than 200 receivers");if(e.type===yt.GROUP&&e.receivers.length>3)throw new Error("group message cannot have more than 3 receivers");return!0}))),is=Fi(Li({template_id:zi(),url:Fi(zi()),miniprogram:Fi(Li({appid:zi(),pagepath:zi()})),data:Xi.object})),ss=Fi(Li({title:Xi.maxString(32),body:Xi.maxString(50),sound:Fi(zi()),badge:Fi(zi()),vendorOptions:Fi(Li({huawei:Fi(Li({category:zi()})),xiaomi:Fi(Li({channel_id:zi()})),oppo:Fi(Li({channel_id:zi()})),vivo:Fi(Li({classification:Oi(),category:zi()}))}))})),ns={image:["gif","jpg","png","jpeg"],video:["avi","mov","rmvb","rm","flv","mp4","3gp","quicktime"],audio:["mp3","ogg","wav","wma","ape","acc","mpeg"]},as=(e=30,t)=>ji(_i(),Si(),Bi((i=>{var s;if(i.size&&i.size>1024*e*1024)throw new Error(`File size must be <= ${e}MB.`);if(t){const e=i.type||i.tempFile&&i.tempFile.type;if(!e)return!0;const n=null===(s=e.split("/")[1])||void 0===s?void 0:s.toLowerCase();if(n&&!ns[t].includes(n))throw new Error(`Only ${ns[t].join(",")} is supported for ${t}.`)}return!0})));function rs(e){return Li(Object.assign(Object.assign(Object.assign({},e),{to:ts,notification:ss,wxmpTemplateMsg:is,beforeSend:Fi(Ri()),onProgress:Fi(Ri())}),Qi))}const os=function e(t,i,s){return{kind:"schema",type:"variant",reference:e,expects:"Object",async:!1,key:t,options:i,message:s,get"~standard"(){return wi(this)},"~run"(e,t){const i=e.value;if(i&&"object"==typeof i){let s,n=0,a=this.key,r=[];const o=(e,l)=>{for(const c of e.options){if("variant"===c.type)o(c,new Set(l).add(c.key));else{let e=!0,o=0;for(const s of l){const l=c.entries[s];if(s in i?l["~run"]({typed:!1,value:i[s]},t).issues:"exact_optional"!==l.type&&"optional"!==l.type&&"nullish"!==l.type){e=!1,a!==s&&(n<o||n===o&&s in i&&!(a in i))&&(n=o,a=s,r=[]),a===s&&r.push(c.entries[s].expects);break}o++}if(e){const e=c["~run"]({value:i},t);(!s||!s.typed&&e.typed)&&(s=e)}}if(s&&!s.issues)break}};if(o(this,new Set([this.key])),s)return s;Ei(this,"type",e,t,{input:i[a],expected:Ni(r,"|"),path:[{type:"object",origin:"value",input:i,key:a,value:i[a]}]})}else Ei(this,"type",e,t);return e}}}("type",[rs({type:Pi(ki.TEXT),text:Xi.maxString(2500)}),rs({type:Pi(ki.IMAGE),file:as(30,"image")}),rs({type:Pi(ki.VIDEO),file:as(30,"video")}),rs({type:Pi(ki.AUDIO),file:as(30,"audio")}),rs({type:Pi(ki.FILE),file:as(500)}),rs({type:zi(),payload:Hi([Xi.maxString(2500),Xi.object])})]),ls=Li(Object.assign({messages:ji(Ii(Hi([Mi(Wi),Mi(Ji)])),Si(),Ci(20),Bi((e=>{const t=$i.byIMMessage(e[0]);for(let i=1;i<e.length;i++){const s=$i.byIMMessage(e[i]);if(s.scene!==t.scene||s.id!==t.id)throw new Error("each message must be from the same friend or group");const n=e[i];if(n.status!==ft.SUCCESS)throw new Error(`message[${i}] is '${n.status}' and cannot be recalled`);if(n.recalled)throw new Error(`message[${i}] has been recalled`);if(n.senderId!==li.Socket.user().id)throw new Error("it is not allowed to recall messages sent by others")}return!0})))},Qi)),cs=Li(Object.assign({messages:ji(Ii(Hi([Mi(Wi),Mi(Ji),Mi(Yi)])),Si(),Ci(20),Bi((e=>{const t=$i.byIMMessage(e[0]);for(let i=1;i<e.length;i++){const s=$i.byIMMessage(e[i]);if(s.scene!==t.scene||s.id!==t.id)throw new Error("each message must be from the same friend or group");const n=e[i];if(n.status===ft.SENDING)throw new Error(`message[${i}] is '${n.status}' and cannot be deleted`)}return!0})))},Qi)),ds=e=>ji(zi(),Si(),Bi((t=>{if(!t)throw new Error(`${e} is required.`);return t}))),us=ds("customId"),ms=ds("id"),hs=Li({userId:Xi.nonEmptyString}),ps=Li({groupId:Xi.nonEmptyString}),gs=Li({type:Xi.sceneType,id:Xi.nonEmptyString}),ys=Hi([hs,ps,gs]),fs=Li({customer:es}),vs=Li({customerId:Xi.nonEmptyString,agentId:Xi.nonEmptyString}),Es=ji(Hi([zi(),Oi()]),Bi((e=>{if(!e&&0!==e)throw new Error("param require string or number.");return!0}))),ws=(e=100)=>ji(Ii(Es),Si(),Ci(e),Bi((e=>{if(e.some((e=>0===e.length)))throw new Error("array has empty item.");if(Array.from(new Set(e)).length<e.length)throw new Error("Duplicate element found in array");return!0}))),Ns=Li(Object.assign({channel:Es,message:Xi.maxString(2500),qos:Fi(Ui([0,1])),notification:ss,wxmpTemplateMsg:is,accessToken:Fi(zi())},Qi)),ks=ji(Li({channel:Fi(Es),channels:Fi(ws(100)),presence:Fi(Li({enable:Di()})),accessToken:Fi(zi()),onMessage:Ri()}),Ti(xi([["channel"],["channels"]],(e=>!e.channel!=!e.channels),"Must provide either channel or channels, but not both or neither"),["channels"]),Ti(xi([["channel"],["presence"]],(e=>{var t;return!(null===(t=e.presence)||void 0===t?void 0:t.enable)||!!li.Socket.user().id}),"Subscription failed. If presence is enable, the id must be specified when calling the connect method"),["presence"])),bs=Li({userIds:ws(100)}),Cs=Li({groupIds:ws(100)}),Ss=Li({channel:Es}),xs=Li({channel:Es,membersLimit:Fi(ji(Oi(),function e(t,i){return{kind:"validation",type:"max_value",reference:e,async:!1,expects:`<=${t instanceof Date?t.toJSON():vi(t)}`,requirement:t,message:i,"~run"(e,t){return!e.typed||e.value<=this.requirement||Ei(this,"value",e,t,{received:e.value instanceof Date?e.value.toJSON():vi(e.value)}),e}}}(100))),onPresence:Ri()}),Vs=Li({groupId:Es});function Ts(e,t){var i;try{return function(e,t,i){const s=e["~run"]({value:t},fi(void 0));if(s.issues)throw new bi(s.issues);return s.value}(e,t)}catch(s){if(s instanceof bi){const e=s.issues[0],t=null===(i=e.path)||void 0===i?void 0:i.map((e=>e.key)).filter(Boolean),n=(null==t?void 0:t.join("."))||"value";throw{code:400,content:{string:`TypeError: ${n} must be a string.`,number:`TypeError: ${n} must be a number.`,non_empty:`${n} cannot be empty.`,max_length:`${n} over max length.`,picklist:`${n} has invalid value.`}[e.type]||`${n}: ${e.message}`}}throw s}}const As=e=>Ts(us,e),_s=e=>Ts(ms,e),Is=e=>Ts(hs,e),Ds=e=>Ts(ps,e),Bs=e=>Ts(bs,e),Rs=e=>Ts(Cs,e),Ms=e=>Ts(Ss,e);var Ps,Os,Ls;!function(e){e.message="message",e.imMessage="imMessage",e.IM_MSG_SYNC="im:msg:sync",e.IM_MSG_NEW="im:msg:new",e.userPresence="userPresence",e.groupPresence="groupPresence",e.PS_PRESENCE_EVENT="PS_PRESENCE_EVENT",e.IM_MSG_READ="IM_MSG_READ",e.IM_MSG_DELETED="IM_MSG_DELETED",e.IM_MSG_RECALLED="IM_MSG_RECALLED",e.CS_ONLINE_CHANGED="CS_ONLINE_CHANGED"}(Ps||(Ps={})),function(e){e.CONNECTED="CONNECTED",e.RECONNECTED="RECONNECTED",e.DISCONNECTED="DISCONNECTED",e.LOST="LOST",e.EXPIRED_RECONNECTED="EXPIRED_RECONNECTED",e.NEW_MESSAGE="NEW_MESSAGE",e.CONNECTING="CONNECTING"}(Os||(Os={}));let Fs=class{constructor(e){this.membersLimit=10,this.queried=!1,this.channel=e}onPresence(e){return Dt(this,void 0,void 0,(function*(){this.queried?this.update(e):yield this.queryPromise,this.on({channel:this.channel,action:e.action,member:e.member,time:e.time,amount:this.amount,members:this.membersByLimit()})}))}membersByLimit(){return this.members.slice(0,this.membersLimit)}subscribe(e){return Dt(this,void 0,void 0,(function*(){if(e.membersLimit&&(this.membersLimit=Math.min(e.membersLimit,300)),!this.subscribed())try{yield this.doSubscribe()}catch(t){return void e.onFailed(t)}this.on=e.onPresence,e.onSuccess()}))}doSubscribe(){return this.doQuery(this.membersLimit),new Promise(((e,t)=>{let i=new hi({name:Tt.PUBSUB_PRESENCE_SUBSCRIBE,permission:ui.READ,params:{channel:this.channel},singleTimeout:At.commonRequestSingle,totalTimeout:At.commonRequestTotal,success:t=>{e()},fail:e=>{t(e)}});li.Socket.e(i)}))}doQuery(e){this.queryPromise=Us(this.channel,e),this.queryPromise.then((e=>{this.members=e.content.members,this.amount=e.content.amount,this.queried=!0})).catch((e=>{throw e}))}update(e){if(["join","back"].includes(e.action))this.members.unshift(e.member);else if(["leave","timeout"].includes(e.action)){let t=this.members.findIndex((t=>t.id===e.member.id));t>-1&&this.members.splice(t,1)}this.amount=e.amount}expire(){this.queried=!1,this.queryPromise=null}subscribed(){return void 0!==this.on}};function Us(e,t){return t||(t=10),new Promise(((i,s)=>{let n={channel:e,limit:t},a=new hi({name:Tt.PUBSUB_PRESENCE_HERENOW,permission:ui.READ,params:n,singleTimeout:At.commonQuerySingle,totalTimeout:At.commonQueryTotal,success:e=>{i(e)},fail:e=>{s(e)}});li.Socket.e(a)}))}class zs{constructor(){this.publisher=new class{publish(e){Ts(Ns,e),e.channel=e.channel.toString();let t={channel:e.channel,content:e.message,nt:e.notification,at:e.accessToken,guid:di.get(),q:e.qos};e.wxmpTemplateMsg&&(t.wxmpTemplateMsg=yi(e.wxmpTemplateMsg),t.wxmpTemplateMsg.data=JSON.stringify(t.wxmpTemplateMsg.data));let i=new hi({name:Tt.publish,params:t,unique:!0,singleTimeout:At.commonRequestSingle,totalTimeout:At.commonRequestTotal,permission:ui.WRITE,success:function(t){It.onSuccess(e,{code:200,content:"ok"})},fail:function(t){It.onFailed(e,{code:t.resultCode,content:t.content})}});li.Socket.e(i)}},this.subscriber=new class{constructor(){this.subscriptions=[],li.Socket.onMessage(Ps.message,this.onNewMessage.bind(this)),li.Socket.on(Os.EXPIRED_RECONNECTED,this.expiredResubscribe.bind(this)),li.Socket.on(Os.RECONNECTED,this.resubscribePresenceChannel.bind(this))}expiredResubscribe(){this.subscriptions.forEach((e=>{this.doSubscribe(e,!1)}))}resubscribePresenceChannel(){this.subscriptions.forEach((e=>{let t=e.options;t.presence&&t.presence.enable&&this.doSubscribe(e,!0)}))}onNewMessage(e){if(e.n.indexOf("_presence")>-1)return;e.a&&li.Socket.sendAck("ack",{i:e.i,c:e.n});let t={time:e.t,channel:e.n,content:e.c};this.createNotification(e),this.findSubscriptionByChannel(t.channel).options.onMessage(t)}createNotification(e){const t=li.N.supportAppNotification();if(!wt.isObject(e.nt)||!t)return;const i={ch:e.n,ctt:e.c};li.N.createLocalNotification(e.nt.t,e.nt.c,i,e.nt.sound,e.nt.badge)}subscribe(e){Ts(ks,e);let t=new class{constructor(e){if(this.options=e,this.channels=e.channels||[e.channel],!wt.isEmpty(e.channel)){let t=e.channel.toString();this.channels=[t]}wt.isEmpty(e.channels)||(this.channels=e.channels.toString().split(","))}}(e);this.doSubscribe(t,!1).then((()=>{this.subscriptions.push(t),It.onSuccess(e,{code:200,content:"ok"})})).catch((t=>{It.onFailed(e,{code:t.resultCode,content:t.content})}))}doSubscribe(e,t){let i=e.options;return new Promise(((s,n)=>{let a=new hi({name:Tt.subscribe,permission:ui.READ,singleTimeout:At.commonRequestSingle,totalTimeout:At.commonRequestTotal,params:{channels:e.channels,accessToken:i.accessToken,presence:i.presence,resubscribe:t},success:()=>{s()},fail:e=>{n(e)}});li.Socket.e(a)}))}unsubscribe(e){Ms(e),e.channel=e.channel.toString();const t=this.findSubscriptionByChannel(e.channel);if(!t)return void e.onFailed({code:400,content:"channel["+e.channel+"] is not subscribed"});let i=new hi({name:Tt.unsubscribe,params:{channel:e.channel,presence:t.options.presence},permission:ui.READ,singleTimeout:At.commonRequestSingle,totalTimeout:At.commonRequestTotal,success:()=>{e.onSuccess({code:200,content:"ok"}),this.removeChannel(e.channel)},fail:function(t){e.onFailed({code:t.resultCode,content:t.content})}});li.Socket.e(i)}removeChannel(e){for(let t=this.subscriptions.length-1;t>=0;t--){const i=this.subscriptions[t].channels,s=i.indexOf(e);if(s>-1){i.splice(s,1),0===i.length&&this.subscriptions.splice(t,1);break}}}findSubscriptionByChannel(e){let t=!1,i=null;for(let s=this.subscriptions.length-1;s>=0;s--){let n=this.subscriptions[s].channels;for(let a=0;a<n.length;a++)if(n[a]==e){t=!0,i=this.subscriptions[s];break}if(t)break}return i}},this.presence2=new class{constructor(){this.channelPresenceMap=new Map,this.onPresenceEvent=e=>{let t=this.channelPresenceMap.get(e.channel);null==t||t.onPresence(e)},this.expireAllChannelPresences=()=>{this.channelPresenceMap.forEach(((e,t)=>{e.expire()}))},this.resubscribe=()=>{this.channelPresenceMap.forEach(((e,t)=>{e.subscribed()&&e.doSubscribe()}))},li.Socket.on(Os.LOST,this.expireAllChannelPresences),li.Socket.on(Os.RECONNECTED,this.resubscribe),li.Socket.onMessage(Ps.PS_PRESENCE_EVENT,this.onPresenceEvent)}hereNow(e){Ms(e);let t,i=this.channelPresenceMap.get(e.channel.toString());i&&i.queryPromise?(e.limit&&e.limit>i.membersLimit&&i.doQuery(e.limit),t=i.queryPromise):t=Us(e.channel,e.limit),t.then((t=>{e.onSuccess(t)})).catch((t=>{e.onFailed(t)}))}subscribe(e){Ts(xs,e);let t=e.channel.toString(),i=this.channelPresenceMap.get(t);i||(i=new Fs(t),this.channelPresenceMap.set(t,i)),i.subscribe(e)}unsubscribe(e){Ms(e);let t=e.channel.toString();if(this.channelPresenceMap.get(t)){let i=new hi({name:Tt.PUBSUB_PRESENCE_UNSUBSCRIBE,permission:ui.READ,singleTimeout:At.commonRequestSingle,totalTimeout:At.commonRequestTotal,params:{channel:t},success:i=>{this.channelPresenceMap.delete(t),e.onSuccess()},fail:t=>{e.onFailed(t)}});li.Socket.e(i)}else e.onSuccess()}},this.histories=new class{get(e){Ms(e),e.channel=e.channel.toString();let t=new hi({name:Tt.historyMessages,permission:ui.READ,params:e,singleTimeout:At.commonQuerySingle,totalTimeout:At.commonQueryTotal,success:t=>{It.onSuccess(e,{code:t.resultCode||t.code||200,content:t.content})},fail:t=>{It.onFailed(e,{code:t.resultCode||t.code,content:t.content})}});li.Socket.e(t)}}}static init(){this.instance=new zs}publish(e){this.publisher.publish(e)}subscribe(e){this.subscriber.subscribe(e)}unsubscribe(e){this.subscriber.unsubscribe(e)}subscribePresence(e){this.presence2.subscribe(e)}unsubscribePresence(e){this.presence2.unsubscribe(e)}history(e){this.histories.get(e)}hereNow(e){this.presence2.hereNow(e)}}let Gs=class e extends ii{static init(){return this.module=new e,this.module.name=this.GWS_MODULE_NAME,this.initGN(),this.module}static initGN(){gi.addAssembler(new class{assemble(e){return{channel:e.ch,content:e.ctt}}support(e){return!!e.ch}})}postConnect(){zs.init()}static check(){if(!this.module)throw{code:400,content:"PubSub not initialized. Please include 'PUBSUB' in the 'modules' during GoEasy initialization."}}};Gs.GWS_MODULE_NAME="GWS";let Hs=class{constructor(){}};!function(e){e.aliYun="ALI",e.qiNiu="QN",e.tencent="TX",e.s3="S3"}(Ls||(Ls={}));let js=new class extends Hs{constructor(){super()}upload(e,t){try{return e.storageLocation===Ls.s3?this.uploadToS3(e,t):(delete e.parameters.fileRes,new Promise(((i,s)=>{uni.uploadFile({url:e.host,filePath:this.getTempFilePath(e),name:"file",formData:e.parameters,success(e){200===e.statusCode?i():s({code:e.statusCode,content:e.errMsg})},fail(e){s({code:500,content:e.errMsg})}}).onProgressUpdate((e=>{t&&t(e)}))})))}catch(i){return new Promise(((e,t)=>{t({code:500,content:i})}))}}getTempFilePath(e){let t=e.file;return t.tempFilePath||t.fullPath||t.path}uploadToS3(e,t){return new Promise(((t,i)=>Dt(this,void 0,void 0,(function*(){const s=yield this.fileToArrayBuffer(e);uni.request({url:e.url,method:"PUT",header:e.headers,data:s,success(s){200===s.statusCode?(e.storageLocation===Ls.s3&&(e.url=e.url.split("?")[0]),t()):i({code:s.statusCode,content:s.errMsg})},fail(e){i({code:500,content:e.errMsg})}})}))))}fileToArrayBuffer(e){return new Promise(((t,i)=>{const s=this.getTempFilePath(e);if("undefined"!=typeof plus)plus.io.resolveLocalFileSystemURL(s,(e=>{e.file((e=>{let s=new plus.io.FileReader;s.onloadend=e=>{const i=uni.base64ToArrayBuffer(e.target.result.split(",")[1]);t(i)},s.onerror=function(e){i(e)},s.readAsDataURL(e)}))}),(e=>{i("Resolve file URL failed: "+e.message)}));else if("undefined"!=typeof FileReader){const s=new FileReader;s.onload=()=>{t(s.result)},s.onerror=e=>{i(e)},s.readAsArrayBuffer(e.file)}else if("object"==typeof wx&&wx.canIUse("getFileSystemManager"))try{const e=wx.getFileSystemManager().readFileSync(s);t(e)}catch(n){i(n)}}))}};const $s=new class extends Hs{upload(e,t){try{return e.storageLocation===Ls.s3?this.uploadToS3(e,t):new Promise(((i,s)=>{wx.uploadFile({url:e.host,filePath:this.getTempFilePath(e),name:"file",formData:e.parameters,success(e){200===e.statusCode?i():s({code:e.statusCode,content:e.errMsg})},fail(e){s({code:500,content:e.errMsg})}}).onProgressUpdate((e=>{t&&t(e)}))}))}catch(i){return new Promise(((e,t)=>{t({code:500,content:i})}))}}getTempFilePath(e){let t=e.file||e.fileRes;return t.path||t.tempFilePath}uploadToS3(e,t){return new Promise(((t,i)=>Dt(this,void 0,void 0,(function*(){const s=yield this.fileToArrayBuffer(this.getTempFilePath(e));wx.request({url:e.url,method:"PUT",header:e.headers,data:s,success(s){200===s.statusCode?(e.storageLocation===Ls.s3&&(e.url=e.url.split("?")[0]),t()):i({code:s.statusCode,content:s.errMsg})},fail(e){i({code:500,content:e.errMsg})}})}))))}fileToArrayBuffer(e){return new Promise(((t,i)=>{try{t(wx.getFileSystemManager().readFileSync(e))}catch(s){i(s)}}))}},qs=new class extends Hs{constructor(){super()}upload(e,t){return new Promise(((i,s)=>{try{const n=new XMLHttpRequest,a=e.storageLocation===Ls.s3,r=a?"PUT":"POST",o=a?e.url:e.host;n.open(r,o,!0);for(let t in e.headers)n.setRequestHeader(t,e.headers[t]);n.upload.onprogress=function(e){t&&t(e)},n.upload.onloadstart=function(e){t&&t(e)},n.upload.onloadend=function(e){t&&t(e)};let l=new FormData;for(let t in e.parameters)"fileRes"==t?l.append("file",e.parameters[t]):l.append(t,e.parameters[t]);const c=a?e.file:l;n.send(c),n.onreadystatechange=function(){4==n.readyState&&(n.status>=200&&n.status<300||304==n.status?(a&&(e.url=e.url.split("?")[0]),i()):s({code:n.status,content:n.responseText}))}}catch(n){s({code:500,content:n})}}))}fileToArrayBuffer(e){return new Promise(((t,i)=>{const s=new FileReader;s.onload=()=>{t(s.result)},s.onerror=e=>{i(e)},s.readAsArrayBuffer(e)}))}},Ws=new class extends Hs{upload(e,t){try{return e.storageLocation===Ls.s3?this.uploadToS3(e,t):(delete e.parameters.fileRes,new Promise(((i,s)=>{my.uploadFile({url:e.host,filePath:this.getTempFilePath(e),fileType:"image",name:"file",formData:e.parameters,success(e){200===e.statusCode?i():s({code:e.statusCode,content:e.errMsg})},fail(e){s({code:500,content:e.errMsg})}}).onProgressUpdate((e=>{t&&t(e)}))})))}catch(i){return new Promise(((e,t)=>{t({code:500,content:i})}))}}getTempFilePath(e){let t=e.file;return t.path||t.tempFilePath}uploadToS3(e,t){return new Promise(((t,i)=>Dt(this,void 0,void 0,(function*(){const s=yield this.fileToArrayBuffer(this.getTempFilePath(e));my.request({url:e.url,method:"PUT",header:e.headers,data:s,success(s){200===s.statusCode?(e.storageLocation===Ls.s3&&(e.url=e.url.split("?")[0]),t()):i({code:s.statusCode,content:s.errMsg})},fail(e){i({code:500,content:e.errMsg})}})}))))}fileToArrayBuffer(e){return new Promise(((t,i)=>{my.getFileSystemManager().readFile({filePath:e,success:e=>{t(e.data)},fail(e){i(e)}})}))}},Js=new class extends Hs{upload(e,t){try{return e.storageLocation===Ls.s3?this.uploadToS3(e,t):(delete e.parameters.fileRes,new Promise(((i,s)=>{swan.uploadFile({url:e.host,filePath:this.getTempFilePath(e),name:"file",formData:e.parameters,success(e){200===e.statusCode?i():s({code:e.statusCode,content:e.errMsg})},fail(e){s({code:500,content:e.errMsg})}}).onProgressUpdate((e=>{t&&t(e)}))})))}catch(i){return new Promise(((e,t)=>{t({code:500,content:i})}))}}getTempFilePath(e){let t=e.file;return t.path||t.tempFilePath}uploadToS3(e,t){return new Promise(((t,i)=>Dt(this,void 0,void 0,(function*(){const s=yield this.fileToArrayBuffer(this.getTempFilePath(e));swan.request({url:e.url,method:"PUT",header:e.headers,data:s,success(s){200===s.statusCode?(e.storageLocation===Ls.s3&&(e.url=e.url.split("?")[0]),t()):i({code:s.statusCode,content:s.errMsg})},fail(e){i({code:500,content:e.errMsg})}})}))))}fileToArrayBuffer(e){return new Promise(((t,i)=>{swan.getFileSystemManager().readFile({filePath:e,success:e=>{t(e.data)},fail:e=>{i(e)}})}))}};const Ys=new class{constructor(){this.uploader={[ct.UNIAPP]:js,[Nt.MP_WX]:$s,[Nt.BROWSER]:qs,[Nt.MP_ALI]:Ws,[Nt.MP_BAIDU]:Js,[ct.REACT_NATIVE]:qs,[Nt.MP_BYTE]:$s}}upload(e,t){return Dt(this,void 0,void 0,(function*(){const i=ht.currentFramework(),s=kt.currentPlatform(),n=i===ct.UNKNOWN?s:i;let a=this.uploader[n];return yield a.upload(e,t),new class{constructor(e,t,i){this.storageLocation=e,this.url=t,this.name=i}}(e.storageLocation,e.url,e.newFileName)}))}};let Xs=class{constructor(e,t,i,s,n,a,r){this.storageLocation=e,this.host=t,this.headers=i,this.parameters=s,this.file=n,this.newFileName=a,this.url=r}},Qs=class{constructor(){}newFileName(e){return e&&e.newFilename||""}},Zs=new class extends Qs{constructor(){super()}url(e){return e.host+"/"+e.dir+"/"+this.newFileName(e)}build(e,t,i){let s,n=this.newFileName(e);return s={key:e.dir+"/"+n,OSSAccessKeyId:e.accessKeyId,policy:e.policy,signature:e.signature,success_action_status:"200",fileRes:t},i&&(s={key:e.dir+"/"+n,OSSAccessKeyId:e.accessKeyId,policy:e.policy,signature:e.signature,success_action_status:"200","Content-Disposition":"attachment;filename="+t.name,fileRes:t}),new Xs(Ls.aliYun,e.host,null,s,t,n,this.url(e))}},Ks=new class extends Qs{constructor(){super()}url(e){return e.host+"/"+e.key}build(e,t,i){let s={"q-sign-algorithm":e.qSignAlgorithm,"q-ak":e.qAk,"q-key-time":e.qKeyTime,"q-signature":e.qSignature,policy:e.policy,"x-cos-security-token":e.xCosSecurityToken,success_action_status:"200",key:e.key,fileRes:t};return i&&(s={"q-sign-algorithm":e.qSignAlgorithm,"q-ak":e.qAk,"q-key-time":e.qKeyTime,"q-signature":e.qSignature,policy:e.policy,"x-cos-security-token":e.xCosSecurityToken,success_action_status:"200",key:e.key,"Content-Disposition":`attachment;filename=${t.name}`,fileRes:t}),new Xs(Ls.tencent,e.host,null,s,t,e.key,this.url(e))}},en=new class extends Qs{constructor(){super()}url(e){return e.uploadUrl}build(e,t,i){const s={file:t};return new Xs(Ls.s3,null,{"Content-Type":"application/octet-stream"},s,t,t.name,this.url(e))}},tn=class{constructor(){this.requestBuilder=new class{constructor(){this.uploadTokenResolver=new class{resolve(e){return new Promise(((t,i)=>{let s=new hi({name:"uploadToken",params:{filename:e},permission:ui.WRITE,singleTimeout:At.commonRequestSingle,totalTimeout:At.commonRequestTotal,fail(e){i(e.content)},success(e){200===e.code?t(e.content):i(e.content)}});li.Socket.e(s)}))}}}builder(e){if(e===Ls.aliYun)return Zs;if(e===Ls.tencent)return Ks;if(e===Ls.s3)return en;throw new Error("Only Ali OSS and Tencent COS are supported, unknown storage location:"+e)}build(e,t,i){return Dt(this,void 0,void 0,(function*(){try{let s=yield this.uploadTokenResolver.resolve(t),n=this.builder(s.vendor).build(s,e,i);return Promise.resolve(n)}catch(s){return Promise.reject(s)}}))}},this.fileUploader=Ys}upload(e,t,i,s){return Dt(this,void 0,void 0,(function*(){try{let n=yield this.requestBuilder.build(e,t,s);return this.fileUploader.upload(n,i)}catch(n){return Promise.reject(n)}}))}};var sn,nn,an;!function(e){e.MESSAGE_SENDING="IM_INTERNAL_MESSAGE_SENDING",e.MESSAGE_SEND_SUCCESS="IM_INTERNAL_MESSAGE_SEND_SUCCESS",e.MESSAGE_SEND_FAILED="IM_INTERNAL_MESSAGE_SEND_FAILED",e.MESSAGE_RECEIVED="IM_INTERNAL_MESSAGE_RECEIVED",e.MESSAGE_RECALLED="IM_INTERNAL_MESSAGE_RECALLED",e.MAX_MESSAGE_CHANGED="IM_INTERNAL_MAX_MESSAGE_CHANGED",e.MAX_MESSAGE_DELETED="IM_INTERNAL_MAX_MESSAGE_DELETED",e.UNREAD_AMOUNT_CHANGED="IM_INTERNAL_UNREAD_MESSAGE_CHANGED",e.CS_ONLINE_SUCCESS="CS_ONLINE_SUCCESS",e.CS_OFFLINE_SUCCESS="CS_OFFLINE_SUCCESS",e.CS_ACCEPTED="CS_ACCEPTED",e.CS_ENDED="CS_ENDED",e.CS_TRANSFER="CS_TRANSFER",e.CS_AGENT_MESSAGE_RECEIVED="CS_AGENT_MESSAGE_RECEIVED"}(sn||(sn={}));let rn=class extends class{}{constructor(){super(...arguments),this.goEasyUploader=new tn}improve(e){let t=e.message;return new Promise(((e,i)=>{let s,n,a=t.buildOptions.createOptions;t.type===ki.VIDEO?(n=t.payload,s=n.video.name):(n=t.payload,s=n.name),this.goEasyUploader.upload(a.file,s,a.onProgress,t.type===ki.FILE).then((i=>{i.storageLocation!==Ls.s3&&(i.url=encodeURI(i.url)),this.setPayload(i,t),e()})).catch((e=>{i(e)}))}))}setPayload(e,t){t.payload.url=e.url}},on=class extends rn{setPayload(e,t){let i,s=t.payload;switch(s.video.url=e.url,s.video.name=e.name,s.thumbnail.height>200&&(s.thumbnail.height=200,s.thumbnail.width=200*s.video.width/s.video.height),e.storageLocation){case Ls.aliYun:i="?x-oss-process=video/snapshot,t_0000,f_jpg,h_"+s.thumbnail.height+",m_fast,ar_auto";break;case Ls.tencent:i="?ci-process=snapshot&time=1&format=jpg&height="+s.thumbnail.height;break;case Ls.s3:i="?process=video&height="+s.thumbnail.height;break;default:throw new Error("Only Ali OSS and Tencent COS are supported, unknown storage location:"+e.storageLocation)}s.thumbnail.url=e.url+i}},ln=class extends rn{setPayload(e,t){let i,s=t.payload;s.url=e.url;const n=s.height>200?200:s.height;switch(e.storageLocation){case Ls.aliYun:i="?x-oss-process=image/resize,m_lfit,h_"+n;break;case Ls.tencent:i=`?imageMogr2/thumbnail/x${n}`;break;case Ls.s3:i=`?process=image&height=${n}`;break;default:throw new Error("Only Ali OSS and Tencent COS are supported, unknown storage location:"+e.storageLocation)}s.thumbnail=e.url+i}},cn=class e extends ai{static init(){this.i=new e}},dn=class{insert(e,t){let i=this.binarySearch(e,t);if(i>=0)e.splice(i,1,t);else{let s=-i-1;e.splice(s,0,t)}}binarySearch(e,t){let i=0,s=e.length-1;for(;i<=s;){let n=s+i>>1,a=this.compare(t,e[n]);if(a>0)i=n+1;else{if(!(a<0))return n;s=n-1}}return-i-1}},un=class e{constructor(e){this.messages=new Array,this.allLoaded=!1,this.target=e}all(){return this.messages}sliceOverLengthMessages(){this.messages.length>e.CACHE_MAX_LENGTH&&(this.messages=this.messages.slice(-e.CACHE_MAX_LENGTH),!0===this.allLoaded&&(this.allLoaded=!1))}getMaxMessage(){return this.messages[this.messages.length-1]}loadLocalMessages(e,t){let i=[],s=this.messages.length;if(t){if(s>0){let n=this.messages[0].timestamp,a=this.messages[s-1].timestamp;if(t>=n&&t<=a)for(let r=s-1;r>=0;r--){let s=this.messages[r];if(s.timestamp<t){if(!(i.length<e))break;i.unshift(s)}}}}else i=this.messages.slice(-e);return i}cacheServerMessages(t,i){let s=this.messages[0];this.messages.length<e.CACHE_MAX_LENGTH&&(!t.lastTimestamp||this.messages.length>0&&s.timestamp===t.lastTimestamp)&&(i.forEach((t=>{e.sortedInserter.insert(this.messages,t)})),i.length<t.limit&&(this.allLoaded=!0))}findMessageByTime(e){return this.messages.find((t=>e===t.timestamp))}findMessagesByTimes(e){let t=[];return e.forEach((e=>{let i=this.findMessageByTime(e);wt.isDef(i)&&t.push(i)})),t}existsMessage(e){return this.findMessageIndexById(e)>-1}findMessageIndexById(e){return this.messages.findIndex((t=>e===t.messageId))}deleteMessage(e){let t=this.findMessageIndexById(e);t>=0&&this.messages.splice(t,1)}recallMessage(e){return e.times.map((e=>this.findMessageByTime(e))).filter((e=>wt.isDef(e))).map((t=>(t.recalled=!0,t.recaller=e.recaller,t)))}isEmpty(){return 0===this.messages.length}deleteMessages(e){e.forEach((e=>{this.deleteMessage(e.messageId)}))}saveMessage(t){e.sortedInserter.insert(this.messages,t),this.deleteGroupConversationMessage(),this.sliceOverLengthMessages()}deleteGroupConversationMessage(){this.target.scene===yt.GROUP&&this.messages.length>=2&&1===this.messages[0].x&&this.messages.shift()}maxSuccessMessageTime(){for(let e=this.messages.length-1;e>=0;e--)if(this.messages[e].status===ft.SUCCESS)return this.messages[e].timestamp;return 0}minTime(){return this.isEmpty()?0:this.messages[0].timestamp}correctPosition(e){this.deleteMessage(e.messageId),this.saveMessage(e)}};un.CACHE_MAX_LENGTH=200,un.sortedInserter=new class extends dn{compare(e,t){let i=e.timestamp-t.timestamp;return i>0?1:0===i?0:-1}};!function(e){e.ACCEPT="CS_ACCEPT",e.END="CS_END",e.TRANSFER="CS_TRANSFER"}(nn||(nn={}));let mn=class{build(e){let t,i=e.t;i===yt.PRIVATE?(t=new Wi,t.read=!1,e.r?t.receiverId=e.r:t.receiverId=li.Socket.user().id):i===yt.GROUP?(t=new Ji,t.groupId=e.r,t.senderData=e.d?JSON.parse(e.d):{}):i===yt.CS&&(t=new Yi,t.to=e.r,t.teamId=e.tid,t.senderData=e.d?JSON.parse(e.d):{},t.accepted=e.accepted,t.customerId()!==li.Socket.user().id&&(t.sessionId=e.sessionId)),t.senderId=e.s,t.messageId=e.i,t.timestamp=e.ts,t.type=e.mt;let s=e.p;if(wt.isDef(s))if(i===yt.CS&&t.type===nn.TRANSFER){let e=JSON.parse(s);e.transferTo.data=JSON.parse(e.transferTo.data),t.payload=e}else t.payload=JSON.parse(s);let n=e.rc;return wt.isDef(n)&&!0===n?(t.recalled=n,t.recaller=e.recaller):t.recalled=!1,t.status=ft.SUCCESS,t}},hn=class{constructor(){this.builder=new mn}sync(e,t,i,s,n){let a=new class{constructor(e,t,i,s,n){this.scene=e,this.id=t,this.after=i,this.min=s,this.teamId=n}}(e,t,i,s,n);return new Promise(((e,t)=>{let i=new hi({name:Tt.IM_HISTORY_CHANGE,params:a,permission:ui.READ,singleTimeout:At.commonQuerySingle,totalTimeout:At.commonQueryTotal,fail:e=>{t(e)},success:t=>{let i=t.content;e(i)}});li.Socket.e(i)}))}loadServerMessages(e,t){return new Promise(((i,s)=>{let n=new hi({name:Tt.IM_HISTORY,params:t,permission:ui.READ,singleTimeout:At.commonQuerySingle,totalTimeout:At.commonQueryTotal,fail:e=>{i({messages:[],userOffsets:[]})},success:t=>{let s=t.content;s.messages=this.convertServerMessages(e,s.messages),i(s)}});li.Socket.e(n)}))}convertServerMessages(e,t){let i=[],s=e.scene,n=e.id;return t.forEach((t=>{if(t.t=s,yt.PRIVATE===s)t.r=t.s===li.Socket.user().id?n:li.Socket.user().id;else if(yt.GROUP===s)t.r=n;else if(yt.CS===s){let i=e.customerId(),s=e.teamId;i===li.Socket.user().id?t.r=s:t.r=i}let a=this.builder.build(t);i.push(a)})),i}updateServerOffsets(e,t){return Dt(this,void 0,void 0,(function*(){let i=new class{constructor(e,t,i,s){this.id=e,this.scene=t,this.lastTimestamp=i,this.teamId=s}}(t.id,t.scene,e,t.teamId);return new Promise(((e,t)=>{let s=new hi({name:Tt.IM_MARK_AS_READ,params:i,permission:ui.WRITE,singleTimeout:At.commonRequestSingle,totalTimeout:At.commonRequestTotal,success:t=>{e(t)},fail:e=>{t(e)}});li.Socket.e(s)}))}))}};hn.instance=new hn;let pn=class{constructor(e,t,i,s,n){this.id=e,this.scene=t,this.lastTimestamp=i,this.limit=s,this.teamId=n}},gn=class{constructor(e,t,i,s){this.scene=e,this.conversationId=t,this.recaller=i,this.times=s}},yn=class{static init(){this.eventCenter=new class{constructor(){this.emitter=new oi}on(e,t){if(!ri.isString(e))throw Error("event require a string.");if(!ri.isFunction(t))throw Error("callback must be a function");this.emitter.on(e,t)}fire(e,t){this.emitter.emit(e,t)}off(e,t){this.emitter.off(e,t)}}}static on(e,t){this.eventCenter.on(e,t)}static fire(e,t){this.eventCenter.fire(e,t)}static off(e,t){this.eventCenter.off(e,t)}};!function(e){e.PRIVATE_MESSAGE_RECEIVED="PRIVATE_MESSAGE_RECEIVED",e.GROUP_MESSAGE_RECEIVED="GROUP_MESSAGE_RECEIVED",e.SYSTEM_MESSAGE_RECEIVED="SYSTEM_MESSAGE_RECEIVED",e.CONVERSATIONS_UPDATED="CONVERSATIONS_UPDATED",e.HISTORY_EXPIRED="HISTORY_EXPIRED",e.USER_PRESENCE="USER_PRESENCE",e.GROUP_PRESENCE="GROUP_PRESENCE",e.MESSAGE_DELETED="MESSAGE_DELETED",e.MESSAGE_READ="MESSAGE_READ",e.MESSAGE_RECALLED="MESSAGE_RECALLED",e.CS_MESSAGE_RECEIVED="CS_MESSAGE_RECEIVED",e.PENDING_CONVERSATIONS_UPDATED="PENDING_CONVERSATIONS_UPDATED"}(an||(an={}));let fn=class e{static init(t){e.instance=t}static loadCustomMessages(e,t,i){return Dt(this,void 0,void 0,(function*(){let s=t?t.messageId:"";return(yield this.instance.loadHistory(li.Socket.user().id,e.scene,e.id,s,i)).map((e=>this.convertAbstractMessage(e)))}))}static convertAbstractMessage(e){const t={type:e.type,timestamp:e.timestamp,senderId:e.senderId,messageId:e.messageId,payload:e.payload};if(e.groupId){const i=new Ji;return i.groupId=e.groupId,i.senderData=e.senderData,Object.assign(i,Object.assign(Object.assign({},t),{recalled:!1,status:ft.SUCCESS})),i}{const i=new Wi;return i.receiverId=e.receiverId,Object.assign(i,Object.assign(Object.assign({},t),{read:!0,recalled:!1,status:ft.SUCCESS})),i}}},vn=class{constructor(e){this.expiredTime=0,this.remoteHistory=hn.instance,this.target=e,this.userOffsets=new class{constructor(){this.offsetMap=new Map,this.markingTime=0,this.userId=li.Socket.user().id}updateOffset(e,t){let i=this.offsetMap.get(e);return wt.isDef(i)?t>i&&(this.offsetMap.set(e,t),!0):(this.offsetMap.set(e,t),!0)}updateUserOffsets(e){e.forEach((e=>{let t=e.userId,i=e.offset;this.updateOffset(t,i)}))}updateMyOffset(e){return this.updateOffset(this.userId,e)}myOffset(){return this.getOffset(this.userId)}getOffset(e){return this.offsetMap.get(e)||0}},this.messageCache=new un(e)}initMaxMessageAndOffsets(e,t){this.existsMessage(e)||(this.messageCache.saveMessage(e),t.forEach((e=>{this.markLocalMessagesRead(this.messageCache.all(),e.userId,e.offset,!1)})))}existsMessage(e){return this.messageCache.existsMessage(e.messageId)}loadHistory(e,t){return Dt(this,void 0,void 0,(function*(){return this.expiredTime>0&&!this.messageCache.isEmpty()&&(yield this.updateByServerChange()),wt.isUndef(t)?t=10:t>30&&(t=30),yield this.loadServerMessages(e,t)}))}loadCustomMessages(e,t,i){return Dt(this,void 0,void 0,(function*(){if(i>0&&void 0!==fn.instance){let s=e;return t&&(s=this.messageCache.findMessageByTime(t)),yield fn.loadCustomMessages(this.target,s,i)}return[]}))}loadServerMessages(e,t){return Dt(this,void 0,void 0,(function*(){let i=this.messageCache.loadLocalMessages(t,e);if(!1===this.messageCache.allLoaded&&i.length!==t){let s=t-i.length,n=i[0]?i[0].timestamp:e,a=new pn(this.target.id.toString(),this.target.scene,n,s,this.target.teamId),r=yield this.remoteHistory.loadServerMessages(this.target,a),o=r.messages;i=o.concat(i);const l=yield this.loadCustomMessages(i[0],e,t-i.length);o=o.concat(l),i=[...l,...i],this.messageCache.cacheServerMessages(a,o),r.userOffsets.forEach((e=>{this.userOffsets.updateOffset(e.userId,e.offset)})),this.userOffsets.offsetMap.forEach(((e,t)=>{this.markLocalMessagesRead(o,t,e,!1)}))}return i}))}deleteMessages(e){return Dt(this,void 0,void 0,(function*(){yield this.aopUnreadAmountMaxMessage((()=>Dt(this,void 0,void 0,(function*(){let t=e.messages;yield class{static deleteServerMessages(e){let t=new class{constructor(e){this.times=new Array;let t=e[0],i=$i.byIMMessage(t);this.scene=i.scene,this.targetId=i.id,e.forEach((e=>{e.status===ft.SUCCESS&&this.times.push(e.timestamp)})),this.times.sort(((e,t)=>e<t?-1:e==t?0:1))}}(e);return t.times.length<0?Promise.resolve():new Promise(((e,i)=>{let s=new hi({name:Tt.IM_DELETE_MESSAGE,params:t,permission:ui.WRITE,singleTimeout:At.commonQuerySingle,totalTimeout:At.commonQueryTotal,success:t=>{200===t.code?e(t):i(t)},fail:e=>{i(e)}});li.Socket.e(s)}))}}.deleteServerMessages(t),this.messageCache.deleteMessages(t),It.onSuccess(e)}))))}))}syncDeletedMessage(e,t){this.aopUnreadAmountMaxMessage((()=>{this.doSyncDeletedMessage(e,t)}))}doSyncDeletedMessage(e,t){if(e===li.Socket.user().id){let e=this.messageCache.findMessagesByTimes(t);this.messageCache.deleteMessages(e),e.length>0&&yn.fire(an.MESSAGE_DELETED,e)}}recallMessages(e){return Dt(this,void 0,void 0,(function*(){yield this.aopUnreadAmountMaxMessage((()=>Dt(this,void 0,void 0,(function*(){this.doRecall(e)}))))}))}doRecall(e){let t=this.messageCache.recallMessage(e);t.length>0&&yn.fire(an.MESSAGE_RECALLED,t)}expire(){this.messageCache.isEmpty()||(this.expiredTime=this.messageCache.maxSuccessMessageTime())}updateByServerChange(){return Dt(this,void 0,void 0,(function*(){yield this.aopUnreadAmountMaxMessage((()=>Dt(this,void 0,void 0,(function*(){let e=yield this.remoteHistory.sync(this.target.scene,this.target.id,this.expiredTime,this.messageCache.minTime(),this.target.teamId);e.userOffsets.forEach((e=>{this.markLocalMessagesRead(this.messageCache.all(),e.userId,e.offset,!0)}));let t=e.deletedMessageTimes;t.length>0&&this.doSyncDeletedMessage(li.Socket.user().id,t);let i=e.recalledMessages;i.length>0&&i.forEach((e=>{let t=new gn(this.target.scene,this.target.id,e.recaller,e.times);this.doRecall(t)})),this.expiredTime=0}))))}))}markRead(){return Dt(this,void 0,void 0,(function*(){yield this.aopUnreadAmountMaxMessage((()=>Dt(this,void 0,void 0,(function*(){let e=this.messageCache.maxSuccessMessageTime();e>this.userOffsets.myOffset()&&(this.userOffsets.markingTime=e,yield this.remoteHistory.updateServerOffsets(e,this.target),e===this.userOffsets.markingTime&&this.markLocalMessagesRead(this.messageCache.all(),li.Socket.user().id,e,!0))}))))}))}syncMarkedMessage(e){this.aopUnreadAmountMaxMessage((()=>{this.markLocalMessagesRead(this.messageCache.all(),e.markerId,e.time,!0)}))}onMessageSending(e){this.aopUnreadAmountMaxMessage((()=>{this.messageCache.saveMessage(e)}))}onMessageSendSuccess(e){this.aopUnreadAmountMaxMessage((()=>{this.messageCache.correctPosition(e),this.markLocalMessagesRead(this.messageCache.all(),li.Socket.user().id,e.timestamp,!0)}))}onMessageSendFailed(e){this.getMaxMessage()===e&&cn.i.fire(sn.MAX_MESSAGE_CHANGED,{message:e,receiver:this.to})}onMessageReceived(e){this.aopUnreadAmountMaxMessage((()=>{this.messageCache.saveMessage(e),this.markLocalMessagesRead(this.messageCache.all(),e.senderId,e.timestamp,!0)}))}aopUnreadAmountMaxMessage(e,t){return Dt(this,void 0,void 0,(function*(){try{let t=new class{constructor(e){this.history=e}pre(){this.oldLastMessage=this.history.getMaxMessage(),this.oldUnreadAmount=this.history.unreadAmount(),this.oldLastMessage&&(this.oldLastMessageRecalled=this.oldLastMessage.recalled,this.oldLastMessageRead=this.oldLastMessage.read,this.oldLastMessageStatus=this.oldLastMessage.status)}post(){let e,t,i,s=this.history.unreadAmount(),n=this.history.getMaxMessage();n&&(i=n.status,e=n.read,t=n.recalled);let a=this.history.target;if(this.oldLastMessage!==n||this.oldLastMessageRead!==e||this.oldLastMessageRecalled!==t||this.oldLastMessageStatus!==i)if(n){const e={message:n,receiver:this.history.to};cn.i.fire(sn.MAX_MESSAGE_CHANGED,e)}else cn.i.fire(sn.MAX_MESSAGE_DELETED,a);else this.oldUnreadAmount!==s&&cn.i.fire(sn.UNREAD_AMOUNT_CHANGED,a)}}(this);t.pre(),yield e(),t.post()}catch(i){It.onFailed(t,i)}}))}markLocalMessagesRead(e,t,i,s){if(this.userOffsets.updateOffset(t,i),this.isOtherUserId(t)){let t=this.markMySentRead(e,i);s&&t.length>0&&yn.fire(an.MESSAGE_READ,t)}else t===li.Socket.user().id&&this.markOthersSentRead(e,i)}markOthersSentRead(e,t){if(this.target.scene===yt.PRIVATE)for(let i=e.length-1;i>=0;i--){let s=e[i];if(s.isOtherSent()&&s.timestamp<=t){if(s.read)break;s.read=!0}}}markMySentRead(e,t){let i=new Array;if(this.target.scene===yt.PRIVATE)for(let s=e.length-1;s>=0;s--){let n=e[s];if(!n.isOtherSent()&&n.timestamp<=t&&n.status===ft.SUCCESS){if(n.read)break;n.read=!0,i.push(n)}}return i}isOtherUserId(e){if(this.target.scene===yt.CS){let t=this.target.customerId();return li.Socket.user().id===t?e!==li.Socket.user().id:e===t}return e!==li.Socket.user().id}unreadAmount(e){let t=0,i=this.userOffsets.myOffset(),s=this.messageCache.all();for(const n of s)n.isOtherSent()&&!1===n.recalled&&n.timestamp>i&&(t+=1);return t}getMaxMessage(e){return this.messageCache.getMaxMessage()}maxTime(e){let t=this.getMaxMessage();return wt.isDef(t)?t.timestamp:0}},En=class{constructor(e,t){this.teamId=e,this.customerId=t}},wn=class{};var Nn={exports:{}},kn=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,bn=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],Cn=function(e){var t=e,i=e.indexOf("["),s=e.indexOf("]");-1!=i&&-1!=s&&(e=e.substring(0,i)+e.substring(i,s).replace(/:/g,";")+e.substring(s,e.length));for(var n=kn.exec(e||""),a={},r=14;r--;)a[bn[r]]=n[r]||"";return-1!=i&&-1!=s&&(a.source=t,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a},Sn={exports:{}},xn={exports:{}},Vn=1e3,Tn=6e4,An=36e5,_n=24*An,In=function(e,t){t=t||{};var i,s=typeof e;if("string"===s&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var i=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*i;case"days":case"day":case"d":return i*_n;case"hours":case"hour":case"hrs":case"hr":case"h":return i*An;case"minutes":case"minute":case"mins":case"min":case"m":return i*Tn;case"seconds":case"second":case"secs":case"sec":case"s":return i*Vn;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:return}}}}(e);if("number"===s&&!1===isNaN(e))return t.long?Dn(i=e,_n,"day")||Dn(i,An,"hour")||Dn(i,Tn,"minute")||Dn(i,Vn,"second")||i+" ms":function(e){return e>=_n?Math.round(e/_n)+"d":e>=An?Math.round(e/An)+"h":e>=Tn?Math.round(e/Tn)+"m":e>=Vn?Math.round(e/Vn)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function Dn(e,t,i){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+i:Math.ceil(e/t)+" "+i+"s"}!function(e,t){function i(e){var i;function n(){if(n.enabled){var e=n,s=+new Date,a=s-(i||s);e.diff=a,e.prev=i,e.curr=s,i=s;for(var r=new Array(arguments.length),o=0;o<r.length;o++)r[o]=arguments[o];r[0]=t.coerce(r[0]),"string"!=typeof r[0]&&r.unshift("%O");var l=0;r[0]=r[0].replace(/%([a-zA-Z%])/g,(function(i,s){if("%%"===i)return i;l++;var n=t.formatters[s];if("function"==typeof n){var a=r[l];i=n.call(e,a),r.splice(l,1),l--}return i})),t.formatArgs.call(e,r),(n.log||t.log||console.log.bind(console)).apply(e,r)}}return n.namespace=e,n.enabled=t.enabled(e),n.useColors=t.useColors(),n.color=function(e){var i,s=0;for(i in e)s=(s<<5)-s+e.charCodeAt(i),s|=0;return t.colors[Math.abs(s)%t.colors.length]}(e),n.destroy=s,"function"==typeof t.init&&t.init(n),t.instances.push(n),n}function s(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=xn.exports=i.debug=i.default=i).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){var i;t.save(e),t.names=[],t.skips=[];var s=("string"==typeof e?e:"").split(/[\s,]+/),n=s.length;for(i=0;i<n;i++)s[i]&&("-"===(e=s[i].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(i=0;i<t.instances.length;i++){var a=t.instances[i];a.enabled=t.enabled(a.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var i,s;for(i=0,s=t.skips.length;i<s;i++)if(t.skips[i].test(e))return!1;for(i=0,s=t.names.length;i<s;i++)if(t.names[i].test(e))return!0;return!1},t.humanize=In,t.instances=[],t.names=[],t.skips=[],t.formatters={}}(0,xn.exports),function(e,t){function i(){var e;try{e=t.storage.debug}catch(i){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=mt.DEBUG),e}(t=e.exports=xn.exports).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var i=this.useColors;if(e[0]=(i?"%c":"")+this.namespace+(i?" %c":" ")+e[0]+(i?"%c ":" ")+"+"+t.humanize(this.diff),i){var s="color: "+this.color;e.splice(1,0,s,"color: inherit");var n=0,a=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(n++,"%c"===e&&(a=n))})),e.splice(a,0,s)}},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(i){}},t.load=i,t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},t.enable(i())}(Sn,Sn.exports);var Bn=Cn,Rn=Sn.exports("socket.io-client:url"),Mn=function(e,t){var i=e;t=t||"undefined"!=typeof location&&location,null==e&&(e=t.protocol+"//"+t.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?t.protocol+e:t.host+e),/^(https?|wss?):\/\//.test(e)||(Rn("protocol-less url %s",e),e=void 0!==t?t.protocol+"//"+e:"https://"+e),Rn("parse %s",e),i=Bn(e)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";var s=-1!==i.host.indexOf(":")?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+s+":"+i.port,i.href=i.protocol+"://"+s+(t&&t.port===i.port?"":":"+i.port),i},Pn={},On={}.toString,Ln=Array.isArray||function(e){return"[object Array]"==On.call(e)};!function(e){Sn.exports("socket.io-parser");var t=Mt.exports,i=Ln;function s(){}e.protocol=4,e.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],e.CONNECT=0,e.DISCONNECT=1,e.EVENT=2,e.ACK=3,e.ERROR=4,e.BINARY_EVENT=5,e.BINARY_ACK=6,e.Encoder=s,e.Decoder=a;var n=e.ERROR+'"encode error"';function a(){this.reconstructor=null}function r(t){return{type:e.ERROR,data:"parser error: "+t}}s.prototype.encode=function(t,i){i([function(t){var i=""+t.type;if(e.BINARY_EVENT!==t.type&&e.BINARY_ACK!==t.type||(i+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(i+=t.nsp+","),null!=t.id&&(i+=t.id),null!=t.data){var s=function(e){try{return JSON.stringify(e)}catch(t){return!1}}(t.data);if(!1===s)return n;i+=s}return i}(t)])},t(a.prototype),a.prototype.add=function(t){var s;if("string"!=typeof t)throw new Error("Unknown type: "+t);s=function(t){var s=0,n={type:Number(t.charAt(0))};if(null==e.types[n.type])return r("unknown packet type "+n.type);if(e.BINARY_EVENT===n.type||e.BINARY_ACK===n.type){for(var a="";"-"!==t.charAt(++s)&&(a+=t.charAt(s),s!=t.length););if(a!=Number(a)||"-"!==t.charAt(s))throw new Error("Illegal attachments");n.attachments=Number(a)}if("/"===t.charAt(s+1))for(n.nsp="";++s&&","!==(l=t.charAt(s))&&(n.nsp+=l,s!==t.length););else n.nsp="/";var o=t.charAt(s+1);if(""!==o&&Number(o)==o){for(n.id="";++s;){var l;if(null==(l=t.charAt(s))||Number(l)!=l){--s;break}if(n.id+=t.charAt(s),s===t.length)break}n.id=Number(n.id)}if(t.charAt(++s)){var c=function(e){try{return JSON.parse(e)}catch(t){return!1}}(t.substr(s));if(!1===c||n.type!==e.ERROR&&!i(c))return r("invalid payload");n.data=c}return n}(t),this.emit("decoded",s)},a.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}(Pn);var Fn={exports:{}},Un={},zn={},Gn=Object.keys||function(e){var t=[],i=Object.prototype.hasOwnProperty;for(var s in e)i.call(e,s)&&t.push(s);return t},Hn=Ln,jn=Object.prototype.toString,$n="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===jn.call(Blob),qn="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===jn.call(File),Wn=function e(t){if(!t||"object"!=typeof t)return!1;if(Hn(t)){for(var i=0,s=t.length;i<s;i++)if(e(t[i]))return!0;return!1}if("function"==typeof Buffer&&Buffer.isBuffer&&Buffer.isBuffer(t)||"function"==typeof ArrayBuffer&&t instanceof ArrayBuffer||$n&&t instanceof Blob||qn&&t instanceof File)return!0;if(t.toJSON&&"function"==typeof t.toJSON&&1===arguments.length)return e(t.toJSON(),!0);for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return!0;return!1},Jn=function(e,t,i){var s=!1;return i=i||Yn,n.count=e,0===e?t():n;function n(e,a){if(n.count<=0)throw new Error("after called too many times");--n.count,e?(s=!0,t(e),t=i):0!==n.count||s||t(null,a)}};function Yn(){}var Xn,Qn,Zn,Kn=String.fromCharCode;function ea(e){for(var t,i,s=[],n=0,a=e.length;n<a;)(t=e.charCodeAt(n++))>=55296&&t<=56319&&n<a?56320==(64512&(i=e.charCodeAt(n++)))?s.push(((1023&t)<<10)+(1023&i)+65536):(s.push(t),n--):s.push(t);return s}function ta(e,t){if(e>=55296&&e<=57343){if(t)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function ia(e,t){return Kn(e>>t&63|128)}function sa(e,t){if(0==(4294967168&e))return Kn(e);var i="";return 0==(4294965248&e)?i=Kn(e>>6&31|192):0==(4294901760&e)?(ta(e,t)||(e=65533),i=Kn(e>>12&15|224),i+=ia(e,6)):0==(4292870144&e)&&(i=Kn(e>>18&7|240),i+=ia(e,12),i+=ia(e,6)),i+Kn(63&e|128)}function na(){if(Zn>=Qn)throw Error("Invalid byte index");var e=255&Xn[Zn];if(Zn++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function aa(e){var t,i;if(Zn>Qn)throw Error("Invalid byte index");if(Zn==Qn)return!1;if(t=255&Xn[Zn],Zn++,0==(128&t))return t;if(192==(224&t)){if((i=(31&t)<<6|na())>=128)return i;throw Error("Invalid continuation byte")}if(224==(240&t)){if((i=(15&t)<<12|na()<<6|na())>=2048)return ta(i,e)?i:65533;throw Error("Invalid continuation byte")}if(240==(248&t)&&(i=(7&t)<<18|na()<<12|na()<<6|na())>=65536&&i<=1114111)return i;throw Error("Invalid UTF-8 detected")}var ra={version:"2.1.2",encode:function(e,t){for(var i=!1!==(t=t||{}).strict,s=ea(e),n=s.length,a=-1,r="";++a<n;)r+=sa(s[a],i);return r},decode:function(e,t){var i=!1!==(t=t||{}).strict;Xn=ea(e),Qn=Xn.length,Zn=0;for(var s,n=[];!1!==(s=aa(i));)n.push(s);return function(e){for(var t,i=e.length,s=-1,n="";++s<i;)(t=e[s])>65535&&(n+=Kn((t-=65536)>>>10&1023|55296),t=56320|1023&t),n+=Kn(t);return n}(n)}},oa=void 0!==oa?oa:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder&&MozBlobBuilder,la=function(){try{return 2===new Blob(["hi"]).size}catch(ut){return!1}}(),ca=la&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(ut){return!1}}(),da=oa&&oa.prototype.append&&oa.prototype.getBlob;function ua(e){return e.map((function(e){if(e.buffer instanceof ArrayBuffer){var t=e.buffer;if(e.byteLength!==t.byteLength){var i=new Uint8Array(e.byteLength);i.set(new Uint8Array(t,e.byteOffset,e.byteLength)),t=i.buffer}return t}return e}))}function ma(e,t){t=t||{};var i=new oa;return ua(e).forEach((function(e){i.append(e)})),t.type?i.getBlob(t.type):i.getBlob()}function ha(e,t){return new Blob(ua(e),t||{})}"undefined"!=typeof Blob&&(ma.prototype=Blob.prototype,ha.prototype=Blob.prototype);var pa=la?ca?Blob:ha:da?ma:void 0;!function(e){var t=Gn,i=Wn,s=Jn,n=ra;e.protocol=3;var a=e.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},r=t(a),o={type:"error",data:"parser error"},l=pa;e.encodePacket=function(e,t,i,s){"function"==typeof t&&(s=t,t=!1),"function"==typeof i&&(s=i,i=null),void 0===e.data||e.data.buffer||e.data;var r=a[e.type];return void 0!==e.data&&(r+=i?n.encode(String(e.data),{strict:!1}):String(e.data)),s(""+r)},e.decodePacket=function(e,t,i){if(void 0===e)return o;if("string"==typeof e){if(i&&!1===(e=function(e){try{e=n.decode(e,{strict:!1})}catch(t){return!1}return e}(e)))return o;var s=e.charAt(0);return Number(s)==s&&r[s]?e.length>1?{type:r[s],data:e.substring(1)}:{type:r[s]}:o}s=new Uint8Array(e)[0];var a=sliceBuffer(e,1);return l&&"blob"===t&&(a=new l([a])),{type:r[s],data:a}},e.encodePayload=function(t,n,a){"function"==typeof n&&(a=n,n=null);var r=i(t);if(!t.length)return a("0:");!function(t,i,o){for(var l=new Array(t.length),c=s(t.length,(function(e,t){return a(t.join(""))})),d=function(t,i,s){!function(t,i){e.encodePacket(t,!!r&&n,!0,(function(e){i(null,function(e){return e.length+":"+e}(e))}))}(i,(function(e,i){l[t]=i,s(e,l)}))},u=0;u<t.length;u++)d(u,t[u],c)}(t)},e.decodePayload=function(t,i,s){var n;if("function"==typeof i&&(s=i,i=null),""===t)return s(o,0,1);for(var a,r,l="",c=0,d=t.length;c<d;c++){var u=t.charAt(c);if(":"===u){if(""===l||l!=(a=Number(l)))return s(o,0,1);if(l!=(r=t.substr(c+1,a)).length)return s(o,0,1);if(r.length){if(n=e.decodePacket(r,i,!0),o.type===n.type&&o.data===n.data)return s(o,0,1);if(!1===s(n,c+a,d))return}c+=a,l=""}else l+=u}return""!==l?s(o,0,1):void 0}}(zn);var ga=zn,ya=fa;function fa(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.forceNode=e.forceNode,this.isReactNative=e.isReactNative,this.extraHeaders=e.extraHeaders,this.localAddress=e.localAddress}(0,Mt.exports)(fa.prototype),fa.prototype.onError=function(e,t){var i=new Error(e);return i.type="TransportError",i.description=t,this.emit("error",i),this},fa.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},fa.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},fa.prototype.send=function(e){if("open"!==this.readyState)throw new Error("Transport not open");this.write(e)},fa.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},fa.prototype.onData=function(e){var t=ga.decodePacket(e,this.socket.binaryType);this.onPacket(t)},fa.prototype.onPacket=function(e){this.emit("packet",e)},fa.prototype.onClose=function(){this.readyState="closed",this.emit("close")};var va,Ea={encode:function(e){var t="";for(var i in e)e.hasOwnProperty(i)&&(t.length&&(t+="&"),t+=encodeURIComponent(i)+"="+encodeURIComponent(e[i]));return t},decode:function(e){for(var t={},i=e.split("&"),s=0,n=i.length;s<n;s++){var a=i[s].split("=");t[decodeURIComponent(a[0])]=decodeURIComponent(a[1])}return t}},wa=function(e,t){var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e},Na="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),ka={},ba=0,Ca=0;function Sa(e){var t="";do{t=Na[e%64]+t,e=Math.floor(e/64)}while(e>0);return t}function xa(){var e=Sa(+new Date);return e!==va?(ba=0,va=e):e+"."+Sa(ba++)}for(;Ca<64;Ca++)ka[Na[Ca]]=Ca;xa.encode=Sa,xa.decode=function(e){var t=0;for(Ca=0;Ca<e.length;Ca++)t=64*t+ka[e.charAt(Ca)];return t};var Va=xa,Ta={exports:{}};try{Ta.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(ut){Ta.exports=!1}var Aa=Ta.exports,_a=ya,Ia=Ea,Da=zn,Ba=wa,Ra=Va,Ma=Sn.exports("engine.io-client:polling"),Pa=La,Oa=null!=new function(e){var t=e.xdomain,i=e.xscheme,s=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||Aa))return new XMLHttpRequest}catch(n){}try{if("undefined"!=typeof XDomainRequest&&!i&&s)return new XDomainRequest}catch(n){}if(!t)try{return new(self[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(n){}}({xdomain:!1}).responseType;function La(e){var t=e&&e.forceBase64;Oa&&!t||(this.supportsBinary=!1),_a.call(this,e)}Ba(La,_a),La.prototype.name="polling",La.prototype.doOpen=function(){this.poll()},La.prototype.pause=function(e){var t=this;function i(){Ma("paused"),t.readyState="paused",e()}if(this.readyState="pausing",this.polling||!this.writable){var s=0;this.polling&&(Ma("we are currently polling - waiting to pause"),s++,this.once("pollComplete",(function(){Ma("pre-pause polling complete"),--s||i()}))),this.writable||(Ma("we are currently writing - waiting to pause"),s++,this.once("drain",(function(){Ma("pre-pause writing complete"),--s||i()})))}else i()},La.prototype.poll=function(){Ma("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},La.prototype.onData=function(e){var t=this;Ma("polling got data %s",e),Da.decodePayload(e,this.socket.binaryType,(function(e,i,s){if("opening"===t.readyState&&t.onOpen(),"close"===e.type)return t.onClose(),!1;t.onPacket(e)})),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():Ma('ignoring poll - transport state "%s"',this.readyState))},La.prototype.doClose=function(){var e=this;function t(){Ma("writing close packet"),e.write([{type:"close"}])}"open"===this.readyState?(Ma("transport open - closing"),t()):(Ma("transport not open - deferring close"),this.once("open",t))},La.prototype.write=function(e){var t=this;this.writable=!1;var i=function(){t.writable=!0,t.emit("drain")};Da.encodePayload(e,this.supportsBinary,(function(e){t.doWrite(e,i)}))},La.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",i="";return!1!==this.timestampRequests&&(e[this.timestampParam]=Ra()),this.supportsBinary||e.sid||(e.b64=1),e=Ia.encode(e),this.port&&("https"===t&&443!==Number(this.port)||"http"===t&&80!==Number(this.port))&&(i=":"+this.port),e.length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+i+this.path+e};var Fa,Ua=Pa,za=$a,Ga=/\n/g,Ha=/\\n/g;function ja(){}function $a(e){if(Ua.call(this,e),this.query=this.query||{},!Fa){var t="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==Bt?Bt:{};Fa=t.___eio=t.___eio||[]}this.index=Fa.length;var i=this;Fa.push((function(e){i.onData(e)})),this.query.j=this.index,"function"==typeof addEventListener&&addEventListener("beforeunload",(function(){i.script&&(i.script.onerror=ja)}),!1)}wa($a,Ua),$a.prototype.supportsBinary=!1,$a.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),Ua.prototype.doClose.call(this)},$a.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var i=document.getElementsByTagName("script")[0];i?i.parentNode.insertBefore(t,i):(document.head||document.body).appendChild(t),this.script=t,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout((function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)}),100)},$a.prototype.doWrite=function(e,t){var i=this;if(!this.form){var s,n=document.createElement("form"),a=document.createElement("textarea"),r=this.iframeId="eio_iframe_"+this.index;n.className="socketio",n.style.position="absolute",n.style.top="-1000px",n.style.left="-1000px",n.target=r,n.method="POST",n.setAttribute("accept-charset","utf-8"),a.name="d",n.appendChild(a),document.body.appendChild(n),this.form=n,this.area=a}function o(){l(),t()}function l(){if(i.iframe)try{i.form.removeChild(i.iframe)}catch(t){i.onError("jsonp polling iframe removal error",t)}try{var e='<iframe src="javascript:0" name="'+i.iframeId+'">';s=document.createElement(e)}catch(t){(s=document.createElement("iframe")).name=i.iframeId,s.src="javascript:0"}s.id=i.iframeId,i.form.appendChild(s),i.iframe=s}this.form.action=this.uri(),l(),e=e.replace(Ha,"\\\n"),this.area.value=e.replace(Ga,"\\n");try{this.form.submit()}catch(c){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===i.iframe.readyState&&o()}:this.iframe.onload=o};var qa,Wa,Ja=ya,Ya=zn,Xa=Ea,Qa=wa,Za=Va,Ka=Sn.exports("engine.io-client:websocket");("undefined"==typeof uni&&"undefined"==typeof wx&&"undefined"==typeof my&&"undefined"==typeof swan||"undefined"!=typeof WebSocket)&&("undefined"!=typeof WebSocket?qa=WebSocket:"undefined"!=typeof self&&(qa=self.WebSocket||self.MozWebSocket));var er=qa||Wa;("undefined"==typeof uni&&"undefined"==typeof wx&&"undefined"==typeof my&&"undefined"==typeof swan||"undefined"!=typeof WebSocket)&&"undefined"==typeof GameGlobal||(er=function(e){var t=this;if(t.onopen=function(){},t.onclose=function(){},t.onmessage=function(e){},t.onerror=function(e){},"object"==typeof tt&&tt.getSystemInfo){let i=tt.connectSocket({url:e});t.send=function(e){i.send({data:e})},t.close=function(){i.close()},i.onOpen((function(){t.onopen()})),i.onError((function(e){t.onerror(e)})),i.onMessage((function(e){t.onmessage(e)})),i.onClose((function(){t.onclose()}))}else if("undefined"!=typeof my)my.connectSocket({url:e}),t.send=function(e){my.sendSocketMessage({data:e})},t.close=function(e){my.closeSocket()},my.onSocketOpen((function(e){t.onopen()})),my.onSocketError((function(e){t.onerror(e)})),my.onSocketMessage((function(e){t.onmessage(e)})),my.onSocketClose((e=>{t.onclose(e)}));else if("undefined"!=typeof swan)swan.connectSocket({url:e}),t.send=function(e){swan.sendSocketMessage({data:e})},t.close=function(e){swan.closeSocket()},swan.onSocketOpen((function(e){t.onopen()})),swan.onSocketError((function(e){t.onerror(e)})),swan.onSocketMessage((function(e){t.onmessage(e)})),swan.onSocketClose((e=>{t.onclose(e)}));else if("undefined"!=typeof uni){var i=uni.connectSocket({url:e,complete:()=>{}});t.send=function(e){i.send({data:e})},t.close=function(){i.close()},i.onOpen((function(e){t.onopen()})),i.onError((function(e){t.onerror(e)})),i.onMessage((function(e){t.onmessage(e)})),i.onClose((function(e){t.onclose()}))}else{var s=wx.connectSocket({url:e});t.send=function(e){s.send({data:e})},t.close=function(e){s.close({code:1e3})},s.onOpen((function(){t.onopen()})),s.onError((function(e){t.onerror(e)})),s.onMessage((function(e){t.onmessage(e)})),s.onClose((function(e){t.onclose(e)}))}});var tr=ir;function ir(e){e&&e.forceBase64&&(this.supportsBinary=!1),("undefined"==typeof uni&&"undefined"==typeof wx&&"undefined"==typeof my&&"undefined"==typeof swan||"undefined"!=typeof WebSocket)&&(this.perMessageDeflate=e.perMessageDeflate,this.usingBrowserWebSocket=qa&&!e.forceNode,this.protocols=e.protocols,this.usingBrowserWebSocket||(er=Wa)),Ja.call(this,e)}Qa(ir,Ja),ir.prototype.name="websocket",ir.prototype.supportsBinary=!1,ir.prototype.doOpen=function(){if(this.check()){var e,t,i=this.uri();if(("undefined"==typeof uni&&"undefined"==typeof wx&&"undefined"==typeof my&&"undefined"==typeof swan||"undefined"!=typeof WebSocket)&&(e=this.protocols),(t="undefined"==typeof uni&&"undefined"==typeof wx&&"undefined"==typeof my&&"undefined"==typeof swan||"undefined"!=typeof WebSocket?{agent:this.agent,perMessageDeflate:this.perMessageDeflate}:{agent:this.agent}).pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,"object"==typeof navigator&&"ReactNative"===navigator.product&&(t={}),this.extraHeaders&&(t.headers=this.extraHeaders),this.localAddress&&(t.localAddress=this.localAddress),"undefined"!=typeof cc&&"Windows"===cc.sys.os)cc.resources.load("cacert",((e,t)=>{const s=t.nativeUrl;this.ws=new er(i,[],s),this.ws.binaryType="arraybuffer",this.addEventListeners()}));else{try{"undefined"==typeof uni&&"undefined"==typeof wx&&"undefined"==typeof my&&"undefined"==typeof swan||"undefined"!=typeof WebSocket?this.ws=this.usingBrowserWebSocket&&!this.isReactNative?e?new er(i,e):new er(i):new er(i,e,t):this.ws=new er(i)}catch(s){return this.emit("error",s)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}}},ir.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},ir.prototype.write=function(e){var t=this;this.writable=!1;for(var i=e.length,s=0,n=i;s<n;s++)!function(e){Ya.encodePacket(e,t.supportsBinary,(function(s){if("undefined"==typeof uni&&"undefined"==typeof wx&&"undefined"==typeof my&&"undefined"==typeof swan||"undefined"!=typeof WebSocket){if(!t.usingBrowserWebSocket){var n={};e.options&&(n.compress=e.options.compress),t.perMessageDeflate&&("string"==typeof s?Buffer.byteLength(s):s.length)<t.perMessageDeflate.threshold&&(n.compress=!1)}try{t.usingBrowserWebSocket?t.ws.send(s):t.ws.send(s,n)}catch(a){Ka("websocket closed before onclose event")}}else try{t.ws.send(s)}catch(a){Ka("websocket closed before onclose event")}--i||(t.emit("flush"),setTimeout((function(){t.writable=!0,t.emit("drain")}),0))}))}(e[s])},ir.prototype.onClose=function(){Ja.prototype.onClose.call(this)},ir.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},ir.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",i="";return this.port&&("wss"===t&&443!==Number(this.port)||"ws"===t&&80!==Number(this.port))&&(i=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=Za()),this.supportsBinary||(e.b64=1),(e=Xa.encode(e)).length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+i+this.path+e},ir.prototype.check=function(){return!(!er||"__initialize"in er&&this.name===ir.prototype.name)};var sr=za,nr=tr;Un.polling=function(e){var t=!1,i=!1;if(e.jsonp,"undefined"!=typeof location){var s="https:"===location.protocol,n=location.port;n||(n=s?443:80),t=e.hostname!==location.hostname||n!==e.port,i=e.secure!==s}return e.xdomain=t,e.xscheme=i,new sr(e)},Un.websocket=nr;var ar=[].indexOf,rr=function(e,t){if(ar)return e.indexOf(t);for(var i=0;i<e.length;++i)if(e[i]===t)return i;return-1},or=Un,lr=Mt.exports,cr=Sn.exports("engine.io-client:socket"),dr=rr,ur=zn,mr=Cn,hr=Ea,pr=gr;function gr(e,t){if(!(this instanceof gr))return new gr(e,t);t=t||{},e&&"object"==typeof e&&(t=e,e=null),e?(e=mr(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=mr(t.host).host),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.agent=t.agent||!1,this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=hr.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.transportOptions=t.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.perMessageDeflate=!1!==t.perMessageDeflate&&(t.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=t.pfx||null,this.key=t.key||null,this.passphrase=t.passphrase||null,this.cert=t.cert||null,this.ca=t.ca||null,this.ciphers=t.ciphers||null,this.rejectUnauthorized=void 0===t.rejectUnauthorized||t.rejectUnauthorized,this.forceNode=!!t.forceNode,this.isReactNative="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),("undefined"==typeof self||this.isReactNative)&&(t.extraHeaders&&Object.keys(t.extraHeaders).length>0&&(this.extraHeaders=t.extraHeaders),t.localAddress&&(this.localAddress=t.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}gr.priorWebsocketSuccess=!1,lr(gr.prototype),gr.protocol=ur.protocol,gr.Socket=gr,gr.Transport=ya,gr.transports=Un,gr.parser=zn,gr.prototype.createTransport=function(e){cr('creating transport "%s"',e);var t=function(e){var t={};for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}(this.query);t.EIO=ur.protocol,t.transport=e;var i=this.transportOptions[e]||{};return this.id&&(t.sid=this.id),new or[e]({query:t,socket:this,agent:i.agent||this.agent,hostname:i.hostname||this.hostname,port:i.port||this.port,secure:i.secure||this.secure,path:i.path||this.path,forceJSONP:i.forceJSONP||this.forceJSONP,jsonp:i.jsonp||this.jsonp,forceBase64:i.forceBase64||this.forceBase64,enablesXDR:i.enablesXDR||this.enablesXDR,timestampRequests:i.timestampRequests||this.timestampRequests,timestampParam:i.timestampParam||this.timestampParam,policyPort:i.policyPort||this.policyPort,pfx:i.pfx||this.pfx,key:i.key||this.key,passphrase:i.passphrase||this.passphrase,cert:i.cert||this.cert,ca:i.ca||this.ca,ciphers:i.ciphers||this.ciphers,rejectUnauthorized:i.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:i.perMessageDeflate||this.perMessageDeflate,extraHeaders:i.extraHeaders||this.extraHeaders,forceNode:i.forceNode||this.forceNode,localAddress:i.localAddress||this.localAddress,requestTimeout:i.requestTimeout||this.requestTimeout,protocols:i.protocols||void 0,isReactNative:this.isReactNative})},gr.prototype.open=function(){var e;if(this.rememberUpgrade&&gr.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length){var t=this;return void setTimeout((function(){t.emit("error","No transports available")}),0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(i){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},gr.prototype.setTransport=function(e){cr("setting transport %s",e.name);var t=this;this.transport&&(cr("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",(function(){t.onDrain()})).on("packet",(function(e){t.onPacket(e)})).on("error",(function(e){t.onError(e)})).on("close",(function(){t.onClose("transport close")}))},gr.prototype.probe=function(e){cr('probing transport "%s"',e);var t=this.createTransport(e,{probe:1}),i=!1,s=this;function n(){if(s.onlyBinaryUpgrades){var n=!this.supportsBinary&&s.transport.supportsBinary;i=i||n}i||(cr('probe transport "%s" opened',e),t.send([{type:"ping",data:"probe"}]),t.once("packet",(function(n){if(!i)if("pong"===n.type&&"probe"===n.data){if(cr('probe transport "%s" pong',e),s.upgrading=!0,s.emit("upgrading",t),!t)return;gr.priorWebsocketSuccess="websocket"===t.name,cr('pausing current transport "%s"',s.transport.name),s.transport.pause((function(){i||"closed"!==s.readyState&&(cr("changing transport and sending upgrade packet"),d(),s.setTransport(t),t.send([{type:"upgrade"}]),s.emit("upgrade",t),t=null,s.upgrading=!1,s.flush())}))}else{cr('probe transport "%s" failed',e);var a=new Error("probe error");a.transport=t.name,s.emit("upgradeError",a)}})))}function a(){i||(i=!0,d(),t.close(),t=null)}function r(i){var n=new Error("probe error: "+i);n.transport=t.name,a(),cr('probe transport "%s" failed because of error: %s',e,i),s.emit("upgradeError",n)}function o(){r("transport closed")}function l(){r("socket closed")}function c(e){t&&e.name!==t.name&&(cr('"%s" works - aborting "%s"',e.name,t.name),a())}function d(){t.removeListener("open",n),t.removeListener("error",r),t.removeListener("close",o),s.removeListener("close",l),s.removeListener("upgrading",c)}gr.priorWebsocketSuccess=!1,t.once("open",n),t.once("error",r),t.once("close",o),this.once("close",l),this.once("upgrading",c),t.open()},gr.prototype.onOpen=function(){if(cr("socket open"),this.readyState="open",gr.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){cr("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},gr.prototype.onPacket=function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(cr('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else cr('packet received with socket readyState "%s"',this.readyState)},gr.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},gr.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout((function(){"closed"!==t.readyState&&t.onClose("ping timeout")}),e||t.pingInterval+t.pingTimeout)},gr.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout((function(){cr("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)}),e.pingInterval)},gr.prototype.ping=function(){var e=this;this.sendPacket("ping",(function(){e.emit("ping")}))},gr.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},gr.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(cr("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},gr.prototype.write=gr.prototype.send=function(e,t,i){return this.sendPacket("message",e,t,i),this},gr.prototype.sendPacket=function(e,t,i,s){if("function"==typeof t&&(s=t,t=void 0),"function"==typeof i&&(s=i,i=null),"closing"!==this.readyState&&"closed"!==this.readyState){(i=i||{}).compress=!1!==i.compress;var n={type:e,data:t,options:i};this.emit("packetCreate",n),this.writeBuffer.push(n),s&&this.once("flush",s),this.flush()}},gr.prototype.close=function(){if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var e=this;this.writeBuffer.length?this.once("drain",(function(){this.upgrading?s():t()})):this.upgrading?s():t()}function t(){e.onClose("forced close"),cr("socket closing - telling transport to close"),e.transport.close()}function i(){e.removeListener("upgrade",i),e.removeListener("upgradeError",i),t()}function s(){e.once("upgrade",i),e.once("upgradeError",i)}return this},gr.prototype.onError=function(e){cr("socket error %j",e),gr.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},gr.prototype.onClose=function(e,t){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(cr('socket close with reason: "%s"',e),clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)},gr.prototype.filterUpgrades=function(e){for(var t=[],i=0,s=e.length;i<s;i++)~dr(this.transports,e[i])&&t.push(e[i]);return t},Fn.exports=pr,Fn.exports.parser=zn;var yr={exports:{}},fr=function(e,t){for(var i=[],s=(t=t||0)||0;s<e.length;s++)i[s-t]=e[s];return i},vr=function(e,t,i){return e.on(t,i),{destroy:function(){e.removeListener(t,i)}}},Er=[].slice,wr=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var i=Er.call(arguments,2);return function(){return t.apply(e,i.concat(Er.call(arguments)))}};!function(e,t){var i=Pn,s=Mt.exports,n=fr,a=vr,r=wr,o=(Sn.exports("socket.io-client:socket"),Ea),l=Wn;e.exports=u;var c={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},d=s.prototype.emit;function u(e,t,i){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},i&&i.query&&(this.query=i.query),this.io.autoConnect&&this.open()}s(u.prototype),u.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[a(e,"open",r(this,"onopen")),a(e,"packet",r(this,"onpacket")),a(e,"close",r(this,"onclose"))]}},u.prototype.open=u.prototype.connect=function(){return this.connected||(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting")),this},u.prototype.send=function(){var e=n(arguments);return e.unshift("message"),this.emit.apply(this,e),this},u.prototype.emit=function(e){if(c.hasOwnProperty(e))return d.apply(this,arguments),this;var t=n(arguments),s={type:(void 0!==this.flags.binary?this.flags.binary:l(t))?i.BINARY_EVENT:i.EVENT,data:t,options:{}};return s.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(this.ids,this.acks[this.ids]=t.pop(),s.id=this.ids++),this.connected?this.packet(s):this.sendBuffer.push(s),this.flags={},this},u.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},u.prototype.onopen=function(){if("/"!==this.nsp)if(this.query){var e="object"==typeof this.query?o.encode(this.query):this.query;this.packet({type:i.CONNECT,query:e})}else this.packet({type:i.CONNECT})},u.prototype.onclose=function(e){this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},u.prototype.onpacket=function(e){var t=e.nsp===this.nsp,s=e.type===i.ERROR&&"/"===e.nsp;if(t||s)switch(e.type){case i.CONNECT:this.onconnect();break;case i.EVENT:case i.BINARY_EVENT:this.onevent(e);break;case i.ACK:case i.BINARY_ACK:this.onack(e);break;case i.DISCONNECT:this.ondisconnect();break;case i.ERROR:this.emit("error",e.data)}},u.prototype.onevent=function(e){var t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?d.apply(this,t):this.receiveBuffer.push(t)},u.prototype.ack=function(e){var t=this,s=!1;return function(){if(!s){s=!0;var a=n(arguments);t.packet({type:l(a)?i.BINARY_ACK:i.ACK,id:e,data:a})}}},u.prototype.onack=function(e){var t=this.acks[e.id];"function"==typeof t?(e.id,e.data,t.apply(this,e.data),delete this.acks[e.id]):e.id},u.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},u.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)d.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},u.prototype.ondisconnect=function(){this.nsp,this.destroy(),this.onclose("io server disconnect")},u.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},u.prototype.close=u.prototype.disconnect=function(){return this.connected&&(this.nsp,this.packet({type:i.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},u.prototype.compress=function(e){return this.flags.compress=e,this},u.prototype.binary=function(e){return this.flags.binary=e,this}}(yr);var Nr=kr;function kr(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}kr.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),i=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-i:e+i}return 0|Math.min(e,this.max)},kr.prototype.reset=function(){this.attempts=0},kr.prototype.setMin=function(e){this.ms=e},kr.prototype.setMax=function(e){this.max=e},kr.prototype.setJitter=function(e){this.jitter=e};class br{static init(e,t,i){this.host=e,(void 0!==t&&!1===t||!0===i)&&(this.https=!1)}static isMP(){return[Nt.MP_WX,Nt.MP_ALI,Nt.MP_BYTE,Nt.MP_WGAME,Nt.MP_BAIDU].includes(kt.currentPlatform())}static uri(){let e="http";return this.https&&(e+="s"),e+"://"+this.index()+this.host}static index(){return 0==this.i?this.i=Math.floor(Math.random()*this.max)+1:this.i=this.i%this.max+1,this.i}}br.i=0,br.max=5,br.https=!0;var Cr=Rt(Object.freeze({__proto__:null,URIResolver:br})),Sr=Rt(_t),xr=Fn.exports,Vr=yr.exports,Tr=Mt.exports,Ar=Pn,_r=vr,Ir=wr,Dr=(Sn.exports("socket.io-client:manager"),rr),Br=Nr;const{URIResolver:Rr}=Cr;var Mr=Sr.runStatus,Pr=Object.prototype.hasOwnProperty,Or=Lr;function Lr(e,t){if(!(this instanceof Lr))return new Lr(e,t);e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new Br({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var i=t.parser||Ar;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this.autoConnect=!1!==t.autoConnect,this.autoConnect&&this.open()}Lr.prototype.emitAll=function(){for(var e in this.emit.apply(this,arguments),this.nsps)Pr.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},Lr.prototype.updateSocketIds=function(){for(var e in this.nsps)Pr.call(this.nsps,e)&&(this.nsps[e].id=this.generateId(e))},Lr.prototype.generateId=function(e){return("/"===e?"":e+"#")+this.engine.id},Tr(Lr.prototype),Lr.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},Lr.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},Lr.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},Lr.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},Lr.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},Lr.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},Lr.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},Lr.prototype.open=Lr.prototype.connect=function(e,t){if(this.readyState,~this.readyState.indexOf("open"))return this;this.uri,this.engine=xr(this.uri,this.opts);var i=this.engine,s=this;this.readyState="opening",this.skipReconnect=!1;var n=_r(i,"open",(function(){s.onopen(),e&&e()})),a=_r(i,"error",(async function(t){if(s.uri=Rr.uri(),s.cleanup(),s.readyState="closed",s.emitAll("connect_error",t),e){var i=new Error("Connection error");i.data=t,e(i)}else s.maybeReconnectOnOpen()}));if(!1!==this._timeout){var r=this._timeout,o=setTimeout((function(){n.destroy(),i.close(),i.emit("error","timeout"),s.emitAll("connect_timeout",r)}),r);this.subs.push({destroy:function(){clearTimeout(o)}})}return this.subs.push(n),this.subs.push(a),this},Lr.prototype.onopen=function(){this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(_r(e,"data",Ir(this,"ondata"))),this.subs.push(_r(e,"ping",Ir(this,"onping"))),this.subs.push(_r(e,"pong",Ir(this,"onpong"))),this.subs.push(_r(e,"error",Ir(this,"onerror"))),this.subs.push(_r(e,"close",Ir(this,"onclose"))),this.subs.push(_r(this.decoder,"decoded",Ir(this,"ondecoded")))},Lr.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},Lr.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},Lr.prototype.ondata=function(e){this.decoder.add(e)},Lr.prototype.ondecoded=function(e){this.emit("packet",e)},Lr.prototype.onerror=function(e){this.emitAll("error",e)},Lr.prototype.socket=function(e,t){var i=this.nsps[e];if(!i){i=new Vr(this,e,t),this.nsps[e]=i;var s=this;i.on("connecting",n),i.on("connect",(function(){i.id=s.generateId(e)})),this.autoConnect&&n()}function n(){~Dr(s.connecting,i)||s.connecting.push(i)}return i},Lr.prototype.destroy=function(e){var t=Dr(this.connecting,e);~t&&this.connecting.splice(t,1),this.connecting.length||this.close()},Lr.prototype.packet=function(e){var t=this;e.query&&0===e.type&&(e.nsp+="?"+e.query),t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,(function(i){for(var s=0;s<i.length;s++)t.engine.write(i[s],e.options);t.encoding=!1,t.processPacketQueue()})))},Lr.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},Lr.prototype.cleanup=function(){for(var e=this.subs.length,t=0;t<e;t++)this.subs.shift().destroy();this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},Lr.prototype.close=Lr.prototype.disconnect=function(){this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},Lr.prototype.onclose=function(e){this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},Lr.prototype.reconnect=function(){if(Mr.isBackend(),this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();this.reconnecting=!0;var i=setTimeout((function(){if(Mr.isBackend())return e.reconnecting=!1,e.reconnect(),void e.emitAll("reconnect_error","Uniapp running backend, skipped reconnect...");e.skipReconnect||(e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open((function(t){t?(e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):e.onreconnect()})))}),t);this.subs.push({destroy:function(){clearTimeout(i)}})}},Lr.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)},function(e,t){var i=Mn,s=Pn,n=Or;Sn.exports("socket.io-client"),e.exports=t=r;var a=t.managers={};function r(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var s,r=i(e),o=r.source,l=r.id,c=r.path,d=a[l]&&c in a[l].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||d?s=n(o,t):(a[l]||(a[l]=n(o,t)),s=a[l]),r.query&&!t.query&&(t.query=r.query),s.socket(r.path,t)}t.protocol=s.protocol,t.connect=r,t.Manager=Or,t.Socket=yr.exports}(Nn,Nn.exports);const Fr=Nn.exports;class Ur{constructor(){this.io=Fr,this.status=dt.DISCONNECTED,this.permissions=[ui.NONE],this.connectedObservers=[],this.disconnectedObservers=[]}connect(){this.status=dt.CONNECTING}socketio(){return this.io}on(e,t){this.io.on(e,t)}disconnect(){this.io.disconnect()}getStatus(){return this.status}addConnectedObserver(e){wt.isFunction(e)&&this.connectedObservers.push(e)}addDisconnectedObserver(e){wt.isFunction(e)&&this.disconnectedObservers.push(e)}notify(e,t){for(let i=0;i<e.length;i++)e[i](t)}}class zr extends Ur{constructor(e){super(),this.reconnectingObservers=[],this.addReconnectingObserver(e.onReconnecting),this.addDisconnectedObserver(e.onDisconnected)}connect(e){super.connect(),this.io=this.io.connect(e.uri,e.opts),this.initListener()}initListener(){this.io.on("connect",(()=>{this.status=dt.CONNECTED,this.notify(this.connectedObservers)})),this.io.on("reconnecting",(e=>{this.status=dt.CONNECTING,this.notify(this.reconnectingObservers,e)})),this.io.on("disconnect",(()=>{this.status=dt.DISCONNECTED,this.notify(this.disconnectedObservers)})),this.io.on("connect_error",(function(e){}))}addReconnectingObserver(e){this.reconnectingObservers.push(e)}}class Gr{static get(e){const t=encodeURIComponent(e)+"=",i=document.cookie.split("; ");for(const s of i)if(s.startsWith(t))return decodeURIComponent(s.substring(t.length));return null}static set(e,t,i,s,n="/",a=!1){let r=encodeURIComponent(e)+"="+encodeURIComponent(t);i instanceof Date&&(r+="; expires="+i.toGMTString()),n&&(r+="; path="+n),s&&(r+="; domain="+s),a&&(r+="; secure"),document.cookie=r}static remove(e,t,i="/",s=!1){Gr.set(e,"",new Date(0),t,i,s)}}class Hr{asyncGet(e){let t=this.get(e);return Promise.resolve(t)}asyncPut(e,t){return this.put(e,t),Promise.resolve()}get(e){let t=this.doGet(e);return t=JSON.parse(t),t}put(e,t){this.doPut(e,JSON.stringify(t))}}class jr extends Hr{constructor(){super(),this.domain=null,this.domain="undefined"!=typeof location&&/^(?:[A-za-z0-9-]+\.)+[A-za-z]{2,4}(?:[\/\?#][\/=\?%\-&~`@[\]\':+!\.#\w]*)?$/.test(location.host)?location.host.split(".").slice(-2).join("."):null}doGet(e){return Gr.get(e)||null}doPut(e,t){const i=new Date(2030,12,31,0,0,0,0),s=this.domain;Gr.set(e,t,i,s)}remove(e){const t=this.domain;Gr.remove(e,t)}support(){return"undefined"!=typeof navigator&&!0===navigator.cookieEnabled}}class $r extends Hr{doGet(e){return localStorage.getItem(e)||null}doPut(e,t){localStorage.setItem(e,t)}remove(e){localStorage.removeItem(e)}support(){return!("undefined"!=typeof GameGlobal||"undefined"==typeof localStorage||!localStorage.setItem)}}class qr extends Hr{doGet(e){return uni.getStorageSync(e)||null}doPut(e,t){uni.setStorageSync(e,t)}remove(e){uni.removeStorageSync(e)}support(){return!("object"!=typeof uni||!uni.getStorageSync)}}class Wr extends Hr{doGet(e){return cc.sys.localStorage.getItem(e)||null}doPut(e,t){cc.sys.localStorage.setItem(e,t)}remove(e){cc.sys.localStorage.removeItem(e)}support(){return"undefined"!=typeof cc&&void 0!==cc.sys.localStorage}}class Jr extends Hr{doGet(e){return wx.getStorageSync(e)||null}doPut(e,t){wx.setStorageSync(e,t)}remove(e){wx.removeStorageSync(e)}support(){return!("object"!=typeof wx||!wx.getStorageSync||"undefined"!=typeof tt)}}class Yr extends Hr{asyncGet(e){return Dt(this,void 0,void 0,(function*(){const t=yield pt.asyncStorage.getItem(e);return JSON.parse(t)}))}asyncPut(e,t){return pt.asyncStorage.setItem(e,JSON.stringify(t))}doPut(e,t){throw new Error("Method not implemented.")}remove(e){pt.asyncStorage.removeItem(e)}support(){return ht.currentFramework()===ct.REACT_NATIVE}doGet(e){throw new Error("Method not implemented.")}}class Xr extends Hr{doGet(e){const t=my.getStorageSync({key:e}).data||null;return"string"==typeof JSON.parse(t)?JSON.parse(t):t}doPut(e,t){my.setStorageSync({key:e,data:JSON.stringify(t)})}remove(e){my.removeStorageSync({key:e})}support(){return!("undefined"==typeof my||!my.getStorageSync)}}class Qr extends Hr{doGet(e){return tt.getStorageSync(e)||null}doPut(e,t){tt.setStorageSync(e,t)}remove(e){tt.removeStorageSync(e)}support(){return!("object"!=typeof tt||!tt.getStorageSync)}}class Zr extends Hr{doGet(e){return swan.getStorageSync(e)||null}doPut(e,t){swan.setStorageSync(e,t)}remove(e){swan.removeStorageSync(e)}support(){return!("undefined"==typeof swan||!swan.getStorageSync)}}class Kr{constructor(){this.supportedStorage=null;const e=Kr.storages;e.push(new qr),e.push(new Wr),e.push(new $r),e.push(new Jr),e.push(new Yr),e.push(new Xr),e.push(new Zr),e.push(new Qr),e.push(new jr),this.dispatch(),this.supportedStorage}static localStorage(){return this.instance.supportedStorage}dispatch(){for(let e of Kr.storages)if(e.support()){this.supportedStorage=e;break}}}Kr.storages=new Array,Kr.instance=new Kr;class eo{static get(){return Dt(this,void 0,void 0,(function*(){let e,t=Kr.localStorage();return null!==t&&(e=yield t.asyncGet(eo.SM_KEY)),e}))}static put(e){return Dt(this,void 0,void 0,(function*(){var t=Kr.localStorage();let i=e.sm;null!==t&&i&&t.asyncPut(eo.SM_KEY,i)}))}}eo.SM_KEY="GE-SM";class to{static initRNUniqueId(){if(ht.currentFramework()===ct.REACT_NATIVE){let e=pt.platform,t=e.constants,i={os:e.OS};return"android"===i.os?i.f=t.Fingerprint:i.v=e.Version,JSON.stringify(i)}return null}static initPlusDeviceId(){return new Promise(((e,t)=>{"undefined"!=typeof plus?plus.device.getInfo({success:t=>{e(t.uuid)},fail:e=>{t(e)}}):e(null)}))}static getVideoCard(){var e;if(kt.currentPlatform()===Nt.BROWSER&&"undefined"!=typeof document){const t=document.createElement("canvas"),i=null!==(e=t.getContext("webgl"))&&void 0!==e?e:t.getContext("experimental-webgl");if(i&&"getExtension"in i){let e=0,t=0;if(navigator.userAgent.indexOf("Firefox")>-1)t=i.VENDOR,e=i.RENDERER;else{let s=i.getExtension("WEBGL_debug_renderer_info");if(!s)return null;t=s.UNMASKED_VENDOR_WEBGL,e=s.UNMASKED_RENDERER_WEBGL}const s={vendor:(i.getParameter(t)||"").toString(),renderer:(i.getParameter(e)||"").toString()};return JSON.stringify(s)}}return null}static z(){return Dt(this,void 0,void 0,(function*(){const e={p:kt.currentPlatform(),f:ht.currentFramework(),vc:this.getVideoCard(),rfp:this.initRNUniqueId()};return class{static e(e,t){let i="";for(let a=0;a<e.length;a++)i+=(n=void 0,(n=s=e.charCodeAt(a))>=32&&n<=126?String.fromCharCode(function(e){let i=e+t;return i>126?i-126+32:i}(s)):String.fromCharCode(s));var s,n;return i}}.e(JSON.stringify(e),5)}))}}class io{constructor(e){this.rocketsBuffer=new Set,this.socket=e,this.socket.addConnectedObserver(this.onSocketConnected.bind(this))}emit(e){this.socket.status!==dt.DISCONNECTED?(e.start(),this.doEmit(e)):e.fail({resultCode:"409",content:"Please connect first"})}doEmit(e){if(!e.complete)if(this.socket.status!==dt.CONNECT_FAILED)if(this.isConnected())if(this.hasPermission(e)){let t=setTimeout((()=>{this.doEmit(e)}),e.singleTimeout);e.unique&&(e.params.retried=e.retried),this.socket.socketio().emit(e.name,e.params,(i=>{clearTimeout(t),200===i.resultCode||200==i.code?e.success(i):e.fail(i)})),e.retried++}else e.fail({resultCode:401,content:"No permission"});else this.isConnecting()&&this.rocketsBuffer.add(e);else e.fail({resultCode:408,content:"Failed to connect GoEasy."})}hasPermission(e){return!!this.socket.permissions.find((t=>t===e.permission))}isConnected(){return[dt.CONNECTED,dt.RECONNECTED,dt.EXPIRED_RECONNECTED,dt.DISCONNECTING].includes(this.socket.status)}isConnecting(){return[dt.CONNECTING,dt.RECONNECTING].includes(this.socket.status)}onSocketConnected(){this.emitBuffer()}emitBuffer(){Array.from(this.rocketsBuffer).forEach((e=>{this.rocketsBuffer.delete(e),this.doEmit(e)}))}}class so extends ai{static init(){so.i=new so}static fire(e,t){this.i.fire(e,t)}static on(e,t){this.i.on(e,t)}static off(e,t){this.i.off(e,t)}}class no extends Ur{constructor(e,t){super(),this.ioSocket=null,this.sid=null,this.anonymous=!1,this.userId=null,this.artifactVersion=gt,this.vname=null,this.uri=null,this.ioOpts=null,this.reconnectingTimes=0,this.messageObservers=new Map,this.connectFailedObservers=[],this.connectingObservers=[],this.expiredReconnectedObservers=[],this.options=e,this.ioSocket=new zr({onDisconnected:this.onIoDisconnected.bind(this),onReconnecting:this.onIoReconnecting.bind(this)}),this.ioSocketEmitter=new io(this.ioSocket),this.ioSocket.addConnectedObserver(this.onIoReconnected.bind(this)),this.initOptions(t),this.connect()}initUserId(){let e=this.connectOptions.id;wt.isEmpty(e)?this.anonymous=!0:this.userId=e.toString()}socketio(){return this.ioSocket.socketio()}extendOptions(){let e=this.connectOptions;if(wt.isNull(e.data)||wt.isDef(e.data)&&!wt.isObject(e.data))throw{code:400,content:"TypeError: data requires an object."};if((wt.isDef(e.data)?String(e.data).length:0)>300&&wt.isObject(e)&&wt.isFunction(e.onFailed))throw{code:400,content:"user.data-length limit 300 byte."};if(wt.isObject(e.wxmpId)){if(wt.isEmpty(e.wxmpId.appid))throw{code:400,content:"wxmpId.appid is required."};if(wt.isEmpty(e.wxmpId.openid))throw{code:400,content:"wxmpId.openid is required. requires string."}}else if(wt.isPrimitive(e.wxmpId))throw{code:400,content:"TypeError: wxmpId requires an object."}}initUriAndOpts(){let e=this.options;br.init(e.host,e.forceTLS,e.supportOldBrowser),this.uri=br.uri();let t=["websocket"];!0===e.supportOldBrowser&&t.push("polling"),this.ioOpts={transports:t,timeout:At.connect,reconnectionDelayMax:At.reconnectionDelayMax}}onIoReconnected(){this.status===dt.RECONNECTING&&this.authorize()}sendAck(e,t){this.ioSocket.io.emit(e,t)}initOptions(e){this.connectOptions=e,this.addConnectedObserver(e.onSuccess),this.addConnectFailedObserver(e.onFailed),this.addConnectingObserver(e.onProgress),this.initUserId()}connect(){this.initUriAndOpts(),this.extendOptions(),super.connect(),this.onConnecting(),this.ioSocket.connect({uri:this.uri,opts:this.ioOpts}),this.authorize()}disconnect(){return new Promise(((e,t)=>{this.status=dt.DISCONNECTING;let i=()=>{this.ioSocket.disconnect(),this.status=dt.DISCONNECTED,so.fire(Os.DISCONNECTED),e()};const s=si.modules.get("GN");if(s&&(s.params.regId||this.connectOptions.wxmpId)){let e=e=>{t(e)},s=new hi({name:Tt.manualDisconnect,params:{},permission:ui.READ,singleTimeout:At.commonRequestSingle,totalTimeout:At.commonRequestTotal,fail:e,success:i});li.Socket.e(s)}else i()}))}authorize(){return Dt(this,void 0,void 0,(function*(){let e=this.connectOptions,t={appkey:this.options.appkey,userId:this.userId,userData:JSON.stringify(e.data),otp:e.otp,artifactVersion:this.artifactVersion,sid:this.sid,mP:yield si.getParams(),a:this.anonymous,z:yield to.z(),sm:yield eo.get(),c:{n:this.vname,v:this.artifactVersion}};JSON.stringify(t);let i=new hi({name:Tt.authorize,params:t,permission:ui.NONE,singleTimeout:At.commonInfiniteSingle,totalTimeout:At.commonInfiniteTotal,success:e=>{this.onAuthorizeSuccess(e)},fail:e=>{this.onAuthorizeFailed(e)}});this.ioSocketEmitter.emit(i)}))}onConnecting(){so.fire(Os.CONNECTING,this.reconnectingTimes),this.notify(this.connectingObservers,this.reconnectingTimes)}onIoReconnecting(){this.reconnectingTimes++,this.status==dt.CONNECTED||this.status==dt.EXPIRED_RECONNECTED||this.status==dt.RECONNECTING?this.status=dt.RECONNECTING:this.status=dt.CONNECTING,this.onConnecting()}onIoDisconnected(){this.status!==dt.DISCONNECTING&&(this.status=dt.RECONNECTING,so.fire(Os.LOST),this.notify(this.disconnectedObservers))}onAuthorizeSuccess(e){eo.put(e),si.setDatas(e.mD),this.status===dt.RECONNECTING?this.sid!==e.sid?(this.status=dt.EXPIRED_RECONNECTED,this.sid=e.sid,so.fire(Os.EXPIRED_RECONNECTED),this.notify(this.expiredReconnectedObservers)):(this.status=dt.RECONNECTED,so.fire(Os.RECONNECTED)):(this.status=dt.CONNECTED,this.sid=e.sid),e.enablePublish&&(this.permissions.find((e=>e==ui.WRITE))||this.permissions.push(ui.WRITE)),e.enableSubscribe&&(this.permissions.find((e=>e==ui.READ))||this.permissions.push(ui.READ)),this.reconnectingTimes=0,so.fire(Os.CONNECTED),this.notify(this.connectedObservers)}onAuthorizeFailed(e){this.ioSocket.disconnect(),this.status=dt.CONNECT_FAILED;let t={code:e.resultCode||408,content:e.content||"Host unreachable or timeout"};this.notify(this.connectFailedObservers,t)}addConnectingObserver(e){wt.isFunction(e)&&this.connectingObservers.push(e)}addConnectFailedObserver(e){wt.isFunction(e)&&this.connectFailedObservers.push(e)}addExpiredReconnectedObserver(e){wt.isFunction(e)&&this.expiredReconnectedObservers.push(e)}onMessage(e,t){this.ioSocket.io._callbacks.hasOwnProperty("$"+e)||this.ioSocket.io.on(e,t)}user(){let e=this.connectOptions;return e?{id:e.id,data:e.data}:null}}class ao{constructor(e){this.guidList=[],this.socket=e}offMessage(e,t){so.off(Os.NEW_MESSAGE+"_"+e,t)}onMessage(e,t){so.on(Os.NEW_MESSAGE+"_"+e,t),this.socket.onMessage(e,(t=>{this.fire(e,t)}))}fire(e,t){let i=this.filter(t);i&&so.fire(Os.NEW_MESSAGE+"_"+e,i)}filter(e){if("string"==typeof e&&(e=JSON.parse(e)),e.i){const t=`${e.i}_${e.r}`;if(this.guidList.findIndex((e=>e===t))>-1)return;this.guidList.unshift(t),this.guidList.length>300&&this.guidList.pop()}return e}}class ro{static init(e){this.i=new ro(e)}constructor(e){this.goeasyOptions=e}static connect(e,t){if(this.status()!==dt.DISCONNECTED&&wt.isObject(e)&&wt.isFunction(e.onFailed))return void e.onFailed({code:408,content:"It is already connected, don't try again until disconnect() is called. "});Ts(Ki,e),so.init();let i=this.i;si.preConnect(e),i.socket=new no(i.goeasyOptions,e),i.socket.vname=t,i.emitter=new io(i.socket),i.messageListener=new ao(i.socket),si.postConnect()}static e(e){this.i.emitter.emit(e)}static sendAck(e,t){this.i.socket.sendAck(e,t)}static status(){return this.i&&this.i.socket?this.i.socket.getStatus():dt.DISCONNECTED}static on(e,t){so.on(e,t)}static off(e,t){so.off(e,t)}static offMessage(e,t){this.i.messageListener.offMessage(e,t)}static onMessage(e,t){this.i.messageListener.onMessage(e,t)}static disconnect(e){this.status()===dt.CONNECTED||this.status()===dt.RECONNECTED?this.i.socket.disconnect().then((()=>{It.onSuccess(e)})).catch((t=>{It.onFailed(e,t)})):It.onFailed(e,{code:408,content:"Host unreachable or timeout"})}static user(){return this.i.socket.user()}}ro.EVENT=Os;class oo{static getInstance(){return oo.instance||(oo.instance=new oo),oo.instance}constructor(){this.synchronized=!0,this.onlineChanged=e=>{e.online?this.teamIds.add(e.teamId):this.teamIds.delete(e.teamId)},this.onDisconnected=()=>{this.queryMyTeamPromise=null,this.teamIds=null},this.onConnected=()=>{this.synchronized&&(this.queryMyTeamPromise=this.queryTeams())},ro.on(ro.EVENT.LOST,this.onDisconnected),ro.on(ro.EVENT.RECONNECTED,this.onConnected),ro.onMessage(Ps.CS_ONLINE_CHANGED,this.onlineChanged)}queryTeams(){return this.queryMyTeamPromise||(this.queryMyTeamPromise=new Promise(((e,t)=>{let i=new hi({name:Tt.CS_MY_TEAMS,params:{},permission:ui.READ,singleTimeout:At.commonQuerySingle,totalTimeout:At.commonQueryTotal,fail:e=>{t(e)},success:t=>{this.teamIds=new Set(t.content),this.synchronized=!0,e(this.teamIds)}});li.Socket.e(i)}))),this.queryMyTeamPromise}myTeams(){if(this.synchronized&&this.queryMyTeamPromise)return this.teamIds;throw"please query team first."}isOnline(e,t){return Dt(this,void 0,void 0,(function*(){yield this.queryTeams(),It.onSuccess(t,this.teamIds.has(e))}))}online(e,t){if(!wt.isObject(t.agentData)||!wt.isObject(t.teamData))throw{code:400,content:"agentData and teamData require an object"};let i=new class{constructor(e,t,i){this.teamId=e,this.teamData=JSON.stringify(t),this.agentData=JSON.stringify(i)}}(e,t.teamData,t.agentData),s=new hi({name:Tt.CS_ONLINE,params:i,permission:ui.WRITE,singleTimeout:At.commonRequestSingle,totalTimeout:At.commonRequestTotal,fail:e=>{It.onFailed(t,e)},success:i=>{this.teamIds.add(e),It.onSuccess(t),cn.i.fire(sn.CS_ONLINE_SUCCESS)}});li.Socket.e(s)}offline(e,t){let i=new class{constructor(e){this.teamId=e}}(e),s=new hi({name:Tt.CS_OFFLINE,params:i,permission:ui.WRITE,singleTimeout:At.commonRequestSingle,totalTimeout:At.commonRequestTotal,fail:e=>{It.onFailed(t,e)},success:i=>{this.teamIds.delete(e),It.onSuccess(t),cn.i.fire(sn.CS_OFFLINE_SUCCESS)}});li.Socket.e(s)}agents(e,t){let i=new class{constructor(e){this.teamId=e}}(e),s=new hi({name:Tt.CS_AGENTS,params:i,permission:ui.READ,singleTimeout:At.commonQuerySingle,totalTimeout:At.commonQueryTotal,fail:e=>{It.onFailed(t,e)},success:e=>{e.content.forEach((e=>{e.data=JSON.parse(e.data)})),It.onSuccess(t,e)}});li.Socket.e(s)}}class lo{constructor(e){this.onMessageReceived=e=>{let t=lo.session;if(e.scene()===yt.CS&&t.liveOptions){let i=e,s=t.liveOptions.customerId;t.teamId===i.teamId&&i.customerId()===s&&(t.tryUpdateStatus(i),t.liveOptions.onNewMessage(i))}},this.teamId=e,cn.i.on(sn.CS_AGENT_MESSAGE_RECEIVED,this.onMessageReceived),cn.i.on(sn.CS_ACCEPTED,this.onMessageReceived),cn.i.on(sn.CS_ENDED,this.onMessageReceived),cn.i.on(sn.CS_TRANSFER,this.onMessageReceived),ro.on(Os.DISCONNECTED,lo.destroy)}static live(e,t){return Dt(this,void 0,void 0,(function*(){let i=t.customerId;As(i);let s=new En(e,i);yield oo.getInstance().queryTeams();let n=new hi({name:Tt.CS_LIVE_SESSION,params:s,permission:ui.WRITE,singleTimeout:At.commonRequestSingle,totalTimeout:At.commonRequestTotal,fail:e=>{It.onFailed(t,e)},success:i=>{lo.destroy(),this.session=new lo(e),this.session.liveOptions=t;let s=i.content.customerStatus;"ACCEPTED"===s.status&&(s.agent.data=JSON.parse(s.agent.data)),this.session.status=s,this.session.liveOptions.onStatusUpdated(this.session.status),It.onSuccess(t)}});li.Socket.e(n)}))}customerId(){return this.liveOptions.customerId}static isMyCustomer(e){let t=lo.session;if(t&&t.teamId===e.teamId&&t.customerId()===e.customerId()){let i=oo.getInstance().myTeams(),s=t.status.agent;return i.has(e.teamId)&&(!s||s.id===li.Socket.user().id)}return!0}static isMyMessage(e){let t=$i.byIMMessage(e);return e.type===nn.TRANSFER&&e.payload.transferTo.id===li.Socket.user().id||this.isMyCustomer(t)}static quit(e){let t=lo.session;if(t){let i=t.liveOptions.customerId;As(i);let s=new En(t.teamId,i),n=new hi({name:Tt.CS_QUIT_LIVE,params:s,permission:ui.WRITE,singleTimeout:At.commonRequestSingle,totalTimeout:At.commonRequestTotal,fail:t=>{It.onFailed(e,t)},success:t=>{lo.destroy(),It.onSuccess(e)}});li.Socket.e(n)}}tryUpdateStatus(e){if("FREE"!==this.status.status&&this.status.sessionId>e.sessionId)return;let t;switch(e.type){case nn.ACCEPT:t=new wn,t.status="ACCEPTED",t.start=e.payload.sessionStart,t.sessionId=e.sessionId,t.agent=new Et(e.senderId,e.senderData);break;case nn.END:t=new wn,t.status="FREE";break;case nn.TRANSFER:t=new wn,t.status="ACCEPTED",t.start=e.payload.sessionStart,t.sessionId=e.sessionId,t.agent=e.payload.transferTo;break;default:"FREE"===this.status.status&&(t=new wn,t.status="PENDING",t.start=e.timestamp,t.sessionId=e.sessionId)}t&&(this.status=t,this.liveOptions.onStatusUpdated(t))}}lo.destroy=()=>{let e=lo.session;e&&(cn.i.off(sn.CS_AGENT_MESSAGE_RECEIVED,e.onMessageReceived),cn.i.off(sn.CS_ACCEPTED,e.onMessageReceived),cn.i.off(sn.CS_ENDED,e.onMessageReceived),cn.i.off(sn.CS_TRANSFER,e.onMessageReceived),ro.off(Os.DISCONNECTED,lo.destroy),lo.session=null)};class co extends vn{constructor(e){super(e),this.unread=0,this.markingAmount=0}loadHistory(e,t){return Dt(this,void 0,void 0,(function*(){return wt.isUndef(t)?t=10:t>30&&(t=30),yield this.loadServerMessages(e,t)}))}loadServerMessages(e,t){return Dt(this,void 0,void 0,(function*(){let i=new pn(this.target.id.toString(),this.target.scene,e,t,this.target.teamId),s=yield this.remoteHistory.loadServerMessages(this.target,i);return s.userOffsets.forEach((e=>{this.userOffsets.updateOffset(e.userId,e.offset)})),s.messages}))}deleteMessages(e){return Dt(this,void 0,void 0,(function*(){It.onFailed(e,"Delete CS message is not supported yet")}))}initMaxMessageAndOffsets(e,t){t.forEach((e=>{this.userOffsets.updateOffset(e.userId,e.offset)})),(wt.isUndef(this.acceptedMaxMessage)||this.acceptedMaxMessage.timestamp<e.timestamp)&&this.increaseUnreadAmount(e),this.saveAcceptedMessage(e)}initPendingMaxMessageAndOffsets(e,t){t.forEach((e=>{this.userOffsets.updateOffset(e.userId,e.offset)})),this.savePendingMessage(e)}savePendingMessage(e){this.pendingMaxMessage?this.pendingMaxMessage.timestamp<e.timestamp&&(this.pendingMaxMessage=e):this.pendingMaxMessage=e}saveAcceptedMessage(e){this.acceptedMaxMessage?this.acceptedMaxMessage.timestamp<e.timestamp&&(this.acceptedMaxMessage=e):this.acceptedMaxMessage=e}onMessageSending(e){this.saveAcceptedMessage(e),cn.i.fire(sn.MAX_MESSAGE_CHANGED,{message:e,receiver:this.to})}onMessageSendSuccess(e){this.saveAcceptedMessage(e),this.userOffsets.updateOffset(e.senderId,e.timestamp),this.acceptedMaxMessage===e&&cn.i.fire(sn.MAX_MESSAGE_CHANGED,{message:e,receiver:this.to})}onMessageSendFailed(e){this.acceptedMaxMessage===e&&cn.i.fire(sn.MAX_MESSAGE_CHANGED,{message:e,receiver:this.to})}onMessageReceived(e){lo.isMyMessage(e)&&(!e.accepted||e.senderId!==li.Socket.user().id&&e.type===nn.ACCEPT?this.savePendingMessage(e):this.saveAcceptedMessage(e),this.userOffsets.updateOffset(e.senderId,e.timestamp),this.increaseUnreadAmount(e),cn.i.fire(sn.MAX_MESSAGE_CHANGED,{message:e,receiver:this.to}))}increaseUnreadAmount(e){(e.sendByCustomer()||e.type===nn.TRANSFER&&e.senderId!==li.Socket.user().id)&&this.userOffsets.myOffset()<e.timestamp&&e.accepted&&(this.unread+=1)}markRead(){return Dt(this,void 0,void 0,(function*(){let e=this.maxAcceptedMessageTime();lo.isMyCustomer(this.target)&&this.preMark(e)&&(yield this.remoteHistory.updateServerOffsets(e,this.target),this.postMark(e))}))}preMark(e){let t=this.userOffsets.myOffset();return e>this.userOffsets.markingTime&&e>t&&(this.userOffsets.markingTime=e,this.markingAmount=this.unread,!0)}postMark(e){e===this.userOffsets.markingTime&&(this.unread-=this.markingAmount,this.markingAmount=0,this.userOffsets.updateOffset(li.Socket.user().id,e),cn.i.fire(sn.UNREAD_AMOUNT_CHANGED,this.target))}syncMarkedMessage(e){}getMaxMessage(e){return e?this.acceptedMaxMessage:this.pendingMaxMessage}unreadAmount(e){return e?this.unread:0}existsMessage(e){return this.acceptedMaxMessage&&this.acceptedMaxMessage.messageId===e.messageId||this.pendingMaxMessage&&this.pendingMaxMessage.messageId===e.messageId}maxAcceptedMessageTime(){return this.acceptedMaxMessage?this.acceptedMaxMessage.timestamp:0}maxTime(e){let t=this.getMaxMessage(e);return t?t.timestamp:0}}class uo extends vn{constructor(e){super(e)}deleteMessages(e){return Dt(this,void 0,void 0,(function*(){It.onFailed(e,"Delete CS message is not supported yet")}))}}class mo{static init(){return mo.instance=new mo,mo.instance}constructor(){this.map=new Map,this.onMessageSending=e=>{let t=$i.byIMMessage(e.message),i=this.findOrCreateHistory(t);i.to=e.receiver,i.onMessageSending(e.message)},this.onMessageSendSuccess=e=>{let t=$i.byIMMessage(e);this.findHistory(t).onMessageSendSuccess(e)},this.onMessageSendFailed=e=>{let t=$i.byIMMessage(e);this.findHistory(t).onMessageSendFailed(e)},this.onMessageReceived=e=>{let t=$i.byIMMessage(e),i=this.findOrCreateHistory(t);i.expiredTime>0&&(this.map.delete(t.toString()),i=this.findOrCreateHistory(t)),i.onMessageReceived(e)},this.onRemoteMarkRead=e=>{let t=$i.byMessageReadRemoteEvent(e),i=this.findHistory(t);i&&i.syncMarkedMessage(e)},this.onRemoteMessageDeleted=e=>{let t=$i.byIMMessageDeletedEvent(e),i=this.findHistory(t);i&&i.syncDeletedMessage(e.deleterId,e.times)},this.onMessageRecalled=e=>{let t=$i.byConversationId(e.scene,e.conversationId),i=this.findHistory(t);i&&i.recallMessages(e)},this.onDisconnected=()=>{this.map.forEach(((e,t)=>{e.expire()}))},this.onReconnected=()=>{yn.fire(an.HISTORY_EXPIRED)},this.destroy=()=>{},this.initialListeners()}initialListeners(){cn.i.on(sn.MESSAGE_SENDING,this.onMessageSending),cn.i.on(sn.MESSAGE_SEND_SUCCESS,this.onMessageSendSuccess),cn.i.on(sn.MESSAGE_SEND_FAILED,this.onMessageSendFailed),cn.i.on(sn.MESSAGE_RECEIVED,this.onMessageReceived),cn.i.on(sn.CS_AGENT_MESSAGE_RECEIVED,this.onMessageReceived),cn.i.on(sn.CS_ACCEPTED,this.onMessageReceived),cn.i.on(sn.CS_ENDED,this.onMessageReceived),cn.i.on(sn.CS_TRANSFER,this.onMessageReceived),cn.i.on(sn.MESSAGE_RECALLED,this.onMessageRecalled),ro.onMessage(Ps.IM_MSG_READ,this.onRemoteMarkRead),ro.onMessage(Ps.IM_MSG_DELETED,this.onRemoteMessageDeleted),ro.on(ro.EVENT.LOST,this.onDisconnected),ro.on(ro.EVENT.RECONNECTED,this.onReconnected)}loadHistory(e,t){return Dt(this,void 0,void 0,(function*(){Ts(ys,e);let i=this.queryToTarget(e,t),s=this.findOrCreateHistory(i);s.expiredTime>0&&(this.map.delete(i.toString()),s=this.findOrCreateHistory(i));let n=yield s.loadHistory(e.lastTimestamp,e.limit);It.onSuccess(e,{code:200,content:n})}))}queryToTarget(e,t){return e.userId?new $i(yt.PRIVATE,e.userId):e.groupId?new $i(yt.GROUP,e.groupId):(yt.CS===e.type&&wt.isUndef(t)&&(t=e.id),new $i(e.type,e.id,t))}privateMarkAsRead(e){return Dt(this,void 0,void 0,(function*(){Is(e);let t=$i.byScene(yt.PRIVATE,e.userId);yield this.markAsRead(t,e)}))}groupMarkAsRead(e){return Dt(this,void 0,void 0,(function*(){Ds(e);let t=$i.byScene(yt.GROUP,e.groupId);yield this.markAsRead(t,e)}))}markMessageAsRead(e,t){return Dt(this,void 0,void 0,(function*(){Ts(gs,e),yt.CS==e.type&&wt.isUndef(t)&&(t=e.id);let i=$i.byScene(e.type,e.id,t);yield this.markAsRead(i,e)}))}markAsRead(e,t){return Dt(this,void 0,void 0,(function*(){let i=this.findHistory(e);i&&(yield i.markRead()),It.onSuccess(t)}))}deleteMessage(e){return Dt(this,void 0,void 0,(function*(){Ts(cs,e);let t=e.messages[0],i=$i.byIMMessage(t),s=this.findHistory(i);if(!s)throw{code:400,content:"No message that could be deleted"};yield s.deleteMessages(e)}))}findOrCreateHistory(e){let t=this.findHistory(e);return t||(t=e.scene===yt.CS?li.Socket.user().id===e.customerId()?new uo(e):new co(e):new vn(e),this.map.set(e.toString(),t),t)}static get(e){return mo.instance.findOrCreateHistory(e)}findHistory(e){return this.map.get(e.toString())}}class ho{constructor(e){this.top=!1,this.data=null,this.dataLoaded=!1,this.target=e}toDto(){let e=this.target.scene,t=this.target.id,i=new vt;return e===yt.PRIVATE?i.userId=t:e===yt.GROUP?i.groupId=t:e===yt.CS&&(i.id=this.target.teamId),i.type=e,i.lastMessage=this.getMaxMessage(),i.unread=this.getUnreadAmount(),i.top=this.top,i.data=this.data,i}getMaxMessage(){return mo.get(this.target).getMaxMessage()}getUnreadAmount(){return mo.get(this.target).unreadAmount()}maxMessageTime(){return mo.get(this.target).maxTime()}}class po extends ho{constructor(e){super(e),this.accepted=!1}toDto(){let e=new vt,t=this.target.scene,i=this.target.id,s=this.target.teamId;return e.id=i,e.teamId=s,e.type=t,e.lastMessage=this.getMaxMessage(),e.unread=this.getUnreadAmount(),e.top=this.top,e.data=this.data,e.ended=this.isEnded(),e}isEnded(){let e=this.getMaxMessage(),t=e.type,i=e.payload;return t===nn.END||t===nn.TRANSFER&&i.transferTo.id!==li.Socket.user().id}getMaxMessage(){return mo.get(this.target).getMaxMessage(this.accepted)}getUnreadAmount(){return mo.get(this.target).unreadAmount(this.accepted)}maxMessageTime(){return mo.get(this.target).maxTime(this.accepted)}}class go{constructor(e,t,i,s){this.type=e,this.top=t,this.targetId=i,this.teamId=s}}class yo{constructor(e,t,i){this.type=e,this.targetId=t,this.teamId=i}}class fo{constructor(e,t,i){this.type=e,this.targetId=t,this.teamId=i}}class vo{top(e,t){let i=new go(e.scene,t,e.id,e.teamId);return new Promise(((e,t)=>{let s=new hi({name:Tt.topConversation,params:i,permission:ui.WRITE,singleTimeout:At.commonRequestSingle,totalTimeout:At.commonRequestTotal,success:i=>{200===i.code?e(i):t(i)},fail:e=>{t(e)}});li.Socket.e(s)}))}remove(e){let t=new yo(e.scene,e.id,e.teamId);return new Promise(((e,i)=>{let s=new hi({name:Tt.removeConversation,params:t,permission:ui.WRITE,singleTimeout:At.commonRequestSingle,totalTimeout:At.commonRequestTotal,success:t=>{200==t.code?e(t):i(t)},fail:e=>{i(e)}});li.Socket.e(s)}))}query(e){return new Promise(((t,i)=>{let s=new hi({name:e,params:{},permission:ui.READ,singleTimeout:At.commonQuerySingle,totalTimeout:At.commonQueryTotal,fail:e=>{i(e)},success:e=>Dt(this,void 0,void 0,(function*(){t(e)}))});li.Socket.e(s)}))}loadData(e){let t=new fo(e.scene,e.id,e.teamId);return new Promise(((e,i)=>{let s=new hi({name:Tt.imData,params:t,permission:ui.READ,singleTimeout:At.commonQuerySingle,totalTimeout:At.commonQueryTotal,success:t=>{let i=JSON.parse(t.content);e(i)},fail:e=>{i(e)}});li.Socket.e(s)}))}}vo.instance=new vo;class Eo{constructor(){this.list=new Array,this.builder=new mn,this.remoteConversations=vo.instance,this.synchronized=!1,cn.i.on(sn.MAX_MESSAGE_CHANGED,this.onMaxMessageChanged.bind(this)),cn.i.on(sn.UNREAD_AMOUNT_CHANGED,this.onUnreadMessageChanged.bind(this)),cn.i.on(sn.MAX_MESSAGE_DELETED,this.onMaxMessageDeleted.bind(this))}onUnreadMessageChanged(e){this.findConversation(e)&&this.fireUpdated()}fireUpdated(){this.debounce(this.triggerUpdate.bind(this))}triggerUpdate(){let e=this.loadLocalConversations(),t=this.getUpdatedEventName();yn.fire(t,{unreadTotal:e.content.unreadTotal,conversations:e.content.conversations})}getUpdatedEventName(){return an.CONVERSATIONS_UPDATED}latestConversations(e){return Dt(this,void 0,void 0,(function*(){this.synchronized||(yield this.loadServerConversations());let t=this.loadLocalConversations();It.onSuccess(e,t)}))}loadServerConversations(){return Dt(this,void 0,void 0,(function*(){var e,t;let i=this.rocketName(),s=yield this.remoteConversations.query(i);this.convertAbbrConversation(s.content);const n=null===(t=null===(e=s.content[s.content.length-1])||void 0===e?void 0:e.lmsg)||void 0===t?void 0:t.i;yield this.loadCustomConversation(n),this.synchronized=!0}))}loadCustomConversation(e){return Dt(this,void 0,void 0,(function*(){if(void 0!==fn.instance){const t=yield fn.instance.loadConversations(li.Socket.user().id,e);for(const e of t){e.lastMessage=fn.convertAbstractMessage(e.lastMessage);const t=e.lastMessage,i=$i.byIMMessage(t);let s=this.findConversation(i);wt.isUndef(s)&&(s=new ho(i),s.dataLoaded=!0,s.top=e.top,s.data=e.data,this.insertOne(s)),mo.get(i).initMaxMessageAndOffsets(t,[]),this.correctPosition(s)}}}))}rocketName(){return Tt.imLastConversations}convertAbbrConversation(e){let t=e;for(const i of t){let e=i.t,t=i.top,s=i.d?JSON.parse(i.d):{},n=i.userOffsets;i.lmsg.t=e;let a=i.lmsg,r=this.builder.build(a),o=$i.byIMMessage(r),l=this.findConversation(o);wt.isUndef(l)?(l=this.buildByAbbr(i,r),this.insertOne(l)):(l.top=t,l.data=s),o.scene===yt.GROUP&&(r.x=1),mo.get(o).initMaxMessageAndOffsets(r,n),this.correctPosition(l)}}onMaxMessageDeleted(e){this.removeConversation(e)}onMaxMessageChanged(e){return Dt(this,void 0,void 0,(function*(){const t=e.message;if(t.scene()===yt.CS){let e=t;if(li.Socket.user().id!=e.customerId()&&(!1===e.accepted||e.type===nn.ACCEPT&&e.senderId!=li.Socket.user().id))return}yield this.saveOrUpdateConversation(e)}))}saveOrUpdateConversation(e){return Dt(this,void 0,void 0,(function*(){const t=e.message;let i=t.status,s=$i.byIMMessage(t),n=this.findConversation(s);wt.isUndef(n)&&i!==ft.FAIL&&(n=this.buildByMessage(t),this.insertOne(n),i===ft.SUCCESS&&(n.data=yield this.remoteConversations.loadData(s),n.dataLoaded=!0)),i===ft.SENDING&&(n.data=e.receiver,n.dataLoaded=!0),n&&n.dataLoaded&&(this.correctPosition(n),this.fireUpdated())}))}debounce(e){clearTimeout(this.timer),this.timer=setTimeout((()=>{e()}),500)}loadLocalConversations(){let e=0,t=new Array;for(const i of this.list)if(i.dataLoaded&&i.getMaxMessage()){e+=i.getUnreadAmount();let s=i.toDto();t.push(s)}return{code:200,content:{unreadTotal:e,conversations:t}}}findConversationIndex(e){return this.list.findIndex((t=>e.toString()===t.target.toString()))}findConversation(e){let t=this.findConversationIndex(e);return this.list[t]}removeLocalConversation(e){let t=this.findConversationIndex(e.target);this.list.splice(t,1)}insertOne(e){Eo.sortedInserter.insert(this.list,e)}correctPosition(e){this.removeLocalConversation(e),this.insertOne(e)}removeConversation(e){let t=this.findConversation(e);t&&(this.removeLocalConversation(t),this.fireUpdated())}top(e,t,i){return Dt(this,void 0,void 0,(function*(){if(!wt.isBoolean(t))throw new Error("top must be boolean.");let s=this.findConversation(e);if(!s)throw new Error("conversation does not exist.");s.top!=t&&(yield this.remoteConversations.top(e,t),s.top=t,this.correctPosition(s)),this.fireUpdated(),It.onSuccess(i)}))}remove(e,t){return Dt(this,void 0,void 0,(function*(){let i=this.findConversation(e);if(!i)throw new Error("conversation does not exist.");if(i instanceof po&&!i.isEnded())throw new Error("CS conversation can only be deleted after it ends");yield this.remoteConversations.remove(e),this.removeLocalConversation(i),this.fireUpdated(),It.onSuccess(t)}))}buildByAbbr(e,t){let i,s=$i.byIMMessage(t);if(e.t===yt.CS){let e=t;li.Socket.user().id===e.customerId()?i=new ho(s):(i=new po(s),i.accepted=e.accepted)}else i=new ho(s);return i.dataLoaded=!0,i.top=e.top,i.data=e.d?JSON.parse(e.d):{},i}buildByMessage(e){let t,i=$i.byIMMessage(e);if(e.scene()===yt.CS){let s=e;li.Socket.user().id===s.customerId()?t=new ho(i):(t=new po(i),t.accepted=s.accepted)}else t=new ho(i);return t}}Eo.sortedInserter=new class extends dn{compare(e,t){if(e.target.scene===t.target.scene&&e.target.id===t.target.id)return 0;let i;if(e.top==t.top){let s=e.maxMessageTime();i=t.maxMessageTime()-s}else i=e.top?-1:1;return i>0?1:-1}};class wo extends ii{static init(){return this.module=new wo,this.module.name=this.GIM_MODULE_NAME,this.initGN(),this.module}static initGN(){gi.addAssembler(new class{assemble(e){let t={messageId:e.id,timestamp:e.tm,type:e.t,senderId:e.sid,toType:e.tt};return e.tt===yt.GROUP&&(t.groupId=e.gid),t}support(e){return!!e.sid}})}postConnect(){bl.init()}static check(){if(!this.module)throw{code:400,content:"IM not initialized. Please include 'IM' in the 'modules' during GoEasy initialization."}}}wo.GIM_MODULE_NAME="GIM";class No extends Eo{constructor(){super(),this.expired=!1,cn.i.on(sn.CS_ONLINE_SUCCESS,this.onCSOnlineSuccess.bind(this)),cn.i.on(sn.CS_OFFLINE_SUCCESS,this.onCSOfflineSuccess.bind(this)),ro.on(ro.EVENT.LOST,this.onDisconnected.bind(this)),ro.on(ro.EVENT.RECONNECTED,this.onConnected.bind(this))}onMaxMessageChanged(e){return Dt(this,void 0,void 0,(function*(){const t=e.message;if(t.scene()===yt.CS){let i=t;if(i.customerId()!=li.Socket.user().id&&(!1===i.accepted||i.type===nn.ACCEPT))if(nn.ACCEPT===t.type){let e=$i.byIMMessage(t);this.removeConversation(e)}else yield this.saveOrUpdateConversation(e)}}))}latestConversations(e){const t=Object.create(null,{latestConversations:{get:()=>super.latestConversations}});return Dt(this,void 0,void 0,(function*(){let i=this.synchronized;yield t.latestConversations.call(this,e),this.list.length>0&&!i&&this.fireUpdated()}))}onUnreadMessageChanged(e){}onCSOnlineSuccess(){return Dt(this,void 0,void 0,(function*(){yield this.loadServerConversations(),this.fireUpdated()}))}onCSOfflineSuccess(){this.list=[],this.fireUpdated()}getUpdatedEventName(){return an.PENDING_CONVERSATIONS_UPDATED}rocketName(){return Tt.CS_PENDING_CONVERSATION}convertAbbrConversation(e){return Dt(this,void 0,void 0,(function*(){let t=e;for(const e of t){e.lastMessage.t=yt.CS;let t=e.customerData,i=e.lastMessage,s=e.userOffsets,n=t?JSON.parse(t):{},a=this.builder.build(i),r=$i.byIMMessage(a),o=this.findConversation(r);wt.isUndef(o)&&(o=new po(r),o.accepted=a.accepted,o.dataLoaded=!0,this.insertOne(o)),o.top=!1,o.data=n,mo.get(r).initPendingMaxMessageAndOffsets(a,s),this.correctPosition(o)}}))}onDisconnected(){this.expired=!0}onConnected(){return Dt(this,void 0,void 0,(function*(){this.expired&&wo.module&&wo.module.active&&(this.expired=!1,this.list=[],yield this.loadServerConversations(),this.fireUpdated())}))}}class ko{constructor(){this.conversations=new Eo,this.pendingConversations=new No}latestConversations(e){this.conversations.latestConversations(e)}latestPendingConversations(e){this.pendingConversations.latestConversations(e)}topPrivateConversation(e){let t=$i.byScene(yt.PRIVATE,e.userId);this.conversations.top(t,e.top,e)}topGroupConversation(e){let t=$i.byScene(yt.GROUP,e.groupId);this.conversations.top(t,e.top,e)}topConversation(e){let t=e.conversation;this.validateConversationDTO(t);let i=$i.byConversationDTO(t);this.conversations.top(i,e.top,e)}removePrivateConversation(e){let t=$i.byScene(yt.PRIVATE,e.userId);this.conversations.remove(t,e)}removeGroupConversation(e){let t=$i.byScene(yt.GROUP,e.groupId);this.conversations.remove(t,e)}removeConversation(e){let t=e.conversation;this.validateConversationDTO(t);let i=$i.byConversationDTO(t);this.conversations.remove(i,e)}validateConversationDTO(e){if(!(e instanceof vt))throw new Error("Incorrect conversation object.");{let t=e.lastMessage;if(t instanceof Yi&&t.customerId()!==li.Socket.user().id&&!1===t.accepted)throw new Error("pending conversation cannot be topped or removed.")}}}class bo{constructor(){this.builder=new mn,li.Socket.onMessage(Ps.imMessage,this.onMessageReceived.bind(this))}sendAck(e){li.Socket.sendAck("imAck",{publishGuid:e})}createNotification(e){const t=li.N.supportAppNotification();if(!wt.isObject(e.nt)||e.s===li.Socket.user().id||!t)return;let i={id:e.i,tm:e.ts,t:e.mt,sid:e.s,tt:e.t};i.tt===yt.GROUP&&(i.gid=e.r),li.N.createLocalNotification(e.nt.t,e.nt.c,i,e.nt.sound,e.nt.badge)}}class Co extends bo{constructor(){super(),li.Socket.onMessage(Ps.IM_MSG_SYNC,this.onSyncMessageReceived.bind(this)),li.Socket.onMessage(Ps.IM_MSG_NEW,this.onNewMessageReceived.bind(this))}onMessageReceived(e){if(e.t!==yt.CS){let t=this.builder.build(e);this.sendAck(t.messageId);let i=$i.byIMMessage(t),s=i.scene;mo.get(i).existsMessage(t)||(this.createNotification(e),cn.i.fire(sn.MESSAGE_RECEIVED,t),s===yt.PRIVATE?yn.fire(an.PRIVATE_MESSAGE_RECEIVED,t):s===yt.GROUP&&yn.fire(an.GROUP_MESSAGE_RECEIVED,t))}}onSyncMessageReceived(e){this.sendAck(e.i),e.rs.forEach((t=>{const i=Object.assign({},e);i.t=yt.PRIVATE,i.r=t,i.s=li.Socket.user().id,delete i.rs;let s=this.builder.build(i),n=$i.byIMMessage(s),a=n.scene;mo.get(n).existsMessage(s)||(this.createNotification(i),cn.i.fire(sn.MESSAGE_RECEIVED,s),a===yt.PRIVATE?yn.fire(an.PRIVATE_MESSAGE_RECEIVED,s):a===yt.GROUP&&yn.fire(an.GROUP_MESSAGE_RECEIVED,s))}))}onNewMessageReceived(e){let t=this.builder.build(e);this.sendAck(t.messageId);let i=$i.byIMMessage(t),s=i.scene;mo.get(i).existsMessage(t)||(this.createNotification(e),cn.i.fire(sn.MESSAGE_RECEIVED,t),s===yt.PRIVATE?yn.fire(an.PRIVATE_MESSAGE_RECEIVED,t):s===yt.GROUP&&yn.fire(an.GROUP_MESSAGE_RECEIVED,t))}}class So{constructor(){this.subscribedGroups=[],li.Socket.on(Os.EXPIRED_RECONNECTED,this.expiredResubscribeGroups.bind(this))}expiredResubscribeGroups(){this.subscribedGroups.forEach((e=>Dt(this,void 0,void 0,(function*(){yield this.doSubscribeGroup(e)}))))}subscribe(e){Rs(e);let t=new xo(e.groupIds,e.accessToken);this.doSubscribeGroup(t).then((()=>{this.subscribedGroups.push(t),It.onSuccess(e,{code:200,content:"ok"})})).catch((t=>{It.onFailed(e,{code:t.resultCode||408,content:t.content||"Failed to subscribe group message"})}))}doSubscribeGroup(e){return new Promise(((t,i)=>{let s=e.groupIds.toString().split(","),n=new hi({name:Tt.subscribeGroups,params:{groupIds:s,at:e.accessToken},permission:ui.WRITE,singleTimeout:At.commonRequestSingle,totalTimeout:At.commonRequestTotal,success:()=>{t()},fail:e=>{i(e)}});li.Socket.e(n)}))}unsubscribe(e){Ds(e),e.groupId=e.groupId.toString();let t=new hi({name:Tt.unsubscribeGroup,params:{groupId:e.groupId},permission:ui.READ,singleTimeout:At.commonRequestSingle,totalTimeout:At.commonRequestTotal,success:()=>{this.deleteSubscriptionByGroupId(e.groupId),It.onSuccess(e,{code:200,content:"ok"})},fail:t=>{It.onFailed(e,{code:t.resultCode||408,content:t.content||"Failed to unsubscribe group message"})}});li.Socket.e(t)}deleteSubscriptionByGroupId(e){this.subscribedGroups=this.subscribedGroups.filter((t=>{const i=t.groupIds.findIndex((t=>t==e));return i>-1&&t.groupIds.splice(i,1),t.groupIds.length>0}))}}class xo{constructor(e,t){this.groupIds=e,this.accessToken=t}}class Vo{constructor(){this.newMessageReceived=e=>{let t=null;e.c&&(t=JSON.parse(e.c)),t&&t.events&&t.events.map((e=>{let i=e.userData?JSON.parse(e.userData):{},s={time:e.time,action:e.action,groupOnlineCount:t.userAmount,groupId:t.groupId,id:e.userId,data:i};yn.fire(an.GROUP_PRESENCE,s)}))},ro.onMessage(Ps.groupPresence,this.newMessageReceived)}presence(e){Rs(e),e.groupIds.toString().split(",");let t={groupIds:e.groupIds};this.emitRocket(Tt.subscribeGroupPresence,t,(()=>{It.onSuccess(e,{code:200,content:"ok"})}),(t=>{It.onFailed(e,{code:t.code||408,content:t.content||"Failed to subscribe group message"})}),At.commonRequestSingle,At.commonRequestTotal)}unPresence(e){Ts(Vs,e),e.groupId=e.groupId.toString();let t={groupId:e.groupId};this.emitRocket(Tt.unsubscribeGroupPresence,t,(()=>{It.onSuccess(e,{code:200,content:"ok"})}),(t=>{It.onFailed(e,{code:t.code||408,content:t.content||"Failed to unsubscribe presence"})}),At.commonRequestSingle,At.commonRequestTotal)}emitRocket(e,t,i,s,n,a){let r=new hi({name:e,params:t,singleTimeout:n,totalTimeout:a,permission:ui.WRITE,success:i,fail:s});li.Socket.e(r)}}class To{get(e){Ds(e),e.groupId=e.groupId.toString();let t=new hi({name:Tt.imGroupOnlineCount,params:{groupId:e.groupId},permission:ui.READ,singleTimeout:At.commonQuerySingle,totalTimeout:At.commonQueryTotal,fail:function(t){It.onFailed(e,t||{code:408,content:"Failed to query online group users"})},success:function(t){200==t.code?It.onSuccess(e,t):It.onFailed(e,t)}});li.Socket.e(t)}}class Ao{doHereNow(e,t,i){let s=new hi({name:e,params:t,permission:ui.READ,singleTimeout:At.commonQuerySingle,totalTimeout:At.commonQueryTotal,fail:e=>{It.onFailed(i,e)},success:e=>{let t=e.content;e.content=t.map((e=>{let t=e.userData?JSON.parse(e.userData):{};return{id:e.userId,data:t}})),It.onSuccess(i,e)}});li.Socket.e(s)}}let _o=class extends Ao{hereNow(e){Ds(e),e.groupId=e.groupId.toString();let t={groupId:e.groupId};this.doHereNow(Tt.imGroupHereNow,t,e)}};class Io extends Ao{hereNow(e){Bs(e),e.userIds.toString().split(","),this.doHereNow(Tt.imHereNow,e,e)}}const Do=new class{fileExtension(e,t){if(wt.isString(e))try{let i=e.split(t);return i[i.length-1]}catch(i){throw Error(i)}}};class Bo{}class Ro extends Bo{constructor(){super(...arguments),this.contentType="",this.name="",this.size=0,this.url=""}}class Mo extends Ro{constructor(){super(...arguments),this.width=0,this.height=0}}class Po{build(e){let t=this.create();return this.setPayload(e,t),t}}class Oo extends Po{create(){return new Ro}setPayload(e,t){let i=t,s=e.createOptions.file;i.url=s.path,i.name=s.name,i.size=s.size,i.contentType=s.type,e.complete=Promise.resolve()}}class Lo extends Oo{create(){return new Mo}setPayload(e,t){super.setPayload(e,t);let i=e.createOptions.file,s=t,n=i.path||i.tempFilePath,a=wt.isEmpty(i.name)||void 0===i.name?n:i.name;s.name="wx-image."+Do.fileExtension(a,"."),s.contentType="image/"+Do.fileExtension(a,"."),s.url=n,s.size=i.size,e.complete=new Promise(((e,t)=>{wx.getImageInfo({src:s.url,success(t){s.width=t.width,s.height=t.height,e()},fail(e){t(e)}})}))}}class Fo extends Ro{constructor(){super(...arguments),this.duration=0}}class Uo extends Oo{create(){return new Fo}setPayload(e,t){super.setPayload(e,t);let i=e.createOptions.file,s=t,n=i.tempFilePath,a=wt.isEmpty(i.name)||null==i.name?n:i.name,r=i.duration,o=i.fileSize;s.url=n,s.size=o,s.duration=r/1e3,s.name="wx-audio."+Do.fileExtension(a,"."),s.contentType="audio/"+Do.fileExtension(a,"."),e.complete=Promise.resolve()}}class zo extends Bo{constructor(){super(...arguments),this.text=""}}class Go extends Po{create(){return new zo}setPayload(e,t){let i=t,s=e.createOptions;i.text=s.text,e.complete=Promise.resolve()}}class Ho extends Bo{constructor(){super(...arguments),this.video=new $o,this.thumbnail=new jo}}class jo{constructor(){this.name="",this.url="",this.width=0,this.height=0,this.contentType=""}initURL(e){kt.currentPlatform()===Nt.BROWSER&&this.htmlUrl(e)}htmlUrl(e){let t=document.createElement("canvas");t.width=e.videoWidth,t.height=e.videoHeight,t.getContext("2d").drawImage(e,0,0,t.width,t.height),this.url=t.toDataURL("image/png")}}class $o{constructor(){this.name="",this.url="",this.width=0,this.height=0,this.contentType="",this.size=0,this.duration=0}}class qo extends Po{create(){return new Ho}setPayload(e,t){let i=e.createOptions.file,s=t,n=s.video,a=s.thumbnail,{duration:r,height:o,size:l,tempFilePath:c,thumbTempFilePath:d,width:u,name:m=""}=i,h=wt.isEmpty(m)?c:m;n.contentType="video/"+Do.fileExtension(h,"."),n.name="wx-video."+Do.fileExtension(h,"."),n.url=c,n.width=a.width=u,n.height=a.height=o,n.size=l,n.duration=r,a.url=d,a.contentType="image/jpg",a.name="wx-thumbnail.jpg",e.complete=Promise.resolve()}}class Wo extends Po{create(){return new Ro}setPayload(e,t){let i=t,s=e.createOptions.file;i.url=s.fullPath||s.path,i.name=s.name,i.size=s.size,i.contentType=s.type,s.type,e.complete=Promise.resolve()}}class Jo extends Wo{create(){return new Mo}setPayload(e,t){let i=t,s=e.createOptions.file;i.url=s.path,i.size=s.size;let n=wt.isEmpty(s.name)||void 0===s.name?s.path:s.name;i.contentType="image/"+Do.fileExtension(n,"."),i.name="uni-image."+Do.fileExtension(n,"."),e.complete=new Promise(((e,t)=>{uni.getImageInfo({src:s.path,success(t){i.width=t.width,i.height=t.height,e()},fail(e){t(e)}})}))}}class Yo extends Wo{create(){return new Fo}setPayload(e,t){let i=e.createOptions,s=t,n=i.file,a=n.tempFilePath,r=wt.isEmpty(n.name)||null==n.name?a:n.name;s.url=a,s.name="uni-audio."+Do.fileExtension(r,"."),s.contentType="audio/"+Do.fileExtension(r,"."),e.complete=new Promise(((e,t)=>{uni.getFileInfo({filePath:a,success:n=>{let r=n.size;if(s.size=r,0===r)e();else if(wt.isDef(i.file.duration))s.duration=i.file.duration/1e3,e();else{const i=uni.createInnerAudioContext();i.src=a,i.onCanplay((function(n){n.errCode?(i.destroy(),t(n)):(s.duration=i.duration,i.destroy(),e())})),i.onError((s=>{i.destroy(),-99===s.errCode?e():t(s)}))}},fail(e){t(e)}})}))}}class Xo extends Po{create(){return new Ho}setPayload(e,t){let i=e.createOptions.file,s=t,n=s.video,a=s.thumbnail,{duration:r,height:o,size:l,tempFilePath:c,width:d,name:u=""}=i,m=wt.isEmpty(u)?c:u;n.size=l,n.width=d,n.height=o,n.url=c,n.duration=r,n.contentType="video/"+Do.fileExtension(m,"."),n.name="uni-video."+Do.fileExtension(m,"."),a.url=c,a.height=200,a.width=Number((n.width*a.height/n.height).toFixed(0)),a.contentType="image/jpg",a.name="uni-thumbnail.jpg",e.complete=Promise.resolve()}}class Qo extends Po{create(){return new Ro}setPayload(e,t){let i=t,s=e.createOptions.file,n=window.URL||window.webkitURL;i.url=n.createObjectURL(s),i.name=s.name,i.size=s.size,i.contentType=s.type,e.complete=Promise.resolve()}}class Zo extends Qo{create(){return new Mo}setPayload(e,t){super.setPayload(e,t);let i=e.createOptions.file,s=t,n=window.URL||window.webkitURL,a=new Image;a.src=n.createObjectURL(i),e.complete=new Promise(((e,t)=>{a.onload=function(){s.width=a.width,s.height=a.height,n.revokeObjectURL(a.src),e()},a.onerror=function(e){n.revokeObjectURL(a.src),t(e)}}))}}class Ko extends Qo{create(){return new Fo}setPayload(e,t){super.setPayload(e,t);let i=e.createOptions.file,s=t,n=window.URL||window.webkitURL,a=document.createElement("audio");a.src=n.createObjectURL(i),e.complete=new Promise(((e,t)=>{a.onloadedmetadata=()=>{s.duration=a.duration,n.revokeObjectURL(a.src),e()},a.onerror=e=>{n.revokeObjectURL(a.src),t(e)}}))}}class el extends Po{create(){return new Ho}setPayload(e,t){let i=e.createOptions.file,s=t,n=s.video,a=s.thumbnail,r=window.URL||window.webkitURL,o=document.createElement("video");o.src=r.createObjectURL(i),n.size=i.size,n.name=i.name,n.contentType=i.type,n.url=o.src,a.name=i.name,a.contentType="image/jpg",e.complete=new Promise(((e,t)=>{o.onloadedmetadata=()=>{n.duration=o.duration,n.width=o.videoWidth,n.height=o.videoHeight,a.width=o.videoWidth,a.height=o.videoHeight,a.url=this.getThumbnailUrl(o),r.revokeObjectURL(o.src),e()},o.onerror=function(e){r.revokeObjectURL(o.src),t(e)}}))}getThumbnailUrl(e){let t=document.createElement("canvas");return t.width=e.videoWidth,t.height=e.videoHeight,t.getContext("2d").drawImage(e,0,0,t.width,t.height),t.toDataURL("image/png")}}class tl extends Po{create(){return new Ho}setPayload(e,t){let i=e.createOptions.file,s=t,n=s.video,a=s.thumbnail,{duration:r,height:o,size:l,tempFilePath:c,tempVideoThumbPath:d,width:u}=i;n.size=l,n.width=u,n.height=o,n.url=c,n.duration=r,n.contentType="video/mp4",n.name="ali-video.mp4",a.url=d,a.height=200,a.width=Number((n.width*a.height/n.height).toFixed(0)),a.contentType="image/jpg",a.name="ali-thumbnail.jpg",e.complete=Promise.resolve()}}class il extends Po{create(){return new Ro}setPayload(e,t){e.complete=Promise.reject("Alipay not support file message.")}}class sl extends il{create(){return new Mo}setPayload(e,t){let i=t,s=e.createOptions.file;i.url=s.path,i.size=s.size,e.complete=new Promise(((e,t)=>{my.getImageInfo({src:s.path,success(t){i.width=t.width,i.height=t.height,i.contentType="image/"+t.type,i.name="ali-image."+t.type,e()},fail(e){t(e)}})}))}}class nl extends il{create(){return new Fo}setPayload(e,t){let i=t,s=e.createOptions.file,n=s.tempFilePath;i.url=n,i.name="ali-audio."+Do.fileExtension(n,"."),i.contentType="audio/"+Do.fileExtension(n,"."),i.duration=s.duration,i.size=s.fileSize,e.complete=Promise.resolve()}}class al extends Po{create(){return new Ho}setPayload(e,t){let i=e.createOptions.file,s=t,n=s.video,a=s.thumbnail,{duration:r,height:o,size:l,tempFilePath:c,thumbTempFilePath:d,width:u}=i;n.size=l,n.width=u,n.height=o,n.url=c,n.duration=r,n.contentType="video/"+Do.fileExtension(c,"."),n.name="baidu-video."+Do.fileExtension(c,"."),a.url=d,a.height=200,a.width=Number((n.width*a.height/n.height).toFixed(0)),a.contentType="image/"+Do.fileExtension(d,"."),a.name="baidu-thumbnail."+Do.fileExtension(c,"."),e.complete=Promise.resolve()}}class rl extends Po{create(){return new Ro}setPayload(e,t){e.complete=Promise.reject("Baidu app not support file message.")}}class ol extends rl{create(){return new Fo}setPayload(e,t){let i=t,s=e.createOptions.file,n=s.tempFilePath;i.url=n,i.name="baidu-audio."+Do.fileExtension(n,"."),i.contentType="audio/"+Do.fileExtension(n,"."),i.duration=s.duration/1e3,i.size=s.fileSize,e.complete=Promise.resolve()}}class ll extends rl{create(){return new Mo}setPayload(e,t){let i=t,s=e.createOptions.file;i.url=s.path,i.size=s.size,e.complete=new Promise(((e,t)=>{swan.getImageInfo({src:s.path,success(t){i.width=t.width,i.height=t.height,i.contentType="image/"+t.type,i.name="baidu-image."+t.type,e()},fail(e){t(e)}})}))}}class cl extends Po{create(){return new Ro}setPayload(e,t){let i=t,s=e.createOptions.file;const{uri:n,type:a,size:r,name:o}=s;i.url=decodeURIComponent(n),i.name=o,i.size=r,i.contentType=a,e.complete=Promise.resolve()}}class dl extends cl{create(){return new Mo}setPayload(e,t){let i=t,s=e.createOptions.file;const{uri:n,fileSize:a,type:r,fileName:o,width:l,height:c}=s;i.url=n,i.size=a,i.contentType=r,i.name=o,i.width=l,i.height=c,e.complete=Promise.resolve()}}class ul extends Po{create(){return new Ho}setPayload(e,t){let i=e.createOptions.file;const s=t,{video:n,thumbnail:a}=s,{uri:r,type:o,fileSize:l,fileName:c,duration:d,height:u,width:m}=i;n.size=l,n.width=m,n.height=u,n.url=r,n.duration=d,n.contentType=o,n.name=c,a.url=r,a.name="rn-thumbnail.jpg",a.height=200,a.width=Number((n.width*a.height/n.height).toFixed(0)),a.contentType="image/jpg",e.complete=Promise.resolve()}}class ml extends cl{create(){return new Fo}setPayload(e,t){let i=e.createOptions,s=t,n=i.file;const{uri:a,name:r,duration:o,size:l}=n;s.url=a,s.duration=Number((o/1e3).toFixed(2)),s.size=l,s.name=r||"rn-audio."+Do.fileExtension(a,"."),s.contentType="audio/"+Do.fileExtension(a,"."),i.file={uri:a,type:s.contentType,name:s.name},e.complete=Promise.resolve()}}class hl extends Bo{}class pl extends Po{create(){return new hl}setPayload(e,t){let i=e.createOptions;t.payload=i.payload,e.complete=Promise.resolve()}}class gl{constructor(e,t){this.type=e,this.createOptions=t}}class yl{constructor(){this.framework=ht.currentFramework(),this.platform=kt.currentPlatform(),this.payloadBuilders={[ct.UNIAPP]:{image:new Jo,file:new Wo,audio:new Yo,video:new Xo,text:new Go},[Nt.MP_WX]:{image:new Lo,file:new Oo,audio:new Uo,video:new qo,text:new Go},[Nt.BROWSER]:{image:new Zo,file:new Qo,audio:new Ko,video:new el,text:new Go},[Nt.MP_ALI]:{image:new sl,file:new il,audio:new nl,video:new tl,text:new Go},[Nt.MP_BAIDU]:{image:new ll,file:new rl,audio:new ol,video:new al,text:new Go},[ct.REACT_NATIVE]:{image:new dl,file:new cl,audio:new ml,video:new ul,text:new Go},[Nt.MP_BYTE]:{image:new Lo,file:new Oo,audio:new Uo,video:new qo,text:new Go}}}buildMessage(e,t){this.validate(t,e);const i=this.framework===ct.UNKNOWN?this.platform:this.framework;let s=this.payloadBuilders[i][e],n=new gl(e,t);if(s){let e=s.build(n);n.payload=e}else{let e=(new pl).build(n);n.payload=e.payload}let a=this.build(n);return n.complete.then((()=>{It.onSuccess(t,a)})).catch((e=>{It.onFailed(t,e)})),a}build(e){let t,i=e.type,s=e.payload,n=e.createOptions.to,a=n.type;return a===yt.GROUP?(t=new Ji,t.senderData=li.Socket.user().data,n.id&&(t.groupId=n.id)):a===yt.PRIVATE?(t=new Wi,t.read=!1,n.id&&(t.receiverId=n.id)):a===yt.CS&&(t=new Yi,t.to=n.id.toString(),t.teamId=n.id.toString(),t.senderData=li.Socket.user().data),t.senderId=li.Socket.user().id,t.messageId=di.get(),t.payload=s,t.timestamp=Date.now(),t.type=i,t.recalled=!1,t.status=ft.NEW,t.buildOptions=e,t}validate(e,t){var i;i=Object.assign(Object.assign({},e),{type:t}),Ts(os,i)}}class fl extends bo{onMessageReceived(e){if(e.t===yt.CS){let t=this.builder.build(e);this.sendAck(t.messageId);let i=$i.byIMMessage(t);mo.get(i).existsMessage(t)||(t.customerId()===li.Socket.user().id?(this.createNotification(e),cn.i.fire(sn.MESSAGE_RECEIVED,t),yn.fire(an.CS_MESSAGE_RECEIVED,t)):oo.getInstance().queryTeams().then((()=>{lo.isMyMessage(t)&&this.createNotification(e),cn.i.fire(sn.CS_AGENT_MESSAGE_RECEIVED,t)})))}}}class vl{constructor(e){this.times=new Array;let t=e[0],i=$i.byIMMessage(t);this.scene=i.scene,this.targetId=i.id,e.forEach((e=>{this.times.push(e.timestamp)})),this.times.sort(((e,t)=>e<t?-1:e==t?0:1))}}class El{constructor(){this.onRemoteRecalled=e=>{cn.i.fire(sn.MESSAGE_RECALLED,e)},ro.onMessage(Ps.IM_MSG_RECALLED,this.onRemoteRecalled)}recallMessage(e){return Dt(this,void 0,void 0,(function*(){Ts(ls,e);let t=e.messages;yield this.recallServerMessages(t);let i=t[0],s=i.scene(),n=this.toConversationId(s,i.senderId,i.targetId()),a={id:li.Socket.user().id,data:li.Socket.user().data},r=t.map((e=>e.timestamp)),o=new gn(s,n,a,r);cn.i.fire(sn.MESSAGE_RECALLED,o),It.onSuccess(e)}))}toConversationId(e,t,i){if(yt.PRIVATE===e)return n=i,(s=t).localeCompare(n)>0?`${s}:${n}`:`${n}:${s}`;var s,n;if(yt.GROUP===e)return i;throw{code:400,content:`scene: ${e} not support`}}recallServerMessages(e){let t=new vl(e);return 0===t.times.length?Promise.resolve():new Promise(((e,i)=>{let s=new hi({name:Tt.IM_RECALL_MESSAGE,params:t,permission:ui.WRITE,singleTimeout:At.commonRequestSingle,totalTimeout:At.commonRequestTotal,fail:e=>{i(e)},success:t=>{200===t.code?e(t):i(t)}});li.Socket.e(s)}))}}class wl{constructor(){this.map=new Map}getData(e){return this.map.get(e)}setData(e,t){this.map.set(e,t)}}class Nl{constructor(){this.dataCache=new wl}static init(){this.i=new Nl}getData(...e){return Dt(this,void 0,void 0,(function*(){let t=[],i=new Map;return e.forEach((e=>{let s=this.dataCache.getData(e);s?i.set(e,s):t.push(e)})),0===t.length||(yield this.fetchData(...t)).forEach(((e,t)=>{this.dataCache.setData(t,e),i.set(t,e)})),Promise.resolve(i)}))}fetchData(...e){return new Promise(((t,i)=>{let s=new hi({name:Tt.MD_CMD,permission:ui.READ,singleTimeout:At.commonRequestSingle,totalTimeout:At.commonRequestTotal,params:{name:"GET",data:{ids:e}},success:e=>{if(200===e.code){const i=new Map;e.content.forEach((e=>{i.set(e.id,e.data)})),t(i)}else i(e)},fail:e=>{i(e)}});li.Socket.e(s)}))}setData(e,t){this.dataCache.setData(e,t)}}class kl{constructor(){cn.i.on(sn.MESSAGE_RECEIVED,this.onMessageReceived),cn.i.on(sn.MESSAGE_SENDING,this.onMessageSending)}onMessageSending(e){let t=$i.byIMMessage(e.message);t.scene===yt.PRIVATE&&Nl.i.setData(t.id,e.receiver)}onMessageReceived(e){if($i.byIMMessage(e).scene===yt.GROUP){let t=e;Nl.i.setData(t.senderId,t.senderData)}}}class bl{constructor(){this._iMReceiver=new Co,this.csMessageReceiver=new fl,this.memberDataUpdator=new kl,this._userHereNow=new Io,this.goEasyUploader=new tn,this._groupHereNow=new _o,this._groupOnlineCount=new To,this.groupMessageSubscriber=new So,this.messageBuilder=new yl,this.messageSender=new class{constructor(){this.payloadImprover=new class{constructor(){this.improvers={[ki.FILE]:new rn,[ki.AUDIO]:new rn,[ki.IMAGE]:new ln,[ki.VIDEO]:new on}}improve(e){let t=this.improvers[e.message.type];if(t)try{return t.improve(e)}catch(i){return Promise.reject(i)}return Promise.resolve()}}}send(e){this.validate(e);let t=e.message,i=e.accessToken,s=t.buildOptions,n=s.createOptions,a=n.notification,r=n.wxmpTemplateMsg,o=n.to;t.status=ft.SENDING;let l=s.complete,c=this.payloadImprover.improve(e);Promise.all([l,c]).then((()=>Dt(this,void 0,void 0,(function*(){if(n.beforeSend){const e=JSON.parse(JSON.stringify(t));yield n.beforeSend(e)}if("receivers"in n.to){const s=new Array;o.receivers.forEach((e=>{const i=Object.assign(Object.create(Object.getPrototypeOf(t)),t);o.type===yt.PRIVATE?i.receiverId=e.id:o.type===yt.GROUP&&(i.groupId=e.id),s.push(i);const n={message:i,receiver:e.data};cn.i.fire(sn.MESSAGE_SENDING,n)})),this.doSend(o,a,r,i,e,s,t)}else{const s={message:t,receiver:o.data};cn.i.fire(sn.MESSAGE_SENDING,s),this.doSend(o,a,r,i,e,[t])}})))).catch((i=>{t.status=ft.FAIL,It.onFailed(e,{code:i&&i.code||400,content:i&&i.content||i})}))}doSend(e,t,i,s,n,a,r){let o=new class{constructor(e,t,i,s,n){this.validate(e),this.mt=e.type,"receivers"in t?this.receivers=t.receivers:(this.to=t.id,this.d=JSON.stringify(t.data)),this.p=JSON.stringify(e.payload),i&&(this.nt=i),n&&(this.at=n),s&&(this.wxmpTemplateMsg=yi(s),this.wxmpTemplateMsg.data=JSON.stringify(this.wxmpTemplateMsg.data));let a=t.type;if(this.t=a,a===yt.CS){let t=e;this.tid=t.teamId}this.guid=e.messageId}validate(e){if(e.type===ki.TEXT&&JSON.stringify(e.payload).length>3072)throw Error("message-length limit 3kb")}}(a[0],e,t,i,s),l=new hi({name:Tt.publishIM,params:o,unique:!0,permission:ui.WRITE,singleTimeout:At.commonRequestSingle,totalTimeout:At.commonRequestTotal,fail:e=>{a.forEach((e=>{e.status=ft.FAIL,cn.i.fire(sn.MESSAGE_SEND_FAILED,e)})),r&&(r.status=ft.FAIL),It.onFailed(n,{code:e.resultCode,content:e.content})},success:e=>{a.forEach((t=>{if(t.status=ft.SUCCESS,t.timestamp=e.content.timestamp,t.messageId=JSON.stringify(e.content.id),t.scene()===yt.CS){let i=t;i.customerId()!==li.Socket.user().id&&(i.sessionId=e.content.sessionId)}t.clearUseLessAttribute(),cn.i.fire(sn.MESSAGE_SEND_SUCCESS,t)})),r&&(r.status=ft.SUCCESS,r.timestamp=e.content.timestamp,r.messageId=JSON.stringify(e.content.id),r.clearUseLessAttribute()),It.onSuccess(n)}});li.Socket.e(l)}validate(e){let t=e.message;if(!(t instanceof qi))throw new Error("it is invalid message");if(t.status!==ft.NEW)throw new Error("Please create a new message, a message can only be sent once")}},this.recaller=new El,this._groupPresenceSubscriber=new Vo,this._userPresenceSubscriber=new class{constructor(){this.newMessageReceived=e=>{let t=[];e.c&&(t=JSON.parse(e.c).events||[]),t.map((e=>{let t=e.userData?JSON.parse(e.userData):{},i={time:e.time,action:e.action,id:e.userId,data:t};yn.fire(an.USER_PRESENCE,i)}))},ro.onMessage(Ps.userPresence,this.newMessageReceived)}presence(e){Bs(e),e.userIds.toString().split(",");let t={userIds:e.userIds};this.emitRocket(Tt.subscribeUserPresence,t,(()=>{It.onSuccess(e,{code:200,content:"ok"})}),(t=>{It.onFailed(e,{code:t.code||408,content:t.content||"Failed to subscribe group message"})}),At.commonRequestSingle,At.commonRequestTotal)}unPresence(e){Is(e),e.userId=e.userId.toString();let t={userId:e.userId};this.emitRocket(Tt.unsubscribeUserPresence,t,(()=>{It.onSuccess(e,{code:200,content:"ok"})}),(t=>{It.onFailed(e,{code:t.code||408,content:t.content||"Failed to unsubscribe presence"})}),At.commonRequestSingle,At.commonRequestTotal)}emitRocket(e,t,i,s,n,a){let r=new hi({name:e,params:t,singleTimeout:n,totalTimeout:a,permission:ui.WRITE,success:i,fail:s});li.Socket.e(r)}},this.conversations=new ko,this.histories=mo.init()}static init(){cn.init(),yn.init(),bl.instance=new bl}static i(){if(bl.instance)return bl.instance;throw Error("Please connect first.")}validateModules(){if(ro.status()===dt.DISCONNECTED)throw Error("Please call connect() first.");wo.check()}catch(e,t){return Dt(this,void 0,void 0,(function*(){try{this.validateModules(),yield e()}catch(i){It.onFailed(t,i)}}))}on(e,t){yn.on(e,t)}off(e,t){yn.off(e,t)}createTextMessage(e){return this.validateModules(),this.messageBuilder.buildMessage(ki.TEXT,e)}createImageMessage(e){return this.validateModules(),this.messageBuilder.buildMessage(ki.IMAGE,e)}createFileMessage(e){return this.validateModules(),this.messageBuilder.buildMessage(ki.FILE,e)}createAudioMessage(e){return this.validateModules(),this.messageBuilder.buildMessage(ki.AUDIO,e)}createVideoMessage(e){return this.validateModules(),this.messageBuilder.buildMessage(ki.VIDEO,e)}createCustomMessage(e){return this.validateModules(),this.messageBuilder.buildMessage(e.type,e)}sendMessage(e){this.catch((()=>{this.messageSender.send(e)}),e)}recallMessage(e){this.catch((()=>{this.recaller.recallMessage(e)}),e)}deleteMessage(e){this.catch((()=>{this.histories.deleteMessage(e)}),e)}markGroupMessageAsRead(e){this.catch((()=>Dt(this,void 0,void 0,(function*(){yield this.histories.groupMarkAsRead(e)}))),e)}markPrivateMessageAsRead(e){this.catch((()=>Dt(this,void 0,void 0,(function*(){yield this.histories.privateMarkAsRead(e)}))),e)}markMessageAsRead(e,t){this.catch((()=>Dt(this,void 0,void 0,(function*(){yield this.histories.markMessageAsRead(e,t)}))),e)}latestConversations(e){this.validateModules(),this.conversations.latestConversations(e)}removePrivateConversation(e){this.catch((()=>this.conversations.removePrivateConversation(e)),e)}removeGroupConversation(e){this.catch((()=>this.conversations.removeGroupConversation(e)),e)}topPrivateConversation(e){this.catch((()=>this.conversations.topPrivateConversation(e)),e)}topGroupConversation(e){this.catch((()=>this.conversations.topGroupConversation(e)),e)}history(e,t){this.catch((()=>{this.histories.loadHistory(e,t)}),e)}subscribeUserPresence(e){this.catch((()=>this._userPresenceSubscriber.presence(e)),e)}unsubscribeUserPresence(e){this.catch((()=>this._userPresenceSubscriber.unPresence(e)),e)}hereNow(e){this.catch((()=>this._userHereNow.hereNow(e)),e)}subscribeGroup(e){this.catch((()=>this.groupMessageSubscriber.subscribe(e)),e)}unsubscribeGroup(e){this.catch((()=>this.groupMessageSubscriber.unsubscribe(e)),e)}subscribeGroupPresence(e){this.catch((()=>this._groupPresenceSubscriber.presence(e)),e)}unsubscribeGroupPresence(e){this.catch((()=>this._groupPresenceSubscriber.unPresence(e)),e)}groupHereNow(e){this.catch((()=>this._groupHereNow.hereNow(e)),e)}groupOnlineCount(e){this.catch((()=>this._groupOnlineCount.get(e)),e)}latestPendingConversations(e){this.validateModules(),this.conversations.latestPendingConversations(e)}topConversation(e){this.validateModules(),this.conversations.topConversation(e)}removeConversation(e){this.validateModules(),this.conversations.removeConversation(e)}}class Cl{constructor(e,t){this.customerId=e,this.teamId=t}}class Sl{constructor(e,t){this.teamId=e;let i=new Et(t.id.toString(),JSON.stringify(t.data));this.customer=i}}class xl{constructor(e,t,i){this.customerId=e,this.teamId=t,this.agentId=i}}class Vl{constructor(e,t){this.customerId=e,this.teamId=t}}class Tl{constructor(e){this.builder=new mn,this.teamId=e}accept(e,t){Ts(fs,t);let i=new Sl(e,t.customer),s=new hi({name:Tt.CS_ACCEPT,params:i,permission:ui.WRITE,singleTimeout:At.commonRequestSingle,totalTimeout:At.commonRequestTotal,fail:e=>{It.onFailed(t,e)},success:e=>{let i=this.builder.build(e.content.message);cn.i.fire(sn.CS_ACCEPTED,i),It.onSuccess(t)}});li.Socket.e(s)}end(e,t){_s(t.id);let i=t.id.toString(),s=new Vl(i,e),n=new hi({name:Tt.CS_END,params:s,permission:ui.WRITE,singleTimeout:At.commonRequestSingle,totalTimeout:At.commonRequestTotal,fail:e=>{It.onFailed(t,e)},success:e=>{let i=this.builder.build(e.content.message);cn.i.fire(sn.CS_ENDED,i),It.onSuccess(t)}});li.Socket.e(n)}queryCustomerStatus(e,t){return Dt(this,void 0,void 0,(function*(){_s(t.id);let i=yield this.doCustomerStatus(e,t.id);this.activeCustomerStatus=i,this.activeCustomerStatusOptions=t,It.onSuccess(t,i)}))}doCustomerStatus(e,t){let i=t.toString(),s=new Cl(i,e);return new Promise(((e,t)=>{let i=new hi({name:Tt.CS_CUSTOMER_STATUS,params:s,permission:ui.READ,singleTimeout:At.commonQuerySingle,totalTimeout:At.commonQueryTotal,fail:e=>{t(e)},success:t=>{let i=t.content;i.agent&&(i.agent.data=JSON.parse(i.agent.data)),e(i)}});li.Socket.e(i)}))}transfer(e,t){Ts(vs,t);let i=t.customerId.toString(),s=t.agentId.toString(),n=new xl(i,e,s),a=new hi({name:Tt.CS_TRANSFER,params:n,permission:ui.WRITE,singleTimeout:At.commonRequestSingle,totalTimeout:At.commonRequestTotal,fail:e=>{It.onFailed(t,e)},success:e=>{let i=this.builder.build(e.content.message);cn.i.fire(sn.CS_TRANSFER,i),It.onSuccess(t)}});li.Socket.e(a)}}class Al{createTextMessage(e,t){let i=bl.i().createTextMessage(t);this.extendProps(e,i)}createImageMessage(e,t){let i=bl.i().createImageMessage(t);this.extendProps(e,i)}createFileMessage(e,t){let i=bl.i().createFileMessage(t);this.extendProps(e,i)}createAudioMessage(e,t){let i=bl.i().createAudioMessage(t);this.extendProps(e,i)}createVideoMessage(e,t){let i=bl.i().createVideoMessage(t);this.extendProps(e,i)}createCustomMessage(e,t){let i=bl.i().createCustomMessage(t);this.extendProps(e,i)}extendProps(e,t){if(t.scene()===yt.CS){let i=t;i.teamId=e,i.accepted=!0}}}class _l{constructor(e){this.teamId=e,this.agentStatus=oo.getInstance(),this.conversationHandler=new Tl(e),this.messageCreator=new Al}catch(e,t){return Dt(this,void 0,void 0,(function*(){try{yield e()}catch(i){It.onFailed(t,i)}}))}isOnline(e){this.catch((()=>{this.agentStatus.isOnline(this.teamId,e)}),e)}online(e){this.catch((()=>{this.agentStatus.online(this.teamId,e)}),e)}offline(e){this.catch((()=>{this.agentStatus.offline(this.teamId,e)}),e)}customerStatus(e){this.catch((()=>{this.conversationHandler.queryCustomerStatus(this.teamId,e)}),e)}accept(e){this.catch((()=>{this.conversationHandler.accept(this.teamId,e)}),e)}end(e){this.catch((()=>{this.conversationHandler.end(this.teamId,e)}),e)}history(e){bl.i().history(e,this.teamId)}markMessageAsRead(e){bl.i().markMessageAsRead(e,this.teamId)}createTextMessage(e){this.messageCreator.createTextMessage(this.teamId,e)}createImageMessage(e){this.messageCreator.createImageMessage(this.teamId,e)}createFileMessage(e){this.messageCreator.createFileMessage(this.teamId,e)}createAudioMessage(e){this.messageCreator.createAudioMessage(this.teamId,e)}createVideoMessage(e){this.messageCreator.createVideoMessage(this.teamId,e)}createCustomMessage(e){this.messageCreator.createCustomMessage(this.teamId,e)}transfer(e){this.catch((()=>{this.conversationHandler.transfer(this.teamId,e)}),e)}agents(e){this.catch((()=>{this.agentStatus.agents(this.teamId,e)}),e)}liveSession(e){this.catch((()=>{lo.live(this.teamId,e)}),e)}quitLiveSession(e){this.catch((()=>{lo.quit(e)}),e)}listenCustomer(e){let t={customerId:e.id,onNewMessage:e.onNewMessage,onStatusUpdated:e.onStatusUpdated,onFailed:e.onFailed,onSuccess:e.onSuccess};this.catch((()=>{lo.live(this.teamId,t)}),e)}cancelListenCustomer(e){this.catch((()=>{lo.quit(e)}),e)}}class Il{static team(e){As(e);let t=this.teams.get(e);return t||(t=new _l(e.toString()),this.teams.set(e.toString(),t)),t}}Il.teams=new Map;class Dl{constructor(e){this.id=e}isOnline(e){Il.team(this.id).isOnline(e)}online(e){Il.team(this.id).online(e)}offline(e){Il.team(this.id).offline(e)}customerStatus(e){Il.team(this.id).customerStatus(e)}accept(e){Il.team(this.id).accept(e)}end(e){Il.team(this.id).end(e)}history(e){Il.team(this.id).history(e)}markMessageAsRead(e){Il.team(this.id).markMessageAsRead(e)}createTextMessage(e){Il.team(this.id).createTextMessage(e)}createImageMessage(e){Il.team(this.id).createImageMessage(e)}createFileMessage(e){Il.team(this.id).createFileMessage(e)}createAudioMessage(e){Il.team(this.id).createAudioMessage(e)}createVideoMessage(e){Il.team(this.id).createVideoMessage(e)}createCustomMessage(e){Il.team(this.id).createCustomMessage(e)}transfer(e){Il.team(this.id).transfer(e)}agents(e){Il.team(this.id).agents(e)}liveSession(e){Il.team(this.id).liveSession(e)}quitLiveSession(e){Il.team(this.id).quitLiveSession(e)}listenCustomer(e){Il.team(this.id).listenCustomer(e)}cancelListenCustomer(e){Il.team(this.id).cancelListenCustomer(e)}}class Bl{static getInstance(e){return this.init(e),Bl}static init(e){if(this.getConnectionStatus()!==dt.DISCONNECTED)throw new Error("Initialization failed. Please disconnect and try again.");Ts(Zi,e),e.modules=e.modules.map((e=>e.toUpperCase())),pt.init(e.reactNativeOptions),this.options=e,ro.init(e),e.allowNotification&&gi.init(e.allowNotification),e.modules&&(e.modules.includes("PUBSUB")&&si.initModule(Gs.init()),e.modules.includes("IM")&&si.initModule(wo.init())),Nl.init(),li.init(ro,gi,Nl,gt,bt,si),this.options.customProvider&&fn.init(this.options.customProvider)}static setBadge(e){gi.setBadge(e)}static connect(e){ro.connect(e,"JS")}static disconnect(e){ro.disconnect(e)}static getConnectionStatus(){return ro.status()}static onClickNotification(e){gi.onClickNotification(e)}static c(e){e.init(li.Socket,li.N,li.Member,li.v,li.Platform,si)}}Bl.version=gt,Bl.IM_EVENT=an,Bl.IM_SCENE=yt,Bl.im=class{static on(e,t){bl.i().on(e,t)}static off(e,t){bl.i().off(e,t)}static createTextMessage(e){return bl.i().createTextMessage(e)}static createImageMessage(e){return bl.i().createImageMessage(e)}static createFileMessage(e){return bl.i().createFileMessage(e)}static createAudioMessage(e){return bl.i().createAudioMessage(e)}static createVideoMessage(e){return bl.i().createVideoMessage(e)}static createCustomMessage(e){return bl.i().createCustomMessage(e)}static sendMessage(e){bl.i().sendMessage(e)}static recallMessage(e){bl.i().recallMessage(e)}static deleteMessage(e){bl.i().deleteMessage(e)}static markGroupMessageAsRead(e){bl.i().markGroupMessageAsRead(e)}static markPrivateMessageAsRead(e){bl.i().markPrivateMessageAsRead(e)}static latestConversations(e){bl.i().latestConversations(e)}static removePrivateConversation(e){bl.i().removePrivateConversation(e)}static removeGroupConversation(e){bl.i().removeGroupConversation(e)}static topPrivateConversation(e){bl.i().topPrivateConversation(e)}static topGroupConversation(e){bl.i().topGroupConversation(e)}static history(e){bl.i().history(e)}static subscribeUserPresence(e){bl.i().subscribeUserPresence(e)}static unsubscribeUserPresence(e){bl.i().unsubscribeUserPresence(e)}static hereNow(e){bl.i().hereNow(e)}static subscribeGroup(e){bl.i().subscribeGroup(e)}static unsubscribeGroup(e){bl.i().unsubscribeGroup(e)}static subscribeGroupPresence(e){bl.i().subscribeGroupPresence(e)}static unsubscribeGroupPresence(e){bl.i().unsubscribeGroupPresence(e)}static groupHereNow(e){bl.i().groupHereNow(e)}static groupOnlineCount(e){bl.i().groupOnlineCount(e)}static markMessageAsRead(e){bl.i().markMessageAsRead(e)}static csteam(e){return new Dl(e)}static pendingConversations(e){bl.i().latestPendingConversations(e)}static topConversation(e){bl.i().topConversation(e)}static removeConversation(e){bl.i().removeConversation(e)}},Bl.pubsub=class{static publish(e){this.catch((()=>{zs.instance.publish(e)}),e)}static subscribe(e){this.catch((()=>{zs.instance.subscribe(e)}),e)}static unsubscribe(e){this.catch((()=>{zs.instance.unsubscribe(e)}),e)}static subscribePresence(e){this.catch((()=>{zs.instance.subscribePresence(e)}),e)}static unsubscribePresence(e){this.catch((()=>{zs.instance.unsubscribePresence(e)}),e)}static history(e){this.catch((()=>{zs.instance.history(e)}),e)}static hereNow(e){this.catch((()=>{zs.instance.hereNow(e)}),e)}static catch(e,t){try{if(Gs.check(),[dt.DISCONNECTED,dt.DISCONNECTING,dt.CONNECT_FAILED].includes(li.Socket.status()))throw new Error("Please call connect() first.");e()}catch(i){It.onFailed(t,i)}}};const Rl={__name:"index",setup(t){e.useCssVars((e=>({e1797f3e:c.value,cf1b641e:l.value})));const n=e.ref([]),r=e.ref([]),o=W(),l=e.ref(o.statusBarHeight+20+"rpx"),c=e.ref(o.statusBarHeight+56+"rpx");let d=e.ref(0);const u=e.ref([]);let m=e.ref();a((()=>{uni.$currentUser=uni.getStorageSync("currentUser"),uni.$currentUser.id?(m.value=uni.$currentUser,"disconnected"===Bl.getConnectionStatus()&&(i("log","at pages/index/index.vue:325","Connecting..."),Bl.connect({id:m.value.id,data:{name:m.value.realName,avatar:m.value.avatar},onSuccess:()=>{i("log","at pages/index/index.vue:334","GoEasy connect successfully.")},onFailed:e=>{i("log","at pages/index/index.vue:337","Failed to connect GoEasy, code:"+e.code+",error:"+e.content)},onProgress:e=>{i("log","at pages/index/index.vue:340","GoEasy is connecting",e)}})),h()):uni.navigateTo({url:"./login"})}));const h=async()=>{let e=await((e,t={})=>_.get("/api/banner/list",e,t))();n.value=e.data};const p=e.reactive({listParams:{current:1,size:10,params:{}},consultantList:[],list:[],answerlist:[]});let g=e.ref([]);const y=e.ref([{icon:"/static/index/remark-icon1.png",title:"严选师资",desc:"5.2万认证咨询师"},{icon:"/static/index/remark-icon2.png",title:"专业咨询",desc:"累计时长7亿+分钟"},{icon:"/static/index/remark-icon3.png",title:"免费退改",desc:"承诺限时内可退改"},{icon:"/static/index/remark-icon4.png",title:"隐私保障",desc:"咨询过程全保密"}]),f=()=>{},v=e=>{d.value=e.detail.scrollTop},E=(e,t)=>{let i=1==e?"/pages/consult/detail":"/pages/confide/detail";uni.navigateTo({url:i+"?id="+t})},w=e=>{let t=1==e?"/pages/consult/index":"/pages/confide/index";uni.switchTab({url:t})},N=()=>{uni.navigateTo({url:"/pages/forum/index/index"})},k=()=>{uni.navigateTo({url:"/pages/psychological-test/index/index"})},b=e.ref(["#E7F1F9","#F6E5EB","#F0E6FD","#FDF9D6","#F6E5EB","#DFFDF3","#DFFDF3","#F0E6FD","#E7F1F9"]),C=async()=>{let e=await((e,t={})=>_.get("/api/psychology/exam/listHome",e,t))();i("log","at pages/index/index.vue:487",e),r.value=e.data};return e.onMounted((()=>{(async()=>{let e=await I();o.setUserInfo(e.data)})(),(async()=>{let e=await we(p.listParams);p.consultantList=e.data})(),(async()=>{let e=await it(p.listParams);p.list=e.data.records})(),C(),(async()=>{let e=await st(p.listParams);p.answerlist=e.data.records})();let e=uni.getStorageSync("consultantMenu");if(e){let t=JSON.parse(e).slice(0,9);t.push({name:"全部",icon:"/static/index/menu_all.png"}),g.value=t}else(async()=>{let e=await nt({type:0});i("log","at pages/index/index.vue:457","menu1",e),uni.setStorageSync("consultantMenu",JSON.stringify(e.data));let t=e.data.slice(0,9);t.push({name:"全部",icon:"/static/index/menu_all.png"}),g.value=t})();let t=uni.getStorageSync("listenerMenu");if(t){let e=JSON.parse(t).slice(0,8);e.push({name:"全部",icon:"/static/index/l_menu_all.png"}),u.value=e}else(async()=>{let e=await nt({type:1});i("log","at pages/index/index.vue:473","menu2",e),uni.setStorageSync("listenerMenu",JSON.stringify(e.data));let t=e.data.slice(0,8);t.push({name:"全部",icon:"/static/index/l_menu_all.png"}),u.value=t})()})),(t,i)=>{const a=s(e.resolveDynamicComponent("uni-search-bar"),he),o=s(e.resolveDynamicComponent("uni-icons"),Q);return e.openBlock(),e.createElementBlock("view",{class:"home-box",ref:"homBox"},[e.createElementVNode("scroll-view",{"scroll-y":"",onScroll:v,class:"scroll-content","show-scrollbar":!1},[e.createElementVNode("view",{class:"header"},[e.createElementVNode("view",{class:"grass"},[e.createElementVNode("image",{src:"/static/index/grass.png",class:"img"})]),e.createElementVNode("view",{class:"contaior"},[e.createElementVNode("view",{class:e.normalizeClass(["search-content",e.unref(d)>15?"scrollClass":""])},[e.createElementVNode("view",{class:"search"},[e.createVNode(a,{class:"uni-mt-10",radius:"100",placeholder:"请输入咨询师或问题类型",clearButton:"auto",cancelButton:"none",onConfirm:f})]),e.createElementVNode("view",{class:"contact"},[e.createElementVNode("image",{src:e.unref(d)>15?"/static/index/scroll-notice.png":"/static/index/notice.png"},null,8,["src"])])],2),e.createElementVNode("view",{class:"swiper-content"},[e.createElementVNode("view",{class:"uni-margin-wrap"},[e.createElementVNode("swiper",{class:"swiper",circular:"","indicator-dots":!0,autoplay:!0,interval:5e3,duration:500},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.value,((t,i)=>(e.openBlock(),e.createElementBlock("swiper-item",{key:i,class:"swiper-item"},[e.createElementVNode("view",{class:"swiper-item uni-bg-red"},[e.createElementVNode("image",{src:t.image,mode:"aspectFill",class:"img"},null,8,["src"])])])))),128))])])]),e.createElementVNode("view",{class:"job-content"},[e.createElementVNode("view",{class:"job-item consult-box",onClick:i[0]||(i[0]=e=>w(1))},[e.createElementVNode("view",{class:"title"},"心理咨询师"),e.createElementVNode("view",{class:"certificate"},"持有国家相关资格证书"),e.createElementVNode("view",{class:"reservation"},[e.createTextVNode("去预约"),e.createVNode(o,{type:"right",size:"12",color:"#fff"})]),e.createElementVNode("image",{src:"/static/index/Consultant.png",class:"img"})]),e.createElementVNode("view",{class:"job-item listen-box",onClick:i[1]||(i[1]=e=>w(2))},[e.createElementVNode("view",{class:"title"},"心理倾听师"),e.createElementVNode("view",{class:"certificate"},"免预约，即可咨询"),e.createElementVNode("view",{class:"reservation"},[e.createTextVNode("去咨询"),e.createVNode(o,{type:"right",size:"12",color:"#fff"})]),e.createElementVNode("image",{src:"/static/index/Listening.png",class:"img"})])])])]),e.createElementVNode("view",{class:"psychological-box"},[e.createElementVNode("view",{class:"psychological-header"},[e.createElementVNode("view",{class:"title"},[e.createElementVNode("text",null,"心理咨询师专区"),e.createElementVNode("image",{src:et,class:"subscript"})])]),e.createElementVNode("view",{class:"info-bar"},[e.createElementVNode("text",{class:"bar-txt"},"本专区咨询师都持有国家相关资格证书")]),e.createElementVNode("view",{class:"icon-grid"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(g),((t,i)=>(e.openBlock(),e.createElementBlock("view",{class:"icon-item",key:i},[e.createElementVNode("view",{class:"icon-circle"},[e.createElementVNode("image",{src:""==t.icon?"/static/index/icon1.png":t.icon,class:"img"},null,8,["src"])]),e.createElementVNode("text",{class:"icon-text"},e.toDisplayString(t.name),1)])))),128))]),e.createElementVNode("view",{class:"test-item-box"},[e.createElementVNode("view",{class:"test-item pink",onClick:k},[e.createElementVNode("view",{class:"title"},"心理测试"),e.createElementVNode("view",{class:"txt"},"看看能打几分")]),e.createElementVNode("view",{class:"test-item purple"},[e.createElementVNode("view",{class:"title"},"免费咨询"),e.createElementVNode("view",{class:"txt"},"名额免费抢")]),e.createElementVNode("view",{class:"test-item green"},[e.createElementVNode("view",{class:"title"},"公益活动"),e.createElementVNode("view",{class:"txt"},"一起做公益")])])]),e.createElementVNode("view",{class:"listening-box"},[e.createElementVNode("view",{class:"listening-header"},[e.createElementVNode("view",{class:"title"},[e.createElementVNode("text",null,"倾听师专区"),e.createElementVNode("image",{src:et,class:"subscript"})])]),e.createElementVNode("view",{class:"listening-content-box"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(u.value,((t,i)=>(e.openBlock(),e.createElementBlock("view",{class:"content-box",key:i,style:e.normalizeStyle({backgroundColor:b.value[i]})},[e.createElementVNode("view",null,e.toDisplayString(t.name),1),e.createElementVNode("view",{style:{"text-align":"end","margin-right":"15rpx"}},[e.createElementVNode("image",{src:t.icon,style:{width:"60rpx"},mode:"widthFix"},null,8,["src"])])],4)))),128))])]),e.createElementVNode("view",{class:"hot-psychological-box"},[e.createElementVNode("view",{class:"hot-psychological-header"},[e.createElementVNode("view",{class:"title"},"热门咨询师"),e.createElementVNode("view",{class:"more",onClick:i[2]||(i[2]=e=>w(1))},[e.createTextVNode("更多"),e.createVNode(o,{type:"right",size:"12",color:"rgba(0, 0, 0, 0.5)"})])]),e.createElementVNode("scroll-view",{class:"scroll-view_H","scroll-x":"true","scroll-left":"0","show-scrollbar":!1},[e.createElementVNode("view",{class:"list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(p.consultantList,(t=>(e.openBlock(),e.createBlock(rt,{class:"list-item",info:t,onClick:e=>E(1,t.id)},null,8,["info","onClick"])))),256))])])]),e.createElementVNode("view",{class:"hot-psychological-box"},[e.createElementVNode("view",{class:"hot-psychological-header"},[e.createElementVNode("view",{class:"title"},"热门倾听师"),e.createElementVNode("view",{class:"more",onClick:i[3]||(i[3]=e=>w(2))},[e.createTextVNode("更多"),e.createVNode(o,{type:"right",size:"12",color:"rgba(0, 0, 0, 0.5)"})])]),e.createElementVNode("scroll-view",{class:"scroll-view_H","scroll-x":"true","scroll-left":"0","show-scrollbar":!1},[e.createElementVNode("view",{class:"list"},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(10,(t=>e.createVNode(at,{class:"list-item",onClick:i[4]||(i[4]=e=>E(2))}))),64))])])]),e.createElementVNode("view",{class:"psychology-test-box"},[e.createElementVNode("image",{class:"img",src:"/static/index/psychology-tree.png"}),e.createElementVNode("view",{class:"psychology-content"},[e.createElementVNode("view",{class:"psychology-content-header"},[e.createElementVNode("view",{class:"title"},"心理测试"),e.createElementVNode("view",{class:"more",onClick:k},[e.createElementVNode("text",null,"更多"),e.createVNode(o,{type:"right",size:"12",color:"rgba(0, 0, 0, 0.5)"})])]),e.createElementVNode("view",{class:"psychology-content-img"},[e.createElementVNode("image",{src:"/static/index/psychology-content-img.png",class:"content-img"})]),e.createElementVNode("view",{class:"content-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.value,((t,i)=>(e.openBlock(),e.createElementBlock("view",{class:"content-item",key:i,onClick:e=>{return i=t,void uni.navigateTo({url:`/pages/psychological-test/charge-test/charge-test?id=${i.id}`});var i}},[e.createElementVNode("view",{class:"lock"},[e.createElementVNode("image",{src:"/static/index/lock.png",class:"lock-img"})]),e.createElementVNode("view",{class:"info"},[e.createElementVNode("div",{class:"title"},e.toDisplayString(t.title),1),e.createElementVNode("div",{class:"num"},e.toDisplayString(t.examNum)+" 人已测",1),e.createElementVNode("div",{class:"test-btn"},"开始测试")]),e.createElementVNode("image",{src:"/static/index/psychology-content-icon.png",class:"content-item-img"})],8,["onClick"])))),128))])])]),e.createElementVNode("view",{class:"recommend-article-box"},[e.createElementVNode("view",{class:"recommend-article-header"},[e.createElementVNode("view",{class:"title"},[e.createElementVNode("view",null,"文章推荐"),e.createElementVNode("image",{src:et,class:"subscript"})]),e.createElementVNode("view",{class:"more",onClick:i[5]||(i[5]=e=>(e=>{let t=1==e?"/pages/readArticle/readArticle":"/pages/readArticle/articleDetail";uni.navigateTo({url:t})})(1))},[e.createTextVNode("更多"),e.createVNode(o,{type:"right",size:"12",color:"rgba(0, 0, 0, 0.5)"})])]),e.createElementVNode("view",{class:"article-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(p.list,(t=>(e.openBlock(),e.createBlock(e.unref(ot),{info:t,class:"article-item",onClick:e=>{return i=t,void uni.navigateTo({url:"/pages/readArticle/articleDetail?id="+i.id});var i}},null,8,["info","onClick"])))),256))])]),e.createElementVNode("view",{class:"mm-forum-box"},[e.createElementVNode("view",{class:"mm-forum-header"},[e.createElementVNode("view",{class:"title"},[e.createElementVNode("view",null,"麦苗论坛"),e.createElementVNode("image",{src:et,class:"subscript"})]),e.createElementVNode("view",{class:"more",onClick:N},[e.createTextVNode("更多"),e.createVNode(o,{type:"right",size:"12",color:"rgba(0, 0, 0, 0.5)"})])]),e.createElementVNode("view",{class:"forum-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(p.answerlist,(t=>(e.openBlock(),e.createBlock(e.unref(lt),{info:t,class:"forum-content"},null,8,["info"])))),256))])]),e.createElementVNode("view",{class:"remark-box"},[e.createElementVNode("view",{class:"title"},"专业的心理服务平台"),e.createElementVNode("view",{class:"hotline"},[e.createTextVNode(" 7×24 小时专属顾问热线： "),e.createElementVNode("text",{class:"phone"},"400-6688-999")]),e.createElementVNode("view",{class:"feature-container"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(y.value,((t,i)=>(e.openBlock(),e.createElementBlock("view",{class:"feature-item",key:i},[e.createElementVNode("image",{class:"icon",src:t.icon,mode:"aspectFit"},null,8,["src"]),e.createElementVNode("view",{class:"content"},[e.createElementVNode("text",{class:"feature-title"},e.toDisplayString(t.title),1),e.createElementVNode("text",{class:"feature-desc"},e.toDisplayString(t.desc),1)])])))),128))])])],32)],512)}}},Ml=X(Rl,[["__scopeId","data-v-27a30fd8"]]);const Pl=X({name:"UniBadge",emits:["click"],props:{type:{type:String,default:"error"},inverted:{type:Boolean,default:!1},isDot:{type:Boolean,default:!1},maxNum:{type:Number,default:99},absolute:{type:String,default:""},offset:{type:Array,default:()=>[0,0]},text:{type:[String,Number],default:""},size:{type:String,default:"small"},customStyle:{type:Object,default:()=>({})}},data:()=>({}),computed:{width(){return 8*String(this.text).length+12},classNames(){const{inverted:e,type:t,size:i,absolute:s}=this;return[e?"uni-badge--"+t+"-inverted":"","uni-badge--"+t,"uni-badge--"+i,s?"uni-badge--absolute":""].join(" ")},positionStyle(){if(!this.absolute)return{};let e=this.width/2,t=10;this.isDot&&(e=5,t=5);const i=`${-e+this.offset[0]}px`,s=`${-t+this.offset[1]}px`,n={rightTop:{right:i,top:s},rightBottom:{right:i,bottom:s},leftBottom:{left:i,bottom:s},leftTop:{left:i,top:s}},a=n[this.absolute];return a||n.rightTop},dotStyle(){return this.isDot?{width:"10px",minWidth:"0",height:"10px",padding:"0",borderRadius:"10px"}:{}},displayValue(){const{isDot:e,text:t,maxNum:i}=this;return e?"":Number(t)>i?`${i}+`:t}},methods:{onClick(){this.$emit("click")}}},[["render",function(t,i,s,n,a,r){return e.openBlock(),e.createElementBlock("view",{class:"uni-badge--x"},[e.renderSlot(t.$slots,"default",{},void 0,!0),s.text?(e.openBlock(),e.createElementBlock("text",{key:0,class:e.normalizeClass([r.classNames,"uni-badge"]),style:e.normalizeStyle([r.positionStyle,s.customStyle,r.dotStyle]),onClick:i[0]||(i[0]=e=>r.onClick())},e.toDisplayString(r.displayValue),7)):e.createCommentVNode("",!0)])}],["__scopeId","data-v-077a76df"]]);function Ol(e){e=e||Date.now();let t=new Date(e),i=t.getMonth()<9?"0"+(t.getMonth()+1):t.getMonth()+1;return i+="-",i+=t.getDate()<10?"0"+t.getDate():t.getDate(),i+=" ",i+=t.getHours(),i+=":",i+=t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes(),i}const Ll=new class{constructor(){__publicField(this,"users",[{id:"08c0a6ec-a42b-47b2-bb1e-15e0f5f9a19a",name:"Mattie",password:"123",avatar:"/static/message/Avatar-1.png",email:"Mattie@goeasy.io",phone:"138xxxxxxxx"},{id:"3bb179af-bcc5-4fe0-9dac-c05688484649",name:"Wallace",password:"123",avatar:"/static/message/Avatar-2.png",email:"Wallace@goeasy.io",phone:"138xxxxxxxx"},{id:"fdee46b0-4b01-4590-bdba-6586d7617f95",name:"Tracy",password:"123",avatar:"/static/message/Avatar-3.png",email:"Tracy@goeasy.io",phone:"138xxxxxxxx"},{id:"33c3693b-dbb0-4bc9-99c6-fa77b9eb763f",name:"Juanita",password:"123",avatar:"/static/message/Avatar-4.png",email:"Juanita@goeasy.io",phone:"138xxxxxxxx"}]),__publicField(this,"groups",[{id:"group-a42b-47b2-bb1e-15e0f5f9a19a",name:"小程序交流群",avatar:"/static/message/wx.png",userList:["08c0a6ec-a42b-47b2-bb1e-15e0f5f9a19a","3bb179af-bcc5-4fe0-9dac-c05688484649","fdee46b0-4b01-4590-bdba-6586d7617f95","33c3693b-dbb0-4bc9-99c6-fa77b9eb763f"]},{id:"group-4b01-4590-bdba-6586d7617f95",name:"UniApp交流群",avatar:"/static/message/uniapp.png",userList:["08c0a6ec-a42b-47b2-bb1e-15e0f5f9a19a","fdee46b0-4b01-4590-bdba-6586d7617f95","33c3693b-dbb0-4bc9-99c6-fa77b9eb763f"]},{id:"group-dbb0-4bc9-99c6-fa77b9eb763f",name:"GoEasy交流群",avatar:"/static/message/goeasy.jpeg",userList:["08c0a6ec-a42b-47b2-bb1e-15e0f5f9a19a","3bb179af-bcc5-4fe0-9dac-c05688484649"]}]),__publicField(this,"orders",[{id:"252364104325",url:"/static/message/goods1-1.jpg",name:"青桔柠檬气泡美式",price:"￥23",count:1},{id:"251662058022",url:"/static/message/goods1-2.jpg",name:"咸柠七",price:"￥8",count:2},{id:"250676186141",url:"/static/message/goods1-3.jpg",name:"黑糖波波鲜奶茶",price:"￥12",count:1}])}findUsers(){return this.users}findFriends(e){return this.users.filter((t=>t.id!==e.id))}findGroups(e){return this.groups.filter((t=>t.userList.find((t=>t===e.id))))}findUser(e,t){return this.users.find((i=>i.name===e&&i.password===t))}getOrderList(){return this.orders}findGroupById(e){return this.groups.find((t=>t.id===e))}findUserById(e){return this.users.find((t=>t.id===e))}findGroupMembers(e){let t=[],i=this.groups.find((t=>t.id===e));return i&&(t=this.users.filter((e=>i.userList.includes(e.id)))),t}},Fl=X({__name:"index",setup(t){e.useCssVars((e=>({"718d9772":o.value})));const n=W(),o=e.ref(n.statusBarHeight+"px"),l=e.ref(0),c=e.ref(101),d=e.ref(0),u=e=>{e!=d.value&&(d.value=e)},m=e.ref([{id:1,label:"全部"},{id:2,label:"服务中"},{id:3,label:"服务过"}]),h=e.ref(1),p=uni.$GoEasy,g=e.ref([]),y=e.ref({id:"33c3693b-dbb0-4bc9-99c6-fa77b9eb763f",name:"Juanita",password:"123",avatar:"/static/message/Avatar-2.png",email:"Wallace@goeasy.io",phone:"138xxxxxxxx"});a((()=>{"disconnected"===p.getConnectionStatus()&&f(),v(),E()})),r((()=>{"disconnected"!==p.getConnectionStatus()&&p.im.off(p.IM_EVENT.CONVERSATIONS_UPDATED,w)}));const f=()=>{uni.showLoading(),p.connect({id:y.value.id,data:{name:y.value.name,avatar:y.value.avatar},onSuccess:()=>{i("log","at pages/message/index.vue:206","GoEasy connect successfully."),v()},onFailed:e=>{uni.showToast({title:`Failed to connect GoEasy, code:${e.code} ,error:${e.content}`})},onProgress:e=>{i("log","at pages/message/index.vue:216","GoEasy is connecting",e)}})},v=()=>{p.im.latestConversations({onSuccess:e=>{uni.hideLoading();let t=e.content;w(t)},onFailed:e=>{uni.hideLoading(),i("log","at pages/message/index.vue:232","获取最新会话列表失败, error:",e)}})},E=()=>{p.im.on(p.IM_EVENT.CONVERSATIONS_UPDATED,w),p.im.off(p.IM_EVENT.CONVERSATIONS_UPDATED,N),p.im.on(p.IM_EVENT.CONVERSATIONS_UPDATED,N)},w=e=>{i("log","at pages/message/index.vue:245",e),g.value=e.conversations},N=e=>{i("log","at pages/message/index.vue:251",e),l.value=e.unreadTotal},k=e.ref(null),b=e.ref(null),C=()=>{var e;null==(e=k.value)||e.close();let t=b.value.top?"取消置顶":"置顶";p.im.topConversation({conversation:b.value,top:!b.value.top,onSuccess:function(){uni.showToast({title:t+"成功",icon:"none"})},onFailed:function(e){i("log","at pages/message/index.vue:276",t,"失败：",e)}})},S=()=>{var e;null==(e=k.value)||e.close(),uni.showModal({content:"确认删除这条会话吗？",success:e=>{e.confirm&&p.im.removeConversation({conversation:b.value,onSuccess:()=>{uni.showToast({title:"删除成功"})},onFailed:e=>{uni.showToast({title:"删除失败"})}})}})},x=e.ref(null),V=()=>{var e;null==(e=x.value)||e.open()},T=()=>{var e;null==(e=x.value)||e.close()},A=e=>{T();for(let t=0;t<g.value.length;t++){let e=g.value[t].userId;p.im.markMessageAsRead({id:e,type:p.IM_SCENE.PRIVATE,onSuccess:function(){t+1==g.value.length&&uni.showToast({title:"操作成功"})},onFailed:function(e){}})}};return(t,i)=>{const n=s(e.resolveDynamicComponent("uni-badge"),Pl),a=s(e.resolveDynamicComponent("uni-nav-bar"),Se),r=s(e.resolveDynamicComponent("uni-icons"),Q),o=s(e.resolveDynamicComponent("uni-popup"),Qe);return e.openBlock(),e.createElementBlock("view",{class:"message-box"},[e.createVNode(a,{backgroundColor:"#f4f6f8",border:!1,class:"header-bar",statusBar:!0,fixed:"",leftWidth:"260rpx",rightWidth:"200rpx",height:"128rpx"},{left:e.withCtx((()=>[e.createElementVNode("view",{class:"left"},[e.createElementVNode("view",{class:e.normalizeClass(["tab-item",0==d.value?"active":""]),onClick:i[0]||(i[0]=e=>u(0))},[l.value&&l.value>0?(e.openBlock(),e.createBlock(n,{key:0,class:"uni-badge-left-margin",text:l.value,absolute:"rightTop","max-num":99},{default:e.withCtx((()=>[e.createElementVNode("text",{class:"txt"},"私聊")])),_:1},8,["text"])):(e.openBlock(),e.createElementBlock("text",{key:1,class:"txt"},"私聊"))],2),e.createElementVNode("view",{class:e.normalizeClass(["tab-item",1==d.value?"active":""]),onClick:i[1]||(i[1]=e=>u(1))},[c.value&&c.value>0?(e.openBlock(),e.createBlock(n,{key:0,class:"uni-badge-left-margin",text:c.value,absolute:"rightTop","max-num":99},{default:e.withCtx((()=>[e.createElementVNode("text",{class:"txt"},"通知")])),_:1},8,["text"])):(e.openBlock(),e.createElementBlock("text",{key:1,class:"txt"},"通知"))],2)])])),right:e.withCtx((()=>[e.createElementVNode("view",{class:"right"},[e.createElementVNode("view",{class:"img-txt"},[e.createElementVNode("image",{src:"/static/consult/contect.png",class:"img"}),e.createElementVNode("text",{class:"txt"},"客服")]),e.createElementVNode("view",{class:"img-txt",onClick:V},[e.createElementVNode("image",{src:"/static/message/use-read.svg",class:"img"}),e.createElementVNode("text",{class:"txt"},"已读")])])])),_:1}),0==d.value?(e.openBlock(),e.createElementBlock("view",{key:0,class:"message-content"},[e.createElementVNode("view",{class:"content-tab-box"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(m.value,((t,i)=>(e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["tab-item",h.value==t.id?"active":""]),key:i,onClick:e=>{var i;(i=t.id)!=h.value&&(h.value=i)}},e.toDisplayString(t.label),11,["onClick"])))),128))]),e.createElementVNode("view",{class:"scroll-content-box"},[e.createElementVNode("scroll-view",{"scroll-y":"",class:"scroll-content","show-scrollbar":!1},[g.value.length>0?(e.openBlock(),e.createElementBlock("view",{key:0},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(g.value,((t,i)=>{var s;return e.openBlock(),e.createElementBlock("view",{class:"content-item",key:i,onClick:e=>(e=>{uni.navigateTo({url:`/pages/message/private-chat?to=${e.userId}`})})(t)},[e.createElementVNode("view",{class:"content-item-left"},[t.unread&&t.unread>0?(e.openBlock(),e.createBlock(n,{key:0,class:"uni-badge-left-margin",text:t.unread,absolute:"rightTop","max-num":99},{default:e.withCtx((()=>[e.createElementVNode("image",{src:ve,class:"img"})])),_:2},1032,["text"])):(e.openBlock(),e.createElementBlock("image",{key:1,src:ve,class:"img"}))]),e.createElementVNode("view",{class:"content-item-right"},[e.createElementVNode("view",{class:"content-user-date"},[e.createElementVNode("view",{class:"name"},e.toDisplayString(null==(s=t.data)?void 0:s.name),1),e.createElementVNode("view",{class:"date"},e.toDisplayString(e.unref(Ol)(t.lastMessage.timestamp)),1)]),e.createElementVNode("view",{class:"item-info-bottom-item"},[t.lastMessage.recalled?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("view",{key:0,class:"item-info-top_content"},[e.createElementVNode("text",{class:"unread-text"},e.toDisplayString(!1===t.lastMessage.read&&t.lastMessage.senderId===y.value.id?"[未读]":""),1),"text"===t.lastMessage.type?(e.openBlock(),e.createElementBlock("text",{key:0},e.toDisplayString(t.lastMessage.payload.text),1)):"video"===t.lastMessage.type?(e.openBlock(),e.createElementBlock("text",{key:1},"[视频消息]")):"audio"===t.lastMessage.type?(e.openBlock(),e.createElementBlock("text",{key:2},"[语音消息]")):"image"===t.lastMessage.type?(e.openBlock(),e.createElementBlock("text",{key:3},"[图片消息]")):"file"===t.lastMessage.type?(e.openBlock(),e.createElementBlock("text",{key:4},"[文件消息]")):"order"===t.lastMessage.type?(e.openBlock(),e.createElementBlock("text",{key:5},"[自定义消息:订单]")):(e.openBlock(),e.createElementBlock("text",{key:6},"[[未识别内容]]"))])),e.createElementVNode("view",{class:"item-info-bottom_action",onClick:e.withModifiers((e=>(e=>{var t;b.value=e,null==(t=k.value)||t.open()})(t)),["stop"])},[e.createVNode(r,{type:"more-filled",size:"24",color:"rgba(0,0,0,.35)"})],8,["onClick"])])])],8,["onClick"])})),128))])):(e.openBlock(),e.createElementBlock("view",{key:1,class:"no-conversation"},"当前没有会话"))])])])):(e.openBlock(),e.createElementBlock("view",{key:1,class:"message-content notice-content"},[e.createElementVNode("view",{class:"scroll-content-box"},[e.createElementVNode("scroll-view",{"scroll-y":"",class:"scroll-content","show-scrollbar":!1},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(1,(t=>e.createElementVNode("view",{class:"content-item",key:t},[e.createElementVNode("view",{class:"content-item-left"},[e.createElementVNode("image",{src:ve,class:"img"})]),e.createElementVNode("view",{class:"content-item-right"},[e.createElementVNode("view",{class:"content-user-date"},[e.createElementVNode("view",{class:"name"},"消息推送"),e.createElementVNode("view",{class:"date"},"昨天")]),e.createElementVNode("view",{class:"item-info-bottom-item"},[e.createElementVNode("view",{class:"item-info-top_content"},"咨询、测评、课程马上领")])])]))),64))])])])),e.createVNode(o,{ref_key:"conversationPopup",ref:k,type:"center","border-radius":"8rpx",class:"conversation-popup"},{default:e.withCtx((()=>[e.createElementVNode("view",{class:"item-box"},[e.createElementVNode("view",{class:"item",onClick:C},e.toDisplayString(b.value.top?"取消置顶":"置顶聊天"),1),e.createElementVNode("view",{class:"item",onClick:S},"删除聊天")])])),_:1},512),e.createVNode(o,{ref_key:"alreadReadPopup",ref:x,type:"center","border-radius":"24rpx",class:"alread-read-popup"},{default:e.withCtx((()=>[e.createElementVNode("view",{class:"item-box"},[e.createElementVNode("view",{class:"title"},"全部已读"),e.createElementVNode("view",{class:"content"},"确认将所有信息标记为已读？"),e.createElementVNode("view",{class:"btn"},[e.createElementVNode("view",{class:"cancel",onClick:T},"取消"),e.createElementVNode("view",{class:"confirm",onClick:A},"已读")])])])),_:1},512)])}}},[["__scopeId","data-v-6e2c4246"]]),Ul=(e,t={})=>_.post("/api/user/changeConsultant",e,t),zl={__name:"index",setup(t){const n=e.ref([{url:"/static/my/grid-1.png",txt:"咨询订单"},{url:"/static/my/grid-2.png",txt:"倾诉订单"},{url:"/static/my/grid-3.png",txt:"我的套餐"},{url:"/static/my/grid-4.png",txt:"优惠券"},{url:"/static/my/grid-5.png",txt:"评测记录"},{url:"/static/my/grid-6.png",txt:"兑换中心"},{url:"/static/my/grid-7.png",txt:"足迹"},{url:"/static/my/grid-8.png",txt:"邀请有礼"}]),a=e.ref(["用户","咨询师"]),r=e.ref("用户"),o=e=>{i("log","at pages/my/index.vue:189",e),r.value=a.value[e.detail.value],"用户"==r.value?(async()=>{let e=await Ul({consultantType:0});i("log","at pages/my/index.vue:169","======================="),i("log","at pages/my/index.vue:170",e),m.value=e.data})():(async()=>{let e=await Ul({consultantType:1});i("log","at pages/my/index.vue:180","======================="),i("log","at pages/my/index.vue:181",e),m.value=e.data})()},l=()=>{uni.navigateTo({url:"/pages/forum/my/userInfo"})},c=()=>{uni.navigateTo({url:"/pages/forum/my/my"})},d=()=>{uni.navigateTo({url:"/pages/settled/settled"})},u=()=>{uni.navigateTo({url:"/pages/login/login"})},m=e.ref({});return e.onMounted((()=>{(async()=>{let e=await I();m.value=e.data,i("log","at pages/my/index.vue:239","======================="),i("log","at pages/my/index.vue:240",e.data)})()})),(t,i)=>{const h=s(e.resolveDynamicComponent("uni-icons"),Q);return e.openBlock(),e.createElementBlock("view",{class:"my-box"},[e.createElementVNode("view",{class:"my-top-content"},[e.createElementVNode("image",{src:"/static/my/my-top-bg.png"})]),e.createElementVNode("view",{class:"container"},[e.createElementVNode("view",{class:"user-info"},[e.createElementVNode("view",null,[e.createElementVNode("image",{src:null==m.value.avatar?"/static/my/profile.png":m.value.avatar,mode:"aspectFill",class:"profile"},null,8,["src"])]),e.createElementVNode("view",{class:"user-info-content"},[e.createElementVNode("view",null,[e.createElementVNode("view",{class:"nick-name",onClick:l},[e.createTextVNode(e.toDisplayString(m.value.realName),1),e.createVNode(h,{type:"right",size:"16"})])]),e.createElementVNode("view",{style:{display:"flex","flex-direction":"row","align-items":"center","justify-content":"space-between"}},[e.createElementVNode("view",{class:"id-num",style:{flex:"1"}},[e.createElementVNode("text",null,"ID："+e.toDisplayString(m.value.id),1),e.createElementVNode("image",{src:"/static/my/copy.png",class:"copy"})]),e.createElementVNode("picker",{range:a.value,onChange:o,style:{"margin-right":"50rpx"}},[e.createElementVNode("view",{class:"change-user-box"},[e.createElementVNode("view",{class:"change-user"},[e.createTextVNode(e.toDisplayString(r.value)+" ",1),e.createElementVNode("image",{src:"/static/my/bottom-arrow.png",class:"bottom-arrow"})])])],40,["range"])])])]),e.createElementVNode("view",{class:"my-record-number"},[e.createElementVNode("view",{class:"item"},[e.createElementVNode("view",{class:"num"},"401"),e.createElementVNode("view",{class:"txt"},"我的咨询")]),e.createElementVNode("view",{class:"item",onClick:c},[e.createElementVNode("view",{class:"num"},"20"),e.createElementVNode("view",{class:"txt"},"我的发布")]),e.createElementVNode("view",{class:"item"},[e.createElementVNode("view",{class:"num"},"30"),e.createElementVNode("view",{class:"txt"},"我的关注")]),e.createElementVNode("view",{class:"item"},[e.createElementVNode("view",{class:"num"},"33"),e.createElementVNode("view",{class:"txt"},"我的收藏")])]),e.createElementVNode("view",{class:"consult-box"},[e.createElementVNode("image",{class:"",src:"/static/my/consult_bg.png"}),e.createElementVNode("view",{class:"consult-content"},[e.createElementVNode("view",{class:"content"},[e.createElementVNode("image",{src:"/static/my/red-package.png",class:"red-package"}),e.createElementVNode("view",{class:"package-info"},[e.createElementVNode("view",{class:"txt1"},"咨询体验"),e.createElementVNode("view",{class:"txt2"},"首次咨询最高节省500元")])]),e.createElementVNode("view",{class:"goto"},"去体验")])]),e.createElementVNode("view",{class:"my-server"},[e.createElementVNode("view",{class:"title"},"我的服务"),e.createElementVNode("view",{class:"grid-box"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.value,((t,i)=>(e.openBlock(),e.createElementBlock("view",{key:i,class:"grid-item",onClick:e=>(e=>{0==e&&uni.navigateTo({url:"/pages/payment/payment-records"})})(i)},[e.createElementVNode("image",{src:t.url,class:"image"},null,8,["src"]),e.createElementVNode("view",{class:"txt"},e.toDisplayString(t.txt),1)],8,["onClick"])))),128))])]),0===m.value.consultantType?(e.openBlock(),e.createElementBlock("view",{key:0,class:"other-server"},[e.createElementVNode("view",{class:"title"},"其他服务"),e.createElementVNode("view",{class:"other-list"},[e.createElementVNode("view",{class:"other-item",onClick:d},[e.createElementVNode("view",{class:"item-left"},[e.createElementVNode("image",{src:"/static/my/join.png"}),e.createTextVNode(),e.createElementVNode("text",null,"入驻平台")]),e.createElementVNode("view",{class:"item-right"},[e.createElementVNode("text",null,"麦苗倾诉·心理从业者招章"),e.createVNode(h,{type:"right",size:"14",color:"#868686"})])]),e.createElementVNode("view",{class:"other-item"},[e.createElementVNode("view",{class:"item-left"},[e.createElementVNode("image",{src:"/static/my/help.png"}),e.createTextVNode(),e.createElementVNode("text",null,"帮助中心")])]),e.createElementVNode("view",{class:"other-item"},[e.createElementVNode("view",{class:"item-left"},[e.createElementVNode("image",{src:"/static/my/advice.png"}),e.createTextVNode(),e.createElementVNode("text",null,"意见反馈")])]),e.createElementVNode("view",{class:"other-item"},[e.createElementVNode("view",{class:"item-left"},[e.createElementVNode("image",{src:pe}),e.createTextVNode(),e.createElementVNode("text",null,"联系客服")])]),e.createElementVNode("view",{class:"other-item"},[e.createElementVNode("view",{class:"item-left"},[e.createElementVNode("image",{src:"/static/my/setting.png"}),e.createTextVNode(),e.createElementVNode("text",null,"设置")])])])])):e.createCommentVNode("",!0),e.createElementVNode("view",{style:{"margin-left":"30rpx","margin-right":"30rpx","margin-top":"30rpx"}},[e.createElementVNode("button",{type:"primary",onClick:u}," 退出登录 ")])])])}}},Gl=X(zl,[["__scopeId","data-v-e4e9d499"]]),Hl=X({__name:"readArticle",setup(t){e.useCssVars((e=>({a8f70a44:n.value})));const i=W(),n=e.ref(i.statusBarHeight+"px"),a=e.ref(0),r=e.reactive({listParams:{current:1,size:10,params:{}},list:[]}),o=e.ref([{txt:"推荐",id:1},{txt:"情感",id:2},{txt:"文化",id:3},{txt:"职场",id:4},{txt:"职场",id:5},{txt:"职场",id:6},{txt:"职场",id:7},{txt:"职场",id:7}]),l=()=>{uni.navigateBack({delta:1})};return e.onMounted((()=>{(async()=>{let e=await it(r.listParams);r.list=e.data.records})()})),(t,i)=>{const n=s(e.resolveDynamicComponent("uni-icons"),Q),c=s(e.resolveDynamicComponent("uni-nav-bar"),Se);return e.openBlock(),e.createElementBlock("view",{class:"read-article-box"},[e.createElementVNode("view",{class:"header"},[e.createVNode(c,{backgroundColor:"rgba(255,255,255,0)",border:!1,title:"文章阅读",class:"header-bar"},{left:e.withCtx((()=>[e.createVNode(n,{type:"left",size:"24",onClick:l})])),right:e.withCtx((()=>[e.createElementVNode("view",{class:"right"},[e.createElementVNode("image",{src:ge,style:{width:"40rpx",height:"40rpx"}})])])),_:1})]),e.createElementVNode("view",{class:"article-content"},[e.createElementVNode("view",{class:"swiper-content"},[e.createElementVNode("view",{class:"uni-margin-wrap"},[e.createElementVNode("swiper",{class:"swiper",circular:"","indicator-dots":!0,autoplay:!0,interval:5e3,duration:500},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(2,(t=>e.createElementVNode("swiper-item",{key:t,class:"swiper-item"},[e.createElementVNode("view",{class:"swiper-item uni-bg-red"},[e.createElementVNode("image",{src:"https://odd.dzjob.net/profile/upload/20250519/20250520113143.png",class:"img"})])]))),64))])])])]),e.createElementVNode("view",{class:"article-tabs"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.value,((t,i)=>(e.openBlock(),e.createElementBlock("view",{class:"tab-item",key:i,onClick:e=>(e=>{a.value=e})(i)},[e.createTextVNode(e.toDisplayString(t.txt)+" ",1),i==a.value?(e.openBlock(),e.createElementBlock("image",{key:0,src:et,class:"active-img"})):e.createCommentVNode("",!0)],8,["onClick"])))),128))]),e.createElementVNode("scroll-view",{"scroll-y":"true",class:"scroll-content"},[e.createElementVNode("view",{class:"article-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.list,(t=>(e.openBlock(),e.createBlock(e.unref(ot),{info:t,class:"article-item",onClick:e=>{return i=t,void uni.navigateTo({url:"/pages/readArticle/articleDetail?id="+i.id});var i}},null,8,["info","onClick"])))),256))])])])}}},[["__scopeId","data-v-ceb9dbfc"]]);function jl(e){let t="";for(let i in e){t+=`${i}:${e[i]};`}return t}const $l=X({name:"uni-easyinput",emits:["click","iconClick","update:modelValue","input","focus","blur","confirm","clear","eyes","change","keyboardheightchange"],model:{prop:"modelValue",event:"update:modelValue"},options:{virtualHost:!0},inject:{form:{from:"uniForm",default:null},formItem:{from:"uniFormItem",default:null}},props:{name:String,value:[Number,String],modelValue:[Number,String],type:{type:String,default:"text"},clearable:{type:Boolean,default:!0},autoHeight:{type:Boolean,default:!1},placeholder:{type:String,default:" "},placeholderStyle:String,focus:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},maxlength:{type:[Number,String],default:140},confirmType:{type:String,default:"done"},clearSize:{type:[Number,String],default:24},inputBorder:{type:Boolean,default:!0},prefixIcon:{type:String,default:""},suffixIcon:{type:String,default:""},trim:{type:[Boolean,String],default:!1},cursorSpacing:{type:Number,default:0},passwordIcon:{type:Boolean,default:!0},adjustPosition:{type:Boolean,default:!0},primaryColor:{type:String,default:"#2979ff"},styles:{type:Object,default:()=>({color:"#333",backgroundColor:"#fff",disableColor:"#F7F6F6",borderColor:"#e5e5e5"})},errorMessage:{type:[String,Boolean],default:""}},data:()=>({focused:!1,val:"",showMsg:"",border:!1,isFirstBorder:!1,showClearIcon:!1,showPassword:!1,focusShow:!1,localMsg:"",isEnter:!1}),computed:{isVal(){const e=this.val;return!(!e&&0!==e)},msg(){return this.localMsg||this.errorMessage},inputMaxlength(){return Number(this.maxlength)},boxStyle(){return`color:${this.inputBorder&&this.msg?"#e43d33":this.styles.color};`},inputContentClass(){return function(e){let t="";for(let i in e)e[i]&&(t+=`${i} `);return t}({"is-input-border":this.inputBorder,"is-input-error-border":this.inputBorder&&this.msg,"is-textarea":"textarea"===this.type,"is-disabled":this.disabled,"is-focused":this.focusShow})},inputContentStyle(){const e=this.focusShow?this.primaryColor:this.styles.borderColor;return jl({"border-color":(this.inputBorder&&this.msg?"#dd524d":e)||"#e5e5e5","background-color":this.disabled?this.styles.disableColor:this.styles.backgroundColor})},inputStyle(){return jl({"padding-right":"password"===this.type||this.clearable||this.prefixIcon?"":"10px","padding-left":this.prefixIcon?"":"10px"})}},watch:{value(e){this.val=null!==e?e:""},modelValue(e){this.val=null!==e?e:""},focus(e){this.$nextTick((()=>{this.focused=this.focus,this.focusShow=this.focus}))}},created(){this.init(),this.form&&this.formItem&&this.$watch("formItem.errMsg",(e=>{this.localMsg=e}))},mounted(){this.$nextTick((()=>{this.focused=this.focus,this.focusShow=this.focus}))},methods:{init(){this.value||0===this.value?this.val=this.value:this.modelValue||0===this.modelValue||""===this.modelValue?this.val=this.modelValue:this.val=""},onClickIcon(e){this.$emit("iconClick",e)},onEyes(){this.showPassword=!this.showPassword,this.$emit("eyes",this.showPassword)},onInput(e){let t=e.detail.value;this.trim&&("boolean"==typeof this.trim&&this.trim&&(t=this.trimStr(t)),"string"==typeof this.trim&&(t=this.trimStr(t,this.trim))),this.errMsg&&(this.errMsg=""),this.val=t,this.$emit("input",t),this.$emit("update:modelValue",t)},onFocus(){this.$nextTick((()=>{this.focused=!0})),this.$emit("focus",null)},_Focus(e){this.focusShow=!0,this.$emit("focus",e)},onBlur(){this.focused=!1,this.$emit("blur",null)},_Blur(e){if(e.detail.value,this.focusShow=!1,this.$emit("blur",e),!1===this.isEnter&&this.$emit("change",this.val),this.form&&this.formItem){const{validateTrigger:e}=this.form;"blur"===e&&this.formItem.onFieldChange()}},onConfirm(e){this.$emit("confirm",this.val),this.isEnter=!0,this.$emit("change",this.val),this.$nextTick((()=>{this.isEnter=!1}))},onClear(e){this.val="",this.$emit("input",""),this.$emit("update:modelValue",""),this.$emit("clear")},onkeyboardheightchange(e){this.$emit("keyboardheightchange",e)},trimStr:(e,t="both")=>"both"===t?e.trim():"left"===t?e.trimLeft():"right"===t?e.trimRight():"start"===t?e.trimStart():"end"===t?e.trimEnd():"all"===t?e.replace(/\s+/g,""):e}},[["render",function(t,i,n,a,r,o){const l=s(e.resolveDynamicComponent("uni-icons"),Q);return e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["uni-easyinput",{"uni-easyinput-error":o.msg}]),style:e.normalizeStyle(o.boxStyle)},[e.createElementVNode("view",{class:e.normalizeClass(["uni-easyinput__content",o.inputContentClass]),style:e.normalizeStyle(o.inputContentStyle)},[n.prefixIcon?(e.openBlock(),e.createBlock(l,{key:0,class:"content-clear-icon",type:n.prefixIcon,color:"#c0c4cc",onClick:i[0]||(i[0]=e=>o.onClickIcon("prefix")),size:"22"},null,8,["type"])):e.createCommentVNode("",!0),e.renderSlot(t.$slots,"left",{},void 0,!0),"textarea"===n.type?(e.openBlock(),e.createElementBlock("textarea",{key:1,class:e.normalizeClass(["uni-easyinput__content-textarea",{"input-padding":n.inputBorder}]),name:n.name,value:r.val,placeholder:n.placeholder,placeholderStyle:n.placeholderStyle,disabled:n.disabled,"placeholder-class":"uni-easyinput__placeholder-class",maxlength:o.inputMaxlength,focus:r.focused,autoHeight:n.autoHeight,"cursor-spacing":n.cursorSpacing,"adjust-position":n.adjustPosition,onInput:i[1]||(i[1]=(...e)=>o.onInput&&o.onInput(...e)),onBlur:i[2]||(i[2]=(...e)=>o._Blur&&o._Blur(...e)),onFocus:i[3]||(i[3]=(...e)=>o._Focus&&o._Focus(...e)),onConfirm:i[4]||(i[4]=(...e)=>o.onConfirm&&o.onConfirm(...e)),onKeyboardheightchange:i[5]||(i[5]=(...e)=>o.onkeyboardheightchange&&o.onkeyboardheightchange(...e))},null,42,["name","value","placeholder","placeholderStyle","disabled","maxlength","focus","autoHeight","cursor-spacing","adjust-position"])):(e.openBlock(),e.createElementBlock("input",{key:2,type:"password"===n.type?"text":n.type,class:"uni-easyinput__content-input",style:e.normalizeStyle(o.inputStyle),name:n.name,value:r.val,password:!r.showPassword&&"password"===n.type,placeholder:n.placeholder,placeholderStyle:n.placeholderStyle,"placeholder-class":"uni-easyinput__placeholder-class",disabled:n.disabled,maxlength:o.inputMaxlength,focus:r.focused,confirmType:n.confirmType,"cursor-spacing":n.cursorSpacing,"adjust-position":n.adjustPosition,onFocus:i[6]||(i[6]=(...e)=>o._Focus&&o._Focus(...e)),onBlur:i[7]||(i[7]=(...e)=>o._Blur&&o._Blur(...e)),onInput:i[8]||(i[8]=(...e)=>o.onInput&&o.onInput(...e)),onConfirm:i[9]||(i[9]=(...e)=>o.onConfirm&&o.onConfirm(...e)),onKeyboardheightchange:i[10]||(i[10]=(...e)=>o.onkeyboardheightchange&&o.onkeyboardheightchange(...e))},null,44,["type","name","value","password","placeholder","placeholderStyle","disabled","maxlength","focus","confirmType","cursor-spacing","adjust-position"])),"password"===n.type&&n.passwordIcon?(e.openBlock(),e.createElementBlock(e.Fragment,{key:3},[o.isVal?(e.openBlock(),e.createBlock(l,{key:0,class:e.normalizeClass(["content-clear-icon",{"is-textarea-icon":"textarea"===n.type}]),type:r.showPassword?"eye-slash-filled":"eye-filled",size:22,color:r.focusShow?n.primaryColor:"#c0c4cc",onClick:o.onEyes},null,8,["class","type","color","onClick"])):e.createCommentVNode("",!0)],64)):e.createCommentVNode("",!0),n.suffixIcon?(e.openBlock(),e.createElementBlock(e.Fragment,{key:4},[n.suffixIcon?(e.openBlock(),e.createBlock(l,{key:0,class:"content-clear-icon",type:n.suffixIcon,color:"#c0c4cc",onClick:i[11]||(i[11]=e=>o.onClickIcon("suffix")),size:"22"},null,8,["type"])):e.createCommentVNode("",!0)],64)):(e.openBlock(),e.createElementBlock(e.Fragment,{key:5},[n.clearable&&o.isVal&&!n.disabled&&"textarea"!==n.type?(e.openBlock(),e.createBlock(l,{key:0,class:e.normalizeClass(["content-clear-icon",{"is-textarea-icon":"textarea"===n.type}]),type:"clear",size:n.clearSize,color:o.msg?"#dd524d":r.focusShow?n.primaryColor:"#c0c4cc",onClick:o.onClear},null,8,["class","size","color","onClick"])):e.createCommentVNode("",!0)],64)),e.renderSlot(t.$slots,"right",{},void 0,!0)],6)],6)}],["__scopeId","data-v-a7f5fd7f"]]),ql=X({__name:"articleDetail",setup(t){e.useCssVars((e=>({"10abfca5":a.value})));const n=W(),a=e.ref(n.statusBarHeight+"px");Fe();const r=e.ref([]);e.ref(0);const l=e.ref("");let c=e.ref();const d=e.reactive({listParams:{current:1,size:10,params:{}},list:[]});e.ref([{txt:"推荐",id:1},{txt:"情感",id:2},{txt:"文化",id:3},{txt:"职场",id:4},{txt:"职场",id:5},{txt:"职场",id:6},{txt:"职场",id:7},{txt:"职场",id:7}]);const u=e.ref(),m=e.ref();(async()=>{let e=await _.get("/api/article/article/relativeArticle");r.value=e.data,i("log","at pages/readArticle/articleDetail.vue:172",r.value)})();const h=()=>{uni.navigateBack({delta:1})},p=e=>{1==e?uni.switchTab({url:"/pages/consult/index"}):uni.navigateTo({url:"/pages/consult/detail"})},g=e=>{uni.navigateTo({url:"/pages/readArticle/articleDetail?id="+e.id})},y=async()=>{let e=await((e,t={})=>_.post("/api/article/article/getArticleDetail",e,t))({id:c.value});u.value=e.data},f=async()=>{d.listParams.params.articleId=c.value;let e=await((e,t={})=>_.post("/api/comment/comment/getCommentById",e,t))(d.listParams);m.value=e.data.records},v=async()=>{let e=await((e,t={})=>_.post("/api/comment/comment/saveComment",e,t))({content:l.value,articleId:c.value});l.value="",uni.showToast({title:"发布成功",icon:"none",duration:2e3}),i("log","at pages/readArticle/articleDetail.vue:234",e)};return o((e=>{c.value=e.id,y(),f()})),e.onMounted((()=>{})),(t,i)=>{var n,a;const o=s(e.resolveDynamicComponent("uni-icons"),Q),c=s(e.resolveDynamicComponent("uni-nav-bar"),Se),d=s(e.resolveDynamicComponent("uni-easyinput"),$l);return e.openBlock(),e.createElementBlock("view",{class:"read-article-box"},[e.createElementVNode("view",{class:"header"},[e.createVNode(c,{backgroundColor:"#F4F6F8",border:!1,title:"",class:"header-bar",statusBar:!0,fixed:""},{left:e.withCtx((()=>[e.createVNode(o,{type:"left",size:"24",onClick:h})])),right:e.withCtx((()=>[e.createElementVNode("view",{class:"right"},[e.createVNode(o,{type:"more-filled",size:"24",onClick:h})])])),_:1})]),e.createElementVNode("view",{class:"article-content"},[e.createElementVNode("view",{class:"detail-box"},[e.createElementVNode("view",{class:"title"},e.toDisplayString(null==(n=u.value)?void 0:n.title),1),e.createElementVNode("view",{class:"article-user"},[e.createElementVNode("view",{class:"user"},[e.createElementVNode("view",null,[e.createElementVNode("image",{src:Ie,class:"picture"})]),e.createElementVNode("view",{class:"name-box"},[e.createElementVNode("view",{class:"name"},"咨询师"),e.createElementVNode("view",{class:"auth"},"咨询师 | 认证作家")])]),e.createElementVNode("view",{class:"follow"},[e.createVNode(o,{type:"plusempty",size:"12",color:"#35CA95"}),e.createElementVNode("text",{class:"txt"},"关注")])]),e.createElementVNode("view",{class:"content"},e.toDisplayString(null==(a=u.value)?void 0:a.content),1),e.createElementVNode("view",{class:"date-num"},[e.createElementVNode("view",null,"2025-05-06"),e.createElementVNode("view",{style:{"padding-left":"20rpx"}},"阅读 7876")]),e.createElementVNode("view",{class:"contact"},[e.createTextVNode("文章转载/侵权，请联系邮箱："),e.createElementVNode("text",{class:"txt"},"6757567@163.com")])]),e.createElementVNode("view",{style:{"background-color":"white",margin:"30rpx",padding:"18rpx"}},[e.createElementVNode("view",{style:{"margin-bottom":"30rpx"}},[e.createElementVNode("text",{style:{"font-size":"42rpx","font-weight":"bold"}},"热门评论")]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(m.value,((t,i)=>(e.openBlock(),e.createElementBlock("view",{key:i,style:{"margin-bottom":"20rpx"}},[e.createElementVNode("view",{style:{display:"flex","flex-direction":"row"}},[e.createElementVNode("image",{style:{width:"48rpx",height:"48rpx","border-radius":"24rpx"},src:null==t.avatar?"/static/my/profile.png":t.avatar},null,8,["src"]),e.createElementVNode("view",{style:{"margin-left":"20rpx",display:"flex","flex-direction":"column"}},[e.createElementVNode("text",{style:{"font-size":"26rpx"}},e.toDisplayString(t.nickname),1),e.createElementVNode("text",{style:{"margin-top":"10rpx","font-size":"28rpx",color:"#666666"}},e.toDisplayString(t.content),1)])])])))),128))]),e.createElementVNode("view",{class:"hot-psychological-box"},[e.createElementVNode("view",{class:"hot-psychological-header"},[e.createElementVNode("view",{class:"title"},"热门咨询师"),e.createElementVNode("view",{class:"more",onClick:i[0]||(i[0]=e=>p(1))},[e.createTextVNode("更多"),e.createVNode(o,{type:"right",size:"12",color:"rgba(0, 0, 0, 0.5)"})])]),e.createElementVNode("scroll-view",{class:"scroll-view_H","scroll-x":"true","scroll-left":"0","show-scrollbar":!1},[e.createElementVNode("view",{class:"list"},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(10,(t=>e.createVNode(rt,{class:"list-item",onClick:i[1]||(i[1]=e=>p(2))}))),64))])])]),e.createElementVNode("view",{class:"recommend-article-box"},[e.createElementVNode("view",{class:"recommend-article-header"},[e.createElementVNode("view",{class:"title"},[e.createElementVNode("view",null,"相关阅读")]),e.createElementVNode("view",{class:"more",onClick:i[2]||(i[2]=e=>g(1))},[e.createTextVNode("更多"),e.createVNode(o,{type:"right",size:"12",color:"rgba(0, 0, 0, 0.5)"})])]),e.createElementVNode("view",{class:"article-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.value,(t=>(e.openBlock(),e.createBlock(e.unref(ot),{info:t,class:"article-item",onClick:e=>g(t)},null,8,["info","onClick"])))),256))])])]),e.createElementVNode("view",{class:"reply-box"},[e.createElementVNode("view",{class:"reply-contaior"},[e.createElementVNode("view",{class:"reply-content"},[e.createVNode(d,{onChange:v,"prefix-icon":"chat",clearable:!1,modelValue:l.value,"onUpdate:modelValue":i[3]||(i[3]=e=>l.value=e),placeholder:"写点什么",trim:!0,class:"reply-input"},null,8,["modelValue"])]),e.createElementVNode("view",{class:"reply-icons"},[e.createVNode(o,{type:"star",size:"24",color:"rgba(0, 0, 0, 0.35)"}),e.createVNode(o,{type:"hand-up",size:"24",color:"rgba(0, 0, 0, 0.35)"}),e.createVNode(o,{type:"redo",size:"24",color:"rgba(0, 0, 0, 0.35)"})])])])])}}},[["__scopeId","data-v-a7b20502"]]),Wl=X({__name:"settled",setup(t){e.useCssVars((e=>({"7dfb3334":n.value})));const i=W(),n=e.ref(i.statusBarHeight+"px"),a=()=>{uni.navigateBack({delta:1})},r=()=>{uni.navigateTo({url:"/pages/auth/auth?type=1"})};return(t,i)=>{const n=s(e.resolveDynamicComponent("uni-icons"),Q),o=s(e.resolveDynamicComponent("uni-nav-bar"),Se);return e.openBlock(),e.createElementBlock("view",{class:"settled-box"},[e.createElementVNode("view",{class:"header"},[e.createVNode(o,{backgroundColor:"rgba(255,255,255,0)",border:!1,title:"专家入驻 | 麦苗倾诉",class:"header-bar"},{left:e.withCtx((()=>[e.createVNode(n,{type:"left",size:"24",onClick:a})])),right:e.withCtx((()=>[e.createElementVNode("view",{class:"right"},[e.createElementVNode("image",{src:ge,style:{width:"40rpx",height:"40rpx"}})])])),_:1})]),e.createElementVNode("view",{class:"content"},[e.createElementVNode("view",{class:"settled_1",onClick:r},[e.createElementVNode("view",{class:"title"},"我是咨询师"),e.createElementVNode("view",{class:"use-public"},"2.5万同行 已服务了439万用户和家庭"),e.createElementVNode("view",{class:"add"},"立即加入")]),e.createElementVNode("view",{class:"settled_2"},[e.createElementVNode("view",{class:"title"},"我是倾听师"),e.createElementVNode("view",{class:"use-public"},"2.5万同行 已服务了439万用户和家庭"),e.createElementVNode("view",{class:"add"},"立即加入")])])])}}},[["__scopeId","data-v-e55db153"]]),Jl={__name:"consult-feel",setup(t){e.useCssVars((e=>({"21824ca0":n.value})));const i=W(),n=e.ref(i.statusBarHeight+"px");e.ref("");const a=e.ref(0),r=()=>{uni.navigateBack({delta:1})},o=e=>{a.value=e.detail.scrollTop};return(t,i)=>{const n=s(e.resolveDynamicComponent("uni-icons"),Q),l=s(e.resolveDynamicComponent("uni-nav-bar"),Se),c=s(e.resolveDynamicComponent("uni-rate"),Te);return e.openBlock(),e.createElementBlock("view",{class:"evaluate-box"},[e.createElementVNode("scroll-view",{"scroll-y":"",class:"scroll-content",onScroll:o},[e.createElementVNode("view",{class:"evaluate-content"},[e.createVNode(l,{backgroundColor:a.value>15?"#fff":"transparent",border:!1,title:"张三咨询师",class:"header-bar",statusBar:!0,fixed:""},{left:e.withCtx((()=>[e.createVNode(n,{type:"left",size:"24",onClick:r})])),right:e.withCtx((()=>[e.createElementVNode("view",{class:"right"},[e.createElementVNode("image",{src:ge,style:{width:"40rpx",height:"40rpx"}})])])),_:1},8,["backgroundColor"]),e.createElementVNode("view",{class:"evaluate-info-box"},[e.createElementVNode("view",{class:"evaluate-info"},[e.createElementVNode("view",{class:"user-info"},[e.createElementVNode("view",{class:"picture"},[e.createElementVNode("image",{src:Ie,class:"img"})]),e.createElementVNode("view",{class:"user"},[e.createElementVNode("view",{class:"name"},"张三"),e.createElementVNode("view",{class:"title"},"精神分析流派")])]),e.createElementVNode("view",{class:"right"},[e.createVNode(n,{type:"right",size:"18",color:"#B6B6C1"})])]),e.createElementVNode("view",{class:"evaluate-list-box"},[e.createElementVNode("view",{class:"header-title"},"咨询感受"),e.createElementVNode("view",{class:"score-content"},[e.createElementVNode("view",{class:"score"},[e.createElementVNode("view",{class:"star"},[e.createElementVNode("text",{class:"txt"},"4.9"),e.createVNode(c,{"allow-half":"",value:4,readonly:"",size:"12"})]),e.createElementVNode("view",{class:"txt"},"推荐指数")]),e.createElementVNode("view",{class:"num"},[e.createElementVNode("view",null,[e.createElementVNode("view",{class:"txt"},"2000+"),e.createElementVNode("view",{class:"txt1"},"真实评价")]),e.createElementVNode("view",null,[e.createElementVNode("view",{class:"txt"},"99%"),e.createElementVNode("view",{class:"txt1"},"满意度")])])]),e.createElementVNode("view",{class:e.normalizeClass(["sort-box",a.value>240?"sortBoxActive":""])},[e.createElementVNode("view",{class:"sort-content"},[e.createElementVNode("view",{class:"sort"},[e.createTextVNode("服务类型"),e.createElementVNode("image",{src:"/static/common/arrow.png",class:"img",style:{width:"20rpx",height:"20rpx"}})]),e.createElementVNode("view",{class:"sort"},[e.createTextVNode("默认排序"),e.createElementVNode("image",{src:"/static/common/sort.png",class:"img"})])])],2),e.createElementVNode("view",{class:"tags"},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(10,(t=>e.createElementVNode("text",{class:"tag-item"},"心理健康(100)"))),64))]),(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(10,(t=>e.createElementVNode("view",{class:"content-list",key:t},[e.createElementVNode("view",{class:"content-header"},[e.createElementVNode("view",{class:"user-info"},[e.createElementVNode("view",null,[e.createElementVNode("image",{src:Ie,class:"picture"})]),e.createElementVNode("view",{class:"nickName"},"匿名"),e.createElementVNode("view",{class:"reason"},"压抑心理")]),e.createElementVNode("view",{class:"date"},"2025-05-28")]),e.createElementVNode("view",{class:"content"},[e.createVNode(e.unref(Ue),{line:2,expandText:"展开",foldHint:"收起"},{default:e.withCtx((()=>[e.createTextVNode(" 测试测试测试测试测试测试测试213121312试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试 ")])),_:1})]),e.createElementVNode("view",{class:"evaluate-item"},[e.createElementVNode("text",{class:"item"},"态度很好"),e.createElementVNode("text",{class:"item"},"很专业")]),e.createElementVNode("view",{class:"reply"},[e.createElementVNode("view",{class:"reply-box"},[e.createElementVNode("text",{class:"reply-user"},"张三 回复："),e.createElementVNode("text",{class:"reply-content"},"感谢您对平台和我的信任与认可，只要您需要我会一直在")])])]))),64))])])])],32),e.createElementVNode("view",{class:"contact-teach"},"向张三咨询师咨询")])}}},Yl=X(Jl,[["__scopeId","data-v-5951199c"]]),Xl={__name:"evaluate",setup(t){e.useCssVars((e=>({"2d614499":n.value})));const i=W(),n=e.ref(i.statusBarHeight+"px");e.ref("");const a=e.ref(0),r=()=>{uni.navigateBack({delta:1})},o=e=>{a.value=e.detail.scrollTop};return(t,i)=>{const n=s(e.resolveDynamicComponent("uni-icons"),Q),l=s(e.resolveDynamicComponent("uni-nav-bar"),Se),c=s(e.resolveDynamicComponent("uni-rate"),Te);return e.openBlock(),e.createElementBlock("view",{class:"evaluate-box"},[e.createElementVNode("scroll-view",{"scroll-y":"",class:"scroll-content",onScroll:o,"show-scrollbar":!1},[e.createElementVNode("view",{class:"evaluate-content"},[e.createVNode(l,{backgroundColor:a.value>15?"#fff":"transparent",border:!1,title:"张三咨询师",class:"header-bar",statusBar:!0,fixed:""},{left:e.withCtx((()=>[e.createVNode(n,{type:"left",size:"24",onClick:r})])),right:e.withCtx((()=>[e.createElementVNode("view",{class:"right"},[e.createElementVNode("image",{src:ge,style:{width:"40rpx",height:"40rpx"}})])])),_:1},8,["backgroundColor"]),e.createElementVNode("view",{class:"evaluate-info-box"},[e.createElementVNode("view",{class:"evaluate-list-box"},[e.createElementVNode("view",{class:"info"},[e.createElementVNode("view",{class:"feel-type-box"},[e.createElementVNode("view",{class:"first"},[e.createElementVNode("view",{class:"percent"},[e.createTextVNode("99"),e.createElementVNode("text",{class:"txt"},"%好评率")])]),e.createElementVNode("view",{class:"second"},[e.createElementVNode("view",{class:"second-item"},[e.createElementVNode("text",{class:"txt-1"},"真实评价"),e.createElementVNode("text",{class:"txt-2"},"788条")]),e.createElementVNode("view",{class:"second-item"},[e.createElementVNode("text",{class:"txt-1"},"用户推荐"),e.createElementVNode("text",{class:"txt-2"},"100%")])])]),e.createElementVNode("view",{class:"comment-list"},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(10,(t=>e.createElementVNode("view",{class:"comment-item",key:10},[e.createElementVNode("view",{class:"user-box"},[e.createElementVNode("view",{class:"user-info"},[e.createElementVNode("image",{src:Ie,class:"img"}),e.createElementVNode("text",{class:"txt"},"匿名")]),e.createElementVNode("view",{class:"star"},[e.createVNode(c,{disabled:!0,disabledColor:"#FFC300",value:5,size:"12"})])]),e.createElementVNode("view",{class:"comment-content"}," 评论内容评论内容评论内容评论内容评论内容评论内容评论内容评论内容评论内容评论内容评论内容评论内容评论内容评论内容评论内容评论内容 "),e.createElementVNode("view",{class:"tags"},[e.createElementVNode("text",{class:"tag-item"},"亲切温暖"),e.createElementVNode("text",{class:"tag-item"},"亲切温暖"),e.createElementVNode("text",{class:"tag-item"},"亲切温暖")]),e.createElementVNode("view",{class:"theme-date"},[e.createElementVNode("view",{class:"theme"},[e.createTextVNode(" 咨询主题:"),e.createElementVNode("text",{class:"txt"},"心理压抑")]),e.createElementVNode("view",{class:"date"},"2025-06-04")])]))),64))])])])])])],32)])}}},Ql=X(Xl,[["__scopeId","data-v-8dda3e53"]]),Zl="/static/common/forum-fab.png",Kl="/static/common/zan.png",ec="/static/common/zan-active.png",tc="/static/common/msg.png",ic="/static/common/share.png",sc=X({__name:"report",setup(t,{expose:i}){const n=e.ref(null),a=()=>{n.value.close()},r=[{id:1,label:"政治反动"},{id:2,label:"色情内容"},{id:3,label:"人身攻击"},{id:4,label:"抄袭侵权"},{id:5,label:"未成年人"},{id:6,label:"血腥暴力"},{id:7,label:"广告欺诈"},{id:8,label:"灌水"},{id:9,label:"自杀倾向"},{id:9,label:"其他"}];return i({openReport:()=>{n.value.open()},closeReport:a}),(t,i)=>{const o=s(e.resolveDynamicComponent("uni-icons"),Q),l=s(e.resolveDynamicComponent("uni-popup"),Qe);return e.openBlock(),e.createBlock(l,{ref_key:"report",ref:n,"background-color":"#fff","is-mask-click":!1,borderRadius:"24rpx 24rpx 0rpx 0rpx",type:"bottom"},{default:e.withCtx((()=>[e.createElementVNode("view",{class:"report-popup-box"},[e.createElementVNode("view",{class:"report-header"},[e.createElementVNode("view"),e.createElementVNode("view",{class:"title"},"选择举报理由"),e.createElementVNode("view",null,[e.createVNode(o,{type:"closeempty",size:"14",color:"rgba(0,0,0,0.3)",onClick:a})])]),e.createElementVNode("view",{class:"report-content-list"},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(r,((t,i)=>e.createElementVNode("view",{class:"report-content-item",key:i},e.toDisplayString(t.label),1))),64))])])])),_:1},512)}}},[["__scopeId","data-v-d571222b"]]),nc=X({__name:"share",setup(t,{expose:n}){const a=e.ref(null),r=e.ref(null),o=e.ref([{type:"wechat",img:"/static/share/wechat.svg",backgroundColor:"#00B578",text:"微信",imgWidth:"38rpx",imgHeight:"32rpx",fn:()=>new Function},{type:"friend",img:"/static/share/friend.svg",backgroundColor:"#00B578",text:"朋友圈",imgWidth:"32rpx",imgHeight:"32rpx",fn:()=>new Function},{type:"zone",img:"/static/share/zone.svg",backgroundColor:"#FFC300",text:"QQ空间",imgWidth:"38rpx",imgHeight:"32rpx",fn:()=>new Function},{type:"QQ",img:"/static/share/qq.svg",backgroundColor:"#43ADF9",text:"QQ",imgWidth:"26rpx",imgHeight:"30rpx",fn:()=>new Function},{type:"link",img:"/static/share/link.svg",backgroundColor:"rgba(0, 0, 0, 0.85)",text:"复制链接",imgWidth:"34rpx",imgHeight:"34rpx",fn:()=>new Function},{type:"report",img:"/static/share/report.svg",backgroundColor:"#f3f3f3",text:"举报",imgWidth:"36rpx",imgHeight:"28rpx",fn:()=>c()},{type:"delete",img:"/static/share/delete.svg",backgroundColor:"#f3f3f3",text:"删除",imgWidth:"32rpx",imgHeight:"30rpx",fn:()=>new Function}]),l=()=>{a.value.close()},c=()=>{i("log","at components/share/share.vue:106",1),l(),i("log","at components/share/share.vue:108",r.value),r.value.openReport()};return n({openShare:()=>{a.value.open()},closeShare:l}),(t,i)=>{const n=s(e.resolveDynamicComponent("uni-popup"),Qe);return e.openBlock(),e.createElementBlock("view",null,[e.createVNode(n,{ref_key:"share",ref:a,"background-color":"#fff","is-mask-click":!1,borderRadius:"24rpx 24rpx 0rpx 0rpx",type:"bottom"},{default:e.withCtx((()=>[e.createElementVNode("view",{class:"share-popup-box"},[e.createElementVNode("view",{class:"share-content"},[e.createElementVNode("view",{class:"title"},"分享到"),e.createElementVNode("view",{class:"share-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.value,((t,i)=>(e.openBlock(),e.createElementBlock("view",{class:"share-item",key:i,onClick:t.fn},[e.createElementVNode("view",{class:"share-item-img",style:e.normalizeStyle({backgroundColor:t.backgroundColor})},[e.createElementVNode("image",{src:t.img,class:"img",style:e.normalizeStyle({width:t.imgWidth,height:t.imgHeight}),mode:"widthFix"},null,12,["src"])],4),e.createElementVNode("view",{class:"txt"},e.toDisplayString(t.text),1)],8,["onClick"])))),128))]),e.createElementVNode("view",{class:"cancel",onClick:l}," 取消 ")])])])),_:1},512),e.createVNode(sc,{ref_key:"reportRef",ref:r},null,512)])}}},[["__scopeId","data-v-37b3dbd2"]]),ac=X({__name:"worry",props:["statusBarHeight"],setup(t){const i=e.ref(null),n=e.reactive({listParams:{current:1,size:10,params:{}},list:[]}),a=e.ref([{id:0,label:"最新"},{id:1,label:"推荐"},{id:2,label:"关注"}]),r=e.ref(0);e.ref([{content:"测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",isZan:0,zanNum:536,isFollow:0},{content:"测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",isZan:1,zanNum:536,isFollow:1},{content:"测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",isZan:0,zanNum:536,isFollow:1},{content:"测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",isZan:0,zanNum:536,isFollow:1},{content:"测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",isZan:0,zanNum:536,isFollow:0},{content:"测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",isZan:0,zanNum:536,isFollow:0},{content:"测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",isZan:0,zanNum:536,isFollow:0},{content:"测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",isZan:0,zanNum:536,isFollow:0},{content:"测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",isZan:0,zanNum:536,isFollow:0},{content:"测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",isZan:0,zanNum:536,isFollow:0}]);const o=()=>{i.value.openShare()},l=()=>{uni.navigateTo({url:"/pages/forum/other/other"})},c=async()=>{let e=await((e,t={})=>_.post("/api/emotion/emotion/getEmotionList",e,t))(n.listParams);n.list=e.data.records};return e.onMounted((()=>{c()})),(t,c)=>{const d=s(e.resolveDynamicComponent("uni-icons"),Q);return e.openBlock(),e.createElementBlock("view",{class:"forum-index-content"},[e.createElementVNode("view",{class:"tabs"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.value,((t,i)=>(e.openBlock(),e.createElementBlock("view",{onClick:e=>{return i=t,void(r.value!=i.id&&(r.value=i.id));var i},class:e.normalizeClass(["tab-item",r.value==t.id?"active":""]),key:i},e.toDisplayString(t.label),11,["onClick"])))),128))]),e.createElementVNode("view",{class:"forum-index-list"},[e.createElementVNode("scroll-view",{"scroll-y":"true",class:"scroll-content","show-scrollbar":!1},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.list,((t,i)=>(e.openBlock(),e.createElementBlock("view",{class:"forum-index-list-item",key:i},[e.createElementVNode("view",{class:"item-header"},[e.createElementVNode("view",{class:"item-header-left",onClick:l},[e.createElementVNode("view",{class:"header-pic"},[e.createElementVNode("image",{src:Ie,class:"img"})]),e.createElementVNode("view",{class:"header-info"},[e.createElementVNode("view",{class:"name"},e.toDisplayString(t.realName),1),e.createElementVNode("view",{class:"time"},"52分钟前")])]),e.createElementVNode("view",{class:"item-header-right"},[2!=r.value?(e.openBlock(),e.createElementBlock("view",{key:0},[0==t.isFollow?(e.openBlock(),e.createElementBlock("view",{key:0,class:"follow"},[e.createVNode(d,{type:"plusempty",size:"12",color:"#35CA95"}),e.createTextVNode("关注")])):(e.openBlock(),e.createElementBlock("view",{key:1,class:"follow isFollow"},"已关注"))])):e.createCommentVNode("",!0),e.createElementVNode("view",null,[e.createVNode(d,{type:"more-filled",size:"18",color:"#808080"})])])]),e.createElementVNode("view",{class:"item-content"},[e.createVNode(e.unref(Ue),{line:5,expandText:"展开",foldHint:"收起"},{default:e.withCtx((()=>[e.createTextVNode(e.toDisplayString(t.content),1)])),_:2},1024)]),e.createElementVNode("view",{class:"item-btn"},[0==t.isZan?(e.openBlock(),e.createElementBlock("view",{key:0},[e.createElementVNode("image",{src:Kl,class:"img"}),e.createTextVNode("点赞 ")])):(e.openBlock(),e.createElementBlock("view",{key:1},[e.createElementVNode("image",{src:ec,class:"img"}),e.createTextVNode(e.toDisplayString(t.zanNum),1)])),e.createElementVNode("view",null,[e.createElementVNode("image",{src:tc,class:"img"}),e.createTextVNode("评论 ")]),e.createElementVNode("view",null,[e.createElementVNode("image",{src:ic,class:"img",onClick:o}),e.createTextVNode("分享 ")])])])))),128))])]),e.createVNode(nc,{ref_key:"sharePopup",ref:i},null,512)])}}},[["__scopeId","data-v-8fcb2239"]]),rc=X({__name:"qa",setup(t){const n=e.ref(null),a=e.reactive({listParams:{current:1,size:10,params:{}},list:[]}),r=e.ref([]),o=e.ref([{id:0,label:"最新"},{id:1,label:"推荐"}]),l=e.ref(0);e.ref([{content:"测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",isZan:0,zanNum:536,isFollow:0}]);const c=()=>{n.value.openShare()};(async()=>{let e=await((e,t={})=>_.get("/api/answer/answer/hotList",e,t))();i("log","at pages/forum/index/components/qa.vue:122",e),r.value=e.data})();return e.onMounted((()=>{(async()=>{let e=await st(a.listParams);i("log","at pages/forum/index/components/qa.vue:116",e),a.list=e.data.records})()})),(t,d)=>{const u=s(e.resolveDynamicComponent("uni-icons"),Q);return e.openBlock(),e.createElementBlock("view",{class:"forum-index-content"},[e.createElementVNode("view",{class:"header"},[e.createElementVNode("text",{class:"num"},"172,567"),e.createTextVNode(" 个问题在这里收获了答案")]),e.createElementVNode("scroll-view",{"scroll-x":"true",class:"scroll-content-x","show-scrollbar":!1},[e.createElementVNode("view",{class:"qa-content-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.value,((t,i)=>(e.openBlock(),e.createElementBlock("view",{class:"qa-content-item",key:i},[e.createElementVNode("view",{class:"item-box"},[e.createElementVNode("view",{class:"title"},e.toDisplayString(t.title),1),e.createElementVNode("view",{class:"content"},[e.createElementVNode("text",{class:"txt"},e.toDisplayString(null==t.totalComment?0:t.totalComment)+" 个回答",1),e.createVNode(u,{type:"help-filled",size:"14",color:"rgba(104, 117, 129, 1)"})])])])))),128))])]),e.createElementVNode("view",{class:"tabs"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.value,((t,i)=>(e.openBlock(),e.createElementBlock("view",{onClick:e=>{return i=t,void(l.value!=i.id&&(l.value=i.id));var i},class:e.normalizeClass(["tab-item",l.value==t.id?"active":""]),key:i},e.toDisplayString(t.label),11,["onClick"])))),128))]),e.createElementVNode("view",{class:"forum-index-list"},[e.createElementVNode("scroll-view",{"scroll-y":"true",class:"scroll-content","show-scrollbar":!1},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.list,(s=>(e.openBlock(),e.createElementBlock("view",{class:"forum-index-list-item",key:t.index,onClick:e=>{return i("log","at pages/forum/index/components/qa.vue:128","===================="+(t=s.id)),void uni.navigateTo({url:"/pages/forum/index/qaDetail?id="+t});var t}},[e.createElementVNode("view",{class:"question"},[e.createElementVNode("image",{src:"/static/forum/question.svg",class:"img"}),e.createElementVNode("text",{class:"txt"},e.toDisplayString(s.title),1)]),e.createElementVNode("view",{class:"item-header"},[e.createElementVNode("view",{class:"item-header-left"},[e.createElementVNode("view",{class:"header-pic"},[e.createElementVNode("image",{src:null==s.avatar?"/static/my/profile.png":s.avatar,class:"img"},null,8,["src"]),e.createElementVNode("view",{class:"name"},e.toDisplayString(s.realName),1),e.createElementVNode("text",{class:"tip"},"咨询师")])])]),e.createElementVNode("view",{class:"item-content"},[e.createVNode(e.unref(Ue),{line:5,expandText:"展开",foldHint:"收起"},{default:e.withCtx((()=>[e.createTextVNode(e.toDisplayString(s.content),1)])),_:2},1024)]),e.createElementVNode("view",{class:"item-btn"},[0==s.isZan?(e.openBlock(),e.createElementBlock("view",{key:0},[e.createElementVNode("image",{src:Kl,class:"img"}),e.createTextVNode("点赞 ")])):(e.openBlock(),e.createElementBlock("view",{key:1},[e.createElementVNode("image",{src:ec,class:"img"}),e.createTextVNode(e.toDisplayString(s.zanNum),1)])),e.createElementVNode("view",null,[e.createElementVNode("image",{src:tc,class:"img"}),e.createTextVNode("评论 ")]),e.createElementVNode("view",null,[e.createElementVNode("image",{src:ic,class:"img",onClick:c}),e.createTextVNode("分享 ")]),e.createElementVNode("view",null,[e.createVNode(u,{type:"more-filled",size:"18",color:"#808080"})])])],8,["onClick"])))),128))])]),e.createVNode(nc,{ref_key:"sharePopup",ref:n},null,512)])}}},[["__scopeId","data-v-17db275f"]]),oc=X({__name:"index",setup(t){e.useCssVars((e=>({e340955e:n.value})));const i=W(),n=e.ref(i.statusBarHeight+"px");e.ref(0);const a=e.ref([{id:0,label:"心事"},{id:1,label:"问答"}]),r=e.ref(0),o=()=>{uni.navigateTo({url:"/pages/forum/write/write"})},l=()=>{uni.navigateBack({delta:1})},c=()=>{uni.navigateTo({url:"/pages/forum/my/my"})};return(t,i)=>{const n=s(e.resolveDynamicComponent("uni-icons"),Q);return e.openBlock(),e.createElementBlock("view",{class:"forum-index-box"},[e.createElementVNode("view",{class:"navbar"},[e.createElementVNode("view",{class:"header"},[e.createElementVNode("view",{class:"left"},[e.createVNode(n,{type:"left",size:"24",color:"#000",onClick:l}),e.createElementVNode("view",{class:"tabs"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.value,((t,i)=>(e.openBlock(),e.createElementBlock("text",{class:e.normalizeClass(["tab-item",r.value==t.id?"active":""]),onClick:e=>{return i=t,void(r.value!=i.id&&(r.value=i.id));var i},key:i},e.toDisplayString(t.label),11,["onClick"])))),128))])]),e.createElementVNode("view",{class:"user",onClick:c},[e.createVNode(n,{type:"person",size:"24",color:"rgba(0,0,0,.85)"})])])]),0==r.value?(e.openBlock(),e.createElementBlock("view",{key:0,class:"worry-box"},[e.createVNode(ac)])):(e.openBlock(),e.createElementBlock("view",{key:1,class:"qa-box"},[e.createVNode(rc)])),e.createElementVNode("view",{class:"fab-button",onClick:o},[e.createElementVNode("image",{src:Zl,class:"img"})])])}}},[["__scopeId","data-v-9e0d2d4c"]]),lc=X({__name:"write",setup(t){const i=()=>{uni.navigateBack({delta:1})},n=e=>{uni.navigateTo({url:e})};return(t,a)=>{const r=s(e.resolveDynamicComponent("uni-icons"),Q);return e.openBlock(),e.createElementBlock("view",{class:"write-box"},[e.createElementVNode("view",{class:"write-header"},[e.createElementVNode("view",{class:"title"},"每个灵魂都值得被看见"),e.createElementVNode("view",{class:"remark"},"出自 / 旅行社")]),e.createElementVNode("view",{class:"operate-list-box"},[e.createElementVNode("view",{class:"operate-first"},[e.createElementVNode("view",{class:"first-item green",onClick:a[0]||(a[0]=e=>n("/pages/forum/write/send-dynamics/send-dynamics"))},[e.createElementVNode("view",{class:"title"},"发心事"),e.createElementVNode("view",{class:"content"},"此时此刻，随时记录收获爱与温暖"),e.createElementVNode("image",{src:"/static/forum/send.svg",class:"img"})]),e.createElementVNode("view",{class:"first-item yellow",onClick:a[1]||(a[1]=e=>n("/pages/forum/write/ask-question/ask-question"))},[e.createElementVNode("view",{class:"title"},"提问题"),e.createElementVNode("view",{class:"content"},"7万+7万+专业咨询师为你答疑解惑"),e.createElementVNode("image",{src:"/static/forum/qa.svg",class:"img"})])]),e.createElementVNode("view",{class:"txt"},"写给自己的一封信"),e.createElementVNode("view",{class:"operate-second"},[e.createElementVNode("view",{class:"second-item one"},[e.createElementVNode("view",{class:"title",onClick:a[2]||(a[2]=e=>n("/pages/forum/write/write-mailbox/write-mailbox?type=old"))},"从前"),e.createElementVNode("view",{class:"content"},"写给从前的一封信")]),e.createElementVNode("view",{class:"second-item two"},[e.createElementVNode("view",{class:"title",onClick:a[3]||(a[3]=e=>n("/pages/forum/write/write-mailbox/write-mailbox?type=new"))},"现在"),e.createElementVNode("view",{class:"content"},"写给现在的一封信")]),e.createElementVNode("view",{class:"second-item three"},[e.createElementVNode("view",{class:"title",onClick:a[4]||(a[4]=e=>n("/pages/forum/write/write-mailbox/write-mailbox?type=future"))},"未来"),e.createElementVNode("view",{class:"content"},"写给未来的一封信")])]),e.createElementVNode("view",{class:"close"},[e.createVNode(r,{type:"close",size:"24",color:"rgba(0,0,0,0.3)",onClick:i})])])])}}},[["__scopeId","data-v-19cef875"]]);const dc=X({name:"u-icon",emits:["click","touchstart"],props:{name:{type:String,default:""},color:{type:[String,null],default:""},size:{type:[Number,String],default:"inherit"},bold:{type:Boolean,default:!1},index:{type:[Number,String],default:""},hoverClass:{type:String,default:""},customPrefix:{type:String,default:"uicon"},label:{type:[String,Number],default:""},labelPos:{type:String,default:"right"},labelSize:{type:[String,Number],default:"28"},labelColor:{type:String,default:"#606266"},marginLeft:{type:[String,Number],default:"6"},marginTop:{type:[String,Number],default:"6"},marginRight:{type:[String,Number],default:"6"},marginBottom:{type:[String,Number],default:"6"},imgMode:{type:String,default:"widthFix"},customStyle:{type:Object,default:()=>({})},width:{type:[String,Number],default:""},height:{type:[String,Number],default:""},top:{type:[String,Number],default:0},showDecimalIcon:{type:Boolean,default:!1},inactiveColor:{type:String,default:"#ececec"},percent:{type:[Number,String],default:"50"}},computed:{customClass(){let e=[],{customPrefix:t,name:i}=this,s=i.indexOf("-icon-");return s>-1?(t=i.substring(0,s+5),e.push(i)):e.push(`${t}-${i}`),"uicon"===t?e.push("u-iconfont"):e.push(t),this.showDecimalIcon&&this.inactiveColor&&this.$u.config.type.includes(this.inactiveColor)?e.push("u-icon__icon--"+this.inactiveColor):this.color&&this.$u.config.type.includes(this.color)&&e.push("u-icon__icon--"+this.color),e},iconStyle(){let e={};return e={fontSize:"inherit"==this.size?"inherit":this.$u.addUnit(this.size),fontWeight:this.bold?"bold":"normal",top:this.$u.addUnit(this.top)},this.showDecimalIcon&&this.inactiveColor&&!this.$u.config.type.includes(this.inactiveColor)?e.color=this.inactiveColor:this.color&&!this.$u.config.type.includes(this.color)&&(e.color=this.color),e},isImg(){return-1!==this.name.indexOf("/")},imgStyle(){let e={};return e.width=this.width?this.$u.addUnit(this.width):this.$u.addUnit(this.size),e.height=this.height?this.$u.addUnit(this.height):this.$u.addUnit(this.size),e},decimalIconStyle(){let e={};return e={fontSize:"inherit"==this.size?"inherit":this.$u.addUnit(this.size),fontWeight:this.bold?"bold":"normal",top:this.$u.addUnit(this.top),width:this.percent+"%"},this.color&&!this.$u.config.type.includes(this.color)&&(e.color=this.color),e},decimalIconClass(){let e=[];return e.push(this.customPrefix+"-"+this.name),"uicon"==this.customPrefix?e.push("u-iconfont"):e.push(this.customPrefix),this.color&&this.$u.config.type.includes(this.color)?e.push("u-icon__icon--"+this.color):e.push("u-icon__icon--primary"),e}},methods:{click(){this.$emit("click",this.index)},touchstart(){this.$emit("touchstart",this.index)}}},[["render",function(t,i,s,n,a,r){return e.openBlock(),e.createElementBlock("view",{style:e.normalizeStyle([s.customStyle]),class:e.normalizeClass(["u-icon",["u-icon--"+s.labelPos]]),onClick:i[1]||(i[1]=(...e)=>r.click&&r.click(...e))},[r.isImg?(e.openBlock(),e.createElementBlock("image",{key:0,class:"u-icon__img",src:s.name,mode:s.imgMode,style:e.normalizeStyle([r.imgStyle])},null,12,["src","mode"])):(e.openBlock(),e.createElementBlock("view",{key:1,class:e.normalizeClass(["u-icon__icon",r.customClass]),style:e.normalizeStyle([r.iconStyle]),"hover-class":s.hoverClass,onTouchstart:i[0]||(i[0]=(...e)=>r.touchstart&&r.touchstart(...e))},[s.showDecimalIcon?(e.openBlock(),e.createElementBlock("text",{key:0,style:e.normalizeStyle([r.decimalIconStyle]),class:e.normalizeClass([r.decimalIconClass,"u-icon__decimal"]),"hover-class":s.hoverClass},null,14,["hover-class"])):e.createCommentVNode("",!0)],46,["hover-class"])),""!==s.label&&null!==s.label?(e.openBlock(),e.createElementBlock("text",{key:2,class:"u-icon__label",style:e.normalizeStyle({color:s.labelColor,fontSize:t.$u.addUnit(s.labelSize),marginLeft:"right"==s.labelPos?t.$u.addUnit(s.marginLeft):0,marginTop:"bottom"==s.labelPos?t.$u.addUnit(s.marginTop):0,marginRight:"left"==s.labelPos?t.$u.addUnit(s.marginRight):0,marginBottom:"top"==s.labelPos?t.$u.addUnit(s.marginBottom):0})},e.toDisplayString(s.label),5)):e.createCommentVNode("",!0)],6)}],["__scopeId","data-v-32e6a46e"]]);let uc="data:image/jpg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAAA8AAD/4QMraHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjMtYzAxMSA2Ni4xNDU2NjEsIDIwMTIvMDIvMDYtMTQ6NTY6MjcgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDUzYgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjREMEQwRkY0RjgwNDExRUE5OTY2RDgxODY3NkJFODMxIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjREMEQwRkY1RjgwNDExRUE5OTY2RDgxODY3NkJFODMxIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NEQwRDBGRjJGODA0MTFFQTk5NjZEODE4Njc2QkU4MzEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NEQwRDBGRjNGODA0MTFFQTk5NjZEODE4Njc2QkU4MzEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7/7gAOQWRvYmUAZMAAAAAB/9sAhAAGBAQEBQQGBQUGCQYFBgkLCAYGCAsMCgoLCgoMEAwMDAwMDBAMDg8QDw4MExMUFBMTHBsbGxwfHx8fHx8fHx8fAQcHBw0MDRgQEBgaFREVGh8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx//wAARCADIAMgDAREAAhEBAxEB/8QAcQABAQEAAwEBAAAAAAAAAAAAAAUEAQMGAgcBAQAAAAAAAAAAAAAAAAAAAAAQAAIBAwICBgkDBQAAAAAAAAABAhEDBCEFMVFBYXGREiKBscHRMkJSEyOh4XLxYjNDFBEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEQMRAD8A/fAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHbHFyZ/Dam+yLA+Z2L0Pjtyj2poD4AAAAAAAAAAAAAAAAAAAAAAAAKWFs9y6lcvvwQeqj8z9wFaziY1n/HbUX9XF97A7QAGXI23EvJ1goyfzR0YEfN269jeZ+a03pNe0DIAAAAAAAAAAAAAAAAAAAACvtO3RcVkXlWutuL9YFYAAAAAOJRjKLjJVi9GmB5/csH/mu1h/in8PU+QGMAAAAAAAAAAAAAAAAAAaMDG/6MmMH8C80+xAelSSVFolwQAAAAAAAHVlWI37ErUulaPk+hgeYnCUJuElSUXRrrQHAAAAAAAAAAAAAAAAABa2Oz4bM7r4zdF2ICmAAAAAAAAAg7zZ8GX41wuJP0rRgYAAAAAAAAAAAAAAAAAD0m2R8ODaXU33tsDSAAAAAAAAAlb9HyWZcnJd9PcBHAAAAAAAAAAAAAAAAAPS7e64Vn+KA0AAAAAAAAAJm+v8Ftf3ewCKAAAAAAAAAAAAAAAAAX9muqeGo9NttP06+0DcAAAAAAAAAjb7dTu2ra+VOT9P8AQCWAAAAAAAAAAAAAAAAAUNmyPt5Ltv4bui/kuAF0AAAAAAADiUlGLlJ0SVW+oDzOXfd/Ind6JPRdS0QHSAAAAAAAAAAAAAAAAAE2nVaNcGB6Lbs6OTao9LsF51z60BrAAAAAABJ3jOVHjW3r/sa9QEgAAAAAAAAAAAAAAAAAAAPu1duWriuW34ZR4MC9hbnZyEoy8l36XwfYBsAAADaSq9EuLAlZ+7xSdrGdW9Hc5dgEdtt1erfFgAAAAAAAAAAAAAAAAADVjbblX6NR8MH80tEBRs7HYivyzlN8lovaBPzduvY0m6eK10TXtAyAarO55lpJK54orolr+4GqO/Xaea1FvqbXvA+Z77kNeW3GPbV+4DJfzcm/pcm3H6Vou5AdAFLC2ed2Pjv1txa8sV8T6wOL+yZEKu1JXFy4MDBOE4ScZxcZLinoB8gAAAAAAAAAAAB242LeyJ+C3GvN9C7QLmJtePYpKS+5c+p8F2IDYAANJqj1T4oCfk7Nj3G5Wn9qXJax7gJ93Z82D8sVNc4v30A6Xg5i42Z+iLfqARwcyT0sz9MWvWBps7LlTf5Grce9/oBTxdtxseklHxT+uWr9AGoAB138ezfj4bsFJdD6V2MCPm7RdtJzs1uW1xXzL3gTgAAAAAAAAADRhYc8q74I6RWs5ckB6GxYtWLat21SK731sDsAAAAAAAAAAAAAAAASt021NO/YjrxuQXT1oCOAAAAAAABzGLlJRSq26JAelwsWONYjbXxcZvmwO8AAAAAAAAAAAAAAAAAAef3TEWPkVivx3NY9T6UBiAAAAAABo2+VmGXblddIJ8eivRUD0oAAAAAAAAAAAAAAAAAAAYt4tKeFKVNYNSXfRgefAAAAAAAAr7VuSSWPedKaW5v1MCsAAAAAAAAAAAAAAAAAAIe6bj96Ts2n+JPzSXzP3ATgAAAAAAAAFbbt1UUrOQ9FpC4/UwK6aaqtU+DAAAAAAAAAAAAAAA4lKMIuUmoxWrb4ARNx3R3q2rLpa4Sl0y/YCcAAAAAAAAAAANmFud7G8r89r6X0dgFvGzLGRGtuWvTF6NAdwAAAAAAAAAAAy5W442PVN+K59EePp5ARMvOv5MvO6QXCC4AZwAAAAAAAAAAAAAcxlKLUotprg1owN+PvORborq+7Hnwl3gUbO74VzRydt8pKn68ANcJwmqwkpLmnUDkAAAAfNy9atqtyagut0AxXt5xIV8Fbj6lRd7Am5G65V6qUvtwfyx94GMAAAAAAAAAAAAAAAAAAAOU2nVOj5gdsc3LiqRvTpyqwOxbnnrhdfpSfrQB7pnv/AGvuS9gHXPMy5/Fem1yq0v0A6W29XqwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAf//Z";const mc=X({name:"u-avatar",emits:["click"],props:{bgColor:{type:String,default:"transparent"},src:{type:[String,null],default:""},size:{type:[String,Number],default:"default"},mode:{type:String,default:"circle"},text:{type:String,default:""},imgMode:{type:String,default:"aspectFill"},index:{type:[String,Number],default:""},sexIcon:{type:[String,null],default:"man"},levelIcon:{type:String,default:"level"},levelBgColor:{type:String,default:""},sexBgColor:{type:String,default:""},showSex:{type:Boolean,default:!1},showLevel:{type:Boolean,default:!1}},data(){return{error:!1,avatar:this.src?this.src:uc}},watch:{src(e){e?(this.avatar=e,this.error=!1):(this.avatar=uc,this.error=!0)}},computed:{wrapStyle(){let e={};return e.height="large"==this.size?"120rpx":"default"==this.size?"90rpx":"mini"==this.size?"70rpx":this.size+"rpx",e.width=e.height,e.flex=`0 0 ${e.height}`,e.backgroundColor=this.bgColor,e.borderRadius="circle"==this.mode?"500px":"5px",this.text&&(e.padding="0 6rpx"),e},imgStyle(){let e={};return e.borderRadius="circle"==this.mode?"500px":"5px",e},uText(){return String(this.text)[0]},uSexStyle(){let e={};return this.sexBgColor&&(e.backgroundColor=this.sexBgColor),e},uLevelStyle(){let e={};return this.levelBgColor&&(e.backgroundColor=this.levelBgColor),e}},methods:{loadError(){this.error=!0,this.avatar=uc},click(){this.$emit("click",this.index)}}},[["render",function(t,i,n,a,r,o){const l=s(e.resolveDynamicComponent("u-icon"),dc);return e.openBlock(),e.createElementBlock("view",{class:"u-avatar",style:e.normalizeStyle([o.wrapStyle]),onClick:i[1]||(i[1]=(...e)=>o.click&&o.click(...e))},[!o.uText&&r.avatar?(e.openBlock(),e.createElementBlock("image",{key:0,onError:i[0]||(i[0]=(...e)=>o.loadError&&o.loadError(...e)),style:e.normalizeStyle([o.imgStyle]),class:"u-avatar__img",src:r.avatar,mode:n.imgMode},null,44,["src","mode"])):o.uText?(e.openBlock(),e.createElementBlock("text",{key:1,class:"u-line-1",style:{fontSize:"38rpx"}},e.toDisplayString(o.uText),1)):e.renderSlot(t.$slots,"default",{key:2},void 0,!0),n.showSex&&n.sexIcon?(e.openBlock(),e.createElementBlock("view",{key:3,class:e.normalizeClass(["u-avatar__sex",["u-avatar__sex--"+n.sexIcon]]),style:e.normalizeStyle([o.uSexStyle])},[n.sexIcon?(e.openBlock(),e.createBlock(l,{key:0,name:n.sexIcon,size:"20"},null,8,["name"])):e.createCommentVNode("",!0)],6)):e.createCommentVNode("",!0),n.showLevel?(e.openBlock(),e.createElementBlock("view",{key:4,class:"u-avatar__level",style:e.normalizeStyle([o.uLevelStyle])},[e.createVNode(l,{name:n.levelIcon,size:"20"},null,8,["name"])],4)):e.createCommentVNode("",!0)],4)}],["__scopeId","data-v-8a2dacc8"]]),hc=X({__name:"mood-log",setup(t){const i=e.ref(null);e.ref([{id:0,label:"最新"},{id:1,label:"推荐"},{id:2,label:"关注"}]),e.ref(0);const n=e.reactive({listParams:{current:1,size:10,params:{}},list:[]});e.ref([{content:"测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",isZan:0,zanNum:536,isFollow:0},{content:"测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",isZan:1,zanNum:536,isFollow:1},{content:"测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",isZan:0,zanNum:536,isFollow:1},{content:"测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",isZan:0,zanNum:536,isFollow:1},{content:"测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",isZan:0,zanNum:536,isFollow:0},{content:"测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",isZan:0,zanNum:536,isFollow:0},{content:"测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",isZan:0,zanNum:536,isFollow:0},{content:"测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",isZan:0,zanNum:536,isFollow:0},{content:"测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",isZan:0,zanNum:536,isFollow:0},{content:"测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",isZan:0,zanNum:536,isFollow:0}]);const a=()=>{i.value.openShare()};return e.onMounted((()=>{(async()=>{let e=await it(n.listParams);n.list=e.data.records})()})),(t,r)=>{const o=s(e.resolveDynamicComponent("uni-icons"),Q);return e.openBlock(),e.createElementBlock("view",{class:"forum-index-mood-log-content"},[e.createElementVNode("view",{class:"forum-index-list"},[e.createElementVNode("scroll-view",{"scroll-y":"true",class:"scroll-content","show-scrollbar":!1},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.list,((t,i)=>(e.openBlock(),e.createElementBlock("view",{class:"forum-index-list-item",key:i},[e.createElementVNode("view",{class:"item-header"},[e.createElementVNode("view",{class:"item-header-left"},[e.createElementVNode("view",{class:"header-pic"},[e.createElementVNode("image",{src:Ie,class:"img"})]),e.createElementVNode("view",{class:"header-info"},[e.createElementVNode("view",{class:"name"},"张三"),e.createElementVNode("view",{class:"time"},"52分钟前")])]),e.createElementVNode("view",{class:"item-header-right"},[e.createElementVNode("view",null,[e.createVNode(o,{type:"more-filled",size:"18",color:"#808080"})])])]),e.createElementVNode("view",{class:"item-content"},[e.createVNode(e.unref(Ue),{line:5,expandText:"展开",foldHint:"收起"},{default:e.withCtx((()=>[e.createTextVNode(e.toDisplayString(t.content),1)])),_:2},1024)]),e.createElementVNode("view",{class:"item-btn"},[0==t.isZan?(e.openBlock(),e.createElementBlock("view",{key:0},[e.createElementVNode("image",{src:Kl,class:"img"}),e.createTextVNode("点赞 ")])):(e.openBlock(),e.createElementBlock("view",{key:1},[e.createElementVNode("image",{src:ec,class:"img"}),e.createTextVNode(e.toDisplayString(t.zanNum),1)])),e.createElementVNode("view",null,[e.createElementVNode("image",{src:tc,class:"img"}),e.createTextVNode("评论 ")]),e.createElementVNode("view",null,[e.createElementVNode("image",{src:ic,class:"img",onClick:a}),e.createTextVNode("分享 ")])])])))),128))])]),e.createVNode(nc,{ref_key:"sharePopup",ref:i},null,512)])}}},[["__scopeId","data-v-d3c50c6f"]]),pc=X({__name:"mail-box",setup(t){const i=e.ref([{title:"写给从前的自己一封信",type:"old",content:"从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前"},{title:"写给现在的自己一封信",type:"new",content:"现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在"},{title:"写给未来的自己一封信",type:"future",content:"未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来"}]);return(t,s)=>(e.openBlock(),e.createElementBlock("view",{class:"mailbox-box"},[e.createElementVNode("scroll-view",{"scroll-y":"true",class:"scroll-content","show-scrollbar":!1},[e.createElementVNode("view",{class:"mailbox-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.value,((t,i)=>(e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["mailbox-item",t.type]),key:i,onClick:e=>(e=>{uni.navigateTo({url:`/pages/forum/mailbox/mailbox?type=${e.type}`})})(t)},[e.createElementVNode("view",{class:"content-item"},[e.createElementVNode("view",{class:"title"},e.toDisplayString(t.title),1),e.createElementVNode("view",{class:"content"},[e.createVNode(e.unref(Ue),{line:4,expandText:"展开",foldHint:"收起"},{default:e.withCtx((()=>[e.createTextVNode(e.toDisplayString(t.content),1)])),_:2},1024)])]),e.createElementVNode("image",{src:"old"==t.type?"/static/forum/old-arrow.png":"new"==t.type?"/static/forum/new-arrow.png":"/static/forum/future-arrow.png",class:"img"},null,8,["src"])],10,["onClick"])))),128))])])]))}},[["__scopeId","data-v-55058286"]]),gc=X({__name:"article-box",setup(t){e.ref([{title:"写给从前的自己一封信",type:"old",content:"从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前从前"},{title:"写给现在的自己一封信",type:"new",content:"现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在现在"},{title:"写给未来的自己一封信",type:"future",content:"未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来未来"}]);const i=e.reactive({listParams:{current:1,size:10,params:{}},list:[]}),s=async()=>{let e=await((e,t={})=>_.post("/api/article/article/getArticleByUserId",e,t))(i.listParams);i.list=e.data.records};return e.onMounted((()=>{s()})),(t,s)=>(e.openBlock(),e.createElementBlock("view",{class:"mailbox-box"},[e.createElementVNode("scroll-view",{"scroll-y":"true",class:"scroll-content","show-scrollbar":!1},[e.createElementVNode("view",{class:"mailbox-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.list,((t,i)=>(e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["mailbox-item",t.type]),key:i,onClick:e=>(e=>{uni.navigateTo({url:`/pages/forum/mailbox/mailbox?type=${e.type}`})})(t)},[e.createElementVNode("view",{class:"content-item"},[e.createElementVNode("view",{class:"title"},e.toDisplayString(t.title),1),e.createElementVNode("view",{class:"content"},[e.createVNode(e.unref(Ue),{line:4,expandText:"展开",foldHint:"收起"},{default:e.withCtx((()=>[e.createTextVNode(e.toDisplayString(t.content),1)])),_:2},1024)])]),e.createElementVNode("image",{src:"old"==t.type?"/static/forum/old-arrow.png":"new"==t.type?"/static/forum/new-arrow.png":"/static/forum/future-arrow.png",class:"img"},null,8,["src"])],10,["onClick"])))),128))])])]))}},[["__scopeId","data-v-3fbc8581"]]),yc=X({__name:"my",setup(t){e.useCssVars((e=>({df64d09c:a.value})));const n=W(),a=e.ref(n.statusBarHeight+"px");e.ref(0);const r=e.ref([{id:0,label:"心情日志"},{id:1,label:"信箱"},{id:2,label:"文章"}]),o=e.ref({}),l=e.ref(0),c=()=>{uni.navigateTo({url:"/pages/forum/write/write"})},d=()=>{uni.navigateBack({delta:1})},u=()=>{uni.navigateTo({url:"/pages/forum/my/userInfo"})};return e.onMounted((()=>{(async()=>{let e=await I();o.value=e.data,i("log","at pages/forum/my/my.vue:128","userInfo",o.value)})()})),(t,i)=>{const n=s(e.resolveDynamicComponent("uni-icons"),Q),a=s(e.resolveDynamicComponent("u-avatar"),mc);return e.openBlock(),e.createElementBlock("view",{class:"forum-my-box"},[e.createElementVNode("view",{class:"navbar"},[e.createElementVNode("view",{class:"header"},[e.createVNode(n,{type:"left",size:"24",color:"#000",onClick:d,class:"left"})]),e.createElementVNode("view",{class:"user-info"},[e.createElementVNode("view",{class:"user-info-content"},[e.createVNode(a,{src:null==o.value.avatar?"/static/my/profile.png":o.value.avatar,class:"profile"},null,8,["src"]),e.createElementVNode("view",null,[e.createElementVNode("view",{class:"nick-name"},e.toDisplayString(o.value.realName),1),e.createElementVNode("view",{class:"id-num"},[e.createElementVNode("text",null,"ID："+e.toDisplayString(o.value.id),1)])])]),e.createElementVNode("view",{class:"edit-user-box"},[e.createElementVNode("view",{class:"edit-user",onClick:u},"编辑资料")])]),e.createElementVNode("view",{class:"remark"},"倾听师寄语倾听师寄语倾听师寄语倾听师寄"),e.createElementVNode("view",{class:"num-box"},[e.createElementVNode("view",{class:"num-content-box"},[e.createElementVNode("view",{class:"content-item"},[e.createElementVNode("text",{class:"num"},"9999"),e.createElementVNode("text",{class:"txt"},"获赞")]),e.createElementVNode("view",{class:"content-item"},[e.createElementVNode("text",{class:"num"},"9999"),e.createElementVNode("text",{class:"txt"},"关注")]),e.createElementVNode("view",{class:"content-item"},[e.createElementVNode("text",{class:"num"},"9999"),e.createElementVNode("text",{class:"txt"},"粉丝")]),e.createElementVNode("view",{class:"content-item"},[e.createElementVNode("text",{class:"num"},"9999"),e.createElementVNode("text",{class:"txt"},"访客")])])])]),e.createElementVNode("view",{class:"tabs"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.value,((t,i)=>(e.openBlock(),e.createElementBlock("view",{onClick:e=>{return i=t,void(l.value!=i.id&&(l.value=i.id));var i},class:e.normalizeClass(["tab-item",l.value==t.id?"active":""]),key:i},e.toDisplayString(t.label),11,["onClick"])))),128))]),0==l.value?(e.openBlock(),e.createElementBlock("view",{key:0,class:"mood-log-box"},[e.createVNode(hc)])):1==l.value?(e.openBlock(),e.createElementBlock("view",{key:1,class:"mood-log-box mailbox-box"},[e.createVNode(pc)])):2==l.value?(e.openBlock(),e.createElementBlock("view",{key:2,class:"mood-log-box mailbox-box"},[e.createVNode(gc)])):e.createCommentVNode("",!0),e.createElementVNode("view",{class:"fab-button",onClick:c},[e.createElementVNode("image",{src:Zl,class:"img"})])])}}},[["__scopeId","data-v-bf631088"]]),fc=X({__name:"dynamics-log",setup(t){const i=e.ref(null);e.ref([{id:0,label:"最新"},{id:1,label:"推荐"},{id:2,label:"关注"}]),e.ref(0);const n=e.ref([{content:"测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",isZan:0,zanNum:536,isFollow:0},{content:"测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",isZan:1,zanNum:536,isFollow:1},{content:"测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",isZan:0,zanNum:536,isFollow:1},{content:"测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",isZan:0,zanNum:536,isFollow:1},{content:"测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",isZan:0,zanNum:536,isFollow:0},{content:"测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",isZan:0,zanNum:536,isFollow:0},{content:"测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",isZan:0,zanNum:536,isFollow:0},{content:"测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",isZan:0,zanNum:536,isFollow:0},{content:"测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",isZan:0,zanNum:536,isFollow:0},{content:"测试测试测试测试测试测试测试测试测试测试测试测试测试测试试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试",isZan:0,zanNum:536,isFollow:0}]),a=()=>{i.value.openShare()};return(t,r)=>{const o=s(e.resolveDynamicComponent("uni-icons"),Q);return e.openBlock(),e.createElementBlock("view",{class:"forum-index-dynamics-log-content"},[e.createElementVNode("view",{class:"forum-index-list"},[e.createElementVNode("scroll-view",{"scroll-y":"true",class:"scroll-content","show-scrollbar":!1},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.value,((t,i)=>(e.openBlock(),e.createElementBlock("view",{class:"forum-index-list-item",key:i},[e.createElementVNode("view",{class:"item-header"},[e.createElementVNode("view",{class:"item-header-left"},[e.createElementVNode("view",{class:"header-pic"},[e.createElementVNode("image",{src:Ie,class:"img"})]),e.createElementVNode("view",{class:"header-info"},[e.createElementVNode("view",{class:"name"},"张三"),e.createElementVNode("view",{class:"time"},"52分钟前")])]),e.createElementVNode("view",{class:"item-header-right"},[e.createElementVNode("view",null,[e.createVNode(o,{type:"more-filled",size:"18",color:"#808080"})])])]),e.createElementVNode("view",{class:"item-content"},[e.createVNode(e.unref(Ue),{line:5,expandText:"展开",foldHint:"收起"},{default:e.withCtx((()=>[e.createTextVNode(e.toDisplayString(t.content),1)])),_:2},1024)]),e.createElementVNode("view",{class:"item-btn"},[0==t.isZan?(e.openBlock(),e.createElementBlock("view",{key:0},[e.createElementVNode("image",{src:Kl,class:"img"}),e.createTextVNode("点赞 ")])):(e.openBlock(),e.createElementBlock("view",{key:1},[e.createElementVNode("image",{src:ec,class:"img"}),e.createTextVNode(e.toDisplayString(t.zanNum),1)])),e.createElementVNode("view",null,[e.createElementVNode("image",{src:tc,class:"img"}),e.createTextVNode("评论 ")]),e.createElementVNode("view",null,[e.createElementVNode("image",{src:ic,class:"img",onClick:a}),e.createTextVNode("分享 ")])])])))),128))])]),e.createVNode(nc,{ref_key:"sharePopup",ref:i},null,512)])}}},[["__scopeId","data-v-7e62cd15"]]),vc=X({__name:"other",setup(t){e.useCssVars((e=>({"49c8d880":n.value})));const i=W(),n=e.ref(i.statusBarHeight+"px");e.ref(0);const a=e.ref(!1),r=e.ref([{id:0,label:"动态"}]),o=e.ref(0),l=()=>{uni.navigateBack({delta:1})};return(t,i)=>{const n=s(e.resolveDynamicComponent("uni-icons"),Q);return e.openBlock(),e.createElementBlock("view",{class:"forum-other-box"},[e.createElementVNode("view",{class:"navbar"},[e.createElementVNode("view",{class:"header"},[e.createVNode(n,{type:"left",size:"24",color:"#000",onClick:l,class:"left"})]),e.createElementVNode("view",{class:"user-info"},[e.createElementVNode("view",{class:"user-info-content"},[e.createElementVNode("image",{src:Ie,class:"profile"}),e.createElementVNode("view",null,[e.createElementVNode("view",{class:"nick-name"},"大石头"),e.createElementVNode("view",{class:"id-num"},[e.createElementVNode("text",null,"ID：12367263732")])])]),e.createElementVNode("view",{class:"follow-box"},[a.value?(e.openBlock(),e.createElementBlock("view",{key:1,class:"follow isFollow",onClick:i[1]||(i[1]=e=>a.value=!1)},"已关注")):(e.openBlock(),e.createElementBlock("view",{key:0,class:"follow"},[e.createVNode(n,{type:"plusempty",size:"12",color:"#fff",onClick:i[0]||(i[0]=e=>a.value=!0)}),e.createTextVNode("关注")]))])]),e.createElementVNode("view",{class:"remark"},"倾听师寄语倾听师寄语倾听师寄语倾听师寄"),e.createElementVNode("view",{class:"num-box"},[e.createElementVNode("view",{class:"num-content-box"},[e.createElementVNode("view",{class:"content-item"},[e.createElementVNode("text",{class:"num"},"9999"),e.createElementVNode("text",{class:"txt"},"获赞")]),e.createElementVNode("view",{class:"content-item"},[e.createElementVNode("text",{class:"num"},"9999"),e.createElementVNode("text",{class:"txt"},"关注")]),e.createElementVNode("view",{class:"content-item"},[e.createElementVNode("text",{class:"num"},"9999"),e.createElementVNode("text",{class:"txt"},"粉丝")]),e.createElementVNode("view",{class:"content-item"},[e.createElementVNode("text",{class:"num"},"9999"),e.createElementVNode("text",{class:"txt"},"访客")])])])]),e.createElementVNode("view",{class:"tabs"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.value,((t,i)=>(e.openBlock(),e.createElementBlock("view",{onClick:e=>{return i=t,void(o.value!=i.id&&(o.value=i.id));var i},class:e.normalizeClass(["tab-item",o.value==t.id?"active":""]),key:i},e.toDisplayString(t.label),11,["onClick"])))),128))]),0==o.value?(e.openBlock(),e.createElementBlock("view",{key:0,class:"mood-log-box"},[e.createVNode(fc)])):e.createCommentVNode("",!0)])}}},[["__scopeId","data-v-ff4d7bb9"]]),Ec={__name:"mailbox",setup(t){e.useCssVars((e=>({f808dc52:n.value})));const i=W(),n=e.ref(i.statusBarHeight+"px");e.ref(0);const a=e.ref(null);o((e=>{a.value=e.type}));const r=()=>{uni.navigateBack({delta:1})};return(t,i)=>{const n=s(e.resolveDynamicComponent("uni-icons"),Q);return e.openBlock(),e.createElementBlock("view",{class:"mailbox-contaior"},[e.createElementVNode("view",{class:"navbar",style:e.normalizeStyle({backgroundImage:"old"==a.value?"url(/static/forum/old-bg.png)":"new"==a.value?"url(/static/forum/new-bg.png)":"url(/static/forum/future-bg.png)"})},[e.createElementVNode("view",{class:"header"},[e.createElementVNode("view",{class:"content"},[e.createVNode(n,{type:"left",size:"24",color:"#000",onClick:r,class:"left"}),e.createVNode(n,{type:"more-filled",size:"18",color:"#808080"})]),e.createElementVNode("view",{class:"title"},"写给从前的自己的一封信"),e.createElementVNode("view",{class:"item-header"},[e.createElementVNode("view",{class:"item-header-left"},[e.createElementVNode("view",{class:"header-pic"},[e.createElementVNode("image",{src:Ie,class:"img"})]),e.createElementVNode("view",{class:"header-info"},[e.createElementVNode("view",{class:"name"},"张三"),e.createElementVNode("view",{class:"time"},"咨询师 | 认证作家")])]),e.createElementVNode("view",{class:"item-header-right"},[e.createElementVNode("image",{src:"new"==a.value?"/static/forum/new-logo.png":"old"==a.value?"/static/forum/old-logo.png":"/static/forum/future-logo.png",class:"img"},null,8,["src"])])])])],4),e.createElementVNode("view",{class:"info"},[e.createElementVNode("scroll-view",{"scroll-y":"true",class:"scroll-content","show-scrollbar":!1},[e.createElementVNode("view",{class:"info-box"}," 心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题。 心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题。 心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题。 心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题。 心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题。 心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题。 心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题。 心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题。 心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题。 心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题。 心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题。 心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题。 心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题。 心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题。 心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题。 心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题。 心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题。 心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题。 心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题。 心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题心理健康问题。 ")])])])}}},wc=X(Ec,[["__scopeId","data-v-8c971e86"]]),Nc=X({__name:"ask-question",setup(t){const n=()=>{uni.navigateBack({delta:1})},a=e.ref({}),r=e.ref(""),o=e.ref({id:null,label:"添加标签"}),l=e.ref(null),c=async()=>{let e=await((e,t={})=>_.post("/api/answer/answer/saveAnswer",e,t))(a.value);i("log","at pages/forum/write/ask-question/ask-question.vue:96",e),0==e.code&&uni.showToast({title:"发布成功",icon:"success",success(e){uni.navigateBack()}})},d=e.ref(1),u=e.ref(1),m=()=>{l.value.open()},h=()=>{l.value.close()},p=()=>{l.value.close(),o.value={id:1,label:"天气不错"}};return(t,i)=>{const g=s(e.resolveDynamicComponent("uni-icons"),Q),y=s(e.resolveDynamicComponent("uni-nav-bar"),Se),f=s(e.resolveDynamicComponent("uni-popup"),Qe);return e.openBlock(),e.createElementBlock("view",{class:"ask-question-box"},[e.createVNode(y,{backgroundColor:"#F4F6F8",border:!1,title:"提问题",class:"header-bar",statusBar:!0,fixed:""},{left:e.withCtx((()=>[e.createVNode(g,{type:"left",size:"24",onClick:n})])),right:e.withCtx((()=>[e.createElementVNode("view",{class:"right",onClick:c}," 发布 ")])),_:1}),e.createElementVNode("view",{class:"question-content"},[e.createElementVNode("view",{class:"question-title"},[e.withDirectives(e.createElementVNode("input",{class:"uni-input",maxlength:"25",placeholder:"请说出您的问题（5-25字）","placeholder-class":"placeholder-title","onUpdate:modelValue":i[0]||(i[0]=e=>a.value.title=e)},null,512),[[e.vModelText,a.value.title]])]),e.createElementVNode("view",{class:"content"},[e.withDirectives(e.createElementVNode("textarea",{class:"uni-textarea","onUpdate:modelValue":i[1]||(i[1]=e=>a.value.content=e),placeholder:"示例：25岁女孩，近期情绪很焦虑，怎么去缓解？\r\n包含年龄、性别信息\r\n明确具体困扰与症状，以便得到更专业解答？","placeholder-class":"placeholder-content",maxlength:"1000"},null,512),[[e.vModelText,a.value.content]]),e.createElementVNode("view",{class:"char-count"},e.toDisplayString(r.value.length)+"/1000",1)])]),e.createElementVNode("view",{class:"question-tag"},[e.createElementVNode("view",{class:"tag-content",onClick:m},[e.createElementVNode("image",{src:"/static/forum/tag.png",class:"img"}),e.createElementVNode("text",{class:"txt"},e.toDisplayString(o.value.label),1)])]),e.createVNode(f,{class:"tag-popup",ref_key:"tagPopupRef",ref:l,type:"bottom","background-color":"#fff","border-radius":"24rpx 24rpx 0rpx 0rpx","is-mask-click":!1},{default:e.withCtx((()=>[e.createElementVNode("view",{class:"tag-header"},[e.createElementVNode("view",{class:"tag-header-content"},[e.createElementVNode("view",{class:"cancel",onClick:h},"取消"),e.createElementVNode("view",{class:"title"},"选择标签"),e.createElementVNode("view",{class:"confirm",onClick:p},"确认")])]),e.createElementVNode("view",{class:"tag-content"},[e.createElementVNode("view",{class:"tag-left"},[e.createElementVNode("scroll-view",{"scroll-y":"true",class:"scroll-content","show-scrollbar":!1},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(20,(t=>e.createElementVNode("view",{class:e.normalizeClass(["tag-item",d.value==t?"active":""]),key:t,onClick:e=>(e=>{d.value!=e&&(d.value=e)})(t)}," 健康 ",10,["onClick"]))),64))])]),e.createElementVNode("view",{class:"tag-right"},[e.createElementVNode("scroll-view",{"scroll-y":"true",class:"scroll-content","show-scrollbar":!1},[e.createElementVNode("view",{class:"tag-right-content"},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(20,(t=>e.createElementVNode("text",{class:e.normalizeClass(["content-item",u.value==t?"active":""]),key:t,onClick:e=>(e=>{u.value!=e&&(u.value=e)})(t)}," 天气很好 ",10,["onClick"]))),64))])])])])])),_:1},512)])}}},[["__scopeId","data-v-49fca38e"]]),kc="/static/forum/upload-image.svg",bc=X({__name:"send-dynamics",setup(t){const n=()=>{uni.navigateBack({delta:1})},a=e.ref(""),r=e.ref(""),o=e.ref({id:null,label:"添加话题"}),l=e.ref([]),c=()=>{uni.chooseImage({count:1,success:function(e){l.value.push(e.tempFilePaths[0]),uni.uploadFile({url:"https://ceshi.maimiaoqingsu.com/api/common/upload",filePath:e.tempFilePaths[0],name:"file",header:{token:uni.getStorageSync("token")},success:e=>{i("log","at pages/forum/write/send-dynamics/send-dynamics.vue:78",JSON.parse(e.data)),r.value=JSON.parse(e.data).data.url}})}})},d=()=>{uni.navigateTo({url:"/pages/forum/write/choose-topic/choose-topic"})},u=async()=>{let e=await((e,t={})=>_.post("/api/article/article/saveArticle",e,t))({content:a.value,imageUrl:r.value});uni.showToast({title:"发布成功",icon:"none",duration:2e3}),i("log","at pages/forum/write/send-dynamics/send-dynamics.vue:107",e)};return(t,i)=>{const r=s(e.resolveDynamicComponent("uni-icons"),Q),m=s(e.resolveDynamicComponent("uni-nav-bar"),Se);return e.openBlock(),e.createElementBlock("view",{class:"send-dynamics-box"},[e.createVNode(m,{backgroundColor:"#F4F6F8",border:!1,title:"发动态",class:"header-bar",statusBar:!0,fixed:""},{left:e.withCtx((()=>[e.createVNode(r,{type:"left",size:"24",onClick:n})])),right:e.withCtx((()=>[e.createElementVNode("view",{class:"right",onClick:u}," 发布 ")])),_:1}),e.createElementVNode("view",{class:"question-content"},[e.createElementVNode("view",{class:"content"},[e.withDirectives(e.createElementVNode("textarea",{class:"uni-textarea",placeholder:"分享您此刻的心情，随时记录","placeholder-class":"placeholder-content",maxlength:"1000","onUpdate:modelValue":i[0]||(i[0]=e=>a.value=e)},null,512),[[e.vModelText,a.value]])])]),e.createElementVNode("view",{class:"upload-image"},[e.createElementVNode("view",{class:"upload-image-content"},[e.createElementVNode("view",{class:"uploadImageLogo"},[e.createElementVNode("image",{src:kc,class:"image",onClick:c})]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.value,((t,i)=>(e.openBlock(),e.createElementBlock("view",{class:"upload-image-item",key:i},[e.createElementVNode("image",{src:t,class:"image"},null,8,["src"]),e.createElementVNode("view",{class:"del-img",onClick:e=>(e=>{l.value.splice(e,1)})(i)},[e.createVNode(r,{type:"closeempty",size:"12",color:"#fff"})],8,["onClick"])])))),128))])]),e.createElementVNode("view",{class:"question-tag",onClick:d},[e.createElementVNode("view",{class:"tag-content",onClick:i[1]||(i[1]=(...e)=>t.openHandler&&t.openHandler(...e))},[e.createElementVNode("image",{src:"/static/forum/topic.png",class:"img"}),e.createElementVNode("text",{class:"txt"},e.toDisplayString(o.value.label),1)])])])}}},[["__scopeId","data-v-0f05cea5"]]),Cc=X({__name:"write-mailbox",setup(t){const i=()=>{uni.navigateBack({delta:1})},n=e.ref(""),a=e.ref([]),r=()=>{uni.chooseImage({count:1,success:function(e){a.value.push(e.tempFilePaths[0])}})};return(t,o)=>{const l=s(e.resolveDynamicComponent("uni-icons"),Q),c=s(e.resolveDynamicComponent("uni-nav-bar"),Se);return e.openBlock(),e.createElementBlock("view",{class:"write-mailbox-box"},[e.createVNode(c,{backgroundColor:"#F4F6F8",border:!1,title:"写给从前的一封信",class:"header-bar",statusBar:!0,fixed:""},{left:e.withCtx((()=>[e.createVNode(l,{type:"left",size:"24",onClick:i})])),right:e.withCtx((()=>[e.createElementVNode("view",{class:"right"}," 发布 ")])),_:1}),e.createElementVNode("view",{class:"question-content"},[e.createElementVNode("view",{class:"content"},[e.withDirectives(e.createElementVNode("textarea",{class:"uni-textarea",placeholder:"给从前的自己写一份信","placeholder-class":"placeholder-content",maxlength:"1000","onUpdate:modelValue":o[0]||(o[0]=e=>n.value=e)},null,512),[[e.vModelText,n.value]]),e.createElementVNode("view",{class:"char-count"},e.toDisplayString(n.value.length)+"/1000",1)])]),e.createElementVNode("view",{class:"upload-image"},[e.createElementVNode("view",{class:"upload-image-content"},[e.createElementVNode("view",{class:"uploadImageLogo"},[e.createElementVNode("image",{src:kc,class:"image",onClick:r})]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.value,((t,i)=>(e.openBlock(),e.createElementBlock("view",{class:"upload-image-item",key:i},[e.createElementVNode("image",{src:t,class:"image"},null,8,["src"]),e.createElementVNode("view",{class:"del-img",onClick:e=>(e=>{a.value.splice(e,1)})(i)},[e.createVNode(l,{type:"closeempty",size:"12",color:"#fff"})],8,["onClick"])])))),128))])])])}}},[["__scopeId","data-v-0aaad16c"]]);function Sc(e,t){return`${xc(e)} ${Vc(e,t)}`}function xc(e){e=Bc(e);const t=(e=new Date(e)).getFullYear(),i=e.getMonth()+1,s=e.getDate();return`${t}-${Tc(i)}-${Tc(s)}`}function Vc(e,t){e=Bc(e);const i=(e=new Date(e)).getHours(),s=e.getMinutes(),n=e.getSeconds();return t?`${Tc(i)}:${Tc(s)}`:`${Tc(i)}:${Tc(s)}:${Tc(n)}`}function Tc(e){return e<10&&(e=`0${e}`),e}function Ac(e){return e?"00:00":"00:00:00"}function _c(e,t){return(e=new Date(Bc(e)))<=(t=new Date(Bc(t)))}function Ic(e){return e.match(/((19|20)\d{2})(-|\/)\d{1,2}(-|\/)\d{1,2}/g)}const Dc=/^\d{4}-(0?[1-9]|1[012])-(0?[1-9]|[12][0-9]|3[01])( [0-5]?[0-9]:[0-5]?[0-9](:[0-5]?[0-9])?)?$/;function Bc(e){return"string"==typeof e&&Dc.test(e)&&(e=e.replace(/-/g,"/")),e}const Rc=X({props:{weeks:{type:Object,default:()=>({})},calendar:{type:Object,default:()=>({})},selected:{type:Array,default:()=>[]},checkHover:{type:Boolean,default:!1}},methods:{choiceDate(e){this.$emit("change",e)},handleMousemove(e){this.$emit("handleMouse",e)}}},[["render",function(t,i,s,n,a,r){return e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["uni-calendar-item__weeks-box",{"uni-calendar-item--disable":s.weeks.disable,"uni-calendar-item--before-checked-x":s.weeks.beforeMultiple,"uni-calendar-item--multiple":s.weeks.multiple,"uni-calendar-item--after-checked-x":s.weeks.afterMultiple}]),onClick:i[0]||(i[0]=e=>r.choiceDate(s.weeks)),onMouseenter:i[1]||(i[1]=e=>r.handleMousemove(s.weeks))},[e.createElementVNode("view",{class:e.normalizeClass(["uni-calendar-item__weeks-box-item",{"uni-calendar-item--checked":s.calendar.fullDate===s.weeks.fullDate&&(s.calendar.userChecked||!s.checkHover),"uni-calendar-item--checked-range-text":s.checkHover,"uni-calendar-item--before-checked":s.weeks.beforeMultiple,"uni-calendar-item--multiple":s.weeks.multiple,"uni-calendar-item--after-checked":s.weeks.afterMultiple,"uni-calendar-item--disable":s.weeks.disable}])},[s.selected&&s.weeks.extraInfo?(e.openBlock(),e.createElementBlock("text",{key:0,class:"uni-calendar-item__weeks-box-circle"})):e.createCommentVNode("",!0),e.createElementVNode("text",{class:"uni-calendar-item__weeks-box-text uni-calendar-item__weeks-box-text-disable uni-calendar-item--checked-text"},e.toDisplayString(s.weeks.date),1)],2),e.createElementVNode("view",{class:e.normalizeClass({"uni-calendar-item--today":s.weeks.isToday})},null,2)],34)}],["__scopeId","data-v-cf8cb4f2"]]),Mc={en:{"uni-datetime-picker.selectDate":"select date","uni-datetime-picker.selectTime":"select time","uni-datetime-picker.selectDateTime":"select date and time","uni-datetime-picker.startDate":"start date","uni-datetime-picker.endDate":"end date","uni-datetime-picker.startTime":"start time","uni-datetime-picker.endTime":"end time","uni-datetime-picker.ok":"ok","uni-datetime-picker.clear":"clear","uni-datetime-picker.cancel":"cancel","uni-datetime-picker.year":"-","uni-datetime-picker.month":"","uni-calender.MON":"MON","uni-calender.TUE":"TUE","uni-calender.WED":"WED","uni-calender.THU":"THU","uni-calender.FRI":"FRI","uni-calender.SAT":"SAT","uni-calender.SUN":"SUN","uni-calender.confirm":"confirm"},"zh-Hans":{"uni-datetime-picker.selectDate":"选择日期","uni-datetime-picker.selectTime":"选择时间","uni-datetime-picker.selectDateTime":"选择日期时间","uni-datetime-picker.startDate":"开始日期","uni-datetime-picker.endDate":"结束日期","uni-datetime-picker.startTime":"开始时间","uni-datetime-picker.endTime":"结束时间","uni-datetime-picker.ok":"确定","uni-datetime-picker.clear":"清除","uni-datetime-picker.cancel":"取消","uni-datetime-picker.year":"年","uni-datetime-picker.month":"月","uni-calender.SUN":"日","uni-calender.MON":"一","uni-calender.TUE":"二","uni-calender.WED":"三","uni-calender.THU":"四","uni-calender.FRI":"五","uni-calender.SAT":"六","uni-calender.confirm":"确认"},"zh-Hant":{"uni-datetime-picker.selectDate":"選擇日期","uni-datetime-picker.selectTime":"選擇時間","uni-datetime-picker.selectDateTime":"選擇日期時間","uni-datetime-picker.startDate":"開始日期","uni-datetime-picker.endDate":"結束日期","uni-datetime-picker.startTime":"開始时间","uni-datetime-picker.endTime":"結束时间","uni-datetime-picker.ok":"確定","uni-datetime-picker.clear":"清除","uni-datetime-picker.cancel":"取消","uni-datetime-picker.year":"年","uni-datetime-picker.month":"月","uni-calender.SUN":"日","uni-calender.MON":"一","uni-calender.TUE":"二","uni-calender.WED":"三","uni-calender.THU":"四","uni-calender.FRI":"五","uni-calender.SAT":"六","uni-calender.confirm":"確認"}},{t:Pc}=ce(Mc),Oc={name:"UniDatetimePicker",data:()=>({indicatorStyle:"height: 50px;",visible:!1,fixNvueBug:{},dateShow:!0,timeShow:!0,title:"日期和时间",time:"",year:1920,month:0,day:0,hour:0,minute:0,second:0,startYear:1920,startMonth:1,startDay:1,startHour:0,startMinute:0,startSecond:0,endYear:2120,endMonth:12,endDay:31,endHour:23,endMinute:59,endSecond:59}),options:{virtualHost:!0},props:{type:{type:String,default:"datetime"},value:{type:[String,Number],default:""},modelValue:{type:[String,Number],default:""},start:{type:[Number,String],default:""},end:{type:[Number,String],default:""},returnType:{type:String,default:"string"},disabled:{type:[Boolean,String],default:!1},border:{type:[Boolean,String],default:!0},hideSecond:{type:[Boolean,String],default:!1}},watch:{modelValue:{handler(e){e?(this.parseValue(Bc(e)),this.initTime(!1)):(this.time="",this.parseValue(Date.now()))},immediate:!0},type:{handler(e){"date"===e?(this.dateShow=!0,this.timeShow=!1,this.title="日期"):"time"===e?(this.dateShow=!1,this.timeShow=!0,this.title="时间"):(this.dateShow=!0,this.timeShow=!0,this.title="日期和时间")},immediate:!0},start:{handler(e){this.parseDatetimeRange(Bc(e),"start")},immediate:!0},end:{handler(e){this.parseDatetimeRange(Bc(e),"end")},immediate:!0},months(e){this.checkValue("month",this.month,e)},days(e){this.checkValue("day",this.day,e)},hours(e){this.checkValue("hour",this.hour,e)},minutes(e){this.checkValue("minute",this.minute,e)},seconds(e){this.checkValue("second",this.second,e)}},computed:{years(){return this.getCurrentRange("year")},months(){return this.getCurrentRange("month")},days(){return this.getCurrentRange("day")},hours(){return this.getCurrentRange("hour")},minutes(){return this.getCurrentRange("minute")},seconds(){return this.getCurrentRange("second")},ymd(){return[this.year-this.minYear,this.month-this.minMonth,this.day-this.minDay]},hms(){return[this.hour-this.minHour,this.minute-this.minMinute,this.second-this.minSecond]},currentDateIsStart(){return this.year===this.startYear&&this.month===this.startMonth&&this.day===this.startDay},currentDateIsEnd(){return this.year===this.endYear&&this.month===this.endMonth&&this.day===this.endDay},minYear(){return this.startYear},maxYear(){return this.endYear},minMonth(){return this.year===this.startYear?this.startMonth:1},maxMonth(){return this.year===this.endYear?this.endMonth:12},minDay(){return this.year===this.startYear&&this.month===this.startMonth?this.startDay:1},maxDay(){return this.year===this.endYear&&this.month===this.endMonth?this.endDay:this.daysInMonth(this.year,this.month)},minHour(){return"datetime"===this.type?this.currentDateIsStart?this.startHour:0:"time"===this.type?this.startHour:void 0},maxHour(){return"datetime"===this.type?this.currentDateIsEnd?this.endHour:23:"time"===this.type?this.endHour:void 0},minMinute(){return"datetime"===this.type?this.currentDateIsStart&&this.hour===this.startHour?this.startMinute:0:"time"===this.type?this.hour===this.startHour?this.startMinute:0:void 0},maxMinute(){return"datetime"===this.type?this.currentDateIsEnd&&this.hour===this.endHour?this.endMinute:59:"time"===this.type?this.hour===this.endHour?this.endMinute:59:void 0},minSecond(){return"datetime"===this.type?this.currentDateIsStart&&this.hour===this.startHour&&this.minute===this.startMinute?this.startSecond:0:"time"===this.type?this.hour===this.startHour&&this.minute===this.startMinute?this.startSecond:0:void 0},maxSecond(){return"datetime"===this.type?this.currentDateIsEnd&&this.hour===this.endHour&&this.minute===this.endMinute?this.endSecond:59:"time"===this.type?this.hour===this.endHour&&this.minute===this.endMinute?this.endSecond:59:void 0},selectTimeText:()=>Pc("uni-datetime-picker.selectTime"),okText:()=>Pc("uni-datetime-picker.ok"),clearText:()=>Pc("uni-datetime-picker.clear"),cancelText:()=>Pc("uni-datetime-picker.cancel")},mounted(){},methods:{lessThanTen:e=>e<10?"0"+e:e,parseTimeType(e){if(e){let t=e.split(":");this.hour=Number(t[0]),this.minute=Number(t[1]),this.second=Number(t[2])}},initPickerValue(e){let t=null;e?t=this.compareValueWithStartAndEnd(e,this.start,this.end):(t=Date.now(),t=this.compareValueWithStartAndEnd(t,this.start,this.end)),this.parseValue(t)},compareValueWithStartAndEnd(e,t,i){let s=null;return e=this.superTimeStamp(e),t=this.superTimeStamp(t),i=this.superTimeStamp(i),s=t&&i?e<t?new Date(t):e>i?new Date(i):new Date(e):t&&!i?t<=e?new Date(e):new Date(t):!t&&i?e<=i?new Date(e):new Date(i):new Date(e),s},superTimeStamp(e){let t="";if("time"===this.type&&e&&"string"==typeof e){const e=new Date;t=e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate()+" "}return Number(e)&&(e=parseInt(e),t=0),this.createTimeStamp(t+e)},parseValue(e){if(e){if("time"===this.type&&"string"==typeof e)this.parseTimeType(e);else{let t=null;t=new Date(e),"time"!==this.type&&(this.year=t.getFullYear(),this.month=t.getMonth()+1,this.day=t.getDate()),"date"!==this.type&&(this.hour=t.getHours(),this.minute=t.getMinutes(),this.second=t.getSeconds())}this.hideSecond&&(this.second=0)}},parseDatetimeRange(e,t){if(!e)return"start"===t&&(this.startYear=1920,this.startMonth=1,this.startDay=1,this.startHour=0,this.startMinute=0,this.startSecond=0),void("end"===t&&(this.endYear=2120,this.endMonth=12,this.endDay=31,this.endHour=23,this.endMinute=59,this.endSecond=59));if("time"===this.type){const i=e.split(":");this[t+"Hour"]=Number(i[0]),this[t+"Minute"]=Number(i[1]),this[t+"Second"]=Number(i[2])}else{if(!e)return void("start"===t?this.startYear=this.year-60:this.endYear=this.year+60);Number(e)&&(e=parseInt(e));const i=/[0-9]:[0-9]/;"datetime"!==this.type||"end"!==t||"string"!=typeof e||i.test(e)||(e+=" 23:59:59");const s=new Date(e);this[t+"Year"]=s.getFullYear(),this[t+"Month"]=s.getMonth()+1,this[t+"Day"]=s.getDate(),"datetime"===this.type&&(this[t+"Hour"]=s.getHours(),this[t+"Minute"]=s.getMinutes(),this[t+"Second"]=s.getSeconds())}},getCurrentRange(e){const t=[];for(let i=this["min"+this.capitalize(e)];i<=this["max"+this.capitalize(e)];i++)t.push(i);return t},capitalize:e=>e.charAt(0).toUpperCase()+e.slice(1),checkValue(e,t,i){-1===i.indexOf(t)&&(this[e]=i[0])},daysInMonth:(e,t)=>new Date(e,t,0).getDate(),createTimeStamp(e){if(e)return"number"==typeof e?e:(e=e.replace(/-/g,"/"),"date"===this.type&&(e+=" 00:00:00"),Date.parse(e))},createDomSting(){const e=this.year+"-"+this.lessThanTen(this.month)+"-"+this.lessThanTen(this.day);let t=this.lessThanTen(this.hour)+":"+this.lessThanTen(this.minute);return this.hideSecond||(t=t+":"+this.lessThanTen(this.second)),"date"===this.type?e:"time"===this.type?t:e+" "+t},initTime(e=!0){this.time=this.createDomSting(),e&&("timestamp"===this.returnType&&"time"!==this.type?(this.$emit("change",this.createTimeStamp(this.time)),this.$emit("input",this.createTimeStamp(this.time)),this.$emit("update:modelValue",this.createTimeStamp(this.time))):(this.$emit("change",this.time),this.$emit("input",this.time),this.$emit("update:modelValue",this.time)))},bindDateChange(e){const t=e.detail.value;this.year=this.years[t[0]],this.month=this.months[t[1]],this.day=this.days[t[2]]},bindTimeChange(e){const t=e.detail.value;this.hour=this.hours[t[0]],this.minute=this.minutes[t[1]],this.second=this.seconds[t[2]]},initTimePicker(){if(this.disabled)return;const e=Bc(this.time);this.initPickerValue(e),this.visible=!this.visible},tiggerTimePicker(e){this.visible=!this.visible},clearTime(){this.time="",this.$emit("change",this.time),this.$emit("input",this.time),this.$emit("update:modelValue",this.time),this.tiggerTimePicker()},setTime(){this.initTime(),this.tiggerTimePicker()}}};const Lc=X(Oc,[["render",function(t,i,s,n,a,r){return e.openBlock(),e.createElementBlock("view",{class:"uni-datetime-picker"},[e.createElementVNode("view",{onClick:i[0]||(i[0]=(...e)=>r.initTimePicker&&r.initTimePicker(...e))},[e.renderSlot(t.$slots,"default",{},(()=>[e.createElementVNode("view",{class:e.normalizeClass(["uni-datetime-picker-timebox-pointer",{"uni-datetime-picker-disabled":s.disabled,"uni-datetime-picker-timebox":s.border}])},[e.createElementVNode("text",{class:"uni-datetime-picker-text"},e.toDisplayString(a.time),1),a.time?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-datetime-picker-time"},[e.createElementVNode("text",{class:"uni-datetime-picker-text"},e.toDisplayString(r.selectTimeText),1)]))],2)]),!0)]),a.visible?(e.openBlock(),e.createElementBlock("view",{key:0,id:"mask",class:"uni-datetime-picker-mask",onClick:i[1]||(i[1]=(...e)=>r.tiggerTimePicker&&r.tiggerTimePicker(...e))})):e.createCommentVNode("",!0),a.visible?(e.openBlock(),e.createElementBlock("view",{key:1,class:e.normalizeClass(["uni-datetime-picker-popup",[a.dateShow&&a.timeShow?"":"fix-nvue-height"]]),style:e.normalizeStyle(a.fixNvueBug)},[e.createElementVNode("view",{class:"uni-title"},[e.createElementVNode("text",{class:"uni-datetime-picker-text"},e.toDisplayString(r.selectTimeText),1)]),a.dateShow?(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-datetime-picker__container-box"},[e.createElementVNode("picker-view",{class:"uni-datetime-picker-view","indicator-style":a.indicatorStyle,value:r.ymd,onChange:i[2]||(i[2]=(...e)=>r.bindDateChange&&r.bindDateChange(...e))},[e.createElementVNode("picker-view-column",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.years,((t,i)=>(e.openBlock(),e.createElementBlock("view",{class:"uni-datetime-picker-item",key:i},[e.createElementVNode("text",{class:"uni-datetime-picker-item"},e.toDisplayString(r.lessThanTen(t)),1)])))),128))]),e.createElementVNode("picker-view-column",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.months,((t,i)=>(e.openBlock(),e.createElementBlock("view",{class:"uni-datetime-picker-item",key:i},[e.createElementVNode("text",{class:"uni-datetime-picker-item"},e.toDisplayString(r.lessThanTen(t)),1)])))),128))]),e.createElementVNode("picker-view-column",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.days,((t,i)=>(e.openBlock(),e.createElementBlock("view",{class:"uni-datetime-picker-item",key:i},[e.createElementVNode("text",{class:"uni-datetime-picker-item"},e.toDisplayString(r.lessThanTen(t)),1)])))),128))])],40,["indicator-style","value"]),e.createElementVNode("text",{class:"uni-datetime-picker-sign sign-left"},"-"),e.createElementVNode("text",{class:"uni-datetime-picker-sign sign-right"},"-")])):e.createCommentVNode("",!0),a.timeShow?(e.openBlock(),e.createElementBlock("view",{key:1,class:"uni-datetime-picker__container-box"},[e.createElementVNode("picker-view",{class:e.normalizeClass(["uni-datetime-picker-view",[s.hideSecond?"time-hide-second":""]]),"indicator-style":a.indicatorStyle,value:r.hms,onChange:i[3]||(i[3]=(...e)=>r.bindTimeChange&&r.bindTimeChange(...e))},[e.createElementVNode("picker-view-column",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.hours,((t,i)=>(e.openBlock(),e.createElementBlock("view",{class:"uni-datetime-picker-item",key:i},[e.createElementVNode("text",{class:"uni-datetime-picker-item"},e.toDisplayString(r.lessThanTen(t)),1)])))),128))]),e.createElementVNode("picker-view-column",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.minutes,((t,i)=>(e.openBlock(),e.createElementBlock("view",{class:"uni-datetime-picker-item",key:i},[e.createElementVNode("text",{class:"uni-datetime-picker-item"},e.toDisplayString(r.lessThanTen(t)),1)])))),128))]),s.hideSecond?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("picker-view-column",{key:0},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.seconds,((t,i)=>(e.openBlock(),e.createElementBlock("view",{class:"uni-datetime-picker-item",key:i},[e.createElementVNode("text",{class:"uni-datetime-picker-item"},e.toDisplayString(r.lessThanTen(t)),1)])))),128))]))],42,["indicator-style","value"]),e.createElementVNode("text",{class:e.normalizeClass(["uni-datetime-picker-sign",[s.hideSecond?"sign-center":"sign-left"]])},":",2),s.hideSecond?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("text",{key:0,class:"uni-datetime-picker-sign sign-right"},":"))])):e.createCommentVNode("",!0),e.createElementVNode("view",{class:"uni-datetime-picker-btn"},[e.createElementVNode("view",{onClick:i[4]||(i[4]=(...e)=>r.clearTime&&r.clearTime(...e))},[e.createElementVNode("text",{class:"uni-datetime-picker-btn-text"},e.toDisplayString(r.clearText),1)]),e.createElementVNode("view",{class:"uni-datetime-picker-btn-group"},[e.createElementVNode("view",{class:"uni-datetime-picker-cancel",onClick:i[5]||(i[5]=(...e)=>r.tiggerTimePicker&&r.tiggerTimePicker(...e))},[e.createElementVNode("text",{class:"uni-datetime-picker-btn-text"},e.toDisplayString(r.cancelText),1)]),e.createElementVNode("view",{onClick:i[6]||(i[6]=(...e)=>r.setTime&&r.setTime(...e))},[e.createElementVNode("text",{class:"uni-datetime-picker-btn-text"},e.toDisplayString(r.okText),1)])])])],6)):e.createCommentVNode("",!0)])}],["__scopeId","data-v-4032e438"]]),{t:Fc}=ce(Mc),Uc={components:{calendarItem:Rc,timePicker:Lc},options:{virtualHost:!0},props:{date:{type:String,default:""},defTime:{type:[String,Object],default:""},selectableTimes:{type:[Object],default:()=>({})},selected:{type:Array,default:()=>[]},startDate:{type:String,default:""},endDate:{type:String,default:""},startPlaceholder:{type:String,default:""},endPlaceholder:{type:String,default:""},range:{type:Boolean,default:!1},hasTime:{type:Boolean,default:!1},insert:{type:Boolean,default:!0},showMonth:{type:Boolean,default:!0},clearDate:{type:Boolean,default:!0},checkHover:{type:Boolean,default:!0},hideSecond:{type:[Boolean],default:!1},pleStatus:{type:Object,default:()=>({before:"",after:"",data:[],fulldate:""})},defaultValue:{type:[String,Object,Array],default:""}},data:()=>({show:!1,weeks:[],calendar:{},nowDate:{},aniMaskShow:!1,firstEnter:!0,time:"",timeRange:{startTime:"",endTime:""},tempSingleDate:"",tempRange:{before:"",after:""}}),watch:{date:{immediate:!0,handler(e){this.range||(this.tempSingleDate=e,setTimeout((()=>{this.init(e)}),100))}},defTime:{immediate:!0,handler(e){this.range?(this.timeRange.startTime=e.start,this.timeRange.endTime=e.end):this.time=e}},startDate(e){this.cale&&(this.cale.setStartDate(e),this.cale.setDate(this.nowDate.fullDate),this.weeks=this.cale.weeks)},endDate(e){this.cale&&(this.cale.setEndDate(e),this.cale.setDate(this.nowDate.fullDate),this.weeks=this.cale.weeks)},selected(e){this.cale&&(this.cale.setSelectInfo(this.nowDate.fullDate,e),this.weeks=this.cale.weeks)},pleStatus:{immediate:!0,handler(e){const{before:t,after:i,fulldate:s,which:n}=e;this.tempRange.before=t,this.tempRange.after=i,setTimeout((()=>{if(s)if(this.cale.setHoverMultiple(s),t&&i){if(this.cale.lastHover=!0,this.rangeWithinMonth(i,t))return;this.setDate(t)}else this.cale.setMultiple(s),this.setDate(this.nowDate.fullDate),this.calendar.fullDate="",this.cale.lastHover=!1;else{if(!this.cale)return;this.cale.setDefaultMultiple(t,i),"left"===n&&t?(this.setDate(t),this.weeks=this.cale.weeks):i&&(this.setDate(i),this.weeks=this.cale.weeks),this.cale.lastHover=!0}}),16)}}},computed:{timepickerStartTime(){return(this.range?this.tempRange.before:this.calendar.fullDate)===this.startDate?this.selectableTimes.start:""},timepickerEndTime(){return(this.range?this.tempRange.after:this.calendar.fullDate)===this.endDate?this.selectableTimes.end:""},selectDateText:()=>Fc("uni-datetime-picker.selectDate"),startDateText(){return this.startPlaceholder||Fc("uni-datetime-picker.startDate")},endDateText(){return this.endPlaceholder||Fc("uni-datetime-picker.endDate")},okText:()=>Fc("uni-datetime-picker.ok"),yearText:()=>Fc("uni-datetime-picker.year"),monthText:()=>Fc("uni-datetime-picker.month"),MONText:()=>Fc("uni-calender.MON"),TUEText:()=>Fc("uni-calender.TUE"),WEDText:()=>Fc("uni-calender.WED"),THUText:()=>Fc("uni-calender.THU"),FRIText:()=>Fc("uni-calender.FRI"),SATText:()=>Fc("uni-calender.SAT"),SUNText:()=>Fc("uni-calender.SUN"),confirmText:()=>Fc("uni-calender.confirm")},created(){this.cale=new class{constructor({selected:e,startDate:t,endDate:i,range:s}={}){this.date=this.getDateObj(new Date),this.selected=e||[],this.startDate=t,this.endDate=i,this.range=s,this.cleanMultipleStatus(),this.weeks={},this.lastHover=!1}setDate(e){const t=this.getDateObj(e);this.getWeeks(t.fullDate)}cleanMultipleStatus(){this.multipleStatus={before:"",after:"",data:[]}}setStartDate(e){this.startDate=e}setEndDate(e){this.endDate=e}getPreMonthObj(e){e=Bc(e);const t=(e=new Date(e)).getMonth();e.setMonth(t-1);const i=e.getMonth();return 0!==t&&i-t==0&&e.setMonth(i-1),this.getDateObj(e)}getNextMonthObj(e){e=Bc(e);const t=(e=new Date(e)).getMonth();e.setMonth(t+1);const i=e.getMonth();return i-t>1&&e.setMonth(i-1),this.getDateObj(e)}getDateObj(e){return e=Bc(e),{fullDate:xc(e=new Date(e)),year:e.getFullYear(),month:Tc(e.getMonth()+1),date:Tc(e.getDate()),day:e.getDay()}}getPreMonthDays(e,t){const i=[];for(let s=e-1;s>=0;s--){const e=t.month-1;i.push({date:new Date(t.year,e,-s).getDate(),month:e,disable:!0})}return i}getCurrentMonthDays(e,t){const i=[],s=this.date.fullDate;for(let n=1;n<=e;n++){const e=`${t.year}-${t.month}-${Tc(n)}`,a=s===e,r=this.selected&&this.selected.find((t=>{if(this.dateEqual(e,t.date))return t}));this.startDate&&_c(this.startDate,e),this.endDate&&_c(e,this.endDate);let o=this.multipleStatus.data,l=-1;this.range&&o&&(l=o.findIndex((t=>this.dateEqual(t,e))));const c=-1!==l;i.push({fullDate:e,year:t.year,date:n,multiple:!!this.range&&c,beforeMultiple:this.isLogicBefore(e,this.multipleStatus.before,this.multipleStatus.after),afterMultiple:this.isLogicAfter(e,this.multipleStatus.before,this.multipleStatus.after),month:t.month,disable:this.startDate&&!_c(this.startDate,e)||this.endDate&&!_c(e,this.endDate),isToday:a,userChecked:!1,extraInfo:r})}return i}_getNextMonthDays(e,t){const i=[],s=t.month+1;for(let n=1;n<=e;n++)i.push({date:n,month:s,disable:!0});return i}getInfo(e){e||(e=new Date);return this.calendar.find((t=>t.fullDate===this.getDateObj(e).fullDate))||this.getDateObj(e)}dateEqual(e,t){return e=new Date(Bc(e)),t=new Date(Bc(t)),e.valueOf()===t.valueOf()}isLogicBefore(e,t,i){let s=t;return t&&i&&(s=_c(t,i)?t:i),this.dateEqual(s,e)}isLogicAfter(e,t,i){let s=i;return t&&i&&(s=_c(t,i)?i:t),this.dateEqual(s,e)}geDateAll(e,t){var i=[],s=e.split("-"),n=t.split("-"),a=new Date;a.setFullYear(s[0],s[1]-1,s[2]);var r=new Date;r.setFullYear(n[0],n[1]-1,n[2]);for(var o=a.getTime()-864e5,l=r.getTime()-864e5,c=o;c<=l;)c+=864e5,i.push(this.getDateObj(new Date(parseInt(c))).fullDate);return i}setMultiple(e){if(!this.range)return;let{before:t,after:i}=this.multipleStatus;if(t&&i){if(!this.lastHover)return void(this.lastHover=!0);this.multipleStatus.before=e,this.multipleStatus.after="",this.multipleStatus.data=[],this.multipleStatus.fulldate="",this.lastHover=!1}else t?(this.multipleStatus.after=e,_c(this.multipleStatus.before,this.multipleStatus.after)?this.multipleStatus.data=this.geDateAll(this.multipleStatus.before,this.multipleStatus.after):this.multipleStatus.data=this.geDateAll(this.multipleStatus.after,this.multipleStatus.before),this.lastHover=!0):(this.multipleStatus.before=e,this.multipleStatus.after=void 0,this.lastHover=!1);this.getWeeks(e)}setHoverMultiple(e){if(!this.range||this.lastHover)return;const{before:t}=this.multipleStatus;t?(this.multipleStatus.after=e,_c(this.multipleStatus.before,this.multipleStatus.after)?this.multipleStatus.data=this.geDateAll(this.multipleStatus.before,this.multipleStatus.after):this.multipleStatus.data=this.geDateAll(this.multipleStatus.after,this.multipleStatus.before)):this.multipleStatus.before=e,this.getWeeks(e)}setDefaultMultiple(e,t){this.multipleStatus.before=e,this.multipleStatus.after=t,e&&t&&(_c(e,t)?(this.multipleStatus.data=this.geDateAll(e,t),this.getWeeks(t)):(this.multipleStatus.data=this.geDateAll(t,e),this.getWeeks(e)))}getWeeks(e){const{year:t,month:i}=this.getDateObj(e),s=new Date(t,i-1,1).getDay(),n=this.getPreMonthDays(s,this.getDateObj(e)),a=new Date(t,i,0).getDate(),r=42-s-a,o=[...n,...this.getCurrentMonthDays(a,this.getDateObj(e)),...this._getNextMonthDays(r,this.getDateObj(e))],l=new Array(6);for(let c=0;c<o.length;c++){const e=Math.floor(c/7);l[e]||(l[e]=new Array(7)),l[e][c%7]=o[c]}this.calendar=o,this.weeks=l}}({selected:this.selected,startDate:this.startDate,endDate:this.endDate,range:this.range}),this.init(this.date)},methods:{leaveCale(){this.firstEnter=!0},handleMouse(e){if(e.disable)return;if(this.cale.lastHover)return;let{before:t,after:i}=this.cale.multipleStatus;t&&(this.calendar=e,this.cale.setHoverMultiple(this.calendar.fullDate),this.weeks=this.cale.weeks,this.firstEnter&&(this.$emit("firstEnterCale",this.cale.multipleStatus),this.firstEnter=!1))},rangeWithinMonth(e,t){const[i,s]=e.split("-"),[n,a]=t.split("-");return i===n&&s===a},maskClick(){this.close(),this.$emit("maskClose")},clearCalender(){this.range?(this.timeRange.startTime="",this.timeRange.endTime="",this.tempRange.before="",this.tempRange.after="",this.cale.multipleStatus.before="",this.cale.multipleStatus.after="",this.cale.multipleStatus.data=[],this.cale.lastHover=!1):(this.time="",this.tempSingleDate=""),this.calendar.fullDate="",this.setDate(new Date)},bindDateChange(e){const t=e.detail.value+"-1";this.setDate(t)},init(e){if(this.cale&&(this.cale.setDate(e||new Date),this.weeks=this.cale.weeks,this.nowDate=this.cale.getInfo(e),this.calendar={...this.nowDate},!e&&(this.calendar.fullDate="",this.defaultValue&&!this.range))){const e=new Date(this.defaultValue),t=xc(e),i=e.getFullYear(),s=e.getMonth()+1,n=e.getDate(),a=e.getDay();this.calendar={fullDate:t,year:i,month:s,date:n,day:a},this.tempSingleDate=t,this.time=Vc(e,this.hideSecond)}},open(){this.clearDate&&!this.insert&&(this.cale.cleanMultipleStatus(),this.init(this.date)),this.show=!0,this.$nextTick((()=>{setTimeout((()=>{this.aniMaskShow=!0}),50)}))},close(){this.aniMaskShow=!1,this.$nextTick((()=>{setTimeout((()=>{this.show=!1,this.$emit("close")}),300)}))},confirm(){this.setEmit("confirm"),this.close()},change(e){(this.insert||e)&&this.setEmit("change")},monthSwitch(){let{year:e,month:t}=this.nowDate;this.$emit("monthSwitch",{year:e,month:Number(t)})},setEmit(e){this.range||(this.calendar.fullDate||(this.calendar=this.cale.getInfo(new Date),this.tempSingleDate=this.calendar.fullDate),this.hasTime&&!this.time&&(this.time=Vc(new Date,this.hideSecond)));let{year:t,month:i,date:s,fullDate:n,extraInfo:a}=this.calendar;this.$emit(e,{range:this.cale.multipleStatus,year:t,month:i,date:s,time:this.time,timeRange:this.timeRange,fulldate:n,extraInfo:a||{}})},choiceDate(e){if(e.disable)return;this.calendar=e,this.calendar.userChecked=!0,this.cale.setMultiple(this.calendar.fullDate,!0),this.weeks=this.cale.weeks,this.tempSingleDate=this.calendar.fullDate;const t=new Date(this.cale.multipleStatus.before).getTime(),i=new Date(this.cale.multipleStatus.after).getTime();t>i&&i?(this.tempRange.before=this.cale.multipleStatus.after,this.tempRange.after=this.cale.multipleStatus.before):(this.tempRange.before=this.cale.multipleStatus.before,this.tempRange.after=this.cale.multipleStatus.after),this.change(!0)},changeMonth(e){let t;"pre"===e?t=this.cale.getPreMonthObj(this.nowDate.fullDate).fullDate:"next"===e&&(t=this.cale.getNextMonthObj(this.nowDate.fullDate).fullDate),this.setDate(t),this.monthSwitch()},setDate(e){this.cale.setDate(e),this.weeks=this.cale.weeks,this.nowDate=this.cale.getInfo(e)}}};const zc={name:"UniDatetimePicker",options:{virtualHost:!0},components:{Calendar:X(Uc,[["render",function(t,i,n,a,r,o){const l=e.resolveComponent("calendar-item"),c=e.resolveComponent("time-picker"),d=s(e.resolveDynamicComponent("uni-icons"),Q);return e.openBlock(),e.createElementBlock("view",{class:"uni-calendar",onMouseleave:i[9]||(i[9]=(...e)=>o.leaveCale&&o.leaveCale(...e))},[!n.insert&&r.show?(e.openBlock(),e.createElementBlock("view",{key:0,class:e.normalizeClass(["uni-calendar__mask",{"uni-calendar--mask-show":r.aniMaskShow}]),onClick:i[0]||(i[0]=(...e)=>o.maskClick&&o.maskClick(...e))},null,2)):e.createCommentVNode("",!0),n.insert||r.show?(e.openBlock(),e.createElementBlock("view",{key:1,class:e.normalizeClass(["uni-calendar__content",{"uni-calendar--fixed":!n.insert,"uni-calendar--ani-show":r.aniMaskShow,"uni-calendar__content-mobile":r.aniMaskShow}])},[e.createElementVNode("view",{class:e.normalizeClass(["uni-calendar__header",{"uni-calendar__header-mobile":!n.insert}])},[e.createElementVNode("view",{class:"uni-calendar__header-btn-box",onClick:i[1]||(i[1]=e.withModifiers((e=>o.changeMonth("pre")),["stop"]))},[e.createElementVNode("view",{class:"uni-calendar__header-btn uni-calendar--left"})]),e.createElementVNode("picker",{mode:"date",value:n.date,fields:"month",onChange:i[2]||(i[2]=(...e)=>o.bindDateChange&&o.bindDateChange(...e))},[e.createElementVNode("text",{class:"uni-calendar__header-text"},e.toDisplayString((r.nowDate.year||"")+o.yearText+(r.nowDate.month||"")+o.monthText),1)],40,["value"]),e.createElementVNode("view",{class:"uni-calendar__header-btn-box",onClick:i[3]||(i[3]=e.withModifiers((e=>o.changeMonth("next")),["stop"]))},[e.createElementVNode("view",{class:"uni-calendar__header-btn uni-calendar--right"})]),n.insert?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("view",{key:0,class:"dialog-close",onClick:i[4]||(i[4]=(...e)=>o.maskClick&&o.maskClick(...e))},[e.createElementVNode("view",{class:"dialog-close-plus","data-id":"close"}),e.createElementVNode("view",{class:"dialog-close-plus dialog-close-rotate","data-id":"close"})]))],2),e.createElementVNode("view",{class:"uni-calendar__box"},[n.showMonth?(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-calendar__box-bg"},[e.createElementVNode("text",{class:"uni-calendar__box-bg-text"},e.toDisplayString(r.nowDate.month),1)])):e.createCommentVNode("",!0),e.createElementVNode("view",{class:"uni-calendar__weeks",style:{"padding-bottom":"7px"}},[e.createElementVNode("view",{class:"uni-calendar__weeks-day"},[e.createElementVNode("text",{class:"uni-calendar__weeks-day-text"},e.toDisplayString(o.SUNText),1)]),e.createElementVNode("view",{class:"uni-calendar__weeks-day"},[e.createElementVNode("text",{class:"uni-calendar__weeks-day-text"},e.toDisplayString(o.MONText),1)]),e.createElementVNode("view",{class:"uni-calendar__weeks-day"},[e.createElementVNode("text",{class:"uni-calendar__weeks-day-text"},e.toDisplayString(o.TUEText),1)]),e.createElementVNode("view",{class:"uni-calendar__weeks-day"},[e.createElementVNode("text",{class:"uni-calendar__weeks-day-text"},e.toDisplayString(o.WEDText),1)]),e.createElementVNode("view",{class:"uni-calendar__weeks-day"},[e.createElementVNode("text",{class:"uni-calendar__weeks-day-text"},e.toDisplayString(o.THUText),1)]),e.createElementVNode("view",{class:"uni-calendar__weeks-day"},[e.createElementVNode("text",{class:"uni-calendar__weeks-day-text"},e.toDisplayString(o.FRIText),1)]),e.createElementVNode("view",{class:"uni-calendar__weeks-day"},[e.createElementVNode("text",{class:"uni-calendar__weeks-day-text"},e.toDisplayString(o.SATText),1)])]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.weeks,((t,i)=>(e.openBlock(),e.createElementBlock("view",{class:"uni-calendar__weeks",key:i},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t,((t,i)=>(e.openBlock(),e.createElementBlock("view",{class:"uni-calendar__weeks-item",key:i},[e.createVNode(l,{class:"uni-calendar-item--hook",weeks:t,calendar:r.calendar,selected:n.selected,checkHover:n.range,onChange:o.choiceDate,onHandleMouse:o.handleMouse},null,8,["weeks","calendar","selected","checkHover","onChange","onHandleMouse"])])))),128))])))),128))]),n.insert||n.range||!n.hasTime?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-date-changed uni-calendar--fixed-top",style:{padding:"0 80px"}},[e.createElementVNode("view",{class:"uni-date-changed--time-date"},e.toDisplayString(r.tempSingleDate?r.tempSingleDate:o.selectDateText),1),e.createVNode(c,{type:"time",start:o.timepickerStartTime,end:o.timepickerEndTime,modelValue:r.time,"onUpdate:modelValue":i[5]||(i[5]=e=>r.time=e),disabled:!r.tempSingleDate,border:!1,"hide-second":n.hideSecond,class:"time-picker-style"},null,8,["start","end","modelValue","disabled","hide-second"])])),!n.insert&&n.range&&n.hasTime?(e.openBlock(),e.createElementBlock("view",{key:1,class:"uni-date-changed uni-calendar--fixed-top"},[e.createElementVNode("view",{class:"uni-date-changed--time-start"},[e.createElementVNode("view",{class:"uni-date-changed--time-date"},e.toDisplayString(r.tempRange.before?r.tempRange.before:o.startDateText),1),e.createVNode(c,{type:"time",start:o.timepickerStartTime,modelValue:r.timeRange.startTime,"onUpdate:modelValue":i[6]||(i[6]=e=>r.timeRange.startTime=e),border:!1,"hide-second":n.hideSecond,disabled:!r.tempRange.before,class:"time-picker-style"},null,8,["start","modelValue","hide-second","disabled"])]),e.createElementVNode("view",{style:{"line-height":"50px"}},[e.createVNode(d,{type:"arrowthinright",color:"#999"})]),e.createElementVNode("view",{class:"uni-date-changed--time-end"},[e.createElementVNode("view",{class:"uni-date-changed--time-date"},e.toDisplayString(r.tempRange.after?r.tempRange.after:o.endDateText),1),e.createVNode(c,{type:"time",end:o.timepickerEndTime,modelValue:r.timeRange.endTime,"onUpdate:modelValue":i[7]||(i[7]=e=>r.timeRange.endTime=e),border:!1,"hide-second":n.hideSecond,disabled:!r.tempRange.after,class:"time-picker-style"},null,8,["end","modelValue","hide-second","disabled"])])])):e.createCommentVNode("",!0),n.insert?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("view",{key:2,class:"uni-date-changed uni-date-btn--ok"},[e.createElementVNode("view",{class:"uni-datetime-picker--btn",onClick:i[8]||(i[8]=(...e)=>o.confirm&&o.confirm(...e))},e.toDisplayString(o.confirmText),1)]))],2)):e.createCommentVNode("",!0)],32)}],["__scopeId","data-v-f219fc6e"]]),TimePicker:Lc},data:()=>({isRange:!1,hasTime:!1,displayValue:"",inputDate:"",calendarDate:"",pickerTime:"",calendarRange:{startDate:"",startTime:"",endDate:"",endTime:""},displayRangeValue:{startDate:"",endDate:""},tempRange:{startDate:"",startTime:"",endDate:"",endTime:""},startMultipleStatus:{before:"",after:"",data:[],fulldate:""},endMultipleStatus:{before:"",after:"",data:[],fulldate:""},pickerVisible:!1,pickerPositionStyle:null,isEmitValue:!1,isPhone:!1,isFirstShow:!0,i18nT:()=>{}}),props:{type:{type:String,default:"datetime"},value:{type:[String,Number,Array,Date],default:""},modelValue:{type:[String,Number,Array,Date],default:""},start:{type:[Number,String],default:""},end:{type:[Number,String],default:""},returnType:{type:String,default:"string"},placeholder:{type:String,default:""},startPlaceholder:{type:String,default:""},endPlaceholder:{type:String,default:""},rangeSeparator:{type:String,default:"-"},border:{type:[Boolean],default:!0},disabled:{type:[Boolean],default:!1},clearIcon:{type:[Boolean],default:!0},hideSecond:{type:[Boolean],default:!1},defaultValue:{type:[String,Object,Array],default:""}},watch:{type:{immediate:!0,handler(e){this.hasTime=-1!==e.indexOf("time"),this.isRange=-1!==e.indexOf("range")}},modelValue:{immediate:!0,handler(e){this.isEmitValue?this.isEmitValue=!1:this.initPicker(e)}},start:{immediate:!0,handler(e){e&&(this.calendarRange.startDate=xc(e),this.hasTime&&(this.calendarRange.startTime=Vc(e)))}},end:{immediate:!0,handler(e){e&&(this.calendarRange.endDate=xc(e),this.hasTime&&(this.calendarRange.endTime=Vc(e,this.hideSecond)))}}},computed:{timepickerStartTime(){return(this.isRange?this.tempRange.startDate:this.inputDate)===this.calendarRange.startDate?this.calendarRange.startTime:""},timepickerEndTime(){return(this.isRange?this.tempRange.endDate:this.inputDate)===this.calendarRange.endDate?this.calendarRange.endTime:""},mobileCalendarTime(){const e={start:this.tempRange.startTime,end:this.tempRange.endTime};return this.isRange?e:this.pickerTime},mobSelectableTime(){return{start:this.calendarRange.startTime,end:this.calendarRange.endTime}},datePopupWidth(){return this.isRange?653:301},singlePlaceholderText(){return this.placeholder||("date"===this.type?this.selectDateText:this.selectDateTimeText)},startPlaceholderText(){return this.startPlaceholder||this.startDateText},endPlaceholderText(){return this.endPlaceholder||this.endDateText},selectDateText(){return this.i18nT("uni-datetime-picker.selectDate")},selectDateTimeText(){return this.i18nT("uni-datetime-picker.selectDateTime")},selectTimeText(){return this.i18nT("uni-datetime-picker.selectTime")},startDateText(){return this.startPlaceholder||this.i18nT("uni-datetime-picker.startDate")},startTimeText(){return this.i18nT("uni-datetime-picker.startTime")},endDateText(){return this.endPlaceholder||this.i18nT("uni-datetime-picker.endDate")},endTimeText(){return this.i18nT("uni-datetime-picker.endTime")},okText(){return this.i18nT("uni-datetime-picker.ok")},clearText(){return this.i18nT("uni-datetime-picker.clear")},showClearIcon(){return this.clearIcon&&!this.disabled&&(this.displayValue||this.displayRangeValue.startDate&&this.displayRangeValue.endDate)}},created(){this.initI18nT(),this.platform()},methods:{initI18nT(){const e=ce(Mc);this.i18nT=e.t},initPicker(e){if(!e&&!this.defaultValue||Array.isArray(e)&&!e.length)this.$nextTick((()=>{this.clear(!1)}));else if(Array.isArray(e)||this.isRange){const[t,i]=e;if(!t&&!i)return;const s=xc(t),n=Vc(t,this.hideSecond),a=xc(i),r=Vc(i,this.hideSecond),o=s,l=a;this.displayRangeValue.startDate=this.tempRange.startDate=o,this.displayRangeValue.endDate=this.tempRange.endDate=l,this.hasTime&&(this.displayRangeValue.startDate=`${s} ${n}`,this.displayRangeValue.endDate=`${a} ${r}`,this.tempRange.startTime=n,this.tempRange.endTime=r);const c={before:s,after:a};this.startMultipleStatus=Object.assign({},this.startMultipleStatus,c,{which:"right"}),this.endMultipleStatus=Object.assign({},this.endMultipleStatus,c,{which:"left"})}else e?(this.displayValue=this.inputDate=this.calendarDate=xc(e),this.hasTime&&(this.pickerTime=Vc(e,this.hideSecond),this.displayValue=`${this.displayValue} ${this.pickerTime}`)):this.defaultValue&&(this.inputDate=this.calendarDate=xc(this.defaultValue),this.hasTime&&(this.pickerTime=Vc(this.defaultValue,this.hideSecond)))},updateLeftCale(e){const t=this.$refs.left;t.cale.setHoverMultiple(e.after),t.setDate(this.$refs.left.nowDate.fullDate)},updateRightCale(e){const t=this.$refs.right;t.cale.setHoverMultiple(e.after),t.setDate(this.$refs.right.nowDate.fullDate)},platform(){if("undefined"!=typeof navigator)return void(this.isPhone=-1!==navigator.userAgent.toLowerCase().indexOf("mobile"));const{windowWidth:e}=uni.getSystemInfoSync();this.isPhone=e<=500,this.windowWidth=e},show(){if(this.$emit("show"),this.disabled)return;if(this.platform(),this.isPhone)return void setTimeout((()=>{this.$refs.mobile.open()}),0);this.pickerPositionStyle={top:"10px"};uni.createSelectorQuery().in(this).select(".uni-date-editor").boundingClientRect((e=>{this.windowWidth-e.left<this.datePopupWidth&&(this.pickerPositionStyle.right=0)})).exec(),setTimeout((()=>{if(this.pickerVisible=!this.pickerVisible,!this.isPhone&&this.isRange&&this.isFirstShow){this.isFirstShow=!1;const{startDate:e,endDate:t}=this.calendarRange;e&&t?this.diffDate(e,t)<30&&this.$refs.right.changeMonth("pre"):this.isPhone&&(this.$refs.right.cale.lastHover=!1)}}),50)},close(){setTimeout((()=>{this.pickerVisible=!1,this.$emit("maskClick",this.value),this.$refs.mobile&&this.$refs.mobile.close()}),20)},setEmit(e){"timestamp"!==this.returnType&&"date"!==this.returnType||(Array.isArray(e)?(this.hasTime||(e[0]=e[0]+" 00:00:00",e[1]=e[1]+" 00:00:00"),e[0]=this.createTimestamp(e[0]),e[1]=this.createTimestamp(e[1]),"date"===this.returnType&&(e[0]=new Date(e[0]),e[1]=new Date(e[1]))):(this.hasTime||(e+=" 00:00:00"),e=this.createTimestamp(e),"date"===this.returnType&&(e=new Date(e)))),this.$emit("update:modelValue",e),this.$emit("input",e),this.$emit("change",e),this.isEmitValue=!0},createTimestamp:e=>(e=Bc(e),Date.parse(new Date(e))),singleChange(e){this.calendarDate=this.inputDate=e.fulldate,this.hasTime||this.confirmSingleChange()},confirmSingleChange(){if(!Ic(this.inputDate)){const e=new Date;this.calendarDate=this.inputDate=xc(e),this.pickerTime=Vc(e,this.hideSecond)}let e,t,i=!1;if(this.start){let s=this.start;"number"==typeof this.start&&(s=Sc(this.start,this.hideSecond)),[e,t]=s.split(" "),this.start&&!_c(e,this.inputDate)&&(i=!0,this.inputDate=e)}let s,n,a=!1;if(this.end){let e=this.end;"number"==typeof this.end&&(e=Sc(this.end,this.hideSecond)),[s,n]=e.split(" "),this.end&&!_c(this.inputDate,s)&&(a=!0,this.inputDate=s)}this.hasTime?(i&&(this.pickerTime=t||Ac(this.hideSecond)),a&&(this.pickerTime=n||Ac(this.hideSecond)),this.pickerTime||(this.pickerTime=Vc(Date.now(),this.hideSecond)),this.displayValue=`${this.inputDate} ${this.pickerTime}`):this.displayValue=this.inputDate,this.setEmit(this.displayValue),this.pickerVisible=!1},leftChange(e){const{before:t,after:i}=e.range;this.rangeChange(t,i);const s={before:e.range.before,after:e.range.after,data:e.range.data,fulldate:e.fulldate};this.startMultipleStatus=Object.assign({},this.startMultipleStatus,s),this.$emit("calendarClick",e)},rightChange(e){const{before:t,after:i}=e.range;this.rangeChange(t,i);const s={before:e.range.before,after:e.range.after,data:e.range.data,fulldate:e.fulldate};this.endMultipleStatus=Object.assign({},this.endMultipleStatus,s),this.$emit("calendarClick",e)},mobileChange(e){if(this.isRange){const{before:t,after:i}=e.range;if(!t)return;if(this.handleStartAndEnd(t,i,!0),this.hasTime){const{startTime:t,endTime:i}=e.timeRange;this.tempRange.startTime=t,this.tempRange.endTime=i}this.confirmRangeChange()}else this.hasTime?this.displayValue=e.fulldate+" "+e.time:this.displayValue=e.fulldate,this.setEmit(this.displayValue),this.calendarDate=this.displayValue;this.$refs.mobile.close()},rangeChange(e,t){e&&t&&(this.handleStartAndEnd(e,t,!0),this.hasTime||this.confirmRangeChange())},confirmRangeChange(){if(!this.tempRange.startDate||!this.tempRange.endDate)return void(this.pickerVisible=!1);let e,t;Ic(this.tempRange.startDate)||(this.tempRange.startDate=xc(Date.now())),Ic(this.tempRange.endDate)||(this.tempRange.endDate=xc(Date.now()));let i,s,n=!1,a=!1,r=this.tempRange.startDate,o=this.tempRange.endDate;if(this.hasTime&&(r=`${this.tempRange.startDate} ${this.tempRange.startTime}`,o=`${this.tempRange.endDate} ${this.tempRange.endTime}`),this.start){let e=this.start;"number"==typeof this.start&&(e=Sc(this.start,this.hideSecond)),[i,s]=e.split(" "),this.start&&!_c(this.start,r)&&(n=!0,this.tempRange.startDate=i),this.start&&!_c(this.start,o)&&(a=!0,this.tempRange.endDate=i)}let l,c,d=!1,u=!1;if(this.end){let e=this.end;"number"==typeof this.end&&(e=Sc(this.end,this.hideSecond)),[l,c]=e.split(" "),this.end&&!_c(r,this.end)&&(d=!0,this.tempRange.startDate=l),this.end&&!_c(o,this.end)&&(u=!0,this.tempRange.endDate=l)}this.hasTime?(n?this.tempRange.startTime=s||Ac(this.hideSecond):d&&(this.tempRange.startTime=c||Ac(this.hideSecond)),this.tempRange.startTime||(this.tempRange.startTime=Vc(Date.now(),this.hideSecond)),a?this.tempRange.endTime=s||Ac(this.hideSecond):u&&(this.tempRange.endTime=c||Ac(this.hideSecond)),this.tempRange.endTime||(this.tempRange.endTime=Vc(Date.now(),this.hideSecond)),e=this.displayRangeValue.startDate=`${this.tempRange.startDate} ${this.tempRange.startTime}`,t=this.displayRangeValue.endDate=`${this.tempRange.endDate} ${this.tempRange.endTime}`):(e=this.displayRangeValue.startDate=this.tempRange.startDate,t=this.displayRangeValue.endDate=this.tempRange.endDate),_c(e,t)||([e,t]=[t,e]),this.displayRangeValue.startDate=e,this.displayRangeValue.endDate=t;const m=[e,t];this.setEmit(m),this.pickerVisible=!1},handleStartAndEnd(e,t,i=!1){if(!e)return;t||(t=e);const s=i?"tempRange":"range",n=_c(e,t);this[s].startDate=n?e:t,this[s].endDate=n?t:e},dateCompare:(e,t)=>(e=new Date(e.replace("-","/").replace("-","/")))<=(t=new Date(t.replace("-","/").replace("-","/"))),diffDate(e,t){e=new Date(e.replace("-","/").replace("-","/"));const i=((t=new Date(t.replace("-","/").replace("-","/")))-e)/864e5;return Math.abs(i)},clear(e=!0){this.isRange?(this.displayRangeValue.startDate="",this.displayRangeValue.endDate="",this.tempRange.startDate="",this.tempRange.startTime="",this.tempRange.endDate="",this.tempRange.endTime="",this.isPhone?this.$refs.mobile&&this.$refs.mobile.clearCalender():(this.$refs.left&&this.$refs.left.clearCalender(),this.$refs.right&&this.$refs.right.clearCalender(),this.$refs.right&&this.$refs.right.changeMonth("next")),e&&(this.$emit("change",[]),this.$emit("input",[]),this.$emit("update:modelValue",[]))):(this.displayValue="",this.inputDate="",this.pickerTime="",this.isPhone?this.$refs.mobile&&this.$refs.mobile.clearCalender():this.$refs.pcSingle&&this.$refs.pcSingle.clearCalender(),e&&(this.$emit("change",""),this.$emit("input",""),this.$emit("update:modelValue","")))},calendarClick(e){this.$emit("calendarClick",e)}}};const Gc=X(zc,[["render",function(t,i,n,a,r,o){const l=s(e.resolveDynamicComponent("uni-icons"),Q),c=e.resolveComponent("time-picker"),d=e.resolveComponent("Calendar");return e.openBlock(),e.createElementBlock("view",{class:"uni-date"},[e.createElementVNode("view",{class:"uni-date-editor",onClick:i[1]||(i[1]=(...e)=>o.show&&o.show(...e))},[e.renderSlot(t.$slots,"default",{},(()=>[e.createElementVNode("view",{class:e.normalizeClass(["uni-date-editor--x",{"uni-date-editor--x__disabled":n.disabled,"uni-date-x--border":n.border}])},[r.isRange?(e.openBlock(),e.createElementBlock("view",{key:1,class:"uni-date-x uni-date-range"},[e.createVNode(l,{class:"icon-calendar",type:"calendar",color:"#c0c4cc",size:"22"}),e.createElementVNode("view",{class:"uni-date__x-input text-center"},e.toDisplayString(r.displayRangeValue.startDate||o.startPlaceholderText),1),e.createElementVNode("view",{class:"range-separator"},e.toDisplayString(n.rangeSeparator),1),e.createElementVNode("view",{class:"uni-date__x-input text-center"},e.toDisplayString(r.displayRangeValue.endDate||o.endPlaceholderText),1)])):(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-date-x uni-date-single"},[e.createVNode(l,{class:"icon-calendar",type:"calendar",color:"#c0c4cc",size:"22"}),e.createElementVNode("view",{class:"uni-date__x-input"},e.toDisplayString(r.displayValue||o.singlePlaceholderText),1)])),o.showClearIcon?(e.openBlock(),e.createElementBlock("view",{key:2,class:"uni-date__icon-clear",onClick:i[0]||(i[0]=e.withModifiers(((...e)=>o.clear&&o.clear(...e)),["stop"]))},[e.createVNode(l,{type:"clear",color:"#c0c4cc",size:"22"})])):e.createCommentVNode("",!0)],2)]),!0)]),e.withDirectives(e.createElementVNode("view",{class:"uni-date-mask--pc",onClick:i[2]||(i[2]=(...e)=>o.close&&o.close(...e))},null,512),[[e.vShow,r.pickerVisible]]),r.isPhone?e.createCommentVNode("",!0):e.withDirectives((e.openBlock(),e.createElementBlock("view",{key:0,ref:"datePicker",class:"uni-date-picker__container"},[r.isRange?(e.openBlock(),e.createElementBlock("view",{key:1,class:"uni-date-range--x",style:e.normalizeStyle(r.pickerPositionStyle)},[e.createElementVNode("view",{class:"uni-popper__arrow"}),r.hasTime?(e.openBlock(),e.createElementBlock("view",{key:0,class:"popup-x-header uni-date-changed"},[e.createElementVNode("view",{class:"popup-x-header--datetime"},[e.withDirectives(e.createElementVNode("input",{class:"uni-date__input uni-date-range__input",type:"text","onUpdate:modelValue":i[7]||(i[7]=e=>r.tempRange.startDate=e),placeholder:o.startDateText},null,8,["placeholder"]),[[e.vModelText,r.tempRange.startDate]]),e.createVNode(c,{type:"time",modelValue:r.tempRange.startTime,"onUpdate:modelValue":i[9]||(i[9]=e=>r.tempRange.startTime=e),start:o.timepickerStartTime,border:!1,disabled:!r.tempRange.startDate,hideSecond:n.hideSecond},{default:e.withCtx((()=>[e.withDirectives(e.createElementVNode("input",{class:"uni-date__input uni-date-range__input",type:"text","onUpdate:modelValue":i[8]||(i[8]=e=>r.tempRange.startTime=e),placeholder:o.startTimeText,disabled:!r.tempRange.startDate},null,8,["placeholder","disabled"]),[[e.vModelText,r.tempRange.startTime]])])),_:1},8,["modelValue","start","disabled","hideSecond"])]),e.createVNode(l,{type:"arrowthinright",color:"#999",style:{"line-height":"40px"}}),e.createElementVNode("view",{class:"popup-x-header--datetime"},[e.withDirectives(e.createElementVNode("input",{class:"uni-date__input uni-date-range__input",type:"text","onUpdate:modelValue":i[10]||(i[10]=e=>r.tempRange.endDate=e),placeholder:o.endDateText},null,8,["placeholder"]),[[e.vModelText,r.tempRange.endDate]]),e.createVNode(c,{type:"time",modelValue:r.tempRange.endTime,"onUpdate:modelValue":i[12]||(i[12]=e=>r.tempRange.endTime=e),end:o.timepickerEndTime,border:!1,disabled:!r.tempRange.endDate,hideSecond:n.hideSecond},{default:e.withCtx((()=>[e.withDirectives(e.createElementVNode("input",{class:"uni-date__input uni-date-range__input",type:"text","onUpdate:modelValue":i[11]||(i[11]=e=>r.tempRange.endTime=e),placeholder:o.endTimeText,disabled:!r.tempRange.endDate},null,8,["placeholder","disabled"]),[[e.vModelText,r.tempRange.endTime]])])),_:1},8,["modelValue","end","disabled","hideSecond"])])])):e.createCommentVNode("",!0),e.createElementVNode("view",{class:"popup-x-body"},[e.createVNode(d,{ref:"left",showMonth:!1,"start-date":r.calendarRange.startDate,"end-date":r.calendarRange.endDate,range:!0,pleStatus:r.endMultipleStatus,onChange:o.leftChange,onFirstEnterCale:o.updateRightCale,style:{padding:"0 8px"}},null,8,["start-date","end-date","pleStatus","onChange","onFirstEnterCale"]),e.createVNode(d,{ref:"right",showMonth:!1,"start-date":r.calendarRange.startDate,"end-date":r.calendarRange.endDate,range:!0,onChange:o.rightChange,pleStatus:r.startMultipleStatus,onFirstEnterCale:o.updateLeftCale,style:{padding:"0 8px","border-left":"1px solid #F1F1F1"}},null,8,["start-date","end-date","onChange","pleStatus","onFirstEnterCale"])]),r.hasTime?(e.openBlock(),e.createElementBlock("view",{key:1,class:"popup-x-footer"},[e.createElementVNode("text",{onClick:i[13]||(i[13]=(...e)=>o.clear&&o.clear(...e))},e.toDisplayString(o.clearText),1),e.createElementVNode("text",{class:"confirm-text",onClick:i[14]||(i[14]=(...e)=>o.confirmRangeChange&&o.confirmRangeChange(...e))},e.toDisplayString(o.okText),1)])):e.createCommentVNode("",!0)],4)):(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-date-single--x",style:e.normalizeStyle(r.pickerPositionStyle)},[e.createElementVNode("view",{class:"uni-popper__arrow"}),r.hasTime?(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-date-changed popup-x-header"},[e.withDirectives(e.createElementVNode("input",{class:"uni-date__input text-center",type:"text","onUpdate:modelValue":i[3]||(i[3]=e=>r.inputDate=e),placeholder:o.selectDateText},null,8,["placeholder"]),[[e.vModelText,r.inputDate]]),e.createVNode(c,{type:"time",modelValue:r.pickerTime,"onUpdate:modelValue":i[5]||(i[5]=e=>r.pickerTime=e),border:!1,disabled:!r.inputDate,start:o.timepickerStartTime,end:o.timepickerEndTime,hideSecond:n.hideSecond,style:{width:"100%"}},{default:e.withCtx((()=>[e.withDirectives(e.createElementVNode("input",{class:"uni-date__input text-center",type:"text","onUpdate:modelValue":i[4]||(i[4]=e=>r.pickerTime=e),placeholder:o.selectTimeText,disabled:!r.inputDate},null,8,["placeholder","disabled"]),[[e.vModelText,r.pickerTime]])])),_:1},8,["modelValue","disabled","start","end","hideSecond"])])):e.createCommentVNode("",!0),e.createVNode(d,{ref:"pcSingle",showMonth:!1,"start-date":r.calendarRange.startDate,"end-date":r.calendarRange.endDate,date:r.calendarDate,onChange:o.singleChange,"default-value":n.defaultValue,style:{padding:"0 8px"}},null,8,["start-date","end-date","date","onChange","default-value"]),r.hasTime?(e.openBlock(),e.createElementBlock("view",{key:1,class:"popup-x-footer"},[e.createElementVNode("text",{class:"confirm-text",onClick:i[6]||(i[6]=(...e)=>o.confirmSingleChange&&o.confirmSingleChange(...e))},e.toDisplayString(o.okText),1)])):e.createCommentVNode("",!0)],4))],512)),[[e.vShow,r.pickerVisible]]),r.isPhone?(e.openBlock(),e.createBlock(d,{key:1,ref:"mobile",clearDate:!1,date:r.calendarDate,defTime:o.mobileCalendarTime,"start-date":r.calendarRange.startDate,"end-date":r.calendarRange.endDate,selectableTimes:o.mobSelectableTime,startPlaceholder:n.startPlaceholder,endPlaceholder:n.endPlaceholder,"default-value":n.defaultValue,pleStatus:r.endMultipleStatus,showMonth:!1,range:r.isRange,hasTime:r.hasTime,insert:!1,hideSecond:n.hideSecond,onConfirm:o.mobileChange,onMaskClose:o.close,onChange:o.calendarClick},null,8,["date","defTime","start-date","end-date","selectableTimes","startPlaceholder","endPlaceholder","default-value","pleStatus","range","hasTime","hideSecond","onConfirm","onMaskClose","onChange"])):e.createCommentVNode("",!0)])}],["__scopeId","data-v-1d8b7c51"]]);function Hc(e,t,i={},s="file"){return new Promise(((n,a)=>{uni.uploadFile({url:e,filePath:t,name:s,formData:i,header:{token:uni.getStorageSync("token")||""},success:e=>{try{const t=JSON.parse(e.data);n(t)}catch(Lu){n(e.data)}},fail:e=>a(e)})}))}const jc={__name:"userInfo",setup(t){e.ref(""),e.ref("");const n=e.ref({});e.ref("");const a=e.ref(["男","女"]);e.ref("");const r=e.ref(["已婚","未婚","离异"]);e.ref(null),e.ref(null);const o=()=>{uni.chooseImage({count:1,success:function(e){Hc("/api/common/upload",e.tempFilePaths[0]).then((e=>{i("log","at pages/forum/my/userInfo.vue:132",e),n.value.avatar=e.data.url}))}})},l=()=>{uni.navigateBack({delta:1})},c=e=>{n.value.marriage=r.value[e.detail.value]},d=e=>{i("log","at pages/forum/my/userInfo.vue:153",e),n.value.gender=a.value[e.detail.value]},u=async()=>{i("log","at pages/forum/my/userInfo.vue:173",n.value.avatar);let e=await((e,t={})=>_.post("/api/user/update",e,t))(n.value);uni.showToast({title:"修改成功",icon:"none",duration:2e3}),uni.navigateBack(),i("log","at pages/forum/my/userInfo.vue:183",e)};return e.onMounted((()=>{(async()=>{let e=await I();n.value=e.data})()})),(t,i)=>{const m=s(e.resolveDynamicComponent("uni-icons"),Q),h=s(e.resolveDynamicComponent("uni-nav-bar"),Se),p=s(e.resolveDynamicComponent("uni-datetime-picker"),Gc);return e.openBlock(),e.createElementBlock("view",{class:"user-info-box"},[e.createVNode(h,{backgroundColor:"#F4F6F8",border:!1,title:"个人信息",class:"header-bar",statusBar:!0,fixed:""},{left:e.withCtx((()=>[e.createVNode(m,{type:"left",size:"24",onClick:l})])),right:e.withCtx((()=>[])),_:1}),e.createElementVNode("view",{class:"user-info-content"},[e.createElementVNode("view",{class:"info-content-1"},[e.createElementVNode("view",{class:"info-content-list"},[e.createElementVNode("view",{class:"content-item auture",onClick:o},[e.createElementVNode("view",{class:"label"},"头像"),e.createElementVNode("view",{class:"content"},[n.value.avatar?(e.openBlock(),e.createElementBlock("image",{key:0,src:n.value.avatar,class:"pic"},null,8,["src"])):(e.openBlock(),e.createElementBlock("text",{key:1,class:"txt"},[e.createTextVNode("请选择"),e.createVNode(m,{type:"right",size:"14",color:"rgba(0,0,0,0.3)",class:"icon"})]))])]),e.createElementVNode("view",{class:"content-item"},[e.createElementVNode("view",{class:"label"},"昵称"),e.createElementVNode("view",{class:"content"},[e.createElementVNode("text",{class:"txt"},[e.withDirectives(e.createElementVNode("input",{type:"text",style:{"text-align":"end","font-size":"28rpx"},"onUpdate:modelValue":i[0]||(i[0]=e=>n.value.realName=e)},null,512),[[e.vModelText,n.value.realName]])])])]),e.createElementVNode("view",{class:"content-item"},[e.createElementVNode("view",{class:"label"},"生日"),e.createElementVNode("view",{class:"content"},[e.createVNode(p,{type:"date","clear-icon":!1,modelValue:n.value.birthday,"onUpdate:modelValue":i[1]||(i[1]=e=>n.value.birthday=e)},{default:e.withCtx((()=>[e.createElementVNode("text",{class:"txt"},[e.createTextVNode(e.toDisplayString(n.value.birthday||"请选择"),1),e.createVNode(m,{type:"right",size:"14",color:"rgba(0,0,0,0.3)",class:"icon"})])])),_:1},8,["modelValue"])])]),e.createElementVNode("view",{class:"content-item"},[e.createElementVNode("view",{class:"label"},"性别"),e.createElementVNode("view",{class:"content"},[e.createElementVNode("picker",{range:a.value,onChange:d,mode:"selector"},[e.createElementVNode("text",{class:"txt"},[e.createTextVNode(e.toDisplayString(n.value.gender),1),e.createVNode(m,{type:"right",size:"14",color:"rgba(0,0,0,0.3)",class:"icon"})])],40,["range"])])])])]),e.createElementVNode("view",{class:"info-content-2"},[e.createElementVNode("view",{class:"info-content-list"},[e.createElementVNode("view",{class:"content-item"},[e.createElementVNode("view",{class:"label"},"婚姻状态"),e.createElementVNode("view",{class:"content"},[e.createElementVNode("picker",{range:r.value,onChange:c},[e.createElementVNode("text",{class:"txt"},[e.createTextVNode(e.toDisplayString(null==n.value.marriage?"请选择":n.value.marriage),1),e.createVNode(m,{type:"right",size:"14",color:"rgba(0,0,0,0.3)",class:"icon"})])],40,["range"])])]),e.createElementVNode("view",{class:"content-item profile"},[e.createElementVNode("view",{class:"label"},"简介"),e.createElementVNode("view",{class:"content"},[e.withDirectives(e.createElementVNode("textarea",{placeholder:"请简单介绍一下自己",style:{"text-align":"end","font-size":"28rpx"},"onUpdate:modelValue":i[2]||(i[2]=e=>n.value.introduce=e),class:"profile-content","placeholder-class":"profile-placeholder-content"},null,512),[[e.vModelText,n.value.introduce]])])])])]),e.createElementVNode("view",{style:{margin:"30rpx"}},[e.createElementVNode("button",{type:"primary",onClick:u},"提交")])])])}}},$c=X(jc,[["__scopeId","data-v-63ddc80c"]]),qc=X({__name:"choose-topic",setup(t){e.useCssVars((e=>({"6f9262a0":n.value})));const i=W(),n=e.ref(i.statusBarHeight+"px"),a=()=>{uni.navigateBack({delta:1})},r=e.ref(1),o=e.ref(1);return(t,i)=>{const n=s(e.resolveDynamicComponent("uni-icons"),Q),l=s(e.resolveDynamicComponent("uni-nav-bar"),Se);return e.openBlock(),e.createElementBlock("view",{class:"choose-topic-box"},[e.createVNode(l,{backgroundColor:"#F4F6F8",border:!1,title:"选择话题",class:"header-bar",statusBar:!0,fixed:""},{left:e.withCtx((()=>[e.createVNode(n,{type:"left",size:"24",onClick:a})])),_:1}),e.createElementVNode("view",{class:"choose-topic-content"},[e.createElementVNode("view",{class:"tag-content"},[e.createElementVNode("view",{class:"tag-left"},[e.createElementVNode("scroll-view",{"scroll-y":"true",class:"scroll-content","show-scrollbar":!1},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(20,(t=>e.createElementVNode("view",{class:e.normalizeClass(["tag-item",r.value==t?"active":""]),key:t,onClick:e=>(e=>{r.value!=e&&(r.value=e)})(t)}," 健康 ",10,["onClick"]))),64))])]),e.createElementVNode("view",{class:"tag-right"},[e.createElementVNode("scroll-view",{"scroll-y":"true",class:"scroll-content","show-scrollbar":!1},[e.createElementVNode("view",{class:"tag-right-content"},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(20,(t=>e.createElementVNode("view",{class:e.normalizeClass(["content-item",o.value==t?"active":""]),key:t,onClick:e=>(e=>{o.value!=e&&(o.value=e)})(t)},[e.createElementVNode("view",{class:"topic-image"},[e.createElementVNode("image",{src:"/static/forum/topic-b.png",class:"img"})]),e.createElementVNode("view",{class:"content"},[e.createElementVNode("view",{class:"title"},"潜意识投射测试"),e.createElementVNode("view",{class:"remark"},[e.createElementVNode("text",{class:"num"},"234"),e.createTextVNode("篇内容")])])],10,["onClick"]))),64))])])])])])])}}},[["__scopeId","data-v-21ce20f9"]]),Wc=X({__name:"qaDetail",setup(t){e.useCssVars((e=>({"737f6871":a.value})));const n=W(),a=e.ref(n.statusBarHeight+"px");Fe(),e.ref(0);const r=e.ref("");let l=e.ref();const c=e.reactive({listParams:{current:1,size:10,params:{}},list:[]});e.ref([{txt:"推荐",id:1},{txt:"情感",id:2},{txt:"文化",id:3},{txt:"职场",id:4},{txt:"职场",id:5},{txt:"职场",id:6},{txt:"职场",id:7},{txt:"职场",id:7}]);const d=e.ref(),u=e.ref([]),m=()=>{uni.navigateBack({delta:1})},h=e=>{1==e?uni.switchTab({url:"/pages/consult/index"}):uni.navigateTo({url:"/pages/consult/detail"})},p=async()=>{i("log","at pages/forum/index/qaDetail.vue:202","=============================="+l.value);let e=await((e,t={})=>_.post("/api/answer/answer/getAnswerDetail",e,t))({id:l.value});d.value=e.data},g=async()=>{c.listParams.params.articleId=l.value;let e=await((e,t={})=>_.post("/api/comment/comment/getCommentById",e,t))(c.listParams);u.value=e.data.records},y=async()=>{let e=await((e,t={})=>_.post("/api/comment/comment/saveComment",e,t))({content:r.value,articleId:l.value,type:2});r.value="",uni.showToast({title:"发布成功",icon:"none",duration:2e3}),i("log","at pages/forum/index/qaDetail.vue:227",e)};return o((e=>{l.value=e.id,p(),g()})),e.onMounted((()=>{})),(t,i)=>{var n,a;const o=s(e.resolveDynamicComponent("uni-icons"),Q),l=s(e.resolveDynamicComponent("uni-nav-bar"),Se),c=s(e.resolveDynamicComponent("uni-easyinput"),$l);return e.openBlock(),e.createElementBlock("view",{class:"read-article-box"},[e.createElementVNode("view",{class:"header"},[e.createVNode(l,{backgroundColor:"#F4F6F8",border:!1,title:"",class:"header-bar",statusBar:!0,fixed:""},{left:e.withCtx((()=>[e.createVNode(o,{type:"left",size:"24",onClick:m})])),right:e.withCtx((()=>[e.createElementVNode("view",{class:"right"},[e.createVNode(o,{type:"more-filled",size:"24",onClick:m})])])),_:1})]),e.createElementVNode("view",{class:"article-content"},[e.createElementVNode("view",{class:"detail-box"},[e.createElementVNode("view",{class:"title"},e.toDisplayString(null==(n=d.value)?void 0:n.title),1),e.createElementVNode("view",{class:"article-user"},[e.createElementVNode("view",{class:"user"},[e.createElementVNode("view",null,[e.createElementVNode("image",{src:null==d.value.avatar?"/static/my/profile.png":d.value.avatar,class:"picture"},null,8,["src"])]),e.createElementVNode("view",{class:"name-box"},[e.createElementVNode("view",{class:"name"},e.toDisplayString(d.value.realName),1),e.createElementVNode("view",{class:"auth"},"咨询师 | 认证作家")])]),e.createElementVNode("view",{class:"follow"},[e.createVNode(o,{type:"plusempty",size:"12",color:"#35CA95"}),e.createElementVNode("text",{class:"txt"},"关注")])]),e.createElementVNode("view",{class:"content"},e.toDisplayString(null==(a=d.value)?void 0:a.content),1),e.createElementVNode("view",{class:"date-num"},[e.createElementVNode("view",null,"2025-05-06"),e.createElementVNode("view",{style:{"padding-left":"20rpx"}},"阅读 7876")]),e.createElementVNode("view",{class:"contact"},[e.createTextVNode("文章转载/侵权，请联系邮箱："),e.createElementVNode("text",{class:"txt"},"6757567@163.com")])]),e.createElementVNode("view",{style:{"background-color":"white",margin:"20rpx 30rpx","border-radius":"20rpx",padding:"20rpx"}},[e.createElementVNode("view",{style:{"margin-bottom":"30rpx"}},[e.createElementVNode("text",{style:{"font-size":"42rpx","font-weight":"bold"}},"热门评论")]),u.value.length>0?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(u.value,((t,i)=>(e.openBlock(),e.createElementBlock("view",{key:i,style:{"margin-bottom":"20rpx"}},[e.createElementVNode("view",{style:{display:"flex","flex-direction":"row"}},[e.createElementVNode("image",{style:{width:"48rpx",height:"48rpx","border-radius":"24rpx"},src:null==t.avatar?"/static/my/profile.png":t.avatar},null,8,["src"]),e.createElementVNode("view",{style:{"margin-left":"20rpx",display:"flex","flex-direction":"column"}},[e.createElementVNode("text",{style:{"font-size":"26rpx"}},e.toDisplayString(t.nickname),1),e.createElementVNode("text",{style:{"margin-top":"10rpx","font-size":"28rpx",color:"#666666"}},e.toDisplayString(t.content),1)])])])))),128)):(e.openBlock(),e.createElementBlock("view",{key:1},[e.createElementVNode("view",{style:{"text-align":"center"}},[e.createElementVNode("text",null,"暂无数据")])]))]),e.createElementVNode("view",{class:"hot-psychological-box"},[e.createElementVNode("view",{class:"hot-psychological-header"},[e.createElementVNode("view",{class:"title"},"热门咨询师"),e.createElementVNode("view",{class:"more",onClick:i[0]||(i[0]=e=>h(1))},[e.createTextVNode("更多"),e.createVNode(o,{type:"right",size:"12",color:"rgba(0, 0, 0, 0.5)"})])]),e.createElementVNode("scroll-view",{class:"scroll-view_H","scroll-x":"true","scroll-left":"0","show-scrollbar":!1},[e.createElementVNode("view",{class:"list"},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(10,(t=>e.createVNode(rt,{class:"list-item",onClick:i[1]||(i[1]=e=>h(2))}))),64))])])]),e.createElementVNode("view",{class:"recommend-article-box"},[e.createElementVNode("view",{class:"recommend-article-header"},[e.createElementVNode("view",{class:"title"},[e.createElementVNode("view",null,"相关阅读")]),e.createElementVNode("view",{class:"more",onClick:i[2]||(i[2]=e=>(e=>{let t="1"==e?"/pages/readArticle/readArticle":"";uni.navigateTo({url:t})})(1))},[e.createTextVNode("更多"),e.createVNode(o,{type:"right",size:"12",color:"rgba(0, 0, 0, 0.5)"})])]),e.createElementVNode("view",{class:"article-list"})])]),e.createElementVNode("view",{class:"reply-box"},[e.createElementVNode("view",{class:"reply-contaior"},[e.createElementVNode("view",{class:"reply-content"},[e.createVNode(c,{onChange:y,"prefix-icon":"chat",clearable:!1,modelValue:r.value,"onUpdate:modelValue":i[3]||(i[3]=e=>r.value=e),placeholder:"写点什么",trim:!0,class:"reply-input"},null,8,["modelValue"])]),e.createElementVNode("view",{class:"reply-icons"},[e.createVNode(o,{type:"star",size:"24",color:"rgba(0, 0, 0, 0.35)"}),e.createVNode(o,{type:"hand-up",size:"24",color:"rgba(0, 0, 0, 0.35)"}),e.createVNode(o,{type:"redo",size:"24",color:"rgba(0, 0, 0, 0.35)"})])])])])}}},[["__scopeId","data-v-f9d2cffc"]]),Jc="/static/psychological-test/logo.svg",Yc="/static/forum/bg.png",Xc=X({__name:"index",setup(t){e.useCssVars((e=>({"54ee3508":n.value})));const i=W(),n=e.ref(i.statusBarHeight+"px"),a=()=>{uni.navigateBack({delta:1})},r=()=>{},o=e.ref([{id:1,text:"性格",url:"/static/login/logo.png"},{id:2,text:"情感",url:"/static/login/logo.png"},{id:3,text:"健康",url:"/static/login/logo.png"},{id:4,text:"职场",url:"/static/login/logo.png"},{id:5,text:"全部",url:"/static/login/logo.png"}]),l=e.ref([{id:1,txt:"免费测试"},{id:2,txt:"付费测试"}]),c=e.ref(0),d=()=>{uni.navigateTo({url:"/pages/psychological-test/order/order"})},u=e.ref([]);e.onMounted((()=>{}));const m=()=>{uni.navigateTo({url:"/pages/psychological-test/test-type/test-type"})};return(t,i)=>{const n=s(e.resolveDynamicComponent("uni-icons"),Q),h=s(e.resolveDynamicComponent("uni-search-bar"),he);return e.openBlock(),e.createElementBlock("view",{class:"psychological-box"},[e.createElementVNode("scroll-view",{"scroll-y":"true",class:"scroll-y","show-scrollbar":!1},[e.createElementVNode("view",{class:"psychological-header"},[e.createElementVNode("view",{class:"header-nav-bar"},[e.createElementVNode("view",{class:"header-left"},[e.createVNode(n,{type:"left",size:"24",onClick:a}),e.createElementVNode("text",null,"心理测试")]),e.createElementVNode("view",{class:"header-title"},[e.createVNode(h,{class:"uni-mt-10",radius:"90",placeholder:"抑郁测试",clearButton:"auto",cancelButton:"none",onConfirm:r})]),e.createElementVNode("view",{class:"header-right",onClick:d},[e.createElementVNode("image",{src:Jc,class:"logo-svg"}),e.createElementVNode("text",{class:"txt"},"我的测评")])]),e.createElementVNode("view",{class:"scroll-content"},[e.createElementVNode("scroll-view",{"scroll-x":"true",class:"scroll-x","show-scrollbar":!1},[e.createElementVNode("view",{class:"test-list"},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(10,(t=>e.createElementVNode("view",{class:"test-item",key:t},[e.createElementVNode("image",{src:Yc,class:"img"}),e.createElementVNode("view",{class:"test-title"},"抑郁测试"),e.createElementVNode("view",{class:"use-test"},"23W人已测"),e.createElementVNode("view",{class:"start-test"},[e.createTextVNode("开始测试"),e.createVNode(n,{type:"right",size:"12",color:"#35CA95"})])]))),64))])])]),e.createElementVNode("view",{class:"emotion-room"},[e.createElementVNode("view",{class:"emotion-room-header"},[e.createElementVNode("text",{class:"room-title"},"情绪小房间"),e.createElementVNode("text",{class:"room-remark"},"500+倾听师深度解读情绪困惑")]),e.createElementVNode("view",{class:"emotion-room-content"},[e.createElementVNode("div",{class:"danmu-container"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(u.value,((t,i)=>(e.openBlock(),e.createElementBlock("div",{key:i,class:"danmu-item"},e.toDisplayString(t.text),1)))),128))])]),e.createElementVNode("view",{class:"send-msg"})]),e.createElementVNode("view",{class:"bg1"}),e.createElementVNode("view",{class:"bg2"})]),e.createElementVNode("view",{class:"tabs"},[e.createElementVNode("view",{class:"tabs-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.value,((t,i)=>(e.openBlock(),e.createElementBlock("view",{class:"tab-item",key:i,onClick:m},[e.createElementVNode("image",{src:t.url,class:"img"},null,8,["src"]),e.createElementVNode("text",{class:"txt"},e.toDisplayString(t.text),1)])))),128))])]),e.createElementVNode("view",{class:"day-recommend-box"},[e.createElementVNode("view",{class:"day-recommend-content"},[e.createElementVNode("view",{class:"recommend-heaader"},[e.createElementVNode("view",{class:"title"},"每日推荐"),e.createElementVNode("view",{class:"label"},[e.createTextVNode("换一换"),e.createVNode(n,{type:"reload",size:"12",color:"#38CC98"})])]),e.createElementVNode("view",{class:"content-list"},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(4,(t=>e.createElementVNode("view",{class:"content-item",key:t},[e.createElementVNode("image",{src:Yc,class:"img"}),e.createElementVNode("view",null,[e.createElementVNode("view",{class:"title"},"潜意识投射测试"),e.createElementVNode("view",{class:"price-box"},[e.createElementVNode("view",{class:"price"},"免费"),e.createElementVNode("view",{class:"use-test"},[e.createVNode(n,{type:"fire-filled",size:"18",color:"#FA5151"}),e.createElementVNode("text",{class:"num"},"1W"),e.createTextVNode("人已测")])])])]))),64))])])]),e.createElementVNode("view",{class:"menu-tabs"},[e.createElementVNode("view",{class:"menu-tabs-conetnt"},[e.createElementVNode("view",{class:"menu-tabs-header"},[e.createElementVNode("view",{class:"title"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.value,((t,i)=>(e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["title-item",c.value==i?"active":""]),key:i,onClick:e=>{return t=i,void(c.value!=t&&(c.value=t));var t}},e.toDisplayString(t.txt),11,["onClick"])))),128))]),e.createElementVNode("view",{class:"label"},[e.createTextVNode("更多"),e.createVNode(n,{type:"right",size:"12"})])]),e.createElementVNode("view",{class:"content-list"},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(10,(t=>e.createElementVNode("view",{class:"content-item",key:t},[e.createElementVNode("view",{class:"content-item-content"},[e.createElementVNode("view",null,[e.createElementVNode("view",{class:"title"},"潜意识投射测试"),e.createElementVNode("view",{class:"remark"},"14张图片，揭露你的潜意识"),e.createElementVNode("view",{class:"price-box"},[e.createElementVNode("text",{class:"price"},"￥19.9"),e.createElementVNode("text",{class:"under-price"},"￥59.9")]),e.createElementVNode("view",{class:"test-handler"},[e.createElementVNode("view",{class:"handler-btn"},"去测试"),e.createElementVNode("view",{class:"use-test"},[e.createElementVNode("text",{class:"num"},"23.4W"),e.createTextVNode("人已测")])])]),e.createElementVNode("view",{class:"img-box"},[e.createElementVNode("image",{src:ve,class:"img"})])])]))),64))])])])])])}}},[["__scopeId","data-v-068ba8e4"]]),Qc=X({__name:"order",setup(t){e.useCssVars((e=>({"7bcdb1d7":n.value})));const i=W(),n=e.ref(i.statusBarHeight+"px"),r=()=>{uni.navigateBack({delta:1})};a((()=>{o()}));const o=()=>{},l=e.ref([{id:1,label:"未完成",isDot:!1},{id:2,label:"已完成",isDot:!1},{id:3,label:"待支付",isDot:!0}]),c=e.ref(1);return(t,i)=>{const n=s(e.resolveDynamicComponent("uni-icons"),Q),a=s(e.resolveDynamicComponent("uni-nav-bar"),Se);return e.openBlock(),e.createElementBlock("view",{class:"my-order-box"},[e.createVNode(a,{backgroundColor:"#F4F6F8",border:!1,title:"我的评测",class:"header-bar",statusBar:!0,fixed:""},{left:e.withCtx((()=>[e.createVNode(n,{type:"left",size:"24",onClick:r})])),_:1}),e.createElementVNode("view",{class:"tab-list-box"},[e.createElementVNode("view",{class:"tab-list-content"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.value,((t,i)=>(e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["tab-item",c.value==t.id?"active":""]),key:t.id,onClick:e=>(e=>{e.id!=c.value&&(c.value=e.id)})(t)},[e.createTextVNode(e.toDisplayString(t.label)+" ",1),t.isDot?(e.openBlock(),e.createElementBlock("view",{key:0,class:"is-dot"})):e.createCommentVNode("",!0)],10,["onClick"])))),128))])]),e.createElementVNode("view",{class:"order-content-box"},[e.createElementVNode("scroll-view",{"scroll-y":"true",class:"scroll-content","show-scrollbar":!1},[e.createElementVNode("view",{class:"order-content-list"},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(10,(t=>e.createElementVNode("view",{class:"order-content-item",key:t},[e.createElementVNode("view",{class:"item-box"},[e.createElementVNode("view",{class:"image-item"},[e.createElementVNode("image",{src:ve,class:"img"})]),e.createElementVNode("view",{class:"text-content"},[e.createElementVNode("view",{class:"header"},[e.createElementVNode("view",{class:"title"},"谈一段好的爱情"),e.createElementVNode("view",{class:"date"},"2025/02/01")]),e.createElementVNode("view",{class:"content"},"现在社会压力越来越大现在社会压力越来越大现在社会压力越来越大"),3!=c.value?(e.openBlock(),e.createElementBlock("view",{key:0,class:"footer"},[e.createElementVNode("view",{class:"free"},"免费"),e.createElementVNode("view",{class:"test"},"继续评测")])):(e.openBlock(),e.createElementBlock("view",{key:1,class:"footer"},[e.createElementVNode("view",{class:"price"},"￥19.9"),e.createElementVNode("view",{class:"test"},"立即支付")]))])])]))),64))])])])])}}},[["__scopeId","data-v-955ccaf9"]]),Zc=X({__name:"test-type",setup(t){e.useCssVars((e=>({fc730874:n.value})));const i=W(),n=e.ref(i.statusBarHeight+"px"),a=()=>{uni.navigateBack({delta:1})},r=e.ref(["情感","性格","健康","家庭","人际","职业"]),o=()=>{},l=()=>{uni.navigateTo({url:"/pages/psychological-test/order/order"})},c=e.ref(1),d=e.ref([{id:1,label:"全部"},{id:2,label:"付费"},{id:3,label:"免费"}]),u=e.ref(0);return(t,i)=>{const n=s(e.resolveDynamicComponent("uni-icons"),Q),m=s(e.resolveDynamicComponent("uni-search-bar"),he);return e.openBlock(),e.createElementBlock("view",{class:"psychological-box"},[e.createElementVNode("view",{class:"psychological-header"},[e.createElementVNode("view",{class:"header-nav-bar"},[e.createElementVNode("view",{class:"header-left"},[e.createVNode(n,{type:"left",size:"24",onClick:a})]),e.createElementVNode("view",{class:"header-title"},[e.createVNode(m,{class:"uni-mt-10",radius:"90",placeholder:"请输入搜索内容",clearButton:"auto",cancelButton:"none",onConfirm:o})]),e.createElementVNode("view",{class:"header-right",onClick:l},[e.createElementVNode("image",{src:Jc,class:"logo-svg"}),e.createElementVNode("text",{class:"txt"},"我的测评")])])]),e.createElementVNode("view",{class:"tab-list-box"},[e.createElementVNode("view",{class:"tab-list-content"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(d.value,((t,i)=>(e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["tab-item",c.value==t.id?"active":""]),key:t.id,onClick:e=>(e=>{e.id!=c.value&&(c.value=e.id)})(t)},e.toDisplayString(t.label),11,["onClick"])))),128))])]),e.createElementVNode("view",{class:"choose-topic-content"},[e.createElementVNode("view",{class:"tag-content"},[e.createElementVNode("view",{class:"tag-left"},[e.createElementVNode("scroll-view",{"scroll-y":"true",class:"scroll-content","show-scrollbar":!1},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.value,((t,i)=>(e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["tag-item",u.value==i?"active":""]),key:i,onClick:e=>(e=>{u.value!=e&&(u.value=e)})(i)},e.toDisplayString(t),11,["onClick"])))),128))])]),e.createElementVNode("view",{class:"tag-right"},[e.createElementVNode("scroll-view",{"scroll-y":"true",class:"scroll-content","show-scrollbar":!1},[e.createElementVNode("view",{class:"tag-right-content"},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(10,(t=>e.createElementVNode("view",{class:"content-item",key:t,onClick:e=>(e=>{let t=e%2=="0"?"/pages/psychological-test/free-test/free-test":"/pages/psychological-test/charge-test/charge-test";uni.navigateTo({url:t})})(t)},[e.createElementVNode("view",{class:"content-item-content"},[e.createElementVNode("view",{class:"content-txt"},[e.createElementVNode("view",{class:"title"},"潜意识投射测试"),e.createElementVNode("view",{class:"remark"},"14张图片，揭露你的潜意识"),e.createElementVNode("view",{class:"price-box"},[e.createElementVNode("view",null,[e.createElementVNode("text",{class:"price"},"￥19.9"),e.createElementVNode("text",{class:"under-price"},"￥59.9")]),e.createElementVNode("view",{class:"use-test"},[e.createElementVNode("text",{class:"use-num"},"23.4W"),e.createTextVNode("人已测 ")])])]),e.createElementVNode("view",{class:"img-box"},[e.createElementVNode("image",{src:ve,class:"img"})])])],8,["onClick"]))),64))])])])])])])}}},[["__scopeId","data-v-c8505aa1"]]);const Kc=X({name:"u-line-progress",props:{round:{type:Boolean,default:!0},type:{type:String,default:""},activeColor:{type:String,default:"#19be6b"},inactiveColor:{type:String,default:"#ececec"},percent:{type:Number,default:0},showPercent:{type:Boolean,default:!0},height:{type:[Number,String],default:28},striped:{type:Boolean,default:!1},stripedActive:{type:Boolean,default:!1}},data:()=>({}),computed:{progressStyle(){let e={};return e.width=this.percent+"%",this.activeColor&&(e.backgroundColor=this.activeColor),e}},methods:{}},[["render",function(t,i,s,n,a,r){return e.openBlock(),e.createElementBlock("view",{class:"u-progress",style:e.normalizeStyle({borderRadius:s.round?"100rpx":0,height:s.height+"rpx",backgroundColor:s.inactiveColor})},[e.createElementVNode("view",{class:e.normalizeClass([[s.type?`u-type-${s.type}-bg`:"",s.striped?"u-striped":"",s.striped&&s.stripedActive?"u-striped-active":""],"u-active"]),style:e.normalizeStyle([r.progressStyle])},[t.$slots.default||t.$slots.$default?e.renderSlot(t.$slots,"default",{key:0},void 0,!0):s.showPercent?(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.createTextVNode(e.toDisplayString(s.percent+"%"),1)],64)):e.createCommentVNode("",!0)],6)],4)}],["__scopeId","data-v-7da934da"]]),ed={__name:"start-test",setup(t){const n=()=>{uni.navigateBack({delta:1})},a=e.ref(""),r=e.ref(0),l=e.ref([]),c=e.ref(0),d=e.ref(0),u=e.ref([]),m=e.ref(0);o((e=>{a.value=e.title,r.value=e.id,d.value=e.examId,d.value?E():(h(),w())}));const h=async()=>{let e=await((e,t={})=>_.post("/api/psychology/examRecord/save",e,t))({examId:r.value});i("log","at pages/psychological-test/start-test/start-test.vue:110",e),m.value=e.data},p=()=>{if(-1===b.value||void 0===b.value)return void uni.showToast({title:"请选择选项",icon:"error"});const e=u.value.findIndex((e=>e.optionIndex===c.value));if(-1!==e?u.value[e].result=b.value:u.value.push({optionIndex:c.value,result:b.value}),g(),c.value=c.value+1,u.value[c.value]){let e=u.value[c.value];b.value=e.result}else b.value=-1},g=async()=>{await((e,t={})=>_.post("/api/psychology/examRecord/update",e,t))({id:m.value,options:JSON.stringify(u.value),currentIndex:c.value})},y=async()=>{if(-1===b.value||void 0===b.value)return void uni.showToast({title:"请先选择选项",icon:"error"});const e=u.value.findIndex((e=>e.optionIndex===c.value));-1!==e?u.value[e].result=b.value:u.value.push({optionIndex:c.value,result:b.value}),uni.showLoading({title:"正在获取结果，请稍后..."}),g(),f()},f=async()=>{i("log","at pages/psychological-test/start-test/start-test.vue:196",await((e,t={})=>_.get("/api/psychology/examRecord/getExamResult",e,t))({id:m.value}))},v=()=>{c.value=c.value-1;let e=u.value[c.value];b.value=e.result},E=async()=>{},w=async()=>{let e=await((e,t={})=>_.get("/api/psychology/exam/options",e,t))({id:r.value});i("log","at pages/psychological-test/start-test/start-test.vue:212",e),l.value=e.data},N=e.ref(0);e.onMounted((()=>{N.value=436/13*2}));const k=e.computed((()=>Math.round((c.value+1)/l.value.length*100)));e.watch(k,((e,t)=>{i("log","at pages/psychological-test/start-test/start-test.vue:232",`进度从 ${t}% → ${e}%`)}));const b=e.ref(-1);return(t,i)=>{const r=s(e.resolveDynamicComponent("uni-icons"),Q),o=s(e.resolveDynamicComponent("uni-nav-bar"),Se),d=s(e.resolveDynamicComponent("u-line-progress"),Kc);return e.openBlock(),e.createElementBlock("view",{class:"start-test-box"},[e.createVNode(o,{backgroundColor:"#F4F6F8",border:!1,title:a.value,class:"header-bar",statusBar:!0,fixed:""},{left:e.withCtx((()=>[e.createVNode(r,{type:"left",size:"24",onClick:n})])),right:e.withCtx((()=>[e.createElementVNode("view",{class:"right"},[e.createElementVNode("image",{src:ge,class:"img"})])])),_:1},8,["title"]),e.createElementVNode("view",{class:"content-box"},[e.createElementVNode("view",{class:"process-box"},[e.createElementVNode("view",{class:"process-content"},[e.createElementVNode("view",{class:"process-txt"},"评测进度"),e.createVNode(d,{"active-color":"#38CC98","inactive-color":"#ffffff",percent:k.value,"show-percent":!1},null,8,["percent"]),e.createElementVNode("view",{class:"process-num"},[e.createElementVNode("text",{class:"use-num"},e.toDisplayString(c.value+1),1),e.createTextVNode("/"+e.toDisplayString(l.value.length),1)])])]),e.createElementVNode("view",{class:"question-box"},[e.createElementVNode("view",{class:"q-logo"},[e.createElementVNode("image",{src:"/static/psychological-test/q-logo.svg",class:"img"})]),e.createElementVNode("view",{class:"q-content"},[e.createElementVNode("view",{class:"content"},e.toDisplayString(l.value[c.value].question),1)])]),e.createElementVNode("view",{class:"answer-box"},[e.createElementVNode("view",{class:"answer-content"},[e.createElementVNode("view",{class:"answer-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(JSON.parse(l.value[c.value].options),((t,i)=>(e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["answer-item",b.value==i?"active":""]),key:i,onClick:e=>{return t=i,void(b.value!=t&&(b.value=t));var t}},[e.createElementVNode("view",{class:"dot"}),e.createElementVNode("view",{class:"txt"},e.toDisplayString(t.text),1)],10,["onClick"])))),128))])])]),e.createElementVNode("view",{class:"pre-btn-box"},[c.value>0?(e.openBlock(),e.createElementBlock("view",{key:0,class:"pre",onClick:v},"上一题")):e.createCommentVNode("",!0),c.value<l.value.length-1?(e.openBlock(),e.createElementBlock("view",{key:1,class:"pre",onClick:p},"下一题")):e.createCommentVNode("",!0),c.value==l.value.length-1?(e.openBlock(),e.createElementBlock("view",{key:2,class:"pre",onClick:y},"查看结果")):e.createCommentVNode("",!0)])])])}}},td=X(ed,[["__scopeId","data-v-82d4549b"]]),id={__name:"comment",setup(t){const i=()=>{uni.navigateBack({delta:1})},n=e.ref(""),a=e.ref(0);o((e=>{a.value=e.examId}));const r=async()=>{await((e,t={})=>_.post("/api/comment/comment/saveComment",e,t))({type:3,content:n.value,articleId:a.value})};return(t,a)=>{const o=s(e.resolveDynamicComponent("uni-icons"),Q),l=s(e.resolveDynamicComponent("uni-nav-bar"),Se),c=s(e.resolveDynamicComponent("uni-rate"),Te);return e.openBlock(),e.createElementBlock("view",{class:"write-mailbox-box"},[e.createVNode(l,{backgroundColor:"#F4F6F8",border:!1,title:"评论",class:"header-bar",statusBar:!0,fixed:""},{left:e.withCtx((()=>[e.createVNode(o,{type:"left",size:"24",onClick:i})])),_:1}),e.createElementVNode("view",{class:"question-content-box"},[e.createElementVNode("view",{class:"question-content"},[e.createElementVNode("view",{class:"content"},[e.withDirectives(e.createElementVNode("textarea",{class:"uni-textarea",placeholder:"写下您的真实评价有机会获得红包哦~(1000字以内)","placeholder-class":"placeholder-content",maxlength:"1000","onUpdate:modelValue":a[0]||(a[0]=e=>n.value=e)},null,512),[[e.vModelText,n.value]]),e.createElementVNode("view",{class:"char-count"},e.toDisplayString(n.value.length)+"/1000",1)])]),e.createElementVNode("view",{class:"upload-image"},[e.createElementVNode("view",{class:"upload-image-content"},[e.createElementVNode("text",{class:"txt"},"满意度打分"),e.createElementVNode("view",null,[e.createVNode(c,{value:4,activeColor:"#38CC98",size:"16"})])])])]),e.createElementVNode("view",{class:"send-content-box"},[e.createElementVNode("view",{class:"send-content-btn",onClick:r},"发布")])])}}},sd=X(id,[["__scopeId","data-v-8db5a8d1"]]),nd=X({__name:"contact-consult",setup(t){const i=()=>{uni.navigateBack({delta:1})};return(t,n)=>{const a=s(e.resolveDynamicComponent("uni-icons"),Q),r=s(e.resolveDynamicComponent("uni-nav-bar"),Se);return e.openBlock(),e.createElementBlock("view",{class:"contact-consult-box"},[e.createVNode(r,{backgroundColor:"#F4F6F8",border:!1,title:"联系咨询师",class:"header-bar",statusBar:!0,fixed:""},{left:e.withCtx((()=>[e.createVNode(a,{type:"left",size:"24",onClick:i})])),_:1}),e.createElementVNode("view",{class:"contact-consult-content"},[e.createElementVNode("view",{class:"contact-consult-list"},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(20,(t=>e.createElementVNode("view",{class:"contact-consult-item",key:t},[e.createElementVNode("view",{class:"item-content"},[e.createElementVNode("image",{src:ve,class:"img"}),e.createElementVNode("view",{class:"content"},[e.createElementVNode("view",{class:"name"},"张三"),e.createElementVNode("view",{class:"desc"},"北京 | 二级心理咨询师")])])]))),64))])])])}}},[["__scopeId","data-v-6f1d9027"]]),ad={__name:"test-result",setup(t){const i=()=>{uni.navigateBack({delta:1})},n=e.ref(0),a=e.ref("");o((e=>{r.value=e.title,n.value=e.examId,a.value=e.result}));const r=e.ref(""),l=e=>{uni.navigateTo({url:e})},c=e.ref(null),d=()=>{c.value.open()},u=e.ref([{type:"wechat",img:"/static/share/wechat.svg",backgroundColor:"#00B578",text:"微信",imgWidth:"57rpx",imgHeight:"57rpx",fn:()=>new Function},{type:"friend",img:"/static/share/friend.svg",backgroundColor:"#41B7FF",text:"朋友圈",imgWidth:"57rpx",imgHeight:"57rpx",fn:()=>new Function}]),m=()=>{c.value.close()};return(t,o)=>{const h=s(e.resolveDynamicComponent("uni-icons"),Q),p=s(e.resolveDynamicComponent("uni-nav-bar"),Se),g=s(e.resolveDynamicComponent("uni-popup"),Qe);return e.openBlock(),e.createElementBlock("view",{class:"test-result-box"},[e.createVNode(p,{backgroundColor:"#F4F6F8",border:!1,title:"测试结果",class:"header-bar",statusBar:!0,fixed:""},{left:e.withCtx((()=>[e.createVNode(h,{type:"left",size:"24",onClick:i})])),_:1}),e.createElementVNode("view",{class:"test-result-content-box"},[e.createElementVNode("view",{class:"test-result-content"},[e.createElementVNode("view",{class:"content"},[e.createElementVNode("view",{class:"banner"},[e.createElementVNode("image",{src:Yc,class:"img"})]),e.createElementVNode("view",{class:"result-analysis-box"},[e.createElementVNode("view",{class:"tip"},"结果分析"),e.createElementVNode("view",{class:"title"},e.toDisplayString(r.value),1),e.createElementVNode("view",{class:"result"},e.toDisplayString(a.value),1)])])])]),e.createElementVNode("view",{class:"footer-box"},[e.createElementVNode("view",{class:"footer-content"},[e.createElementVNode("view",{onClick:o[0]||(o[0]=e=>l("/pages/psychological-test/comment/comment?examId="+n.value))},[e.createElementVNode("image",{src:"/static/psychological-test/comment.svg"}),e.createElementVNode("text",null,"去评价")]),e.createElementVNode("view",{onClick:d},[e.createElementVNode("image",{src:"/static/psychological-test/save-share.svg"}),e.createElementVNode("text",null,"保存分享")]),e.createElementVNode("view",{onClick:o[1]||(o[1]=e=>l("/pages/psychological-test/contact-consult/contact-consult"))},[e.createElementVNode("image",{src:"/static/psychological-test/send-consult.svg"}),e.createElementVNode("text",null,"发送咨询师 ")]),e.createElementVNode("view",{class:"new-consult-btn"},"新人0元倾诉")])]),e.createVNode(g,{ref_key:"share",ref:c,"background-color":"#fff","is-mask-click":!1,borderRadius:"24rpx 24rpx 0rpx 0rpx",type:"bottom"},{default:e.withCtx((()=>[e.createElementVNode("view",{class:"share-popup-box"},[e.createElementVNode("view",{class:"share-content"},[e.createElementVNode("view",{class:"title"},"分享到"),e.createElementVNode("view",{class:"share-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(u.value,((t,i)=>(e.openBlock(),e.createElementBlock("view",{class:"share-item",key:i,onClick:t.fn},[e.createElementVNode("view",{class:"share-item-img",style:e.normalizeStyle({backgroundColor:t.backgroundColor})},[e.createElementVNode("image",{src:t.img,class:"img",style:e.normalizeStyle({width:t.imgWidth,height:t.imgHeight}),mode:"widthFix"},null,12,["src"])],4),e.createElementVNode("view",{class:"txt"},e.toDisplayString(t.text),1)],8,["onClick"])))),128))]),e.createElementVNode("view",{class:"cancel",onClick:m}," 取消 ")])])])),_:1},512)])}}},rd=X(ad,[["__scopeId","data-v-ad099435"]]),od={__name:"charge-test",setup(t){const n=e.ref(0),a=e.ref(""),r=e.ref({});o((e=>{n.value=e.id,i("log","at pages/psychological-test/charge-test/charge-test.vue:163",n.value),d(),c()}));const l=()=>{uni.navigateTo({url:"/pages/psychological-test/test-type/test-type"})},c=async()=>{let e=await((e,t={})=>_.get("/api/config/examRuleDescription",e,t))();a.value=e.data},d=async()=>{let e=await((e,t={})=>_.get("/api/psychology/exam/paperDetail",e,t))({id:n.value});i("log","at pages/psychological-test/charge-test/charge-test.vue:183",e),r.value=e.data},u=()=>{uni.navigateBack({delta:1})},m=()=>{0==r.value.payType&&uni.navigateTo({url:"/pages/psychological-test/start-test/start-test?title="+r.value.title+"&id="+r.value.id})};return(t,i)=>{const n=s(e.resolveDynamicComponent("uni-icons"),Q),o=s(e.resolveDynamicComponent("uni-nav-bar"),Se),c=s(e.resolveDynamicComponent("uni-rate"),Te);return e.openBlock(),e.createElementBlock("view",{class:"charge-test-box"},[e.createElementVNode("scroll-view",{"scroll-y":"true",class:"scroll-content","show-scrollbar":!1},[e.createVNode(o,{backgroundColor:"#9DDDC7",border:!1,title:"",class:"header-bar",statusBar:!0,fixed:""},{left:e.withCtx((()=>[e.createVNode(n,{type:"left",size:"24",onClick:u})])),right:e.withCtx((()=>[e.createElementVNode("view",{class:"right"},[e.createElementVNode("image",{src:ge,class:"img",style:{width:"40rpx",height:"40rpx"}})])])),_:1}),e.createElementVNode("view",{class:"charge-test-content-box"},[e.createElementVNode("view",{class:"content-box"},[e.createElementVNode("view",{class:"content-banner"},[e.createElementVNode("image",{src:null==r.value.icon?"/static/forum/bg.png":r.value.icon,mode:"aspectFill",class:"img"},null,8,["src"]),e.createElementVNode("view",{class:"banner-text"},[e.createElementVNode("text",{style:{color:"white","font-size":"42rpx"}},e.toDisplayString(r.value.title),1),e.createElementVNode("text",{style:{color:"white","font-size":"28rpx"}},e.toDisplayString(r.value.oneWord),1)])]),e.createElementVNode("view",{class:"charge-test-options"},[e.createElementVNode("view",{class:"option-item"},[e.createElementVNode("text",{class:"weight"},e.toDisplayString(r.value.examNum),1),e.createTextVNode("人已测 ")]),e.createElementVNode("view",{class:"option-item"},[e.createElementVNode("text",{class:"weight"},e.toDisplayString(r.value.examOptionNum)+"道",1),e.createTextVNode("精选问题 ")]),e.createElementVNode("view",{class:"option-item"},[e.createElementVNode("text",{class:"weight"},"16页"),e.createTextVNode("专业报告 ")])]),e.createElementVNode("view",{class:"content-info"},e.toDisplayString(r.value.description),1)]),e.createElementVNode("view",{class:"test-notice"},[e.createElementVNode("view",{class:"test-notice-content"},[e.createElementVNode("view",{class:"title"},"评测须知"),e.createElementVNode("view",{class:"info"},[e.createElementVNode("rich-text",{nodes:a.value},null,8,["nodes"])])])]),e.createElementVNode("view",{class:"recommend-content-box"},[e.createElementVNode("view",{class:"recommend-content"},[e.createElementVNode("view",{class:"recommend-content-header"},[e.createElementVNode("view",{class:"title"}," 相关推荐 "),e.createElementVNode("view",{class:"label",onClick:l},[e.createTextVNode("更多"),e.createVNode(n,{type:"right",size:"12"})])]),e.createElementVNode("view",{class:"content-list"},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(2,(t=>e.createElementVNode("view",{class:"content-item",key:t},[e.createElementVNode("view",{class:"content-item-content"},[e.createElementVNode("view",null,[e.createElementVNode("view",{class:"title"},"潜意识投射测试"),e.createElementVNode("view",{class:"remark"},"14张图片，揭露你的潜意识"),e.createElementVNode("view",{class:"price-box"},[e.createElementVNode("text",{class:"price"},"￥19.9"),e.createElementVNode("text",{class:"under-price"},"￥59.9")]),e.createElementVNode("view",{class:"test-handler"},[e.createElementVNode("view",{class:"handler-btn"},"去测试"),e.createElementVNode("view",{class:"use-test"},[e.createElementVNode("text",{class:"num"},"23.4W"),e.createTextVNode("人已测")])])]),e.createElementVNode("view",{class:"img-box"},[e.createElementVNode("image",{src:ve,class:"img"})])])]))),64))])])]),e.createElementVNode("view",{class:"user-comment-content-box"},[e.createElementVNode("view",{class:"user-comment-content"},[e.createElementVNode("view",{class:"user-comment-content-header"},[e.createElementVNode("view",{class:"title"}," 用户评价 ")]),e.createElementVNode("view",{class:"comment-content-list"},[e.createElementVNode("view",{class:"comment-list-header"},[e.createElementVNode("view",{class:"left"},[e.createElementVNode("view",{class:"star"},[e.createElementVNode("text",null,"4.9"),e.createVNode(c,{readonly:!0,value:4,size:"12"})]),e.createElementVNode("view",{class:"txt"},"评分")]),e.createElementVNode("view",{class:"right"},[e.createElementVNode("view",{class:"comment-num"},[e.createElementVNode("view",{class:"num"},"2000+"),e.createElementVNode("view",{class:"txt"},"真实评价")]),e.createElementVNode("view",{class:"percent"},[e.createElementVNode("view",{class:"num"},"99%"),e.createElementVNode("view",{class:"txt"},"满意度")])])]),(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(10,(t=>e.createElementVNode("view",{class:"comment-content-item",key:t},[e.createElementVNode("view",{class:"content-item-header"},[e.createElementVNode("view",{class:"left"},[e.createElementVNode("view",null,[e.createElementVNode("image",{src:Ie,class:"img"})]),e.createElementVNode("view",null,"匿名")]),e.createElementVNode("view",{class:"right"},"2024-04-03")]),e.createElementVNode("view",{class:"content"}," 评论内容评论内容评论内容评论内容评论内容评论内容评论内容评论内容评论 ")]))),64))])])])])]),e.createElementVNode("view",{class:"footer"},[e.createElementVNode("view",{class:"price-box"},[1==r.value.payType?(e.openBlock(),e.createElementBlock("view",{key:0,class:"price"},[e.createElementVNode("text",{class:"use-price"},"¥"+e.toDisplayString(r.value.discountPrice),1),e.createElementVNode("text",{class:"under-price"},"¥"+e.toDisplayString(r.value.price),1)])):(e.openBlock(),e.createElementBlock("view",{key:1,class:"price"},"免费")),e.createElementVNode("view",{class:"txt"},"开通会员享受免费测试")]),e.createElementVNode("view",{class:"member"},"会员免费"),e.createElementVNode("view",{class:"start-test",onClick:m},"立即测试")])])}}},ld=X(od,[["__scopeId","data-v-0039e386"]]),cd=X({__name:"free-test",setup(t){const i=()=>{uni.navigateBack({delta:1})},n=()=>{uni.navigateTo({url:"/pages/psychological-test/start-test/start-test"})};return(t,a)=>{const r=s(e.resolveDynamicComponent("uni-icons"),Q),o=s(e.resolveDynamicComponent("uni-nav-bar"),Se);return e.openBlock(),e.createElementBlock("view",{class:"free-test-box"},[e.createElementVNode("scroll-view",{"scroll-y":"true",class:"scroll-content","show-scrollbar":!1},[e.createVNode(o,{backgroundColor:"#f4f6f8",border:!1,title:"心理测试",class:"header-bar",statusBar:!0,fixed:""},{left:e.withCtx((()=>[e.createVNode(r,{type:"left",size:"24",onClick:i})])),right:e.withCtx((()=>[e.createElementVNode("view",{class:"right"},[e.createElementVNode("image",{src:ge,class:"img",style:{width:"40rpx",height:"40rpx"}})])])),_:1}),e.createElementVNode("view",{class:"free-test-content-box"},[e.createElementVNode("view",{class:"content-box"},[e.createElementVNode("view",{class:"content-banner"},[e.createElementVNode("image",{src:Yc,class:"img"})]),e.createElementVNode("view",{class:"free-test-options"},[e.createElementVNode("view",{class:"option-item"},[e.createElementVNode("text",{class:"weight"},"23.4W"),e.createTextVNode("人已测 ")]),e.createElementVNode("view",{class:"option-item"},[e.createElementVNode("text",{class:"weight"},"49道"),e.createTextVNode("精选问题 ")]),e.createElementVNode("view",{class:"option-item"},[e.createElementVNode("text",{class:"weight"},"16页"),e.createTextVNode("专业报告 ")])]),e.createElementVNode("view",{class:"content-info"}," 很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人 很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人 很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人 很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人 很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人很多人在谈恋爱,但病是不是说每个人 "),e.createElementVNode("view",{class:"start-test",onClick:n},"开始测试")]),e.createElementVNode("view",{class:"recommend-content-box"},[e.createElementVNode("view",{class:"recommend-content"},[e.createElementVNode("view",{class:"recommend-content-header"},[e.createElementVNode("view",{class:"title"}," 相关推荐 "),e.createElementVNode("view",{class:"label"},[e.createTextVNode("更多"),e.createVNode(r,{type:"right",size:"12"})])]),e.createElementVNode("view",{class:"content-list"},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(2,(t=>e.createElementVNode("view",{class:"content-item",key:t},[e.createElementVNode("view",{class:"content-item-content"},[e.createElementVNode("view",null,[e.createElementVNode("view",{class:"title"},"潜意识投射测试"),e.createElementVNode("view",{class:"remark"},"14张图片，揭露你的潜意识"),e.createElementVNode("view",{class:"price-box"},[e.createElementVNode("text",{class:"price"},"￥19.9"),e.createElementVNode("text",{class:"under-price"},"￥59.9")]),e.createElementVNode("view",{class:"test-handler"},[e.createElementVNode("view",{class:"handler-btn"},"去测试"),e.createElementVNode("view",{class:"use-test"},[e.createElementVNode("text",{class:"num"},"23.4W"),e.createTextVNode("人已测")])])]),e.createElementVNode("view",{class:"img-box"},[e.createElementVNode("image",{src:ve,class:"img"})])])]))),64))])])])])])])}}},[["__scopeId","data-v-9b9b6688"]]),dd="/static/message/jianpan.png";class ud{constructor(e,t){__publicField(this,"emojiMap",null),__publicField(this,"url",""),__publicField(this,"patterns",[]),__publicField(this,"metaChars",/[[\]{}()*+?.\\|^$\-,&#\s]/g),this.url=e||"",this.emojiMap=t||{};for(let i in this.emojiMap)this.emojiMap.hasOwnProperty(i)&&this.patterns.push("("+i.replace(this.metaChars,"\\$&")+")")}decode(e){return e.replace(new RegExp(this.patterns.join("|"),"g"),(e=>void 0!==this.emojiMap[e]?'<img height="20rpx" width="20rpx" src="'+this.url+this.emojiMap[e]+'" />':e))}}class md{constructor(){__publicField(this,"recorder",null),__publicField(this,"uniStartTime",null),__publicField(this,"recording",!1),__publicField(this,"onRecordingComplete",null),this.recorder=uni.getRecorderManager()}onRecordComplete(e){this.onRecordingComplete=e,this.initUniRecorder()}initUniRecorder(){this.recorder.onStop((e=>{const t=Date.now()-this.uniStartTime;e.duration=t,this.onRecordingComplete(e,t)}))}authorize(){return new Promise(((e,t)=>{if("iOS"===plus.os.name){var s=plus.ios.import("AVAudioSession"),n=s.sharedInstance().recordPermission();1684369017!==n&&1970168948!==n||i("log","at lib/RecorderManager.js:66","麦克风权限没有开启"),plus.ios.deleteObject(s),e()}else plus.android.requestPermissions(["android.permission.RECORD_AUDIO"],(i=>{i.granted.length?e():t("已拒绝")}),(e=>{i("error","at lib/RecorderManager.js:77",`申请权限错误：${e.code} = ${e.message}`),t()}))}))}start(){this.recording=!0;try{this.recorder.start({duration:6e5}),this.uniStartTime=Date.now()}catch(Lu){i("log","at lib/RecorderManager.js:115",Lu)}}stop(){this.recording=!1;try{this.recorder.stop()}catch(Lu){i("log","at lib/RecorderManager.js:138",Lu)}}}const hd="https://imgcache.qq.com/open/qcloud/tim/assets/emoji/",pd={__name:"private-chat",setup(t){const s=uni.$GoEasy,n=uni.$currentUser,r={"[么么哒]":"emoji_3@2x.png","[乒乓]":"emoji_4@2x.png","[便便]":"emoji_5@2x.png","[信封]":"emoji_6@2x.png","[偷笑]":"emoji_7@2x.png","[傲慢]":"emoji_8@2x.png"},u=e.reactive(new md),m=e.ref("");let h=null,p={};const g=e.reactive({url:hd,map:r,visible:!1,decoder:new ud(hd,r)}),y=e.ref(!1),f=e.reactive({orders:[],visible:!1}),v=e.reactive({messages:[],allLoaded:!1,loading:!0}),E=e.ref(!1),w=uni.createInnerAudioContext(),N=e.reactive({audio:{},playingMessage:null}),k=e.reactive({visible:!1,url:"",context:null}),b=e.reactive({visible:!1,message:null,recallable:!1}),C=e.reactive({messages:[],visible:!1,ids:[]});function S(e){return"<span>"+g.decoder.decode(e.payload.text)+"</span>"}function x(e,t){return 0===t||e.timestamp-v.messages[t-1].timestamp>3e5?Ol(e.timestamp):""}function V(e){let t=e.senderId,i=e.receiverId;(n.id===t?i:t)===h.id&&(v.messages.push(e),Y(),J())}function T(e){e.forEach((e=>{let t=e.senderId,i=e.receiverId;if((n.id===t?i:t)===h.id){let t=v.messages.indexOf(e);t>-1&&v.messages.splice(t,1)}}))}function A(t){let n=e.ref({});n.value=t,v.messages.push(n.value),J(),s.im.sendMessage({message:n.value,onSuccess:function(e){i("log","at pages/message/private-chat.vue:439","发送成功.",e)},onFailed:function(e){507===e.code?i("log","at pages/message/private-chat.vue:443","发送语音/图片/视频/文件失败，没有配置OSS存储，详情参考：https://docs.goeasy.io/2.x/im/message/media/alioss"):i("log","at pages/message/private-chat.vue:447","发送失败:",e)}})}function _(){if(""!==m.value.trim()){let e=m.value;m.value.length>=50&&(e=m.value.substring(0,30)+"..."),s.im.createTextMessage({text:m.value,to:p,notification:{title:n.name+"发来一段文字",body:e,sound:"message",badge:"+1"},onSuccess:e=>{A(e)},onFailed:e=>{i("log","at pages/message/private-chat.vue:472","error :",e)}})}m.value=""}function I(e){C.messages=[e],Date.now()-e.timestamp<18e4&&e.senderId===n.id&&"success"===e.status?b.recallable=!0:b.recallable=!1,b.visible=!0}function D(){b.visible=!1,b.message=null}function B(){uni.showModal({content:"确认删除？",success:e=>{b.visible=!1,e.confirm&&M()}})}function R(){C.messages.length>0&&uni.showModal({content:"确认删除？",success:e=>{C.visible=!1,e.confirm&&M()}})}function M(){s.im.deleteMessage({messages:C.messages,onSuccess:()=>{C.messages.forEach((e=>{let t=v.messages.indexOf(e);t>-1&&v.messages.splice(t,1)})),C.messages=[]},onFailed:e=>{i("log","at pages/message/private-chat.vue:615","error:",e)}})}function P(){b.visible=!1,s.im.recallMessage({messages:C.messages,onSuccess:()=>{i("log","at pages/message/private-chat.vue:625","撤回成功")},onFailed:e=>{i("log","at pages/message/private-chat.vue:628","撤回失败,error:",e)}})}function O(){C.messages=[],C.visible=!0,b.visible=!1}function L(e){const t=e.detail.value;let i=[];v.messages.forEach((e=>{t.includes(e.messageId)&&i.push(e)})),C.messages=i}function F(t){let n;v.loading=!0;let a=v.messages[0];a&&(n=a.timestamp),s.im.history({userId:h.id,lastTimestamp:n,limit:10,onSuccess:i=>{uni.stopPullDownRefresh(),v.loading=!1;let s=e.reactive([]);s.push(...i.content),0===s.length?v.allLoaded=!0:(n?(s.push(...v.messages),v.messages=s):v.messages=s,s.length<10&&(v.allLoaded=!0),t&&(J(),Y()))},onFailed:e=>{i("log","at pages/message/private-chat.vue:694","获取历史消息失败:",e),uni.stopPullDownRefresh(),v.loading=!1}})}function U(){E.value=!E.value,E.value&&u.authorize().then((()=>{i("log","at pages/message/private-chat.vue:706","录音权限获取成功")})).catch((e=>{i("log","at pages/message/private-chat.vue:708","err:",e),uni.showModal({title:"获取录音权限失败",content:"请先授权才能发送语音消息！"})}))}function z(){u.start()}function G(){u.stop()}function H(e){let t=[e.currentTarget.dataset.url];uni.previewImage({urls:t})}function j(t){k.visible=!0,k.url=t.currentTarget.dataset.url,e.nextTick((()=>{k.context.requestFullScreen({direction:0}),k.context.play()}))}function $(e){k.visible&&!e.detail.fullScreen&&(k.visible=!1,k.context.stop())}function q(){g.visible=!g.visible,y.value=!1}function W(){f.visible=!1}function J(){e.nextTick((()=>{uni.pageScrollTo({scrollTop:2e6,duration:0})}))}function Y(){s.im.markMessageAsRead({id:p.id,type:p.type,onSuccess:function(){i("log","at pages/message/private-chat.vue:837","标记私聊已读成功")},onFailed:function(e){i("log","at pages/message/private-chat.vue:840","标记私聊已读失败",e)}})}return o((e=>{let t=e.to;i("log","at pages/message/private-chat.vue:270",t);let a=e.name;h={id:t,name:a,avatar:e.avatar},p={id:h.id,type:s.IM_SCENE.PRIVATE,data:{name:h.name,avatar:h.avatar}},s.im.on(s.IM_EVENT.PRIVATE_MESSAGE_RECEIVED,V),s.im.on(s.IM_EVENT.MESSAGE_DELETED,T),w.onEnded((()=>{N.playingMessage=null})),w.onStop((()=>{N.playingMessage=null})),u.onRecordComplete(((e,t)=>{t<1e3?uni.showToast({icon:"none",title:"录音时间太短",duration:500}):s.im.createAudioMessage({to:p,file:e,notification:{title:n.name+"发来一段语音",body:"[语音消息]",sound:"message",badge:"+1"},onProgress:function(e){i("log","at pages/message/private-chat.vue:396",e)},onSuccess:e=>{A(e)},onFailed:e=>{i("log","at pages/message/private-chat.vue:402","error :",e)}})}))})),a((()=>{y.value=!1,g.visible=!1})),l((()=>{F(!0),k.context=uni.createVideoContext("videoPlayer",this),uni.setNavigationBarTitle({title:h.name})})),d((()=>{F(!1)})),c((()=>{s.im.off(s.IM_EVENT.PRIVATE_MESSAGE_RECEIVED,V),s.im.off(s.IM_EVENT.MESSAGE_DELETED,T)})),(t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"chatInterface",onContextmenu:a[8]||(a[8]=e.withModifiers((()=>{}),["prevent"]))},[e.createElementVNode("view",{class:"scroll-view"},[v.loading?(e.openBlock(),e.createElementBlock("image",{key:0,class:"history-loaded",src:"/static/message/loading.svg"})):(e.openBlock(),e.createElementBlock("view",{key:1,class:e.normalizeClass(v.allLoaded?"history-loaded":"")},[e.createElementVNode("view",null,e.toDisplayString(v.allLoaded?"已经没有更多的历史消息":""),1)],2)),e.createElementVNode("checkbox-group",{onChange:L},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(v.messages,((t,i)=>{return e.openBlock(),e.createElementBlock("view",{key:t.messageId},[e.createElementVNode("view",{class:"time-lag"},e.toDisplayString(x(t,i)),1),t.recalled?(e.openBlock(),e.createElementBlock("view",{key:0,class:"message-recalled"},[t.recaller.id===e.unref(n).id?(e.openBlock(),e.createElementBlock("view",{key:0,class:"message-recalled-self"},[e.createElementVNode("view",null,"你撤回了一条消息"),"text"===t.type&&Date.now()-t.timestamp<6e4?(e.openBlock(),e.createElementBlock("span",{key:0,onClick:e=>{return i=t.payload.text,E.value&&(E.value=!1),void(m.value=i);var i}},"重新编辑",8,["onClick"])):e.createCommentVNode("",!0)])):(e.openBlock(),e.createElementBlock("view",{key:1},e.toDisplayString(t.recaller.data.name)+"撤回了一条消息",1))])):(e.openBlock(),e.createElementBlock("view",{key:1,class:"message-item"},[e.createElementVNode("view",{class:"message-item-checkbox"},[e.withDirectives(e.createElementVNode("checkbox",{value:t.messageId,checked:C.messages.includes(t)},null,8,["value","checked"]),[[e.vShow,C.visible&&"sending"!==t.status]])]),e.createElementVNode("view",{class:e.normalizeClass(["message-item-content",{self:t.senderId===e.unref(n).id}])},[e.createElementVNode("view",{class:"avatar"},[e.createElementVNode("image",{src:t.senderId===e.unref(n).id?null==e.unref(n).avatar?"/static/consult/user.png":e.unref(n).avatar:e.unref(h).avatar},null,8,["src"])]),e.createElementVNode("view",{class:"content",onContextmenu:e.withModifiers((e=>I(t)),["right"]),onLongpress:e=>I(t)},[e.createElementVNode("view",{class:"message-payload"},["sending"===t.status?(e.openBlock(),e.createElementBlock("b",{key:0,class:"pending"})):e.createCommentVNode("",!0),"fail"===t.status?(e.openBlock(),e.createElementBlock("b",{key:1,class:"send-fail"})):e.createCommentVNode("",!0),"text"===t.type?(e.openBlock(),e.createElementBlock("view",{key:2,class:"text-content",innerHTML:S(t)},null,8,["innerHTML"])):e.createCommentVNode("",!0),"image"===t.type?(e.openBlock(),e.createElementBlock("image",{key:3,"data-url":t.payload.url,src:t.payload.thumbnail,class:"image-content",mode:"heightFix",onClick:H},null,8,["data-url","src"])):e.createCommentVNode("",!0),"video"===t.type?(e.openBlock(),e.createElementBlock("view",{key:4,class:"video-snapshot","data-url":t.payload.video.url,onClick:j},[e.createElementVNode("image",{src:t.payload.thumbnail.url,style:e.normalizeStyle({height:(s=t.payload.thumbnail.width,a=t.payload.thumbnail.height,(s<200&&a<150?2*a:s>a?200/s*a*2:s===a||s<a?300:void 0)+"rpx")}),mode:"heightFix"},null,12,["src"]),e.createElementVNode("view",{class:"video-play-icon"})],8,["data-url"])):e.createCommentVNode("",!0),"file"===t.type?(e.openBlock(),e.createElementBlock("view",{key:5,class:"file-content"},[e.createElementVNode("view",{class:"file-info"},[e.createElementVNode("span",{class:"file-name"},e.toDisplayString(t.payload.name),1),e.createElementVNode("span",{class:"file-size"},e.toDisplayString((t.payload.size/1024).toFixed(2))+"KB",1)]),e.createElementVNode("image",{class:"file-img",src:"/static/message/file-icon.png"})])):e.createCommentVNode("",!0),"audio"===t.type?(e.openBlock(),e.createElementBlock("view",{key:6,class:"audio-content",onClick:e=>function(e){let t=N.playingMessage;t&&(w.stop(),t===e)||(N.playingMessage=e,w.src=e.payload.url,w.play())}(t)},[e.createElementVNode("view",{class:"audio-facade",style:e.normalizeStyle({width:7*Math.ceil(t.payload.duration)+50+"px"})},[e.createElementVNode("view",{class:e.normalizeClass(["audio-facade-bg",{"play-icon":N.playingMessage&&N.playingMessage.messageId===t.messageId}])},null,2),e.createElementVNode("view",null,[e.createTextVNode(e.toDisplayString(Math.ceil(t.payload.duration)||1),1),e.createElementVNode("span",null,'"')])],4)],8,["onClick"])):e.createCommentVNode("",!0),"order"===t.type?(e.openBlock(),e.createElementBlock("view",{key:7,class:"order-content"},[e.createElementVNode("view",{class:"order-id"},"订单号："+e.toDisplayString(t.payload.id),1),e.createElementVNode("view",{class:"order-body"},[e.createElementVNode("image",{src:t.payload.url,class:"order-img"},null,8,["src"]),e.createElementVNode("view",null,[e.createElementVNode("view",{class:"order-name"},e.toDisplayString(t.payload.name),1),e.createElementVNode("view",{class:"order-info"},[e.createElementVNode("view",{class:"order-price"},e.toDisplayString(t.payload.price),1),e.createElementVNode("view",{class:"order-count"},"共"+e.toDisplayString(t.payload.count)+"件",1)])])])])):e.createCommentVNode("",!0)]),t.senderId===e.unref(n).id?(e.openBlock(),e.createElementBlock("view",{key:0,class:e.normalizeClass(t.read?"message-read":"message-unread")},["success"===t.status?(e.openBlock(),e.createElementBlock("view",{key:0},e.toDisplayString(t.read?"已读":"未读"),1)):e.createCommentVNode("",!0)],2)):e.createCommentVNode("",!0)],40,["onContextmenu","onLongpress"])],2)]))]);var s,a})),128))],32)]),k.visible||C.visible?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("view",{key:0,class:"action-box"},[e.createElementVNode("view",{class:"action-top"},[e.createElementVNode("view",{onClick:U},[E.value?(e.openBlock(),e.createElementBlock("image",{key:0,class:"more",src:dd})):(e.openBlock(),e.createElementBlock("image",{key:1,class:"more",src:"/static/message/audio.png"}))]),E.value?(e.openBlock(),e.createElementBlock("view",{key:0,class:"record-input",onTouchend:e.withModifiers(G,["stop"]),onTouchstart:e.withModifiers(z,["stop"])},e.toDisplayString(u.recording?"松开发送":"按住说话"),33)):e.withDirectives((e.openBlock(),e.createElementBlock("input",{key:1,"onUpdate:modelValue":a[0]||(a[0]=e=>m.value=e),onConfirm:_,class:"consult-input",maxlength:"700",placeholder:"发送消息",type:"text"},null,544)),[[e.vModelText,m.value]]),e.createElementVNode("view",{onClick:q},[g.visible?(e.openBlock(),e.createElementBlock("image",{key:0,class:"more",src:dd})):(e.openBlock(),e.createElementBlock("image",{key:1,class:"more",src:"/static/message/emoji.png"}))]),e.createElementVNode("view",null,[e.createElementVNode("image",{onClick:a[1]||(a[1]=e=>(y.value=!y.value,void(g.visible=!1))),class:"more",src:"/static/message/more.png"})]),m.value?(e.openBlock(),e.createElementBlock("view",{key:2,class:"send-btn-box"},[e.createElementVNode("text",{class:"btn",onClick:a[2]||(a[2]=e=>_())},"发送")])):e.createCommentVNode("",!0)]),g.visible?(e.openBlock(),e.createElementBlock("view",{key:0,class:"action-bottom action-bottom-emoji"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(g.map,((t,i,s)=>(e.openBlock(),e.createElementBlock("image",{class:"emoji-item",key:s,src:g.url+t,onClick:e=>function(e){m.value+=e}(i)},null,8,["src","onClick"])))),128))])):e.createCommentVNode("",!0),y.value?(e.openBlock(),e.createElementBlock("view",{key:1,class:"action-bottom"},[e.createElementVNode("view",{class:"more-icon"},[e.createElementVNode("image",{onClick:a[3]||(a[3]=e=>{uni.chooseImage({count:9,success:e=>{e.tempFiles.forEach((e=>{s.im.createImageMessage({to:p,file:e,notification:{title:n.name+"发来一张图片",body:"[图片消息]",sound:"message",badge:"+1"},onProgress:function(e){i("log","at pages/message/private-chat.vue:521",e)},onSuccess:e=>{y.value=!1,A(e)},onFailed:e=>{i("log","at pages/message/private-chat.vue:528","error :",e)}})}))}})}),class:"operation-icon",src:"/static/message/picture.png"}),e.createElementVNode("view",{class:"operation-title"},"图片")]),e.createElementVNode("view",{class:"more-icon"},[e.createElementVNode("image",{onClick:a[4]||(a[4]=e=>{uni.chooseVideo({success:e=>{s.im.createVideoMessage({to:p,file:e,notification:{title:n.name+"发来一个视频",body:"[视频消息]",sound:"message",badge:"+1"},onProgress:function(e){i("log","at pages/message/private-chat.vue:492",e)},onSuccess:e=>{y.value=!1,A(e)},onFailed:e=>{i("log","at pages/message/private-chat.vue:499","error :",e)}})}})}),class:"operation-icon",src:"/static/message/video.png"}),e.createElementVNode("view",{class:"operation-title"},"视频")]),e.createElementVNode("view",{class:"more-icon"},[e.createElementVNode("image",{onClick:a[5]||(a[5]=e=>(f.orders=Ll.getOrderList(),void(f.visible=!0))),class:"operation-icon",src:"/static/message/order.png"}),e.createElementVNode("view",{class:"operation-title"},"订单")]),e.createElementVNode("view",{class:"more-icon"},[e.createElementVNode("image",{onClick:a[6]||(a[6]=e=>{uni.showActionSheet({itemList:["视频通话","音频通话"],success:e=>{const t=0===e.tapIndex?1:0,s=0===e.tapIndex?"邀请你视频通话":"邀请你语音通话";uni.$GRTC.call({calleeId:h.id,mediaType:t,notification:{title:n.name,body:s,sound:"ring",badge:"+1"}}).then((()=>{uni.navigateTo({url:"./rtc/private/dial"})})).catch((e=>{i("log","at pages/message/private-chat.vue:809","呼叫失败:",e),uni.showToast({icon:"error",title:"呼叫失败:"+e,duration:2e3})}))},fail:e=>{i("log","at pages/message/private-chat.vue:818",e.errMsg)}})}),class:"operation-icon",src:"/static/message/rtc.png"}),e.createElementVNode("view",{class:"operation-title"},"视频通话")])])):e.createCommentVNode("",!0)])),b.visible?(e.openBlock(),e.createElementBlock("view",{key:1,class:"action-popup",onTouchmove:a[7]||(a[7]=e.withModifiers((()=>{}),["stop","prevent"]))},[e.createElementVNode("view",{class:"layer"}),e.createElementVNode("view",{class:"action-list"},[e.createElementVNode("view",{class:"action-item",onClick:B},"删除"),b.recallable?(e.openBlock(),e.createElementBlock("view",{key:0,class:"action-item",onClick:P},"撤回")):e.createCommentVNode("",!0),e.createElementVNode("view",{class:"action-item",onClick:O},"多选"),e.createElementVNode("view",{class:"action-item",onClick:D},"取消")])],32)):e.createCommentVNode("",!0),C.visible?(e.openBlock(),e.createElementBlock("view",{key:2,class:"messageSelector-box"},[e.createElementVNode("image",{class:"messageSelector-btn",onClick:R,src:"/static/message/delete.png"})])):e.createCommentVNode("",!0),u.recording?(e.openBlock(),e.createElementBlock("view",{key:3,class:"record-loading"})):e.createCommentVNode("",!0),k.visible?(e.openBlock(),e.createElementBlock("video",{key:4,src:k.url,id:"videoPlayer",onFullscreenchange:$},null,40,["src"])):e.createCommentVNode("",!0),f.visible?(e.openBlock(),e.createElementBlock("view",{key:5,class:"order-list"},[e.createElementVNode("view",{class:"orders-content"},[e.createElementVNode("view",{class:"title"},[e.createElementVNode("view",null,"请选择一个订单"),e.createElementVNode("view",{class:"close",onClick:W},"×")]),e.createElementVNode("view",{class:"orders"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(f.orders,((t,a)=>(e.openBlock(),e.createElementBlock("view",{key:a,class:"order-item",onClick:e=>function(e){s.im.createCustomMessage({type:"order",payload:e,to:p,notification:{title:n.name+"发来一个订单",body:"[订单消息]",sound:"message",badge:"+1"},onSuccess:e=>{y.value=!1,A(e)},onFailed:e=>{i("log","at pages/message/private-chat.vue:553","error :",e)}}),f.visible=!1}(t)},[e.createElementVNode("view",{class:"order-id"},"订单号："+e.toDisplayString(t.id),1),e.createElementVNode("view",{class:"order-body"},[e.createElementVNode("image",{src:t.url,class:"order-img"},null,8,["src"]),e.createElementVNode("view",{class:"order-name"},e.toDisplayString(t.name),1),e.createElementVNode("view",{class:"order-right"},[e.createElementVNode("view",{class:"order-price"},e.toDisplayString(t.price),1),e.createElementVNode("view",{class:"order-count"},"共"+e.toDisplayString(t.count)+"件",1)])])],8,["onClick"])))),128))])])])):e.createCommentVNode("",!0)],32))}};const gd=X({name:"u-checkbox",emits:["update:modelValue","input","change"],props:{value:{type:Boolean,default:!1},modelValue:{type:Boolean,default:!1},name:{type:[String,Number],default:""},shape:{type:String,default:""},disabled:{type:[String,Boolean],default:""},labelDisabled:{type:[String,Boolean],default:""},activeColor:{type:String,default:""},iconSize:{type:[String,Number],default:""},labelSize:{type:[String,Number],default:""},size:{type:[String,Number],default:""},indeterminate:{type:Boolean,default:!1}},data:()=>({parentDisabled:!1,newParams:{},parent:null}),created(){this.parent=this.$u.$parent.call(this,"u-checkbox-group"),this.parent&&this.parent.children.push(this)},computed:{valueCom(){return this.modelValue},isDisabled(){return""!==this.disabled?this.disabled:!!this.parent&&this.parent.disabled},isLabelDisabled(){return""!==this.labelDisabled?this.labelDisabled:!!this.parent&&this.parent.labelDisabled},checkboxSize(){return this.size?this.size:this.parent?this.parent.size:34},checkboxIconSize(){return this.iconSize?this.iconSize:this.parent?this.parent.iconSize:20},elActiveColor(){return this.activeColor?this.activeColor:this.parent?this.parent.activeColor:"primary"},elShape(){return this.shape?this.shape:this.parent?this.parent.shape:"square"},iconStyle(){let e={};return this.elActiveColor&&this.valueCom&&!this.isDisabled&&(e.borderColor=this.elActiveColor,e.backgroundColor=this.elActiveColor),e.width=this.$u.addUnit(this.checkboxSize),e.height=this.$u.addUnit(this.checkboxSize),e},iconColor(){return this.indeterminate||this.valueCom?"#ffffff":"transparent"},iconClass(){let e=[];return e.push("u-checkbox__icon-wrap--"+this.elShape),1==this.valueCom&&e.push("u-checkbox__icon-wrap--checked"),this.isDisabled&&e.push("u-checkbox__icon-wrap--disabled"),this.valueCom&&this.isDisabled&&e.push("u-checkbox__icon-wrap--disabled--checked"),!0===this.indeterminate&&e.push("u-checkbox__icon-wrap--indeterminate"),e.join(" ")},checkboxStyle(){let e={};return this.parent&&this.parent.width&&(e.width=this.parent.width,e.flex=`0 0 ${this.parent.width}`),this.parent&&this.parent.wrap&&(e.width="100%",e.flex="0 0 100%"),e}},mounted(){this._emitEvent()},watch:{valueCom:{handler:function(e,t){this._emitEvent()}}},methods:{_emitEvent(){let e={value:this.valueCom,name:this.name};this.parent&&this.parent.emitEvent&&this.parent.emitEvent(e)},onClickLabel(){this.isLabelDisabled||this.isDisabled||this.setValue()},toggle(){this.isDisabled||this.setValue()},emitEvent(){let e={value:!this.valueCom,name:this.name};this.$emit("change",e),this.parent&&this.parent.emitEvent&&this.parent.emitEvent(e)},setValue(){let e=this.valueCom,t=0;if(this.parent&&this.parent.children&&this.parent.children.map((e=>{e.value&&t++})),1==e)this.emitEvent(),this.$emit("input",!e),this.$emit("update:modelValue",!e);else{if(this.parent&&t>=this.parent.max)return this.$u.toast(`最多可选${this.parent.max}项`);this.emitEvent(),this.$emit("input",!e),this.$emit("update:modelValue",!e)}}}},[["render",function(t,i,n,a,r,o){const l=s(e.resolveDynamicComponent("u-icon"),dc);return e.openBlock(),e.createElementBlock("view",{class:"u-checkbox",style:e.normalizeStyle([o.checkboxStyle])},[e.createElementVNode("view",{class:e.normalizeClass(["u-checkbox__icon-wrap",[o.iconClass]]),onClick:i[0]||(i[0]=(...e)=>o.toggle&&o.toggle(...e)),style:e.normalizeStyle([o.iconStyle])},[n.indeterminate?(e.openBlock(),e.createBlock(l,{key:0,class:"u-checkbox__icon-wrap__icon",name:"minus",size:o.checkboxIconSize,color:o.iconColor},null,8,["size","color"])):(e.openBlock(),e.createBlock(l,{key:1,class:"u-checkbox__icon-wrap__icon",name:"checkbox-mark",size:o.checkboxIconSize,color:o.iconColor},null,8,["size","color"]))],6),e.createElementVNode("view",{class:"u-checkbox__label",onClick:i[1]||(i[1]=(...e)=>o.onClickLabel&&o.onClickLabel(...e)),style:e.normalizeStyle({fontSize:t.$u.addUnit(n.labelSize)})},[e.renderSlot(t.$slots,"default",{},void 0,!0)],4)],4)}],["__scopeId","data-v-e19b94ec"]]);function yd(e,t,i){}const fd=X({name:"u-checkbox-group",emits:["update:modelValue","input","change"],mixins:[{methods:{dispatch(e,t,i){let s=this.$parent||this.$root,n=s.$options.name;for(;s&&(!n||n!==e);)s=s.$parent,s&&(n=s.$options.name);s&&s[t](i)},broadcast(e,t,i){yd.call(this,e,t,i)}}}],props:{value:{type:[String,Number,Array,Boolean],default:""},modelValue:{type:[String,Number,Array,Boolean],default:""},max:{type:[Number,String],default:999},disabled:{type:Boolean,default:!1},name:{type:[Boolean,String],default:""},labelDisabled:{type:Boolean,default:!1},shape:{type:String,default:"square"},activeColor:{type:String,default:"#2979ff"},size:{type:[String,Number],default:34},width:{type:String,default:"auto"},wrap:{type:Boolean,default:!1},iconSize:{type:[String,Number],default:20}},data:()=>({values:[],uFromData:{inputAlign:"left"}}),created(){this.children=[]},mounted(){let e=this.$u.$parent.call(this,"u-form");e&&Object.keys(this.uFromData).map((t=>{this.uFromData[t]=e[t]}))},methods:{emitEvent(e){let t=this.values||[];if(e.value){-1===t.indexOf(e.name)&&t.push(e.name)}else{let i=t.indexOf(e.name);i>-1&&t.splice(i,1)}this.$emit("change",t),this.$emit("input",t),this.$emit("update:modelValue",t),setTimeout((()=>{this.dispatch("u-form-item","onFieldChange",t)}),60)},_emitEvent(e){let t=this.values||[];if(e.value){-1===t.indexOf(e.name)&&t.push(e.name)}else{let i=t.indexOf(e.name);i>-1&&t.splice(i,1)}}}},[["render",function(t,i,s,n,a,r){return e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["u-checkbox-group u-clearfix","right"==a.uFromData.inputAlign?"flex-end":""])},[e.renderSlot(t.$slots,"default",{},void 0,!0)],2)}],["__scopeId","data-v-4dac56fe"]]),vd={name:"u-button",emits:["click","getphonenumber","getuserinfo","error","opensetting","launchapp","chooseavatar"],props:{hairLine:{type:Boolean,default:!0},type:{type:String,default:"default"},size:{type:String,default:"default"},shape:{type:String,default:"square"},plain:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},openType:{type:String,default:""},formType:{type:String,default:""},appParameter:{type:String,default:""},hoverStopPropagation:{type:Boolean,default:!1},lang:{type:String,default:"en"},sessionFrom:{type:String,default:""},sendMessageTitle:{type:String,default:""},sendMessagePath:{type:String,default:""},sendMessageImg:{type:String,default:""},showMessageCard:{type:Boolean,default:!1},hoverBgColor:{type:String,default:""},rippleBgColor:{type:String,default:""},ripple:{type:Boolean,default:!1},hoverClass:{type:String,default:""},customStyle:{type:Object,default:()=>({})},dataName:{type:String,default:""},throttleTime:{type:[String,Number],default:500},hoverStartTime:{type:[String,Number],default:20},hoverStayTime:{type:[String,Number],default:150},timerId:{type:[String,Number]}},computed:{getHoverClass(){if(this.loading||this.disabled||this.ripple||this.hoverClass)return"";let e="";return e=this.plain?"u-"+this.type+"-plain-hover":"u-"+this.type+"-hover",e},showHairLineBorder(){return["primary","success","error","warning"].indexOf(this.type)>=0&&!this.plain?"":"u-hairline-border"}},data(){return{btnTimerId:this.timerId||"button_"+Math.floor(1e8*Math.random()+0),rippleTop:0,rippleLeft:0,fields:{},waveActive:!1}},methods:{click(e){this.$u.throttle((()=>{!0!==this.loading&&!0!==this.disabled&&(this.ripple&&(this.waveActive=!1,this.$nextTick((function(){this.getWaveQuery(e)}))),this.$emit("click",e))}),this.throttleTime,!0,this.btnTimerId)},getWaveQuery(e){this.getElQuery().then((t=>{let i=t[0];if(!i.width||!i.width)return;if(i.targetWidth=i.height>i.width?i.height:i.width,!i.targetWidth)return;this.fields=i;let s="",n="";s=e.touches[0].clientX,n=e.touches[0].clientY,this.rippleTop=n-i.top-i.targetWidth/2,this.rippleLeft=s-i.left-i.targetWidth/2,this.$nextTick((()=>{this.waveActive=!0}))}))},getElQuery(){return new Promise((e=>{let t="";t=uni.createSelectorQuery().in(this),t.select(".u-btn").boundingClientRect(),t.exec((t=>{e(t)}))}))},getphonenumber(e){this.$emit("getphonenumber",e)},getuserinfo(e){this.$emit("getuserinfo",e)},error(e){this.$emit("error",e)},opensetting(e){this.$emit("opensetting",e)},launchapp(e){this.$emit("launchapp",e)},chooseavatar(e){this.$emit("chooseavatar",e)}}};const Ed=X(vd,[["render",function(t,i,s,n,a,r){return e.openBlock(),e.createElementBlock("button",{id:"u-wave-btn",class:e.normalizeClass(["u-btn u-line-1 u-fix-ios-appearance",["u-size-"+s.size,s.plain?"u-btn--"+s.type+"--plain":"",s.loading?"u-loading":"","circle"==s.shape?"u-round-circle":"",s.hairLine?r.showHairLineBorder:"u-btn--bold-border","u-btn--"+s.type,s.disabled?`u-btn--${s.type}--disabled`:""]]),"hover-start-time":Number(s.hoverStartTime),"hover-stay-time":Number(s.hoverStayTime),disabled:s.disabled,"form-type":s.formType,"open-type":s.openType,"app-parameter":s.appParameter,"hover-stop-propagation":s.hoverStopPropagation,"send-message-title":s.sendMessageTitle,"send-message-path":"sendMessagePath",lang:s.lang,"data-name":s.dataName,"session-from":s.sessionFrom,"send-message-img":s.sendMessageImg,"show-message-card":s.showMessageCard,onGetphonenumber:i[0]||(i[0]=(...e)=>r.getphonenumber&&r.getphonenumber(...e)),onGetuserinfo:i[1]||(i[1]=(...e)=>r.getuserinfo&&r.getuserinfo(...e)),onError:i[2]||(i[2]=(...e)=>r.error&&r.error(...e)),onOpensetting:i[3]||(i[3]=(...e)=>r.opensetting&&r.opensetting(...e)),onLaunchapp:i[4]||(i[4]=(...e)=>r.launchapp&&r.launchapp(...e)),onChooseavatar:i[5]||(i[5]=(...e)=>r.chooseavatar&&r.chooseavatar(...e)),style:e.normalizeStyle([s.customStyle,{overflow:s.ripple?"hidden":"visible"}]),onClick:i[6]||(i[6]=e.withModifiers((e=>r.click(e)),["stop"])),"hover-class":r.getHoverClass,loading:s.loading},[e.renderSlot(t.$slots,"default",{},void 0,!0),s.ripple?(e.openBlock(),e.createElementBlock("view",{key:0,class:e.normalizeClass(["u-wave-ripple",[a.waveActive?"u-wave-active":""]]),style:e.normalizeStyle({top:a.rippleTop+"px",left:a.rippleLeft+"px",width:a.fields.targetWidth+"px",height:a.fields.targetWidth+"px","background-color":s.rippleBgColor||"rgba(0, 0, 0, 0.15)"})},null,6)):e.createCommentVNode("",!0)],46,["hover-start-time","hover-stay-time","disabled","form-type","open-type","app-parameter","hover-stop-propagation","send-message-title","lang","data-name","session-from","send-message-img","show-message-card","hover-class","loading"])}],["__scopeId","data-v-942515d8"]]);const wd=X({name:"u-mask",emits:["click"],props:{show:{type:Boolean,default:!1},zIndex:{type:[Number,String],default:""},customStyle:{type:Object,default:()=>({})},zoom:{type:Boolean,default:!0},duration:{type:[Number,String],default:300},maskClickAble:{type:Boolean,default:!0},blur:{type:[Number,String],default:0}},data:()=>({zoomStyle:{transform:""},scale:"scale(1.2, 1.2)"}),watch:{show(e){e&&this.zoom?this.zoomStyle.transform="scale(1, 1)":!e&&this.zoom&&(this.zoomStyle.transform=this.scale)}},computed:{maskStyle(){let e={backgroundColor:"rgba(0, 0, 0, 0.6)"};return this.show?e.zIndex=this.zIndex?this.zIndex:this.$u.zIndex.mask:e.zIndex=-1,e.transition=`all ${this.duration/1e3}s ease-in-out`,Object.keys(this.customStyle).length&&(e={...e,...this.customStyle}),e},filterStyle(){let{blur:e}=this,t={};return e&&(t.backdropFilter=`blur(${e}rpx)`),t}},methods:{click(){this.maskClickAble&&this.$emit("click")}}},[["render",function(t,i,s,n,a,r){return e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["u-mask",{"u-mask-zoom":s.zoom,"u-mask-show":s.show}]),"hover-stop-propagation":"",style:e.normalizeStyle([r.maskStyle,a.zoomStyle,r.filterStyle]),onClick:i[0]||(i[0]=(...e)=>r.click&&r.click(...e)),onTouchmove:e.withModifiers((()=>{}),["stop","prevent"])},[e.renderSlot(t.$slots,"default",{},void 0,!0)],38)}],["__scopeId","data-v-005d3602"]]);const Nd=X({name:"u-popup",emits:["update:modelValue","input","open","close"],props:{value:{type:Boolean,default:!1},modelValue:{type:Boolean,default:!1},show:{type:Boolean,default:!1},mode:{type:String,default:"left"},mask:{type:Boolean,default:!0},length:{type:[Number,String],default:"auto"},zoom:{type:Boolean,default:!0},safeAreaInsetBottom:{type:Boolean,default:!1},maskCloseAble:{type:Boolean,default:!0},customStyle:{type:Object,default:()=>({})},popup:{type:Boolean,default:!0},borderRadius:{type:[Number,String],default:0},zIndex:{type:[Number,String],default:""},closeable:{type:Boolean,default:!1},closeIcon:{type:String,default:"close"},closeIconPos:{type:String,default:"top-right"},closeIconColor:{type:String,default:"#909399"},closeIconSize:{type:[String,Number],default:"30"},width:{type:String,default:""},height:{type:String,default:""},negativeTop:{type:[String,Number],default:0},maskCustomStyle:{type:Object,default:()=>({})},duration:{type:[String,Number],default:250},blur:{type:[String,Number],default:0},backgroundColor:{type:String,default:"#ffffff"}},data:()=>({visibleSync:!1,showDrawer:!1,timer:null,closeFromInner:!1}),computed:{valueCom(){return this.modelValue},style(){let e={};if("left"==this.mode||"right"==this.mode?e={width:this.width?this.getUnitValue(this.width):this.getUnitValue(this.length),height:"100%",transform:`translate3D(${"left"==this.mode?"-100%":"100%"},0px,0px)`}:"top"!=this.mode&&"bottom"!=this.mode||(e={width:"100%",height:this.height?this.getUnitValue(this.height):this.getUnitValue(this.length),transform:`translate3D(0px,${"top"==this.mode?"-100%":"100%"},0px)`}),e.zIndex=this.uZindex,this.borderRadius){switch(this.mode){case"left":e.borderRadius=`0 ${this.borderRadius}rpx ${this.borderRadius}rpx 0`;break;case"top":e.borderRadius=`0 0 ${this.borderRadius}rpx ${this.borderRadius}rpx`;break;case"right":e.borderRadius=`${this.borderRadius}rpx 0 0 ${this.borderRadius}rpx`;break;case"bottom":e.borderRadius=`${this.borderRadius}rpx ${this.borderRadius}rpx 0 0`}e.overflow="hidden"}return this.duration&&(e.transition=`all ${this.duration/1e3}s linear`),e},centerStyle(){let e={};return e.width=this.width?this.getUnitValue(this.width):this.getUnitValue(this.length),e.height=this.height?this.getUnitValue(this.height):"auto",e.zIndex=this.uZindex,e.marginTop=`-${this.$u.addUnit(this.negativeTop)}`,this.borderRadius&&(e.borderRadius=`${this.borderRadius}rpx`,e.overflow="hidden"),e},uZindex(){return this.zIndex?this.zIndex:this.$u.zIndex.popup}},watch:{valueCom:{handler(e){e?this.open():this.closeFromInner||this.close(),this.closeFromInner=!1}}},mounted(){this.valueCom&&this.open()},methods:{getUnitValue:e=>/(%|px|rpx|auto)$/.test(e)?e:e+"rpx",maskClick(){this.close()},close(){this.closeFromInner=!0,this.change("showDrawer","visibleSync",!1)},modeCenterClose(e){"center"==e&&this.maskCloseAble&&this.close()},open(){this.change("visibleSync","showDrawer",!0)},change(e,t,i){1==this.popup&&(this.$emit("input",i),this.$emit("update:modelValue",i)),this[e]=i,i?this.$nextTick((()=>{this[t]=i,this.$emit(i?"open":"close")})):this.timer=setTimeout((()=>{this[t]=i,this.$emit(i?"open":"close")}),this.duration)}}},[["render",function(t,i,n,a,r,o){const l=s(e.resolveDynamicComponent("u-mask"),wd),c=s(e.resolveDynamicComponent("u-icon"),dc);return r.visibleSync?(e.openBlock(),e.createElementBlock("view",{key:0,style:e.normalizeStyle([n.customStyle,{zIndex:o.uZindex-1,"--bgcolor":n.backgroundColor}]),class:"u-drawer","hover-stop-propagation":""},[e.createVNode(l,{blur:n.blur,duration:n.duration,"custom-style":n.maskCustomStyle,maskClickAble:n.maskCloseAble,"z-index":o.uZindex-2,show:r.showDrawer&&n.mask,onClick:o.maskClick},null,8,["blur","duration","custom-style","maskClickAble","z-index","show","onClick"]),e.createElementVNode("view",{class:e.normalizeClass(["u-drawer-content",[n.safeAreaInsetBottom?"safe-area-inset-bottom":"","u-drawer-"+n.mode,r.showDrawer?"u-drawer-content-visible":"",n.zoom&&"center"==n.mode?"u-animation-zoom":""]]),onClick:i[3]||(i[3]=e=>o.modeCenterClose(n.mode)),onTouchmove:i[4]||(i[4]=e.withModifiers((()=>{}),["stop","prevent"])),style:e.normalizeStyle([o.style])},["center"==n.mode?(e.openBlock(),e.createElementBlock("view",{key:0,class:"u-mode-center-box",onClick:i[0]||(i[0]=e.withModifiers((()=>{}),["stop","prevent"])),onTouchmove:i[1]||(i[1]=e.withModifiers((()=>{}),["stop","prevent"])),style:e.normalizeStyle([o.centerStyle])},[n.closeable?(e.openBlock(),e.createBlock(c,{key:0,onClick:o.close,class:e.normalizeClass(["u-close",["u-close--"+n.closeIconPos]]),name:n.closeIcon,color:n.closeIconColor,size:n.closeIconSize},null,8,["onClick","class","name","color","size"])):e.createCommentVNode("",!0),e.createElementVNode("scroll-view",{class:"u-drawer__scroll-view","scroll-y":"true"},[e.renderSlot(t.$slots,"default",{},void 0,!0)])],36)):(e.openBlock(),e.createElementBlock("scroll-view",{key:1,class:"u-drawer__scroll-view","scroll-y":"true"},[e.renderSlot(t.$slots,"default",{},void 0,!0)])),e.createElementVNode("view",{onClick:i[2]||(i[2]=(...e)=>o.close&&o.close(...e)),class:e.normalizeClass(["u-close",["u-close--"+n.closeIconPos]])},["center"!=n.mode&&n.closeable?(e.openBlock(),e.createBlock(c,{key:0,name:n.closeIcon,color:n.closeIconColor,size:n.closeIconSize},null,8,["name","color","size"])):e.createCommentVNode("",!0)],2)],38)],4)):e.createCommentVNode("",!0)}],["__scopeId","data-v-7e3f5120"]]),kd=[{letter:"A",city:"阿坝县"},{letter:"A",city:"阿巴嘎旗"},{letter:"A",city:"阿坝藏族羌族自治州"},{letter:"A",city:"阿尔山市"},{letter:"A",city:"阿合奇县"},{letter:"A",city:"阿克塞哈萨克族自治县"},{letter:"A",city:"阿克苏市"},{letter:"A",city:"阿克苏地区"},{letter:"A",city:"阿克陶县"},{letter:"A",city:"阿拉尔市"},{letter:"A",city:"阿拉山口市"},{letter:"A",city:"阿拉善盟"},{letter:"A",city:"阿拉善右旗"},{letter:"A",city:"阿拉善左旗"},{letter:"A",city:"阿勒泰市"},{letter:"A",city:"阿勒泰地区"},{letter:"A",city:"阿里地区"},{letter:"A",city:"阿鲁科尔沁旗"},{letter:"A",city:"安达市"},{letter:"A",city:"安多县"},{letter:"A",city:"安福县"},{letter:"A",city:"昂仁县"},{letter:"A",city:"安国市"},{letter:"A",city:"安化县"},{letter:"A",city:"安吉县"},{letter:"A",city:"安康市"},{letter:"A",city:"安龙县"},{letter:"A",city:"安陆市"},{letter:"A",city:"安宁市"},{letter:"A",city:"安平县"},{letter:"A",city:"安庆市"},{letter:"A",city:"安丘市"},{letter:"A",city:"安仁县"},{letter:"A",city:"安塞区"},{letter:"A",city:"鞍山市"},{letter:"A",city:"安顺市"},{letter:"A",city:"安图县"},{letter:"A",city:"安溪县"},{letter:"A",city:"安乡县"},{letter:"A",city:"安新县"},{letter:"A",city:"安阳市"},{letter:"A",city:"安阳县"},{letter:"A",city:"安义县"},{letter:"A",city:"安远县"},{letter:"A",city:"安岳县"},{letter:"A",city:"安泽县"},{letter:"A",city:"敖汉旗"},{letter:"A",city:"澳门特别行政区"},{letter:"A",city:"阿荣旗"},{letter:"A",city:"阿图什市"},{letter:"A",city:"阿瓦提县"},{letter:"B",city:"巴楚县"},{letter:"B",city:"巴东县"},{letter:"B",city:"白城市"},{letter:"B",city:"拜城县"},{letter:"B",city:"白河县"},{letter:"B",city:"白朗县"},{letter:"B",city:"拜泉县"},{letter:"B",city:"百色市"},{letter:"B",city:"白沙黎族自治县"},{letter:"B",city:"白山市"},{letter:"B",city:"白水县"},{letter:"B",city:"柏乡县"},{letter:"B",city:"白银市"},{letter:"B",city:"白玉县"},{letter:"B",city:"巴里坤哈萨克自治县"},{letter:"B",city:"巴林右旗"},{letter:"B",city:"巴林左旗"},{letter:"B",city:"巴马瑶族自治县"},{letter:"B",city:"班戈县"},{letter:"B",city:"班玛县"},{letter:"B",city:"保德县"},{letter:"B",city:"保定市"},{letter:"B",city:"宝丰县"},{letter:"B",city:"宝鸡市"},{letter:"B",city:"保靖县"},{letter:"B",city:"保康县"},{letter:"B",city:"宝清县"},{letter:"B",city:"保山市"},{letter:"B",city:"保亭黎族苗族自治县"},{letter:"B",city:"包头市"},{letter:"B",city:"宝兴县"},{letter:"B",city:"宝应县"},{letter:"B",city:"巴青县"},{letter:"B",city:"八宿县"},{letter:"B",city:"巴塘县"},{letter:"B",city:"巴彦县"},{letter:"B",city:"巴彦淖尔市"},{letter:"B",city:"巴音郭楞蒙古自治州"},{letter:"B",city:"巴中市"},{letter:"B",city:"霸州市"},{letter:"B",city:"北安市"},{letter:"B",city:"北川羌族自治县"},{letter:"B",city:"北海市"},{letter:"B",city:"北京市"},{letter:"B",city:"北流市"},{letter:"B",city:"北票市"},{letter:"B",city:"北屯市"},{letter:"B",city:"北镇市"},{letter:"B",city:"蚌埠市"},{letter:"B",city:"本溪市"},{letter:"B",city:"本溪满族自治县"},{letter:"B",city:"边坝县"},{letter:"B",city:"毕节市"},{letter:"B",city:"宾川县"},{letter:"B",city:"滨海县"},{letter:"B",city:"宾县"},{letter:"B",city:"彬县"},{letter:"B",city:"宾阳县"},{letter:"B",city:"滨州市"},{letter:"B",city:"比如县"},{letter:"B",city:"泌阳县"},{letter:"B",city:"博爱县"},{letter:"B",city:"博白县"},{letter:"B",city:"博尔塔拉蒙古自治州"},{letter:"B",city:"博湖县"},{letter:"B",city:"博乐市"},{letter:"B",city:"勃利县"},{letter:"B",city:"博罗县"},{letter:"B",city:"波密县"},{letter:"B",city:"泊头市"},{letter:"B",city:"博兴县"},{letter:"B",city:"博野县"},{letter:"B",city:"亳州市"},{letter:"B",city:"布尔津县"},{letter:"B",city:"布拖县"},{letter:"C",city:"苍南县"},{letter:"C",city:"苍梧县"},{letter:"C",city:"苍溪县"},{letter:"C",city:"沧县"},{letter:"C",city:"沧源佤族自治县"},{letter:"C",city:"沧州市"},{letter:"C",city:"曹县"},{letter:"C",city:"册亨县"},{letter:"C",city:"策勒县"},{letter:"C",city:"岑巩县"},{letter:"C",city:"岑溪市"},{letter:"C",city:"察布查尔锡伯自治县"},{letter:"C",city:"察哈尔右翼后旗"},{letter:"C",city:"察哈尔右翼前旗"},{letter:"C",city:"察哈尔右翼中旗"},{letter:"C",city:"柴桑区"},{letter:"C",city:"茶陵县"},{letter:"C",city:"长白朝鲜族自治县"},{letter:"C",city:"长春市"},{letter:"C",city:"长岛县"},{letter:"C",city:"常德市"},{letter:"C",city:"昌都市"},{letter:"C",city:"长丰县"},{letter:"C",city:"长葛市"},{letter:"C",city:"长海县"},{letter:"C",city:"昌吉市"},{letter:"C",city:"昌江黎族自治县"},{letter:"C",city:"昌吉回族自治州"},{letter:"C",city:"昌乐县"},{letter:"C",city:"昌黎县"},{letter:"C",city:"长岭县"},{letter:"C",city:"常宁市"},{letter:"C",city:"长宁县"},{letter:"C",city:"昌宁县"},{letter:"C",city:"长沙市"},{letter:"C",city:"长沙县"},{letter:"C",city:"常山县"},{letter:"C",city:"常熟市"},{letter:"C",city:"长顺县"},{letter:"C",city:"长泰县"},{letter:"C",city:"长汀县"},{letter:"C",city:"昌图县"},{letter:"C",city:"长武县"},{letter:"C",city:"长兴县"},{letter:"C",city:"长阳土家族自治县"},{letter:"C",city:"昌邑市"},{letter:"C",city:"长垣县"},{letter:"C",city:"长治市"},{letter:"C",city:"长治县"},{letter:"C",city:"常州市"},{letter:"C",city:"巢湖市"},{letter:"C",city:"朝阳市"},{letter:"C",city:"朝阳县"},{letter:"C",city:"潮州市"},{letter:"C",city:"察雅县"},{letter:"C",city:"察隅县"},{letter:"C",city:"陈巴尔虎旗"},{letter:"C",city:"成安县"},{letter:"C",city:"城步苗族自治县"},{letter:"C",city:"澄城县"},{letter:"C",city:"承德市"},{letter:"C",city:"承德县"},{letter:"C",city:"成都市"},{letter:"C",city:"称多县"},{letter:"C",city:"城固县"},{letter:"C",city:"澄江县"},{letter:"C",city:"城口县"},{letter:"C",city:"澄迈县"},{letter:"C",city:"成武县"},{letter:"C",city:"成县"},{letter:"C",city:"辰溪县"},{letter:"C",city:"郴州市"},{letter:"C",city:"赤壁市"},{letter:"C",city:"赤城县"},{letter:"C",city:"赤峰市"},{letter:"C",city:"茌平县"},{letter:"C",city:"赤水市"},{letter:"C",city:"池州市"},{letter:"C",city:"崇明区"},{letter:"C",city:"重庆市"},{letter:"C",city:"崇仁县"},{letter:"C",city:"崇信县"},{letter:"C",city:"崇阳县"},{letter:"C",city:"崇义县"},{letter:"C",city:"崇州市"},{letter:"C",city:"崇左市"},{letter:"C",city:"淳安县"},{letter:"C",city:"淳化县"},{letter:"C",city:"楚雄市"},{letter:"C",city:"楚雄彝族自治州"},{letter:"C",city:"滁州市"},{letter:"C",city:"慈利县"},{letter:"C",city:"慈溪市"},{letter:"C",city:"磁县"},{letter:"C",city:"从江县"},{letter:"C",city:"措美县"},{letter:"C",city:"错那县"},{letter:"C",city:"措勤县"},{letter:"D",city:"大安市"},{letter:"D",city:"大柴旦行政委员会"},{letter:"D",city:"大厂回族自治县"},{letter:"D",city:"达尔罕茂明安联合旗"},{letter:"D",city:"大方县"},{letter:"D",city:"大关县"},{letter:"D",city:"大化瑶族自治县"},{letter:"D",city:"大城县"},{letter:"D",city:"岱山县"},{letter:"D",city:"代县"},{letter:"D",city:"达拉特旗"},{letter:"D",city:"大理市"},{letter:"D",city:"大荔县"},{letter:"D",city:"大连市"},{letter:"D",city:"大理白族自治州"},{letter:"D",city:"大名县"},{letter:"D",city:"丹巴县"},{letter:"D",city:"郸城县"},{letter:"D",city:"丹东市"},{letter:"D",city:"丹凤县"},{letter:"D",city:"宕昌县"},{letter:"D",city:"砀山县"},{letter:"D",city:"当涂县"},{letter:"D",city:"当雄县"},{letter:"D",city:"当阳市"},{letter:"D",city:"大宁县"},{letter:"D",city:"丹江口市"},{letter:"D",city:"丹棱县"},{letter:"D",city:"丹阳市"},{letter:"D",city:"丹寨县"},{letter:"D",city:"儋州市"},{letter:"D",city:"稻城县"},{letter:"D",city:"道孚县"},{letter:"D",city:"道县"},{letter:"D",city:"道真仡佬族苗族自治县"},{letter:"D",city:"大埔县"},{letter:"D",city:"大庆市"},{letter:"D",city:"达日县"},{letter:"D",city:"大石桥市"},{letter:"D",city:"大田县"},{letter:"D",city:"大同市"},{letter:"D",city:"大同县"},{letter:"D",city:"大通回族土族自治县"},{letter:"D",city:"大悟县"},{letter:"D",city:"大新县"},{letter:"D",city:"大兴安岭地区"},{letter:"D",city:"大姚县"},{letter:"D",city:"大冶市"},{letter:"D",city:"大邑县"},{letter:"D",city:"大英县"},{letter:"D",city:"大余县"},{letter:"D",city:"达州市"},{letter:"D",city:"大竹县"},{letter:"D",city:"德安县"},{letter:"D",city:"德保县"},{letter:"D",city:"德昌县"},{letter:"D",city:"德格县"},{letter:"D",city:"德宏傣族景颇族自治州"},{letter:"D",city:"德化县"},{letter:"D",city:"德惠市"},{letter:"D",city:"德江县"},{letter:"D",city:"德令哈市"},{letter:"D",city:"登封市"},{letter:"D",city:"磴口县"},{letter:"D",city:"灯塔市"},{letter:"D",city:"邓州市"},{letter:"D",city:"德钦县"},{letter:"D",city:"德清县"},{letter:"D",city:"德庆县"},{letter:"D",city:"得荣县"},{letter:"D",city:"德兴市"},{letter:"D",city:"德阳市"},{letter:"D",city:"德州市"},{letter:"D",city:"垫江县"},{letter:"D",city:"调兵山市"},{letter:"D",city:"迭部县"},{letter:"D",city:"定安县"},{letter:"D",city:"定边县"},{letter:"D",city:"定结县"},{letter:"D",city:"定南县"},{letter:"D",city:"丁青县"},{letter:"D",city:"定日县"},{letter:"D",city:"定西市"},{letter:"D",city:"定襄县"},{letter:"D",city:"定兴县"},{letter:"D",city:"定远县"},{letter:"D",city:"定州市"},{letter:"D",city:"迪庆藏族自治州"},{letter:"D",city:"东安县"},{letter:"D",city:"东阿县"},{letter:"D",city:"东方市"},{letter:"D",city:"东丰县"},{letter:"D",city:"东港市"},{letter:"D",city:"东莞市"},{letter:"D",city:"东光县"},{letter:"D",city:"东海县"},{letter:"D",city:"洞口县"},{letter:"D",city:"东兰县"},{letter:"D",city:"东辽县"},{letter:"D",city:"东明县"},{letter:"D",city:"东宁市"},{letter:"D",city:"东平县"},{letter:"D",city:"东山县"},{letter:"D",city:"东台市"},{letter:"D",city:"东乌珠穆沁旗"},{letter:"D",city:"东乡族自治县"},{letter:"D",city:"东兴市"},{letter:"D",city:"东阳市"},{letter:"D",city:"东营市"},{letter:"D",city:"东源县"},{letter:"D",city:"东至县"},{letter:"D",city:"都安瑶族自治县"},{letter:"D",city:"都昌县"},{letter:"D",city:"杜尔伯特蒙古族自治县"},{letter:"D",city:"都江堰市"},{letter:"D",city:"都兰县"},{letter:"D",city:"敦化市"},{letter:"D",city:"敦煌市"},{letter:"D",city:"多伦县"},{letter:"D",city:"独山县"},{letter:"D",city:"都匀市"},{letter:"E",city:"峨边彝族自治县"},{letter:"E",city:"鄂尔多斯市"},{letter:"E",city:"额尔古纳市"},{letter:"E",city:"额济纳旗"},{letter:"E",city:"鄂伦春自治旗"},{letter:"E",city:"峨眉山市"},{letter:"E",city:"额敏县"},{letter:"E",city:"恩平市"},{letter:"E",city:"恩施市"},{letter:"E",city:"恩施土家族苗族自治州"},{letter:"E",city:"二连浩特市"},{letter:"E",city:"洱源县"},{letter:"E",city:"峨山彝族自治县"},{letter:"E",city:"鄂托克旗"},{letter:"E",city:"鄂托克前旗"},{letter:"E",city:"鄂温克族自治旗"},{letter:"E",city:"鄂州市"},{letter:"F",city:"法库县"},{letter:"F",city:"繁昌县"},{letter:"F",city:"方城县"},{letter:"F",city:"防城港市"},{letter:"F",city:"方山县"},{letter:"F",city:"房县"},{letter:"F",city:"方正县"},{letter:"F",city:"范县"},{letter:"F",city:"繁峙县"},{letter:"F",city:"肥城市"},{letter:"F",city:"肥东县"},{letter:"F",city:"肥西县"},{letter:"F",city:"费县"},{letter:"F",city:"肥乡县"},{letter:"F",city:"丰城市"},{letter:"F",city:"凤城市"},{letter:"F",city:"丰都县"},{letter:"F",city:"凤冈县"},{letter:"F",city:"凤凰县"},{letter:"F",city:"奉节县"},{letter:"F",city:"封开县"},{letter:"F",city:"丰宁满族自治县"},{letter:"F",city:"凤庆县"},{letter:"F",city:"封丘县"},{letter:"F",city:"凤山县"},{letter:"F",city:"丰顺县"},{letter:"F",city:"凤台县"},{letter:"F",city:"丰县"},{letter:"F",city:"凤县"},{letter:"F",city:"凤翔县"},{letter:"F",city:"奉新县"},{letter:"F",city:"凤阳县"},{letter:"F",city:"丰镇市"},{letter:"F",city:"汾西县"},{letter:"F",city:"汾阳市"},{letter:"F",city:"分宜县"},{letter:"F",city:"佛冈县"},{letter:"F",city:"佛坪县"},{letter:"F",city:"佛山市"},{letter:"F",city:"福安市"},{letter:"F",city:"阜城县"},{letter:"F",city:"富川瑶族自治县"},{letter:"F",city:"福鼎市"},{letter:"F",city:"扶风县"},{letter:"F",city:"福贡县"},{letter:"F",city:"扶沟县"},{letter:"F",city:"府谷县"},{letter:"F",city:"福海县"},{letter:"F",city:"富锦市"},{letter:"F",city:"阜康市"},{letter:"F",city:"浮梁县"},{letter:"F",city:"富民县"},{letter:"F",city:"阜南县"},{letter:"F",city:"阜宁县"},{letter:"F",city:"富宁县"},{letter:"F",city:"阜平县"},{letter:"F",city:"富平县"},{letter:"F",city:"福清市"},{letter:"F",city:"福泉市"},{letter:"F",city:"浮山县"},{letter:"F",city:"抚顺市"},{letter:"F",city:"富顺县"},{letter:"F",city:"抚顺县"},{letter:"F",city:"抚松县"},{letter:"F",city:"扶绥县"},{letter:"F",city:"富县"},{letter:"F",city:"阜新市"},{letter:"F",city:"阜新蒙古族自治县"},{letter:"F",city:"阜阳市"},{letter:"F",city:"扶余市"},{letter:"F",city:"富裕县"},{letter:"F",city:"富源县"},{letter:"F",city:"抚远市"},{letter:"F",city:"富蕴县"},{letter:"F",city:"福州市"},{letter:"F",city:"抚州市"},{letter:"G",city:"噶尔县"},{letter:"G",city:"改则县"},{letter:"G",city:"盖州市"},{letter:"G",city:"甘德县"},{letter:"G",city:"岗巴县"},{letter:"G",city:"刚察县"},{letter:"G",city:"甘谷县"},{letter:"G",city:"甘洛县"},{letter:"G",city:"甘南县"},{letter:"G",city:"甘南藏族自治州"},{letter:"G",city:"甘泉县"},{letter:"G",city:"赣州市"},{letter:"G",city:"甘孜县"},{letter:"G",city:"甘孜藏族自治州"},{letter:"G",city:"高安市"},{letter:"G",city:"高碑店市"},{letter:"G",city:"皋兰县"},{letter:"G",city:"高密市"},{letter:"G",city:"高平市"},{letter:"G",city:"高青县"},{letter:"G",city:"高台县"},{letter:"G",city:"高唐县"},{letter:"G",city:"高县"},{letter:"G",city:"高阳县"},{letter:"G",city:"高邑县"},{letter:"G",city:"高邮市"},{letter:"G",city:"高州市"},{letter:"G",city:"格尔木市"},{letter:"G",city:"革吉县"},{letter:"G",city:"个旧市"},{letter:"G",city:"耿马傣族佤族自治县"},{letter:"G",city:"根河市"},{letter:"G",city:"公安县"},{letter:"G",city:"工布江达县"},{letter:"G",city:"恭城瑶族自治县"},{letter:"G",city:"贡嘎县"},{letter:"G",city:"共和县"},{letter:"G",city:"贡觉县"},{letter:"G",city:"巩留县"},{letter:"G",city:"共青城市"},{letter:"G",city:"贡山独龙族怒族自治县"},{letter:"G",city:"珙县"},{letter:"G",city:"巩义市"},{letter:"G",city:"公主岭市"},{letter:"G",city:"固安县"},{letter:"G",city:"广安市"},{letter:"G",city:"广昌县"},{letter:"G",city:"广德县"},{letter:"G",city:"广汉市"},{letter:"G",city:"广河县"},{letter:"G",city:"广灵县"},{letter:"G",city:"广南县"},{letter:"G",city:"广宁县"},{letter:"G",city:"广平县"},{letter:"G",city:"广饶县"},{letter:"G",city:"光山县"},{letter:"G",city:"广水市"},{letter:"G",city:"广元市"},{letter:"G",city:"光泽县"},{letter:"G",city:"广州市"},{letter:"G",city:"广宗县"},{letter:"G",city:"关岭布依族苗族自治县"},{letter:"G",city:"灌南县"},{letter:"G",city:"馆陶县"},{letter:"G",city:"冠县"},{letter:"G",city:"灌阳县"},{letter:"G",city:"灌云县"},{letter:"G",city:"瓜州县"},{letter:"G",city:"谷城县"},{letter:"G",city:"故城县"},{letter:"G",city:"贵德县"},{letter:"G",city:"贵定县"},{letter:"G",city:"桂东县"},{letter:"G",city:"贵港市"},{letter:"G",city:"桂林市"},{letter:"G",city:"贵南县"},{letter:"G",city:"桂平市"},{letter:"G",city:"贵溪市"},{letter:"G",city:"贵阳市"},{letter:"G",city:"桂阳县"},{letter:"G",city:"古交市"},{letter:"G",city:"古浪县"},{letter:"G",city:"古蔺县"},{letter:"G",city:"果洛藏族自治州"},{letter:"G",city:"固始县"},{letter:"G",city:"古田县"},{letter:"G",city:"古县"},{letter:"G",city:"固阳县"},{letter:"G",city:"沽源县"},{letter:"G",city:"固原市"},{letter:"G",city:"古丈县"},{letter:"G",city:"固镇县"},{letter:"H",city:"哈巴河县"},{letter:"H",city:"哈尔滨市"},{letter:"H",city:"海安县"},{letter:"H",city:"海北藏族自治州"},{letter:"H",city:"海城市"},{letter:"H",city:"海东市"},{letter:"H",city:"海丰县"},{letter:"H",city:"海口市"},{letter:"H",city:"海林市"},{letter:"H",city:"海伦市"},{letter:"H",city:"海门市"},{letter:"H",city:"海南藏族自治州"},{letter:"H",city:"海宁市"},{letter:"H",city:"海西蒙古族藏族自治州"},{letter:"H",city:"海兴县"},{letter:"H",city:"海盐县"},{letter:"H",city:"海晏县"},{letter:"H",city:"海阳市"},{letter:"H",city:"海原县"},{letter:"H",city:"哈密市"},{letter:"H",city:"韩城市"},{letter:"H",city:"汉川市"},{letter:"H",city:"邯郸市"},{letter:"H",city:"邯郸县"},{letter:"H",city:"杭锦后旗"},{letter:"H",city:"杭锦旗"},{letter:"H",city:"杭州市"},{letter:"H",city:"含山县"},{letter:"H",city:"汉寿县"},{letter:"H",city:"汉阴县"},{letter:"H",city:"汉源县"},{letter:"H",city:"汉中市"},{letter:"H",city:"鹤壁市"},{letter:"H",city:"和布克赛尔蒙古自治县"},{letter:"H",city:"河池市"},{letter:"H",city:"合肥市"},{letter:"H",city:"鹤峰县"},{letter:"H",city:"鹤岗市"},{letter:"H",city:"黑河市"},{letter:"H",city:"黑山县"},{letter:"H",city:"黑水县"},{letter:"H",city:"河间市"},{letter:"H",city:"合江县"},{letter:"H",city:"河津市"},{letter:"H",city:"和静县"},{letter:"H",city:"河口瑶族自治县"},{letter:"H",city:"贺兰县"},{letter:"H",city:"和林格尔县"},{letter:"H",city:"和龙市"},{letter:"H",city:"河南蒙古族自治县"},{letter:"H",city:"衡东县"},{letter:"H",city:"横峰县"},{letter:"H",city:"衡南县"},{letter:"H",city:"衡山县"},{letter:"H",city:"衡水市"},{letter:"H",city:"横县"},{letter:"H",city:"衡阳市"},{letter:"H",city:"衡阳县"},{letter:"H",city:"和平县"},{letter:"H",city:"合浦县"},{letter:"H",city:"鹤庆县"},{letter:"H",city:"河曲县"},{letter:"H",city:"鹤山市"},{letter:"H",city:"合山市"},{letter:"H",city:"合水县"},{letter:"H",city:"和顺县"},{letter:"H",city:"和硕县"},{letter:"H",city:"和田市"},{letter:"H",city:"和田县"},{letter:"H",city:"和田地区"},{letter:"H",city:"和县"},{letter:"H",city:"合阳县"},{letter:"H",city:"河源市"},{letter:"H",city:"菏泽市"},{letter:"H",city:"赫章县"},{letter:"H",city:"和政县"},{letter:"H",city:"贺州市"},{letter:"H",city:"合作市"},{letter:"H",city:"红安县"},{letter:"H",city:"洪洞县"},{letter:"H",city:"红河县"},{letter:"H",city:"红河哈尼族彝族自治州"},{letter:"H",city:"洪湖市"},{letter:"H",city:"洪江市"},{letter:"H",city:"洪雅县"},{letter:"H",city:"红原县"},{letter:"H",city:"洪泽区"},{letter:"H",city:"侯马市"},{letter:"H",city:"华安县"},{letter:"H",city:"华池县"},{letter:"H",city:"桦川县"},{letter:"H",city:"化德县"},{letter:"H",city:"桦甸市"},{letter:"H",city:"淮安市"},{letter:"H",city:"怀安县"},{letter:"H",city:"淮北市"},{letter:"H",city:"淮滨县"},{letter:"H",city:"怀化市"},{letter:"H",city:"怀集县"},{letter:"H",city:"怀来县"},{letter:"H",city:"淮南市"},{letter:"H",city:"怀宁县"},{letter:"H",city:"怀仁县"},{letter:"H",city:"淮阳县"},{letter:"H",city:"怀远县"},{letter:"H",city:"化隆回族自治县"},{letter:"H",city:"桦南县"},{letter:"H",city:"潢川县"},{letter:"H",city:"黄冈市"},{letter:"H",city:"黄骅市"},{letter:"H",city:"黄陵县"},{letter:"H",city:"黄龙县"},{letter:"H",city:"黄梅县"},{letter:"H",city:"黄南藏族自治州"},{letter:"H",city:"黄平县"},{letter:"H",city:"黄山市"},{letter:"H",city:"黄石市"},{letter:"H",city:"湟源县"},{letter:"H",city:"湟中县"},{letter:"H",city:"华宁县"},{letter:"H",city:"环江毛南族自治县"},{letter:"H",city:"桓仁满族自治县"},{letter:"H",city:"桓台县"},{letter:"H",city:"环县"},{letter:"H",city:"华坪县"},{letter:"H",city:"华容县"},{letter:"H",city:"华亭县"},{letter:"H",city:"滑县"},{letter:"H",city:"华阴市"},{letter:"H",city:"华蓥市"},{letter:"H",city:"花垣县"},{letter:"H",city:"化州市"},{letter:"H",city:"壶关县"},{letter:"H",city:"呼和浩特市"},{letter:"H",city:"惠安县"},{letter:"H",city:"会昌县"},{letter:"H",city:"惠东县"},{letter:"H",city:"会东县"},{letter:"H",city:"惠来县"},{letter:"H",city:"会理县"},{letter:"H",city:"惠民县"},{letter:"H",city:"辉南县"},{letter:"H",city:"睢宁县"},{letter:"H",city:"会宁县"},{letter:"H",city:"惠水县"},{letter:"H",city:"会同县"},{letter:"H",city:"辉县市"},{letter:"H",city:"睢县"},{letter:"H",city:"徽县"},{letter:"H",city:"会泽县"},{letter:"H",city:"惠州市"},{letter:"H",city:"湖口县"},{letter:"H",city:"虎林市"},{letter:"H",city:"葫芦岛市"},{letter:"H",city:"呼伦贝尔市"},{letter:"H",city:"呼玛县"},{letter:"H",city:"珲春市"},{letter:"H",city:"浑源县"},{letter:"H",city:"霍城县"},{letter:"H",city:"霍尔果斯市"},{letter:"H",city:"获嘉县"},{letter:"H",city:"霍林郭勒市"},{letter:"H",city:"霍邱县"},{letter:"H",city:"霍山县"},{letter:"H",city:"霍州市"},{letter:"H",city:"呼图壁县"},{letter:"H",city:"湖州市"},{letter:"H",city:"互助土族自治县"},{letter:"J",city:"加查县"},{letter:"J",city:"嘉禾县"},{letter:"J",city:"夹江县"},{letter:"J",city:"嘉黎县"},{letter:"J",city:"佳木斯市"},{letter:"J",city:"吉安市"},{letter:"J",city:"集安市"},{letter:"J",city:"吉安县"},{letter:"J",city:"建昌县"},{letter:"J",city:"剑川县"},{letter:"J",city:"建德市"},{letter:"J",city:"江安县"},{letter:"J",city:"江城哈尼族彝族自治县"},{letter:"J",city:"江达县"},{letter:"J",city:"剑阁县"},{letter:"J",city:"江华瑶族自治县"},{letter:"J",city:"江口县"},{letter:"J",city:"将乐县"},{letter:"J",city:"江陵县"},{letter:"J",city:"江门市"},{letter:"J",city:"江山市"},{letter:"J",city:"绛县"},{letter:"J",city:"江阴市"},{letter:"J",city:"江永县"},{letter:"J",city:"江油市"},{letter:"J",city:"江孜县"},{letter:"J",city:"剑河县"},{letter:"J",city:"建湖县"},{letter:"J",city:"监利县"},{letter:"J",city:"建宁县"},{letter:"J",city:"建瓯市"},{letter:"J",city:"建平县"},{letter:"J",city:"建始县"},{letter:"J",city:"建水县"},{letter:"J",city:"犍为县"},{letter:"J",city:"简阳市"},{letter:"J",city:"尖扎县"},{letter:"J",city:"交城县"},{letter:"J",city:"蛟河市"},{letter:"J",city:"交口县"},{letter:"J",city:"蕉岭县"},{letter:"J",city:"胶州市"},{letter:"J",city:"焦作市"},{letter:"J",city:"嘉善县"},{letter:"J",city:"伽师县"},{letter:"J",city:"郏县"},{letter:"J",city:"佳县"},{letter:"J",city:"嘉祥县"},{letter:"J",city:"嘉兴市"},{letter:"J",city:"嘉荫县"},{letter:"J",city:"嘉鱼县"},{letter:"J",city:"嘉峪关市"},{letter:"J",city:"鸡东县"},{letter:"J",city:"界首市"},{letter:"J",city:"揭西县"},{letter:"J",city:"介休市"},{letter:"J",city:"揭阳市"},{letter:"J",city:"吉林市"},{letter:"J",city:"吉隆县"},{letter:"J",city:"吉木乃县"},{letter:"J",city:"吉木萨尔县"},{letter:"J",city:"济南市"},{letter:"J",city:"金昌市"},{letter:"J",city:"晋城市"},{letter:"J",city:"金川县"},{letter:"J",city:"靖安县"},{letter:"J",city:"靖边县"},{letter:"J",city:"泾川县"},{letter:"J",city:"旌德县"},{letter:"J",city:"景德镇市"},{letter:"J",city:"景东彝族自治县"},{letter:"J",city:"井冈山市"},{letter:"J",city:"景谷傣族彝族自治县"},{letter:"J",city:"精河县"},{letter:"J",city:"景洪市"},{letter:"J",city:"靖江市"},{letter:"J",city:"静乐县"},{letter:"J",city:"荆门市"},{letter:"J",city:"静宁县"},{letter:"J",city:"景宁畲族自治县"},{letter:"J",city:"京山县"},{letter:"J",city:"景泰县"},{letter:"J",city:"靖西市"},{letter:"J",city:"景县"},{letter:"J",city:"泾县"},{letter:"J",city:"井陉县"},{letter:"J",city:"井研县"},{letter:"J",city:"泾阳县"},{letter:"J",city:"靖宇县"},{letter:"J",city:"靖远县"},{letter:"J",city:"泾源县"},{letter:"J",city:"荆州市"},{letter:"J",city:"靖州苗族侗族自治县"},{letter:"J",city:"金湖县"},{letter:"J",city:"金华市"},{letter:"J",city:"济宁市"},{letter:"J",city:"晋江市"},{letter:"J",city:"金门县"},{letter:"J",city:"锦屏县"},{letter:"J",city:"金平苗族瑶族傣族自治县"},{letter:"J",city:"金沙县"},{letter:"J",city:"津市市"},{letter:"J",city:"金塔县"},{letter:"J",city:"金堂县"},{letter:"J",city:"金溪县"},{letter:"J",city:"进贤县"},{letter:"J",city:"金乡县"},{letter:"J",city:"金秀瑶族自治县"},{letter:"J",city:"金阳县"},{letter:"J",city:"缙云县"},{letter:"J",city:"金寨县"},{letter:"J",city:"晋中市"},{letter:"J",city:"锦州市"},{letter:"J",city:"晋州市"},{letter:"J",city:"稷山县"},{letter:"J",city:"积石山保安族东乡族撒拉族自治县"},{letter:"J",city:"吉首市"},{letter:"J",city:"吉水县"},{letter:"J",city:"九江市"},{letter:"J",city:"九龙县"},{letter:"J",city:"酒泉市"},{letter:"J",city:"九寨沟县"},{letter:"J",city:"久治县"},{letter:"J",city:"鸡西市"},{letter:"J",city:"绩溪县"},{letter:"J",city:"蓟县"},{letter:"J",city:"吉县"},{letter:"J",city:"集贤县"},{letter:"J",city:"济阳县"},{letter:"J",city:"济源市"},{letter:"J",city:"鸡泽县"},{letter:"J",city:"冀州区"},{letter:"J",city:"鄄城县"},{letter:"J",city:"巨鹿县"},{letter:"J",city:"莒南县"},{letter:"J",city:"句容市"},{letter:"J",city:"莒县"},{letter:"J",city:"巨野县"},{letter:"K",city:"开封市"},{letter:"K",city:"开化县"},{letter:"K",city:"开江县"},{letter:"K",city:"凯里市"},{letter:"K",city:"开鲁县"},{letter:"K",city:"开平市"},{letter:"K",city:"开阳县"},{letter:"K",city:"开原市"},{letter:"K",city:"开远市"},{letter:"K",city:"开州区"},{letter:"K",city:"喀喇沁旗"},{letter:"K",city:"喀喇沁左翼蒙古族自治县"},{letter:"K",city:"康保县"},{letter:"K",city:"康定市"},{letter:"K",city:"康乐县"},{letter:"K",city:"康马县"},{letter:"K",city:"康平县"},{letter:"K",city:"康县"},{letter:"K",city:"喀什市"},{letter:"K",city:"喀什地区"},{letter:"K",city:"克东县"},{letter:"K",city:"科尔沁右翼前旗"},{letter:"K",city:"科尔沁右翼中旗"},{letter:"K",city:"科尔沁左翼后旗"},{letter:"K",city:"科尔沁左翼中旗"},{letter:"K",city:"可克达拉市"},{letter:"K",city:"克拉玛依市"},{letter:"K",city:"岢岚县"},{letter:"K",city:"垦利区"},{letter:"K",city:"柯坪县"},{letter:"K",city:"克山县"},{letter:"K",city:"克什克腾旗"},{letter:"K",city:"克孜勒苏柯尔克孜自治州"},{letter:"K",city:"宽城满族自治县"},{letter:"K",city:"宽甸满族自治县"},{letter:"K",city:"库车县"},{letter:"K",city:"库尔勒市"},{letter:"K",city:"奎屯市"},{letter:"K",city:"库伦旗"},{letter:"K",city:"昆明市"},{letter:"K",city:"昆山市"},{letter:"K",city:"昆玉市"},{letter:"L",city:"来安县"},{letter:"L",city:"来宾市"},{letter:"L",city:"来凤县"},{letter:"L",city:"涞水县"},{letter:"L",city:"莱芜市"},{letter:"L",city:"莱西市"},{letter:"L",city:"莱阳市"},{letter:"L",city:"涞源县"},{letter:"L",city:"莱州市"},{letter:"L",city:"澜沧拉祜族自治县"},{letter:"L",city:"岚皋县"},{letter:"L",city:"廊坊市"},{letter:"L",city:"浪卡子县"},{letter:"L",city:"郎溪县"},{letter:"L",city:"朗县"},{letter:"L",city:"阆中市"},{letter:"L",city:"兰考县"},{letter:"L",city:"兰陵县"},{letter:"L",city:"兰坪白族普米族自治县"},{letter:"L",city:"蓝山县"},{letter:"L",city:"蓝田县"},{letter:"L",city:"兰溪市"},{letter:"L",city:"兰西县"},{letter:"L",city:"岚县"},{letter:"L",city:"兰州市"},{letter:"L",city:"老河口市"},{letter:"L",city:"乐陵市"},{letter:"L",city:"乐亭县"},{letter:"L",city:"拉萨市"},{letter:"L",city:"拉孜县"},{letter:"L",city:"乐安县"},{letter:"L",city:"乐昌市"},{letter:"L",city:"乐东黎族自治县"},{letter:"L",city:"雷波县"},{letter:"L",city:"雷山县"},{letter:"L",city:"类乌齐县"},{letter:"L",city:"耒阳市"},{letter:"L",city:"雷州市"},{letter:"L",city:"冷湖行政委员会"},{letter:"L",city:"冷水江市"},{letter:"L",city:"乐平市"},{letter:"L",city:"乐山市"},{letter:"L",city:"乐业县"},{letter:"L",city:"乐至县"},{letter:"L",city:"连城县"},{letter:"L",city:"凉城县"},{letter:"L",city:"两当县"},{letter:"L",city:"梁河县"},{letter:"L",city:"梁山县"},{letter:"L",city:"凉山彝族自治州"},{letter:"L",city:"莲花县"},{letter:"L",city:"连江县"},{letter:"L",city:"廉江市"},{letter:"L",city:"连南瑶族自治县"},{letter:"L",city:"连平县"},{letter:"L",city:"连山壮族瑶族自治县"},{letter:"L",city:"涟水县"},{letter:"L",city:"涟源市"},{letter:"L",city:"连云港市"},{letter:"L",city:"连州市"},{letter:"L",city:"聊城市"},{letter:"L",city:"辽阳市"},{letter:"L",city:"辽阳县"},{letter:"L",city:"辽源市"},{letter:"L",city:"荔波县"},{letter:"L",city:"黎城县"},{letter:"L",city:"利川市"},{letter:"L",city:"黎川县"},{letter:"L",city:"丽江市"},{letter:"L",city:"利津县"},{letter:"L",city:"醴陵市"},{letter:"L",city:"临沧市"},{letter:"L",city:"临城县"},{letter:"L",city:"林甸县"},{letter:"L",city:"临汾市"},{letter:"L",city:"临高县"},{letter:"L",city:"灵宝市"},{letter:"L",city:"灵璧县"},{letter:"L",city:"陵川县"},{letter:"L",city:"灵川县"},{letter:"L",city:"凌海市"},{letter:"L",city:"灵丘县"},{letter:"L",city:"灵山县"},{letter:"L",city:"灵石县"},{letter:"L",city:"灵寿县"},{letter:"L",city:"陵水黎族自治县"},{letter:"L",city:"灵台县"},{letter:"L",city:"灵武市"},{letter:"L",city:"陵县"},{letter:"L",city:"凌源市"},{letter:"L",city:"凌云县"},{letter:"L",city:"临海市"},{letter:"L",city:"临江市"},{letter:"L",city:"林口县"},{letter:"L",city:"临澧县"},{letter:"L",city:"临清市"},{letter:"L",city:"临朐县"},{letter:"L",city:"临泉县"},{letter:"L",city:"临沭县"},{letter:"L",city:"邻水县"},{letter:"L",city:"临潭县"},{letter:"L",city:"临洮县"},{letter:"L",city:"临武县"},{letter:"L",city:"临西县"},{letter:"L",city:"林西县"},{letter:"L",city:"临夏市"},{letter:"L",city:"临夏县"},{letter:"L",city:"临夏回族自治州"},{letter:"L",city:"临县"},{letter:"L",city:"临湘市"},{letter:"L",city:"临沂市"},{letter:"L",city:"临邑县"},{letter:"L",city:"临猗县"},{letter:"L",city:"临颍县"},{letter:"L",city:"麟游县"},{letter:"L",city:"临泽县"},{letter:"L",city:"临漳县"},{letter:"L",city:"林芝市"},{letter:"L",city:"林州市"},{letter:"L",city:"林周县"},{letter:"L",city:"黎平县"},{letter:"L",city:"荔浦县"},{letter:"L",city:"礼泉县"},{letter:"L",city:"梨树县"},{letter:"L",city:"丽水市"},{letter:"L",city:"理塘县"},{letter:"L",city:"六安市"},{letter:"L",city:"留坝县"},{letter:"L",city:"柳城县"},{letter:"L",city:"柳河县"},{letter:"L",city:"柳林县"},{letter:"L",city:"六盘水市"},{letter:"L",city:"浏阳市"},{letter:"L",city:"柳州市"},{letter:"L",city:"澧县"},{letter:"L",city:"蠡县"},{letter:"L",city:"理县"},{letter:"L",city:"礼县"},{letter:"L",city:"利辛县"},{letter:"L",city:"溧阳市"},{letter:"L",city:"隆安县"},{letter:"L",city:"隆昌市"},{letter:"L",city:"龙川县"},{letter:"L",city:"陇川县"},{letter:"L",city:"隆德县"},{letter:"L",city:"龙海市"},{letter:"L",city:"隆化县"},{letter:"L",city:"隆回县"},{letter:"L",city:"龙江县"},{letter:"L",city:"龙井市"},{letter:"L",city:"龙口市"},{letter:"L",city:"龙里县"},{letter:"L",city:"龙陵县"},{letter:"L",city:"隆林各族自治县"},{letter:"L",city:"龙门县"},{letter:"L",city:"龙南县"},{letter:"L",city:"陇南市"},{letter:"L",city:"龙泉市"},{letter:"L",city:"龙山县"},{letter:"L",city:"龙胜各族自治县"},{letter:"L",city:"陇西县"},{letter:"L",city:"陇县"},{letter:"L",city:"龙岩市"},{letter:"L",city:"隆尧县"},{letter:"L",city:"龙游县"},{letter:"L",city:"龙州县"},{letter:"L",city:"隆子县"},{letter:"L",city:"娄底市"},{letter:"L",city:"娄烦县"},{letter:"L",city:"栾川县"},{letter:"L",city:"滦南县"},{letter:"L",city:"滦平县"},{letter:"L",city:"滦县"},{letter:"L",city:"潞城市"},{letter:"L",city:"陆川县"},{letter:"L",city:"鲁甸县"},{letter:"L",city:"泸定县"},{letter:"L",city:"略阳县"},{letter:"L",city:"陆丰市"},{letter:"L",city:"禄丰县"},{letter:"L",city:"陆河县"},{letter:"L",city:"炉霍县"},{letter:"L",city:"庐江县"},{letter:"L",city:"陆良县"},{letter:"L",city:"卢龙县"},{letter:"L",city:"轮台县"},{letter:"L",city:"萝北县"},{letter:"L",city:"罗城仫佬族自治县"},{letter:"L",city:"洛川县"},{letter:"L",city:"罗甸县"},{letter:"L",city:"罗定市"},{letter:"L",city:"漯河市"},{letter:"L",city:"罗江县"},{letter:"L",city:"洛隆县"},{letter:"L",city:"洛南县"},{letter:"L",city:"洛宁县"},{letter:"L",city:"罗平县"},{letter:"L",city:"洛浦县"},{letter:"L",city:"罗山县"},{letter:"L",city:"罗田县"},{letter:"L",city:"洛阳市"},{letter:"L",city:"罗源县"},{letter:"L",city:"洛扎县"},{letter:"L",city:"碌曲县"},{letter:"L",city:"禄劝彝族苗族自治县"},{letter:"L",city:"鲁山县"},{letter:"L",city:"庐山市"},{letter:"L",city:"芦山县"},{letter:"L",city:"卢氏县"},{letter:"L",city:"泸水市"},{letter:"L",city:"芦溪县"},{letter:"L",city:"泸溪县"},{letter:"L",city:"泸西县"},{letter:"L",city:"泸县"},{letter:"L",city:"鹿邑县"},{letter:"L",city:"鹿寨县"},{letter:"L",city:"泸州市"},{letter:"L",city:"绿春县"},{letter:"L",city:"吕梁市"},{letter:"M",city:"马鞍山市"},{letter:"M",city:"马边彝族自治县"},{letter:"M",city:"麻城市"},{letter:"M",city:"玛多县"},{letter:"M",city:"马尔康市"},{letter:"M",city:"马关县"},{letter:"M",city:"麦盖提县"},{letter:"M",city:"麻江县"},{letter:"M",city:"麻栗坡县"},{letter:"M",city:"马龙县"},{letter:"M",city:"玛纳斯县"},{letter:"M",city:"芒康县"},{letter:"M",city:"芒市"},{letter:"M",city:"茫崖行政委员会"},{letter:"M",city:"满洲里市"},{letter:"M",city:"茂名市"},{letter:"M",city:"茂县"},{letter:"M",city:"玛沁县"},{letter:"M",city:"玛曲县"},{letter:"M",city:"马山县"},{letter:"M",city:"麻阳苗族自治县"},{letter:"M",city:"美姑县"},{letter:"M",city:"梅河口市"},{letter:"M",city:"眉山市"},{letter:"M",city:"湄潭县"},{letter:"M",city:"眉县"},{letter:"M",city:"梅州市"},{letter:"M",city:"蒙城县"},{letter:"M",city:"孟村回族自治县"},{letter:"M",city:"勐海县"},{letter:"M",city:"孟津县"},{letter:"M",city:"勐腊县"},{letter:"M",city:"孟连傣族拉祜族佤族自治县"},{letter:"M",city:"蒙山县"},{letter:"M",city:"蒙阴县"},{letter:"M",city:"孟州市"},{letter:"M",city:"蒙自市"},{letter:"M",city:"门源回族自治县"},{letter:"M",city:"渑池县"},{letter:"M",city:"冕宁县"},{letter:"M",city:"勉县"},{letter:"M",city:"绵阳市"},{letter:"M",city:"绵竹市"},{letter:"M",city:"弥渡县"},{letter:"M",city:"弥勒市"},{letter:"M",city:"米林县"},{letter:"M",city:"汨罗市"},{letter:"M",city:"民丰县"},{letter:"M",city:"明光市"},{letter:"M",city:"明水县"},{letter:"M",city:"明溪县"},{letter:"M",city:"民和回族土族自治县"},{letter:"M",city:"闽侯县"},{letter:"M",city:"民乐县"},{letter:"M",city:"民勤县"},{letter:"M",city:"闽清县"},{letter:"M",city:"民权县"},{letter:"M",city:"岷县"},{letter:"M",city:"密山市"},{letter:"M",city:"米易县"},{letter:"M",city:"米脂县"},{letter:"M",city:"漠河县"},{letter:"M",city:"墨江哈尼族自治县"},{letter:"M",city:"莫力达瓦达斡尔族自治旗"},{letter:"M",city:"墨脱县"},{letter:"M",city:"牟定县"},{letter:"M",city:"墨玉县"},{letter:"M",city:"墨竹工卡县"},{letter:"M",city:"沐川县"},{letter:"M",city:"牡丹江市"},{letter:"M",city:"木兰县"},{letter:"M",city:"木垒哈萨克自治县"},{letter:"M",city:"穆棱市"},{letter:"M",city:"木里藏族自治县"},{letter:"N",city:"乃东区"},{letter:"N",city:"奈曼旗"},{letter:"N",city:"南安市"},{letter:"N",city:"南澳县"},{letter:"N",city:"南部县"},{letter:"N",city:"南昌市"},{letter:"N",city:"南昌县"},{letter:"N",city:"南城县"},{letter:"N",city:"南充市"},{letter:"N",city:"南丹县"},{letter:"N",city:"南丰县"},{letter:"N",city:"南宫市"},{letter:"N",city:"囊谦县"},{letter:"N",city:"南和县"},{letter:"N",city:"南华县"},{letter:"N",city:"南江县"},{letter:"N",city:"南涧彝族自治县"},{letter:"N",city:"南京市"},{letter:"N",city:"南靖县"},{letter:"N",city:"南乐县"},{letter:"N",city:"南陵县"},{letter:"N",city:"南木林县"},{letter:"N",city:"南宁市"},{letter:"N",city:"南皮县"},{letter:"N",city:"南平市"},{letter:"N",city:"南沙群岛"},{letter:"N",city:"南通市"},{letter:"N",city:"南县"},{letter:"N",city:"南雄市"},{letter:"N",city:"南阳市"},{letter:"N",city:"南漳县"},{letter:"N",city:"南召县"},{letter:"N",city:"那坡县"},{letter:"N",city:"那曲市"},{letter:"N",city:"那曲县"},{letter:"N",city:"纳雍县"},{letter:"N",city:"讷河市"},{letter:"N",city:"内黄县"},{letter:"N",city:"内江市"},{letter:"N",city:"内丘县"},{letter:"N",city:"内乡县"},{letter:"N",city:"嫩江县"},{letter:"N",city:"聂拉木县"},{letter:"N",city:"聂荣县"},{letter:"N",city:"尼勒克县"},{letter:"N",city:"尼玛县"},{letter:"N",city:"尼木县"},{letter:"N",city:"宁安市"},{letter:"N",city:"宁波市"},{letter:"N",city:"宁城县"},{letter:"N",city:"宁德市"},{letter:"N",city:"宁都县"},{letter:"N",city:"宁洱哈尼族彝族自治县"},{letter:"N",city:"宁国市"},{letter:"N",city:"宁海县"},{letter:"N",city:"宁化县"},{letter:"N",city:"宁晋县"},{letter:"N",city:"宁津县"},{letter:"N",city:"宁蒗彝族自治县"},{letter:"N",city:"宁陵县"},{letter:"N",city:"宁明县"},{letter:"N",city:"宁南县"},{letter:"N",city:"宁强县"},{letter:"N",city:"宁陕县"},{letter:"N",city:"宁武县"},{letter:"N",city:"宁县"},{letter:"N",city:"宁阳县"},{letter:"N",city:"宁远县"},{letter:"N",city:"农安县"},{letter:"N",city:"怒江傈僳族自治州"},{letter:"P",city:"磐安县"},{letter:"P",city:"盘锦市"},{letter:"P",city:"盘山县"},{letter:"P",city:"磐石市"},{letter:"P",city:"盘州市"},{letter:"P",city:"攀枝花市"},{letter:"P",city:"沛县"},{letter:"P",city:"蓬安县"},{letter:"P",city:"蓬莱市"},{letter:"P",city:"彭水苗族土家族自治县"},{letter:"P",city:"蓬溪县"},{letter:"P",city:"彭阳县"},{letter:"P",city:"彭泽县"},{letter:"P",city:"彭州市"},{letter:"P",city:"偏关县"},{letter:"P",city:"屏边苗族自治县"},{letter:"P",city:"平昌县"},{letter:"P",city:"平定县"},{letter:"P",city:"平顶山市"},{letter:"P",city:"平度市"},{letter:"P",city:"平果县"},{letter:"P",city:"平和县"},{letter:"P",city:"平湖市"},{letter:"P",city:"平江县"},{letter:"P",city:"平乐县"},{letter:"P",city:"平利县"},{letter:"P",city:"平凉市"},{letter:"P",city:"平陆县"},{letter:"P",city:"平罗县"},{letter:"P",city:"平南县"},{letter:"P",city:"屏南县"},{letter:"P",city:"平泉市"},{letter:"P",city:"屏山县"},{letter:"P",city:"平山县"},{letter:"P",city:"平顺县"},{letter:"P",city:"平潭县"},{letter:"P",city:"平塘县"},{letter:"P",city:"平武县"},{letter:"P",city:"萍乡市"},{letter:"P",city:"平乡县"},{letter:"P",city:"凭祥市"},{letter:"P",city:"平阳县"},{letter:"P",city:"平遥县"},{letter:"P",city:"平邑县"},{letter:"P",city:"平阴县"},{letter:"P",city:"平舆县"},{letter:"P",city:"平原县"},{letter:"P",city:"平远县"},{letter:"P",city:"皮山县"},{letter:"P",city:"邳州市"},{letter:"P",city:"鄱阳县"},{letter:"P",city:"普安县"},{letter:"P",city:"浦北县"},{letter:"P",city:"浦城县"},{letter:"P",city:"蒲城县"},{letter:"P",city:"普定县"},{letter:"P",city:"普洱市"},{letter:"P",city:"普格县"},{letter:"P",city:"浦江县"},{letter:"P",city:"蒲江县"},{letter:"P",city:"普兰县"},{letter:"P",city:"普宁市"},{letter:"P",city:"莆田市"},{letter:"P",city:"蒲县"},{letter:"P",city:"濮阳市"},{letter:"P",city:"濮阳县"},{letter:"Q",city:"迁安市"},{letter:"Q",city:"乾安县"},{letter:"Q",city:"黔东南苗族侗族自治州"},{letter:"Q",city:"前郭尔罗斯蒙古族自治县"},{letter:"Q",city:"潜江市"},{letter:"Q",city:"黔南布依族苗族自治州"},{letter:"Q",city:"潜山县"},{letter:"Q",city:"黔西县"},{letter:"Q",city:"迁西县"},{letter:"Q",city:"乾县"},{letter:"Q",city:"黔西南布依族苗族自治州"},{letter:"Q",city:"千阳县"},{letter:"Q",city:"巧家县"},{letter:"Q",city:"蕲春县"},{letter:"Q",city:"祁东县"},{letter:"Q",city:"启东市"},{letter:"Q",city:"且末县"},{letter:"Q",city:"齐河县"},{letter:"Q",city:"祁连县"},{letter:"Q",city:"祁门县"},{letter:"Q",city:"秦安县"},{letter:"Q",city:"庆安县"},{letter:"Q",city:"庆城县"},{letter:"Q",city:"青川县"},{letter:"Q",city:"青岛市"},{letter:"Q",city:"清丰县"},{letter:"Q",city:"青冈县"},{letter:"Q",city:"清河县"},{letter:"Q",city:"青河县"},{letter:"Q",city:"清涧县"},{letter:"Q",city:"清流县"},{letter:"Q",city:"晴隆县"},{letter:"Q",city:"青龙满族自治县"},{letter:"Q",city:"青神县"},{letter:"Q",city:"清水县"},{letter:"Q",city:"清水河县"},{letter:"Q",city:"青田县"},{letter:"Q",city:"青铜峡市"},{letter:"Q",city:"青县"},{letter:"Q",city:"清徐县"},{letter:"Q",city:"庆阳市"},{letter:"Q",city:"青阳县"},{letter:"Q",city:"清远市"},{letter:"Q",city:"庆元县"},{letter:"Q",city:"清原满族自治县"},{letter:"Q",city:"庆云县"},{letter:"Q",city:"清镇市"},{letter:"Q",city:"青州市"},{letter:"Q",city:"秦皇岛市"},{letter:"Q",city:"沁水县"},{letter:"Q",city:"沁县"},{letter:"Q",city:"沁阳市"},{letter:"Q",city:"沁源县"},{letter:"Q",city:"钦州市"},{letter:"Q",city:"琼海市"},{letter:"Q",city:"琼结县"},{letter:"Q",city:"邛崃市"},{letter:"Q",city:"琼中黎族苗族自治县"},{letter:"Q",city:"齐齐哈尔市"},{letter:"Q",city:"岐山县"},{letter:"Q",city:"奇台县"},{letter:"Q",city:"七台河市"},{letter:"Q",city:"丘北县"},{letter:"Q",city:"邱县"},{letter:"Q",city:"栖霞市"},{letter:"Q",city:"杞县"},{letter:"Q",city:"祁县"},{letter:"Q",city:"淇县"},{letter:"Q",city:"祁阳县"},{letter:"Q",city:"全椒县"},{letter:"Q",city:"全南县"},{letter:"Q",city:"泉州市"},{letter:"Q",city:"全州县"},{letter:"Q",city:"确山县"},{letter:"Q",city:"曲阜市"},{letter:"Q",city:"曲靖市"},{letter:"Q",city:"曲麻莱县"},{letter:"Q",city:"曲水县"},{letter:"Q",city:"曲松县"},{letter:"Q",city:"曲沃县"},{letter:"Q",city:"渠县"},{letter:"Q",city:"曲阳县"},{letter:"Q",city:"衢州市"},{letter:"Q",city:"曲周县"},{letter:"R",city:"壤塘县"},{letter:"R",city:"饶河县"},{letter:"R",city:"饶平县"},{letter:"R",city:"饶阳县"},{letter:"R",city:"仁布县"},{letter:"R",city:"仁化县"},{letter:"R",city:"仁怀市"},{letter:"R",city:"任丘市"},{letter:"R",city:"仁寿县"},{letter:"R",city:"任县"},{letter:"R",city:"日喀则市"},{letter:"R",city:"日土县"},{letter:"R",city:"日照市"},{letter:"R",city:"融安县"},{letter:"R",city:"荣成市"},{letter:"R",city:"容城县"},{letter:"R",city:"榕江县"},{letter:"R",city:"融水苗族自治县"},{letter:"R",city:"荣县"},{letter:"R",city:"容县"},{letter:"R",city:"汝城县"},{letter:"R",city:"如东县"},{letter:"R",city:"如皋市"},{letter:"R",city:"瑞安市"},{letter:"R",city:"瑞昌市"},{letter:"R",city:"芮城县"},{letter:"R",city:"瑞金市"},{letter:"R",city:"瑞丽市"},{letter:"R",city:"汝南县"},{letter:"R",city:"若尔盖县"},{letter:"R",city:"若羌县"},{letter:"R",city:"乳山市"},{letter:"R",city:"汝阳县"},{letter:"R",city:"乳源瑶族自治县"},{letter:"R",city:"汝州市"},{letter:"S",city:"萨嘎县"},{letter:"S",city:"萨迦县"},{letter:"S",city:"三都水族自治县"},{letter:"S",city:"桑日县"},{letter:"S",city:"桑植县"},{letter:"S",city:"三河市"},{letter:"S",city:"三江侗族自治县"},{letter:"S",city:"三门县"},{letter:"S",city:"三门峡市"},{letter:"S",city:"三明市"},{letter:"S",city:"三沙市"},{letter:"S",city:"三穗县"},{letter:"S",city:"三台县"},{letter:"S",city:"三亚市"},{letter:"S",city:"三原县"},{letter:"S",city:"色达县"},{letter:"S",city:"莎车县"},{letter:"S",city:"沙河市"},{letter:"S",city:"山丹县"},{letter:"S",city:"上蔡县"},{letter:"S",city:"商城县"},{letter:"S",city:"商都县"},{letter:"S",city:"上高县"},{letter:"S",city:"上海市"},{letter:"S",city:"上杭县"},{letter:"S",city:"商河县"},{letter:"S",city:"上栗县"},{letter:"S",city:"上林县"},{letter:"S",city:"商洛市"},{letter:"S",city:"商南县"},{letter:"S",city:"商丘市"},{letter:"S",city:"上饶市"},{letter:"S",city:"上饶县"},{letter:"S",city:"商水县"},{letter:"S",city:"上思县"},{letter:"S",city:"尚义县"},{letter:"S",city:"上犹县"},{letter:"S",city:"尚志市"},{letter:"S",city:"山南市"},{letter:"S",city:"鄯善县"},{letter:"S",city:"汕头市"},{letter:"S",city:"汕尾市"},{letter:"S",city:"单县"},{letter:"S",city:"山阳县"},{letter:"S",city:"山阴县"},{letter:"S",city:"邵东县"},{letter:"S",city:"韶关市"},{letter:"S",city:"韶山市"},{letter:"S",city:"邵武市"},{letter:"S",city:"绍兴市"},{letter:"S",city:"邵阳市"},{letter:"S",city:"邵阳县"},{letter:"S",city:"沙湾县"},{letter:"S",city:"沙县"},{letter:"S",city:"沙雅县"},{letter:"S",city:"沙洋县"},{letter:"S",city:"射洪县"},{letter:"S",city:"神池县"},{letter:"S",city:"嵊泗县"},{letter:"S",city:"嵊州市"},{letter:"S",city:"神木市"},{letter:"S",city:"神农架林区"},{letter:"S",city:"沈丘县"},{letter:"S",city:"莘县"},{letter:"S",city:"沈阳市"},{letter:"S",city:"深泽县"},{letter:"S",city:"申扎县"},{letter:"S",city:"深圳市"},{letter:"S",city:"深州市"},{letter:"S",city:"社旗县"},{letter:"S",city:"涉县"},{letter:"S",city:"歙县"},{letter:"S",city:"射阳县"},{letter:"S",city:"施秉县"},{letter:"S",city:"石城县"},{letter:"S",city:"施甸县"},{letter:"S",city:"什邡市"},{letter:"S",city:"石河子市"},{letter:"S",city:"石家庄市"},{letter:"S",city:"石林彝族自治县"},{letter:"S",city:"石楼县"},{letter:"S",city:"石门县"},{letter:"S",city:"石棉县"},{letter:"S",city:"石屏县"},{letter:"S",city:"石阡县"},{letter:"S",city:"石渠县"},{letter:"S",city:"石泉县"},{letter:"S",city:"石狮市"},{letter:"S",city:"石首市"},{letter:"S",city:"石台县"},{letter:"S",city:"始兴县"},{letter:"S",city:"十堰市"},{letter:"S",city:"石柱土家族自治县"},{letter:"S",city:"师宗县"},{letter:"S",city:"石嘴山市"},{letter:"S",city:"寿光市"},{letter:"S",city:"寿宁县"},{letter:"S",city:"寿县"},{letter:"S",city:"寿阳县"},{letter:"S",city:"双柏县"},{letter:"S",city:"双峰县"},{letter:"S",city:"双河市"},{letter:"S",city:"双湖县"},{letter:"S",city:"双江拉祜族佤族布朗族傣族自治县"},{letter:"S",city:"双辽市"},{letter:"S",city:"双牌县"},{letter:"S",city:"双鸭山市"},{letter:"S",city:"舒城县"},{letter:"S",city:"疏附县"},{letter:"S",city:"水城县"},{letter:"S",city:"水富县"},{letter:"S",city:"舒兰市"},{letter:"S",city:"疏勒县"},{letter:"S",city:"顺昌县"},{letter:"S",city:"顺平县"},{letter:"S",city:"朔州市"},{letter:"S",city:"沭阳县"},{letter:"S",city:"泗洪县"},{letter:"S",city:"四会市"},{letter:"S",city:"思南县"},{letter:"S",city:"四平市"},{letter:"S",city:"泗水县"},{letter:"S",city:"泗县"},{letter:"S",city:"泗阳县"},{letter:"S",city:"四子王旗"},{letter:"S",city:"嵩明县"},{letter:"S",city:"松潘县"},{letter:"S",city:"松桃苗族自治县"},{letter:"S",city:"松溪县"},{letter:"S",city:"嵩县"},{letter:"S",city:"松阳县"},{letter:"S",city:"松原市"},{letter:"S",city:"松滋市"},{letter:"S",city:"肃北蒙古族自治县"},{letter:"S",city:"绥滨县"},{letter:"S",city:"遂昌县"},{letter:"S",city:"遂川县"},{letter:"S",city:"绥德县"},{letter:"S",city:"绥芬河市"},{letter:"S",city:"绥化市"},{letter:"S",city:"绥江县"},{letter:"S",city:"绥棱县"},{letter:"S",city:"遂宁市"},{letter:"S",city:"绥宁县"},{letter:"S",city:"遂平县"},{letter:"S",city:"濉溪县"},{letter:"S",city:"遂溪县"},{letter:"S",city:"随县"},{letter:"S",city:"绥阳县"},{letter:"S",city:"绥中县"},{letter:"S",city:"随州市"},{letter:"S",city:"肃南裕固族自治县"},{letter:"S",city:"肃宁县"},{letter:"S",city:"苏尼特右旗"},{letter:"S",city:"苏尼特左旗"},{letter:"S",city:"孙吴县"},{letter:"S",city:"索县"},{letter:"S",city:"宿迁市"},{letter:"S",city:"宿松县"},{letter:"S",city:"苏州市"},{letter:"S",city:"宿州市"},{letter:"T",city:"塔城市"},{letter:"T",city:"塔城地区"},{letter:"T",city:"塔河县"},{letter:"T",city:"泰安市"},{letter:"T",city:"台安县"},{letter:"T",city:"太白县"},{letter:"T",city:"台北市"},{letter:"T",city:"太仓市"},{letter:"T",city:"太谷县"},{letter:"T",city:"太和县"},{letter:"T",city:"泰和县"},{letter:"T",city:"太湖县"},{letter:"T",city:"台江县"},{letter:"T",city:"太康县"},{letter:"T",city:"泰来县"},{letter:"T",city:"泰宁县"},{letter:"T",city:"太仆寺旗"},{letter:"T",city:"台前县"},{letter:"T",city:"台山市"},{letter:"T",city:"泰顺县"},{letter:"T",city:"泰兴市"},{letter:"T",city:"太原市"},{letter:"T",city:"台州市"},{letter:"T",city:"泰州市"},{letter:"T",city:"郯城县"},{letter:"T",city:"唐河县"},{letter:"T",city:"唐山市"},{letter:"T",city:"唐县"},{letter:"T",city:"汤阴县"},{letter:"T",city:"汤原县"},{letter:"T",city:"桃江县"},{letter:"T",city:"洮南市"},{letter:"T",city:"桃源县"},{letter:"T",city:"塔什库尔干塔吉克自治县"},{letter:"T",city:"特克斯县"},{letter:"T",city:"腾冲市"},{letter:"T",city:"藤县"},{letter:"T",city:"滕州市"},{letter:"T",city:"天长市"},{letter:"T",city:"天等县"},{letter:"T",city:"田东县"},{letter:"T",city:"天峨县"},{letter:"T",city:"天津市"},{letter:"T",city:"天峻县"},{letter:"T",city:"田林县"},{letter:"T",city:"天门市"},{letter:"T",city:"天全县"},{letter:"T",city:"天水市"},{letter:"T",city:"天台县"},{letter:"T",city:"田阳县"},{letter:"T",city:"天镇县"},{letter:"T",city:"天柱县"},{letter:"T",city:"天祝藏族自治县"},{letter:"T",city:"铁力市"},{letter:"T",city:"铁岭市"},{letter:"T",city:"铁岭县"},{letter:"T",city:"铁门关市"},{letter:"T",city:"桐柏县"},{letter:"T",city:"桐城市"},{letter:"T",city:"通城县"},{letter:"T",city:"铜川市"},{letter:"T",city:"通道侗族自治县"},{letter:"T",city:"同德县"},{letter:"T",city:"铜鼓县"},{letter:"T",city:"潼关县"},{letter:"T",city:"通海县"},{letter:"T",city:"通河县"},{letter:"T",city:"通化市"},{letter:"T",city:"通化县"},{letter:"T",city:"同江市"},{letter:"T",city:"通江县"},{letter:"T",city:"通辽市"},{letter:"T",city:"铜陵市"},{letter:"T",city:"铜陵县"},{letter:"T",city:"桐庐县"},{letter:"T",city:"铜仁市"},{letter:"T",city:"同仁县"},{letter:"T",city:"通山县"},{letter:"T",city:"通渭县"},{letter:"T",city:"桐乡市"},{letter:"T",city:"同心县"},{letter:"T",city:"通许县"},{letter:"T",city:"通榆县"},{letter:"T",city:"桐梓县"},{letter:"T",city:"团风县"},{letter:"T",city:"吐鲁番市"},{letter:"T",city:"图们市"},{letter:"T",city:"土默特右旗"},{letter:"T",city:"土默特左旗"},{letter:"T",city:"图木舒克市"},{letter:"T",city:"屯昌县"},{letter:"T",city:"屯留县"},{letter:"T",city:"托克托县"},{letter:"T",city:"托克逊县"},{letter:"T",city:"托里县"},{letter:"T",city:"突泉县"},{letter:"W",city:"瓦房店市"},{letter:"W",city:"万安县"},{letter:"W",city:"旺苍县"},{letter:"W",city:"望都县"},{letter:"W",city:"望江县"},{letter:"W",city:"望奎县"},{letter:"W",city:"望谟县"},{letter:"W",city:"汪清县"},{letter:"W",city:"万年县"},{letter:"W",city:"万宁市"},{letter:"W",city:"万荣县"},{letter:"W",city:"万源市"},{letter:"W",city:"万载县"},{letter:"W",city:"围场满族蒙古族自治县"},{letter:"W",city:"潍坊市"},{letter:"W",city:"威海市"},{letter:"W",city:"卫辉市"},{letter:"W",city:"尉犁县"},{letter:"W",city:"渭南市"},{letter:"W",city:"威宁彝族回族苗族自治县"},{letter:"W",city:"微山县"},{letter:"W",city:"巍山彝族回族自治县"},{letter:"W",city:"尉氏县"},{letter:"W",city:"魏县"},{letter:"W",city:"威县"},{letter:"W",city:"维西傈僳族自治县"},{letter:"W",city:"威信县"},{letter:"W",city:"威远县"},{letter:"W",city:"渭源县"},{letter:"W",city:"文安县"},{letter:"W",city:"文昌市"},{letter:"W",city:"文成县"},{letter:"W",city:"汶川县"},{letter:"W",city:"瓮安县"},{letter:"W",city:"翁牛特旗"},{letter:"W",city:"翁源县"},{letter:"W",city:"温岭市"},{letter:"W",city:"温泉县"},{letter:"W",city:"文山市"},{letter:"W",city:"汶上县"},{letter:"W",city:"文山壮族苗族自治州"},{letter:"W",city:"文水县"},{letter:"W",city:"温宿县"},{letter:"W",city:"闻喜县"},{letter:"W",city:"温县"},{letter:"W",city:"文县"},{letter:"W",city:"温州市"},{letter:"W",city:"涡阳县"},{letter:"W",city:"武安市"},{letter:"W",city:"吴堡县"},{letter:"W",city:"五常市"},{letter:"W",city:"武城县"},{letter:"W",city:"吴川市"},{letter:"W",city:"武川县"},{letter:"W",city:"务川仡佬族苗族自治县"},{letter:"W",city:"五大连池市"},{letter:"W",city:"无棣县"},{letter:"W",city:"武定县"},{letter:"W",city:"五峰土家族自治县"},{letter:"W",city:"武冈市"},{letter:"W",city:"舞钢市"},{letter:"W",city:"武功县"},{letter:"W",city:"乌海市"},{letter:"W",city:"武汉市"},{letter:"W",city:"五河县"},{letter:"W",city:"芜湖市"},{letter:"W",city:"芜湖县"},{letter:"W",city:"五华县"},{letter:"W",city:"无极县"},{letter:"W",city:"五家渠市"},{letter:"W",city:"乌兰县"},{letter:"W",city:"乌兰察布市"},{letter:"W",city:"乌兰浩特市"},{letter:"W",city:"乌拉特后旗"},{letter:"W",city:"乌拉特前旗"},{letter:"W",city:"乌拉特中旗"},{letter:"W",city:"五莲县"},{letter:"W",city:"乌鲁木齐市"},{letter:"W",city:"乌鲁木齐县"},{letter:"W",city:"武宁县"},{letter:"W",city:"武平县"},{letter:"W",city:"吴起县"},{letter:"W",city:"乌恰县"},{letter:"W",city:"武强县"},{letter:"W",city:"吴桥县"},{letter:"W",city:"巫山县"},{letter:"W",city:"武山县"},{letter:"W",city:"武胜县"},{letter:"W",city:"乌审旗"},{letter:"W",city:"乌什县"},{letter:"W",city:"乌苏市"},{letter:"W",city:"五台县"},{letter:"W",city:"无为县"},{letter:"W",city:"武威市"},{letter:"W",city:"无锡市"},{letter:"W",city:"巫溪县"},{letter:"W",city:"武乡县"},{letter:"W",city:"武宣县"},{letter:"W",city:"武穴市"},{letter:"W",city:"舞阳县"},{letter:"W",city:"武义县"},{letter:"W",city:"武邑县"},{letter:"W",city:"武夷山市"},{letter:"W",city:"五原县"},{letter:"W",city:"婺源县"},{letter:"W",city:"五寨县"},{letter:"W",city:"武陟县"},{letter:"W",city:"五指山市"},{letter:"W",city:"吴忠市"},{letter:"W",city:"梧州市"},{letter:"X",city:"夏河县"},{letter:"X",city:"峡江县"},{letter:"X",city:"夏津县"},{letter:"X",city:"厦门市"},{letter:"X",city:"西安市"},{letter:"X",city:"咸丰县"},{letter:"X",city:"项城市"},{letter:"X",city:"襄城县"},{letter:"X",city:"乡城县"},{letter:"X",city:"襄汾县"},{letter:"X",city:"香港特别行政区"},{letter:"X",city:"香格里拉市"},{letter:"X",city:"香河县"},{letter:"X",city:"镶黄旗"},{letter:"X",city:"乡宁县"},{letter:"X",city:"象山县"},{letter:"X",city:"响水县"},{letter:"X",city:"湘潭市"},{letter:"X",city:"湘潭县"},{letter:"X",city:"湘乡市"},{letter:"X",city:"湘西土家族苗族自治州"},{letter:"X",city:"襄阳市"},{letter:"X",city:"湘阴县"},{letter:"X",city:"襄垣县"},{letter:"X",city:"祥云县"},{letter:"X",city:"象州县"},{letter:"X",city:"仙居县"},{letter:"X",city:"咸宁市"},{letter:"X",city:"仙桃市"},{letter:"X",city:"献县"},{letter:"X",city:"咸阳市"},{letter:"X",city:"仙游县"},{letter:"X",city:"孝昌县"},{letter:"X",city:"孝感市"},{letter:"X",city:"小金县"},{letter:"X",city:"萧县"},{letter:"X",city:"孝义市"},{letter:"X",city:"霞浦县"},{letter:"X",city:"夏县"},{letter:"X",city:"夏邑县"},{letter:"X",city:"西昌市"},{letter:"X",city:"西充县"},{letter:"X",city:"西畴县"},{letter:"X",city:"淅川县"},{letter:"X",city:"喜德县"},{letter:"X",city:"谢通门县"},{letter:"X",city:"西丰县"},{letter:"X",city:"息烽县"},{letter:"X",city:"西和县"},{letter:"X",city:"西华县"},{letter:"X",city:"西吉县"},{letter:"X",city:"西林县"},{letter:"X",city:"锡林郭勒盟"},{letter:"X",city:"锡林浩特市"},{letter:"X",city:"西盟佤族自治县"},{letter:"X",city:"新安县"},{letter:"X",city:"新巴尔虎右旗"},{letter:"X",city:"新巴尔虎左旗"},{letter:"X",city:"新宾满族自治县"},{letter:"X",city:"新蔡县"},{letter:"X",city:"新昌县"},{letter:"X",city:"忻城县"},{letter:"X",city:"信丰县"},{letter:"X",city:"新丰县"},{letter:"X",city:"兴安盟"},{letter:"X",city:"新干县"},{letter:"X",city:"兴安县"},{letter:"X",city:"兴城市"},{letter:"X",city:"兴国县"},{letter:"X",city:"兴海县"},{letter:"X",city:"兴和县"},{letter:"X",city:"兴化市"},{letter:"X",city:"兴隆县"},{letter:"X",city:"兴宁市"},{letter:"X",city:"兴平市"},{letter:"X",city:"兴仁县"},{letter:"X",city:"兴山县"},{letter:"X",city:"邢台市"},{letter:"X",city:"邢台县"},{letter:"X",city:"行唐县"},{letter:"X",city:"兴文县"},{letter:"X",city:"兴县"},{letter:"X",city:"荥阳市"},{letter:"X",city:"兴业县"},{letter:"X",city:"兴义市"},{letter:"X",city:"新河县"},{letter:"X",city:"新和县"},{letter:"X",city:"新化县"},{letter:"X",city:"新晃侗族自治县"},{letter:"X",city:"西宁市"},{letter:"X",city:"辛集市"},{letter:"X",city:"新绛县"},{letter:"X",city:"新津县"},{letter:"X",city:"新乐市"},{letter:"X",city:"新龙县"},{letter:"X",city:"新密市"},{letter:"X",city:"新民市"},{letter:"X",city:"新宁县"},{letter:"X",city:"新平彝族傣族自治县"},{letter:"X",city:"新邵县"},{letter:"X",city:"新泰市"},{letter:"X",city:"新田县"},{letter:"X",city:"新县"},{letter:"X",city:"新乡市"},{letter:"X",city:"新乡县"},{letter:"X",city:"新兴县"},{letter:"X",city:"信阳市"},{letter:"X",city:"新野县"},{letter:"X",city:"信宜市"},{letter:"X",city:"新沂市"},{letter:"X",city:"新余市"},{letter:"X",city:"新源县"},{letter:"X",city:"新郑市"},{letter:"X",city:"忻州市"},{letter:"X",city:"雄县"},{letter:"X",city:"西平县"},{letter:"X",city:"西沙群岛"},{letter:"X",city:"西双版纳傣族自治州"},{letter:"X",city:"浠水县"},{letter:"X",city:"习水县"},{letter:"X",city:"休宁县"},{letter:"X",city:"秀山土家族苗族自治县"},{letter:"X",city:"修水县"},{letter:"X",city:"修文县"},{letter:"X",city:"修武县"},{letter:"X",city:"岫岩满族自治县"},{letter:"X",city:"西乌珠穆沁旗"},{letter:"X",city:"西峡县"},{letter:"X",city:"息县"},{letter:"X",city:"隰县"},{letter:"X",city:"西乡县"},{letter:"X",city:"昔阳县"},{letter:"X",city:"宣城市"},{letter:"X",city:"宣恩县"},{letter:"X",city:"宣汉县"},{letter:"X",city:"宣化县"},{letter:"X",city:"宣威市"},{letter:"X",city:"许昌市"},{letter:"X",city:"寻甸回族彝族自治县"},{letter:"X",city:"循化撒拉族自治县"},{letter:"X",city:"逊克县"},{letter:"X",city:"寻乌县"},{letter:"X",city:"浚县"},{letter:"X",city:"旬阳县"},{letter:"X",city:"旬邑县"},{letter:"X",city:"溆浦县"},{letter:"X",city:"徐闻县"},{letter:"X",city:"盱眙县"},{letter:"X",city:"叙永县"},{letter:"X",city:"徐州市"},{letter:"Y",city:"雅安市"},{letter:"Y",city:"亚东县"},{letter:"Y",city:"雅江县"},{letter:"Y",city:"牙克石市"},{letter:"Y",city:"延安市"},{letter:"Y",city:"延边朝鲜族自治州"},{letter:"Y",city:"盐边县"},{letter:"Y",city:"延长县"},{letter:"Y",city:"盐城市"},{letter:"Y",city:"盐池县"},{letter:"Y",city:"延川县"},{letter:"Y",city:"漾濞彝族自治县"},{letter:"Y",city:"阳城县"},{letter:"Y",city:"阳春市"},{letter:"Y",city:"阳高县"},{letter:"Y",city:"阳谷县"},{letter:"Y",city:"阳江市"},{letter:"Y",city:"阳曲县"},{letter:"Y",city:"阳泉市"},{letter:"Y",city:"阳山县"},{letter:"Y",city:"阳朔县"},{letter:"Y",city:"阳西县"},{letter:"Y",city:"洋县"},{letter:"Y",city:"阳新县"},{letter:"Y",city:"阳信县"},{letter:"Y",city:"阳原县"},{letter:"Y",city:"扬中市"},{letter:"Y",city:"扬州市"},{letter:"Y",city:"沿河土家族自治县"},{letter:"Y",city:"延吉市"},{letter:"Y",city:"延津县"},{letter:"Y",city:"盐津县"},{letter:"Y",city:"鄢陵县"},{letter:"Y",city:"炎陵县"},{letter:"Y",city:"焉耆回族自治县"},{letter:"Y",city:"盐山县"},{letter:"Y",city:"铅山县"},{letter:"Y",city:"砚山县"},{letter:"Y",city:"偃师市"},{letter:"Y",city:"延寿县"},{letter:"Y",city:"烟台市"},{letter:"Y",city:"盐亭县"},{letter:"Y",city:"盐源县"},{letter:"Y",city:"姚安县"},{letter:"Y",city:"叶城县"},{letter:"Y",city:"叶县"},{letter:"Y",city:"依安县"},{letter:"Y",city:"宜宾市"},{letter:"Y",city:"宜宾县"},{letter:"Y",city:"宜昌市"},{letter:"Y",city:"宜城市"},{letter:"Y",city:"翼城县"},{letter:"Y",city:"伊川县"},{letter:"Y",city:"宜川县"},{letter:"Y",city:"宜春市"},{letter:"Y",city:"伊春市"},{letter:"Y",city:"宜都市"},{letter:"Y",city:"宜丰县"},{letter:"Y",city:"宜黄县"},{letter:"Y",city:"伊金霍洛旗"},{letter:"Y",city:"宜君县"},{letter:"Y",city:"依兰县"},{letter:"Y",city:"宜良县"},{letter:"Y",city:"彝良县"},{letter:"Y",city:"伊犁哈萨克自治州"},{letter:"Y",city:"仪陇县"},{letter:"Y",city:"义马市"},{letter:"Y",city:"易门县"},{letter:"Y",city:"沂南县"},{letter:"Y",city:"银川市"},{letter:"Y",city:"应城市"},{letter:"Y",city:"英德市"},{letter:"Y",city:"盈江县"},{letter:"Y",city:"荥经县"},{letter:"Y",city:"英吉沙县"},{letter:"Y",city:"营口市"},{letter:"Y",city:"营山县"},{letter:"Y",city:"英山县"},{letter:"Y",city:"颍上县"},{letter:"Y",city:"鹰潭市"},{letter:"Y",city:"应县"},{letter:"Y",city:"伊宁市"},{letter:"Y",city:"伊宁县"},{letter:"Y",city:"印江土家族苗族自治县"},{letter:"Y",city:"沂水县"},{letter:"Y",city:"伊通满族自治县"},{letter:"Y",city:"义乌市"},{letter:"Y",city:"伊吾县"},{letter:"Y",city:"易县"},{letter:"Y",city:"义县"},{letter:"Y",city:"黟县"},{letter:"Y",city:"宜兴市"},{letter:"Y",city:"益阳市"},{letter:"Y",city:"弋阳县"},{letter:"Y",city:"宜阳县"},{letter:"Y",city:"沂源县"},{letter:"Y",city:"宜章县"},{letter:"Y",city:"仪征市"},{letter:"Y",city:"永安市"},{letter:"Y",city:"永昌县"},{letter:"Y",city:"永城市"},{letter:"Y",city:"永春县"},{letter:"Y",city:"永德县"},{letter:"Y",city:"永登县"},{letter:"Y",city:"永丰县"},{letter:"Y",city:"永福县"},{letter:"Y",city:"永和县"},{letter:"Y",city:"永济市"},{letter:"Y",city:"永吉县"},{letter:"Y",city:"永嘉县"},{letter:"Y",city:"永靖县"},{letter:"Y",city:"永康市"},{letter:"Y",city:"永年县"},{letter:"Y",city:"永宁县"},{letter:"Y",city:"永平县"},{letter:"Y",city:"永清县"},{letter:"Y",city:"永仁县"},{letter:"Y",city:"永善县"},{letter:"Y",city:"永胜县"},{letter:"Y",city:"永寿县"},{letter:"Y",city:"永顺县"},{letter:"Y",city:"永泰县"},{letter:"Y",city:"永新县"},{letter:"Y",city:"永兴县"},{letter:"Y",city:"永修县"},{letter:"Y",city:"永州市"},{letter:"Y",city:"尤溪县"},{letter:"Y",city:"攸县"},{letter:"Y",city:"酉阳土家族苗族自治县"},{letter:"Y",city:"友谊县"},{letter:"Y",city:"右玉县"},{letter:"Y",city:"远安县"},{letter:"Y",city:"沅江市"},{letter:"Y",city:"元江哈尼族彝族傣族自治县"},{letter:"Y",city:"沅陵县"},{letter:"Y",city:"元谋县"},{letter:"Y",city:"原平市"},{letter:"Y",city:"垣曲县"},{letter:"Y",city:"元氏县"},{letter:"Y",city:"原阳县"},{letter:"Y",city:"元阳县"},{letter:"Y",city:"虞城县"},{letter:"Y",city:"禹城市"},{letter:"Y",city:"于都县"},{letter:"Y",city:"岳池县"},{letter:"Y",city:"岳普湖县"},{letter:"Y",city:"乐清市"},{letter:"Y",city:"岳西县"},{letter:"Y",city:"越西县"},{letter:"Y",city:"岳阳市"},{letter:"Y",city:"岳阳县"},{letter:"Y",city:"余干县"},{letter:"Y",city:"玉环市"},{letter:"Y",city:"余江县"},{letter:"Y",city:"玉林市"},{letter:"Y",city:"榆林市"},{letter:"Y",city:"玉龙纳西族自治县"},{letter:"Y",city:"玉门市"},{letter:"Y",city:"裕民县"},{letter:"Y",city:"郁南县"},{letter:"Y",city:"运城市"},{letter:"Y",city:"郓城县"},{letter:"Y",city:"云浮市"},{letter:"Y",city:"云和县"},{letter:"Y",city:"筠连县"},{letter:"Y",city:"云龙县"},{letter:"Y",city:"云梦县"},{letter:"Y",city:"郧西县"},{letter:"Y",city:"勋县"},{letter:"Y",city:"云县"},{letter:"Y",city:"云霄县"},{letter:"Y",city:"云阳县"},{letter:"Y",city:"玉屏侗族自治县"},{letter:"Y",city:"余庆县"},{letter:"Y",city:"玉山县"},{letter:"Y",city:"榆社县"},{letter:"Y",city:"榆树市"},{letter:"Y",city:"玉树市"},{letter:"Y",city:"玉树藏族自治州"},{letter:"Y",city:"鱼台县"},{letter:"Y",city:"玉田县"},{letter:"Y",city:"于田县"},{letter:"Y",city:"玉溪市"},{letter:"Y",city:"蔚县"},{letter:"Y",city:"盂县"},{letter:"Y",city:"余姚市"},{letter:"Y",city:"榆中县"},{letter:"Y",city:"禹州市"},{letter:"Z",city:"杂多县"},{letter:"Z",city:"赞皇县"},{letter:"Z",city:"枣强县"},{letter:"Z",city:"枣阳市"},{letter:"Z",city:"枣庄市"},{letter:"Z",city:"泽库县"},{letter:"Z",city:"泽普县"},{letter:"Z",city:"泽州县"},{letter:"Z",city:"札达县"},{letter:"Z",city:"扎赉特旗"},{letter:"Z",city:"扎兰屯市"},{letter:"Z",city:"扎鲁特旗"},{letter:"Z",city:"扎囊县"},{letter:"Z",city:"张北县"},{letter:"Z",city:"张家川回族自治县"},{letter:"Z",city:"张家港市"},{letter:"Z",city:"张家界市"},{letter:"Z",city:"张家口市"},{letter:"Z",city:"漳平市"},{letter:"Z",city:"漳浦县"},{letter:"Z",city:"樟树市"},{letter:"Z",city:"彰武县"},{letter:"Z",city:"漳县"},{letter:"Z",city:"张掖市"},{letter:"Z",city:"漳州市"},{letter:"Z",city:"长子县"},{letter:"Z",city:"湛江市"},{letter:"Z",city:"诏安县"},{letter:"Z",city:"肇东市"},{letter:"Z",city:"昭觉县"},{letter:"Z",city:"昭平县"},{letter:"Z",city:"肇庆市"},{letter:"Z",city:"昭苏县"},{letter:"Z",city:"昭通市"},{letter:"Z",city:"赵县"},{letter:"Z",city:"招远市"},{letter:"Z",city:"肇源县"},{letter:"Z",city:"肇州县"},{letter:"Z",city:"柘城县"},{letter:"Z",city:"镇安县"},{letter:"Z",city:"镇巴县"},{letter:"Z",city:"贞丰县"},{letter:"Z",city:"正安县"},{letter:"Z",city:"正定县"},{letter:"Z",city:"政和县"},{letter:"Z",city:"正蓝旗"},{letter:"Z",city:"正宁县"},{letter:"Z",city:"正镶白旗"},{letter:"Z",city:"正阳县"},{letter:"Z",city:"郑州市"},{letter:"Z",city:"镇江市"},{letter:"Z",city:"镇康县"},{letter:"Z",city:"镇赉县"},{letter:"Z",city:"镇宁布依族苗族自治县"},{letter:"Z",city:"镇平县"},{letter:"Z",city:"镇坪县"},{letter:"Z",city:"镇雄县"},{letter:"Z",city:"镇远县"},{letter:"Z",city:"镇原县"},{letter:"Z",city:"镇沅彝族哈尼族拉祜族自治县"},{letter:"Z",city:"柘荣县"},{letter:"Z",city:"志丹县"},{letter:"Z",city:"治多县"},{letter:"Z",city:"枝江市"},{letter:"Z",city:"芷江侗族自治县"},{letter:"Z",city:"织金县"},{letter:"Z",city:"仲巴县"},{letter:"Z",city:"中方县"},{letter:"Z",city:"中江县"},{letter:"Z",city:"中牟县"},{letter:"Z",city:"中宁县"},{letter:"Z",city:"中山市"},{letter:"Z",city:"钟山县"},{letter:"Z",city:"中沙群岛的岛礁及其海域"},{letter:"Z",city:"中卫市"},{letter:"Z",city:"忠县"},{letter:"Z",city:"钟祥市"},{letter:"Z",city:"中阳县"},{letter:"Z",city:"周口市"},{letter:"Z",city:"周宁县"},{letter:"Z",city:"舟曲县"},{letter:"Z",city:"舟山市"},{letter:"Z",city:"周至县"},{letter:"Z",city:"庄河市"},{letter:"Z",city:"庄浪县"},{letter:"Z",city:"诸城市"},{letter:"Z",city:"珠海市"},{letter:"Z",city:"诸暨市"},{letter:"Z",city:"驻马店市"},{letter:"Z",city:"准格尔旗"},{letter:"Z",city:"涿鹿县"},{letter:"Z",city:"卓尼县"},{letter:"Z",city:"涿州市"},{letter:"Z",city:"卓资县"},{letter:"Z",city:"竹山县"},{letter:"Z",city:"竹溪县"},{letter:"Z",city:"株洲市"},{letter:"Z",city:"株洲县"},{letter:"Z",city:"淄博市"},{letter:"Z",city:"子长县"},{letter:"Z",city:"自贡市"},{letter:"Z",city:"秭归县"},{letter:"Z",city:"紫金县"},{letter:"Z",city:"梓潼县"},{letter:"Z",city:"资溪县"},{letter:"Z",city:"资兴市"},{letter:"Z",city:"资阳市"},{letter:"Z",city:"紫阳县"},{letter:"Z",city:"资源县"},{letter:"Z",city:"紫云苗族布依族自治县"},{letter:"Z",city:"资中县"},{letter:"Z",city:"子洲县"},{letter:"Z",city:"枞阳县"},{letter:"Z",city:"邹城市"},{letter:"Z",city:"邹平县"},{letter:"Z",city:"遵化市"},{letter:"Z",city:"遵义市"},{letter:"Z",city:"左贡县"},{letter:"Z",city:"左权县"},{letter:"Z",city:"柞水县"},{letter:"Z",city:"左云县"}],bd={__name:"idCard",props:{consultantType:String,modelValue:Object},emits:["update:modelValue","committed"],setup(t,{expose:n,emit:r}){e.ref(kd),e.ref("");const o=e.ref(null);e.ref(null);const l=e.ref("请选择"),d=e.ref("请选择");e.ref(null),e.ref(null);const u=e.ref("请选择"),m=e.ref(["白羊座","金牛座","双子座","巨蟹座","狮子座","处女座","天秤座","天蝎座","射手座","摩羯座","水瓶座","双鱼座"]),h=()=>{o.value.open()},p=e.ref(!1),g=e.ref([]),y=r,f=e=>{constellation.value=m.value[e.detail.value]},v=e=>{i("log","at pages/auth/components/idCard.vue:164",e)},E=t;n({submit:async()=>{if(i("log","at pages/auth/components/idCard.vue:178","子组件收到父组件调用，"),null==b.value.idcardFront)return void uni.showToast({title:"请上传身份证人像页",icon:"none"});if(null==b.value.idcardBackend)return void uni.showToast({title:"请上传身份证国徽页",icon:"error"});if(null==b.value.consultantName)return void uni.showToast({title:"请输入姓名",icon:"error"});if(null==b.value.idcardNum)return void uni.showToast({title:"请输入身份证号",icon:"error"});b.value.consultantType=E.consultantType,uni.showLoading({title:"提交中"});let e=await((e,t={})=>_.post("/api/consultant/consultant/step1",e,t))(b.value);uni.hideLoading(),i("log","at pages/auth/components/idCard.vue:221",e),b.value=e.data,y("committed","")}});const w=()=>{uni.navigateTo({url:"/pages/auth/cityChoose"})};a((()=>{const e=uni.getStorageSync("verifyAddress");i("log","at pages/auth/components/idCard.vue:241",e),e&&(d.value=e),g.value=JSON.parse(uni.getStorageSync("consultantMenu")),i("log","at pages/auth/components/idCard.vue:246",g.value)})),c((()=>{uni.removeStorageSync("verifyAddress")}));const N=()=>{o.value.close()},k=e=>{uni.chooseImage({count:1,success:async function(t){if(1==e){let e=await Hc("/api/common/upload",t.tempFilePaths[0]);0==e.code&&(b.value.idcardFront=e.data.url)}else{let e=await Hc("/api/common/upload",t.tempFilePaths[0]);0==e.code&&(b.value.idcardBackend=e.data.url)}}})},b=e.computed({get:()=>E.modelValue,set:e=>y("update:modelValue",e)});return(t,i)=>{const n=s(e.resolveDynamicComponent("uni-icons"),Q),a=s(e.resolveDynamicComponent("uni-easyinput"),$l),r=s(e.resolveDynamicComponent("u-checkbox"),gd),c=s(e.resolveDynamicComponent("u-checkbox-group"),fd),d=s(e.resolveDynamicComponent("u-button"),Ed),y=s(e.resolveDynamicComponent("u-popup"),Nd),E=s(e.resolveDynamicComponent("uni-popup"),Qe);return e.openBlock(),e.createElementBlock("view",{class:"id-card-box"},[e.createElementVNode("view",{class:"id-card-content-box"},[e.createElementVNode("view",{class:"id-card-content"},[e.createElementVNode("view",{class:"title"},"身份认证"),e.createElementVNode("view",{class:"remark"},"仅用于身份实名核验，信息会严格保密"),e.createElementVNode("view",{class:"unload-card-box"},[e.createElementVNode("view",{class:"upload-card-item",onClick:i[0]||(i[0]=e=>k(1))},[e.createElementVNode("image",{src:null==b.value.idcardFront?"/static/auth/id-card-front.png":b.value.idcardFront,class:"img"},null,8,["src"]),e.createElementVNode("view",{class:"txt"},"身份证人像面")]),e.createElementVNode("view",{class:"upload-card-item",onClick:i[1]||(i[1]=e=>k(2))},[e.createElementVNode("image",{src:null==b.value.idcardBackend?"/static/auth/id-card-back.png":b.value.idcardBackend,class:"img"},null,8,["src"]),e.createElementVNode("view",{class:"txt"},"身份证国徽面")])]),e.createElementVNode("view",{class:"id-card-form-content"},[e.createElementVNode("view",{class:"form-item"},[e.createElementVNode("view",{class:"label require"},"姓名"),e.createElementVNode("view",{class:"content"},[e.withDirectives(e.createElementVNode("input",{type:"text",style:{"font-size":"28rpx"},"onUpdate:modelValue":i[2]||(i[2]=e=>b.value.consultantName=e),placeholder:"请输入姓名"},null,512),[[e.vModelText,b.value.consultantName]])])]),e.createElementVNode("view",{class:"form-item"},[e.createElementVNode("view",{class:"label require"},"身份证号"),e.createElementVNode("view",{class:"content"},[e.withDirectives(e.createElementVNode("input",{type:"text","onUpdate:modelValue":i[3]||(i[3]=e=>b.value.idcardNum=e),style:{"font-size":"28rpx"},placeholder:"请输入身份证号"},null,512),[[e.vModelText,b.value.idcardNum]])])]),e.createElementVNode("view",{class:"form-item"},[e.createElementVNode("view",{class:"label require"},"职业"),e.createElementVNode("view",{class:e.normalizeClass(["content",t.value?"":"weight"]),onClick:h},[e.createTextVNode(e.toDisplayString(l.value),1),e.createVNode(n,{type:"right",size:"14",color:"rgba(0, 0, 0, 0.3)"})],2)]),e.createElementVNode("view",{class:"form-item"},[e.createElementVNode("view",{class:"label require"},"星座"),e.createElementVNode("picker",{range:m.value,onChange:f},[e.createElementVNode("view",{class:e.normalizeClass(["content",t.value?"":"weight"])},[e.createTextVNode(e.toDisplayString(null==b.value.constellation?"请选择":b.value.constellation),1),e.createVNode(n,{type:"right",size:"14",color:"rgba(0, 0, 0, 0.3)"})],2)],40,["range"])]),e.createElementVNode("view",{class:"form-item"},[e.createElementVNode("view",{class:"label require"},"所在地区"),e.createElementVNode("view",{class:e.normalizeClass(["content",t.value?"":"weight"]),onClick:w},[e.createTextVNode(e.toDisplayString(b.value.address),1),e.createVNode(n,{type:"right",size:"14",color:"rgba(0, 0, 0, 0.3)"})],2)]),e.createElementVNode("view",{class:"form-item",onClick:i[5]||(i[5]=e=>p.value=!0)},[e.createElementVNode("view",{class:"label require"},"服务类型"),e.createElementVNode("view",{onClick:i[4]||(i[4]=()=>{})},e.toDisplayString(u.value),1)]),e.createElementVNode("view",{class:"form-item user-sign"},[e.createElementVNode("view",{class:"label"},"个人签名"),e.createElementVNode("view",{class:"content-input",style:{width:"400rpx"}},[e.createVNode(a,{trim:"all",type:"text",placeholder:"请输入个人签名",inputBorder:!1,clearable:!1,modelValue:b.value.signature,"onUpdate:modelValue":i[6]||(i[6]=e=>b.value.signature=e),style:{"text-align":"right"}},null,8,["modelValue"])])]),e.createElementVNode("view",{class:"form-item user-introduction"},[e.createElementVNode("view",{class:"label"},"个人简介"),e.createElementVNode("view",{class:"introduction-content"},[e.createVNode(a,{type:"textarea",placeholder:"请输入个人简介",modelValue:b.value.profile,"onUpdate:modelValue":i[7]||(i[7]=e=>b.value.profile=e),inputBorder:!1,clearable:!1,styles:{"background-color":"#f6f6f6"}},null,8,["modelValue"])])])])])]),e.createVNode(y,{modelValue:p.value,"onUpdate:modelValue":i[9]||(i[9]=e=>p.value=e),mode:"bottom"},{default:e.withCtx((()=>[e.createElementVNode("view",{style:{padding:"30rpx"}},[e.createElementVNode("view",{class:"title"},"请选择服务类型"),e.createVNode(c,{onChange:v},{default:e.withCtx((()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(g.value,((t,i)=>(e.openBlock(),e.createElementBlock("view",{key:i,style:{height:"60rpx","margin-left":"30rpx"}},[e.createVNode(r,{modelValue:t.checked,"onUpdate:modelValue":e=>t.checked=e,name:t.id},{default:e.withCtx((()=>[e.createTextVNode(e.toDisplayString(t.name),1)])),_:2},1032,["modelValue","onUpdate:modelValue","name"])])))),128))])),_:1}),e.createElementVNode("view",{style:{display:"flex","flex-direction":"row"}},[e.createVNode(d,{size:"medium",type:"primary",plain:""},{default:e.withCtx((()=>[e.createTextVNode("确定")])),_:1}),e.createVNode(d,{size:"medium",onClick:i[8]||(i[8]=e=>p.value=!1)},{default:e.withCtx((()=>[e.createTextVNode("取消")])),_:1})])])])),_:1},8,["modelValue"]),e.createVNode(E,{ref_key:"popup",ref:o,type:"bottom","border-radius":"24rpx 24rpx 0 0",class:"career-popup"},{default:e.withCtx((()=>[e.createElementVNode("view",{class:"career-popup-box"},[e.createElementVNode("view",{class:"career-popup-header"},[e.createElementVNode("view"),e.createElementVNode("view",{class:"title"},"选择职业"),e.createElementVNode("view",{onClick:N},[e.createVNode(n,{type:"closeempty",size:"14",color:"rgba(0,0,0,0.3)"})])]),e.createElementVNode("view",{class:"career-popup-content-list"},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(20,(t=>e.createElementVNode("view",{class:"career-popup-content-item",onClick:e=>(e=>{l.value="心理咨询师"+e,o.value.close()})(t),key:t}," 心理咨询师"+e.toDisplayString(t),9,["onClick"]))),64))])])])),_:1},512)])}}},Cd=X(bd,[["__scopeId","data-v-31cb69a4"]]),Sd={pages:[{path:"pages/login/login",style:{navigationBarTitleText:"登录",navigationStyle:"custom"}},{path:"pages/confide/index",style:{navigationBarTitleText:"倾听师首页"}},{path:"pages/confide/detail",style:{navigationBarTitleText:"倾听师详情"}},{path:"pages/consult/index",style:{navigationBarTitleText:"咨询师首页"}},{path:"pages/consult/detail",style:{navigationBarTitleText:"咨询师详情"}},{path:"pages/index/index",style:{navigationBarTitleText:"首页"}},{path:"pages/message/index",style:{navigationBarTitleText:"消息"}},{path:"pages/my/index",style:{navigationStyle:"custom",backgroundColor:"#F4F6F8",navigationBarTitleText:"我的"}},{path:"pages/readArticle/readArticle",style:{navigationBarTitleText:"文章列表"}},{path:"pages/readArticle/articleDetail",style:{navigationBarTitleText:"文章详情"}},{path:"pages/settled/settled",style:{navigationBarTitleText:"入驻"}},{path:"pages/consult-feel/consult-feel",style:{navigationBarTitleText:"咨询感受"}},{path:"pages/evaluate/evaluate",style:{navigationBarTitleText:"评价列表"}},{path:"pages/forum/index/index",style:{navigationBarTitleText:"论坛首页"}},{path:"pages/forum/write/write",style:{navigationBarTitleText:"写"}},{path:"pages/forum/my/my",style:{navigationBarTitleText:"个人空间"}},{path:"pages/forum/other/other",style:{navigationBarTitleText:"其他人空间"}},{path:"pages/forum/mailbox/mailbox",style:{navigationBarTitleText:"信箱详情"}},{path:"pages/forum/write/ask-question/ask-question",style:{navigationBarTitleText:"提问题"}},{path:"pages/forum/write/send-dynamics/send-dynamics",style:{navigationBarTitleText:"发动态"}},{path:"pages/forum/write/write-mailbox/write-mailbox",style:{navigationBarTitleText:"写信"}},{path:"pages/forum/my/userInfo",style:{navigationBarTitleText:"用户信息"}},{path:"pages/forum/write/choose-topic/choose-topic",style:{navigationBarTitleText:"选择话题"}},{path:"pages/forum/index/qaDetail",style:{navigationBarTitleText:"问答详情"}},{path:"pages/psychological-test/index/index",style:{navigationBarTitleText:"心理测试"}},{path:"pages/psychological-test/order/order",style:{navigationBarTitleText:"我的评测"}},{path:"pages/psychological-test/test-type/test-type",style:{navigationBarTitleText:"评测类型"}},{path:"pages/psychological-test/start-test/start-test",style:{navigationBarTitleText:"潜意识投射测试"}},{path:"pages/psychological-test/comment/comment",style:{navigationBarTitleText:"评论"}},{path:"pages/psychological-test/contact-consult/contact-consult",style:{navigationBarTitleText:"联系咨询师"}},{path:"pages/psychological-test/test-result/test-result",style:{navigationBarTitleText:"测试结果"}},{path:"pages/psychological-test/charge-test/charge-test",style:{navigationBarTitleText:"收费测试"}},{path:"pages/psychological-test/free-test/free-test",style:{navigationBarTitleText:"免费测试"}},{path:"pages/message/private-chat",style:{navigationBarTitleText:"uni-app",navigationBarBackgroundColor:"#F1F1F1",enablePullDownRefresh:!0}},{path:"pages/auth/auth",style:{navigationBarTitleText:"认证",navigationBarBackgroundColor:"#F4F6F8",navigationStyle:"",navigationBarTextStyle:"black"}},{path:"pages/auth/cityChoose",style:{navigationBarTitleText:"城市选择",navigationBarBackgroundColor:"#F4F6F8",navigationBarTextStyle:"black"}},{path:"pages/payment/payment",style:{navigationBarTitleText:"订单支付",navigationBarBackgroundColor:"#F4F6F8",navigationBarTextStyle:"black"}},{path:"pages/payment/payment-records",style:{navigationBarTitleText:"我的订单",navigationBarBackgroundColor:"#F4F6F8",navigationBarTextStyle:"black"}}],tabBar:{color:"#7A7E83",selectedColor:"#3cc51f",borderStyle:"black",backgroundColor:"#ffffff",list:[{pagePath:"pages/index/index",iconPath:"/static/switchIcon/index.png",selectedIconPath:"/static/switchIcon/index-active.png",text:"首页"},{pagePath:"pages/consult/index",iconPath:"/static/switchIcon/consult.png",selectedIconPath:"/static/switchIcon/consult-active.png",text:"咨询"},{pagePath:"pages/confide/index",iconPath:"/static/switchIcon/confide.png",selectedIconPath:"/static/switchIcon/confide-active.png",text:"倾诉"},{pagePath:"pages/message/index",iconPath:"/static/switchIcon/message.png",selectedIconPath:"/static/switchIcon/message-active.png",text:"消息"},{pagePath:"pages/my/index",iconPath:"/static/switchIcon/my.png",selectedIconPath:"/static/switchIcon/my-active.png",text:"我的"}]},globalStyle:{navigationBarTitleText:"",navigationStyle:"custom",navigationBarBackgroundColor:"#ffffff",pageOrientation:"portrait",navigationBarTextStyle:"black",backgroundColor:"#F4F6F8",backgroundColorTop:"#F4F5F6",backgroundColorBottom:"#F4F5F6",h5:{maxWidth:1190,navigationBarTextStyle:"white",navigationBarBackgroundColor:"#007AFF"},bounce:"none"},uniIdRouter:{},condition:{current:0,list:[{name:"",path:"pages/login/login",query:""}]}};function xd(e,t,i){return e(i={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&i.path)}},i.exports),i.exports}var Vd=xd((function(e,t){var i;e.exports=(i=i||function(e,t){var i=Object.create||function(){function e(){}return function(t){var i;return e.prototype=t,i=new e,e.prototype=null,i}}(),s={},n=s.lib={},a=n.Base={extend:function(e){var t=i(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},r=n.WordArray=a.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||l).stringify(this)},concat:function(e){var t=this.words,i=e.words,s=this.sigBytes,n=e.sigBytes;if(this.clamp(),s%4)for(var a=0;a<n;a++){var r=i[a>>>2]>>>24-a%4*8&255;t[s+a>>>2]|=r<<24-(s+a)%4*8}else for(a=0;a<n;a+=4)t[s+a>>>2]=i[a>>>2];return this.sigBytes+=n,this},clamp:function(){var t=this.words,i=this.sigBytes;t[i>>>2]&=4294967295<<32-i%4*8,t.length=e.ceil(i/4)},clone:function(){var e=a.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var i,s=[],n=function(t){var i=987654321,s=4294967295;return function(){var n=((i=36969*(65535&i)+(i>>16)&s)<<16)+(t=18e3*(65535&t)+(t>>16)&s)&s;return n/=4294967296,(n+=.5)*(e.random()>.5?1:-1)}},a=0;a<t;a+=4){var o=n(4294967296*(i||e.random()));i=987654071*o(),s.push(4294967296*o()|0)}return new r.init(s,t)}}),o=s.enc={},l=o.Hex={stringify:function(e){for(var t=e.words,i=e.sigBytes,s=[],n=0;n<i;n++){var a=t[n>>>2]>>>24-n%4*8&255;s.push((a>>>4).toString(16)),s.push((15&a).toString(16))}return s.join("")},parse:function(e){for(var t=e.length,i=[],s=0;s<t;s+=2)i[s>>>3]|=parseInt(e.substr(s,2),16)<<24-s%8*4;return new r.init(i,t/2)}},c=o.Latin1={stringify:function(e){for(var t=e.words,i=e.sigBytes,s=[],n=0;n<i;n++){var a=t[n>>>2]>>>24-n%4*8&255;s.push(String.fromCharCode(a))}return s.join("")},parse:function(e){for(var t=e.length,i=[],s=0;s<t;s++)i[s>>>2]|=(255&e.charCodeAt(s))<<24-s%4*8;return new r.init(i,t)}},d=o.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(ut){throw new Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},u=n.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new r.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=d.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var i=this._data,s=i.words,n=i.sigBytes,a=this.blockSize,o=n/(4*a),l=(o=t?e.ceil(o):e.max((0|o)-this._minBufferSize,0))*a,c=e.min(4*l,n);if(l){for(var d=0;d<l;d+=a)this._doProcessBlock(s,d);var u=s.splice(0,l);i.sigBytes-=c}return new r.init(u,c)},clone:function(){var e=a.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});n.Hasher=u.extend({cfg:a.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){u.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,i){return new e.init(i).finalize(t)}},_createHmacHelper:function(e){return function(t,i){return new m.HMAC.init(e,i).finalize(t)}}});var m=s.algo={};return s}(Math),i)})),Td=Vd,Ad=(xd((function(e,t){var i;e.exports=(i=Td,function(e){var t=i,s=t.lib,n=s.WordArray,a=s.Hasher,r=t.algo,o=[];!function(){for(var t=0;t<64;t++)o[t]=4294967296*e.abs(e.sin(t+1))|0}();var l=r.MD5=a.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var i=0;i<16;i++){var s=t+i,n=e[s];e[s]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8)}var a=this._hash.words,r=e[t+0],l=e[t+1],h=e[t+2],p=e[t+3],g=e[t+4],y=e[t+5],f=e[t+6],v=e[t+7],E=e[t+8],w=e[t+9],N=e[t+10],k=e[t+11],b=e[t+12],C=e[t+13],S=e[t+14],x=e[t+15],V=a[0],T=a[1],A=a[2],_=a[3];V=c(V,T,A,_,r,7,o[0]),_=c(_,V,T,A,l,12,o[1]),A=c(A,_,V,T,h,17,o[2]),T=c(T,A,_,V,p,22,o[3]),V=c(V,T,A,_,g,7,o[4]),_=c(_,V,T,A,y,12,o[5]),A=c(A,_,V,T,f,17,o[6]),T=c(T,A,_,V,v,22,o[7]),V=c(V,T,A,_,E,7,o[8]),_=c(_,V,T,A,w,12,o[9]),A=c(A,_,V,T,N,17,o[10]),T=c(T,A,_,V,k,22,o[11]),V=c(V,T,A,_,b,7,o[12]),_=c(_,V,T,A,C,12,o[13]),A=c(A,_,V,T,S,17,o[14]),V=d(V,T=c(T,A,_,V,x,22,o[15]),A,_,l,5,o[16]),_=d(_,V,T,A,f,9,o[17]),A=d(A,_,V,T,k,14,o[18]),T=d(T,A,_,V,r,20,o[19]),V=d(V,T,A,_,y,5,o[20]),_=d(_,V,T,A,N,9,o[21]),A=d(A,_,V,T,x,14,o[22]),T=d(T,A,_,V,g,20,o[23]),V=d(V,T,A,_,w,5,o[24]),_=d(_,V,T,A,S,9,o[25]),A=d(A,_,V,T,p,14,o[26]),T=d(T,A,_,V,E,20,o[27]),V=d(V,T,A,_,C,5,o[28]),_=d(_,V,T,A,h,9,o[29]),A=d(A,_,V,T,v,14,o[30]),V=u(V,T=d(T,A,_,V,b,20,o[31]),A,_,y,4,o[32]),_=u(_,V,T,A,E,11,o[33]),A=u(A,_,V,T,k,16,o[34]),T=u(T,A,_,V,S,23,o[35]),V=u(V,T,A,_,l,4,o[36]),_=u(_,V,T,A,g,11,o[37]),A=u(A,_,V,T,v,16,o[38]),T=u(T,A,_,V,N,23,o[39]),V=u(V,T,A,_,C,4,o[40]),_=u(_,V,T,A,r,11,o[41]),A=u(A,_,V,T,p,16,o[42]),T=u(T,A,_,V,f,23,o[43]),V=u(V,T,A,_,w,4,o[44]),_=u(_,V,T,A,b,11,o[45]),A=u(A,_,V,T,x,16,o[46]),V=m(V,T=u(T,A,_,V,h,23,o[47]),A,_,r,6,o[48]),_=m(_,V,T,A,v,10,o[49]),A=m(A,_,V,T,S,15,o[50]),T=m(T,A,_,V,y,21,o[51]),V=m(V,T,A,_,b,6,o[52]),_=m(_,V,T,A,p,10,o[53]),A=m(A,_,V,T,N,15,o[54]),T=m(T,A,_,V,l,21,o[55]),V=m(V,T,A,_,E,6,o[56]),_=m(_,V,T,A,x,10,o[57]),A=m(A,_,V,T,f,15,o[58]),T=m(T,A,_,V,C,21,o[59]),V=m(V,T,A,_,g,6,o[60]),_=m(_,V,T,A,k,10,o[61]),A=m(A,_,V,T,h,15,o[62]),T=m(T,A,_,V,w,21,o[63]),a[0]=a[0]+V|0,a[1]=a[1]+T|0,a[2]=a[2]+A|0,a[3]=a[3]+_|0},_doFinalize:function(){var t=this._data,i=t.words,s=8*this._nDataBytes,n=8*t.sigBytes;i[n>>>5]|=128<<24-n%32;var a=e.floor(s/4294967296),r=s;i[15+(n+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),i[14+(n+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),t.sigBytes=4*(i.length+1),this._process();for(var o=this._hash,l=o.words,c=0;c<4;c++){var d=l[c];l[c]=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8)}return o},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}});function c(e,t,i,s,n,a,r){var o=e+(t&i|~t&s)+n+r;return(o<<a|o>>>32-a)+t}function d(e,t,i,s,n,a,r){var o=e+(t&s|i&~s)+n+r;return(o<<a|o>>>32-a)+t}function u(e,t,i,s,n,a,r){var o=e+(t^i^s)+n+r;return(o<<a|o>>>32-a)+t}function m(e,t,i,s,n,a,r){var o=e+(i^(t|~s))+n+r;return(o<<a|o>>>32-a)+t}t.MD5=a._createHelper(l),t.HmacMD5=a._createHmacHelper(l)}(Math),i.MD5)})),xd((function(e,t){var i,s,n;e.exports=(s=(i=Td).lib.Base,n=i.enc.Utf8,void(i.algo.HMAC=s.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=n.parse(t));var i=e.blockSize,s=4*i;t.sigBytes>s&&(t=e.finalize(t)),t.clamp();for(var a=this._oKey=t.clone(),r=this._iKey=t.clone(),o=a.words,l=r.words,c=0;c<i;c++)o[c]^=1549556828,l[c]^=909522486;a.sigBytes=r.sigBytes=s,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,i=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(i))}})))})),xd((function(e,t){e.exports=Td.HmacMD5}))),_d=xd((function(e,t){e.exports=Td.enc.Utf8})),Id=xd((function(e,t){var i,s,n;e.exports=(n=(s=i=Td).lib.WordArray,s.enc.Base64={stringify:function(e){var t=e.words,i=e.sigBytes,s=this._map;e.clamp();for(var n=[],a=0;a<i;a+=3)for(var r=(t[a>>>2]>>>24-a%4*8&255)<<16|(t[a+1>>>2]>>>24-(a+1)%4*8&255)<<8|t[a+2>>>2]>>>24-(a+2)%4*8&255,o=0;o<4&&a+.75*o<i;o++)n.push(s.charAt(r>>>6*(3-o)&63));var l=s.charAt(64);if(l)for(;n.length%4;)n.push(l);return n.join("")},parse:function(e){var t=e.length,i=this._map,s=this._reverseMap;if(!s){s=this._reverseMap=[];for(var a=0;a<i.length;a++)s[i.charCodeAt(a)]=a}var r=i.charAt(64);if(r){var o=e.indexOf(r);-1!==o&&(t=o)}return function(e,t,i){for(var s=[],a=0,r=0;r<t;r++)if(r%4){var o=i[e.charCodeAt(r-1)]<<r%4*2,l=i[e.charCodeAt(r)]>>>6-r%4*2;s[a>>>2]|=(o|l)<<24-a%4*8,a++}return n.create(s,a)}(e,t,s)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},i.enc.Base64)}));const Dd="uni_id_token",Bd="uni_id_token_expired",Rd="FUNCTION",Md="OBJECT",Pd="CLIENT_DB",Od="pending",Ld="rejected";function Fd(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function Ud(e){return"object"===Fd(e)}function zd(e){return"function"==typeof e}function Gd(e){return function(){try{return e.apply(e,arguments)}catch(t){console.error(t)}}}const Hd="REJECTED",jd="NOT_PENDING";let $d=class{constructor({createPromise:e,retryRule:t=Hd}={}){this.createPromise=e,this.status=null,this.promise=null,this.retryRule=t}get needRetry(){if(!this.status)return!0;switch(this.retryRule){case Hd:return this.status===Ld;case jd:return this.status!==Od}}exec(){return this.needRetry?(this.status=Od,this.promise=this.createPromise().then((e=>(this.status="fulfilled",Promise.resolve(e))),(e=>(this.status=Ld,Promise.reject(e)))),this.promise):this.promise}};function qd(e){return e&&"string"==typeof e?JSON.parse(e):e}const Wd=qd([]);qd("");const Jd=qd("[]")||[];let Yd="";try{Yd="__UNI__FB9F487"}catch(Lu){}let Xd,Qd={};function Zd(e,t={}){var i,s;return i=Qd,s=e,Object.prototype.hasOwnProperty.call(i,s)||(Qd[e]=t),Qd[e]}Qd=uni._globalUniCloudObj?uni._globalUniCloudObj:uni._globalUniCloudObj={};const Kd=["invoke","success","fail","complete"],eu=Zd("_globalUniCloudInterceptor");function tu(e,t){eu[e]||(eu[e]={}),Ud(t)&&Object.keys(t).forEach((i=>{Kd.indexOf(i)>-1&&function(e,t,i){let s=eu[e][t];s||(s=eu[e][t]=[]),-1===s.indexOf(i)&&zd(i)&&s.push(i)}(e,i,t[i])}))}function iu(e,t){eu[e]||(eu[e]={}),Ud(t)?Object.keys(t).forEach((i=>{Kd.indexOf(i)>-1&&function(e,t,i){const s=eu[e][t];if(!s)return;const n=s.indexOf(i);n>-1&&s.splice(n,1)}(e,i,t[i])})):delete eu[e]}function su(e,t){return e&&0!==e.length?e.reduce(((e,i)=>e.then((()=>i(t)))),Promise.resolve()):Promise.resolve()}function nu(e,t){return eu[e]&&eu[e][t]||[]}function au(e){tu("callObject",e)}const ru=Zd("_globalUniCloudListener"),ou="response",lu="needLogin",cu="refreshToken",du="clientdb",uu="cloudfunction",mu="cloudobject";function hu(e){return ru[e]||(ru[e]=[]),ru[e]}function pu(e,t){const i=hu(e);i.includes(t)||i.push(t)}function gu(e,t){const i=hu(e),s=i.indexOf(t);-1!==s&&i.splice(s,1)}function yu(e,t){const i=hu(e);for(let s=0;s<i.length;s++)(0,i[s])(t)}let fu,vu=!1;function Eu(){return fu||(fu=new Promise((e=>{vu&&e(),function t(){if("function"==typeof getCurrentPages){const t=getCurrentPages();t&&t[0]&&(vu=!0,e())}vu||setTimeout((()=>{t()}),30)}()})),fu)}function wu(e){const t={};for(const i in e){const s=e[i];zd(s)&&(t[i]=Gd(s))}return t}let Nu=class extends Error{constructor(e){const t=e.message||e.errMsg||"unknown system error";super(t),this.errMsg=t,this.code=this.errCode=e.code||e.errCode||"SYSTEM_ERROR",this.errSubject=this.subject=e.subject||e.errSubject,this.cause=e.cause,this.requestId=e.requestId}toJson(e=0){if(!(e>=10))return e++,{errCode:this.errCode,errMsg:this.errMsg,errSubject:this.errSubject,cause:this.cause&&this.cause.toJson?this.cause.toJson(e):this.cause}}};var ku={request:e=>uni.request(e),uploadFile:e=>uni.uploadFile(e),setStorageSync:(e,t)=>uni.setStorageSync(e,t),getStorageSync:e=>uni.getStorageSync(e),removeStorageSync:e=>uni.removeStorageSync(e),clearStorageSync:()=>uni.clearStorageSync(),connectSocket:e=>uni.connectSocket(e)};function bu(e){return e&&bu(e.__v_raw)||e}function Cu(){return{token:ku.getStorageSync(Dd)||ku.getStorageSync("uniIdToken"),tokenExpired:ku.getStorageSync(Bd)}}function Su({token:e,tokenExpired:t}={}){e&&ku.setStorageSync(Dd,e),t&&ku.setStorageSync(Bd,t)}let xu,Vu;function Tu(){return xu||(xu=uni.getSystemInfoSync()),xu}function Au(){let e,t;try{if(uni.getLaunchOptionsSync){if(uni.getLaunchOptionsSync.toString().indexOf("not yet implemented")>-1)return;const{scene:i,channel:s}=uni.getLaunchOptionsSync();e=s,t=i}}catch(i){}return{channel:e,scene:t}}let _u={};function Iu(){const e=uni.getLocale&&uni.getLocale()||"en";if(Vu)return{..._u,...Vu,locale:e,LOCALE:e};const t=Tu(),{deviceId:i,osName:s,uniPlatform:n,appId:a}=t,r=["appId","appLanguage","appName","appVersion","appVersionCode","appWgtVersion","browserName","browserVersion","deviceBrand","deviceId","deviceModel","deviceType","osName","osVersion","romName","romVersion","ua","hostName","hostVersion","uniPlatform","uniRuntimeVersion","uniRuntimeVersionCode","uniCompilerVersion","uniCompilerVersionCode"];for(const o in t)Object.hasOwnProperty.call(t,o)&&-1===r.indexOf(o)&&delete t[o];return Vu={PLATFORM:n,OS:s,APPID:a,DEVICEID:i,...Au(),...t},{..._u,...Vu,locale:e,LOCALE:e}}var Du=function(e,t){let i="";return Object.keys(e).sort().forEach((function(t){e[t]&&(i=i+"&"+t+"="+e[t])})),i=i.slice(1),Ad(i,t).toString()},Bu=function(e,t){return new Promise(((i,s)=>{t(Object.assign(e,{complete(e){e||(e={});const t=e.data&&e.data.header&&e.data.header["x-serverless-request-id"]||e.header&&e.header["request-id"];if(!e.statusCode||e.statusCode>=400){const i=e.data&&e.data.error&&e.data.error.code||"SYS_ERR",n=e.data&&e.data.error&&e.data.error.message||e.errMsg||"request:fail";return s(new Nu({code:i,message:n,requestId:t}))}const n=e.data;if(n.error)return s(new Nu({code:n.error.code,message:n.error.message,requestId:t}));n.result=n.data,n.requestId=t,delete n.data,i(n)}}))}))},Ru=function(e){return Id.stringify(_d.parse(e))},Mu={init(e){const t=new class{constructor(e){["spaceId","clientSecret"].forEach((t=>{if(!Object.prototype.hasOwnProperty.call(e,t))throw new Error(`${t} required`)})),this.config=Object.assign({},{endpoint:0===e.spaceId.indexOf("mp-")?"https://api.next.bspapp.com":"https://api.bspapp.com"},e),this.config.provider="aliyun",this.config.requestUrl=this.config.endpoint+"/client",this.config.envType=this.config.envType||"public",this.config.accessTokenKey="access_token_"+this.config.spaceId,this.adapter=ku,this._getAccessTokenPromiseHub=new $d({createPromise:()=>this.requestAuth(this.setupRequest({method:"serverless.auth.user.anonymousAuthorize",params:"{}"},"auth")).then((e=>{if(!e.result||!e.result.accessToken)throw new Nu({code:"AUTH_FAILED",message:"获取accessToken失败"});this.setAccessToken(e.result.accessToken)})),retryRule:jd})}get hasAccessToken(){return!!this.accessToken}setAccessToken(e){this.accessToken=e}requestWrapped(e){return Bu(e,this.adapter.request)}requestAuth(e){return this.requestWrapped(e)}request(e,t){return Promise.resolve().then((()=>this.hasAccessToken?t?this.requestWrapped(e):this.requestWrapped(e).catch((t=>new Promise(((e,i)=>{!t||"GATEWAY_INVALID_TOKEN"!==t.code&&"InvalidParameter.InvalidToken"!==t.code?i(t):e()})).then((()=>this.getAccessToken())).then((()=>{const t=this.rebuildRequest(e);return this.request(t,!0)})))):this.getAccessToken().then((()=>{const t=this.rebuildRequest(e);return this.request(t,!0)}))))}rebuildRequest(e){const t=Object.assign({},e);return t.data.token=this.accessToken,t.header["x-basement-token"]=this.accessToken,t.header["x-serverless-sign"]=Du(t.data,this.config.clientSecret),t}setupRequest(e,t){const i=Object.assign({},e,{spaceId:this.config.spaceId,timestamp:Date.now()}),s={"Content-Type":"application/json"};return"auth"!==t&&(i.token=this.accessToken,s["x-basement-token"]=this.accessToken),s["x-serverless-sign"]=Du(i,this.config.clientSecret),{url:this.config.requestUrl,method:"POST",data:i,dataType:"json",header:s}}getAccessToken(){return this._getAccessTokenPromiseHub.exec()}async authorize(){await this.getAccessToken()}callFunction(e){const t={method:"serverless.function.runtime.invoke",params:JSON.stringify({functionTarget:e.name,functionArgs:e.data||{}})};return this.request({...this.setupRequest(t),timeout:e.timeout})}getOSSUploadOptionsFromPath(e){const t={method:"serverless.file.resource.generateProximalSign",params:JSON.stringify(e)};return this.request(this.setupRequest(t))}uploadFileToOSS({url:e,formData:t,name:i,filePath:s,fileType:n,onUploadProgress:a}){return new Promise(((r,o)=>{const l=this.adapter.uploadFile({url:e,formData:t,name:i,filePath:s,fileType:n,header:{"X-OSS-server-side-encrpytion":"AES256"},success(e){e&&e.statusCode<400?r(e):o(new Nu({code:"UPLOAD_FAILED",message:"文件上传失败"}))},fail(e){o(new Nu({code:e.code||"UPLOAD_FAILED",message:e.message||e.errMsg||"文件上传失败"}))}});"function"==typeof a&&l&&"function"==typeof l.onProgressUpdate&&l.onProgressUpdate((e=>{a({loaded:e.totalBytesSent,total:e.totalBytesExpectedToSend})}))}))}reportOSSUpload(e){const t={method:"serverless.file.resource.report",params:JSON.stringify(e)};return this.request(this.setupRequest(t))}async uploadFile({filePath:e,cloudPath:t,fileType:i="image",cloudPathAsRealPath:s=!1,onUploadProgress:n,config:a}){if("string"!==Fd(t))throw new Nu({code:"INVALID_PARAM",message:"cloudPath必须为字符串类型"});if(!(t=t.trim()))throw new Nu({code:"INVALID_PARAM",message:"cloudPath不可为空"});if(/:\/\//.test(t))throw new Nu({code:"INVALID_PARAM",message:"cloudPath不合法"});const r=a&&a.envType||this.config.envType;if(s&&("/"!==t[0]&&(t="/"+t),t.indexOf("\\")>-1))throw new Nu({code:"INVALID_PARAM",message:"使用cloudPath作为路径时，cloudPath不可包含“\\”"});const o=(await this.getOSSUploadOptionsFromPath({env:r,filename:s?t.split("/").pop():t,fileId:s?t:void 0})).result,l="https://"+o.cdnDomain+"/"+o.ossPath,{securityToken:c,accessKeyId:d,signature:u,host:m,ossPath:h,id:p,policy:g,ossCallbackUrl:y}=o,f={"Cache-Control":"max-age=2592000","Content-Disposition":"attachment",OSSAccessKeyId:d,Signature:u,host:m,id:p,key:h,policy:g,success_action_status:200};if(c&&(f["x-oss-security-token"]=c),y){const e=JSON.stringify({callbackUrl:y,callbackBody:JSON.stringify({fileId:p,spaceId:this.config.spaceId}),callbackBodyType:"application/json"});f.callback=Ru(e)}const v={url:"https://"+o.host,formData:f,fileName:"file",name:"file",filePath:e,fileType:i};if(await this.uploadFileToOSS(Object.assign({},v,{onUploadProgress:n})),y)return{success:!0,filePath:e,fileID:l};if((await this.reportOSSUpload({id:p})).success)return{success:!0,filePath:e,fileID:l};throw new Nu({code:"UPLOAD_FAILED",message:"文件上传失败"})}getTempFileURL({fileList:e}={}){return new Promise(((t,i)=>{Array.isArray(e)&&0!==e.length||i(new Nu({code:"INVALID_PARAM",message:"fileList的元素必须是非空的字符串"})),this.getFileInfo({fileList:e}).then((i=>{t({fileList:e.map(((e,t)=>{const s=i.fileList[t];return{fileID:e,tempFileURL:s&&s.url||e}}))})}))}))}async getFileInfo({fileList:e}={}){if(!Array.isArray(e)||0===e.length)throw new Nu({code:"INVALID_PARAM",message:"fileList的元素必须是非空的字符串"});const t={method:"serverless.file.resource.info",params:JSON.stringify({id:e.map((e=>e.split("?")[0])).join(",")})};return{fileList:(await this.request(this.setupRequest(t))).result}}}(e),i={signInAnonymously:function(){return t.authorize()},getLoginState:function(){return Promise.resolve(!1)}};return t.auth=function(){return i},t.customAuth=t.auth,t}};const Pu="undefined"!=typeof location&&"http:"===location.protocol?"http:":"https:";var Ou,Lu;(Lu=Ou||(Ou={})).local="local",Lu.none="none",Lu.session="session";var Fu=function(){},Uu=xd((function(e,t){var i;e.exports=(i=Td,function(e){var t=i,s=t.lib,n=s.WordArray,a=s.Hasher,r=t.algo,o=[],l=[];!function(){function t(t){for(var i=e.sqrt(t),s=2;s<=i;s++)if(!(t%s))return!1;return!0}function i(e){return 4294967296*(e-(0|e))|0}for(var s=2,n=0;n<64;)t(s)&&(n<8&&(o[n]=i(e.pow(s,.5))),l[n]=i(e.pow(s,1/3)),n++),s++}();var c=[],d=r.SHA256=a.extend({_doReset:function(){this._hash=new n.init(o.slice(0))},_doProcessBlock:function(e,t){for(var i=this._hash.words,s=i[0],n=i[1],a=i[2],r=i[3],o=i[4],d=i[5],u=i[6],m=i[7],h=0;h<64;h++){if(h<16)c[h]=0|e[t+h];else{var p=c[h-15],g=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,y=c[h-2],f=(y<<15|y>>>17)^(y<<13|y>>>19)^y>>>10;c[h]=g+c[h-7]+f+c[h-16]}var v=s&n^s&a^n&a,E=(s<<30|s>>>2)^(s<<19|s>>>13)^(s<<10|s>>>22),w=m+((o<<26|o>>>6)^(o<<21|o>>>11)^(o<<7|o>>>25))+(o&d^~o&u)+l[h]+c[h];m=u,u=d,d=o,o=r+w|0,r=a,a=n,n=s,s=w+(E+v)|0}i[0]=i[0]+s|0,i[1]=i[1]+n|0,i[2]=i[2]+a|0,i[3]=i[3]+r|0,i[4]=i[4]+o|0,i[5]=i[5]+d|0,i[6]=i[6]+u|0,i[7]=i[7]+m|0},_doFinalize:function(){var t=this._data,i=t.words,s=8*this._nDataBytes,n=8*t.sigBytes;return i[n>>>5]|=128<<24-n%32,i[14+(n+64>>>9<<4)]=e.floor(s/4294967296),i[15+(n+64>>>9<<4)]=s,t.sigBytes=4*i.length,this._process(),this._hash},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=a._createHelper(d),t.HmacSHA256=a._createHmacHelper(d)}(Math),i.SHA256)})),zu=Uu,Gu=xd((function(e,t){e.exports=Td.HmacSHA256}));const Hu=()=>{let e;if(!Promise){e=()=>{},e.promise={};const t=()=>{throw new Nu({message:'Your Node runtime does support ES6 Promises. Set "global.Promise" to your preferred implementation of promises.'})};return Object.defineProperty(e.promise,"then",{get:t}),Object.defineProperty(e.promise,"catch",{get:t}),e}const t=new Promise(((t,i)=>{e=(e,s)=>e?i(e):t(s)}));return e.promise=t,e};function ju(e){return void 0===e}function $u(e){return"[object Null]"===Object.prototype.toString.call(e)}function qu(e=""){return e.replace(/([\s\S]+)\s+(请前往云开发AI小助手查看问题：.*)/,"$1")}function Wu(e=32){let t="";for(let i=0;i<e;i++)t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));return t}var Ju;!function(e){e.WEB="web",e.WX_MP="wx_mp"}(Ju||(Ju={}));const Yu={adapter:null,runtime:void 0},Xu=["anonymousUuidKey"];class Qu extends Fu{constructor(){super(),Yu.adapter.root.tcbObject||(Yu.adapter.root.tcbObject={})}setItem(e,t){Yu.adapter.root.tcbObject[e]=t}getItem(e){return Yu.adapter.root.tcbObject[e]}removeItem(e){delete Yu.adapter.root.tcbObject[e]}clear(){delete Yu.adapter.root.tcbObject}}function Zu(e,t){switch(e){case"local":return t.localStorage||new Qu;case"none":return new Qu;default:return t.sessionStorage||new Qu}}class Ku{constructor(e){if(!this._storage){this._persistence=Yu.adapter.primaryStorage||e.persistence,this._storage=Zu(this._persistence,Yu.adapter);const t=`access_token_${e.env}`,i=`access_token_expire_${e.env}`,s=`refresh_token_${e.env}`,n=`anonymous_uuid_${e.env}`,a=`login_type_${e.env}`,r="device_id",o=`token_type_${e.env}`,l=`user_info_${e.env}`;this.keys={accessTokenKey:t,accessTokenExpireKey:i,refreshTokenKey:s,anonymousUuidKey:n,loginTypeKey:a,userInfoKey:l,deviceIdKey:r,tokenTypeKey:o}}}updatePersistence(e){if(e===this._persistence)return;const t="local"===this._persistence;this._persistence=e;const i=Zu(e,Yu.adapter);for(const s in this.keys){const e=this.keys[s];if(t&&Xu.includes(s))continue;const n=this._storage.getItem(e);ju(n)||$u(n)||(i.setItem(e,n),this._storage.removeItem(e))}this._storage=i}setStore(e,t,i){if(!this._storage)return;const s={version:i||"localCachev1",content:t},n=JSON.stringify(s);try{this._storage.setItem(e,n)}catch(a){throw a}}getStore(e,t){try{if(!this._storage)return}catch(s){return""}t=t||"localCachev1";const i=this._storage.getItem(e);return i&&i.indexOf(t)>=0?JSON.parse(i).content:""}removeStore(e){this._storage.removeItem(e)}}const em={},tm={};function im(e){return em[e]}class sm{constructor(e,t){this.data=t||null,this.name=e}}class nm extends sm{constructor(e,t){super("error",{error:e,data:t}),this.error=e}}const am=new class{constructor(){this._listeners={}}on(e,t){return i=e,s=t,(n=this._listeners)[i]=n[i]||[],n[i].push(s),this;var i,s,n}off(e,t){return function(e,t,i){if(i&&i[e]){const s=i[e].indexOf(t);-1!==s&&i[e].splice(s,1)}}(e,t,this._listeners),this}fire(e,t){if(e instanceof nm)return console.error(e.error),this;const i="string"==typeof e?new sm(e,t||{}):e,s=i.name;if(this._listens(s)){i.target=this;const e=this._listeners[s]?[...this._listeners[s]]:[];for(const t of e)t.call(this,i)}return this}_listens(e){return this._listeners[e]&&this._listeners[e].length>0}};function rm(e,t){am.on(e,t)}function om(e,t={}){am.fire(e,t)}function lm(e,t){am.off(e,t)}const cm="loginStateChanged",dm="loginStateExpire",um="loginTypeChanged",mm="anonymousConverted",hm="refreshAccessToken";var pm;!function(e){e.ANONYMOUS="ANONYMOUS",e.WECHAT="WECHAT",e.WECHAT_PUBLIC="WECHAT-PUBLIC",e.WECHAT_OPEN="WECHAT-OPEN",e.CUSTOM="CUSTOM",e.EMAIL="EMAIL",e.USERNAME="USERNAME",e.NULL="NULL"}(pm||(pm={}));class gm{constructor(){this._fnPromiseMap=new Map}async run(e,t){let i=this._fnPromiseMap.get(e);return i||(i=new Promise((async(i,s)=>{try{await this._runIdlePromise();const s=t();i(await s)}catch(n){s(n)}finally{this._fnPromiseMap.delete(e)}})),this._fnPromiseMap.set(e,i)),i}_runIdlePromise(){return Promise.resolve()}}class ym{constructor(e){this._singlePromise=new gm,this._cache=im(e.env),this._baseURL=`https://${e.env}.ap-shanghai.tcb-api.tencentcloudapi.com`,this._reqClass=new Yu.adapter.reqClass({timeout:e.timeout,timeoutMsg:`请求在${e.timeout/1e3}s内未完成，已中断`,restrictedMethods:["post"]})}_getDeviceId(){if(this._deviceID)return this._deviceID;const{deviceIdKey:e}=this._cache.keys;let t=this._cache.getStore(e);return"string"==typeof t&&t.length>=16&&t.length<=48||(t=Wu(),this._cache.setStore(e,t)),this._deviceID=t,t}async _request(e,t,i={}){const s={"x-request-id":Wu(),"x-device-id":this._getDeviceId()};if(i.withAccessToken){const{tokenTypeKey:e}=this._cache.keys,t=await this.getAccessToken(),i=this._cache.getStore(e);s.authorization=`${i} ${t}`}return this._reqClass["get"===i.method?"get":"post"]({url:`${this._baseURL}${e}`,data:t,headers:s})}async _fetchAccessToken(){const{loginTypeKey:e,accessTokenKey:t,accessTokenExpireKey:i,tokenTypeKey:s}=this._cache.keys,n=this._cache.getStore(e);if(n&&n!==pm.ANONYMOUS)throw new Nu({code:"INVALID_OPERATION",message:"非匿名登录不支持刷新 access token"});const a=await this._singlePromise.run("fetchAccessToken",(async()=>(await this._request("/auth/v1/signin/anonymously",{},{method:"post"})).data)),{access_token:r,expires_in:o,token_type:l}=a;return this._cache.setStore(s,l),this._cache.setStore(t,r),this._cache.setStore(i,Date.now()+1e3*o),r}isAccessTokenExpired(e,t){let i=!0;return e&&t&&(i=t<Date.now()),i}async getAccessToken(){const{accessTokenKey:e,accessTokenExpireKey:t}=this._cache.keys,i=this._cache.getStore(e),s=this._cache.getStore(t);return this.isAccessTokenExpired(i,s)?this._fetchAccessToken():i}async refreshAccessToken(){const{accessTokenKey:e,accessTokenExpireKey:t,loginTypeKey:i}=this._cache.keys;return this._cache.removeStore(e),this._cache.removeStore(t),this._cache.setStore(i,pm.ANONYMOUS),this.getAccessToken()}async getUserInfo(){return this._singlePromise.run("getUserInfo",(async()=>(await this._request("/auth/v1/user/me",{},{withAccessToken:!0,method:"get"})).data))}}const fm=["auth.getJwt","auth.logout","auth.signInWithTicket","auth.signInAnonymously","auth.signIn","auth.fetchAccessTokenWithRefreshToken","auth.signUpWithEmailAndPassword","auth.activateEndUserMail","auth.sendPasswordResetEmail","auth.resetPasswordWithToken","auth.isUsernameRegistered"],vm={"X-SDK-Version":"1.3.5"};function Em(e,t,i){const s=e[t];e[t]=function(t){const n={},a={};i.forEach((i=>{const{data:s,headers:r}=i.call(e,t);Object.assign(n,s),Object.assign(a,r)}));const r=t.data;return r&&(()=>{var e;if(e=r,"[object FormData]"!==Object.prototype.toString.call(e))t.data={...r,...n};else for(const t in n)r.append(t,n[t])})(),t.headers={...t.headers||{},...a},s.call(e,t)}}function wm(){const e=Math.random().toString(16).slice(2);return{data:{seqId:e},headers:{...vm,"x-seqid":e}}}class Nm{constructor(e={}){var t;this.config=e,this._reqClass=new Yu.adapter.reqClass({timeout:this.config.timeout,timeoutMsg:`请求在${this.config.timeout/1e3}s内未完成，已中断`,restrictedMethods:["post"]}),this._cache=im(this.config.env),this._localCache=(t=this.config.env,tm[t]),this.oauth=new ym(this.config),Em(this._reqClass,"post",[wm]),Em(this._reqClass,"upload",[wm]),Em(this._reqClass,"download",[wm])}async post(e){return await this._reqClass.post(e)}async upload(e){return await this._reqClass.upload(e)}async download(e){return await this._reqClass.download(e)}async refreshAccessToken(){let e,t;this._refreshAccessTokenPromise||(this._refreshAccessTokenPromise=this._refreshAccessToken());try{e=await this._refreshAccessTokenPromise}catch(i){t=i}if(this._refreshAccessTokenPromise=null,this._shouldRefreshAccessTokenHook=null,t)throw t;return e}async _refreshAccessToken(){const{accessTokenKey:e,accessTokenExpireKey:t,refreshTokenKey:i,loginTypeKey:s,anonymousUuidKey:n}=this._cache.keys;this._cache.removeStore(e),this._cache.removeStore(t);let a=this._cache.getStore(i);if(!a)throw new Nu({message:"未登录CloudBase"});const r={refresh_token:a},o=await this.request("auth.fetchAccessTokenWithRefreshToken",r);if(o.data.code){const{code:e}=o.data;if("SIGN_PARAM_INVALID"===e||"REFRESH_TOKEN_EXPIRED"===e||"INVALID_REFRESH_TOKEN"===e){if(this._cache.getStore(s)===pm.ANONYMOUS&&"INVALID_REFRESH_TOKEN"===e){const e=this._cache.getStore(n),t=this._cache.getStore(i),s=await this.send("auth.signInAnonymously",{anonymous_uuid:e,refresh_token:t});return this.setRefreshToken(s.refresh_token),this._refreshAccessToken()}om(dm),this._cache.removeStore(i)}throw new Nu({code:o.data.code,message:`刷新access token失败：${o.data.code}`})}if(o.data.access_token)return om(hm),this._cache.setStore(e,o.data.access_token),this._cache.setStore(t,o.data.access_token_expire+Date.now()),{accessToken:o.data.access_token,accessTokenExpire:o.data.access_token_expire};o.data.refresh_token&&(this._cache.removeStore(i),this._cache.setStore(i,o.data.refresh_token),this._refreshAccessToken())}async getAccessToken(){const{accessTokenKey:e,accessTokenExpireKey:t,refreshTokenKey:i}=this._cache.keys;if(!this._cache.getStore(i))throw new Nu({message:"refresh token不存在，登录状态异常"});let s=this._cache.getStore(e),n=this._cache.getStore(t),a=!0;return this._shouldRefreshAccessTokenHook&&!(await this._shouldRefreshAccessTokenHook(s,n))&&(a=!1),(!s||!n||n<Date.now())&&a?this.refreshAccessToken():{accessToken:s,accessTokenExpire:n}}async request(e,t,i){const s=`x-tcb-trace_${this.config.env}`;let n="application/x-www-form-urlencoded";const a={action:e,env:this.config.env,dataVersion:"2019-08-16",...t};let r;if(-1===fm.indexOf(e)&&(this._cache.keys,a.access_token=await this.oauth.getAccessToken()),"storage.uploadFile"===e){r=new FormData;for(let e in r)r.hasOwnProperty(e)&&void 0!==r[e]&&r.append(e,a[e]);n="multipart/form-data"}else{n="application/json",r={};for(let e in a)void 0!==a[e]&&(r[e]=a[e])}let o={headers:{"content-type":n}};i&&i.timeout&&(o.timeout=i.timeout),i&&i.onUploadProgress&&(o.onUploadProgress=i.onUploadProgress);const l=this._localCache.getStore(s);l&&(o.headers["X-TCB-Trace"]=l);const{parse:c,inQuery:d,search:u}=t;let m={env:this.config.env};c&&(m.parse=!0),d&&(m={...d,...m});let h=function(e,t,i={}){const s=/\?/.test(t);let n="";for(let a in i)""===n?!s&&(t+="?"):n+="&",n+=`${a}=${encodeURIComponent(i[a])}`;return/^http(s)?\:\/\//.test(t+=n)?t:`${e}${t}`}(Pu,"//tcb-api.tencentcloudapi.com/web",m);u&&(h+=u);const p=await this.post({url:h,data:r,...o}),g=p.header&&p.header["x-tcb-trace"];if(g&&this._localCache.setStore(s,g),200!==Number(p.status)&&200!==Number(p.statusCode)||!p.data)throw new Nu({code:"NETWORK_ERROR",message:"network request error"});return p}async send(e,t={},i={}){const s=await this.request(e,t,{...i,onUploadProgress:t.onUploadProgress});if(("ACCESS_TOKEN_DISABLED"===s.data.code||"ACCESS_TOKEN_EXPIRED"===s.data.code)&&-1===fm.indexOf(e)){await this.oauth.refreshAccessToken();const s=await this.request(e,t,{...i,onUploadProgress:t.onUploadProgress});if(s.data.code)throw new Nu({code:s.data.code,message:qu(s.data.message)});return s.data}if(s.data.code)throw new Nu({code:s.data.code,message:qu(s.data.message)});return s.data}setRefreshToken(e){const{accessTokenKey:t,accessTokenExpireKey:i,refreshTokenKey:s}=this._cache.keys;this._cache.removeStore(t),this._cache.removeStore(i),this._cache.setStore(s,e)}}const km={};function bm(e){return km[e]}class Cm{constructor(e){this.config=e,this._cache=im(e.env),this._request=bm(e.env)}setRefreshToken(e){const{accessTokenKey:t,accessTokenExpireKey:i,refreshTokenKey:s}=this._cache.keys;this._cache.removeStore(t),this._cache.removeStore(i),this._cache.setStore(s,e)}setAccessToken(e,t){const{accessTokenKey:i,accessTokenExpireKey:s}=this._cache.keys;this._cache.setStore(i,e),this._cache.setStore(s,t)}async refreshUserInfo(){const{data:e}=await this._request.send("auth.getUserInfo",{});return this.setLocalUserInfo(e),e}setLocalUserInfo(e){const{userInfoKey:t}=this._cache.keys;this._cache.setStore(t,e)}}class Sm{constructor(e){if(!e)throw new Nu({code:"PARAM_ERROR",message:"envId is not defined"});this._envId=e,this._cache=im(this._envId),this._request=bm(this._envId),this.setUserInfo()}linkWithTicket(e){if("string"!=typeof e)throw new Nu({code:"PARAM_ERROR",message:"ticket must be string"});return this._request.send("auth.linkWithTicket",{ticket:e})}linkWithRedirect(e){e.signInWithRedirect()}updatePassword(e,t){return this._request.send("auth.updatePassword",{oldPassword:t,newPassword:e})}updateEmail(e){return this._request.send("auth.updateEmail",{newEmail:e})}updateUsername(e){if("string"!=typeof e)throw new Nu({code:"PARAM_ERROR",message:"username must be a string"});return this._request.send("auth.updateUsername",{username:e})}async getLinkedUidList(){const{data:e}=await this._request.send("auth.getLinkedUidList",{});let t=!1;const{users:i}=e;return i.forEach((e=>{e.wxOpenId&&e.wxPublicId&&(t=!0)})),{users:i,hasPrimaryUid:t}}setPrimaryUid(e){return this._request.send("auth.setPrimaryUid",{uid:e})}unlink(e){return this._request.send("auth.unlink",{platform:e})}async update(e){const{nickName:t,gender:i,avatarUrl:s,province:n,country:a,city:r}=e,{data:o}=await this._request.send("auth.updateUserInfo",{nickName:t,gender:i,avatarUrl:s,province:n,country:a,city:r});this.setLocalUserInfo(o)}async refresh(){const e=await this._request.oauth.getUserInfo();return this.setLocalUserInfo(e),e}setUserInfo(){const{userInfoKey:e}=this._cache.keys,t=this._cache.getStore(e);["uid","loginType","openid","wxOpenId","wxPublicId","unionId","qqMiniOpenId","email","hasPassword","customUserId","nickName","gender","avatarUrl"].forEach((e=>{this[e]=t[e]})),this.location={country:t.country,province:t.province,city:t.city}}setLocalUserInfo(e){const{userInfoKey:t}=this._cache.keys;this._cache.setStore(t,e),this.setUserInfo()}}class xm{constructor(e){if(!e)throw new Nu({code:"PARAM_ERROR",message:"envId is not defined"});this._cache=im(e);const{refreshTokenKey:t,accessTokenKey:i,accessTokenExpireKey:s}=this._cache.keys,n=this._cache.getStore(t),a=this._cache.getStore(i),r=this._cache.getStore(s);this.credential={refreshToken:n,accessToken:a,accessTokenExpire:r},this.user=new Sm(e)}get isAnonymousAuth(){return this.loginType===pm.ANONYMOUS}get isCustomAuth(){return this.loginType===pm.CUSTOM}get isWeixinAuth(){return this.loginType===pm.WECHAT||this.loginType===pm.WECHAT_OPEN||this.loginType===pm.WECHAT_PUBLIC}get loginType(){return this._cache.getStore(this._cache.keys.loginTypeKey)}}class Vm extends Cm{async signIn(){this._cache.updatePersistence("local"),await this._request.oauth.getAccessToken(),om(cm),om(um,{env:this.config.env,loginType:pm.ANONYMOUS,persistence:"local"});const e=new xm(this.config.env);return await e.user.refresh(),e}async linkAndRetrieveDataWithTicket(e){const{anonymousUuidKey:t,refreshTokenKey:i}=this._cache.keys,s=this._cache.getStore(t),n=this._cache.getStore(i),a=await this._request.send("auth.linkAndRetrieveDataWithTicket",{anonymous_uuid:s,refresh_token:n,ticket:e});if(a.refresh_token)return this._clearAnonymousUUID(),this.setRefreshToken(a.refresh_token),await this._request.refreshAccessToken(),om(mm,{env:this.config.env}),om(um,{loginType:pm.CUSTOM,persistence:"local"}),{credential:{refreshToken:a.refresh_token}};throw new Nu({message:"匿名转化失败"})}_setAnonymousUUID(e){const{anonymousUuidKey:t,loginTypeKey:i}=this._cache.keys;this._cache.removeStore(t),this._cache.setStore(t,e),this._cache.setStore(i,pm.ANONYMOUS)}_clearAnonymousUUID(){this._cache.removeStore(this._cache.keys.anonymousUuidKey)}}class Tm extends Cm{async signIn(e){if("string"!=typeof e)throw new Nu({code:"PARAM_ERROR",message:"ticket must be a string"});const{refreshTokenKey:t}=this._cache.keys,i=await this._request.send("auth.signInWithTicket",{ticket:e,refresh_token:this._cache.getStore(t)||""});if(i.refresh_token)return this.setRefreshToken(i.refresh_token),await this._request.refreshAccessToken(),om(cm),om(um,{env:this.config.env,loginType:pm.CUSTOM,persistence:this.config.persistence}),await this.refreshUserInfo(),new xm(this.config.env);throw new Nu({message:"自定义登录失败"})}}class Am extends Cm{async signIn(e,t){if("string"!=typeof e)throw new Nu({code:"PARAM_ERROR",message:"email must be a string"});const{refreshTokenKey:i}=this._cache.keys,s=await this._request.send("auth.signIn",{loginType:"EMAIL",email:e,password:t,refresh_token:this._cache.getStore(i)||""}),{refresh_token:n,access_token:a,access_token_expire:r}=s;if(n)return this.setRefreshToken(n),a&&r?this.setAccessToken(a,r):await this._request.refreshAccessToken(),await this.refreshUserInfo(),om(cm),om(um,{env:this.config.env,loginType:pm.EMAIL,persistence:this.config.persistence}),new xm(this.config.env);throw s.code?new Nu({code:s.code,message:`邮箱登录失败: ${s.message}`}):new Nu({message:"邮箱登录失败"})}async activate(e){return this._request.send("auth.activateEndUserMail",{token:e})}async resetPasswordWithToken(e,t){return this._request.send("auth.resetPasswordWithToken",{token:e,newPassword:t})}}class _m extends Cm{async signIn(e,t){if("string"!=typeof e)throw new Nu({code:"PARAM_ERROR",message:"username must be a string"});"string"!=typeof t&&(t="",console.warn("password is empty"));const{refreshTokenKey:i}=this._cache.keys,s=await this._request.send("auth.signIn",{loginType:pm.USERNAME,username:e,password:t,refresh_token:this._cache.getStore(i)||""}),{refresh_token:n,access_token_expire:a,access_token:r}=s;if(n)return this.setRefreshToken(n),r&&a?this.setAccessToken(r,a):await this._request.refreshAccessToken(),await this.refreshUserInfo(),om(cm),om(um,{env:this.config.env,loginType:pm.USERNAME,persistence:this.config.persistence}),new xm(this.config.env);throw s.code?new Nu({code:s.code,message:`用户名密码登录失败: ${s.message}`}):new Nu({message:"用户名密码登录失败"})}}class Im{constructor(e){this.config=e,this._cache=im(e.env),this._request=bm(e.env),this._onAnonymousConverted=this._onAnonymousConverted.bind(this),this._onLoginTypeChanged=this._onLoginTypeChanged.bind(this),rm(um,this._onLoginTypeChanged)}get currentUser(){const e=this.hasLoginState();return e&&e.user||null}get loginType(){return this._cache.getStore(this._cache.keys.loginTypeKey)}anonymousAuthProvider(){return new Vm(this.config)}customAuthProvider(){return new Tm(this.config)}emailAuthProvider(){return new Am(this.config)}usernameAuthProvider(){return new _m(this.config)}async signInAnonymously(){return new Vm(this.config).signIn()}async signInWithEmailAndPassword(e,t){return new Am(this.config).signIn(e,t)}signInWithUsernameAndPassword(e,t){return new _m(this.config).signIn(e,t)}async linkAndRetrieveDataWithTicket(e){return this._anonymousAuthProvider||(this._anonymousAuthProvider=new Vm(this.config)),rm(mm,this._onAnonymousConverted),await this._anonymousAuthProvider.linkAndRetrieveDataWithTicket(e)}async signOut(){if(this.loginType===pm.ANONYMOUS)throw new Nu({message:"匿名用户不支持登出操作"});const{refreshTokenKey:e,accessTokenKey:t,accessTokenExpireKey:i}=this._cache.keys,s=this._cache.getStore(e);if(!s)return;const n=await this._request.send("auth.logout",{refresh_token:s});return this._cache.removeStore(e),this._cache.removeStore(t),this._cache.removeStore(i),om(cm),om(um,{env:this.config.env,loginType:pm.NULL,persistence:this.config.persistence}),n}async signUpWithEmailAndPassword(e,t){return this._request.send("auth.signUpWithEmailAndPassword",{email:e,password:t})}async sendPasswordResetEmail(e){return this._request.send("auth.sendPasswordResetEmail",{email:e})}onLoginStateChanged(e){rm(cm,(()=>{const t=this.hasLoginState();e.call(this,t)}));const t=this.hasLoginState();e.call(this,t)}onLoginStateExpired(e){rm(dm,e.bind(this))}onAccessTokenRefreshed(e){rm(hm,e.bind(this))}onAnonymousConverted(e){rm(mm,e.bind(this))}onLoginTypeChanged(e){rm(um,(()=>{const t=this.hasLoginState();e.call(this,t)}))}async getAccessToken(){return{accessToken:(await this._request.getAccessToken()).accessToken,env:this.config.env}}hasLoginState(){const{accessTokenKey:e,accessTokenExpireKey:t}=this._cache.keys,i=this._cache.getStore(e),s=this._cache.getStore(t);return this._request.oauth.isAccessTokenExpired(i,s)?null:new xm(this.config.env)}async isUsernameRegistered(e){if("string"!=typeof e)throw new Nu({code:"PARAM_ERROR",message:"username must be a string"});const{data:t}=await this._request.send("auth.isUsernameRegistered",{username:e});return t&&t.isRegistered}getLoginState(){return Promise.resolve(this.hasLoginState())}async signInWithTicket(e){return new Tm(this.config).signIn(e)}shouldRefreshAccessToken(e){this._request._shouldRefreshAccessTokenHook=e.bind(this)}getUserInfo(){return this._request.send("auth.getUserInfo",{}).then((e=>e.code?e:{...e.data,requestId:e.seqId}))}getAuthHeader(){const{refreshTokenKey:e,accessTokenKey:t}=this._cache.keys,i=this._cache.getStore(e);return{"x-cloudbase-credentials":this._cache.getStore(t)+"/@@/"+i}}_onAnonymousConverted(e){const{env:t}=e.data;t===this.config.env&&this._cache.updatePersistence(this.config.persistence)}_onLoginTypeChanged(e){const{loginType:t,persistence:i,env:s}=e.data;s===this.config.env&&(this._cache.updatePersistence(i),this._cache.setStore(this._cache.keys.loginTypeKey,t))}}const Dm=function(e,t){t=t||Hu();const i=bm(this.config.env),{cloudPath:s,filePath:n,onUploadProgress:a,fileType:r="image"}=e;return i.send("storage.getUploadMetadata",{path:s}).then((e=>{const{data:{url:o,authorization:l,token:c,fileId:d,cosFileId:u},requestId:m}=e,h={key:s,signature:l,"x-cos-meta-fileid":u,success_action_status:"201","x-cos-security-token":c};i.upload({url:o,data:h,file:n,name:s,fileType:r,onUploadProgress:a}).then((e=>{201===e.statusCode?t(null,{fileID:d,requestId:m}):t(new Nu({code:"STORAGE_REQUEST_FAIL",message:`STORAGE_REQUEST_FAIL: ${e.data}`}))})).catch((e=>{t(e)}))})).catch((e=>{t(e)})),t.promise},Bm=function(e,t){t=t||Hu();const i=bm(this.config.env),{cloudPath:s}=e;return i.send("storage.getUploadMetadata",{path:s}).then((e=>{t(null,e)})).catch((e=>{t(e)})),t.promise},Rm=function({fileList:e},t){if(t=t||Hu(),!e||!Array.isArray(e))return{code:"INVALID_PARAM",message:"fileList必须是非空的数组"};for(let s of e)if(!s||"string"!=typeof s)return{code:"INVALID_PARAM",message:"fileList的元素必须是非空的字符串"};const i={fileid_list:e};return bm(this.config.env).send("storage.batchDeleteFile",i).then((e=>{e.code?t(null,e):t(null,{fileList:e.data.delete_list,requestId:e.requestId})})).catch((e=>{t(e)})),t.promise},Mm=function({fileList:e},t){t=t||Hu(),e&&Array.isArray(e)||t(null,{code:"INVALID_PARAM",message:"fileList必须是非空的数组"});let i=[];for(let n of e)"object"==typeof n?(n.hasOwnProperty("fileID")&&n.hasOwnProperty("maxAge")||t(null,{code:"INVALID_PARAM",message:"fileList的元素必须是包含fileID和maxAge的对象"}),i.push({fileid:n.fileID,max_age:n.maxAge})):"string"==typeof n?i.push({fileid:n}):t(null,{code:"INVALID_PARAM",message:"fileList的元素必须是字符串"});const s={file_list:i};return bm(this.config.env).send("storage.batchGetDownloadUrl",s).then((e=>{e.code?t(null,e):t(null,{fileList:e.data.download_list,requestId:e.requestId})})).catch((e=>{t(e)})),t.promise},Pm=async function({fileID:e},t){const i=(await Mm.call(this,{fileList:[{fileID:e,maxAge:600}]})).fileList[0];if("SUCCESS"!==i.code)return t?t(i):new Promise((e=>{e(i)}));const s=bm(this.config.env);let n=i.download_url;if(n=encodeURI(n),!t)return s.download({url:n});t(await s.download({url:n}))},Om=function({name:e,data:t,query:i,parse:s,search:n,timeout:a},r){const o=r||Hu();let l;try{l=t?JSON.stringify(t):""}catch(d){return Promise.reject(d)}if(!e)return Promise.reject(new Nu({code:"PARAM_ERROR",message:"函数名不能为空"}));const c={inQuery:i,parse:s,search:n,function_name:e,request_data:l};return bm(this.config.env).send("functions.invokeFunction",c,{timeout:a}).then((e=>{if(e.code)o(null,e);else{let i=e.data.response_data;if(s)o(null,{result:i,requestId:e.requestId});else try{i=JSON.parse(e.data.response_data),o(null,{result:i,requestId:e.requestId})}catch(t){o(new Nu({message:"response data must be json"}))}}return o.promise})).catch((e=>{o(e)})),o.promise},Lm={timeout:15e3,persistence:"session"},Fm=6e5,Um={};class zm{constructor(e){this.config=e||this.config,this.authObj=void 0}init(e){switch(Yu.adapter||(this.requestClient=new Yu.adapter.reqClass({timeout:e.timeout||5e3,timeoutMsg:`请求在${(e.timeout||5e3)/1e3}s内未完成，已中断`})),this.config={...Lm,...e},!0){case this.config.timeout>Fm:console.warn("timeout大于可配置上限[10分钟]，已重置为上限数值"),this.config.timeout=Fm;break;case this.config.timeout<100:console.warn("timeout小于可配置下限[100ms]，已重置为下限数值"),this.config.timeout=100}return new zm(this.config)}auth({persistence:e}={}){if(this.authObj)return this.authObj;const t=e||Yu.adapter.primaryStorage||Lm.persistence;var i;return t!==this.config.persistence&&(this.config.persistence=t),function(e){const{env:t}=e;em[t]=new Ku(e),tm[t]=new Ku({...e,persistence:"local"})}(this.config),i=this.config,km[i.env]=new Nm(i),this.authObj=new Im(this.config),this.authObj}on(e,t){return rm.apply(this,[e,t])}off(e,t){return lm.apply(this,[e,t])}callFunction(e,t){return Om.apply(this,[e,t])}deleteFile(e,t){return Rm.apply(this,[e,t])}getTempFileURL(e,t){return Mm.apply(this,[e,t])}downloadFile(e,t){return Pm.apply(this,[e,t])}uploadFile(e,t){return Dm.apply(this,[e,t])}getUploadMetadata(e,t){return Bm.apply(this,[e,t])}registerExtension(e){Um[e.name]=e}async invokeExtension(e,t){const i=Um[e];if(!i)throw new Nu({message:`扩展${e} 必须先注册`});return await i.invoke(t,this)}useAdapters(e){const{adapter:t,runtime:i}=function(e){const t=(i=e,"[object Array]"===Object.prototype.toString.call(i)?e:[e]);var i;for(const s of t){const{isMatch:e,genAdapter:t,runtime:i}=s;if(e())return{adapter:t(),runtime:i}}}(e)||{};t&&(Yu.adapter=t),i&&(Yu.runtime=i)}}var Gm=new zm;function Hm(e,t,i){void 0===i&&(i={});var s=/\?/.test(t),n="";for(var a in i)""===n?!s&&(t+="?"):n+="&",n+=a+"="+encodeURIComponent(i[a]);return/^http(s)?:\/\//.test(t+=n)?t:""+e+t}class jm{get(e){const{url:t,data:i,headers:s,timeout:n}=e;return new Promise(((e,a)=>{ku.request({url:Hm("https:",t),data:i,method:"GET",header:s,timeout:n,success(t){e(t)},fail(e){a(e)}})}))}post(e){const{url:t,data:i,headers:s,timeout:n}=e;return new Promise(((e,a)=>{ku.request({url:Hm("https:",t),data:i,method:"POST",header:s,timeout:n,success(t){e(t)},fail(e){a(e)}})}))}upload(e){return new Promise(((t,i)=>{const{url:s,file:n,data:a,headers:r,fileType:o}=e,l=ku.uploadFile({url:Hm("https:",s),name:"file",formData:Object.assign({},a),filePath:n,fileType:o,header:r,success(e){const i={statusCode:e.statusCode,data:e.data||{}};200===e.statusCode&&a.success_action_status&&(i.statusCode=parseInt(a.success_action_status,10)),t(i)},fail(e){i(new Error(e.errMsg||"uploadFile:fail"))}});"function"==typeof e.onUploadProgress&&l&&"function"==typeof l.onProgressUpdate&&l.onProgressUpdate((t=>{e.onUploadProgress({loaded:t.totalBytesSent,total:t.totalBytesExpectedToSend})}))}))}}const $m={setItem(e,t){ku.setStorageSync(e,t)},getItem:e=>ku.getStorageSync(e),removeItem(e){ku.removeStorageSync(e)},clear(){ku.clearStorageSync()}};var qm={genAdapter:function(){return{root:{},reqClass:jm,localStorage:$m,primaryStorage:"local"}},isMatch:function(){return!0},runtime:"uni_app"};Gm.useAdapters(qm);const Wm=Gm,Jm=Wm.init;Wm.init=function(e){e.env=e.spaceId;const t=Jm.call(this,e);t.config.provider="tencent",t.config.spaceId=e.spaceId;const i=t.auth;return t.auth=function(e){const t=i.call(this,e);return["linkAndRetrieveDataWithTicket","signInAnonymously","signOut","getAccessToken","getLoginState","signInWithTicket","getUserInfo"].forEach((e=>{var i;t[e]=(i=t[e],function(e){e=e||{};const{success:t,fail:s,complete:n}=wu(e);if(!(t||s||n))return i.call(this,e);i.call(this,e).then((e=>{t&&t(e),n&&n(e)}),(e=>{s&&s(e),n&&n(e)}))}).bind(t)})),t},t.customAuth=t.auth,t};var Ym=Wm;async function Xm(e,t){const i=`http://${e}:${t}/system/ping`;try{const e=await(s={url:i,timeout:500},new Promise(((e,t)=>{ku.request({...s,success(t){e(t)},fail(e){t(e)}})})));return!(!e.data||0!==e.data.code)}catch(n){return!1}var s}const Qm={"serverless.file.resource.generateProximalSign":"storage/generate-proximal-sign","serverless.file.resource.report":"storage/report","serverless.file.resource.delete":"storage/delete","serverless.file.resource.getTempFileURL":"storage/get-temp-file-url"};var Zm={init(e){const t=new class{constructor(e){if(["spaceId","clientSecret"].forEach((t=>{if(!Object.prototype.hasOwnProperty.call(e,t))throw new Error(`${t} required`)})),!e.endpoint)throw new Error("集群空间未配置ApiEndpoint，配置后需要重新关联服务空间后生效");this.config=Object.assign({},e),this.config.provider="dcloud",this.config.requestUrl=this.config.endpoint+"/client",this.config.envType=this.config.envType||"public",this.adapter=ku}async request(e,t=!0){return e=this.setupRequest(e),Promise.resolve().then((()=>Bu(e,this.adapter.request)))}requestLocal(e){return new Promise(((t,i)=>{this.adapter.request(Object.assign(e,{complete(e){if(e||(e={}),!e.statusCode||e.statusCode>=400){const t=e.data&&e.data.code||"SYS_ERR",s=e.data&&e.data.message||"request:fail";return i(new Nu({code:t,message:s}))}t({success:!0,result:e.data})}}))}))}setupRequest(e){const t=Object.assign({},e,{spaceId:this.config.spaceId,timestamp:Date.now()}),i={"Content-Type":"application/json"};i["x-serverless-sign"]=Du(t,this.config.clientSecret);const s=Iu();i["x-client-info"]=encodeURIComponent(JSON.stringify(s));const{token:n}=Cu();return i["x-client-token"]=n,{url:this.config.requestUrl,method:"POST",data:t,dataType:"json",header:JSON.parse(JSON.stringify(i))}}async setupLocalRequest(e){const t=Iu(),{token:i}=Cu(),s=Object.assign({},e,{spaceId:this.config.spaceId,timestamp:Date.now(),clientInfo:t,token:i}),{address:n,servePort:a}=this.__dev__&&this.__dev__.debugInfo||{},{address:r}=await async function(e,t){let i;for(let s=0;s<e.length;s++){const n=e[s];if(await Xm(n,t)){i=n;break}}return{address:i,port:t}}(n,a);return{url:`http://${r}:${a}/${Qm[e.method]}`,method:"POST",data:s,dataType:"json",header:JSON.parse(JSON.stringify({"Content-Type":"application/json"}))}}callFunction(e){const t={method:"serverless.function.runtime.invoke",params:JSON.stringify({functionTarget:e.name,functionArgs:e.data||{}})};return this.request(t,!1)}getUploadFileOptions(e){const t={method:"serverless.file.resource.generateProximalSign",params:JSON.stringify(e)};return this.request(t)}reportUploadFile(e){const t={method:"serverless.file.resource.report",params:JSON.stringify(e)};return this.request(t)}uploadFile({filePath:e,cloudPath:t,fileType:i="image",onUploadProgress:s}){if(!t)throw new Nu({code:"CLOUDPATH_REQUIRED",message:"cloudPath不可为空"});let n;return this.getUploadFileOptions({cloudPath:t}).then((t=>{const{url:a,formData:r,name:o}=t.result;return n=t.result.fileUrl,new Promise(((t,n)=>{const l=this.adapter.uploadFile({url:a,formData:r,name:o,filePath:e,fileType:i,success(e){e&&e.statusCode<400?t(e):n(new Nu({code:"UPLOAD_FAILED",message:"文件上传失败"}))},fail(e){n(new Nu({code:e.code||"UPLOAD_FAILED",message:e.message||e.errMsg||"文件上传失败"}))}});"function"==typeof s&&l&&"function"==typeof l.onProgressUpdate&&l.onProgressUpdate((e=>{s({loaded:e.totalBytesSent,total:e.totalBytesExpectedToSend})}))}))})).then((()=>this.reportUploadFile({cloudPath:t}))).then((t=>new Promise(((i,s)=>{t.success?i({success:!0,filePath:e,fileID:n}):s(new Nu({code:"UPLOAD_FAILED",message:"文件上传失败"}))}))))}deleteFile({fileList:e}){const t={method:"serverless.file.resource.delete",params:JSON.stringify({fileList:e})};return this.request(t).then((e=>{if(e.success)return e.result;throw new Nu({code:"DELETE_FILE_FAILED",message:"删除文件失败"})}))}getTempFileURL({fileList:e,maxAge:t}={}){if(!Array.isArray(e)||0===e.length)throw new Nu({code:"INVALID_PARAM",message:"fileList的元素必须是非空的字符串"});const i={method:"serverless.file.resource.getTempFileURL",params:JSON.stringify({fileList:e,maxAge:t})};return this.request(i).then((e=>{if(e.success)return{fileList:e.result.fileList.map((e=>({fileID:e.fileID,tempFileURL:e.tempFileURL})))};throw new Nu({code:"GET_TEMP_FILE_URL_FAILED",message:"获取临时文件链接失败"})}))}}(e),i={signInAnonymously:function(){return Promise.resolve()},getLoginState:function(){return Promise.resolve(!1)}};return t.auth=function(){return i},t.customAuth=t.auth,t}},Km=xd((function(e,t){e.exports=Td.enc.Hex}));function eh(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}function th(e="",t={}){const{data:i,functionName:s,method:n,headers:a,signHeaderKeys:r=[],config:o}=t,l=String(Date.now()),c=eh(),d=Object.assign({},a,{"x-from-app-id":o.spaceAppId,"x-from-env-id":o.spaceId,"x-to-env-id":o.spaceId,"x-from-instance-id":l,"x-from-function-name":s,"x-client-timestamp":l,"x-alipay-source":"client","x-request-id":c,"x-alipay-callid":c,"x-trace-id":c}),u=["x-from-app-id","x-from-env-id","x-to-env-id","x-from-instance-id","x-from-function-name","x-client-timestamp"].concat(r),[m="",h=""]=e.split("?")||[],p=function(e){const t="HMAC-SHA256",i=e.signedHeaders.join(";"),s=e.signedHeaders.map((t=>`${t.toLowerCase()}:${e.headers[t]}\n`)).join(""),n=zu(e.body).toString(Km),a=`${e.method.toUpperCase()}\n${e.path}\n${e.query}\n${s}\n${i}\n${n}\n`,r=zu(a).toString(Km),o=`${t}\n${e.timestamp}\n${r}\n`,l=Gu(o,e.secretKey).toString(Km);return`${t} Credential=${e.secretId}, SignedHeaders=${i}, Signature=${l}`}({path:m,query:h,method:n,headers:d,timestamp:l,body:JSON.stringify(i),secretId:o.accessKey,secretKey:o.secretKey,signedHeaders:u.sort()});return{url:`${o.endpoint}${e}`,headers:Object.assign({},d,{Authorization:p})}}function ih({url:e,data:t,method:i="POST",headers:s={},timeout:n}){return new Promise(((a,r)=>{ku.request({url:e,method:i,data:"object"==typeof t?JSON.stringify(t):t,header:s,dataType:"json",timeout:n,complete:(e={})=>{const t=s["x-trace-id"]||"";if(!e.statusCode||e.statusCode>=400){const{message:i,errMsg:s,trace_id:n}=e.data||{};return r(new Nu({code:"SYS_ERR",message:i||s||"request:fail",requestId:n||t}))}a({status:e.statusCode,data:e.data,headers:e.header,requestId:t})}})}))}function sh(e,t){const{path:i,data:s,method:n="GET"}=e,{url:a,headers:r}=th(i,{functionName:"",data:s,method:n,headers:{"x-alipay-cloud-mode":"oss","x-data-api-type":"oss","x-expire-timestamp":Date.now()+6e4},signHeaderKeys:["x-data-api-type","x-expire-timestamp"],config:t});return ih({url:a,data:s,method:n,headers:r}).then((e=>{const t=e.data||{};if(!t.success)throw new Nu({code:e.errCode,message:e.errMsg,requestId:e.requestId});return t.data||{}})).catch((e=>{throw new Nu({code:e.errCode,message:e.errMsg,requestId:e.requestId})}))}function nh(e=""){const t=e.trim().replace(/^cloud:\/\//,""),i=t.indexOf("/");if(i<=0)throw new Nu({code:"INVALID_PARAM",message:"fileID不合法"});const s=t.substring(0,i),n=t.substring(i+1);return s!==this.config.spaceId&&console.warn("file ".concat(e," does not belong to env ").concat(this.config.spaceId)),n}function ah(e=""){return"cloud://".concat(this.config.spaceId,"/").concat(e.replace(/^\/+/,""))}class rh{constructor(e){this.config=e}signedURL(e,t={}){const i=`/ws/function/${e}`,s=this.config.wsEndpoint.replace(/^ws(s)?:\/\//,""),n=Object.assign({},t,{accessKeyId:this.config.accessKey,signatureNonce:eh(),timestamp:""+Date.now()}),a=[i,["accessKeyId","authorization","signatureNonce","timestamp"].sort().map((function(e){return n[e]?"".concat(e,"=").concat(n[e]):null})).filter(Boolean).join("&"),`host:${s}`].join("\n"),r=["HMAC-SHA256",zu(a).toString(Km)].join("\n"),o=Gu(r,this.config.secretKey).toString(Km),l=Object.keys(n).map((e=>`${e}=${encodeURIComponent(n[e])}`)).join("&");return`${this.config.wsEndpoint}${i}?${l}&signature=${o}`}}var oh={init:e=>{e.provider="alipay";const t=new class{constructor(e){if(["spaceId","spaceAppId","accessKey","secretKey"].forEach((t=>{if(!Object.prototype.hasOwnProperty.call(e,t))throw new Error(`${t} required`)})),e.endpoint){if("string"!=typeof e.endpoint)throw new Error("endpoint must be string");if(!/^https:\/\//.test(e.endpoint))throw new Error("endpoint must start with https://");e.endpoint=e.endpoint.replace(/\/$/,"")}this.config=Object.assign({},e,{endpoint:e.endpoint||`https://${e.spaceId}.api-hz.cloudbasefunction.cn`,wsEndpoint:e.wsEndpoint||`wss://${e.spaceId}.api-hz.cloudbasefunction.cn`}),this._websocket=new rh(this.config)}callFunction(e){return function(e,t){const{name:i,data:s,async:n=!1,timeout:a}=e,r="POST",o={"x-to-function-name":i};n&&(o["x-function-invoke-type"]="async");const{url:l,headers:c}=th("/functions/invokeFunction",{functionName:i,data:s,method:r,headers:o,signHeaderKeys:["x-to-function-name"],config:t});return ih({url:l,data:s,method:r,headers:c,timeout:a}).then((e=>{let t=0;if(n){const i=e.data||{};t="200"===i.errCode?0:i.errCode,e.data=i.data||{},e.errMsg=i.errMsg}if(0!==t)throw new Nu({code:t,message:e.errMsg,requestId:e.requestId});return{errCode:t,success:0===t,requestId:e.requestId,result:e.data}})).catch((e=>{throw new Nu({code:e.errCode,message:e.errMsg,requestId:e.requestId})}))}(e,this.config)}uploadFileToOSS({url:e,filePath:t,fileType:i,formData:s,onUploadProgress:n}){return new Promise(((a,r)=>{const o=ku.uploadFile({url:e,filePath:t,fileType:i,formData:s,name:"file",success(e){e&&e.statusCode<400?a(e):r(new Nu({code:"UPLOAD_FAILED",message:"文件上传失败"}))},fail(e){r(new Nu({code:e.code||"UPLOAD_FAILED",message:e.message||e.errMsg||"文件上传失败"}))}});"function"==typeof n&&o&&"function"==typeof o.onProgressUpdate&&o.onProgressUpdate((e=>{n({loaded:e.totalBytesSent,total:e.totalBytesExpectedToSend})}))}))}async uploadFile({filePath:e,cloudPath:t="",fileType:i="image",onUploadProgress:s}){if("string"!==Fd(t))throw new Nu({code:"INVALID_PARAM",message:"cloudPath必须为字符串类型"});if(!(t=t.trim()))throw new Nu({code:"INVALID_PARAM",message:"cloudPath不可为空"});if(/:\/\//.test(t))throw new Nu({code:"INVALID_PARAM",message:"cloudPath不合法"});const n=await sh({path:"/".concat(t.replace(/^\//,""),"?post_url")},this.config),{file_id:a,upload_url:r,form_data:o}=n,l=o&&o.reduce(((e,t)=>(e[t.key]=t.value,e)),{});return this.uploadFileToOSS({url:r,filePath:e,fileType:i,formData:l,onUploadProgress:s}).then((()=>({fileID:a})))}async getTempFileURL({fileList:e}){return new Promise(((t,i)=>{(!e||e.length<0)&&t({code:"INVALID_PARAM",message:"fileList不能为空数组"}),e.length>50&&t({code:"INVALID_PARAM",message:"fileList数组长度不能超过50"});const s=[];for(const a of e){let e;"string"!==Fd(a)&&t({code:"INVALID_PARAM",message:"fileList的元素必须是非空的字符串"});try{e=nh.call(this,a)}catch(n){console.warn(n.errCode,n.errMsg),e=a}s.push({file_id:e,expire:600})}sh({path:"/?download_url",data:{file_list:s},method:"POST"},this.config).then((e=>{const{file_list:i=[]}=e;t({fileList:i.map((e=>({fileID:ah.call(this,e.file_id),tempFileURL:e.download_url})))})})).catch((e=>i(e)))}))}async connectWebSocket(e){const{name:t,query:i}=e;return ku.connectSocket({url:this._websocket.signedURL(t,i),complete:()=>{}})}}(e);return t.auth=function(){return{signInAnonymously:function(){return Promise.resolve()},getLoginState:function(){return Promise.resolve(!0)}}},t}};function lh({data:e}){let t;t=Iu();const i=JSON.parse(JSON.stringify(e||{}));if(Object.assign(i,{clientInfo:t}),!i.uniIdToken){const{token:e}=Cu();e&&(i.uniIdToken=e)}return i}const ch=[{rule:/fc_function_not_found|FUNCTION_NOT_FOUND/,content:"，云函数[{functionName}]在云端不存在，请检查此云函数名称是否正确以及该云函数是否已上传到服务空间",mode:"append"}];var dh=/[\\^$.*+?()[\]{}|]/g,uh=RegExp(dh.source);function mh(e,t,i){return e.replace(new RegExp((s=t)&&uh.test(s)?s.replace(dh,"\\$&"):s,"g"),i);var s}const hh="request",ph="response",gh="both",yh="_globalUniCloudStatus",fh={code:2e4,message:"System error"},vh={code:20101,message:"Invalid client"};function Eh(e){const{errSubject:t,subject:i,errCode:s,errMsg:n,code:a,message:r,cause:o}=e||{};return new Nu({subject:t||i||"uni-secure-network",code:s||a||fh.code,message:n||r,cause:o})}let wh;function Nh({secretType:e}={}){return e===hh||e===ph||e===gh}function kh({name:e,data:t={}}={}){return"DCloud-clientDB"===e&&"encryption"===t.redirectTo&&"getAppClientKey"===t.action}function bh({functionName:e,result:t,logPvd:i}){}function Ch(e){const t=e.callFunction,i=function(i){const s=i.name;i.data=lh.call(e,{data:i.data});const n={aliyun:"aliyun",tencent:"tcb",tcb:"tcb",alipay:"alipay",dcloud:"dcloud"}[this.config.provider],a=Nh(i),r=kh(i),o=a||r;return t.call(this,i).then((e=>(e.errCode=0,!o&&bh.call(this,{functionName:s,result:e,logPvd:n}),Promise.resolve(e))),(e=>(!o&&bh.call(this,{functionName:s,result:e,logPvd:n}),e&&e.message&&(e.message=function({message:e="",extraInfo:t={},formatter:i=[]}={}){for(let s=0;s<i.length;s++){const{rule:n,content:a,mode:r}=i[s],o=e.match(n);if(!o)continue;let l=a;for(let e=1;e<o.length;e++)l=mh(l,`{$${e}}`,o[e]);for(const e in t)l=mh(l,`{${e}}`,t[e]);return"replace"===r?l:e+l}return e}({message:`[${i.name}]: ${e.message}`,formatter:ch,extraInfo:{functionName:s}})),Promise.reject(e))))};e.callFunction=function(t){const{provider:s,spaceId:n}=e.config,a=t.name;let r,o;return t.data=t.data||{},r=i,r=r.bind(e),o=kh(t)?i.call(e,t):Nh(t)?new wh({secretType:t.secretType,uniCloudIns:e}).wrapEncryptDataCallFunction(i.bind(e))(t):function({provider:e,spaceId:t,functionName:i}={}){const{appId:s,uniPlatform:n,osName:a}=Tu();let r=n;"app"===n&&(r=a);const o=function({provider:e,spaceId:t}={}){const i=Wd;if(!i)return{};e=function(e){return"tencent"===e?"tcb":e}(e);const s=i.find((i=>i.provider===e&&i.spaceId===t));return s&&s.config}({provider:e,spaceId:t});if(!o||!o.accessControl||!o.accessControl.enable)return!1;const l=o.accessControl.function||{},c=Object.keys(l);if(0===c.length)return!0;const d=function(e,t){let i,s,n;for(let a=0;a<e.length;a++){const r=e[a];r!==t?"*"!==r?r.split(",").map((e=>e.trim())).indexOf(t)>-1&&(s=r):n=r:i=r}return i||s||n}(c,i);if(!d)return!1;if((l[d]||[]).find(((e={})=>e.appId===s&&(e.platform||"").toLowerCase()===r.toLowerCase())))return!0;throw console.error(`此应用[appId: ${s}, platform: ${r}]不在云端配置的允许访问的应用列表内，参考：https://uniapp.dcloud.net.cn/uniCloud/secure-network.html#verify-client`),Eh(vh)}({provider:s,spaceId:n,functionName:a})?new wh({secretType:t.secretType,uniCloudIns:e}).wrapVerifyClientCallFunction(i.bind(e))(t):r(t),Object.defineProperty(o,"result",{get:()=>(console.warn("当前返回结果为Promise类型，不可直接访问其result属性，详情请参考：https://uniapp.dcloud.net.cn/uniCloud/faq?id=promise"),{})}),o.then((e=>e))}}wh=class{constructor(){throw Eh({message:"Platform app is not enabled, please check whether secure network module is enabled in your manifest.json"})}};const Sh=Symbol("CLIENT_DB_INTERNAL");function xh(e,t){return e.then="DoNotReturnProxyWithAFunctionNamedThen",e._internalType=Sh,e.inspect=null,e.__v_raw=void 0,new Proxy(e,{get(e,i,s){if("_uniClient"===i)return null;if("symbol"==typeof i)return e[i];if(i in e||"string"!=typeof i){const t=e[i];return"function"==typeof t?t.bind(e):t}return t.get(e,i,s)}})}function Vh(e){return{on:(t,i)=>{e[t]=e[t]||[],e[t].indexOf(i)>-1||e[t].push(i)},off:(t,i)=>{e[t]=e[t]||[];const s=e[t].indexOf(i);-1!==s&&e[t].splice(s,1)}}}const Th=["db.Geo","db.command","command.aggregate"];function Ah(e,t){return Th.indexOf(`${e}.${t}`)>-1}function _h(e){switch(Fd(e=bu(e))){case"array":return e.map((e=>_h(e)));case"object":return e._internalType===Sh||Object.keys(e).forEach((t=>{e[t]=_h(e[t])})),e;case"regexp":return{$regexp:{source:e.source,flags:e.flags}};case"date":return{$date:e.toISOString()};default:return e}}function Ih(e){return e&&e.content&&e.content.$method}class Dh{constructor(e,t,i){this.content=e,this.prevStage=t||null,this.udb=null,this._database=i}toJSON(){let e=this;const t=[e.content];for(;e.prevStage;)e=e.prevStage,t.push(e.content);return{$db:t.reverse().map((e=>({$method:e.$method,$param:_h(e.$param)})))}}toString(){return JSON.stringify(this.toJSON())}getAction(){const e=this.toJSON().$db.find((e=>"action"===e.$method));return e&&e.$param&&e.$param[0]}getCommand(){return{$db:this.toJSON().$db.filter((e=>"action"!==e.$method))}}get isAggregate(){let e=this;for(;e;){const t=Ih(e),i=Ih(e.prevStage);if("aggregate"===t&&"collection"===i||"pipeline"===t)return!0;e=e.prevStage}return!1}get isCommand(){let e=this;for(;e;){if("command"===Ih(e))return!0;e=e.prevStage}return!1}get isAggregateCommand(){let e=this;for(;e;){const t=Ih(e),i=Ih(e.prevStage);if("aggregate"===t&&"command"===i)return!0;e=e.prevStage}return!1}getNextStageFn(e){const t=this;return function(){return Bh({$method:e,$param:_h(Array.from(arguments))},t,t._database)}}get count(){return this.isAggregate?this.getNextStageFn("count"):function(){return this._send("count",Array.from(arguments))}}get remove(){return this.isCommand?this.getNextStageFn("remove"):function(){return this._send("remove",Array.from(arguments))}}get(){return this._send("get",Array.from(arguments))}get add(){return this.isCommand?this.getNextStageFn("add"):function(){return this._send("add",Array.from(arguments))}}update(){return this._send("update",Array.from(arguments))}end(){return this._send("end",Array.from(arguments))}get set(){return this.isCommand?this.getNextStageFn("set"):function(){throw new Error("JQL禁止使用set方法")}}_send(e,t){const i=this.getAction(),s=this.getCommand();return s.$db.push({$method:e,$param:_h(t)}),this._database._callCloudFunction({action:i,command:s})}}function Bh(e,t,i){return xh(new Dh(e,t,i),{get(e,t){let s="db";return e&&e.content&&(s=e.content.$method),Ah(s,t)?Bh({$method:t},e,i):function(){return Bh({$method:t,$param:_h(Array.from(arguments))},e,i)}}})}function Rh({path:e,method:t}){return class{constructor(){this.param=Array.from(arguments)}toJSON(){return{$newDb:[...e.map((e=>({$method:e}))),{$method:t,$param:this.param}]}}toString(){return JSON.stringify(this.toJSON())}}}function Mh(e,t={}){return xh(new e(t),{get:(e,t)=>Ah("db",t)?Bh({$method:t},null,e):function(){return Bh({$method:t,$param:_h(Array.from(arguments))},null,e)}})}class Ph extends class{constructor({uniClient:e={},isJQL:t=!1}={}){this._uniClient=e,this._authCallBacks={},this._dbCallBacks={},e._isDefault&&(this._dbCallBacks=Zd("_globalUniCloudDatabaseCallback")),t||(this.auth=Vh(this._authCallBacks)),this._isJQL=t,Object.assign(this,Vh(this._dbCallBacks)),this.env=xh({},{get:(e,t)=>({$env:t})}),this.Geo=xh({},{get:(e,t)=>Rh({path:["Geo"],method:t})}),this.serverDate=Rh({path:[],method:"serverDate"}),this.RegExp=Rh({path:[],method:"RegExp"})}getCloudEnv(e){if("string"!=typeof e||!e.trim())throw new Error("getCloudEnv参数错误");return{$env:e.replace("$cloudEnv_","")}}_callback(e,t){const i=this._dbCallBacks;i[e]&&i[e].forEach((e=>{e(...t)}))}_callbackAuth(e,t){const i=this._authCallBacks;i[e]&&i[e].forEach((e=>{e(...t)}))}multiSend(){const e=Array.from(arguments),t=e.map((e=>{const t=e.getAction(),i=e.getCommand();if("getTemp"!==i.$db[i.$db.length-1].$method)throw new Error("multiSend只支持子命令内使用getTemp");return{action:t,command:i}}));return this._callCloudFunction({multiCommand:t,queryList:e})}}{_parseResult(e){return this._isJQL?e.result:e}_callCloudFunction({action:e,command:t,multiCommand:i,queryList:s}){function n(e,t){if(i&&s)for(let i=0;i<s.length;i++){const n=s[i];n.udb&&"function"==typeof n.udb.setResult&&(t?n.udb.setResult(t):n.udb.setResult(e.result.dataList[i]))}}const a=this,r=this._isJQL?"databaseForJQL":"database";function o(e){return a._callback("error",[e]),su(nu(r,"fail"),e).then((()=>su(nu(r,"complete"),e))).then((()=>(n(null,e),yu(ou,{type:du,content:e}),Promise.reject(e))))}const l=su(nu(r,"invoke")),c=this._uniClient;return l.then((()=>c.callFunction({name:"DCloud-clientDB",type:Pd,data:{action:e,command:t,multiCommand:i}}))).then((e=>{const{code:t,message:i,token:s,tokenExpired:l,systemInfo:c=[]}=e.result;if(c)for(let n=0;n<c.length;n++){const{level:e,message:t,detail:i}=c[n];let s="[System Info]"+t;i&&(s=`${s}\n详细信息：${i}`),(console["warn"===e?"error":e]||console.log)(s)}if(t)return o(new Nu({code:t,message:i,requestId:e.requestId}));e.result.errCode=e.result.errCode||e.result.code,e.result.errMsg=e.result.errMsg||e.result.message,s&&l&&(Su({token:s,tokenExpired:l}),this._callbackAuth("refreshToken",[{token:s,tokenExpired:l}]),this._callback("refreshToken",[{token:s,tokenExpired:l}]),yu(cu,{token:s,tokenExpired:l}));const d=[{prop:"affectedDocs",tips:"affectedDocs不再推荐使用，请使用inserted/deleted/updated/data.length替代"},{prop:"code",tips:"code不再推荐使用，请使用errCode替代"},{prop:"message",tips:"message不再推荐使用，请使用errMsg替代"}];for(let n=0;n<d.length;n++){const{prop:t,tips:i}=d[n];if(t in e.result){const s=e.result[t];Object.defineProperty(e.result,t,{get:()=>(console.warn(i),s)})}}return u=e,su(nu(r,"success"),u).then((()=>su(nu(r,"complete"),u))).then((()=>{n(u,null);const e=a._parseResult(u);return yu(ou,{type:du,content:e}),Promise.resolve(e)}));var u}),(e=>(/fc_function_not_found|FUNCTION_NOT_FOUND/g.test(e.message)&&console.warn("clientDB未初始化，请在web控制台保存一次schema以开启clientDB"),o(new Nu({code:e.code||"SYSTEM_ERROR",message:e.message,requestId:e.requestId})))))}}const Oh="token无效，跳转登录页面",Lh="token过期，跳转登录页面",Fh={TOKEN_INVALID_TOKEN_EXPIRED:Lh,TOKEN_INVALID_INVALID_CLIENTID:Oh,TOKEN_INVALID:Oh,TOKEN_INVALID_WRONG_TOKEN:Oh,TOKEN_INVALID_ANONYMOUS_USER:Oh},Uh={"uni-id-token-expired":Lh,"uni-id-check-token-failed":Oh,"uni-id-token-not-exist":Oh,"uni-id-check-device-feature-failed":Oh},zh={...Fh,...Uh,default:"用户未登录或登录状态过期，自动跳转登录页面"};function Gh(e,t){let i="";return i=e?`${e}/${t}`:t,i.replace(/^\//,"")}function Hh(e=[],t=""){const i=[],s=[];return e.forEach((e=>{!0===e.needLogin?i.push(Gh(t,e.path)):!1===e.needLogin&&s.push(Gh(t,e.path))})),{needLoginPage:i,notNeedLoginPage:s}}function jh(e){return e.split("?")[0].replace(/^\//,"")}function $h(){return function(e){let t=e&&e.$page&&e.$page.fullPath;return t?("/"!==t.charAt(0)&&(t="/"+t),t):""}(function(){const e=getCurrentPages();return e[e.length-1]}())}function qh(){return jh($h())}function Wh(e="",t={}){if(!e)return!1;if(!(t&&t.list&&t.list.length))return!1;const i=t.list,s=jh(e);return i.some((e=>e.pagePath===s))}const Jh=!!Sd.uniIdRouter,{loginPage:Yh,routerNeedLogin:Xh,resToLogin:Qh,needLoginPage:Zh,notNeedLoginPage:Kh,loginPageInTabBar:ep}=function({pages:e=[],subPackages:t=[],uniIdRouter:i={},tabBar:s={}}=Sd){const{loginPage:n,needLogin:a=[],resToLogin:r=!0}=i,{needLoginPage:o,notNeedLoginPage:l}=Hh(e),{needLoginPage:c,notNeedLoginPage:d}=function(e=[]){const t=[],i=[];return e.forEach((e=>{const{root:s,pages:n=[]}=e,{needLoginPage:a,notNeedLoginPage:r}=Hh(n,s);t.push(...a),i.push(...r)})),{needLoginPage:t,notNeedLoginPage:i}}(t);return{loginPage:n,routerNeedLogin:a,resToLogin:r,needLoginPage:[...o,...c],notNeedLoginPage:[...l,...d],loginPageInTabBar:Wh(n,s)}}();if(Zh.indexOf(Yh)>-1)throw new Error(`Login page [${Yh}] should not be "needLogin", please check your pages.json`);function tp(e){const t=qh();if("/"===e.charAt(0))return e;const[i,s]=e.split("?"),n=i.replace(/^\//,"").split("/"),a=t.split("/");a.pop();for(let r=0;r<n.length;r++){const e=n[r];".."===e?a.pop():"."!==e&&a.push(e)}return""===a[0]&&a.shift(),"/"+a.join("/")+(s?"?"+s:"")}function ip({redirect:e}){const t=jh(e),i=jh(Yh);return qh()!==i&&t!==i}function sp({api:e,redirect:t}={}){if(!t||!ip({redirect:t}))return;const i=(n=t,"/"!==(s=Yh).charAt(0)&&(s="/"+s),n?s.indexOf("?")>-1?s+`&uniIdRedirectUrl=${encodeURIComponent(n)}`:s+`?uniIdRedirectUrl=${encodeURIComponent(n)}`:s);var s,n;ep?"navigateTo"!==e&&"redirectTo"!==e||(e="switchTab"):"switchTab"===e&&(e="navigateTo");const a={navigateTo:uni.navigateTo,redirectTo:uni.redirectTo,switchTab:uni.switchTab,reLaunch:uni.reLaunch};setTimeout((()=>{a[e]({url:i})}),0)}function np({url:e}={}){const t={abortLoginPageJump:!1,autoToLoginPage:!1},i=function(){const{token:e,tokenExpired:t}=Cu();let i;if(e){if(t<Date.now()){const e="uni-id-token-expired";i={errCode:e,errMsg:zh[e]}}}else{const e="uni-id-check-token-failed";i={errCode:e,errMsg:zh[e]}}return i}();if(function(e){const t=jh(tp(e));return!(Kh.indexOf(t)>-1)&&(Zh.indexOf(t)>-1||Xh.some((t=>{return i=e,new RegExp(t).test(i);var i})))}(e)&&i){if(i.uniIdRedirectUrl=e,hu(lu).length>0)return setTimeout((()=>{yu(lu,i)}),0),t.abortLoginPageJump=!0,t;t.autoToLoginPage=!0}return t}function ap(){!function(){const e=$h(),{abortLoginPageJump:t,autoToLoginPage:i}=np({url:e});t||i&&sp({api:"redirectTo",redirect:e})}();const e=["navigateTo","redirectTo","reLaunch","switchTab"];for(let t=0;t<e.length;t++){const i=e[t];uni.addInterceptor(i,{invoke(e){const{abortLoginPageJump:t,autoToLoginPage:s}=np({url:e.url});return t?e:s?(sp({api:i,redirect:tp(e.url)}),!1):e}})}}function rp(){this.onResponse((e=>{const{type:t,content:i}=e;let s=!1;switch(t){case"cloudobject":s=function(e){if("object"!=typeof e)return!1;const{errCode:t}=e||{};return t in zh}(i);break;case"clientdb":s=function(e){if("object"!=typeof e)return!1;const{errCode:t}=e||{};return t in Fh}(i)}s&&function(e={}){const t=hu(lu);Eu().then((()=>{const i=$h();if(i&&ip({redirect:i}))return t.length>0?yu(lu,Object.assign({uniIdRedirectUrl:i},e)):void(Yh&&sp({api:"navigateTo",redirect:i}))}))}(i)}))}function op(e){var t;(t=e).onResponse=function(e){pu(ou,e)},t.offResponse=function(e){gu(ou,e)},function(e){e.onNeedLogin=function(e){pu(lu,e)},e.offNeedLogin=function(e){gu(lu,e)},Jh&&(Zd(yh).needLoginInit||(Zd(yh).needLoginInit=!0,Eu().then((()=>{ap.call(e)})),Qh&&rp.call(e)))}(e),function(e){e.onRefreshToken=function(e){pu(cu,e)},e.offRefreshToken=function(e){gu(cu,e)}}(e)}let lp;const cp="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",dp=/^(?:[A-Za-z\d+/]{4})*?(?:[A-Za-z\d+/]{2}(?:==)?|[A-Za-z\d+/]{3}=?)?$/;function up(){const e=Cu().token||"",t=e.split(".");if(!e||3!==t.length)return{uid:null,role:[],permission:[],tokenExpired:0};let i;try{i=JSON.parse((s=t[1],decodeURIComponent(lp(s).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""))))}catch(n){throw new Error("获取当前用户信息出错，详细错误信息为："+n.message)}var s;return i.tokenExpired=1e3*i.exp,delete i.exp,delete i.iat,i}lp="function"!=typeof atob?function(e){if(e=String(e).replace(/[\t\n\f\r ]+/g,""),!dp.test(e))throw new Error("Failed to execute 'atob' on 'Window': The string to be decoded is not correctly encoded.");var t;e+="==".slice(2-(3&e.length));for(var i,s,n="",a=0;a<e.length;)t=cp.indexOf(e.charAt(a++))<<18|cp.indexOf(e.charAt(a++))<<12|(i=cp.indexOf(e.charAt(a++)))<<6|(s=cp.indexOf(e.charAt(a++))),n+=64===i?String.fromCharCode(t>>16&255):64===s?String.fromCharCode(t>>16&255,t>>8&255):String.fromCharCode(t>>16&255,t>>8&255,255&t);return n}:atob;var mp=xd((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const i="chooseAndUploadFile:ok",s="chooseAndUploadFile:fail";function n(e,t){return e.tempFiles.forEach(((e,i)=>{e.name||(e.name=e.path.substring(e.path.lastIndexOf("/")+1)),t&&(e.fileType=t),e.cloudPath=Date.now()+"_"+i+e.name.substring(e.name.lastIndexOf("."))})),e.tempFilePaths||(e.tempFilePaths=e.tempFiles.map((e=>e.path))),e}function a(e,t,{onChooseFile:s,onUploadProgress:n}){return t.then((e=>{if(s){const t=s(e);if(void 0!==t)return Promise.resolve(t).then((t=>void 0===t?e:t))}return e})).then((t=>!1===t?{errMsg:i,tempFilePaths:[],tempFiles:[]}:function(e,t,s=5,n){(t=Object.assign({},t)).errMsg=i;const a=t.tempFiles,r=a.length;let o=0;return new Promise((i=>{for(;o<s;)l();function l(){const s=o++;if(s>=r)return void(!a.find((e=>!e.url&&!e.errMsg))&&i(t));const c=a[s];e.uploadFile({provider:c.provider,filePath:c.path,cloudPath:c.cloudPath,fileType:c.fileType,cloudPathAsRealPath:c.cloudPathAsRealPath,onUploadProgress(e){e.index=s,e.tempFile=c,e.tempFilePath=c.path,n&&n(e)}}).then((e=>{c.url=e.fileID,s<r&&l()})).catch((e=>{c.errMsg=e.errMsg||e.message,s<r&&l()}))}}))}(e,t,5,n)))}t.initChooseAndUploadFile=function(e){return function(t={type:"all"}){return"image"===t.type?a(e,function(e){const{count:t,sizeType:i,sourceType:a=["album","camera"],extension:r}=e;return new Promise(((e,o)=>{uni.chooseImage({count:t,sizeType:i,sourceType:a,extension:r,success(t){e(n(t,"image"))},fail(e){o({errMsg:e.errMsg.replace("chooseImage:fail",s)})}})}))}(t),t):"video"===t.type?a(e,function(e){const{camera:t,compressed:i,maxDuration:a,sourceType:r=["album","camera"],extension:o}=e;return new Promise(((e,l)=>{uni.chooseVideo({camera:t,compressed:i,maxDuration:a,sourceType:r,extension:o,success(t){const{tempFilePath:i,duration:s,size:a,height:r,width:o}=t;e(n({errMsg:"chooseVideo:ok",tempFilePaths:[i],tempFiles:[{name:t.tempFile&&t.tempFile.name||"",path:i,size:a,type:t.tempFile&&t.tempFile.type||"",width:o,height:r,duration:s,fileType:"video",cloudPath:""}]},"video"))},fail(e){l({errMsg:e.errMsg.replace("chooseVideo:fail",s)})}})}))}(t),t):a(e,function(e){const{count:t,extension:i}=e;return new Promise(((e,a)=>{let r=uni.chooseFile;if("undefined"!=typeof wx&&"function"==typeof wx.chooseMessageFile&&(r=wx.chooseMessageFile),"function"!=typeof r)return a({errMsg:s+" 请指定 type 类型，该平台仅支持选择 image 或 video。"});r({type:"all",count:t,extension:i,success(t){e(n(t))},fail(e){a({errMsg:e.errMsg.replace("chooseFile:fail",s)})}})}))}(t),t)}}})),hp=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}(mp);const pp="manual";function gp(e){return{props:{localdata:{type:Array,default:()=>[]},options:{type:[Object,Array],default:()=>({})},spaceInfo:{type:Object,default:()=>({})},collection:{type:[String,Array],default:""},action:{type:String,default:""},field:{type:String,default:""},orderby:{type:String,default:""},where:{type:[String,Object],default:""},pageData:{type:String,default:"add"},pageCurrent:{type:Number,default:1},pageSize:{type:Number,default:20},getcount:{type:[Boolean,String],default:!1},gettree:{type:[Boolean,String],default:!1},gettreepath:{type:[Boolean,String],default:!1},startwith:{type:String,default:""},limitlevel:{type:Number,default:10},groupby:{type:String,default:""},groupField:{type:String,default:""},distinct:{type:[Boolean,String],default:!1},foreignKey:{type:String,default:""},loadtime:{type:String,default:"auto"},manual:{type:Boolean,default:!1}},data:()=>({mixinDatacomLoading:!1,mixinDatacomHasMore:!1,mixinDatacomResData:[],mixinDatacomErrorMessage:"",mixinDatacomPage:{},mixinDatacomError:null}),created(){this.mixinDatacomPage={current:this.pageCurrent,size:this.pageSize,count:0},this.$watch((()=>{var e=[];return["pageCurrent","pageSize","localdata","collection","action","field","orderby","where","getont","getcount","gettree","groupby","groupField","distinct"].forEach((t=>{e.push(this[t])})),e}),((e,t)=>{if(this.loadtime===pp)return;let i=!1;const s=[];for(let n=2;n<e.length;n++)e[n]!==t[n]&&(s.push(e[n]),i=!0);e[0]!==t[0]&&(this.mixinDatacomPage.current=this.pageCurrent),this.mixinDatacomPage.size=this.pageSize,this.onMixinDatacomPropsChange(i,s)}))},methods:{onMixinDatacomPropsChange(e,t){},mixinDatacomEasyGet({getone:e=!1,success:t,fail:i}={}){this.mixinDatacomLoading||(this.mixinDatacomLoading=!0,this.mixinDatacomErrorMessage="",this.mixinDatacomError=null,this.mixinDatacomGet().then((i=>{this.mixinDatacomLoading=!1;const{data:s,count:n}=i.result;this.getcount&&(this.mixinDatacomPage.count=n),this.mixinDatacomHasMore=s.length<this.pageSize;const a=e?s.length?s[0]:void 0:s;this.mixinDatacomResData=a,t&&t(a)})).catch((e=>{this.mixinDatacomLoading=!1,this.mixinDatacomErrorMessage=e,this.mixinDatacomError=e,i&&i(e)})))},mixinDatacomGet(t={}){let i;t=t||{},i="undefined"!=typeof __uniX&&__uniX?e.databaseForJQL(this.spaceInfo):e.database(this.spaceInfo);const s=t.action||this.action;s&&(i=i.action(s));const n=t.collection||this.collection;i=Array.isArray(n)?i.collection(...n):i.collection(n);const a=t.where||this.where;a&&Object.keys(a).length&&(i=i.where(a));const r=t.field||this.field;r&&(i=i.field(r));const o=t.foreignKey||this.foreignKey;o&&(i=i.foreignKey(o));const l=t.groupby||this.groupby;l&&(i=i.groupBy(l));const c=t.groupField||this.groupField;c&&(i=i.groupField(c)),!0===(void 0!==t.distinct?t.distinct:this.distinct)&&(i=i.distinct());const d=t.orderby||this.orderby;d&&(i=i.orderBy(d));const u=void 0!==t.pageCurrent?t.pageCurrent:this.mixinDatacomPage.current,m=void 0!==t.pageSize?t.pageSize:this.mixinDatacomPage.size,h=void 0!==t.getcount?t.getcount:this.getcount,p=void 0!==t.gettree?t.gettree:this.gettree,g=void 0!==t.gettreepath?t.gettreepath:this.gettreepath,y={getCount:h},f={limitLevel:void 0!==t.limitlevel?t.limitlevel:this.limitlevel,startWith:void 0!==t.startwith?t.startwith:this.startwith};return p&&(y.getTree=f),g&&(y.getTreePath=f),i=i.skip(m*(u-1)).limit(m).get(y),i}}}}function yp(e){return Zd("_globalUniCloudSecureNetworkCache__{spaceId}".replace("{spaceId}",e.config.spaceId))}async function fp({openid:e,callLoginByWeixin:t=!1}={}){throw yp(this),new Error("[SecureNetwork] API `initSecureNetworkByWeixin` is not supported on platform `app`")}async function vp(e){const t=yp(this);return t.initPromise||(t.initPromise=fp.call(this,e).then((e=>e)).catch((e=>{throw delete t.initPromise,e}))),t.initPromise}function Ep(e){_u=e}function wp(e){const t={getAppBaseInfo:uni.getSystemInfo,getPushClientId:uni.getPushClientId};return function(i){return new Promise(((s,n)=>{t[e]({...i,success(e){s(e)},fail(e){n(e)}})}))}}class Np extends class{constructor(){this._callback={}}addListener(e,t){this._callback[e]||(this._callback[e]=[]),this._callback[e].push(t)}on(e,t){return this.addListener(e,t)}removeListener(e,t){if(!t)throw new Error('The "listener" argument must be of type function. Received undefined');const i=this._callback[e];if(!i)return;const s=function(e,t){for(let i=e.length-1;i>=0;i--)if(e[i]===t)return i;return-1}(i,t);i.splice(s,1)}off(e,t){return this.removeListener(e,t)}removeAllListener(e){delete this._callback[e]}emit(e,...t){const i=this._callback[e];if(i)for(let s=0;s<i.length;s++)i[s](...t)}}{constructor(){super(),this._uniPushMessageCallback=this._receivePushMessage.bind(this),this._currentMessageId=-1,this._payloadQueue=[]}init(){return Promise.all([wp("getAppBaseInfo")(),wp("getPushClientId")()]).then((([{appId:e}={},{cid:t}={}]=[])=>{if(!e)throw new Error("Invalid appId, please check the manifest.json file");if(!t)throw new Error("Invalid push client id");this._appId=e,this._pushClientId=t,this._seqId=Date.now()+"-"+Math.floor(9e5*Math.random()+1e5),this.emit("open"),this._initMessageListener()}),(e=>{throw this.emit("error",e),this.close(),e}))}async open(){return this.init()}_isUniCloudSSE(e){if("receive"!==e.type)return!1;const t=e&&e.data&&e.data.payload;return!(!t||"UNI_CLOUD_SSE"!==t.channel||t.seqId!==this._seqId)}_receivePushMessage(e){if(!this._isUniCloudSSE(e))return;const t=e&&e.data&&e.data.payload,{action:i,messageId:s,message:n}=t;this._payloadQueue.push({action:i,messageId:s,message:n}),this._consumMessage()}_consumMessage(){for(;;){const e=this._payloadQueue.find((e=>e.messageId===this._currentMessageId+1));if(!e)break;this._currentMessageId++,this._parseMessagePayload(e)}}_parseMessagePayload(e){const{action:t,messageId:i,message:s}=e;"end"===t?this._end({messageId:i,message:s}):"message"===t&&this._appendMessage({messageId:i,message:s})}_appendMessage({messageId:e,message:t}={}){this.emit("message",t)}_end({messageId:e,message:t}={}){this.emit("end",t),this.close()}_initMessageListener(){uni.onPushMessage(this._uniPushMessageCallback)}_destroy(){uni.offPushMessage(this._uniPushMessageCallback)}toJSON(){return{appId:this._appId,pushClientId:this._pushClientId,seqId:this._seqId}}close(){this._destroy(),this.emit("close")}}const kp={tcb:Ym,tencent:Ym,aliyun:Mu,private:Zm,dcloud:Zm,alipay:oh};let bp=new class{init(e){let t={};const i=kp[e.provider];if(!i)throw new Error("未提供正确的provider参数");var s;return t=i.init(e),function(e){e._initPromiseHub||(e._initPromiseHub=new $d({createPromise:function(){let t=Promise.resolve();t=new Promise((e=>{setTimeout((()=>{e()}),1)}));const i=e.auth();return t.then((()=>i.getLoginState())).then((e=>e?Promise.resolve():i.signInAnonymously()))}}))}(t),Ch(t),function(e){const t=e.uploadFile;e.uploadFile=function(e){return t.call(this,e)}}(t),(s=t).database=function(e){if(e&&Object.keys(e).length>0)return s.init(e).database();if(this._database)return this._database;const t=Mh(Ph,{uniClient:s});return this._database=t,t},s.databaseForJQL=function(e){if(e&&Object.keys(e).length>0)return s.init(e).databaseForJQL();if(this._databaseForJQL)return this._databaseForJQL;const t=Mh(Ph,{uniClient:s,isJQL:!0});return this._databaseForJQL=t,t},function(e){e.getCurrentUserInfo=up,e.chooseAndUploadFile=hp.initChooseAndUploadFile(e),Object.assign(e,{get mixinDatacom(){return gp(e)}}),e.SSEChannel=Np,e.initSecureNetworkByWeixin=function(e){return function({openid:t,callLoginByWeixin:i=!1}={}){return vp.call(e,{openid:t,callLoginByWeixin:i})}}(e),e.setCustomClientInfo=Ep,e.importObject=function(t){return function(i,s={}){s=function(e,t={}){return e.customUI=t.customUI||e.customUI,e.parseSystemError=t.parseSystemError||e.parseSystemError,Object.assign(e.loadingOptions,t.loadingOptions),Object.assign(e.errorOptions,t.errorOptions),"object"==typeof t.secretMethods&&(e.secretMethods=t.secretMethods),e}({customUI:!1,loadingOptions:{title:"加载中...",mask:!0},errorOptions:{type:"modal",retry:!1}},s);const{customUI:n,loadingOptions:a,errorOptions:r,parseSystemError:o}=s,l=!n;return new Proxy({},{get(n,c){switch(c){case"toString":return"[object UniCloudObject]";case"toJSON":return{}}return function({fn:e,interceptorName:t,getCallbackArgs:i}={}){return async function(...s){const n=i?i({params:s}):{};let a,r;try{return await su(nu(t,"invoke"),{...n}),a=await e(...s),await su(nu(t,"success"),{...n,result:a}),a}catch(o){throw r=o,await su(nu(t,"fail"),{...n,error:r}),r}finally{await su(nu(t,"complete"),r?{...n,error:r}:{...n,result:a})}}}({fn:async function n(...d){let u;l&&uni.showLoading({title:a.title,mask:a.mask});const m={name:i,type:Md,data:{method:c,params:d}};"object"==typeof s.secretMethods&&function(e,t){const i=t.data.method,s=e.secretMethods||{},n=s[i]||s["*"];n&&(t.secretType=n)}(s,m);let h=!1;try{u=await t.callFunction(m)}catch(e){h=!0,u={result:new Nu(e)}}const{errSubject:p,errCode:g,errMsg:y,newToken:f}=u.result||{};if(l&&uni.hideLoading(),f&&f.token&&f.tokenExpired&&(Su(f),yu(cu,{...f})),g){let e=y;if(h&&o&&(e=(await o({objectName:i,methodName:c,params:d,errSubject:p,errCode:g,errMsg:y})).errMsg||y),l)if("toast"===r.type)uni.showToast({title:e,icon:"none"});else{if("modal"!==r.type)throw new Error(`Invalid errorOptions.type: ${r.type}`);{const{confirm:t}=await async function({title:e,content:t,showCancel:i,cancelText:s,confirmText:n}={}){return new Promise(((a,r)=>{uni.showModal({title:e,content:t,showCancel:i,cancelText:s,confirmText:n,success(e){a(e)},fail(){a({confirm:!1,cancel:!0})}})}))}({title:"提示",content:e,showCancel:r.retry,cancelText:"取消",confirmText:r.retry?"重试":"确定"});if(r.retry&&t)return n(...d)}}const t=new Nu({subject:p,code:g,message:y,requestId:u.requestId});throw t.detail=u.result,yu(ou,{type:mu,content:t}),t}return yu(ou,{type:mu,content:u.result}),u.result},interceptorName:"callObject",getCallbackArgs:function({params:e}={}){return{objectName:i,methodName:c,params:e}}})}})}}(e)}(t),["callFunction","uploadFile","deleteFile","getTempFileURL","downloadFile","chooseAndUploadFile"].forEach((e=>{if(!t[e])return;const i=t[e];t[e]=function(){return i.apply(t,Array.from(arguments))},t[e]=function(e,t){return function(i){let s=!1;if("callFunction"===t){const e=i&&i.type||Rd;s=e!==Rd}const n="callFunction"===t&&!s,a=this._initPromiseHub.exec();i=i||{};const{success:r,fail:o,complete:l}=wu(i),c=a.then((()=>s?Promise.resolve():su(nu(t,"invoke"),i))).then((()=>e.call(this,i))).then((e=>s?Promise.resolve(e):su(nu(t,"success"),e).then((()=>su(nu(t,"complete"),e))).then((()=>(n&&yu(ou,{type:uu,content:e}),Promise.resolve(e))))),(e=>s?Promise.reject(e):su(nu(t,"fail"),e).then((()=>su(nu(t,"complete"),e))).then((()=>(yu(ou,{type:uu,content:e}),Promise.reject(e))))));if(!(r||o||l))return c;c.then((e=>{r&&r(e),l&&l(e),n&&yu(ou,{type:uu,content:e})}),(e=>{o&&o(e),l&&l(e),n&&yu(ou,{type:uu,content:e})}))}}(t[e],e).bind(t)})),t.init=this.init,t}};(()=>{const e=Jd;let t={};if(e&&1===e.length)t=e[0],bp=bp.init(t),bp._isDefault=!0;else{const t=["auth","callFunction","uploadFile","deleteFile","getTempFileURL","downloadFile"],i=["database","getCurrentUserInfo","importObject"];let s;s=e&&e.length>0?"应用有多个服务空间，请通过uniCloud.init方法指定要使用的服务空间":"应用未关联服务空间，请在uniCloud目录右键关联服务空间",[...t,...i].forEach((e=>{bp[e]=function(){if(console.error(s),-1===i.indexOf(e))return Promise.reject(new Nu({code:"SYS_ERR",message:s}));console.error(s)}}))}Object.assign(bp,{get mixinDatacom(){return gp(bp)}}),op(bp),bp.addInterceptor=tu,bp.removeInterceptor=iu,bp.interceptObject=au,uni.__uniCloud=bp;{const e=Xd||(Xd=function(){if("undefined"!=typeof globalThis)return globalThis;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;function e(){return this}return void 0!==e()?e():new Function("return this")()}(),Xd);e.uniCloud=bp,e.UniCloudError=Nu}})();var Cp=bp;const Sp={en:{"uni-load-more.contentdown":"Pull up to show more","uni-load-more.contentrefresh":"loading...","uni-load-more.contentnomore":"No more data"},"zh-Hans":{"uni-load-more.contentdown":"上拉显示更多","uni-load-more.contentrefresh":"正在加载...","uni-load-more.contentnomore":"没有更多数据了"},"zh-Hant":{"uni-load-more.contentdown":"上拉顯示更多","uni-load-more.contentrefresh":"正在加載...","uni-load-more.contentnomore":"沒有更多數據了"}};let xp;setTimeout((()=>{xp=uni.getSystemInfoSync().platform}),16);const{t:Vp}=ce(Sp);const Tp=X({name:"UniLoadMore",emits:["clickLoadMore"],props:{status:{type:String,default:"more"},showIcon:{type:Boolean,default:!0},iconType:{type:String,default:"auto"},iconSize:{type:Number,default:24},color:{type:String,default:"#777777"},contentText:{type:Object,default:()=>({contentdown:"",contentrefresh:"",contentnomore:""})},showText:{type:Boolean,default:!0}},data:()=>({webviewHide:!1,platform:xp,imgBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QzlBMzU3OTlEOUM0MTFFOUI0NTZDNERBQURBQzI4RkUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QzlBMzU3OUFEOUM0MTFFOUI0NTZDNERBQURBQzI4RkUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpDOUEzNTc5N0Q5QzQxMUU5QjQ1NkM0REFBREFDMjhGRSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpDOUEzNTc5OEQ5QzQxMUU5QjQ1NkM0REFBREFDMjhGRSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pt+ALSwAAA6CSURBVHja1FsLkFZVHb98LM+F5bHL8khA1iSeiyQBCRM+YGqKUnnJTDLGI0BGZlKDIU2MMglUiDApEZvSsZnQtBRJtKwQNKQMFYeRDR10WOLd8ljYXdh+v8v5fR3Od+797t1dnOnO/Ofce77z+J//+b/P+ZqtXbs2sJ9MJhNUV1cHJ06cCJo3bx7EPc2aNcvpy7pWrVoF+/fvDyoqKoI2bdoE9fX1F7TjN8a+EXBn/fkfvw942Tf+wYMHg9mzZwfjxo0LDhw4EPa1x2MbFw/fOGfPng1qa2tzcCkILsLDydq2bRsunpOTMM7TD/W/tZDZhPdeKD+yGxHhdu3aBV27dg3OnDlzMVANMheLAO3btw8KCwuDmpoaX5OxbgUIMEq7K8IcPnw4KCsrC/r37x8cP378/4cAXAB3vqSkJMuiDhTkw+XcuXNhOWbMmKBly5YhUT8xArhyFvP0BfwRsAuwxJZJsm/nzp2DTp06he/OU+cZ64K6o0ePBkOHDg2GDx8e6gEbJ5Q/NHNuAJQ1hgBeHUDlR7nVTkY8rQAvAi4z34vR/mPs1FoRsaCgIJThI0eOBC1atEiFGGV+5MiRoS45efJkqFjJFXV1dQuA012m2WcwTw98fy6CqBdsaiIO4CScrGPHjvk4odhavPquRtFWXEC25VgkREKOCh/qDSq+vn37htzD/mZTOmOc5U7zKzBPEedygWshcDyWvs30igAbU+6oyMgJBCFhwQE0fccxN60Ay9iebbjoDh06hMowjQxT4fXq1SskArmHZpkArvixp/kWzHdMeArExSJEaiXIjjRjRJ4DaAGWpibLzXN3Fm1vA5teBgh3j1Rv3bp1YgKwPdmf2p9zcyNYYgPKMfY0T5f5nNYdw158nJ8QawW4CLKwiOBSEgO/hok2eBydR+3dYH+PLxA5J8Vv0KBBwenTp0P2JWAx6+yFEBfs8lMY+y0SWMBNI9E4ThKi58VKTg3FQZS1RQF1cz27eC0QHMu+3E0SkUowjhVt5VdaWhp07949ZHv2Qd1EjDXM2cla1M0nl3GxAs3J9yREzyTdFVKVFOaE9qRA8GM0WebRuo9JGZKA7Mv2SeS/Z8+eoQ9BArMfFrLGo6jvxbhHbJZnKX2Rzz1O7QhJJ9Cs2ZMaWIyq/zhdeqPNfIoHd58clIQD+JSXl4dKlyIAuBdVXZwFVWKspSSoxE++h8x4k3uCnEhE4I5KwRiFWGOU0QWKiCYLbdoRMRKAu2kQ9vkfLU6dOhX06NEjlH+yMRZSinnuyWnYosVcji8CEA/6Cg2JF+IIUBqnGKUTCNwtwBN4f89RiK1R96DEgO2o0NDmtEdvVFdVVYV+P3UAPUEs6GFwV3PHmXkD4vh74iDFJysVI/MlaQhwKeBNTLYX5VuA8T4/gZxA4MRGFxDB6R7OmYPfyykGRJbyie+XnGYnQIC/coH9+vULiYrxrkL9ZA9+0ykaHIfEpM7ge8TiJ2CsHYwyMfafAF1yCGBHYIbCVDjDjKt7BeB51D+LgQa6OkG7IDYEEtvQ7lnXLKLtLdLuJBpE4gPUXcW2+PkZwOex+4cGDhwYDBkyRL7/HFcEwUGPo/8uWRUpYnfxGHco8HkewLHLyYmAawAPuIFZxhOpDfJQ8gbUv41yORAptMWBNr6oqMhWird5+u+iHmBb2nhjDV7HWBNQTgK8y11l5NetWzc5ULscAtSj7nbNI0skhWeUZCc0W4nyH/jO4Vz0u1IeYhbk4AiwM6tjxIWByHsoZ9qcIBPJd/y+DwPfBESOmCa/QF3WiZHucLlEDpNxcNhmheEOPgdQNx6/VZFQzFZ5TN08AHXQt2Ii3EdyFuUsPtTcGPhW5iMiCNELvz+Gdn9huG4HUJaW/w3g0wxV0XaG7arG2WeKiUWYM4Y7GO5ezshTARbbWGw/DvXkpp/ivVvE0JVoMxN4rpGzJMhE5Pl+xlATsDIqikP9F9D2z3h9nOksEUFhK+qO4rcPkoalMQ/HqJLIyb3F3JdjrCcw1yZ8joyJLR5gCo54etlag7qIoeNh1N1BRYj3DTFJ0elotxPlVzkGuYAmL0VSJVGAJA41c4Z6A3BzTLfn0HYwYKEI6CUAMzZEWvLsIcQOo1AmmyyM72nHJCfYsogflGV6jEk9vyQZXSuq6w4c16NsGcGZbwOPr+H1RkOk2LEzjNepxQkihHSCQ4ynAYNRx2zMKV92CQMWqj8J0BRE8EShxRFN6YrfCRhC0x3r/Zm4IbQCcmJoV0kMamllccR6FjHqUC5F2R/wS2dcymOlfAKOS4KmzQb5cpNC2MC7JhVn5wjXoJ44rYhLh8n0eXOCorJxa7POjbSlCGVczr34/RsAmrcvo9s+wGp3tzVhntxiXiJ4nvEYb4FJkf0O8HocAePmLvCxnL0AORraVekJk6TYjDabRVXfRE2lCN1h6ZQRN1+InUbsCpKwoBZHh0dODN9JBCUffItXxEavTQkUtnfTVAplCWL3JISz29h4NjotnuSsQKJCk8dF+kJR6RARjrqFVmfPnj3ZbK8cIJ0msd6jgHPGtfVTQ8VLmlvh4mct9sobRmPic0DyDQQnx/NlfYUgyz59+oScsH379pAwXABD32nTpoUHIToESeI5mnbE/UqDdyLcafEBf2MCqgC7NwxIbMREJQ0g4D4sfJwnD+AmRrII05cfMWJE+L1169bQr+fip06dGp4oJ83lmYd5wj/EmMa4TaHivo4EeCguYZBnkB5g2aWA69OIEnUHOaGysjIYMGBAMGnSpODYsWPZwCpFmm4lNq+4gSLQA7jcX8DwtjEyRC8wjabnXEx9kfWnTJkSJkAo90xpJVV+FmcVNeYAF5zWngS4C4O91MBxmAv8blLEpbjI5sz9MTdAhcgkCT1RO8mZkAjfiYpTEvStAS53Uw1vAiUGgZ3GpuQEYvoiBqlIan7kSDHnTwJQFNiPu0+5VxCVYhcZIjNrdXUDdp+Eq5AZ3Gkg8QAyVZRZIk4Tl4QAbF9cXJxNYZMAtAokgs4BrNxEpCtteXg7DDTMDKYNSuQdKsnJBek7HxewvxaosWxLYXtw+cJp18217wql4aKCfBNoEu0O5VU+PhctJ0YeXD4C6JQpyrlpSLTojpGGGN5YwNziChdIZLk4lvLcFJ9jMX3QdiImY9bmGQU+TRUL5CHITTRlgF8D9ouD1MfmLoEPl5xokIumZ2cfgMpHt47IW9N64Hsh7wQYYjyIugWuF5fCqYncXRd5vPMWyizzvhi/32+nvG0dZc9vR6fZOu0md5e+uC408FvKSIOZwXlGvxPv95izA2Vtvg1xKFWARI+vMX66HUhpQQb643uW1bSjuTWyw2SBvDrBvjFic1eGGlz5esq3ko9uSIlBRqPuFcCv8F4WIcN12nVaBd0SaYwI6PDDImR11JkqgHcPmQssjxIn6bUshygDFJUTxPMpHk+jfjPgupgdnYV2R/g7xSjtpah8RJBewhwf0gGK6XI92u4wXFEU40afJ4DN4h5LcAd+40HI3JgJecuT0c062W0i2hQJUTcxan3/CMW1PF2K6bbA+Daz4xRs1D3Br1Cm0OihKCqizW78/nXAF/G5TXrEcVzaNMH6CyMswqsAHqDyDLEyou8lwOXnKF8DjI6KjV3KzMBiXkDH8ij/H214J5A596ekrZ3F0zXlWeL7+P5eUrNo3/QwC15uxthuzidy7DzKRwEDaAViiDgKbTbz7CJnzo0bN7pIfIiid8SuPwn25o3QCmpnyjlZkyxPP8EomCJzrGb7GJMx7tNsq4MT2xMUYaiErZOluTzKsnz3gwCeCZyVRZJfYplNEokEjwrPtxlxjeYAk+F1F74VAzPxQRNYYdtpOUvWs8J1sGhBJMNsb7igN8plJs1eSmLIhLKE4rvaCX27gOhLpLOsIzJ7qn/i+wZzcvSOZ23/du8TZjwV8zHIXoP4R3ifBxiFz1dcVpa3aPntPE+c6TmIWE9EtcMmAcPdWAhYhAXxcLOQi9L1WhD1Sc8p1d2oL7XGiRKp8F4A2i8K/nfI+y/gsTDJ/YC/8+AD5Uh04KHiGl+cIFPnBDDrPMjwRGkLXyxO4VGbfQWnDH2v0bVWE3C9QOXlepbgjEfIJQI6XDG3z5ahD9cw2pS78ipB85wyScNTvsVzlzzhL8/jRrnmVjfFJK/m3m4nj9vbgQTguT8XZTjsm672R5uJKEaQmBI/c58gyus8ZDagLpEVSJBIyHp4jn++xqPV71OgQgJYEWOtZ/haxRtKmWOBu8xdBLftWltsY84zE6WIEy/eIOWL+BaayMx+KHtL7EAkqdNDLiEXmEMUHniedtJqg9HmZtfvt26vNi0BdG3Ft3g8ZOf7PAu59TxtzivLNIekyi+wD1i8CuUiD9FXAa8C+/xS3JPmZnomyc7H+fb4/Se0bk41Fel621r4cgVxbq91V4jVqwB7HTe2M7jgB+QWHavZkDRPmZcASoZEmBx6i75bGjPcMdL4/VKGFAGWZkGzPG0XAbdL9A81G5LOmUnC9hHKJeO7dcUMjblSl12867ElFTtaGl20xvvLGPdVz/8TVuU7y0x1PG7vtNg24oz9Uo/Z412++VFWI7Fcog9tu9Lm6gvRmIPv9x1xmQAu6RDkXtbOtlGEmpgD5Nvnyc0dcv0EE6cfdi1HmhMf9wDF3k3gtRvEedhxjpgfqPb9PU9iEJHnyOUA7bQUXh6kq/D7l2iTjWv7XOD530BDr8jIrus+srXjt4MzumJMHuTsBa63YKE1+RR5lBjEikCCnWKWiHdzOgKO+nRIBAF88za/IFmJ3eMZov4CYxGBabcpGL8EYx+SeMXJeRwHNsV/h+vdxeuhEpN3ZyNY78Gm2fknJxVGhyjixPiQvVkNzT1elD9Py/aTAL64Hb9vcYmC9zfdXdT/C1LeGbg4rnBaAihDFJH12W5ulfNCNe/xTsP3bp8ikzJs5BF+5PNfAQYAPaseTdsEcaYAAAAASUVORK5CYII="}),computed:{iconSnowWidth(){return 2*(Math.floor(this.iconSize/24)||1)},contentdownText(){return this.contentText.contentdown||Vp("uni-load-more.contentdown")},contentrefreshText(){return this.contentText.contentrefresh||Vp("uni-load-more.contentrefresh")},contentnomoreText(){return this.contentText.contentnomore||Vp("uni-load-more.contentnomore")}},mounted(){var e=getCurrentPages(),t=e[e.length-1].$getAppWebview();t.addEventListener("hide",(()=>{this.webviewHide=!0})),t.addEventListener("show",(()=>{this.webviewHide=!1}))},methods:{onClick(){this.$emit("clickLoadMore",{detail:{status:this.status}})}}},[["render",function(t,i,s,n,a,r){return e.openBlock(),e.createElementBlock("view",{class:"uni-load-more",onClick:i[0]||(i[0]=(...e)=>r.onClick&&r.onClick(...e))},[!a.webviewHide&&("circle"===s.iconType||"auto"===s.iconType&&"android"===a.platform)&&"loading"===s.status&&s.showIcon?(e.openBlock(),e.createElementBlock("view",{key:0,style:e.normalizeStyle({width:s.iconSize+"px",height:s.iconSize+"px"}),class:"uni-load-more__img uni-load-more__img--android-MP"},[e.createElementVNode("view",{class:"uni-load-more__img-icon",style:e.normalizeStyle({borderTopColor:s.color,borderTopWidth:s.iconSize/12})},null,4),e.createElementVNode("view",{class:"uni-load-more__img-icon",style:e.normalizeStyle({borderTopColor:s.color,borderTopWidth:s.iconSize/12})},null,4),e.createElementVNode("view",{class:"uni-load-more__img-icon",style:e.normalizeStyle({borderTopColor:s.color,borderTopWidth:s.iconSize/12})},null,4)],4)):!a.webviewHide&&"loading"===s.status&&s.showIcon?(e.openBlock(),e.createElementBlock("view",{key:1,style:e.normalizeStyle({width:s.iconSize+"px",height:s.iconSize+"px"}),class:"uni-load-more__img uni-load-more__img--ios-H5"},[e.createElementVNode("image",{src:a.imgBase64,mode:"widthFix"},null,8,["src"])],4)):e.createCommentVNode("",!0),s.showText?(e.openBlock(),e.createElementBlock("text",{key:2,class:"uni-load-more__text",style:e.normalizeStyle({color:s.color})},e.toDisplayString("more"===s.status?r.contentdownText:"loading"===s.status?r.contentrefreshText:r.contentnomoreText),5)):e.createCommentVNode("",!0)])}],["__scopeId","data-v-090e4ba3"]]),Ap={name:"uniDataChecklist",mixins:[Cp.mixinDatacom||{}],emits:["input","update:modelValue","change"],props:{mode:{type:String,default:"default"},multiple:{type:Boolean,default:!1},value:{type:[Array,String,Number],default:()=>""},modelValue:{type:[Array,String,Number],default:()=>""},localdata:{type:Array,default:()=>[]},min:{type:[Number,String],default:""},max:{type:[Number,String],default:""},wrap:{type:Boolean,default:!1},icon:{type:String,default:"left"},selectedColor:{type:String,default:""},selectedTextColor:{type:String,default:""},emptyText:{type:String,default:"暂无数据"},disabled:{type:Boolean,default:!1},map:{type:Object,default:()=>({text:"text",value:"value"})}},watch:{localdata:{handler(e){this.range=e,this.dataList=this.getDataList(this.getSelectedValue(e))},deep:!0},mixinDatacomResData(e){this.range=e,this.dataList=this.getDataList(this.getSelectedValue(e))},value(e){this.dataList=this.getDataList(e)},modelValue(e){this.dataList=this.getDataList(e)}},data:()=>({dataList:[],range:[],contentText:{contentdown:"查看更多",contentrefresh:"加载中",contentnomore:"没有更多"},isLocal:!0,styles:{selectedColor:"#2979ff",selectedTextColor:"#666"},isTop:0}),computed:{dataValue(){return""===this.value?this.modelValue:(this.modelValue,this.value)}},created(){this.localdata&&0!==this.localdata.length?(this.isLocal=!0,this.range=this.localdata,this.dataList=this.getDataList(this.getSelectedValue(this.range))):this.collection&&(this.isLocal=!1,this.loadData())},methods:{loadData(){this.mixinDatacomGet().then((e=>{this.mixinDatacomResData=e.result.data,0===this.mixinDatacomResData.length?(this.isLocal=!1,this.mixinDatacomErrorMessage=this.emptyText):this.isLocal=!0})).catch((e=>{this.mixinDatacomErrorMessage=e.message}))},getForm(e="uniForms"){let t=this.$parent,i=t.$options.name;for(;i!==e;){if(t=t.$parent,!t)return!1;i=t.$options.name}return t},change(e){const t=e.detail.value;let i={value:[],data:[]};if(this.multiple)this.range.forEach((e=>{t.includes(e[this.map.value]+"")&&(i.value.push(e[this.map.value]),i.data.push(e))}));else{const e=this.range.find((e=>e[this.map.value]+""===t));e&&(i={value:e[this.map.value],data:e})}this.$emit("input",i.value),this.$emit("update:modelValue",i.value),this.$emit("change",{detail:i}),this.multiple?this.dataList=this.getDataList(i.value,!0):this.dataList=this.getDataList(i.value)},getDataList(e){let t=JSON.parse(JSON.stringify(this.range)),i=[];return this.multiple?Array.isArray(e)||(e=[]):Array.isArray(e)&&e.length&&(e=e[0]),t.forEach(((t,s)=>{if(t.disabled=t.disable||t.disabled||!1,this.multiple)if(e.length>0){let i=e.find((e=>e===t[this.map.value]));t.selected=void 0!==i}else t.selected=!1;else t.selected=e===t[this.map.value];i.push(t)})),this.setRange(i)},setRange(e){let t=e.filter((e=>e.selected)),i=Number(this.min)||0,s=Number(this.max)||"";return e.forEach(((n,a)=>{if(this.multiple){if(t.length<=i){void 0!==t.find((e=>e[this.map.value]===n[this.map.value]))&&(n.disabled=!0)}if(t.length>=s&&""!==s){void 0===t.find((e=>e[this.map.value]===n[this.map.value]))&&(n.disabled=!0)}}this.setStyles(n,a),e[a]=n})),e},setStyles(e,t){e.styleBackgroud=this.setStyleBackgroud(e),e.styleIcon=this.setStyleIcon(e),e.styleIconText=this.setStyleIconText(e),e.styleRightIcon=this.setStyleRightIcon(e)},getSelectedValue(e){if(!this.multiple)return this.dataValue;let t=[];return e.forEach((e=>{e.selected&&t.push(e[this.map.value])})),this.dataValue.length>0?this.dataValue:t},setStyleBackgroud(e){let t={},i=this.selectedColor?this.selectedColor:"#2979ff";this.selectedColor&&("list"!==this.mode&&(t["border-color"]=e.selected?i:"#DCDFE6"),"tag"===this.mode&&(t["background-color"]=e.selected?i:"#f5f5f5"));let s="";for(let n in t)s+=`${n}:${t[n]};`;return s},setStyleIcon(e){let t={},i="";if(this.selectedColor){let i=this.selectedColor?this.selectedColor:"#2979ff";t["background-color"]=e.selected?i:"#fff",t["border-color"]=e.selected?i:"#DCDFE6",!e.selected&&e.disabled&&(t["background-color"]="#F2F6FC",t["border-color"]=e.selected?i:"#DCDFE6")}for(let s in t)i+=`${s}:${t[s]};`;return i},setStyleIconText(e){let t={},i="";if(this.selectedColor){let i=this.selectedColor?this.selectedColor:"#2979ff";"tag"===this.mode?t.color=e.selected?this.selectedTextColor?this.selectedTextColor:"#fff":"#666":t.color=e.selected?this.selectedTextColor?this.selectedTextColor:i:"#666",!e.selected&&e.disabled&&(t.color="#999")}for(let s in t)i+=`${s}:${t[s]};`;return i},setStyleRightIcon(e){let t={},i="";"list"===this.mode&&(t["border-color"]=e.selected?this.styles.selectedColor:"#DCDFE6");for(let s in t)i+=`${s}:${t[s]};`;return i}}};const _p=X(Ap,[["render",function(t,i,n,a,r,o){const l=s(e.resolveDynamicComponent("uni-load-more"),Tp);return e.openBlock(),e.createElementBlock("view",{class:"uni-data-checklist",style:e.normalizeStyle({"margin-top":r.isTop+"px"})},[r.isLocal?(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[n.multiple?(e.openBlock(),e.createElementBlock("checkbox-group",{key:0,class:e.normalizeClass(["checklist-group",{"is-list":"list"===n.mode||n.wrap}]),onChange:i[0]||(i[0]=(...e)=>o.change&&o.change(...e))},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.dataList,((t,i)=>(e.openBlock(),e.createElementBlock("label",{class:e.normalizeClass(["checklist-box",["is--"+n.mode,t.selected?"is-checked":"",n.disabled||t.disabled?"is-disable":"",0!==i&&"list"===n.mode?"is-list-border":""]]),style:e.normalizeStyle(t.styleBackgroud),key:i},[e.createElementVNode("checkbox",{class:"hidden",hidden:"",disabled:n.disabled||!!t.disabled,value:t[n.map.value]+"",checked:t.selected},null,8,["disabled","value","checked"]),"tag"!==n.mode&&"list"!==n.mode||"list"===n.mode&&"left"===n.icon?(e.openBlock(),e.createElementBlock("view",{key:0,class:"checkbox__inner",style:e.normalizeStyle(t.styleIcon)},[e.createElementVNode("view",{class:"checkbox__inner-icon"})],4)):e.createCommentVNode("",!0),e.createElementVNode("view",{class:e.normalizeClass(["checklist-content",{"list-content":"list"===n.mode&&"left"===n.icon}])},[e.createElementVNode("text",{class:"checklist-text",style:e.normalizeStyle(t.styleIconText)},e.toDisplayString(t[n.map.text]),5),"list"===n.mode&&"right"===n.icon?(e.openBlock(),e.createElementBlock("view",{key:0,class:"checkobx__list",style:e.normalizeStyle(t.styleBackgroud)},null,4)):e.createCommentVNode("",!0)],2)],6)))),128))],34)):(e.openBlock(),e.createElementBlock("radio-group",{key:1,class:e.normalizeClass(["checklist-group",{"is-list":"list"===n.mode,"is-wrap":n.wrap}]),onChange:i[1]||(i[1]=(...e)=>o.change&&o.change(...e))},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.dataList,((t,i)=>(e.openBlock(),e.createElementBlock("label",{class:e.normalizeClass(["checklist-box",["is--"+n.mode,t.selected?"is-checked":"",n.disabled||t.disabled?"is-disable":"",0!==i&&"list"===n.mode?"is-list-border":""]]),style:e.normalizeStyle(t.styleBackgroud),key:i},[e.createElementVNode("radio",{class:"hidden",hidden:"",disabled:n.disabled||t.disabled,value:t[n.map.value]+"",checked:t.selected},null,8,["disabled","value","checked"]),"tag"!==n.mode&&"list"!==n.mode||"list"===n.mode&&"left"===n.icon?(e.openBlock(),e.createElementBlock("view",{key:0,class:"radio__inner",style:e.normalizeStyle(t.styleBackgroud)},[e.createElementVNode("view",{class:"radio__inner-icon",style:e.normalizeStyle(t.styleIcon)},null,4)],4)):e.createCommentVNode("",!0),e.createElementVNode("view",{class:e.normalizeClass(["checklist-content",{"list-content":"list"===n.mode&&"left"===n.icon}])},[e.createElementVNode("text",{class:"checklist-text",style:e.normalizeStyle(t.styleIconText)},e.toDisplayString(t[n.map.text]),5),"list"===n.mode&&"right"===n.icon?(e.openBlock(),e.createElementBlock("view",{key:0,style:e.normalizeStyle(t.styleRightIcon),class:"checkobx__list"},null,4)):e.createCommentVNode("",!0)],2)],6)))),128))],34))],64)):(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-data-loading"},[t.mixinDatacomErrorMessage?(e.openBlock(),e.createElementBlock("text",{key:1},e.toDisplayString(t.mixinDatacomErrorMessage),1)):(e.openBlock(),e.createBlock(l,{key:0,status:"loading",iconType:"snow",iconSize:18,"content-text":r.contentText},null,8,["content-text"]))]))],4)}],["__scopeId","data-v-8d935d94"]]);const Ip=X({name:"uniCollapseItem",props:{title:{type:String,default:""},name:{type:[Number,String],default:""},disabled:{type:Boolean,default:!1},showAnimation:{type:Boolean,default:!1},open:{type:Boolean,default:!1},thumb:{type:String,default:""},titleBorder:{type:String,default:"auto"},border:{type:Boolean,default:!0},showArrow:{type:Boolean,default:!0}},data:()=>({isOpen:!1,isheight:null,height:0,elId:`Uni_${Math.ceil(1e6*Math.random()).toString(36)}`,nameSync:0}),watch:{open(e){this.isOpen=e,this.onClick(e,"init")}},updated(e){this.$nextTick((()=>{this.init(!0)}))},created(){this.collapse=this.getCollapse(),this.oldHeight=0,this.onClick(this.open,"init")},unmounted(){this.__isUnmounted=!0,this.uninstall()},mounted(){this.collapse&&(""!==this.name?this.nameSync=this.name:this.nameSync=this.collapse.childrens.length+"",-1===this.collapse.names.indexOf(this.nameSync)?this.collapse.names.push(this.nameSync):i("warn","at uni_modules/uni-collapse/components/uni-collapse-item/uni-collapse-item.vue:154",`name 值 ${this.nameSync} 重复`),-1===this.collapse.childrens.indexOf(this)&&this.collapse.childrens.push(this),this.init())},methods:{init(e){this.getCollapseHeight(e)},uninstall(){this.collapse&&(this.collapse.childrens.forEach(((e,t)=>{e===this&&this.collapse.childrens.splice(t,1)})),this.collapse.names.forEach(((e,t)=>{e===this.nameSync&&this.collapse.names.splice(t,1)})))},onClick(e,t){this.disabled||(this.isOpen=e,this.isOpen&&this.collapse&&this.collapse.setAccordion(this),"init"!==t&&this.collapse.onChange(e,this))},getCollapseHeight(e,t=0){uni.createSelectorQuery().in(this).select(`#${this.elId}`).fields({size:!0},(i=>{if(!(t>=10)){if(!i)return t++,void this.getCollapseHeight(!1,t);this.height=i.height,this.isheight=!0,e||this.onClick(this.isOpen,"init")}})).exec()},getNvueHwight(e){dom.getComponentRect(this.$refs["collapse--hook"],(t=>{if(t&&t.result&&t.size){if(this.height=t.size.height,this.isheight=!0,e)return;this.onClick(this.open,"init")}}))},getCollapse(e="uniCollapse"){let t=this.$parent,i=t.$options.name;for(;i!==e;){if(t=t.$parent,!t)return!1;i=t.$options.name}return t}}},[["render",function(t,i,n,a,r,o){const l=s(e.resolveDynamicComponent("uni-icons"),Q);return e.openBlock(),e.createElementBlock("view",{class:"uni-collapse-item"},[e.createElementVNode("view",{onClick:i[0]||(i[0]=e=>o.onClick(!r.isOpen)),class:e.normalizeClass(["uni-collapse-item__title",{"is-open":r.isOpen&&"auto"===n.titleBorder,"uni-collapse-item-border":"none"!==n.titleBorder}])},[e.createElementVNode("view",{class:"uni-collapse-item__title-wrap"},[e.renderSlot(t.$slots,"title",{},(()=>[e.createElementVNode("view",{class:e.normalizeClass(["uni-collapse-item__title-box",{"is-disabled":n.disabled}])},[n.thumb?(e.openBlock(),e.createElementBlock("image",{key:0,src:n.thumb,class:"uni-collapse-item__title-img"},null,8,["src"])):e.createCommentVNode("",!0),e.createElementVNode("text",{class:"uni-collapse-item__title-text"},e.toDisplayString(n.title),1)],2)]),!0)]),n.showArrow?(e.openBlock(),e.createElementBlock("view",{key:0,class:e.normalizeClass([{"uni-collapse-item__title-arrow-active":r.isOpen,"uni-collapse-item--animation":!0===n.showAnimation},"uni-collapse-item__title-arrow"])},[e.createVNode(l,{color:n.disabled?"#ddd":"#bbb",size:"14",type:"bottom"},null,8,["color"])],2)):e.createCommentVNode("",!0)],2),e.createElementVNode("view",{class:e.normalizeClass(["uni-collapse-item__wrap",{"is--transition":n.showAnimation}]),style:e.normalizeStyle({height:(r.isOpen?r.height:0)+"px"})},[e.createElementVNode("view",{id:r.elId,ref:"collapse--hook",class:e.normalizeClass(["uni-collapse-item__wrap-content",{open:r.isheight,"uni-collapse-item--border":n.border&&r.isOpen}])},[e.renderSlot(t.$slots,"default",{},void 0,!0)],10,["id"])],6)])}],["__scopeId","data-v-a059c6b0"]]);const Dp=X({name:"uniCollapse",emits:["change","activeItem","input","update:modelValue"],props:{value:{type:[String,Array],default:""},modelValue:{type:[String,Array],default:""},accordion:{type:[Boolean,String],default:!1}},data:()=>({}),computed:{dataValue(){let e="string"==typeof this.value&&""===this.value||Array.isArray(this.value)&&0===this.value.length;"string"==typeof this.modelValue&&""===this.modelValue||Array.isArray(this.modelValue)&&this.modelValue.length;return e?this.modelValue:this.value}},watch:{dataValue(e){this.setOpen(e)}},created(){this.childrens=[],this.names=[]},mounted(){this.$nextTick((()=>{this.setOpen(this.dataValue)}))},methods:{setOpen(e){let t="string"==typeof e,s=Array.isArray(e);this.childrens.forEach(((n,a)=>{if(t&&e===n.nameSync){if(!this.accordion)return void i("warn","at uni_modules/uni-collapse/components/uni-collapse/uni-collapse.vue:75","accordion 属性为 false ,v-model 类型应该为 array");n.isOpen=!0}s&&e.forEach((e=>{if(e===n.nameSync){if(this.accordion)return void i("warn","at uni_modules/uni-collapse/components/uni-collapse/uni-collapse.vue:85","accordion 属性为 true ,v-model 类型应该为 string");n.isOpen=!0}}))})),this.emit(e)},setAccordion(e){this.accordion&&this.childrens.forEach(((t,i)=>{e!==t&&(t.isOpen=!1)}))},resize(){this.childrens.forEach(((e,t)=>{e.getCollapseHeight()}))},onChange(e,t){let i=[];this.accordion?i=e?t.nameSync:"":this.childrens.forEach(((e,t)=>{e.isOpen&&i.push(e.nameSync)})),this.$emit("change",i),this.emit(i)},emit(e){this.$emit("input",e),this.$emit("update:modelValue",e)}}},[["render",function(t,i,s,n,a,r){return e.openBlock(),e.createElementBlock("view",{class:"uni-collapse"},[e.renderSlot(t.$slots,"default",{},void 0,!0)])}],["__scopeId","data-v-b8d7fc3e"]]),Bp=X({__name:"career",props:{modelValue:Object},setup(t){const i=e.ref(["0"]),n=e.ref([{text:"婚姻关系",value:1,modelValue:[],children:[{text:"婚姻关系1",value:"1"},{text:"婚姻关系2",value:"2"},{text:"婚姻关系3",value:"3"},{text:"婚姻关系4",value:"4"},{text:"婚姻关系5",value:"5"}]},{text:"人际关系",value:"rjgx",modelValue:[],children:[{text:"人际关系1",value:"1"},{text:"人际关系2",value:"2"},{text:"人际关系3",value:"3"},{text:"人际关系4",value:"4"},{text:"人际关系5",value:"5"}]},{text:"人际关系",value:"rjgx",modelValue:[],children:[{text:"人际关系1",value:"1"},{text:"人际关系2",value:"2"},{text:"人际关系3",value:"3"},{text:"人际关系4",value:"4"},{text:"人际关系5",value:"5"}]}]);e.ref([]);const a=e.ref([{text:"人际关系1",value:"1"},{text:"人际关系2",value:"2"},{text:"人际关系3",value:"3"},{text:"人际关系4",value:"4"},{text:"人际关系5",value:"5"}]);return(r,o)=>{const l=s(e.resolveDynamicComponent("uni-data-checkbox"),_p),c=s(e.resolveDynamicComponent("uni-collapse-item"),Ip),d=s(e.resolveDynamicComponent("uni-collapse"),Dp);return e.openBlock(),e.createElementBlock("view",{class:"career-box"},[e.createElementVNode("view",{class:"career-content-box"},[e.createElementVNode("view",{class:"career-content"},[e.createElementVNode("view",{class:"title"},"擅长方向"),e.createElementVNode("view",{class:"remark"},"专业信息展示在个人资料（多选）"),e.createElementVNode("view",{class:"career-collapse-box"},[e.createElementVNode("view",{class:"career-collapse-item"},[e.createVNode(d,{modelValue:i.value,"onUpdate:modelValue":o[0]||(o[0]=e=>i.value=e)},{default:e.withCtx((()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.value,((t,i)=>(e.openBlock(),e.createBlock(c,{border:!1,"title-border":"none",key:i},{title:e.withCtx((()=>[e.createElementVNode("view",{class:"collapse-item-title"},[e.createVNode(l,{multiple:"",localdata:[t],selectedColor:"#35CA95",selectedTextColor:"#212528"},null,8,["localdata"])])])),default:e.withCtx((()=>[e.createElementVNode("view",{class:"content"},[e.createVNode(l,{multiple:"",modelValue:t.modelValue,"onUpdate:modelValue":e=>t.modelValue=e,localdata:t.children,selectedColor:"#35CA95",selectedTextColor:"#212528"},null,8,["modelValue","onUpdate:modelValue","localdata"])])])),_:2},1024)))),128))])),_:1},8,["modelValue"])])])]),e.createElementVNode("view",{class:"career-content"},[e.createElementVNode("view",{class:"title"},"擅长疗法"),e.createElementVNode("view",{class:"remark"},"专业信息展示在个人资料（多选）"),e.createElementVNode("view",{class:"career-collapse-box"},[e.createElementVNode("view",{class:"career-collapse-item"},[e.createElementVNode("view",{class:"uni-collapse-item__wrap"},[e.createElementVNode("view",{class:"content"},[e.createVNode(l,{multiple:"",modelValue:t.modelValue.therapies,"onUpdate:modelValue":o[1]||(o[1]=e=>t.modelValue.therapies=e),localdata:a.value,selectedColor:"#35CA95",selectedTextColor:"#212528"},null,8,["modelValue","localdata"])])])])])])])])}}},[["__scopeId","data-v-7d953a56"]]),Rp={name:"u-upload",emits:["update:file-list","on-oversize","on-list-change","on-preview","on-remove","on-success","on-change","on-error","on-progress","on-uploaded","on-choose-complete","on-choose-fail"],props:{showUploadList:{type:Boolean,default:!0},action:{type:String,default:""},maxCount:{type:[String,Number],default:52},showProgress:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},imageMode:{type:String,default:"aspectFill"},header:{type:Object,default:()=>({})},formData:{type:Object,default:()=>({})},name:{type:String,default:"file"},sizeType:{type:Array,default:()=>["original","compressed"]},sourceType:{type:Array,default:()=>["album","camera"]},previewFullImage:{type:Boolean,default:!0},multiple:{type:Boolean,default:!0},deletable:{type:Boolean,default:!0},maxSize:{type:[String,Number],default:Number.MAX_VALUE},fileList:{type:Array,default:()=>[]},uploadText:{type:String,default:"选择图片"},autoUpload:{type:Boolean,default:!0},showTips:{type:Boolean,default:!0},customBtn:{type:Boolean,default:!1},width:{type:[String,Number],default:200},height:{type:[String,Number],default:200},delBgColor:{type:String,default:"#fa3534"},delColor:{type:String,default:"#ffffff"},delIcon:{type:String,default:"close"},successIcon:{type:String,default:"checkbox-mark"},successColor:{type:String,default:"#ffffff"},toJson:{type:Boolean,default:!0},beforeUpload:{type:Function,default:null},beforeRemove:{type:Function,default:null},limitType:{type:Array,default:()=>["png","jpg","jpeg","webp","gif","image"]},index:{type:[Number,String],default:""}},mounted(){},data:()=>({lists:[],isInCount:!0,uploading:!1}),watch:{fileList:{immediate:!0,handler(e){let t=JSON.parse(JSON.stringify(this.lists));e.map((e=>{t.some((t=>t.url==e.url))||t.push({url:e.url,error:!1,progress:100})})),this.lists=JSON.parse(JSON.stringify(t))}},lists:{deep:!0,handler(e){this.$emit("update:file-list",e),this.$emit("on-list-change",e,this.index)}}},methods:{clear(){this.lists=[]},reUpload(){this.uploadFile()},selectFile(){let e=this;if(e.disabled)return;const{name:t="",maxCount:i,multiple:s,maxSize:n,sizeType:a,camera:r,compressed:o,maxDuration:l,sourceType:c}=e;let d=null,u=JSON.parse(JSON.stringify(e.lists));const m=i-u.length;d=new Promise(((e,t)=>{uni.chooseImage({count:s?m>9?9:m:1,sourceType:c,sizeType:a,success:e,fail:t})})),d.then((t=>{let a=e.lists.length;t.tempFiles.map(((t,a)=>{if(e.checkFileExt(t)&&(s||!(a>=1)))if(t.size>n)e.$emit("on-oversize",t,e.lists,e.index),e.showToast("超出允许的文件大小");else{if(i<=u.length)return e.$emit("on-exceed",t,e.lists,e.index),void e.showToast("超出最大允许的文件个数");u.push({url:t.path,progress:0,error:!1,file:t})}})),this.deepClone(u,e.lists),e.$emit("on-choose-complete",e.lists,e.index),e.autoUpload&&e.uploadFile(a)})).catch((t=>{e.$emit("on-choose-fail",t)}))},showToast(e,t=!1){(this.showTips||t)&&uni.showToast({title:e,icon:"none"})},upload(){this.uploadFile()},retry(e){this.lists[e].progress=0,this.lists[e].error=!1,this.lists[e].response=null,uni.showLoading({title:"重新上传"}),this.uploadFile(e)},async uploadFile(e=0){if(this.disabled)return;if(this.uploading)return;if(e>=this.lists.length)return void this.$emit("on-uploaded",this.lists,this.index);if(100==this.lists[e].progress)return void(0==this.autoUpload&&this.uploadFile(e+1));if(this.beforeUpload&&"function"==typeof this.beforeUpload){let t=this.beforeUpload.bind(this.$u.$parent.call(this))(e,this.lists);if(t&&"function"==typeof t.then)await t.then((e=>{})).catch((t=>this.uploadFile(e+1)));else if(!1===t)return this.uploadFile(e+1)}if(!this.action)return void this.showToast("请配置上传地址",!0);this.lists[e].error=!1,this.uploading=!0;const t=uni.uploadFile({url:this.action,filePath:this.lists[e].url,name:this.name,formData:this.formData,header:this.header,success:t=>{let i=this.toJson&&this.$u.test.jsonString(t.data)?JSON.parse(t.data):t.data;[200,201,204].includes(t.statusCode)?(this.lists[e].response=i,this.lists[e].progress=100,this.lists[e].error=!1,this.$emit("on-success",i,e,this.lists,this.index)):this.uploadError(e,i)},fail:t=>{this.uploadError(e,t)},complete:t=>{uni.hideLoading(),this.uploading=!1,this.uploadFile(e+1),this.$emit("on-change",t,e,this.lists,this.index)}});t.onProgressUpdate((t=>{t.progress>0&&(this.lists[e].progress=t.progress,this.$emit("on-progress",t,e,this.lists,this.index))}))},uploadError(e,t){this.lists[e].progress=0,this.lists[e].error=!0,this.lists[e].response=null,this.$emit("on-error",t,e,this.lists,this.index),this.showToast("上传失败，请重试")},deleteItem(e){uni.showModal({title:"提示",content:"您确定要删除此项吗？",success:async t=>{if(t.confirm)if(this.beforeRemove&&"function"==typeof this.beforeRemove){let t=this.beforeRemove.bind(this.$u.$parent.call(this))(e,this.lists);t&&"function"==typeof t.then?await t.then((t=>{this.handlerDeleteItem(e)})).catch((e=>{this.showToast("已终止移除")})):!1===t?this.showToast("已终止移除"):this.handlerDeleteItem(e)}else this.handlerDeleteItem(e)}})},handlerDeleteItem(e){this.lists[e].progress<100&&this.lists[e].progress>0&&void 0!==this.lists[e].uploadTask&&this.lists[e].uploadTask.abort(),this.lists.splice(e,1),this.$forceUpdate(),this.$emit("on-remove",e,this.lists,this.index)},remove(e){e>=0&&e<this.lists.length&&(this.lists.splice(e,1),this.$emit("on-list-change",this.lists,this.index))},doPreviewImage(e,t){if(!this.previewFullImage)return void this.$emit("on-preview",e,this.lists,this.index);const i=this.lists.map((e=>e.url||e.path));uni.previewImage({urls:i,current:e,success:()=>{this.$emit("on-preview",e,this.lists,this.index)},fail:()=>{uni.showToast({title:"预览图片失败",icon:"none"})}})},checkFileExt(e){let t=!1,i="";return i=e.path.replace(/.+\./,"").toLowerCase(),t=this.limitType.some((e=>e.toLowerCase()===i)),t||this.showToast(`不允许选择${i}格式的文件`),t},deepClone(e,t){for(let i in e){const s=e[i];Array.isArray(s)?(t[i]=[],this.deepClone(s,t[i])):null!==s&&"object"==typeof s?(t[i]={},this.deepClone(s,t[i])):t[i]=s}}}};const Mp=X(Rp,[["render",function(t,i,n,a,r,o){const l=s(e.resolveDynamicComponent("u-icon"),dc),c=s(e.resolveDynamicComponent("u-line-progress"),Kc);return n.disabled?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("view",{key:0,class:"u-upload"},[n.showUploadList?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(r.lists,((i,s)=>(e.openBlock(),e.createElementBlock("view",{class:"u-list-item u-preview-wrap",key:s,style:e.normalizeStyle({width:t.$u.addUnit(n.width),height:t.$u.addUnit(n.height)})},[n.deletable?(e.openBlock(),e.createElementBlock("view",{key:0,class:"u-delete-icon",onClick:e.withModifiers((e=>o.deleteItem(s)),["stop"]),style:e.normalizeStyle({background:n.delBgColor})},[e.createVNode(l,{class:"u-icon",name:n.delIcon,size:"20",color:n.delColor},null,8,["name","color"])],12,["onClick"])):e.createCommentVNode("",!0),n.showProgress&&i.progress>0&&100!=i.progress&&!i.error?(e.openBlock(),e.createBlock(c,{key:1,"show-percent":!1,height:"16",class:"u-progress",percent:i.progress},null,8,["percent"])):e.createCommentVNode("",!0),i.error?(e.openBlock(),e.createElementBlock("view",{key:2,onClick:e.withModifiers((e=>o.retry(s)),["stop"]),class:"u-error-btn"},"点击重试",8,["onClick"])):e.createCommentVNode("",!0),i.isImage?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("image",{key:3,onClick:e.withModifiers((e=>o.doPreviewImage(i.url||i.path,s)),["stop"]),class:"u-preview-image",src:i.url||i.path,mode:n.imageMode},null,8,["onClick","src","mode"]))],4)))),128)):e.createCommentVNode("",!0),e.renderSlot(t.$slots,"file",{file:r.lists},void 0,!0),n.maxCount>r.lists.length?(e.openBlock(),e.createElementBlock("view",{key:1,style:{display:"inline-block"},onClick:i[0]||(i[0]=(...e)=>o.selectFile&&o.selectFile(...e))},[e.renderSlot(t.$slots,"addBtn",{},void 0,!0),n.customBtn?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("view",{key:0,class:"u-list-item u-add-wrap","hover-class":"u-add-wrap__hover","hover-stay-time":"150",style:e.normalizeStyle({width:t.$u.addUnit(n.width),height:t.$u.addUnit(n.height)})},[e.createVNode(l,{name:"plus",class:"u-add-btn",size:"40"}),e.createElementVNode("view",{class:"u-add-tips"},e.toDisplayString(n.uploadText),1)],4))])):e.createCommentVNode("",!0)]))}],["__scopeId","data-v-4547c048"]]),Pp="/static/auth/remark.png",Op="/static/auth/edit.png",Lp={__name:"certificate",props:{consultantType:String,modelValue:Object},emits:["commited"],setup(t,{expose:n,emit:a}){const r=e.ref([]);let o=e.reactive([{name:"",date:"",photoList:[],authority:"",number:""}]);const l=e.ref("/api/common/upload"),c=e.ref([]),d=e.ref([]),m=(e,t)=>{i("log","at pages/auth/components/certificate.vue:354","图片已被移除")},h=(e,t)=>{},p=uni.getStorageSync("token"),g=e.ref({token:p}),y=a,f=t;o=f.modelValue.certificateList,n({submit:async()=>{let e=!1;if(i("log","at pages/auth/components/certificate.vue:374",o),o.forEach((t=>{if(i("log","at pages/auth/components/certificate.vue:376",t),0==t.photoList.length)return uni.showToast({title:"您还有证件照片没有上传",icon:"none"}),void(e=!0)})),i("log","at pages/auth/components/certificate.vue:386",e),e)return;o.forEach((e=>{e.photos=JSON.stringify(e.photoList)}));let t={...f.modelValue,certificateList:o,educationList:c.value,careerList:d.value,consultantType:f.consultantType};0==(await((e,t={})=>_.post("/api/consultant/consultant/step3",e,t))(t)).code&&(uni.showToast({title:"提交成功"}),y("commited",""))}});const v=()=>{o.push({name:"",date:"",photoList:[],authority:"",number:""})},E=()=>{c.value.push({startDate:null,endDate:null,schoolName:null,idNumber:null,imgUrl:[]})},w=()=>{d.value.push({startDate:null,endDate:null,courseName:null,imgUrl:[]})};e.ref(["学历","工作经历","培训经历"]);return(t,n)=>{const a=s(e.resolveDynamicComponent("uni-easyinput"),$l),p=s(e.resolveDynamicComponent("uni-icons"),Q),y=s(e.resolveDynamicComponent("uni-datetime-picker"),Gc),f=s(e.resolveDynamicComponent("u-upload"),Mp);return e.openBlock(),e.createElementBlock("view",{class:"certificate-box"},[e.createElementVNode("view",{class:"certificate-content-box"},[e.createElementVNode("view",{class:"certificate-content"},[e.createElementVNode("view",{class:"title"},[e.createElementVNode("view",null,[e.createTextVNode(" 我的资质"),e.createElementVNode("text",{class:"require"},"(必填)")]),e.createElementVNode("view",{class:"tips"},[e.createElementVNode("image",{src:Pp,class:"img"}),e.createTextVNode("说明 ")])]),e.createElementVNode("view",{class:"remark"},"此项信息正式上线后会公开展示在个人资料"),e.createElementVNode("view",{class:"id-card-form-box"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(o),((s,n)=>(e.openBlock(),e.createElementBlock("view",{class:"id-card-form-content",key:n},[e.createElementVNode("view",{class:"form-item"},[e.createElementVNode("view",{class:"label require"},"证书名称"),e.createElementVNode("view",{class:e.normalizeClass(["content",t.value?"":"weight"])},[e.createVNode(a,{trim:"all",type:"text",placeholder:"请输入证书名称",inputBorder:!1,clearable:!1,style:{"text-align":"end"},modelValue:s.name,"onUpdate:modelValue":e=>s.name=e},null,8,["modelValue","onUpdate:modelValue"])],2)]),e.createElementVNode("view",{class:"form-item"},[e.createElementVNode("view",{class:"label require"},"发证机构"),e.createElementVNode("view",{class:e.normalizeClass(["content",t.value?"":"weight"])},[e.createVNode(a,{trim:"all",type:"text",placeholder:"请输入发证机构",inputBorder:!1,clearable:!1,style:{"text-align":"end"},modelValue:s.authority,"onUpdate:modelValue":e=>s.authority=e},null,8,["modelValue","onUpdate:modelValue"])],2)]),e.createElementVNode("view",{class:"form-item user-sign"},[e.createElementVNode("view",{class:"label require"},"证书编号"),e.createElementVNode("view",{class:"content-input",style:{width:"400rpx"}},[e.createVNode(a,{trim:"all",type:"text",placeholder:"请输入证书编号",inputBorder:!1,clearable:!1,modelValue:s.number,"onUpdate:modelValue":e=>s.number=e,style:{"text-align":"end"}},null,8,["modelValue","onUpdate:modelValue"])])]),e.createElementVNode("view",{class:"form-item user-sign"},[e.createElementVNode("view",{class:"label require"},"发证日期"),e.createElementVNode("view",{class:e.normalizeClass(["content",t.value?"":"weight"])},[e.createVNode(y,{onChange:e=>((e,t,s)=>{i("log","at pages/auth/components/certificate.vue:335",e,t),o[s].date=e})(e,s,n),type:"date","clear-icon":!1,modelValue:s.date,"onUpdate:modelValue":e=>s.date=e,onMaskClick:t.maskClick},{default:e.withCtx((()=>[e.createTextVNode(e.toDisplayString(""==s.date?"请选择":s.date),1),e.createVNode(p,{type:"right",size:"14",color:"rgba(0, 0, 0, 0.3)"})])),_:2},1032,["onChange","modelValue","onUpdate:modelValue","onMaskClick"])],2)]),e.createElementVNode("view",{class:"form-item user-introduction"},[e.createElementVNode("view",{class:"label require"},"证件照片"),e.createElementVNode("view",{class:"introduction-content"},[e.createVNode(f,{fileList:s.photoList,"before-upload":h,header:g.value,onOnSuccess:(e,t,s,a)=>((e,t,s,n,a)=>{i("log","at pages/auth/components/certificate.vue:421","上传成功"),i("log","at pages/auth/components/certificate.vue:422",e),i("log","at pages/auth/components/certificate.vue:423",a),i("log","at pages/auth/components/certificate.vue:424",s),i("log","at pages/auth/components/certificate.vue:425",n),o[a].photoList.push(e.data.url)})(e,0,s,a,n),onOnRemove:m,name:"file",action:l.value,multiple:"",maxCount:3},null,8,["fileList","header","onOnSuccess","action"])])]),e.createElementVNode("view",{class:"line-box"},[e.createElementVNode("view",{class:e.normalizeClass(["line",n>0?"line-delete":""])},null,2),n>0?(e.openBlock(),e.createElementBlock("view",{key:0,class:"delete-item",onClick:e=>(e=>{o.splice(e,1)})(n)},[e.createVNode(p,{type:"minus-filled",size:"30",color:"#FA5151"}),e.createTextVNode(" 移除 ")],8,["onClick"])):e.createCommentVNode("",!0)])])))),128)),e.createElementVNode("view",{class:"add-certificate-btn",onClick:v},[e.createElementVNode("view",{class:"btn"},[e.createVNode(p,{type:"plus-filled",size:"18",color:"rgba(0,0,0,.85)"}),e.createTextVNode("增加一项")])])])]),e.createElementVNode("view",{class:"certificate-content"},[e.createElementVNode("view",{class:"title"},[e.createElementVNode("view",null,[e.createTextVNode(" 学历信息"),e.createElementVNode("text",{class:"require"},"(选填)")]),e.createElementVNode("view",{class:"tips"},[e.createElementVNode("image",{src:Pp,class:"img"}),e.createTextVNode("说明 ")])]),e.createElementVNode("view",{class:"remark"},"此项信息正式上线后会公开展示在个人资料"),e.createElementVNode("view",{class:"id-card-form-box"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.value,((i,s)=>(e.openBlock(),e.createElementBlock("view",{class:"id-card-form-content",key:s},[e.createElementVNode("view",{class:"form-item"},[e.createElementVNode("view",{class:"label"},"起始时间"),e.createElementVNode("view",{class:e.normalizeClass(["content",t.value?"":"weight"])},[e.createTextVNode(e.toDisplayString(null==i.startDate?"请选择":i.startDate),1),e.createVNode(p,{type:"right",size:"14",color:"rgba(0, 0, 0, 0.3)"})],2)]),e.createElementVNode("view",{class:"form-item"},[e.createElementVNode("view",{class:"label"},"截止时间"),e.createElementVNode("view",{class:e.normalizeClass(["content",t.value?"":"weight"])},[e.createTextVNode(e.toDisplayString(null==i.endDate?"请选择":i.endDate),1),e.createVNode(p,{type:"right",size:"14",color:"rgba(0, 0, 0, 0.3)"})],2)]),e.createElementVNode("view",{class:"form-item user-sign"},[e.createElementVNode("view",{class:"label"},"毕业院校"),e.createElementVNode("view",{class:"content-input",style:{width:"400rpx"}},[e.createVNode(a,{trim:"all",type:"text",placeholder:"请输入毕业院校",modelValue:i.schoolName,"onUpdate:modelValue":e=>i.schoolName=e,inputBorder:!1,clearable:!1,placeholderStyle:{"text-align":"right"}},null,8,["modelValue","onUpdate:modelValue"])])]),e.createElementVNode("view",{class:"form-item user-sign"},[e.createElementVNode("view",{class:"label"},"证书编号"),e.createElementVNode("view",{class:"content-input",style:{width:"400rpx"}},[e.createVNode(a,{trim:"all",type:"text",placeholder:"请输入证书编号",modelValue:i.number,"onUpdate:modelValue":e=>i.number=e,inputBorder:!1,clearable:!1,placeholderStyle:{"text-align":"right"}},null,8,["modelValue","onUpdate:modelValue"])])]),e.createElementVNode("view",{class:"form-item user-introduction"},[e.createElementVNode("view",{class:"label"},"证件照片"),e.createElementVNode("view",{class:"introduction-content"},[e.createElementVNode("view",{class:"img-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.imgUrl,((t,i)=>(e.openBlock(),e.createElementBlock("view",{class:"img-item"},[e.createElementVNode("image",{src:t,class:"img"},null,8,["src"]),e.createElementVNode("view",{class:"delete-item-img"}," 删除 ")])))),256))]),i.imgUrl.length<3?(e.openBlock(),e.createElementBlock("view",{key:0,class:"upload-image"},[e.createElementVNode("view",{class:"icon"},[e.createVNode(p,{type:"plusempty",size:"30",color:"rgba(0,0,0,.3)"})]),e.createElementVNode("view",{class:"txt"},"最多三张")])):e.createCommentVNode("",!0)])]),e.createElementVNode("view",{class:"line-box"},[e.createElementVNode("view",{class:"line line-delete"}),e.createElementVNode("view",{class:"delete-item",onClick:e=>(e=>{c.value.splice(e,1)})(s)},[e.createVNode(p,{type:"minus-filled",size:"30",color:"#FA5151"}),e.createTextVNode(" 移除 ")],8,["onClick"])])])))),128))]),e.createElementVNode("view",{class:"add-certificate-btn",onClick:E},[c.value.length>0?(e.openBlock(),e.createElementBlock("view",{key:0,class:"btn"},[e.createVNode(p,{type:"plus-filled",size:"18",color:"rgba(0,0,0,.85)"}),e.createTextVNode("增加一项")])):(e.openBlock(),e.createElementBlock("view",{key:1,class:"btn edit-btn"},[e.createElementVNode("image",{src:Op,class:"img"}),e.createTextVNode("编辑 ")]))])]),e.createElementVNode("view",{class:"certificate-content"},[e.createElementVNode("view",{class:"title"},[e.createElementVNode("view",null,[e.createTextVNode(" 我的经历"),e.createElementVNode("text",{class:"require"},"(选填)")]),e.createElementVNode("view",{class:"tips"},[e.createElementVNode("image",{src:Pp,class:"img"}),e.createTextVNode("说明 ")])]),e.createElementVNode("view",{class:"remark"},"此项信息正式上线后会公开展示在个人资料"),e.createElementVNode("view",{class:"id-card-form-box"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(d.value,((i,s)=>(e.openBlock(),e.createElementBlock("view",{class:"id-card-form-content",key:s},[e.createElementVNode("view",{class:"form-item"},[e.createElementVNode("view",{class:"label"},"起始时间"),e.createElementVNode("view",{class:e.normalizeClass(["content",t.value?"":"weight"])},[e.createTextVNode("请选择"),e.createVNode(p,{type:"right",size:"14",color:"rgba(0, 0, 0, 0.3)"})],2)]),e.createElementVNode("view",{class:"form-item"},[e.createElementVNode("view",{class:"label"},"截止时间"),e.createElementVNode("view",{class:e.normalizeClass(["content",t.value?"":"weight"])},[e.createTextVNode("请选择"),e.createVNode(p,{type:"right",size:"14",color:"rgba(0, 0, 0, 0.3)"})],2)]),e.createElementVNode("view",{class:"form-item user-sign"},[e.createElementVNode("view",{class:"label"},"培训课程"),e.createElementVNode("view",{class:"content-input",style:{width:"400rpx"}},[e.createVNode(a,{trim:"all",type:"text",placeholder:"请输入培训课程",inputBorder:!1,clearable:!1,placeholderStyle:{"text-align":"right"}})])]),e.createElementVNode("view",{class:"form-item user-introduction"},[e.createElementVNode("view",{class:"label"},"证件照片"),e.createElementVNode("view",{class:"introduction-content"},[e.createElementVNode("view",{class:"img-list"},[e.createElementVNode("view",{class:"img-item"},[e.createElementVNode("image",{src:u,class:"img"}),e.createElementVNode("view",{class:"delete-item-img"}," 删除 ")])]),r.value.length<3?(e.openBlock(),e.createElementBlock("view",{key:0,class:"upload-image"},[e.createElementVNode("view",{class:"icon"},[e.createVNode(p,{type:"plusempty",size:"30",color:"rgba(0,0,0,.3)"})]),e.createElementVNode("view",{class:"txt"},"最多三张")])):e.createCommentVNode("",!0)])]),e.createElementVNode("view",{class:"line-box"},[e.createElementVNode("view",{class:"line line-delete"}),e.createElementVNode("view",{class:"delete-item",onClick:e=>(e=>{d.value.splice(e,1)})(s)},[e.createVNode(p,{type:"minus-filled",size:"30",color:"#FA5151"}),e.createTextVNode(" 移除 ")],8,["onClick"])])])))),128)),e.createElementVNode("view",{class:"add-certificate-btn",onClick:w},[d.value.length>0?(e.openBlock(),e.createElementBlock("view",{key:0,class:"btn"},[e.createVNode(p,{type:"plus-filled",size:"18",color:"rgba(0,0,0,.85)"}),e.createTextVNode("增加一项")])):(e.openBlock(),e.createElementBlock("view",{key:1,class:"btn edit-btn"},[e.createElementVNode("image",{src:Op,class:"img"}),e.createTextVNode("编辑 ")]))])])])])])}}},Fp=X(Lp,[["__scopeId","data-v-e50c9c61"]]),Up={__name:"auth",setup(t){e.useCssVars((e=>({"4b16a936":a.value})));const n=W(),a=e.ref(n.statusBarHeight+"px"),r=e.ref(Cd),l=e.ref(1);e.ref(null);const c=e.ref({}),d=e.ref(null),u=e.ref(null),m=e.ref("");o((e=>{i("log","at pages/auth/auth.vue:112",e),m.value=e.type,h()}));const h=()=>{((e,t={})=>_.post("/api/consultant/consultant/getConsultantByUserId",e,t))({consultantType:m.value}).then((e=>{i("log","at pages/auth/auth.vue:119",e),c.value=e.data}))},p=e.ref({idCard:{consultantName:"",idNum:""},career:{profession:"",experience:""},certificate:{files:[]}}),g=()=>{var e;1==l.value&&(null==(e=d.value)||e.submit()),2==l.value&&(c.value.consultantType=m.value,i("log","at pages/auth/auth.vue:149",c),((e,t={})=>_.post("/api/consultant/consultant/step2",e,t))(c.value).then((e=>{l.value=l.value+1})))},y=()=>{l.value=l.value+1},f=()=>{uni.showToast({title:"资料已提交，请等待审核"})},v=()=>{l.value=l.value-1};e.watch(l,((e,t)=>{i("log","at pages/auth/auth.vue:174",e),1==e?r.value=Cd:2==e?r.value=Bp:3==e&&(r.value=Fp)}));const E=async()=>{var e;i("log","at pages/auth/auth.vue:191",{...p.value.idCard,...p.value.career,certificates:p.value.certificate.files}),null==(e=u.value)||e.submit()};return(t,i)=>{const n=s(e.resolveDynamicComponent("u-icon"),dc);return e.openBlock(),e.createElementBlock("view",{class:"auth-box"},[e.createElementVNode("view",{class:"children-component"},[null==Fp.verifyStatus||0==Fp.verifyStatus?(e.openBlock(),e.createElementBlock("scroll-view",{key:0,"scroll-y":"true","show-scrollbar":!1,class:"scroll-content"},[e.createElementVNode("view",{class:"children-content"},[e.createElementVNode("view",{class:"top-bg"}),e.createElementVNode("view",{class:"current-component"},[e.createElementVNode("view",{class:"step-box"},[e.createElementVNode("view",{class:"step-content"},[e.createElementVNode("view",{class:e.normalizeClass(["step-item",1==l.value?"step-item-active":""])},[e.createElementVNode("view",{class:"step-num"},"1"),e.createElementVNode("view",{class:"step-txt"},"基本信息")],2),e.createElementVNode("view",{class:"step-line"}),e.createElementVNode("view",{class:e.normalizeClass(["step-item",2==l.value?"step-item-active":""])},[e.createElementVNode("view",{class:"step-num"},"2"),e.createElementVNode("view",{class:"step-txt"},"职业信息")],2),e.createElementVNode("view",{class:"step-line"}),e.createElementVNode("view",{class:e.normalizeClass(["step-item",3==l.value?"step-item-active":""])},[e.createElementVNode("view",{class:"step-num"},"3"),e.createElementVNode("view",{class:"step-txt"},"证书资料")],2)])]),e.createElementVNode("view",{class:"handler-components-box"},[e.withDirectives(e.createVNode(Cd,{modelValue:c.value,consultantType:m.value,onCommitted:y,ref_key:"idCardRef",ref:d,"onUpdate:modelValue":i[0]||(i[0]=e=>p.value.idCard=e)},null,8,["modelValue","consultantType"]),[[e.vShow,1==l.value]]),e.withDirectives(e.createVNode(Bp,{modelValue:c.value},null,8,["modelValue"]),[[e.vShow,2==l.value]]),e.withDirectives(e.createVNode(Fp,{onCommited:f,modelValue:c.value,consultantType:m.value,ref_key:"finalStep",ref:u},null,8,["modelValue","consultantType"]),[[e.vShow,3==l.value]]),e.createElementVNode("view",{class:"footer"},[e.createElementVNode("view",{class:"tip"},[e.createElementVNode("image",{src:"/static/auth/tip.svg",class:"img"}),e.createTextVNode("个人信息安全保障中 ")]),1==l.value?(e.openBlock(),e.createElementBlock("view",{key:0,class:"btn"},[e.createElementVNode("view",{class:"next",onClick:g},"填好了，下一步")])):e.createCommentVNode("",!0),2==l.value?(e.openBlock(),e.createElementBlock("view",{key:1,class:"btn step-2"},[e.createElementVNode("view",{class:"next prev",onClick:v},"上一步"),e.createElementVNode("view",{class:"next",onClick:g},"填好了，下一步")])):e.createCommentVNode("",!0),3==l.value?(e.openBlock(),e.createElementBlock("view",{key:2,class:"btn step-2"},[e.createElementVNode("view",{class:"next prev",onClick:v},"上一步"),e.createElementVNode("view",{class:"next",onClick:E},"提交审核")])):e.createCommentVNode("",!0)])])])])])):1==c.value.verifyStatus?(e.openBlock(),e.createElementBlock("view",{key:1},[e.createTextVNode(" --\x3e "),e.createElementVNode("view",null,[e.createVNode(n,{name:"info-circle-fill"})]),e.createElementVNode("view",null,[e.createElementVNode("text",null,"认证审核中，请稍后查看")]),e.createElementVNode("view",null,[e.createElementVNode("text",{onClick:i[1]||(i[1]=(...e)=>t.recheck&&t.recheck(...e)),style:{color:"red"}},"重新审核")])])):2==c.value.verifyStatus?(e.openBlock(),e.createElementBlock("view",{key:2},[e.createElementVNode("view",null,[e.createElementVNode("text",null,"您已认证成为心理咨询师")])])):(e.openBlock(),e.createElementBlock("view",{key:3},[e.createElementVNode("view",null,[e.createElementVNode("text",null,"您的资料未通过审核~")])]))])])}}},zp=X(Up,[["__scopeId","data-v-6c7e0177"]]),Gp={data:()=>({nowCity:"",locationStatus:"定位成功",letter:["A","B","C","D","E","F","G","H","J","K","L","M","N","P","Q","R","S","T","W","X","Y","Z"],hotCityList:[],allCityList:[],scrollId:"",animation:{},cityList:[]}),onLoad(e){this.nowCity="北京",this.getCityList()},methods:{letterTap(e){i("log","at pages/auth/cityChoose.vue:80",e),"热"==this.letter[e]?this.scrollId="re":this.scrollId=this.letter[e]},cityInputListener(e){let t=e.detail.value,i=this.allCityList,s=[];for(let n=0;n<i.length;n++)-1==i[n].city.indexOf(t)&&i[n].letter!=t.toUpperCase()||s.push(i[n]);""==t?this.formatCityData(this.cityList):this.formatCityData(s)},locationImageClick(){var e=this;this.animation=uni.createAnimation(),this.animation.rotate(360).step(),this.animation=this.animation.export(),this.locationStatus="定位中...",uni.getLocation({geocode:!0,success:t=>{null!=t.address&&(e.nowCity=t.address.city,e.locationStatus="定位成功")},fail:t=>{e.nowCity="获取定位信息失败",i("log","at pages/auth/cityChoose.vue:123","获取定位信息失败")}})},getCityList(){this.cityList=kd,this.formatCityData(kd)},formatCityData:function(e){for(let t=0;t<e.length;t++)0==t?e[t].show=!0:e[t].letter!=e[t-1].letter&&(e[t].show=!0,e[t-1].last=!0),1==e.length&&(e[0].last=!0),e.show=!1;this.allCityList=e},cityItemClick(e){var t=this.allCityList[e];i("log","at pages/auth/cityChoose.vue:156",t),uni.setStorageSync("verifyAddress",t.city),uni.navigateBack({delta:1})}}};const Hp=X(Gp,[["render",function(t,i,s,n,a,r){return e.openBlock(),e.createElementBlock("view",{class:"introScroll"},[e.createElementVNode("view",{class:"topView"},[e.createElementVNode("view",{class:"nowCityTextTipsView"},[e.createElementVNode("view",{class:"nowLocationCity"},[e.createTextVNode("当前地区："),e.createElementVNode("text",null,"北京市")]),e.createElementVNode("view",{class:"address"},[e.createElementVNode("image",{src:"/static/auth/current-address.png",class:"img"}),e.createTextVNode("自动定位 ")])])]),e.createElementVNode("view",{class:"city_right"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.letter,((t,i)=>(e.openBlock(),e.createElementBlock("text",{class:"letter_item",key:i,onClick:e.withModifiers((e=>r.letterTap(i)),["stop"])},e.toDisplayString(t),9,["onClick"])))),128))]),e.createElementVNode("scroll-view",{"scroll-with-animation":"true",class:"cityListView","scroll-y":"true","scroll-into-view":a.scrollId,"show-scrollbar":!1},[e.createElementVNode("view",{class:"forCityView"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.allCityList,((t,i)=>(e.openBlock(),e.createElementBlock("view",{class:"forCityItem",key:i},[t.show?(e.openBlock(),e.createElementBlock("view",{key:0,id:t.letter,class:"letterItemFirst"},e.toDisplayString(t.letter),9,["id"])):e.createCommentVNode("",!0),e.createElementVNode("text",{onClick:e=>r.cityItemClick(i),class:"itemCityContent"},e.toDisplayString(t.city),9,["onClick"]),t.last?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("view",{key:1,class:"line"}))])))),128))])],8,["scroll-into-view"])])}]]),jp={data:()=>({}),created(){this.popup=this.getParent()},methods:{getParent(e="uniPopup"){let t=this.$parent,i=t.$options.name;for(;i!==e;){if(t=t.$parent,!t)return!1;i=t.$options.name}return t}}},$p={en:{"uni-popup.cancel":"cancel","uni-popup.ok":"ok","uni-popup.placeholder":"pleace enter","uni-popup.title":"Hint","uni-popup.shareTitle":"Share to"},"zh-Hans":{"uni-popup.cancel":"取消","uni-popup.ok":"确定","uni-popup.placeholder":"请输入","uni-popup.title":"提示","uni-popup.shareTitle":"分享到"},"zh-Hant":{"uni-popup.cancel":"取消","uni-popup.ok":"確定","uni-popup.placeholder":"請輸入","uni-popup.title":"提示","uni-popup.shareTitle":"分享到"}},{t:qp}=ce($p);const Wp=X({name:"uniPopupDialog",mixins:[jp],emits:["confirm","close","update:modelValue","input"],props:{inputType:{type:String,default:"text"},showClose:{type:Boolean,default:!0},modelValue:{type:[Number,String],default:""},placeholder:{type:[String,Number],default:""},type:{type:String,default:"error"},mode:{type:String,default:"base"},title:{type:String,default:""},content:{type:String,default:""},beforeClose:{type:Boolean,default:!1},cancelText:{type:String,default:""},confirmText:{type:String,default:""},maxlength:{type:Number,default:-1},focus:{type:Boolean,default:!0}},data:()=>({dialogType:"error",val:""}),computed:{okText(){return this.confirmText||qp("uni-popup.ok")},closeText(){return this.cancelText||qp("uni-popup.cancel")},placeholderText(){return this.placeholder||qp("uni-popup.placeholder")},titleText(){return this.title||qp("uni-popup.title")}},watch:{type(e){this.dialogType=e},mode(e){"input"===e&&(this.dialogType="info")},value(e){setVal(e)},modelValue(e){setVal(e)},val(e){this.$emit("update:modelValue",e)}},created(){this.popup.disableMask(),"input"===this.mode?(this.dialogType="info",this.val=this.value,this.val=this.modelValue):this.dialogType=this.type},methods:{setVal(e){-1!=this.maxlength&&"input"===this.mode?this.val=e.slice(0,this.maxlength):this.val=e},onOk(){"input"===this.mode?this.$emit("confirm",this.val):this.$emit("confirm"),this.beforeClose||this.popup.close()},closeDialog(){this.$emit("close"),this.beforeClose||this.popup.close()},close(){this.popup.close()}}},[["render",function(t,i,s,n,a,r){return e.openBlock(),e.createElementBlock("view",{class:"uni-popup-dialog"},[e.createElementVNode("view",{class:"uni-dialog-title"},[e.createElementVNode("text",{class:e.normalizeClass(["uni-dialog-title-text",["uni-popup__"+a.dialogType]])},e.toDisplayString(r.titleText),3)]),"base"===s.mode?(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-dialog-content"},[e.renderSlot(t.$slots,"default",{},(()=>[e.createElementVNode("text",{class:"uni-dialog-content-text"},e.toDisplayString(s.content),1)]),!0)])):(e.openBlock(),e.createElementBlock("view",{key:1,class:"uni-dialog-content"},[e.renderSlot(t.$slots,"default",{},(()=>[e.withDirectives(e.createElementVNode("input",{class:"uni-dialog-input",maxlength:s.maxlength,"onUpdate:modelValue":i[0]||(i[0]=e=>a.val=e),type:s.inputType,placeholder:r.placeholderText,focus:s.focus},null,8,["maxlength","type","placeholder","focus"]),[[e.vModelDynamic,a.val]])]),!0)])),e.createElementVNode("view",{class:"uni-dialog-button-group"},[s.showClose?(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-dialog-button",onClick:i[1]||(i[1]=(...e)=>r.closeDialog&&r.closeDialog(...e))},[e.createElementVNode("text",{class:"uni-dialog-button-text"},e.toDisplayString(r.closeText),1)])):e.createCommentVNode("",!0),e.createElementVNode("view",{class:e.normalizeClass(["uni-dialog-button",s.showClose?"uni-border-left":""]),onClick:i[2]||(i[2]=(...e)=>r.onOk&&r.onOk(...e))},[e.createElementVNode("text",{class:"uni-dialog-button-text uni-button-color"},e.toDisplayString(r.okText),1)],2)])])}],["__scopeId","data-v-003c03da"]]),Jp={__name:"payment",setup(t){const n=e.ref([{money:"30",point:"600"},{money:"100",point:"900"},{money:"200",point:"1500"},{money:"800",point:"4500"}]),a=e.ref(0);e.ref(["wxpay","alipay"]),e.ref(0);const r=e.ref(30),o=e.ref(600),l=e.ref(1),c=e.ref("info"),d=e.ref("wxPay"),u=e=>{d.value=e},m=async e=>{let t=await((e,t={})=>_.post("/api/order/order/wxPay",e,t))({amount:r.value,type:"wxPay"});uni.requestPayment({provider:"wxpay",orderInfo:t.data.data,success(e){i("log","at pages/payment/payment.vue:123",e),uni.navigateBack({delta:1})},fail(e){i("log","at pages/payment/payment.vue:129",e)}}),consultantInfo.value=t.data};return(t,i)=>{const h=s(e.resolveDynamicComponent("uni-popup-dialog"),Wp),p=s(e.resolveDynamicComponent("uni-popup"),Qe);return e.openBlock(),e.createElementBlock("view",null,[e.createElementVNode("view",{class:"new-recharge-box"},[e.createElementVNode("view",{class:"recharge-wrap"},[e.createElementVNode("view",{class:"recharge-money-tips"},"请选择"),e.createElementVNode("view",{class:"recharge-new-choose clearfix"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.value,((t,i)=>(e.openBlock(),e.createElementBlock("view",{class:"recharge-new-item",key:i},[e.createElementVNode("view",{class:e.normalizeClass(a.value==i?"recharge-new-box recharge-new-active":"recharge-new-box"),onClick:e=>((e,t)=>{a.value=t,r.value=e.money,o.value=e.point,l.value=(e.money/e.point).toFixed(2),phoneRate.value=(e.point/3).toFixed(0)})(t,i)},[e.createElementVNode("view",{class:"recharge-new-money"},[e.createElementVNode("text",null,e.toDisplayString(t.money),1),e.createTextVNode("元 ")])],10,["onClick"])])))),128))])]),e.createElementVNode("view",{class:"recharge-pay-species"},[e.createElementVNode("view",{class:"recharge-pay-wechat",onClick:i[0]||(i[0]=e=>u("wxPay"))},[e.createElementVNode("view",{class:"recharge-pay-wechatflex"},[e.createElementVNode("image",{class:"recharge-pay-wechatimg",src:"http://cdn.yupao.com/pc/images/zgp/recharge-pay-wechatimg.png"}),e.createElementVNode("text",null,"微信支付")]),"wxPay"===d.value?(e.openBlock(),e.createElementBlock("image",{key:0,class:"recharge-pay-selected",src:"http://cdn.yupao.com/pc/images/zgp/recharge-pay-select.png"})):(e.openBlock(),e.createElementBlock("image",{key:1,class:"recharge-pay-select",src:"http://cdn.yupao.com/pc/images/zgp/recharge-pay-select.png"}))]),e.createElementVNode("view",{class:"recharge-pay-line"}),e.createElementVNode("view",{class:"recharge-pay-alipay",onClick:i[1]||(i[1]=e=>u("aliPay"))},[e.createElementVNode("view",{class:"recharge-pay-wechatflex"},[e.createElementVNode("image",{class:"recharge-pay-alipayimg",src:"http://cdn.yupao.com/pc/images/zgp/recharge-pay-alipayimg.png"}),e.createElementVNode("text",null,"支付宝支付")]),"aliPay"===d.value?(e.openBlock(),e.createElementBlock("image",{key:0,class:"recharge-pay-selected",src:"http://cdn.yupao.com/pc/images/zgp/recharge-pay-select.png"})):(e.openBlock(),e.createElementBlock("image",{key:1,class:"recharge-pay-select",src:"http://cdn.yupao.com/pc/images/zgp/recharge-pay-select.png"}))])])]),e.createElementVNode("view",{class:"recharge-pay-footer"},[e.createElementVNode("view",{style:{display:"flex","margin-left":"20rpx"}},[e.createElementVNode("view",{class:"recharge-pay-text"},"金额："),e.createElementVNode("view",{class:"recharge-pay-price"},[e.createTextVNode(" ￥："),e.createElementVNode("text",{class:"recharge-pay-money"},e.toDisplayString(r.value),1)])]),e.createElementVNode("view",{style:{display:"flex","margin-right":"20rpx"}},[e.createElementVNode("button",{class:"recharge-sure-price",onClick:m},"确认支付")])]),e.createVNode(p,{ref:"popupDialog",type:"dialog"},{default:e.withCtx((()=>[e.createVNode(h,{type:c.value,content:"充值需要绑定微信,是否绑定?",onConfirm:t.dialogConfirm,onClose:t.dialogClose},null,8,["type","onConfirm","onClose"])])),_:1},512)])}}},Yp=X(Jp,[["__scopeId","data-v-07264fd8"]]),Xp=X({__name:"payment-records",setup(t){const i=e.reactive({listParams:{current:1,size:10,params:{}},list:[]}),s=async()=>{let e=await((e,t={})=>_.post("/api/order/order/getPaymentList",e,t))(i.listParams);i.list=e.data.records};return e.onMounted((()=>{s()})),(t,s)=>(e.openBlock(),e.createElementBlock("div",{id:"root"},[e.createElementVNode("div",{class:"main___9FDcp full-view-height"},[e.createElementVNode("div",{class:"full-width full-height"},[e.createElementVNode("div",{class:"page___2I6dD"},[e.createElementVNode("div",{class:"itembox___3bAaX"},[e.createElementVNode("div",{class:"seat___1RmSx"}),e.createElementVNode("div",{class:"monthSummary___2DL3P",style:{position:"static"}},[e.createElementVNode("div",{class:"pick___3RLMZ"},[e.createElementVNode("div",{class:"content___1ecku"},[e.createElementVNode("span",null,"交易记录"),(e.openBlock(),e.createElementBlock("svg",{class:"icon downIcon___Q4qac","aria-hidden":"true"},[e.createElementVNode("use",{"xlink:href":"#icon-icon_tab_sx_nor"})]))])])]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.list,((t,i)=>(e.openBlock(),e.createElementBlock("div",{key:i,class:"recordItem___2uOUg"},[e.createElementVNode("div",{class:"recordItem-right___2fZAr"},[e.createElementVNode("div",{class:"recordItem-right-bom___2A4Xc"},[e.createElementVNode("div",{class:"recordItem-right-bom-time___16iEH"},e.toDisplayString(t.createTime),1),e.createElementVNode("div",{class:"recordItem-right-bom-time___16iEH"},e.toDisplayString(t.orderId),1),e.createElementVNode("div",{class:"recordItem-right-bom-r___3rFTN"},e.toDisplayString(t.amount)+"元 ",1),0===t.status?(e.openBlock(),e.createElementBlock("div",{key:0,class:"recordItem-right-bom-r___3rFTN",style:{color:"red"}}," 未支付 ")):1===t.status?(e.openBlock(),e.createElementBlock("div",{key:1,class:"recordItem-right-bom-r___3rFTN",style:{color:"green"}}," 已支付 ")):3===t.status?(e.openBlock(),e.createElementBlock("div",{key:2,class:"recordItem-right-bom-r___3rFTN",style:{color:"blue"}}," 已提现 ")):e.createCommentVNode("",!0)])])])))),128)),t.paymentList===[]?(e.openBlock(),e.createElementBlock("div",{key:0,class:"nodata___2AAad"}," 该月暂无积分记录 ")):e.createCommentVNode("",!0)])])])])]))}},[["__scopeId","data-v-116d7c73"]]);__definePage("pages/login/login",J),__definePage("pages/confide/index",be),__definePage("pages/confide/detail",Ge),__definePage("pages/consult/index",$e),__definePage("pages/consult/detail",Ke),__definePage("pages/index/index",Ml),__definePage("pages/message/index",Fl),__definePage("pages/my/index",Gl),__definePage("pages/readArticle/readArticle",Hl),__definePage("pages/readArticle/articleDetail",ql),__definePage("pages/settled/settled",Wl),__definePage("pages/consult-feel/consult-feel",Yl),__definePage("pages/evaluate/evaluate",Ql),__definePage("pages/forum/index/index",oc),__definePage("pages/forum/write/write",lc),__definePage("pages/forum/my/my",yc),__definePage("pages/forum/other/other",vc),__definePage("pages/forum/mailbox/mailbox",wc),__definePage("pages/forum/write/ask-question/ask-question",Nc),__definePage("pages/forum/write/send-dynamics/send-dynamics",bc),__definePage("pages/forum/write/write-mailbox/write-mailbox",Cc),__definePage("pages/forum/my/userInfo",$c),__definePage("pages/forum/write/choose-topic/choose-topic",qc),__definePage("pages/forum/index/qaDetail",Wc),__definePage("pages/psychological-test/index/index",Xc),__definePage("pages/psychological-test/order/order",Qc),__definePage("pages/psychological-test/test-type/test-type",Zc),__definePage("pages/psychological-test/start-test/start-test",td),__definePage("pages/psychological-test/comment/comment",sd),__definePage("pages/psychological-test/contact-consult/contact-consult",nd),__definePage("pages/psychological-test/test-result/test-result",rd),__definePage("pages/psychological-test/charge-test/charge-test",ld),__definePage("pages/psychological-test/free-test/free-test",cd),__definePage("pages/message/private-chat",pd),__definePage("pages/auth/auth",zp),__definePage("pages/auth/cityChoose",Hp),__definePage("pages/payment/payment",Yp),__definePage("pages/payment/payment-records",Xp);const Qp={whiteList:["/pages/login/login",{pattern:RegExp(/register/)}],blackList:["/pages/index/index",{pattern:RegExp(/detail/)}],uInfo:"token",loginPath:"/pages/login/login",toLogin:!0},Zp=["navigateTo","redirectTo","reLaunch","switchTab"];function Kp(e,t){let i="";for(let s in t)i+=`&${s}=${t[s]}`;i=i.replace("&","?"),eg(e+i)}function eg(e,t=0){let i=encodeURIComponent(e),s=Qp.loginPath+"?path="+i;t?uni.navigateTo({url:s}):uni.reLaunch({url:s})}const tg={onLaunch:function(e){!function({path:e,query:t}){(Qp.whiteList||Qp.blackList)&&(e="/"+e,uni.getStorageSync(Qp.uInfo)?"/pages/login/login"==e&&uni.reLaunch({url:"/pages/index/index"}):(Qp.whiteList&&!Qp.whiteList.includes(e)||Qp.blackList&&Qp.blackList.includes(e))&&Kp(e,t),Zp.forEach((e=>{uni.addInterceptor(e,{invoke(e){const t=uni.getStorageSync(Qp.uInfo),i=e.url.split("?")[0];let s=!0;return Qp.whiteList?s=Qp.whiteList.some((e=>"object"==typeof e&&e.pattern?e.pattern.test(i):i==e)):Qp.blackList&&(s=Qp.blackList.every((e=>"object"==typeof e&&e.pattern?!e.pattern.test(i):i!=e))),s||t?e:(eg(e.url,1),!1)}})})))}(e)},onShow:function(){},onHide:function(){},globalData:{httpImageUrl:"https://odd.dzjob.net/profile/upload"}};function ig(e,t,i,s){return new(i||(i=Promise))((function(n,a){function r(e){try{l(s.next(e))}catch(t){a(t)}}function o(e){try{l(s.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,o)}l((s=s.apply(e,t||[])).next())}))}var sg;"function"==typeof SuppressedError&&SuppressedError,function(e){e.RTC_LOST="RTC_LOST",e.RTC_RECONNECT="RTC_RECONNECT",e.RTC_TIMEOUT="RTC_TIMEOUT",e.RTC_ACCEPTED="RTC_ACCEPTED",e.RECEIVED_RTC_REMOTE_FLOW="RECEIVED_RTC_REMOTE_FLOW",e.GOEASY_TIMEOUT="GOEASY_TIMEOUT",e.GOEASY_DISCONNECTED="GOEASY_DISCONNECTED",e.RTC_REMOTE_MIC_CHANGED="RTC_REMOTE_MIC_CHANGED",e.RTC_REMOTE_CAMERA_CHANGED="RTC_REMOTE_CAMERA_CHANGED"}(sg||(sg={}));var ng={exports:{}};!function(e){function t(e){if(e)return function(e){for(var i in t.prototype)e[i]=t.prototype[i];return e}(e)}ng.exports=t,t.prototype.on=t.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},t.prototype.once=function(e,t){function i(){this.off(e,i),t.apply(this,arguments)}return i.fn=t,this.on(e,i),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i,s=this._callbacks["$"+e];if(!s)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var n=0;n<s.length;n++)if((i=s[n])===t||i.fn===t){s.splice(n,1);break}return this},t.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),i=this._callbacks["$"+e];if(i)for(var s=0,n=(i=i.slice(0)).length;s<n;++s)i[s].apply(this,t);return this},t.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},t.prototype.hasListeners=function(e){return!!this.listeners(e).length}}();var ag=ng.exports,rg={exports:{}},og=void 0!==f&&f.getRandomValues&&f.getRandomValues.bind(f)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(og){var lg=new Uint8Array(16);rg.exports=function(){return og(lg),lg}}else{var cg=new Array(16);rg.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),cg[t]=e>>>((3&t)<<3)&255;return cg}}for(var dg=[],ug=0;ug<256;++ug)dg[ug]=(ug+256).toString(16).substr(1);var mg,hg,pg=function(e,t){var i=t||0,s=dg;return[s[e[i++]],s[e[i++]],s[e[i++]],s[e[i++]],"-",s[e[i++]],s[e[i++]],"-",s[e[i++]],s[e[i++]],"-",s[e[i++]],s[e[i++]],"-",s[e[i++]],s[e[i++]],s[e[i++]],s[e[i++]],s[e[i++]],s[e[i++]]].join("")},gg=rg.exports,yg=pg,fg=0,vg=0,Eg=rg.exports,wg=pg,Ng=function(e,t,i){var s=t&&i||0,n=t||[],a=(e=e||{}).node||mg,r=void 0!==e.clockseq?e.clockseq:hg;if(null==a||null==r){var o=gg();null==a&&(a=mg=[1|o[0],o[1],o[2],o[3],o[4],o[5]]),null==r&&(r=hg=16383&(o[6]<<8|o[7]))}var l=void 0!==e.msecs?e.msecs:(new Date).getTime(),c=void 0!==e.nsecs?e.nsecs:vg+1,d=l-fg+(c-vg)/1e4;if(d<0&&void 0===e.clockseq&&(r=r+1&16383),(d<0||l>fg)&&void 0===e.nsecs&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");fg=l,vg=c,hg=r;var u=(1e4*(268435455&(l+=122192928e5))+c)%4294967296;n[s++]=u>>>24&255,n[s++]=u>>>16&255,n[s++]=u>>>8&255,n[s++]=255&u;var m=l/4294967296*1e4&268435455;n[s++]=m>>>8&255,n[s++]=255&m,n[s++]=m>>>24&15|16,n[s++]=m>>>16&255,n[s++]=r>>>8|128,n[s++]=255&r;for(var h=0;h<6;++h)n[s+h]=a[h];return t||yg(n)},kg=function(e,t,i){var s=t&&i||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var n=(e=e||{}).random||(e.rng||Eg)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t)for(var a=0;a<16;++a)t[s+a]=n[a];return t||wg(n)},bg=kg;bg.v1=Ng,bg.v4=kg;var Cg=bg;const Sg=ag;class xg{constructor(){this.emitter=new Sg}on(e,t){return this.emitter.on(e,t),this}once(e,t){return this.emitter.once(e,t),this}off(e,t){return this.emitter.off(e,t),this}fire(e,t){return this.emitter.emit(e,t),this}}let Vg=new class{isDef(e){return!this.isUndef(e)}isUndef(e){return null==e}isPrimitive(e){return"string"==typeof e||"number"==typeof e||"symbol"==typeof e||"boolean"==typeof e}isObject(e){return null!==e&&"object"==typeof e}isPlainObject(e){return"[object Object]"===Object.prototype.toString.call(e)}isRegExp(e){return"[object RegExp]"===Object.prototype.toString.call(e)}isValidArrayIndex(e){let t=parseFloat(String(e));return t>=0&&Math.floor(t)===t&&isFinite(e)}isString(e){return"string"==typeof e}isNumber(e){return"number"==typeof e}isStringOrNumber(e){return this.isString(e)||this.isNumber(e)}isArray(e){return"[object Array]"===Object.prototype.toString.call(e)}isEmpty(e){return this.isArray(e)?0===e.length:this.isObject(e)?!this.isDef(e):!this.isNumber(e)&&(this.isString(e)?""===e.trim():!this.isDef(e))}isNative(e){return"function"==typeof e&&/native code/.test(e.toString())}isFunction(e){return"function"==typeof e}isBoolean(e){return"boolean"==typeof e}isTrue(e){return!0===e}isFalse(e){return!1===e}isNull(e){return null===e}};const Tg=ag;class Ag{constructor(){this.emitter=new Tg}on(e,t){if(!Vg.isString(e))throw Error("event require a string.");if(!Vg.isFunction(t))throw Error("callback must be a function");this.emitter.on(e,t)}fire(e,t){this.emitter.emit(e,t)}off(e,t){this.emitter.off(e,t)}}class _g{static init(e,t,i,s,n,a){this.Socket=e,this.N=t,this.Member=i,this.v=s,this.Platform=n,this.GModules=a}}const Ig=Cg;var Dg,Bg,Rg,Mg;(Bg=Dg||(Dg={})).WRITE="WRITE",Bg.READ="READ",Bg.NONE="NONE";class Pg{constructor(e){this.permission=Dg.NONE,this.singleTimeout=0,this.totalTimeout=0,this.startTime=0,this.complete=!1,this.retried=0,this.unique=!1,this.uuid=class{static get(){return Ig.v1().replace(/-/g,"")}}.get(),this.name=e.name,this.params=e.params,this.permission=e.permission,this.totalTimeout=e.totalTimeout,this.singleTimeout=e.singleTimeout,e.unique&&(this.unique=e.unique),this.success=t=>{this.complete||(this.end(),e.success(t))},this.fail=t=>{this.complete||(this.end(),e.fail(t))}}start(){this.startTime=Date.now(),this.initAutoTimeout()}end(){this.complete=!0,clearTimeout(this.timeoutHandler)}initAutoTimeout(){this.timeoutHandler=setTimeout((()=>{this.complete||this.fail({resultCode:408,content:"Host unreachable or timeout"})}),this.totalTimeout)}}class Og extends class{constructor(){this.eventDriver=new xg}on(e,t){this.eventDriver.on(e,t)}off(e,t){this.eventDriver.off(e,t)}fire(e,t){this.eventDriver.fire(e,t)}}{static init(){this.i=new Og}}class Lg{constructor(){this.callees=new Array}getDuration(){return Math.floor((Date.now()-this.acceptedAt)/1e3)}}class Fg{constructor(e,t,i){this.micMuted=!1,this.cameraMuted=!1,this.id=e,this.data=t,this.status=i}}class Ug{constructor(e){this.call=new Lg,this.call=e}}class zg{static init(){this.eventCenter=new Ag}static on(e,t){this.eventCenter.on(e,t)}static fire(e,t){this.eventCenter.fire(e,t)}static off(e,t){this.eventCenter.off(e,t)}}!function(e){e.RING="RING",e.USER_RANG="USER_RANG",e.USER_QUIT="USER_QUIT",e.USER_ACCEPTED="USER_ACCEPTED",e.CALL_ENDED="CALL_ENDED",e.USER_MIC_CHANGED="USER_MIC_CHANGED",e.USER_CAMERA_CHANGED="USER_CAMERA_CHANGED"}(Rg||(Rg={}));class Gg{static setStatus(e){this.status&&this.status.destroy(),this.status=e,by.callContext.call.status=e.name()}static clearStatus(){this.status&&(this.status.destroy(),this.status=null)}}!function(e){e[e.AUDIO=0]="AUDIO",e[e.VIDEO=1]="VIDEO"}(Mg||(Mg={}));class Hg extends class{support(){return!0}getParams(){return this.params}setData(e){this.active=e.a,this.data=e.d}preConnect(e){}postConnect(){}}{static init(e){e.c(_g),this.module=new Hg,this.module.name=this.RTC_MODULE_NAME;let i=null;if(this.supportApp()){let e=t("RTCClientPlugin");e&&(i=e.v())}this.module.params={v:{n:"goeasy-rtc",v:"0.4.1",npv:i}},_g.GModules.initModule(this.module)}static check(){if(!this.module)throw new Error("Please init GRTC first.");if(!this.module.active)throw new Error("RTC unavailable. Please confirm if your GoEasy application supports RTC or contact GoEasy team.");if(!this.supportApp()&&!this.supportBrowser())throw new Error("GRTC is only supported in Android and iOS apps developed with UniApp and Browsers");if(!this.supportGoEasyVersion())throw new Error("GRTC is only supported in GoEasy SDK version 2.10.0 or later")}static supportGoEasyVersion(){return _g.v.localeCompare("2.10.0",void 0,{numeric:!0,sensitivity:"base"})>=0}static supportApp(){return[_g.Platform.type.UNI_ANDROID,_g.Platform.type.UNI_IOS].includes(_g.Platform.current)}static supportBrowser(){return _g.Platform.type.BROWSER===_g.Platform.current}static supportWebview(){return void 0!==window.GRTCBridge}support(){return Hg.supportGoEasyVersion()&&(Hg.supportApp()||Hg.supportBrowser()||Hg.supportWebview())}postConnect(){Og.init(),zg.init(),Sy.init()}}Hg.RTC_MODULE_NAME="GRTC";let jg=new class{isDef(e){return!this.isUndef(e)}isUndef(e){return null==e}isPrimitive(e){return"string"==typeof e||"number"==typeof e||"symbol"==typeof e||"boolean"==typeof e}isObject(e){return null!==e&&"object"==typeof e}isString(e){return"string"==typeof e}isNumber(e){return"number"==typeof e}isStringOrNumber(e){return this.isString(e)||this.isNumber(e)}isArray(e){return"[object Array]"===Object.prototype.toString.call(e)}isEmpty(e){return this.isArray(e)?0===e.length:this.isObject(e)?!this.isDef(e):!this.isNumber(e)&&(this.isString(e)?""===e.trim():!this.isDef(e))}isNative(e){return"function"==typeof e&&/native code/.test(e.toString())}isFunction(e){return"function"==typeof e}};const $g=new class{validateId(e,t){if(jg.isEmpty(e))throw{code:400,content:` ${t} is required.`};if(!jg.isStringOrNumber(e))throw{code:400,content:`TypeError: ${t} require string or number.`}}validateNotification(e){if(e){if(!jg.isObject(e))throw{code:400,content:"TypeError: notification requires an object."};{if(t(e,"title",32),t(e,"body",50),jg.isDef(e.sound)&&!jg.isString(e.sound))throw{code:400,content:"notification.sound must be a string"};if(jg.isDef(e.badge)&&!jg.isString(e.badge))throw{code:400,content:"notification.badge must be a string"};e.badge=e.badge||"0";let s=e.vendorOptions;jg.isObject(s)&&(i(s,"huawei","category","string"),i(s,"xiaomi","channel_id","string"),i(s,"oppo","channel_id","string"),i(s,"vivo","classification","number"),i(s,"vivo","category","string"))}}function t(e,t,i){if(!(jg.isString(e[t])&&e[t].length<=i))throw{code:400,content:`notification.${t} must be a string of no more than ${i} characters`}}function i(e,t,i,s){let n=e[t];if(jg.isObject(n)&&jg.isDef(n[i])){let e={code:400,content:`notification.vendorOptions.${t}.${i} require a ${s}}`},a=n[i];if("string"===s&&!jg.isString(a))throw e;if("number"===s&&!jg.isNumber(a))throw e}}}validateObject(e,t){if(jg.isUndef(e)||!jg.isObject(e))throw{code:400,content:t+" must be an object."}}validateString(e,t){if(jg.isUndef(e)||!jg.isString(e))throw{code:400,content:t+" must be a string."}}};var qg,Wg,Jg,Yg,Xg,Qg;!function(e){e.ALL_BUSY="ALL_BUSY",e.DIAL_FAILED="DIAL_FAILED",e.CANCELLED="CANCELLED",e.REJECTED="REJECTED",e.HUNG_UP="HUNG_UP",e.RTC_DISCONNECTED="RTC_DISCONNECTED",e.GOEASY_DISCONNECTED="GOEASY_DISCONNECTED",e.HANDLED_ON_ANOTHER_DEVICE="HANDLED_ON_ANOTHER_DEVICE",e.RING_TIMEOUT="RING_TIMEOUT",e.ACCEPT_FAILED="ACCEPT_FAILED",e.DIAL_TIMEOUT="DIAL_TIMEOUT"}(qg||(qg={}));class Zg{}class Kg{constructor(e,t){this.joined=!1,this.token=t,this.video=e===Mg.VIDEO,this.userId=_g.Socket.user().id}play(e){}initLocal(){}}class ey extends Kg{constructor(e,t,i){super(t,i),this.client=e,this.token.video=this.video,this.token.userId=this.userId,this.client.createRTCClient(this.token),plus.globalEvent.addEventListener("connectionLost",(()=>{Og.i.fire(sg.RTC_LOST)})),plus.globalEvent.addEventListener("connectionRecovery",(e=>{Og.i.fire(sg.RTC_RECONNECT)})),plus.globalEvent.addEventListener("receivedRemoteFlow",(e=>{Og.i.fire(sg.RECEIVED_RTC_REMOTE_FLOW,e)})),plus.globalEvent.addEventListener("remoteMicChanged",(e=>{Og.i.fire(sg.RTC_REMOTE_MIC_CHANGED,e)})),plus.globalEvent.addEventListener("remoteCameraChanged",(e=>{Og.i.fire(sg.RTC_REMOTE_CAMERA_CHANGED,e)}))}destroy(){plus.globalEvent.removeEventListener("connectionLost"),plus.globalEvent.removeEventListener("connectionRecovery"),plus.globalEvent.removeEventListener("receivedRemoteFlow"),plus.globalEvent.removeEventListener("remoteMicChanged"),plus.globalEvent.removeEventListener("remoteCameraChanged"),this.joined&&(this.leave(),this.joined=!1),this.client.destroyEngine()}join(){return new Promise(((e,t)=>{this.client.joinChannel((()=>{this.userId,this.token.callId,this.joined=!0,e()}),(e=>{this.userId,this.token.callId,t({code:400,content:"Failed to join Channel, error code:"+e})}))}))}push(){this.video?this.client.callVideo():this.client.callAudio()}leave(){this.client.leaveChannel()}accept(){return ig(this,void 0,void 0,(function*(){yield this.join(),this.push()}))}muteMic(e){this.client.muteMic({enabled:e})}toggleSpeaker(e){this.client.enableSpeaker({enabled:e})}muteCamera(e){this.client.muteCamera({enabled:e})}switchCamera(){this.client.switchCamera()}}class ty extends Zg{constructor(){super(),this.nativePlugin=t("RTCClientPlugin"),this.nativePlugin||i("warn","at lib/goeasy-rtc-0.4.1.esm.min.js:1","Please configure GoEasy RTC native plugin first: https://www.goeasy.io")}createClient(e,t){return ig(this,void 0,void 0,(function*(){return new ey(this.nativePlugin,e,t)}))}requestPermission(e){return new Promise(((t,i)=>{Mg.VIDEO===e?this.nativePlugin.requestVideoCallPermission((e=>{200===e?t():i({code:403,content:"Failed to request video call permission, error code:"+e})})):Mg.AUDIO===e?this.nativePlugin.requestVoiceCallPermission((e=>{200===e?t():i({code:403,content:"Failed to request voice call permission, error code:"+e})})):i({code:400,content:"Unsupported media type"})}))}}!function(e){e.QN="QN",e.ALI="ALI",e.TX="TX",e.LK="LK"}(Wg||(Wg={}));class iy{constructor(e,t){this.userId=e,this.muted=t}}class sy extends Kg{constructor(e,t){super(e,t),this.localTracks=[],this.remoteTracks=new Map,this.QNRTC=(()=>{try{return require("qnweb-rtc").default||require("qnweb-rtc")}catch(e){throw new Error("Please run npm install qnweb-rtc")}})(),this.QNRTC.setLogLevel("NONE"),this.client=this.QNRTC.createClient(),this.initListeners()}initListeners(){this.client.on("connection-state-changed",((e,t)=>{"RECONNECTED"===e?Og.i.fire(sg.RTC_RECONNECT):"DISCONNECTED"===e&&Og.i.fire(sg.RTC_LOST)})),this.client.on("user-published",((e,t)=>{this.subscribe(e,t)}))}listenRemoteTrackMutedChanged(e){e.on("mute-state-changed",(t=>{let i=e.isAudio(),s=e.userID,n=i?sg.RTC_REMOTE_MIC_CHANGED:sg.RTC_REMOTE_CAMERA_CHANGED;Og.i.fire(n,new iy(s,t))}))}subscribe(e,t){return ig(this,void 0,void 0,(function*(){const i=yield this.client.subscribe(t);if(i.audioTracks.length>0&&(this.listenRemoteTrackMutedChanged(i.audioTracks[0]),i.audioTracks[0]._isMuted&&by.muteMemberMic(e,!0)),i.videoTracks.length>0&&(this.listenRemoteTrackMutedChanged(i.videoTracks[0]),i.videoTracks[0]._isMuted&&by.muteMemberCamera(e,!0)),this.remoteTracks.set(e,i),Og.i.fire(sg.RECEIVED_RTC_REMOTE_FLOW,{userId:e}),!1===this.video)this.playRemoteMicrophoneTracks();else{let t=this.getView(e);t&&this.playRemoteTrack(e,t)}}))}initLocal(){return ig(this,void 0,void 0,(function*(){yield this.initLocalTracks()}))}join(){return ig(this,void 0,void 0,(function*(){const e=this.token.vendorToken.token;yield this.client.join(e),this.joined=!0}))}push(){return ig(this,void 0,void 0,(function*(){yield this.client.publish(this.localTracks)}))}accept(){return ig(this,void 0,void 0,(function*(){yield this.join(),yield this.push()}))}initLocalTracks(){return ig(this,void 0,void 0,(function*(){if(!(this.localTracks.length>0))if(this.video){const e=this.token.vendorToken.videoEncoderConfig;this.localTracks=yield this.QNRTC.createMicrophoneAndCameraTracks({videoConfig:{encoderConfig:{width:e.w,height:e.h,frameRate:e.fps,bitrate:e.br}}})}else this.localTracks=[yield this.QNRTC.createMicrophoneAudioTrack()]}))}play(e){return ig(this,void 0,void 0,(function*(){if(this.video){const t=this.getView(e);this.userId===e?(yield this.initLocalTracks(),this.listenCustomAttributes(t),this.playLocalTrack(t)):(this.listenCustomAttributes(t),this.playRemoteTrack(e,t))}else this.playRemoteMicrophoneTracks()}))}getView(e){const t=document.getElementsByClassName("grtc-video");for(let i=0;i<t.length;i++){const s=t[i];if(s.getAttribute("userId")===e)return s}}listenCustomAttributes(e){new MutationObserver((t=>{t.forEach((t=>{const i=t.oldValue,s=e.getAttribute("userId");jg.isEmpty(s)||s===i||(this.userId===s?this.playLocalTrack(e):this.playRemoteTrack(s,e))}))})).observe(e,{attributes:!0,attributeOldValue:!0,attributeFilter:["userid"]})}playRemoteMicrophoneTracks(){const e=document.getElementsByClassName("grtc-audio")[0];e&&this.remoteTracks.forEach(((t,i)=>{for(const s of t.audioTracks)s.play(e)}))}playLocalTrack(e){for(const t of this.localTracks)t.isAudio()||t.play(e,{mirror:!0})}playRemoteTrack(e,t){const i=this.remoteTracks.get(e);if(i)for(const s of[...i.videoTracks,...i.audioTracks])s.play(t)}destroy(){this.joined&&this.leave(),this.releaseMediaTracks()}releaseMediaTracks(){for(const e of this.localTracks)e.destroy();this.localTracks=[],this.remoteTracks.clear()}leave(){return ig(this,void 0,void 0,(function*(){yield this.client.leave()}))}requestPermission(e){return ig(this,void 0,void 0,(function*(){}))}toggleSpeaker(e){throw new Error("not support.")}muteCamera(e){for(const t of this.localTracks)t.isVideo()&&t.setMuted(e)}muteMic(e){for(const t of this.localTracks)t.isAudio()&&t.setMuted(e)}switchCamera(){throw new Error("not support.")}}class ny extends Kg{constructor(e,t){super(e,t),this.localTracks=[],this.remoteTracks=new Map,this.isFrontFacing=!0,this.LiveKitRTC=this.loadLiveKitRTC(),this.resolution=this.LiveKitRTC.VideoPresets.h720.resolution;const i=new this.LiveKitRTC.DefaultReconnectPolicy([0,1e3,4e3,9e3,16e3]);this.client=new this.LiveKitRTC.Room({adaptiveStream:!1,dynacast:!1,videoCaptureDefaults:{resolution:this.resolution},reconnectPolicy:i}),this.initListeners()}loadLiveKitRTC(){try{return require("livekit-client")}catch(Lu){throw new Error("Please run npm install livekit-client@2.5.10")}}initListeners(){this.client.on(this.LiveKitRTC.RoomEvent.Reconnected,(()=>{Og.i.fire(sg.RTC_RECONNECT)})),this.client.on(this.LiveKitRTC.RoomEvent.Disconnected,(()=>{Og.i.fire(sg.RTC_LOST)})),this.client.on(this.LiveKitRTC.RoomEvent.TrackPublished,((e,t)=>{t.identity,e.setSubscribed(!0)})),this.client.on(this.LiveKitRTC.RoomEvent.ParticipantConnected,(e=>{e.identity,this.listenRemoteParticipant(e)})),this.client.on(this.LiveKitRTC.RoomEvent.TrackSubscribed,((e,t,i)=>{i.identity,this.handleTrackSubscribed(e,t,i)}))}handleTrackSubscribed(e,t,i){let s=i.identity;if(e.kind===this.LiveKitRTC.Track.Kind.Video||e.kind===this.LiveKitRTC.Track.Kind.Audio)if(this.video?e.kind===this.LiveKitRTC.Track.Kind.Video&&Og.i.fire(sg.RECEIVED_RTC_REMOTE_FLOW,{userId:s}):Og.i.fire(sg.RECEIVED_RTC_REMOTE_FLOW,{userId:s}),this.updateRemoteTracks(s,e),this.video){let e=this.getVideoView(s);e&&this.playRemoteTrack(s,e)}else this.playRemoteMicTracks()}updateRemoteTracks(e,t){let i=this.remoteTracks.get(e)||[];i.push(t),this.remoteTracks.set(e,i)}listenRemoteParticipant(e){const t=e.identity;e.on(this.LiveKitRTC.RoomEvent.TrackMuted,(e=>this.onTrackMuted(e,t))),e.on(this.LiveKitRTC.RoomEvent.TrackUnmuted,(e=>this.onTrackUnmuted(e,t)))}onTrackMuted(e,t){let i=e.kind;e.kind,i===this.LiveKitRTC.Track.Kind.Video?Og.i.fire(sg.RTC_REMOTE_CAMERA_CHANGED,new iy(t,!0)):i===this.LiveKitRTC.Track.Kind.Audio&&Og.i.fire(sg.RTC_REMOTE_MIC_CHANGED,new iy(t,!0))}onTrackUnmuted(e,t){let i=e.kind;i===this.LiveKitRTC.Track.Kind.Video?Og.i.fire(sg.RTC_REMOTE_CAMERA_CHANGED,new iy(t,!1)):i===this.LiveKitRTC.Track.Kind.Audio&&Og.i.fire(sg.RTC_REMOTE_MIC_CHANGED,new iy(t,!1))}initLocal(){return ig(this,void 0,void 0,(function*(){yield this.initLocalTracks()}))}join(){return ig(this,void 0,void 0,(function*(){const e=this.token.vendorToken;yield this.client.connect(e.url,e.token,{autoSubscribe:!1}),this.joined=!0}))}push(){return ig(this,void 0,void 0,(function*(){yield Promise.all(this.localTracks.map((e=>this.client.localParticipant.publishTrack(e,{simulcast:!1})))),this.client.remoteParticipants.forEach((e=>{e.trackPublications.forEach((e=>e.setSubscribed(!0))),this.listenRemoteParticipant(e)}))}))}accept(){return ig(this,void 0,void 0,(function*(){yield this.join(),yield this.push()}))}initLocalTracks(){return ig(this,void 0,void 0,(function*(){const e=yield this.LiveKitRTC.createLocalAudioTrack({echoCancellation:!0,noiseSuppression:!0});if(this.localTracks.push(e),this.video){const e=yield this.LiveKitRTC.createLocalVideoTrack({facingMode:"user"});this.localTracks.push(e)}}))}play(e){return ig(this,void 0,void 0,(function*(){if(this.video){const t=this.getVideoView(e);this.listenCustomAttributes(t),this.userId===e?this.playLocalTrack(t):this.playRemoteTrack(e,t)}else this.playRemoteMicTracks()}))}getVideoView(e){const t=document.getElementsByClassName("grtc-video");for(let i=0;i<t.length;i++){const s=t[i];if(s.getAttribute("userId")===e)return s}}listenCustomAttributes(e){new MutationObserver((t=>{t.forEach((t=>{const i=t.oldValue,s=e.getAttribute("userId");jg.isEmpty(s)||s===i||(this.userId===s?this.playLocalTrack(e):this.playRemoteTrack(s,e))}))})).observe(e,{attributes:!0,attributeOldValue:!0,attributeFilter:["userid"]})}playRemoteMicTracks(){const e=document.getElementsByClassName("grtc-audio")[0];if(e)for(const t of this.remoteTracks.values())for(const i of t){let t=i.attach();e.appendChild(t)}}playLocalTrack(e){this.playTrack(this.localTracks,e)}playRemoteTrack(e,t){const i=this.remoteTracks.get(e);i&&this.playTrack(i,t)}playTrack(e,t){for(const i of e){let e,s=i.kind,n=i.attach();s===this.LiveKitRTC.Track.Kind.Video?(n.style.width="100%",n.style.height="100%",n.style.objectFit="cover",e=t.querySelector("video")):s===this.LiveKitRTC.Track.Kind.Audio&&(e=t.querySelector("audio")),e?e.replaceWith(n):t.appendChild(n)}}destroy(){this.joined&&this.leave(),this.releaseMediaTracks()}releaseMediaTracks(){for(const e of this.localTracks)e.detach(),e.stop();this.localTracks=[],this.remoteTracks.clear()}leave(){return ig(this,void 0,void 0,(function*(){yield this.client.disconnect()}))}toggleSpeaker(e){throw new Error("not support.")}muteCamera(e){for(const t of this.localTracks)t.kind===this.LiveKitRTC.Track.Kind.Video&&this.client.localParticipant.setCameraEnabled(!e)}muteMic(e){for(const t of this.localTracks)t.kind===this.LiveKitRTC.Track.Kind.Audio&&this.client.localParticipant.setMicrophoneEnabled(!e)}switchCamera(){var e;const t=this.client.localParticipant.getTrackPublication(this.LiveKitRTC.Track.Source.Camera);if(!t)return;this.isFrontFacing=!this.isFrontFacing;const i={resolution:this.resolution,facingMode:this.isFrontFacing?"user":"environment"};null===(e=t.videoTrack)||void 0===e||e.restartTrack(i)}}class ay extends Kg{constructor(e,t){if(super(e,t),this.localTracks=[],this.fired={},this.mcuNotSubscribed=!0,this.DingRTC=(()=>{try{return require("dingrtc").default||require("dingrtc")}catch(e){throw new Error("Please run npm install dingrtc")}})(),this.DingRTC.setLogLevel("none"),!this.DingRTC.checkSystemRequirements())throw new Error("当前浏览器不支持dingrtc");this.client=this.DingRTC.createClient(),this.initListeners()}initListeners(){this.client.on("connection-state-change",((e,t,i)=>{"reconnecting"===t&&"connected"===e?Og.i.fire(sg.RTC_RECONNECT):"disconnected"===e&&Og.i.fire(sg.RTC_LOST)})),this.client.on("user-published",((e,t)=>{e.userId,this.subscribe(e.userId,t),this.fired[e.userId]||(this.fired[e.userId]=!0,e.userId,Og.i.fire(sg.RECEIVED_RTC_REMOTE_FLOW,{userId:e.userId}))})),this.client.on("user-info-updated",((e,t)=>{const i={"mute-audio":{event:sg.RTC_REMOTE_MIC_CHANGED,muted:!0},"unmute-audio":{event:sg.RTC_REMOTE_MIC_CHANGED,muted:!1},"mute-video":{event:sg.RTC_REMOTE_CAMERA_CHANGED,muted:!0},"unmute-video":{event:sg.RTC_REMOTE_CAMERA_CHANGED,muted:!1}}[t];i&&Og.i.fire(i.event,new iy(e,i.muted))}))}initLocal(){return ig(this,void 0,void 0,(function*(){yield this.initLocalTracks()}))}initLocalTracks(){return ig(this,void 0,void 0,(function*(){if(this.localTracks.length>0)return;const e=yield this.DingRTC.createMicrophoneAudioTrack();this.localTracks.push(e);const t=this.token.vendorToken.videoEncoderConfig;if(this.video){const e=yield this.DingRTC.createCameraVideoTrack({dimension:`VD_${t.w}x${t.h}`,frameRate:t.fps});this.localTracks.push(e)}}))}accept(){return ig(this,void 0,void 0,(function*(){yield this.join(),yield this.push()}))}join(){return ig(this,void 0,void 0,(function*(){const e=this.token.vendorToken,t={appId:e.appId,channel:this.token.callId.toString(),token:e.token,uid:this.userId,userName:this.userId};yield this.client.join(t),this.joined=!0,yield this.subscribeRemoteUser()}))}subscribeRemoteUser(){return ig(this,void 0,void 0,(function*(){const e=this.client.remoteUsers;if(!(e.length<=1))for(const t of e){const{userId:e,hasAudio:i,hasVideo:s,audioMuted:n,videoMuted:a}=t;s&&(yield this.subscribe(t.userId,"video")),i&&(yield this.subscribe(t.userId,"audio")),n&&by.muteMemberMic(t.userId,!0),a&&by.muteMemberCamera(t.userId,!0),Og.i.fire(sg.RECEIVED_RTC_REMOTE_FLOW,{userId:t.userId})}}))}subscribe(e,t){return ig(this,void 0,void 0,(function*(){if("video"===t){const t=yield this.client.subscribe(e,"video"),i=this.getView(e);i&&t.play(i)}else this.mcuNotSubscribed&&(this.mcuNotSubscribed=!1,(yield this.client.subscribe("mcu","audio")).play())}))}push(){return ig(this,void 0,void 0,(function*(){yield this.client.publish(this.localTracks)}))}play(e){return ig(this,void 0,void 0,(function*(){if(this.video){const t=this.getView(e);this.userId===e?(yield this.initLocalTracks(),this.playLocalVideoTrack(t)):this.playRemoteVideoTrack(e,t)}}))}getView(e){const t=document.getElementsByClassName("grtc-video");for(let i=0;i<t.length;i++){const s=t[i];if(s.getAttribute("userId")===e)return s}}playLocalVideoTrack(e){for(const t of this.localTracks)"video"===t.trackMediaType&&t.play(e,{mirror:!0})}playRemoteVideoTrack(e,t){var i;const s=this.client.remoteUsers.find((t=>t.userId===e));null===(i=null==s?void 0:s.videoTrack)||void 0===i||i.play(t)}destroy(){this.joined&&this.leave(),this.releaseMediaTracks()}releaseMediaTracks(){for(const e of this.localTracks)e.close();this.localTracks=[]}leave(){return ig(this,void 0,void 0,(function*(){yield this.client.leave()}))}requestPermission(e){return ig(this,void 0,void 0,(function*(){}))}toggleSpeaker(e){throw new Error("not support.")}muteCamera(e){for(const t of this.localTracks)"video"===t.trackMediaType&&t.setMuted(e)}muteMic(e){for(const t of this.localTracks)"audio"===t.trackMediaType&&t.setMuted(e)}switchCamera(){throw new Error("not support.")}}class ry extends Kg{constructor(e,t){super(e,t),this.videoAvailable={},this.TRTC=(()=>{try{return require("trtc-sdk-v5").default||require("trtc-sdk-v5")}catch(e){throw new Error("Please run npm install trtc-sdk-v5")}})(),this.TRTC.setLogLevel(5),this.client=this.TRTC.create(),this.initListeners()}initListeners(){this.client.on(this.TRTC.EVENT.CONNECTION_STATE_CHANGED,(({prevState:e,state:t})=>{"reconnecting"===e&&"connected"===t?Og.i.fire(sg.RTC_RECONNECT):"DISCONNECTED"===t&&Og.i.fire(sg.RTC_LOST)})),this.client.on(this.TRTC.EVENT.REMOTE_USER_ENTER,(({userId:e})=>{this.videoAvailable[e]=!1,by.muteMemberMic(e,!0),by.muteMemberCamera(e,!0),Og.i.fire(sg.RECEIVED_RTC_REMOTE_FLOW,{userId:e})})),this.client.on(this.TRTC.EVENT.REMOTE_AUDIO_AVAILABLE,(({userId:e})=>{this.client.muteRemoteAudio(e,!1),Og.i.fire(sg.RTC_REMOTE_MIC_CHANGED,new iy(e,!1))})),this.client.on(this.TRTC.EVENT.REMOTE_AUDIO_UNAVAILABLE,(({userId:e})=>{this.client.muteRemoteAudio(e,!0),Og.i.fire(sg.RTC_REMOTE_MIC_CHANGED,new iy(e,!0))})),this.client.on(this.TRTC.EVENT.REMOTE_VIDEO_AVAILABLE,(({userId:e,streamType:t})=>{this.videoAvailable[e]=!0;const i=this.getView(e);this.client.startRemoteVideo({userId:e,streamType:t,view:i}),Og.i.fire(sg.RTC_REMOTE_CAMERA_CHANGED,new iy(e,!1))})),this.client.on(this.TRTC.EVENT.REMOTE_VIDEO_UNAVAILABLE,(({userId:e})=>{this.videoAvailable[e]=!1,Og.i.fire(sg.RTC_REMOTE_CAMERA_CHANGED,new iy(e,!0))}))}initLocal(){return ig(this,void 0,void 0,(function*(){if(!(yield this.TRTC.isSupported()).result)throw new Error("当前浏览器不支持trtc");yield this.initLocalTracks()}))}initLocalTracks(){return ig(this,void 0,void 0,(function*(){if(this.client.getAudioTrack()||(yield this.client.startLocalAudio({publish:!1})),this.video&&!this.client.getVideoTrack()){const e=this.getView(this.userId),t=this.token.vendorToken.videoEncoderConfig;yield this.client.startLocalVideo({view:e,publish:!1,option:{profile:{width:t.w,height:t.h,frameRate:t.fps,bitrate:t.br}}})}}))}push(){return ig(this,void 0,void 0,(function*(){if(yield this.client.updateLocalAudio({publish:!0}),this.video){const e=this.getView(this.userId);yield this.client.updateLocalVideo({view:e,publish:!0})}}))}join(){return ig(this,void 0,void 0,(function*(){const e=this.token.vendorToken,t={strRoomId:this.token.callId.toString(),sdkAppId:e.sdkAppId,userId:this.userId,userSig:e.userSig};yield this.client.enterRoom(t),this.joined=!0}))}accept(){return ig(this,void 0,void 0,(function*(){yield this.join(),yield this.push()}))}play(e){return ig(this,void 0,void 0,(function*(){if(this.video){const t=this.getView(e);this.userId===e?(yield this.initLocalTracks(),yield this.playLocalVideoTrack(t)):yield this.playRemoteVideoTrack(e,t)}}))}getView(e){const t=document.getElementsByClassName("grtc-video");for(let i=0;i<t.length;i++){const s=t[i];if(s.getAttribute("userId")===e)return s}}playLocalVideoTrack(e){return ig(this,void 0,void 0,(function*(){yield this.client.updateLocalVideo({view:e})}))}playRemoteVideoTrack(e,t){return ig(this,void 0,void 0,(function*(){this.videoAvailable[e]?yield this.client.updateRemoteVideo({view:t,userId:e,streamType:this.TRTC.TYPE.STREAM_TYPE_MAIN}):yield this.client.startRemoteVideo({view:t,userId:e,streamType:this.TRTC.TYPE.STREAM_TYPE_MAIN})}))}destroy(){this.joined&&this.leave(),this.releaseMediaTracks()}releaseMediaTracks(){this.client.stopLocalAudio(),this.video&&this.client.stopLocalVideo(),this.client.stopRemoteVideo({userId:"*"})}leave(){return ig(this,void 0,void 0,(function*(){yield this.client.exitRoom()}))}requestPermission(e){return ig(this,void 0,void 0,(function*(){}))}toggleSpeaker(e){throw new Error("not support.")}muteCamera(e){this.client.updateLocalVideo({mute:e})}muteMic(e){this.client.updateLocalAudio({mute:e})}switchCamera(){throw new Error("not support.")}}class oy extends Zg{createClient(e,t){return ig(this,void 0,void 0,(function*(){let i,s=t.vendor;if(Wg.QN===s)i=new sy(e,t);else if(Wg.LK===s)i=new ny(e,t);else if(Wg.ALI===s)i=new ay(e,t);else{if(Wg.TX!==s)throw new Error("rtc vendor not support");i=new ry(e,t)}return yield i.initLocal(),i}))}requestPermission(e){return new Promise(((t,i)=>ig(this,void 0,void 0,(function*(){navigator.permissions&&navigator.permissions.query&&("denied"===(yield navigator.permissions.query({name:"microphone"})).state&&i({code:403,content:"Failed to request microphone permission"}),e===Mg.VIDEO&&"denied"===(yield navigator.permissions.query({name:"camera"})).state&&i({code:403,content:"Failed to request camera permission"})),t()}))))}}class ly{constructor(e,t,i){this.name=e,this.callId=t,this.data=i}static createCallCommand(e,t,i){let s={calleeIds:e.callees.map((e=>e.id)),mediaType:i.mediaType,groupId:i.groupId,callId:t};return i.notification&&(s.notification=i.notification),new ly(Jg.CALL,t,s)}}!function(e){e.CALL="CALL",e.QUIT="QUIT",e.BUSY="BUSY",e.ACCEPT="ACCEPT",e.RANG="RANG",e.HANGUP="HANGUP",e.CANCEL="CANCEL",e.REJECT="REJECT",e.RTC_DISCONNECT="RTC_DISCONNECT",e.GET_TOKEN="GET_TOKEN"}(Jg||(Jg={})),function(e){e.RTC_CMD="RTC_CMD",e.RTC_PKT="RTC_PKT"}(Yg||(Yg={})),function(e){e[e.connect=3e3]="connect",e[e.reconnectionDelayMax=3e3]="reconnectionDelayMax",e[e.commonQuerySingle=2500]="commonQuerySingle",e[e.commonQueryTotal=12e3]="commonQueryTotal",e[e.commonRequestSingle=1700]="commonRequestSingle",e[e.commonRequestTotal=12e3]="commonRequestTotal",e[e.commonInfiniteSingle=1700]="commonInfiniteSingle",e[e.commonInfiniteTotal=864e5]="commonInfiniteTotal"}(Xg||(Xg={}));class cy extends Kg{constructor(e,t){super(e,t),this._gnCallbacks={},this.CALLBACK_PREFIX="grtc_",this.token.video=this.video,this.token.userId=this.userId,window.GRTCBridge.createRTCClient(JSON.stringify(this.token)),window.handleGRTCCallback=this.handleGRTCCallback.bind(this),window.handleGRTCEvent=this.handleGRTCEvent.bind(this),window.addEventListener("beforeunload",(()=>this.cleanup()))}handleGRTCEvent(e,t){const s=JSON.parse(t);switch(e){case"connectionLost":Og.i.fire(sg.RTC_LOST);break;case"connectionRecovery":Og.i.fire(sg.RTC_RECONNECT);break;case"receivedRemoteFlow":Og.i.fire(sg.RECEIVED_RTC_REMOTE_FLOW,s);break;case"remoteMicChanged":Og.i.fire(sg.RTC_REMOTE_MIC_CHANGED,s);break;case"remoteCameraChanged":Og.i.fire(sg.RTC_REMOTE_CAMERA_CHANGED,s);break;default:i("warn","at lib/goeasy-rtc-0.4.1.esm.min.js:1",`[GRTC] 未处理的事件 ${e}`)}}static requestPermission(e){return new Promise(((t,i)=>{const s=`grtc_${Date.now()}`;window.handleGRTCPermissionCallback=(e,n,a)=>{if(e===s)try{n?i({code:403,content:"Failed to request call permission, error code: "+JSON.parse(n).code}):t()}catch(r){i({code:400,errorMsg:`JSON parse error: ${r.message}`})}finally{delete window.handleGRTCPermissionCallback}},e===Mg.VIDEO?window.GRTCBridge.requestVideoCallPermission(s):window.GRTCBridge.requestVoiceCallPermission(s)}))}accept(){return ig(this,void 0,void 0,(function*(){yield this.join(),this.push()}))}destroy(){window.handleGRTCEvent=null,window.handleGRTCCallback=null,this.joined&&(this.leave(),this.joined=!1),window.GRTCBridge.destroyEngine()}join(){return new Promise(((e,t)=>{const s=this.generateCallbackId();this.gnCallbacks[s]={resolve:()=>{this.joined=!0,this.userId,this.token.callId,e()},reject:e=>{i("warn","at lib/goeasy-rtc-0.4.1.esm.min.js:1",`user{${this.userId}} failed to join channel{${this.token.callId}}`,e),t(e)}};try{window.GRTCBridge.joinChannel(s)}catch(n){delete this.gnCallbacks[s],t({code:500,errorMsg:`Native call failed: ${n.message}`})}}))}leave(){window.GRTCBridge.leaveChannel()}muteCamera(e){window.GRTCBridge.muteCamera(e)}muteMic(e){window.GRTCBridge.muteMic(e)}push(){this.video?window.GRTCBridge.callVideo():window.GRTCBridge.callAudio()}switchCamera(){window.GRTCBridge.switchCamera()}toggleSpeaker(e){window.GRTCBridge.enableSpeaker(e)}generateCallbackId(){return`${this.CALLBACK_PREFIX}${Date.now()}_${Math.random().toString(36).substring(2,10)}`}cleanup(){Object.keys(this.gnCallbacks).forEach((e=>{delete this.gnCallbacks[e]}))}get gnCallbacks(){return this._gnCallbacks||(this._gnCallbacks={}),this._gnCallbacks}handleGRTCCallback(e,t,i){var s,n;const a=this.gnCallbacks[e];if(a)try{t?null===(s=a.reject)||void 0===s||s.call(a,JSON.parse(t)):null===(n=a.resolve)||void 0===n||n.call(a,i)}catch(r){a.reject({code:400,errorMsg:`JSON parse error: ${r.message}`})}finally{delete this.gnCallbacks[e]}}}class dy extends Zg{createClient(e,t){return ig(this,void 0,void 0,(function*(){return this.client=new cy(e,t),this.client}))}requestPermission(e){return cy.requestPermission(e)}}class uy{static init(){Hg.supportApp()?this.rtcPlugin=new ty:void 0!==window.GRTCBridge?this.rtcPlugin=new dy:this.rtcPlugin=new oy}static initClient(e,t){return ig(this,void 0,void 0,(function*(){let i=yield this.getNewToken(t);return this.vendorClient=yield this.rtcPlugin.createClient(e,i),i.callId}))}static getNewToken(e){return ig(this,void 0,void 0,(function*(){let t={name:Jg.GET_TOKEN};return e&&(t.callId=e),new Promise(((e,i)=>{let s=new Pg({name:Yg.RTC_CMD,params:t,permission:Dg.WRITE,singleTimeout:Xg.commonRequestSingle,totalTimeout:Xg.commonRequestTotal,success:t=>{e(t.content)},fail:e=>{i(e)}});_g.Socket.e(s)}))}))}}class hy{onRTCRemoteFlow(e){}onUserAcceptPacket(e){}onUserRang(e){return ig(this,void 0,void 0,(function*(){by.updateMemberStatus(e.callerId,"Ringing");const t=yield _g.Member.i.getData(e.callerId),i={id:e.callerId,data:t.get(e.callerId)};zg.fire(Rg.USER_RANG,{user:i})}))}onUserQuit(e){return ig(this,void 0,void 0,(function*(){return Promise.resolve()}))}onRTCTimeout(){}onGoEasyDisconnected(){by.destroyWithEvent(qg.GOEASY_DISCONNECTED)}destroy(){}muteMic(e){}toggleSpeaker(e){}switchCamera(){uy.vendorClient.switchCamera()}muteCamera(e){uy.vendorClient.muteCamera(e),by.muteMemberCamera(_g.Socket.user().id,e)}play(e){uy.vendorClient.play(e)}onRTCRemoteMicChanged(e){}onRTCRemoteCameraChanged(e){return ig(this,void 0,void 0,(function*(){}))}}class py{static sendRequest(e){return new Promise(((t,i)=>{let s=new Pg({name:Yg.RTC_CMD,params:e,permission:Dg.WRITE,singleTimeout:Xg.commonRequestSingle,totalTimeout:Xg.commonRequestTotal,success:e=>{t(e)},fail:e=>{i({code:400,content:e.content})}});_g.Socket.e(s)}))}}class gy extends hy{constructor(){super(),by.callContext.call.acceptedAt=Date.now()}name(){return"InCall"}accept(){return Promise.reject("The call has already been accepted")}end(){const e=new ly(Jg.HANGUP,by.callContext.call.id);py.sendRequest(e),by.destroyWithEvent(qg.HUNG_UP)}onRTCTimeout(){const e=new ly(Jg.RTC_DISCONNECT,by.callContext.call.id);py.sendRequest(e),by.destroyWithEvent(qg.RTC_DISCONNECTED)}onUserQuit(e){return ig(this,void 0,void 0,(function*(){by.updateMemberStatus(e.userId,"Quit");const t=yield _g.Member.i.getData(e.userId),i={id:e.userId,data:t.get(e.userId)};!0===e.ended?by.destroyWithEvent(e.reason,i):zg.fire(Rg.USER_QUIT,{user:i,reason:e.reason})}))}onRTCRemoteFlow(e){return ig(this,void 0,void 0,(function*(){const t=by.callContext.call;by.updateMemberStatus(e.userId,t.status);const i=yield _g.Member.i.getData(e.userId),s={id:e.userId,data:i.get(e.userId)};zg.fire(Rg.USER_ACCEPTED,{user:s})}))}muteMic(e){uy.vendorClient.muteMic(e),by.muteMemberMic(_g.Socket.user().id,e)}toggleSpeaker(e){uy.vendorClient.toggleSpeaker(e),by.toggleSpeaker(e)}onRTCRemoteMicChanged(e){return ig(this,void 0,void 0,(function*(){let t=e.userId;by.muteMemberMic(t,e.muted);const i={user:{id:t,data:(yield _g.Member.i.getData(t)).get(t)},micMuted:e.muted};zg.fire(Rg.USER_MIC_CHANGED,i)}))}onRTCRemoteCameraChanged(e){return ig(this,void 0,void 0,(function*(){let t=e.userId;by.muteMemberCamera(t,e.muted);const i={user:{id:t,data:(yield _g.Member.i.getData(t)).get(t)},cameraMuted:e.muted};zg.fire(Rg.USER_CAMERA_CHANGED,i)}))}}class yy extends hy{constructor(){super(),this.dialTimeoutId=setTimeout((()=>{by.destroyWithEvent(qg.DIAL_TIMEOUT)}),45e3)}name(){return"Dialing"}onUserQuit(e){return ig(this,void 0,void 0,(function*(){by.updateMemberStatus(e.userId,"Quit");const t=yield _g.Member.i.getData(e.userId),i={id:e.userId,data:t.get(e.userId)};!0===e.ended?by.destroyWithEvent(e.reason,i):zg.fire(Rg.USER_QUIT,{user:i,reason:e.reason})}))}accept(){return Promise.reject("Cannot accept the call during dialing.")}end(){const e=new ly(Jg.CANCEL,by.callContext.call.id);py.sendRequest(e),by.destroyWithEvent(qg.CANCELLED)}onRTCRemoteFlow(e){return ig(this,void 0,void 0,(function*(){Gg.setStatus(new gy),uy.vendorClient.push();const t=by.callContext.call;t.caller.status=t.status,by.updateMemberStatus(e.userId,t.status);const i=yield _g.Member.i.getData(e.userId),s={id:e.userId,data:i.get(e.userId)};zg.fire(Rg.USER_ACCEPTED,{user:s})}))}destroy(){clearTimeout(this.dialTimeoutId)}}class fy{static initNotificationAssembler(){_g.N.addAssembler({assemble:e=>({callId:e.callId}),support:e=>!!e.callId})}static createLocalNotification(e){const t=_g.N.supportAppNotification();let i=e.notification;if(!jg.isObject(i)||!t)return;let s={callId:e.callId};_g.N.createLocalNotification(i.title,i.body,s,i.sound,i.badge)}}class vy extends hy{constructor(){super(),this.startAccept=!1;const e=Date.now()-by.callContext.call.time;e>0&&(this.ringTimeoutId=setTimeout((()=>{by.destroyWithEvent(qg.RING_TIMEOUT)}),45e3-e))}name(){return"Ringing"}accept(){return new Promise(((e,t)=>ig(this,void 0,void 0,(function*(){try{if(this.startAccept)return void t("The call has already been accepted.");this.startAccept=!0;let i=by.callContext.call;try{yield uy.rtcPlugin.requestPermission(i.mediaType)}catch(s){return this.end(),void t(s)}const n=()=>{Og.i.off(sg.RTC_ACCEPTED,n),e()};Og.i.on(sg.RTC_ACCEPTED,n),yield uy.vendorClient.join(),uy.vendorClient.push()}catch(Lu){i("warn","at lib/goeasy-rtc-0.4.1.esm.min.js:1","accept failed:",Lu),by.destroyWithEvent(qg.ACCEPT_FAILED),t(Lu)}}))))}onUserAcceptPacket(e){e.userId===_g.Socket.user().id&&by.destroyWithEvent(qg.HANDLED_ON_ANOTHER_DEVICE)}onUserQuit(e){return ig(this,void 0,void 0,(function*(){try{yield this.startPromise}catch(n){return void i("warn","at lib/goeasy-rtc-0.4.1.esm.min.js:1","ring error",n)}by.updateMemberStatus(e.userId,"Quit");const t=yield _g.Member.i.getData(e.userId),s={id:e.userId,data:t.get(e.userId)};e.userId===_g.Socket.user().id?by.destroyWithEvent(qg.HANDLED_ON_ANOTHER_DEVICE):!0===e.ended?by.destroyWithEvent(e.reason,s):zg.fire(Rg.USER_QUIT,{user:s,reason:e.reason})}))}end(){const e=new ly(Jg.REJECT,by.callContext.call.id);py.sendRequest(e),by.destroyWithEvent(qg.REJECTED)}onRTCRemoteFlow(e){return ig(this,void 0,void 0,(function*(){Gg.setStatus(new gy);const t=new ly(Jg.ACCEPT,by.callContext.call.id);yield py.sendRequest(t);let i=by.callContext.call;"Quit"!==i.caller.status&&(i.caller.status=i.status),by.updateMemberStatus(_g.Socket.user().id,i.status),by.updateMemberStatus(e.userId,i.status),Og.i.fire(sg.RTC_ACCEPTED)}))}onUserRang(e){return ig(this,void 0,void 0,(function*(){}))}destroy(){clearTimeout(this.ringTimeoutId)}startRing(e){this.startPromise=new Promise(((t,s)=>ig(this,void 0,void 0,(function*(){try{fy.createLocalNotification(e),yield uy.initClient(e.type,e.callId);const i=Gg.status.name(),s=by.callContext.call;s.status=i;const n=e.users.map((e=>e.id)),a=yield _g.Member.i.getData(e.callerId,...n);s.caller=new Fg(e.callerId,a.get(e.callerId),i),s.callees=e.users.map((e=>new Fg(e.id,a.get(e.id),i)));const r=new ly(Jg.RANG,s.id);yield py.sendRequest(r);const o=yield _g.Member.i.getData(e.callerId),l={id:e.callerId,data:o.get(e.callerId)};zg.fire(Rg.RING,{user:l}),t()}catch(Lu){i("warn","at lib/goeasy-rtc-0.4.1.esm.min.js:1","Ring failed",Lu),by.destroy(),s(Lu)}}))))}}!function(e){e.RING="RING",e.USER_RANG="U_RANG",e.USER_QUIT="U_QUIT",e.USER_ACCEPTED="U_ACCEPTED",e.ENDED="ENDED"}(Qg||(Qg={}));class Ey{onServerPacket(e,t){switch(e){case Qg.RING:this.onRing(t);break;case Qg.USER_RANG:this.onUserRang(t);break;case Qg.USER_ACCEPTED:this.onUserAcceptPacket(t);break;case Qg.USER_QUIT:this.onUserQuit(t)}}}class wy extends Ey{name(){return"Busy"}accept(){return Gg.status.accept()}end(){Gg.status.end(),ky.setStatus(new Ny)}call(e){return Promise.reject("Another call is in progress.")}onRing(e){const t=new ly(Jg.BUSY,e.id);py.sendRequest(t)}onUserAcceptPacket(e){Gg.status.onUserAcceptPacket(e)}onUserRang(e){Gg.status.onUserRang(e)}onUserQuit(e){Gg.status.onUserQuit(e)}onRTCTimeout(){Gg.status.onRTCTimeout()}onRTCRemoteFlow(e){Gg.status.onRTCRemoteFlow(e)}onGoEasyDisconnected(){Gg.status.onGoEasyDisconnected()}muteMic(e){Gg.status.muteMic(e)}toggleSpeaker(e){Gg.status.toggleSpeaker(e)}muteCamera(e){Gg.status.muteCamera(e)}switchCamera(){Gg.status.switchCamera()}play(e){Gg.status.play(e)}onRTCRemoteMicChanged(e){Gg.status.onRTCRemoteMicChanged(e)}onRTCRemoteCameraChanged(e){Gg.status.onRTCRemoteCameraChanged(e)}}class Ny extends Ey{name(){return"Idle"}call(e){if(Hg.check(),$g.validateNotification(e.notification),!_g.Socket.user().id)throw new Error("Dialing failed: `id` is required when connecting to GoEasy.");return new Promise(((t,s)=>ig(this,void 0,void 0,(function*(){try{ky.setStatus(new wy),yield uy.rtcPlugin.requestPermission(e.mediaType),"calleeIds"in e?by.initGroupCall(e):by.initPrivateCall(e),Gg.setStatus(new yy);let i=yield uy.initClient(e.mediaType);uy.vendorClient.join();const n=by.callContext.call;n.id=i;const a=Gg.status.name();n.status=a;const r="calleeIds"in e?e.calleeIds:[e.calleeId],o=yield _g.Member.i.getData(...r);n.callees=r.map((e=>new Fg(e,o.get(e),"Ringing")));const l=ly.createCallCommand(n,i,e),c=(yield py.sendRequest(l)).content.users;n.callees=n.callees.filter((e=>!c.find((t=>t.userId===e.id&&t.busy)))),c.every((e=>e.busy))?(by.destroy(),s({code:400,content:"all callees are busy"})):t()}catch(Lu){i("warn","at lib/goeasy-rtc-0.4.1.esm.min.js:1","Call failed",Lu),by.destroy(),s(Lu)}}))))}onRing(e){return ig(this,void 0,void 0,(function*(){ky.setStatus(new wy),by.ring(e);let t=new vy;Gg.setStatus(t),t.startRing(e)}))}accept(){return Promise.reject("No active call to accept.")}end(){}onUserRang(e){}onUserAcceptPacket(e){}onUserQuit(e){}onRTCTimeout(){}onRTCRemoteFlow(e){}onGoEasyDisconnected(){}muteMic(){}toggleSpeaker(){}muteCamera(){}switchCamera(){}play(e){}onRTCRemoteCameraChanged(e){}onRTCRemoteMicChanged(e){}}class ky{static setStatus(e){this.status=e}}ky.status=new Ny;class by{static ring(e){const t=new Lg;t.id=e.callId,t.time=e.time,t.mediaType=e.type,t.groupId=e.groupId,t.speakerOn=!0,this.callContext=new Ug(t)}static initPrivateCall(e){return ig(this,void 0,void 0,(function*(){const t=new Lg;t.mediaType=e.mediaType,t.speakerOn=!0,t.caller=new Fg(_g.Socket.user().id,_g.Socket.user().data,"Dialing"),this.callContext=new Ug(t)}))}static initGroupCall(e){if(e.calleeIds.length>8)throw new Error("calleeIds can not more than 8");const t=new Lg;t.groupId=e.groupId,t.mediaType=e.mediaType,t.speakerOn=!0,t.caller=new Fg(_g.Socket.user().id,_g.Socket.user().data,"Dialing"),this.callContext=new Ug(t)}static updateMemberStatus(e,t){const i=this.callContext.call;[...i.callees,i.caller].find((t=>t.id===e)).status=t}static muteMemberMic(e,t){const i=this.callContext.call,s=[...i.callees,i.caller].find((t=>t.id===e));s.micMuted&&t||!s.micMuted&&!t||(s.micMuted=t)}static muteMemberCamera(e,t){const i=this.callContext.call,s=[...i.callees,i.caller].find((t=>t.id===e));s.cameraMuted&&t||!s.cameraMuted&&!t||(s.cameraMuted=t)}static toggleSpeaker(e){this.callContext.call.speakerOn=e}static isCaller(){return this.callContext.call.caller.id===_g.Socket.user().id}static destroyWithEvent(e,t=_g.Socket.user()){this.updateMemberStatus(t.id,"Quit"),zg.fire(Rg.USER_QUIT,{user:t,reason:e}),zg.fire(Rg.CALL_ENDED),this.destroy()}static destroy(){var e;null===(e=uy.vendorClient)||void 0===e||e.destroy(),this.callContext=null,Gg.clearStatus(),ky.setStatus(new Ny)}}class Cy{constructor(){Og.i.on(sg.RTC_LOST,(()=>this.onRTCLost())),Og.i.on(sg.RTC_RECONNECT,(()=>this.onRTCReconnect()))}onRTCLost(){by.callContext&&(this.rtcLostTimeoutId=setTimeout((()=>{Og.i.fire(sg.RTC_TIMEOUT)}),1e4))}onRTCReconnect(){clearTimeout(this.rtcLostTimeoutId)}onGoEasyLost(){this.goeasyLostTimeoutId=setTimeout((()=>{Og.i.fire(sg.GOEASY_TIMEOUT)}),2e4)}onGoEasyReconnected(){clearTimeout(this.goeasyLostTimeoutId)}}class Sy{static init(){this.instance=new Sy}static i(){if(this.instance)return this.instance;throw new Error("Please connect GoEasy first.")}constructor(){this.rtcStabilizer=new Cy,uy.init(),fy.initNotificationAssembler(),_g.Socket.onMessage(Yg.RTC_PKT,this.onServerPacket.bind(this)),Og.i.on(sg.RECEIVED_RTC_REMOTE_FLOW,this.onRTCRemoteFlow.bind(this)),Og.i.on(sg.RTC_TIMEOUT,this.onRTCTimeout.bind(this)),Og.i.on(sg.RTC_REMOTE_MIC_CHANGED,this.onRTCRemoteMicChanged.bind(this)),Og.i.on(sg.RTC_REMOTE_CAMERA_CHANGED,this.onRTCRemoteCameraChanged.bind(this)),_g.Socket.on(_g.Socket.EVENT.LOST,this.onGoEasyDisconnected.bind(this)),_g.Socket.on(_g.Socket.EVENT.DISCONNECT,this.onGoEasyDisconnected.bind(this))}on(e,t){zg.on(e.toString(),t)}off(e,t){zg.off(e.toString(),t)}call(e){return ig(this,void 0,void 0,(function*(){return ky.status.call(e)}))}groupCall(e){return ig(this,void 0,void 0,(function*(){return ky.status.call(e)}))}accept(){return ky.status.accept()}getCurrentCall(){var e;return(null===(e=by.callContext)||void 0===e?void 0:e.call)||null}end(){ky.status.end()}muteMic(e){ky.status.muteMic(e)}toggleSpeaker(e){ky.status.toggleSpeaker(e)}muteCamera(e){ky.status.muteCamera(e)}switchCamera(){ky.status.switchCamera()}play(e){ky.status.play(e)}onServerPacket(e){ky.status.onServerPacket(e.name,e.data)}onRTCTimeout(){ky.status.onRTCTimeout()}onRTCRemoteFlow(e){ky.status.onRTCRemoteFlow(e)}onGoEasyDisconnected(){ky.status.onGoEasyDisconnected()}onRTCRemoteMicChanged(e){ky.status.onRTCRemoteMicChanged(e)}onRTCRemoteCameraChanged(e){ky.status.onRTCRemoteCameraChanged(e)}}class xy{static init(e){Hg.init(e)}static call(e){return Sy.i().call(e)}static groupCall(e){return Sy.i().groupCall(e)}static accept(){return Sy.i().accept()}static currentCall(){return Sy.i().getCurrentCall()}static end(){Sy.i().end()}static muteMic(e){Sy.i().muteMic(e)}static toggleSpeaker(e){Sy.i().toggleSpeaker(e)}static muteCamera(e){Sy.i().muteCamera(e)}static switchCamera(){Sy.i().switchCamera()}static play(e){Sy.i().play(e)}static on(e,t){Sy.i().on(e,t)}static off(e,t){Sy.i().off(e,t)}}xy.EVENT=Rg;const Vy={data:()=>({}),onLoad(){this.$u.getRect=this.$uGetRect},methods:{$uGetRect(e,t){return new Promise((i=>{uni.createSelectorQuery().in(this)[t?"selectAll":"select"](e).boundingClientRect((e=>{t&&Array.isArray(e)&&e.length&&i(e),!t&&e&&i(e)})).exec()}))},getParentData(e=""){this.parent||(this.parent=!1),this.parent=this.$u.$parent.call(this,e),this.parent&&(Object.keys(this.parentData).map((e=>{this.parentData[e]=this.parent[e]})),this.parentData.value=this.parent.modelValue)},preventEvent(e){e&&e.stopPropagation&&e.stopPropagation()}},onReachBottom(){uni.$emit("uOnReachBottom")},beforeUnmount(){if(this.parent&&uni.$u.test.array(this.parent.children)){const e=this.parent.children;e.map(((t,i)=>{t===this&&e.splice(i,1)}))}}};function Ty(e){if([null,void 0,NaN,!1].includes(e))return e;if("object"!=typeof e&&"function"!=typeof e)return e;var t,i=(t=e,"[object Array]"===Object.prototype.toString.call(t)?[]:{});for(let s in e)e.hasOwnProperty(s)&&(i[s]="object"==typeof e[s]?Ty(e[s]):e[s]);return i}function Ay(e={},t={}){if("object"!=typeof(e=Ty(e))||"object"!=typeof t)return!1;for(var i in t)t.hasOwnProperty(i)&&(i in e?"object"!=typeof e[i]||"object"!=typeof t[i]?e[i]=t[i]:e[i].concat&&t[i].concat?e[i]=e[i].concat(t[i]):e[i]=Ay(e[i],t[i]):e[i]=t[i]);return e}function _y(e){return/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)}function Iy(e){switch(typeof e){case"undefined":return!0;case"string":if(0==e.replace(/(^[ \t\n\r]*)|([ \t\n\r]*$)/g,"").length)return!0;break;case"boolean":if(!e)return!0;break;case"number":if(0===e||isNaN(e))return!0;break;case"object":if(null===e||0===e.length)return!0;for(var t in e)return!1;return!0}return!1}function Dy(e){return"[object Object]"===Object.prototype.toString.call(e)}function By(e){return"function"==typeof e}const Ry={email:function(e){return/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/.test(e)},mobile:function(e){return/^1[23456789]\d{9}$/.test(e)},url:function(e){return/http(s)?:\/\/([\w-]+\.)+[\w-]+(\/[\w-.\/?%&=]*)?/.test(e)},date:function(e){return!!e&&(_y(e)&&(e=+e),!/Invalid|NaN/.test(new Date(e).toString()))},dateISO:function(e){return/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(e)},number:_y,digits:function(e){return/^\d+$/.test(e)},idCard:function(e){return/^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$/.test(e)},carNo:function(e){const t=/^[京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领A-Z]{1}[A-Z]{1}(([0-9]{5}[DF]$)|([DF][A-HJ-NP-Z0-9][0-9]{4}$))/,i=/^[京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领A-Z]{1}[A-Z]{1}[A-HJ-NP-Z0-9]{4}[A-HJ-NP-Z0-9挂学警港澳]{1}$/;return 7===e.length?i.test(e):8===e.length&&t.test(e)},amount:function(e){return/^[1-9]\d*(,\d{3})*(\.\d{1,2})?$|^0\.\d{1,2}$/.test(e)},chinese:function(e){return/^[\u4e00-\u9fa5]+$/gi.test(e)},letter:function(e){return/^[a-zA-Z]*$/.test(e)},enOrNum:function(e){return/^[0-9a-zA-Z]*$/g.test(e)},contains:function(e,t){return e.indexOf(t)>=0},range:function(e,t){return e>=t[0]&&e<=t[1]},rangeLength:function(e,t){return e.length>=t[0]&&e.length<=t[1]},empty:Iy,isEmpty:Iy,jsonString:function(e){if("string"==typeof e)try{var t=JSON.parse(e);return!("object"!=typeof t||!t)}catch(Lu){return!1}return!1},landline:function(e){return/^\d{3,4}-\d{7,8}(-\d{3,4})?$/.test(e)},object:Dy,array:function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)},code:function(e,t=6){return new RegExp(`^\\d{${t}}$`).test(e)},func:By,promise:function(e){return Dy(e)&&By(e.then)&&By(e.catch)},video:function(e){const t=e.split("?")[0];return new RegExp(/\.(mp4|mpg|mpeg|dat|asf|avi|rm|rmvb|mov|wmv|flv|mkv|m3u8|3gp)$/).test(t)},image:function(e){const t=e.split("?")[0];return new RegExp(/\.(jpeg|jpg|gif|png|svg|webp|jfif|bmp|dpg)$/).test(t)},regExp:function(e){return e&&"[object RegExp]"===Object.prototype.toString.call(e)},string:function(e){return"string"==typeof e}};const My=new class{setConfig(e){this.config=Ay(this.config,e)}request(e={}){if(this.interceptor.request&&"function"==typeof this.interceptor.request){let t=this.interceptor.request(e);if(!1===t)return new Promise((()=>{}));this.options=t}return e.dataType=e.dataType||this.config.dataType,e.responseType=e.responseType||this.config.responseType,e.url=e.url||"",e.params=e.params||{},e.header=Object.assign({},this.config.header,e.header),e.method=e.method||this.config.method,new Promise(((t,i)=>{e.complete=e=>{if(uni.hideLoading(),clearTimeout(this.config.timer),this.config.timer=null,this.config.originalData)if(this.interceptor.response&&"function"==typeof this.interceptor.response){let s=this.interceptor.response(e);!1!==s?t(s):i(e)}else t(e);else if(200==e.statusCode)if(this.interceptor.response&&"function"==typeof this.interceptor.response){let s=this.interceptor.response(e.data);!1!==s?t(s):i(e.data)}else t(e.data);else i(e)},e.url=Ry.url(e.url)?e.url:this.config.baseUrl+(0==e.url.indexOf("/")?e.url:"/"+e.url),this.config.showLoading&&!this.config.timer&&(this.config.timer=setTimeout((()=>{uni.showLoading({title:this.config.loadingText,mask:this.config.loadingMask}),this.config.timer=null}),this.config.loadingTime)),uni.request(e)}))}constructor(){this.config={baseUrl:"",header:{},method:"POST",dataType:"json",responseType:"text",showLoading:!0,loadingText:"请求中...",loadingTime:800,timer:null,originalData:!1,loadingMask:!0},this.interceptor={request:null,response:null},this.get=(e,t={},i={})=>this.request({method:"GET",url:e,header:i,data:t}),this.post=(e,t={},i={})=>this.request({url:e,method:"POST",header:i,data:t}),this.put=(e,t={},i={})=>this.request({url:e,method:"PUT",header:i,data:t}),this.delete=(e,t={},i={})=>this.request({url:e,method:"DELETE",header:i,data:t})}};const Py=(new class{constructor(){this.config={type:"navigateTo",url:"",delta:1,params:{},animationType:"pop-in",animationDuration:300,intercept:!1},this.route=this.route.bind(this)}addRootPath(e){return"/"===e[0]?e:`/${e}`}mixinParam(e,t){e=e&&this.addRootPath(e);let i="";return/.*\/.*\?.*=.*/.test(e)?(i=uni.$u.queryParams(t,!1),e+"&"+i):(i=uni.$u.queryParams(t),e+i)}async route(e={},t={}){let i={};if("string"==typeof e?(i.url=this.mixinParam(e,t),i.type="navigateTo"):(i=uni.$u.deepClone(e,this.config),i.url=this.mixinParam(e.url,e.params)),t.intercept&&(this.config.intercept=t.intercept),i.params=t,i=uni.$u.deepMerge(this.config,i),"function"==typeof uni.$u.routeIntercept){await new Promise(((e,t)=>{uni.$u.routeIntercept(i,e)}))&&this.openPage(i)}else this.openPage(i)}openPage(e){const{url:t,type:i,delta:s,animationType:n,animationDuration:a}=e;"navigateTo"!=e.type&&"to"!=e.type||uni.navigateTo({url:t,animationType:n,animationDuration:a}),"redirectTo"!=e.type&&"redirect"!=e.type||uni.redirectTo({url:t}),"switchTab"!=e.type&&"tab"!=e.type||uni.switchTab({url:t}),"reLaunch"!=e.type&&"launch"!=e.type||uni.reLaunch({url:t}),"navigateBack"!=e.type&&"back"!=e.type||uni.navigateBack({delta:s})}}).route;function Oy(e=null,t="yyyy-mm-dd"){e||(e=Number(new Date)),10==e.toString().length&&(e*=1e3);let i,s=new Date(e),n={"y+":s.getFullYear().toString(),"m+":(s.getMonth()+1).toString(),"d+":s.getDate().toString(),"h+":s.getHours().toString(),"M+":s.getMinutes().toString(),"s+":s.getSeconds().toString()};for(let a in n)i=new RegExp("("+a+")").exec(t),i&&(t=t.replace(i[1],1==i[1].length?n[a]:n[a].padStart(i[1].length,"0")));return t}function Ly(e,t=!0){if((e=e.toLowerCase())&&/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(e)){if(4===e.length){let t="#";for(let i=1;i<4;i+=1)t+=e.slice(i,i+1).concat(e.slice(i,i+1));e=t}let i=[];for(let t=1;t<7;t+=2)i.push(parseInt("0x"+e.slice(t,t+2)));return t?`rgb(${i[0]},${i[1]},${i[2]})`:i}if(/^(rgb|RGB)/.test(e)){return e.replace(/(?:\(|\)|rgb|RGB)*/g,"").split(",").map((e=>Number(e)))}return e}function Fy(e){let t=e;if(/^(rgb|RGB)/.test(t)){let e=t.replace(/(?:\(|\)|rgb|RGB)*/g,"").split(","),i="#";for(let t=0;t<e.length;t++){let s=Number(e[t]).toString(16);s=1==String(s).length?"0"+s:s,"0"===s&&(s+=s),i+=s}return 7!==i.length&&(i=t),i}if(!/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(t))return t;{let e=t.replace(/#/,"").split("");if(6===e.length)return t;if(3===e.length){let t="#";for(let i=0;i<e.length;i+=1)t+=e[i]+e[i];return t}}}String.prototype.padStart||(String.prototype.padStart=function(e,t=" "){if("[object String]"!==Object.prototype.toString.call(t))throw new TypeError("fillString must be String");let i=this;if(i.length>=e)return String(i);let s=e-i.length,n=Math.ceil(s/t.length);for(;n>>=1;)t+=t,1===n&&(t+=t);return t.slice(0,s)+i});const Uy={colorGradient:function(e="rgb(0, 0, 0)",t="rgb(255, 255, 255)",i=10){let s=Ly(e,!1),n=s[0],a=s[1],r=s[2],o=Ly(t,!1),l=(o[0]-n)/i,c=(o[1]-a)/i,d=(o[2]-r)/i,u=[];for(let m=0;m<i;m++){let e=Fy("rgb("+Math.round(l*m+n)+","+Math.round(c*m+a)+","+Math.round(d*m+r)+")");u.push(e)}return u},hexToRgb:Ly,rgbToHex:Fy,colorToRgba:function(e,t=.3){let i=(e=Fy(e)).toLowerCase();if(i&&/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(i)){if(4===i.length){var s="#";for(let e=1;e<4;e+=1)s+=i.slice(e,e+1).concat(i.slice(e,e+1));i=s}var n=[];for(let e=1;e<7;e+=2)n.push(parseInt("0x"+i.slice(e,e+2)));return"rgba("+n.join(",")+","+t+")"}return i}};function zy(){return uni.getSystemInfoSync()}let Gy=null;let Hy=[],jy=[];function $y(e,t="both"){return e=String(e),"both"==t?e.replace(/^\s+|\s+$/g,""):"left"==t?e.replace(/^\s*/,""):"right"==t?e.replace(/(\s*$)/g,""):"all"==t?e.replace(/\s+/g,""):e}let qy="1.10.1";const Wy={v:qy,version:qy,type:["primary","success","info","error","warning"]};const Jy={queryParams:function(e={},t=!0,i="brackets"){let s=t?"?":"",n=[];-1==["indices","brackets","repeat","comma"].indexOf(i)&&(i="brackets");for(let a in e){let t=e[a];if(!(["",void 0,null].indexOf(t)>=0))if(t.constructor===Array)switch(i){case"indices":for(let i=0;i<t.length;i++)n.push(a+"["+i+"]="+t[i]);break;case"brackets":default:t.forEach((e=>{n.push(a+"[]="+e)}));break;case"repeat":t.forEach((e=>{n.push(a+"="+e)}));break;case"comma":let e="";t.forEach((t=>{e+=(e?",":"")+t})),n.push(a+"="+e)}else n.push(a+"="+t)}return n.length?s+n.join("&"):""},route:Py,timeFormat:Oy,date:Oy,timeFrom:function(e=null,t="yyyy-mm-dd"){e||(e=Number(new Date)),10==e.toString().length&&(e*=1e3);let i=+new Date(Number(e)),s=(Number(new Date)-i)/1e3,n="";switch(!0){case s<300:n="刚刚";break;case s>=300&&s<3600:n=parseInt(s/60)+"分钟前";break;case s>=3600&&s<86400:n=parseInt(s/3600)+"小时前";break;case s>=86400&&s<2592e3:n=parseInt(s/86400)+"天前";break;default:n=!1===t?s>=2592e3&&s<31536e3?parseInt(s/2592e3)+"个月前":parseInt(s/31536e3)+"年前":Oy(i,t)}return n},colorGradient:Uy.colorGradient,colorToRgba:Uy.colorToRgba,guid:function(e=32,t=!0,i=null){let s="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),n=[];if(i=i||s.length,e)for(let a=0;a<e;a++)n[a]=s[0|Math.random()*i];else{let e;n[8]=n[13]=n[18]=n[23]="-",n[14]="4";for(let t=0;t<36;t++)n[t]||(e=0|16*Math.random(),n[t]=s[19==t?3&e|8:e])}return t?(n.shift(),"u"+n.join("")):n.join("")},color:{primary:"#2979ff",primaryDark:"#2b85e4",primaryDisabled:"#a0cfff",primaryLight:"#ecf5ff",bgColor:"#f3f4f6",info:"#909399",infoDark:"#82848a",infoDisabled:"#c8c9cc",infoLight:"#f4f4f5",warning:"#ff9900",warningDark:"#f29100",warningDisabled:"#fcbd71",warningLight:"#fdf6ec",error:"#fa3534",errorDark:"#dd6161",errorDisabled:"#fab6b6",errorLight:"#fef0f0",success:"#19be6b",successDark:"#18b566",successDisabled:"#71d5a1",successLight:"#dbf1e1",mainColor:"#303133",contentColor:"#606266",tipsColor:"#909399",lightColor:"#c0c4cc",borderColor:"#e4e7ed"},sys:function(){return zy()},os:function(){return zy().platform},type2icon:function(e="success",t=!1){-1==["primary","info","error","warning","success"].indexOf(e)&&(e="success");let i="";switch(e){case"primary":case"info":i="info-circle";break;case"error":i="close-circle";break;case"warning":i="error-circle";break;default:i="checkmark-circle"}return t&&(i+="-fill"),i},randomArray:function(e=[]){return e.sort((()=>Math.random()-.5))},wranning:function(e){},get:My.get,post:My.post,put:My.put,delete:My.delete,hexToRgb:Uy.hexToRgb,rgbToHex:Uy.rgbToHex,test:Ry,random:function(e,t){if(e>=0&&t>0&&t>=e){let i=t-e+1;return Math.floor(Math.random()*i+e)}return 0},deepClone:Ty,deepMerge:Ay,getParent:function(e,t){let i=this.$parent;for(;i;){if(i.$options.name===e){let e={};if(Array.isArray(t))t.map((t=>{e[t]=i[t]?i[t]:""}));else for(let s in t)Array.isArray(t[s])?t[s].length?e[s]=t[s]:e[s]=i[s]:t[s].constructor===Object?Object.keys(t[s]).length?e[s]=t[s]:e[s]=i[s]:e[s]=t[s]||!1===t[s]?t[s]:i[s];return e}i=i.$parent}return{}},$parent:function(e){let t=this.$parent;for(;t;){if(!t.$options||t.$options.name===e)return t;t=t.$parent}return!1},addUnit:function(e="auto",t="rpx"){return e=String(e),Ry.number(e)?`${e}${t}`:e},trim:function(e,t="both"){return"both"==t?e.replace(/^\s+|\s+$/g,""):"left"==t?e.replace(/^\s*/,""):"right"==t?e.replace(/(\s*$)/g,""):"all"==t?e.replace(/\s+/g,""):e},type:["primary","success","error","warning","info"],http:My,toast:function(e,t=1500){uni.showToast({title:e,icon:"none",duration:t})},config:Wy,zIndex:{toast:10090,noNetwork:10080,popup:10075,mask:10070,navbar:980,topTips:975,sticky:970,indexListSticky:965},debounce:function(e,t=500,i=!1){if(null!==Gy&&clearTimeout(Gy),i){var s=!Gy;Gy=setTimeout((function(){Gy=null}),t),s&&"function"==typeof e&&e()}else Gy=setTimeout((function(){"function"==typeof e&&e()}),t)},throttle:function(e,t=500,i=!0,s="default"){Hy[s]||(Hy[s]=null),i?jy[s]||(jy[s]=!0,"function"==typeof e&&e(),Hy[s]=setTimeout((()=>{jy[s]=!1}),t)):jy[s]||(jy[s]=!0,Hy[s]=setTimeout((()=>{jy[s]=!1,"function"==typeof e&&e()}),t))},addStyle:function(e,t="object"){if(Ry.empty(e)||"object"==typeof e&&"object"===t||"string"===t&&"string"==typeof e)return e;if("object"===t){const t=(e=$y(e)).split(";"),i={};for(let e=0;e<t.length;e++)if(t[e]){const s=t[e].split(":");i[$y(s[0])]=$y(s[1])}return i}let i="";for(const s in e){i+=`${s.replace(/([A-Z])/g,"-$1").toLowerCase()}:${e[s]};`}return $y(i)},getSystemInfoSync:zy};uni.$u=Jy;const Yy={install:e=>{e.mixin(Vy),e.config.globalProperties.$u=Jy}};Bl.init({host:"hangzhou.goeasy.io",appkey:"BC-2a25b89557b940cbadaf694c9e6879f4",modules:["im"],allowNotification:!0}),xy.init(Bl),uni.getStorageSync("currentUser"),uni.$GoEasy=Bl,uni.$GRTC=xy,Bl.onClickNotification((e=>{let t;const s=getCurrentPages();if(s&&s.length){t="/"+s[s.length-1].route+`?to=${s[s.length-1].options.to}`}let n;switch(e.toType){case Bl.IM_SCENE.PRIVATE:n="/pages/message/private-chat?to="+e.senderId;break;case Bl.IM_SCENE.GROUP:i("log","at main.js:57","暂无群消息")}t!==n&&uni.navigateTo({url:n})}));const{app:Xy,Vuex:Qy,Pinia:Zy}=function(){const t=e.createVueApp(tg),i=function(){const t=e.effectScope(!0),i=t.run((()=>e.ref({})));let s=[],n=[];const a=e.markRaw({install(e){B(a),a._a=e,e.provide(R,a),e.config.globalProperties.$pinia=a,n.forEach((e=>s.push(e))),n=[]},use(e){return this._a?s.push(e):n.push(e),this},_p:s,_a:null,_e:t,_s:new Map,state:i});return a}();return t.use(Yy),t.use(i),{app:t}}();uni.Vuex=Qy,uni.Pinia=Zy,Xy.provide("__globalStyles",__uniConfig.styles),Xy._component.mpType="app",Xy._component.render=()=>{},Xy.mount("#app")}(Vue);
